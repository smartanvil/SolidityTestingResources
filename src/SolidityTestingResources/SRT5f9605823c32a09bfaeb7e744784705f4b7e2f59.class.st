Class {
	#name : #SRT5f9605823c32a09bfaeb7e744784705f4b7e2f59,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5f9605823c32a09bfaeb7e744784705f4b7e2f59 >> base64 [
	^ 'LyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbglBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlCiAqIEBjb3B5cmlnaHQgKGMpIDIwMTcgZXRoZXJpc2MgR21iSAogKiBAYXV0aG9yIENocmlzdG9waCBNdXNzZW5icm9jawogKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwoKCmNvbnRyYWN0IEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZSB7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5SWQodWludDggX3Blcm0sIGJ5dGVzMzIgX2lkKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5SWQodWludDggX3Blcm0sIGJ5dGVzMzIgX2lkLCBib29sIF9hY2Nlc3MpIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5QWRkcmVzcyh1aW50OCBfcGVybSwgYWRkcmVzcyBfYWRkciwgYm9vbCBfYWNjZXNzKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gY2hlY2tQZXJtaXNzaW9uKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9GbGlnaHREZWxheUNvbnN0YW50cy5zb2wKCi8qKgogKiBGbGlnaHREZWxheSB3aXRoIE9yYWNsaXplZCBVbmRlcndyaXRpbmcgYW5kIFBheW91dAogKgogKiBAZGVzY3JpcHRpb24JRXZlbnRzIGFuZCBDb25zdGFudHMKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrCiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgRmxpZ2h0RGVsYXlDb25zdGFudHMgewoKICAgIC8qCiAgICAqIEdlbmVyYWwgZXZlbnRzCiAgICAqLwoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgZXZlbnQgTG9nVWludChzdHJpbmcgX21lc3NhZ2UsIHVpbnQgX3VpbnQpOwovLyAgICAgICAgZXZlbnQgTG9nVWludEV0aChzdHJpbmcgX21lc3NhZ2UsIHVpbnQgZXRoVWludCk7Ci8vICAgICAgICBldmVudCBMb2dVaW50VGltZShzdHJpbmcgX21lc3NhZ2UsIHVpbnQgdGltZVVpbnQpOwovLyAgICAgICAgZXZlbnQgTG9nSW50KHN0cmluZyBfbWVzc2FnZSwgaW50IF9pbnQpOwovLyAgICAgICAgZXZlbnQgTG9nQWRkcmVzcyhzdHJpbmcgX21lc3NhZ2UsIGFkZHJlc3MgX2FkZHJlc3MpOwovLyAgICAgICAgZXZlbnQgTG9nQnl0ZXMzMihzdHJpbmcgX21lc3NhZ2UsIGJ5dGVzMzIgaGV4Qnl0ZXMzMik7Ci8vICAgICAgICBldmVudCBMb2dCeXRlcyhzdHJpbmcgX21lc3NhZ2UsIGJ5dGVzIGhleEJ5dGVzKTsKLy8gICAgICAgIGV2ZW50IExvZ0J5dGVzMzJTdHIoc3RyaW5nIF9tZXNzYWdlLCBieXRlczMyIHN0ckJ5dGVzMzIpOwovLyAgICAgICAgZXZlbnQgTG9nU3RyaW5nKHN0cmluZyBfbWVzc2FnZSwgc3RyaW5nIF9zdHJpbmcpOwovLyAgICAgICAgZXZlbnQgTG9nQm9vbChzdHJpbmcgX21lc3NhZ2UsIGJvb2wgX2Jvb2wpOwovLyAgICAgICAgZXZlbnQgTG9nKGFkZHJlc3MpOwovLyA8LS0gdGVzdC1tb2RlCgogICAgZXZlbnQgTG9nUG9saWN5QXBwbGllZCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBhZGRyZXNzIF9jdXN0b21lciwKICAgICAgICBieXRlczMyIHN0ckNhcnJpZXJGbGlnaHROdW1iZXIsCiAgICAgICAgdWludCBldGhQcmVtaXVtCiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5QWNjZXB0ZWQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgdWludCBfc3RhdGlzdGljczAsCiAgICAgICAgdWludCBfc3RhdGlzdGljczEsCiAgICAgICAgdWludCBfc3RhdGlzdGljczIsCiAgICAgICAgdWludCBfc3RhdGlzdGljczMsCiAgICAgICAgdWludCBfc3RhdGlzdGljczQsCiAgICAgICAgdWludCBfc3RhdGlzdGljczUKICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lQYWlkT3V0KAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIHVpbnQgZXRoQW1vdW50CiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5RXhwaXJlZCgKICAgICAgICB1aW50IF9wb2xpY3lJZAogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeURlY2xpbmVkKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgc3RyUmVhc29uCiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5TWFudWFsUGF5b3V0KAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgc3RyUmVhc29uCiAgICApOwogICAgZXZlbnQgTG9nU2VuZEZ1bmRzKAogICAgICAgIGFkZHJlc3MgX3JlY2lwaWVudCwKICAgICAgICB1aW50OCBfZnJvbSwKICAgICAgICB1aW50IGV0aEFtb3VudAogICAgKTsKICAgIGV2ZW50IExvZ1JlY2VpdmVGdW5kcygKICAgICAgICBhZGRyZXNzIF9zZW5kZXIsCiAgICAgICAgdWludDggX3RvLAogICAgICAgIHVpbnQgZXRoQW1vdW50CiAgICApOwogICAgZXZlbnQgTG9nU2VuZEZhaWwoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBzdHJSZWFzb24KICAgICk7CiAgICBldmVudCBMb2dPcmFjbGl6ZUNhbGwoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBoZXhRdWVyeUlkLAogICAgICAgIHN0cmluZyBfb3JhY2xpemVVcmwsCiAgICAgICAgdWludDI1NiBfb3JhY2xpemVUaW1lCiAgICApOwogICAgZXZlbnQgTG9nT3JhY2xpemVDYWxsYmFjaygKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIGhleFF1ZXJ5SWQsCiAgICAgICAgc3RyaW5nIF9yZXN1bHQsCiAgICAgICAgYnl0ZXMgaGV4UHJvb2YKICAgICk7CiAgICBldmVudCBMb2dTZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICB1aW50OCBfcG9saWN5U3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKTsKICAgIGV2ZW50IExvZ0V4dGVybmFsKAogICAgICAgIHVpbnQyNTYgX3BvbGljeUlkLAogICAgICAgIGFkZHJlc3MgX2FkZHJlc3MsCiAgICAgICAgYnl0ZXMzMiBfZXh0ZXJuYWxJZAogICAgKTsKCiAgICAvKgogICAgKiBHZW5lcmFsIGNvbnN0YW50cwogICAgKi8KCiAgICAvLyBtaW5pbXVtIG9ic2VydmF0aW9ucyBmb3IgdmFsaWQgcHJlZGljdGlvbgogICAgdWludCBjb25zdGFudCBNSU5fT0JTRVJWQVRJT05TID0gMTA7CiAgICAvLyBtaW5pbXVtIHByZW1pdW0gdG8gY292ZXIgY29zdHMKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU0gPSA1MCBmaW5uZXk7CiAgICAvLyBtYXhpbXVtIHByZW1pdW0KICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU0gPSAxIGV0aGVyOwogICAgLy8gbWF4aW11bSBwYXlvdXQKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVCA9IDExMDAgZmlubmV5OwoKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU1fRVVSID0gMTUwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QUkVNSVVNX0VVUiA9IDI5MDAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVF9FVVIgPSAzMDAwMCB3ZWk7CgogICAgdWludCBjb25zdGFudCBNSU5fUFJFTUlVTV9VU0QgPSAxNzAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU1fVVNEID0gMzQwMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUEFZT1VUX1VTRCA9IDM1MDAwIHdlaTsKCiAgICB1aW50IGNvbnN0YW50IE1JTl9QUkVNSVVNX0dCUCA9IDEzMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUFJFTUlVTV9HQlAgPSAyNTAwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QQVlPVVRfR0JQID0gMjcwIHdlaTsKCiAgICAvLyBtYXhpbXVtIGN1bXVsYXRlZCB3ZWlnaHRlZCBwcmVtaXVtIHBlciByaXNrCiAgICB1aW50IGNvbnN0YW50IE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSA9IDYwIGV0aGVyOwogICAgLy8gMSBwZXJjZW50IGZvciBEQU8sIDEgcGVyY2VudCBmb3IgbWFpbnRhaW5lcgogICAgdWludDggY29uc3RhbnQgUkVXQVJEX1BFUkNFTlQgPSAyOwogICAgLy8gcmVzZXJ2ZSBmb3IgdGFpbCByaXNrcwogICAgdWludDggY29uc3RhbnQgUkVTRVJWRV9QRVJDRU5UID0gMTsKICAgIC8vIHRoZSB3ZWlnaHQgcGF0dGVybjsgaW4gZnV0dXJlIHZlcnNpb25zIHRoaXMgbWF5IGJlY29tZSBwYXJ0IG9mIHRoZSBwb2xpY3kgc3RydWN0LgogICAgLy8gY3VycmVudGx5IGNhbid0IGJlIGNvbnN0YW50IGJlY2F1c2Ugb2YgY29tcGlsZXIgcmVzdHJpY3Rpb25zCiAgICAvLyBXRUlHSFRfUEFUVEVSTlswXSBpcyBub3QgdXNlZCwganVzdCB0byBiZSBjb25zaXN0ZW50CiAgICB1aW50OFs2XSBXRUlHSFRfUEFUVEVSTiA9IFsKICAgICAgICAwLAogICAgICAgIDEwLAogICAgICAgIDIwLAogICAgICAgIDMwLAogICAgICAgIDUwLAogICAgICAgIDUwCiAgICBdOwoKLy8gLS0+IHByb2QtbW9kZQogICAgLy8gREVGSU5JVElPTlMgRk9SIFJPUFNURU4gQU5EIE1BSU5ORVQKICAgIC8vIG1pbmltdW0gdGltZSBiZWZvcmUgZGVwYXJ0dXJlIGZvciBhcHBseWluZwogICAgdWludCBjb25zdGFudCBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFCT0gMjQgaG91cnM7IC8vIGZvciBwcm9kdWN0aW9uCiAgICAvLyBjaGVjayBmb3IgZGVsYXkgYWZ0ZXIgLi4gbWludXRlcyBhZnRlciBzY2hlZHVsZWQgYXJyaXZhbAogICAgdWludCBjb25zdGFudCBDSEVDS19QQVlPVVRfT0ZGU0VUID0gMTUgbWludXRlczsgLy8gZm9yIHByb2R1Y3Rpb24KLy8gPC0tIHByb2QtbW9kZQoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgLy8gREVGSU5JVElPTlMgRk9SIExPQ0FMIFRFU1RORVQKLy8gICAgICAgIC8vIG1pbmltdW0gdGltZSBiZWZvcmUgZGVwYXJ0dXJlIGZvciBhcHBseWluZwovLyAgICAgICAgdWludCBjb25zdGFudCBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFID0gMSBzZWNvbmRzOyAvLyBmb3IgdGVzdGluZwovLyAgICAgICAgLy8gY2hlY2sgZm9yIGRlbGF5IGFmdGVyIC4uIG1pbnV0ZXMgYWZ0ZXIgc2NoZWR1bGVkIGFycml2YWwKLy8gICAgICAgIHVpbnQgY29uc3RhbnQgQ0hFQ0tfUEFZT1VUX09GRlNFVCA9IDEgc2Vjb25kczsgLy8gZm9yIHRlc3RpbmcKLy8gPC0tIHRlc3QtbW9kZQoKICAgIC8vIG1heGltdW0gZHVyYXRpb24gb2YgZmxpZ2h0CiAgICB1aW50IGNvbnN0YW50IE1BWF9GTElHSFRfRFVSQVRJT04gPSAyIGRheXM7CiAgICAvLyBEZWFkbGluZSBmb3IgYWNjZXB0YW5jZSBvZiBwb2xpY2llczogMzEuMTIuMjAzMCAoVGVzdG5ldCkKICAgIHVpbnQgY29uc3RhbnQgQ09OVFJBQ1RfREVBRF9MSU5FID0gMTkyMjM5NjM5OTsKCiAgICAvLyBnYXMgQ29uc3RhbnRzIGZvciBvcmFjbGl6ZQogICAgdWludCBjb25zdGFudCBPUkFDTElaRV9HQVMgPSA3MDAwMDA7CiAgICB1aW50IGNvbnN0YW50IE9SQUNMSVpFX0dBU1BSSUNFID0gNDAwMDAwMDAwMDsKCgogICAgLyoKICAgICogVVJMcyBhbmQgcXVlcnkgc3RyaW5ncyBmb3Igb3JhY2xpemUKICAgICovCgovLyAtLT4gcHJvZC1tb2RlCiAgICAvLyBERUZJTklUSU9OUyBGT1IgUk9QU1RFTiBBTkQgTUFJTk5FVAogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQogICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS5mbGlnaHRzdGF0cy5jb20vZmxleC9yYXRpbmdzL3Jlc3QvdjEvanNvbi9mbGlnaHQvIjsKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX1FVRVJZID0KICAgICAgICAiPyR7W2RlY3J5cHRdIEJBcjZaOVFvbE0yUFFpbUYvcE5DNnpYbGRPdloycXF1T1NLbS9xSmtKV25TR2dBZVJ3MjF3QkduQmJYaWFtci9JU0M1U2xjSkI2d0VQS3RoZGM2RitJcHFNL2lYYXZLc2FsUlVyR051QnNHZmFNWHI4ZlJRdzZnTHpxazBlY09GTmVDYTQ4L3lxQnZDL2thcytqVEtIaVl4QTN3VEpyVlpDcTc2WTAzbFpJMnh4TGFvbmlSa30pLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnLCdkZXBhcnR1cmVBaXJwb3J0RnNDb2RlJ10iOwogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19CQVNFX1VSTCA9CiAgICAgICAgLy8gZmxpZ2h0IHN0YXR1cyBhcGkgaXMgdjIsIHNlZSBodHRwczovL2RldmVsb3Blci5mbGlnaHRzdGF0cy5jb20vYXBpLWRvY3MvZmxpZ2h0c3RhdHVzL3YyL2ZsaWdodAogICAgICAgICJbVVJMXSBqc29uKGh0dHBzOi8vYXBpLmZsaWdodHN0YXRzLmNvbS9mbGV4L2ZsaWdodHN0YXR1cy9yZXN0L3YyL2pzb24vZmxpZ2h0L3N0YXR1cy8iOwogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19RVUVSWSA9CiAgICAgICAgLy8gcGF0dGVybjoKICAgICAgICAiPyR7W2RlY3J5cHRdIEJKeHB3UmFIdWpZVFQ5OHFJNXNsUUpwbGovVmJmVjd2WWtNT3AvTXI1RC81K2drZ0pRS1piMGdWU0NhNmFLeDJXb2dvL2NHN3lhV0lOUjZ2bnVZemNjUUU1eVZKU3I3UlFpbFJhd3huQXRaWHQ2SkI3MFlwWDR4bGZ2cGlwaXQ0UitPbVFUdXJKR0d3YjhQZ25yNEx2b3R5ZENqdXA2d3YyQmsvejNVZEdBN1NsK0ZVNWErMH0mdXRjPXRydWUpLmZsaWdodFN0YXR1c2VzWzBdWydzdGF0dXMnLCdkZWxheXMnLCdvcGVyYXRpb25hbFRpbWVzJ10iOwovLyA8LS0gcHJvZC1tb2RlCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAvLyBERUZJTklUSU9OUyBGT1IgTE9DQUwgVEVTVE5FVAovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQovLyAgICAgICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKLy8gICAgICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS10ZXN0LmV0aGVyaXNjLmNvbS9mbGV4L3JhdGluZ3MvcmVzdC92MS9qc29uL2ZsaWdodC8iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfUVVFUlkgPQovLyAgICAgICAgICAgIC8vIGZvciB0ZXN0cnBjOgovLyAgICAgICAgICAgICIpLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnLCdkZXBhcnR1cmVBaXJwb3J0RnNDb2RlJ10iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19CQVNFX1VSTCA9Ci8vICAgICAgICAgICAgLy8gZmxpZ2h0IHN0YXR1cyBhcGkgaXMgdjIsIHNlZSBodHRwczovL2RldmVsb3Blci5mbGlnaHRzdGF0cy5jb20vYXBpLWRvY3MvZmxpZ2h0c3RhdHVzL3YyL2ZsaWdodAovLyAgICAgICAgICAgICJbVVJMXSBqc29uKGh0dHBzOi8vYXBpLXRlc3QuZXRoZXJpc2MuY29tL2ZsZXgvZmxpZ2h0c3RhdHVzL3Jlc3QvdjIvanNvbi9mbGlnaHQvc3RhdHVzLyI7Ci8vICAgICAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX1FVRVJZID0KLy8gICAgICAgICAgICAvLyBmb3IgdGVzdHJwYzoKLy8gICAgICAgICAgICAiP3V0Yz10cnVlKS5mbGlnaHRTdGF0dXNlc1swXVsnc3RhdHVzJywnZGVsYXlzJywnb3BlcmF0aW9uYWxUaW1lcyddIjsKLy8gPC0tIHRlc3QtbW9kZQp9CgovLyBGaWxlOiBjb250cmFjdHMvRmxpZ2h0RGVsYXlDb250cm9sbGVySW50ZXJmYWNlLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBDb250cmFjdCBpbnRlcmZhY2UKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrLCBTdGVwaGFuIEthcnBpc2NoZWsKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIHJldHVybnMgKGJvb2wgX2lzT3duZXIpOwoKICAgIGZ1bmN0aW9uIHNlbGZSZWdpc3RlcihieXRlczMyIF9pZCkgcHVibGljIHJldHVybnMgKGJvb2wgcmVzdWx0KTsKCiAgICBmdW5jdGlvbiBnZXRDb250cmFjdChieXRlczMyIF9pZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2FkZHIpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBEYXRhYmFzZSBtb2RlbAogKiBAY29weXJpZ2h0IChjKSAyMDE3IGV0aGVyaXNjIEdtYkgKICogQGF1dGhvciBDaHJpc3RvcGggTXVzc2VuYnJvY2ssIFN0ZXBoYW4gS2FycGlzY2hlawogKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwoKCmNvbnRyYWN0IEZsaWdodERlbGF5RGF0YWJhc2VNb2RlbCB7CgogICAgLy8gTGVkZ2VyIGFjY291bnRzLgogICAgZW51bSBBY2MgewogICAgICAgIFByZW1pdW0sICAgICAgLy8gMAogICAgICAgIFJpc2tGdW5kLCAgICAgLy8gMQogICAgICAgIFBheW91dCwgICAgICAgLy8gMgogICAgICAgIEJhbGFuY2UsICAgICAgLy8gMwogICAgICAgIFJld2FyZCwgICAgICAgLy8gNAogICAgICAgIE9yYWNsaXplQ29zdHMgLy8gNQogICAgfQoKICAgIC8vIHBvbGljeSBTdGF0dXMgQ29kZXMgYW5kIG1lYW5pbmc6CiAgICAvLwogICAgLy8gMDAgPSBBcHBsaWVkOgkgIHRoZSBjdXN0b21lciBoYXMgcGF5ZWQgYSBwcmVtaXVtLCBidXQgdGhlIG9yYWNsZSBoYXMKICAgIC8vCQkJCQkgICAgICAgIG5vdCB5ZXQgY2hlY2tlZCBhbmQgY29uZmlybWVkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGN1c3RvbWVyIGNhbiBzdGlsbCByZXZva2UgdGhlIHBvbGljeS4KICAgIC8vIDAxID0gQWNjZXB0ZWQ6CSAgdGhlIG9yYWNsZSBoYXMgY2hlY2tlZCBhbmQgY29uZmlybWVkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGN1c3RvbWVyIGNhbiBzdGlsbCByZXZva2UgdGhlIHBvbGljeS4KICAgIC8vIDAyID0gUmV2b2tlZDoJICBUaGUgY3VzdG9tZXIgaGFzIHJldm9rZWQgdGhlIHBvbGljeS4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBwcmVtaXVtIG1pbnVzIGNhbmNlbGxhdGlvbiBmZWUgaXMgcGF5ZWQgYmFjayB0byB0aGUKICAgIC8vCQkJCQkgICAgICAgIGN1c3RvbWVyIGJ5IHRoZSBvcmFjbGUuCiAgICAvLyAwMyA9IFBhaWRPdXQ6CSAgVGhlIGZsaWdodCBoYXMgZW5kZWQgd2l0aCBkZWxheS4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBvcmFjbGUgaGFzIGNoZWNrZWQgYW5kIHBheWVkIG91dC4KICAgIC8vIDA0ID0gRXhwaXJlZDoJICBUaGUgZmxpZ2h0IGhhcyBlbmRldCB3aXRoIDwxNW1pbi4gZGVsYXkuCiAgICAvLwkJCQkJICAgICAgICBObyBwYXlvdXQuCiAgICAvLyAwNSA9IERlY2xpbmVkOgkgIFRoZSBhcHBsaWNhdGlvbiB3YXMgaW52YWxpZC4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBwcmVtaXVtIG1pbnVzIGNhbmNlbGxhdGlvbiBmZWUgaXMgcGF5ZWQgYmFjayB0byB0aGUKICAgIC8vCQkJCQkgICAgICAgIGN1c3RvbWVyIGJ5IHRoZSBvcmFjbGUuCiAgICAvLyAwNiA9IFNlbmRGYWlsZWQ6CUR1cmluZyBSZXZva2UsIERlY2xpbmUgb3IgUGF5b3V0LCBzZW5kaW5nIGV0aGVyIGZhaWxlZAogICAgLy8JCQkJCSAgICAgICAgZm9yIHVua25vd24gcmVhc29ucy4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBmdW5kcyByZW1haW4gaW4gdGhlIGNvbnRyYWN0cyBSaXNrRnVuZC4KCgogICAgLy8gICAgICAgICAgICAgICAgICAgMDAgICAgICAgMDEgICAgICAgIDAyICAgICAgIDAzICAgICAgICAwNCAgICAgIDA1ICAgICAgICAgICAwNgogICAgZW51bSBwb2xpY3lTdGF0ZSB7IEFwcGxpZWQsIEFjY2VwdGVkLCBSZXZva2VkLCBQYWlkT3V0LCBFeHBpcmVkLCBEZWNsaW5lZCwgU2VuZEZhaWxlZCB9CgogICAgLy8gb3JhY2xpemUgY2FsbGJhY2sgdHlwZXM6CiAgICBlbnVtIG9yYWNsaXplU3RhdGUgeyBGb3JVbmRlcndyaXRpbmcsIEZvclBheW91dCB9CgogICAgLy8gICAgICAgICAgICAgICAwMCAgIDAxICAgMDIgICAwMwogICAgZW51bSBDdXJyZW5jeSB7IEVUSCwgRVVSLCBVU0QsIEdCUCB9CgogICAgLy8gdGhlIHBvbGljeSBzdHJ1Y3R1cmU6IHRoaXMgc3RydWN0dXJlIGtlZXBzIHRyYWNrIG9mIHRoZSBpbmRpdmlkdWFsIHBhcmFtZXRlcnMgb2YgYSBwb2xpY3kuCiAgICAvLyB0eXBpY2FsbHkgY3VzdG9tZXIgYWRkcmVzcywgcHJlbWl1bSBhbmQgc29tZSBzdGF0dXMgaW5mb3JtYXRpb24uCiAgICBzdHJ1Y3QgUG9saWN5IHsKICAgICAgICAvLyAwIC0gdGhlIGN1c3RvbWVyCiAgICAgICAgYWRkcmVzcyBjdXN0b21lcjsKCiAgICAgICAgLy8gMSAtIHByZW1pdW0KICAgICAgICB1aW50IHByZW1pdW07CiAgICAgICAgLy8gcmlzayBzcGVjaWZpYyBwYXJhbWV0ZXJzOgogICAgICAgIC8vIDIgLSBwb2ludGVyIHRvIHRoZSByaXNrIGluIHRoZSByaXNrcyBtYXBwaW5nCiAgICAgICAgYnl0ZXMzMiByaXNrSWQ7CiAgICAgICAgLy8gY3VzdG9tIHBheW91dCBwYXR0ZXJuCiAgICAgICAgLy8gaW4gZnV0dXJlIHZlcnNpb25zLCBjdXN0b21lciB3aWxsIGJlIGFibGUgdG8gdGFtcGVyIHdpdGggdGhpcyBhcnJheS4KICAgICAgICAvLyB0byBrZWVwIHRoaW5ncyBzaW1wbGUsIHdlIGhhdmUgZGVjaWRlZCB0byBoYXJkLWNvZGUgdGhlIGFycmF5IGZvciBhbGwgcG9saWNpZXMuCiAgICAgICAgLy8gdWludDhbNV0gcGF0dGVybjsKICAgICAgICAvLyAzIC0gcHJvYmFiaWxpdHkgd2VpZ2h0LiB0aGlzIGlzIHRoZSBjZW50cmFsIHBhcmFtZXRlcgogICAgICAgIHVpbnQgd2VpZ2h0OwogICAgICAgIC8vIDQgLSBjYWxjdWxhdGVkIFBheW91dAogICAgICAgIHVpbnQgY2FsY3VsYXRlZFBheW91dDsKICAgICAgICAvLyA1IC0gYWN0dWFsIFBheW91dAogICAgICAgIHVpbnQgYWN0dWFsUGF5b3V0OwoKICAgICAgICAvLyBzdGF0dXMgZmllbGRzOgogICAgICAgIC8vIDYgLSB0aGUgc3RhdGUgb2YgdGhlIHBvbGljeQogICAgICAgIHBvbGljeVN0YXRlIHN0YXRlOwogICAgICAgIC8vIDcgLSB0aW1lIG9mIGxhc3Qgc3RhdGUgY2hhbmdlCiAgICAgICAgdWludCBzdGF0ZVRpbWU7CiAgICAgICAgLy8gOCAtIHN0YXRlIGNoYW5nZSBtZXNzYWdlL3JlYXNvbgogICAgICAgIGJ5dGVzMzIgc3RhdGVNZXNzYWdlOwogICAgICAgIC8vIDkgLSBUTFNOb3RhcnkgUHJvb2YKICAgICAgICBieXRlcyBwcm9vZjsKICAgICAgICAvLyAxMCAtIEN1cnJlbmN5CiAgICAgICAgQ3VycmVuY3kgY3VycmVuY3k7CiAgICAgICAgLy8gMTAgLSBFeHRlcm5hbCBjdXN0b21lciBpZAogICAgICAgIGJ5dGVzMzIgY3VzdG9tZXJFeHRlcm5hbElkOwogICAgfQoKICAgIC8vIHRoZSByaXNrIHN0cnVjdHVyZTsgdGhpcyBzdHJ1Y3R1cmUga2VlcHMgdHJhY2sgb2YgdGhlIHJpc2stCiAgICAvLyBzcGVjaWZpYyBwYXJhbWV0ZXJzLgogICAgLy8gc2V2ZXJhbCBwb2xpY2llcyBjYW4gc2hhcmUgdGhlIHNhbWUgcmlzayBzdHJ1Y3R1cmUgKHR5cGljYWxseQogICAgLy8gc29tZSBwZW9wbGUgZmx5aW5nIHdpdGggdGhlIHNhbWUgcGxhbmUpCiAgICBzdHJ1Y3QgUmlzayB7CiAgICAgICAgLy8gMCAtIEFpcmxpbmUgQ29kZSArIEZsaWdodE51bWJlcgogICAgICAgIGJ5dGVzMzIgY2FycmllckZsaWdodE51bWJlcjsKICAgICAgICAvLyAxIC0gc2NoZWR1bGVkIGRlcGFydHVyZSBhbmQgYXJyaXZhbCB0aW1lIGluIHRoZSBmb3JtYXQgL2RlcC9ZWVlZL01NL0RECiAgICAgICAgYnl0ZXMzMiBkZXBhcnR1cmVZZWFyTW9udGhEYXk7CiAgICAgICAgLy8gMiAtIHRoZSBpbml0YWwgYXJyaXZhbCB0aW1lCiAgICAgICAgdWludCBhcnJpdmFsVGltZTsKICAgICAgICAvLyAzIC0gdGhlIGZpbmFsIGRlbGF5IGluIG1pbnV0ZXMKICAgICAgICB1aW50IGRlbGF5SW5NaW51dGVzOwogICAgICAgIC8vIDQgLSB0aGUgZGV0ZXJtaW5lZCBkZWxheSBjYXRlZ29yeSAoMC01KQogICAgICAgIHVpbnQ4IGRlbGF5OwogICAgICAgIC8vIDUgLSB3ZSBsaW1pdCB0aGUgY3VtdWxhdGVkIHdlaWdodGVkIHByZW1pdW0gdG8gYXZvaWQgY2x1c3RlciByaXNrcwogICAgICAgIHVpbnQgY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtOwogICAgICAgIC8vIDYgLSBtYXggY3VtdWxhdGVkIFBheW91dCBmb3IgdGhpcyByaXNrCiAgICAgICAgdWludCBwcmVtaXVtTXVsdGlwbGllcjsKICAgIH0KCiAgICAvLyB0aGUgb3JhY2xpemUgY2FsbGJhY2sgc3RydWN0dXJlOiB3ZSB1c2Ugc2V2ZXJhbCBvcmFjbGl6ZSBjYWxscy4KICAgIC8vIGFsbCBvcmFjbGl6ZSBjYWxscyB3aWxsIHJlc3VsdCBpbiBhIGNvbW1vbiBjYWxsYmFjayB0byBfX2NhbGxiYWNrKC4uLikuCiAgICAvLyB0byBrZWVwIHRyYWNrIG9mIHRoZSBkaWZmZXJlbnQgcXVlcnlzIHdlIGhhdmUgdG8gaW50cm9kdWNlIHRoaXMgc3RydWN0LgogICAgc3RydWN0IE9yYWNsaXplQ2FsbGJhY2sgewogICAgICAgIC8vIGZvciB3aGljaCBwb2xpY3kgaGF2ZSB3ZSBjYWxsZWQ/CiAgICAgICAgdWludCBwb2xpY3lJZDsKICAgICAgICAvLyBmb3Igd2hpY2ggcHVycG9zZSBkaWQgd2UgY2FsbD8ge0ZvclVuZGVyd3JpdGUgfCBGb3JQYXlvdXR9CiAgICAgICAgb3JhY2xpemVTdGF0ZSBvU3RhdGU7CiAgICAgICAgLy8gdGltZQogICAgICAgIHVpbnQgb3JhY2xpemVUaW1lOwogICAgfQoKICAgIHN0cnVjdCBDdXN0b21lciB7CiAgICAgICAgYnl0ZXMzMiBjdXN0b21lckV4dGVybmFsSWQ7CiAgICAgICAgYm9vbCBpZGVudGl0eUNvbmZpcm1lZDsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0ZsaWdodERlbGF5Q29udHJvbGxlZENvbnRyYWN0LnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBDb250cm9sbGVkIGNvbnRyYWN0IEludGVyZmFjZQogKiBAY29weXJpZ2h0IChjKSAyMDE3IGV0aGVyaXNjIEdtYkgKICogQGF1dGhvciBDaHJpc3RvcGggTXVzc2VuYnJvY2sKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgoKCgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZWRDb250cmFjdCBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CiAgICBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgRkRfQ0k7CgogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlcihhZGRyZXNzIF9jb250cm9sbGVyKSBpbnRlcm5hbCByZXR1cm5zIChib29sIF9yZXN1bHQpIHsKICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7CiAgICAgICAgRkRfQ0kgPSBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UoX2NvbnRyb2xsZXIpOwogICAgICAgIF9yZXN1bHQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3RydWN0KCkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3QoY29udHJvbGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJhY3RzKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHt9CgogICAgZnVuY3Rpb24gZ2V0Q29udHJhY3QoYnl0ZXMzMiBfaWQpIGludGVybmFsIHJldHVybnMgKGFkZHJlc3MgX2FkZHIpIHsKICAgICAgICBfYWRkciA9IEZEX0NJLmdldENvbnRyYWN0KF9pZCk7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9GbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBEYXRhYmFzZSBjb250cmFjdCBpbnRlcmZhY2UKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrLCBTdGVwaGFuIEthcnBpc2NoZWsKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgoKCmNvbnRyYWN0IEZsaWdodERlbGF5RGF0YWJhc2VJbnRlcmZhY2UgaXMgRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsIHsKCiAgICB1aW50IHB1YmxpYyBNSU5fREVQQVJUVVJFX0xJTTsKCiAgICB1aW50IHB1YmxpYyBNQVhfREVQQVJUVVJFX0xJTTsKCiAgICBieXRlczMyW10gcHVibGljIHZhbGlkT3JpZ2luczsKCiAgICBieXRlczMyW10gcHVibGljIHZhbGlkRGVzdGluYXRpb25zOwoKICAgIGZ1bmN0aW9uIGNvdW50T3JpZ2lucygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9sZW5ndGgpOwoKICAgIGZ1bmN0aW9uIGdldE9yaWdpbkJ5SW5kZXgodWludDI1NiBfaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIgX29yaWdpbik7CgogICAgZnVuY3Rpb24gY291bnREZXN0aW5hdGlvbnMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfbGVuZ3RoKTsKCiAgICBmdW5jdGlvbiBnZXREZXN0aW5hdGlvbkJ5SW5kZXgodWludDI1NiBfaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIgX2Rlc3RpbmF0aW9uKTsKCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBnZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfYWxsb3dlZCkgOwoKICAgIGZ1bmN0aW9uIHNldExlZGdlcih1aW50OCBfaW5kZXgsIGludCBfdmFsdWUpIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBnZXRMZWRnZXIodWludDggX2luZGV4KSBwdWJsaWMgcmV0dXJucyAoaW50IF92YWx1ZSkgOwoKICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVyUHJlbWl1bSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtKSA7CgogICAgZnVuY3Rpb24gZ2V0UG9saWN5RGF0YSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCB1aW50IF93ZWlnaHQpIDsKCiAgICBmdW5jdGlvbiBnZXRQb2xpY3lTdGF0ZSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKHBvbGljeVN0YXRlIF9zdGF0ZSkgOwoKICAgIGZ1bmN0aW9uIGdldFJpc2tJZCh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX3Jpc2tJZCk7CgogICAgZnVuY3Rpb24gY3JlYXRlUG9saWN5KGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCBDdXJyZW5jeSBfY3VycmVuY3ksIGJ5dGVzMzIgX2N1c3RvbWVyRXh0ZXJuYWxJZCwgYnl0ZXMzMiBfcmlza0lkKSBwdWJsaWMgcmV0dXJucyAodWludCBfcG9saWN5SWQpIDsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBwb2xpY3lTdGF0ZSBfc3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0V2VpZ2h0KHVpbnQgX3BvbGljeUlkLCB1aW50IF93ZWlnaHQsIGJ5dGVzIF9wcm9vZikgcHVibGljOwoKICAgIGZ1bmN0aW9uIHNldFBheW91dHModWludCBfcG9saWN5SWQsIHVpbnQgX2NhbGN1bGF0ZWRQYXlvdXQsIHVpbnQgX2FjdHVhbFBheW91dCkgcHVibGljOwoKICAgIGZ1bmN0aW9uIHNldERlbGF5KHVpbnQgX3BvbGljeUlkLCB1aW50OCBfZGVsYXksIHVpbnQgX2RlbGF5SW5NaW51dGVzKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gZ2V0Umlza1BhcmFtZXRlcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHB1YmxpYyByZXR1cm5zIChieXRlczMyIF9jYXJyaWVyRmxpZ2h0TnVtYmVyLCBieXRlczMyIF9kZXBhcnR1cmVZZWFyTW9udGhEYXksIHVpbnQgX2Fycml2YWxUaW1lKSA7CgogICAgZnVuY3Rpb24gZ2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0sIHVpbnQgX3ByZW1pdW1NdWx0aXBsaWVyKTsKCiAgICBmdW5jdGlvbiBjcmVhdGVVcGRhdGVSaXNrKGJ5dGVzMzIgX2NhcnJpZXJGbGlnaHROdW1iZXIsIGJ5dGVzMzIgX2RlcGFydHVyZVllYXJNb250aERheSwgdWludCBfYXJyaXZhbFRpbWUpCiAgICAgICAgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX3Jpc2tJZCk7CgogICAgZnVuY3Rpb24gc2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkLCB1aW50IF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0sIHVpbnQgX3ByZW1pdW1NdWx0aXBsaWVyKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVDYWxsYmFjayhieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCwgdWludCBfb3JhY2xpemVUaW1lKSA7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVQb2xpY3lJZChieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCkgOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZU9yYWNsaXplQ2FsbGJhY2soCiAgICAgICAgYnl0ZXMzMiBfcXVlcnlJZCwKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBvcmFjbGl6ZVN0YXRlIF9vcmFjbGl6ZVN0YXRlLAogICAgICAgIHVpbnQgX29yYWNsaXplVGltZQogICAgKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gY2hlY2tUaW1lKGJ5dGVzMzIgX3F1ZXJ5SWQsIGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfb2Zmc2V0KQogICAgICAgIHB1YmxpYyByZXR1cm5zIChib29sIF9yZXN1bHQpIDsKfQoKLy8gRmlsZTogY29udHJhY3RzL0ZsaWdodERlbGF5TGVkZ2VySW50ZXJmYWNlLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbglMZWRnZXIgY29udHJhY3QgaW50ZXJmYWNlCiAqIEBjb3B5cmlnaHQgKGMpIDIwMTcgZXRoZXJpc2MgR21iSAogKiBAYXV0aG9yIENocmlzdG9waCBNdXNzZW5icm9jaywgU3RlcGhhbiBLYXJwaXNjaGVrCiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKCgpjb250cmFjdCBGbGlnaHREZWxheUxlZGdlckludGVyZmFjZSBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGZ1bmN0aW9uIHJlY2VpdmVGdW5kcyhBY2MgX3RvKSBwdWJsaWMgcGF5YWJsZTsKCiAgICBmdW5jdGlvbiBzZW5kRnVuZHMoYWRkcmVzcyBfcmVjaXBpZW50LCBBY2MgX2Zyb20sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGJvb2trZWVwaW5nKEFjYyBfZnJvbSwgQWNjIF90bywgdWludCBhbW91bnQpIHB1YmxpYzsKfQoKLy8gRmlsZTogY29udHJhY3RzL0ZsaWdodERlbGF5VW5kZXJ3cml0ZUludGVyZmFjZS5zb2wKCi8qKgogKiBGbGlnaHREZWxheSB3aXRoIE9yYWNsaXplZCBVbmRlcndyaXRpbmcgYW5kIFBheW91dAogKgogKiBAZGVzY3JpcHRpb24JVW5kZXJ3cml0ZSBjb250cmFjdCBpbnRlcmZhY2UKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrLCBTdGVwaGFuIEthcnBpc2NoZWsKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgpjb250cmFjdCBGbGlnaHREZWxheVVuZGVyd3JpdGVJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIHNjaGVkdWxlVW5kZXJ3cml0ZU9yYWNsaXplQ2FsbCh1aW50IF9wb2xpY3lJZCwgYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlcikgcHVibGljOwp9CgovLyBGaWxlOiBjb250cmFjdHMvY29udmVydExpYi5zb2wKCi8qKgogKiBGbGlnaHREZWxheSB3aXRoIE9yYWNsaXplZCBVbmRlcndyaXRpbmcgYW5kIFBheW91dAogKgogKiBAZGVzY3JpcHRpb24JQ29udmVyc2lvbnMKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrCiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgQ29udmVydExpYiB7CgogICAgLy8gLi4gc2luY2UgYmVnaW5uaW5nIG9mIHRoZSB5ZWFyCiAgICB1aW50MTZbMTJdIGRheXNfc2luY2UgPSBbCiAgICAgICAgMTEsCiAgICAgICAgNDIsCiAgICAgICAgNzAsCiAgICAgICAgMTAxLAogICAgICAgIDEzMSwKICAgICAgICAxNjIsCiAgICAgICAgMTkyLAogICAgICAgIDIyMywKICAgICAgICAyNTQsCiAgICAgICAgMjg0LAogICAgICAgIDMxNSwKICAgICAgICAzNDUKICAgIF07CgogICAgZnVuY3Rpb24gYjMydG9TdHJpbmcoYnl0ZXMzMiB4KSBpbnRlcm5hbCByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICAvLyBnYXMgdXNhZ2U6IGFib3V0IDFLIGdhcyBwZXIgY2hhci4KICAgICAgICBieXRlcyBtZW1vcnkgYnl0ZXNTdHJpbmcgPSBuZXcgYnl0ZXMoMzIpOwogICAgICAgIHVpbnQgY2hhckNvdW50ID0gMDsKCiAgICAgICAgZm9yICh1aW50IGogPSAwOyBqIDwgMzI7IGorKykgewogICAgICAgICAgICBieXRlIGNoYXIgPSBieXRlKGJ5dGVzMzIodWludCh4KSAqIDIgKiogKDggKiBqKSkpOwogICAgICAgICAgICBpZiAoY2hhciAhPSAwKSB7CiAgICAgICAgICAgICAgICBieXRlc1N0cmluZ1tjaGFyQ291bnRdID0gY2hhcjsKICAgICAgICAgICAgICAgIGNoYXJDb3VudCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBieXRlcyBtZW1vcnkgYnl0ZXNTdHJpbmdUcmltbWVkID0gbmV3IGJ5dGVzKGNoYXJDb3VudCk7CgogICAgICAgIGZvciAoaiA9IDA7IGogPCBjaGFyQ291bnQ7IGorKykgewogICAgICAgICAgICBieXRlc1N0cmluZ1RyaW1tZWRbal0gPSBieXRlc1N0cmluZ1tqXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHJpbmcoYnl0ZXNTdHJpbmdUcmltbWVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiMzJ0b0hleFN0cmluZyhieXRlczMyIHgpIHJldHVybnMgKHN0cmluZykgewogICAgICAgIGJ5dGVzIG1lbW9yeSBiID0gbmV3IGJ5dGVzKDY0KTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICAgICAgICAgIHVpbnQ4IGJ5ID0gdWludDgodWludCh4KSAvICgyKiooOCooMzEgLSBpKSkpKTsKICAgICAgICAgICAgdWludDggaGlnaCA9IGJ5LzE2OwogICAgICAgICAgICB1aW50OCBsb3cgPSBieSAtIDE2KmhpZ2g7CiAgICAgICAgICAgIGlmIChoaWdoID4gOSkgewogICAgICAgICAgICAgICAgaGlnaCArPSAzOTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobG93ID4gOSkgewogICAgICAgICAgICAgICAgbG93ICs9IDM5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJbMippXSA9IGJ5dGUoaGlnaCs0OCk7CiAgICAgICAgICAgIGJbMippKzFdID0gYnl0ZShsb3crNDgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0cmluZyhiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZUludChzdHJpbmcgX2EpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQoX2EsIDApOwogICAgfQoKICAgIC8vIHBhcnNlSW50KHBhcnNlRmxvYXQqMTBeX2IpCiAgICBmdW5jdGlvbiBwYXJzZUludChzdHJpbmcgX2EsIHVpbnQgX2IpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBieXRlcyBtZW1vcnkgYnJlc3VsdCA9IGJ5dGVzKF9hKTsKICAgICAgICB1aW50IG1pbnQgPSAwOwogICAgICAgIGJvb2wgZGVjaW1hbHMgPSBmYWxzZTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGk8YnJlc3VsdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoKGJyZXN1bHRbaV0gPj0gNDgpJiYoYnJlc3VsdFtpXSA8PSA1NykpIHsKICAgICAgICAgICAgICAgIGlmIChkZWNpbWFscykgewogICAgICAgICAgICAgICAgICAgIGlmIChfYiA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9iLS07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbWludCAqPSAxMDsKICAgICAgICAgICAgICAgIG1pbnQgKz0gdWludChicmVzdWx0W2ldKSAtIDQ4OwogICAgICAgICAgICB9IGVsc2UgaWYgKGJyZXN1bHRbaV0gPT0gNDYpIHsKICAgICAgICAgICAgICAgIGRlY2ltYWxzID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX2IgPiAwKSB7CiAgICAgICAgICAgIG1pbnQgKj0gMTAqKl9iOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWludDsKICAgIH0KCiAgICAvLyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uIHlpZWxkcyBjb3JyZWN0IHJlc3VsdHMgaW4gdGhlIHRpbWUgYmV0d2VlbiAxLjMuMjAxNiBhbmQgMjguMDIuMjAyMCwKICAgIC8vIHNvIHdpdGhpbiB0aGUgdmFsaWRpdHkgb2YgdGhlIGNvbnRyYWN0IGl0cyBjb3JyZWN0LgogICAgZnVuY3Rpb24gdG9Vbml4dGltZShieXRlczMyIF9kYXlNb250aFllYXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdW5peHRpbWUpIHsKICAgICAgICAvLyBfZGF5X21vbnRoX3llYXIgPSAvZGVwLzIwMTYvMDkvMTAKICAgICAgICBieXRlcyBtZW1vcnkgYkRteSA9IGJ5dGVzKGIzMnRvU3RyaW5nKF9kYXlNb250aFllYXIpKTsKICAgICAgICBieXRlcyBtZW1vcnkgdGVtcDIgPSBieXRlcyhuZXcgc3RyaW5nKDIpKTsKICAgICAgICBieXRlcyBtZW1vcnkgdGVtcDQgPSBieXRlcyhuZXcgc3RyaW5nKDQpKTsKCiAgICAgICAgdGVtcDRbMF0gPSBiRG15WzVdOwogICAgICAgIHRlbXA0WzFdID0gYkRteVs2XTsKICAgICAgICB0ZW1wNFsyXSA9IGJEbXlbN107CiAgICAgICAgdGVtcDRbM10gPSBiRG15WzhdOwogICAgICAgIHVpbnQgeWVhciA9IHBhcnNlSW50KHN0cmluZyh0ZW1wNCkpOwoKICAgICAgICB0ZW1wMlswXSA9IGJEbXlbMTBdOwogICAgICAgIHRlbXAyWzFdID0gYkRteVsxMV07CiAgICAgICAgdWludCBtb250aCA9IHBhcnNlSW50KHN0cmluZyh0ZW1wMikpOwoKICAgICAgICB0ZW1wMlswXSA9IGJEbXlbMTNdOwogICAgICAgIHRlbXAyWzFdID0gYkRteVsxNF07CiAgICAgICAgdWludCBkYXkgPSBwYXJzZUludChzdHJpbmcodGVtcDIpKTsKCiAgICAgICAgdW5peHRpbWUgPSAoKHllYXIgLSAxOTcwKSAqIDM2NSArIGRheXNfc2luY2VbbW9udGgtMV0gKyBkYXkpICogODY0MDA7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9GbGlnaHREZWxheU5ld1BvbGljeS5zb2wKCi8qKgogKiBGbGlnaHREZWxheSB3aXRoIE9yYWNsaXplZCBVbmRlcndyaXRpbmcgYW5kIFBheW91dAogKgogKiBAZGVzY3JpcHRpb24gTmV3UG9saWN5IGNvbnRyYWN0LgogKiBAY29weXJpZ2h0IChjKSAyMDE3IGV0aGVyaXNjIEdtYkgKICogQGF1dGhvciBDaHJpc3RvcGggTXVzc2VuYnJvY2sKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgoKCgoKCgoKCmNvbnRyYWN0IEZsaWdodERlbGF5TmV3UG9saWN5IGlzIEZsaWdodERlbGF5Q29udHJvbGxlZENvbnRyYWN0LCBGbGlnaHREZWxheUNvbnN0YW50cywgQ29udmVydExpYiB7CgogICAgRmxpZ2h0RGVsYXlBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlIEZEX0FDOwogICAgRmxpZ2h0RGVsYXlEYXRhYmFzZUludGVyZmFjZSBGRF9EQjsKICAgIEZsaWdodERlbGF5TGVkZ2VySW50ZXJmYWNlIEZEX0xHOwogICAgRmxpZ2h0RGVsYXlVbmRlcndyaXRlSW50ZXJmYWNlIEZEX1VXOwoKICAgIGZ1bmN0aW9uIEZsaWdodERlbGF5TmV3UG9saWN5KGFkZHJlc3MgX2NvbnRyb2xsZXIpIHB1YmxpYyB7CiAgICAgICAgc2V0Q29udHJvbGxlcihfY29udHJvbGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJhY3RzKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBGRF9BQyA9IEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZShnZXRDb250cmFjdCgiRkQuQWNjZXNzQ29udHJvbGxlciIpKTsKICAgICAgICBGRF9EQiA9IEZsaWdodERlbGF5RGF0YWJhc2VJbnRlcmZhY2UoZ2V0Q29udHJhY3QoIkZELkRhdGFiYXNlIikpOwogICAgICAgIEZEX0xHID0gRmxpZ2h0RGVsYXlMZWRnZXJJbnRlcmZhY2UoZ2V0Q29udHJhY3QoIkZELkxlZGdlciIpKTsKICAgICAgICBGRF9VVyA9IEZsaWdodERlbGF5VW5kZXJ3cml0ZUludGVyZmFjZShnZXRDb250cmFjdCgiRkQuVW5kZXJ3cml0ZSIpKTsKCiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5QWRkcmVzcygxMDEsIDB4MCk7CiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5SWQoMTAyLCAiRkQuQ29udHJvbGxlciIpOwogICAgICAgIEZEX0FDLnNldFBlcm1pc3Npb25CeUlkKDEwMywgIkZELk93bmVyIik7CiAgICB9CgogICAgZnVuY3Rpb24gYm9va0FuZENhbGNSZW1haW5pbmdQcmVtaXVtKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgdiA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50IHJlc2VydmUgPSB2ICogUkVTRVJWRV9QRVJDRU5UIC8gMTAwOwogICAgICAgIHVpbnQgcmVtYWluID0gdiAtIHJlc2VydmU7CiAgICAgICAgdWludCByZXdhcmQgPSByZW1haW4gKiBSRVdBUkRfUEVSQ0VOVCAvIDEwMDsKCiAgICAgICAgLy8gRkRfTEcuYm9va2tlZXBpbmcoQWNjLkJhbGFuY2UsIEFjYy5QcmVtaXVtLCB2KTsKICAgICAgICBGRF9MRy5ib29ra2VlcGluZyhBY2MuUHJlbWl1bSwgQWNjLlJpc2tGdW5kLCByZXNlcnZlKTsKICAgICAgICBGRF9MRy5ib29ra2VlcGluZyhBY2MuUHJlbWl1bSwgQWNjLlJld2FyZCwgcmV3YXJkKTsKCiAgICAgICAgcmV0dXJuICh1aW50KHJlbWFpbiAtIHJld2FyZCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1haW50ZW5hbmNlTW9kZShib29sIF9vbikgcHVibGljIHsKICAgICAgICBpZiAoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMywgbXNnLnNlbmRlcikpIHsKICAgICAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5QWRkcmVzcygxMDEsIDB4MCwgIV9vbik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGNyZWF0ZSBuZXcgcG9saWN5CiAgICBmdW5jdGlvbiBuZXdQb2xpY3koCiAgICAgICAgYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwKICAgICAgICBieXRlczMyIF9kZXBhcnR1cmVZZWFyTW9udGhEYXksCiAgICAgICAgdWludDI1NiBfZGVwYXJ0dXJlVGltZSwKICAgICAgICB1aW50MjU2IF9hcnJpdmFsVGltZSwKICAgICAgICBDdXJyZW5jeSBfY3VycmVuY3ksCiAgICAgICAgYnl0ZXMzMiBfY3VzdG9tZXJFeHRlcm5hbElkKSBwdWJsaWMgcGF5YWJsZQogICAgewogICAgICAgIC8vIGhlcmUgd2UgY2FuIHN3aXRjaCBpdCBvZmYuCiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCAweDApKTsKCiAgICAgICAgLy8gc29saWRpdHkgY2hlY2tzIGZvciB2YWxpZCBfY3VycmVuY3kgcGFyYW1ldGVyCiAgICAgICAgaWYgKF9jdXJyZW5jeSA9PSBDdXJyZW5jeS5FVEgpIHsKICAgICAgICAgICAgLy8gRVRICiAgICAgICAgICAgIGlmIChtc2cudmFsdWUgPCBNSU5fUFJFTUlVTSB8fCBtc2cudmFsdWUgPiBNQVhfUFJFTUlVTSkgewogICAgICAgICAgICAgICAgTG9nUG9saWN5RGVjbGluZWQoMCwgIkludmFsaWQgcHJlbWl1bSB2YWx1ZSBFVEgiKTsKICAgICAgICAgICAgICAgIEZEX0xHLnNlbmRGdW5kcyhtc2cuc2VuZGVyLCBBY2MuUHJlbWl1bSwgbXNnLnZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBnZXRDb250cmFjdCgiRkQuQ3VzdG9tZXJzQWRtaW4iKSk7CgogICAgICAgICAgICBpZiAoX2N1cnJlbmN5ID09IEN1cnJlbmN5LkVVUikgewogICAgICAgICAgICAgICAgLy8gRVVSCiAgICAgICAgICAgICAgICBpZiAobXNnLnZhbHVlIDwgTUlOX1BSRU1JVU1fRVVSIHx8IG1zZy52YWx1ZSA+IE1BWF9QUkVNSVVNX0VVUikgewogICAgICAgICAgICAgICAgICAgIExvZ1BvbGljeURlY2xpbmVkKDAsICJJbnZhbGlkIHByZW1pdW0gdmFsdWUgRVVSIik7CiAgICAgICAgICAgICAgICAgICAgRkRfTEcuc2VuZEZ1bmRzKG1zZy5zZW5kZXIsIEFjYy5QcmVtaXVtLCBtc2cudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKF9jdXJyZW5jeSA9PSBDdXJyZW5jeS5VU0QpIHsKICAgICAgICAgICAgICAgIC8vIFVTRAogICAgICAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9QUkVNSVVNX1VTRCB8fCBtc2cudmFsdWUgPiBNQVhfUFJFTUlVTV9VU0QpIHsKICAgICAgICAgICAgICAgICAgICBMb2dQb2xpY3lEZWNsaW5lZCgwLCAiSW52YWxpZCBwcmVtaXVtIHZhbHVlIFVTRCIpOwogICAgICAgICAgICAgICAgICAgIEZEX0xHLnNlbmRGdW5kcyhtc2cuc2VuZGVyLCBBY2MuUHJlbWl1bSwgbXNnLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfY3VycmVuY3kgPT0gQ3VycmVuY3kuR0JQKSB7CiAgICAgICAgICAgICAgICAvLyBHQlAKICAgICAgICAgICAgICAgIGlmIChtc2cudmFsdWUgPCBNSU5fUFJFTUlVTV9HQlAgfHwgbXNnLnZhbHVlID4gTUFYX1BSRU1JVU1fR0JQKSB7CiAgICAgICAgICAgICAgICAgICAgTG9nUG9saWN5RGVjbGluZWQoMCwgIkludmFsaWQgcHJlbWl1bSB2YWx1ZSBHQlAiKTsKICAgICAgICAgICAgICAgICAgICBGRF9MRy5zZW5kRnVuZHMobXNnLnNlbmRlciwgQWNjLlByZW1pdW0sIG1zZy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBmb3J3YXJkIHByZW1pdW0KICAgICAgICBGRF9MRy5yZWNlaXZlRnVuZHMudmFsdWUobXNnLnZhbHVlKShBY2MuUHJlbWl1bSk7CgoKICAgICAgICAvLyBkb24ndCBBY2NlcHQgZmxpZ2h0cyB3aXRoIGRlcGFydHVyZSB0aW1lIGVhcmxpZXIgdGhhbiBpbiAyNCBob3VycywKICAgICAgICAvLyBvciBhcnJpdmFsVGltZSBiZWZvcmUgZGVwYXJ0dXJlVGltZSwKICAgICAgICAvLyBvciBkZXBhcnR1cmVUaW1lIGFmdGVyIE1vbiwgMjYgU2VwIDIwMTYgMTI6MDA6MDAgR01UCiAgICAgICAgdWludCBkbXkgPSB0b1VuaXh0aW1lKF9kZXBhcnR1cmVZZWFyTW9udGhEYXkpOwoKLy8gLS0+IGRlYnVnLW1vZGUKLy8gICAgICAgICAgICBMb2dVaW50VGltZSgiTmV3UG9saWN5OiBkbXk6ICIsIGRteSk7Ci8vICAgICAgICAgICAgTG9nVWludFRpbWUoIk5ld1BvbGljeTogX2RlcGFydHVyZVRpbWU6ICIsIF9kZXBhcnR1cmVUaW1lKTsKLy8gPC0tIGRlYnVnLW1vZGUKCiAgICAgICAgaWYgKAogICAgICAgICAgICBfYXJyaXZhbFRpbWUgPCBfZGVwYXJ0dXJlVGltZSB8fAogICAgICAgICAgICBfYXJyaXZhbFRpbWUgPiBfZGVwYXJ0dXJlVGltZSArIE1BWF9GTElHSFRfRFVSQVRJT04gfHwKICAgICAgICAgICAgX2RlcGFydHVyZVRpbWUgPCBub3cgKyBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFIHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lID4gQ09OVFJBQ1RfREVBRF9MSU5FIHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lIDwgZG15IHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lID4gZG15ICsgMjQgaG91cnMgfHwKICAgICAgICAgICAgX2RlcGFydHVyZVRpbWUgPCBGRF9EQi5NSU5fREVQQVJUVVJFX0xJTSgpIHx8CiAgICAgICAgICAgIF9kZXBhcnR1cmVUaW1lID4gRkRfREIuTUFYX0RFUEFSVFVSRV9MSU0oKQogICAgICAgICkgewogICAgICAgICAgICBMb2dQb2xpY3lEZWNsaW5lZCgwLCAiSW52YWxpZCBhcnJpdmFsL2RlcGFydHVyZSB0aW1lIik7CiAgICAgICAgICAgIEZEX0xHLnNlbmRGdW5kcyhtc2cuc2VuZGVyLCBBY2MuUHJlbWl1bSwgbXNnLnZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgYnl0ZXMzMiByaXNrSWQgPSBGRF9EQi5jcmVhdGVVcGRhdGVSaXNrKF9jYXJyaWVyRmxpZ2h0TnVtYmVyLCBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCBfYXJyaXZhbFRpbWUpOwoKICAgICAgICB2YXIgKGN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSwgcHJlbWl1bU11bHRpcGxpZXIpID0gRkRfREIuZ2V0UHJlbWl1bUZhY3RvcnMocmlza0lkKTsKCiAgICAgICAgLy8gcm91Z2hseSBjaGVjaywgd2hldGhlciBNQVhfQ1VNVUxBVEVEX1dFSUdIVEVEX1BSRU1JVU0gd2lsbCBiZSBleGNlZWRlZAogICAgICAgIC8vICh3ZSBBY2NlcHQgdGhlIGluQWNjdXJhY3kgdGhhdCB0aGUgcmVhbCByZW1haW5pbmcgcHJlbWl1bSBpcyAzJSBsb3dlciksCiAgICAgICAgLy8gYnV0IHdlIGFyZSBjb25zZXJ2YXRpdmU7CiAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgZmlyc3QgcG9saWN5LCB0aGUgbGVmdCBzaWRlIHdpbGwgYmUgMAogICAgICAgIGlmIChtc2cudmFsdWUgKiBwcmVtaXVtTXVsdGlwbGllciArIGN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSA+PSBNQVhfQ1VNVUxBVEVEX1dFSUdIVEVEX1BSRU1JVU0pIHsKICAgICAgICAgICAgTG9nUG9saWN5RGVjbGluZWQoMCwgIkNsdXN0ZXIgcmlzayIpOwogICAgICAgICAgICBGRF9MRy5zZW5kRnVuZHMobXNnLnNlbmRlciwgQWNjLlByZW1pdW0sIG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKGN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSA9PSAwKSB7CiAgICAgICAgICAgIC8vIGF0IHRoZSBmaXJzdCBwb2xpY2UsIHdlIHNldCByLmN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSB0byB0aGUgbWF4LgogICAgICAgICAgICAvLyB0aGlzIHByZXZlbnRzIGZ1cnRoZXIgcG9saWNlcyB0byBiZSBBY2NlcHRlZCwgdW50aWwgdGhlIGNvcnJlY3QKICAgICAgICAgICAgLy8gdmFsdWUgaXMgY2FsY3VsYXRlZCBhZnRlciB0aGUgZmlyc3QgY2FsbGJhY2sgZnJvbSB0aGUgb3JhY2xlLgogICAgICAgICAgICBGRF9EQi5zZXRQcmVtaXVtRmFjdG9ycyhyaXNrSWQsIE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSwgcHJlbWl1bU11bHRpcGxpZXIpOwogICAgICAgIH0KCiAgICAgICAgdWludCBwcmVtaXVtID0gYm9va0FuZENhbGNSZW1haW5pbmdQcmVtaXVtKCk7CiAgICAgICAgdWludCBwb2xpY3lJZCA9IEZEX0RCLmNyZWF0ZVBvbGljeShtc2cuc2VuZGVyLCBwcmVtaXVtLCBfY3VycmVuY3ksIF9jdXN0b21lckV4dGVybmFsSWQsIHJpc2tJZCk7CgogICAgICAgIGlmIChwcmVtaXVtTXVsdGlwbGllciA+IDApIHsKICAgICAgICAgICAgRkRfREIuc2V0UHJlbWl1bUZhY3RvcnMoCiAgICAgICAgICAgICAgICByaXNrSWQsCiAgICAgICAgICAgICAgICBjdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0gKyBwcmVtaXVtICogcHJlbWl1bU11bHRpcGxpZXIsCiAgICAgICAgICAgICAgICBwcmVtaXVtTXVsdGlwbGllcgogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgLy8gbm93IHdlIGhhdmUgc3VjY2Vzc2Z1bGx5IGFwcGxpZWQKICAgICAgICBGRF9EQi5zZXRTdGF0ZSgKICAgICAgICAgICAgcG9saWN5SWQsCiAgICAgICAgICAgIHBvbGljeVN0YXRlLkFwcGxpZWQsCiAgICAgICAgICAgIG5vdywKICAgICAgICAgICAgIlBvbGljeSBhcHBsaWVkIGJ5IGN1c3RvbWVyIgogICAgICAgICk7CgogICAgICAgIExvZ1BvbGljeUFwcGxpZWQoCiAgICAgICAgICAgIHBvbGljeUlkLAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBfY2FycmllckZsaWdodE51bWJlciwKICAgICAgICAgICAgcHJlbWl1bQogICAgICAgICk7CgogICAgICAgIExvZ0V4dGVybmFsKAogICAgICAgICAgICBwb2xpY3lJZCwKICAgICAgICAgICAgbXNnLnNlbmRlciwKICAgICAgICAgICAgX2N1c3RvbWVyRXh0ZXJuYWxJZAogICAgICAgICk7CgogICAgICAgIEZEX1VXLnNjaGVkdWxlVW5kZXJ3cml0ZU9yYWNsaXplQ2FsbChwb2xpY3lJZCwgX2NhcnJpZXJGbGlnaHROdW1iZXIpOwogICAgfQp9'.
	

]
