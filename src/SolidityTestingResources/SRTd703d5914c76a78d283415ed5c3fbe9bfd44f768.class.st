Class {
	#name : #SRTd703d5914c76a78d283415ed5c3fbe9bfd44f768,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd703d5914c76a78d283415ed5c3fbe9bfd44f768 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgoKLy8vIEB0aXRsZSBBYnN0cmFjdCBFUkMyMCB0b2tlbiBpbnRlcmZhY2UKY29udHJhY3QgQWJzdHJhY3RUb2tlbiB7CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7fQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBJc3N1YW5jZShhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgT3duZWQgewoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIGFkZHJlc3MgcHVibGljIHBvdGVudGlhbE93bmVyOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlQb3RlbnRpYWxPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHBvdGVudGlhbE93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGV2ZW50IE5ld093bmVyKGFkZHJlc3Mgb2xkLCBhZGRyZXNzIGN1cnJlbnQpOwogICAgZXZlbnQgTmV3UG90ZW50aWFsT3duZXIoYWRkcmVzcyBvbGQsIGFkZHJlc3MgcG90ZW50aWFsKTsKCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXcpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgTmV3UG90ZW50aWFsT3duZXIob3duZXIsIF9uZXcpOwogICAgICAgIHBvdGVudGlhbE93bmVyID0gX25ldzsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXJzaGlwKCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5UG90ZW50aWFsT3duZXIKICAgIHsKICAgICAgICBOZXdPd25lcihvd25lciwgcG90ZW50aWFsT3duZXIpOwogICAgICAgIG93bmVyID0gcG90ZW50aWFsT3duZXI7CiAgICAgICAgcG90ZW50aWFsT3duZXIgPSAwOwogICAgfQp9CgoKLy8vIEltcGxlbWVudHMgRVJDIDIwIFRva2VuIHN0YW5kYXJkOiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBBYnN0cmFjdFRva2VuLCBPd25lZCB7CgogICAgLyoKICAgICAqICBEYXRhIHN0cnVjdHVyZXMKICAgICAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8qCiAgICAgKiAgUmVhZCBhbmQgd3JpdGUgc3RvcmFnZSBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgVHJhbnNmZXJzIHNlbmRlcidzIHRva2VucyB0byBhIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgdG9rZW4gcmVjZWl2ZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IEFsbG93cyBhbGxvd2VkIHRoaXJkIHBhcnR5IHRvIHRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX2Zyb20gQWRkcmVzcyBmcm9tIHdoZXJlIHRva2VucyBhcmUgd2l0aGRyYXduLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyB0byB3aGVyZSB0b2tlbnMgYXJlIHNlbnQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgdG9rZW5zIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgdG9rZW5zIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmVkIGFtb3VudCBvZiB0b2tlbnMgZm9yIHNwZW5kZXIuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBhbGxvd2VkIGFjY291bnQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBOdW1iZXIgb2YgYXBwcm92ZWQgdG9rZW5zLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoKICAgICAqIFJlYWQgc3RvcmFnZSBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgUmV0dXJucyBudW1iZXIgb2YgYWxsb3dlZCB0b2tlbnMgZm9yIGdpdmVuIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKCi8vLyBAdGl0bGUgU2FmZU1hdGggY29udHJhY3QgLSBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzLgovLy8gQGF1dGhvciBPcGVuWmVwcGVsaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPiAwKTsKICAgICAgICB1aW50IGMgPSBhIC8gYjsKICAgICAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gcG93KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSAqKiBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CgoKLy8vIEB0aXRsZSBUb2tlbiBjb250cmFjdCAtIEltcGxlbWVudHMgU3RhbmRhcmQgRVJDMjAgd2l0aCBhZGRpdGlvbmFsIGZlYXR1cmVzLgovLy8gQGF1dGhvciBaZXJpb24gLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjA3NmU2OTY1Njg3ZjQ3N2Q2Mjc1NmU2ODY5Mjk2ZTY4Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KY29udHJhY3QgVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgU2FmZU1hdGggewoKICAgIC8vIFRpbWUgb2YgdGhlIGNvbnRyYWN0IGNyZWF0aW9uCiAgICB1aW50IHB1YmxpYyBjcmVhdGlvblRpbWU7CgogICAgZnVuY3Rpb24gVG9rZW4oKSB7CiAgICAgICAgY3JlYXRpb25UaW1lID0gbm93OwogICAgfQoKCiAgICAvLy8gQGRldiBPd25lciBjYW4gdHJhbnNmZXIgb3V0IGFueSBhY2NpZGVudGFsbHkgc2VudCBFUkMyMCB0b2tlbnMKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRVJDMjBUb2tlbihhZGRyZXNzIHRva2VuQWRkcmVzcykKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQgYmFsYW5jZSA9IEFic3RyYWN0VG9rZW4odG9rZW5BZGRyZXNzKS5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmV0dXJuIEFic3RyYWN0VG9rZW4odG9rZW5BZGRyZXNzKS50cmFuc2Zlcihvd25lciwgYmFsYW5jZSk7CiAgICB9CgogICAgLy8vIEBkZXYgTXVsdGlwbGllcyB0aGUgZ2l2ZW4gbnVtYmVyIGJ5IDEwXihkZWNpbWFscykKICAgIGZ1bmN0aW9uIHdpdGhEZWNpbWFscyh1aW50IG51bWJlciwgdWludCBkZWNpbWFscykKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIG11bChudW1iZXIsIHBvdygxMCwgZGVjaW1hbHMpKTsKICAgIH0KfQoKCi8vLyBAdGl0bGUgVG9rZW4gY29udHJhY3QgLSBJbXBsZW1lbnRzIFN0YW5kYXJkIEVSQzIwIFRva2VuIGZvciBUb2tlbmJveCBwcm9qZWN0LgovLy8gQGF1dGhvciBaZXJpb24gLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjkzZmFmZGYxZmNlYmQzZTlmNmUxZmFmY2ZkYmRmYWZjIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4KY29udHJhY3QgVG9rZW5ib3hUb2tlbiBpcyBUb2tlbiB7CgogICAgLyoKICAgICAqIFRva2VuIG1ldGEgZGF0YQogICAgICovCiAgICBzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiVG9rZW5ib3giOwogICAgLy9UT0RPOiBGaXggYmVmb3JlIHByb2R1Y3Rpb24KICAgIHN0cmluZyBjb25zdGFudCBwdWJsaWMgc3ltYm9sID0gIlRCWC10ZXN0IjsKICAgIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIC8vIEFkZHJlc3Mgd2hlcmUgRm91bmRhdGlvbiB0b2tlbnMgYXJlIGFsbG9jYXRlZAogICAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgZm91bmRhdGlvblJlc2VydmUgPSAweEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY7CgogICAgLy8gQWRkcmVzcyB3aGVyZSBhbGwgdG9rZW5zIGZvciB0aGUgSUNPIHN0YWdlIGFyZSBpbml0aWFsbHkgYWxsb2NhdGVkCiAgICBhZGRyZXNzIGNvbnN0YW50IHB1YmxpYyBpY29BbGxvY2F0aW9uID0gMHgxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExOwoKICAgIC8vIEFkZHJlc3Mgd2hlcmUgYWxsIHRva2VucyBmb3IgdGhlIFByZUlDTyBhcmUgaW5pdGlhbGx5IGFsbG9jYXRlZAogICAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgcHJlSWNvQWxsb2NhdGlvbiA9IDB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjsKCiAgICAvLyBUR0Ugc3RhcnQgZGF0ZS4gMTEvMTQvMjAxNyBAIDEyOjAwcG0gKFVUQykKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIHN0YXJ0RGF0ZSA9IDE1MTA2NjA4MDA7CiAgICAvLyBUR0UgZHVyYXRpb24gaXMgMTQgZGF5cwogICAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgZHVyYXRpb24gPSAxNCBkYXlzOwoKICAgIC8vIFZlc3RpbmcgZGF0ZSB0byB3aXRoZHJhdyAxNSUgb2YgdG90YWwgc29sZCB0b2tlbnMsIDExLzI4LzIwMTggQCAxMjowMHBtIChVVEMpCiAgICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyB2ZXN0aW5nRGF0ZUVuZCA9IDE1NDM0MDY0MDA7CgogICAgLy8gVG90YWwgVVNEIGNvbGxlY3RlZCAoMTBeLTEyKQogICAgdWludDI1NiBwdWJsaWMgdG90YWxQaWNvVVNEID0gMDsKICAgIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyB1c2REZWNpbWFscyA9IDEyOwoKICAgIC8vIFB1YmxpYyBrZXkgb2YgdGhlIHNpZ25lcgogICAgYWRkcmVzcyBwdWJsaWMgc2lnbmVyOwoKICAgIC8vIEZvdW5kYXRpb24gbXVsdGlzaWduYXR1cmUgd2FsbGV0LCBhbGwgRXRoZXIgaXMgY29sbGVjdGVkIHRoZXJlCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZzsKCiAgICBib29sIHB1YmxpYyBmaW5hbGlzZWQgPSBmYWxzZTsKCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IEludmVzdG1lbnRJbkVUSChhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IHRva2VuUHJpY2VJbldlaSwgdWludDI1NiBpbnZlc3RlZEluV2VpLCB1aW50MjU2IGludmVzdGVkSW5QaWNvVXNkLCB1aW50MjU2IHRva2Vuc051bWJlciwgYnl0ZXMzMiBoYXNoKTsKICAgIGV2ZW50IEludmVzdG1lbnRJbkJUQyhhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IHRva2VuUHJpY2VJblNhdG9zaGksIHVpbnQyNTYgaW52ZXN0ZWRJblNhdG9zaGksIHVpbnQyNTYgaW52ZXN0ZWRJblBpY29Vc2QsIHVpbnQyNTYgdG9rZW5zTnVtYmVyLCBzdHJpbmcgYnRjQWRkcmVzcyk7CiAgICBldmVudCBJbnZlc3RtZW50SW5VU0QoYWRkcmVzcyBpbnZlc3RvciwgdWludDI1NiB0b2tlblByaWNlSW5QaWNvVXNkLCB1aW50MjU2IGludmVzdGVkSW5QaWNvVXNkLCB1aW50MjU2IHRva2Vuc051bWJlcik7CiAgICBldmVudCBQcmVzYWxlSW52ZXN0bWVudChhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IGludmVzdGVkSW5QaWNvVXNkLCB1aW50MjU2IHRva2Vuc051bWJlcik7CgogICAgLy8vIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IsIHNldHMgdG90YWxTdXBwbHkKICAgIGZ1bmN0aW9uIFRva2VuYm94VG9rZW4oYWRkcmVzcyBfc2lnbmVyLCBhZGRyZXNzIF9tdWx0aXNpZywgdWludDI1NiBfcHJlSWNvVG9rZW5zICkKICAgIHsKICAgICAgICAvLyBPdmVyYWxsLCAzMSwwMDAsMDAwIFRCWCB0b2tlbnMgYXJlIGRpc3RyaWJ1dGVkCiAgICAgICAgdG90YWxTdXBwbHkgPSB3aXRoRGVjaW1hbHMoMzEwMDAwMDAsIGRlY2ltYWxzKTsKCiAgICAgICAgdWludCBwcmVJY29Ub2tlbnMgPSB3aXRoRGVjaW1hbHMoX3ByZUljb1Rva2VucywgZGVjaW1hbHMpOwoKICAgICAgICAvLyBQcmVJQ08gdG9rZW5zIGFyZSBhbGxvY2F0ZWQgdG8gdGhlIHNwZWNpYWwgYWRkcmVzcyBhbmQgd2lsbCBiZSBkaXN0cmlidXRlZCBtYW51YWxseQogICAgICAgIGJhbGFuY2VzW3ByZUljb0FsbG9jYXRpb25dID0gcHJlSWNvVG9rZW5zOwoKICAgICAgICAvLyBmb3VuZGF0aW9uUmVzZXJ2ZSBiYWxhbmNlIHdpbGwgYmUgYWxsb2NhdGVkIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGNyb3dkc2FsZQogICAgICAgIGJhbGFuY2VzW2ZvdW5kYXRpb25SZXNlcnZlXSA9IDA7CgogICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSB0b2tlbnMgaXMgYXZhaWxhYmxlIGZvciBzYWxlICg3NSUgb2YgdG90YWxTdXBwbHkpCiAgICAgICAgYmFsYW5jZXNbaWNvQWxsb2NhdGlvbl0gPSBkaXYobXVsKHRvdGFsU3VwcGx5LCA3NSksIDEwMCkgIC0gcHJlSWNvVG9rZW5zOwoKICAgICAgICBzaWduZXIgPSBfc2lnbmVyOwogICAgICAgIG11bHRpc2lnID0gX211bHRpc2lnOwogICAgfQoKICAgIG1vZGlmaWVyIGljb0lzQWN0aXZlIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSBzdGFydERhdGUgJiYgbm93IDwgc3RhcnREYXRlICsgZHVyYXRpb24pOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaWNvSXNDb21wbGV0ZWQgewogICAgICAgIHJlcXVpcmUobm93ID49IHN0YXJ0RGF0ZSArIGR1cmF0aW9uKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lck9yU2lnbmVyIHsKICAgICAgICByZXF1aXJlKChtc2cuc2VuZGVyID09IG93bmVyKSB8fCAobXNnLnNlbmRlciA9PSBzaWduZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHRsZSBhbiBpbnZlc3RtZW50IG1hZGUgaW4gRVRIIGFuZCBkaXN0cmlidXRlIHRva2VucwogICAgZnVuY3Rpb24gaW52ZXN0KGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQyNTYgdG9rZW5QcmljZUluUGljb1VzZCwgdWludDI1NiBpbnZlc3RlZEluV2VpLCBieXRlczMyIGhhc2gsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50MjU2IFdlaVRvVVNEKQogICAgICAgIHB1YmxpYwogICAgICAgIGljb0lzQWN0aXZlCiAgICAgICAgcGF5YWJsZQogICAgewogICAgICAgIC8vIENoZWNrIHRoZSBoYXNoCiAgICAgICAgcmVxdWlyZShzaGEyNTYodWludChpbnZlc3RvcikgPDwgOTYgfCB0b2tlblByaWNlSW5QaWNvVXNkKSA9PSBoYXNoKTsKCiAgICAgICAgLy8gQ2hlY2sgdGhlIHNpZ25hdHVyZQogICAgICAgIHJlcXVpcmUoZWNyZWNvdmVyKGhhc2gsIHYsIHIsIHMpID09IHNpZ25lcik7CgogICAgICAgIC8vIERpZmZlcmVuY2UgYmV0d2VlbiB0aGUgdmFsdWUgYXJndW1lbnQgYW5kIGFjdHVhbCB2YWx1ZSBzaG91bGQgbm90IGJlCiAgICAgICAgLy8gbW9yZSB0aGFuIDAuMDA1IEVUSCAoZ2FzIGNvbW1pc3Npb24pCiAgICAgICAgcmVxdWlyZShzdWIoaW52ZXN0ZWRJbldlaSwgbXNnLnZhbHVlKSA8PSB3aXRoRGVjaW1hbHMoNSwgMTUpKTsKCiAgICAgICAgdWludCB0b2tlblByaWNlSW5XZWkgPSBkaXYobXVsKHRva2VuUHJpY2VJblBpY29Vc2QsIFdlaVRvVVNEKSwgcG93KDEwLCB1c2REZWNpbWFscykpOwoKICAgICAgICAvLyBOdW1iZXIgb2YgdG9rZW5zIHRvIGRpc3RyaWJ1dGUKICAgICAgICB1aW50MjU2IHRva2Vuc051bWJlciA9IGRpdih3aXRoRGVjaW1hbHMoaW52ZXN0ZWRJbldlaSwgZGVjaW1hbHMpLCB0b2tlblByaWNlSW5XZWkpOwoKICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBlbm91Z2ggdG9rZW5zIGxlZnQKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW2ljb0FsbG9jYXRpb25dID49IHRva2Vuc051bWJlcik7CgogICAgICAgIC8vIFNlbmQgRXRoZXIgdG8gdGhlIG11bHRpc2lnCiAgICAgICAgcmVxdWlyZShtdWx0aXNpZy5zZW5kKG1zZy52YWx1ZSkpOwoKICAgICAgICB1aW50MjU2IGludmVzdGVkSW5QaWNvVXNkID0gZGl2KHdpdGhEZWNpbWFscyhpbnZlc3RlZEluV2VpLCB1c2REZWNpbWFscyksIFdlaVRvVVNEKTsKCiAgICAgICAgaW52ZXN0SW5VU0QoaW52ZXN0b3IsIGludmVzdGVkSW5QaWNvVXNkLCB0b2tlbnNOdW1iZXIpOwoKICAgICAgICBJbnZlc3RtZW50SW5FVEgoaW52ZXN0b3IsIHRva2VuUHJpY2VJbldlaSwgaW52ZXN0ZWRJbldlaSwgaW52ZXN0ZWRJblBpY29Vc2QsIHRva2Vuc051bWJlciwgaGFzaCk7CiAgICB9CgogICAgLy8vIEBkZXYgU2V0dGxlIGFuIGludmVzdG1lbnQgaW4gQlRDIGFuZCBkaXN0cmlidXRlIHRva2Vucy4KICAgIGZ1bmN0aW9uIGludmVzdEluQlRDKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQyNTYgdG9rZW5QcmljZUluUGljb1VzZCwgdWludDI1NiBpbnZlc3RlZEluU2F0b3NoaSwgc3RyaW5nIGJ0Y0FkZHJlc3MsIHVpbnQyNTYgc2F0b3NoaVRvVVNEKQogICAgICAgIHB1YmxpYwogICAgICAgIGljb0lzQWN0aXZlCiAgICAgICAgb25seU93bmVyT3JTaWduZXIKICAgIHsKICAgICAgICB1aW50IHRva2VuUHJpY2VJblNhdG9zaGkgPSBkaXYobXVsKHRva2VuUHJpY2VJblBpY29Vc2QsIHNhdG9zaGlUb1VTRCksIHBvdygxMCwgdXNkRGVjaW1hbHMpKTsKCiAgICAgICAgLy8gTnVtYmVyIG9mIHRva2VucyB0byBkaXN0cmlidXRlCiAgICAgICAgdWludDI1NiB0b2tlbnNOdW1iZXIgPSBkaXYod2l0aERlY2ltYWxzKGludmVzdGVkSW5TYXRvc2hpLCBkZWNpbWFscyksIHRva2VuUHJpY2VJblNhdG9zaGkpOwoKICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBlbm91Z2ggdG9rZW5zIGxlZnQKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW2ljb0FsbG9jYXRpb25dID49IHRva2Vuc051bWJlcik7CgogICAgICAgIHVpbnQyNTYgaW52ZXN0ZWRJblBpY29Vc2QgPSBkaXYod2l0aERlY2ltYWxzKGludmVzdGVkSW5TYXRvc2hpLCB1c2REZWNpbWFscyksIHNhdG9zaGlUb1VTRCk7CgogICAgICAgIGludmVzdEluVVNEKGludmVzdG9yLCBpbnZlc3RlZEluUGljb1VzZCwgdG9rZW5zTnVtYmVyKTsKCiAgICAgICAgSW52ZXN0bWVudEluQlRDKGludmVzdG9yLCB0b2tlblByaWNlSW5TYXRvc2hpLCBpbnZlc3RlZEluU2F0b3NoaSwgaW52ZXN0ZWRJblBpY29Vc2QsIHRva2Vuc051bWJlciwgYnRjQWRkcmVzcyk7CiAgICB9CgogICAgLy8gQGRldiBJbnZlc3QgaW4gVVNECiAgICBmdW5jdGlvbiBpbnZlc3RJblVTRChhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IGludmVzdGVkSW5QaWNvVXNkLCB1aW50MjU2IHRva2Vuc051bWJlcikKICAgICAgICBwcml2YXRlCiAgICB7CiAgICAgIHRvdGFsUGljb1VTRCA9IGFkZCh0b3RhbFBpY29VU0QsIGludmVzdGVkSW5QaWNvVXNkKTsKCiAgICAgIC8vIEFsbG9jYXRlIHRva2VucyB0byBhbiBpbnZlc3RvcgogICAgICBiYWxhbmNlc1tpY29BbGxvY2F0aW9uXSAtPSB0b2tlbnNOdW1iZXI7CiAgICAgIGJhbGFuY2VzW2ludmVzdG9yXSArPSB0b2tlbnNOdW1iZXI7CiAgICAgIFRyYW5zZmVyKGljb0FsbG9jYXRpb24sIGludmVzdG9yLCB0b2tlbnNOdW1iZXIpOwogICAgfQoKICAgIC8vIEBkZXYgV2lyZSBpbnZlc3RtZW50CiAgICBmdW5jdGlvbiB3aXJlSW52ZXN0SW5VU0QoYWRkcmVzcyBpbnZlc3RvciwgdWludDI1NiB0b2tlblByaWNlSW5Vc2RDZW50cywgdWludDI1NiBpbnZlc3RlZEluVXNkQ2VudHMpCiAgICAgICAgcHVibGljCiAgICAgICAgaWNvSXNBY3RpdmUKICAgICAgICBvbmx5T3duZXJPclNpZ25lcgogICAgIHsKCiAgICAgICB1aW50MjU2IHRva2Vuc051bWJlciA9IGRpdih3aXRoRGVjaW1hbHMoaW52ZXN0ZWRJblVzZENlbnRzLCBkZWNpbWFscyksIHRva2VuUHJpY2VJblVzZENlbnRzKTsKCiAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBlbm91Z2ggdG9rZW5zIGxlZnQKICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbaWNvQWxsb2NhdGlvbl0gPj0gdG9rZW5zTnVtYmVyKTsKCiAgICAgICAvLyBXZSBzdWJ0cmFjdCAyIGJlY2F1c2UgdGhlIHZhbHVlIGlzIGluIGNlbnRzLgogICAgICAgdWludDI1NiBpbnZlc3RlZEluUGljb1VzZCA9IHdpdGhEZWNpbWFscyhpbnZlc3RlZEluVXNkQ2VudHMsIHVzZERlY2ltYWxzIC0gMik7CiAgICAgICB1aW50MjU2IHRva2VuUHJpY2VJblBpY29Vc2QgPSB3aXRoRGVjaW1hbHModG9rZW5QcmljZUluVXNkQ2VudHMsIHVzZERlY2ltYWxzIC0gMik7CgogICAgICAgaW52ZXN0SW5VU0QoaW52ZXN0b3IsIGludmVzdGVkSW5QaWNvVXNkLCB0b2tlbnNOdW1iZXIpOwoKICAgICAgIEludmVzdG1lbnRJblVTRChpbnZlc3RvciwgdG9rZW5QcmljZUluUGljb1VzZCwgaW52ZXN0ZWRJblBpY29Vc2QsIHRva2Vuc051bWJlcik7CiAgICB9CgogICAgLy8gQGRldiBQcmVzYWxlIHRva2VucyBkaXN0cmlidXRpb24KICAgIGZ1bmN0aW9uIHByZUljb0Rpc3RyaWJ1dGlvbihhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IGludmVzdGVkSW5Vc2RDZW50cywgdWludDI1NiB0b2tlbnNOdW1iZXIpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgIHVpbnQyNTYgdG9rZW5zTnVtYmVyV2l0aERlY2ltYWxzID0gd2l0aERlY2ltYWxzKHRva2Vuc051bWJlciwgZGVjaW1hbHMpOwoKICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgZW5vdWdoIHRva2VucyBsZWZ0CiAgICAgIHJlcXVpcmUoYmFsYW5jZXNbcHJlSWNvQWxsb2NhdGlvbl0gPj0gdG9rZW5zTnVtYmVyV2l0aERlY2ltYWxzKTsKCiAgICAgIC8vIEFsbG9jYXRlIHRva2VucyB0byBhbiBpbnZlc3RvcgogICAgICBiYWxhbmNlc1twcmVJY29BbGxvY2F0aW9uXSAtPSB0b2tlbnNOdW1iZXJXaXRoRGVjaW1hbHM7CiAgICAgIGJhbGFuY2VzW2ludmVzdG9yXSArPSB0b2tlbnNOdW1iZXJXaXRoRGVjaW1hbHM7CiAgICAgIFRyYW5zZmVyKHByZUljb0FsbG9jYXRpb24sIGludmVzdG9yLCB0b2tlbnNOdW1iZXJXaXRoRGVjaW1hbHMpOwoKICAgICAgdWludDI1NiBpbnZlc3RlZEluUGljb1VzZCA9IHdpdGhEZWNpbWFscyhpbnZlc3RlZEluVXNkQ2VudHMsIHVzZERlY2ltYWxzIC0gMik7CiAgICAgIC8vIEFkZCBpbnZlc3RtZW50IHRvIHRvdGFsUGljb1VTRCBjb2xsZWN0ZWQKICAgICAgdG90YWxQaWNvVVNEID0gYWRkKHRvdGFsUGljb1VTRCwgaW52ZXN0ZWRJblBpY29Vc2QpOwoKICAgICAgUHJlc2FsZUludmVzdG1lbnQoaW52ZXN0b3IsIGludmVzdGVkSW5QaWNvVXNkLCB0b2tlbnNOdW1iZXJXaXRoRGVjaW1hbHMpOwogICAgfQoKCiAgICAvLy8gQGRldiBBbGxvdyB0b2tlbiB3aXRoZHJhd2FscyBmcm9tIEZvdW5kYXRpb24gcmVzZXJ2ZQogICAgZnVuY3Rpb24gYWxsb3dUb1dpdGhkcmF3RnJvbVJlc2VydmUoKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIHJlcXVpcmUobm93ID49IHZlc3RpbmdEYXRlRW5kKTsKCiAgICAgICAgLy8gQWxsb3cgdGhlIG93bmVyIHRvIHdpdGhkcmF3IHRva2VucyBmcm9tIHRoZSBGb3VuZGF0aW9uIHJlc2VydmUKICAgICAgICBhbGxvd2VkW2ZvdW5kYXRpb25SZXNlcnZlXVttc2cuc2VuZGVyXSA9IGJhbGFuY2VPZihmb3VuZGF0aW9uUmVzZXJ2ZSk7CiAgICB9CgoKICAgIC8vIEBkZXYgV2l0aGRyYXdzIHRva2VucyBmcm9tIEZvdW5kYXRpb24gcmVzZXJ2ZQogICAgZnVuY3Rpb24gd2l0aGRyYXdGcm9tUmVzZXJ2ZSh1aW50IGFtb3VudCkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKG5vdyA+PSB2ZXN0aW5nRGF0ZUVuZCk7CiAgICAgICAgLy8gV2l0aGRyYXcgdG9rZW5zIGZyb20gRm91bmRhdGlvbiByZXNlcnZlIHRvIG11bHRpc2lnIGFkZHJlc3MKICAgICAgICByZXF1aXJlKHRyYW5zZmVyRnJvbShmb3VuZGF0aW9uUmVzZXJ2ZSwgbXVsdGlzaWcsIGFtb3VudCkpOwogICAgfQoKICAgIC8vLyBAZGV2IENoYW5nZXMgbXVsdGlzaWcgYWRkcmVzcwogICAgZnVuY3Rpb24gY2hhbmdlTXVsdGlzaWcoYWRkcmVzcyBfbXVsdGlzaWcpCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgbXVsdGlzaWcgPSBfbXVsdGlzaWc7CiAgICB9CgogICAgLy8vIEBkZXYgQ2hhbmdlcyBzaWduZXIgYWRkcmVzcwogICAgZnVuY3Rpb24gY2hhbmdlU2lnbmVyKGFkZHJlc3MgX3NpZ25lcikKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICBzaWduZXIgPSBfc2lnbmVyOwogICAgfQoKICAgIC8vLyBAZGV2IEJ1cm5zIHRoZSByZXN0IG9mIHRoZSB0b2tlbnMgYWZ0ZXIgdGhlIGNyb3dkc2FsZSBlbmQgYW5kCiAgICAvLy8gc2VuZCAxMCUgdG9rZW5zIG9mIHRvdGFsU3VwcGx5IHRvIHRlYW0gYWRkcmVzcwogICAgZnVuY3Rpb24gZmluYWxpc2VJQ08oKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgICAgIGljb0lzQ29tcGxldGVkCiAgICB7CiAgICAgICAgcmVxdWlyZSghZmluYWxpc2VkKTsKCiAgICAgICAgLy90b3RhbCBzb2xkIGR1cmluZyBJQ08KICAgICAgICB0b3RhbFN1cHBseSA9IHN1Yih0b3RhbFN1cHBseSwgYmFsYW5jZU9mKGljb0FsbG9jYXRpb24pKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHN1Yih0b3RhbFN1cHBseSwgd2l0aERlY2ltYWxzKDc3NTAwMDAsIGRlY2ltYWxzKSk7CgogICAgICAgIC8vc2VuZCA1JSBib3VudHkgKyA3LjUlIG9mIHRvdGFsIHNvbGQgdG9rZW5zIHRvIHRlYW0gYWRkcmVzcwogICAgICAgIGJhbGFuY2VzW211bHRpc2lnXSA9IGRpdihtdWwodG90YWxTdXBwbHksIDEyNSksIDEwMDApOwoKICAgICAgICAvL2xvY2sgMTIuNSUgb2Ygc29sZCB0b2tlbnMgdG8gdGVhbSBhZGRyZXNzIGZvciBvbmUgeWVhcgogICAgICAgIGJhbGFuY2VzW2ZvdW5kYXRpb25SZXNlcnZlXSA9IGRpdihtdWwodG90YWxTdXBwbHksIDEyNSksIDEwMDApOwoKICAgICAgICB0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbXVsKGJhbGFuY2VPZihmb3VuZGF0aW9uUmVzZXJ2ZSksIDIpKTsKCiAgICAgICAgLy9idXJuIHRoZSByZXN0IG9mIHRva2VucwogICAgICAgIGJhbGFuY2VzW2ljb0FsbG9jYXRpb25dID0gMDsKCiAgICAgICAgZmluYWxpc2VkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFVTRCgpCiAgICAgIHB1YmxpYwogICAgICBjb25zdGFudAogICAgICByZXR1cm5zICh1aW50KQogICAgewogICAgICAgcmV0dXJuIGRpdih0b3RhbFBpY29VU0QsIHBvdygxMCwgdXNkRGVjaW1hbHMpKTsKICAgIH0KfQ=='.
	

]
