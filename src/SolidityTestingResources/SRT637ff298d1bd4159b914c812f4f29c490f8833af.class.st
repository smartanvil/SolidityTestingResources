Class {
	#name : #SRT637ff298d1bd4159b914c812f4f29c490f8833af,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT637ff298d1bd4159b914c812f4f29c490f8833af >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBFSW50ZXJmYWNlIHsgCiAgIAkgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgeyB9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSAge30KfQoKCmNvbnRyYWN0IEJpZEFza1ggeyAgCiAgIAogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUVJbnRlcmZhY2UKICAgIGZ1bmN0aW9uIGFsbG93X3NwZW5kKGFkZHJlc3MgX2NvaW4pIHByaXZhdGUgcmV0dXJucyh1aW50KXsgIAogICAgICAgIEVJbnRlcmZhY2UgcGl4aXUgPSBFSW50ZXJmYWNlKF9jb2luKTsKICAgICAgICB1aW50IGFsbG93ID0gcGl4aXUuYWxsb3dhbmNlKG1zZy5zZW5kZXIsIHRoaXMpOwogICAgICAgIHJldHVybiBhbGxvdzsKICAgICAgICAKICAgIH0KICAgICAgICAgICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tVHgoYWRkcmVzcyBfY29pbiwgYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwcml2YXRlIHsKICAgICAgICBFSW50ZXJmYWNlIHBpeGl1ID0gRUludGVyZmFjZShfY29pbik7IAogICAgICAgIHBpeGl1LnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfSAgICAgCiAgICAKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1ldmVudAogICAgZXZlbnQgTG9ncyhzdHJpbmcpOyAKICAgIGV2ZW50IExvZyhzdHJpbmcgZGF0YSwgdWludCB2YWx1ZSwgdWludCB2YWx1ZTEpOyAKICAgIGV2ZW50IFByaW50bG4oYWRkcmVzcyBfYWRkcmVzcyx1aW50MzIgbnVtYmVyLCB1aW50IHByaWNlLCB1aW50IHF0eSwgdWludCBleF9xdHksIGJvb2wgaXNDbG9zZWQsdWludDMyIG4zMik7CiAgICBldmVudCBQYXlkYXRhKGFkZHJlc3MgaW5kZXhlZCBwYXllciwgdWludDI1NiB2YWx1ZSwgYnl0ZXMgZGF0YSwgdWludDI1NiBiYWxhbmNlcyk7CiAgICAgICAgCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYWRtaW4KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gQWRtaW5UeXBlKSBhZG1pbnM7ICAKICAgIGFkZHJlc3NbXSBhZG1pbkFycmF5OyAgIAogICAgZW51bSBBZG1pblR5cGUgeyBub25lLCBub3JtYWwsIGFnZW50LCBhZG1pbiwgd2lkdGhkcmF3IH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tbWVtYmVyCiAgICBzdHJ1Y3QgTWVtYmVyIHsKICAgICAgICBib29sIGlzRXhpc3RzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGJvb2wgaXNXaXRoZHJhdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgdWludCBkZXBvc2l0OwogICAgICAgIHVpbnQgd2l0aGRyYXc7CiAgICAgICAgdWludCBiYWxhbmNlczsKICAgICAgICB1aW50IGJpZF9hbW91bnQ7CiAgICAgICAgdWludCB0eF9hbW91bnQ7CiAgICAgICAgdWludCBhc2tfcXR5OwogICAgICAgIHVpbnQgdHhfcXR5OwogICAgICAgIGFkZHJlc3MgYWdlbnQ7CiAgICB9CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IE1lbWJlcikgcHVibGljIG1lbWJlcnM7ICAKICAgIGFkZHJlc3NbXSBwdWJsaWMgbWVtYmVyQXJyYXk7CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLW9yZGVyCiAgICB1aW50MzIgcHVibGljIG9yZGVyX251bWJlcj0xOwogICAgc3RydWN0IE9yZGVyU2hlZXQgewogICAgICAgIGJvb2wgaXNBc2s7CiAgICAgICAgdWludDMyIG51bWJlcjsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIHVpbnQgcHJpY2U7CiAgICAgICAgdWludCBxdHk7CiAgICAgICAgdWludCBhbW91bnQ7CiAgICAgICAgdWludCBleEZlZTsKICAgICAgICB1aW50IGV4X3F0eTsKICAgICAgICBib29sIGlzQ2xvc2VkOwogICAgfQogICAgYWRkcmVzc1tdIHB1YmxpYyB0b2tlbnNBcnJheTsgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHRva2VuczsgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQzMltdKSBwdWJsaWMgdG9rZW5fYXNrOyAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDMyW10pIHB1YmxpYyB0b2tlbl9iaWQ7IAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDMyW10pKSBwdWJsaWMgdG9rZW5fbWVtYmVyX29yZGVyOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQzMiA9PiBPcmRlclNoZWV0KSkgcHVibGljIHRva2VuX29yZGVyU2hlZXQ7ICAKCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tcHVibGljCiAgICBib29sIHB1YmxpYyBpc1BheWFibGUgPSB0cnVlOwogICAgYm9vbCBwdWJsaWMgaXNXaXRoZHJhd2FibGUgPSB0cnVlOwogICAgYm9vbCBwdWJsaWMgaXNSZXF1aXJlRGF0YSA9IGZhbHNlOwoJdWludCBwdWJsaWMgTWluaW1hbFBheVZhbHVlID0gMDsKCXVpbnQgcHVibGljIGV4RmVlUmF0ZSA9IDEwMDA7Cgl1aW50IHB1YmxpYyBleEZlZVRvdGFsID0gMDsKICAgIAoKICAgIGZ1bmN0aW9uIEJpZEFza1goKXsgIAogICAgICAgIAogICAgICAgIGFkbWluQXJyYXkucHVzaChtc2cuc2VuZGVyKTsgCiAgICAgICAgYWRtaW5zW21zZy5zZW5kZXJdPUFkbWluVHlwZS53aWR0aGRyYXc7CiAgICAgICAgLy9hc2sodGhpcyk7CiAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gbGlzdF90b2tlbl9hc2soYWRkcmVzcyBfdG9rZW4pewogICAgICAgIHVpbnQzMltdIHN0b3JhZ2UgbnVtYmVycyA9IHRva2VuX2Fza1tfdG9rZW5dOwogICAgICAgIGZvcih1aW50IGk9MDtpPG51bWJlcnMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIHVpbnQzMiBuMzIgPSBudW1iZXJzW2ldOwogICAgICAgICAgICBPcmRlclNoZWV0IHN0b3JhZ2Ugb2EgPSB0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bbjMyXTsKICAgICAgICAgICAgUHJpbnRsbihvYS5vd25lciwgb2EubnVtYmVyLCBvYS5wcmljZSwgb2EucXR5LCBvYS5leF9xdHksIG9hLmlzQ2xvc2VkLG4zMik7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBsaXN0X3Rva2VuX2JpZChhZGRyZXNzIF90b2tlbil7CiAgICAgICAgdWludDMyW10gc3RvcmFnZSBudW1iZXJzID0gdG9rZW5fYmlkW190b2tlbl07CiAgICAgICAgZm9yKHVpbnQgaT0wO2k8bnVtYmVycy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgdWludDMyIG4zMiA9IG51bWJlcnNbaV07CiAgICAgICAgICAgIE9yZGVyU2hlZXQgc3RvcmFnZSBvYSA9IHRva2VuX29yZGVyU2hlZXRbX3Rva2VuXVtuMzJdOwogICAgICAgICAgICBQcmludGxuKG9hLm93bmVyLCBvYS5udW1iZXIsIG9hLnByaWNlLCBvYS5xdHksIG9hLmV4X3F0eSwgb2EuaXNDbG9zZWQsbjMyKTsKICAgICAgICB9CiAgICB9CiAgICAgCiAgICBmdW5jdGlvbiB0b2tlbnNfcHVzaChhZGRyZXNzIF90b2tlbikgcHJpdmF0ZSB7CiAgICAgICAgaWYodG9rZW5zW190b2tlbl0hPXRydWUpewogICAgICAgICAgICB0b2tlbnNBcnJheS5wdXNoKF90b2tlbik7CiAgICAgICAgICAgIHRva2Vuc1tfdG9rZW5dPXRydWU7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b2tlbl9tZW1iZXJfb3JkZXJfcG9wKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9zZW5kZXIsIHVpbnQzMiBfbnVtYmVyKSBwcml2YXRlIHsKICAgICAgICBmb3IodWludCBpPTA7azx0b2tlbl9tZW1iZXJfb3JkZXJbX3Rva2VuXVtfc2VuZGVyXS5sZW5ndGgtMTtpKyspewogICAgICAgICAgICBpZih0b2tlbl9tZW1iZXJfb3JkZXJbX3Rva2VuXVtfc2VuZGVyXVtpXT09X251bWJlcil7CiAgICAgICAgICAgICAgICBmb3IodWludCBrPWk7azx0b2tlbl9tZW1iZXJfb3JkZXJbX3Rva2VuXVtfc2VuZGVyXS5sZW5ndGgtMjtrKyspewogICAgICAgICAgICAgICAgICAgIHRva2VuX2JpZFtfdG9rZW5dW2tdPXRva2VuX2JpZFtfdG9rZW5dW2srMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0b2tlbl9tZW1iZXJfb3JkZXJbX3Rva2VuXVtfc2VuZGVyXS5sZW5ndGgtPTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KIAogICAgZnVuY3Rpb24gbWVtYmVyc19wdXNoKGFkZHJlc3MgX2FkZHJlc3MpIHByaXZhdGUgewogICAgICAgIGlmIChtZW1iZXJzW19hZGRyZXNzXS5pc0V4aXN0cyAhPSB0cnVlKSB7CiAgICAgICAgICAgIG1lbWJlcnNbX2FkZHJlc3NdLmlzRXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgbWVtYmVyc1tfYWRkcmVzc10uaXNXaXRoZHJhdyA9IHRydWU7IAogICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmRlcG9zaXQ9MDsKICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS53aXRoZHJhdz0wOwogICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzID0wOwogICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLnR4X2Ftb3VudD0wOwogICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmJpZF9hbW91bnQ9MDsKICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5hc2tfcXR5PTA7CiAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0udHhfcXR5PTA7CiAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0uYWdlbnQ9YWRkcmVzcygwKTsKICAgICAgICAgICAgbWVtYmVyQXJyYXkucHVzaChfYWRkcmVzcyk7IAogICAgICAgIH0KICAgIH0KICAgICAgICAKICAgIGZ1bmN0aW9uIGNhbmNlbCggYWRkcmVzcyBfdG9rZW4sdWludDMyIF9udW1iZXIpeyAKICAgICAgICBPcmRlclNoZWV0IHN0b3JhZ2Ugb2QgPSB0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bX251bWJlcl07CiAgICAgICAgaWYob2Qub3duZXI9PW1zZy5zZW5kZXIpewogICAgICAgICAgICB1aW50IGk7CiAgICAgICAgICAgIHVpbnQgazsKICAgICAgICAgICAgaWYob2QuaXNBc2spewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IoaT0wOyBpPHRva2VuX2Fza1tfdG9rZW5dLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgIGlmKHRva2VuX2Fza1tfdG9rZW5dW2ldPT1fbnVtYmVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgb2QuaXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmFza19xdHkgLSBvZC5xdHkgKyBvZC5leF9xdHk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihrPWk7azx0b2tlbl9hc2tbX3Rva2VuXS5sZW5ndGgtMjtrKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fYXNrW190b2tlbl1ba109dG9rZW5fYXNrW190b2tlbl1baysxXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbl9hc2tbX3Rva2VuXS5sZW5ndGgtPTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvcihpPTA7IGk8dG9rZW5fYmlkW190b2tlbl0ubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaWYodG9rZW5fYmlkW190b2tlbl1baV09PV9udW1iZXIpewogICAgICAgICAgICAgICAgICAgICAgICBvZC5pc0Nsb3NlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0uYmlkX2Ftb3VudCAtIG9kLmFtb3VudCArIG9kLnByaWNlKm9kLmV4X3F0eTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGs9aTtrPHRva2VuX2JpZFtfdG9rZW5dLmxlbmd0aC0yO2srKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbl9iaWRbX3Rva2VuXVtrXT10b2tlbl9iaWRbX3Rva2VuXVtrKzFdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX2JpZFtfdG9rZW5dLmxlbmd0aC09MTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG9rZW5fbWVtYmVyX29yZGVyX3BvcChfdG9rZW4sIG1zZy5zZW5kZXIsIF9udW1iZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIExvZ3MoIlRoZSBvcmRlciBvd25lciBub3QgbWF0Y2giKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJpZCggYWRkcmVzcyBfdG9rZW4sIHVpbnQgX3F0eSwgdWludCBfcHJpY2VFdGgsIHVpbnQgX3ByaWNlV2VpKXsgCiAgICAgICAgdG9rZW5zX3B1c2goX3Rva2VuKTsgCiAgICAgICAgdWludDI1NiBfcHJpY2UgPSBfcHJpY2VFdGggKjEwKioxOCArIF9wcmljZVdlaTsKICAgICAgICB1aW50IGV4RmVlID0gKF9xdHkgKiBfcHJpY2UpIC8gZXhGZWVSYXRlOwogICAgICAgIHVpbnQgYW1vdW50ID0gKF9xdHkgKiBfcHJpY2UpK2V4RmVlOwogICAgICAgIAogICAgICAgIHVpbnQgdW5jbG9zZSA9IG1lbWJlcnNbbXNnLnNlbmRlcl0uYmlkX2Ftb3VudCAtIG1lbWJlcnNbbXNnLnNlbmRlcl0udHhfYW1vdW50OwogICAgICAgIHVpbnQgcmVtYWluaW5nID0gbWVtYmVyc1ttc2cuc2VuZGVyXS5iYWxhbmNlcyAtIHVuY2xvc2U7CiAgICAgICAgaWYocmVtYWluaW5nID49IGFtb3VudCl7CiAgICAgICAgICAgIE9yZGVyU2hlZXQgbWVtb3J5IG9kOwogICAgICAgICAgICBvZC5pc0FzayA9IGZhbHNlOwogICAgICAgICAgICBvZC5udW1iZXIgPSBvcmRlcl9udW1iZXI7CiAgICAgICAgICAgIG9kLm93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgb2QucHJpY2UgPSBfcHJpY2U7CiAgICAgICAgICAgIG9kLnF0eSA9IF9xdHk7CiAgICAgICAgICAgIG9kLmV4X3F0eT0wOwogICAgICAgICAgICBvZC5leEZlZSA9IChfcHJpY2UgKiBfcXR5KS9leEZlZVJhdGU7CiAgICAgICAgICAgIG9kLmFtb3VudCA9IChfcHJpY2UgKiBfcXR5KSArIG9kLmV4RmVlOwogICAgICAgICAgICBvZC5pc0Nsb3NlZD1mYWxzZTsgCiAgICAgICAgICAgIHRva2VuX29yZGVyU2hlZXRbX3Rva2VuXVtvcmRlcl9udW1iZXJdPW9kOyAKICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5iaWRfYW1vdW50Kz1hbW91bnQ7CiAgICAgICAgICAgIHRva2VuX21lbWJlcl9vcmRlcltfdG9rZW5dW21zZy5zZW5kZXJdLnB1c2gob3JkZXJfbnVtYmVyKTsKICAgICAgICAgICAgYmlkX21hdGNoKF90b2tlbix0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bb3JkZXJfbnVtYmVyXSx0b2tlbl9hc2tbX3Rva2VuXSk7IAogICAgICAgICAgICBpZih0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bb3JkZXJfbnVtYmVyXS5pc0Nsb3NlZD09ZmFsc2UpewogICAgICAgICAgICAgICAgdG9rZW5fYmlkW190b2tlbl0ucHVzaChvcmRlcl9udW1iZXIpOyAgIAogICAgICAgICAgICAgICAgUHJpbnRsbihvZC5vd25lciwgb2QubnVtYmVyLCBvZC5wcmljZSwgb2QucXR5LCBvZC5leF9xdHksIG9kLmlzQ2xvc2VkLDc3Nyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3JkZXJfbnVtYmVyKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgTG9nKCJZb3UgbmVlZCBtb3JlIG1vbmV5IGZvciBiaWQiLCByZW1haW5pbmcsIGFtb3VudCk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBhc2soIGFkZHJlc3MgX3Rva2VuLCB1aW50IF9xdHksIHVpbnQgX3ByaWNlRXRoLCB1aW50IF9wcmljZVdlaSl7IAogICAgICAgIHRva2Vuc19wdXNoKF90b2tlbik7IAogICAgICAgIHVpbnQyNTYgX3ByaWNlID0gX3ByaWNlRXRoICoxMCoqMTggKyBfcHJpY2VXZWk7CiAgICAgICAgdWludCB1bmNsb3NlID0gbWVtYmVyc1ttc2cuc2VuZGVyXS5hc2tfcXR5IC0gbWVtYmVyc1ttc2cuc2VuZGVyXS50eF9xdHk7CiAgICAgICAgdWludCByZW1haW5pbmcgPSBhbGxvd19zcGVuZChfdG9rZW4pIC0gdW5jbG9zZTsKICAgICAgICB1aW50IGV4RmVlID0gKF9wcmljZSAqIF9xdHkpL2V4RmVlUmF0ZTsKICAgICAgICBpZihtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzIDwgZXhGZWUpewogICAgICAgICAgICBMb2coIllvdSBuZWVkIHRvIGRlcG9zaXQgZXRoZXIgdG8gYWNvb3VudCBiZWZvciBhc2siLCBleEZlZSwgbWVtYmVyc1ttc2cuc2VuZGVyXS5iYWxhbmNlcyk7CiAgICAgICAgfSBlbHNlIGlmKHJlbWFpbmluZyA+PSBfcXR5KXsKICAgICAgICAgICAgbWVtYmVyc19wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgICAgICBPcmRlclNoZWV0IG1lbW9yeSBvZDsKICAgICAgICAgICAgb2QuaXNBc2sgPSB0cnVlOwogICAgICAgICAgICBvZC5udW1iZXIgPSBvcmRlcl9udW1iZXI7CiAgICAgICAgICAgIG9kLm93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgb2QucHJpY2UgPSBfcHJpY2U7CiAgICAgICAgICAgIG9kLnF0eSA9IF9xdHk7CiAgICAgICAgICAgIG9kLmV4X3F0eT0wOwogICAgICAgICAgICBvZC5leEZlZSA9IGV4RmVlOwogICAgICAgICAgICBvZC5hbW91bnQgPSAoX3ByaWNlICogX3F0eSkgLSBleEZlZTsKICAgICAgICAgICAgb2QuaXNDbG9zZWQ9ZmFsc2U7IAogICAgICAgICAgICB0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bb3JkZXJfbnVtYmVyXT1vZDsgCiAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0uYXNrX3F0eSs9X3F0eTsKICAgICAgICAgICAgdG9rZW5fbWVtYmVyX29yZGVyW190b2tlbl1bbXNnLnNlbmRlcl0ucHVzaChvcmRlcl9udW1iZXIpOwogICAgICAgICAgICBhc2tfbWF0Y2goX3Rva2VuLHRva2VuX29yZGVyU2hlZXRbX3Rva2VuXVtvcmRlcl9udW1iZXJdLHRva2VuX2JpZFtfdG9rZW5dKTsKICAgICAgICAgICAgaWYob2QuaXNDbG9zZWQ9PWZhbHNlKXsKICAgICAgICAgICAgICAgIHRva2VuX2Fza1tfdG9rZW5dLnB1c2gob3JkZXJfbnVtYmVyKTsgIAogICAgICAgICAgICAgICAgTG9nKCJQdXNoIG9yZGVyIG51bWJlciB0byB0b2tlbl9hc2siLG9yZGVyX251bWJlciwwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcmRlcl9udW1iZXIrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBMb2coIllvdSBuZWVkIGFwcHJvdmUgeW91ciB0b2tlbiBmb3IgdHJhbnNmZXIiLDAsMCk7CiAgICAgICAgfQogICAgfQogICAgIAogICAgZnVuY3Rpb24gYXNrX21hdGNoKGFkZHJlc3MgX3Rva2VuLCBPcmRlclNoZWV0IHN0b3JhZ2Ugb2QsIHVpbnQzMltdIHN0b3JhZ2UgdG9rZW5fbWF0Y2gpIHByaXZhdGUgeyAKICAgICAgICBmb3IodWludCBpPXRva2VuX21hdGNoLmxlbmd0aDtpPjAgJiYgb2QucXR5Pm9kLmV4X3F0eTtpLS0pewogICAgICAgICAgICB1aW50MzIgbjMyID0gdG9rZW5fbWF0Y2hbaS0xXTsKICAgICAgICAgICAgT3JkZXJTaGVldCBzdG9yYWdlIG9hID0gdG9rZW5fb3JkZXJTaGVldFtfdG9rZW5dW24zMl07CiAgICAgICAgICAgIHVpbnQgcXR5ID0gb2EucXR5LW9hLmV4X3F0eTsKICAgICAgICAgICAgaWYob2EuaXNDbG9zZWQ9PWZhbHNlICYmIHF0eT4wKXsKICAgICAgICAgICAgICAgIHVpbnQgZXhfcXR5ID0gKHF0eT5vZC5xdHk/b2QucXR5OnF0eSk7CiAgICAgICAgICAgICAgICB1aW50IGV4X3ByaWNlID0gb2EucHJpY2U7CiAgICAgICAgICAgICAgICB1aW50IGV4RmVlID0gKGV4X3F0eSAqIGV4X3ByaWNlKSAvIGV4RmVlUmF0ZTsKICAgICAgICAgICAgICAgIHVpbnQgYW1vdW50ID0gKGV4X3F0eSAqIGV4X3ByaWNlKTsKICAgICAgICAgICAgICAgIFByaW50bG4ob2Eub3duZXIsIG9hLm51bWJlciwgb2EucHJpY2UsIG9hLnF0eSwgb2EuZXhfcXR5LCBvYS5pc0Nsb3NlZCxuMzIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihtZW1iZXJzW29hLm93bmVyXS5iYWxhbmNlcyA+PSBhbW91bnQgJiYgb2QucHJpY2UgPD0gb2EucHJpY2UpewogICAgICAgICAgICAgICAgICAgIG9kLmV4X3F0eSArPSBleF9xdHk7CiAgICAgICAgICAgICAgICAgICAgaWYob2EuZXhfcXR5K2V4X3F0eT49b2EucXR5KXsKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fb3JkZXJTaGVldFtfdG9rZW5dW24zMl0uaXNDbG9zZWQgPSB0cnVlOyAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHVpbnQgaz1pLTE7azx0b2tlbl9tYXRjaC5sZW5ndGgtMjtrKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fbWF0Y2hba109dG9rZW5fbWF0Y2hbaysxXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0b2tlbl9vcmRlclNoZWV0W190b2tlbl1bbjMyXS5leF9xdHkgKz0gZXhfcXR5OyAKICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckZyb21UeChfdG9rZW4sICBtc2cuc2VuZGVyLCBvYS5vd25lciwgZXhfcXR5KTsgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbWVtYmVyc1tvYS5vd25lcl0uYmFsYW5jZXMgLT0gKGFtb3VudCtleEZlZSk7CiAgICAgICAgICAgICAgICAgICAgbWVtYmVyc1tvYS5vd25lcl0udHhfYW1vdW50ICs9IChhbW91bnQrZXhGZWUpOwogICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbb2Eub3duZXJdLnR4X3F0eSArPSBleF9xdHk7CgogICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZXMgKz0gKGFtb3VudC1leEZlZSk7CiAgICAgICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS50eF9hbW91bnQgKz0gKGFtb3VudC1leEZlZSk7CiAgICAgICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS50eF9xdHkgKz0gZXhfcXR5OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKG9kLmV4X3F0eStleF9xdHk+PW9kLnF0eSl7CiAgICAgICAgICAgICAgICAgICAgICAgIG9kLmlzQ2xvc2VkID0gdHJ1ZTsgCiAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICBleEZlZVRvdGFsICs9IGV4RmVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYmlkX21hdGNoKGFkZHJlc3MgX3Rva2VuLCBPcmRlclNoZWV0IHN0b3JhZ2Ugb2QsIHVpbnQzMltdIHN0b3JhZ2UgdG9rZW5fbWF0Y2gpIHByaXZhdGUgeyAKICAgICAgICBmb3IodWludCBpPXRva2VuX21hdGNoLmxlbmd0aDtpPjAgJiYgb2QucXR5Pm9kLmV4X3F0eTtpLS0pewogICAgICAgICAgICB1aW50MzIgbjMyID0gdG9rZW5fbWF0Y2hbaS0xXTsKICAgICAgICAgICAgT3JkZXJTaGVldCBzdG9yYWdlIG9hID0gdG9rZW5fb3JkZXJTaGVldFtfdG9rZW5dW24zMl07CiAgICAgICAgICAgIHVpbnQgcXR5ID0gb2EucXR5LW9hLmV4X3F0eTsKICAgICAgICAgICAgaWYob2EuaXNDbG9zZWQ9PWZhbHNlICYmIHF0eT4wKXsKICAgICAgICAgICAgICAgIHVpbnQgZXhfcXR5ID0gKHF0eT5vZC5xdHk/b2QucXR5OnF0eSk7CiAgICAgICAgICAgICAgICB1aW50IGV4X3ByaWNlID0gb2EucHJpY2U7CiAgICAgICAgICAgICAgICB1aW50IGV4RmVlID0gKGV4X3F0eSAqIGV4X3ByaWNlKSAvIGV4RmVlUmF0ZTsKICAgICAgICAgICAgICAgIHVpbnQgYW1vdW50ID0gKGV4X3F0eSAqIGV4X3ByaWNlKTsKICAgICAgICAgICAgICAgIFByaW50bG4ob2Eub3duZXIsIG9hLm51bWJlciwgb2EucHJpY2UsIG9hLnF0eSwgb2EuZXhfcXR5LCBvYS5pc0Nsb3NlZCwyMjIpOyAKICAgICAgICAgICAgICAgIGlmKG1lbWJlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZXMgPj0gYW1vdW50ICYmIG9hLnByaWNlIDw9IG9kLnByaWNlKXsKICAgICAgICAgICAgICAgICAgICBvZC5leF9xdHkgKz0gZXhfcXR5OwogICAgICAgICAgICAgICAgICAgIGlmKG9hLmV4X3F0eStleF9xdHk+PW9hLnF0eSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX29yZGVyU2hlZXRbX3Rva2VuXVtuMzJdLmlzQ2xvc2VkID0gdHJ1ZTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih1aW50IGs9aS0xO2s8dG9rZW5fbWF0Y2gubGVuZ3RoLTI7aysrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuX21hdGNoW2tdPXRva2VuX21hdGNoW2srMV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdG9rZW5fb3JkZXJTaGVldFtfdG9rZW5dW24zMl0uZXhfcXR5ICs9IGV4X3F0eTsgCiAgICAgICAgICAgICAgICAgICAgLy90cmFuc2ZlckZyb21UeChfdG9rZW4sIG9hLm93bmVyLCBtc2cuc2VuZGVyLCBleF9xdHkpOyAKICAgICAgICAgICAgICAgICAgICBtZW1iZXJzW29kLm93bmVyXS5iYWxhbmNlcyArPSAoYW1vdW50LWV4RmVlKTsKICAgICAgICAgICAgICAgICAgICBtZW1iZXJzW29kLm93bmVyXS50eF9hbW91bnQgKz0gKGFtb3VudC1leEZlZSk7IAogICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbb2Qub3duZXJdLnR4X3F0eSArPSBleF9xdHk7IAoKICAgICAgICAgICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzIC09IChhbW91bnQrZXhGZWUpOwogICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0udHhfYW1vdW50ICs9IChhbW91bnQrZXhGZWUpOwogICAgICAgICAgICAgICAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0udHhfcXR5ICs9IGV4X3F0eTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZihvZC5leF9xdHkrZXhfcXR5Pj1vZC5xdHkpewogICAgICAgICAgICAgICAgICAgICAgICBvZC5pc0Nsb3NlZCA9IHRydWU7IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBleEZlZVRvdGFsICs9IGV4RmVlOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgfQogICAgICAgIH0gCiAgICB9CiAgICAKICAKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1tZW1iZXIgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQgX2V0aCwgdWludCBfd2VpKSB7CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaT0wO2k8dG9rZW5zQXJyYXkubGVuZ3RoLTE7aSsrKXsKICAgICAgICAgICAgYWRkcmVzcyB0b2tlbiA9IHRva2Vuc0FycmF5W2ldOwogICAgICAgICAgICB1aW50MzJbXSBzdG9yYWdlIG9yZGVyID0gdG9rZW5fbWVtYmVyX29yZGVyW3Rva2VuXVttc2cuc2VuZGVyXTsKICAgICAgICAgICAgZm9yKHVpbnQgaj0wO2o8b3JkZXIubGVuZ3RoLTE7aisrKXsKICAgICAgICAgICAgICAgIGNhbmNlbCggdG9rZW4sb3JkZXJbal0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHVpbnQgYmFsYW5jZXMgPSBtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzOwogICAgICAgIHVpbnQgd2l0aGRyYXdzID0gX2V0aCoxMCoqMTggKyBfd2VpOwogICAgICAgIHJlcXVpcmUoIGJhbGFuY2VzID49IHdpdGhkcmF3cyk7CiAgICAgICAgcmVxdWlyZSggdGhpcy5iYWxhbmNlID49IHdpdGhkcmF3cyk7CiAgICAgICAgcmVxdWlyZShpc1dpdGhkcmF3YWJsZSk7CiAgICAgICAgcmVxdWlyZShtZW1iZXJzW21zZy5zZW5kZXJdLmlzV2l0aGRyYXcpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2l0aGRyYXdzKTsKICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzIC09IHdpdGhkcmF3czsKICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLndpdGhkcmF3ICs9IHdpdGhkcmF3czsgIAoKICAgIH0KICAgICAgICAgICAgCiAgICBmdW5jdGlvbiBnZXRfdGhpc19iYWxhbmNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF9ldGgsdWludDI1NiBfd2VpKXsKICAgICAgCiAgICAgICAgX2V0aCA9IHRoaXMuYmFsYW5jZSAvIDEwKioxOCA7CiAgICAgICAgX3dlaSA9IHRoaXMuYmFsYW5jZSAtIF9ldGggKiAxMCoqMTggOwogICAgICAKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBwYXkoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiBNaW5pbWFsUGF5VmFsdWUpOwogICAgICAgIHJlcXVpcmUoaXNQYXlhYmxlKTsKICAgICAgICAKICAgICAgICAKICAgICAgICBpZihhZG1pbnNbbXNnLnNlbmRlcl0gPT0gQWRtaW5UeXBlLndpZHRoZHJhdyl7CgogICAgICAgIH1lbHNlewogICAgICAgICAgICAKICAgICAgICAgICAgaWYoaXNSZXF1aXJlRGF0YSl7CiAgICAgICAgICAgICAgICByZXF1aXJlKGFkbWluc1thZGRyZXNzKG1zZy5kYXRhWzBdKV0gPiBBZG1pblR5cGUubm9uZSk7ICAgCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgbWVtYmVyc19wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmJhbGFuY2VzICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5kZXBvc2l0ICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgaWYoYWRtaW5zW2FkZHJlc3MobXNnLmRhdGFbMF0pXT5BZG1pblR5cGUubm9uZSl7CiAgICAgICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmFnZW50ID0gYWRkcmVzcyhtc2cuZGF0YVswXSk7CiAgICAgICAgICAgIH0KCiAgICAJCVBheWRhdGEobXNnLnNlbmRlciwgbXNnLnZhbHVlLCBtc2cuZGF0YSwgbWVtYmVyc1ttc2cuc2VuZGVyXS5iYWxhbmNlcyk7CgkJCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgCiAgICB9CgogICAKICAKCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYWRtaW4gZnVuY3Rpb24KICAgIAogICAgbW9kaWZpZXIgb25seUFkbWluKCkgewogICAgICAgIHJlcXVpcmUoYWRtaW5zW21zZy5zZW5kZXJdID4gQWRtaW5UeXBlLmFnZW50KTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkbWluX2xpc3QoKSBvbmx5QWRtaW4gY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10gX2FkbWluQXJyYXkpewogICAgICAgIAogICAgICAgIF9hZG1pbkFycmF5ID0gYWRtaW5BcnJheTsgCiAgICAgICAgCiAgICB9ICAgIAogICAgCiAgICBmdW5jdGlvbiBhZG1pbl90eXBlT2YoYWRkcmVzcyBhZG1pbikgb25seUFkbWluIGNvbnN0YW50IHJldHVybnMoQWRtaW5UeXBlIGFkbWluVHlwZSl7CiAgICAgICAgICAKICAgICAgICBhZG1pblR5cGU9IGFkbWluc1thZG1pbl07CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2FkZF9tb2RpZnkoYWRkcmVzcyBhZG1pbiwgQWRtaW5UeXBlIGFkbWluVHlwZSkgb25seUFkbWluIHsKICAgICAgICAKICAgICAgICByZXF1aXJlKGFkbWluc1thZG1pbl0gPiBBZG1pblR5cGUuYWdlbnQpOwogICAgICAgIGlmKGFkbWluc1thZG1pbl0gPCBBZG1pblR5cGUubm9ybWFsKXsKICAgICAgICAgICAgYWRtaW5BcnJheS5wdXNoKGFkbWluKTsKICAgICAgICB9CiAgICAgICAgYWRtaW5zW2FkbWluXT1BZG1pblR5cGUoYWRtaW5UeXBlKTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fZGVsKGFkZHJlc3MgYWRtaW4pIG9ubHlBZG1pbiB7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShhZG1pbiE9bXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShhZG1pbnNbYWRtaW5dID4gQWRtaW5UeXBlLmFnZW50KTsKICAgICAgICBpZihhZG1pbnNbYWRtaW5dID4gQWRtaW5UeXBlLm5vbmUpewogICAgICAgICAgICBhZG1pbnNbYWRtaW5dID0gQWRtaW5UeXBlLm5vbmU7CiAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkbWluQXJyYXkubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoYWRtaW5BcnJheVtpXSA9PSBhZG1pbikgewogICAgICAgICAgICAgICAgICAgIGFkbWluQXJyYXlbaV0gPSBhZG1pbkFycmF5W2FkbWluQXJyYXkubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgYWRtaW5BcnJheS5sZW5ndGggLT0gMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiBhZG1pbl93aXRoZHJhdyh1aW50IF9ldGgsIHVpbnQgX3dlaSkgb25seUFkbWluIHsKCiAgICAgICAgcmVxdWlyZShhZG1pbnNbbXNnLnNlbmRlcl0gPiBBZG1pblR5cGUuYWRtaW4pOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gX2V0aCAqIDEwKioxOCArIF93ZWk7CgkJcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gYW1vdW50KTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7IAogICAgICAgIAogICAgfQogICAgICAgIAoKCWZ1bmN0aW9uIGFkbWluX2V4RmVlUmF0ZSh1aW50IF9yYXRlKSBvbmx5QWRtaW4gewoJICAgIAoJICAgIGV4RmVlUmF0ZSA9IF9yYXRlOwoJICAgIAoJfQogICAgIAkKICAgIGZ1bmN0aW9uIGFkbWluX01pbmltYWxQYXlWYWx1ZSh1aW50IF9ldGgsIHVpbnQgX3dlaSkgb25seUFkbWluIHsKCSAgICAKCSAgICBNaW5pbWFsUGF5VmFsdWUgPSBfZXRoKjEwKjE4ICsgX3dlaTsKCSAgICAKCX0KICAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2lzUmVxdWlyZURhdGEoYm9vbCBfcmVxdWlyZURhdGEpIG9ubHlBZG1pbnsKICAgIAogICAgICAgIGlzUmVxdWlyZURhdGEgPSBfcmVxdWlyZURhdGE7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2lzUGF5YWJsZShib29sIF9wYXlhYmxlKSBvbmx5QWRtaW57CiAgICAKICAgICAgICBpc1BheWFibGUgPSBfcGF5YWJsZTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5faXNXaXRoZHJhd2FibGUoYm9vbCBfd2l0aGRyYXdhYmxlKSBvbmx5QWRtaW57CiAgICAgICAgCiAgICAgICAgaXNXaXRoZHJhd2FibGUgPSBfd2l0aGRyYXdhYmxlOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9tZW1iZXJfaXNXaXRoZHJhdyhhZGRyZXNzIF9tZW1iZXIsIGJvb2wgX3dpdGhkcmF3YWJsZSkgb25seUFkbWluIHsKICAgICAgICBpZihtZW1iZXJzW19tZW1iZXJdLmlzRXhpc3RzID09IHRydWUpIHsKICAgICAgICAgICAgbWVtYmVyc1tfbWVtYmVyXS5pc1dpdGhkcmF3ID0gX3dpdGhkcmF3YWJsZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBMb2dzKCJtZW1iZXIgbm90IGV4aXN0ZXMiKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIAp9'.
	

]
