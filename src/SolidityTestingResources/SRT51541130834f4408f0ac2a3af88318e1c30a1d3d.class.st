Class {
	#name : #SRT51541130834f4408f0ac2a3af88318e1c30a1d3d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT51541130834f4408f0ac2a3af88318e1c30a1d3d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBBcHByb3ZlQW5kQ2FsbFJlY2VpdmVyIHsKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIGZyb20sIHVpbnQyNTYgX2Ftb3VudCwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9kYXRhKTsKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IENvbnRyb2xsZXJJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIHByb3h5UGF5bWVudChhZGRyZXNzIF9vd25lcikgcGF5YWJsZSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gb25BcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IENvbnRyb2xsYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgY29udHJvbGxlcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlciBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIENvbnRyb2xsYWJsZSgpIHsKICAgIGNvbnRyb2xsZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlDb250cm9sbGVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld0NvbnRyb2xsZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyQ29udHJvbChhZGRyZXNzIG5ld0NvbnRyb2xsZXIpIG9ubHlDb250cm9sbGVyIHsKICAgIGlmIChuZXdDb250cm9sbGVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgY29udHJvbGxlciA9IG5ld0NvbnRyb2xsZXI7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgVG9rZW5GYWN0b3J5SW50ZXJmYWNlIHsKCiAgICBmdW5jdGlvbiBjcmVhdGVDbG9uZVRva2VuKAogICAgICAgIGFkZHJlc3MgX3BhcmVudFRva2VuLAogICAgICAgIHVpbnQgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgc3RyaW5nIF90b2tlbk5hbWUsCiAgICAgICAgc3RyaW5nIF90b2tlblN5bWJvbAogICAgICApIHJldHVybnMgKFByb29mVG9rZW4gbmV3VG9rZW4pOwp9Cgpjb250cmFjdCBQcm9vZlRva2VuSW50ZXJmYWNlIGlzIENvbnRyb2xsYWJsZSB7CgogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgZXZlbnQgQ2xhaW1lZFRva2VucyhhZGRyZXNzIGluZGV4ZWQgX3Rva2VuLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF9hbW91bnQpOwogIGV2ZW50IE5ld0Nsb25lVG9rZW4oYWRkcmVzcyBpbmRleGVkIF9jbG9uZVRva2VuLCB1aW50IF9zbmFwc2hvdEJsb2NrKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHlBdCh1aW50IF9ibG9ja051bWJlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mQXQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Jsb2NrTnVtYmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGRvVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzIF9leHRyYURhdGEpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBpbXBvcnRQcmVzYWxlQmFsYW5jZXMoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnQyNTZbXSBfYmFsYW5jZXMsIGFkZHJlc3MgX3ByZXNhbGVBZGRyZXNzKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBsb2NrUHJlc2FsZUJhbGFuY2VzKCkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVycyhib29sIF90cmFuc2ZlcnNFbmFibGVkKTsKICBmdW5jdGlvbiBjcmVhdGVDbG9uZVRva2VuKHVpbnQgX3NuYXBzaG90QmxvY2ssIHN0cmluZyBfY2xvbmVUb2tlbk5hbWUsIHN0cmluZyBfY2xvbmVUb2tlblN5bWJvbCkgcmV0dXJucyAoYWRkcmVzcyk7Cgp9Cgpjb250cmFjdCBQcm9vZlRva2VuIGlzIENvbnRyb2xsYWJsZSB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIFByb29mVG9rZW5JbnRlcmZhY2UgcHVibGljIHBhcmVudFRva2VuOwogIFRva2VuRmFjdG9yeUludGVyZmFjZSBwdWJsaWMgdG9rZW5GYWN0b3J5OwoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uOwogIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKCiAgc3RydWN0IENoZWNrcG9pbnQgewogICAgdWludDEyOCBmcm9tQmxvY2s7CiAgICB1aW50MTI4IHZhbHVlOwogIH0KCiAgdWludDI1NiBwdWJsaWMgcGFyZW50U25hcFNob3RCbG9jazsKICB1aW50MjU2IHB1YmxpYyBjcmVhdGlvbkJsb2NrOwogIGJvb2wgcHVibGljIHRyYW5zZmVyc0VuYWJsZWQ7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBDaGVja3BvaW50W10pIGJhbGFuY2VzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgQ2hlY2twb2ludFtdIHRvdGFsU3VwcGx5SGlzdG9yeTsKCiAgYm9vbCBwdWJsaWMgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CiAgYm9vbCBwdWJsaWMgcHJlc2FsZUJhbGFuY2VzTG9ja2VkID0gZmFsc2U7CgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOU19BTExPQ0FURURfVE9fUFJPT0YgPSAxMTgxMDMxICogKDEwICoqIDE4KTsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT1RBTF9QUkVTQUxFX1RPS0VOUyA9IDExMjM4NjcxMjkyNDcyNTUwODgwMjQwMDsKCiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNaW50RmluaXNoZWQoKTsKICBldmVudCBDbGFpbWVkVG9rZW5zKGFkZHJlc3MgaW5kZXhlZCBfdG9rZW4sIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX2Ftb3VudCk7CiAgZXZlbnQgTmV3Q2xvbmVUb2tlbihhZGRyZXNzIGluZGV4ZWQgY2xvbmVUb2tlbik7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKCgoKICBmdW5jdGlvbiBQcm9vZlRva2VuKAogICAgYWRkcmVzcyBfdG9rZW5GYWN0b3J5LAogICAgYWRkcmVzcyBfcGFyZW50VG9rZW4sCiAgICB1aW50MjU2IF9wYXJlbnRTbmFwU2hvdEJsb2NrLAogICAgc3RyaW5nIF90b2tlbk5hbWUsCiAgICBzdHJpbmcgX3Rva2VuU3ltYm9sCiAgICApIHsKICAgICAgdG9rZW5GYWN0b3J5ID0gVG9rZW5GYWN0b3J5SW50ZXJmYWNlKF90b2tlbkZhY3RvcnkpOwogICAgICBwYXJlbnRUb2tlbiA9IFByb29mVG9rZW5JbnRlcmZhY2UoX3BhcmVudFRva2VuKTsKICAgICAgcGFyZW50U25hcFNob3RCbG9jayA9IF9wYXJlbnRTbmFwU2hvdEJsb2NrOwogICAgICBuYW1lID0gX3Rva2VuTmFtZTsKICAgICAgc3ltYm9sID0gX3Rva2VuU3ltYm9sOwogICAgICBkZWNpbWFscyA9IDE4OwogICAgICB0cmFuc2ZlcnNFbmFibGVkID0gdHJ1ZTsKICAgICAgY3JlYXRpb25CbG9jayA9IGJsb2NrLm51bWJlcjsKICB9CgogIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICByZXZlcnQoKTsKICB9CgoKICAvKioKICAqIFJldHVybnMgdGhlIHRvdGFsIFByb29mIHRva2VuIHN1cHBseSBhdCB0aGUgY3VycmVudCBibG9jawogICogQHJldHVybiB0b3RhbCBzdXBwbHkge3VpbnR9CiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b3RhbFN1cHBseUF0KGJsb2NrLm51bWJlcik7CiAgfQoKICAvKioKICAqIFJldHVybnMgdGhlIHRvdGFsIFByb29mIHRva2VuIHN1cHBseSBhdCB0aGUgZ2l2ZW4gYmxvY2sgbnVtYmVyCiAgKiBAcGFyYW0gX2Jsb2NrTnVtYmVyIHt1aW50fQogICogQHJldHVybiB0b3RhbCBzdXBwbHkge3VpbnR9CiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseUF0KHVpbnQgX2Jsb2NrTnVtYmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIC8vIFRoZXNlIG5leHQgZmV3IGxpbmVzIGFyZSB1c2VkIHdoZW4gdGhlIHRvdGFsU3VwcGx5IG9mIHRoZSB0b2tlbiBpcwogICAgLy8gIHJlcXVlc3RlZCBiZWZvcmUgYSBjaGVjayBwb2ludCB3YXMgZXZlciBjcmVhdGVkIGZvciB0aGlzIHRva2VuLCBpdAogICAgLy8gIHJlcXVpcmVzIHRoYXQgdGhlIGBwYXJlbnRUb2tlbi50b3RhbFN1cHBseUF0YCBiZSBxdWVyaWVkIGF0IHRoZQogICAgLy8gIGdlbmVzaXMgYmxvY2sgZm9yIHRoaXMgdG9rZW4gYXMgdGhhdCBjb250YWlucyB0b3RhbFN1cHBseSBvZiB0aGlzCiAgICAvLyAgdG9rZW4gYXQgdGhpcyBibG9jayBudW1iZXIuCiAgICBpZiAoKHRvdGFsU3VwcGx5SGlzdG9yeS5sZW5ndGggPT0gMCkgfHwgKHRvdGFsU3VwcGx5SGlzdG9yeVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgaWYgKGFkZHJlc3MocGFyZW50VG9rZW4pICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmVudFRva2VuLnRvdGFsU3VwcGx5QXQobWluKF9ibG9ja051bWJlciwgcGFyZW50U25hcFNob3RCbG9jaykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAvLyBUaGlzIHdpbGwgcmV0dXJuIHRoZSBleHBlY3RlZCB0b3RhbFN1cHBseSBkdXJpbmcgbm9ybWFsIHNpdHVhdGlvbnMKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGdldFZhbHVlQXQodG90YWxTdXBwbHlIaXN0b3J5LCBfYmxvY2tOdW1iZXIpOwogICAgfQogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSB0b2tlbiBob2xkZXIgYmFsYW5jZSBhdCB0aGUgY3VycmVudCBibG9jawogICogQHBhcmFtIF9vd25lciB7YWRkcmVzc30KICAqIEByZXR1cm4gYmFsYW5jZSB7dWludH0KICAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VPZkF0KF9vd25lciwgYmxvY2subnVtYmVyKTsKICB9CgogIC8qKgogICogUmV0dXJucyB0aGUgdG9rZW4gaG9sZGVyIGJhbGFuY2UgdGhlIHRoZSBnaXZlbiBibG9jayBudW1iZXIKICAqIEBwYXJhbSBfb3duZXIge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Jsb2NrTnVtYmVyIHt1aW50fQogICogQHJldHVybiBiYWxhbmNlIHt1aW50fQogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mQXQoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2Jsb2NrTnVtYmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBUaGVzZSBuZXh0IGZldyBsaW5lcyBhcmUgdXNlZCB3aGVuIHRoZSBiYWxhbmNlIG9mIHRoZSB0b2tlbiBpcwogICAgLy8gIHJlcXVlc3RlZCBiZWZvcmUgYSBjaGVjayBwb2ludCB3YXMgZXZlciBjcmVhdGVkIGZvciB0aGlzIHRva2VuLCBpdAogICAgLy8gIHJlcXVpcmVzIHRoYXQgdGhlIGBwYXJlbnRUb2tlbi5iYWxhbmNlT2ZBdGAgYmUgcXVlcmllZCBhdCB0aGUKICAgIC8vICBnZW5lc2lzIGJsb2NrIGZvciB0aGF0IHRva2VuIGFzIHRoaXMgY29udGFpbnMgaW5pdGlhbCBiYWxhbmNlIG9mCiAgICAvLyAgdGhpcyB0b2tlbgogICAgaWYgKChiYWxhbmNlc1tfb3duZXJdLmxlbmd0aCA9PSAwKSB8fCAoYmFsYW5jZXNbX293bmVyXVswXS5mcm9tQmxvY2sgPiBfYmxvY2tOdW1iZXIpKSB7CiAgICAgICAgaWYgKGFkZHJlc3MocGFyZW50VG9rZW4pICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmVudFRva2VuLmJhbGFuY2VPZkF0KF9vd25lciwgbWluKF9ibG9ja051bWJlciwgcGFyZW50U25hcFNob3RCbG9jaykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEhhcyBubyBwYXJlbnQKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgIC8vIFRoaXMgd2lsbCByZXR1cm4gdGhlIGV4cGVjdGVkIGJhbGFuY2UgZHVyaW5nIG5vcm1hbCBzaXR1YXRpb25zCiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBnZXRWYWx1ZUF0KGJhbGFuY2VzW19vd25lcl0sIF9ibG9ja051bWJlcik7CiAgICB9CiAgfQoKICAvKioKICAqIFN0YW5kYXJkIEVSQzIwIHRyYW5zZmVyIHRva2VucwogICogQHBhcmFtIF90byB7YWRkcmVzc30KICAqIEBwYXJhbSBfYW1vdW50IHt1aW50fQogICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKHRyYW5zZmVyc0VuYWJsZWQpOwogICAgcmV0dXJuIGRvVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICB9CgogIC8qKgogICogU3RhbmRhcmQgRVJDMjAgdHJhbnNmZXJGcm9tIGludGVyZmFjZQogICogQHBhcmFtIF9mcm9tIHthZGRyZXNzfQogICogQHBhcmFtIF90byB7YWRkcmVzc30KICAqIEBwYXJhbSBfYW1vdW50IHt1aW50MjU2fQogICogQHJldHVybiBzdWNjZXNzIHtib29sfQogICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSh0cmFuc2ZlcnNFbmFibGVkKTsKICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgcmV0dXJuIGRvVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgfQoKICAvKioKICAqIFN0YW5kYXJkIEVSQzIwIGFwcHJvdmUgaW50ZXJmYWNlCiAgKiBAcGFyYW0gX3NwZW5kZXIge2FkZHJlc3N9CiAgKiBAcGFyYW0gX2Ftb3VudCB7dWludDI1Nn0KICAqIEByZXR1cm4gc3VjY2VzcyB7Ym9vbH0KICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUodHJhbnNmZXJzRW5hYmxlZCk7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfYW1vdW50ID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgLy8gQWxlcnRzIHRoZSB0b2tlbiBjb250cm9sbGVyIG9mIHRoZSBhcHByb3ZlIGZ1bmN0aW9uIGNhbGwKICAgIGlmIChpc0NvbnRyYWN0KGNvbnRyb2xsZXIpKSB7CiAgICAgICAgcmVxdWlyZShDb250cm9sbGVySW50ZXJmYWNlKGNvbnRyb2xsZXIpLm9uQXBwcm92ZShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCkpOwogICAgfQoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50LCBieXRlcyBfZXh0cmFEYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFwcHJvdmUoX3NwZW5kZXIsIF9hbW91bnQpOwoKICAgIEFwcHJvdmVBbmRDYWxsUmVjZWl2ZXIoX3NwZW5kZXIpLnJlY2VpdmVBcHByb3ZhbCgKICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgIF9hbW91bnQsCiAgICAgICAgdGhpcywKICAgICAgICBfZXh0cmFEYXRhCiAgICApOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKCiAgZnVuY3Rpb24gZG9UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOwogICAgcmVxdWlyZShwYXJlbnRTbmFwU2hvdEJsb2NrIDwgYmxvY2subnVtYmVyKTsKICAgIHJlcXVpcmUoKF90byAhPSAwKSAmJiAoX3RvICE9IGFkZHJlc3ModGhpcykpKTsKCiAgICAvLyBJZiB0aGUgYW1vdW50IGJlaW5nIHRyYW5zZmVyZWQgaXMgbW9yZSB0aGFuIHRoZSBiYWxhbmNlIG9mIHRoZQogICAgLy8gIGFjY291bnQgdGhlIHRyYW5zZmVyIHJldHVybnMgZmFsc2UKICAgIHZhciBwcmV2aW91c0JhbGFuY2VGcm9tID0gYmFsYW5jZU9mQXQoX2Zyb20sIGJsb2NrLm51bWJlcik7CiAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZUZyb20gPj0gX2Ftb3VudCk7CgogICAgLy8gQWxlcnRzIHRoZSB0b2tlbiBjb250cm9sbGVyIG9mIHRoZSB0cmFuc2ZlcgogICAgaWYgKGlzQ29udHJhY3QoY29udHJvbGxlcikpIHsKICAgICAgcmVxdWlyZShDb250cm9sbGVySW50ZXJmYWNlKGNvbnRyb2xsZXIpLm9uVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCkpOwogICAgfQoKICAgIC8vIEZpcnN0IHVwZGF0ZSB0aGUgYmFsYW5jZSBhcnJheSB3aXRoIHRoZSBuZXcgdmFsdWUgZm9yIHRoZSBhZGRyZXNzCiAgICAvLyAgc2VuZGluZyB0aGUgdG9rZW5zCiAgICB1cGRhdGVWYWx1ZUF0Tm93KGJhbGFuY2VzW19mcm9tXSwgcHJldmlvdXNCYWxhbmNlRnJvbSAtIF9hbW91bnQpOwoKICAgIC8vIFRoZW4gdXBkYXRlIHRoZSBiYWxhbmNlIGFycmF5IHdpdGggdGhlIG5ldyB2YWx1ZSBmb3IgdGhlIGFkZHJlc3MKICAgIC8vICByZWNlaXZpbmcgdGhlIHRva2VucwogICAgdmFyIHByZXZpb3VzQmFsYW5jZVRvID0gYmFsYW5jZU9mQXQoX3RvLCBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZShwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQgPj0gcHJldmlvdXNCYWxhbmNlVG8pOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3cKICAgIHVwZGF0ZVZhbHVlQXROb3coYmFsYW5jZXNbX3RvXSwgcHJldmlvdXNCYWxhbmNlVG8gKyBfYW1vdW50KTsKCiAgICAvLyBBbiBldmVudCB0byBtYWtlIHRoZSB0cmFuc2ZlciBlYXN5IHRvIGZpbmQgb24gdGhlIGJsb2NrY2hhaW4KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBvbmx5Q29udHJvbGxlciBjYW5NaW50IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgY3VyVG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseSgpOwogICAgdWludCBwcmV2aW91c0JhbGFuY2VUbyA9IGJhbGFuY2VPZihfb3duZXIpOwoKICAgIHJlcXVpcmUoY3VyVG90YWxTdXBwbHkgKyBfYW1vdW50ID49IGN1clRvdGFsU3VwcGx5KTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93CiAgICByZXF1aXJlKHByZXZpb3VzQmFsYW5jZVRvICsgX2Ftb3VudCA+PSBwcmV2aW91c0JhbGFuY2VUbyk7IC8vIENoZWNrIGZvciBvdmVyZmxvdwoKICAgIHVwZGF0ZVZhbHVlQXROb3codG90YWxTdXBwbHlIaXN0b3J5LCBjdXJUb3RhbFN1cHBseSArIF9hbW91bnQpOwogICAgdXBkYXRlVmFsdWVBdE5vdyhiYWxhbmNlc1tfb3duZXJdLCBwcmV2aW91c0JhbGFuY2VUbyArIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMCwgX293bmVyLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEltcG9ydCBwcmVzYWxlIGJhbGFuY2VzIGJlZm9yZSB0aGUgc3RhcnQgb2YgdGhlIHRva2VuIHNhbGUuIEFmdGVyIGltcG9ydGluZwogICAqIGJhbGFuY2VzLCBsb2NrUHJlc2FsZUJhbGFuY2VzKCkgaGFzIHRvIGJlIGNhbGxlZCB0byBwcmV2ZW50IGZ1cnRoZXIgbW9kaWZpY2F0aW9uCiAgICogb2YgcHJlc2FsZSBiYWxhbmNlcy4KICAgKiBAcGFyYW0gX2FkZHJlc3NlcyB7YWRkcmVzc1tdfSBBcnJheSBvZiBwcmVzYWxlIGFkZHJlc3NlcwogICAqIEBwYXJhbSBfYmFsYW5jZXMge3VpbnQyNTZbXX0gQXJyYXkgb2YgYmFsYW5jZXMgY29ycmVzcG9uZGluZyB0byBwcmVzYWxlIGFkZHJlc3Nlcy4KICAgKiBAcmV0dXJuIHN1Y2Nlc3Mge2Jvb2x9CiAgICovCiAgZnVuY3Rpb24gaW1wb3J0UHJlc2FsZUJhbGFuY2VzKGFkZHJlc3NbXSBfYWRkcmVzc2VzLCB1aW50MjU2W10gX2JhbGFuY2VzKSBvbmx5Q29udHJvbGxlciByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKHByZXNhbGVCYWxhbmNlc0xvY2tlZCA9PSBmYWxzZSk7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICB1cGRhdGVWYWx1ZUF0Tm93KGJhbGFuY2VzW19hZGRyZXNzZXNbaV1dLCBfYmFsYW5jZXNbaV0pOwogICAgICBUcmFuc2ZlcigwLCBfYWRkcmVzc2VzW2ldLCBfYmFsYW5jZXNbaV0pOwogICAgfQoKICAgIHVwZGF0ZVZhbHVlQXROb3codG90YWxTdXBwbHlIaXN0b3J5LCBUT1RBTF9QUkVTQUxFX1RPS0VOUyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIExvY2sgcHJlc2FsZSBiYWxhbmNlcyBhZnRlciBzdWNjZXNzZnVsIHByZXNhbGUgYmFsYW5jZSBpbXBvcnQKICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGxvY2tQcmVzYWxlQmFsYW5jZXMoKSBvbmx5Q29udHJvbGxlciByZXR1cm5zIChib29sKSB7CiAgICBwcmVzYWxlQmFsYW5jZXNMb2NrZWQgPSB0cnVlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBMb2NrIHRoZSBtaW50aW5nIG9mIFByb29mIFRva2VucyAtIHRvIGJlIGNhbGxlZCBhZnRlciB0aGUgcHJlc2FsZQogICAqIEByZXR1cm4ge2Jvb2x9IHN1Y2Nlc3MKICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5Q29udHJvbGxlciByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEVuYWJsZSBvciBibG9jayB0cmFuc2ZlcnMgLSB0byBiZSBjYWxsZWQgaW4gY2FzZSBvZiBlbWVyZ2VuY3kKICAqLwogIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVycyhib29sIF90cmFuc2ZlcnNFbmFibGVkKSBvbmx5Q29udHJvbGxlciB7CiAgICAgIHRyYW5zZmVyc0VuYWJsZWQgPSBfdHJhbnNmZXJzRW5hYmxlZDsKICB9CgoKICBmdW5jdGlvbiBnZXRWYWx1ZUF0KENoZWNrcG9pbnRbXSBzdG9yYWdlIGNoZWNrcG9pbnRzLCB1aW50IF9ibG9jaykgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoKICAgICAgaWYgKGNoZWNrcG9pbnRzLmxlbmd0aCA9PSAwKQogICAgICAgIHJldHVybiAwOwogICAgICAvLyBTaG9ydGN1dCBmb3IgdGhlIGFjdHVhbCB2YWx1ZQogICAgICBpZiAoX2Jsb2NrID49IGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2spCiAgICAgICAgcmV0dXJuIGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS52YWx1ZTsKICAgICAgaWYgKF9ibG9jayA8IGNoZWNrcG9pbnRzWzBdLmZyb21CbG9jaykKICAgICAgICByZXR1cm4gMDsKCiAgICAgIC8vIEJpbmFyeSBzZWFyY2ggb2YgdGhlIHZhbHVlIGluIHRoZSBhcnJheQogICAgICB1aW50IG1pbiA9IDA7CiAgICAgIHVpbnQgbWF4ID0gY2hlY2twb2ludHMubGVuZ3RoLTE7CiAgICAgIHdoaWxlIChtYXggPiBtaW4pIHsKICAgICAgICAgIHVpbnQgbWlkID0gKG1heCArIG1pbiArIDEpIC8gMjsKICAgICAgICAgIGlmIChjaGVja3BvaW50c1ttaWRdLmZyb21CbG9jazw9X2Jsb2NrKSB7CiAgICAgICAgICAgICAgbWluID0gbWlkOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtYXggPSBtaWQtMTsKICAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gY2hlY2twb2ludHNbbWluXS52YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlQXROb3coQ2hlY2twb2ludFtdIHN0b3JhZ2UgY2hlY2twb2ludHMsIHVpbnQgX3ZhbHVlCiAgKSBpbnRlcm5hbAogIHsKICAgICAgaWYgKChjaGVja3BvaW50cy5sZW5ndGggPT0gMCkgfHwgKGNoZWNrcG9pbnRzW2NoZWNrcG9pbnRzLmxlbmd0aC0xXS5mcm9tQmxvY2sgPCBibG9jay5udW1iZXIpKSB7CiAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG5ld0NoZWNrUG9pbnQgPSBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgrK107CiAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC5mcm9tQmxvY2sgPSB1aW50MTI4KGJsb2NrLm51bWJlcik7CiAgICAgICAgICAgICAgbmV3Q2hlY2tQb2ludC52YWx1ZSA9IHVpbnQxMjgoX3ZhbHVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgQ2hlY2twb2ludCBzdG9yYWdlIG9sZENoZWNrUG9pbnQgPSBjaGVja3BvaW50c1tjaGVja3BvaW50cy5sZW5ndGgtMV07CiAgICAgICAgICAgICAgb2xkQ2hlY2tQb2ludC52YWx1ZSA9IHVpbnQxMjgoX3ZhbHVlKTsKICAgICAgICAgIH0KICB9CgogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICAgIHVpbnQgc2l6ZTsKICAgICAgaWYgKF9hZGRyID09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBhc3NlbWJseSB7CiAgICAgICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICB9CiAgICAgIHJldHVybiBzaXplPjA7CiAgfQoKICAvLy8gQGRldiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV0dXJuIGEgbWluIGJldHdlbiB0aGUgdHdvIHVpbnRzCiAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgLyoqCiAgKiBDbG9uZXMgUHJvb2YgVG9rZW4gYXQgdGhlIGdpdmVuIHNuYXBzaG90IGJsb2NrCiAgKiBAcGFyYW0gX3NuYXBzaG90QmxvY2sge3VpbnR9CiAgKiBAcGFyYW0gX2Nsb25lVG9rZW5OYW1lIHtzdHJpbmd9CiAgKiBAcGFyYW0gX2Nsb25lVG9rZW5TeW1ib2wge3N0cmluZ30KICAgKi8KICBmdW5jdGlvbiBjcmVhdGVDbG9uZVRva2VuKAogICAgICAgIHVpbnQgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgc3RyaW5nIF9jbG9uZVRva2VuTmFtZSwKICAgICAgICBzdHJpbmcgX2Nsb25lVG9rZW5TeW1ib2wKICAgICkgcmV0dXJucyhhZGRyZXNzKSB7CgogICAgICBpZiAoX3NuYXBzaG90QmxvY2sgPT0gMCkgewogICAgICAgIF9zbmFwc2hvdEJsb2NrID0gYmxvY2subnVtYmVyOwogICAgICB9CgogICAgICBpZiAoX3NuYXBzaG90QmxvY2sgPiBibG9jay5udW1iZXIpIHsKICAgICAgICBfc25hcHNob3RCbG9jayA9IGJsb2NrLm51bWJlcjsKICAgICAgfQoKICAgICAgUHJvb2ZUb2tlbiBjbG9uZVRva2VuID0gdG9rZW5GYWN0b3J5LmNyZWF0ZUNsb25lVG9rZW4oCiAgICAgICAgICB0aGlzLAogICAgICAgICAgX3NuYXBzaG90QmxvY2ssCiAgICAgICAgICBfY2xvbmVUb2tlbk5hbWUsCiAgICAgICAgICBfY2xvbmVUb2tlblN5bWJvbAogICAgICAgICk7CgoKICAgICAgY2xvbmVUb2tlbi50cmFuc2ZlckNvbnRyb2wobXNnLnNlbmRlcik7CgogICAgICAvLyBBbiBldmVudCB0byBtYWtlIHRoZSB0b2tlbiBlYXN5IHRvIGZpbmQgb24gdGhlIGJsb2NrY2hhaW4KICAgICAgTmV3Q2xvbmVUb2tlbihhZGRyZXNzKGNsb25lVG9rZW4pKTsKICAgICAgcmV0dXJuIGFkZHJlc3MoY2xvbmVUb2tlbik7CiAgICB9Cgp9'.
	

]
