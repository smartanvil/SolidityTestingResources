Class {
	#name : #SRT43f6a1be992dee408721748490772b15143ce0a7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT43f6a1be992dee408721748490772b15143ce0a7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBQb3RhdG9pbiAob3IgcG90YXRvIGNvaW4pIGlzIHRoZSBmaXJzdCBvZiBpdHMga2luZCwgdmlydHVhbGl6ZWQgdmVnZXRhYmxlCi8vIGNyeXB0by1hc3NldCByZXNpc3RhbnQgdG8gdGhlIGluZXZpdGFibGUgY3Jhc2ggb2YgdGhlIHdvcmxkIGVjb25vbXkhCmNvbnRyYWN0IFBvdGF0b2luIHsKICAgIC8vIG5hbWUsIHN5bWJvbCBhbmQgZGVjaW1hbHMgaW1wbGVtZW50IHRoZSBFUkMyMCB0b2tlbiBzdGFuZGFyZC4KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICAgPSAiUG90YXRvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgICA9ICJQT0lOIjsKICAgIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAwOwoKICAgIC8vIGdlbmVzaXMgYW5kIHJlbGllZiBkZWZpbmUgdGhlIHN0YXJ0IGFuZCBkdXJhdGlvbiBvZiB0aGUgcG90YXRvIHJlbGllZgogICAgLy8gb3JnYW5pemVkIGJ5IHRoZSBQb3RhdG9pbiBmb3VuZGF0aW9uLgogICAgdWludCBwdWJsaWMgZ2VuZXNpczsKICAgIHVpbnQgcHVibGljIHJlbGllZjsKCiAgICAvLyBkb25hdGVkIGNvbnRhaW5zIHRoZSBhZGRyZXNzZXMgdGhlIGZvdW5kYXRpb24gYWxyZWFkeSBkb25hdGVkIHRvLgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBkb25hdGVkOwoKICAgIC8vIHJvdCBhbmQgZ3JvdyBjb250YWlucyB0aGUgdGltZSBpbnRlcnZhbHMgaW4gd2hpY2ggdW5zb3dlZCBwb3RhdG9lcyByb3QKICAgIC8vIGF3YXkgYW5kIHNvd2VkIHBvdGF0b2VzIGRvdWJsZS4KICAgIHVpbnQgcHVibGljIGRlY2F5OwogICAgdWludCBwdWJsaWMgZ3Jvd3RoOwoKICAgIC8vIGZhcm1lcnMsIGNlbGxhcnMgYW5kIHJlY3ljbGVkIHRyYWNrIHRoZSBjdXJyZW50IHVuc293ZWQgcG90YXRvZXMgb3duZWQgYnkKICAgIC8vIGluZGl2aWR1YWwgZmFtZXJzIGFuZCB0aGUgbGFzdCB0aW1lIHJvdHRlbiBvbmVzIHdlcmUgcmVjeWNsZWQuCiAgICBhZGRyZXNzW10gICAgICAgICAgICAgICAgZmFybWVyczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBjZWxsYXJzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHRyYXNoZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcmVjeWNsZWQ7CgogICAgLy8gZmllbGQgYW5kIGZpZWxkcyBkZWZpbmUgdGhlIHBvdGF0byBmaWVsZHMgb3duZWQgYnkgaW5kaXZpZHVhbCBmYW1lcnMsCiAgICAvLyBhbG9uZyB3aXRoIHRoZSBudW1iZXIgb2YgcG90YXRvZXMgaW4gdGhlbSBhbmQgdGhlIHNvd2luZyB0aW1lLwogICAgc3RydWN0IGZpZWxkIHsKICAgICAgICB1aW50IHBvdGF0b2VzOwogICAgICAgIHVpbnQgc293ZWQ7CiAgICB9CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gZmllbGRbXSkgcHVibGljIGZpZWxkczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSAgICBwdWJsaWMgZW1wdGllczsKCiAgICAvLyBUcmFuc2ZlciBpbXBsZW1lbnRzIEVSQzIwLCByYWlzaW5nIGEgdG9rZW4gdHJhbnNmZXIgZXZlbnQuCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKCiAgICAvLyBQb3RhdG9pbiBpcyB0aGUgUG90YXRvaW4gZm91bmRhdGlvbiBjb25zdHJ1Y3Rvci4gSXQgY29uZmlndXJlcyB0aGUgcG90YXRvCiAgICAvLyByZWxpZWYgYW5kIHNldHMgdXAgdGhlIG9yZ2FuaXphdGlvbmFsIG92ZXJzaWdodC4KICAgIGZ1bmN0aW9uIFBvdGF0b2luKHVpbnQyNTYgX3JlbGllZiwgdWludDI1NiBfZGVjYXksIHVpbnQyNTYgX2dyb3d0aCkgcHVibGljIHsKICAgICAgICBnZW5lc2lzID0gYmxvY2sudGltZXN0YW1wOwogICAgICAgIHJlbGllZiAgPSBfcmVsaWVmOwogICAgICAgIGRlY2F5ICAgPSBfZGVjYXk7CiAgICAgICAgZ3Jvd3RoICA9IF9ncm93dGg7CiAgICB9CgogICAgLy8gdG90YWxTdXBwbHkgcmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIHBvdGF0b2VzIG93bmVkIGJ5IGFsbCBwZW9wbGUsCiAgICAvLyB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHRob3NlIHRoYXQgYWxyZWFkeSByb3R0ZWQgYXdheS4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQgdG90YWxTdXBwbHkpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBmYXJtZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5ICs9IGJhbGFuY2VPZihmYXJtZXJzW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5OwogICAgfQoKICAgIC8vIGJhbGFuY2VPZiByZXR1cm5zIHRoZSBjdXJyZW50IG51bWJlciBvZiBwb3RhdG9lcyBvd25lZCBieSBhIHBhcnRpY3VsYXIKICAgIC8vIGFjY291bnQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gdGhvc2UgdGhhdCBhbHJlYWR5IHJvdHRlZCBhd2F5LgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgZmFybWVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICByZXR1cm4gdW5zb3dlZChmYXJtZXIpICsgc293ZWQoZmFybWVyKTsKICAgIH0KCiAgICAvLyB1bnNvd2VkIHJldHVybnMgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHVuc293ZWQgcG90YXRvZXMgb3duZWQgYnkgYSBmYXJtZXIsCiAgICAvLyB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHRob3NlIHRoYXQgYWxyZWFkeSByb3R0ZWQgYXdheS4KICAgIGZ1bmN0aW9uIHVuc293ZWQoYWRkcmVzcyBmYXJtZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbnVtYmVyIG9mIG5vbi1yb3R0ZW4gcG90YXRvZXMgZnJvbSB0aGUgY2VsbGFyCiAgICAgICAgdmFyIGVsYXBzZWQgPSBibG9jay50aW1lc3RhbXAgLSByZWN5Y2xlZFtmYXJtZXJdOwogICAgICAgIGlmIChlbGFwc2VkIDwgZGVjYXkpIHsKICAgICAgICAgICAgYmFsYW5jZSA9IChjZWxsYXJzW2Zhcm1lcl0gKiAoZGVjYXkgLSBlbGFwc2VkKSArIGRlY2F5LTEpIC8gZGVjYXk7CiAgICAgICAgfQogICAgICAgIC8vIFJldHJpZXZlIHRoZSBudW1iZXIgb2Ygbm9uLXJvdHRlbiBwb3RhdG9lcyBmcm9tIHRoZSBmaWVsZHMKICAgICAgICB2YXIgbGlzdCA9IGZpZWxkc1tmYXJtZXJdOwogICAgICAgIGZvciAodWludCBpID0gZW1wdGllc1tmYXJtZXJdOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBlbGFwc2VkID0gYmxvY2sudGltZXN0YW1wIC0gbGlzdFtpXS5zb3dlZDsKICAgICAgICAgICAgaWYgKGVsYXBzZWQgPj0gZ3Jvd3RoICYmIGVsYXBzZWQgLSBncm93dGggPCBkZWNheSkgewogICAgICAgICAgICAgICAgYmFsYW5jZSArPSAoMiAqIGxpc3RbaV0ucG90YXRvZXMgKiAoZGVjYXktZWxhcHNlZCtncm93dGgpICsgZGVjYXktMSkgLyBkZWNheTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYmFsYW5jZTsKICAgIH0KCiAgICAvLyBzb3dlZCByZXR1cm5zIHRoZSBjdXJyZW50IG51bWJlciBvZiBzb3dlZCBwb3RhdG9lcyBvd25lZCBieSBhIGZhcm1lciwKICAgIC8vIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gdGhvc2UgdGhhdCBhcmUgY3VycmVudGx5IGdyb3dpbmcuCiAgICBmdW5jdGlvbiBzb3dlZChhZGRyZXNzIGZhcm1lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHZhciBsaXN0ID0gZmllbGRzW2Zhcm1lcl07CiAgICAgICAgZm9yICh1aW50IGkgPSBlbXB0aWVzW2Zhcm1lcl07IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBwb3RhdG9lcyBhcmUgZnVsbHkgZ3Jvd24sIGFzc3VtZSB0aGUgZmllbGQgaGFydmVzdGVkCiAgICAgICAgICAgIHZhciBlbGFwc2VkID0gYmxvY2sudGltZXN0YW1wIC0gbGlzdFtpXS5zb3dlZDsKICAgICAgICAgICAgaWYgKGVsYXBzZWQgPj0gZ3Jvd3RoKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBPdGhlcndpc2UgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgcG90YXRvZXMgImluIHRoZSBtYWtpbmciCiAgICAgICAgICAgIGJhbGFuY2UgKz0gbGlzdFtpXS5wb3RhdG9lcyArIGxpc3RbaV0ucG90YXRvZXMgKiBlbGFwc2VkIC8gZ3Jvd3RoOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYmFsYW5jZTsKICAgIH0KCiAgICAvLyB0cmFzaGVkIHJldHVybnMgdGhlIG51bWJlciBvZiBwb3RhdG9lcyBvd25lZCBieSBhIGZhcm1lciB0aGF0IHJvdCBhd2F5LAogICAgLy8gdGFraW5nIGludG8gY29uc2lkZXJhdGlvbiB0aGUgY3VycmVudCBzdG9yYWdlIGFuZCBmaWVsZHMgdG9vLgogICAgZnVuY3Rpb24gdHJhc2hlZChhZGRyZXNzIGZhcm1lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIC8vIFN0YXJ0IHdpdGggYWxsIHRoZSBhY2NvdW50ZWQgZm9yIHRyYXNoCiAgICAgICAgYmFsYW5jZSA9IHRyYXNoZXNbZmFybWVyXTsKCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSByb3R0ZW4gcG90YXRvZXMgZnJvbSBzdG9yYWdlCiAgICAgICAgdmFyIGVsYXBzZWQgPSBibG9jay50aW1lc3RhbXAgLSByZWN5Y2xlZFtmYXJtZXJdOwogICAgICAgIGlmIChlbGFwc2VkID49IDApIHsKICAgICAgICAgICAgdmFyIHJvdHRlbiA9IGNlbGxhcnNbZmFybWVyXTsKICAgICAgICAgICAgaWYgKGVsYXBzZWQgPCBkZWNheSkgewogICAgICAgICAgICAgICByb3R0ZW4gPSBjZWxsYXJzW2Zhcm1lcl0gKiBlbGFwc2VkIC8gZGVjYXk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmFsYW5jZSArPSByb3R0ZW47CiAgICAgICAgfQogICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcm90dGVuIHBvdGF0b2VzIGZyb20gdGhlIGZpZWxkcwogICAgICAgIHZhciBsaXN0ID0gZmllbGRzW2Zhcm1lcl07CiAgICAgICAgZm9yICh1aW50IGkgPSBlbXB0aWVzW2Zhcm1lcl07IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGVsYXBzZWQgPSBibG9jay50aW1lc3RhbXAgLSBsaXN0W2ldLnNvd2VkOwogICAgICAgICAgICBpZiAoZWxhcHNlZCA+PSBncm93dGgpIHsKICAgICAgICAgICAgICAgIHJvdHRlbiA9IDIgKiBsaXN0W2ldLnBvdGF0b2VzOwogICAgICAgICAgICAgICAgaWYgIChlbGFwc2VkIC0gZ3Jvd3RoIDwgZGVjYXkpIHsKICAgICAgICAgICAgICAgICAgICByb3R0ZW4gPSAyICogbGlzdFtpXS5wb3RhdG9lcyAqIChlbGFwc2VkIC0gZ3Jvd3RoKSAvIGRlY2F5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYmFsYW5jZSArPSByb3R0ZW47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhbGFuY2U7CiAgICB9CgogICAgLy8gcmVxdWVzdCBhc2tzIHRoZSBQb3RhdG9pbiBmb3VuZGF0aW9uIGZvciBhIGdyYW50IG9mIG9uZSBwb3RhdG8uIFBvdGF0b2VzCiAgICAvLyBhcmUgYXZhaWxhYmxlIG9ubHkgZHVyaW5nIHRoZSBpbml0aWFsIGh1bmdlciByZWxpZWYgcGhhc2UuCiAgICBmdW5jdGlvbiByZXF1ZXN0KCkgcHVibGljIHsKICAgICAgICAvLyBGYXJtZXJzIGNhbiBvbmx5IHJlcXVlc3QgcG90YXRvZXMgZHVyaW5nIHRoZSByZWxpZXZlLCBvbmUgcGVyIHBlcnNvbgogICAgICAgIHJlcXVpcmUoYmxvY2sudGltZXN0YW1wIDwgZ2VuZXNpcyArIHJlbGllZik7CiAgICAgICAgcmVxdWlyZShkb25hdGVkW21zZy5zZW5kZXJdID09IDApOwoKICAgICAgICAvLyBGYXJtZXIgaXMgaW5kZWVkIGEgbmV3IG9uZSwgZ3JhbnQgaXRzIHBvdGF0bwogICAgICAgIGRvbmF0ZWRbbXNnLnNlbmRlcl0gPSBibG9jay50aW1lc3RhbXA7CgogICAgICAgIGZhcm1lcnMucHVzaChtc2cuc2VuZGVyKTsKICAgICAgICBjZWxsYXJzW21zZy5zZW5kZXJdID0gMTsKICAgICAgICByZWN5Y2xlZFttc2cuc2VuZGVyXSA9IGJsb2NrLnRpbWVzdGFtcDsKCiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgMSk7CiAgICB9CgogICAgLy8gc293IGNyZWF0ZXMgYSBuZXcgcG90YXRvIGZpZWxkIHdpdGggdGhlIHJlcXVlc3RlZCBudW1iZXIgb2YgcG90YXRvZXMgaW4KICAgIC8vIGl0LCBkb3VibGluZyBhZnRlciB0aGUgZ3Jvd2luZyBwZXJpb2QgZW5kcy4gSWYgdGhlIGZhcm1lciBkb2Vzbid0IGhhdmUKICAgIC8vIHRoZSByZXF1ZXN0ZWQgYW1vdW50IG9mIHBvdGF0b2VzLCBhbGwgZXhpc3Rpbmcgb25lcyB3aWxsIGJlIHNvd2VkLgogICAgZnVuY3Rpb24gc293KHVpbnQgcG90YXRvZXMpIHB1YmxpYyB7CiAgICAgICAgLy8gSGFydmVzdCBhbnkgcmlwZSBmaWVsZHMKICAgICAgICBoYXJ2ZXN0KG1zZy5zZW5kZXIpOwoKICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIG1lYW5pbmdmdWwgYW1vdW50IHRvIHNvdwogICAgICAgIGlmIChwb3RhdG9lcyA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gSWYgYW55IHBvdGF0b2VzIGFyZSBsZWZ0IGZvciB0aGUgZmFybWVyLCBzb3cgdGhlbQogICAgICAgIGlmIChjZWxsYXJzW21zZy5zZW5kZXJdID4gMCkgewogICAgICAgICAgICBpZiAocG90YXRvZXMgPiBjZWxsYXJzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgICAgICBwb3RhdG9lcyA9IGNlbGxhcnNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmllbGRzW21zZy5zZW5kZXJdLnB1c2goZmllbGQocG90YXRvZXMsIGJsb2NrLnRpbWVzdGFtcCkpOwogICAgICAgICAgICBjZWxsYXJzW21zZy5zZW5kZXJdIC09IHBvdGF0b2VzOwoKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdGhpcywgcG90YXRvZXMpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBoYXJ2ZXN0IGdhdGhlcnMgYWxsIHRoZSBwb3RhdG9lcyBvZiBhIHVzZXIgdGhhdCBoYXZlIGZpbmlzaGVkIGdyb3dpbmcuCiAgICAvLyBBbnkgcm90dGVuIG9uZXMgYXJlIGRlZHVjZWQgZnJvbSB0aGUgZmluYWwgY291bnRlci4gVGhlIHBvdGF0b2VzIGluIHRoZQogICAgLy8gY2VsbGFyIGFyZSBhbHNvIGFjY291bnRlZCBmb3IuCiAgICBmdW5jdGlvbiBoYXJ2ZXN0KGFkZHJlc3MgZmFybWVyKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gUmVjeWNsZSBhbnkgcm90dGVkIGF3YXkgcG90YXRvZXMgdG8gdXBkYXRlIHRoZSByZWN5Y2xlIHRpbWVyCiAgICAgICAgcmVjeWNsZShmYXJtZXIpOwoKICAgICAgICAvLyBIYXJ2ZXN0IGFsbCB0aGUgcmlwZSBmaWVsZHMKICAgICAgICB2YXIgbGlzdCA9IGZpZWxkc1tmYXJtZXJdOwogICAgICAgIGZvciAodWludCBpID0gZW1wdGllc1tmYXJtZXJdOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgZWxhcHNlZCA9IGJsb2NrLnRpbWVzdGFtcCAtIGxpc3RbaV0uc293ZWQ7CiAgICAgICAgICAgIGlmIChlbGFwc2VkID49IGdyb3d0aCkgewogICAgICAgICAgICAgICAgaWYgKGVsYXBzZWQgLSBncm93dGggPCBkZWNheSkgewogICAgICAgICAgICAgICAgICAgIHZhciBoYXJ2ZXN0ZWQgPSAoMiAqIGxpc3RbaV0ucG90YXRvZXMgKiAoZGVjYXktZWxhcHNlZCtncm93dGgpICsgZGVjYXktMSkgLyBkZWNheTsKICAgICAgICAgICAgICAgICAgICB2YXIgcm90dGVuICAgID0gMiAqIGxpc3RbaV0ucG90YXRvZXMgLSBoYXJ2ZXN0ZWQ7CgogICAgICAgICAgICAgICAgICAgIGNlbGxhcnNbZmFybWVyXSArPSBoYXJ2ZXN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgVHJhbnNmZXIodGhpcywgZmFybWVyLCBoYXJ2ZXN0ZWQpOwoKICAgICAgICAgICAgICAgICAgICBpZiAocm90dGVuID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFzaGVzW2Zhcm1lcl0gKz0gcm90dGVuOwogICAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCAwLCByb3R0ZW4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdHJhc2hlc1tmYXJtZXJdICs9IDIgKiBsaXN0W2ldLnBvdGF0b2VzOwogICAgICAgICAgICAgICAgICAgIFRyYW5zZmVyKHRoaXMsIDAsIDIgKiBsaXN0W2ldLnBvdGF0b2VzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVtcHRpZXNbZmFybWVyXSsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIElmIGFsbCB0aGUgZmllbGRzIHdlcmUgaGFydmVzdGVkLCByZXdpbmQgdGhlIGFjY3VtdWxhdG9ycwogICAgICAgIGlmIChlbXB0aWVzW2Zhcm1lcl0gPiAwICYmIGVtcHRpZXNbZmFybWVyXSA9PSBsaXN0Lmxlbmd0aCkgewogICAgICAgICAgICBkZWxldGUgZW1wdGllc1tmYXJtZXJdOwogICAgICAgICAgICBkZWxldGUgZmllbGRzW2Zhcm1lcl07CiAgICAgICAgfQogICAgfQoKICAgIC8vIHJlY3ljbGUgdGhyb3dzIGF3YXkgdGhlIHBvdGF0b2VzIG9mIGEgdXNlciB0aGF0IHJvdHRlZCBhd2F5LgogICAgZnVuY3Rpb24gcmVjeWNsZShhZGRyZXNzIGZhcm1lcikgaW50ZXJuYWwgewogICAgICAgIHZhciBlbGFwc2VkID0gYmxvY2sudGltZXN0YW1wIC0gcmVjeWNsZWRbZmFybWVyXTsKICAgICAgICBpZiAoZWxhcHNlZCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHJvdHRlbiA9IGNlbGxhcnNbZmFybWVyXTsKICAgICAgICBpZiAoZWxhcHNlZCA8IGRlY2F5KSB7CiAgICAgICAgICAgcm90dGVuID0gY2VsbGFyc1tmYXJtZXJdICogZWxhcHNlZCAvIGRlY2F5OwogICAgICAgIH0KICAgICAgICBpZiAocm90dGVuID4gMCkgewogICAgICAgICAgICBjZWxsYXJzW2Zhcm1lcl0gLT0gcm90dGVuOwogICAgICAgICAgICB0cmFzaGVzW2Zhcm1lcl0gKz0gcm90dGVuOwoKICAgICAgICAgICAgVHJhbnNmZXIoZmFybWVyLCAwLCByb3R0ZW4pOwogICAgICAgIH0KICAgICAgICByZWN5Y2xlZFtmYXJtZXJdID0gYmxvY2sudGltZXN0YW1wOwogICAgfQoKICAgIC8vIHRyYW5zZmVyIGZvcndhcmRzIGEgbnVtYmVyIG9mIHBvdGF0b2VzIHRvIHRoZSByZXF1ZXN0ZWQgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgcG90YXRvZXMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBIYXJ2ZXN0IG93biByaXBlIGZpZWxkcyBhbmQgbWFrZSBzdXJlIHdlIGNhbiB0cmFuc2ZlcgogICAgICAgIGhhcnZlc3QobXNnLnNlbmRlcik7CiAgICAgICAgaWYgKGNlbGxhcnNbbXNnLnNlbmRlcl0gPCBwb3RhdG9lcykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIFJlY3ljbGUgdGhlIHJlbW90ZSByb3R0ZW4gb25lcyBhbmQgZXhlY3V0ZSB0aGUgdHJhbnNmcmUKICAgICAgICByZWN5Y2xlKHRvKTsKICAgICAgICBjZWxsYXJzW21zZy5zZW5kZXJdIC09IHBvdGF0b2VzOwogICAgICAgIGNlbGxhcnNbdG9dICAgICAgICAgKz0gcG90YXRvZXM7CgogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCBwb3RhdG9lcyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gdHJhbnNmZXJGcm9tIGltcGxlbWVudHMgRVJDMjAsIGJ1dCBpcyBmb3JiaWRkZW4uCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYXBwcm92ZSBpbXBsZW1lbnRzIEVSQzIwLCBidXQgaXMgZm9yYmlkZGVuLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGFsbG93YW5jZSBpbXBsZW1lbnRzIEVSQzIwLCBidXQgaXMgZm9yYmlkZGVuLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiAwOwogICAgfQp9'.
	

]
