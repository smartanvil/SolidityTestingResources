Class {
	#name : #SRTfbd592011527e69d86961f6d70f9169195f17ca5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfbd592011527e69d86961f6d70f9169195f17ca5 >> base64 [
	^ 'LyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICAvLyB0aW1lc3RhbXBzIGZvciBQUkUtSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBwcmVpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBwcmVpY29FbmREYXRlOwogICAgLy8gdGltZXN0YW1wcyBmb3IgSUNPIHBoYXNlCiAgICB1aW50IHB1YmxpYyBpY29TdGFydERhdGU7CiAgICB1aW50IHB1YmxpYyBpY29FbmREYXRlOwogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG5vdyA+IGljb0VuZERhdGUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogICAgLyoqCiAgICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobm93ID4gaWNvRW5kRGF0ZSk7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9Cgpjb250cmFjdCBPd25hYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIC8qKgogICAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAgKiBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgVGhlTW92ZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIk1PVkUgVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTU9WRSI7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKICAgIC8vIGhvdyBtYW55IHRva2VuIHVuaXRzIGEgYnV5ZXIgZ2V0cyBwZXIgd2VpCiAgICB1aW50MjU2IHB1YmxpYyByYXRlOwogICAgdWludDI1NiBwdWJsaWMgbWluVHJhbnNhY3Rpb25BbW91bnQ7CiAgICB1aW50MjU2IHB1YmxpYyByYWlzZWRGb3JFdGhlciA9IDA7CiAgICB1aW50MjU2IHByaXZhdGUgcHJlaWNvU3VwcGx5ID0gMzA3MjAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBpY29TdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBib251c2VzU3VwcGx5ID0gMzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICB1aW50MjU2IHB1YmxpYyBib251c2VzU29sZCA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkID0gMDsKCiAgICAvLyBQUkUtSUNPIHN0YWdlcwogICAgdWludDI1NiBwdWJsaWMgc3RhZ2UxID0gMjQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludDI1NiBwdWJsaWMgc3RhZ2UyID0gMzYwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludDI1NiBwdWJsaWMgc3RhZ2UzID0gOTYwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludDI1NiBwdWJsaWMgc3RhZ2U0ID0gMTUxMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICBtb2RpZmllciBpbkFjdGl2ZVBlcmlvZCgpIHsKCSAgIHJlcXVpcmUoKHByZWljb1N0YXJ0RGF0ZSA8IG5vdyAmJiBub3cgPD0gcHJlaWNvRW5kRGF0ZSkgfHwgKGljb1N0YXJ0RGF0ZSA8IG5vdyAmJiBub3cgPD0gaWNvRW5kRGF0ZSkpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gVGhlTW92ZVRva2VuKHVpbnQgX3ByZWljb3N0YXJ0LCB1aW50IF9wcmVpY29lbmQsdWludCBfaWNvc3RhcnQsIHVpbnQgX2ljb2VuZCwgYWRkcmVzcyBfd2FsbGV0KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3dhbGxldCAhPSAweDApOwogICAgICAgIHJlcXVpcmUoX3ByZWljb3N0YXJ0IDwgX3ByZWljb2VuZCk7CiAgICAgICAgcmVxdWlyZShfcHJlaWNvZW5kIDwgX2ljb3N0YXJ0KTsKICAgICAgICByZXF1aXJlKF9pY29zdGFydCA8IF9pY29lbmQpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IDIxMTcyMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgIHJhdGUgPSA2MDA7CgogICAgICAgIC8vIG1pbmltYWwgaW52ZXN0CiAgICAgICAgbWluVHJhbnNhY3Rpb25BbW91bnQgPSAwLjEgZXRoZXI7CiAgICAgICAgaWNvU3RhcnREYXRlID0gX2ljb3N0YXJ0OwogICAgICAgIGljb0VuZERhdGUgPSBfaWNvZW5kOwogICAgICAgIHByZWljb1N0YXJ0RGF0ZSA9IF9wcmVpY29zdGFydDsKICAgICAgICBwcmVpY29FbmREYXRlID0gX3ByZWljb2VuZDsKICAgICAgICB3YWxsZXQgPSBfd2FsbGV0OwoKCSAgIC8vIFN0b3JlIHRoZSBpY28gZnVuZHMgaW4gdGhlIGNvbnRyYWN0IGFuZCBzZW5kIHRoZSByZXN0IHRvIHRoZSBkZXZlbG9wZXIgd2FsbGV0CiAgICAgICB1aW50MjU2IGFtb3VudEluQ29udHJhY3QgPSBwcmVpY29TdXBwbHkgKyBpY29TdXBwbHkgKyBib251c2VzU3VwcGx5OwoKCSAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uYWRkKGFtb3VudEluQ29udHJhY3QpOwogICAgICAgYmFsYW5jZXNbX3dhbGxldF0gPSBiYWxhbmNlc1tfd2FsbGV0XS5hZGQodG90YWxTdXBwbHkgLSBhbW91bnRJbkNvbnRyYWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXR1cFBSRUlDT1BlcmlvZCh1aW50IF9zdGFydCwgdWludCBfZW5kKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9zdGFydCA8IF9lbmQpOwogICAgICAgIHByZWljb1N0YXJ0RGF0ZSA9IF9zdGFydDsKICAgICAgICBwcmVpY29FbmREYXRlID0gX2VuZDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXR1cElDT1BlcmlvZCh1aW50IF9zdGFydCwgdWludCBfZW5kKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9zdGFydCA8IF9lbmQpOwogICAgICAgIGljb1N0YXJ0RGF0ZSA9IF9zdGFydDsKICAgICAgICBpY29FbmREYXRlID0gX2VuZDsKICAgIH0KCiAgICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgaW5BY3RpdmVQZXJpb2QgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5QUkVJQ09Ub2tlbnMoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBpbnQyNTYgYW1vdW50VG9CdXJuID0gaW50MjU2KHByZWljb1N1cHBseSkgLSBpbnQyNTYodG9rZW5zU29sZCk7CiAgICAgICAgaWYgKGFtb3VudFRvQnVybiA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBiYWxhbmNlc1t0aGlzXS5zdWIodWludDI1NihhbW91bnRUb0J1cm4pKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gVXNlIHdpdGggZXh0cmVtZSBjYXV0aW9uIHRoaXMgd2lsbCBidXJuIHRoZSByZXN0IG9mIHRoZSB0b2tlbnMgaW4gdGhlIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBidXJuSUNPVG9rZW5zKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgYmFsYW5jZXNbdGhpc10gPSAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm5Cb251c2VzKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaW50MjU2IGFtb3VudFRvQnVybiA9IGludDI1Nihib251c2VzU3VwcGx5KSAtIGludDI1Nihib251c2VzU29sZCk7CiAgICAgICAgaWYgKGFtb3VudFRvQnVybiA+IDApIHsKICAgICAgICAgICAgYmFsYW5jZXNbdGhpc10gPSBiYWxhbmNlc1t0aGlzXS5zdWIodWludDI1NihhbW91bnRUb0J1cm4pKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gbG93IGxldmVsIHRva2VuIHB1cmNoYXNlIGZ1bmN0aW9uCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfc2VuZGVyKSBwdWJsaWMgaW5BY3RpdmVQZXJpb2QgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShfc2VuZGVyICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gbWluVHJhbnNhY3Rpb25BbW91bnQpOwoKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKCiAgICAgICAgcmFpc2VkRm9yRXRoZXIgPSByYWlzZWRGb3JFdGhlci5hZGQod2VpQW1vdW50KTsKCiAgICAgICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBpc3N1ZWQKICAgICAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZSk7CiAgICAgICAgdG9rZW5zICs9IGdldEJvbnVzKHRva2Vucyk7CgogICAgICAgIGlmIChpc1BSRUlDTygpKSB7CiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zU29sZCArIHRva2VucyA8IHByZWljb1N1cHBseSk7CiAgICAgICAgfSBlbHNlIGlmIChpc0lDTygpKSB7CiAgICAgICAgICAgIHJlcXVpcmUodG9rZW5zU29sZCArIHRva2VucyA8PSAoaWNvU3VwcGx5ICsgYm9udXNlc1N1cHBseSkpOwogICAgICAgIH0KCiAgICAgICAgaXNzdWVUb2tlbnMoX3NlbmRlciwgdG9rZW5zKTsKICAgICAgICB0b2tlbnNTb2xkICs9IHRva2VuczsKICAgIH0KICAgIAogICAgLy8gSGlnaCBsZXZlbCB0b2tlbiBpc3N1ZSBmdW5jdGlvbgogICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgYnkgdGhlIHNjcmlwdCB3aGljaCBkaXN0cmlidXRlcyB0b2tlbnMKICAgIC8vIHRvIHRob3NlIHdobyBjb250cmlidXRlZCBpbiBCVEMgb3IgTFRDLgogICAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgaW5BY3RpdmVQZXJpb2Qgb25seU93bmVyIHsKICAgICAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGlzc3VlZAogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gYW1vdW50Lm11bChyYXRlKTsKICAgICAgICB0b2tlbnMgKz0gZ2V0Qm9udXModG9rZW5zKTsKCiAgICAgICAgaWYgKGlzUFJFSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDwgcHJlaWNvU3VwcGx5KTsKICAgICAgICB9IGVsc2UgaWYgKGlzSUNPKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b2tlbnNTb2xkICsgdG9rZW5zIDw9IChpY29TdXBwbHkgKyBib251c2VzU3VwcGx5KSk7CiAgICAgICAgfQoKICAgICAgICBpc3N1ZVRva2Vucyhfc2VuZGVyLCB0b2tlbnMpOwogICAgICAgIHRva2Vuc1NvbGQgKz0gdG9rZW5zOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIodWludDI1NiBhbW91bnQpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1BSRUlDTygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKHByZWljb1N0YXJ0RGF0ZSA8IG5vdyAmJiBub3cgPD0gcHJlaWNvRW5kRGF0ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNJQ08oKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChpY29TdGFydERhdGUgPCBub3cgJiYgbm93IDw9IGljb0VuZERhdGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJvbnVzKHVpbnQyNTYgX3Rva2VucykgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF90b2tlbnMgIT0gMCk7CiAgICAgICAgdWludDI1NiBib251c2VzID0gMDsKICAgICAgICB1aW50MjU2IG11bHRpcGxpZXIgPSAwOwoKICAgICAgICAvLyBGaXJzdCBjYXNlIGlmIFBSRS1JQ08gaXMgaGFwcGVuaW5nCiAgICAgICAgaWYgKGlzUFJFSUNPKCkpIHsKICAgICAgICAgICAgLy8gQm9udXMgZGVwZW5kcyBvbiB0aGUgYW1vdW50IG9mIHRva2VucyBzb2xkLgogICAgICAgICAgICBpZiAodG9rZW5zU29sZCA8IHN0YWdlMSkgewogICAgICAgICAgICAgICAgLy8gMTAwJSBib251cyBmb3Igc3RhZ2UxCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gMTAwOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YWdlMSA8IHRva2Vuc1NvbGQgJiYgdG9rZW5zU29sZCA8IChzdGFnZTEgKyBzdGFnZTIpKSB7CiAgICAgICAgICAgICAgICAvLyA4MCUgYm9udXMgZm9yIHN0YWdlMgogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDgwOwogICAgICAgICAgICB9IGVsc2UgaWYgKChzdGFnZTEgKyBzdGFnZTIpIDwgdG9rZW5zU29sZCAmJiB0b2tlbnNTb2xkIDwgKHN0YWdlMSArIHN0YWdlMiArIHN0YWdlMykpIHsKICAgICAgICAgICAgICAgIC8vIDYwJSBib251cyBmb3Igc3RhZ2UyCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gNjA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHN0YWdlMSArIHN0YWdlMiArIHN0YWdlMykgPCB0b2tlbnNTb2xkICYmIHRva2Vuc1NvbGQgPCAoc3RhZ2UxICsgc3RhZ2UyICsgc3RhZ2UzICsgc3RhZ2U0KSkgewogICAgICAgICAgICAgICAgLy8gNDAlIGJvbnVzIGZvciBzdGFnZTIKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSA0MDsKICAgICAgICAgICAgfQogICAgICAgICAgICBib251c2VzID0gX3Rva2Vucy5tdWwobXVsdGlwbGllcikuZGl2KDEwMCk7CgogICAgICAgICAgICByZXR1cm4gYm9udXNlczsKICAgICAgICB9CgogICAgICAgIAogICAgICAgIC8vIFNlY29uZCBjYXNlIGlmIElDTyBpcyBoYXBwZW5pbmcKICAgICAgICBlbHNlIGlmIChpc0lDTygpKSB7CiAgICAgICAgICAgIC8vIEJvbnVzIGRlcGVuZHMgb24gdGhlIHdlZWsgb2YgdGhlIElDTyBhbmQgdGhlIGJvbnVzIHN1cHBseQogICAgICAgICAgICBpZiAoaWNvU3RhcnREYXRlIDwgbm93ICYmIG5vdyA8PSBpY29TdGFydERhdGUgKyA3IGRheXMpIHsKICAgICAgICAgICAgICAgIC8vIDIwJSBib251cyB3ZWVrIDEKICAgICAgICAgICAgICAgIG11bHRpcGxpZXIgPSAyMDsKICAgICAgICAgICAgfSBlbHNlIGlmIChpY29TdGFydERhdGUgKyA3IGRheXMgPCBub3cgJiYgbm93IDw9IGljb1N0YXJ0RGF0ZSArIDE0IGRheXMgKSB7CiAgICAgICAgICAgICAgICAvLyAxMCUgYm9udXMgd2VlayAyCiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyID0gMTA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWNvU3RhcnREYXRlICsgMTQgZGF5cyA8IG5vdyAmJiBub3cgPD0gaWNvU3RhcnREYXRlICsgMjEgZGF5cyApIHsKICAgICAgICAgICAgICAgIC8vIDUlIGJvbnVzIHdlZWsgMwogICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IDU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvbnVzZXMgPSBfdG9rZW5zLm11bChtdWx0aXBsaWVyKS5kaXYoMTAwKTsKCiAgICAgICAgICAgIC8vIEJvbnVzIHN1cHBseSBsaW1pdCByZWFjaGVkLgogICAgICAgICAgICBpZiAoYm9udXNlc1NvbGQgKyBib251c2VzID4gYm9udXNlc1N1cHBseSkgewogICAgICAgICAgICAgICAgYm9udXNlcyA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBib251c2VzU29sZCArPSBib251c2VzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBib251c2VzOwogICAgICAgIH0gCiAgICB9CgogICAgLy8gVGhpcyBmdW5jdGlvbiB0cmFuc2ZlcnMgdG9rZW5zIHRvIHRoZSBjb250cmlidXRvcidzIGFjY291bnQuCiAgICBmdW5jdGlvbiBpc3N1ZVRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1t0aGlzXSA9IGJhbGFuY2VzW3RoaXNdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
