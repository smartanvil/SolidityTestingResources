Class {
	#name : #SRT3d566454c7b2cdd382925380afb82bfb44e3c7b6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3d566454c7b2cdd382925380afb82bfb44e3c7b6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBBcmd1bWVudHNDaGVja2VyIHsKCiAgICAvLy8gQGRldiBjaGVjayB3aGljaCBwcmV2ZW50cyBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgcGF5bG9hZFNpemVJcyh1aW50IHNpemUpIHsKICAgICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID09IHNpemUgKyA0IC8qIGZ1bmN0aW9uIHNlbGVjdG9yICovKTsKICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgY2hlY2sgdGhhdCBhZGRyZXNzIGlzIHZhbGlkCiAgICBtb2RpZmllciB2YWxpZEFkZHJlc3MoYWRkcmVzcyBhZGRyKSB7CiAgICAgICAgcmVxdWlyZShhZGRyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIF87CiAgICB9Cn0KCmNvbnRyYWN0IG11bHRpb3duZWQgewoKCS8vIFRZUEVTCgogICAgLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uCiAgICBzdHJ1Y3QgTXVsdGlPd25lZE9wZXJhdGlvblBlbmRpbmdTdGF0ZSB7CiAgICAgICAgLy8gY291bnQgb2YgY29uZmlybWF0aW9ucyBuZWVkZWQKICAgICAgICB1aW50IHlldE5lZWRlZDsKCiAgICAgICAgLy8gYml0bWFwIG9mIGNvbmZpcm1hdGlvbnMgd2hlcmUgb3duZXIgI293bmVySW5kZXgncyBkZWNpc2lvbiBjb3JyZXNwb25kcyB0byAyKipvd25lckluZGV4IGJpdAogICAgICAgIHVpbnQgb3duZXJzRG9uZTsKCiAgICAgICAgLy8gcG9zaXRpb24gb2YgdGhpcyBvcGVyYXRpb24ga2V5IGluIG1fbXVsdGlPd25lZFBlbmRpbmdJbmRleAogICAgICAgIHVpbnQgaW5kZXg7CiAgICB9CgoJLy8gRVZFTlRTCgogICAgZXZlbnQgQ29uZmlybWF0aW9uKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKICAgIGV2ZW50IFJldm9rZShhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7CiAgICBldmVudCBGaW5hbENvbmZpcm1hdGlvbihhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbik7CgogICAgLy8gc29tZSBvdGhlcnMgYXJlIGluIHRoZSBjYXNlIG9mIGFuIG93bmVyIGNoYW5naW5nLgogICAgZXZlbnQgT3duZXJDaGFuZ2VkKGFkZHJlc3Mgb2xkT3duZXIsIGFkZHJlc3MgbmV3T3duZXIpOwogICAgZXZlbnQgT3duZXJBZGRlZChhZGRyZXNzIG5ld093bmVyKTsKICAgIGV2ZW50IE93bmVyUmVtb3ZlZChhZGRyZXNzIG9sZE93bmVyKTsKCiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UKICAgIGV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsKCgkvLyBNT0RJRklFUlMKCiAgICAvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4KICAgIG1vZGlmaWVyIG9ubHlvd25lciB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQogICAgLy8gbXVsdGktc2lnIGZ1bmN0aW9uIG1vZGlmaWVyOiB0aGUgb3BlcmF0aW9uIG11c3QgaGF2ZSBhbiBpbnRyaW5zaWMgaGFzaCBpbiBvcmRlcgogICAgLy8gdGhhdCBsYXRlciBhdHRlbXB0cyBjYW4gYmUgcmVhbGlzZWQgYXMgdGhlIHNhbWUgdW5kZXJseWluZyBvcGVyYXRpb24gYW5kCiAgICAvLyB0aHVzIGNvdW50IGFzIGNvbmZpcm1hdGlvbnMuCiAgICBtb2RpZmllciBvbmx5bWFueW93bmVycyhieXRlczMyIF9vcGVyYXRpb24pIHsKICAgICAgICBpZiAoY29uZmlybUFuZENoZWNrKF9vcGVyYXRpb24pKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfQogICAgICAgIC8vIEV2ZW4gaWYgcmVxdWlyZWQgbnVtYmVyIG9mIGNvbmZpcm1hdGlvbnMgaGFzJ3QgYmVlbiBjb2xsZWN0ZWQgeWV0LAogICAgICAgIC8vIHdlIGNhbid0IHRocm93IGhlcmUgLSBiZWNhdXNlIGNoYW5nZXMgdG8gdGhlIHN0YXRlIGhhdmUgdG8gYmUgcHJlc2VydmVkLgogICAgICAgIC8vIEJ1dCwgY29uZmlybUFuZENoZWNrIGl0c2VsZiB3aWxsIHRocm93IGluIGNhc2Ugc2VuZGVyIGlzIG5vdCBhbiBvd25lci4KICAgIH0KCiAgICBtb2RpZmllciB2YWxpZE51bU93bmVycyh1aW50IF9udW1Pd25lcnMpIHsKICAgICAgICByZXF1aXJlKF9udW1Pd25lcnMgPiAwICYmIF9udW1Pd25lcnMgPD0gY19tYXhPd25lcnMpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbXVsdGlPd25lZFZhbGlkUmVxdWlyZW1lbnQodWludCBfcmVxdWlyZWQsIHVpbnQgX251bU93bmVycykgewogICAgICAgIHJlcXVpcmUoX3JlcXVpcmVkID4gMCAmJiBfcmVxdWlyZWQgPD0gX251bU93bmVycyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvd25lckV4aXN0cyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKF9hZGRyZXNzKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvd25lckRvZXNOb3RFeGlzdChhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZSghaXNPd25lcihfYWRkcmVzcykpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbXVsdGlPd25lZE9wZXJhdGlvbklzQWN0aXZlKGJ5dGVzMzIgX29wZXJhdGlvbikgewogICAgICAgIHJlcXVpcmUoaXNPcGVyYXRpb25BY3RpdmUoX29wZXJhdGlvbikpOwogICAgICAgIF87CiAgICB9CgoJLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnlvd25lcnMiIHRyYW5zYWN0aW9ucwogICAgLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbSAobXNnLnNlbmRlciBpcyBub3QgYWRkZWQgdG8gdGhlIG93bmVycyEpLgogICAgZnVuY3Rpb24gbXVsdGlvd25lZChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmFsaWROdW1Pd25lcnMoX293bmVycy5sZW5ndGgpCiAgICAgICAgbXVsdGlPd25lZFZhbGlkUmVxdWlyZW1lbnQoX3JlcXVpcmVkLCBfb3duZXJzLmxlbmd0aCkKICAgIHsKICAgICAgICBhc3NlcnQoY19tYXhPd25lcnMgPD0gMjU1KTsKCiAgICAgICAgbV9udW1Pd25lcnMgPSBfb3duZXJzLmxlbmd0aDsKICAgICAgICBtX211bHRpT3duZWRSZXF1aXJlZCA9IF9yZXF1aXJlZDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX293bmVycy5sZW5ndGg7ICsraSkKICAgICAgICB7CiAgICAgICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXJzW2ldOwogICAgICAgICAgICAvLyBpbnZhbGlkIGFuZCBkdXBsaWNhdGUgYWRkcmVzc2VzIGFyZSBub3QgYWxsb3dlZAogICAgICAgICAgICByZXF1aXJlKDAgIT0gb3duZXIgJiYgIWlzT3duZXIob3duZXIpIC8qIG5vdCBpc093bmVyIHlldCEgKi8pOwoKICAgICAgICAgICAgdWludCBjdXJyZW50T3duZXJJbmRleCA9IGNoZWNrT3duZXJJbmRleChpICsgMSAvKiBmaXJzdCBzbG90IGlzIHVudXNlZCAqLyk7CiAgICAgICAgICAgIG1fb3duZXJzW2N1cnJlbnRPd25lckluZGV4XSA9IG93bmVyOwogICAgICAgICAgICBtX293bmVySW5kZXhbb3duZXJdID0gY3VycmVudE93bmVySW5kZXg7CiAgICAgICAgfQoKICAgICAgICBhc3NlcnRPd25lcnNBcmVDb25zaXN0ZW50KCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgcmVwbGFjZXMgYW4gb3duZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuCiAgICAvLy8gQHBhcmFtIF9mcm9tIGFkZHJlc3Mgb2Ygb3duZXIgdG8gcmVwbGFjZQogICAgLy8vIEBwYXJhbSBfdG8gYWRkcmVzcyBvZiBuZXcgb3duZXIKICAgIC8vIEFsbCBwZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBiZSBjYW5jZWxlZCEKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgb3duZXJFeGlzdHMoX2Zyb20pCiAgICAgICAgb3duZXJEb2VzTm90RXhpc3QoX3RvKQogICAgICAgIG9ubHltYW55b3duZXJzKGtlY2NhazI1Nihtc2cuZGF0YSkpCiAgICB7CiAgICAgICAgYXNzZXJ0T3duZXJzQXJlQ29uc2lzdGVudCgpOwoKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICB1aW50IG93bmVySW5kZXggPSBjaGVja093bmVySW5kZXgobV9vd25lckluZGV4W19mcm9tXSk7CiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSBfdG87CiAgICAgICAgbV9vd25lckluZGV4W19mcm9tXSA9IDA7CiAgICAgICAgbV9vd25lckluZGV4W190b10gPSBvd25lckluZGV4OwoKICAgICAgICBhc3NlcnRPd25lcnNBcmVDb25zaXN0ZW50KCk7CiAgICAgICAgT3duZXJDaGFuZ2VkKF9mcm9tLCBfdG8pOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGFkZHMgYW4gb3duZXIKICAgIC8vLyBAcGFyYW0gX293bmVyIGFkZHJlc3Mgb2YgbmV3IG93bmVyCiAgICAvLyBBbGwgcGVuZGluZyBvcGVyYXRpb25zIHdpbGwgYmUgY2FuY2VsZWQhCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9vd25lcikKICAgICAgICBleHRlcm5hbAogICAgICAgIG93bmVyRG9lc05vdEV4aXN0KF9vd25lcikKICAgICAgICB2YWxpZE51bU93bmVycyhtX251bU93bmVycyArIDEpCiAgICAgICAgb25seW1hbnlvd25lcnMoa2VjY2FrMjU2KG1zZy5kYXRhKSkKICAgIHsKICAgICAgICBhc3NlcnRPd25lcnNBcmVDb25zaXN0ZW50KCk7CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIG1fbnVtT3duZXJzKys7CiAgICAgICAgbV9vd25lcnNbbV9udW1Pd25lcnNdID0gX293bmVyOwogICAgICAgIG1fb3duZXJJbmRleFtfb3duZXJdID0gY2hlY2tPd25lckluZGV4KG1fbnVtT3duZXJzKTsKCiAgICAgICAgYXNzZXJ0T3duZXJzQXJlQ29uc2lzdGVudCgpOwogICAgICAgIE93bmVyQWRkZWQoX293bmVyKTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSByZW1vdmVzIGFuIG93bmVyCiAgICAvLy8gQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIG93bmVyIHRvIHJlbW92ZQogICAgLy8gQWxsIHBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIGJlIGNhbmNlbGVkIQogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBfb3duZXIpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBvd25lckV4aXN0cyhfb3duZXIpCiAgICAgICAgdmFsaWROdW1Pd25lcnMobV9udW1Pd25lcnMgLSAxKQogICAgICAgIG11bHRpT3duZWRWYWxpZFJlcXVpcmVtZW50KG1fbXVsdGlPd25lZFJlcXVpcmVkLCBtX251bU93bmVycyAtIDEpCiAgICAgICAgb25seW1hbnlvd25lcnMoa2VjY2FrMjU2KG1zZy5kYXRhKSkKICAgIHsKICAgICAgICBhc3NlcnRPd25lcnNBcmVDb25zaXN0ZW50KCk7CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIHVpbnQgb3duZXJJbmRleCA9IGNoZWNrT3duZXJJbmRleChtX293bmVySW5kZXhbX293bmVyXSk7CiAgICAgICAgbV9vd25lcnNbb3duZXJJbmRleF0gPSAwOwogICAgICAgIG1fb3duZXJJbmRleFtfb3duZXJdID0gMDsKICAgICAgICAvL21ha2Ugc3VyZSBtX251bU93bmVycyBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgbGFzdCBvd25lcgogICAgICAgIHJlb3JnYW5pemVPd25lcnMoKTsKCiAgICAgICAgYXNzZXJ0T3duZXJzQXJlQ29uc2lzdGVudCgpOwogICAgICAgIE93bmVyUmVtb3ZlZChfb3duZXIpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGNoYW5nZXMgdGhlIHJlcXVpcmVkIG51bWJlciBvZiBvd25lciBzaWduYXR1cmVzCiAgICAvLy8gQHBhcmFtIF9uZXdSZXF1aXJlZCBuZXcgbnVtYmVyIG9mIHNpZ25hdHVyZXMgcmVxdWlyZWQKICAgIC8vIEFsbCBwZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBiZSBjYW5jZWxlZCEKICAgIGZ1bmN0aW9uIGNoYW5nZVJlcXVpcmVtZW50KHVpbnQgX25ld1JlcXVpcmVkKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgbXVsdGlPd25lZFZhbGlkUmVxdWlyZW1lbnQoX25ld1JlcXVpcmVkLCBtX251bU93bmVycykKICAgICAgICBvbmx5bWFueW93bmVycyhrZWNjYWsyNTYobXNnLmRhdGEpKQogICAgewogICAgICAgIG1fbXVsdGlPd25lZFJlcXVpcmVkID0gX25ld1JlcXVpcmVkOwogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIFJlcXVpcmVtZW50Q2hhbmdlZChfbmV3UmVxdWlyZWQpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uCiAgICAvLy8gQHBhcmFtIG93bmVySW5kZXggMC1pbmRleGVkIG93bmVyIHBvc2l0aW9uCiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IG93bmVySW5kZXgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIG1fb3duZXJzW293bmVySW5kZXggKyAxXTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBHZXRzIG93bmVycwogICAgLy8vIEByZXR1cm4gbWVtb3J5IGFycmF5IG9mIG93bmVycwogICAgZnVuY3Rpb24gZ2V0T3duZXJzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSkgewogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IGFkZHJlc3NbXShtX251bU93bmVycyk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbV9udW1Pd25lcnM7IGkrKykKICAgICAgICAgICAgcmVzdWx0W2ldID0gZ2V0T3duZXIoaSk7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLy8vIEBub3RpY2UgY2hlY2tzIGlmIHByb3ZpZGVkIGFkZHJlc3MgaXMgYW4gb3duZXIgYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfYWRkciBhZGRyZXNzIHRvIGNoZWNrCiAgICAvLy8gQHJldHVybiB0cnVlIGlmIGl0J3MgYW4gb3duZXIKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gbV9vd25lckluZGV4W19hZGRyXSA+IDA7CiAgICB9CgogICAgLy8vIEBub3RpY2UgVGVzdHMgb3duZXJzaGlwIG9mIHRoZSBjdXJyZW50IGNhbGxlci4KICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgaXQncyBhbiBvd25lcgogICAgLy8gSXQncyBhZHZpc2FibGUgdG8gY2FsbCBpdCBieSBuZXcgb3duZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHNhbWUgZXJyb25lb3VzIGFkZHJlc3MgaXMgbm90IGNvcHktcGFzdGVkIHRvCiAgICAvLyBhZGRPd25lci9jaGFuZ2VPd25lciBhbmQgdG8gaXNPd25lci4KICAgIGZ1bmN0aW9uIGFtSU93bmVyKCkgZXh0ZXJuYWwgY29uc3RhbnQgb25seW93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBSZXZva2VzIGEgcHJpb3IgY29uZmlybWF0aW9uIG9mIHRoZSBnaXZlbiBvcGVyYXRpb24KICAgIC8vLyBAcGFyYW0gX29wZXJhdGlvbiBvcGVyYXRpb24gdmFsdWUsIHR5cGljYWxseSBrZWNjYWsyNTYobXNnLmRhdGEpCiAgICBmdW5jdGlvbiByZXZva2UoYnl0ZXMzMiBfb3BlcmF0aW9uKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgbXVsdGlPd25lZE9wZXJhdGlvbklzQWN0aXZlKF9vcGVyYXRpb24pCiAgICAgICAgb25seW93bmVyCiAgICB7CiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gbWFrZU93bmVyQml0bWFwQml0KG1zZy5zZW5kZXIpOwogICAgICAgIHZhciBwZW5kaW5nID0gbV9tdWx0aU93bmVkUGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICByZXF1aXJlKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPiAwKTsKCiAgICAgICAgYXNzZXJ0T3BlcmF0aW9uSXNDb25zaXN0ZW50KF9vcGVyYXRpb24pOwoKICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOwogICAgICAgIHBlbmRpbmcub3duZXJzRG9uZSAtPSBvd25lckluZGV4Qml0OwoKICAgICAgICBhc3NlcnRPcGVyYXRpb25Jc0NvbnNpc3RlbnQoX29wZXJhdGlvbik7CiAgICAgICAgUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENoZWNrcyBpZiBvd25lciBjb25maXJtZWQgZ2l2ZW4gb3BlcmF0aW9uCiAgICAvLy8gQHBhcmFtIF9vcGVyYXRpb24gb3BlcmF0aW9uIHZhbHVlLCB0eXBpY2FsbHkga2VjY2FrMjU2KG1zZy5kYXRhKQogICAgLy8vIEBwYXJhbSBfb3duZXIgYW4gb3duZXIgYWRkcmVzcwogICAgZnVuY3Rpb24gaGFzQ29uZmlybWVkKGJ5dGVzMzIgX29wZXJhdGlvbiwgYWRkcmVzcyBfb3duZXIpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICBjb25zdGFudAogICAgICAgIG11bHRpT3duZWRPcGVyYXRpb25Jc0FjdGl2ZShfb3BlcmF0aW9uKQogICAgICAgIG93bmVyRXhpc3RzKF9vd25lcikKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiAhKG1fbXVsdGlPd25lZFBlbmRpbmdbX29wZXJhdGlvbl0ub3duZXJzRG9uZSAmIG1ha2VPd25lckJpdG1hcEJpdChfb3duZXIpID09IDApOwogICAgfQoKICAgIC8vIElOVEVSTkFMIE1FVEhPRFMKCiAgICBmdW5jdGlvbiBjb25maXJtQW5kQ2hlY2soYnl0ZXMzMiBfb3BlcmF0aW9uKQogICAgICAgIHByaXZhdGUKICAgICAgICBvbmx5b3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGlmICg1MTIgPT0gbV9tdWx0aU93bmVkUGVuZGluZ0luZGV4Lmxlbmd0aCkKICAgICAgICAgICAgLy8gSW4gY2FzZSBtX211bHRpT3duZWRQZW5kaW5nSW5kZXggZ3Jvd3MgdG9vIG11Y2ggd2UgaGF2ZSB0byBzaHJpbmsgaXQ6IG90aGVyd2lzZSBhdCBzb21lIHBvaW50CiAgICAgICAgICAgIC8vIHdlIHdvbid0IGJlIGFibGUgdG8gZG8gaXQgYmVjYXVzZSBvZiBibG9jayBnYXMgbGltaXQuCiAgICAgICAgICAgIC8vIFllcywgcGVuZGluZyBjb25maXJtYXRpb25zIHdpbGwgYmUgbG9zdC4gRG9udCBzZWUgYW55IHNlY3VyaXR5IG9yIHN0YWJpbGl0eSBpbXBsaWNhdGlvbnMuCiAgICAgICAgICAgIC8vIFRPRE8gdXNlIG1vcmUgZ3JhY2VmdWwgYXBwcm9hY2ggbGlrZSBjb21wYWN0IG9yIHJlbW92YWwgb2YgY2xlYXJQZW5kaW5nIGNvbXBsZXRlbHkKICAgICAgICAgICAgY2xlYXJQZW5kaW5nKCk7CgogICAgICAgIHZhciBwZW5kaW5nID0gbV9tdWx0aU93bmVkUGVuZGluZ1tfb3BlcmF0aW9uXTsKCiAgICAgICAgLy8gaWYgd2UncmUgbm90IHlldCB3b3JraW5nIG9uIHRoaXMgb3BlcmF0aW9uLCBzd2l0Y2ggb3ZlciBhbmQgcmVzZXQgdGhlIGNvbmZpcm1hdGlvbiBzdGF0dXMuCiAgICAgICAgaWYgKCEgaXNPcGVyYXRpb25BY3RpdmUoX29wZXJhdGlvbikpIHsKICAgICAgICAgICAgLy8gcmVzZXQgY291bnQgb2YgY29uZmlybWF0aW9ucyBuZWVkZWQuCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkID0gbV9tdWx0aU93bmVkUmVxdWlyZWQ7CiAgICAgICAgICAgIC8vIHJlc2V0IHdoaWNoIG93bmVycyBoYXZlIGNvbmZpcm1lZCAobm9uZSkgLSBzZXQgb3VyIGJpdG1hcCB0byAwLgogICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgPSAwOwogICAgICAgICAgICBwZW5kaW5nLmluZGV4ID0gbV9tdWx0aU93bmVkUGVuZGluZ0luZGV4Lmxlbmd0aCsrOwogICAgICAgICAgICBtX211bHRpT3duZWRQZW5kaW5nSW5kZXhbcGVuZGluZy5pbmRleF0gPSBfb3BlcmF0aW9uOwogICAgICAgICAgICBhc3NlcnRPcGVyYXRpb25Jc0NvbnNpc3RlbnQoX29wZXJhdGlvbik7CiAgICAgICAgfQoKICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGJpdCB0byBzZXQgZm9yIHRoaXMgb3duZXIuCiAgICAgICAgdWludCBvd25lckluZGV4Qml0ID0gbWFrZU93bmVyQml0bWFwQml0KG1zZy5zZW5kZXIpOwogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5LgogICAgICAgIGlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsKICAgICAgICAgICAgLy8gb2sgLSBjaGVjayBpZiBjb3VudCBpcyBlbm91Z2ggdG8gZ28gYWhlYWQuCiAgICAgICAgICAgIGFzc2VydChwZW5kaW5nLnlldE5lZWRlZCA+IDApOwogICAgICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPT0gMSkgewogICAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvbmZpcm1hdGlvbnM6IHJlc2V0IGFuZCBydW4gaW50ZXJpb3IuCiAgICAgICAgICAgICAgICBkZWxldGUgbV9tdWx0aU93bmVkUGVuZGluZ0luZGV4W21fbXVsdGlPd25lZFBlbmRpbmdbX29wZXJhdGlvbl0uaW5kZXhdOwogICAgICAgICAgICAgICAgZGVsZXRlIG1fbXVsdGlPd25lZFBlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgICAgICAgICBGaW5hbENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gbm90IGVub3VnaDogcmVjb3JkIHRoYXQgdGhpcyBvd25lciBpbiBwYXJ0aWN1bGFyIGNvbmZpcm1lZC4KICAgICAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkLS07CiAgICAgICAgICAgICAgICBwZW5kaW5nLm93bmVyc0RvbmUgfD0gb3duZXJJbmRleEJpdDsKICAgICAgICAgICAgICAgIGFzc2VydE9wZXJhdGlvbklzQ29uc2lzdGVudChfb3BlcmF0aW9uKTsKICAgICAgICAgICAgICAgIENvbmZpcm1hdGlvbihtc2cuc2VuZGVyLCBfb3BlcmF0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBSZWNsYWltcyBmcmVlIHNsb3RzIGJldHdlZW4gdmFsaWQgb3duZXJzIGluIG1fb3duZXJzLgogICAgLy8gVE9ETyBnaXZlbiB0aGF0IGl0cyBjYWxsZWQgYWZ0ZXIgZWFjaCByZW1vdmFsLCBpdCBjb3VsZCBiZSBzaW1wbGlmaWVkLgogICAgZnVuY3Rpb24gcmVvcmdhbml6ZU93bmVycygpIHByaXZhdGUgewogICAgICAgIHVpbnQgZnJlZSA9IDE7CiAgICAgICAgd2hpbGUgKGZyZWUgPCBtX251bU93bmVycykKICAgICAgICB7CiAgICAgICAgICAgIC8vIGl0ZXJhdGluZyB0byB0aGUgZmlyc3QgZnJlZSBzbG90IGZyb20gdGhlIGJlZ2lubmluZwogICAgICAgICAgICB3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW2ZyZWVdICE9IDApIGZyZWUrKzsKCiAgICAgICAgICAgIC8vIGl0ZXJhdGluZyB0byB0aGUgZmlyc3Qgb2NjdXBpZWQgc2xvdCBmcm9tIHRoZSBlbmQKICAgICAgICAgICAgd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsKCiAgICAgICAgICAgIC8vIHN3YXAsIGlmIHBvc3NpYmxlLCBzbyBmcmVlIHNsb3QgaXMgbG9jYXRlZCBhdCB0aGUgZW5kIGFmdGVyIHRoZSBzd2FwCiAgICAgICAgICAgIGlmIChmcmVlIDwgbV9udW1Pd25lcnMgJiYgbV9vd25lcnNbbV9udW1Pd25lcnNdICE9IDAgJiYgbV9vd25lcnNbZnJlZV0gPT0gMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gb3duZXJzIGJldHdlZW4gc3dhcHBlZCBzbG90cyBzaG91bGQndCBiZSByZW51bWJlcmVkIC0gdGhhdCBzYXZlcyBhIGxvdCBvZiBnYXMKICAgICAgICAgICAgICAgIG1fb3duZXJzW2ZyZWVdID0gbV9vd25lcnNbbV9udW1Pd25lcnNdOwogICAgICAgICAgICAgICAgbV9vd25lckluZGV4W21fb3duZXJzW2ZyZWVdXSA9IGZyZWU7CiAgICAgICAgICAgICAgICBtX293bmVyc1ttX251bU93bmVyc10gPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIHByaXZhdGUgb25seW93bmVyIHsKICAgICAgICB1aW50IGxlbmd0aCA9IG1fbXVsdGlPd25lZFBlbmRpbmdJbmRleC5sZW5ndGg7CiAgICAgICAgLy8gVE9ETyBibG9jayBnYXMgbGltaXQKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgICAgICBpZiAobV9tdWx0aU93bmVkUGVuZGluZ0luZGV4W2ldICE9IDApCiAgICAgICAgICAgICAgICBkZWxldGUgbV9tdWx0aU93bmVkUGVuZGluZ1ttX211bHRpT3duZWRQZW5kaW5nSW5kZXhbaV1dOwogICAgICAgIH0KICAgICAgICBkZWxldGUgbV9tdWx0aU93bmVkUGVuZGluZ0luZGV4OwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrT3duZXJJbmRleCh1aW50IG93bmVySW5kZXgpIHByaXZhdGUgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KDAgIT0gb3duZXJJbmRleCAmJiBvd25lckluZGV4IDw9IGNfbWF4T3duZXJzKTsKICAgICAgICByZXR1cm4gb3duZXJJbmRleDsKICAgIH0KCiAgICBmdW5jdGlvbiBtYWtlT3duZXJCaXRtYXBCaXQoYWRkcmVzcyBvd25lcikgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBvd25lckluZGV4ID0gY2hlY2tPd25lckluZGV4KG1fb3duZXJJbmRleFtvd25lcl0pOwogICAgICAgIHJldHVybiAyICoqIG93bmVySW5kZXg7CiAgICB9CgogICAgZnVuY3Rpb24gaXNPcGVyYXRpb25BY3RpdmUoYnl0ZXMzMiBfb3BlcmF0aW9uKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gMCAhPSBtX211bHRpT3duZWRQZW5kaW5nW19vcGVyYXRpb25dLnlldE5lZWRlZDsKICAgIH0KCgogICAgZnVuY3Rpb24gYXNzZXJ0T3duZXJzQXJlQ29uc2lzdGVudCgpIHByaXZhdGUgY29uc3RhbnQgewogICAgICAgIGFzc2VydChtX251bU93bmVycyA+IDApOwogICAgICAgIGFzc2VydChtX251bU93bmVycyA8PSBjX21heE93bmVycyk7CiAgICAgICAgYXNzZXJ0KG1fb3duZXJzWzBdID09IDApOwogICAgICAgIGFzc2VydCgwICE9IG1fbXVsdGlPd25lZFJlcXVpcmVkICYmIG1fbXVsdGlPd25lZFJlcXVpcmVkIDw9IG1fbnVtT3duZXJzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnRPcGVyYXRpb25Jc0NvbnNpc3RlbnQoYnl0ZXMzMiBfb3BlcmF0aW9uKSBwcml2YXRlIGNvbnN0YW50IHsKICAgICAgICB2YXIgcGVuZGluZyA9IG1fbXVsdGlPd25lZFBlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgYXNzZXJ0KDAgIT0gcGVuZGluZy55ZXROZWVkZWQpOwogICAgICAgIGFzc2VydChtX211bHRpT3duZWRQZW5kaW5nSW5kZXhbcGVuZGluZy5pbmRleF0gPT0gX29wZXJhdGlvbik7CiAgICAgICAgYXNzZXJ0KHBlbmRpbmcueWV0TmVlZGVkIDw9IG1fbXVsdGlPd25lZFJlcXVpcmVkKTsKICAgIH0KCgogICAJLy8gRklFTERTCgogICAgdWludCBjb25zdGFudCBjX21heE93bmVycyA9IDI1MDsKCiAgICAvLyB0aGUgbnVtYmVyIG9mIG93bmVycyB0aGF0IG11c3QgY29uZmlybSB0aGUgc2FtZSBvcGVyYXRpb24gYmVmb3JlIGl0IGlzIHJ1bi4KICAgIHVpbnQgcHVibGljIG1fbXVsdGlPd25lZFJlcXVpcmVkOwoKCiAgICAvLyBwb2ludGVyIHVzZWQgdG8gZmluZCBhIGZyZWUgc2xvdCBpbiBtX293bmVycwogICAgdWludCBwdWJsaWMgbV9udW1Pd25lcnM7CgogICAgLy8gbGlzdCBvZiBvd25lcnMgKGFkZHJlc3NlcyksCiAgICAvLyBzbG90IDAgaXMgdW51c2VkIHNvIHRoZXJlIGFyZSBubyBvd25lciB3aGljaCBpbmRleCBpcyAwLgogICAgLy8gVE9ETyBjb3VsZCB3ZSBzYXZlIHNwYWNlIGF0IHRoZSBlbmQgb2YgdGhlIGFycmF5IGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgPDEwIG93bmVycz8gYW5kIHNob3VsZCB3ZT8KICAgIGFkZHJlc3NbMjU2XSBpbnRlcm5hbCBtX293bmVyczsKCiAgICAvLyBpbmRleCBvbiB0aGUgbGlzdCBvZiBvd25lcnMgdG8gYWxsb3cgcmV2ZXJzZSBsb29rdXA6IG93bmVyIGFkZHJlc3MgPT4gaW5kZXggaW4gbV9vd25lcnMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBpbnRlcm5hbCBtX293bmVySW5kZXg7CgoKICAgIC8vIHRoZSBvbmdvaW5nIG9wZXJhdGlvbnMuCiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gTXVsdGlPd25lZE9wZXJhdGlvblBlbmRpbmdTdGF0ZSkgaW50ZXJuYWwgbV9tdWx0aU93bmVkUGVuZGluZzsKICAgIGJ5dGVzMzJbXSBpbnRlcm5hbCBtX211bHRpT3duZWRQZW5kaW5nSW5kZXg7Cn0KCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKaW50ZXJmYWNlIElTbWFydHpUb2tlbiB7CiAgICAvLyBtdWx0aW93bmVkCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiByZW1vdmVPd25lcihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBjaGFuZ2VSZXF1aXJlbWVudCh1aW50IF9uZXdSZXF1aXJlZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBnZXRPd25lcih1aW50IG93bmVySW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gZ2V0T3duZXJzKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzc1tdKTsKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhbUlPd25lcigpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiByZXZva2UoYnl0ZXMzMiBfb3BlcmF0aW9uKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIGhhc0NvbmZpcm1lZChieXRlczMyIF9vcGVyYXRpb24sIGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwoKICAgIC8vIEVSQzIwQmFzaWMKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIC8vIEVSQzIwCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyk7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50OCk7CgogICAgLy8gQnVybmFibGVUb2tlbgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLyBUb2tlbldpdGhBcHByb3ZlQW5kQ2FsbE1ldGhvZAogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYzsKCiAgICAvLyBTbWFydHpUb2tlbgogICAgZnVuY3Rpb24gc2V0S1lDUHJvdmlkZXIoYWRkcmVzcyBLWUNQcm92aWRlcikgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRTYWxlKGFkZHJlc3MgYWNjb3VudCwgYm9vbCBpc1NhbGUpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gZGlzYWJsZVByaXZpbGVnZWQoKSBleHRlcm5hbDsKCiAgICBmdW5jdGlvbiBhdmFpbGFibGVCYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gZnJvemVuQ2VsbENvdW50KGFkZHJlc3Mgb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gZnJvemVuQ2VsbChhZGRyZXNzIG93bmVyLCB1aW50IGluZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IGFtb3VudCwgdWludCB0aGF3VFMsIGJvb2wgaXNLWUNSZXF1aXJlZCk7CgogICAgZnVuY3Rpb24gZnJvemVuVHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCB1aW50IHRoYXdUUywgYm9vbCBpc0tZQ1JlcXVpcmVkKSBleHRlcm5hbCByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGZyb3plblRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIHVpbnQgdGhhd1RTLCBib29sIGlzS1lDUmVxdWlyZWQpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBTTVJEaXN0cmlidXRpb25WYXVsdCBpcyBBcmd1bWVudHNDaGVja2VyLCBtdWx0aW93bmVkLCBFUkMyMCB7CgoKICAgIC8vIFBVQkxJQyBGVU5DVElPTlMKCiAgICBmdW5jdGlvbiBTTVJEaXN0cmlidXRpb25WYXVsdCgpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIG11bHRpb3duZWQoZ2V0SW5pdGlhbE93bmVycygpLCAxKQogICAgewogICAgICAgIG1fU01SID0gSVNtYXJ0elRva2VuKGFkZHJlc3MoMHg0MGFlNGFjZDA4ZTY1NzE0YjA5M2JmMjQ5NWZkNzk0MWFlZGZhMjMxKSk7CiAgICAgICAgbV90aGF3VFMgPSAxNTUxMzk4NDAwOwoKICAgICAgICB0b3RhbFN1cHBseSA9IG1fU01SLnRvdGFsU3VwcGx5KCk7CgogICAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIGdldEluaXRpYWxPd25lcnMoKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSByZXN1bHQgPSBuZXcgYWRkcmVzc1tdKDIpOwpyZXN1bHRbMF0gPSBhZGRyZXNzKDB4NGZmOWE2OGE4MzIzOThjNmIwMTM2MzNiYjU2ODI1OTVlYmI3YjkyZSk7CnJlc3VsdFsxXSA9IGFkZHJlc3MoMHhlNDA3NGJiN2JkNDgyOGJhZWQ5ZDJiZWNlMWUzODY0MDg0MjhkZmI3KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKCiAgICAvLy8gQG5vdGljZSBCYWxhbmNlIG9mIHRva2Vucy4KICAgIC8vLyBAZGV2IE93bmVycyBhcmUgY29uc2lkZXJlZCB0byBwb3NzZXNzIGFsbCB0aGUgdG9rZW5zIG9mIHRoaXMgdmF1bHQuCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gaXNPd25lcih3aG8pID8gbV9TTVIuYmFsYW5jZU9mKHRoaXMpIDogMDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBMb29rcyBsaWtlIHRyYW5zZmVyIG9mIHRoaXMgdG9rZW4sIGJ1dCBhY3R1YWxseSBmcm96ZW5UcmFuc2ZlcnMgU01SLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkKICAgICAgICBwdWJsaWMKICAgICAgICBwYXlsb2FkU2l6ZUlzKDIgKiAzMikKICAgICAgICBvbmx5b3duZXIKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBtX1NNUi5mcm96ZW5UcmFuc2Zlcih0bywgdmFsdWUsIG1fdGhhd1RTLCBmYWxzZSk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgVHJhbnNmZXJzIHVzaW5nIHBsYWluIHRyYW5zZmVyIHJlbWFpbmluZyB0b2tlbnMuCiAgICBmdW5jdGlvbiB3aXRoZHJhd1JlbWFpbmluZyhhZGRyZXNzIHRvKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgcGF5bG9hZFNpemVJcygxICogMzIpCiAgICAgICAgb25seW93bmVyCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gbV9TTVIudHJhbnNmZXIodG8sIG1fU01SLmJhbGFuY2VPZih0aGlzKSk7CiAgICB9CgoKICAgIC8vLyBAZGV2IFRoZXJlIGlzIG5vIG5lZWQgdG8gc3VwcG9ydCB0aGlzIGZ1bmN0aW9uLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgLCBhZGRyZXNzICkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldmVydCgpOwogICAgfQoKICAgIC8vLyBAZGV2IFRoZXJlIGlzIG5vIG5lZWQgdG8gc3VwcG9ydCB0aGlzIGZ1bmN0aW9uLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgLCBhZGRyZXNzICwgdWludDI1NiApIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgLy8vIEBkZXYgVGhlcmUgaXMgbm8gbmVlZCB0byBzdXBwb3J0IHRoaXMgZnVuY3Rpb24uCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgLCB1aW50MjU2ICkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNpbWFscygpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIG1fU01SLmRlY2ltYWxzKCk7CiAgICB9CgoKICAgIC8vIEZJRUxEUwoKICAgIC8vLyBAbm90aWNlIGxpbmsgdG8gdGhlIFNNUgogICAgSVNtYXJ0elRva2VuIHB1YmxpYyBtX1NNUjsKCiAgICAvLy8gQG5vdGljZSBUaGF3IHRpbWVzdGFtcCBvZiBmcm96ZW5UcmFuc2ZlcnMgaXNzdWVkIGJ5IHRoaXMgdmF1bHQKICAgIHVpbnQgcHVibGljIG1fdGhhd1RTOwoKCiAgICAvLyBDT05TVEFOVFMKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiU01SIENvbW11bml0eSBGdW5kIFZhdWx0IDEiOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiU01SRFYiOwp9'.
	

]
