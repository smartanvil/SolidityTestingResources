Class {
	#name : #SRTc0aa69e24533f99fd95757e471d93ba7ea4b1c50,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc0aa69e24533f99fd95757e471d93ba7ea4b1c50 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBuZXdPd25lciA9IF9vd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXIoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobmV3T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBkZWxldGUgbmV3T3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IEJsb2NrZWQgewoKICAgIHVpbnQgcHVibGljIGJsb2NrZWRVbnRpbDsKCiAgICBtb2RpZmllciB1bmJsb2NrZWQgewogICAgICAgIHJlcXVpcmUobm93ID4gYmxvY2tlZFVudGlsKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBCYWxhbmNpbmdUb2tlbiBpcyBFUkMyMCB7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsgICAgICAvLyE8IGFycmF5IG9mIGFsbCBiYWxhbmNlcwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQp9Cgpjb250cmFjdCBEaXZpZGVuZFRva2VuIGlzIEJhbGFuY2luZ1Rva2VuLCBCbG9ja2VkLCBPd25lZCB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgZXZlbnQgRGl2aWRlbmRSZWNlaXZlZChhZGRyZXNzIGluZGV4ZWQgZGl2aWRlbmRSZWNlaXZlciwgdWludDI1NiBkaXZpZGVuZFZhbHVlKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2VkOwoKICAgIHVpbnQgcHVibGljIHRvdGFsUmV3YXJkOwogICAgdWludCBwdWJsaWMgbGFzdERpdmlkZVJld2FyZFRpbWU7CgogICAgLy8gRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sKICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgcmV3YXJkVGltZVBhc3QoKSB7CiAgICAgICAgcmVxdWlyZShub3cgPiBsYXN0RGl2aWRlUmV3YXJkVGltZSArIHJld2FyZERheXMpOwogICAgICAgIF87CiAgICB9CgogICAgc3RydWN0IFRva2VuSG9sZGVyIHsKICAgICAgICB1aW50MjU2IGJhbGFuY2U7CiAgICAgICAgdWludCAgICBiYWxhbmNlVXBkYXRlVGltZTsKICAgICAgICB1aW50ICAgIHJld2FyZFdpdGhkcmF3VGltZTsKICAgIH0KCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gVG9rZW5Ib2xkZXIpIGhvbGRlcnM7CgogICAgdWludCBwdWJsaWMgcmV3YXJkRGF5cyA9IDA7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB1bmJsb2NrZWQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJTaW1wbGUoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyU2ltcGxlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKG1zZy5zZW5kZXIpOwogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKF90byk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgdW5ibG9ja2VkIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmVmb3JlQmFsYW5jZUNoYW5nZXMoX2Zyb20pOwogICAgICAgIGJlZm9yZUJhbGFuY2VDaGFuZ2VzKF90byk7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgdW5ibG9ja2VkIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB1bmJsb2NrZWQgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gcmV3YXJkKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoaG9sZGVyc1ttc2cuc2VuZGVyXS5yZXdhcmRXaXRoZHJhd1RpbWUgPj0gbGFzdERpdmlkZVJld2FyZFRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYmFsYW5jZTsKICAgICAgICBpZiAoaG9sZGVyc1ttc2cuc2VuZGVyXS5iYWxhbmNlVXBkYXRlVGltZSA8PSBsYXN0RGl2aWRlUmV3YXJkVGltZSkgewogICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYmFsYW5jZSA9IGhvbGRlcnNbbXNnLnNlbmRlcl0uYmFsYW5jZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRvdGFsUmV3YXJkLm11bChiYWxhbmNlKS5kaXYodG90YWxTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3UmV3YXJkKCkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHJld2FyZFZhbHVlID0gcmV3YXJkKCk7CiAgICAgICAgaWYgKHJld2FyZFZhbHVlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA9PSAwKSB7CiAgICAgICAgICAgIC8vIGdhcmJhZ2UgY29sbGVjdG9yCiAgICAgICAgICAgIGRlbGV0ZSBob2xkZXJzW21zZy5zZW5kZXJdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGhvbGRlcnNbbXNnLnNlbmRlcl0ucmV3YXJkV2l0aGRyYXdUaW1lID0gbm93OwogICAgICAgIH0KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUocmV3YXJkVmFsdWUpKCkpOwogICAgICAgIERpdmlkZW5kUmVjZWl2ZWQobXNnLnNlbmRlciwgcmV3YXJkVmFsdWUpOwogICAgICAgIHJldHVybiByZXdhcmRWYWx1ZTsKICAgIH0KCiAgICAvLyBEaXZpZGUgdXAgcmV3YXJkIGFuZCBtYWtlIGl0IGFjY2VzaWJsZSBmb3Igd2l0aGRyYXcKICAgIGZ1bmN0aW9uIGRpdmlkZVVwUmV3YXJkKHVpbnQgaW5EYXlzKSByZXdhcmRUaW1lUGFzdCBvbmx5T3duZXIgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShpbkRheXMgPj0gMTUgJiYgaW5EYXlzIDw9IDQ1KTsKICAgICAgICBsYXN0RGl2aWRlUmV3YXJkVGltZSA9IG5vdzsKICAgICAgICByZXdhcmREYXlzID0gaW5EYXlzOwogICAgICAgIHRvdGFsUmV3YXJkID0gdGhpcy5iYWxhbmNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3TGVmdCgpIHJld2FyZFRpbWVQYXN0IG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyLmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKHRoaXMuYmFsYW5jZSkoKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYmVmb3JlQmFsYW5jZUNoYW5nZXMoYWRkcmVzcyBfd2hvKSBwdWJsaWMgewogICAgICAgIGlmIChob2xkZXJzW193aG9dLmJhbGFuY2VVcGRhdGVUaW1lIDw9IGxhc3REaXZpZGVSZXdhcmRUaW1lKSB7CiAgICAgICAgICAgIGhvbGRlcnNbX3dob10uYmFsYW5jZVVwZGF0ZVRpbWUgPSBub3c7CiAgICAgICAgICAgIGhvbGRlcnNbX3dob10uYmFsYW5jZSA9IGJhbGFuY2VzW193aG9dOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgUkVOVENvaW4gaXMgRGl2aWRlbmRUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlJlbnRBd2F5IENvaW4iOwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlJUVyI7CgogICAgdWludDMyIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgIGZ1bmN0aW9uIFJFTlRDb2luKHVpbnQyNTYgaW5pdGlhbFN1cHBseSwgdWludCB1bmJsb2NrVGltZSkgcHVibGljIHsKICAgICAgICB0b3RhbFN1cHBseSA9IGluaXRpYWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gaW5pdGlhbFN1cHBseTsKICAgICAgICBibG9ja2VkVW50aWwgPSB1bmJsb2NrVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBtYW51YWxUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2ZlclNpbXBsZShfdG8sIF92YWx1ZSk7CiAgICB9Cn0KCmNvbnRyYWN0IFRpbWluZ0Nyb3dkc2FsZSB7CgogICAgLy8gRGF0ZSBvZiBzdGFydCBwcmUtSUNPIGFuZCBJQ08uCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBwcmVJQ09zdGFydFRpbWUgPSAxNTE3NDYxMjAwOyAvLyBzdGFydCBhdCBUaHVyc2RheSwgRmVicnVhcnkgMSwgMjAxOCA1OjAwOjAwIEFNCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBJQ09zdGFydFRpbWUgPSAgICAxNTE4NjcwODAwOyAvLyBzdGFydCBhdCBUaHVyc2RheSwgRmVicnVhcnkgMTUsIDIwMTggNTowMDowMCBBTQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgSUNPZW5kVGltZSA9ICAgICAgMTUyMTA5MDAwMDsgLy8gZW5kIGF0IFRodXJzZGF5LCBNYXJjaCAxNSwgMjAxOCA1OjAwOjAwIEFNCgogICAgZnVuY3Rpb24gY3VycmVudFRpbWUoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gbm93OwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUHJlSUNPKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBjdXJUaW1lID0gY3VycmVudFRpbWUoKTsKICAgICAgICByZXR1cm4gY3VyVGltZSA8IElDT3N0YXJ0VGltZSAmJiBjdXJUaW1lID49IHByZUlDT3N0YXJ0VGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc0lDTygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICB2YXIgY3VyVGltZSA9IGN1cnJlbnRUaW1lKCk7CiAgICAgICAgcmV0dXJuIGN1clRpbWUgPCBJQ09lbmRUaW1lICYmIGN1clRpbWUgPj0gSUNPc3RhcnRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUHJlSUNPRmluaXNoZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lKCkgPiBJQ09zdGFydFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gaXNJQ09GaW5pc2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gY3VycmVudFRpbWUoKSA+IElDT2VuZFRpbWU7CiAgICB9Cn0KCmNvbnRyYWN0IEJvbnVzQ3Jvd2RzYWxlIGlzIFRpbWluZ0Nyb3dkc2FsZSB7CgogICAgZnVuY3Rpb24gZ2V0Qm9udXModWludDI1NiBhbW91bnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGJvbnVzID0gZ2V0QW1vdW50Qm9udXMoYW1vdW50KTsKICAgICAgICBpZiAoaXNQcmVJQ08oKSkgewogICAgICAgICAgICBib251cyArPSAyNTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJvbnVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFtb3VudEJvbnVzKHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGFtb3VudCA+PSAyNSBldGhlcikgewogICAgICAgICAgICByZXR1cm4gMTU7CiAgICAgICAgfQogICAgICAgIGlmIChhbW91bnQgPj0gMTAgZXRoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIDU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQp9Cgpjb250cmFjdCBNYW51YWxTZW5kaW5nQ3Jvd2RzYWxlIGlzIEJvbnVzQ3Jvd2RzYWxlLCBPd25lZCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJ1Y3QgQW1vdW50RGF0YSB7CiAgICAgICAgYm9vbCBleGlzdHM7CiAgICAgICAgdWludDI1NiB2YWx1ZTsKICAgIH0KCiAgICBtYXBwaW5nICh1aW50ID0+IEFtb3VudERhdGEpIHB1YmxpYyBhbW91bnRzQnlDdXJyZW5jeTsKCiAgICBmdW5jdGlvbiBhZGRDdXJyZW5jeSh1aW50IGN1cnJlbmN5KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGFkZEN1cnJlbmN5SW50ZXJuYWwoY3VycmVuY3kpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEN1cnJlbmN5SW50ZXJuYWwodWludCBjdXJyZW5jeSkgaW50ZXJuYWwgewogICAgICAgIEFtb3VudERhdGEgc3RvcmFnZSBhbW91bnREYXRhID0gYW1vdW50c0J5Q3VycmVuY3lbY3VycmVuY3ldOwogICAgICAgIGFtb3VudERhdGEuZXhpc3RzID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBtYW51YWxUcmFuc2ZlclRva2Vuc1RvSW50ZXJuYWwoYWRkcmVzcyB0bywgdWludDI1NiBnaXZlblRva2VucywgdWludCBjdXJyZW5jeSwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBBbW91bnREYXRhIG1lbW9yeSB0ZW1wQW1vdW50RGF0YSA9IGFtb3VudHNCeUN1cnJlbmN5W2N1cnJlbmN5XTsKICAgICAgICByZXF1aXJlKHRlbXBBbW91bnREYXRhLmV4aXN0cyk7CiAgICAgICAgQW1vdW50RGF0YSBzdG9yYWdlIGFtb3VudERhdGEgPSBhbW91bnRzQnlDdXJyZW5jeVtjdXJyZW5jeV07CiAgICAgICAgYW1vdW50RGF0YS52YWx1ZSA9IGFtb3VudERhdGEudmFsdWUuYWRkKGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9rZW5zVG8odG8sIGdpdmVuVG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRva2Vuc1RvKGFkZHJlc3MgdG8sIHVpbnQyNTYgZ2l2ZW5Ub2tlbnMpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpOwp9Cgpjb250cmFjdCBXaXRoZHJhd0Nyb3dkc2FsZSBpcyBNYW51YWxTZW5kaW5nQ3Jvd2RzYWxlIHsKCiAgICBmdW5jdGlvbiBpc1dpdGhkcmF3QWxsb3dlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpOwoKICAgIG1vZGlmaWVyIGNhbldpdGhkcmF3KCkgewogICAgICAgIHJlcXVpcmUoaXNXaXRoZHJhd0FsbG93ZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdygpIGV4dGVybmFsIG9ubHlPd25lciBjYW5XaXRoZHJhdyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyLmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKHRoaXMuYmFsYW5jZSkoKSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQodWludDI1NiBhbW91bnQpIGV4dGVybmFsIG9ubHlPd25lciBjYW5XaXRoZHJhdyB7CiAgICAgICAgdWludDI1NiBnaXZlbkFtb3VudCA9IGFtb3VudDsKICAgICAgICBpZiAodGhpcy5iYWxhbmNlIDwgYW1vdW50KSB7CiAgICAgICAgICAgIGdpdmVuQW1vdW50ID0gdGhpcy5iYWxhbmNlOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIuY2FsbC5nYXMoMzAwMDAwMCkudmFsdWUoZ2l2ZW5BbW91bnQpKCkpOwogICAgfQp9Cgpjb250cmFjdCBSZWZ1bmRhYmxlQ3Jvd2RzYWxlIGlzIFdpdGhkcmF3Q3Jvd2RzYWxlIHsKCiAgICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CgogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKGlzUmVmdW5kQWxsb3dlZCgpKTsKICAgICAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gMDsKICAgICAgICByZXF1aXJlKGludmVzdG9yLmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKGRlcG9zaXRlZFZhbHVlKSgpKTsKICAgICAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzUmVmdW5kQWxsb3dlZCgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBSZWZ1bmRhYmxlQ3Jvd2RzYWxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBlbnVtIFN0YXRlIHsgSUNPLCBSRUZVTkQsIERPTkUgfQogICAgU3RhdGUgcHVibGljIHN0YXRlID0gU3RhdGUuSUNPOwoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1heFRva2VuQW1vdW50ID0gNzUwMDAwMDAgKiAxMCoqMTg7IC8vIG1heCBtaW50aW5nCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBib3VudHlUb2tlbnMgPSAgIDE1MDAwMDAwICogMTAqKjE4OyAvLyBib3VudHkgYW1vdW50CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBzb2Z0Q2FwVG9rZW5zID0gIDYwMDAwMDAgKiAxMCoqMTg7IC8vIHNvZnQgY2FwCgogICAgdWludCBwdWJsaWMgY29uc3RhbnQgdW5ibG9ja1Rva2VuVGltZSA9IDE1MTk4ODA0MDA7IC8vIGVuZCBhdCBUaHVyc2RheSwgTWFyY2ggMSwgMjAxOCA1OjAwOjAwIEFNCgogICAgUkVOVENvaW4gcHVibGljIHRva2VuOwoKICAgIHVpbnQyNTYgcHVibGljIGxlZnRUb2tlbnMgPSAwOwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsQW1vdW50ID0gMDsKICAgIHVpbnQgcHVibGljIHRyYW5zYWN0aW9uQ291bnRlciA9IDA7CgogICAgYm9vbCBwdWJsaWMgYm9udXNlc1BheWVkID0gZmFsc2U7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcmF0ZVRvRXRoZXIgPSAxMDAwOyAvLyByYXRlIHRvIGV0aGVyLCBob3cgbXVjaCB0b2tlbnMgZ2l2ZXMgdG8gMSBldGhlcgoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IG1pbkFtb3VudEZvckRlYWwgPSAxMCoqMTY7IC8vIDAuMDEgRVRICgogICAgdWludDI1NiBwdWJsaWMgc29sZFRva2VucyA9IDA7CgogICAgbW9kaWZpZXIgY2FuQnV5KCkgewogICAgICAgIHJlcXVpcmUoIWlzRmluaXNoZWQoKSk7CiAgICAgICAgcmVxdWlyZShpc1ByZUlDTygpIHx8IGlzSUNPKCkpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbWluUGF5bWVudCgpIHsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBtaW5BbW91bnRGb3JEZWFsKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZSgpIHB1YmxpYyB7CiAgICAgICAgdG9rZW4gPSBuZXcgUkVOVENvaW4obWF4VG9rZW5BbW91bnQsIHVuYmxvY2tUb2tlblRpbWUpOwogICAgICAgIGxlZnRUb2tlbnMgPSBtYXhUb2tlbkFtb3VudCAtIGJvdW50eVRva2VuczsKICAgICAgICBhZGRDdXJyZW5jeUludGVybmFsKDApOyAvLyBhZGQgQlRDCiAgICB9CgogICAgZnVuY3Rpb24gaXNGaW5pc2hlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gaXNJQ09GaW5pc2hlZCgpIHx8IChsZWZ0VG9rZW5zID09IDAgJiYgKHN0YXRlID09IFN0YXRlLklDTyB8fCBzdGF0ZSA9PSBTdGF0ZS5ET05FKSk7CiAgICB9CgogICAgZnVuY3Rpb24gaXNXaXRoZHJhd0FsbG93ZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNvbGRUb2tlbnMgPj0gc29mdENhcFRva2VuczsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1JlZnVuZEFsbG93ZWQoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3RhdGUgPT0gU3RhdGUuUkVGVU5EOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgY2FuQnV5IG1pblBheW1lbnQgcGF5YWJsZSB7CiAgICAgICAgYWRkcmVzcyBpbnZlc3RvciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludCBib251cyA9IGdldEJvbnVzKGFtb3VudCk7CiAgICAgICAgdWludDI1NiBnaXZlblRva2VucyA9IGFtb3VudC5tdWwocmF0ZVRvRXRoZXIpLmRpdigxMDApLm11bCgxMDAgKyBib251cyk7CiAgICAgICAgdWludDI1NiBwcm92aWRlZFRva2VucyA9IHRyYW5zZmVyVG9rZW5zVG8oaW52ZXN0b3IsIGdpdmVuVG9rZW5zKTsKCiAgICAgICAgaWYgKGdpdmVuVG9rZW5zID4gcHJvdmlkZWRUb2tlbnMpIHsKICAgICAgICAgICAgdWludDI1NiBuZWVkQW1vdW50ID0gcHJvdmlkZWRUb2tlbnMubXVsKDEwMCkuZGl2KDEwMCArIGJvbnVzKS5kaXYocmF0ZVRvRXRoZXIpOwogICAgICAgICAgICByZXF1aXJlKGFtb3VudCA+IG5lZWRBbW91bnQpOwogICAgICAgICAgICByZXF1aXJlKGludmVzdG9yLmNhbGwuZ2FzKDMwMDAwMDApLnZhbHVlKGFtb3VudCAtIG5lZWRBbW91bnQpKCkpOwogICAgICAgICAgICBhbW91bnQgPSBuZWVkQW1vdW50OwogICAgICAgIH0KICAgICAgICB0b3RhbEFtb3VudCA9IHRvdGFsQW1vdW50LmFkZChhbW91bnQpOwogICAgICAgIGlmICghaXNXaXRoZHJhd0FsbG93ZWQoKSkgewogICAgICAgICAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbWFudWFsVHJhbnNmZXJUb2tlbnNUbyhhZGRyZXNzIHRvLCB1aW50MjU2IGdpdmVuVG9rZW5zLCB1aW50IGN1cnJlbmN5LCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgb25seU93bmVyIGNhbkJ1eSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG1hbnVhbFRyYW5zZmVyVG9rZW5zVG9JbnRlcm5hbCh0bywgZ2l2ZW5Ub2tlbnMsIGN1cnJlbmN5LCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaENyb3dkc2FsZSgpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKGlzRmluaXNoZWQoKSk7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5JQ08pOwogICAgICAgIGlmICghaXNXaXRoZHJhd0FsbG93ZWQoKSkgIHsKICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5SRUZVTkQ7CiAgICAgICAgICAgIGJvbnVzZXNQYXllZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5ET05FOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0YWtlQm91bnR5KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkRPTkUpOwogICAgICAgIHJlcXVpcmUobm93ID4gSUNPZW5kVGltZSk7CiAgICAgICAgcmVxdWlyZSghYm9udXNlc1BheWVkKTsKICAgICAgICB0b2tlbi5jaGFuZ2VPd25lcihtc2cuc2VuZGVyKTsKICAgICAgICBib251c2VzUGF5ZWQgPSB0cnVlOwogICAgICAgIHJlcXVpcmUodG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW4uYmFsYW5jZU9mKHRoaXMpKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkVG9Tb2xkVG9rZW5zKHVpbnQyNTYgcHJvdmlkZWRUb2tlbnMpIGludGVybmFsIHsKICAgICAgICBzb2xkVG9rZW5zID0gc29sZFRva2Vucy5hZGQocHJvdmlkZWRUb2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW5zVG8oYWRkcmVzcyB0bywgdWludDI1NiBnaXZlblRva2VucykgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHZhciBwcm92aWRlZFRva2VucyA9IGdpdmVuVG9rZW5zOwogICAgICAgIGlmIChnaXZlblRva2VucyA+IGxlZnRUb2tlbnMpIHsKICAgICAgICAgICAgcHJvdmlkZWRUb2tlbnMgPSBsZWZ0VG9rZW5zOwogICAgICAgIH0KICAgICAgICBsZWZ0VG9rZW5zID0gbGVmdFRva2Vucy5zdWIocHJvdmlkZWRUb2tlbnMpOwogICAgICAgIGFkZFRvU29sZFRva2Vucyhwcm92aWRlZFRva2Vucyk7CiAgICAgICAgcmVxdWlyZSh0b2tlbi5tYW51YWxUcmFuc2Zlcih0bywgcHJvdmlkZWRUb2tlbnMpKTsKICAgICAgICB0cmFuc2FjdGlvbkNvdW50ZXIgPSB0cmFuc2FjdGlvbkNvdW50ZXIgKyAxOwogICAgICAgIHJldHVybiBwcm92aWRlZFRva2VuczsKICAgIH0KfQ=='.
	

]
