Class {
	#name : #SRTcc6cc2f648686af73d1efbe7f9b7e4ae3566652a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcc6cc2f648686af73d1efbe7f9b7e4ae3566652a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgRVRIMTBLIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgdWludDggcHJpdmF0ZSBjb25zdGFudCBNQVhfQ09MUyA9IDY0OwogIHVpbnQ4IHByaXZhdGUgY29uc3RhbnQgTUFYX1JPV1MgPSAxNjA7CiAgdWludDggcHJpdmF0ZSBSZXNlcnZlZF91cFJvdyA9IDg7CiAgdWludDggcHJpdmF0ZSBSZXNlcnZlZF9kb3duUm93ID0gMzk7CiAgdWludDggcHJpdmF0ZSBtYXhfbWVyZ2Vfc2l6ZSA9IDI7CiAgCiAgZXZlbnQgQm91Z2h0ICh1aW50MjU2IGluZGV4ZWQgX2l0ZW1JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHJpY2UpOwogIGV2ZW50IFNvbGQgKHVpbnQyNTYgaW5kZXhlZCBfaXRlbUlkLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9wcmljZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKCiAgYWRkcmVzcyBwcml2YXRlIG93bmVyOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHJpdmF0ZSBhZG1pbnM7CiAgYm9vbCBwcml2YXRlIGVyYzcyMUVuYWJsZWQgPSBmYWxzZTsKICBib29sIHByaXZhdGUgbWVyZ2VFbmFibGVkID0gZmFsc2U7CiAgdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQxID0gMC4wMiBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDIgPSAwLjUgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIGluY3JlYXNlTGltaXQzID0gMi4wIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0NCA9IDUuMCBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgc3RhcnRpbmdQcmljZSA9IDAuMDAxIGV0aGVyOwogIAogIHVpbnQyNTZbXSBwcml2YXRlIGxpc3RlZEl0ZW1zOwogIAogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSBvd25lck9mSXRlbTsKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgcHJpY2VPZkl0ZW07CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBzdHJpbmcpIHByaXZhdGUgdXNlcm5hbWVPZkFkZHJlc3M7CiAgCiAgCiAgZnVuY3Rpb24gRVRIMTBLICgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZG1pbnNbb3duZXJdID0gdHJ1ZTsKICB9CgogIC8qIE1vZGlmaWVycyAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUFkbWlucygpIHsKICAgIHJlcXVpcmUoYWRtaW5zW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5RVJDNzIxKCkgewogICAgcmVxdWlyZShlcmM3MjFFbmFibGVkKTsKICAgIF87CiAgfQogIG1vZGlmaWVyIG9ubHlNZXJnZUVuYWJsZSgpewogICAgICByZXF1aXJlKG1lcmdlRW5hYmxlZCk7CiAgICBfOwogIH0KCiAgLyogT3duZXIgKi8KICBmdW5jdGlvbiBzZXRPd25lciAoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBvd25lciA9IF9vd25lcjsKICB9CgogIGZ1bmN0aW9uIGFkZEFkbWluIChhZGRyZXNzIF9hZG1pbikgb25seU93bmVyKCkgcHVibGljIHsKICAgIGFkbWluc1tfYWRtaW5dID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUFkbWluIChhZGRyZXNzIF9hZG1pbikgb25seU93bmVyKCkgcHVibGljIHsKICAgIGRlbGV0ZSBhZG1pbnNbX2FkbWluXTsKICB9CgogIC8vIFVubG9ja3MgRVJDNzIxIGJlaGF2aW91ciwgYWxsb3dpbmcgZm9yIHRyYWRpbmcgb24gdGhpcmQgcGFydHkgcGxhdGZvcm1zLgogIGZ1bmN0aW9uIGVuYWJsZUVSQzcyMSAoKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgZXJjNzIxRW5hYmxlZCA9IHRydWU7CiAgfQogIGZ1bmN0aW9uIGVuYWJsZU1lcmdlIChib29sIHN0YXR1cykgb25seUFkbWlucygpIHB1YmxpYyB7CiAgICBtZXJnZUVuYWJsZWQgPSBzdGF0dXM7CiAgfQogIGZ1bmN0aW9uIHNldFJlc2VydmVkKHVpbnQ4IF91cCx1aW50OCBfZG93bikgb25seUFkbWlucygpIHB1YmxpY3sKICAgICAgUmVzZXJ2ZWRfdXBSb3cgPSBfdXA7CiAgICAgIFJlc2VydmVkX2Rvd25Sb3cgPSBfZG93bjsKICB9CiAgZnVuY3Rpb24gc2V0TWF4TWVyZ2UodWludDggbnVtKW9ubHlBZG1pbnMoKSBleHRlcm5hbHsKICAgICAgbWF4X21lcmdlX3NpemUgPSBudW07CiAgfSAgCiAgLyogV2l0aGRyYXcgKi8KICAvKgogICovCiAgZnVuY3Rpb24gd2l0aGRyYXdBbGwgKCkgb25seU93bmVyKCkgcHVibGljIHsKICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID4gMCk7CiAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQgKHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyKCkgcHVibGljIHsKICAgIG93bmVyLnRyYW5zZmVyKF9hbW91bnQpOwogIH0KICAgLyogQnV5aW5nICovCiAgZnVuY3Rpb24gY2FsY3VsYXRlTmV4dFByaWNlICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfbmV4dFByaWNlKSB7CiAgICBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDEpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMjAwKS5kaXYoOTUpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MikgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMzUpLmRpdig5Nik7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQzKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEyNSkuZGl2KDk3KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDQpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE3KS5kaXYoOTcpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTE1KS5kaXYoOTgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlRGV2Q3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZGV2Q3V0KSB7CiAgICBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDEpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNSkuZGl2KDEwMCk7IC8vIDUlCiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQyKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDQpLmRpdigxMDApOyAvLyA0JQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MykgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgzKS5kaXYoMTAwKTsgLy8gMyUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDQpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMykuZGl2KDEwMCk7IC8vIDMlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgyKS5kaXYoMTAwKTsgLy8gMiUKICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gcmVxdWVzdE1lcmdlKHVpbnQyNTZbXSBpZHMpb25seU1lcmdlRW5hYmxlKCkgZXh0ZXJuYWwgewogICAgICByZXF1aXJlKGlkcy5sZW5ndGggPT0gNCk7CiAgICAgIHJlcXVpcmUoaWRzWzBdJSgxMCoqOCkvKDEwKio0KTxtYXhfbWVyZ2Vfc2l6ZSk7CiAgICAgIHJlcXVpcmUoaWRzWzFdJSgxMCoqOCkvKDEwKio0KTxtYXhfbWVyZ2Vfc2l6ZSk7CiAgICAgIHJlcXVpcmUoaWRzWzJdJSgxMCoqOCkvKDEwKio0KTxtYXhfbWVyZ2Vfc2l6ZSk7CiAgICAgIHJlcXVpcmUoaWRzWzNdJSgxMCoqOCkvKDEwKio0KTxtYXhfbWVyZ2Vfc2l6ZSk7CiAgICAgIHJlcXVpcmUob3duZXJPZkl0ZW1baWRzWzBdXSA9PSBtc2cuc2VuZGVyKTsKICAgICAgcmVxdWlyZShvd25lck9mSXRlbVtpZHNbMV1dID09IG1zZy5zZW5kZXIpOwogICAgICByZXF1aXJlKG93bmVyT2ZJdGVtW2lkc1syXV0gPT0gbXNnLnNlbmRlcik7CiAgICAgIHJlcXVpcmUob3duZXJPZkl0ZW1baWRzWzNdXSA9PSBtc2cuc2VuZGVyKTsKICAgICAgcmVxdWlyZShpZHNbMF0rICgxMCoqMTIpID09IGlkc1sxXSk7CiAgICAgIHJlcXVpcmUoaWRzWzBdKyAoMTAqKjgpID09IGlkc1syXSk7CiAgICAgIHJlcXVpcmUoaWRzWzBdKyAoMTAqKjgpICsgKDEwKioxMikgPT0gaWRzWzNdKTsKICAgICAgCiAgICAgIHVpbnQyNTYgbmV3UHJpY2UgPSBwcmljZU9mSXRlbVtpZHNbMF1dK3ByaWNlT2ZJdGVtW2lkc1sxXV0rcHJpY2VPZkl0ZW1baWRzWzJdXStwcmljZU9mSXRlbVtpZHNbM11dOwogICAgICB1aW50MjU2IG5ld0lkID0gaWRzWzBdICsgaWRzWzBdJSgxMCoqOCk7CiAgICAgIGxpc3RlZEl0ZW1zLnB1c2gobmV3SWQpOwogICAgICBwcmljZU9mSXRlbVtuZXdJZF0gPSBuZXdQcmljZTsKICAgICAgb3duZXJPZkl0ZW1bbmV3SWRdID0gbXNnLnNlbmRlcjsKICAgICAgb3duZXJPZkl0ZW1baWRzWzBdXSA9IGFkZHJlc3MoMCk7CiAgICAgIG93bmVyT2ZJdGVtW2lkc1sxXV0gPSBhZGRyZXNzKDApOwogICAgICBvd25lck9mSXRlbVtpZHNbMl1dID0gYWRkcmVzcygwKTsKICAgICAgb3duZXJPZkl0ZW1baWRzWzNdXSA9IGFkZHJlc3MoMCk7CiAgfSAKICAKICBmdW5jdGlvbiBjaGVja0lzT25TYWxlKHVpbnQyNTYgX3lwb3MpcHVibGljIHZpZXcgcmV0dXJucyhib29sIGlzT25TYWxlKXsKICAgICAgaWYoX3lwb3M8UmVzZXJ2ZWRfdXBSb3d8fF95cG9zPlJlc2VydmVkX2Rvd25Sb3cpewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9ZWxzZXsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGdlbmVyYXRlSWQodWludDI1NiBfeHBvcyx1aW50MjU2IF95cG9zLHVpbnQyNTYgX3NpemUpaW50ZXJuYWwgcHVyZSByZXR1cm5zKHVpbnQyNTYgX2lkKXsKICAgICAgdWludDI1NiB0ZW1wPSBfeHBvcyAqICAoMTAqKjEyKSArIF95cG9zICogKDEwKio4KSArIF9zaXplKigxMCoqNCk7CiAgICAgIHJldHVybiB0ZW1wOwogIH0KICBmdW5jdGlvbiBwYXJzZUlkKHVpbnQyNTYgX2lkKWludGVybmFsIHB1cmUgcmV0dXJucyh1aW50MjU2IF94LHVpbnQyNTYgX3ksdWludDI1NiBfc2l6ZSl7CiAgICAgIHVpbnQyNTYgeHBvcyA9IF9pZCAvICgxMCoqMTIpOwogICAgICB1aW50MjU2IHlwb3MgPSAoX2lkLXhwb3MqKDEwKioxMikpIC8gKDEwKio4KTsKICAgICAgdWludDI1NiBzaXplID0gX2lkICUgKDEwKio1KSAvICgxMCoqNCk7CiAgICAgIHJldHVybiAoeHBvcyx5cG9zLHNpemUpOwogIH0KCiAgZnVuY3Rpb24gc2V0VXNlck5hbWUoc3RyaW5nIF9uYW1lKXBheWFibGUgcHVibGljewogICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKICAgICAgdXNlcm5hbWVPZkFkZHJlc3NbbXNnLnNlbmRlcl0gPSBfbmFtZTsKICAgICAgdWludDI1NiBleGNlc3MgPSBtc2cudmFsdWUgLSAwLjAxIGV0aGVyOwogICAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihleGNlc3MpOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGdldFVzZXJOYW1lKClwdWJsaWMgdmlldyByZXR1cm5zKHN0cmluZyBuYW1lKXsKICAgICAgcmV0dXJuIHVzZXJuYW1lT2ZBZGRyZXNzW21zZy5zZW5kZXJdOwogIH0KICBmdW5jdGlvbiBnZXRVc2VyTmFtZU9mKGFkZHJlc3MgX3VzZXIpcHVibGljIHZpZXcgcmV0dXJucyhzdHJpbmcgbmFtZSl7CiAgICAgIHJldHVybiB1c2VybmFtZU9mQWRkcmVzc1tfdXNlcl07CiAgfQogIAogIGZ1bmN0aW9uIGFkZEJsb2NrKGFkZHJlc3MgX3RvLCB1aW50MjU2IF94cG9zLHVpbnQyNTYgX3lwb3MsdWludDI1NiBfc2l6ZSx1aW50MjU2IF9wcmljZSkgb25seUFkbWlucygpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShjaGVja0lzT25TYWxlKF95cG9zKSA9PSB0cnVlKTsKICAgICAgICByZXF1aXJlKF9zaXplID09IDEpOwogICAgICAgIHJlcXVpcmUoX3hwb3MgKyBfc2l6ZSA8PSBNQVhfQ09MUyk7CiAgICAgICAgdWludDI1NiBfaXRlbUlkID0gZ2VuZXJhdGVJZChfeHBvcyxfeXBvcyxfc2l6ZSk7CiAgICAgICAgcmVxdWlyZShwcmljZU9mKF9pdGVtSWQpPT0wKTsKICAgICAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCk9PWFkZHJlc3MoMCkpOwogICAgICAgIAogICAgICAgIGxpc3RlZEl0ZW1zLnB1c2goX2l0ZW1JZCk7CiAgICAgICAgcHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPSBfcHJpY2U7CiAgICAJb3duZXJPZkl0ZW1bX2l0ZW1JZF0gPSBfdG87CiAgICB9CiAgCiAgCiAgLy9CdXkgdGhlIGJsb2NrIHdpdGggc29tZWJvZHkgb3duZWQgYWxyZWFkeQogICAgZnVuY3Rpb24gYnV5T2xkICh1aW50MjU2IF9pbmRleCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX2luZGV4IT0wKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmljZU9mKF9pbmRleCkpOwogICAgICAgIHJlcXVpcmUob3duZXJPZihfaW5kZXgpICE9IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUob3duZXJPZihfaW5kZXgpICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB1aW50MjU2IHByaWNlID0gcHJpY2VPZihfaW5kZXgpOwogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lck9mSXRlbVtfaW5kZXhdOwogICAgICAgIHByaWNlT2ZJdGVtW19pbmRleF0gPSBjYWxjdWxhdGVOZXh0UHJpY2UocHJpY2UpOwoKICAgICAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwogICAgICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgCiAgICAJb3duZXJPZkl0ZW1bX2luZGV4XSA9IG5ld093bmVyOwogICAgICAgIHVpbnQyNTYgZGV2Q3V0ID0gY2FsY3VsYXRlRGV2Q3V0KHByaWNlKTsKICAgICAgICBvbGRPd25lci50cmFuc2ZlcihwcmljZS5zdWIoZGV2Q3V0KSk7CiAgICAKICAgICAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICAgICAgbmV3T3duZXIudHJhbnNmZXIoZXhjZXNzKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vQnV5IGEgbmV3IGJsb2NrIHdpdGhvdXQgYW55Ym9keSBvd25lZAogICAgZnVuY3Rpb24gYnV5TmV3ICh1aW50MjU2IF94cG9zLHVpbnQyNTYgX3lwb3MsdWludDI1NiBfc2l6ZSkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoY2hlY2tJc09uU2FsZShfeXBvcykgPT0gdHJ1ZSk7CiAgICAgICAgcmVxdWlyZShfc2l6ZSA9PSAxKTsKICAgICAgICByZXF1aXJlKF94cG9zICsgX3NpemUgPD0gTUFYX0NPTFMpOwogICAgICAgIHVpbnQyNTYgX2l0ZW1JZCA9IGdlbmVyYXRlSWQoX3hwb3MsX3lwb3MsX3NpemUpOwogICAgICAgIHJlcXVpcmUocHJpY2VPZihfaXRlbUlkKT09MCk7CiAgICAgICAgcmVxdWlyZShvd25lck9mKF9pdGVtSWQpPT1hZGRyZXNzKDApKTsKICAgICAgICB1aW50MjU2IHByaWNlID1zdGFydGluZ1ByaWNlOwogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lcjsKCiAgICAgICAgbGlzdGVkSXRlbXMucHVzaChfaXRlbUlkKTsKICAgICAgICBwcmljZU9mSXRlbVtfaXRlbUlkXSA9IGNhbGN1bGF0ZU5leHRQcmljZShwcmljZSk7CiAgICAgICAgdWludDI1NiBleGNlc3MgPSBtc2cudmFsdWUuc3ViKHByaWNlKTsKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgIAogICAgCW93bmVyT2ZJdGVtW19pdGVtSWRdID0gbmV3T3duZXI7CiAgICAgICAgdWludDI1NiBkZXZDdXQgPSBjYWxjdWxhdGVEZXZDdXQocHJpY2UpOwogICAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHByaWNlLnN1YihkZXZDdXQpKTsKICAgIAogICAgICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgICAgICBuZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBNZXJnZVN0YXR1cygpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX01lcmdlT3BlbikgewogICAgICAgIHJldHVybiBtZXJnZUVuYWJsZWQ7CiAgICB9CiAgLyogRVJDNzIxICovCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wgX2ltcGxlbWVudHMpIHsKICAgIHJldHVybiBlcmM3MjFFbmFibGVkOwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyBfbmFtZSkgewogICAgcmV0dXJuICJFVEgxMEsuaW8iOwogIH0KCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgIHJldHVybiAiYmxvY2siOwogIH0KICAKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICAgIHVpbnQyNTYgdG90YWwgPSAwOwogICAgICBmb3IodWludDI1NiBpPTA7IGk8bGlzdGVkSXRlbXMubGVuZ3RoOyBpKyspewogICAgICAgICAgaWYob3duZXJPZihsaXN0ZWRJdGVtc1tpXSkhPWFkZHJlc3MoMCkpewogICAgICAgICAgICAgIHRvdGFsKys7CiAgICAgICAgICB9CiAgICAgIH0KICAgIHJldHVybiB0b3RhbDsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZiAoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpIHsKICAgIHVpbnQyNTYgY291bnRlciA9IDA7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBsaXN0ZWRJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAob3duZXJPZihsaXN0ZWRJdGVtc1tpXSkgPT0gX293bmVyKSB7CiAgICAgICAgICBjb3VudGVyKys7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjb3VudGVyOwogIH0KICAKICBmdW5jdGlvbiBvd25lck9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKSB7CiAgICByZXR1cm4gb3duZXJPZkl0ZW1bX2l0ZW1JZF07CiAgfQogIAogIGZ1bmN0aW9uIGNlbGxzT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10gX3Rva2VuSWRzKSB7CiAgICB1aW50MjU2W10gbWVtb3J5IGl0ZW1zID0gbmV3IHVpbnQyNTZbXShiYWxhbmNlT2YoX293bmVyKSk7CiAgICB1aW50MjU2IGl0ZW1Db3VudGVyID0gMDsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGxpc3RlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChvd25lck9mKGxpc3RlZEl0ZW1zW2ldKSA9PSBfb3duZXIpIHsKICAgICAgICBpdGVtc1tpdGVtQ291bnRlcl0gPSBsaXN0ZWRJdGVtc1tpXTsKICAgICAgICBpdGVtQ291bnRlciArPSAxOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gaXRlbXM7CiAgfQogICAgZnVuY3Rpb24gZ2V0QWxsQ2VsbElkcyAoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10gX3Rva2VuSWRzKSB7CiAgICAgICAgdWludDI1NltdIG1lbW9yeSBpdGVtcyA9IG5ldyB1aW50MjU2W10odG90YWxTdXBwbHkoKSk7CiAgICAgICAgdWludDI1NiBpdGVtQ291bnRlciA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbGlzdGVkSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKG93bmVyT2ZJdGVtW2xpc3RlZEl0ZW1zW2ldXSAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICBpdGVtc1tpdGVtQ291bnRlcl0gPSBsaXN0ZWRJdGVtc1tpXTsKICAgICAgICAgICAgICAgIGl0ZW1Db3VudGVyICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGl0ZW1zOwogICAgfQoKICAgIC8qIFJlYWQgKi8KICAgIGZ1bmN0aW9uIGlzQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9pc0FkbWluKSB7CiAgICAgICAgcmV0dXJuIGFkbWluc1tfYWRtaW5dOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdGFydGluZ1ByaWNlT2YgKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfc3RhcnRpbmdQcmljZSkgewogICAgICAgIHJldHVybiBzdGFydGluZ1ByaWNlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBwcmljZU9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CiAgICAgICAgcmV0dXJuIHByaWNlT2ZJdGVtW19pdGVtSWRdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBuZXh0UHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgICAgICByZXR1cm4gY2FsY3VsYXRlTmV4dFByaWNlKHByaWNlT2YoX2l0ZW1JZCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbE9mICh1aW50MjU2IF9pdGVtSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9uZXh0UHJpY2UsIHVpbnQyNTYgX3hwb3MsIHVpbnQyNTYgX3lwb3MsIHVpbnQyNTYgX3NpemUpIHsKICAgICAgICB1aW50MjU2IHhwb3M7CiAgICAgICAgdWludDI1NiB5cG9zOwogICAgICAgIHVpbnQyNTYgc2l6ZTsKICAgICAgICAoeHBvcyx5cG9zLHNpemUpID0gcGFyc2VJZChfaXRlbUlkKTsKICAgICAgICByZXR1cm4gKG93bmVyT2ZJdGVtW19pdGVtSWRdLHN0YXJ0aW5nUHJpY2VPZigpLHByaWNlT2YoX2l0ZW1JZCksbmV4dFByaWNlT2YoX2l0ZW1JZCkseHBvcyx5cG9zLHNpemUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRBbGxDZWxsSW5mbygpZXh0ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBfdG9rZW5JZHMsdWludDI1NltdIF9wcmljZXMsIGFkZHJlc3NbXSBfb3duZXJzKXsKICAgICAgICB1aW50MjU2W10gbWVtb3J5IGl0ZW1zID0gbmV3IHVpbnQyNTZbXSh0b3RhbFN1cHBseSgpKTsKICAgICAgICB1aW50MjU2W10gbWVtb3J5IHByaWNlcyA9IG5ldyB1aW50MjU2W10odG90YWxTdXBwbHkoKSk7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBvd25lcnMgPSBuZXcgYWRkcmVzc1tdKHRvdGFsU3VwcGx5KCkpOwogICAgICAgIHVpbnQyNTYgaXRlbUNvdW50ZXIgPSAwOwogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGxpc3RlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChvd25lck9mKGxpc3RlZEl0ZW1zW2ldKSAhPWFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgIGl0ZW1zW2l0ZW1Db3VudGVyXSA9IGxpc3RlZEl0ZW1zW2ldOwogICAgICAgICAgICAgICAgcHJpY2VzW2l0ZW1Db3VudGVyXSA9IHByaWNlT2YobGlzdGVkSXRlbXNbaV0pOwogICAgICAgICAgICAgICAgb3duZXJzW2l0ZW1Db3VudGVyXSA9IG93bmVyT2YobGlzdGVkSXRlbXNbaV0pOwogICAgICAgICAgICAgICAgaXRlbUNvdW50ZXIgKz0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gKGl0ZW1zLHByaWNlcyxvd25lcnMpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRBbGxDZWxsSW5mb0Zyb21fVG8odWludDI1NiBfZnJvbSwgdWludDI1NiBfdG8pZXh0ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBfdG9rZW5JZHMsdWludDI1NltdIF9wcmljZXMsIGFkZHJlc3NbXSBfb3duZXJzKXsKICAgICAgICB1aW50MjU2IHRvdGFsc2l6ZSA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgcmVxdWlyZShfZnJvbSA8PSBfdG8pOwogICAgICAgIHJlcXVpcmUoX3RvIDwgdG90YWxzaXplKTsKICAgICAgICB1aW50MjU2IHNpemUgPSBfdG8tX2Zyb20gKzE7CiAgICAgICAgdWludDI1NltdIG1lbW9yeSBpdGVtcyA9IG5ldyB1aW50MjU2W10oc2l6ZSk7CiAgICAgICAgdWludDI1NltdIG1lbW9yeSBwcmljZXMgPSBuZXcgdWludDI1NltdKHNpemUpOwogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgb3duZXJzID0gbmV3IGFkZHJlc3NbXShzaXplKTsKICAgICAgICB1aW50MjU2IGl0ZW1Db3VudGVyID0gMDsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IF9mcm9tOyBpIDwgbGlzdGVkSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKG93bmVyT2YobGlzdGVkSXRlbXNbaV0pICE9YWRkcmVzcygwKSkgewogICAgICAgICAgICAgICAgaXRlbXNbaXRlbUNvdW50ZXJdID0gbGlzdGVkSXRlbXNbaV07CiAgICAgICAgICAgICAgICBwcmljZXNbaXRlbUNvdW50ZXJdID0gcHJpY2VPZihsaXN0ZWRJdGVtc1tpXSk7CiAgICAgICAgICAgICAgICBvd25lcnNbaXRlbUNvdW50ZXJdID0gb3duZXJPZihsaXN0ZWRJdGVtc1tpXSk7CiAgICAgICAgICAgICAgICBpdGVtQ291bnRlciArPSAxOwogICAgICAgICAgICAgICAgaWYoaXRlbUNvdW50ZXIgPiBfdG8pewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAoaXRlbXMscHJpY2VzLG93bmVycyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldE1heE1lcmdlKClleHRlcm5hbCB2aWV3IHJldHVybnModWludDI1NiBfbWF4TWVyZ2VTaXplKXsKICAgICAgcmV0dXJuIG1heF9tZXJnZV9zaXplOwogICAgfQogICAgZnVuY3Rpb24gc2hvd0JhbGFuY2UgKCkgb25seUFkbWlucygpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX1Byb2ZpdEJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQp9'.
	

]
