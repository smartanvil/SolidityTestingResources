Class {
	#name : #SRTc3b7663ab5b9322871374af1fc967a926abe841a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc3b7663ab5b9322871374af1fc967a926abe841a >> base64 [
	^ 'Ly8gQXV0aG9yIDogc2hpZnQKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKLy8tLS0tLS0tLS0gT3BlblplcHBlbGluJ3MgU2FmZSBNYXRoCi8vU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgovLyBFUkMyMCBJbnRlcmZhY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwp9CgovKgogIFRoaXMgY29udHJhY3Qgc3RvcmVzIHR3aWNlIGV2ZXJ5IGtleSB2YWx1ZSBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHJlZGlzdHJpYnV0ZSBmdW5kcwogIHdoZW4gdGhlIGJvbnVzIHRva2VucyBhcmUgcmVjZWl2ZWQgKHdoaWNoIGlzIHR5cGljYWxseSBYIG1vbnRocyBhZnRlciB0aGUgaW5pdGlhbCBidXkpLgoqLwoKY29udHJhY3QgTW9vbmdhbmcgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG1pbkFtb3VudFJlYWNoZWQgewogICAgLy9JbiByZWFsaXR5LCB0aGUgY29ycmVjdCBhbW91bnQgaXMgdGhlIGFtb3VudCArIDElCiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSA+PSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKG1pbl9hbW91bnQsIDEwMCksIDk5KSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgdW5kZXJNYXhBbW91bnQgewogICAgcmVxdWlyZShtYXhfYW1vdW50ID09IDAgfHwgdGhpcy5iYWxhbmNlIDw9IG1heF9hbW91bnQpOwogICAgXzsKICB9CgogIC8vQ29uc3RhbnRzIG9mIHRoZSBjb250cmFjdAogIHVpbnQyNTYgY29uc3RhbnQgRkVFID0gMTAwOyAgICAvLzElIGZlZQogIC8vU2FmZU1hdGguZGl2KDIwLCAzKSA9IDYKICB1aW50MjU2IGNvbnN0YW50IEZFRV9ERVYgPSA2OyAvLzE1JSBvbiB0aGUgMSUgZmVlCiAgdWludDI1NiBjb25zdGFudCBGRUVfQVVESVQgPSAxMjsgLy83LjUlIG9uIHRoZSAxJSBmZWUKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBhZGRyZXNzIGNvbnN0YW50IHB1YmxpYyBkZXZlbG9wZXIgPSAweEVFMDZCZERhZkZBNTZhMzAzNzE4REU1M0E1YmMzNDdFZmJFNEM2OGY7CiAgYWRkcmVzcyBjb25zdGFudCBwdWJsaWMgYXVkaXRvciA9IDB4NjNGNzU0N0FjMjc3ZWEwQjUyQTBCMDYwQmU2YWY4QzU5MDQ5NTNhYTsKICB1aW50MjU2IHB1YmxpYyBpbmRpdmlkdWFsX2NhcDsKCiAgLy9WYXJpYWJsZXMgc3ViamVjdCB0byBjaGFuZ2VzCiAgdWludDI1NiBwdWJsaWMgbWF4X2Ftb3VudDsgIC8vMCBtZWFucyB0aGVyZSBpcyBubyBsaW1pdAogIHVpbnQyNTYgcHVibGljIG1pbl9hbW91bnQ7CgogIC8vU3RvcmUgdGhlIGFtb3VudCBvZiBFVEggZGVwb3NpdGVkIGJ5IGVhY2ggYWNjb3VudC4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlc19ib251czsKICAvLyBUcmFjayB3aGV0aGVyIHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMgeWV0LgogIGJvb2wgcHVibGljIGJvdWdodF90b2tlbnM7CiAgLy8gUmVjb3JkIEVUSCB2YWx1ZSBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgY29udHJhY3QuCiAgdWludDI1NiBwdWJsaWMgY29udHJhY3RfZXRoX3ZhbHVlOwogIHVpbnQyNTYgcHVibGljIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251czsKICAvL1NldCBieSB0aGUgb3duZXIgaW4gb3JkZXIgdG8gYWxsb3cgdGhlIHdpdGhkcmF3YWwgb2YgYm9udXMgdG9rZW5zLgogIGJvb2wgcHVibGljIGJvbnVzX3JlY2VpdmVkOwogIC8vVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRhY3QuCiAgYWRkcmVzcyBwdWJsaWMgc2FsZTsKICAvL1Rva2VuIGFkZHJlc3MKICBFUkMyMCBwdWJsaWMgdG9rZW47CiAgLy9SZWNvcmRzIHRoZSBmZWVzIHRoYXQgaGF2ZSB0byBiZSBzZW50CiAgdWludDI1NiBmZWVzOwogIC8vU2V0IGJ5IHRoZSBvd25lci4gQWxsb3dzIHBlb3BsZSB0byByZWZ1bmQgdG90YWxseSBvciBwYXJ0aWFsbHkuCiAgYm9vbCBwdWJsaWMgYWxsb3dfcmVmdW5kczsKICAvL1RoZSByZWR1Y3Rpb24gb2YgdGhlIGFsbG9jYXRpb24gaW4gJSB8IGV4YW1wbGUgOiA0MCAtPiA0MCUgcmVkdWN0aW9uCiAgdWludDI1NiBwdWJsaWMgcGVyY2VudF9yZWR1Y3Rpb247CiAgYm9vbCBwdWJsaWMgb3duZXJfc3VwcGxpZWRfZXRoOwogIGJvb2wgcHVibGljIGFsbG93X2NvbnRyaWJ1dGlvbnM7CgogIC8vSW50ZXJuYWwgZnVuY3Rpb25zCiAgZnVuY3Rpb24gTW9vbmdhbmcodWludDI1NiBtYXgsIHVpbnQyNTYgbWluLCB1aW50MjU2IGNhcCkgewogICAgLyoKICAgIENvbnN0cnVjdG9yCiAgICAqLwogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgbWF4X2Ftb3VudCA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwobWF4LCAxMDApLCA5OSk7CiAgICBtaW5fYW1vdW50ID0gbWluOwogICAgaW5kaXZpZHVhbF9jYXAgPSBjYXA7CiAgICBhbGxvd19jb250cmlidXRpb25zID0gdHJ1ZTsKICB9CgogIC8vRnVuY3Rpb25zIGZvciB0aGUgb3duZXIKCiAgLy8gQnV5IHRoZSB0b2tlbnMuIFNlbmRzIEVUSCB0byB0aGUgcHJlc2FsZSB3YWxsZXQgYW5kIHJlY29yZHMgdGhlIEVUSCBhbW91bnQgaGVsZCBpbiB0aGUgY29udHJhY3QuCiAgZnVuY3Rpb24gYnV5X3RoZV90b2tlbnMoKSBvbmx5T3duZXIgbWluQW1vdW50UmVhY2hlZCB1bmRlck1heEFtb3VudCB7CiAgICAvL0F2b2lkcyBidXJuaW5nIHRoZSBmdW5kcwogICAgcmVxdWlyZSghYm91Z2h0X3Rva2VucyAmJiBzYWxlICE9IDB4MCk7CiAgICAvL1JlY29yZCB0aGF0IHRoZSBjb250cmFjdCBoYXMgYm91Z2h0IHRoZSB0b2tlbnMuCiAgICBib3VnaHRfdG9rZW5zID0gdHJ1ZTsKICAgIC8vU2VuZHMgdGhlIGZlZSBiZWZvcmUgc28gdGhlIGNvbnRyYWN0X2V0aF92YWx1ZSBjb250YWlucyB0aGUgY29ycmVjdCBiYWxhbmNlCiAgICB1aW50MjU2IGRldl9mZWUgPSBTYWZlTWF0aC5kaXYoZmVlcywgRkVFX0RFVik7CiAgICB1aW50MjU2IGF1ZGl0X2ZlZSA9IFNhZmVNYXRoLmRpdihmZWVzLCBGRUVfQVVESVQpOwogICAgb3duZXIudHJhbnNmZXIoU2FmZU1hdGguc3ViKFNhZmVNYXRoLnN1YihmZWVzLCBkZXZfZmVlKSwgYXVkaXRfZmVlKSk7CiAgICBkZXZlbG9wZXIudHJhbnNmZXIoZGV2X2ZlZSk7CiAgICBhdWRpdG9yLnRyYW5zZmVyKGF1ZGl0X2ZlZSk7CiAgICAvL1JlY29yZCB0aGUgYW1vdW50IG9mIEVUSCBzZW50IGFzIHRoZSBjb250cmFjdCdzIGN1cnJlbnQgdmFsdWUuCiAgICBjb250cmFjdF9ldGhfdmFsdWUgPSB0aGlzLmJhbGFuY2U7CiAgICBjb250cmFjdF9ldGhfdmFsdWVfYm9udXMgPSB0aGlzLmJhbGFuY2U7CiAgICAvLyBUcmFuc2ZlciBhbGwgdGhlIGZ1bmRzIHRvIHRoZSBjcm93ZHNhbGUgYWRkcmVzcy4KICAgIHNhbGUudHJhbnNmZXIoY29udHJhY3RfZXRoX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGZvcmNlX3JlZnVuZChhZGRyZXNzIF90b19yZWZ1bmQpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zKTsKICAgIHVpbnQyNTYgZXRoX3RvX3dpdGhkcmF3ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlc1tfdG9fcmVmdW5kXSwgMTAwKSwgOTkpOwogICAgYmFsYW5jZXNbX3RvX3JlZnVuZF0gPSAwOwogICAgYmFsYW5jZXNfYm9udXNbX3RvX3JlZnVuZF0gPSAwOwogICAgZmVlcyA9IFNhZmVNYXRoLnN1YihmZWVzLCBTYWZlTWF0aC5kaXYoZXRoX3RvX3dpdGhkcmF3LCBGRUUpKTsKICAgIF90b19yZWZ1bmQudHJhbnNmZXIoZXRoX3RvX3dpdGhkcmF3KTsKICB9CgogIGZ1bmN0aW9uIGZvcmNlX3BhcnRpYWxfcmVmdW5kKGFkZHJlc3MgX3RvX3JlZnVuZCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoYm91Z2h0X3Rva2VucyAmJiBwZXJjZW50X3JlZHVjdGlvbiA+IDApOwogICAgLy9BbW91bnQgdG8gcmVmdW5kIGlzIHRoZSBhbW91bnQgbWludXMgdGhlIFglIG9mIHRoZSByZWR1Y3Rpb24KICAgIC8vYW1vdW50X3RvX3JlZnVuZCA9IGJhbGFuY2UqWAogICAgdWludDI1NiBhbW91bnQgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW190b19yZWZ1bmRdLCBwZXJjZW50X3JlZHVjdGlvbiksIDEwMCk7CiAgICBiYWxhbmNlc1tfdG9fcmVmdW5kXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlc1tfdG9fcmVmdW5kXSwgYW1vdW50KTsKICAgIGJhbGFuY2VzX2JvbnVzW190b19yZWZ1bmRdID0gYmFsYW5jZXNbX3RvX3JlZnVuZF07CiAgICBpZiAob3duZXJfc3VwcGxpZWRfZXRoKSB7CiAgICAgIC8vZGV2IGZlZXMgYXJlbid0IHJlZnVuZGVkLCBvbmx5IG93bmVyIGZlZXMKICAgICAgdWludDI1NiBmZWUgPSBhbW91bnQuZGl2KEZFRSkubXVsKHBlcmNlbnRfcmVkdWN0aW9uKS5kaXYoMTAwKTsKICAgICAgYW1vdW50ID0gYW1vdW50LmFkZChmZWUpOwogICAgfQogICAgX3RvX3JlZnVuZC50cmFuc2ZlcihhbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gc2V0X3NhbGVfYWRkcmVzcyhhZGRyZXNzIF9zYWxlKSBvbmx5T3duZXIgewogICAgLy9Bdm9pZCBtaXN0YWtlIG9mIHB1dHRpbmcgMHgwIGFuZCBjYW4ndCBjaGFuZ2UgdHdpY2UgdGhlIHNhbGUgYWRkcmVzcwogICAgcmVxdWlyZShfc2FsZSAhPSAweDApOwogICAgc2FsZSA9IF9zYWxlOwogIH0KCiAgZnVuY3Rpb24gc2V0X3Rva2VuX2FkZHJlc3MoYWRkcmVzcyBfdG9rZW4pIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF90b2tlbiAhPSAweDApOwogICAgdG9rZW4gPSBFUkMyMChfdG9rZW4pOwogIH0KCiAgZnVuY3Rpb24gc2V0X2JvbnVzX3JlY2VpdmVkKGJvb2wgX2Jvb2xlYW4pIG9ubHlPd25lciB7CiAgICBib251c19yZWNlaXZlZCA9IF9ib29sZWFuOwogIH0KCiAgZnVuY3Rpb24gc2V0X2FsbG93X3JlZnVuZHMoYm9vbCBfYm9vbGVhbikgb25seU93bmVyIHsKICAgIC8qCiAgICBJbiBjYXNlLCBmb3Igc29tZSByZWFzb25zLCB0aGUgcHJvamVjdCByZWZ1bmRzIHRoZSBtb25leQogICAgKi8KICAgIGFsbG93X3JlZnVuZHMgPSBfYm9vbGVhbjsKICB9CgogIGZ1bmN0aW9uIHNldF9hbGxvd19jb250cmlidXRpb25zKGJvb2wgX2Jvb2xlYW4pIG9ubHlPd25lciB7CiAgICAgIGFsbG93X2NvbnRyaWJ1dGlvbnMgPSBfYm9vbGVhbjsKICB9CgogIGZ1bmN0aW9uIHNldF9wZXJjZW50X3JlZHVjdGlvbih1aW50MjU2IF9yZWR1Y3Rpb24pIG9ubHlPd25lciBwYXlhYmxlIHsKICAgIHJlcXVpcmUoYm91Z2h0X3Rva2VucyAmJiBfcmVkdWN0aW9uIDw9IDEwMCk7CiAgICBwZXJjZW50X3JlZHVjdGlvbiA9IF9yZWR1Y3Rpb247CiAgICBpZiAobXNnLnZhbHVlID4gMCkgewogICAgICBvd25lcl9zdXBwbGllZF9ldGggPSB0cnVlOwogICAgfQogICAgLy93ZSBzdWJzdHJhY3QgYnkgY29udHJhY3RfZXRoX3ZhbHVlKl9yZWR1Y3Rpb24gYmFzaWNhbGx5CiAgICBjb250cmFjdF9ldGhfdmFsdWUgPSBjb250cmFjdF9ldGhfdmFsdWUuc3ViKChjb250cmFjdF9ldGhfdmFsdWUubXVsKF9yZWR1Y3Rpb24pKS5kaXYoMTAwKSk7CiAgICBjb250cmFjdF9ldGhfdmFsdWVfYm9udXMgPSBjb250cmFjdF9ldGhfdmFsdWU7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VfaW5kaXZpZHVhbF9jYXAodWludDI1NiBfY2FwKSBvbmx5T3duZXIgewogICAgaW5kaXZpZHVhbF9jYXAgPSBfY2FwOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX293bmVyKGFkZHJlc3MgbmV3X293bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdfb3duZXIgIT0gMHgwKTsKICAgIG93bmVyID0gbmV3X293bmVyOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX21heF9hbW91bnQodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICAvL0FUVEVOVElPTiEgVGhlIG5ldyBhbW91bnQgc2hvdWxkIGJlIGluIHdlaQogICAgICAvL1VzZSBodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZS8KICAgICAgbWF4X2Ftb3VudCA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoX2Ftb3VudCwgMTAwKSwgOTkpOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlX21pbl9hbW91bnQodWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgewogICAgICAvL0FUVEVOVElPTiEgVGhlIG5ldyBhbW91bnQgc2hvdWxkIGJlIGluIHdlaQogICAgICAvL1VzZSBodHRwczovL2V0aGVyY29udmVydGVyLm9ubGluZS8KICAgICAgbWluX2Ftb3VudCA9IF9hbW91bnQ7CiAgfQoKICAvL1B1YmxpYyBmdW5jdGlvbnMKCiAgLy8gQWxsb3dzIGFueSB1c2VyIHRvIHdpdGhkcmF3IGhpcyB0b2tlbnMuCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSB7CiAgICAvLyBEaXNhbGxvdyB3aXRoZHJhdyBpZiB0b2tlbnMgaGF2ZW4ndCBiZWVuIGJvdWdodCB5ZXQuCiAgICByZXF1aXJlKGJvdWdodF90b2tlbnMpOwogICAgdWludDI1NiBjb250cmFjdF90b2tlbl9iYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgLy8gRGlzYWxsb3cgdG9rZW4gd2l0aGRyYXdhbHMgaWYgdGhlcmUgYXJlIG5vIHRva2VucyB0byB3aXRoZHJhdy4KICAgIHJlcXVpcmUoY29udHJhY3RfdG9rZW5fYmFsYW5jZSAhPSAwKTsKICAgIHVpbnQyNTYgdG9rZW5zX3RvX3dpdGhkcmF3ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgY29udHJhY3RfdG9rZW5fYmFsYW5jZSksIGNvbnRyYWN0X2V0aF92YWx1ZSk7CiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlIG9mIHRva2VucyBjdXJyZW50bHkgaGVsZCBieSB0aGUgY29udHJhY3QuCiAgICBjb250cmFjdF9ldGhfdmFsdWUgPSBTYWZlTWF0aC5zdWIoY29udHJhY3RfZXRoX3ZhbHVlLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgdG8gcHJldmVudCByZWN1cnNpdmUgY2FsbC4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgIC8vIFNlbmQgdGhlIGZ1bmRzLiAgVGhyb3dzIG9uIGZhaWx1cmUgdG8gcHJldmVudCBsb3NzIG9mIGZ1bmRzLgogICAgcmVxdWlyZSh0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCB0b2tlbnNfdG9fd2l0aGRyYXcpKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3X2JvbnVzKCkgewogIC8qCiAgICBTcGVjaWFsIGZ1bmN0aW9uIHRvIHdpdGhkcmF3IHRoZSBib251cyB0b2tlbnMgYWZ0ZXIgdGhlIDYgbW9udGhzIGxvY2t1cC4KICAgIGJvbnVzX3JlY2VpdmVkIGhhcyB0byBiZSBzZXQgdG8gdHJ1ZS4KICAqLwogICAgcmVxdWlyZShib3VnaHRfdG9rZW5zICYmIGJvbnVzX3JlY2VpdmVkKTsKICAgIHVpbnQyNTYgY29udHJhY3RfdG9rZW5fYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgIHJlcXVpcmUoY29udHJhY3RfdG9rZW5fYmFsYW5jZSAhPSAwKTsKICAgIHVpbnQyNTYgdG9rZW5zX3RvX3dpdGhkcmF3ID0gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSwgY29udHJhY3RfdG9rZW5fYmFsYW5jZSksIGNvbnRyYWN0X2V0aF92YWx1ZV9ib251cyk7CiAgICBjb250cmFjdF9ldGhfdmFsdWVfYm9udXMgPSBTYWZlTWF0aC5zdWIoY29udHJhY3RfZXRoX3ZhbHVlX2JvbnVzLCBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSk7CiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IDA7CiAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2Vuc190b193aXRoZHJhdykpOwogIH0KCiAgLy8gQWxsb3dzIGFueSB1c2VyIHRvIGdldCBoaXMgZXRoIHJlZnVuZGVkIGJlZm9yZSB0aGUgcHVyY2hhc2UgaXMgbWFkZS4KICBmdW5jdGlvbiByZWZ1bmQoKSB7CiAgICByZXF1aXJlKCFib3VnaHRfdG9rZW5zICYmIGFsbG93X3JlZnVuZHMgJiYgcGVyY2VudF9yZWR1Y3Rpb24gPT0gMCk7CiAgICAvL2JhbGFuY2Ugb2YgY29udHJpYnV0b3IgPSBjb250cmlidXRpb24gKiAwLjk5CiAgICAvL3NvIGNvbnRyaWJ1dGlvbiA9IGJhbGFuY2UvMC45OQogICAgdWludDI1NiBldGhfdG9fd2l0aGRyYXcgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdLCAxMDApLCA5OSk7CiAgICAvLyBVcGRhdGUgdGhlIHVzZXIncyBiYWxhbmNlIHByaW9yIHRvIHNlbmRpbmcgRVRIIHRvIHByZXZlbnQgcmVjdXJzaXZlIGNhbGwuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAvL1VwZGF0ZXMgdGhlIGJhbGFuY2VzX2JvbnVzIHRvbwogICAgYmFsYW5jZXNfYm9udXNbbXNnLnNlbmRlcl0gPSAwOwogICAgLy9VcGRhdGVzIHRoZSBmZWVzIHZhcmlhYmxlIGJ5IHN1YnN0cmFjdGluZyB0aGUgcmVmdW5kZWQgZmVlCiAgICBmZWVzID0gU2FmZU1hdGguc3ViKGZlZXMsIFNhZmVNYXRoLmRpdihldGhfdG9fd2l0aGRyYXcsIEZFRSkpOwogICAgLy8gUmV0dXJuIHRoZSB1c2VyJ3MgZnVuZHMuICBUaHJvd3Mgb24gZmFpbHVyZSB0byBwcmV2ZW50IGxvc3Mgb2YgZnVuZHMuCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aF90b193aXRoZHJhdyk7CiAgfQoKICAvL0FsbG93cyBhbnkgdXNlciB0byBnZXQgYSBwYXJ0IG9mIGhpcyBFVEggcmVmdW5kZWQsIGluIHByb3BvcnRpb24KICAvL3RvIHRoZSAlIHJlZHVjZWQgb2YgdGhlIGFsbG9jYXRpb24KICBmdW5jdGlvbiBwYXJ0aWFsX3JlZnVuZCgpIHsKICAgIHJlcXVpcmUoYm91Z2h0X3Rva2VucyAmJiBwZXJjZW50X3JlZHVjdGlvbiA+IDApOwogICAgLy9BbW91bnQgdG8gcmVmdW5kIGlzIHRoZSBhbW91bnQgbWludXMgdGhlIFglIG9mIHRoZSByZWR1Y3Rpb24KICAgIC8vYW1vdW50X3RvX3JlZnVuZCA9IGJhbGFuY2UqWAogICAgdWludDI1NiBhbW91bnQgPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBwZXJjZW50X3JlZHVjdGlvbiksIDEwMCk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIGJhbGFuY2VzX2JvbnVzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICBpZiAob3duZXJfc3VwcGxpZWRfZXRoKSB7CiAgICAgIC8vZGV2IGZlZXMgYXJlbid0IHJlZnVuZGVkLCBvbmx5IG93bmVyIGZlZXMKICAgICAgdWludDI1NiBmZWUgPSBhbW91bnQuZGl2KEZFRSkubXVsKHBlcmNlbnRfcmVkdWN0aW9uKS5kaXYoMTAwKTsKICAgICAgYW1vdW50ID0gYW1vdW50LmFkZChmZWUpOwogICAgfQogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogIH0KCiAgLy8gRGVmYXVsdCBmdW5jdGlvbi4gIENhbGxlZCB3aGVuIGEgdXNlciBzZW5kcyBFVEggdG8gdGhlIGNvbnRyYWN0LgogIGZ1bmN0aW9uICgpIHBheWFibGUgdW5kZXJNYXhBbW91bnQgewogICAgcmVxdWlyZSghYm91Z2h0X3Rva2VucyAmJiBhbGxvd19jb250cmlidXRpb25zKTsKICAgIC8vMSUgZmVlIGlzIHRha2VuIG9uIHRoZSBFVEgKICAgIHVpbnQyNTYgZmVlID0gU2FmZU1hdGguZGl2KG1zZy52YWx1ZSwgRkVFKTsKICAgIGZlZXMgPSBTYWZlTWF0aC5hZGQoZmVlcywgZmVlKTsKICAgIC8vVXBkYXRlcyBib3RoIG9mIHRoZSBiYWxhbmNlcwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5hZGQoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIFNhZmVNYXRoLnN1Yihtc2cudmFsdWUsIGZlZSkpOwogICAgLy9DaGVja3MgaWYgdGhlIGluZGl2aWR1YWwgY2FwIGlzIHJlc3BlY3RlZAogICAgLy9JZiBpdCdzIG5vdCwgY2hhbmdlcyBhcmUgcmV2ZXJ0ZWQKICAgIHJlcXVpcmUoaW5kaXZpZHVhbF9jYXAgPT0gMCB8fCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA8PSBpbmRpdmlkdWFsX2NhcCk7CiAgICBiYWxhbmNlc19ib251c1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdOwogIH0KfQ=='.
	

]
