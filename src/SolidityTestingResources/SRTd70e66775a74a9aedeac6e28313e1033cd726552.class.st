Class {
	#name : #SRTd70e66775a74a9aedeac6e28313e1033cd726552,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd70e66775a74a9aedeac6e28313e1033cd726552 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKCmNvbnRyYWN0IFRva2VuRVJDMjAgewoKICAvKiBCZWdpbiBPd25lZCBDb250cmFjdCBNZW1iZXJzICovCiAgLy8gQW4gYXJyYXkgb2Ygb3duZXJzCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgb3duZXJzOwoKICAvLyBIYXMgdGhlIG5leHQgYWN0aW9uIGJlZW4gYXV0aG9yaXNlZCBieSBhbm90aGVyIG93bmVyCiAgYm9vbCBwdWJsaWMgbmV4dEFjdGlvbklzQXV0aG9yaXNlZCA9IGZhbHNlOwogIGFkZHJlc3MgcHVibGljIGFjdGlvbkF1dGhvcmlzZWRCeTsKICAvLyBEb2VzIGFuIG93bmVyLW9ubHkgYWN0aW9uIGhhdmUgdG8gYmUgYXV0aG9yaXNlZCBieSBhbm90aGVyIG93bmVyCiAgYm9vbCBwdWJsaWMgcmVxdWlyZUF1dGhvcmlzYXRpb24gPSB0cnVlOwoKCgogIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBhZGRyZXNzVG9DaGVjaykgdmlldyBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG93bmVyc1thZGRyZXNzVG9DaGVja107CiAgfQoKCgogIG1vZGlmaWVyIG9ubHlPd25lcnMgewogICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpKTsKICAgIGlmIChyZXF1aXJlQXV0aG9yaXNhdGlvbikgewogICAgICBjaGVja0FjdGlvbklzQXV0aG9yaXNlZEFuZFJlc2V0KCk7CiAgICB9CiAgICBfOwogIH0KCgoKICBmdW5jdGlvbiBhdXRob3Jpc2VOZXh0QWN0aW9uKCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNPd25lcihtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKHJlcXVpcmVBdXRob3Jpc2F0aW9uKTsKICAgIHJlcXVpcmUoIW5leHRBY3Rpb25Jc0F1dGhvcmlzZWQpOwogICAgbmV4dEFjdGlvbklzQXV0aG9yaXNlZCA9IHRydWU7CiAgICBhY3Rpb25BdXRob3Jpc2VkQnkgPSBtc2cuc2VuZGVyOwogIH0KCgoKICBmdW5jdGlvbiBjaGVja0FjdGlvbklzQXV0aG9yaXNlZEFuZFJlc2V0KCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNPd25lcihtc2cuc2VuZGVyKSk7CiAgICBib29sIGlzVmFsaWRBdXRob3Jpc2F0aW9uUmVxdWVzdCA9IChuZXh0QWN0aW9uSXNBdXRob3Jpc2VkICYmIGFjdGlvbkF1dGhvcmlzZWRCeSAhPSBtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUoaXNWYWxpZEF1dGhvcmlzYXRpb25SZXF1ZXN0KTsKICAgIG5leHRBY3Rpb25Jc0F1dGhvcmlzZWQgPSBmYWxzZTsKICB9CgoKCiAgZnVuY3Rpb24gc2V0UmVxdWlyZUF1dGhvcmlzYXRpb24oYm9vbCBfcmVxdWlyZUF1dGhvcmlzYXRpb24pIG9ubHlPd25lcnMgcHVibGljIHsKICAgIHJlcXVpcmVBdXRob3Jpc2F0aW9uID0gX3JlcXVpcmVBdXRob3Jpc2F0aW9uOwogIH0KICAvKiBFbmQgT3duZWQgQ29udHJhY3QgTWVtYmVycyAqLwoKCiAgLy8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4KICBib29sIHB1YmxpYyB0b2tlbkluaXRpYWxpc2VkID0gZmFsc2U7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIHVpbnQyNTYgcHVibGljIHNlbGxQcmljZTsKICBhZGRyZXNzIHB1YmxpYyBjdXJyZW50U2VsbGVyOwoKICAvLyBBcmUgdXNlcnMgY3VycmVudGx5IGFsbG93ZWQgdG8uLi4KICBib29sIHB1YmxpYyBhbGxvd1RyYW5zZmVycyA9IGZhbHNlOyAvLyB0cmFuc2ZlciB0aGVpciB0b2tlbnMKICBib29sIHB1YmxpYyBhbGxvd0J1cm5zID0gZmFsc2U7ICAgICAvLyBidXJuIHRoZWlyIHRva2VucwogIGJvb2wgcHVibGljIGFsbG93QnV5aW5nID0gZmFsc2U7ICAgIC8vIGJ1eSB0b2tlbnMKCiAgLy8gVGhpcyBjcmVhdGVzIGFuIGFycmF5IHdpdGguLi4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7ICAgIC8vIGFsbCBiYWxhbmNlcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGV0aGVyU3BlbnQ7ICAgLy8gaG93IG11Y2ggYW4gYWRkZWVzcyBoYXMgc3BlbnQKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50czsgIC8vIGZyb3plbiBhY2NvdW50cwogIGFkZHJlc3NbXSBpbnZlc3RvcnM7CiAgdWludDY0IHB1YmxpYyBpbnZlc3RvckNvdW50OwoKCgogIC8qKiogQmVnaW4gSUNPIFZhcmlhYmxlcyAqKiovCgogIC8vIFVuaXQgbGVuZ2h0cyBmb3Igd2VlaywgbW9udGggYW5kIHllYXIKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyB3ZWVrTGVuZ3RoID0gNjAgKiA2MCAqIDI0ICogNzsKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBtb250aExlbmd0aCA9IDI2Mjc4NTY7IC8vICg2MCAqIDYwICogMjQgKiAzMC40MTUpIEFzIHRvIG5vdCBoYXZlIHRvIHJlLWFkanVzdCBmb3IgZGlmZmVyZW50IG1vbnRoIGxlbmd0aHMKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyB5ZWFyTGVuZ3RoID0gNjAgKiA2MCAqIDI0ICogNyAqIDUyOwoKICB1aW50MjU2IHB1YmxpYyBpY29CZWdpbkRhdGU7CiAgdWludDI1NiBwdWJsaWMgaWNvRW5kRGF0ZTsKICBib29sIHB1YmxpYyBpY29QYXJhbWV0ZXJzU2V0ID0gZmFsc2U7CgogIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGRBdEljbyA9IDA7CiAgdWludDI1NiBwdWJsaWMgbWluaW11bVRva2VuVGhyZXNob2xkOwogIGJvb2wgcHVibGljIGV0aGVySGFzQmVlblJldHVybmVkVG9JbnZlc3RvcnMgPSBmYWxzZTsKICB1aW50MjU2IHB1YmxpYyBzb2Z0Q2FwOwogIHVpbnQyNTYgcHVibGljIHJ1blRpbWVBZnRlclNvZnRDYXBSZWFjaGVkOwogIHVpbnQyNTYgcHVibGljIGRhdGVTb2Z0Q2FwV2FzUmVhY2hlZCA9IDA7CgogIHVpbnQyNTYgcHVibGljIG1heEZ1bmRzVGhhdENhbkJlV2l0aGRyYXduQnlPd25lcnMgPSAwOwogIHVpbnQyNTYgcHVibGljIGZ1bmRzV2l0aGRyYXduQnlPd25lcnMgPSAwOwoKICB1aW50OCBpbW1lZGlhdGVBbGxvd2FuY2VQZXJjZW50YWdlOwogIHVpbnQ4IGZpcnN0WWVhckFsbG93YW5jZVBlcmNlbnRhZ2U7CiAgdWludDggc2Vjb25kWWVhckFsbG93YW5jZVBlcmNlbnRhZ2U7CgogIG1hcHBpbmcgKHVpbnQ4ID0+IHVpbnQ4KSBwdWJsaWMgd2Vla0JvbnVzZXM7IC8vIEJvbnVzIG9mIDIwJSBpcyBzdG9yZWQgYXMgMTIwLCAxMCUgYXMgMTEwIGV0Yy4KCgoKICBtb2RpZmllciBvbmx5V2hlbkljb1BhcmFtZXRlcnNBcmVTZXQgewogICAgcmVxdWlyZShpY29QYXJhbWV0ZXJzU2V0KTsKICAgIF87CiAgfQoKCgogIG1vZGlmaWVyIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZU5vdFNldCB7CiAgICByZXF1aXJlKCFpY29QYXJhbWV0ZXJzU2V0KTsKICAgIF87CiAgfQoKCgogIG1vZGlmaWVyIG9ubHlEdXJpbmdJY28gewogICAgcmVxdWlyZShpY29QYXJhbWV0ZXJzU2V0KTsKICAgIHVwZGF0ZUNvbnRyYWN0KCk7CiAgICByZXF1aXJlKGlzSWNvUnVubmluZygpKTsKICAgIF87CiAgfQogIC8qKiogRW5kIElDTyBWYXJpYWJsZXMgKioqLwoKCgogIC8qKiogQmVnaW4gSUNPIFNldHRlcnMgKioqLwogIGZ1bmN0aW9uIHNldEljb1BhcmFtZXRlcnNTZXQoYm9vbCBzZXQpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZU5vdFNldCBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBpY29QYXJhbWV0ZXJzU2V0ID0gc2V0OwogIH0KCgoKICBmdW5jdGlvbiBzZXRJY29CZWdpbkRhdGUodWludDI1NiBiZWdpbkRhdGUpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZU5vdFNldCBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBpY29CZWdpbkRhdGUgPSBiZWdpbkRhdGU7CiAgfQoKCgogIGZ1bmN0aW9uIHNldEljb0VuZERhdGUgKHVpbnQyNTYgZW5kRGF0ZSkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlTm90U2V0IG9ubHlPd25lcnMgcHVibGljIHsKICAgIGljb0VuZERhdGUgPSBlbmREYXRlOwogIH0KCgoKICBmdW5jdGlvbiBzZXRTb2Z0Q2FwICh1aW50MjU2IGNhcCkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlTm90U2V0IG9ubHlPd25lcnMgcHVibGljIHsKICAgIHNvZnRDYXAgPSBjYXA7CiAgfQoKCgogIGZ1bmN0aW9uIHNldFJ1blRpbWVBZnRlclNvZnRDYXBSZWFjaGVkICh1aW50MjU2IHJ1blRpbWUpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZU5vdFNldCBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBydW5UaW1lQWZ0ZXJTb2Z0Q2FwUmVhY2hlZCA9IHJ1blRpbWU7CiAgfQoKCgogIGZ1bmN0aW9uIHNldEltbWVkaWF0ZUFsbG93YW5jZVBlcmNlbnRhZ2UodWludDggYWxsb3dhbmNlUGVyY2VudGFnZSkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlTm90U2V0IG9ubHlPd25lcnMgcHVibGljIHsKICAgIGltbWVkaWF0ZUFsbG93YW5jZVBlcmNlbnRhZ2UgPSBhbGxvd2FuY2VQZXJjZW50YWdlOwogIH0KCgoKICBmdW5jdGlvbiBzZXRGaXJzdFllYXJBbGxvd2FuY2VQZXJjZW50YWdlKHVpbnQ4IGFsbG93YW5jZVBlcmNlbnRhZ2UpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZU5vdFNldCBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBmaXJzdFllYXJBbGxvd2FuY2VQZXJjZW50YWdlID0gYWxsb3dhbmNlUGVyY2VudGFnZTsKICB9CgoKCiAgZnVuY3Rpb24gc2V0U2Vjb25kWWVhckFsbG93YW5jZVBlcmNlbnRhZ2UodWludDggYWxsb3dhbmNlUGVyY2VudGFnZSkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlTm90U2V0IG9ubHlPd25lcnMgcHVibGljIHsKICAgIHNlY29uZFllYXJBbGxvd2FuY2VQZXJjZW50YWdlID0gYWxsb3dhbmNlUGVyY2VudGFnZTsKICB9CgoKCiAgZnVuY3Rpb24gaW5pdGlhbGlzZVRva2VuKCkgcHVibGljIHsKICAgIHJlcXVpcmUoIXRva2VuSW5pdGlhbGlzZWQpOwogICAgbmFtZSA9ICJCYXJhVG9rZW4iOwogICAgc3ltYm9sID0gIkJSVCI7CiAgICB0b3RhbFN1cHBseSA9IDE2MDAwMDAwMCAqIDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpOwogICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7CiAgICBjdXJyZW50U2VsbGVyID0gbXNnLnNlbmRlcjsKICAgIG93bmVyc1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgICBvd25lcnNbMHgxNDM0ZTAyOGIxMkQxOTZBY0JFNTMwNEE5NGQwYTVGODE2ZWI1ZDU1XSA9IHRydWU7CiAgICB0b2tlbkluaXRpYWxpc2VkID0gdHJ1ZTsKICB9CgoKCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHB1YmxpYyB7CiAgICBidXlUb2tlbnMoKTsKICB9CgoKCiAgZnVuY3Rpb24gdXBkYXRlQ29udHJhY3QoKSBvbmx5V2hlbkljb1BhcmFtZXRlcnNBcmVTZXQgcHVibGljIHsKICAgIGlmIChoYXNTb2Z0Q2FwQmVlblJlYWNoZWQoKSAmJiBkYXRlU29mdENhcFdhc1JlYWNoZWQgPT0gMCkgewogICAgICBkYXRlU29mdENhcFdhc1JlYWNoZWQgPSBub3c7CiAgICAgIGJvb2wgcmVhY2hpbmdTb2Z0Q2FwV2lsbEV4dGVuZEljbyA9IChkYXRlU29mdENhcFdhc1JlYWNoZWQgKyBydW5UaW1lQWZ0ZXJTb2Z0Q2FwUmVhY2hlZCA+IGljb0VuZERhdGUpOwogICAgICBpZiAoIXJlYWNoaW5nU29mdENhcFdpbGxFeHRlbmRJY28pCiAgICAgICAgaWNvRW5kRGF0ZSA9IGRhdGVTb2Z0Q2FwV2FzUmVhY2hlZCArIHJ1blRpbWVBZnRlclNvZnRDYXBSZWFjaGVkOwogICAgfQogICAgaWYgKCFpc0JlZm9yZUljbygpKQogICAgICB1cGRhdGVPd25lcnNXaXRoZHJhd0FsbG93YW5jZSgpOwogIH0KCgoKICBmdW5jdGlvbiBpc0JlZm9yZUljbygpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZVNldCBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiAobm93IDw9IGljb0JlZ2luRGF0ZSk7CiAgfQoKCgogIGZ1bmN0aW9uIGlzSWNvUnVubmluZygpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZVNldCBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgcmVhY2hpbmdTb2Z0Q2FwV2lsbEV4dGVuZEljbyA9IChkYXRlU29mdENhcFdhc1JlYWNoZWQgKyBydW5UaW1lQWZ0ZXJTb2Z0Q2FwUmVhY2hlZCkgPiBpY29FbmREYXRlOwogICAgYm9vbCBhZnRlckJlZ2luRGF0ZSA9IG5vdyA+IGljb0JlZ2luRGF0ZTsKICAgIGJvb2wgYmVmb3JlRW5kRGF0ZSA9IG5vdyA8IGljb0VuZERhdGU7CiAgICBpZiAoaGFzU29mdENhcEJlZW5SZWFjaGVkKCkgJiYgIXJlYWNoaW5nU29mdENhcFdpbGxFeHRlbmRJY28pCiAgICAgIGJlZm9yZUVuZERhdGUgPSBub3cgPCAoZGF0ZVNvZnRDYXBXYXNSZWFjaGVkICsgcnVuVGltZUFmdGVyU29mdENhcFJlYWNoZWQpOwogICAgYm9vbCBydW5uaW5nID0gYWZ0ZXJCZWdpbkRhdGUgJiYgYmVmb3JlRW5kRGF0ZTsKICAgIHJldHVybiBydW5uaW5nOwogIH0KCgoKICBmdW5jdGlvbiBpc0FmdGVySWNvKCkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlU2V0IGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIChub3cgPiBpY29FbmREYXRlKTsKICB9CgoKCgogIGZ1bmN0aW9uIGhhc1NvZnRDYXBCZWVuUmVhY2hlZCgpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZVNldCBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiAodG9rZW5zU29sZEF0SWNvID49IHNvZnRDYXAgJiYgc29mdENhcCAhPSAwKTsKICB9CgoKCiAgLy8gSW4gdGhlIGZpcnN0IHdlZWsgb2YgdGhlIElDTywgdGhlcmUgd2lsbCBiZSBhIGJvbnVzLCBzYXkgMjAlLCB0aGVuIHRoZSBzZWNvbmQgd2VlayAxMCUsCiAgLy8gb2YgdG9rZW5zLiBUaGlzIHJldHJpZXZlcyB0aGF0IGJvbnVzLiAyMCUgaXMgc3RvcmVkIGFzIDEyMCwgMTAlIGFzIDExMCwgZXRjLgogIGZ1bmN0aW9uIGdldFdlZWtCb251cyh1aW50MjU2IGFtb3VudFB1cmNoYXNlZCkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlU2V0IGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiB3ZWVrQm9udXMgPSB1aW50MjU2KHdlZWtCb251c2VzW2dldFdlZWtzUGFzc2VkU2luY2VTdGFydE9mSWNvKCldKTsKICAgIGlmICh3ZWVrQm9udXMgIT0gMCkKICAgICAgcmV0dXJuIChhbW91bnRQdXJjaGFzZWQgKiB3ZWVrQm9udXMpIC8gMTAwOwogICAgcmV0dXJuIGFtb3VudFB1cmNoYXNlZDsKICB9CgoKCiAgZnVuY3Rpb24gZ2V0VGltZVNpbmNlRW5kT2ZJY28oKSBvbmx5V2hlbkljb1BhcmFtZXRlcnNBcmVTZXQgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXF1aXJlKG5vdyA+IGljb0VuZERhdGUpOwogICAgdWludDI1NiB0aW1lU2luY2VFbmRPZkljbyA9IG5vdyAtIGljb0VuZERhdGU7CiAgICByZXR1cm4gdGltZVNpbmNlRW5kT2ZJY287CiAgfQoKCgogIGZ1bmN0aW9uIGdldFdlZWtzUGFzc2VkU2luY2VTdGFydE9mSWNvKCkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlU2V0IGludGVybmFsIHZpZXcgcmV0dXJucyAodWludDgpIHsKICAgIHJlcXVpcmUoIWlzQmVmb3JlSWNvKCkpOwogICAgdWludDI1NiB0aW1lU2luY2VJY28gPSBub3cgLSBpY29CZWdpbkRhdGU7CiAgICB1aW50OCB3ZWVrc1Bhc3NlZFNpbmNlSWNvID0gdWludDgodGltZVNpbmNlSWNvIC8gd2Vla0xlbmd0aCk7CiAgICByZXR1cm4gd2Vla3NQYXNzZWRTaW5jZUljbzsKICB9CgoKCiAgLy8gVXBkYXRlIGhvdyBtdWNoIHRoZSBvd25lcnMgY2FuIHdpdGhkcmF3IGJhc2VkIG9uIGhvdyBtdWNoIHRpbWUgaGFzIHBhc3NlZAogIC8vIHNpbmNlIHRoZSBlbmQgb2YgdGhlIElDTwogIGZ1bmN0aW9uIHVwZGF0ZU93bmVyc1dpdGhkcmF3QWxsb3dhbmNlKCkgb25seVdoZW5JY29QYXJhbWV0ZXJzQXJlU2V0IGludGVybmFsIHsKICAgIGlmIChpc0FmdGVySWNvKCkpIHsKICAgICAgdWludDI1NiB0b3RhbEZ1bmRzID0gdGhpcy5iYWxhbmNlOwogICAgICBtYXhGdW5kc1RoYXRDYW5CZVdpdGhkcmF3bkJ5T3duZXJzID0gMDsKICAgICAgdWludDI1NiBpbW1lZGlhdGVBbGxvd2FuY2UgPSAodG90YWxGdW5kcyAqIGltbWVkaWF0ZUFsbG93YW5jZVBlcmNlbnRhZ2UpIC8gMTAwOwogICAgICBib29sIHNlY29uZFllYXIgPSBub3cgLSBpY29FbmREYXRlID49IHllYXJMZW5ndGg7CiAgICAgIHVpbnQ4IG1vbnRoc1Bhc3NlZFNpbmNlSWNvID0gZ2V0TW9udGhzUGFzc2VkRW5kT2ZTaW5jZUljbygpOwogICAgICBpZiAoc2Vjb25kWWVhcikgewogICAgICAgIHVpbnQyNTYgbW9udGhzUGFzc2VkSW5TZWNvbmRZZWFyID0gbW9udGhzUGFzc2VkU2luY2VJY28gLSAxMjsKICAgICAgICAvLyAobW9udGhzUGFzc2VkIC8gMTIpICogKGFsbG93YW5jZVBlcmNlbnRhZ2UgLyAxMDApIGkuZS4gKG1vbnRoc1Bhc3NlZCAqIGFsbG93YW5jZVBlcmNlbnRhZ2UgLyAxMjAwKQogICAgICAgIC8vIGFsbCBtdWx0aXBsaWVkIGJ5IHRoZSB0b3RhbEZ1bmRzIGF2YWlsYWJsZSB0byBiZSB3aXRoZHJ3YW4KICAgICAgICAvLyBUaGV5J3JlIG11bHRpcGxpZWQgaW4gb25lIGxpbmUgdG8gZW5zdXJlIG5vdCBsb3NpbmcgYW55IGluZm9ybWF0aW9uIHNpbmNlIHdlIGRvbid0IGhhdmUgZmxvYXRzCiAgICAgICAgLy8gVGhlIG1pbmltdW0gYSBwZXJzb24gY2FuIGJ1eSBpcyAxLzEwXjEyIHRva2VucyBhbmQgd2UgaGF2ZSAxOCBkZWNpbWFscywgbWVhbmluZyBhbHdheXMgYXQgbGVhc3QKICAgICAgICAvLyA2IGRlY2ltYWxzIHRvIGhvbGQgaW5mb3JtYXRpb24gZG9uZSBpbiBtdWx0aXBsaWNhdGlvbi9kaXZpc2lvbgogICAgICAgIHVpbnQyNTYgc2Vjb25kWWVhckFsbG93YW5jZSA9ICgodG90YWxGdW5kcyAqIHNlY29uZFllYXJBbGxvd2FuY2VQZXJjZW50YWdlICogbW9udGhzUGFzc2VkSW5TZWNvbmRZZWFyKSAvIDEyMDApOwogICAgICB9CiAgICAgIHVpbnQ4IG1vbnRoc1Bhc3NlZEluRmlyc3RZZWFyID0gbW9udGhzUGFzc2VkU2luY2VJY287CiAgICAgIGlmIChzZWNvbmRZZWFyKQogICAgICAgIG1vbnRoc1Bhc3NlZEluRmlyc3RZZWFyID0gMTI7CiAgICAgIHVpbnQyNTYgZmlyc3RZZWFyQWxsb3dhbmNlID0gKCh0b3RhbEZ1bmRzICogZmlyc3RZZWFyQWxsb3dhbmNlUGVyY2VudGFnZSAqIG1vbnRoc1Bhc3NlZEluRmlyc3RZZWFyKSAvIDEyMDApOwogICAgICBtYXhGdW5kc1RoYXRDYW5CZVdpdGhkcmF3bkJ5T3duZXJzID0gaW1tZWRpYXRlQWxsb3dhbmNlICsgZmlyc3RZZWFyQWxsb3dhbmNlICsgc2Vjb25kWWVhckFsbG93YW5jZTsKICAgIH0KICB9CgoKCiAgZnVuY3Rpb24gZ2V0TW9udGhzUGFzc2VkRW5kT2ZTaW5jZUljbygpIG9ubHlXaGVuSWNvUGFyYW1ldGVyc0FyZVNldCBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQ4KSB7CiAgICB1aW50MjU2IHRpbWVQYXNzZWRTaW5jZUljbyA9IG5vdyAtIGljb0VuZERhdGU7CiAgICB1aW50OCBtb250aHNQYXNzZWRTaW5jZUljbyA9IHVpbnQ4KHRpbWVQYXNzZWRTaW5jZUljbyAvIHdlZWtMZW5ndGgpOwogICAgcmV0dXJuIG1vbnRoc1Bhc3NlZFNpbmNlSWNvICsgMTsKICB9CgoKCiAgLy8gQ2hlY2sgaWYgdGhlIGFtb3VudCB0aGUgb3duZXJzIGFyZSBhdHRlbXB0aW5nIHRvIHdpdGhkcmF3IGlzIHdpdGhpbiB0aGVpciBjdXJyZW50IGFsbG93YW5jZQogIGZ1bmN0aW9uIGFtb3VudElzV2l0aGluT3duZXJzQWxsb3dhbmNlKHVpbnQyNTYgYW1vdW50VG9XaXRoZHJhdykgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICBpZiAobm93IC0gaWNvRW5kRGF0ZSA+PSB5ZWFyTGVuZ3RoICogMikKICAgICAgcmV0dXJuIHRydWU7CiAgICB1aW50MjU2IHRvdGFsRnVuZHNXaXRoZHJhd25BZnRlclRoaXNUcmFuc2FjdGlvbiA9IGZ1bmRzV2l0aGRyYXduQnlPd25lcnMgKyBhbW91bnRUb1dpdGhkcmF3OwogICAgYm9vbCB3aXRoaW5BbGxvd2FuY2UgPSB0b3RhbEZ1bmRzV2l0aGRyYXduQWZ0ZXJUaGlzVHJhbnNhY3Rpb24gPD0gbWF4RnVuZHNUaGF0Q2FuQmVXaXRoZHJhd25CeU93bmVyczsKICAgIHJldHVybiB3aXRoaW5BbGxvd2FuY2U7CiAgfQoKCgogIGZ1bmN0aW9uIGJ1eVRva2VucygpIG9ubHlEdXJpbmdJY28gcGF5YWJsZSBwdWJsaWMgewogICAgcmVxdWlyZShhbGxvd0J1eWluZyk7CiAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50c1ttc2cuc2VuZGVyXSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgdWludDI1NiBudW1iZXJPZlRva2Vuc1B1cmNoYXNlZCA9IG1zZy52YWx1ZSAvIHNlbGxQcmljZTsKICAgIHJlcXVpcmUobnVtYmVyT2ZUb2tlbnNQdXJjaGFzZWQgPj0gMTAgKiogNik7CiAgICBudW1iZXJPZlRva2Vuc1B1cmNoYXNlZCA9IGdldFdlZWtCb251cyhudW1iZXJPZlRva2Vuc1B1cmNoYXNlZCk7CiAgICBfdHJhbnNmZXIoY3VycmVudFNlbGxlciwgbXNnLnNlbmRlciwgbnVtYmVyT2ZUb2tlbnNQdXJjaGFzZWQpOwogICAgdG9rZW5zU29sZEF0SWNvICs9IG51bWJlck9mVG9rZW5zUHVyY2hhc2VkOwogICAgaWYgKCEoZXRoZXJTcGVudFttc2cuc2VuZGVyXSA+IDApKSB7CiAgICAgIGludmVzdG9yc1tpbnZlc3RvckNvdW50XSA9IG1zZy5zZW5kZXI7CiAgICAgIGludmVzdG9yQ291bnQrKzsKICAgIH0KICAgIGV0aGVyU3BlbnRbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOwogIH0KCgoKICAvKiBUaGVzZSBnZW5lcmF0ZSBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8KICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogIGV2ZW50IE5ld1NlbGxQcmljZSh1aW50MjU2IF9zZWxsUHJpY2UpOwoKCgogIGZ1bmN0aW9uIHNldFRva2VuTmFtZShzdHJpbmcgdG9rZW5OYW1lKSBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBuYW1lID0gdG9rZW5OYW1lOwogIH0KCgoKICBmdW5jdGlvbiBzZXRUb2tlblN5bWJvbChzdHJpbmcgdG9rZW5TeW1ib2wpIG9ubHlPd25lcnMgcHVibGljIHsKICAgIHN5bWJvbCA9IHRva2VuU3ltYm9sOwogIH0KCgoKICBmdW5jdGlvbiBzZXRBbGxvd1RyYW5zZmVycyhib29sIGFsbG93KSBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICBhbGxvd1RyYW5zZmVycyA9IGFsbG93OwogIH0KCgoKICBmdW5jdGlvbiBzZXRBbGxvd0J1cm5zKGJvb2wgYWxsb3cpIG9ubHlPd25lcnMgcHVibGljIHsKICAgIGFsbG93QnVybnMgPSBhbGxvdzsKICB9CgoKCiAgZnVuY3Rpb24gc2V0QWxsb3dCdXlpbmcoYm9vbCBhbGxvdykgb25seU93bmVycyBwdWJsaWMgewogICAgYWxsb3dCdXlpbmcgPSBhbGxvdzsKICB9CgoKCiAgZnVuY3Rpb24gc2V0U2VsbFByaWNlKHVpbnQyNTYgX3NlbGxQcmljZSkgb25seU93bmVycyBwdWJsaWMgewogICAgc2VsbFByaWNlID0gX3NlbGxQcmljZTsKICAgIE5ld1NlbGxQcmljZShfc2VsbFByaWNlKTsKICB9CgoKCiAgZnVuY3Rpb24gc2V0Q3VycmVudFNlbGxlcihhZGRyZXNzIG5ld1NlbGxlcikgb25seU93bmVycyBwdWJsaWMgewogICAgY3VycmVudFNlbGxlciA9IG5ld1NlbGxlcjsKICB9CgoKCiAgZnVuY3Rpb24gb3duZXJzVHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVycyBwdWJsaWMgewogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgfQoKCgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgIHJlcXVpcmUoYWxsb3dUcmFuc2ZlcnMgJiYgIWlzT3duZXIobXNnLnNlbmRlcikpOwogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgoKCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgcmVxdWlyZSAoX3RvICE9IDB4MCk7CiAgICByZXF1aXJlIChiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7CiAgICByZXF1aXJlIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsKICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRzW19mcm9tXSk7CiAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50c1tfdG9dKTsKICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOwogICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgoKCiAgZnVuY3Rpb24gbWludFRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IG1pbnRlZEFtb3VudCkgb25seU93bmVycyBwdWJsaWMgewogICAgYmFsYW5jZU9mW3RhcmdldF0gKz0gbWludGVkQW1vdW50OwogICAgdG90YWxTdXBwbHkgKz0gbWludGVkQW1vdW50OwogICAgVHJhbnNmZXIoMCwgdGhpcywgbWludGVkQW1vdW50KTsKICAgIFRyYW5zZmVyKHRoaXMsIHRhcmdldCwgbWludGVkQW1vdW50KTsKICB9CgoKCiAgZnVuY3Rpb24gYnVybih1aW50MjU2IGFtb3VudCkgcHVibGljIHsKICAgIHJlcXVpcmUoYWxsb3dCdXJucyAmJiAhaXNPd25lcihtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBhbW91bnQpOwogICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IGFtb3VudDsKICAgIHRvdGFsU3VwcGx5IC09IGFtb3VudDsKICAgIEJ1cm4obXNnLnNlbmRlciwgYW1vdW50KTsKICB9CgoKCiAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBmcm9tLCB1aW50MjU2IGFtb3VudCkgb25seU93bmVycyBwdWJsaWMgewogICAgcmVxdWlyZSAoYmFsYW5jZU9mW2Zyb21dID49IGFtb3VudCk7CiAgICBiYWxhbmNlT2ZbZnJvbV0gLT0gYW1vdW50OwogICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgQnVybihmcm9tLCBhbW91bnQpOwogIH0KCgoKICBmdW5jdGlvbiBmcmVlemVBY2NvdW50KGFkZHJlc3MgdGFyZ2V0LCBib29sIGZyZWV6ZSkgb25seU93bmVycyBwdWJsaWMgewogICAgZnJvemVuQWNjb3VudHNbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgIEZyb3plbkZ1bmRzKHRhcmdldCwgZnJlZXplKTsKICB9CgoKCiAgZnVuY3Rpb24gYWRkT3duZXIoYWRkcmVzcyBvd25lcikgb25seU93bmVycyBwdWJsaWMgewogICAgb3duZXJzW293bmVyXSA9IHRydWU7CiAgfQoKCgogIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3Mgb3duZXIpIG9ubHlPd25lcnMgcHVibGljIHsKICAgIG93bmVyc1tvd25lcl0gPSBmYWxzZTsKICB9CgoKCiAgZnVuY3Rpb24gc2VuZENvbnRyYWN0RnVuZHNUb0FkZHJlc3ModWludDI1NiBhbW91bnQsIGFkZHJlc3MgcmVjaXBpZW50KSBvbmx5T3duZXJzIHB1YmxpYyB7CiAgICByZXF1aXJlKGljb1BhcmFtZXRlcnNTZXQpOwogICAgcmVxdWlyZShpc0FmdGVySWNvKCkpOwogICAgcmVxdWlyZSh0b2tlbnNTb2xkQXRJY28gPj0gbWluaW11bVRva2VuVGhyZXNob2xkKTsKICAgIHJlcXVpcmUoYW1vdW50IDw9IHRoaXMuYmFsYW5jZSk7CiAgICB1cGRhdGVDb250cmFjdCgpOwogICAgcmVxdWlyZShhbW91bnRJc1dpdGhpbk93bmVyc0FsbG93YW5jZShhbW91bnQpKTsKICAgIHJlY2lwaWVudC50cmFuc2ZlcihhbW91bnQpOwogIH0KCgoKICBmdW5jdGlvbiByZXR1cm5FdGhlclRvSW52ZXN0b3JzKCkgb25seU93bmVycyBvbmx5V2hlbkljb1BhcmFtZXRlcnNBcmVTZXQgcHVibGljIHsKICAgIHJlcXVpcmUoaXNBZnRlckljbygpKTsKICAgIHJlcXVpcmUoIWV0aGVySGFzQmVlblJldHVybmVkVG9JbnZlc3RvcnMpOwogICAgcmVxdWlyZSh0b2tlbnNTb2xkQXRJY28gPCBtaW5pbXVtVG9rZW5UaHJlc2hvbGQpOwogICAgZm9yICh1aW50NjQgaW52ZXN0b3JOdW1iZXI7IGludmVzdG9yTnVtYmVyIDwgaW52ZXN0b3JDb3VudDsgaW52ZXN0b3JOdW1iZXIrKykgewogICAgICBhZGRyZXNzIGludmVzdG9yID0gaW52ZXN0b3JzW2ludmVzdG9yTnVtYmVyXTsKICAgICAgdWludDI1NiBhbW91bnRUb1NlbmQgPSBldGhlclNwZW50W2ludmVzdG9yXTsKICAgICAgaW52ZXN0b3IudHJhbnNmZXIoYW1vdW50VG9TZW5kKTsKICAgIH0KICAgIGV0aGVySGFzQmVlblJldHVybmVkVG9JbnZlc3RvcnMgPSB0cnVlOwogIH0KCgoKICBmdW5jdGlvbiBnZXRDb250cmFjdEJhbGFuY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogIH0KCgoKCn0='.
	

]
