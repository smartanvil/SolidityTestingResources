Class {
	#name : #SRT355aca372adbc5e2930d4620f2bbb425561f8598,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT355aca372adbc5e2930d4620f2bbb425561f8598 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7Cgpjb250cmFjdCBPd25hYmxlIAp7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwogICAgCiAgICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIAogICAgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSAKICAgIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lciBwdWJsaWMgCiAgICB7CiAgICAgICAgcmVxdWlyZShfb3duZXIgIT0gMCk7CiAgICAgICAgbmV3T3duZXIgPSBfb3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1Pd25lcigpIHB1YmxpYyAKICAgIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgZGVsZXRlIG5ld093bmVyOwogICAgfQp9CgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCAKewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWM7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZnVuY3Rpb24gZ2V0RGVjaW1hbHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50OCk7CiAgICBmdW5jdGlvbiBnZXRUb3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgc3VwcGx5KTsKfQoKCgpjb250cmFjdCBJenViclRva2VuIGlzIE93bmFibGUsIEVSQzIwLCBTYWZlTWF0aCAKewogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgc3RhbmRhcmQgICAgPSAnVG9rZW4gMC4xJzsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IG5hbWUgICAgICAgID0gJ0l6dWJyJzsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IHN5bWJvbCAgICAgID0gIklaUiI7CiAgICB1aW50OCAgIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyAgICA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5Lb2VmID0gMTAwMDAwMDAwMDAwMDAwMDAwMDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dlZDsKCiAgICB1aW50ICAgICAgIHByaXZhdGUgY29uc3RhbnQgZ2FzUHJpY2UgPSAzMDAwMDAwOwoKICAgIHVpbnQyNTYgICAgcHVibGljIGV0aGVyUHJpY2U7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBtaW5pbWFsU3VjY2Vzc1Rva2VuczsKICAgIHVpbnQyNTYgICAgcHVibGljIGNvbGxlY3RlZFRva2VuczsKCiAgICBlbnVtICAgIFN0YXRlIHsgRGlzYWJsZWQsIFByZUlDTywgQ29tcGxldGVQcmVJQ08sIENyb3dkc2FsZSwgRW5hYmxlZCwgTWlncmF0aW9uIH0KICAgIGV2ZW50ICAgTmV3U3RhdGUoU3RhdGUgc3RhdGUpOwoKICAgIFN0YXRlICAgICAgcHVibGljIHN0YXRlID0gU3RhdGUuRGlzYWJsZWQ7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBjcm93ZHNhbGVTdGFydFRpbWU7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBjcm93ZHNhbGVGaW5pc2hUaW1lOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgIHB1YmxpYyBpbnZlc3RvcnM7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpICBwdWJsaWMgaW52ZXN0b3JzSXRlcjsKICAgIHVpbnQyNTYgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBudW1iZXJPZkludmVzdG9yczsKCiAgICBtb2RpZmllciBvbmx5VG9rZW5Ib2xkZXJzIAogICAgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gIT0gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjawogICAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgCiAgICB7CiAgICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgZW5hYmxlZFN0YXRlIAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuRW5hYmxlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBlbmFibGVkT3JNaWdyYXRpb25TdGF0ZSAKICAgIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkVuYWJsZWQgfHwgc3RhdGUgPT0gU3RhdGUuTWlncmF0aW9uKTsKICAgICAgICBfOwogICAgfQoKCgogICAgZnVuY3Rpb24gZ2V0RGVjaW1hbHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50OCkKICAgIHsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgCiAgICB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW3dob107CiAgICB9CgogICAgZnVuY3Rpb24gaW52ZXN0b3JzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgCiAgICB7CiAgICAgICAgcmV0dXJuIG51bWJlck9mSW52ZXN0b3JzOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgICAgICBwdWJsaWMgZW5hYmxlZFN0YXRlIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIAogICAgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzdWIoIGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUgKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYWRkKCBiYWxhbmNlc1tfdG9dLCBfdmFsdWUgKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgICAgIHB1YmxpYyBlbmFibGVkU3RhdGUgb25seVBheWxvYWRTaXplKDMgKiAzMikgCiAgICB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHN1YiggYmFsYW5jZXNbX2Zyb21dLCBfdmFsdWUgKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYWRkKCBiYWxhbmNlc1tfdG9dLCBfdmFsdWUgKTsKCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzdWIoIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUgKTsKCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgZW5hYmxlZFN0YXRlIAogICAgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCBlbmFibGVkU3RhdGUKICAgICAgICByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgoKICAgIAogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUKICAgIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByZUlDTyB8fCBzdGF0ZSA9PSBTdGF0ZS5Dcm93ZHNhbGUpOwogICAgICAgIHJlcXVpcmUobm93IDwgY3Jvd2RzYWxlRmluaXNoVGltZSk7CgogICAgICAgIHVpbnQyNTYgdmFsdWVXZWkgPSBtc2cudmFsdWU7CgogICAgICAgIHVpbnQyNTYgcHJpY2UgPSBjdXJyZW50UHJpY2UoKTsKCiAgICAgICAgdWludDI1NiB2YWx1ZVRva2VucyA9IGRpdiggbXVsKCB2YWx1ZVdlaSwgcHJpY2UgKSwgMSBldGhlcik7CgogICAgICAgIGlmKCB2YWx1ZVRva2VucyA+IDMzMzMzKnRva2VuS29lZiApIC8vIDUgQlRDCiAgICAgICAgewogICAgICAgICAgICBwcmljZSA9IHByaWNlICogMTEyIC8gMTAwOwogICAgICAgICAgICB2YWx1ZVRva2VucyA9IG11bCggdmFsdWVXZWksIHByaWNlICk7CiAgICAgICAgfQoKICAgICAgICByZXF1aXJlKHZhbHVlVG9rZW5zID4gMTAqdG9rZW5Lb2VmKTsKCgogICAgICAgIGNvbGxlY3RlZFRva2VucyA9IGFkZCggY29sbGVjdGVkVG9rZW5zLCB2YWx1ZVRva2VucyApOwogICAgICAgICAgICAKICAgICAgICBpZihtc2cuZGF0YS5sZW5ndGggPT0gMjApIAogICAgICAgIHsKICAgICAgICAgICAgYWRkcmVzcyByZWZlcmVyID0gYnl0ZXNUb0FkZHJlc3MoYnl0ZXMobXNnLmRhdGEpKTsKCiAgICAgICAgICAgIHJlcXVpcmUocmVmZXJlciAhPSBtc2cuc2VuZGVyKTsKCiAgICAgICAgICAgIG1pbnRUb2tlbnNXaXRoUmVmZXJhbChtc2cuc2VuZGVyLCByZWZlcmVyLCB2YWx1ZVRva2Vucyk7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIG1pbnRUb2tlbnMobXNnLnNlbmRlciwgdmFsdWVUb2tlbnMpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBieXRlc1RvQWRkcmVzcyhieXRlcyBzb3VyY2UpIGludGVybmFsIHB1cmUgcmV0dXJucyhhZGRyZXNzKSAKICAgIHsKICAgICAgICB1aW50IHJlc3VsdDsKICAgICAgICB1aW50IG11bCA9IDE7CgogICAgICAgIGZvcih1aW50IGkgPSAyMDsgaSA+IDA7IGktLSkgCiAgICAgICAgewogICAgICAgICAgICByZXN1bHQgKz0gdWludDgoc291cmNlW2ktMV0pKm11bDsKICAgICAgICAgICAgbXVsID0gbXVsKjI1NjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhZGRyZXNzKHJlc3VsdCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsU3VwcGx5OwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbnMoYWRkcmVzcyBfd2hvLCB1aW50MjU2IF92YWx1ZVRva2VucykgcHVibGljIG9ubHlPd25lciAKICAgIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlByZUlDTyB8fCBzdGF0ZSA9PSBTdGF0ZS5Dcm93ZHNhbGUpOwogICAgICAgIHJlcXVpcmUobm93IDwgY3Jvd2RzYWxlRmluaXNoVGltZSk7CgogICAgICAgIHVpbnQyNTYgYm9udXMgPSBjdXJyZW50Qm9udXMoKTsKICAgICAgICB1aW50MjU2IHRva2VucyA9IF92YWx1ZVRva2VucyAqICgxMDAgKyBib251cykgLyAxMDA7CgogICAgICAgIGNvbGxlY3RlZFRva2VucyA9IGFkZCggY29sbGVjdGVkVG9rZW5zLCB0b2tlbnMgKTsKCiAgICAgICAgbWludFRva2Vucyhfd2hvLCB0b2tlbnMpOwogICAgfQoKCiAgICBmdW5jdGlvbiBib251c0ZvckRhdGUodWludCBkYXRlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgCiAgICB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08gfHwgc3RhdGUgPT0gU3RhdGUuQ3Jvd2RzYWxlKTsKCiAgICAgICAgdWludCBuZGF5ID0gKGRhdGUgLSBjcm93ZHNhbGVTdGFydFRpbWUpIC8gKDEgZGF5cyk7CgogICAgICAgIHVpbnQyNTYgYm9udXMgPSAwOwoKICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJlSUNPKSAKICAgICAgICB7CiAgICAgICAgICAgIGlmKCBuZGF5IDwgNyoxICkgYm9udXMgPSAxMDA7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgaWYoIG5kYXkgPCA3KjIgKSBib251cyA9IDgwOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmKCBuZGF5IDwgNyozICkgYm9udXMgPSA3MDsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICBpZiggbmRheSA8IDcqNCApIGJvbnVzID0gNjA7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgaWYoIG5kYXkgPCA3KjUgKSBib251cyA9IDUwOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSkgCiAgICAgICAgewogICAgICAgICAgICBpZiggbmRheSA8IDEgKSBib251cyA9IDIwOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmKCBuZGF5IDwgNCApIGJvbnVzID0gMTU7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgaWYoIG5kYXkgPCA4ICkgYm9udXMgPSAxMDsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICBpZiggbmRheSA8IDEyICkgYm9udXMgPSA1OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGJvbnVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGN1cnJlbnRCb251cygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSAKICAgIHsKICAgICAgICByZXR1cm4gYm9udXNGb3JEYXRlKG5vdyk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIHByaWNlRm9yRGF0ZSh1aW50IGRhdGUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSAKICAgIHsKICAgICAgICB1aW50MjU2IGJvbnVzID0gYm9udXNGb3JEYXRlKGRhdGUpOwoKICAgICAgICByZXR1cm4gZXRoZXJQcmljZSAqICgxMDAgKyBib251cykgLyAxMDA7CiAgICB9CgogICAgZnVuY3Rpb24gY3VycmVudFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIAogICAgewogICAgICAgIHJldHVybiBwcmljZUZvckRhdGUobm93KTsKICAgIH0KCgogICAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF93aG8sIHVpbnQyNTYgX3Rva2VucykgaW50ZXJuYWwgCiAgICB7CiAgICAgICAgdWludDI1NiBpbnYgPSBpbnZlc3RvcnNbX3dob107CgogICAgICAgIGlmIChpbnYgPT0gMCkgLy8gbmV3IGludmVzdG9yCiAgICAgICAgewogICAgICAgICAgICBpbnZlc3RvcnNJdGVyW251bWJlck9mSW52ZXN0b3JzKytdID0gX3dobzsKICAgICAgICB9CgogICAgICAgIGludiA9IGFkZCggaW52LCBfdG9rZW5zICk7CiAgICAgICAgYmFsYW5jZXNbX3dob10gPSBhZGQoIGJhbGFuY2VzW193aG9dLCBfdG9rZW5zICk7CgogICAgICAgIFRyYW5zZmVyKHRoaXMsIF93aG8sIF90b2tlbnMpOwoKICAgICAgICB0b3RhbFN1cHBseSA9IGFkZCggdG90YWxTdXBwbHksIF90b2tlbnMgKTsKICAgIH0KCgogICAgZnVuY3Rpb24gbWludFRva2Vuc1dpdGhSZWZlcmFsKGFkZHJlc3MgX3dobywgYWRkcmVzcyBfcmVmZXJhbCwgdWludDI1NiBfdmFsdWVUb2tlbnMpIGludGVybmFsIAogICAgewogICAgICAgIHVpbnQyNTYgcmVmZXJlclRva2VucyA9IF92YWx1ZVRva2VucyAqIDUgLyAxMDA7CgogICAgICAgIHVpbnQyNTYgdmFsdWVUb2tlbnMgPSBfdmFsdWVUb2tlbnMgKiAxMDMgLyAxMDA7CgogICAgICAgIG1pbnRUb2tlbnMoX3JlZmVyYWwsIHJlZmVyZXJUb2tlbnMpOwoKICAgICAgICBtaW50VG9rZW5zKF93aG8sIHZhbHVlVG9rZW5zKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3RhcnRUb2tlbnNTYWxlKAogICAgICAgICAgICB1aW50ICAgIF9jcm93ZHNhbGVTdGFydFRpbWUsCiAgICAgICAgICAgIHVpbnQgICAgX2Nyb3dkc2FsZUZpbmlzaFRpbWUsCiAgICAgICAgICAgIHVpbnQyNTYgX21pbmltYWxTdWNjZXNzVG9rZW5zLAogICAgICAgICAgICB1aW50MjU2IF9ldGhlclByaWNlKSBwdWJsaWMgb25seU93bmVyIAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuRGlzYWJsZWQgfHwgc3RhdGUgPT0gU3RhdGUuQ29tcGxldGVQcmVJQ08pOwoKICAgICAgICBjcm93ZHNhbGVTdGFydFRpbWUgID0gX2Nyb3dkc2FsZVN0YXJ0VGltZTsKICAgICAgICBjcm93ZHNhbGVGaW5pc2hUaW1lID0gX2Nyb3dkc2FsZUZpbmlzaFRpbWU7CgogICAgICAgIGV0aGVyUHJpY2UgPSBfZXRoZXJQcmljZTsKICAgICAgICBkZWxldGUgbnVtYmVyT2ZJbnZlc3RvcnM7CiAgICAgICAgZGVsZXRlIGNvbGxlY3RlZFRva2VuczsKCiAgICAgICAgbWluaW1hbFN1Y2Nlc3NUb2tlbnMgPSBfbWluaW1hbFN1Y2Nlc3NUb2tlbnM7CgogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5EaXNhYmxlZCkgCiAgICAgICAgewogICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLlByZUlDTzsKICAgICAgICB9IAogICAgICAgIGVsc2UgCiAgICAgICAgewogICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNyb3dkc2FsZTsKICAgICAgICB9CgogICAgICAgIE5ld1N0YXRlKHN0YXRlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdGltZVRvRmluaXNoVG9rZW5zU2FsZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgdCkgCiAgICB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08gfHwgc3RhdGUgPT0gU3RhdGUuQ3Jvd2RzYWxlKTsKCiAgICAgICAgaWYgKG5vdyA+IGNyb3dkc2FsZUZpbmlzaFRpbWUpIAogICAgICAgIHsKICAgICAgICAgICAgdCA9IDA7CiAgICAgICAgfSAKICAgICAgICBlbHNlIAogICAgICAgIHsKICAgICAgICAgICAgdCA9IGNyb3dkc2FsZUZpbmlzaFRpbWUgLSBub3c7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5pc2hUb2tlbnNTYWxlKHVpbnQyNTYgX2ludmVzdG9yc1RvUHJvY2VzcykgcHVibGljIAogICAgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUHJlSUNPIHx8IHN0YXRlID09IFN0YXRlLkNyb3dkc2FsZSk7CgogICAgICAgIHJlcXVpcmUobm93ID49IGNyb3dkc2FsZUZpbmlzaFRpbWUgfHwgCiAgICAgICAgICAgIChjb2xsZWN0ZWRUb2tlbnMgPj0gbWluaW1hbFN1Y2Nlc3NUb2tlbnMgJiYgbXNnLnNlbmRlciA9PSBvd25lcikpOwoKICAgICAgICBpZiAoY29sbGVjdGVkVG9rZW5zIDwgbWluaW1hbFN1Y2Nlc3NUb2tlbnMpIAogICAgICAgIHsKICAgICAgICAgICAgLy8gSW52ZXN0b3JzIGNhbiBnZXQgdGhlaXIgZXRoZXIgY2FsbGluZyB3aXRoZHJhd0JhY2soKSBmdW5jdGlvbgogICAgICAgICAgICB3aGlsZSAoX2ludmVzdG9yc1RvUHJvY2VzcyA+IDAgJiYgbnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzSXRlclstLW51bWJlck9mSW52ZXN0b3JzXTsKICAgICAgICAgICAgICAgIHVpbnQyNTYgaW52ID0gaW52ZXN0b3JzW2FkZHJdOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbYWRkcl0gPSBzdWIoIGJhbGFuY2VzW2FkZHJdLCBpbnYgKTsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc3ViKCB0b3RhbFN1cHBseSwgaW52ICk7CiAgICAgICAgICAgICAgICBUcmFuc2ZlcihhZGRyLCB0aGlzLCBpbnYpOwoKICAgICAgICAgICAgICAgIC0tX2ludmVzdG9yc1RvUHJvY2VzczsKCiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChudW1iZXJPZkludmVzdG9ycyA+IDApIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5QcmVJQ08pIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkRpc2FibGVkOwogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IFN0YXRlLkNvbXBsZXRlUHJlSUNPOwogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgICAgICBlbHNlIAogICAgICAgIHsKICAgICAgICAgICAgd2hpbGUgKF9pbnZlc3RvcnNUb1Byb2Nlc3MgPiAwICYmIG51bWJlck9mSW52ZXN0b3JzID4gMCkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC0tbnVtYmVyT2ZJbnZlc3RvcnM7CiAgICAgICAgICAgICAgICAtLV9pbnZlc3RvcnNUb1Byb2Nlc3M7CgogICAgICAgICAgICAgICAgYWRkcmVzcyBpID0gaW52ZXN0b3JzSXRlcltudW1iZXJPZkludmVzdG9yc107CgogICAgICAgICAgICAgICAgaW52ZXN0b3JzW2ldID0gMDsKCiAgICAgICAgICAgICAgICBkZWxldGUgaW52ZXN0b3JzW2ldOwogICAgICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc0l0ZXJbbnVtYmVyT2ZJbnZlc3RvcnNdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobnVtYmVyT2ZJbnZlc3RvcnMgPiAwKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuUHJlSUNPKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5Db21wbGV0ZVByZUlDTzsKICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFkZGl0aW9uYWwgdG9rZW5zIGZvciBvd25lciAoNDAlIG9mIGNvbXBsZXRlIHRvdGFsU3VwcGx5KQogICAgICAgICAgICAgICAgdWludDI1NiB0b2tlbnMgPSBkaXYoIG11bCggNCwgdG90YWxTdXBwbHkgKSAsIDYgKTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IHRva2VuczsKICAgICAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gYWRkKCB0b3RhbFN1cHBseSwgdG9rZW5zICk7CiAgICAgICAgICAgICAgICBUcmFuc2Zlcih0aGlzLCBvd25lciwgdG9rZW5zKTsKICAgICAgICAgICAgICAgIHN0YXRlID0gU3RhdGUuRW5hYmxlZDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgTmV3U3RhdGUoc3RhdGUpOwogICAgfQogICAgCiAgICAvLyBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgY2FsbGVkIGJ5IHRva2VuIGhvbGRlciBpbiBjYXNlIG9mIGNyb3dkc2FsZSBmYWlsZWQKICAgIGZ1bmN0aW9uIHdpdGhkcmF3QmFjaygpIHB1YmxpYyAKICAgIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkRpc2FibGVkKTsKCiAgICAgICAgdWludDI1NiB0b2tlbnMgPSBpbnZlc3RvcnNbbXNnLnNlbmRlcl07CiAgICAgICAgdWludDI1NiB2YWx1ZSA9IGRpdiggdG9rZW5zLCBldGhlclByaWNlICk7CgogICAgICAgIGlmICh2YWx1ZSA+IDApIAogICAgICAgIHsKICAgICAgICAgICAgaW52ZXN0b3JzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgcmVxdWlyZSggbXNnLnNlbmRlci5jYWxsLmdhcyhnYXNQcmljZSkudmFsdWUodmFsdWUpKCkgKTsKCiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gc3ViKCB0b3RhbFN1cHBseSwgdG9rZW5zICk7CiAgICAgICAgfQogICAgfQoKICAgIAp9'.
	

]
