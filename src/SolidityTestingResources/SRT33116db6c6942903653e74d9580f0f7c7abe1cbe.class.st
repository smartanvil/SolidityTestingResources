Class {
	#name : #SRT33116db6c6942903653e74d9580f0f7c7abe1cbe,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT33116db6c6942903653e74d9580f0f7c7abe1cbe >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFZhbml0eUxpYiB7CiAgICB1aW50IGNvbnN0YW50IG0gPSAweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZmZmZmZjMmY7CgogICAgZnVuY3Rpb24gbGVuZ3RoT2ZDb21tb25QcmVmaXgoYnl0ZXMgYSwgYnl0ZXMgYikgcHVibGljIHB1cmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBsZW4gPSAoYS5sZW5ndGggPD0gYi5sZW5ndGgpID8gYS5sZW5ndGggOiBiLmxlbmd0aDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBpZiAoYVtpXSAhPSBiW2ldKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbGVuOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBsZW5ndGhPZkNvbW1vblByZWZpeDMyKGJ5dGVzMzIgYSwgYnl0ZXMgYikgcHVibGljIHB1cmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoYVtpXSAhPSBiW2ldKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYi5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gbGVuZ3RoT2ZDb21tb25QcmVmaXgzMjMyKGJ5dGVzMzIgYSwgYnl0ZXMzMiBiKSBwdWJsaWMgcHVyZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhW2ldICE9IGJbaV0gfHwgYVtpXSA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZXF1YWxCeXRlc1RvQnl0ZXMoYnl0ZXMgYSwgYnl0ZXMgYikgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFbaV0gIT0gYltpXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlcXVhbEJ5dGVzMzJUb0J5dGVzKGJ5dGVzMzIgYSwgYnl0ZXMgYikgcHVibGljIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFbaV0gIT0gYltpXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBieXRlc1RvQnl0ZXMzMihieXRlcyBzb3VyY2UpIHB1YmxpYyBwdXJlIHJldHVybnMoYnl0ZXMzMiByZXN1bHQpIHsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChhZGQoc291cmNlLCAzMikpCiAgICAgICAgfQogICAgfQoKICAgIC8qIENvbnZlcnRzIGdpdmVuIG51bWJlciB0byBiYXNlNTgsIGxpbWl0ZWQgYnkgMzIgc3ltYm9scyAqLwogICAgZnVuY3Rpb24gdG9CYXNlNThDaGVja2VkKHVpbnQyNTYgX3ZhbHVlLCBieXRlIGFwcENvZGUpIHB1YmxpYyBwdXJlIHJldHVybnMoYnl0ZXMzMikgewogICAgICAgIHN0cmluZyBtZW1vcnkgbGV0dGVycyA9ICIxMjM0NTY3ODlBQkNERUZHSEpLTE1OUFFSU1RVVldYWVphYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6IjsKICAgICAgICBieXRlcyBtZW1vcnkgYWxwaGFiZXQgPSBieXRlcyhsZXR0ZXJzKTsKICAgICAgICB1aW50OCBiYXNlID0gNTg7CiAgICAgICAgdWludDggbGVuID0gMDsKICAgICAgICB1aW50MjU2IHJlbWFpbmRlciA9IDA7CiAgICAgICAgYm9vbCBuZWVkQnJlYWsgPSBmYWxzZTsKICAgICAgICBieXRlcyBtZW1vcnkgYnl0ZXNSZXZlcnNlZCA9IGJ5dGVzKG5ldyBzdHJpbmcoMzIpKTsKICAgICAgICAKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAwOyB0cnVlOyBpKyspIHsKICAgICAgICAgICAgaWYgKF92YWx1ZSA8IGJhc2UpIHsKICAgICAgICAgICAgICAgIG5lZWRCcmVhayA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVtYWluZGVyID0gX3ZhbHVlICUgYmFzZTsKICAgICAgICAgICAgX3ZhbHVlID0gdWludDI1NihfdmFsdWUgLyBiYXNlKTsKICAgICAgICAgICAgaWYgKGxlbiA9PSAzMikgewogICAgICAgICAgICAgICAgZm9yICh1aW50IGogPSAwOyBqIDwgbGVuIC0gMTsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgYnl0ZXNSZXZlcnNlZFtqXSA9IGJ5dGVzUmV2ZXJzZWRbaiArIDFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGVuLS07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnl0ZXNSZXZlcnNlZFtsZW5dID0gYWxwaGFiZXRbcmVtYWluZGVyXTsKICAgICAgICAgICAgbGVuKys7CiAgICAgICAgICAgIGlmIChuZWVkQnJlYWspIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFJldmVyc2UKICAgICAgICBieXRlcyBtZW1vcnkgcmVzdWx0ID0gYnl0ZXMobmV3IHN0cmluZygzMikpOwogICAgICAgIHJlc3VsdFswXSA9IGFwcENvZGU7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IDMxOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0W2kgKyAxXSA9IGJ5dGVzUmV2ZXJzZWRbbGVuIC0gMSAtIGldOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gYnl0ZXNUb0J5dGVzMzIocmVzdWx0KTsKICAgIH0KCiAgICAvLyBDcmVhdGUgQlRDIEFkZHJlc3M6IGh0dHBzOi8vZW4uYml0Y29pbi5pdC93aWtpL1RlY2huaWNhbF9iYWNrZ3JvdW5kX29mX3ZlcnNpb25fMV9CaXRjb2luX2FkZHJlc3NlcyNIb3dfdG9fY3JlYXRlX0JpdGNvaW5fQWRkcmVzcwogICAgZnVuY3Rpb24gY3JlYXRlQnRjQWRkcmVzc0hleCh1aW50MjU2IHB1YmxpY1hQb2ludCwgdWludDI1NiBwdWJsaWNZUG9pbnQpIHB1YmxpYyBwdXJlIHJldHVybnModWludDI1NikgewogICAgICAgIGJ5dGVzMjAgcHVibGljS2V5UGFydCA9IHJpcGVtZDE2MChzaGEyNTYoYnl0ZSgweDA0KSwgcHVibGljWFBvaW50LCBwdWJsaWNZUG9pbnQpKTsKICAgICAgICBieXRlczMyIHB1YmxpY0tleUNoZWNrQ29kZSA9IHNoYTI1NihzaGEyNTYoYnl0ZSgweDAwKSwgcHVibGljS2V5UGFydCkpOwogICAgICAgIAogICAgICAgIGJ5dGVzIG1lbW9yeSBwdWJsaWNLZXkgPSBuZXcgYnl0ZXMoMzIpOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDc7IGkrKykgewogICAgICAgICAgICBwdWJsaWNLZXlbaV0gPSAweDAwOwogICAgICAgIH0KICAgICAgICBwdWJsaWNLZXlbN10gPSAweDAwOyAvLyBNYWluIE5ldHdvcmsKICAgICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCAyMDsgaisrKSB7CiAgICAgICAgICAgIHB1YmxpY0tleVtqICsgOF0gPSBwdWJsaWNLZXlQYXJ0W2pdOwogICAgICAgIH0KICAgICAgICBwdWJsaWNLZXlbMjhdID0gcHVibGljS2V5Q2hlY2tDb2RlWzBdOwogICAgICAgIHB1YmxpY0tleVsyOV0gPSBwdWJsaWNLZXlDaGVja0NvZGVbMV07CiAgICAgICAgcHVibGljS2V5WzMwXSA9IHB1YmxpY0tleUNoZWNrQ29kZVsyXTsKICAgICAgICBwdWJsaWNLZXlbMzFdID0gcHVibGljS2V5Q2hlY2tDb2RlWzNdOwogICAgICAgIAogICAgICAgIHJldHVybiB1aW50MjU2KGJ5dGVzVG9CeXRlczMyKHB1YmxpY0tleSkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVCdGNBZGRyZXNzKHVpbnQyNTYgcHVibGljWFBvaW50LCB1aW50MjU2IHB1YmxpY1lQb2ludCkgcHVibGljIHB1cmUgcmV0dXJucyhieXRlczMyKSB7CiAgICAgICAgcmV0dXJuIHRvQmFzZTU4Q2hlY2tlZChjcmVhdGVCdGNBZGRyZXNzSGV4KHB1YmxpY1hQb2ludCwgcHVibGljWVBvaW50KSwgIjEiKTsKICAgIH0KCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc3RvbmVjb2xkcGF0L2Fub255bW91c3ZvdGluZy9ibG9iL21hc3Rlci9Mb2NhbENyeXB0by5zb2wKICAgIGZ1bmN0aW9uIGludm1vZCh1aW50MjU2IGEsIHVpbnQyNTYgcCkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGludCB0MSA9IDA7CiAgICAgICAgaW50IHQyID0gMTsKICAgICAgICB1aW50IHIxID0gcDsKICAgICAgICB1aW50IHIyID0gYTsKICAgICAgICB1aW50IHE7CiAgICAgICAgd2hpbGUgKHIyICE9IDApIHsKICAgICAgICAgICAgcSA9IHIxIC8gcjI7CiAgICAgICAgICAgICh0MSwgdDIsIHIxLCByMikgPSAodDIsIHQxIC0gaW50KHEpICogdDIsIHIyLCByMSAtIHEgKiByMik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdDEgPCAwID8gcCAtIHVpbnQoLXQxKSA6IHVpbnQodDEpOwogICAgfQogICAgCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc3RvbmVjb2xkcGF0L2Fub255bW91c3ZvdGluZy9ibG9iL21hc3Rlci9Mb2NhbENyeXB0by5zb2wKICAgIGZ1bmN0aW9uIHN1Ym1vZCh1aW50IGEsIHVpbnQgYiwgdWludCBwKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGFkZG1vZChhLCBwIC0gYiwgcCk7CiAgICB9CgogICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWxsaXB0aWNfY3VydmVfcG9pbnRfbXVsdGlwbGljYXRpb24jUG9pbnRfYWRkaXRpb24KICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZWxsYWovQmxvY2tjaGFpbi9ibG9iLzZiZmZiNDdhZmFlNmEyYTcwOTAzYTI2ZDIxNTQ4NGNmOGZmMDM4NTkvZWNkc2FfYml0Y29pbi5wZGYKICAgIC8vIGh0dHBzOi8vbWF0aC5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMjE5ODEzOS9lbGxpcHRpYy1jdXJ2ZS1mb3JtdWxhcy1mb3ItcG9pbnQtYWRkaXRpb24KICAgIGZ1bmN0aW9uIGFkZFhZKHVpbnQgeDEsIHVpbnQgeTEsIHVpbnQgeDIsIHVpbnQgeTIpIHB1YmxpYyBwdXJlIHJldHVybnModWludCB4MywgdWludCB5MykgewogICAgICAgIHVpbnQgYW50aSA9IGludm1vZChzdWJtb2QoeDEsIHgyLCBtKSwgbSk7CiAgICAgICAgdWludCBhbHBoYSA9IG11bG1vZChzdWJtb2QoeTEsIHkyLCBtKSwgYW50aSwgbSk7CiAgICAgICAgeDMgPSBzdWJtb2Qoc3VibW9kKG11bG1vZChhbHBoYSwgYWxwaGEsIG0pLCB4MSwgbSksIHgyLCBtKTsKICAgICAgICB5MyA9IHN1Ym1vZChtdWxtb2QoYWxwaGEsIHN1Ym1vZCh4MiwgeDMsIG0pLCBtKSwgeTIsIG0pOwogICAgICAgIAogICAgICAgIC8vIHgzID0gYnl0ZXMzMihtdWxfbW9kKHVpbnQoeDMpLCB1aW50KHkzKSwgbSkpOyA9PSAxISEhIQogICAgICAgIAogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qYmF5bGluYS9lY3NvbC9ibG9iL21hc3Rlci9lYy5zb2wKICAgICAgICAvLyB4MyA9IGFkZG1vZChtdWxtb2QoeTIsIHgxLCBtKSwgbXVsbW9kKHgyLCB5MSwgbSksIG0pOwogICAgICAgIC8vIHkzID0gbXVsbW9kKHkxLCB5MiwgbSk7CiAgICB9CgogICAgZnVuY3Rpb24gZG91YmxlWFkodWludCB4MSwgdWludCB5MSkgcHVibGljIHB1cmUgcmV0dXJucyh1aW50IHgyLCB1aW50IHkyKSB7CiAgICAgICAgdWludCBhbnRpID0gaW52bW9kKGFkZG1vZCh5MSwgeTEsIG0pLCBtKTsKICAgICAgICB1aW50IGFscGhhID0gbXVsbW9kKGFkZG1vZChhZGRtb2QobXVsbW9kKHgxLCB4MSwgbSksIG11bG1vZCh4MSwgeDEsIG0pLCBtKSwgbXVsbW9kKHgxLCB4MSwgbSksIG0pLCBhbnRpLCBtKTsKICAgICAgICB4MiA9IHN1Ym1vZChtdWxtb2QoYWxwaGEsIGFscGhhLCBtKSwgYWRkbW9kKHgxLCB4MSwgbSksIG0pOwogICAgICAgIHkyID0gc3VibW9kKG11bG1vZChhbHBoYSwgc3VibW9kKHgxLCB4MiwgbSksIG0pLCB5MSwgbSk7CiAgICB9CgogICAgZnVuY3Rpb24gbXVsWFkodWludCB4MSwgdWludCB5MSwgdWludCBwcml2YXRlS2V5KSBwdWJsaWMgcHVyZSByZXR1cm5zKHVpbnQgeDIsIHVpbnQgeTIpIHsKICAgICAgICBib29sIGFkZGl0aW9uID0gZmFsc2U7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgMjU2OyBpKyspIHsKICAgICAgICAgICAgaWYgKCgocHJpdmF0ZUtleSA+PiBpKSAmIDEpID09IDEpIHsKICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbikgewogICAgICAgICAgICAgICAgICAgICh4MiwgeTIpID0gYWRkWFkoeDEsIHkxLCB4MiwgeTIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAoeDIsIHkyKSA9ICh4MSwgeTEpOwogICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAoeDEseTEpID0gZG91YmxlWFkoeDEsIHkxKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYml0Y29pblB1YmxpY0tleSh1aW50MjU2IHByaXZhdGVLZXkpIHB1YmxpYyBwdXJlIHJldHVybnModWludCwgdWludCkgewogICAgICAgIHVpbnQyNTYgZ3ggPSAweDc5YmU2NjdlZjlkY2JiYWM1NWEwNjI5NWNlODcwYjA3MDI5YmZjZGIyZGNlMjhkOTU5ZjI4MTViMTZmODE3OTg7CiAgICAgICAgdWludDI1NiBneSA9IDB4NDgzYWRhNzcyNmEzYzQ2NTVkYTRmYmZjMGUxMTA4YThmZDE3YjQ0OGE2ODU1NDE5OWM0N2QwOGZmYjEwZDRiODsKICAgICAgICByZXR1cm4gbXVsWFkoZ3gsIGd5LCBwcml2YXRlS2V5KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21wbGV4aXR5Rm9yQnRjQWRkcmVzc1ByZWZpeChieXRlcyBwcmVmaXgpIHB1YmxpYyBwdXJlIHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBjb21wbGV4aXR5Rm9yQnRjQWRkcmVzc1ByZWZpeFdpdGhMZW5ndGgocHJlZml4LCBwcmVmaXgubGVuZ3RoKTsKICAgIH0KCiAgICAvLyBodHRwczovL2JpdGNvaW4uc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzQ4NTg2CiAgICBmdW5jdGlvbiBjb21wbGV4aXR5Rm9yQnRjQWRkcmVzc1ByZWZpeFdpdGhMZW5ndGgoYnl0ZXMgcHJlZml4LCB1aW50IGxlbmd0aCkgcHVibGljIHB1cmUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmVxdWlyZShwcmVmaXgubGVuZ3RoID49IGxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgdWludDhbMTI4XSBtZW1vcnkgdW5iYXNlNTggPSBbCiAgICAgICAgICAgIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgCiAgICAgICAgICAgIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwKICAgICAgICAgICAgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAKICAgICAgICAgICAgMjU1LCAwLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCAyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAKICAgICAgICAgICAgMjU1LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1LCAxNiwgMjU1LCAxNywgMTgsIDE5LCAyMCwgMjEsIDI1NSwgCiAgICAgICAgICAgIDIyLCAyMywgMjQsIDI1LCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzMiwgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUsCiAgICAgICAgICAgIDI1NSwgMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCA0MSwgNDIsIDQzLCAyNTUsIDQ0LCA0NSwgNDYsCiAgICAgICAgICAgIDQ3LCA0OCwgNDksIDUwLCA1MSwgNTIsIDUzLCA1NCwgNTUsIDU2LCA1NywgMjU1LCAyNTUsIDI1NSwgMjU1LCAyNTUKICAgICAgICBdOwoKICAgICAgICB1aW50IGxlYWRpbmdPbmVzID0gY291bnRCdGNBZGRyZXNzTGVhZGluZ09uZXMocHJlZml4LCBsZW5ndGgpOwoKICAgICAgICB1aW50MjU2IHByZWZpeFZhbHVlID0gMDsKICAgICAgICB1aW50MjU2IHByZWZpeDEgPSAxOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHVpbnQgaW5kZXggPSB1aW50KHByZWZpeFtpXSk7CiAgICAgICAgICAgIHJlcXVpcmUoaW5kZXggIT0gMjU1KTsKICAgICAgICAgICAgcHJlZml4VmFsdWUgPSBwcmVmaXhWYWx1ZSAqIDU4ICsgdW5iYXNlNThbaW5kZXhdOwogICAgICAgICAgICBwcmVmaXgxICo9IDU4OwogICAgICAgIH0KCiAgICAgICAgdWludDI1NiB0b3AgPSAodWludDI1NigxKSA8PCAoMjAwIC0gOCpsZWFkaW5nT25lcykpOwogICAgICAgIHVpbnQyNTYgdG90YWwgPSAwOwogICAgICAgIHVpbnQyNTYgcHJlZml4TWluID0gcHJlZml4VmFsdWU7CiAgICAgICAgdWludDI1NiBkaWZmID0gMDsKICAgICAgICBmb3IgKHVpbnQgZGlnaXRzID0gMTsgcHJlZml4MS81OCA8ICgxIDw8IDE5Mik7IGRpZ2l0cysrKSB7CiAgICAgICAgICAgIHByZWZpeDEgKj0gNTg7CiAgICAgICAgICAgIHByZWZpeE1pbiAqPSA1ODsKICAgICAgICAgICAgcHJlZml4VmFsdWUgPSBwcmVmaXhWYWx1ZSAqIDU4ICsgNTc7CgogICAgICAgICAgICBkaWZmID0gMDsKICAgICAgICAgICAgaWYgKHByZWZpeFZhbHVlID49IHRvcCkgewogICAgICAgICAgICAgICAgZGlmZiArPSBwcmVmaXhWYWx1ZSAtIHRvcDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocHJlZml4TWluIDwgKHRvcCA+PiA4KSkgewogICAgICAgICAgICAgICAgZGlmZiArPSAodG9wID4+IDgpIC0gcHJlZml4TWluOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoKDU4ICoqIGRpZ2l0cykgPj0gZGlmZikgewogICAgICAgICAgICAgICAgdG90YWwgKz0gKDU4ICoqIGRpZ2l0cykgLSBkaWZmOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocHJlZml4TWluID09IDApIHsgLy8gaWYgcHJlZml4IGlzIGNvbnRhaW5zIG9ubHkgb25lczogMTExMTExCiAgICAgICAgICAgIHRvdGFsID0gKDU4ICoqIChkaWdpdHMgLSAxKSkgLSBkaWZmOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICgxIDw8IDE5MikgLyB0b3RhbDsKICAgIH0KCiAgICBmdW5jdGlvbiBjb3VudEJ0Y0FkZHJlc3NMZWFkaW5nT25lcyhieXRlcyBwcmVmaXgsIHVpbnQgbGVuZ3RoKSBwdWJsaWMgcHVyZSByZXR1cm5zKHVpbnQpIHsKICAgICAgICB1aW50IGxlYWRpbmdPbmVzID0gMTsKICAgICAgICBmb3IgKHVpbnQgaiA9IDA7IGogPCBsZW5ndGggJiYgcHJlZml4W2pdID09IDQ5OyBqKyspIHsKICAgICAgICAgICAgbGVhZGluZ09uZXMgPSBqICsgMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxlYWRpbmdPbmVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzVmFsaWRCaWNvaW5BZGRyZXNzUHJlZml4KGJ5dGVzIHByZWZpeEFyZykgcHVibGljIHB1cmUgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHByZWZpeEFyZy5sZW5ndGggPCA1KSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHByZWZpeEFyZ1swXSAhPSAiMSIgJiYgcHJlZml4QXJnWzBdICE9ICIzIikgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHByZWZpeEFyZy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBieXRlIGNoID0gcHJlZml4QXJnW2ldOwogICAgICAgICAgICBpZiAoY2ggPT0gIjAiIHx8IGNoID09ICJPIiB8fCBjaCA9PSAiSSIgfHwgY2ggPT0gImwiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCEoKGNoID49ICIxIiAmJiBjaCA8PSAiOSIpIHx8IChjaCA+PSAiYSIgJiYgY2ggPD0gInoiKSB8fCAoY2ggPj0gIkEiICYmIGNoIDw9ICJaIikpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzVmFsaWRQdWJsaWNLZXkodWludDI1NiB4LCB1aW50MjU2IHkpIHB1YmxpYyBwdXJlIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiAobXVsbW9kKHksIHksIG0pID09IGFkZG1vZChtdWxtb2QoeCwgbXVsbW9kKHgsIHgsIG0pLCBtKSwgNywgbSkpOwogICAgfQoKfQoKY29udHJhY3QgSVVwZ3JhZGFibGUgewoKICAgIGZ1bmN0aW9uIHN0YXJ0VXBncmFkZSgpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGVuZFVwZ3JhZGUoKSBwdWJsaWM7Cgp9Cgpjb250cmFjdCBVcGdyYWRhYmxlIGlzIE93bmFibGUgewoKICAgIHN0cnVjdCBVcGdyYWRhYmxlU3RhdGUgewogICAgICAgIGJvb2wgaXNVcGdyYWRpbmc7CiAgICAgICAgYWRkcmVzcyBwcmV2VmVyc2lvbjsKICAgICAgICBhZGRyZXNzIG5leHRWZXJzaW9uOwogICAgfQoKICAgIFVwZ3JhZGFibGVTdGF0ZSBwdWJsaWMgdXBncmFkYWJsZVN0YXRlOwoKICAgIGV2ZW50IEluaXRpYWxpemVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2VmVyc2lvbik7CiAgICBldmVudCBVcGdyYWRpbmcoYWRkcmVzcyBpbmRleGVkIG5leHRWZXJzaW9uKTsKICAgIGV2ZW50IFVwZ3JhZGVkKGFkZHJlc3MgaW5kZXhlZCBuZXh0VmVyc2lvbik7CgogICAgbW9kaWZpZXIgaXNMYXN0ZXN0VmVyc2lvbiB7CiAgICAgICAgcmVxdWlyZSghdXBncmFkYWJsZVN0YXRlLmlzVXBncmFkaW5nKTsKICAgICAgICByZXF1aXJlKHVwZ3JhZGFibGVTdGF0ZS5uZXh0VmVyc2lvbiA9PSBhZGRyZXNzKDApKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lck9yaWdpbiB7CiAgICAgICAgcmVxdWlyZSh0eC5vcmlnaW4gPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gVXBncmFkYWJsZShhZGRyZXNzIF9wcmV2VmVyc2lvbikgcHVibGljIHsKICAgICAgICBpZiAoX3ByZXZWZXJzaW9uICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IE93bmFibGUoX3ByZXZWZXJzaW9uKS5vd25lcigpKTsKICAgICAgICAgICAgdXBncmFkYWJsZVN0YXRlLmlzVXBncmFkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdXBncmFkYWJsZVN0YXRlLnByZXZWZXJzaW9uID0gX3ByZXZWZXJzaW9uOwogICAgICAgICAgICBJVXBncmFkYWJsZShfcHJldlZlcnNpb24pLnN0YXJ0VXBncmFkZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEluaXRpYWxpemVkKF9wcmV2VmVyc2lvbik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0VXBncmFkZSgpIHB1YmxpYyBvbmx5T3duZXJPcmlnaW4gewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBvd25lcik7CiAgICAgICAgcmVxdWlyZSghdXBncmFkYWJsZVN0YXRlLmlzVXBncmFkaW5nKTsKICAgICAgICByZXF1aXJlKHVwZ3JhZGFibGVTdGF0ZS5uZXh0VmVyc2lvbiA9PSAwKTsKICAgICAgICB1cGdyYWRhYmxlU3RhdGUuaXNVcGdyYWRpbmcgPSB0cnVlOwogICAgICAgIHVwZ3JhZGFibGVTdGF0ZS5uZXh0VmVyc2lvbiA9IG1zZy5zZW5kZXI7CiAgICAgICAgVXBncmFkaW5nKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vZnVuY3Rpb24gdXBncmFkZSh1aW50IGluZGV4LCB1aW50IHNpemUpIHB1YmxpYyBvbmx5T3duZXIge30KCiAgICBmdW5jdGlvbiBlbmRVcGdyYWRlKCkgcHVibGljIG9ubHlPd25lck9yaWdpbiB7CiAgICAgICAgcmVxdWlyZSh1cGdyYWRhYmxlU3RhdGUuaXNVcGdyYWRpbmcpOwogICAgICAgIHVwZ3JhZGFibGVTdGF0ZS5pc1VwZ3JhZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgICAgICAgIHJlcXVpcmUodXBncmFkYWJsZVN0YXRlLm5leHRWZXJzaW9uID09IG1zZy5zZW5kZXIpOwogICAgICAgICAgICBVcGdyYWRlZCh1cGdyYWRhYmxlU3RhdGUubmV4dFZlcnNpb24pOwogICAgICAgIH0gCiAgICAgICAgZWxzZSAgewogICAgICAgICAgICBpZiAodXBncmFkYWJsZVN0YXRlLnByZXZWZXJzaW9uICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgIFVwZ3JhZGFibGUodXBncmFkYWJsZVN0YXRlLnByZXZWZXJzaW9uKS5lbmRVcGdyYWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSW5pdGlhbGl6ZWQodXBncmFkYWJsZVN0YXRlLnByZXZWZXJzaW9uKTsKICAgICAgICB9CiAgICB9Cgp9Cgpjb250cmFjdCBJRUMgewoKICAgIGZ1bmN0aW9uIF9pbnZlcnNlKHVpbnQyNTYgYSkgcHVibGljIGNvbnN0YW50IAogICAgICAgIHJldHVybnModWludDI1NiBpbnZBKTsKCiAgICBmdW5jdGlvbiBfZWNBZGQodWludDI1NiB4MSx1aW50MjU2IHkxLHVpbnQyNTYgejEsCiAgICAgICAgICAgICAgICAgICAgdWludDI1NiB4Mix1aW50MjU2IHkyLHVpbnQyNTYgejIpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludDI1NiB4Myx1aW50MjU2IHkzLHVpbnQyNTYgejMpOwoKICAgIGZ1bmN0aW9uIF9lY0RvdWJsZSh1aW50MjU2IHgxLHVpbnQyNTYgeTEsdWludDI1NiB6MSkgcHVibGljIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyh1aW50MjU2IHgzLHVpbnQyNTYgeTMsdWludDI1NiB6Myk7CgogICAgZnVuY3Rpb24gX2VjTXVsKHVpbnQyNTYgZCwgdWludDI1NiB4MSx1aW50MjU2IHkxLHVpbnQyNTYgejEpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludDI1NiB4Myx1aW50MjU2IHkzLHVpbnQyNTYgejMpOwoKICAgIGZ1bmN0aW9uIHB1YmxpY0tleSh1aW50MjU2IHByaXZLZXkpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludDI1NiBxeCwgdWludDI1NiBxeSk7CgogICAgZnVuY3Rpb24gZGVyaXZlS2V5KHVpbnQyNTYgcHJpdktleSwgdWludDI1NiBwdWJYLCB1aW50MjU2IHB1YlkpIHB1YmxpYyBjb25zdGFudAogICAgICAgIHJldHVybnModWludDI1NiBxeCwgdWludDI1NiBxeSk7Cgp9Cgpjb250cmFjdCBUYXNrUmVnaXN0ZXIgaXMgVXBncmFkYWJsZSwgVmFuaXR5TGliIHsKCiAgICBlbnVtIFRhc2tUeXBlIHsKICAgICAgICBCSVRDT0lOX0FERFJFU1NfUFJFRklYCiAgICB9CgogICAgc3RydWN0IFRhc2sgewogICAgICAgIFRhc2tUeXBlIHRhc2tUeXBlOwogICAgICAgIHVpbnQyNTYgdGFza0lkOwogICAgICAgIGFkZHJlc3MgY3JlYXRvcjsKICAgICAgICB1aW50MjU2IHJld2FyZDsKICAgICAgICBieXRlczMyIGRhdGE7CiAgICAgICAgdWludDI1NiBkYXRhTGVuZ3RoOwogICAgICAgIHVpbnQyNTYgcmVxdWVzdFB1YmxpY1hQb2ludDsKICAgICAgICB1aW50MjU2IHJlcXVlc3RQdWJsaWNZUG9pbnQ7CiAgICAgICAgdWludDI1NiBhbnN3ZXJQcml2YXRlS2V5OwogICAgfQoKICAgIElFQyBwdWJsaWMgZWM7CiAgICBFUkMyMCBwdWJsaWMgdG9rZW47CiAgICB1aW50MjU2IHB1YmxpYyBuZXh0VGFza0lkID0gMTsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsUmV3YXJkOwogICAgCiAgICBUYXNrW10gcHVibGljIHRhc2tzOwogICAgVGFza1tdIHB1YmxpYyBjb21wbGV0ZWRUYXNrczsKICAgIG1hcHBpbmcodWludDI1NiA9PiB1aW50KSBwdWJsaWMgaW5kZXhPZlRhc2tJZDsgLy8gU3RhcnRpbmcgZnJvbSAxCiAgICBldmVudCBUYXNrQ3JlYXRlZCh1aW50MjU2IGluZGV4ZWQgdGFza0lkKTsKICAgIGV2ZW50IFRhc2tTb2x2ZWQodWludDI1NiBpbmRleGVkIHRhc2tJZCk7CiAgICBldmVudCBUYXNrUGF5ZWQodWludDI1NiBpbmRleGVkIHRhc2tJZCk7CgogICAgZnVuY3Rpb24gVGFza1JlZ2lzdGVyKGFkZHJlc3MgX2VjLCBhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfcHJldlZlcnNpb24pIHB1YmxpYyBVcGdyYWRhYmxlKF9wcmV2VmVyc2lvbikgewogICAgICAgIGVjID0gSUVDKF9lYyk7CiAgICAgICAgdG9rZW4gPSBFUkMyMChfdG9rZW4pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZ3JhZGUodWludCBzaXplKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHVwZ3JhZGFibGVTdGF0ZS5pc1VwZ3JhZGluZyk7CiAgICAgICAgcmVxdWlyZSh1cGdyYWRhYmxlU3RhdGUucHJldlZlcnNpb24gIT0gMCk7CgogICAgICAgIC8vIE1pZ3JhdGUgc29tZSB2YXJzCiAgICAgICAgbmV4dFRhc2tJZCA9IFRhc2tSZWdpc3Rlcih1cGdyYWRhYmxlU3RhdGUucHJldlZlcnNpb24pLm5leHRUYXNrSWQoKTsKICAgICAgICB0b3RhbFJld2FyZCA9IFRhc2tSZWdpc3Rlcih1cGdyYWRhYmxlU3RhdGUucHJldlZlcnNpb24pLnRvdGFsUmV3YXJkKCk7CgogICAgICAgIHVpbnQgaW5kZXggPSB0YXNrcy5sZW5ndGg7CiAgICAgICAgdWludCB0YXNrc0NvdW50ID0gVGFza1JlZ2lzdGVyKHVwZ3JhZGFibGVTdGF0ZS5wcmV2VmVyc2lvbikudGFza3NDb3VudCgpOwoKICAgICAgICAvLyBNaWdyYXRlIHRhc2tzCgogICAgICAgIGZvciAodWludCBpID0gaW5kZXg7IGkgPCBpbmRleCArIHNpemUgJiYgaSA8IHRhc2tzQ291bnQ7IGkrKykgewogICAgICAgICAgICB0YXNrcy5wdXNoKFRhc2soVGFza1R5cGUuQklUQ09JTl9BRERSRVNTX1BSRUZJWCwwLDAsMCxieXRlczMyKDApLDAsMCwwLDApKTsKICAgICAgICB9CgogICAgICAgIGZvciAodWludCBqID0gaW5kZXg7IGogPCBpbmRleCArIHNpemUgJiYgaiA8IHRhc2tzQ291bnQ7IGorKykgewogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICB0YXNrc1tqXS50YXNrVHlwZSwKICAgICAgICAgICAgICAgIHRhc2tzW2pdLnRhc2tJZCwKICAgICAgICAgICAgICAgIHRhc2tzW2pdLmNyZWF0b3IsCiAgICAgICAgICAgICAgICB0YXNrc1tqXS5yZXdhcmQsCiAgICAgICAgICAgICAgICB0YXNrc1tqXS5kYXRhLAogICAgICAgICAgICAgICAgLC8vdGFza3Nbal0uZGF0YUxlbmd0aCwgCiAgICAgICAgICAgICAgICAsLy90YXNrc1tqXS5yZXF1ZXN0UHVibGljWFBvaW50LCAKICAgICAgICAgICAgICAgICwvL3Rhc2tzW2pdLnJlcXVlc3RQdWJsaWNZUG9pbnQsCiAgICAgICAgICAgICAgICAgLy90YXNrc1tqXS5hbnN3ZXJQcml2YXRlS2V5CiAgICAgICAgICAgICkgPSBUYXNrUmVnaXN0ZXIodXBncmFkYWJsZVN0YXRlLnByZXZWZXJzaW9uKS50YXNrcyhqKTsKICAgICAgICAgICAgaW5kZXhPZlRhc2tJZFt0YXNrc1tqXS50YXNrSWRdID0gaiArIDE7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHVpbnQgayA9IGluZGV4OyBrIDwgaW5kZXggKyBzaXplICYmIGsgPCB0YXNrc0NvdW50OyBrKyspIHsKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgLC8vdGFza3Nba10udGFza1R5cGUsCiAgICAgICAgICAgICAgICAsLy90YXNrc1trXS50YXNrSWQsCiAgICAgICAgICAgICAgICAsLy90YXNrc1trXS5jcmVhdG9yLAogICAgICAgICAgICAgICAgLC8vdGFza3Nba10ucmV3YXJkLAogICAgICAgICAgICAgICAgLC8vdGFza3Nba10uZGF0YSwKICAgICAgICAgICAgICAgIHRhc2tzW2tdLmRhdGFMZW5ndGgsIAogICAgICAgICAgICAgICAgdGFza3Nba10ucmVxdWVzdFB1YmxpY1hQb2ludCwgCiAgICAgICAgICAgICAgICB0YXNrc1trXS5yZXF1ZXN0UHVibGljWVBvaW50LAogICAgICAgICAgICAgICAgdGFza3Nba10uYW5zd2VyUHJpdmF0ZUtleQogICAgICAgICAgICApID0gVGFza1JlZ2lzdGVyKHVwZ3JhZGFibGVTdGF0ZS5wcmV2VmVyc2lvbikudGFza3Moayk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBlbmRVcGdyYWRlKCkgcHVibGljIHsKICAgICAgICBzdXBlci5lbmRVcGdyYWRlKCk7CiAgICAgICAgCiAgICAgICAgaWYgKHVwZ3JhZGFibGVTdGF0ZS5uZXh0VmVyc2lvbiAhPSAwKSB7CiAgICAgICAgICAgIHRva2VuLnRyYW5zZmVyKHVwZ3JhZGFibGVTdGF0ZS5uZXh0VmVyc2lvbiwgdG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdGFza3NDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gdGFza3MubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBsZXRlZFRhc2tzQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNvbXBsZXRlZFRhc2tzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXlGb3JUYXNrKHVpbnQyNTYgdGFza0lkLCB1aW50MjU2IHJld2FyZCkgcHVibGljIGlzTGFzdGVzdFZlcnNpb24gewogICAgICAgIHJlcXVpcmUocmV3YXJkID4gMCk7CiAgICAgICAgdWludCBpbmRleCA9IHNhZmVJbmRleE9mVGFza0lkKHRhc2tJZCk7CiAgICAgICAgdG9rZW4udHJhbnNmZXJGcm9tKHR4Lm9yaWdpbiwgdGhpcywgcmV3YXJkKTsKICAgICAgICB0YXNrc1tpbmRleF0ucmV3YXJkICs9IHJld2FyZDsKICAgICAgICB0b3RhbFJld2FyZCArPSByZXdhcmQ7CiAgICAgICAgVGFza1BheWVkKHRhc2tJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZUluZGV4T2ZUYXNrSWQodWludCB0YXNrSWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICB1aW50IGluZGV4ID0gaW5kZXhPZlRhc2tJZFt0YXNrSWRdOwogICAgICAgIHJlcXVpcmUoaW5kZXggPiAwKTsKICAgICAgICByZXR1cm4gaW5kZXggLSAxOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVCaXRjb2luQWRkcmVzc1ByZWZpeFRhc2soYnl0ZXMgcHJlZml4LCB1aW50MjU2IHJld2FyZCwgdWludDI1NiByZXF1ZXN0UHVibGljWFBvaW50LCB1aW50MjU2IHJlcXVlc3RQdWJsaWNZUG9pbnQpIHB1YmxpYyBpc0xhc3Rlc3RWZXJzaW9uIHsKICAgICAgICByZXF1aXJlKHByZWZpeC5sZW5ndGggPiA1KTsKICAgICAgICByZXF1aXJlKHByZWZpeFswXSA9PSAiMSIpOwogICAgICAgIHJlcXVpcmUocHJlZml4WzFdICE9ICIxIik7IC8vIERvIG5vdCBzdXBwb3J0IG11bHRpcGxlIDFzIHlldAogICAgICAgIHJlcXVpcmUoaXNWYWxpZEJpY29pbkFkZHJlc3NQcmVmaXgocHJlZml4KSk7CiAgICAgICAgcmVxdWlyZShpc1ZhbGlkUHVibGljS2V5KHJlcXVlc3RQdWJsaWNYUG9pbnQsIHJlcXVlc3RQdWJsaWNZUG9pbnQpKTsKICAgICAgICBpZiAocmV3YXJkID4gMCkgewogICAgICAgICAgICB0b2tlbi50cmFuc2ZlckZyb20odHgub3JpZ2luLCB0aGlzLCByZXdhcmQpOwogICAgICAgIH0KCiAgICAgICAgYnl0ZXMzMiBkYXRhOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgZGF0YSA6PSBtbG9hZChhZGQocHJlZml4LCAzMikpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFRhc2sgbWVtb3J5IHRhc2sgPSBUYXNrKHsKICAgICAgICAgICAgdGFza1R5cGU6IFRhc2tUeXBlLkJJVENPSU5fQUREUkVTU19QUkVGSVgsCiAgICAgICAgICAgIHRhc2tJZDogbmV4dFRhc2tJZCwKICAgICAgICAgICAgY3JlYXRvcjogdHgub3JpZ2luLAogICAgICAgICAgICByZXdhcmQ6IHJld2FyZCwKICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgZGF0YUxlbmd0aDogcHJlZml4Lmxlbmd0aCwKICAgICAgICAgICAgcmVxdWVzdFB1YmxpY1hQb2ludDogcmVxdWVzdFB1YmxpY1hQb2ludCwKICAgICAgICAgICAgcmVxdWVzdFB1YmxpY1lQb2ludDogcmVxdWVzdFB1YmxpY1lQb2ludCwKICAgICAgICAgICAgYW5zd2VyUHJpdmF0ZUtleTogMAogICAgICAgIH0pOwogICAgICAgIHRhc2tzLnB1c2godGFzayk7CiAgICAgICAgaW5kZXhPZlRhc2tJZFtuZXh0VGFza0lkXSA9IHRhc2tzLmxlbmd0aDsgLy8gaW5jcmVtZW50ZWQgdG8gYXZvaWQgMCBpbmRleAogICAgICAgIFRhc2tDcmVhdGVkKG5leHRUYXNrSWQpOwogICAgICAgIG5leHRUYXNrSWQrKzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc29sdmVUYXNrKHVpbnQgdGFza0lkLCB1aW50MjU2IGFuc3dlclByaXZhdGVLZXkpIHB1YmxpYyBpc0xhc3Rlc3RWZXJzaW9uIHsKICAgICAgICB1aW50IHRhc2tJbmRleCA9IHNhZmVJbmRleE9mVGFza0lkKHRhc2tJZCk7CiAgICAgICAgVGFzayBzdG9yYWdlIHRhc2sgPSB0YXNrc1t0YXNrSW5kZXhdOwoKICAgICAgICAvLyBSZXF1aXJlIHByaXZhdGUga2V5IHRvIGJlIHBhcnQgb2YgYWRkcmVzcyB0byBwcmV2ZW50IGZyb250LXJ1bm5pbmcgYXR0YWNrCiAgICAgICAgYnl0ZXMzMiBhbnN3ZXJQcml2YXRlS2V5Qnl0ZXMgPSBieXRlczMyKGFuc3dlclByaXZhdGVLZXkpOwogICAgICAgIGJ5dGVzMzIgc2VuZGVyQWRkcmVzc0J5dGVzID0gYnl0ZXMzMih1aW50MjU2KG1zZy5zZW5kZXIpIDw8IDk2KTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgICAgICAgIHJlcXVpcmUoYW5zd2VyUHJpdmF0ZUtleUJ5dGVzW2ldID09IHNlbmRlckFkZHJlc3NCeXRlc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGFzay50YXNrVHlwZSA9PSBUYXNrVHlwZS5CSVRDT0lOX0FERFJFU1NfUFJFRklYKSB7CiAgICAgICAgICAgIHVpbnQyNTYgYW5zd2VyUHVibGljWFBvaW50OwogICAgICAgICAgICB1aW50MjU2IGFuc3dlclB1YmxpY1lQb2ludDsKICAgICAgICAgICAgdWludDI1NiBwdWJsaWNYUG9pbnQ7CiAgICAgICAgICAgIHVpbnQyNTYgcHVibGljWVBvaW50OwogICAgICAgICAgICB1aW50MjU2IHo7CiAgICAgICAgICAgIChhbnN3ZXJQdWJsaWNYUG9pbnQsIGFuc3dlclB1YmxpY1lQb2ludCkgPSBlYy5wdWJsaWNLZXkoYW5zd2VyUHJpdmF0ZUtleSk7CiAgICAgICAgICAgIChwdWJsaWNYUG9pbnQsIHB1YmxpY1lQb2ludCwgeikgPSBlYy5fZWNBZGQoCiAgICAgICAgICAgICAgICB0YXNrLnJlcXVlc3RQdWJsaWNYUG9pbnQsCiAgICAgICAgICAgICAgICB0YXNrLnJlcXVlc3RQdWJsaWNZUG9pbnQsCiAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgYW5zd2VyUHVibGljWFBvaW50LAogICAgICAgICAgICAgICAgYW5zd2VyUHVibGljWVBvaW50LAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICApOwoKICAgICAgICAgICAgdWludDI1NiBtID0gMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGQzJGOwogICAgICAgICAgICB6ID0gZWMuX2ludmVyc2Uoeik7CiAgICAgICAgICAgIHB1YmxpY1hQb2ludCA9IG11bG1vZChwdWJsaWNYUG9pbnQsIHosIG0pOwogICAgICAgICAgICBwdWJsaWNZUG9pbnQgPSBtdWxtb2QocHVibGljWVBvaW50LCB6LCBtKTsKICAgICAgICAgICAgcmVxdWlyZShpc1ZhbGlkUHVibGljS2V5KHB1YmxpY1hQb2ludCwgcHVibGljWVBvaW50KSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBieXRlczMyIGJ0Y0FkZHJlc3MgPSBjcmVhdGVCdGNBZGRyZXNzKHB1YmxpY1hQb2ludCwgcHVibGljWVBvaW50KTsKICAgICAgICAgICAgdWludCBwcmVmaXhMZW5ndGggPSBsZW5ndGhPZkNvbW1vblByZWZpeDMyMzIoYnRjQWRkcmVzcywgdGFzay5kYXRhKTsKICAgICAgICAgICAgcmVxdWlyZShwcmVmaXhMZW5ndGggPT0gdGFzay5kYXRhTGVuZ3RoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRhc2suYW5zd2VyUHJpdmF0ZUtleSA9IGFuc3dlclByaXZhdGVLZXk7CiAgICAgICAgfQoKICAgICAgICB0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCB0YXNrLnJld2FyZCk7CiAgICAgICAgdG90YWxSZXdhcmQgLT0gdGFzay5yZXdhcmQ7CgogICAgICAgIGNvbXBsZXRlVGFzayh0YXNrSWQsIHRhc2tJbmRleCk7CiAgICAgICAgVGFza1NvbHZlZCh0YXNrSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXBsZXRlVGFzayh1aW50IHRhc2tJZCwgdWludCBpbmRleCkgaW50ZXJuYWwgewogICAgICAgIGNvbXBsZXRlZFRhc2tzLnB1c2godGFza3NbaW5kZXhdKTsKICAgICAgICBpZiAoaW5kZXggPCB0YXNrcy5sZW5ndGggLSAxKSB7IC8vIGlmIG5vdCBsYXRlc3QKICAgICAgICAgICAgdGFza3NbaW5kZXhdID0gdGFza3NbdGFza3MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIGluZGV4T2ZUYXNrSWRbdGFza3NbaW5kZXhdLnRhc2tJZF0gPSBpbmRleCArIDE7CiAgICAgICAgfQogICAgICAgIHRhc2tzLmxlbmd0aCAtPSAxOwogICAgICAgIGRlbGV0ZSBpbmRleE9mVGFza0lkW3Rhc2tJZF07CiAgICB9CgogICAgZnVuY3Rpb24gcmVjb3Zlckxvc3QoRVJDMjBCYXNpYyBfdG9rZW4sIGFkZHJlc3MgbG9zZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gX3Rva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAoX3Rva2VuID09IHRva2VuKSB7CiAgICAgICAgICAgIGFtb3VudCAtPSB0b3RhbFJld2FyZDsKICAgICAgICB9CiAgICAgICAgX3Rva2VuLnRyYW5zZmVyKGxvc2VyLCBfdG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICAgIH0KCn0='.
	

]
