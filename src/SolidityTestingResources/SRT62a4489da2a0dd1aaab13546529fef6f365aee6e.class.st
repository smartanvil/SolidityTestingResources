Class {
	#name : #SRT62a4489da2a0dd1aaab13546529fef6f365aee6e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT62a4489da2a0dd1aaab13546529fef6f365aee6e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiBjb250cmFjdHMvbGFuZC9MQU5EU3RvcmFnZS5zb2wKCmNvbnRyYWN0IExBTkRTdG9yYWdlIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBsYXRlc3RQaW5nOwoKICB1aW50MjU2IGNvbnN0YW50IGNsZWFyTG93ID0gMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogIHVpbnQyNTYgY29uc3RhbnQgY2xlYXJIaWdoID0gMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmOwogIHVpbnQyNTYgY29uc3RhbnQgZmFjdG9yID0gMHgxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7Cgp9CgovLyBGaWxlOiBjb250cmFjdHMvcmVnaXN0cnkvQXNzZXRSZWdpc3RyeVN0b3JhZ2Uuc29sCgpjb250cmFjdCBBc3NldFJlZ2lzdHJ5U3RvcmFnZSB7CgogIHN0cmluZyBpbnRlcm5hbCBfbmFtZTsKICBzdHJpbmcgaW50ZXJuYWwgX3N5bWJvbDsKICBzdHJpbmcgaW50ZXJuYWwgX2Rlc2NyaXB0aW9uOwoKICAvKioKICAgKiBTdG9yZXMgdGhlIHRvdGFsIGNvdW50IG9mIGFzc2V0cyBtYW5hZ2VkIGJ5IHRoaXMgcmVnaXN0cnkKICAgKi8KICB1aW50MjU2IGludGVybmFsIF9jb3VudDsKCiAgLyoqCiAgICogU3RvcmVzIGFuIGFycmF5IG9mIGFzc2V0cyBvd25lZCBieSBhIGdpdmVuIGFjY291bnQKICAgKi8KICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NltdKSBpbnRlcm5hbCBfYXNzZXRzT2Y7CgogIC8qKgogICAqIFN0b3JlcyB0aGUgY3VycmVudCBob2xkZXIgb2YgYW4gYXNzZXQKICAgKi8KICBtYXBwaW5nKHVpbnQyNTYgPT4gYWRkcmVzcykgaW50ZXJuYWwgX2hvbGRlck9mOwoKICAvKioKICAgKiBTdG9yZXMgdGhlIGluZGV4IG9mIGFuIGFzc2V0IGluIHRoZSBgX2Fzc2V0c09mYCBhcnJheSBvZiBpdHMgaG9sZGVyCiAgICovCiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIGludGVybmFsIF9pbmRleE9mQXNzZXQ7CgogIC8qKgogICAqIFN0b3JlcyB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggYW4gYXNzZXQKICAgKi8KICBtYXBwaW5nKHVpbnQyNTYgPT4gc3RyaW5nKSBpbnRlcm5hbCBfYXNzZXREYXRhOwoKICAvKioKICAgKiBGb3IgYSBnaXZlbiBhY2NvdW50LCBmb3IgYSBnaXZlbiBvcHBlcmF0b3IsIHN0b3JlIHdoZXRoZXIgdGhhdCBvcGVyYXRvciBpcwogICAqIGFsbG93ZWQgdG8gdHJhbnNmZXIgYW5kIG1vZGlmeSBhc3NldHMgb24gYmVoYWxmIG9mIHRoZW0uCiAgICovCiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSkgaW50ZXJuYWwgX29wZXJhdG9yczsKCiAgLyoqCiAgICogU2ltcGxlIHJlZW50cmFuY3kgbG9jawogICAqLwogIGJvb2wgaW50ZXJuYWwgX3JlZW50cmFuY3k7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy91cGdyYWRhYmxlL093bmFibGVTdG9yYWdlLnNvbAoKY29udHJhY3QgT3duYWJsZVN0b3JhZ2UgewoKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZVN0b3JhZ2UoKSBpbnRlcm5hbCB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL3VwZ3JhZGFibGUvUHJveHlTdG9yYWdlLnNvbAoKY29udHJhY3QgUHJveHlTdG9yYWdlIHsKCiAgLyoqCiAgICogQ3VycmVudCBjb250cmFjdCB0byB3aGljaCB3ZSBhcmUgcHJveGluZwogICAqLwogIGFkZHJlc3MgY3VycmVudENvbnRyYWN0OwoKfQoKLy8gRmlsZTogY29udHJhY3RzL1N0b3JhZ2Uuc29sCgpjb250cmFjdCBTdG9yYWdlIGlzIFByb3h5U3RvcmFnZSwgT3duYWJsZVN0b3JhZ2UsIEFzc2V0UmVnaXN0cnlTdG9yYWdlLCBMQU5EU3RvcmFnZSB7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9yZWdpc3RyeS9JQXNzZXRIb2xkZXIuc29sCgppbnRlcmZhY2UgSUFzc2V0SG9sZGVyIHsKICBmdW5jdGlvbiBvbkFzc2V0UmVjZWl2ZWQoCiAgICAvKiBhZGRyZXNzIF9hc3NldFJlZ2lzdHJ5ID09IG1zZy5zZW5kZXIgKi8KICAgIHVpbnQyNTYgX2Fzc2V0SWQsCiAgICBhZGRyZXNzIF9wcmV2aW91c0hvbGRlciwKICAgIGFkZHJlc3MgX2N1cnJlbnRIb2xkZXIsCiAgICBieXRlcyAgIF91c2VyRGF0YSwKICAgIGFkZHJlc3MgX29wZXJhdG9yLAogICAgYnl0ZXMgICBfb3BlcmF0b3JEYXRhCiAgKSBwdWJsaWM7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9yZWdpc3RyeS9JQXNzZXRSZWdpc3RyeS5zb2wKCmludGVyZmFjZSBJQXNzZXRSZWdpc3RyeSB7CgogIC8qKgogICAqIEdsb2JhbCBSZWdpc3RyeSBnZXR0ZXIgZnVuY3Rpb25zCiAgICovCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpOwogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpOwogIGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgogIC8qKgogICAqIEFzc2V0LWNlbnRyaWMgZ2V0dGVyIGZ1bmN0aW9ucwogICAqLwogIGZ1bmN0aW9uIGV4aXN0cyh1aW50MjU2IGFzc2V0SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBob2xkZXJPZih1aW50MjU2IGFzc2V0SWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKICBmdW5jdGlvbiBhc3NldERhdGEodWludDI1NiBhc3NldElkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nKTsKCiAgLyoqCiAgICogSG9sZGVyLWNlbnRyaWMgZ2V0dGVyIGZ1bmN0aW9ucwogICAqLwogIGZ1bmN0aW9uIGFzc2V0c0NvdW50KGFkZHJlc3MgaG9sZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYXNzZXRCeUluZGV4KGFkZHJlc3MgaG9sZGVyLCB1aW50MjU2IGluZGV4KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYWxsQXNzZXRzT2YoYWRkcmVzcyBob2xkZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2W10pOwoKICAvKioKICAgKiBUcmFuc2ZlciBPcGVyYXRpb25zCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkLCBieXRlcyB1c2VyRGF0YSkgcHVibGljOwogIGZ1bmN0aW9uIG9wZXJhdG9yVHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkLCBieXRlcyB1c2VyRGF0YSwgYnl0ZXMgb3BlcmF0b3JEYXRhKSBwdWJsaWM7CgogIC8qKgogICAqIERhdGEgbW9kaWZpY2F0aW9uIG9wZXJhdGlvbnMKICAgKi8KICBmdW5jdGlvbiB1cGRhdGUodWludDI1NiBhc3NldElkLCBzdHJpbmcgZGF0YSkgcHVibGljOwoKICAvKioKICAgKiBTdXBwbHktYWx0ZXJpbmcgb3BlcmF0aW9ucwogICAqLwogIGZ1bmN0aW9uIGdlbmVyYXRlKHVpbnQyNTYgYXNzZXRJZCwgc3RyaW5nIGRhdGEpIHB1YmxpYzsKICBmdW5jdGlvbiBkZXN0cm95KHVpbnQyNTYgYXNzZXRJZCkgcHVibGljOwoKICAvKioKICAgKiBBdXRob3JpemF0aW9uIG9wZXJhdGlvbnMKICAgKi8KICBmdW5jdGlvbiBhdXRob3JpemVPcGVyYXRvcihhZGRyZXNzIG9wZXJhdG9yLCBib29sIGF1dGhvcml6ZWQpIHB1YmxpYzsKCiAgLyoqCiAgICogQXV0aG9yaXphdGlvbiBnZXR0ZXJzCiAgICovCiAgZnVuY3Rpb24gaXNPcGVyYXRvckF1dGhvcml6ZWRGb3IoYWRkcmVzcyBvcGVyYXRvciwgYWRkcmVzcyBhc3NldEhvbGRlcikKICAgIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKCiAgLyoqCiAgICogRXZlbnRzCiAgICovCiAgZXZlbnQgVHJhbnNmZXIoCiAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgIGFkZHJlc3MgaW5kZXhlZCB0bywKICAgIHVpbnQyNTYgaW5kZXhlZCBhc3NldElkLAogICAgYWRkcmVzcyBvcGVyYXRvciwKICAgIGJ5dGVzIHVzZXJEYXRhLAogICAgYnl0ZXMgb3BlcmF0b3JEYXRhCiAgKTsKICBldmVudCBDcmVhdGUoCiAgICBhZGRyZXNzIGluZGV4ZWQgaG9sZGVyLAogICAgdWludDI1NiBpbmRleGVkIGFzc2V0SWQsCiAgICBhZGRyZXNzIGluZGV4ZWQgb3BlcmF0b3IsCiAgICBzdHJpbmcgZGF0YQogICk7CiAgZXZlbnQgVXBkYXRlKAogICAgdWludDI1NiBpbmRleGVkIGFzc2V0SWQsCiAgICBhZGRyZXNzIGluZGV4ZWQgaG9sZGVyLAogICAgYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLAogICAgc3RyaW5nIGRhdGEKICApOwogIGV2ZW50IERlc3Ryb3koCiAgICBhZGRyZXNzIGluZGV4ZWQgaG9sZGVyLAogICAgdWludDI1NiBpbmRleGVkIGFzc2V0SWQsCiAgICBhZGRyZXNzIGluZGV4ZWQgb3BlcmF0b3IKICApOwogIGV2ZW50IEF1dGhvcml6ZU9wZXJhdG9yKAogICAgYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLAogICAgYWRkcmVzcyBpbmRleGVkIGhvbGRlciwKICAgIGJvb2wgYXV0aG9yaXplZAogICk7Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL3JlZ2lzdHJ5L1N0YW5kYXJkQXNzZXRSZWdpc3RyeS5zb2wKCmNvbnRyYWN0IFN0YW5kYXJkQXNzZXRSZWdpc3RyeSBpcyBTdG9yYWdlLCBJQXNzZXRSZWdpc3RyeSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vCiAgLy8gR2xvYmFsIEdldHRlcnMKICAvLwoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gX25hbWU7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBfc3ltYm9sOwogIH0KCiAgZnVuY3Rpb24gZGVzY3JpcHRpb24oKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBfZGVzY3JpcHRpb247CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBfY291bnQ7CiAgfQoKICAvLwogIC8vIEFzc2V0LWNlbnRyaWMgZ2V0dGVyIGZ1bmN0aW9ucwogIC8vCgogIGZ1bmN0aW9uIGV4aXN0cyh1aW50MjU2IGFzc2V0SWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfaG9sZGVyT2ZbYXNzZXRJZF0gIT0gMDsKICB9CgogIGZ1bmN0aW9uIGhvbGRlck9mKHVpbnQyNTYgYXNzZXRJZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgcmV0dXJuIF9ob2xkZXJPZlthc3NldElkXTsKICB9CgogIGZ1bmN0aW9uIGFzc2V0RGF0YSh1aW50MjU2IGFzc2V0SWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIF9hc3NldERhdGFbYXNzZXRJZF07CiAgfQoKICAvLwogIC8vIEhvbGRlci1jZW50cmljIGdldHRlciBmdW5jdGlvbnMKICAvLwoKICBmdW5jdGlvbiBhc3NldHNDb3VudChhZGRyZXNzIGhvbGRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIF9hc3NldHNPZltob2xkZXJdLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGFzc2V0QnlJbmRleChhZGRyZXNzIGhvbGRlciwgdWludDI1NiBpbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIF9hc3NldHNPZltob2xkZXJdW2luZGV4XTsKICB9CgogIGZ1bmN0aW9uIGFzc2V0c09mKGFkZHJlc3MgaG9sZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10pIHsKICAgIHJldHVybiBhbGxBc3NldHNPZihob2xkZXIpOwogIH0KCiAgZnVuY3Rpb24gYWxsQXNzZXRzT2YoYWRkcmVzcyBob2xkZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSkgewogICAgdWludCBzaXplID0gX2Fzc2V0c09mW2hvbGRlcl0ubGVuZ3RoOwogICAgdWludFtdIG1lbW9yeSByZXN1bHQgPSBuZXcgdWludFtdKHNpemUpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgIHJlc3VsdFtpXSA9IF9hc3NldHNPZltob2xkZXJdW2ldOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIC8vCiAgLy8gQXV0aG9yaXphdGlvbiBnZXR0ZXJzCiAgLy8KCiAgZnVuY3Rpb24gaXNPcGVyYXRvckF1dGhvcml6ZWRGb3IoYWRkcmVzcyBvcGVyYXRvciwgYWRkcmVzcyBhc3NldEhvbGRlcikKICAgIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpCiAgewogICAgcmV0dXJuIF9vcGVyYXRvcnNbYXNzZXRIb2xkZXJdW29wZXJhdG9yXTsKICB9CgogIGZ1bmN0aW9uIGF1dGhvcml6ZU9wZXJhdG9yKGFkZHJlc3Mgb3BlcmF0b3IsIGJvb2wgX2F1dGhvcml6ZWQpIHB1YmxpYyB7CiAgICBpZiAoX2F1dGhvcml6ZWQpIHsKICAgICAgcmVxdWlyZSghaXNPcGVyYXRvckF1dGhvcml6ZWRGb3Iob3BlcmF0b3IsIG1zZy5zZW5kZXIpKTsKICAgICAgX2FkZEF1dGhvcml6YXRpb24ob3BlcmF0b3IsIG1zZy5zZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmVxdWlyZShpc09wZXJhdG9yQXV0aG9yaXplZEZvcihvcGVyYXRvciwgbXNnLnNlbmRlcikpOwogICAgICBfY2xlYXJBdXRob3JpemF0aW9uKG9wZXJhdG9yLCBtc2cuc2VuZGVyKTsKICAgIH0KICAgIEF1dGhvcml6ZU9wZXJhdG9yKG9wZXJhdG9yLCBtc2cuc2VuZGVyLCBfYXV0aG9yaXplZCk7CiAgfQoKICBmdW5jdGlvbiBfYWRkQXV0aG9yaXphdGlvbihhZGRyZXNzIG9wZXJhdG9yLCBhZGRyZXNzIGhvbGRlcikgcHJpdmF0ZSB7CiAgICBfb3BlcmF0b3JzW2hvbGRlcl1bb3BlcmF0b3JdID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIF9jbGVhckF1dGhvcml6YXRpb24oYWRkcmVzcyBvcGVyYXRvciwgYWRkcmVzcyBob2xkZXIpIHByaXZhdGUgewogICAgX29wZXJhdG9yc1tob2xkZXJdW29wZXJhdG9yXSA9IGZhbHNlOwogIH0KCiAgLy8KICAvLyBJbnRlcm5hbCBPcGVyYXRpb25zCiAgLy8KCiAgZnVuY3Rpb24gX2FkZEFzc2V0VG8oYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkKSBpbnRlcm5hbCB7CiAgICBfaG9sZGVyT2ZbYXNzZXRJZF0gPSB0bzsKCiAgICB1aW50MjU2IGxlbmd0aCA9IGFzc2V0c0NvdW50KHRvKTsKCiAgICBfYXNzZXRzT2ZbdG9dLnB1c2goYXNzZXRJZCk7CgogICAgX2luZGV4T2ZBc3NldFthc3NldElkXSA9IGxlbmd0aDsKCiAgICBfY291bnQgPSBfY291bnQuYWRkKDEpOwogIH0KCiAgZnVuY3Rpb24gX2FkZEFzc2V0VG8oYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkLCBzdHJpbmcgZGF0YSkgaW50ZXJuYWwgewogICAgX2FkZEFzc2V0VG8odG8sIGFzc2V0SWQpOwoKICAgIF9hc3NldERhdGFbYXNzZXRJZF0gPSBkYXRhOwogIH0KCiAgZnVuY3Rpb24gX3JlbW92ZUFzc2V0RnJvbShhZGRyZXNzIGZyb20sIHVpbnQyNTYgYXNzZXRJZCkgaW50ZXJuYWwgewogICAgdWludDI1NiBhc3NldEluZGV4ID0gX2luZGV4T2ZBc3NldFthc3NldElkXTsKICAgIHVpbnQyNTYgbGFzdEFzc2V0SW5kZXggPSBhc3NldHNDb3VudChmcm9tKS5zdWIoMSk7CiAgICB1aW50MjU2IGxhc3RBc3NldElkID0gX2Fzc2V0c09mW2Zyb21dW2xhc3RBc3NldEluZGV4XTsKCiAgICBfaG9sZGVyT2ZbYXNzZXRJZF0gPSAwOwoKICAgIC8vIEluc2VydCB0aGUgbGFzdCBhc3NldCBpbnRvIHRoZSBwb3NpdGlvbiBwcmV2aW91c2x5IG9jY3VwaWVkIGJ5IHRoZSBhc3NldCB0byBiZSByZW1vdmVkCiAgICBfYXNzZXRzT2ZbZnJvbV1bYXNzZXRJbmRleF0gPSBsYXN0QXNzZXRJZDsKCiAgICAvLyBSZXNpemUgdGhlIGFycmF5CiAgICBfYXNzZXRzT2ZbZnJvbV1bbGFzdEFzc2V0SW5kZXhdID0gMDsKICAgIF9hc3NldHNPZltmcm9tXS5sZW5ndGgtLTsKCiAgICAvLyBSZW1vdmUgdGhlIGFycmF5IGlmIG5vIG1vcmUgYXNzZXRzIGFyZSBvd25lZCB0byBwcmV2ZW50IHBvbGx1dGlvbgogICAgaWYgKF9hc3NldHNPZltmcm9tXS5sZW5ndGggPT0gMCkgewogICAgICBkZWxldGUgX2Fzc2V0c09mW2Zyb21dOwogICAgfQoKICAgIC8vIFVwZGF0ZSB0aGUgaW5kZXggb2YgcG9zaXRpb25zIGZvciB0aGUgYXNzZXQKICAgIF9pbmRleE9mQXNzZXRbYXNzZXRJZF0gPSAwOwogICAgX2luZGV4T2ZBc3NldFtsYXN0QXNzZXRJZF0gPSBhc3NldEluZGV4OwoKICAgIF9jb3VudCA9IF9jb3VudC5zdWIoMSk7CiAgfQoKICAvLwogIC8vIFN1cHBseS1hbHRlcmluZyBmdW5jdGlvbnMKICAvLwoKICBmdW5jdGlvbiBnZW5lcmF0ZSh1aW50MjU2IGFzc2V0SWQpIHB1YmxpYyB7CiAgICBnZW5lcmF0ZShhc3NldElkLCBtc2cuc2VuZGVyLCAnJyk7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZSh1aW50MjU2IGFzc2V0SWQsIHN0cmluZyBkYXRhKSBwdWJsaWMgewogICAgZ2VuZXJhdGUoYXNzZXRJZCwgbXNnLnNlbmRlciwgZGF0YSk7CiAgfQoKICBmdW5jdGlvbiBnZW5lcmF0ZSh1aW50MjU2IGFzc2V0SWQsIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCBzdHJpbmcgZGF0YSkgcHVibGljIHsKICAgIGRvR2VuZXJhdGUoYXNzZXRJZCwgX2JlbmVmaWNpYXJ5LCBkYXRhKTsKICB9CgogIGZ1bmN0aW9uIGRvR2VuZXJhdGUodWludDI1NiBhc3NldElkLCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgc3RyaW5nIGRhdGEpIGludGVybmFsIHsKICAgIHJlcXVpcmUoX2hvbGRlck9mW2Fzc2V0SWRdID09IDApOwoKICAgIF9hZGRBc3NldFRvKF9iZW5lZmljaWFyeSwgYXNzZXRJZCwgZGF0YSk7CgogICAgQ3JlYXRlKF9iZW5lZmljaWFyeSwgYXNzZXRJZCwgbXNnLnNlbmRlciwgZGF0YSk7CiAgfQoKICBmdW5jdGlvbiBkZXN0cm95KHVpbnQyNTYgYXNzZXRJZCkgcHVibGljIHsKICAgIGFkZHJlc3MgaG9sZGVyID0gX2hvbGRlck9mW2Fzc2V0SWRdOwogICAgcmVxdWlyZShob2xkZXIgIT0gMCk7CgogICAgcmVxdWlyZShob2xkZXIgPT0gbXNnLnNlbmRlcgogICAgICAgICB8fCBpc09wZXJhdG9yQXV0aG9yaXplZEZvcihtc2cuc2VuZGVyLCBob2xkZXIpKTsKCiAgICBfcmVtb3ZlQXNzZXRGcm9tKGhvbGRlciwgYXNzZXRJZCk7CgogICAgRGVzdHJveShob2xkZXIsIGFzc2V0SWQsIG1zZy5zZW5kZXIpOwogIH0KCiAgLy8KICAvLyBUcmFuc2FjdGlvbiByZWxhdGVkIG9wZXJhdGlvbnMKICAvLwoKICBtb2RpZmllciBvbmx5SG9sZGVyKHVpbnQyNTYgYXNzZXRJZCkgewogICAgcmVxdWlyZShfaG9sZGVyT2ZbYXNzZXRJZF0gPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seU9wZXJhdG9yKHVpbnQyNTYgYXNzZXRJZCkgewogICAgcmVxdWlyZShfaG9sZGVyT2ZbYXNzZXRJZF0gPT0gbXNnLnNlbmRlcgogICAgICAgICB8fCBpc09wZXJhdG9yQXV0aG9yaXplZEZvcihtc2cuc2VuZGVyLCBfaG9sZGVyT2ZbYXNzZXRJZF0pKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IGFzc2V0SWQpCiAgICBvbmx5SG9sZGVyKGFzc2V0SWQpCiAgICBwdWJsaWMKICB7CiAgICByZXR1cm4gZG9TZW5kKHRvLCBhc3NldElkLCAnJywgMCwgJycpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkLCBieXRlcyBfdXNlckRhdGEpCiAgICBvbmx5SG9sZGVyKGFzc2V0SWQpCiAgICBwdWJsaWMKICB7CiAgICByZXR1cm4gZG9TZW5kKHRvLCBhc3NldElkLCBfdXNlckRhdGEsIDAsICcnKTsKICB9CgogIGZ1bmN0aW9uIG9wZXJhdG9yVHJhbnNmZXIoCiAgICBhZGRyZXNzIHRvLCB1aW50MjU2IGFzc2V0SWQsIGJ5dGVzIHVzZXJEYXRhLCBieXRlcyBvcGVyYXRvckRhdGEKICApCiAgICBvbmx5T3BlcmF0b3IoYXNzZXRJZCkKICAgIHB1YmxpYwogIHsKICAgIHJldHVybiBkb1NlbmQodG8sIGFzc2V0SWQsIHVzZXJEYXRhLCBtc2cuc2VuZGVyLCBvcGVyYXRvckRhdGEpOwogIH0KCiAgZnVuY3Rpb24gZG9TZW5kKAogICAgYWRkcmVzcyB0bywgdWludDI1NiBhc3NldElkLCBieXRlcyB1c2VyRGF0YSwgYWRkcmVzcyBvcGVyYXRvciwgYnl0ZXMgb3BlcmF0b3JEYXRhCiAgKQogICAgaW50ZXJuYWwKICB7CiAgICBhZGRyZXNzIGhvbGRlciA9IF9ob2xkZXJPZlthc3NldElkXTsKICAgIF9yZW1vdmVBc3NldEZyb20oaG9sZGVyLCBhc3NldElkKTsKICAgIF9hZGRBc3NldFRvKHRvLCBhc3NldElkKTsKCiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgRUlQIDgyMAogICAgaWYgKGlzQ29udHJhY3QodG8pKSB7CiAgICAgIHJlcXVpcmUoX3JlZW50cmFuY3kgPT0gZmFsc2UpOwogICAgICBfcmVlbnRyYW5jeSA9IHRydWU7CiAgICAgIElBc3NldEhvbGRlcih0bykub25Bc3NldFJlY2VpdmVkKGFzc2V0SWQsIGhvbGRlciwgdG8sIHVzZXJEYXRhLCBvcGVyYXRvciwgb3BlcmF0b3JEYXRhKTsKICAgICAgX3JlZW50cmFuY3kgPSBmYWxzZTsKICAgIH0KCiAgICBUcmFuc2Zlcihob2xkZXIsIHRvLCBhc3NldElkLCBvcGVyYXRvciwgdXNlckRhdGEsIG9wZXJhdG9yRGF0YSk7CiAgfQoKICAvLwogIC8vIFVwZGF0ZSByZWxhdGVkIGZ1bmN0aW9ucwogIC8vCgogIG1vZGlmaWVyIG9ubHlJZlVwZGF0ZUFsbG93ZWQodWludDI1NiBhc3NldElkKSB7CiAgICByZXF1aXJlKF9ob2xkZXJPZlthc3NldElkXSA9PSBtc2cuc2VuZGVyCiAgICAgICAgIHx8IGlzT3BlcmF0b3JBdXRob3JpemVkRm9yKG1zZy5zZW5kZXIsIF9ob2xkZXJPZlthc3NldElkXSkpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZSh1aW50MjU2IGFzc2V0SWQsIHN0cmluZyBkYXRhKSBvbmx5SWZVcGRhdGVBbGxvd2VkKGFzc2V0SWQpIHB1YmxpYyB7CiAgICBfYXNzZXREYXRhW2Fzc2V0SWRdID0gZGF0YTsKICAgIFVwZGF0ZShhc3NldElkLCBfaG9sZGVyT2ZbYXNzZXRJZF0sIG1zZy5zZW5kZXIsIGRhdGEpOwogIH0KCiAgLy8KICAvLyBVdGlsaXRpZXMKICAvLwoKICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgYWRkcikgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IHNpemU7CiAgICBhc3NlbWJseSB7IHNpemUgOj0gZXh0Y29kZXNpemUoYWRkcikgfQogICAgcmV0dXJuIHNpemUgPiAwOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL3VwZ3JhZGFibGUvSUFwcGxpY2F0aW9uLnNvbAoKY29udHJhY3QgSUFwcGxpY2F0aW9uIHsKICBmdW5jdGlvbiBpbml0aWFsaXplKGJ5dGVzIGRhdGEpIHB1YmxpYzsKfQoKLy8gRmlsZTogY29udHJhY3RzL3VwZ3JhZGFibGUvT3duYWJsZS5zb2wKCmNvbnRyYWN0IE93bmFibGUgaXMgU3RvcmFnZSB7CgogIGV2ZW50IE93bmVyVXBkYXRlKGFkZHJlc3MgX3ByZXZPd25lciwgYWRkcmVzcyBfbmV3T3duZXIpOwoKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIGluaXRpYWxpemUoYnl0ZXMpIHB1YmxpYyB7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7CiAgICBvd25lciA9IF9uZXdPd25lcjsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9sYW5kL0lMQU5EUmVnaXN0cnkuc29sCgppbnRlcmZhY2UgSUxBTkRSZWdpc3RyeSB7CgogIC8vIExBTkQgY2FuIGJlIGFzc2lnbmVkIGJ5IHRoZSBvd25lcgogIGZ1bmN0aW9uIGFzc2lnbk5ld1BhcmNlbChpbnQgeCwgaW50IHksIGFkZHJlc3MgYmVuZWZpY2lhcnksIHN0cmluZyBkYXRhKSBwdWJsaWM7CiAgZnVuY3Rpb24gYXNzaWduTmV3UGFyY2VsKGludCB4LCBpbnQgeSwgYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljOwogIGZ1bmN0aW9uIGFzc2lnbk11bHRpcGxlUGFyY2VscyhpbnRbXSB4LCBpbnRbXSB5LCBhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWM7CgogIC8vIEFmdGVyIG9uZSB5ZWFyLCBsYW5kIGNhbiBiZSBjbGFpbWVkIGZyb20gYW4gaW5hY3RpdmUgcHVibGljIGtleQogIGZ1bmN0aW9uIHBpbmcoKSBwdWJsaWM7CiAgZnVuY3Rpb24gY2xlYXJMYW5kKGludFtdIHgsIGludFtdIHkpIHB1YmxpYzsKCiAgLy8gTEFORC1jZW50cmljIGdldHRlcnMKICBmdW5jdGlvbiBlbmNvZGVUb2tlbklkKGludCB4LCBpbnQgeSkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gZGVjb2RlVG9rZW5JZCh1aW50IHZhbHVlKSB2aWV3IHB1YmxpYyByZXR1cm5zIChpbnQsIGludCk7CiAgZnVuY3Rpb24gZXhpc3RzKGludCB4LCBpbnQgeSkgdmlldyBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gb3duZXJPZkxhbmQoaW50IHgsIGludCB5KSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKTsKICBmdW5jdGlvbiBsYW5kRGF0YShpbnQgeCwgaW50IHkpIHZpZXcgcHVibGljIHJldHVybnMgKHN0cmluZyk7CgogIC8vIFRyYW5zZmVyIExBTkQKICBmdW5jdGlvbiB0cmFuc2ZlckxhbmQoaW50IHgsIGludCB5LCBhZGRyZXNzIHRvKSBwdWJsaWM7CiAgZnVuY3Rpb24gdHJhbnNmZXJNYW55TGFuZChpbnRbXSB4LCBpbnRbXSB5LCBhZGRyZXNzIHRvKSBwdWJsaWM7CgogIC8vIFVwZGF0ZSBMQU5ECiAgZnVuY3Rpb24gdXBkYXRlTGFuZERhdGEoaW50IHgsIGludCB5LCBzdHJpbmcgZGF0YSkgcHVibGljOwogIGZ1bmN0aW9uIHVwZGF0ZU1hbnlMYW5kRGF0YShpbnRbXSB4LCBpbnRbXSB5LCBzdHJpbmcgZGF0YSkgcHVibGljOwp9CgovLyBGaWxlOiBjb250cmFjdHMvbGFuZC9MQU5EUmVnaXN0cnkuc29sCgpjb250cmFjdCBMQU5EUmVnaXN0cnkgaXMgU3RvcmFnZSwKICBPd25hYmxlLCBTdGFuZGFyZEFzc2V0UmVnaXN0cnksCiAgSUxBTkRSZWdpc3RyeQp7CgogIGZ1bmN0aW9uIGluaXRpYWxpemUoYnl0ZXMgLyogZGF0YSAqLykgcHVibGljIHsKICAgIF9uYW1lID0gJ0RlY2VudHJhbGFuZCBMQU5EJzsKICAgIF9zeW1ib2wgPSAnTEFORCc7CiAgICBfZGVzY3JpcHRpb24gPSAnQ29udHJhY3QgdGhhdCBzdG9yZXMgdGhlIERlY2VudHJhbGFuZCBMQU5EIHJlZ2lzdHJ5JzsKICB9CgogIC8vCiAgLy8gTGFuZCBpcyBhc3NpZ25hYmxlIGJ5IHRoZSBvd25lcgogIC8vCgogIGZ1bmN0aW9uIGFzc2lnbk5ld1BhcmNlbChpbnQgeCwgaW50IHksIGFkZHJlc3MgYmVuZWZpY2lhcnksIHN0cmluZyBkYXRhKSBwdWJsaWMgewogICAgZ2VuZXJhdGUoZW5jb2RlVG9rZW5JZCh4LCB5KSwgYmVuZWZpY2lhcnksIGRhdGEpOwogIH0KCiAgZnVuY3Rpb24gYXNzaWduTmV3UGFyY2VsKGludCB4LCBpbnQgeSwgYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHsKICAgIGdlbmVyYXRlKGVuY29kZVRva2VuSWQoeCwgeSksIGJlbmVmaWNpYXJ5LCAnJyk7CiAgfQoKICBmdW5jdGlvbiBhc3NpZ25NdWx0aXBsZVBhcmNlbHMoaW50W10geCwgaW50W10geSwgYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHsKICAgIGZvciAodWludCBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHsKICAgICAgZ2VuZXJhdGUoZW5jb2RlVG9rZW5JZCh4W2ldLCB5W2ldKSwgYmVuZWZpY2lhcnksICcnKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdlbmVyYXRlKHVpbnQyNTYgYXNzZXRJZCwgYWRkcmVzcyBiZW5lZmljaWFyeSwgc3RyaW5nIGRhdGEpIG9ubHlPd25lciBwdWJsaWMgewogICAgZG9HZW5lcmF0ZShhc3NldElkLCBiZW5lZmljaWFyeSwgZGF0YSk7CiAgfQoKICBmdW5jdGlvbiBkZXN0cm95KHVpbnQyNTYgYXNzZXRJZCkgb25seU93bmVyIHB1YmxpYyB7CiAgICBfcmVtb3ZlQXNzZXRGcm9tKF9ob2xkZXJPZlthc3NldElkXSwgYXNzZXRJZCk7CiAgICBEZXN0cm95KF9ob2xkZXJPZlthc3NldElkXSwgYXNzZXRJZCwgbXNnLnNlbmRlcik7CiAgfQoKICAvLwogIC8vIEluYWN0aXZlIGtleXMgYWZ0ZXIgMSB5ZWFyIGxvc2Ugb3duZXJzaGlwCiAgLy8KCiAgZnVuY3Rpb24gcGluZygpIHB1YmxpYyB7CiAgICBsYXRlc3RQaW5nW21zZy5zZW5kZXJdID0gbm93OwogIH0KCiAgZnVuY3Rpb24gc2V0TGF0ZXN0VG9Ob3coYWRkcmVzcyB1c2VyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIGxhdGVzdFBpbmdbdXNlcl0gPSBub3c7CiAgfQoKICBmdW5jdGlvbiBjbGVhckxhbmQoaW50W10geCwgaW50W10geSkgcHVibGljIHsKICAgIHJlcXVpcmUoeC5sZW5ndGggPT0geS5sZW5ndGgpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykgewogICAgICB1aW50IGxhbmRJZCA9IGVuY29kZVRva2VuSWQoeFtpXSwgeVtpXSk7CiAgICAgIGFkZHJlc3MgaG9sZGVyID0gaG9sZGVyT2YobGFuZElkKTsKICAgICAgaWYgKGxhdGVzdFBpbmdbaG9sZGVyXSA8IG5vdyAtIDEgeWVhcnMpIHsKICAgICAgICBfcmVtb3ZlQXNzZXRGcm9tKGhvbGRlciwgbGFuZElkKTsKICAgICAgICBEZXN0cm95KGhvbGRlciwgbGFuZElkLCBtc2cuc2VuZGVyKTsKICAgICAgfQogICAgfQogIH0KCiAgLy8KICAvLyBMQU5EIEdldHRlcnMKICAvLwoKICBmdW5jdGlvbiBlbmNvZGVUb2tlbklkKGludCB4LCBpbnQgeSkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuICgodWludCh4KSAqIGZhY3RvcikgJiBjbGVhckxvdykgfCAodWludCh5KSAmIGNsZWFySGlnaCk7CiAgfQoKICBmdW5jdGlvbiBkZWNvZGVUb2tlbklkKHVpbnQgdmFsdWUpIHZpZXcgcHVibGljIHJldHVybnMgKGludCwgaW50KSB7CiAgICBpbnQgeCA9IGludCgodmFsdWUgJiBjbGVhckxvdykgPj4gMTI4KTsKICAgIGludCB5ID0gaW50KHZhbHVlICYgY2xlYXJIaWdoKTsKICAgIHJldHVybiAoeCwgeSk7CiAgfQoKICBmdW5jdGlvbiBleGlzdHMoaW50IHgsIGludCB5KSB2aWV3IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gZXhpc3RzKGVuY29kZVRva2VuSWQoeCwgeSkpOwogIH0KCiAgZnVuY3Rpb24gb3duZXJPZkxhbmQoaW50IHgsIGludCB5KSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gaG9sZGVyT2YoZW5jb2RlVG9rZW5JZCh4LCB5KSk7CiAgfQoKICBmdW5jdGlvbiBvd25lck9mTGFuZE1hbnkoaW50W10geCwgaW50W10geSkgdmlldyBwdWJsaWMgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICByZXF1aXJlKHgubGVuZ3RoID4gMCk7CiAgICByZXF1aXJlKHgubGVuZ3RoID09IHkubGVuZ3RoKTsKCiAgICBhZGRyZXNzW10gbWVtb3J5IGFkZHJzID0gbmV3IGFkZHJlc3NbXSh4Lmxlbmd0aCk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7CiAgICAgIGFkZHJzW2ldID0gb3duZXJPZkxhbmQoeFtpXSwgeVtpXSk7CiAgICB9CgogICAgcmV0dXJuIGFkZHJzOwogIH0KCiAgZnVuY3Rpb24gbGFuZERhdGEoaW50IHgsIGludCB5KSB2aWV3IHB1YmxpYyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBhc3NldERhdGEoZW5jb2RlVG9rZW5JZCh4LCB5KSk7CiAgfQoKICAvLwogIC8vIFRyYW5zZmVyIExBTkQKICAvLwoKICBmdW5jdGlvbiB0cmFuc2ZlckxhbmQoaW50IHgsIGludCB5LCBhZGRyZXNzIHRvKSBwdWJsaWMgewogICAgcmV0dXJuIHRyYW5zZmVyKHRvLCBlbmNvZGVUb2tlbklkKHgsIHkpKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyTWFueUxhbmQoaW50W10geCwgaW50W10geSwgYWRkcmVzcyB0bykgcHVibGljIHsKICAgIHJlcXVpcmUoeC5sZW5ndGggPT0geS5sZW5ndGgpOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykgewogICAgICByZXR1cm4gdHJhbnNmZXIodG8sIGVuY29kZVRva2VuSWQoeFtpXSwgeVtpXSkpOwogICAgfQogIH0KCiAgLy8KICAvLyBVcGRhdGUgTEFORAogIC8vCgogIGZ1bmN0aW9uIHVwZGF0ZUxhbmREYXRhKGludCB4LCBpbnQgeSwgc3RyaW5nIGRhdGEpIHB1YmxpYyB7CiAgICByZXR1cm4gdXBkYXRlKGVuY29kZVRva2VuSWQoeCwgeSksIGRhdGEpOwogIH0KCiAgZnVuY3Rpb24gdXBkYXRlTWFueUxhbmREYXRhKGludFtdIHgsIGludFtdIHksIHN0cmluZyBkYXRhKSBwdWJsaWMgewogICAgcmVxdWlyZSh4Lmxlbmd0aCA9PSB5Lmxlbmd0aCk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7CiAgICAgIHVwZGF0ZShlbmNvZGVUb2tlbklkKHhbaV0sIHlbaV0pLCBkYXRhKTsKICAgIH0KICB9Cn0='.
	

]
