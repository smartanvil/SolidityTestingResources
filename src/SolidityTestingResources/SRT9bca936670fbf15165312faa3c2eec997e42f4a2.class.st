Class {
	#name : #SRT9bca936670fbf15165312faa3c2eec997e42f4a2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9bca936670fbf15165312faa3c2eec997e42f4a2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIFNhZmVNYXRoMwovLwovLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKLy8gKG5vIG5lZWQgdG8gaW1wbGVtZW50IGRpdmlzaW9uKQovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpsaWJyYXJ5IFNhZmVNYXRoMyB7CgogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBjKSB7CiAgICBjID0gYSAqIGI7CiAgICBhc3NlcnQoIGEgPT0gMCB8fCBjIC8gYSA9PSBiICk7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydCggYiA8PSBhICk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYykgewogICAgYyA9IGEgKyBiOwogICAgYXNzZXJ0KCBjID49IGEgKTsKICB9Cgp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLwovLyBPd25lZCBjb250cmFjdAovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250cmFjdCBPd25lZCB7CgogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAvLyBFdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVyUHJvcG9zZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8pOwoKICAvLyBNb2RpZmllciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IG93bmVyICk7CiAgICBfOwogIH0KCiAgLy8gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICBmdW5jdGlvbiBPd25lZCgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZSggX25ld093bmVyICE9IG93bmVyICk7CiAgICByZXF1aXJlKCBfbmV3T3duZXIgIT0gYWRkcmVzcygweDApICk7CiAgICBPd25lcnNoaXBUcmFuc2ZlclByb3Bvc2VkKG93bmVyLCBfbmV3T3duZXIpOwogICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgfQoKICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8KLy8gRVJDIFRva2VuIFN0YW5kYXJkICMyMCBJbnRlcmZhY2UKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvYmxvYi9tYXN0ZXIvRUlQUy9laXAtMjAtdG9rZW4tc3RhbmRhcmQubWQKLy8KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewoKICAvLyBFdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwoKICAvLyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7Cgp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLwovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwCi8vCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVkIHsKICAKICB1c2luZyBTYWZlTWF0aDMgZm9yIHVpbnQ7CgogIHVpbnQgcHVibGljIHRva2Vuc0lzc3VlZFRvdGFsID0gMDsKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGFsbG93ZWQ7CgogIC8vIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgLyogVG90YWwgdG9rZW4gc3VwcGx5ICovCgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2Vuc0lzc3VlZFRvdGFsOwogIH0KCiAgLyogR2V0IHRoZSBhY2NvdW50IGJhbGFuY2UgZm9yIGFuIGFkZHJlc3MgKi8KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgLyogVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50ICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gYW1vdW50IHNlbnQgY2Fubm90IGV4Y2VlZCBiYWxhbmNlCiAgICByZXF1aXJlKCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICk7CgogICAgLy8gdXBkYXRlIGJhbGFuY2VzCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gICAgICAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgogICAgLy8gbG9nIGV2ZW50CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKiBBbGxvdyBfc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCB1cCB0byBfYW1vdW50ICovCgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vIGFwcHJvdmFsIGFtb3VudCBjYW5ub3QgZXhjZWVkIHRoZSBiYWxhbmNlCiAgICByZXF1aXJlICggYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCApOwogICAgICAKICAgIC8vIHVwZGF0ZSBhbGxvd2VkIGFtb3VudAogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfYW1vdW50OwogICAgCiAgICAvLyBsb2cgZXZlbnQKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyogU3BlbmRlciBvZiB0b2tlbnMgdHJhbnNmZXJzIHRva2VucyBmcm9tIHRoZSBvd25lcidzIGJhbGFuY2UgKi8KICAvKiBNdXN0IGJlIHByZS1hcHByb3ZlZCBieSBvd25lciAqLwoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvLyBiYWxhbmNlIGNoZWNrcwogICAgcmVxdWlyZSggYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQgKTsKICAgIHJlcXVpcmUoIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCiAgICAvLyB1cGRhdGUgYmFsYW5jZXMgYW5kIGFsbG93ZWQgYW1vdW50CiAgICBiYWxhbmNlc1tfZnJvbV0gICAgICAgICAgICA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gICAgICAgICAgICAgID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgogICAgLy8gbG9nIGV2ZW50CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyogUmV0dXJucyB0aGUgYW1vdW50IG9mIHRva2VucyBhcHByb3ZlZCBieSB0aGUgb3duZXIgKi8KICAvKiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBieSBzcGVuZGVyICovCgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgoKCmNvbnRyYWN0IFpaWlRva2VuIGlzIEVSQzIwVG9rZW4gewoKICAvKiBVdGlsaXR5IHZhcmlhYmxlICovCiAgCiAgdWludCBjb25zdGFudCBFNiA9IDEwKio2OwogIAogIC8qIEJhc2ljIHRva2VuIGRhdGEgKi8KCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lICAgICA9ICJaWlogQ29pbiI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgICA9ICJaWloiOwogIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA2OwoKICAvKiBXYWxsZXQgYWRkcmVzc2VzIC0gaW5pdGlhbGx5IHNldCB0byBvd25lciBhdCBkZXBsb3ltZW50ICovCiAgCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIGFkZHJlc3MgcHVibGljIGFkbWluV2FsbGV0OwoKICAvKiBJQ08gZGF0ZXMgKi8KCiAgdWludCBwdWJsaWMgY29uc3RhbnQgREFURV9QUkVTQUxFX1NUQVJUID0gMTUwMDE1MzIwMDsgLy8KICB1aW50IHB1YmxpYyBjb25zdGFudCBEQVRFX1BSRVNBTEVfRU5EICAgPSAxNTEwNzU4MDAwOyAvLyAxNS1Ob3YtMjAxNyAxNTowMCBVVEMKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgREFURV9JQ09fU1RBUlQgPSAxNTExOTY3NjAwOyAvLyAyOS1Ob3YtMjAxNyAxNTowMCBVVEMKICB1aW50IHB1YmxpYyBjb25zdGFudCBEQVRFX0lDT19FTkQgICA9IDE1MTM3ODIwMDA7IC8vIDIwLURlYy0yMDE3IDE1OjAwIFVUQwoKICAvKiBJQ08gdG9rZW5zIHBlciBFVEggKi8KICAKICB1aW50IHB1YmxpYyB0b2tlbnNQZXJFdGggPSAzMjAwICogRTY7IC8vIHJhdGUgZHVyaW5nIGxhc3QgSUNPIHdlZWsKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgQk9OVVNfUFJFU0FMRSAgICAgID0gNDA7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgQk9OVVNfSUNPX1dFRUtfT05FID0gMjA7CiAgdWludCBwdWJsaWMgY29uc3RhbnQgQk9OVVNfSUNPX1dFRUtfVFdPID0gMTA7CgogIC8qIE90aGVyIElDTyBwYXJhbWV0ZXJzICovICAKICAKICB1aW50IHB1YmxpYyBjb25zdGFudCBUT0tFTl9TVVBQTFlfVE9UQUwgPSA0MDAgKiBFNiAqIEU2OyAvLyA0MDAgbW0gdG9rZW5zCiAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fU1VQUExZX0lDTyAgID0gMzIwICogRTYgKiBFNjsgLy8gMzIwIG1tIHRva2VucwogIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOX1NVUFBMWV9NS1QgICA9ICA4MCAqIEU2ICogRTY7IC8vICA4MCBtbSB0b2tlbnMKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9FVEhfQ0FQID0gIDE1MDAwIGV0aGVyOwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fRlVORElOR19HT0FMID0gIDQwICogRTYgKiBFNjsgLy8gNDAgbW0gdG9rZW5zCiAgCiAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0NPTlRSSUJVVElPTiA9IDEgZXRoZXIgLyAyMDA7IC8vIDAuMDA1IEV0aGVyCiAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0NPTlRSSUJVVElPTiA9IDMwMCBldGhlcjsKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09PTERPV05fUEVSSU9EID0gIDIgZGF5czsKICB1aW50IHB1YmxpYyBjb25zdGFudCBDTEFXQkFDS19QRVJJT0QgPSA5MCBkYXlzOwoKICAvKiBDcm93ZHNhbGUgdmFyaWFibGVzICovCgogIHVpbnQgcHVibGljIGljb0V0aGVyUmVjZWl2ZWQgPSAwOyAvLyBFdGhlciBhY3R1YWxseSByZWNlaXZlZCBieSB0aGUgY29udHJhY3QKCiAgdWludCBwdWJsaWMgdG9rZW5zSXNzdWVkSWNvICAgPSAwOwogIHVpbnQgcHVibGljIHRva2Vuc0lzc3VlZE1rdCAgID0gMDsKICAKICB1aW50IHB1YmxpYyB0b2tlbnNDbGFpbWVkQWlyZHJvcCA9IDA7CiAgCiAgLyogS2VlcCB0cmFjayBvZiBFdGhlciBjb250cmlidXRlZCBhbmQgdG9rZW5zIHJlY2VpdmVkIGR1cmluZyBDcm93ZHNhbGUgKi8KICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGljb0V0aGVyQ29udHJpYnV0ZWQ7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBpY29Ub2tlbnNSZWNlaXZlZDsKCiAgLyogS2VlcCB0cmFjayBvZiBwYXJ0aWNpcGFudHMgd2hvIAogIC8qIC0gaGF2ZSByZWNlaXZlZCB0aGVpciBhaXJkcm9wcGVkIHRva2VucyBhZnRlciBhIHN1Y2Nlc3NmdWwgSUNPICovCiAgLyogLSBvciBoYXZlIHJlY2xhaW1lZCB0aGVpciBjb250cmlidXRpb25zIGluIGNhc2Ugb2YgZmFpbGVkIENyb3dkc2FsZSAqLwogIC8qIC0gYXJlIGxvY2tlZCAqLwogIAogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgYWlyZHJvcENsYWltZWQ7CiAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZWZ1bmRDbGFpbWVkOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgbG9ja2VkOwoKICAvLyBFdmVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgCiAgZXZlbnQgV2FsbGV0VXBkYXRlZChhZGRyZXNzIF9uZXdXYWxsZXQpOwogIGV2ZW50IEFkbWluV2FsbGV0VXBkYXRlZChhZGRyZXNzIF9uZXdBZG1pbldhbGxldCk7CiAgZXZlbnQgVG9rZW5zUGVyRXRoVXBkYXRlZCh1aW50IF90b2tlbnNQZXJFdGgpOwogIGV2ZW50IFRva2Vuc01pbnRlZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF90b2tlbnMsIHVpbnQgX2JhbGFuY2UpOwogIGV2ZW50IFRva2Vuc0lzc3VlZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF90b2tlbnMsIHVpbnQgX2JhbGFuY2UsIHVpbnQgX2V0aGVyQ29udHJpYnV0ZWQpOwogIGV2ZW50IFJlZnVuZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF9hbW91bnQsIHVpbnQgX3Rva2Vucyk7CiAgZXZlbnQgQWlyZHJvcChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF9hbW91bnQsIHVpbnQgX2JhbGFuY2UpOwogIGV2ZW50IExvY2tSZW1vdmVkKGFkZHJlc3MgaW5kZXhlZCBfcGFydGljaXBhbnQpOwoKICAvLyBCYXNpYyBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tCgogIC8qIEluaXRpYWxpemUgKG93bmVyIGlzIHNldCB0byBtc2cuc2VuZGVyIGJ5IE93bmVkLk93bmVkKCkgKi8KCiAgZnVuY3Rpb24gWlpaVG9rZW4oKSB7CiAgICByZXF1aXJlKCBUT0tFTl9TVVBQTFlfSUNPICsgVE9LRU5fU1VQUExZX01LVCA9PSBUT0tFTl9TVVBQTFlfVE9UQUwgKTsKICAgIHdhbGxldCA9IG93bmVyOwogICAgYWRtaW5XYWxsZXQgPSBvd25lcjsKICB9CgogIC8qIEZhbGxiYWNrICovCiAgCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBidXlUb2tlbnMoKTsKICB9CiAgCiAgLy8gSW5mb3JtYXRpb24gZnVuY3Rpb25zIC0tLS0tLS0tLS0tLQogIAogIC8qIFdoYXQgdGltZSBpcyBpdD8gKi8KICAKICBmdW5jdGlvbiBhdE5vdygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBub3c7CiAgfQogIAogIC8qIEhhcyB0aGUgbWluaW11bSB0aHJlc2hvbGQgYmVlbiByZWFjaGVkPyAqLwogIAogIGZ1bmN0aW9uIGljb1RocmVzaG9sZFJlYWNoZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sIHRocmVzaG9sZFJlYWNoZWQpIHsKICAgICBpZiAodG9rZW5zSXNzdWVkSWNvIDwgTUlOX0ZVTkRJTkdfR09BTCkgcmV0dXJuIGZhbHNlOwogICAgIHJldHVybiB0cnVlOwogIH0gIAogIAogIC8qIEFyZSB0b2tlbnMgdHJhbnNmZXJhYmxlPyAqLwoKICBmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSgpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgdHJhbnNmZXJhYmxlKSB7CiAgICAgaWYgKCAhaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgcmV0dXJuIGZhbHNlOwogICAgIGlmICggYXROb3coKSA8IERBVEVfSUNPX0VORCArIENPT0xET1dOX1BFUklPRCApIHJldHVybiBmYWxzZTsKICAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgLy8gTG9jayBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBNYW5hZ2UgbG9ja2VkICovCgogIGZ1bmN0aW9uIHJlbW92ZUxvY2soYWRkcmVzcyBfcGFydGljaXBhbnQpIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gYWRtaW5XYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBvd25lciApOwogICAgbG9ja2VkW19wYXJ0aWNpcGFudF0gPSBmYWxzZTsKICAgIExvY2tSZW1vdmVkKF9wYXJ0aWNpcGFudCk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVMb2NrTXVsdGlwbGUoYWRkcmVzc1tdIF9wYXJ0aWNpcGFudHMpIHsKICAgIHJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gYWRtaW5XYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBvd25lciApOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX3BhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykgewogICAgICBsb2NrZWRbX3BhcnRpY2lwYW50c1tpXV0gPSBmYWxzZTsKICAgICAgTG9ja1JlbW92ZWQoX3BhcnRpY2lwYW50c1tpXSk7CiAgICB9CiAgfQoKICAvLyBPd25lciBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tCiAgCiAgLyogQ2hhbmdlIHRoZSBjcm93ZHNhbGUgd2FsbGV0IGFkZHJlc3MgKi8KCiAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIF93YWxsZXQgIT0gYWRkcmVzcygweDApICk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgV2FsbGV0VXBkYXRlZCh3YWxsZXQpOwogIH0KCiAgLyogQ2hhbmdlIHRoZSBhZG1pbiB3YWxsZXQgYWRkcmVzcyAqLwoKICBmdW5jdGlvbiBzZXRBZG1pbldhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBfd2FsbGV0ICE9IGFkZHJlc3MoMHgwKSApOwogICAgYWRtaW5XYWxsZXQgPSBfd2FsbGV0OwogICAgQWRtaW5XYWxsZXRVcGRhdGVkKGFkbWluV2FsbGV0KTsKICB9CgogIC8qIENoYW5nZSB0b2tlbnNQZXJFdGggYmVmb3JlIElDTyBzdGFydCAqLwogIAogIGZ1bmN0aW9uIHVwZGF0ZVRva2Vuc1BlckV0aCh1aW50IF90b2tlbnNQZXJFdGgpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCBhdE5vdygpIDwgREFURV9QUkVTQUxFX1NUQVJUICk7CiAgICB0b2tlbnNQZXJFdGggPSBfdG9rZW5zUGVyRXRoOwogICAgVG9rZW5zUGVyRXRoVXBkYXRlZChfdG9rZW5zUGVyRXRoKTsKICB9CgogIC8qIE1pbnRpbmcgb2YgbWFya2V0aW5nIHRva2VucyBieSBvd25lciAqLwoKICBmdW5jdGlvbiBtaW50TWFya2V0aW5nKGFkZHJlc3MgX3BhcnRpY2lwYW50LCB1aW50IF90b2tlbnMpIG9ubHlPd25lciB7CiAgICAvLyBjaGVjayBhbW91bnQKICAgIHJlcXVpcmUoIF90b2tlbnMgPD0gVE9LRU5fU1VQUExZX01LVC5zdWIodG9rZW5zSXNzdWVkTWt0KSApOwogICAgCiAgICAvLyB1cGRhdGUgYmFsYW5jZXMKICAgIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0gPSBiYWxhbmNlc1tfcGFydGljaXBhbnRdLmFkZChfdG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZE1rdCAgICAgICAgPSB0b2tlbnNJc3N1ZWRNa3QuYWRkKF90b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLmFkZChfdG9rZW5zKTsKICAgIAogICAgLy8gbG9ja2VkCiAgICBsb2NrZWRbX3BhcnRpY2lwYW50XSA9IHRydWU7CiAgICAKICAgIC8vIGxvZyB0aGUgbWluaXRpbmcKICAgIFRyYW5zZmVyKDB4MCwgX3BhcnRpY2lwYW50LCBfdG9rZW5zKTsKICAgIFRva2Vuc01pbnRlZChfcGFydGljaXBhbnQsIF90b2tlbnMsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogIH0KCiAgLyogT3duZXIgY2xhd2JhY2sgb2YgcmVtYWluaW5nIGZ1bmRzIGFmdGVyIGNsYXdiYWNrIHBlcmlvZCAqLwogIC8qIChmb3IgdXNlIGluIGNhc2Ugb2YgYSBmYWlsZWQgQ3J3b2RzYWxlKSAqLwogIAogIGZ1bmN0aW9uIG93bmVyQ2xhd2JhY2soKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZSggYXROb3coKSA+IERBVEVfSUNPX0VORCArIENMQVdCQUNLX1BFUklPRCApOwogICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICAvKiBUcmFuc2ZlciBvdXQgYW55IGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2VucyAqLwoKICBmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIHJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogIH0KCiAgLy8gUHJpdmF0ZSBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLQoKICAvKiBBY2NlcHQgRVRIIGR1cmluZyBjcm93ZHNhbGUgKGNhbGxlZCBieSBkZWZhdWx0IGZ1bmN0aW9uKSAqLwoKICBmdW5jdGlvbiBidXlUb2tlbnMoKSBwcml2YXRlIHsKICAgIHVpbnQgdHMgPSBhdE5vdygpOwogICAgYm9vbCBpc1ByZXNhbGUgPSBmYWxzZTsKICAgIGJvb2wgaXNJY28gPSBmYWxzZTsKICAgIHVpbnQgdG9rZW5zID0gMDsKICAgIAogICAgLy8gbWluaW11bSBjb250cmlidXRpb24KICAgIHJlcXVpcmUoIG1zZy52YWx1ZSA+PSBNSU5fQ09OVFJJQlVUSU9OICk7CiAgICAKICAgIC8vIG9uZSBhZGRyZXNzIHRyYW5zZmVyIGhhcmQgY2FwCiAgICByZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpIDw9IE1BWF9DT05UUklCVVRJT04gKTsKCiAgICAvLyBjaGVjayBkYXRlcyBmb3IgcHJlc2FsZSBvciBJQ08KICAgIGlmICh0cyA+IERBVEVfUFJFU0FMRV9TVEFSVCAmJiB0cyA8IERBVEVfUFJFU0FMRV9FTkQpIGlzUHJlc2FsZSA9IHRydWU7ICAKICAgIGlmICh0cyA+IERBVEVfSUNPX1NUQVJUICYmIHRzIDwgREFURV9JQ09fRU5EKSBpc0ljbyA9IHRydWU7ICAKICAgIHJlcXVpcmUoIGlzUHJlc2FsZSB8fCBpc0ljbyApOwoKICAgIC8vIHByZXNhbGUgY2FwIGluIEV0aGVyCiAgICBpZiAoaXNQcmVzYWxlKSByZXF1aXJlKCBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpIDw9IFBSRVNBTEVfRVRIX0NBUCApOwogICAgCiAgICAvLyBnZXQgYmFzZWxpbmUgbnVtYmVyIG9mIHRva2VucwogICAgdG9rZW5zID0gdG9rZW5zUGVyRXRoLm11bChtc2cudmFsdWUpIC8gMSBldGhlcjsKICAgIAogICAgLy8gYXBwbHkgYm9udXNlcyAobm9uZSBmb3IgbGFzdCB3ZWVrKQogICAgaWYgKGlzUHJlc2FsZSkgewogICAgICB0b2tlbnMgPSB0b2tlbnMubXVsKDEwMCArIEJPTlVTX1BSRVNBTEUpIC8gMTAwOwogICAgfSBlbHNlIGlmICh0cyA8IERBVEVfSUNPX1NUQVJUICsgNyBkYXlzKSB7CiAgICAgIC8vIGZpcnN0IHdlZWsgaWNvIGJvbnVzCiAgICAgIHRva2VucyA9IHRva2Vucy5tdWwoMTAwICsgQk9OVVNfSUNPX1dFRUtfT05FKSAvIDEwMDsKICAgIH0gZWxzZSBpZiAodHMgPCBEQVRFX0lDT19TVEFSVCArIDE0IGRheXMpIHsKICAgICAgLy8gc2Vjb25kIHdlZWsgaWNvIGJvbnVzCiAgICAgIHRva2VucyA9IHRva2Vucy5tdWwoMTAwICsgQk9OVVNfSUNPX1dFRUtfVFdPKSAvIDEwMDsKICAgIH0KICAgIAogICAgLy8gSUNPIHRva2VuIHZvbHVtZSBjYXAKICAgIHJlcXVpcmUoIHRva2Vuc0lzc3VlZEljby5hZGQodG9rZW5zKSA8PSBUT0tFTl9TVVBQTFlfSUNPICk7CgogICAgLy8gcmVnaXN0ZXIgdG9rZW5zCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAgICAgICAgICA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZCh0b2tlbnMpOwogICAgaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl0gPSBpY29Ub2tlbnNSZWNlaXZlZFttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKICAgIHRva2Vuc0lzc3VlZEljbyAgICAgICAgICAgICAgID0gdG9rZW5zSXNzdWVkSWNvLmFkZCh0b2tlbnMpOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICAgICAgICAgPSB0b2tlbnNJc3N1ZWRUb3RhbC5hZGQodG9rZW5zKTsKICAgIAogICAgLy8gcmVnaXN0ZXIgRXRoZXIKICAgIGljb0V0aGVyUmVjZWl2ZWQgICAgICAgICAgICAgICAgPSBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOwogICAgaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXSA9IGljb0V0aGVyQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl0uYWRkKG1zZy52YWx1ZSk7CiAgICAKICAgIC8vIGxvY2tlZAogICAgbG9ja2VkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gbG9nIHRva2VuIGlzc3VhbmNlCiAgICBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgICBUb2tlbnNJc3N1ZWQobXNnLnNlbmRlciwgdG9rZW5zLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKCiAgICAvLyB0cmFuc2ZlciBFdGhlciBpZiB3ZSdyZSBvdmVyIHRoZSB0aHJlc2hvbGQKICAgIGlmICggaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQogIAogIC8vIEVSQzIwIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0KCiAgLyogT3ZlcnJpZGUgInRyYW5zZmVyIiAoRVJDMjApICovCgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwogICAgcmVxdWlyZSggbG9ja2VkW21zZy5zZW5kZXJdID09IGZhbHNlICk7CiAgICByZXF1aXJlKCBsb2NrZWRbX3RvXSA9PSBmYWxzZSApOwogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgfQogIAogIC8qIE92ZXJyaWRlICJ0cmFuc2ZlckZyb20iIChFUkMyMCkgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZSggaXNUcmFuc2ZlcmFibGUoKSApOwogICAgcmVxdWlyZSggbG9ja2VkW19mcm9tXSA9PSBmYWxzZSApOwogICAgcmVxdWlyZSggbG9ja2VkW190b10gPT0gZmFsc2UgKTsKICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgfQoKICAvLyBFeHRlcm5hbCBmdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tCgogIC8qIFJlY2xhaW1pbmcgb2YgZnVuZHMgYnkgY29udHJpYnV0b3JzIGluIGNhc2Ugb2YgYSBmYWlsZWQgY3Jvd2RzYWxlICovCiAgLyogKGl0IHdpbGwgZmFpbCBpZiBhY2NvdW50IGlzIGVtcHR5IGFmdGVyIG93bmVyQ2xhd2JhY2spICovCgogIC8qIFdoaWxlIHRoZXJlIGNvdWxkIG5vdCBoYXZlIGJlZW4gYW55IHRva2VuIHRyYW5zZmVycyB5ZXQsIGEgY29udHJpYnV0b3IgKi8KICAvKiBtYXkgaGF2ZSByZWNlaXZlZCBtaW50ZWQgdG9rZW5zLCBzbyB0aGUgdG9rZW4gYmFsYW5jZSBhZnRlciBhIHJlZnVuZCAqLyAKICAvKiBtYXkgc3RpbGwgYmUgcG9zaXRpdmUgKi8KICAKICBmdW5jdGlvbiByZWNsYWltRnVuZHMoKSBleHRlcm5hbCB7CiAgICB1aW50IHRva2VuczsgLy8gdG9rZW5zIHRvIGRlc3Ryb3kKICAgIHVpbnQgYW1vdW50OyAvLyByZWZ1bmQgYW1vdW50CiAgICAKICAgIC8vIGljbyBpcyBmaW5pc2hlZCBhbmQgd2FzIG5vdCBzdWNjZXNzZnVsCiAgICByZXF1aXJlKCBhdE5vdygpID4gREFURV9JQ09fRU5EICYmICFpY29UaHJlc2hvbGRSZWFjaGVkKCkgKTsKICAgIAogICAgLy8gY2hlY2sgaWYgcmVmdW5kIGhhcyBhbHJlYWR5IGJlZW4gY2xhaW1lZAogICAgcmVxdWlyZSggIXJlZnVuZENsYWltZWRbbXNnLnNlbmRlcl0gKTsKICAgIAogICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55dGhpbmcgdG8gcmVmdW5kCiAgICByZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdID4gMCApOwogICAgCiAgICAvLyB1cGRhdGUgdmFyaWFibGVzIGFmZmVjdGVkIGJ5IHJlZnVuZAogICAgdG9rZW5zID0gaWNvVG9rZW5zUmVjZWl2ZWRbbXNnLnNlbmRlcl07CiAgICBhbW91bnQgPSBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKHRva2Vucyk7CiAgICB0b2tlbnNJc3N1ZWRUb3RhbCAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLnN1Yih0b2tlbnMpOwogICAgCiAgICByZWZ1bmRDbGFpbWVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIAogICAgLy8gdHJhbnNmZXIgb3V0IHJlZnVuZAogICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQpOwogICAgCiAgICAvLyBsb2cKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgdG9rZW5zKTsKICAgIFJlZnVuZChtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vucyk7CiAgfQoKICAvKiBDbGFpbWluZyBvZiAiYWlyZHJvcHBlZCIgdG9rZW5zIGluIGNhc2Ugb2Ygc3VjY2Vzc2Z1bCBjcm93ZHNhbGUgKi8KICAvKiBDYW4gYmUgZG9uZSBieSB0b2tlbiBob2xkZXIsIG9yIGJ5IGFkbWluV2FsbGV0ICovIAoKICBmdW5jdGlvbiBjbGFpbUFpcmRyb3AoKSBleHRlcm5hbCB7CiAgICBkb0FpcmRyb3AobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcChhZGRyZXNzIF9wYXJ0aWNpcGFudCkgZXh0ZXJuYWwgewogICAgcmVxdWlyZSggbXNnLnNlbmRlciA9PSBhZG1pbldhbGxldCApOwogICAgZG9BaXJkcm9wKF9wYXJ0aWNpcGFudCk7CiAgfQoKICBmdW5jdGlvbiBhZG1pbkNsYWltQWlyZHJvcE11bHRpcGxlKGFkZHJlc3NbXSBfYWRkcmVzc2VzKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluV2FsbGV0ICk7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSBkb0FpcmRyb3AoX2FkZHJlc3Nlc1tpXSk7CiAgfSAgCiAgCiAgZnVuY3Rpb24gZG9BaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBpbnRlcm5hbCB7CiAgICB1aW50IGFpcmRyb3AgPSBjb21wdXRlQWlyZHJvcChfcGFydGljaXBhbnQpOwoKICAgIHJlcXVpcmUoIGFpcmRyb3AgPiAwICk7CgogICAgLy8gdXBkYXRlIGJhbGFuY2VzIGFuZCB0b2tlbiBpc3N1ZSB2b2x1bWUKICAgIGFpcmRyb3BDbGFpbWVkW19wYXJ0aWNpcGFudF0gPSB0cnVlOwogICAgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSA9IGJhbGFuY2VzW19wYXJ0aWNpcGFudF0uYWRkKGFpcmRyb3ApOwogICAgdG9rZW5zSXNzdWVkVG90YWwgICAgICA9IHRva2Vuc0lzc3VlZFRvdGFsLmFkZChhaXJkcm9wKTsKICAgIHRva2Vuc0NsYWltZWRBaXJkcm9wICAgPSB0b2tlbnNDbGFpbWVkQWlyZHJvcC5hZGQoYWlyZHJvcCk7CiAgICAKICAgIC8vIGxvZwogICAgQWlyZHJvcChfcGFydGljaXBhbnQsIGFpcmRyb3AsIGJhbGFuY2VzW19wYXJ0aWNpcGFudF0pOwogICAgVHJhbnNmZXIoMHgwLCBfcGFydGljaXBhbnQsIGFpcmRyb3ApOwogIH0KCiAgLyogRnVuY3Rpb24gdG8gZXN0aW1hdGUgYWlyZHJvcCBhbW91bnQuIEZvciBzb21lIGFjY291bnRzLCB0aGUgdmFsdWUgb2YgKi8KICAvKiB0b2tlbnMgcmVjZWl2ZWQgYnkgY2FsbGluZyBjbGFpbUFpcmRyb3AoKSBtYXkgYmUgbGVzcyB0aGFuIGdhcyBjb3N0cyAqLwogIAogIC8qIElmIGFuIGFjY291bnQgaGFzIHRva2VucyBmcm9tIHRoZSBpY28sIHRoZSBhbW91bnQgYWZ0ZXIgdGhlIGFpcmRyb3AgKi8KICAvKiB3aWxsIGJlIG5ld0JhbGFuY2UgPSB0b2tlbnMgKiBUT0tFTl9TVVBQTFlfSUNPIC8gdG9rZW5zSXNzdWVkSWNvICovCiAgICAgIAogIGZ1bmN0aW9uIGNvbXB1dGVBaXJkcm9wKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBjb25zdGFudCByZXR1cm5zICh1aW50IGFpcmRyb3ApIHsKICAgIC8vIHJldHVybiAwIGlmIGl0J3MgdG9vIGVhcmx5IG9yIGljbyB3YXMgbm90IHN1Y2Nlc3NmdWwKICAgIGlmICggYXROb3coKSA8IERBVEVfSUNPX0VORCB8fCAhaWNvVGhyZXNob2xkUmVhY2hlZCgpICkgcmV0dXJuIDA7CiAgICAKICAgIC8vIHJldHVybiAgMCBpcyB0aGUgYWlyZHJvcCB3YXMgYWxyZWFkeSBjbGFpbWVkCiAgICBpZiggYWlyZHJvcENsYWltZWRbX3BhcnRpY2lwYW50XSApIHJldHVybiAwOwoKICAgIC8vIHJldHVybiAwIGlmIHRoZSBhY2NvdW50IGRvZXMgbm90IGhvbGQgYW55IGNyb3dkc2FsZSB0b2tlbnMKICAgIGlmKCBpY29Ub2tlbnNSZWNlaXZlZFtfcGFydGljaXBhbnRdID09IDAgKSByZXR1cm4gMDsKICAgIAogICAgLy8gYWlyZHJvcCBhbW91bnQKICAgIHVpbnQgdG9rZW5zID0gaWNvVG9rZW5zUmVjZWl2ZWRbX3BhcnRpY2lwYW50XTsKICAgIHVpbnQgbmV3QmFsYW5jZSA9IHRva2Vucy5tdWwoVE9LRU5fU1VQUExZX0lDTykgLyB0b2tlbnNJc3N1ZWRJY287CiAgICBhaXJkcm9wID0gbmV3QmFsYW5jZSAtIHRva2VuczsKICB9ICAKCiAgLyogTXVsdGlwbGUgdG9rZW4gdHJhbnNmZXJzIGZyb20gb25lIGFkZHJlc3MgdG8gc2F2ZSBnYXMgKi8KICAvKiAobG9uZ2VyIF9hbW91bnRzIGFycmF5IG5vdCBhY2NlcHRlZCA9IHNhbml0eSBjaGVjaykgKi8KCiAgZnVuY3Rpb24gdHJhbnNmZXJNdWx0aXBsZShhZGRyZXNzW10gX2FkZHJlc3NlcywgdWludFtdIF9hbW91bnRzKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKCBpc1RyYW5zZmVyYWJsZSgpICk7CiAgICByZXF1aXJlKCBsb2NrZWRbbXNnLnNlbmRlcl0gPT0gZmFsc2UgKTsKICAgIHJlcXVpcmUoIF9hZGRyZXNzZXMubGVuZ3RoID09IF9hbW91bnRzLmxlbmd0aCApOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAobG9ja2VkW19hZGRyZXNzZXNbaV1dID09IGZhbHNlKSBzdXBlci50cmFuc2ZlcihfYWRkcmVzc2VzW2ldLCBfYW1vdW50c1tpXSk7CiAgICB9CiAgfSAgCgp9'.
	

]
