Class {
	#name : #SRT53d00ed6cbca0b08e4485286bec68aa48aa17cce,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT53d00ed6cbca0b08e4485286bec68aa48aa17cce >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogICAgICAgICAgLC9gLgogICAgICAgICwnLyBfX2AuCiAgICAgICwnXy9fICBfIF9gLgogICAgLCdfXy9fIF9fXyBfICBgLgogICwnXyAgL19fXyBfXyBfIF9fIGAuCiAnLS4uXy9fX18uLi4tIi0uLS4uX19gLgogIEIKClRoaXMgaXMgYSBQT05aSSBDcnlwdG8tR0FNRSBhbmQgPj5OT1Q8PCBhbiBpbnZlc3RtZW50IG9wcG9ydHVuaXR5ISAKSXQgaWxsdXN0cmF0ZSB0aGUgZnVuY3Rpb25hbGxpdGllcyBhbmQgcG9zc2liaWxpdGllcyBvZiBzbWFydCAKY29udHJhY3RzIGFuZCB3YXMganVzdCBkZXBsb3llZCBmb3IgdGVzdGluZy4gCiAKIEluc3BpcmVkIGJ5IGh0dHBzOi8vdGVzdC5qb2NoZW4taG9lbmlja2UuZGUvZXRoL3BvbnppdG9rZW4vCgoqLwoKY29udHJhY3QgRXRoUHlyYW1pZF9TaGFkb3cgewoKCS8vIHNjYWxlRmFjdG9yIGlzIHVzZWQgdG8gY29udmVydCBFdGhlciBpbnRvIHRva2VucyBhbmQgdmljZS12ZXJzYTogdGhleSdyZSBvZiBkaWZmZXJlbnQKCS8vIG9yZGVycyBvZiBtYWduaXR1ZGUsIGhlbmNlIHRoZSBuZWVkIHRvIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uCgl1aW50MjU2IGNvbnN0YW50IHNjYWxlRmFjdG9yID0gMHgxMDAwMDAwMDAwMDAwMDAwMDsgIC8vIDJeNjQKCgkvLyBDUlIgPSA1MCUKCS8vIENSUiBpcyBDYXNoIFJlc2VydmUgUmF0aW8gKGluIHRoaXMgY2FzZSBDcnlwdG8gUmVzZXJ2ZSBSYXRpbykuCgkvLyBGb3IgbW9yZSBvbiB0aGlzOiBjaGVjayBvdXQgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVzZXJ2ZV9yZXF1aXJlbWVudAoJaW50IGNvbnN0YW50IGNycl9uID0gMTsgLy8gQ1JSIG51bWVyYXRvcgoJaW50IGNvbnN0YW50IGNycl9kID0gMjsgLy8gQ1JSIGRlbm9taW5hdG9yCgoJLy8gVGhlIHByaWNlIGNvZWZmaWNpZW50LiBDaG9zZW4gc3VjaCB0aGF0IGF0IDEgdG9rZW4gdG90YWwgc3VwcGx5CgkvLyB0aGUgYW1vdW50IGluIHJlc2VydmUgaXMgMC41IGV0aGVyIGFuZCB0b2tlbiBwcmljZSBpcyAxIEV0aGVyLgoJaW50IGNvbnN0YW50IHByaWNlX2NvZWZmID0gLTB4Mjk2QUJGNzg0QTM1ODQ2OEM7CgoJLy8gVHlwaWNhbCB2YWx1ZXMgdGhhdCB3ZSBoYXZlIHRvIGRlY2xhcmUuCglzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiRXRoUHlyYW1pZF9TaGFkb3ciOwoJc3RyaW5nIGNvbnN0YW50IHB1YmxpYyBzeW1ib2wgPSAiRVBUUyI7Cgl1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgkvLyBBcnJheSBiZXR3ZWVuIGVhY2ggYWRkcmVzcyBhbmQgdGhlaXIgbnVtYmVyIG9mIHRva2Vucy4KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5CYWxhbmNlOwoJCQoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIGhvdyBtdWNoIEV0aGVyIGhhcyBiZWVuIHBhaWQgb3V0IHRvIGl0LgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCW1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIHB1YmxpYyBwYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtYW55IHRva2VucyBhcmUgaW4gZXhpc3RlbmNlIG92ZXJhbGwuCgl1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgkvLyBBZ2dyZWdhdGUgc3VtIG9mIGFsbCBwYXlvdXRzLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCWludDI1NiB0b3RhbFBheW91dHM7CgoJLy8gVmFyaWFibGUgdHJhY2tpbmcgaG93IG11Y2ggRXRoZXIgZWFjaCB0b2tlbiBpcyBjdXJyZW50bHkgd29ydGguCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJdWludDI1NiBlYXJuaW5nc1BlclRva2VuOwoKCWZ1bmN0aW9uIEV0aFB5cmFtaWQoKSBwdWJsaWMge30KCgkvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdXNlZCBieSB0aGUgZnJvbnQtZW5kIGZvciBkaXNwbGF5IHB1cnBvc2VzLgoKCS8vIFJldHVybnMgdGhlIG51bWJlciBvZiB0b2tlbnMgY3VycmVudGx5IGhlbGQgYnkgX293bmVyLgoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CgkJcmV0dXJuIHRva2VuQmFsYW5jZVtfb3duZXJdOwoJfQoKCS8vIFdpdGhkcmF3cyBhbGwgZGl2aWRlbmRzIGhlbGQgYnkgdGhlIGNhbGxlciBzZW5kaW5nIHRoZSB0cmFuc2FjdGlvbiwgdXBkYXRlcwoJLy8gdGhlIHJlcXVpc2l0ZSBnbG9iYWwgdmFyaWFibGVzLCBhbmQgdHJhbnNmZXJzIEV0aGVyIGJhY2sgdG8gdGhlIGNhbGxlci4KCWZ1bmN0aW9uIHdpdGhkcmF3KCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIFNlbmQgdGhlIGRpdmlkZW5kcyB0byB0aGUgYWRkcmVzcyB0aGF0IHJlcXVlc3RlZCB0aGUgd2l0aGRyYXcuCgkJbXNnLnNlbmRlci50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBDb252ZXJ0cyB0aGUgRXRoZXIgYWNjcnVlZCBhcyBkaXZpZGVuZHMgYmFjayBpbnRvIEVQWSB0b2tlbnMgd2l0aG91dCBoYXZpbmcgdG8KCS8vIHdpdGhkcmF3IGl0IGZpcnN0LiBTYXZlcyBvbiBnYXMgYW5kIHBvdGVudGlhbCBwcmljZSBzcGlrZSBsb3NzLgoJZnVuY3Rpb24gcmVpbnZlc3REaXZpZGVuZHMoKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQkvLyBTaW5jZSB0aGlzIGlzIGVzc2VudGlhbGx5IGEgc2hvcnRjdXQgdG8gd2l0aGRyYXdpbmcgYW5kIHJlaW52ZXN0aW5nLCB0aGlzIHN0ZXAgc3RpbGwgaG9sZHMuCgkJcGF5b3V0c1ttc2cuc2VuZGVyXSArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBJbmNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEFzc2lnbiBiYWxhbmNlIHRvIGEgbmV3IHZhcmlhYmxlLgoJCXVpbnQgdmFsdWVfID0gKHVpbnQpIChiYWxhbmNlKTsKCQkKCQkvLyBJZiB5b3VyIGRpdmlkZW5kcyBhcmUgd29ydGggbGVzcyB0aGFuIDEgc3phYm8sIG9yIG1vcmUgdGhhbiBhIG1pbGxpb24gRXRoZXIKCQkvLyAoaW4gd2hpY2ggY2FzZSwgd2h5IGFyZSB5b3UgZXZlbiBoZXJlKSwgYWJvcnQuCgkJaWYgKHZhbHVlXyA8IDAuMDAwMDAxIGV0aGVyIHx8IHZhbHVlXyA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gQSB0ZW1wb3JhcnkgcmVzZXJ2ZSB2YXJpYWJsZSB1c2VkIGZvciBjYWxjdWxhdGluZyB0aGUgcmV3YXJkIHRoZSBob2xkZXIgZ2V0cyBmb3IgYnV5aW5nIHRva2Vucy4KCQkvLyAoWWVzLCB0aGUgYnV5ZXIgcmVjZWl2ZXMgYSBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gYXMgd2VsbCEpCgkJdmFyIHJlcyA9IHJlc2VydmUoKSAtIGJhbGFuY2U7CgoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYodmFsdWVfLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gdmFsdWVfIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBjYWxjdWxhdGVEaXZpZGVuZFRva2VucyhudW1FdGhlciwgYmFsYW5jZSk7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlcyArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQl9CgkJCgkJLy8gQWRkIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IGNyZWF0ZWQgdG8gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgYSBjcnlwdG8gY2VudHJhbCBiYW5rIQoJCXRvdGFsU3VwcGx5ID0gYWRkKHRvdGFsU3VwcGx5LCBudW1Ub2tlbnMpOwoJCQoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGxzIHlvdXIgdG9rZW5zIGZvciBFdGhlci4gVGhpcyBFdGhlciBpcyBhc3NpZ25lZCB0byB0aGUgY2FsbGVycyBlbnRyeQoJLy8gaW4gdGhlIHRva2VuQmFsYW5jZSBhcnJheSwgYW5kIHRoZXJlZm9yZSBpcyBzaG93biBhcyBhIGRpdmlkZW5kLiBBIHNlY29uZAoJLy8gY2FsbCB0byB3aXRoZHJhdygpIG11c3QgYmUgbWFkZSB0byBpbnZva2UgdGhlIHRyYW5zZmVyIG9mIEV0aGVyIGJhY2sgdG8geW91ciBhZGRyZXNzLgoJZnVuY3Rpb24gc2VsbE15VG9rZW5zKCkgcHVibGljIHsKCQl2YXIgYmFsYW5jZSA9IGJhbGFuY2VPZihtc2cuc2VuZGVyKTsKCQlzZWxsKGJhbGFuY2UpOwoJfQoKCS8vIFRoZSBzbGFtLXRoZS1idXR0b24gZXNjYXBlIGhhdGNoLiBTZWxscyB0aGUgY2FsbGVycyB0b2tlbnMgZm9yIEV0aGVyLCB0aGVuIGltbWVkaWF0ZWx5CgkvLyBpbnZva2VzIHRoZSB3aXRoZHJhdygpIGZ1bmN0aW9uLCBzZW5kaW5nIHRoZSByZXN1bHRpbmcgRXRoZXIgdG8gdGhlIGNhbGxlcnMgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGdldE1lT3V0T2ZIZXJlKCkgcHVibGljIHsKCQlzZWxsTXlUb2tlbnMoKTsKICAgICAgICB3aXRoZHJhdygpOwoJfQoKCS8vIEdhdGVrZWVwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBiZWluZyBzZW50IGlzbid0IGVpdGhlcgoJLy8gdG9vIHNtYWxsIG9yIHRvbyBsYXJnZS4gSWYgaXQgcGFzc2VzLCBnb2VzIGRpcmVjdCB0byBidXkoKS4KCWZ1bmN0aW9uIGZ1bmQoKSBwYXlhYmxlIHB1YmxpYyB7CgkJLy8gRG9uJ3QgYWxsb3cgZm9yIGZ1bmRpbmcgaWYgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGlzIGxlc3MgdGhhbiAxIHN6YWJvLgoJCWlmIChtc2cudmFsdWUgPiAwLjAwMDAwMSBldGhlcikgewoJCQlidXkoKTsKCQl9IGVsc2UgewoJCQlyZXZlcnQoKTsKCQl9CiAgICB9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2YgYnV5aW5nIGEgZmlubmV5IHdvcnRoIG9mIHRva2Vucy4KCWZ1bmN0aW9uIGJ1eVByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKCQlyZXR1cm4gZ2V0VG9rZW5zRm9yRXRoZXIoMSBmaW5uZXkpOwoJfQoKCS8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgKGR5bmFtaWMpIHByaWNlIG9mIHNlbGxpbmcgYSBzaW5nbGUgdG9rZW4uCglmdW5jdGlvbiBzZWxsUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHZhciBldGggPSBnZXRFdGhlckZvclRva2VucygxIGZpbm5leSk7CiAgICAgICAgdmFyIGZlZSA9IGRpdihldGgsIDEwKTsKICAgICAgICByZXR1cm4gZXRoIC0gZmVlOwogICAgfQoKCS8vIENhbGN1bGF0ZSB0aGUgY3VycmVudCBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjYWxsZXIgYWRkcmVzcy4gVGhpcyBpcyB0aGUgbmV0IHJlc3VsdAoJLy8gb2YgbXVsdGlwbHlpbmcgdGhlIG51bWJlciBvZiB0b2tlbnMgaGVsZCBieSB0aGVpciBjdXJyZW50IHZhbHVlIGluIEV0aGVyIGFuZCBzdWJ0cmFjdGluZyB0aGUKCS8vIEV0aGVyIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBwYWlkIG91dC4KCWZ1bmN0aW9uIGRpdmlkZW5kcyhhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJcmV0dXJuICh1aW50MjU2KSAoKGludDI1NikoZWFybmluZ3NQZXJUb2tlbiAqIHRva2VuQmFsYW5jZVtfb3duZXJdKSAtIHBheW91dHNbX293bmVyXSkgLyBzY2FsZUZhY3RvcjsKCX0KCgkvLyBWZXJzaW9uIG9mIHdpdGhkcmF3IHRoYXQgZXh0cmFjdHMgdGhlIGRpdmlkZW5kcyBhbmQgc2VuZHMgdGhlIEV0aGVyIHRvIHRoZSBjYWxsZXIuCgkvLyBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIG5vIHRyYW5zYWN0aW9uIGRhdGEsIGFuZCB0aGF0IHNob3VsZCBiZQoJLy8gcXVpdGUgcmFyZSB1bmxlc3MgaW50ZXJhY3RpbmcgZGlyZWN0bHkgd2l0aCB0aGUgc21hcnQgY29udHJhY3QuCglmdW5jdGlvbiB3aXRoZHJhd09sZChhZGRyZXNzIHRvKSBwdWJsaWMgewoJCS8vIFJldHJpZXZlIHRoZSBkaXZpZGVuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZGRyZXNzIHRoZSByZXF1ZXN0IGNhbWUgZnJvbS4KCQl2YXIgYmFsYW5jZSA9IGRpdmlkZW5kcyhtc2cuc2VuZGVyKTsKCQkKCQkvLyBVcGRhdGUgdGhlIHBheW91dHMgYXJyYXksIGluY3JlbWVudGluZyB0aGUgcmVxdWVzdCBhZGRyZXNzIGJ5IGBiYWxhbmNlYC4KCQlwYXlvdXRzW21zZy5zZW5kZXJdICs9IChpbnQyNTYpIChiYWxhbmNlICogc2NhbGVGYWN0b3IpOwoJCQoJCS8vIEluY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gU2VuZCB0aGUgZGl2aWRlbmRzIHRvIHRoZSBhZGRyZXNzIHRoYXQgcmVxdWVzdGVkIHRoZSB3aXRoZHJhdy4KCQl0by50cmFuc2ZlcihiYWxhbmNlKTsKCX0KCgkvLyBJbnRlcm5hbCBiYWxhbmNlIGZ1bmN0aW9uLCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZHluYW1pYyByZXNlcnZlIHZhbHVlLgoJZnVuY3Rpb24gYmFsYW5jZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYW1vdW50KSB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJcmV0dXJuIHRoaXMuYmFsYW5jZSAtIG1zZy52YWx1ZTsKCX0KCglmdW5jdGlvbiBidXkoKSBpbnRlcm5hbCB7CgkJLy8gQW55IHRyYW5zYWN0aW9uIG9mIGxlc3MgdGhhbiAxIHN6YWJvIGlzIGxpa2VseSB0byBiZSB3b3J0aCBsZXNzIHRoYW4gdGhlIGdhcyB1c2VkIHRvIHNlbmQgaXQuCgkJaWYgKG1zZy52YWx1ZSA8IDAuMDAwMDAxIGV0aGVyIHx8IG1zZy52YWx1ZSA+IDEwMDAwMDAgZXRoZXIpCgkJCXJldmVydCgpOwoJCQkKCQkvLyBtc2cuc2VuZGVyIGlzIHRoZSBhZGRyZXNzIG9mIHRoZSBjYWxsZXIuCgkJdmFyIHNlbmRlciA9IG1zZy5zZW5kZXI7CgkJCgkJLy8gMTAlIG9mIHRoZSB0b3RhbCBFdGhlciBzZW50IGlzIHVzZWQgdG8gcGF5IGV4aXN0aW5nIGhvbGRlcnMuCgkJdmFyIGZlZSA9IGRpdihtc2cudmFsdWUsIDEwKTsKCQkKCQkvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gcHVyY2hhc2UgbmV3IHRva2VucyBmb3IgdGhlIGNhbGxlci4KCQl2YXIgbnVtRXRoZXIgPSBtc2cudmFsdWUgLSBmZWU7CgkJCgkJLy8gVGhlIG51bWJlciBvZiB0b2tlbnMgd2hpY2ggY2FuIGJlIHB1cmNoYXNlZCBmb3IgbnVtRXRoZXIuCgkJdmFyIG51bVRva2VucyA9IGdldFRva2Vuc0ZvckV0aGVyKG51bUV0aGVyKTsKCQkKCQkvLyBUaGUgYnV5ZXIgZmVlLCBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCXZhciBidXllckZlZSA9IGZlZSAqIHNjYWxlRmFjdG9yOwoJCQoJCS8vIENoZWNrIHRoYXQgd2UgaGF2ZSB0b2tlbnMgaW4gZXhpc3RlbmNlICh0aGlzIHNob3VsZCBhbHdheXMgYmUgdHJ1ZSksIG9yCgkJLy8gZWxzZSB5b3UncmUgZ29ubmEgaGF2ZSBhIGJhZCB0aW1lLgoJCWlmICh0b3RhbFN1cHBseSA+IDApIHsKCQkJLy8gQ29tcHV0ZSB0aGUgYm9udXMgY28tZWZmaWNpZW50IGZvciBhbGwgZXhpc3RpbmcgaG9sZGVycyBhbmQgdGhlIGJ1eWVyLgoJCQkvLyBUaGUgYnV5ZXIgcmVjZWl2ZXMgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGZvciBlYWNoIHRva2VuIGJvdWdodCBpbiB0aGUKCQkJLy8gc2FtZSB3YXkgdGhleSB3b3VsZCBoYXZlIGlmIHRoZXkgYm91Z2h0IGVhY2ggdG9rZW4gaW5kaXZpZHVhbGx5LgoJCQl2YXIgYm9udXNDb0VmZiA9CgkJCSAgICAoc2NhbGVGYWN0b3IgLSAocmVzZXJ2ZSgpICsgbnVtRXRoZXIpICogbnVtVG9rZW5zICogc2NhbGVGYWN0b3IgLyAodG90YWxTdXBwbHkgKyBudW1Ub2tlbnMpIC8gbnVtRXRoZXIpCgkJCSAgICAqICh1aW50KShjcnJfZCkgLyAodWludCkoY3JyX2QtY3JyX24pOwoJCQkJCgkJCS8vIFRoZSB0b3RhbCByZXdhcmQgdG8gYmUgZGlzdHJpYnV0ZWQgYW1vbmdzdCB0aGUgbWFzc2VzIGlzIHRoZSBmZWUgKGluIEV0aGVyKQoJCQkvLyBtdWx0aXBsaWVkIGJ5IHRoZSBib251cyBjby1lZmZpY2llbnQuCgkJCXZhciBob2xkZXJSZXdhcmQgPSBmZWUgKiBib251c0NvRWZmOwoJCQkKCQkJYnV5ZXJGZWUgLT0gaG9sZGVyUmV3YXJkOwoKCQkJLy8gRmVlIGlzIGRpc3RyaWJ1dGVkIHRvIGFsbCBleGlzdGluZyB0b2tlbiBob2xkZXJzIGJlZm9yZSB0aGUgbmV3IHRva2VucyBhcmUgcHVyY2hhc2VkLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgYnV5LWluLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBob2xkZXJSZXdhcmQgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuICs9IHJld2FyZFBlclNoYXJlOwoJCQkKCQl9CgoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCgkJLy8gQXNzaWduIHRoZSB0b2tlbnMgdG8gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVtzZW5kZXJdID0gYWRkKHRva2VuQmFsYW5jZVtzZW5kZXJdLCBudW1Ub2tlbnMpOwoKCQkvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBidXllciBjYW5ub3QgY2xhaW0gZGl2aWRlbmRzIG9uIHByZXZpb3VzIHB1cmNoYXNlcy4KCQkvLyBBbHNvIGluY2x1ZGUgdGhlIGZlZSBwYWlkIGZvciBlbnRlcmluZyB0aGUgc2NoZW1lLgoJCS8vIEZpcnN0IHdlIGNvbXB1dGUgaG93IG11Y2ggd2FzIGp1c3QgcGFpZCBvdXQgdG8gdGhlIGJ1eWVyLi4uCgkJdmFyIHBheW91dERpZmYgPSAoaW50MjU2KSAoKGVhcm5pbmdzUGVyVG9rZW4gKiBudW1Ub2tlbnMpIC0gYnV5ZXJGZWUpOwoJCQoJCS8vIFRoZW4gd2UgdXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5IGZvciB0aGUgYnV5ZXIgd2l0aCB0aGlzIGFtb3VudC4uLgoJCXBheW91dHNbc2VuZGVyXSArPSBwYXlvdXREaWZmOwoJCQoJCS8vIEFuZCB0aGVuIHdlIGZpbmFsbHkgYWRkIGl0IHRvIHRoZSB2YXJpYWJsZSB0cmFja2luZyB0aGUgdG90YWwgYW1vdW50IHNwZW50IHRvIG1haW50YWluIGludmFyaWFuY2UuCgkJdG90YWxQYXlvdXRzICAgICs9IHBheW91dERpZmY7CgkJCgl9CgoJLy8gU2VsbCBmdW5jdGlvbiB0aGF0IHRha2VzIHRva2VucyBhbmQgY29udmVydHMgdGhlbSBpbnRvIEV0aGVyLiBBbHNvIGNvbWVzIHdpdGggYSAxMCUgZmVlCgkvLyB0byBkaXNjb3VyYWdpbmcgZHVtcGluZywgYW5kIG1lYW5zIHRoYXQgaWYgc29tZW9uZSBuZWFyIHRoZSB0b3Agc2VsbHMsIHRoZSBmZWUgZGlzdHJpYnV0ZWQKCS8vIHdpbGwgYmUgKnNpZ25pZmljYW50Ki4KCWZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIGludGVybmFsIHsKCSAgICAvLyBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiBFdGhlciB0aGF0IHRoZSBob2xkZXJzIHRva2VucyBzZWxsIGZvciBhdCB0aGUgY3VycmVudCBzZWxsIHByaWNlLgoJCXZhciBudW1FdGhlcnNCZWZvcmVGZWUgPSBnZXRFdGhlckZvclRva2VucyhhbW91bnQpOwoJCQoJCS8vIDEwJSBvZiB0aGUgcmVzdWx0aW5nIEV0aGVyIGlzIHVzZWQgdG8gcGF5IHJlbWFpbmluZyBob2xkZXJzLgogICAgICAgIHZhciBmZWUgPSBkaXYobnVtRXRoZXJzQmVmb3JlRmVlLCAxMCk7CgkJCgkJLy8gTmV0IEV0aGVyIGZvciB0aGUgc2VsbGVyIGFmdGVyIHRoZSBmZWUgaGFzIGJlZW4gc3VidHJhY3RlZC4KICAgICAgICB2YXIgbnVtRXRoZXJzID0gbnVtRXRoZXJzQmVmb3JlRmVlIC0gZmVlOwoJCQoJCS8vICpSZW1vdmUqIHRoZSBudW1Ub2tlbnMgd2hpY2ggd2VyZSBqdXN0IHNvbGQgZnJvbSB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSAvZGVmaW5pdGVseS8gYSBjcnlwdG8gY2VudHJhbCBiYW5rLgoJCXRvdGFsU3VwcGx5ID0gc3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwoJCQogICAgICAgIC8vIFJlbW92ZSB0aGUgdG9rZW5zIGZyb20gdGhlIGJhbGFuY2Ugb2YgdGhlIGJ1eWVyLgoJCXRva2VuQmFsYW5jZVttc2cuc2VuZGVyXSA9IHN1Yih0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0sIGFtb3VudCk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgcGF5b3V0IGFycmF5IHNvIHRoYXQgdGhlIHNlbGxlciBjYW5ub3QgY2xhaW0gZnV0dXJlIGRpdmlkZW5kcyB1bmxlc3MgdGhleSBidXkgYmFjayBpbi4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIuLi4KCQl2YXIgcGF5b3V0RGlmZiA9IChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogYW1vdW50ICsgKG51bUV0aGVycyAqIHNjYWxlRmFjdG9yKSk7CgkJCiAgICAgICAgLy8gV2UgcmVkdWNlIHRoZSBhbW91bnQgcGFpZCBvdXQgdG8gdGhlIHNlbGxlciAodGhpcyBlZmZlY3RpdmVseSByZXNldHMgdGhlaXIgcGF5b3V0cyB2YWx1ZSB0byB6ZXJvLAoJCS8vIHNpbmNlIHRoZXkncmUgc2VsbGluZyBhbGwgb2YgdGhlaXIgdG9rZW5zKS4gVGhpcyBtYWtlcyBzdXJlIHRoZSBzZWxsZXIgaXNuJ3QgZGlzYWR2YW50YWdlZCBpZgoJCS8vIHRoZXkgZGVjaWRlIHRvIGJ1eSBiYWNrIGluLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gLT0gcGF5b3V0RGlmZjsJCQoJCQoJCS8vIERlY3JlYXNlIHRoZSB0b3RhbCBhbW91bnQgdGhhdCdzIGJlZW4gcGFpZCBvdXQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KICAgICAgICB0b3RhbFBheW91dHMgLT0gcGF5b3V0RGlmZjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBpcyBhIGJpdCBvZiBhbiBpcnJlbGV2YW50IGNoZWNrIHNpbmNlIHdlJ3JlCgkJLy8gc2VsbGluZyB0b2tlbnMsIGJ1dCBpdCBndWFyZHMgYWdhaW5zdCBkaXZpc2lvbiBieSB6ZXJvKS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIFNjYWxlIHRoZSBFdGhlciB0YWtlbiBhcyB0aGUgc2VsbGluZyBmZWUgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJCQl2YXIgZXRoZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkJCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgcmVtYWluaW5nIHRva2VuIGhvbGRlcnMuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBzZWxsLgoJCQl2YXIgcmV3YXJkUGVyU2hhcmUgPSBldGhlckZlZSAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gPSBhZGQoZWFybmluZ3NQZXJUb2tlbiwgcmV3YXJkUGVyU2hhcmUpOwoJCX0KCX0KCQoJLy8gRHluYW1pYyB2YWx1ZSBvZiBFdGhlciBpbiByZXNlcnZlLCBhY2NvcmRpbmcgdG8gdGhlIENSUiByZXF1aXJlbWVudC4KCWZ1bmN0aW9uIHJlc2VydmUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCXJldHVybiBzdWIoYmFsYW5jZSgpLAoJCQkgKCh1aW50MjU2KSAoKGludDI1NikgKGVhcm5pbmdzUGVyVG9rZW4gKiB0b3RhbFN1cHBseSkgLSB0b3RhbFBheW91dHMpIC8gc2NhbGVGYWN0b3IpKTsKCX0KCgkvLyBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgY2FuIGJlIGJvdWdodCBmb3IgYSBnaXZlbiBhbW91bnQgb2YgRXRoZXIsIGFjY29yZGluZyB0byB0aGUKCS8vIGR5bmFtaWMgcmVzZXJ2ZSBhbmQgdG90YWxTdXBwbHkgdmFsdWVzIChkZXJpdmVkIGZyb20gdGhlIGJ1eSBhbmQgc2VsbCBwcmljZXMpLgoJZnVuY3Rpb24gZ2V0VG9rZW5zRm9yRXRoZXIodWludDI1NiBldGhlcnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSArIGV0aGVydmFsdWUpKmNycl9uL2Nycl9kICsgcHJpY2VfY29lZmYpLCB0b3RhbFN1cHBseSk7Cgl9CgoJLy8gU2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gZ2V0VG9rZW5zRm9yRXRoZXIsIGJ1dCBzdWJ0cmFjdHMgdGhlIGNhbGxlcnMgYmFsYW5jZSBmcm9tIHRoZSBhbW91bnQgb2YgRXRoZXIgcmV0dXJuZWQgZm9yIGNvbnZlcnNpb24uCglmdW5jdGlvbiBjYWxjdWxhdGVEaXZpZGVuZFRva2Vucyh1aW50MjU2IGV0aGVydmFsdWUsIHVpbnQyNTYgc3VidmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2VucykgewoJCXJldHVybiBzdWIoZml4ZWRFeHAoZml4ZWRMb2cocmVzZXJ2ZSgpIC0gc3VidmFsdWUgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIENvbnZlcnRzIGEgbnVtYmVyIHRva2VucyBpbnRvIGFuIEV0aGVyIHZhbHVlLgoJZnVuY3Rpb24gZ2V0RXRoZXJGb3JUb2tlbnModWludDI1NiB0b2tlbnMpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGV0aGVydmFsdWUpIHsKCQkvLyBIb3cgbXVjaCByZXNlcnZlIEV0aGVyIGRvIHdlIGhhdmUgbGVmdCBpbiB0aGUgY29udHJhY3Q/CgkJdmFyIHJlc2VydmVBbW91bnQgPSByZXNlcnZlKCk7CgoJCS8vIElmIHlvdSdyZSB0aGUgSGlnaGxhbmRlciAob3IgYmFnaG9sZGVyKSwgeW91IGdldCBUaGUgUHJpemUuIEV2ZXJ5dGhpbmcgbGVmdCBpbiB0aGUgdmF1bHQuCgkJaWYgKHRva2VucyA9PSB0b3RhbFN1cHBseSkKCQkJcmV0dXJuIHJlc2VydmVBbW91bnQ7CgoJCS8vIElmIHRoZXJlIHdvdWxkIGJlIGV4Y2VzcyBFdGhlciBsZWZ0IGFmdGVyIHRoZSB0cmFuc2FjdGlvbiB0aGlzIGlzIGNhbGxlZCB3aXRoaW4sIHJldHVybiB0aGUgRXRoZXIKCQkvLyBjb3JyZXNwb25kaW5nIHRvIHRoZSBlcXVhdGlvbiBpbiBEciBKb2NoZW4gSG9lbmlja2UncyBvcmlnaW5hbCBQb256aSBwYXBlciwgd2hpY2ggY2FuIGJlIGZvdW5kCgkJLy8gYXQgaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8gaW4gdGhlIHRoaXJkIGVxdWF0aW9uLCB3aXRoIHRoZSBDUlIgbnVtZXJhdG9yIAoJCS8vIGFuZCBkZW5vbWluYXRvciBhbHRlcmVkIHRvIDEgYW5kIDIgcmVzcGVjdGl2ZWx5LgoJCXJldHVybiBzdWIocmVzZXJ2ZUFtb3VudCwgZml4ZWRFeHAoKGZpeGVkTG9nKHRvdGFsU3VwcGx5IC0gdG9rZW5zKSAtIHByaWNlX2NvZWZmKSAqIGNycl9kL2Nycl9uKSk7Cgl9CgoJLy8gWW91IGRvbid0IGNhcmUgYWJvdXQgdGhlc2UsIGJ1dCBpZiB5b3UgcmVhbGx5IGRvIHRoZXkncmUgaGV4IHZhbHVlcyBmb3IgCgkvLyBjby1lZmZpY2llbnRzIHVzZWQgdG8gc2ltdWxhdGUgYXBwcm94aW1hdGlvbnMgb2YgdGhlIGxvZyBhbmQgZXhwIGZ1bmN0aW9ucy4KCWludDI1NiAgY29uc3RhbnQgb25lICAgICAgICA9IDB4MTAwMDAwMDAwMDAwMDAwMDA7Cgl1aW50MjU2IGNvbnN0YW50IHNxcnQyICAgICAgPSAweDE2YTA5ZTY2N2YzYmNjOTA4OwoJdWludDI1NiBjb25zdGFudCBzcXJ0ZG90NSAgID0gMHgwYjUwNGYzMzNmOWRlNjQ4NDsKCWludDI1NiAgY29uc3RhbnQgbG4yICAgICAgICA9IDB4MGIxNzIxN2Y3ZDFjZjc5YWM7CglpbnQyNTYgIGNvbnN0YW50IGxuMl82NGRvdDUgPSAweDJjYjUzZjA5ZjA1Y2M2MjdjODsKCWludDI1NiAgY29uc3RhbnQgYzEgICAgICAgICA9IDB4MWZmZmZmZmZmZmY5ZGFjOWI7CglpbnQyNTYgIGNvbnN0YW50IGMzICAgICAgICAgPSAweDBhYWFhYWFhYzE2ODc3OTA4OwoJaW50MjU2ICBjb25zdGFudCBjNSAgICAgICAgID0gMHgwNjY2NjY0ZTVlOWZhMGM5OTsKCWludDI1NiAgY29uc3RhbnQgYzcgICAgICAgICA9IDB4MDQ5MjU0MDI2YTc2MzBhY2Y7CglpbnQyNTYgIGNvbnN0YW50IGM5ICAgICAgICAgPSAweDAzOGJkNzVlZDM3NzUzZDY4OwoJaW50MjU2ICBjb25zdGFudCBjMTEgICAgICAgID0gMHgwMzI4NGEwYzE0NjEwOTI0ZjsKCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gYzEqeCArIGMzKnheMyArIC4uLiArIGMxMSAqIHheMTEKCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24gbG9nKDEreCktbG9nKDEteCkKCS8vIEhlbmNlIFIocykgPSBsb2coKDErcykvKDEtcykpID0gbG9nKGEpCglmdW5jdGlvbiBmaXhlZExvZyh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoaW50MjU2IGxvZykgewoJCWludDMyIHNjYWxlID0gMDsKCQl3aGlsZSAoYSA+IHNxcnQyKSB7CgkJCWEgLz0gMjsKCQkJc2NhbGUrKzsKCQl9CgkJd2hpbGUgKGEgPD0gc3FydGRvdDUpIHsKCQkJYSAqPSAyOwoJCQlzY2FsZS0tOwoJCX0KCQlpbnQyNTYgcyA9ICgoKGludDI1NikoYSkgLSBvbmUpICogb25lKSAvICgoaW50MjU2KShhKSArIG9uZSk7CgkJdmFyIHogPSAocypzKSAvIG9uZTsKCQlyZXR1cm4gc2NhbGUgKiBsbjIgKwoJCQkocyooYzEgKyAoeiooYzMgKyAoeiooYzUgKyAoeiooYzcgKyAoeiooYzkgKyAoeipjMTEvb25lKSkKCQkJCS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJfQoKCWludDI1NiBjb25zdGFudCBjMiA9ICAweDAyYWFhYWFhYWFhMDE1ZGIwOwoJaW50MjU2IGNvbnN0YW50IGM0ID0gLTB4MDAwYjYwYjYwODA4Mzk5ZDE7CglpbnQyNTYgY29uc3RhbnQgYzYgPSAgMHgwMDAwNDU1OTU2YmNjZGQwNjsKCWludDI1NiBjb25zdGFudCBjOCA9IC0weDAwMDAwMWI4OTNhZDA0YjNhOwoJCgkvLyBUaGUgcG9seW5vbWlhbCBSID0gMiArIGMyKnheMiArIGM0KnheNCArIC4uLgoJLy8gYXBwcm94aW1hdGVzIHRoZSBmdW5jdGlvbiB4KihleHAoeCkrMSkvKGV4cCh4KS0xKQoJLy8gSGVuY2UgZXhwKHgpID0gKFIoeCkreCkvKFIoeCkteCkKCWZ1bmN0aW9uIGZpeGVkRXhwKGludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYgZXhwKSB7CgkJaW50MjU2IHNjYWxlID0gKGEgKyAobG4yXzY0ZG90NSkpIC8gbG4yIC0gNjQ7CgkJYSAtPSBzY2FsZSpsbjI7CgkJaW50MjU2IHogPSAoYSphKSAvIG9uZTsKCQlpbnQyNTYgUiA9ICgoaW50MjU2KSgyKSAqIG9uZSkgKwoJCQkoeiooYzIgKyAoeiooYzQgKyAoeiooYzYgKyAoeipjOC9vbmUpKS9vbmUpKS9vbmUpKS9vbmUpOwoJCWV4cCA9ICh1aW50MjU2KSAoKChSICsgYSkgKiBvbmUpIC8gKFIgLSBhKSk7CgkJaWYgKHNjYWxlID49IDApCgkJCWV4cCA8PD0gc2NhbGU7CgkJZWxzZQoJCQlleHAgPj49IC1zY2FsZTsKCQlyZXR1cm4gZXhwOwoJfQoJCgkvLyBUaGUgYmVsb3cgYXJlIHNhZmVtYXRoIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgZm91ciBhcml0aG1ldGljIG9wZXJhdG9ycwoJLy8gZGVzaWduZWQgdG8gZXhwbGljaXRseSBwcmV2ZW50IG92ZXItIGFuZCB1bmRlci1mbG93cyBvZiBpbnRlZ2VyIHZhbHVlcy4KCglmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCWlmIChhID09IDApIHsKCQkJcmV0dXJuIDA7CgkJfQoJCXVpbnQyNTYgYyA9IGEgKiBiOwoJCWFzc2VydChjIC8gYSA9PSBiKTsKCQlyZXR1cm4gYzsKCX0KCglmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewoJCS8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAoJCXVpbnQyNTYgYyA9IGEgLyBiOwoJCS8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CgoJZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQl1aW50MjU2IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCgkvLyBUaGlzIGFsbG93cyB5b3UgdG8gYnV5IHRva2VucyBieSBzZW5kaW5nIEV0aGVyIGRpcmVjdGx5IHRvIHRoZSBzbWFydCBjb250cmFjdAoJLy8gd2l0aG91dCBpbmNsdWRpbmcgYW55IHRyYW5zYWN0aW9uIGRhdGEgKHVzZWZ1bCBmb3IsIHNheSwgbW9iaWxlIHdhbGxldCBhcHBzKS4KCWZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKCQkvLyBtc2cudmFsdWUgaXMgdGhlIGFtb3VudCBvZiBFdGhlciBzZW50IGJ5IHRoZSB0cmFuc2FjdGlvbi4KCQlpZiAobXNnLnZhbHVlID4gMCkgewoJCQlmdW5kKCk7CgkJfSBlbHNlIHsKCQkJd2l0aGRyYXdPbGQobXNnLnNlbmRlcik7CgkJfQoJfQp9'.
	

]
