Class {
	#name : #SRTe8ccceac43cfbb62be5b4e9971e4e26b83389ad0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe8ccceac43cfbb62be5b4e9971e4e26b83389ad0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgeCwgdWludCB5KSBwdXJlIGludGVybmFsIHJldHVybnModWludCkgewogICAgICB1aW50IHogPSB4ICsgeTsKICAgICAgYXNzZXJ0KCh6ID49IHgpICYmICh6ID49IHkpKTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1YnRyYWN0KHVpbnQgeCwgdWludCB5KSBwdXJlIGludGVybmFsIHJldHVybnModWludCkgewogICAgICBhc3NlcnQoeCA+PSB5KTsKICAgICAgdWludCB6ID0geCAtIHk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQgeCwgdWludCB5KSBwdXJlIGludGVybmFsIHJldHVybnModWludCkgewogICAgICB1aW50IHogPSB4ICogeTsKICAgICAgYXNzZXJ0KCh4ID09IDApfHwoei94ID09IHkpKTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmFuZG9tTnVtYmVyKHVpbnQxNiBtYXhSYW5kb20sIHVpbnQ4IG1pbiwgYWRkcmVzcyBwcml2YXRlQWRkcmVzcykgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDgpIHsKICAgICAgICB1aW50MjU2IGdlbk51bSA9IHVpbnQyNTYoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlci0xKSkgKyB1aW50MjU2KHByaXZhdGVBZGRyZXNzKTsKICAgICAgICByZXR1cm4gdWludDgoZ2VuTnVtICUgKG1heFJhbmRvbSAtIG1pbiArIDEpK21pbik7CiAgICB9Cn0KCmNvbnRyYWN0IEVudW1zIHsKICAgIGVudW0gUmVzdWx0Q29kZSB7CiAgICAgICAgU1VDQ0VTUywKICAgICAgICBFUlJPUl9DTEFTU19OT1RfRk9VTkQsCiAgICAgICAgRVJST1JfTE9XX0JBTEFOQ0UsCiAgICAgICAgRVJST1JfU0VORF9GQUlMLAogICAgICAgIEVSUk9SX05PVF9PV05FUiwKICAgICAgICBFUlJPUl9OT1RfRU5PVUdIX01PTkVZLAogICAgICAgIEVSUk9SX0lOVkFMSURfQU1PVU5UCiAgICB9CgogICAgZW51bSBBbmdlbEF1cmEgeyAKICAgICAgICBCbHVlLCAKICAgICAgICBZZWxsb3csIAogICAgICAgIFB1cnBsZSwgCiAgICAgICAgT3JhbmdlLCAKICAgICAgICBSZWQsIAogICAgICAgIEdyZWVuIAogICAgfQp9CgoKCmNvbnRyYWN0IEFjY2Vzc0NvbnRyb2wgewogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvckFkZHJlc3M7CiAgICB1aW50MTYgcHVibGljIHRvdGFsU2VyYXBoaW1zID0gMDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHNlcmFwaGltczsKCiAgICBib29sIHB1YmxpYyBpc01haW50ZW5hbmNlTW9kZSA9IHRydWU7CiAKICAgIG1vZGlmaWVyIG9ubHlDUkVBVE9SKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcmVhdG9yQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5U0VSQVBISU0oKSB7CiAgICAgICAgcmVxdWlyZShzZXJhcGhpbXNbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNDb250cmFjdEFjdGl2ZSB7CiAgICAgICAgcmVxdWlyZSghaXNNYWludGVuYW5jZU1vZGUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIENvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBBY2Nlc3NDb250cm9sKCkgcHVibGljIHsKICAgICAgICBjcmVhdG9yQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhZGRTRVJBUEhJTShhZGRyZXNzIF9uZXdTZXJhcGhpbSkgb25seUNSRUFUT1IgcHVibGljIHsKICAgICAgICBpZiAoc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPT0gZmFsc2UpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPSB0cnVlOwogICAgICAgICAgICB0b3RhbFNlcmFwaGltcyArPSAxOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVtb3ZlU0VSQVBISU0oYWRkcmVzcyBfb2xkU2VyYXBoaW0pIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaWYgKHNlcmFwaGltc1tfb2xkU2VyYXBoaW1dID09IHRydWUpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19vbGRTZXJhcGhpbV0gPSBmYWxzZTsKICAgICAgICAgICAgdG90YWxTZXJhcGhpbXMgLT0gMTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTWFpbnRlbmFuY2VNb2RlKGJvb2wgX2lzTWFpbnRhaW5pbmcpIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaXNNYWludGVuYW5jZU1vZGUgPSBfaXNNYWludGFpbmluZzsKICAgIH0KCiAgCn0gCgoKCmNvbnRyYWN0IElBY2Nlc3NvcnlEYXRhIGlzIEFjY2Vzc0NvbnRyb2wsIEVudW1zIHsKICAgIHVpbnQ4IHB1YmxpYyB0b3RhbEFjY2Vzc29yeVNlcmllczsgICAgCiAgICB1aW50MzIgcHVibGljIHRvdGFsQWNjZXNzb3JpZXM7CiAgICAKIAogICAgLyoqKiBGVU5DVElPTlMgKioqLwogICAgLy8qKiogV3JpdGUgQWNjZXNzICoqKi8vCiAgICBmdW5jdGlvbiBjcmVhdGVBY2Nlc3NvcnlTZXJpZXModWludDggX0FjY2Vzc29yeVNlcmllc0lkLCB1aW50MzIgX21heFRvdGFsLCB1aW50IF9wcmljZSkgb25seUNSRUFUT1IgcHVibGljIHJldHVybnModWludDgpIDsKCWZ1bmN0aW9uIHNldEFjY2Vzc29yeSh1aW50OCBfQWNjZXNzb3J5U2VyaWVzSWQsIGFkZHJlc3MgX293bmVyKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgcmV0dXJucyh1aW50NjQpOwogICBmdW5jdGlvbiBhZGRBY2Nlc3NvcnlJZE1hcHBpbmcoYWRkcmVzcyBfb3duZXIsIHVpbnQ2NCBfYWNjZXNzb3J5SWQpIHByaXZhdGU7CglmdW5jdGlvbiB0cmFuc2ZlckFjY2Vzc29yeShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDY0IF9fYWNjZXNzb3J5SWQpIG9ubHlTRVJBUEhJTSBwdWJsaWMgcmV0dXJucyhSZXN1bHRDb2RlKTsKICAgIGZ1bmN0aW9uIG93bmVyQWNjZXNzb3J5VHJhbnNmZXIgKGFkZHJlc3MgX3RvLCB1aW50NjQgX19hY2Nlc3NvcnlJZCkgIHB1YmxpYzsKICAgIAogICAgLy8qKiogUmVhZCBBY2Nlc3MgKioqLy8KICAgIGZ1bmN0aW9uIGdldEFjY2Vzc29yeVNlcmllcyh1aW50OCBfYWNjZXNzb3J5U2VyaWVzSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4IGFjY2Vzc29yeVNlcmllc0lkLCB1aW50MzIgY3VycmVudFRvdGFsLCB1aW50MzIgbWF4VG90YWwsIHVpbnQgcHJpY2UpIDsKCWZ1bmN0aW9uIGdldEFjY2Vzc29yeSh1aW50IF9hY2Nlc3NvcnlJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCBhY2Nlc3NvcnlJRCwgdWludDggQWNjZXNzb3J5U2VyaWVzSUQsIGFkZHJlc3Mgb3duZXIpOwoJZnVuY3Rpb24gZ2V0T3duZXJBY2Nlc3NvcnlDb3VudChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCk7CglmdW5jdGlvbiBnZXRBY2Nlc3NvcnlCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50IF9pbmRleCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCkgOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBY2Nlc3NvcnlTZXJpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpIDsKICAgIGZ1bmN0aW9uIGdldFRvdGFsQWNjZXNzb3JpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCk7Cn0KCgpjb250cmFjdCBJQW5nZWxDYXJkRGF0YSBpcyBBY2Nlc3NDb250cm9sLCBFbnVtcyB7CiAgICB1aW50OCBwdWJsaWMgdG90YWxBbmdlbENhcmRTZXJpZXM7CiAgICB1aW50NjQgcHVibGljIHRvdGFsQW5nZWxzOwoKICAgIAogICAgLy8gd3JpdGUKICAgIC8vIGFuZ2VscwogICAgZnVuY3Rpb24gY3JlYXRlQW5nZWxDYXJkU2VyaWVzKHVpbnQ4IF9hbmdlbENhcmRTZXJpZXNJZCwgdWludCBfYmFzZVByaWNlLCAgdWludDY0IF9tYXhUb3RhbCwgdWludDggX2Jhc2VBdXJhLCB1aW50MTYgX2Jhc2VCYXR0bGVQb3dlciwgdWludDY0IF9saXZlVGltZSkgb25seUNSRUFUT1IgZXh0ZXJuYWwgcmV0dXJucyh1aW50OCk7CiAgICBmdW5jdGlvbiB1cGRhdGVBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkKSBvbmx5Q1JFQVRPUiBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldEFuZ2VsKHVpbnQ4IF9hbmdlbENhcmRTZXJpZXNJZCwgYWRkcmVzcyBfb3duZXIsIHVpbnQgX3ByaWNlLCB1aW50MTYgX2JhdHRsZVBvd2VyKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gYWRkVG9BbmdlbEV4cGVyaWVuY2VMZXZlbCh1aW50NjQgX2FuZ2VsSWQsIHVpbnQgX3ZhbHVlKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRBbmdlbExhc3RCYXR0bGVUaW1lKHVpbnQ2NCBfYW5nZWxJZCkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2V0QW5nZWxMYXN0VnNCYXR0bGVUaW1lKHVpbnQ2NCBfYW5nZWxJZCkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2V0TGFzdEJhdHRsZVJlc3VsdCh1aW50NjQgX2FuZ2VsSWQsIHVpbnQxNiBfdmFsdWUpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIGFkZEFuZ2VsSWRNYXBwaW5nKGFkZHJlc3MgX293bmVyLCB1aW50NjQgX2FuZ2VsSWQpIHByaXZhdGU7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckFuZ2VsKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50NjQgX2FuZ2VsSWQpIG9ubHlTRVJBUEhJTSBwdWJsaWMgcmV0dXJucyhSZXN1bHRDb2RlKTsKICAgIGZ1bmN0aW9uIG93bmVyQW5nZWxUcmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQ2NCBfYW5nZWxJZCkgIHB1YmxpYzsKCiAgICAvLyByZWFkCiAgICBmdW5jdGlvbiBnZXRBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCBhbmdlbENhcmRTZXJpZXNJZCwgdWludDY0IGN1cnJlbnRBbmdlbFRvdGFsLCB1aW50IGJhc2VQcmljZSwgdWludDY0IG1heEFuZ2VsVG90YWwsIHVpbnQ4IGJhc2VBdXJhLCB1aW50IGJhc2VCYXR0bGVQb3dlciwgdWludDY0IGxhc3RTZWxsVGltZSwgdWludDY0IGxpdmVUaW1lKTsKICAgIGZ1bmN0aW9uIGdldEFuZ2VsKHVpbnQ2NCBfYW5nZWxJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDY0IGFuZ2VsSWQsIHVpbnQ4IGFuZ2VsQ2FyZFNlcmllc0lkLCB1aW50MTYgYmF0dGxlUG93ZXIsIHVpbnQ4IGF1cmEsIHVpbnQxNiBleHBlcmllbmNlLCB1aW50IHByaWNlLCB1aW50NjQgY3JlYXRlZFRpbWUsIHVpbnQ2NCBsYXN0QmF0dGxlVGltZSwgdWludDY0IGxhc3RWc0JhdHRsZVRpbWUsIHVpbnQxNiBsYXN0QmF0dGxlUmVzdWx0LCBhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIGdldE93bmVyQW5nZWxDb3VudChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBnZXRBbmdlbEJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbENhcmRTZXJpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbHMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDY0KTsKfQoKCmNvbnRyYWN0IElQZXRDYXJkRGF0YSBpcyBBY2Nlc3NDb250cm9sLCBFbnVtcyB7CiAgICB1aW50OCBwdWJsaWMgdG90YWxQZXRDYXJkU2VyaWVzOyAgICAKICAgIHVpbnQ2NCBwdWJsaWMgdG90YWxQZXRzOwogICAgCiAgICAvLyB3cml0ZQogICAgZnVuY3Rpb24gY3JlYXRlUGV0Q2FyZFNlcmllcyh1aW50OCBfcGV0Q2FyZFNlcmllc0lkLCB1aW50MzIgX21heFRvdGFsKSBvbmx5Q1JFQVRPUiBwdWJsaWMgcmV0dXJucyh1aW50OCk7CiAgICBmdW5jdGlvbiBzZXRQZXQodWludDggX3BldENhcmRTZXJpZXNJZCwgYWRkcmVzcyBfb3duZXIsIHN0cmluZyBfbmFtZSwgdWludDggX2x1Y2ssIHVpbnQxNiBfYXVyYVJlZCwgdWludDE2IF9hdXJhWWVsbG93LCB1aW50MTYgX2F1cmFCbHVlKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gc2V0UGV0QXVyYXModWludDY0IF9wZXRJZCwgdWludDggX2F1cmFSZWQsIHVpbnQ4IF9hdXJhQmx1ZSwgdWludDggX2F1cmFZZWxsb3cpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldFBldExhc3RUcmFpbmluZ1RpbWUodWludDY0IF9wZXRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2V0UGV0TGFzdEJyZWVkaW5nVGltZSh1aW50NjQgX3BldElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBhZGRQZXRJZE1hcHBpbmcoYWRkcmVzcyBfb3duZXIsIHVpbnQ2NCBfcGV0SWQpIHByaXZhdGU7CiAgICBmdW5jdGlvbiB0cmFuc2ZlclBldChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDY0IF9wZXRJZCkgb25seVNFUkFQSElNIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpOwogICAgZnVuY3Rpb24gb3duZXJQZXRUcmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQ2NCBfcGV0SWQpICBwdWJsaWM7CiAgICBmdW5jdGlvbiBzZXRQZXROYW1lKHN0cmluZyBfbmFtZSwgdWludDY0IF9wZXRJZCkgcHVibGljOwoKICAgIC8vIHJlYWQKICAgIGZ1bmN0aW9uIGdldFBldENhcmRTZXJpZXModWludDggX3BldENhcmRTZXJpZXNJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDggcGV0Q2FyZFNlcmllc0lkLCB1aW50MzIgY3VycmVudFBldFRvdGFsLCB1aW50MzIgbWF4UGV0VG90YWwpOwogICAgZnVuY3Rpb24gZ2V0UGV0KHVpbnQgX3BldElkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50IHBldElkLCB1aW50OCBwZXRDYXJkU2VyaWVzSWQsIHN0cmluZyBuYW1lLCB1aW50OCBsdWNrLCB1aW50MTYgYXVyYVJlZCwgdWludDE2IGF1cmFCbHVlLCB1aW50MTYgYXVyYVllbGxvdywgdWludDY0IGxhc3RUcmFpbmluZ1RpbWUsIHVpbnQ2NCBsYXN0QnJlZWRpbmdUaW1lLCBhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIGdldE93bmVyUGV0Q291bnQoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0UGV0QnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludCBfaW5kZXgpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0VG90YWxQZXRDYXJkU2VyaWVzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIGdldFRvdGFsUGV0cygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KTsKfQoKICAKCiAgIAoJCgpjb250cmFjdCBSZWFsbSBpcyBBY2Nlc3NDb250cm9sLCBFbnVtcywgU2FmZU1hdGggewogICAgLy8gQWRkcmVzc2VzIGZvciBvdGhlciBjb250cmFjdHMgcmVhbG0gaW50ZXJhY3RzIHdpdGguIAogICAgYWRkcmVzcyBwdWJsaWMgYW5nZWxDYXJkRGF0YUNvbnRyYWN0OwogICAgYWRkcmVzcyBwdWJsaWMgcGV0Q2FyZERhdGFDb250cmFjdDsKICAgIGFkZHJlc3MgcHVibGljIGFjY2Vzc29yeURhdGFDb250cmFjdDsKICAgIAogICAgLy8gZXZlbnRzCiAgICBldmVudCBFdmVudENyZWF0ZUFuZ2VsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludDY0IGFuZ2VsSWQpOwogICAgZXZlbnQgRXZlbnRDcmVhdGVQZXQoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IHBldElkKTsKICAgICBldmVudCBFdmVudENyZWF0ZUFjY2Vzc29yeShhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgYWNjZXNzb3J5SWQpOwogICAgCgogICAgLyoqKiBEQVRBIFRZUEVTICoqKi8KICAgIHN0cnVjdCBBbmdlbENhcmRTZXJpZXMgewogICAgICAgIHVpbnQ4IGFuZ2VsQ2FyZFNlcmllc0lkOwogICAgICAgIHVpbnQgYmFzZVByaWNlOyAKICAgICAgICB1aW50NjQgY3VycmVudEFuZ2VsVG90YWw7CiAgICAgICAgdWludDY0IG1heEFuZ2VsVG90YWw7CiAgICAgICAgQW5nZWxBdXJhIGJhc2VBdXJhOwogICAgICAgIHVpbnQgYmFzZUJhdHRsZVBvd2VyOwogICAgICAgIHVpbnQ2NCBsYXN0U2VsbFRpbWU7CiAgICAgICAgdWludDY0IGxpdmVUaW1lOwogICAgfQoKICAgIHN0cnVjdCBQZXRDYXJkU2VyaWVzIHsKICAgICAgICB1aW50OCBwZXRDYXJkU2VyaWVzSWQ7CiAgICAgICAgdWludDMyIGN1cnJlbnRQZXRUb3RhbDsKICAgICAgICB1aW50MzIgbWF4UGV0VG90YWw7CiAgICB9CgogICAgc3RydWN0IEFuZ2VsIHsKICAgICAgICB1aW50NjQgYW5nZWxJZDsKICAgICAgICB1aW50OCBhbmdlbENhcmRTZXJpZXNJZDsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIHVpbnQxNiBiYXR0bGVQb3dlcjsKICAgICAgICBBbmdlbEF1cmEgYXVyYTsKICAgICAgICB1aW50MTYgZXhwZXJpZW5jZTsKICAgICAgICB1aW50IHByaWNlOwogICAgICAgIHVpbnQ2NCBjcmVhdGVkVGltZTsKICAgICAgICB1aW50NjQgbGFzdEJhdHRsZVRpbWU7CiAgICAgICAgdWludDY0IGxhc3RWc0JhdHRsZVRpbWU7CiAgICAgICAgdWludDE2IGxhc3RCYXR0bGVSZXN1bHQ7CiAgICB9CgogICAgc3RydWN0IFBldCB7CiAgICAgICAgdWludDY0IHBldElkOwogICAgICAgIHVpbnQ4IHBldENhcmRTZXJpZXNJZDsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQ4IGx1Y2s7CiAgICAgICAgdWludDE2IGF1cmFSZWQ7CiAgICAgICAgdWludDE2IGF1cmFZZWxsb3c7CiAgICAgICAgdWludDE2IGF1cmFCbHVlOwogICAgICAgIHVpbnQ2NCBsYXN0VHJhaW5pbmdUaW1lOwogICAgICAgIHVpbnQ2NCBsYXN0QnJlZWRpbmdUaW1lOwogICAgICAgIHVpbnQgcHJpY2U7IAogICAgICAgIHVpbnQ2NCBsaXZlVGltZTsKICAgIH0KICAgIAogICAgICBzdHJ1Y3QgQWNjZXNzb3J5U2VyaWVzIHsKICAgICAgICB1aW50OCBBY2Nlc3NvcnlTZXJpZXNJZDsKICAgICAgICB1aW50MzIgY3VycmVudFRvdGFsOwogICAgICAgIHVpbnQzMiBtYXhUb3RhbDsKICAgICAgICB1aW50IHByaWNlOwogICAgfQoKICAgIHN0cnVjdCBBY2Nlc3NvcnkgewogICAgICAgIHVpbnQzMiBhY2Nlc3NvcnlJZDsKICAgICAgICB1aW50OCBhY2Nlc3NvcnlTZXJpZXNJZDsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgfQoKICAgIC8vIHdyaXRlIGZ1bmN0aW9ucwogICAgZnVuY3Rpb24gU2V0QW5nZWxDYXJkRGF0YUNvbnRhY3QoYWRkcmVzcyBfYW5nZWxDYXJkRGF0YUNvbnRyYWN0KSBvbmx5Q1JFQVRPUiBleHRlcm5hbCB7CiAgICAgICAgYW5nZWxDYXJkRGF0YUNvbnRyYWN0ID0gX2FuZ2VsQ2FyZERhdGFDb250cmFjdDsKICAgIH0KICAgIGZ1bmN0aW9uIFNldFBldENhcmREYXRhQ29udGFjdChhZGRyZXNzIF9wZXRDYXJkRGF0YUNvbnRyYWN0KSBvbmx5Q1JFQVRPUiBleHRlcm5hbCB7CiAgICAgICAgcGV0Q2FyZERhdGFDb250cmFjdCA9IF9wZXRDYXJkRGF0YUNvbnRyYWN0OwogICAgfQogICAgZnVuY3Rpb24gU2V0QWNjZXNzb3J5RGF0YUNvbnRhY3QoYWRkcmVzcyBfYWNjZXNzb3J5RGF0YUNvbnRyYWN0KSBvbmx5Q1JFQVRPUiBleHRlcm5hbCB7CiAgICAgICAgYWNjZXNzb3J5RGF0YUNvbnRyYWN0ID0gX2FjY2Vzc29yeURhdGFDb250cmFjdDsKICAgIH0KCgogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcigpIGV4dGVybmFsIG9ubHlDUkVBVE9SIHsKICAgIGNyZWF0b3JBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7Cn0KCiAgICAvL0NyZWF0ZSBlYWNoIG1pbnQgb2YgYSBwZXRDYXJkCiAgICAgZnVuY3Rpb24gY3JlYXRlUGV0KHVpbnQ4IF9wZXRDYXJkU2VyaWVzSWQsIHN0cmluZyBfbmV3bmFtZSkgaXNDb250cmFjdEFjdGl2ZSBleHRlcm5hbCB7CiAgICAgICAgSVBldENhcmREYXRhIHBldENhcmREYXRhID0gSVBldENhcmREYXRhKHBldENhcmREYXRhQ29udHJhY3QpOwogICAgICAgIFBldENhcmRTZXJpZXMgbWVtb3J5IHBldFNlcmllczsKICAgICAgCiAgICAgIAogICAgICAgICgscGV0U2VyaWVzLmN1cnJlbnRQZXRUb3RhbCwgcGV0U2VyaWVzLm1heFBldFRvdGFsKSA9IHBldENhcmREYXRhLmdldFBldENhcmRTZXJpZXMoX3BldENhcmRTZXJpZXNJZCk7CgogICAgICAgIAogICAgICAgIGlmIChwZXRTZXJpZXMuY3VycmVudFBldFRvdGFsID49IHBldFNlcmllcy5tYXhQZXRUb3RhbCkgeyByZXZlcnQgKCk7fQogICAgICAgIAogICAgICAgIC8vdGltZWNoZWNrcyAtIGluIGNhc2UgcGVvcGxlIHRyeSB0byBpbnRlcmFjdCB3aXRoIHRoZSBjb250cmFjdCBkaXJlY3RseSBhbmQgZ2V0IHBldHMgYmVmb3JlIHRoZXkgYXJlIGF2YWlsYWJsZQogICAgICAgIGlmIChfcGV0Q2FyZFNlcmllc0lkID4gNCkge3JldmVydCgpO30gLy9QZXRzIGhpZ2hlciB0aGFuIDQgY29tZSBmcm9tIGJhdHRsZSwgYnJlZWRpbmcsIG9yIG1hcmtldHBsYWNlLiAKICAgICAgICBpZiAoKF9wZXRDYXJkU2VyaWVzSWQgPT0gMikgJiYgKG5vdyA8IDE1MTgzNDg2MDApKSB7cmV2ZXJ0KCk7fQogICAgICAgIGlmICgoX3BldENhcmRTZXJpZXNJZCA9PSAzKSAmJiAobm93IDwgMTUyMDA3NjYwMCkpIHtyZXZlcnQoKTt9CiAgICAgICAgaWYgKChfcGV0Q2FyZFNlcmllc0lkID09IDQpICYmIChub3cgPCAxNTIxODA0NjAwKSkge3JldmVydCgpO30KICAgICAgICAgCiAgICAgICAgLy9maXJzdCBmaW5kIHBldCBsdWNrCiAgICAgICAgdWludDggX25ld0x1Y2sgPSBnZXRSYW5kb21OdW1iZXIoMTksIDEwLCBtc2cuc2VuZGVyKTsKICAgICAgICAKICAgICAgICAKICAgICAgICB1aW50MTYgX2F1cmFSZWQgPSAwOwogICAgICAgIHVpbnQxNiBfYXVyYVllbGxvdyA9IDA7CiAgICAgICAgdWludDE2IF9hdXJhQmx1ZSA9IDA7CiAgICAgICAgCiAgICAgICAgdWludDMyIF9hdXJhQ29sb3IgPSBnZXRSYW5kb21OdW1iZXIoMiwwLG1zZy5zZW5kZXIpOwogICAgICAgIGlmIChfYXVyYUNvbG9yID09IDApIHsgX2F1cmFSZWQgPSAyO30KICAgICAgICBpZiAoX2F1cmFDb2xvciA9PSAxKSB7IF9hdXJhWWVsbG93ID0gMjt9CiAgICAgICAgaWYgKF9hdXJhQ29sb3IgPT0gMikgeyBfYXVyYUJsdWUgPSAyO30KICAgICAgICAKICAgICAgICB1aW50NjQgcGV0SWQgPSBwZXRDYXJkRGF0YS5zZXRQZXQoX3BldENhcmRTZXJpZXNJZCwgbXNnLnNlbmRlciwgX25ld25hbWUsIF9uZXdMdWNrLCBfYXVyYVJlZCwgX2F1cmFZZWxsb3csIF9hdXJhQmx1ZSk7CiAgICAgICAgCiAgICAgICAgRXZlbnRDcmVhdGVQZXQobXNnLnNlbmRlciwgcGV0SWQpOwogICAgfQoKIC8vQ3JlYXRlIGVhY2ggbWludCBvZiBhIEFjY2Vzc29yeSBjYXJkIAogICAgIGZ1bmN0aW9uIGNyZWF0ZUFjY2Vzc29yeSh1aW50OCBfYWNjZXNzb3J5U2VyaWVzSWQpIGlzQ29udHJhY3RBY3RpdmUgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgaWYgKF9hY2Nlc3NvcnlTZXJpZXNJZCA+IDE4KSB7cmV2ZXJ0KCk7fSAKICAgIElBY2Nlc3NvcnlEYXRhIEFjY2Vzc29yeURhdGEgPSBJQWNjZXNzb3J5RGF0YShhY2Nlc3NvcnlEYXRhQ29udHJhY3QpOwogICAgICBBY2Nlc3NvcnlTZXJpZXMgbWVtb3J5IGFjY2Vzc29yeVNlcmllczsKICAgICAgKCxhY2Nlc3NvcnlTZXJpZXMuY3VycmVudFRvdGFsLCBhY2Nlc3NvcnlTZXJpZXMubWF4VG90YWwsIGFjY2Vzc29yeVNlcmllcy5wcmljZSkgPSBBY2Nlc3NvcnlEYXRhLmdldEFjY2Vzc29yeVNlcmllcyhfYWNjZXNzb3J5U2VyaWVzSWQpOwogICAgaWYgKGFjY2Vzc29yeVNlcmllcy5jdXJyZW50VG90YWwgPj0gYWNjZXNzb3J5U2VyaWVzLm1heFRvdGFsKSB7IHJldmVydCAoKTt9CiAgICAgIGlmIChtc2cudmFsdWUgPCBhY2Nlc3NvcnlTZXJpZXMucHJpY2UpIHsgcmV2ZXJ0KCk7fQogICAgIHVpbnQ2NCBhY2Nlc3NvcnlJZCA9IEFjY2Vzc29yeURhdGEuc2V0QWNjZXNzb3J5KF9hY2Nlc3NvcnlTZXJpZXNJZCwgbXNnLnNlbmRlcik7CiAgICAgCiAgICAgRXZlbnRDcmVhdGVBY2Nlc3NvcnkobXNnLnNlbmRlciwgYWNjZXNzb3J5SWQpOwogICAgfQogICAgCiAgICAKICAgIC8vIGNyZWF0ZWQgZXZlcnkgbWludCBvZiBhbiBhbmdlbCBjYXJkCiAgICBmdW5jdGlvbiBjcmVhdGVBbmdlbCh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQpIGlzQ29udHJhY3RBY3RpdmUgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgSUFuZ2VsQ2FyZERhdGEgYW5nZWxDYXJkRGF0YSA9IElBbmdlbENhcmREYXRhKGFuZ2VsQ2FyZERhdGFDb250cmFjdCk7CiAgICAgICAgQW5nZWxDYXJkU2VyaWVzIG1lbW9yeSBzZXJpZXM7CiAgICAgICAgKCwgc2VyaWVzLmN1cnJlbnRBbmdlbFRvdGFsLCBzZXJpZXMuYmFzZVByaWNlLCBzZXJpZXMubWF4QW5nZWxUb3RhbCwsc2VyaWVzLmJhc2VCYXR0bGVQb3dlciwgc2VyaWVzLmxhc3RTZWxsVGltZSwgc2VyaWVzLmxpdmVUaW1lKSA9IGFuZ2VsQ2FyZERhdGEuZ2V0QW5nZWxDYXJkU2VyaWVzKF9hbmdlbENhcmRTZXJpZXNJZCk7CiAgICAgIAogICAgICBpZiAoIF9hbmdlbENhcmRTZXJpZXNJZCA+IDI0KSB7cmV2ZXJ0KCk7fQogICAgICAgIC8vQ2hlY2tlZCBoZXJlIGFuZCBpbiBhbmdlbENhcmREYXRhCiAgICAgICAgaWYgKHNlcmllcy5jdXJyZW50QW5nZWxUb3RhbCA+PSBzZXJpZXMubWF4QW5nZWxUb3RhbCkgeyByZXZlcnQoKTt9CiAgICAgICAgaWYgKF9hbmdlbENhcmRTZXJpZXNJZCA+IDMpIHsKICAgICAgICAgICAgLy8gY2hlY2sgaXMgaXQgd2l0aGluIHRoZSAgcmVsZWFzZSBzY2hlZHVsZQogICAgICAgICAgICBpZiAobm93IDwgc2VyaWVzLmxpdmVUaW1lKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIFZlcmlmeSB0aGUgcHJpY2UgcGFpZCBmb3IgY2FyZCBpcyBjb3JyZWN0CiAgICAgICAgaWYgKHNlcmllcy5iYXNlUHJpY2UgPiBtc2cudmFsdWUpIHtyZXZlcnQoKTsgfQogICAgICAgIAogICAgICAgIC8vIGFkZCBhbmdlbAogICAgICAgIHVpbnQ2NCBhbmdlbElkID0gYW5nZWxDYXJkRGF0YS5zZXRBbmdlbChfYW5nZWxDYXJkU2VyaWVzSWQsIG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgdWludDE2KHNlcmllcy5iYXNlQmF0dGxlUG93ZXIrZ2V0UmFuZG9tTnVtYmVyKDEwLDAsbXNnLnNlbmRlcikpKTsKICAgICAgICAKICAgICAgICBFdmVudENyZWF0ZUFuZ2VsKG1zZy5zZW5kZXIsIGFuZ2VsSWQpOwogICAgfQogICAgICBmdW5jdGlvbiBraWxsKCkgb25seUNSRUFUT1IgZXh0ZXJuYWwgewogICAgICAgIHNlbGZkZXN0cnVjdChjcmVhdG9yQWRkcmVzcyk7CiAgICB9Cn0='.
	

]
