Class {
	#name : #SRTAc709FcB44a43c35F0DA4e3163b117A17F3770f5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTAc709FcB44a43c35F0DA4e3163b117A17F3770f5 >> base64 [
	^ 'LyoqCiAqIE92ZXJmbG93IGF3YXJlIHVpbnQgbWF0aCBmdW5jdGlvbnMuCiAqCiAqIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9NYWtlckRBTy9tYWtlci1vdGMvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3NpbXBsZV9tYXJrZXQuc29sCiAqLwpwcmFnbWEgc29saWRpdHkgXjAuNC4yOwoKY29udHJhY3QgU2FmZU1hdGggewogIC8vaW50ZXJuYWxzCgogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB0aHJvdzsKICB9Cn0KCi8qKgogKiBFUkMgMjAgdG9rZW4KICoKICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBUb2tlbiB7CgogICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CgogICAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB3ZWkgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKfQoKLyoqCiAqIEVSQyAyMCB0b2tlbgogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIC8qKgogICAgICogUmV2aWV3ZWQ6CiAgICAgKiAtIEludGVyZ2VyIG92ZXJmbG93ID0gT0ssIGNoZWNrZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKfQoKCi8qKgogKiBBcmNhZGUgQ2l0eSBjcm93ZHNhbGUgY3Jvd2RzYWxlIGNvbnRyYWN0LgogKgogKiBTZWN1cml0eSBjcml0ZXJpYSBldmFsdWF0ZWQgYWdhaW5zdCBodHRwOi8vZXRoZXJldW0uc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzg1NTEvbWV0aG9kb2xvZ2ljYWwtc2VjdXJpdHktcmV2aWV3LW9mLWEtc21hcnQtY29udHJhY3QKICoKICoKICovCmNvbnRyYWN0IEFSQ1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFNhZmVNYXRoIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiQXJjYWRlIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkFSQyI7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludCBwdWJsaWMgc3RhcnRCbG9jazsgLy9jcm93ZHNhbGUgc3RhcnQgYmxvY2sgKHNldCBpbiBjb25zdHJ1Y3RvcikKICAgIHVpbnQgcHVibGljIGVuZEJsb2NrOyAvL2Nyb3dkc2FsZSBlbmQgYmxvY2sgKHNldCBpbiBjb25zdHJ1Y3RvcikKCiAgICAvLyBJbml0aWFsIG11bHRpc2lnIGFkZHJlc3MgKHNldCBpbiBjb25zdHJ1Y3RvcikKICAgIC8vIEFsbCBkZXBvc2l0ZWQgRVRIIHdpbGwgYmUgaW5zdGFudGx5IGZvcndhcmRlZCB0byB0aGlzIGFkZHJlc3MuCiAgICAvLyBBZGRyZXNzIGlzIGEgbXVsdGlzaWcgd2FsbGV0LgogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWcgPSAweDA7CgogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlciA9IDB4MDsKICAgIGFkZHJlc3MgcHVibGljIGRldmVsb3BlciA9IDB4MDsKICAgIGFkZHJlc3MgcHVibGljIHJld2FyZHMgPSAweDA7CiAgICBib29sIHB1YmxpYyByZXdhcmRBZGRyZXNzZXNTZXQgPSBmYWxzZTsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lciA9IDB4MDsKICAgIGJvb2wgcHVibGljIG1hcmtldGFjdGl2ZSA9IGZhbHNlOwoKICAgIHVpbnQgcHVibGljIGV0aGVyQ2FwID0gNjcyMDAwICogMTAqKjE4OyAvL21heCBhbW91bnQgcmFpc2VkIGR1cmluZyBjcm93ZHNhbGUgKDguNU0gVVNEIHdvcnRoIG9mIGV0aGVyIHdpbGwgYmUgbWVhc3VyZWQgd2l0aCBhIG1vdmluZyBhdmVyYWdlIG1hcmtldCBwcmljZSBhdCBiZWdpbm5pbmcgb2YgdGhlIGNyb3dkc2FsZSkKICAgIHVpbnQgcHVibGljIHJld2FyZHNBbGxvY2F0aW9uID0gMjsgLy8yJSB0b2tlbnMgYWxsb2NhdGVkIHBvc3QtY3Jvd2RzYWxlIGZvciBzd2FybSByZXdhcmRzCiAgICB1aW50IHB1YmxpYyBkZXZlbG9wZXJBbGxvY2F0aW9uID0gNiA7IC8vNiUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBwb3N0LWNyb3dkc2FsZSBmb3IgdGhlIGRldmVsb3BlciBmdW5kCiAgICB1aW50IHB1YmxpYyBmb3VuZGVyQWxsb2NhdGlvbiA9IDg7IC8vOCUgb2YgdG9rZW4gc3VwcGx5IGFsbG9jYXRlZCBwb3N0LWNyb3dkc2FsZSBmb3IgdGhlIGZvdW5kZXIgYWxsb2NhdGlvbgogICAgYm9vbCBwdWJsaWMgYWxsb2NhdGVkID0gZmFsc2U7IC8vdGhpcyB3aWxsIGNoYW5nZSB0byB0cnVlIHdoZW4gdGhlIHJld2FyZHMgYXJlIGFsbG9jYXRlZAogICAgdWludCBwdWJsaWMgcHJlc2FsZVRva2VuU3VwcGx5ID0gMDsgLy90aGlzIHdpbGwga2VlcCB0cmFjayBvZiB0aGUgdG9rZW4gc3VwcGx5IGNyZWF0ZWQgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgIHVpbnQgcHVibGljIHByZXNhbGVFdGhlclJhaXNlZCA9IDA7IC8vdGhpcyB3aWxsIGtlZXAgdHJhY2sgb2YgdGhlIEV0aGVyIHJhaXNlZCBkdXJpbmcgdGhlIGNyb3dkc2FsZQogICAgYm9vbCBwdWJsaWMgaGFsdGVkID0gZmFsc2U7IC8vdGhlIGZvdW5kZXIgYWRkcmVzcyBjYW4gc2V0IHRoaXMgdG8gdHJ1ZSB0byBoYWx0IHRoZSBjcm93ZHNhbGUgZHVlIHRvIGVtZXJnZW5jeQogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgZXRoLCB1aW50IGZidCk7CgogICAgZnVuY3Rpb24gQVJDVG9rZW4oYWRkcmVzcyBtdWx0aXNpZ0lucHV0LCB1aW50IHN0YXJ0QmxvY2tJbnB1dCwgdWludCBlbmRCbG9ja0lucHV0KSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIG11bHRpc2lnID0gbXVsdGlzaWdJbnB1dDsKCiAgICAgICAgc3RhcnRCbG9jayA9IHN0YXJ0QmxvY2tJbnB1dDsKICAgICAgICBlbmRCbG9jayA9IGVuZEJsb2NrSW5wdXQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UmV3YXJkQWRkcmVzc2VzKGFkZHJlc3MgZm91bmRlcklucHV0LCBhZGRyZXNzIGRldmVsb3BlcklucHV0LCBhZGRyZXNzIHJld2FyZHNJbnB1dCl7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIGlmIChyZXdhcmRBZGRyZXNzZXNTZXQpIHRocm93OwogICAgICAgIGZvdW5kZXIgPSBmb3VuZGVySW5wdXQ7CiAgICAgICAgZGV2ZWxvcGVyID0gZGV2ZWxvcGVySW5wdXQ7CiAgICAgICAgcmV3YXJkcyA9IHJld2FyZHNJbnB1dDsKICAgICAgICByZXdhcmRBZGRyZXNzZXNTZXQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaWNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHRlc3RQcmljZShibG9jay5udW1iZXIpOyAgICAgICAgCiAgICB9CgogICAgLy8gcHJpY2UoKSBleHBvc2VkIGZvciB1bml0IHRlc3RzCiAgICBmdW5jdGlvbiB0ZXN0UHJpY2UodWludCBibG9ja051bWJlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKGJsb2NrTnVtYmVyPj1zdGFydEJsb2NrICYmIGJsb2NrTnVtYmVyPHN0YXJ0QmxvY2srMjUwKSByZXR1cm4gMTI1OyAvL3Bvd2VyIGhvdXIKICAgICAgICBpZiAoYmxvY2tOdW1iZXI8c3RhcnRCbG9jayB8fCBibG9ja051bWJlcj5lbmRCbG9jaykgcmV0dXJuIDc1OyAvL2RlZmF1bHQgcHJpY2UKICAgICAgICByZXR1cm4gNzUgKyA0KihlbmRCbG9jayAtIGJsb2NrTnVtYmVyKS8oZW5kQmxvY2sgLSBzdGFydEJsb2NrICsgMSkqMzQvNDsgLy9jcm93ZHNhbGUgcHJpY2UKICAgIH0KCiAgICAvKioKICAgICAqIE1haW4gdG9rZW4gYnV5IGZ1bmN0aW9uLgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIHVzaW5nIFNhZmVNYXRoCiAgICAgKgogICAgICogLSBoYWx0IGZsYWcgYWRkZWQgLSBvawogICAgICoKICAgICAqIEFwcGxpY2FibGUgdGVzdHM6CiAgICAgKgogICAgICogLSBUZXN0IGhhbHRpbmcsIGJ1eWluZywgYW5kIGZhaWxpbmcKICAgICAqIC0gVGVzdCBidXlpbmcgb24gYmVoYWxmIG9mIGEgcmVjaXBpZW50CiAgICAgKiAtIFRlc3QgYnV5CiAgICAgKiAtIFRlc3QgdW5oYWx0aW5nLCBidXlpbmcsIGFuZCBzdWNjZWVkaW5nCiAgICAgKiAtIFRlc3QgYnV5aW5nIGFmdGVyIHRoZSBzYWxlIGVuZHMKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eVJlY2lwaWVudChhZGRyZXNzIHJlY2lwaWVudCkgewogICAgICAgIGlmIChibG9jay5udW1iZXI8c3RhcnRCbG9jayB8fCBibG9jay5udW1iZXI+ZW5kQmxvY2sgfHwgc2FmZUFkZChwcmVzYWxlRXRoZXJSYWlzZWQsbXNnLnZhbHVlKT5ldGhlckNhcCB8fCBoYWx0ZWQpIHRocm93OwogICAgICAgIHVpbnQgdG9rZW5zID0gc2FmZU11bChtc2cudmFsdWUsIHByaWNlKCkpOwogICAgICAgIGJhbGFuY2VzW3JlY2lwaWVudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3JlY2lwaWVudF0sIHRva2Vucyk7CiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCB0b2tlbnMpOwogICAgICAgIHByZXNhbGVFdGhlclJhaXNlZCA9IHNhZmVBZGQocHJlc2FsZUV0aGVyUmFpc2VkLCBtc2cudmFsdWUpOwoKICAgICAgICBpZiAoIW11bHRpc2lnLnNlbmQobXNnLnZhbHVlKSkgdGhyb3c7IC8vaW1tZWRpYXRlbHkgc2VuZCBFdGhlciB0byBtdWx0aXNpZyBhZGRyZXNzCgogICAgICAgIC8vIGlmIGV0aGVyQ2FwIGlzIHJlYWNoZWQgLSBhY3RpdmF0ZSB0aGUgbWFya2V0CiAgICAgICAgaWYgKHByZXNhbGVFdGhlclJhaXNlZCA9PSBldGhlckNhcCAmJiAhbWFya2V0YWN0aXZlKXsKICAgICAgICAgICAgbWFya2V0YWN0aXZlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIEJ1eShyZWNpcGllbnQsIG1zZy52YWx1ZSwgdG9rZW5zKTsKCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdXAgZm91bmRlciBhZGRyZXNzIHRva2VuIGJhbGFuY2UuCiAgICAgKgogICAgICogYWxsb2NhdGVCb3VudHlBbmRFY29zeXN0ZW1Ub2tlbnMoKSBtdXN0IGJlIGNhbGxkIGZpcnN0LgogICAgICoKICAgICAqIFNlY3VyaXR5IHJldmlldwogICAgICoKICAgICAqIC0gSW50ZWdlciBtYXRoOiBvayAtIG9ubHkgY2FsbGVkIG9uY2Ugd2l0aCBmaXhlZCBwYXJhbWV0ZXJzCiAgICAgKgogICAgICogQXBwbGljYWJsZSB0ZXN0czoKICAgICAqCiAgICAgKiAtIFRlc3QgYm91bnR5IGFuZCBlY29zeXN0ZW0gYWxsb2NhdGlvbgogICAgICogLSBUZXN0IGJvdW50eSBhbmQgZWNvc3lzdGVtIGFsbG9jYXRpb24gdHdpY2UKICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG9jYXRlVG9rZW5zKCkgewogICAgICAgIC8vIG1ha2Ugc3VyZSBmb3VuZGVyL2RldmVsb3Blci9yZXdhcmRzIGFkZHJlc3NlcyBhcmUgY29uZmlndXJlZAogICAgICAgIGlmKGZvdW5kZXIgPT0gMHgwIHx8IGRldmVsb3BlciA9PSAweDAgfHwgcmV3YXJkcyA9PSAweDApIHRocm93OwogICAgICAgIC8vIG93bmVyL2ZvdW5kZXIvZGV2ZWxvcGVyL3Jld2FyZHMgYWRkcmVzc2VzIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBtc2cuc2VuZGVyICE9IGZvdW5kZXIgJiYgbXNnLnNlbmRlciAhPSBkZXZlbG9wZXIgJiYgbXNnLnNlbmRlciAhPSByZXdhcmRzICkgdGhyb3c7CiAgICAgICAgLy8gaXQgc2hvdWxkIG9ubHkgY29udGludWUgaWYgZW5kQmxvY2sgaGFzIHBhc3NlZCBPUiBwcmVzYWxlRXRoZXJSYWlzZWQgaGFzIHJlYWNoZWQgdGhlIGNhcAogICAgICAgIGlmIChibG9jay5udW1iZXIgPD0gZW5kQmxvY2sgJiYgcHJlc2FsZUV0aGVyUmFpc2VkIDwgZXRoZXJDYXApIHRocm93OwogICAgICAgIGlmIChhbGxvY2F0ZWQpIHRocm93OwogICAgICAgIHByZXNhbGVUb2tlblN1cHBseSA9IHRvdGFsU3VwcGx5OwogICAgICAgIC8vIHRvdGFsIHRva2VuIGFsbG9jYXRpb25zIGFkZCB1cCB0byAxNiUgb2YgdG90YWwgY29pbnMsIHNvIGZvcm11bGEgaXMgcmV3YXJkPWFsbG9jYXRpb25faW5fcGVyY2VudC84NCAuCiAgICAgICAgYmFsYW5jZXNbZm91bmRlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW2ZvdW5kZXJdLCBwcmVzYWxlVG9rZW5TdXBwbHkgKiBmb3VuZGVyQWxsb2NhdGlvbiAvIDg0ICk7CiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBwcmVzYWxlVG9rZW5TdXBwbHkgKiBmb3VuZGVyQWxsb2NhdGlvbiAvIDg0KTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tkZXZlbG9wZXJdID0gc2FmZUFkZChiYWxhbmNlc1tkZXZlbG9wZXJdLCBwcmVzYWxlVG9rZW5TdXBwbHkgKiBkZXZlbG9wZXJBbGxvY2F0aW9uIC8gODQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgcHJlc2FsZVRva2VuU3VwcGx5ICogZGV2ZWxvcGVyQWxsb2NhdGlvbiAvIDg0KTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tyZXdhcmRzXSA9IHNhZmVBZGQoYmFsYW5jZXNbcmV3YXJkc10sIHByZXNhbGVUb2tlblN1cHBseSAqIHJld2FyZHNBbGxvY2F0aW9uIC8gODQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSwgcHJlc2FsZVRva2VuU3VwcGx5ICogcmV3YXJkc0FsbG9jYXRpb24gLyA4NCk7CgogICAgICAgIGFsbG9jYXRlZCA9IHRydWU7CgogICAgfQoKICAgIC8qKgogICAgICogRW1lcmdlbmN5IFN0b3AgY3Jvd2RzYWxlLgogICAgICoKICAgICAqICBBcHBsaWNhYmxlIHRlc3RzOgogICAgICoKICAgICAqIC0gVGVzdCB1bmhhbHRpbmcsIGJ1eWluZywgYW5kIHN1Y2NlZWRpbmcKICAgICAqLwogICAgZnVuY3Rpb24gaGFsdCgpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciE9Zm91bmRlciAmJiBtc2cuc2VuZGVyICE9IGRldmVsb3BlcikgdGhyb3c7CiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bmhhbHQoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIhPWZvdW5kZXIgJiYgbXNnLnNlbmRlciAhPSBkZXZlbG9wZXIpIHRocm93OwogICAgICAgIGhhbHRlZCA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogRVJDIDIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZSB0cmFuc2ZlciBmdW5jdGlvbgogICAgICoKICAgICAqIFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIHRva2VuIHNhbGUgaXMgb3Zlci4KICAgICAqCiAgICAgKiBBcHBsaWNhYmxlIHRlc3RzOgogICAgICoKICAgICAqIC0gVGVzdCB0cmFuc2ZlciBhZnRlciByZXN0cmljdGVkIHBlcmlvZAogICAgICogLSBUZXN0IHRyYW5zZmVyIGFmdGVyIG1hcmtldCBhY3RpdmF0ZWQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrICYmIG1hcmtldGFjdGl2ZSA9PSBmYWxzZSkgdGhyb3c7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KICAgIC8qKgogICAgICogRVJDIDIwIFN0YW5kYXJkIFRva2VuIGludGVyZmFjZSB0cmFuc2ZlciBmdW5jdGlvbgogICAgICoKICAgICAqIFByZXZlbnQgdHJhbnNmZXJzIHVudGlsIHRva2VuIHNhbGUgaXMgb3Zlci4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBlbmRCbG9jayAmJiBtYXJrZXRhY3RpdmUgPT0gZmFsc2UpIHRocm93OwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIERpcmVjdCBkZXBvc2l0cyBidXlzIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIGJ1eVJlY2lwaWVudChtc2cuc2VuZGVyKTsKICAgIH0KCn0='.
	

]
