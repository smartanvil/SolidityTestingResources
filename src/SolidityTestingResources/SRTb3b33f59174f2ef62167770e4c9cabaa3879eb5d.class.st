Class {
	#name : #SRTb3b33f59174f2ef62167770e4c9cabaa3879eb5d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb3b33f59174f2ef62167770e4c9cabaa3879eb5d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9CgovKgogKiBIYWx0YWJsZQogKgogKiBBYnN0cmFjdCBjb250cmFjdCB0aGF0IGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4KICogZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLiBEaWZmZXJzIGZyb20gUGF1c2FibGUgYnkgcmVxdWlyaW5nIGEgc3RhdGUuCiAqCiAqCiAqIE9yaWdpbmFsbHkgZW52aXNpb25lZCBpbiBGaXJzdEJsb29kIElDTyBjb250cmFjdC4KICovCmNvbnRyYWN0IEhhbHRhYmxlIGlzIE93bmFibGUgewogIGJvb2wgcHVibGljIGhhbHRlZCA9IGZhbHNlOwoKICBtb2RpZmllciBpbk5vcm1hbFN0YXRlIHsKICAgIHJlcXVpcmUoIWhhbHRlZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaW5FbWVyZ2VuY3lTdGF0ZSB7CiAgICByZXF1aXJlKGhhbHRlZCk7CiAgICBfOwogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBoYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIGluTm9ybWFsU3RhdGUgewogICAgaGFsdGVkID0gdHJ1ZTsKICB9CgogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiB1bmhhbHQoKSBleHRlcm5hbCBvbmx5T3duZXIgaW5FbWVyZ2VuY3lTdGF0ZSB7CiAgICBoYWx0ZWQgPSBmYWxzZTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBCdXJuYWJsZQogKgogKiBAZGV2IFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqLwpjb250cmFjdCBCdXJuYWJsZSBpcyBTdGFuZGFyZFRva2VuIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQgKi8KICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IHZhbHVlKTsKCiAgZnVuY3Rpb24gYnVybih1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKF92YWx1ZSA+IDAgJiYgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBidXJuRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXF1aXJlKF9mcm9tICE9IDB4MCAmJiBfdmFsdWUgPiAwICYmIGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBCdXJuKF9mcm9tLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmVxdWlyZShfdG8gIT0gMHgwKTsgLy91c2UgYnVybgoKICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7IC8vdXNlIGJ1cm4KCiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQp9CgovKioKICogQHRpdGxlIEppbmNvclRva2VuCiAqCiAqIEBkZXYgQnVybmFibGUgT3duYWJsZSBFUkMyMCB0b2tlbgogKi8KY29udHJhY3QgSmluY29yVG9rZW4gaXMgQnVybmFibGUsIE93bmFibGUgewoKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiSmluY29yIFRva2VuIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJKQ1IiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIHVpbnQgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gMzUwMDAwMDAgKiAxIGV0aGVyOwoKICAvKiBUaGUgZmluYWxpemVyIGNvbnRyYWN0IHRoYXQgYWxsb3dzIHVubGlmdCB0aGUgdHJhbnNmZXIgbGltaXRzIG9uIHRoaXMgdG9rZW4gKi8KICBhZGRyZXNzIHB1YmxpYyByZWxlYXNlQWdlbnQ7CgogIC8qKiBBIGNyb3dkc2FsZSBjb250cmFjdCBjYW4gcmVsZWFzZSB1cyB0byB0aGUgd2lsZCBpZiBJQ08gc3VjY2Vzcy4gSWYgZmFsc2Ugd2UgYXJlIGFyZSBpbiB0cmFuc2ZlciBsb2NrIHVwIHBlcmlvZC4qLwogIGJvb2wgcHVibGljIHJlbGVhc2VkID0gZmFsc2U7CgogIC8qKiBNYXAgb2YgYWdlbnRzIHRoYXQgYXJlIGFsbG93ZWQgdG8gdHJhbnNmZXIgdG9rZW5zIHJlZ2FyZGxlc3Mgb2YgdGhlIGxvY2sgZG93biBwZXJpb2QuIFRoZXNlIGFyZSBjcm93ZHNhbGUgY29udHJhY3RzIGFuZCBwb3NzaWJsZSB0aGUgdGVhbSBtdWx0aXNpZyBpdHNlbGYuICovCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgdHJhbnNmZXJBZ2VudHM7CgogIC8qKgogICAqIExpbWl0IHRva2VuIHRyYW5zZmVyIHVudGlsIHRoZSBjcm93ZHNhbGUgaXMgb3Zlci4KICAgKgogICAqLwogIG1vZGlmaWVyIGNhblRyYW5zZmVyKGFkZHJlc3MgX3NlbmRlcikgewogICAgcmVxdWlyZShyZWxlYXNlZCB8fCB0cmFuc2ZlckFnZW50c1tfc2VuZGVyXSk7CiAgICBfOwogIH0KCiAgLyoqIFRoZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIG9ubHkgYmVmb3JlIG9yIGFmdGVyIHRoZSB0b2tlbnMgaGF2ZSBiZWVuIHJlbGVhc2VkICovCiAgbW9kaWZpZXIgaW5SZWxlYXNlU3RhdGUoYm9vbCByZWxlYXNlU3RhdGUpIHsKICAgIHJlcXVpcmUocmVsZWFzZVN0YXRlID09IHJlbGVhc2VkKTsKICAgIF87CiAgfQoKICAvKiogVGhlIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgb25seSBieSBhIHdoaXRlbGlzdGVkIHJlbGVhc2UgYWdlbnQuICovCiAgbW9kaWZpZXIgb25seVJlbGVhc2VBZ2VudCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWxlYXNlQWdlbnQpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IENvbnN0cnVjdG9yIHRoYXQgZ2l2ZXMgbXNnLnNlbmRlciBhbGwgb2YgZXhpc3RpbmcgdG9rZW5zLgogICAqLwogIGZ1bmN0aW9uIEppbmNvclRva2VuKCkgewogICAgdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gSU5JVElBTF9TVVBQTFk7CiAgfQoKCiAgLyoqCiAgICogU2V0IHRoZSBjb250cmFjdCB0aGF0IGNhbiBjYWxsIHJlbGVhc2UgYW5kIG1ha2UgdGhlIHRva2VuIHRyYW5zZmVyYWJsZS4KICAgKgogICAqIERlc2lnbiBjaG9pY2UuIEFsbG93IHJlc2V0IHRoZSByZWxlYXNlIGFnZW50IHRvIGZpeCBmYXQgZmluZ2VyIG1pc3Rha2VzLgogICAqLwogIGZ1bmN0aW9uIHNldFJlbGVhc2VBZ2VudChhZGRyZXNzIGFkZHIpIG9ubHlPd25lciBpblJlbGVhc2VTdGF0ZShmYWxzZSkgcHVibGljIHsKICAgIHJlcXVpcmUoYWRkciAhPSAweDApOwoKICAgIC8vIFdlIGRvbid0IGRvIGludGVyZmFjZSBjaGVjayBoZXJlIGFzIHdlIG1pZ2h0IHdhbnQgdG8gYSBub3JtYWwgd2FsbGV0IGFkZHJlc3MgdG8gYWN0IGFzIGEgcmVsZWFzZSBhZ2VudAogICAgcmVsZWFzZUFnZW50ID0gYWRkcjsKICB9CgogIGZ1bmN0aW9uIHJlbGVhc2UoKSBvbmx5UmVsZWFzZUFnZW50IGluUmVsZWFzZVN0YXRlKGZhbHNlKSBwdWJsaWMgewogICAgcmVsZWFzZWQgPSB0cnVlOwogIH0KCiAgLyoqCiAgICogT3duZXIgY2FuIGFsbG93IGEgcGFydGljdWxhciBhZGRyZXNzIChhIGNyb3dkc2FsZSBjb250cmFjdCkgdG8gdHJhbnNmZXIgdG9rZW5zIGRlc3BpdGUgdGhlIGxvY2sgdXAgcGVyaW9kLgogICAqLwogIGZ1bmN0aW9uIHNldFRyYW5zZmVyQWdlbnQoYWRkcmVzcyBhZGRyLCBib29sIHN0YXRlKSBvbmx5T3duZXIgaW5SZWxlYXNlU3RhdGUoZmFsc2UpIHB1YmxpYyB7CiAgICByZXF1aXJlKGFkZHIgIT0gMHgwKTsKICAgIHRyYW5zZmVyQWdlbnRzW2FkZHJdID0gc3RhdGU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGNhblRyYW5zZmVyKG1zZy5zZW5kZXIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gQ2FsbCBCdXJuYWJsZS50cmFuc2ZlcigpCiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgY2FuVHJhbnNmZXIoX2Zyb20pIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy8gQ2FsbCBCdXJuYWJsZS50cmFuc2ZlckZvcm0oKQogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYnVybih1aW50IF92YWx1ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHN1cGVyLmJ1cm4oX3ZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gc3VwZXIuYnVybkZyb20oX2Zyb20sIF92YWx1ZSk7CiAgfQp9Cgpjb250cmFjdCBJbnZlc3RvcldoaXRlTGlzdCBpcyBPd25hYmxlIHsKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpbnZlc3RvcldoaXRlTGlzdDsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBhZGRyZXNzKSBwdWJsaWMgcmVmZXJyYWxMaXN0OwoKICBmdW5jdGlvbiBJbnZlc3RvcldoaXRlTGlzdCgpIHsKCiAgfQoKICBmdW5jdGlvbiBhZGRJbnZlc3RvclRvV2hpdGVMaXN0KGFkZHJlc3MgaW52ZXN0b3IpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICByZXF1aXJlKGludmVzdG9yICE9IDB4MCAmJiAhaW52ZXN0b3JXaGl0ZUxpc3RbaW52ZXN0b3JdKTsKICAgIGludmVzdG9yV2hpdGVMaXN0W2ludmVzdG9yXSA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVJbnZlc3RvckZyb21XaGl0ZUxpc3QoYWRkcmVzcyBpbnZlc3RvcikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHJlcXVpcmUoaW52ZXN0b3IgIT0gMHgwICYmIGludmVzdG9yV2hpdGVMaXN0W2ludmVzdG9yXSk7CiAgICBpbnZlc3RvcldoaXRlTGlzdFtpbnZlc3Rvcl0gPSBmYWxzZTsKICB9CgogIC8vd2hlbiBuZXcgdXNlciB3aWxsIGNvbnRyaWJ1dGUgSUNPIGNvbnRyYWN0IHdpbGwgYXV0b21hdGljYWxseSBzZW5kIGJvbnVzIHRvIHJlZmVycmFsCiAgZnVuY3Rpb24gYWRkUmVmZXJyYWxPZihhZGRyZXNzIGludmVzdG9yLCBhZGRyZXNzIHJlZmVycmFsKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShpbnZlc3RvciAhPSAweDAgJiYgcmVmZXJyYWwgIT0gMHgwICYmIHJlZmVycmFsTGlzdFtpbnZlc3Rvcl0gPT0gMHgwICYmIGludmVzdG9yICE9IHJlZmVycmFsKTsKICAgIHJlZmVycmFsTGlzdFtpbnZlc3Rvcl0gPSByZWZlcnJhbDsKICB9CgogIGZ1bmN0aW9uIGlzQWxsb3dlZChhZGRyZXNzIGludmVzdG9yKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgcmV0dXJuIGludmVzdG9yV2hpdGVMaXN0W2ludmVzdG9yXTsKICB9CgogIGZ1bmN0aW9uIGdldFJlZmVycmFsT2YoYWRkcmVzcyBpbnZlc3RvcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYWRkcmVzcyByZXN1bHQpIHsKICAgIHJldHVybiByZWZlcnJhbExpc3RbaW52ZXN0b3JdOwogIH0KfQoKY29udHJhY3QgUHJpY2VSZWNlaXZlciB7CiAgYWRkcmVzcyBwdWJsaWMgZXRoUHJpY2VQcm92aWRlcjsKCiAgYWRkcmVzcyBwdWJsaWMgYnRjUHJpY2VQcm92aWRlcjsKCiAgbW9kaWZpZXIgb25seUV0aFByaWNlUHJvdmlkZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoUHJpY2VQcm92aWRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUJ0Y1ByaWNlUHJvdmlkZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYnRjUHJpY2VQcm92aWRlcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gcmVjZWl2ZUV0aFByaWNlKHVpbnQgZXRoVXNkUHJpY2UpIGV4dGVybmFsOwoKICBmdW5jdGlvbiByZWNlaXZlQnRjUHJpY2UodWludCBidGNVc2RQcmljZSkgZXh0ZXJuYWw7CgogIGZ1bmN0aW9uIHNldEV0aFByaWNlUHJvdmlkZXIoYWRkcmVzcyBwcm92aWRlcikgZXh0ZXJuYWw7CgogIGZ1bmN0aW9uIHNldEJ0Y1ByaWNlUHJvdmlkZXIoYWRkcmVzcyBwcm92aWRlcikgZXh0ZXJuYWw7Cn0KCmNvbnRyYWN0IEppbmNvclRva2VuSUNPIGlzIEhhbHRhYmxlLCBQcmljZVJlY2VpdmVyIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkppbmNvciBUb2tlbiBJQ08iOwoKICBKaW5jb3JUb2tlbiBwdWJsaWMgdG9rZW47CgogIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICBhZGRyZXNzIHB1YmxpYyBjb25zdGFudCBwcmVTYWxlQWRkcmVzcyA9IDB4OTQ5QzlCOGRGZjliMjY0Q0FENTdGNjlDZDk4RUNhMTMzOEYwNUIzOTsKCiAgSW52ZXN0b3JXaGl0ZUxpc3QgcHVibGljIGludmVzdG9yV2hpdGVMaXN0OwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBqY3JVc2RSYXRlID0gMTAwOyAvL2luIGNlbnRzCgogIHVpbnQgcHVibGljIGV0aFVzZFJhdGU7CgogIHVpbnQgcHVibGljIGJ0Y1VzZFJhdGU7CgogIHVpbnQgcHVibGljIGhhcmRDYXA7CgogIHVpbnQgcHVibGljIHNvZnRDYXA7CgogIHVpbnQgcHVibGljIGNvbGxlY3RlZCA9IDA7CgogIHVpbnQgcHVibGljIHRva2Vuc1NvbGQgPSAwOwoKICB1aW50IHB1YmxpYyB3ZWlSZWZ1bmRlZCA9IDA7CgogIHVpbnQgcHVibGljIHN0YXJ0QmxvY2s7CgogIHVpbnQgcHVibGljIGVuZEJsb2NrOwoKICBib29sIHB1YmxpYyBzb2Z0Q2FwUmVhY2hlZCA9IGZhbHNlOwoKICBib29sIHB1YmxpYyBjcm93ZHNhbGVGaW5pc2hlZCA9IGZhbHNlOwoKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBkZXBvc2l0ZWQ7CgogIHVpbnQgY29uc3RhbnQgVk9MVU1FXzIwX1JFRl83ID0gNTAwMCBldGhlcjsKCiAgdWludCBjb25zdGFudCBWT0xVTUVfMTVfUkVGXzYgPSAyMDAwIGV0aGVyOwoKICB1aW50IGNvbnN0YW50IFZPTFVNRV8xMmQ1X1JFRl81ZDUgPSAxMDAwIGV0aGVyOwoKICB1aW50IGNvbnN0YW50IFZPTFVNRV8xMF9SRUZfNSA9IDUwMCBldGhlcjsKCiAgdWludCBjb25zdGFudCBWT0xVTUVfN19SRUZfNCA9IDI1MCBldGhlcjsKCiAgdWludCBjb25zdGFudCBWT0xVTUVfNV9SRUZfMyA9IDEwMCBldGhlcjsKCiAgZXZlbnQgU29mdENhcFJlYWNoZWQodWludCBzb2Z0Q2FwKTsKCiAgZXZlbnQgTmV3Q29udHJpYnV0aW9uKGFkZHJlc3MgaW5kZXhlZCBob2xkZXIsIHVpbnQgdG9rZW5BbW91bnQsIHVpbnQgZXRoZXJBbW91bnQpOwoKICBldmVudCBOZXdSZWZlcnJhbFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBpbnZlc3RvciwgYWRkcmVzcyBpbmRleGVkIHJlZmVycmFsLCB1aW50IHRva2VuQW1vdW50KTsKCiAgZXZlbnQgUmVmdW5kZWQoYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludCBhbW91bnQpOwoKICBtb2RpZmllciBpY29BY3RpdmUoKSB7CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+PSBzdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8IGVuZEJsb2NrKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBpY29FbmRlZCgpIHsKICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IGVuZEJsb2NrKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBtaW5JbnZlc3RtZW50KCkgewogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gMC4xICogMSBldGhlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaW5XaGl0ZUxpc3QoKSB7CiAgICByZXF1aXJlKGludmVzdG9yV2hpdGVMaXN0LmlzQWxsb3dlZChtc2cuc2VuZGVyKSk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gSmluY29yVG9rZW5JQ08oCiAgICB1aW50IF9oYXJkQ2FwSkNSLAogICAgdWludCBfc29mdENhcEpDUiwKICAgIGFkZHJlc3MgX3Rva2VuLAogICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksCiAgICBhZGRyZXNzIF9pbnZlc3RvcldoaXRlTGlzdCwKICAgIHVpbnQgX2Jhc2VFdGhVc2RQcmljZSwKICAgIHVpbnQgX2Jhc2VCdGNVc2RQcmljZSwKCiAgICB1aW50IF9zdGFydEJsb2NrLAogICAgdWludCBfZW5kQmxvY2sKICApIHsKICAgIGhhcmRDYXAgPSBfaGFyZENhcEpDUi5tdWwoMSBldGhlcik7CiAgICBzb2Z0Q2FwID0gX3NvZnRDYXBKQ1IubXVsKDEgZXRoZXIpOwoKICAgIHRva2VuID0gSmluY29yVG9rZW4oX3Rva2VuKTsKICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgaW52ZXN0b3JXaGl0ZUxpc3QgPSBJbnZlc3RvcldoaXRlTGlzdChfaW52ZXN0b3JXaGl0ZUxpc3QpOwoKICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnRCbG9jazsKICAgIGVuZEJsb2NrID0gX2VuZEJsb2NrOwoKICAgIGV0aFVzZFJhdGUgPSBfYmFzZUV0aFVzZFByaWNlOwogICAgYnRjVXNkUmF0ZSA9IF9iYXNlQnRjVXNkUHJpY2U7CiAgICBvd25lciA9IDB4ZDE0MzZGMEE1ZTliMDYzNzMzQTY3RTVkYzlBYmU0NTc5MkE0MjNmRTsKICB9CgogIGZ1bmN0aW9uKCkgcGF5YWJsZSBtaW5JbnZlc3RtZW50IGluV2hpdGVMaXN0IHsKICAgIGRvUHVyY2hhc2UoKTsKICB9CgogIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsIGljb0VuZGVkIHsKICAgIHJlcXVpcmUoc29mdENhcFJlYWNoZWQgPT0gZmFsc2UpOwogICAgcmVxdWlyZShkZXBvc2l0ZWRbbXNnLnNlbmRlcl0gPiAwKTsKCiAgICB1aW50IHJlZnVuZCA9IGRlcG9zaXRlZFttc2cuc2VuZGVyXTsKCiAgICBkZXBvc2l0ZWRbbXNnLnNlbmRlcl0gPSAwOwogICAgbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmQpOwoKICAgIHdlaVJlZnVuZGVkID0gd2VpUmVmdW5kZWQuYWRkKHJlZnVuZCk7CiAgICBSZWZ1bmRlZChtc2cuc2VuZGVyLCByZWZ1bmQpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShzb2Z0Q2FwUmVhY2hlZCk7CiAgICBiZW5lZmljaWFyeS50cmFuc2Zlcihjb2xsZWN0ZWQpOwogICAgdG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIHRva2VuLmJhbGFuY2VPZih0aGlzKSk7CiAgICBjcm93ZHNhbGVGaW5pc2hlZCA9IHRydWU7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVCb251cyh1aW50IHRva2VucykgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCBib251cykgewogICAgaWYgKG1zZy52YWx1ZSA+PSBWT0xVTUVfMjBfUkVGXzcpIHsKICAgICAgcmV0dXJuIHRva2Vucy5tdWwoMjApLmRpdigxMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzE1X1JFRl82KSB7CiAgICAgIHJldHVybiB0b2tlbnMubXVsKDE1KS5kaXYoMTAwKTsKICAgIH0KCiAgICBpZiAobXNnLnZhbHVlID49IFZPTFVNRV8xMmQ1X1JFRl81ZDUpIHsKICAgICAgcmV0dXJuIHRva2Vucy5tdWwoMTI1KS5kaXYoMTAwMCk7CiAgICB9CgogICAgaWYgKG1zZy52YWx1ZSA+PSBWT0xVTUVfMTBfUkVGXzUpIHsKICAgICAgcmV0dXJuIHRva2Vucy5tdWwoMTApLmRpdigxMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzdfUkVGXzQpIHsKICAgICAgcmV0dXJuIHRva2Vucy5tdWwoNykuZGl2KDEwMCk7CiAgICB9CgogICAgaWYgKG1zZy52YWx1ZSA+PSBWT0xVTUVfNV9SRUZfMykgewogICAgICByZXR1cm4gdG9rZW5zLm11bCg1KS5kaXYoMTAwKTsKICAgIH0KCiAgICByZXR1cm4gMDsKICB9CgogIGZ1bmN0aW9uIGNhbGN1bGF0ZVJlZmVycmFsQm9udXModWludCB0b2tlbnMpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYm9udXMpIHsKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzIwX1JFRl83KSB7CiAgICAgIHJldHVybiB0b2tlbnMubXVsKDcpLmRpdigxMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzE1X1JFRl82KSB7CiAgICAgIHJldHVybiB0b2tlbnMubXVsKDYpLmRpdigxMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzEyZDVfUkVGXzVkNSkgewogICAgICByZXR1cm4gdG9rZW5zLm11bCg1NSkuZGl2KDEwMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzEwX1JFRl81KSB7CiAgICAgIHJldHVybiB0b2tlbnMubXVsKDUpLmRpdigxMDApOwogICAgfQoKICAgIGlmIChtc2cudmFsdWUgPj0gVk9MVU1FXzdfUkVGXzQpIHsKICAgICAgcmV0dXJuIHRva2Vucy5tdWwoNCkuZGl2KDEwMCk7CiAgICB9CgogICAgaWYgKG1zZy52YWx1ZSA+PSBWT0xVTUVfNV9SRUZfMykgewogICAgICByZXR1cm4gdG9rZW5zLm11bCgzKS5kaXYoMTAwKTsKICAgIH0KCiAgICByZXR1cm4gMDsKICB9CgogIGZ1bmN0aW9uIHJlY2VpdmVFdGhQcmljZSh1aW50IGV0aFVzZFByaWNlKSBleHRlcm5hbCBvbmx5RXRoUHJpY2VQcm92aWRlciB7CiAgICByZXF1aXJlKGV0aFVzZFByaWNlID4gMCk7CiAgICBldGhVc2RSYXRlID0gZXRoVXNkUHJpY2U7CiAgfQoKICBmdW5jdGlvbiByZWNlaXZlQnRjUHJpY2UodWludCBidGNVc2RQcmljZSkgZXh0ZXJuYWwgb25seUJ0Y1ByaWNlUHJvdmlkZXIgewogICAgcmVxdWlyZShidGNVc2RQcmljZSA+IDApOwogICAgYnRjVXNkUmF0ZSA9IGJ0Y1VzZFByaWNlOwogIH0KCiAgZnVuY3Rpb24gc2V0RXRoUHJpY2VQcm92aWRlcihhZGRyZXNzIHByb3ZpZGVyKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShwcm92aWRlciAhPSAweDApOwogICAgZXRoUHJpY2VQcm92aWRlciA9IHByb3ZpZGVyOwogIH0KCiAgZnVuY3Rpb24gc2V0QnRjUHJpY2VQcm92aWRlcihhZGRyZXNzIHByb3ZpZGVyKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShwcm92aWRlciAhPSAweDApOwogICAgYnRjUHJpY2VQcm92aWRlciA9IHByb3ZpZGVyOwogIH0KCiAgZnVuY3Rpb24gc2V0TmV3V2hpdGVMaXN0KGFkZHJlc3MgbmV3V2hpdGVMaXN0KSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdXaGl0ZUxpc3QgIT0gMHgwKTsKICAgIGludmVzdG9yV2hpdGVMaXN0ID0gSW52ZXN0b3JXaGl0ZUxpc3QobmV3V2hpdGVMaXN0KTsKICB9CgogIGZ1bmN0aW9uIGRvUHVyY2hhc2UoKSBwcml2YXRlIGljb0FjdGl2ZSBpbk5vcm1hbFN0YXRlIHsKICAgIHJlcXVpcmUoIWNyb3dkc2FsZUZpbmlzaGVkKTsKCiAgICB1aW50IHRva2VucyA9IG1zZy52YWx1ZS5tdWwoZXRoVXNkUmF0ZSkuZGl2KGpjclVzZFJhdGUpOwogICAgdWludCByZWZlcnJhbEJvbnVzID0gY2FsY3VsYXRlUmVmZXJyYWxCb251cyh0b2tlbnMpOwogICAgYWRkcmVzcyByZWZlcnJhbCA9IGludmVzdG9yV2hpdGVMaXN0LmdldFJlZmVycmFsT2YobXNnLnNlbmRlcik7CgogICAgdG9rZW5zID0gdG9rZW5zLmFkZChjYWxjdWxhdGVCb251cyh0b2tlbnMpKTsKCiAgICB1aW50IG5ld1Rva2Vuc1NvbGQgPSB0b2tlbnNTb2xkLmFkZCh0b2tlbnMpOwoKICAgIGlmIChyZWZlcnJhbEJvbnVzID4gMCAmJiByZWZlcnJhbCAhPSAweDApIHsKICAgICAgbmV3VG9rZW5zU29sZCA9IG5ld1Rva2Vuc1NvbGQuYWRkKHJlZmVycmFsQm9udXMpOwogICAgfQoKICAgIHJlcXVpcmUobmV3VG9rZW5zU29sZCA8PSBoYXJkQ2FwKTsKCiAgICBpZiAoIXNvZnRDYXBSZWFjaGVkICYmIG5ld1Rva2Vuc1NvbGQgPj0gc29mdENhcCkgewogICAgICBzb2Z0Q2FwUmVhY2hlZCA9IHRydWU7CiAgICAgIFNvZnRDYXBSZWFjaGVkKHNvZnRDYXApOwogICAgfQoKICAgIGNvbGxlY3RlZCA9IGNvbGxlY3RlZC5hZGQobXNnLnZhbHVlKTsKCiAgICB0b2tlbnNTb2xkID0gbmV3VG9rZW5zU29sZDsKCiAgICBkZXBvc2l0ZWRbbXNnLnNlbmRlcl0gPSBkZXBvc2l0ZWRbbXNnLnNlbmRlcl0uYWRkKG1zZy52YWx1ZSk7CgogICAgdG9rZW4udHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5zKTsKICAgIE5ld0NvbnRyaWJ1dGlvbihtc2cuc2VuZGVyLCB0b2tlbnMsIG1zZy52YWx1ZSk7CgogICAgaWYgKHJlZmVycmFsQm9udXMgPiAwICYmIHJlZmVycmFsICE9IDB4MCkgewogICAgICB0b2tlbi50cmFuc2ZlcihyZWZlcnJhbCwgcmVmZXJyYWxCb251cyk7CiAgICAgIE5ld1JlZmVycmFsVHJhbnNmZXIobXNnLnNlbmRlciwgcmVmZXJyYWwsIHJlZmVycmFsQm9udXMpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIGljb0VuZGVkIHsKICAgIHN1cGVyLnRyYW5zZmVyT3duZXJzaGlwKG5ld093bmVyKTsKICB9Cn0='.
	

]
