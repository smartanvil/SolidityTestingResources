Class {
	#name : #SRT10d9601e7a7bf1c9c3dfe7d93b4050867829a3fd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT10d9601e7a7bf1c9c3dfe7d93b4050867829a3fd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgoqIENyeXB0b0RldlRlYW0uTmV0IFByZXNlbnRzCiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09KgoqCiogQnVpbHQgYnkgdHJ1c3RlZCBjb21tdW5pdHkgbWVtYmVycwoqIElyb25IYW5kc0NvaW4gaXMgYSBQaGlsIGFwcHJvdmVkIFB5cmFtaWQgICAgICAgICAgICAgICAgICAgICAgICAgCioKKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qCiogLT4gV2hhdD8KKiBUaGUgb3JpZ2luYWwgYXV0b25vbW91cyBweXJhbWlkLCBpbXByb3ZlZDoKKiBbeF0gTW9yZSBzdGFibGUgdGhhbiBldmVyLCBoYXZpbmcgd2l0aHN0b29kIHNldmVyZSB0ZXN0bmV0IGFidXNlIGFuZCBhdHRhY2sgYXR0ZW1wdHMgZnJvbSBvdXIgY29tbXVuaXR5IS4KKiBbeF0gQXVkaXRlZCwgdGVzdGVkLCBhbmQgYXBwcm92ZWQgYnkga25vd24gY29tbXVuaXR5IHNlY3VyaXR5IHNwZWNpYWxpc3RzLgoqIFtYXSBOZXcgZnVuY3Rpb25hbGl0eTsgeW91IGNhbiBub3cgcGVyZm9ybSBwYXJ0aWFsIHNlbGwgb3JkZXJzLiBJZiB5b3Ugc3VjY3VtYiB0byB3ZWFrIGhhbmRzLCB5b3UgZG9uJ3QgaGF2ZSB0byBkdW1wIGFsbCBvZiB5b3VyIGJhZ3MhCiogW3hdIE5ldyBmdW5jdGlvbmFsaXR5OyB5b3UgY2FuIG5vdyB0cmFuc2ZlciB0b2tlbnMgYmV0d2VlbiB3YWxsZXRzLiBUcmFkaW5nIGlzIG5vdyBwb3NzaWJsZSBmcm9tIHdpdGhpbiB0aGUgY29udHJhY3QhCiogW3hdIE5ldyBGZWF0dXJlOiBQb1MgTWFzdGVybm9kZXMhIFRoZSBmaXJzdCBpbXBsZW1lbnRhdGlvbiBvZiBFdGhlcmV1bSBTdGFraW5nIGluIHRoZSB3b3JsZCEgVml0YWxpayBpcyBtYWQuCiogW3hdIE1hc3Rlcm5vZGVzOiBIb2xkaW5nIDUwIElIQyBhbGxvdyB5b3UgdG8gZ2VuZXJhdGUgYSBHYW5nc3Rlcm5vZGUgbGluaywgR2FuZ3N0ZXJub2RlIGxpbmtzIGFyZSB1c2VkIGFzIHVuaXF1ZSBlbnRyeSBwb2ludHMgdG8gdGhlIGNvbnRyYWN0IQoqIFt4XSBNYXN0ZXJub2RlczogQWxsIHBsYXllcnMgd2hvIGVudGVyIHRoZSBjb250cmFjdCB0aHJvdWdoIHlvdXIgTWFzdGVybm9kZSBoYXZlIDMwJSBvZiB0aGVpciAxMCUgZGl2aWRlbmRzIGZlZSByZXJvdXRlZCBmcm9tIHRoZSBtYXN0ZXItbm9kZSwgdG8gdGhlIG5vZGUtbWFzdGVyIQoqIFt4XSBHYW1lIHBsYXkhIE5vIHRyYW5zZmVyIHRheCBhbmQgd2Ugd2lsbCBiZSBhZGRpbmcgZ2FtaW5nIGZ1bmN0aW9uYWxpdHktcmlzayB5b3VyIElIQyB0b2tlbnMgYW5kIHdpbiBtb3JlIQoqCiogLT4gV2hhdCBhYm91dCB0aGUgbGFzdCBwcm9qZWN0cz8KKiBFdmVyeSBwcm9ncmFtbWluZyBtZW1iZXIgb2YgdGhlIG9sZCBkZXYgdGVhbSBoYXMgYmVlbiBmaXJlZCBhbmQvb3Iga2lsbGVkLgoqIFRoZSBuZXcgZGV2IHRlYW0gY29uc2lzdHMgb2Ygc2Vhc29uZWQsIHByb2Zlc3Npb25hbCBkZXZlbG9wZXJzIGFuZCBoYXMgYmVlbiBhdWRpdGVkIGJ5IHZldGVyYW4gc29saWRpdHkgZXhwZXJ0cy4KKiBBZGRpdGlvbmFsbHksIHR3byBpbmRlcGVuZGVudCB0ZXN0bmV0IGl0ZXJhdGlvbnMgaGF2ZSBiZWVuIHVzZWQgYnkgaHVuZHJlZHMgb2YgcGVvcGxlOyBub3QgYSBzaW5nbGUgcG9pbnQgb2YgZmFpbHVyZSB3YXMgZm91bmQuCiogCiogLT4gV2hvIHdvcmtlZCBvbiB0aGlzIHByb2plY3Q/CiogVHJ1c3RlZCBjb21tdW5pdHkgbWVtYmVycwoqCiovCgpjb250cmFjdCBJcm9uSGFuZHNDb2luIHsKICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgTU9ESUZJRVJTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8vIG9ubHkgcGVvcGxlIHdpdGggdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QmFnaG9sZGVycygpIHsKICAgICAgICByZXF1aXJlKG15VG9rZW5zKCkgPiAwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBvbmx5IHBlb3BsZSB3aXRoIHByb2ZpdHMKICAgIG1vZGlmaWVyIG9ubHlTdHJvbmdoYW5kcygpIHsKICAgICAgICByZXF1aXJlKG15RGl2aWRlbmRzKHRydWUpID4gMCk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8gYWRtaW5pc3RyYXRvcnMgY2FuOgogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb250cmFjdAogICAgLy8gLT4gY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSB0b2tlbgogICAgLy8gLT4gY2hhbmdlIHRoZSBQb1MgZGlmZmljdWx0eSAoSG93IG1hbnkgdG9rZW5zIGl0IGNvc3RzIHRvIGhvbGQgYSBtYXN0ZXJub2RlLCBpbiBjYXNlIGl0IGdldHMgY3JhenkgaGlnaCBsYXRlcikKICAgIC8vIHRoZXkgQ0FOTk9UOgogICAgLy8gLT4gdGFrZSBmdW5kcwogICAgLy8gLT4gZGlzYWJsZSB3aXRoZHJhd2FscwogICAgLy8gLT4ga2lsbCB0aGUgY29udHJhY3QKICAgIC8vIC0+IGNoYW5nZSB0aGUgcHJpY2Ugb2YgdG9rZW5zCiAgICBtb2RpZmllciBvbmx5QWRtaW5pc3RyYXRvcigpewogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmVxdWlyZShhZG1pbmlzdHJhdG9yc1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgCiAgICAvLyBlbnN1cmVzIHRoYXQgdGhlIGZpcnN0IHRva2VucyBpbiB0aGUgY29udHJhY3Qgd2lsbCBiZSBlcXVhbGx5IGRpc3RyaWJ1dGVkCiAgICAvLyBtZWFuaW5nLCBubyBkaXZpbmUgZHVtcCB3aWxsIGJlIGV2ZXIgcG9zc2libGUKICAgIC8vIHJlc3VsdDogaGVhbHRoeSBsb25nZXZpdHkuCiAgICBtb2RpZmllciBhbnRpRWFybHlXaGFsZSh1aW50MjU2IF9hbW91bnRPZkV0aGVyZXVtKXsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIC8vIGFyZSB3ZSBzdGlsbCBpbiB0aGUgdnVsbmVyYWJsZSBwaGFzZT8KICAgICAgICAvLyBpZiBzbywgZW5hY3QgYW50aSBlYXJseSB3aGFsZSBwcm90b2NvbCAKICAgICAgICBpZiggb25seUFtYmFzc2Fkb3JzICYmICgodG90YWxFdGhlcmV1bUJhbGFuY2UoKSAtIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yUXVvdGFfICkpewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgLy8gaXMgdGhlIGN1c3RvbWVyIGluIHRoZSBhbWJhc3NhZG9yIGxpc3Q/CiAgICAgICAgICAgICAgICBhbWJhc3NhZG9yc19bX2N1c3RvbWVyQWRkcmVzc10gPT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBkb2VzIHRoZSBjdXN0b21lciBwdXJjaGFzZSBleGNlZWQgdGhlIG1heCBhbWJhc3NhZG9yIHF1b3RhPwogICAgICAgICAgICAgICAgKGFtYmFzc2Fkb3JBY2N1bXVsYXRlZFF1b3RhX1tfY3VzdG9tZXJBZGRyZXNzXSArIF9hbW91bnRPZkV0aGVyZXVtKSA8PSBhbWJhc3NhZG9yTWF4UHVyY2hhc2VfCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHVwZGF0ZWQgdGhlIGFjY3VtdWxhdGVkIHF1b3RhICAgIAogICAgICAgICAgICBhbWJhc3NhZG9yQWNjdW11bGF0ZWRRdW90YV9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQoYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfW19jdXN0b21lckFkZHJlc3NdLCBfYW1vdW50T2ZFdGhlcmV1bSk7CiAgICAgICAgCiAgICAgICAgICAgIC8vIGV4ZWN1dGUKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBldGhlciBjb3VudCBkcm9wcyBsb3csIHRoZSBhbWJhc3NhZG9yIHBoYXNlIHdvbid0IHJlaW5pdGlhdGUKICAgICAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICAgICAgICAgIF87ICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIAogICAgCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIEVWRU5UUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCiAgICBldmVudCBvblRva2VuUHVyY2hhc2UoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGluY29taW5nRXRoZXJldW0sCiAgICAgICAgdWludDI1NiB0b2tlbnNNaW50ZWQsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVkQnkKICAgICk7CiAgICAKICAgIGV2ZW50IG9uVG9rZW5TZWxsKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBjdXN0b21lckFkZHJlc3MsCiAgICAgICAgdWludDI1NiB0b2tlbnNCdXJuZWQsCiAgICAgICAgdWludDI1NiBldGhlcmV1bUVhcm5lZAogICAgKTsKICAgIAogICAgZXZlbnQgb25SZWludmVzdG1lbnQoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGN1c3RvbWVyQWRkcmVzcywKICAgICAgICB1aW50MjU2IGV0aGVyZXVtUmVpbnZlc3RlZCwKICAgICAgICB1aW50MjU2IHRva2Vuc01pbnRlZAogICAgKTsKICAgIAogICAgZXZlbnQgb25XaXRoZHJhdygKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgY3VzdG9tZXJBZGRyZXNzLAogICAgICAgIHVpbnQyNTYgZXRoZXJldW1XaXRoZHJhd24KICAgICk7CiAgICAKICAgIC8vIEVSQzIwCiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NiB0b2tlbnMKICAgICk7CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICA9ICAgICAgICAgICAgQ09ORklHVVJBQkxFUyAgICAgICAgICAgID0KICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIklyb25IYW5kc0NvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiSUhDIjsKICAgIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludDggY29uc3RhbnQgaW50ZXJuYWwgZGl2aWRlbmRGZWVfID0gMzsgLy8gTG9vaywgc3Ryb25nIE1hdGgKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluaXRpYWxfID0gMC4wMDAwMDAwMSBldGhlcjsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgdG9rZW5QcmljZUluY3JlbWVudGFsXyA9IDAuMDAwMDAwMDEgZXRoZXI7CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIG1hZ25pdHVkZSA9IDIqKjY0OwogICAgCiAgICAvLyBwcm9vZiBvZiBzdGFrZSAoZGVmYXVsdHMgYXQgMTAwIHRva2VucykKICAgIHVpbnQyNTYgcHVibGljIHN0YWtpbmdSZXF1aXJlbWVudCA9IDUwZTE4OwogICAgCiAgICAvLyBhbWJhc3NhZG9yIHByb2dyYW0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBhbWJhc3NhZG9yc187CiAgICB1aW50MjU2IGNvbnN0YW50IGludGVybmFsIGFtYmFzc2Fkb3JNYXhQdXJjaGFzZV8gPSAxIGV0aGVyOwogICAgdWludDI1NiBjb25zdGFudCBpbnRlcm5hbCBhbWJhc3NhZG9yUXVvdGFfID0gMyBldGhlcjsKICAgIAogICAgCiAgICAKICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgPSAgICAgICAgICAgIERBVEFTRVRTICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgLy8gYW1vdW50IG9mIHNoYXJlcyBmb3IgZWFjaCBhZGRyZXNzIChzY2FsZWQgbnVtYmVyKQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIHRva2VuQmFsYW5jZUxlZGdlcl87CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgcmVmZXJyYWxCYWxhbmNlXzsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIGludGVybmFsIHBheW91dHNUb187CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgYW1iYXNzYWRvckFjY3VtdWxhdGVkUXVvdGFfOwogICAgdWludDI1NiBpbnRlcm5hbCB0b2tlblN1cHBseV8gPSAwOwogICAgdWludDI1NiBpbnRlcm5hbCBwcm9maXRQZXJTaGFyZV87CiAgICAKICAgIC8vIGFkbWluaXN0cmF0b3IgbGlzdCAoc2VlIGFib3ZlIG9uIHdoYXQgdGhleSBjYW4gZG8pCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGFkbWluaXN0cmF0b3JzOwogICAgCiAgICAvLyB3aGVuIHRoaXMgaXMgc2V0IHRvIHRydWUsIG9ubHkgYW1iYXNzYWRvcnMgY2FuIHB1cmNoYXNlIHRva2VucyAodGhpcyBwcmV2ZW50cyBhIHdoYWxlIHByZW1pbmUsIGl0IGVuc3VyZXMgYSBmYWlybHkgZGlzdHJpYnV0ZWQgdXBwZXIgcHlyYW1pZCkKICAgIGJvb2wgcHVibGljIG9ubHlBbWJhc3NhZG9ycyA9IHRydWU7CiAgICAKCgogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBQVUJMSUMgRlVOQ1RJT05TICAgICAgICAgICAgPQogICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KICAgIC8qCiAgICAqIC0tIEFQUExJQ0FUSU9OIEVOVFJZIFBPSU5UUyAtLSAgCiAgICAqLwogICAgZnVuY3Rpb24gSXJvbkhhbmRzQ29pbigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gYWRkIGFkbWluaXN0cmF0b3JzIGhlcmUKICAgICAgICBhZG1pbmlzdHJhdG9yc1sweDk3NmI3QjdFMjVlNzBDNTY5OTE1NzM4ZDU4NDUwMDkyYkZBRDVBRjddID0gdHJ1ZTsKICAgICAgICAKICAgICAgICAvLyBhZGQgdGhlIGFtYmFzc2Fkb3JzIGhlcmUuCiAgICAgICAgLy8gZ3NqIC0gc2hpdHR5IGRldiBhbmQgbWFya2V0aW5nIAogICAgICAgIGFtYmFzc2Fkb3JzX1sweDk3NmI3QjdFMjVlNzBDNTY5OTE1NzM4ZDU4NDUwMDkyYkZBRDVBRjddID0gdHJ1ZTsKICAgICAgICAKICAgICAgICAvLyBDVEUgaXMgYSBnYW5nc3RlciB3aXRoIFBMQVRJTlVNIGhhbmRzCiAgICAgICAgYW1iYXNzYWRvcnNfWzB4Q2QzOWM3MGY5REYyQTBEMjE2YzNBNTJDNUE0NzU5MTQ0ODVhMDYyNV0gPSB0cnVlOwogICAgICAgIAogICAgICAgIC8vIFNURVZFCiAgICAgICAgYW1iYXNzYWRvcnNfWzB4NzM5YjI4MTYzRGRkQWVBNTYxMTUxQTQzNDI0NzBlYjBmRTdkMmNFNl0gPSB0cnVlOwogICAgfQogICAgIAogICAgLyoqCiAgICAgKiBDb252ZXJ0cyBhbGwgaW5jb21pbmcgZXRoZXJldW0gdG8gdG9rZW5zIGZvciB0aGUgY2FsbGVyLCBhbmQgcGFzc2VzIGRvd24gdGhlIHJlZmVycmFsIGFkZHkgKGlmIGFueSkKICAgICAqLwogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgX3JlZmVycmVkQnkpCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBwdXJjaGFzZVRva2Vucyhtc2cudmFsdWUsIF9yZWZlcnJlZEJ5KTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbiB0byBoYW5kbGUgZXRoZXJldW0gdGhhdCB3YXMgc2VuZCBzdHJhaWdodCB0byB0aGUgY29udHJhY3QKICAgICAqIFVuZm9ydHVuYXRlbHkgd2UgY2Fubm90IHVzZSBhIHJlZmVycmFsIGFkZHJlc3MgdGhpcyB3YXkuCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgcHVyY2hhc2VUb2tlbnMobXNnLnZhbHVlLCAweDApOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENvbnZlcnRzIGFsbCBvZiBjYWxsZXIncyBkaXZpZGVuZHMgdG8gdG9rZW5zLgogICAgKi8KICAgIGZ1bmN0aW9uIHJlaW52ZXN0KCkKICAgICAgICBvbmx5U3Ryb25naGFuZHMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIGZldGNoIGRpdmlkZW5kcwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IG15RGl2aWRlbmRzKGZhbHNlKTsgLy8gcmV0cmlldmUgcmVmLiBib251cyBsYXRlciBpbiB0aGUgY29kZQogICAgICAgIAogICAgICAgIC8vIHBheSBvdXQgdGhlIGRpdmlkZW5kcyB2aXJ0dWFsbHkKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gKz0gIChpbnQyNTYpIChfZGl2aWRlbmRzICogbWFnbml0dWRlKTsKICAgICAgICAKICAgICAgICAvLyByZXRyaWV2ZSByZWYuIGJvbnVzCiAgICAgICAgX2RpdmlkZW5kcyArPSByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gPSAwOwogICAgICAgIAogICAgICAgIC8vIGRpc3BhdGNoIGEgYnV5IG9yZGVyIHdpdGggdGhlIHZpcnR1YWxpemVkICJ3aXRoZHJhd24gZGl2aWRlbmRzIgogICAgICAgIHVpbnQyNTYgX3Rva2VucyA9IHB1cmNoYXNlVG9rZW5zKF9kaXZpZGVuZHMsIDB4MCk7CiAgICAgICAgCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uUmVpbnZlc3RtZW50KF9jdXN0b21lckFkZHJlc3MsIF9kaXZpZGVuZHMsIF90b2tlbnMpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEFsaWFzIG9mIHNlbGwoKSBhbmQgd2l0aGRyYXcoKS4KICAgICAqLwogICAgZnVuY3Rpb24gZXhpdCgpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gZ2V0IHRva2VuIGNvdW50IGZvciBjYWxsZXIgJiBzZWxsIHRoZW0gYWxsCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IF90b2tlbnMgPSB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIGlmKF90b2tlbnMgPiAwKSBzZWxsKF90b2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIGxhbWJvIGRlbGl2ZXJ5IHNlcnZpY2UKICAgICAgICB3aXRoZHJhdygpOwogICAgfQoKICAgIC8qKgogICAgICogV2l0aGRyYXdzIGFsbCBvZiB0aGUgY2FsbGVycyBlYXJuaW5ncy4KICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXcoKQogICAgICAgIG9ubHlTdHJvbmdoYW5kcygpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgLy8gc2V0dXAgZGF0YQogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gbXlEaXZpZGVuZHMoZmFsc2UpOyAvLyBnZXQgcmVmLiBib251cyBsYXRlciBpbiB0aGUgY29kZQogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZCB0cmFja2VyCiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSAgKGludDI1NikgKF9kaXZpZGVuZHMgKiBtYWduaXR1ZGUpOwogICAgICAgIAogICAgICAgIC8vIGFkZCByZWYuIGJvbnVzCiAgICAgICAgX2RpdmlkZW5kcyArPSByZWZlcnJhbEJhbGFuY2VfW19jdXN0b21lckFkZHJlc3NdOwogICAgICAgIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gPSAwOwogICAgICAgIAogICAgICAgIC8vIGxhbWJvIGRlbGl2ZXJ5IHNlcnZpY2UKICAgICAgICBfY3VzdG9tZXJBZGRyZXNzLnRyYW5zZmVyKF9kaXZpZGVuZHMpOwogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvbldpdGhkcmF3KF9jdXN0b21lckFkZHJlc3MsIF9kaXZpZGVuZHMpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIExpcXVpZmllcyB0b2tlbnMgdG8gZXRoZXJldW0uCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUJhZ2hvbGRlcnMoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIC8vIHNldHVwIGRhdGEKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIC8vIHJ1c3NpYW4gaGFja2VycyBCVEZPCiAgICAgICAgcmVxdWlyZShfYW1vdW50T2ZUb2tlbnMgPD0gdG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSk7CiAgICAgICAgdWludDI1NiBfdG9rZW5zID0gX2Ftb3VudE9mVG9rZW5zOwogICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oX3Rva2Vucyk7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bSwgZGl2aWRlbmRGZWVfKTsKICAgICAgICB1aW50MjU2IF90YXhlZEV0aGVyZXVtID0gU2FmZU1hdGguc3ViKF9ldGhlcmV1bSwgX2RpdmlkZW5kcyk7CiAgICAgICAgCiAgICAgICAgLy8gYnVybiB0aGUgc29sZCB0b2tlbnMKICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5zdWIodG9rZW5TdXBwbHlfLCBfdG9rZW5zKTsKICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdID0gU2FmZU1hdGguc3ViKHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10sIF90b2tlbnMpOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkaXZpZGVuZHMgdHJhY2tlcgogICAgICAgIGludDI1NiBfdXBkYXRlZFBheW91dHMgPSAoaW50MjU2KSAocHJvZml0UGVyU2hhcmVfICogX3Rva2VucyArIChfdGF4ZWRFdGhlcmV1bSAqIG1hZ25pdHVkZSkpOwogICAgICAgIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10gLT0gX3VwZGF0ZWRQYXlvdXRzOyAgICAgICAKICAgICAgICAKICAgICAgICAvLyBkaXZpZGluZyBieSB6ZXJvIGlzIGEgYmFkIGlkZWEKICAgICAgICBpZiAodG9rZW5TdXBwbHlfID4gMCkgewogICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGFtb3VudCBvZiBkaXZpZGVuZHMgcGVyIHRva2VuCiAgICAgICAgICAgIHByb2ZpdFBlclNoYXJlXyA9IFNhZmVNYXRoLmFkZChwcm9maXRQZXJTaGFyZV8sIChfZGl2aWRlbmRzICogbWFnbml0dWRlKSAvIHRva2VuU3VwcGx5Xyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIGZpcmUgZXZlbnQKICAgICAgICBvblRva2VuU2VsbChfY3VzdG9tZXJBZGRyZXNzLCBfdG9rZW5zLCBfdGF4ZWRFdGhlcmV1bSk7CiAgICB9CiAgICAKICAgIAogICAgLyoqCiAgICAgKiBUcmFuc2ZlciB0b2tlbnMgZnJvbSB0aGUgY2FsbGVyIHRvIGEgbmV3IGhvbGRlci4KICAgICAqIFJlbWVtYmVyLCB0aGVyZSdzIGEgMTAlIGZlZSBoZXJlIGFzIHdlbGwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvQWRkcmVzcywgdWludDI1NiBfYW1vdW50T2ZUb2tlbnMpCiAgICAgICAgb25seUJhZ2hvbGRlcnMoKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMoYm9vbCkKICAgIHsKICAgICAgICAvLyBzZXR1cAogICAgICAgIGFkZHJlc3MgX2N1c3RvbWVyQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgCiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgdGhlIHJlcXVlc3RlZCB0b2tlbnMKICAgICAgICAvLyBhbHNvIGRpc2FibGVzIHRyYW5zZmVycyB1bnRpbCBhbWJhc3NhZG9yIHBoYXNlIGlzIG92ZXIKICAgICAgICAvLyAoIHdlIGRvbnQgd2FudCB3aGFsZSBwcmVtaW5lcyApCiAgICAgICAgcmVxdWlyZSghb25seUFtYmFzc2Fkb3JzICYmIF9hbW91bnRPZlRva2VucyA8PSB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKTsKICAgICAgICAKICAgICAgICAvLyB3aXRoZHJhdyBhbGwgb3V0c3RhbmRpbmcgZGl2aWRlbmRzIGZpcnN0CiAgICAgICAgaWYobXlEaXZpZGVuZHModHJ1ZSkgPiAwKSB3aXRoZHJhdygpOwogICAgICAgIAogICAgICAgIC8vIEVSQzIwCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAKICAgIH0KICAgIAogICAgLyotLS0tLS0tLS0tICBBRE1JTklTVFJBVE9SIE9OTFkgRlVOQ1RJT05TICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogSW4gY2FzZSB0aGUgYW1hc3NhZG9yIHF1b3RhIGlzIG5vdCBtZXQsIHRoZSBhZG1pbmlzdHJhdG9yIGNhbiBtYW51YWxseSBkaXNhYmxlIHRoZSBhbWJhc3NhZG9yIHBoYXNlLgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlSW5pdGlhbFN0YWdlKCkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgb25seUFtYmFzc2Fkb3JzID0gZmFsc2U7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSW4gY2FzZSBvbmUgb2YgdXMgZGllcywgd2UgbmVlZCB0byByZXBsYWNlIG91cnNlbHZlcy4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0QWRtaW5pc3RyYXRvcihhZGRyZXNzIF9pZGVudGlmaWVyLCBib29sIF9zdGF0dXMpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGFkbWluaXN0cmF0b3JzW19pZGVudGlmaWVyXSA9IF9zdGF0dXM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUHJlY2F1dGlvbmFyeSBtZWFzdXJlcyBpbiBjYXNlIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXJub2RlIHJhdGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFN0YWtpbmdSZXF1aXJlbWVudCh1aW50MjU2IF9hbW91bnRPZlRva2VucykKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgc3Rha2luZ1JlcXVpcmVtZW50ID0gX2Ftb3VudE9mVG9rZW5zOwogICAgfQogICAgCiAgICAvKioKICAgICAqIElmIHdlIHdhbnQgdG8gcmVicmFuZCwgd2UgY2FuLgogICAgICovCiAgICBmdW5jdGlvbiBzZXROYW1lKHN0cmluZyBfbmFtZSkKICAgICAgICBvbmx5QWRtaW5pc3RyYXRvcigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgfQogICAgCiAgICAvKioKICAgICAqIElmIHdlIHdhbnQgdG8gcmVicmFuZCwgd2UgY2FuLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRTeW1ib2woc3RyaW5nIF9zeW1ib2wpCiAgICAgICAgb25seUFkbWluaXN0cmF0b3IoKQogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICB9CgogICAgCiAgICAvKi0tLS0tLS0tLS0gIEhFTFBFUlMgQU5EIENBTENVTEFUT1JTICAtLS0tLS0tLS0tKi8KICAgIC8qKgogICAgICogTWV0aG9kIHRvIHZpZXcgdGhlIGN1cnJlbnQgRXRoZXJldW0gc3RvcmVkIGluIHRoZSBjb250cmFjdAogICAgICogRXhhbXBsZTogdG90YWxFdGhlcmV1bUJhbGFuY2UoKQogICAgICovCiAgICBmdW5jdGlvbiB0b3RhbEV0aGVyZXVtQmFsYW5jZSgpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludCkKICAgIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkKICAgICAgICBwdWJsaWMKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHJldHVybiB0b2tlblN1cHBseV87CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIHRva2VucyBvd25lZCBieSB0aGUgY2FsbGVyLgogICAgICovCiAgICBmdW5jdGlvbiBteVRva2VucygpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHJldHVybiBiYWxhbmNlT2YoX2N1c3RvbWVyQWRkcmVzcyk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBvd25lZCBieSB0aGUgY2FsbGVyLgogICAgICogSWYgYF9pbmNsdWRlUmVmZXJyYWxCb251c2AgaXMgdG8gdG8gMS90cnVlLCB0aGUgcmVmZXJyYWwgYm9udXMgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgY2FsY3VsYXRpb25zLgogICAgICogVGhlIHJlYXNvbiBmb3IgdGhpcywgaXMgdGhhdCBpbiB0aGUgZnJvbnRlbmQsIHdlIHdpbGwgd2FudCB0byBnZXQgdGhlIHRvdGFsIGRpdnMgKGdsb2JhbCArIHJlZikKICAgICAqIEJ1dCBpbiB0aGUgaW50ZXJuYWwgY2FsY3VsYXRpb25zLCB3ZSB3YW50IHRoZW0gc2VwYXJhdGUuIAogICAgICovIAogICAgZnVuY3Rpb24gbXlEaXZpZGVuZHMoYm9vbCBfaW5jbHVkZVJlZmVycmFsQm9udXMpIAogICAgICAgIHB1YmxpYyAKICAgICAgICB2aWV3IAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICBhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgICAgIHJldHVybiBfaW5jbHVkZVJlZmVycmFsQm9udXMgPyBkaXZpZGVuZHNPZihfY3VzdG9tZXJBZGRyZXNzKSArIHJlZmVycmFsQmFsYW5jZV9bX2N1c3RvbWVyQWRkcmVzc10gOiBkaXZpZGVuZHNPZihfY3VzdG9tZXJBZGRyZXNzKSA7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIHRva2VuIGJhbGFuY2Ugb2YgYW55IHNpbmdsZSBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzKQogICAgICAgIHZpZXcKICAgICAgICBwdWJsaWMKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmV0dXJuIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc107CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGRpdmlkZW5kIGJhbGFuY2Ugb2YgYW55IHNpbmdsZSBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBkaXZpZGVuZHNPZihhZGRyZXNzIF9jdXN0b21lckFkZHJlc3MpCiAgICAgICAgdmlldwogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICByZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShwcm9maXRQZXJTaGFyZV8gKiB0b2tlbkJhbGFuY2VMZWRnZXJfW19jdXN0b21lckFkZHJlc3NdKSAtIHBheW91dHNUb19bX2N1c3RvbWVyQWRkcmVzc10pIC8gbWFnbml0dWRlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYnV5IHByaWNlIG9mIDEgaW5kaXZpZHVhbCB0b2tlbi4KICAgICAqLwogICAgZnVuY3Rpb24gc2VsbFByaWNlKCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIG91ciBjYWxjdWxhdGlvbiByZWxpZXMgb24gdGhlIHRva2VuIHN1cHBseSwgc28gd2UgbmVlZCBzdXBwbHkuIERvaC4KICAgICAgICBpZih0b2tlblN1cHBseV8gPT0gMCl7CiAgICAgICAgICAgIHJldHVybiB0b2tlblByaWNlSW5pdGlhbF8gLSB0b2tlblByaWNlSW5jcmVtZW50YWxfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oMWUxOCk7CiAgICAgICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyAgKTsKICAgICAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgc2VsbCBwcmljZSBvZiAxIGluZGl2aWR1YWwgdG9rZW4uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1eVByaWNlKCkgCiAgICAgICAgcHVibGljIAogICAgICAgIHZpZXcgCiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIC8vIG91ciBjYWxjdWxhdGlvbiByZWxpZXMgb24gdGhlIHRva2VuIHN1cHBseSwgc28gd2UgbmVlZCBzdXBwbHkuIERvaC4KICAgICAgICBpZih0b2tlblN1cHBseV8gPT0gMCl7CiAgICAgICAgICAgIHJldHVybiB0b2tlblByaWNlSW5pdGlhbF8gKyB0b2tlblByaWNlSW5jcmVtZW50YWxfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTYgX2V0aGVyZXVtID0gdG9rZW5zVG9FdGhlcmV1bV8oMWUxOCk7CiAgICAgICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmRpdihfZXRoZXJldW0sIGRpdmlkZW5kRmVlXyAgKTsKICAgICAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLmFkZChfZXRoZXJldW0sIF9kaXZpZGVuZHMpOwogICAgICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIGZvciB0aGUgZnJvbnRlbmQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgdGhlIHByaWNlIHNjYWxpbmcgb2YgYnV5IG9yZGVycy4KICAgICAqLwogICAgZnVuY3Rpb24gY2FsY3VsYXRlVG9rZW5zUmVjZWl2ZWQodWludDI1NiBfZXRoZXJldW1Ub1NwZW5kKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgdWludDI1NiBfZGl2aWRlbmRzID0gU2FmZU1hdGguZGl2KF9ldGhlcmV1bVRvU3BlbmQsIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfdGF4ZWRFdGhlcmV1bSA9IFNhZmVNYXRoLnN1YihfZXRoZXJldW1Ub1NwZW5kLCBfZGl2aWRlbmRzKTsKICAgICAgICB1aW50MjU2IF9hbW91bnRPZlRva2VucyA9IGV0aGVyZXVtVG9Ub2tlbnNfKF90YXhlZEV0aGVyZXVtKTsKICAgICAgICAKICAgICAgICByZXR1cm4gX2Ftb3VudE9mVG9rZW5zOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIGZvciB0aGUgZnJvbnRlbmQgdG8gZHluYW1pY2FsbHkgcmV0cmlldmUgdGhlIHByaWNlIHNjYWxpbmcgb2Ygc2VsbCBvcmRlcnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUV0aGVyZXVtUmVjZWl2ZWQodWludDI1NiBfdG9rZW5zVG9TZWxsKSAKICAgICAgICBwdWJsaWMgCiAgICAgICAgdmlldyAKICAgICAgICByZXR1cm5zKHVpbnQyNTYpCiAgICB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zVG9TZWxsIDw9IHRva2VuU3VwcGx5Xyk7CiAgICAgICAgdWludDI1NiBfZXRoZXJldW0gPSB0b2tlbnNUb0V0aGVyZXVtXyhfdG9rZW5zVG9TZWxsKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2V0aGVyZXVtLCBkaXZpZGVuZEZlZV8pOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2V0aGVyZXVtLCBfZGl2aWRlbmRzKTsKICAgICAgICByZXR1cm4gX3RheGVkRXRoZXJldW07CiAgICB9CiAgICAKICAgIAogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgID0gICAgICAgICAgICBJTlRFUk5BTCBGVU5DVElPTlMgICAgICAgICAgICA9CiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwogICAgZnVuY3Rpb24gcHVyY2hhc2VUb2tlbnModWludDI1NiBfaW5jb21pbmdFdGhlcmV1bSwgYWRkcmVzcyBfcmVmZXJyZWRCeSkKICAgICAgICBhbnRpRWFybHlXaGFsZShfaW5jb21pbmdFdGhlcmV1bSkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnModWludDI1NikKICAgIHsKICAgICAgICAvLyBkYXRhIHNldHVwCiAgICAgICAgYWRkcmVzcyBfY3VzdG9tZXJBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgICAgICB1aW50MjU2IF91bmRpdmlkZWREaXZpZGVuZHMgPSBTYWZlTWF0aC5kaXYoX2luY29taW5nRXRoZXJldW0sIGRpdmlkZW5kRmVlXyk7CiAgICAgICAgdWludDI1NiBfcmVmZXJyYWxCb251cyA9IFNhZmVNYXRoLmRpdihfdW5kaXZpZGVkRGl2aWRlbmRzLCAzKTsKICAgICAgICB1aW50MjU2IF9kaXZpZGVuZHMgPSBTYWZlTWF0aC5zdWIoX3VuZGl2aWRlZERpdmlkZW5kcywgX3JlZmVycmFsQm9udXMpOwogICAgICAgIHVpbnQyNTYgX3RheGVkRXRoZXJldW0gPSBTYWZlTWF0aC5zdWIoX2luY29taW5nRXRoZXJldW0sIF91bmRpdmlkZWREaXZpZGVuZHMpOwogICAgICAgIHVpbnQyNTYgX2Ftb3VudE9mVG9rZW5zID0gZXRoZXJldW1Ub1Rva2Vuc18oX3RheGVkRXRoZXJldW0pOwogICAgICAgIHVpbnQyNTYgX2ZlZSA9IF9kaXZpZGVuZHMgKiBtYWduaXR1ZGU7CiAKICAgICAgICAvLyBubyBwb2ludCBpbiBjb250aW51aW5nIGV4ZWN1dGlvbiBpZiBPUCBpcyBhIHBvb3JmYWcgcnVzc2lhbiBoYWNrZXIKICAgICAgICAvLyBwcmV2ZW50cyBvdmVyZmxvdyBpbiB0aGUgY2FzZSB0aGF0IHRoZSBweXJhbWlkIHNvbWVob3cgbWFnaWNhbGx5IHN0YXJ0cyBiZWluZyB1c2VkIGJ5IGV2ZXJ5b25lIGluIHRoZSB3b3JsZAogICAgICAgIC8vIChvciBoYWNrZXJzKQogICAgICAgIC8vIGFuZCB5ZXMgd2Uga25vdyB0aGF0IHRoZSBzYWZlbWF0aCBmdW5jdGlvbiBhdXRvbWF0aWNhbGx5IHJ1bGVzIG91dCB0aGUgImdyZWF0ZXIgdGhlbiIgZXF1YXNpb24uCiAgICAgICAgcmVxdWlyZShfYW1vdW50T2ZUb2tlbnMgPiAwICYmIChTYWZlTWF0aC5hZGQoX2Ftb3VudE9mVG9rZW5zLHRva2VuU3VwcGx5XykgPiB0b2tlblN1cHBseV8pKTsKICAgICAgICAKICAgICAgICAvLyBpcyB0aGUgdXNlciByZWZlcnJlZCBieSBhIG1hc3Rlcm5vZGU/CiAgICAgICAgaWYoCiAgICAgICAgICAgIC8vIGlzIHRoaXMgYSByZWZlcnJlZCBwdXJjaGFzZT8KICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwICYmCgogICAgICAgICAgICAvLyBubyBjaGVhdGluZyEKICAgICAgICAgICAgX3JlZmVycmVkQnkgIT0gX2N1c3RvbWVyQWRkcmVzcyAmJgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gZG9lcyB0aGUgcmVmZXJyZXIgaGF2ZSBhdCBsZWFzdCBYIHdob2xlIHRva2Vucz8KICAgICAgICAgICAgLy8gaS5lIGlzIHRoZSByZWZlcnJlciBhIGdvZGx5IGNoYWQgbWFzdGVybm9kZQogICAgICAgICAgICB0b2tlbkJhbGFuY2VMZWRnZXJfW19yZWZlcnJlZEJ5XSA+PSBzdGFraW5nUmVxdWlyZW1lbnQKICAgICAgICApewogICAgICAgICAgICAvLyB3ZWFsdGggcmVkaXN0cmlidXRpb24KICAgICAgICAgICAgcmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0gPSBTYWZlTWF0aC5hZGQocmVmZXJyYWxCYWxhbmNlX1tfcmVmZXJyZWRCeV0sIF9yZWZlcnJhbEJvbnVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBubyByZWYgcHVyY2hhc2UKICAgICAgICAgICAgLy8gYWRkIHRoZSByZWZlcnJhbCBib251cyBiYWNrIHRvIHRoZSBnbG9iYWwgZGl2aWRlbmRzIGNha2UKICAgICAgICAgICAgX2RpdmlkZW5kcyA9IFNhZmVNYXRoLmFkZChfZGl2aWRlbmRzLCBfcmVmZXJyYWxCb251cyk7CiAgICAgICAgICAgIF9mZWUgPSBfZGl2aWRlbmRzICogbWFnbml0dWRlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyB3ZSBjYW4ndCBnaXZlIHBlb3BsZSBpbmZpbml0ZSBldGhlcmV1bQogICAgICAgIGlmKHRva2VuU3VwcGx5XyA+IDApewogICAgICAgICAgICAKICAgICAgICAgICAgLy8gYWRkIHRva2VucyB0byB0aGUgcG9vbAogICAgICAgICAgICB0b2tlblN1cHBseV8gPSBTYWZlTWF0aC5hZGQodG9rZW5TdXBwbHlfLCBfYW1vdW50T2ZUb2tlbnMpOwogCiAgICAgICAgICAgIC8vIHRha2UgdGhlIGFtb3VudCBvZiBkaXZpZGVuZHMgZ2FpbmVkIHRocm91Z2ggdGhpcyB0cmFuc2FjdGlvbiwgYW5kIGFsbG9jYXRlcyB0aGVtIGV2ZW5seSB0byBlYWNoIHNoYXJlaG9sZGVyCiAgICAgICAgICAgIHByb2ZpdFBlclNoYXJlXyArPSAoX2RpdmlkZW5kcyAqIG1hZ25pdHVkZSAvICh0b2tlblN1cHBseV8pKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGUgY3VzdG9tZXIgcmVjZWl2ZXMgb3ZlciBoaXMgcHVyY2hhc2UgCiAgICAgICAgICAgIF9mZWUgPSBfZmVlIC0gKF9mZWUtKF9hbW91bnRPZlRva2VucyAqIChfZGl2aWRlbmRzICogbWFnbml0dWRlIC8gKHRva2VuU3VwcGx5XykpKSk7CiAgICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gYWRkIHRva2VucyB0byB0aGUgcG9vbAogICAgICAgICAgICB0b2tlblN1cHBseV8gPSBfYW1vdW50T2ZUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBjaXJjdWxhdGluZyBzdXBwbHkgJiB0aGUgbGVkZ2VyIGFkZHJlc3MgZm9yIHRoZSBjdXN0b21lcgogICAgICAgIHRva2VuQmFsYW5jZUxlZGdlcl9bX2N1c3RvbWVyQWRkcmVzc10gPSBTYWZlTWF0aC5hZGQodG9rZW5CYWxhbmNlTGVkZ2VyX1tfY3VzdG9tZXJBZGRyZXNzXSwgX2Ftb3VudE9mVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBUZWxscyB0aGUgY29udHJhY3QgdGhhdCB0aGUgYnV5ZXIgZG9lc24ndCBkZXNlcnZlIGRpdmlkZW5kcyBmb3IgdGhlIHRva2VucyBiZWZvcmUgdGhleSBvd25lZCB0aGVtOwogICAgICAgIC8vcmVhbGx5IGkga25vdyB5b3UgdGhpbmsgeW91IGRvIGJ1dCB5b3UgZG9uJ3QKICAgICAgICBpbnQyNTYgX3VwZGF0ZWRQYXlvdXRzID0gKGludDI1NikgKChwcm9maXRQZXJTaGFyZV8gKiBfYW1vdW50T2ZUb2tlbnMpIC0gX2ZlZSk7CiAgICAgICAgcGF5b3V0c1RvX1tfY3VzdG9tZXJBZGRyZXNzXSArPSBfdXBkYXRlZFBheW91dHM7CiAgICAgICAgCiAgICAgICAgLy8gZmlyZSBldmVudAogICAgICAgIG9uVG9rZW5QdXJjaGFzZShfY3VzdG9tZXJBZGRyZXNzLCBfaW5jb21pbmdFdGhlcmV1bSwgX2Ftb3VudE9mVG9rZW5zLCBfcmVmZXJyZWRCeSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIF9hbW91bnRPZlRva2VuczsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGN1bGF0ZSBUb2tlbiBwcmljZSBiYXNlZCBvbiBhbiBhbW91bnQgb2YgaW5jb21pbmcgZXRoZXJldW0KICAgICAqIEl0J3MgYW4gYWxnb3JpdGhtLCBob3BlZnVsbHkgd2UgZ2F2ZSB5b3UgdGhlIHdoaXRlcGFwZXIgd2l0aCBpdCBpbiBzY2llbnRpZmljIG5vdGF0aW9uOwogICAgICogU29tZSBjb252ZXJzaW9ucyBvY2N1cnJlZCB0byBwcmV2ZW50IGRlY2ltYWwgZXJyb3JzIG9yIHVuZGVyZmxvd3MgLyBvdmVyZmxvd3MgaW4gc29saWRpdHkgY29kZS4KICAgICAqLwogICAgZnVuY3Rpb24gZXRoZXJldW1Ub1Rva2Vuc18odWludDI1NiBfZXRoZXJldW0pCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewogICAgICAgIHVpbnQyNTYgX3Rva2VuUHJpY2VJbml0aWFsID0gdG9rZW5QcmljZUluaXRpYWxfICogMWUxODsKICAgICAgICB1aW50MjU2IF90b2tlbnNSZWNlaXZlZCA9IAogICAgICAgICAoCiAgICAgICAgICAgICgKICAgICAgICAgICAgICAgIC8vIHVuZGVyZmxvdyBhdHRlbXB0cyBCVEZPCiAgICAgICAgICAgICAgICBTYWZlTWF0aC5zdWIoCiAgICAgICAgICAgICAgICAgICAgKHNxcnQKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKF90b2tlblByaWNlSW5pdGlhbCoqMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgyKih0b2tlblByaWNlSW5jcmVtZW50YWxfICogMWUxOCkqKF9ldGhlcmV1bSAqIDFlMTgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgodG9rZW5QcmljZUluY3JlbWVudGFsXykqKjIpKih0b2tlblN1cHBseV8qKjIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDIqKHRva2VuUHJpY2VJbmNyZW1lbnRhbF8pKl90b2tlblByaWNlSW5pdGlhbCp0b2tlblN1cHBseV8pCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApLCBfdG9rZW5QcmljZUluaXRpYWwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKS8odG9rZW5QcmljZUluY3JlbWVudGFsXykKICAgICAgICApLSh0b2tlblN1cHBseV8pCiAgICAgICAgOwogIAogICAgICAgIHJldHVybiBfdG9rZW5zUmVjZWl2ZWQ7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ2FsY3VsYXRlIHRva2VuIHNlbGwgdmFsdWUuCiAgICAgKiBJdCdzIGFuIGFsZ29yaXRobSwgaG9wZWZ1bGx5IHdlIGdhdmUgeW91IHRoZSB3aGl0ZXBhcGVyIHdpdGggaXQgaW4gc2NpZW50aWZpYyBub3RhdGlvbjsKICAgICAqIFNvbWUgY29udmVyc2lvbnMgb2NjdXJyZWQgdG8gcHJldmVudCBkZWNpbWFsIGVycm9ycyBvciB1bmRlcmZsb3dzIC8gb3ZlcmZsb3dzIGluIHNvbGlkaXR5IGNvZGUuCiAgICAgKi8KICAgICBmdW5jdGlvbiB0b2tlbnNUb0V0aGVyZXVtXyh1aW50MjU2IF90b2tlbnMpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyh1aW50MjU2KQogICAgewoKICAgICAgICB1aW50MjU2IHRva2Vuc18gPSAoX3Rva2VucyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX3Rva2VuU3VwcGx5ID0gKHRva2VuU3VwcGx5XyArIDFlMTgpOwogICAgICAgIHVpbnQyNTYgX2V0aGVyUmVjZWl2ZWQgPQogICAgICAgICgKICAgICAgICAgICAgLy8gdW5kZXJmbG93IGF0dGVtcHRzIEJURk8KICAgICAgICAgICAgU2FmZU1hdGguc3ViKAogICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QcmljZUluaXRpYWxfICsodG9rZW5QcmljZUluY3JlbWVudGFsXyAqIChfdG9rZW5TdXBwbHkvMWUxOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICktdG9rZW5QcmljZUluY3JlbWVudGFsXwogICAgICAgICAgICAgICAgICAgICkqKHRva2Vuc18gLSAxZTE4KQogICAgICAgICAgICAgICAgKSwodG9rZW5QcmljZUluY3JlbWVudGFsXyooKHRva2Vuc18qKjItdG9rZW5zXykvMWUxOCkpLzIKICAgICAgICAgICAgKQogICAgICAgIC8xZTE4KTsKICAgICAgICByZXR1cm4gX2V0aGVyUmVjZWl2ZWQ7CiAgICB9CiAgICAKICAgIAogICAgLy9UaGlzIGlzIHdoZXJlIGFsbCB5b3VyIGdhcyBnb2VzLCBzb3JyeQogICAgLy9Ob3Qgc29ycnksIHlvdSBwcm9iYWJseSBvbmx5IHBhaWQgMSBnd2VpCiAgICBmdW5jdGlvbiBzcXJ0KHVpbnQgeCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50IHkpIHsKICAgICAgICB1aW50IHogPSAoeCArIDEpIC8gMjsKICAgICAgICB5ID0geDsKICAgICAgICB3aGlsZSAoeiA8IHkpIHsKICAgICAgICAgICAgeSA9IHo7CiAgICAgICAgICAgIHogPSAoeCAvIHogKyB6KSAvIDI7CiAgICAgICAgfQogICAgfQp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICAvKioKICAgICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBpZiAoYSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgICAqLwogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAgICovCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgICAqLwogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQ=='.
	

]
