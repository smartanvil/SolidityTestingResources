Class {
	#name : #SRT38968746147BBAeb882F356Ad9A57594bB158235,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT38968746147BBAeb882F356Ad9A57594bB158235 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBSZWdpc3RyeUlDQVBJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gcGFyc2UoYnl0ZXMzMiBfaWNhcCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzLCBieXRlczMyLCBib29sKTsKICAgIGZ1bmN0aW9uIGluc3RpdHV0aW9ucyhieXRlczMyIF9pbnN0aXR1dGlvbikgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKTsKfQoKY29udHJhY3QgRVRva2VuMkludGVyZmFjZSB7CiAgICBmdW5jdGlvbiByZWdpc3RyeUlDQVAoKSBjb25zdGFudCByZXR1cm5zKFJlZ2lzdHJ5SUNBUEludGVyZmFjZSk7CiAgICBmdW5jdGlvbiBiYXNlVW5pdChieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludDgpOwogICAgZnVuY3Rpb24gZGVzY3JpcHRpb24oYnl0ZXMzMiBfc3ltYm9sKSBjb25zdGFudCByZXR1cm5zKHN0cmluZyk7CiAgICBmdW5jdGlvbiBvd25lcihieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX293bmVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseShieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfaG9sZGVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBpc0xvY2tlZChieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBpc3N1ZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9kZXNjcmlwdGlvbiwgdWludDggX2Jhc2VVbml0LCBib29sIF9pc1JlaXNzdWFibGUpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiByZWlzc3VlQXNzZXQoYnl0ZXMzMiBfc3ltYm9sLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIHJldm9rZUFzc2V0KGJ5dGVzMzIgX3N5bWJvbCwgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBzZXRQcm94eShhZGRyZXNzIF9hZGRyZXNzLCBieXRlczMyIF9zeW1ib2wpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBsb2NrQXNzZXQoYnl0ZXMzMiBfc3ltYm9sKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gcHJveHlUcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gcHJveHlBcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF9zcGVuZGVyLCBieXRlczMyIF9zeW1ib2wpIGNvbnN0YW50IHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBwcm94eVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlczMyIF9zeW1ib2wsIHN0cmluZyBfcmVmZXJlbmNlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7Cn0KCmNvbnRyYWN0IEFzc2V0SW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIF9wZXJmb3JtVHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIF9wZXJmb3JtVHJhbnNmZXJUb0lDQVBXaXRoUmVmZXJlbmNlKGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1BcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfcGVyZm9ybVRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1UcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX3BlcmZvcm1HZW5lcmljKGJ5dGVzIF9kYXRhLCBhZGRyZXNzIF9zZW5kZXIpIHBheWFibGUgcmV0dXJucyhieXRlczMyKSB7CiAgICAgICAgdGhyb3c7CiAgICB9Cn0KCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIHsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnModWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgLy8gZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcmV0dXJucyhzdHJpbmcpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQ4KTsKICAgIC8vIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zKHN0cmluZyk7Cn0KCmNvbnRyYWN0IEFzc2V0UHJveHlJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gX2ZvcndhcmRBcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiBfZm9yd2FyZFRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gX2ZvcndhcmRUcmFuc2ZlckZyb21Ub0lDQVBXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSwgYWRkcmVzcyBfc2VuZGVyKSByZXR1cm5zKGJvb2wpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOwp9Cgpjb250cmFjdCBCeXRlczMyIHsKICAgIGZ1bmN0aW9uIF9ieXRlczMyKHN0cmluZyBfaW5wdXQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYnl0ZXMzMiByZXN1bHQpIHsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHJlc3VsdCA6PSBtbG9hZChhZGQoX2lucHV0LCAzMikpCiAgICAgICAgfQogICAgfQp9CgovKioKICogQHRpdGxlIEVUb2tlbjIgQXNzZXQgUHJveHkuCiAqCiAqIFByb3h5IGltcGxlbWVudHMgRVJDMjAgaW50ZXJmYWNlIGFuZCBhY3RzIGFzIGEgZ2F0ZXdheSB0byBhIHNpbmdsZSBFVG9rZW4yIGFzc2V0LgogKiBQcm94eSBhZGRzIGV0b2tlbjJTeW1ib2wgYW5kIGNhbGxlcihzZW5kZXIpIHdoZW4gZm9yd2FyZGluZyByZXF1ZXN0cyB0byBFVG9rZW4yLgogKiBFdmVyeSByZXF1ZXN0IHRoYXQgaXMgbWFkZSBieSBjYWxsZXIgZmlyc3Qgc2VudCB0byB0aGUgc3BlY2lmaWMgYXNzZXQgaW1wbGVtZW50YXRpb24KICogY29udHJhY3QsIHdoaWNoIHRoZW4gY2FsbHMgYmFjayB0byBiZSBmb3J3YXJkZWQgb250byBFVG9rZW4yLgogKgogKiBDYWxscyBmbG93OiBDYWxsZXIgLT4KICogICAgICAgICAgICAgUHJveHkuZnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9wZXJmb3JtRnVuYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBQcm94eS5fZm9yd2FyZEZ1bmMoLi4uLCBDYWxsZXIuYWRkcmVzcykgLT4KICogICAgICAgICAgICAgUGxhdGZvcm0ucHJveHlGdW5jKC4uLiwgc3ltYm9sLCBDYWxsZXIuYWRkcmVzcykKICoKICogR2VuZXJpYyBjYWxsIGZsb3c6IENhbGxlciAtPgogKiAgICAgICAgICAgICBQcm94eS51bmtub3duRnVuYyguLi4pIC0+CiAqICAgICAgICAgICAgIEFzc2V0Ll9wZXJmb3JtR2VuZXJpYyguLi4sIENhbGxlci5hZGRyZXNzKSAtPgogKiAgICAgICAgICAgICBBc3NldC51bmtub3duRnVuYyguLi4pCiAqCiAqIEFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGlzIG11dGFibGUsIGJ1dCBlYWNoIHVzZXIgaGF2ZSBhbiBvcHRpb24gdG8gc3RpY2sgd2l0aAogKiBvbGQgaW1wbGVtZW50YXRpb24sIHRocm91Z2ggZXhwbGljaXQgZGVjaXNpb24gbWFkZSBpbiB0aW1lbHkgbWFubmVyLCBpZiBoZSBkb2Vzbid0IGFncmVlCiAqIHdpdGggbmV3IHJ1bGVzLgogKiBFYWNoIHVzZXIgaGF2ZSBhIHBvc3NpYmlsaXR5IHRvIHVwZ3JhZGUgdG8gbGF0ZXN0IGFzc2V0IGNvbnRyYWN0IGltcGxlbWVudGF0aW9uLCB3aXRob3V0IHRoZQogKiBwb3NzaWJpbGl0eSB0byByb2xsYmFjay4KICoKICogTm90ZTogYWxsIHRoZSBub24gY29uc3RhbnQgZnVuY3Rpb25zIHJldHVybiBmYWxzZSBpbnN0ZWFkIG9mIHRocm93aW5nIGluIGNhc2UgaWYgc3RhdGUgY2hhbmdlCiAqIGRpZG4ndCBoYXBwZW4geWV0LgogKi8KY29udHJhY3QgQmVuamFDb2luIGlzIEVSQzIwSW50ZXJmYWNlLCBBc3NldFByb3h5SW50ZXJmYWNlLCBCeXRlczMyIHsKICAgIC8vIEFzc2lnbmVkIEVUb2tlbjIsIGltbXV0YWJsZS4KICAgIEVUb2tlbjJJbnRlcmZhY2UgcHVibGljIGV0b2tlbjI7CgogICAgLy8gQXNzaWduZWQgc3ltYm9sLCBpbW11dGFibGUuCiAgICBieXRlczMyIHB1YmxpYyBldG9rZW4yU3ltYm9sOwoKICAgIC8vIEFzc2lnbmVkIG5hbWUsIGltbXV0YWJsZS4gRm9yIFVJLgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CgogICAgLyoqCiAgICAgKiBTZXRzIEVUb2tlbjIgYWRkcmVzcywgYXNzaWducyBzeW1ib2wgYW5kIG5hbWUuCiAgICAgKgogICAgICogQ2FuIGJlIHNldCBvbmx5IG9uY2UuCiAgICAgKgogICAgICogQHBhcmFtIF9ldG9rZW4yIEVUb2tlbjIgY29udHJhY3QgYWRkcmVzcy4KICAgICAqIEBwYXJhbSBfc3ltYm9sIGFzc2lnbmVkIHN5bWJvbC4KICAgICAqIEBwYXJhbSBfbmFtZSBhc3NpZ25lZCBuYW1lLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gaW5pdChFVG9rZW4ySW50ZXJmYWNlIF9ldG9rZW4yLCBzdHJpbmcgX3N5bWJvbCwgc3RyaW5nIF9uYW1lKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoYWRkcmVzcyhldG9rZW4yKSAhPSAweDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBldG9rZW4yID0gX2V0b2tlbjI7CiAgICAgICAgZXRva2VuMlN5bWJvbCA9IF9ieXRlczMyKF9zeW1ib2wpOwogICAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgICBzeW1ib2wgPSBfc3ltYm9sOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogT25seSBFVG9rZW4yIGlzIGFsbG93ZWQgdG8gY2FsbC4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUVUb2tlbjIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhldG9rZW4yKSkgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE9ubHkgY3VycmVudCBhc3NldCBvd25lciBpcyBhbGxvd2VkIHRvIGNhbGwuCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlBc3NldE93bmVyKCkgewogICAgICAgIGlmIChldG9rZW4yLmlzT3duZXIobXNnLnNlbmRlciwgZXRva2VuMlN5bWJvbCkpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciBjdXJyZW50IGNhbGxlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBfZ2V0QXNzZXQoKSBpbnRlcm5hbCByZXR1cm5zKEFzc2V0SW50ZXJmYWNlKSB7CiAgICAgICAgcmV0dXJuIEFzc2V0SW50ZXJmYWNlKGdldFZlcnNpb25Gb3IobXNnLnNlbmRlcikpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlY292ZXJUb2tlbnModWludCBfdmFsdWUpIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmZXJXaXRoUmVmZXJlbmNlKG1zZy5zZW5kZXIsIF92YWx1ZSwgJ1Rva2VucyByZWNvdmVyeScpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCB0b3RhbCBzdXBwbHkuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCB0b3RhbCBzdXBwbHkuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIGV0b2tlbjIudG90YWxTdXBwbHkoZXRva2VuMlN5bWJvbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGJhbGFuY2UgZm9yIGEgcGFydGljdWxhciBob2xkZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9vd25lciBob2xkZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhvbGRlciBiYWxhbmNlLgogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBldG9rZW4yLmJhbGFuY2VPZihfb3duZXIsIGV0b2tlbjJTeW1ib2wpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBhbGxvd2FuY2UgZnJvbSBvbmUgaG9sZGVyIHRvIGFub3RoZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciB0aGF0IGFsbG93ZWQgc3BlbmRpbmcuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgaG9sZGVyIHRoYXQgaXMgYWxsb3dlZCB0byBzcGVuZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhvbGRlciB0byBzcGVuZGVyIGFsbG93YW5jZS4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBldG9rZW4yLmFsbG93YW5jZShfZnJvbSwgX3NwZW5kZXIsIGV0b2tlbjJTeW1ib2wpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhc3NldCBkZWNpbWFscy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGRlY2ltYWxzLgogICAgICovCiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnModWludDgpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5iYXNlVW5pdChldG9rZW4yU3ltYm9sKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVycyBhc3NldCBiYWxhbmNlIGZyb20gdGhlIGNhbGxlciB0byBzcGVjaWZpZWQgcmVjZWl2ZXIuCiAgICAgKgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2ZlcldpdGhSZWZlcmVuY2UoX3RvLCBfdmFsdWUsICcnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVycyBhc3NldCBiYWxhbmNlIGZyb20gdGhlIGNhbGxlciB0byBzcGVjaWZpZWQgcmVjZWl2ZXIgYWRkaW5nIHNwZWNpZmllZCBjb21tZW50LgogICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIGFyZ3VtZW50cyBhbG9uZyB3aXRoCiAgICAgKiB0aGUgY2FsbGVyIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF90byBob2xkZXIgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgRVRva2VuMidzIFRyYW5zZmVyIGV2ZW50LgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJXaXRoUmVmZXJlbmNlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBfZ2V0QXNzZXQoKS5fcGVyZm9ybVRyYW5zZmVyV2l0aFJlZmVyZW5jZShfdG8sIF92YWx1ZSwgX3JlZmVyZW5jZSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgYXNzZXQgYmFsYW5jZSBmcm9tIHRoZSBjYWxsZXIgdG8gc3BlY2lmaWVkIElDQVAuCiAgICAgKgogICAgICogQHBhcmFtIF9pY2FwIHJlY2lwaWVudCBJQ0FQIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9JQ0FQKGJ5dGVzMzIgX2ljYXAsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0lDQVBXaXRoUmVmZXJlbmNlKF9pY2FwLCBfdmFsdWUsICcnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVycyBhc3NldCBiYWxhbmNlIGZyb20gdGhlIGNhbGxlciB0byBzcGVjaWZpZWQgSUNBUCBhZGRpbmcgc3BlY2lmaWVkIGNvbW1lbnQuCiAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgYXJndW1lbnRzIGFsb25nIHdpdGgKICAgICAqIHRoZSBjYWxsZXIgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcGFyYW0gX2ljYXAgcmVjaXBpZW50IElDQVAgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIEVUb2tlbjIncyBUcmFuc2ZlciBldmVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9JQ0FQV2l0aFJlZmVyZW5jZShieXRlczMyIF9pY2FwLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBfZ2V0QXNzZXQoKS5fcGVyZm9ybVRyYW5zZmVyVG9JQ0FQV2l0aFJlZmVyZW5jZShfaWNhcCwgX3ZhbHVlLCBfcmVmZXJlbmNlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFByZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIG9mIGFzc2V0IGJhbGFuY2UgYmV0d2VlbiBob2xkZXJzLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX3RvIGhvbGRlciBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKF9mcm9tLCBfdG8sIF92YWx1ZSwgJycpOwogICAgfQoKICAgIC8qKgogICAgICogUHJmb3JtcyBhbGxvd2FuY2UgdHJhbnNmZXIgb2YgYXNzZXQgYmFsYW5jZSBiZXR3ZWVuIGhvbGRlcnMgYWRkaW5nIHNwZWNpZmllZCBjb21tZW50LgogICAgICogUmVzb2x2ZXMgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgZm9yIHRoZSBjYWxsZXIgYW5kIGZvcndhcmRzIHRoZXJlIGFyZ3VtZW50cyBhbG9uZyB3aXRoCiAgICAgKiB0aGUgY2FsbGVyIGFkZHJlc3MuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciBhZGRyZXNzIHRvIHRha2UgZnJvbS4KICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIEVUb2tlbjIncyBUcmFuc2ZlciBldmVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbVdpdGhSZWZlcmVuY2UoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBzdHJpbmcgX3JlZmVyZW5jZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBc3NldCgpLl9wZXJmb3JtVHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShfZnJvbSwgX3RvLCBfdmFsdWUsIF9yZWZlcmVuY2UsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgdHJhbnNmZXIgY2FsbCBvbiB0aGUgRVRva2VuMiBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciBhZGRyZXNzIHRvIHRha2UgZnJvbS4KICAgICAqIEBwYXJhbSBfdG8gaG9sZGVyIGFkZHJlc3MgdG8gZ2l2ZSB0by4KICAgICAqIEBwYXJhbSBfdmFsdWUgYW1vdW50IHRvIHRyYW5zZmVyLgogICAgICogQHBhcmFtIF9yZWZlcmVuY2UgdHJhbnNmZXIgY29tbWVudCB0byBiZSBpbmNsdWRlZCBpbiBhIEVUb2tlbjIncyBUcmFuc2ZlciBldmVudC4KICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX2ZvcndhcmRUcmFuc2ZlckZyb21XaXRoUmVmZXJlbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgb25seUltcGxlbWVudGF0aW9uRm9yKF9zZW5kZXIpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBldG9rZW4yLnByb3h5VHJhbnNmZXJGcm9tV2l0aFJlZmVyZW5jZShfZnJvbSwgX3RvLCBfdmFsdWUsIGV0b2tlbjJTeW1ib2wsIF9yZWZlcmVuY2UsIF9zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUHJmb3JtcyBhbGxvd2FuY2UgdHJhbnNmZXIgb2YgYXNzZXQgYmFsYW5jZSBiZXR3ZWVuIGhvbGRlcnMuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciBhZGRyZXNzIHRvIHRha2UgZnJvbS4KICAgICAqIEBwYXJhbSBfaWNhcCByZWNpcGllbnQgSUNBUCBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbVRvSUNBUChhZGRyZXNzIF9mcm9tLCBieXRlczMyIF9pY2FwLCB1aW50IF92YWx1ZSkgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbVRvSUNBUFdpdGhSZWZlcmVuY2UoX2Zyb20sIF9pY2FwLCBfdmFsdWUsICcnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFByZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIG9mIGFzc2V0IGJhbGFuY2UgYmV0d2VlbiBob2xkZXJzIGFkZGluZyBzcGVjaWZpZWQgY29tbWVudC4KICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSBhcmd1bWVudHMgYWxvbmcgd2l0aAogICAgICogdGhlIGNhbGxlciBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBob2xkZXIgYWRkcmVzcyB0byB0YWtlIGZyb20uCiAgICAgKiBAcGFyYW0gX2ljYXAgcmVjaXBpZW50IElDQVAgYWRkcmVzcyB0byBnaXZlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gdHJhbnNmZXIuCiAgICAgKiBAcGFyYW0gX3JlZmVyZW5jZSB0cmFuc2ZlciBjb21tZW50IHRvIGJlIGluY2x1ZGVkIGluIGEgRVRva2VuMidzIFRyYW5zZmVyIGV2ZW50LgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tVG9JQ0FQV2l0aFJlZmVyZW5jZShhZGRyZXNzIF9mcm9tLCBieXRlczMyIF9pY2FwLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBfZ2V0QXNzZXQoKS5fcGVyZm9ybVRyYW5zZmVyRnJvbVRvSUNBUFdpdGhSZWZlcmVuY2UoX2Zyb20sIF9pY2FwLCBfdmFsdWUsIF9yZWZlcmVuY2UsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgYWxsb3dhbmNlIHRyYW5zZmVyIHRvIElDQVAgY2FsbCBvbiB0aGUgRVRva2VuMiBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIGhvbGRlciBhZGRyZXNzIHRvIHRha2UgZnJvbS4KICAgICAqIEBwYXJhbSBfaWNhcCByZWNpcGllbnQgSUNBUCBhZGRyZXNzIHRvIGdpdmUgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byB0cmFuc2Zlci4KICAgICAqIEBwYXJhbSBfcmVmZXJlbmNlIHRyYW5zZmVyIGNvbW1lbnQgdG8gYmUgaW5jbHVkZWQgaW4gYSBFVG9rZW4yJ3MgVHJhbnNmZXIgZXZlbnQuCiAgICAgKiBAcGFyYW0gX3NlbmRlciBpbml0aWFsIGNhbGxlci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9mb3J3YXJkVHJhbnNmZXJGcm9tVG9JQ0FQV2l0aFJlZmVyZW5jZShhZGRyZXNzIF9mcm9tLCBieXRlczMyIF9pY2FwLCB1aW50IF92YWx1ZSwgc3RyaW5nIF9yZWZlcmVuY2UsIGFkZHJlc3MgX3NlbmRlcikgb25seUltcGxlbWVudGF0aW9uRm9yKF9zZW5kZXIpIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBldG9rZW4yLnByb3h5VHJhbnNmZXJGcm9tVG9JQ0FQV2l0aFJlZmVyZW5jZShfZnJvbSwgX2ljYXAsIF92YWx1ZSwgX3JlZmVyZW5jZSwgX3NlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIGFzc2V0IHNwZW5kaW5nIGFsbG93YW5jZSBmb3IgYSBzcGVjaWZpZWQgc3BlbmRlci4KICAgICAqIFJlc29sdmVzIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGZvciB0aGUgY2FsbGVyIGFuZCBmb3J3YXJkcyB0aGVyZSBhcmd1bWVudHMgYWxvbmcgd2l0aAogICAgICogdGhlIGNhbGxlciBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgYWRkcmVzcyB0byBzZXQgYWxsb3dhbmNlIHRvLgogICAgICogQHBhcmFtIF92YWx1ZSBhbW91bnQgdG8gYWxsb3cuCiAgICAgKgogICAgICogQHJldHVybiBzdWNjZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2dldEFzc2V0KCkuX3BlcmZvcm1BcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgYWxsb3dhbmNlIHNldHRpbmcgY2FsbCBvbiB0aGUgRVRva2VuMiBieSB0aGUgbmFtZSBvZiBzcGVjaWZpZWQgc2VuZGVyLgogICAgICoKICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBieSBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhc3NpZ25lZCB0byBzZW5kZXIuCiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIGhvbGRlciBhZGRyZXNzIHRvIHNldCBhbGxvd2FuY2UgdG8uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIGFtb3VudCB0byBhbGxvdy4KICAgICAqIEBwYXJhbSBfc2VuZGVyIGluaXRpYWwgY2FsbGVyLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gX2ZvcndhcmRBcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlLCBhZGRyZXNzIF9zZW5kZXIpIG9ubHlJbXBsZW1lbnRhdGlvbkZvcihfc2VuZGVyKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gZXRva2VuMi5wcm94eUFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSwgZXRva2VuMlN5bWJvbCwgX3NlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBFbWl0cyBFUkMyMCBUcmFuc2ZlciBldmVudCBvbiB0aGlzIGNvbnRyYWN0LgogICAgICoKICAgICAqIENhbiBvbmx5IGJlLCBhbmQsIGNhbGxlZCBieSBhc3NpZ25lZCBFVG9rZW4yIHdoZW4gYXNzZXQgdHJhbnNmZXIgaGFwcGVucy4KICAgICAqLwogICAgZnVuY3Rpb24gZW1pdFRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seUVUb2tlbjIoKSB7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVtaXRzIEVSQzIwIEFwcHJvdmFsIGV2ZW50IG9uIHRoaXMgY29udHJhY3QuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUsIGFuZCwgY2FsbGVkIGJ5IGFzc2lnbmVkIEVUb2tlbjIgd2hlbiBhc3NldCBhbGxvd2FuY2Ugc2V0IGhhcHBlbnMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVtaXRBcHByb3ZlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBvbmx5RVRva2VuMigpIHsKICAgICAgICBBcHByb3ZhbChfZnJvbSwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNvbHZlcyBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBmb3IgdGhlIGNhbGxlciBhbmQgZm9yd2FyZHMgdGhlcmUgdHJhbnNhY3Rpb24gZGF0YSwKICAgICAqIGFsb25nIHdpdGggdGhlIHZhbHVlLiBUaGlzIGFsbG93cyBmb3IgcHJveHkgaW50ZXJmYWNlIGdyb3d0aC4KICAgICAqLwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgYnl0ZXMzMiByZXN1bHQgPSBfZ2V0QXNzZXQoKS5fcGVyZm9ybUdlbmVyaWMudmFsdWUobXNnLnZhbHVlKShtc2cuZGF0YSwgbXNnLnNlbmRlcik7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBtc3RvcmUoMCwgcmVzdWx0KQogICAgICAgICAgICByZXR1cm4oMCwgMzIpCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogSW5kaWNhdGVzIGFuIHVwZ3JhZGUgZnJlZXplLXRpbWUgc3RhcnQsIGFuZCB0aGUgbmV4dCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdC4KICAgICAqLwogICAgZXZlbnQgVXBncmFkZVByb3Bvc2FsKGFkZHJlc3MgbmV3VmVyc2lvbik7CgogICAgLy8gQ3VycmVudCBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgYWRkcmVzcyBsYXRlc3RWZXJzaW9uOwoKICAgIC8vIFByb3Bvc2VkIG5leHQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgIGFkZHJlc3MgcGVuZGluZ1ZlcnNpb247CgogICAgLy8gVXBncmFkZSBmcmVlemUtdGltZSBzdGFydC4KICAgIHVpbnQgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXA7CgogICAgLy8gVGltZXNwYW4gZm9yIHVzZXJzIHRvIHJldmlldyB0aGUgbmV3IGltcGxlbWVudGF0aW9uIGFuZCBtYWtlIGRlY2lzaW9uLgogICAgdWludCBjb25zdGFudCBVUEdSQURFX0ZSRUVaRV9USU1FID0gMyBkYXlzOwoKICAgIC8vIEFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MgdGhhdCB1c2VyIGRlY2lkZWQgdG8gc3RpY2sgd2l0aC4KICAgIC8vIDB4MCBtZWFucyB0aGF0IHVzZXIgdXNlcyBsYXRlc3QgdmVyc2lvbi4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSB1c2VyT3B0T3V0VmVyc2lvbjsKCiAgICAvKioKICAgICAqIE9ubHkgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYXNzaWduZWQgdG8gc2VuZGVyIGlzIGFsbG93ZWQgdG8gY2FsbC4KICAgICAqLwogICAgbW9kaWZpZXIgb25seUltcGxlbWVudGF0aW9uRm9yKGFkZHJlc3MgX3NlbmRlcikgewogICAgICAgIGlmIChnZXRWZXJzaW9uRm9yKF9zZW5kZXIpID09IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MgYXNzaWduZWQgdG8gc2VuZGVyLgogICAgICoKICAgICAqIEBwYXJhbSBfc2VuZGVyIHNlbmRlciBhZGRyZXNzLgogICAgICoKICAgICAqIEByZXR1cm4gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0VmVyc2lvbkZvcihhZGRyZXNzIF9zZW5kZXIpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiB1c2VyT3B0T3V0VmVyc2lvbltfc2VuZGVyXSA9PSAwID8gbGF0ZXN0VmVyc2lvbiA6IHVzZXJPcHRPdXRWZXJzaW9uW19zZW5kZXJdOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBjdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQHJldHVybiBhc3NldCBpbXBsZW1lbnRhdGlvbiBjb250cmFjdCBhZGRyZXNzLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRMYXRlc3RWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGxhdGVzdFZlcnNpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHByb3Bvc2VkIG5leHQgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFBlbmRpbmdWZXJzaW9uKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdWZXJzaW9uOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB1cGdyYWRlIGZyZWV6ZS10aW1lIHN0YXJ0LgogICAgICoKICAgICAqIEByZXR1cm4gZnJlZXplLXRpbWUgc3RhcnQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFBlbmRpbmdWZXJzaW9uVGltZXN0YW1wKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgcmV0dXJuIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgfQoKICAgIC8qKgogICAgICogUHJvcG9zZSBuZXh0IGFzc2V0IGltcGxlbWVudGF0aW9uIGNvbnRyYWN0IGFkZHJlc3MuCiAgICAgKgogICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IGN1cnJlbnQgYXNzZXQgb3duZXIuCiAgICAgKgogICAgICogTm90ZTogZnJlZXplLXRpbWUgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGZvciB0aGUgaW5pdGlhbCBzZXR1cC4KICAgICAqCiAgICAgKiBAcGFyYW0gX25ld1ZlcnNpb24gYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHByb3Bvc2VVcGdyYWRlKGFkZHJlc3MgX25ld1ZlcnNpb24pIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgLy8gU2hvdWxkIG5vdCBhbHJlYWR5IGJlIGluIHRoZSB1cGdyYWRpbmcgcHJvY2Vzcy4KICAgICAgICBpZiAocGVuZGluZ1ZlcnNpb24gIT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgLy8gTmV3IHZlcnNpb24gYWRkcmVzcyBzaG91bGQgYmUgb3RoZXIgdGhhbiAweDAuCiAgICAgICAgaWYgKF9uZXdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIERvbid0IGFwcGx5IGZyZWV6ZS10aW1lIGZvciB0aGUgaW5pdGlhbCBzZXR1cC4KICAgICAgICBpZiAobGF0ZXN0VmVyc2lvbiA9PSAweDApIHsKICAgICAgICAgICAgbGF0ZXN0VmVyc2lvbiA9IF9uZXdWZXJzaW9uOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcGVuZGluZ1ZlcnNpb24gPSBfbmV3VmVyc2lvbjsKICAgICAgICBwZW5kaW5nVmVyc2lvblRpbWVzdGFtcCA9IG5vdzsKICAgICAgICBVcGdyYWRlUHJvcG9zYWwoX25ld1ZlcnNpb24pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQ2FuY2VsIHRoZSBwZW5kaW5nIHVwZ3JhZGUgcHJvY2Vzcy4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYnkgY3VycmVudCBhc3NldCBvd25lci4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHB1cmdlVXBncmFkZSgpIG9ubHlBc3NldE93bmVyKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGRlbGV0ZSBwZW5kaW5nVmVyc2lvbjsKICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb25UaW1lc3RhbXA7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5hbGl6ZSBhbiB1cGdyYWRlIHByb2Nlc3Mgc2V0dGluZyBuZXcgYXNzZXQgaW1wbGVtZW50YXRpb24gY29udHJhY3QgYWRkcmVzcy4KICAgICAqCiAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgYW4gdXBncmFkZSBmcmVlemUtdGltZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbW1pdFVwZ3JhZGUoKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAocGVuZGluZ1ZlcnNpb24gPT0gMHgwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wICsgVVBHUkFERV9GUkVFWkVfVElNRSA+IG5vdykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGxhdGVzdFZlcnNpb24gPSBwZW5kaW5nVmVyc2lvbjsKICAgICAgICBkZWxldGUgcGVuZGluZ1ZlcnNpb247CiAgICAgICAgZGVsZXRlIHBlbmRpbmdWZXJzaW9uVGltZXN0YW1wOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRGlzYWdyZWUgd2l0aCBwcm9wb3NlZCB1cGdyYWRlLCBhbmQgc3RpY2sgd2l0aCBjdXJyZW50IGFzc2V0IGltcGxlbWVudGF0aW9uCiAgICAgKiB1bnRpbCBmdXJ0aGVyIGV4cGxpY2l0IGFncmVlbWVudCB0byB1cGdyYWRlLgogICAgICoKICAgICAqIEByZXR1cm4gc3VjY2Vzcy4KICAgICAqLwogICAgZnVuY3Rpb24gb3B0T3V0KCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdID0gbGF0ZXN0VmVyc2lvbjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEltcGxpY2l0bHkgYWdyZWUgdG8gdXBncmFkZSB0byBjdXJyZW50IGFuZCBmdXR1cmUgYXNzZXQgaW1wbGVtZW50YXRpb24gdXBncmFkZXMsCiAgICAgKiB1bnRpbCBmdXJ0aGVyIGV4cGxpY2l0IGRpc2FncmVlbWVudC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHN1Y2Nlc3MuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9wdEluKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgZGVsZXRlIHVzZXJPcHRPdXRWZXJzaW9uW21zZy5zZW5kZXJdOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgogICAgZnVuY3Rpb24gbXVsdGlBc3NldCgpIGNvbnN0YW50IHJldHVybnMoRVRva2VuMkludGVyZmFjZSkgewogICAgICAgIHJldHVybiBldG9rZW4yOwogICAgfQp9'.
	

]
