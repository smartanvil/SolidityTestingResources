Class {
	#name : #SRT994D983Dd6a0dD89e9B62D2C1D7bE2a95C3EEd9E,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT994D983Dd6a0dD89e9B62D2C1D7bE2a95C3EEd9E >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IFRva2VuIHsKICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkgewogICAgcmV0dXJuIDA7CiAgfQoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgX293bmVyID0gX293bmVyOwogICAgcmV0dXJuIDA7CiAgfQoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgX3RvID0gX3RvOwogICAgX3ZhbHVlID0gX3ZhbHVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBfZnJvbWAgb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBgX2Zyb21gCiAgLy8vIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIF9mcm9tID0gX2Zyb207CiAgICBfdG8gPSBfdG87CiAgICBfdmFsdWUgPSBfdmFsdWU7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgX3NwZW5kZXIgPSBfc3BlbmRlcjsKICAgIF92YWx1ZSA9IF92YWx1ZTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICBfb3duZXIgPSBfb3duZXI7CiAgICBfc3BlbmRlciA9IF9zcGVuZGVyOwogICAgcmV0dXJuIDA7CiAgfQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgLy9pZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cn0KCmNvbnRyYWN0IEV0aGVyUHVzaCBpcyBTYWZlTWF0aCB7CiAgc3RydWN0IE9yZGVyIHsKICAgIHVpbnQgICAgaWQ7CiAgICBhZGRyZXNzIHNlbGw7CiAgICB1aW50ICAgIHNlbGxhbW91bnQ7CiAgICBhZGRyZXNzIGJ1eTsKICAgIHVpbnQgICAgYnV5YW1vdW50OwogICAgYWRkcmVzcyBzZWxsZXI7CiAgICBhZGRyZXNzIGJ1eWVyOwogICAgdWludCAgICBjcmVhdGVkOwogICAgdWludCAgICBleHBpcmVkOwogICAgdWludCAgICB0aW1lc3RhbXA7CiAgfQoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpICAgICAgICAgICAgcHVibGljIHRva2VuczsKICBtYXBwaW5nICh1aW50ID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gT3JkZXIpKSAgICAgICAgICAgICAgcHVibGljIG9yZGVyczsKCiAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgIG5hbWUgPSAiRXRoZXJQdXNoIjsKICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCAgdmVyc2lvbiA9ICIyMDE3MDkxMyI7CgogIGJvb2wgICAgcHVibGljICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTsKCiAgdWludCAgICBwdWJsaWMgICAgICAgICAgIHNlbGxlcmZlZSA9IDAuMDA1IGV0aGVyOwogIHVpbnQgICAgcHVibGljIGNvbnN0YW50ICAgIHNlbGxlcmZlZURpdmlkZSA9IDEgZXRoZXI7CgogIHVpbnQgICAgcHVibGljICAgICAgICAgICBidXllcmZlZSA9IDAuMDA1IGV0aGVyOwogIHVpbnQgICAgcHVibGljIGNvbnN0YW50ICAgIGJ1eWVyZmVlRGl2aWRlID0gMSBldGhlcjsKCiAgdWludCAgICBwcml2YXRlICAgICAgICAgIF9pZCA9IDA7CiAgdWludCAgICBwcml2YXRlICAgICAgICAgIF9ub25jZSA9IDA7CiAgYWRkcmVzcyAgcHJpdmF0ZSAgICAgICAgICBvd25lcjsKCiAgZXZlbnQgb25TZWxsKGJ5dGVzMzIgbm9uY2UsIHVpbnQgaWQsIGFkZHJlc3Mgc2VsbCwgdWludCBzZWxsYW1vdW50LCBhZGRyZXNzIGJ1eSwgdWludCBidXlhbW91bnQsIGFkZHJlc3Mgc2VsbGVyLCBhZGRyZXNzIGJ1eWVyLCB1aW50IGNyZWF0ZWQsIHVpbnQgZXhwaXJlZCwgdWludCB0aW1lc3RhbXApOwogIGV2ZW50IG9uQnV5KGJ5dGVzMzIgbm9uY2UsIHVpbnQgaWQsIGFkZHJlc3Mgc2VsbCwgdWludCBzZWxsYW1vdW50LCB1aW50IGJhbGFuY2VTZWxsYW1vdW50LAogICAgICAgICAgICAgIGFkZHJlc3MgYnV5LCB1aW50IGJ1eWFtb3VudCwgdWludCBiYWxhbmNlQnV5YW1vdW50LCBhZGRyZXNzIHNlbGxlciwgYWRkcmVzcyBidXllciwKICAgICAgICAgICAgICB1aW50IGNyZWF0ZWQsIHVpbnQgdGltZXN0YW1wKTsKICBldmVudCBvbkNhbmNlbChieXRlczMyIG5vbmNlLCB1aW50IGlkLCBhZGRyZXNzIHNlbGxlcik7CiAgZXZlbnQgb25EZXBvc2l0KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHVpbnQgYmFsYW5jZSk7CiAgZXZlbnQgb25XaXRoZHJhdyhhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50LCB1aW50IGJhbGFuY2UpOwoKICBtb2RpZmllciBvbmx5UnVubmluZygpIHsKICAgIHJlcXVpcmUocnVubmluZyk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiBFdGhlclB1c2goKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBvd25lckNoYW5nZVJ1bm5pbmcoYm9vbCBfcnVubmluZykKICAgIHB1YmxpYwogICAgb25seU93bmVyCiAgewogICAgcnVubmluZyA9IF9ydW5uaW5nOwogIH0KCiAgZnVuY3Rpb24gb3duZXJDaGFuZ2VTZWxsZXJmZWUodWludCBfZmVlKQogICAgcHVibGljCiAgICBvbmx5T3duZXIKICB7CiAgICAvKgogICAgICogYmV0d2VlbiBbMC4xJSwgMiVdCiAgICAgKi8KICAgIHJlcXVpcmUgKF9mZWUgPj0gMC4wMDEgZXRoZXIgJiYgX2ZlZSA8PSAwLjAyIGV0aGVyKTsKCiAgICBzZWxsZXJmZWUgPSBfZmVlOwogIH0KCiAgZnVuY3Rpb24gb3duZXJDaGFuZ2VCdXllcmZlZSh1aW50IF9mZWUpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogIHsKICAgIC8qCiAgICAgKiBiZXR3ZWVuIFswLjElLCAyJV0KICAgICAqLwogICAgcmVxdWlyZSAoX2ZlZSA+PSAwLjAwMSBldGhlciAmJiBfZmVlIDw9IDAuMDIgZXRoZXIpOwogICAgYnV5ZXJmZWUgPSBfZmVlOwogIH0KCiAgZnVuY3Rpb24gb3duZXJDaGFuZ2VPd25lcihhZGRyZXNzIF9vd25lcikKICAgIHB1YmxpYwogICAgb25seU93bmVyCiAgewogICAgcmVxdWlyZSAoX293bmVyID4gMCk7CiAgICBvd25lciA9IF9vd25lcjsKICB9CgogIGZ1bmN0aW9uIG93bmVyV2l0aGRyYXdBY2NvdW50KGFkZHJlc3MgYWNjb3VudCkKICAgIHB1YmxpYwogICAgb25seU93bmVyCiAgewogICAgYWNjb3VudC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gb3duZXJXaXRoZHJhdygpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogIHsKICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBnZXRSdW5uaW5nKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBydW5uaW5nOwogIH0KCiAgZnVuY3Rpb24gZ2V0U2VsbGVyZmVlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiBzZWxsZXJmZWU7CiAgfQoKICBmdW5jdGlvbiBnZXRCdXllcmZlZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gYnV5ZXJmZWU7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd0Ftb3VudEVUSCh1aW50IGFtb3VudCkgewogICAgaWYgKHRva2Vuc1swXVttc2cuc2VuZGVyXSA8IGFtb3VudCkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CgogICAgb25XaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd0VUSCgpIHsKICAgIHVpbnQgYW1vdW50ID0gdG9rZW5zWzBdW21zZy5zZW5kZXJdOwogICAgdG9rZW5zWzBdW21zZy5zZW5kZXJdID0gMDsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CgogICAgb25XaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VuKGFkZHJlc3MgdG9rZW4pIHsKICAgIGlmICh0b2tlbiA9PSBhZGRyZXNzKDApKSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIHVpbnQgYW1vdW50ID0gdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXTsKICAgIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0gPSAwOwoKICAgIGlmICghVG9rZW4odG9rZW4pLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCkpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgb25XaXRoZHJhdyh0b2tlbiwgbXNnLnNlbmRlciwgYW1vdW50LCB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3QW1vdW50VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIGlmICh0b2tlbiA9PSBhZGRyZXNzKDApKSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIGlmICh0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdIDwgYW1vdW50KSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0sIGFtb3VudCk7CgogICAgaWYgKCFUb2tlbih0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBvbldpdGhkcmF3KHRva2VuLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdEVUSCgpCiAgICBwdWJsaWMKICAgIHBheWFibGUKICB7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKICAgIG9uRGVwb3NpdCgwLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpCiAgICBwdWJsaWMKICB7CiAgICBpZiAodG9rZW4gPT0gYWRkcmVzcygwKSkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBpZiAoIVRva2VuKHRva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgYW1vdW50KSkgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgb25EZXBvc2l0KHRva2VuLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlcikKICAgIHB1YmxpYwogICAgY29uc3RhbnQKICAgIHJldHVybnMKICAgICh1aW50KQogIHsKICAgIHJldHVybiB0b2tlbnNbdG9rZW5dW3VzZXJdOwogIH0KCiAgZnVuY3Rpb24gdG9idXkodWludCBpZCwgYWRkcmVzcyBzZWxsZXIsIHVpbnQgYnV5YW1vdW50KQogICAgcHVibGljCiAgICBvbmx5UnVubmluZwogIHsKICAgIGlmIChvcmRlcnNbaWRdW3NlbGxlcl0uZXhwaXJlZCA8IGJsb2NrLm51bWJlcikgewogICAgICByZXZlcnQoKTsKICAgIH0KCiAgICBpZiAob3JkZXJzW2lkXVtzZWxsZXJdLmJ1eWVyID4gMCkgewogICAgICBpZiAob3JkZXJzW2lkXVtzZWxsZXJdLmJ1eWVyICE9IG1zZy5zZW5kZXIpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgfQoKICAgIGlmIChvcmRlcnNbaWRdW3NlbGxlcl0uYnV5YW1vdW50IDwgYnV5YW1vdW50KSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIGFkZHJlc3Mgc2VsbCA9IG9yZGVyc1tpZF1bc2VsbGVyXS5zZWxsOwogICAgYWRkcmVzcyBidXkgPSBvcmRlcnNbaWRdW3NlbGxlcl0uYnV5OwogICAgdWludCAgICBvcmRlcnNlbGxhbW91bnQgPSBvcmRlcnNbaWRdW3NlbGxlcl0uc2VsbGFtb3VudDsKICAgIHVpbnQgICAgb3JkZXJidXlhbW91bnQgPSBvcmRlcnNbaWRdW3NlbGxlcl0uYnV5YW1vdW50OwogICAgdWludCAgICBzZWxsYW1vdW50ID0gc2FmZU11bChvcmRlcnNlbGxhbW91bnQsIGJ1eWFtb3VudCkgLyBvcmRlcmJ1eWFtb3VudDsKICAgIGJ1eWFtb3VudCA9IHNhZmVNdWwoc2VsbGFtb3VudCwgb3JkZXJidXlhbW91bnQpIC8gb3JkZXJzZWxsYW1vdW50OwoKICAgIGlmIChvcmRlcnNlbGxhbW91bnQgPCBzZWxsYW1vdW50KSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIGlmICh0b2tlbnNbc2VsbF1bc2VsbGVyXSA8IHNlbGxhbW91bnQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgaWYgKHRva2Vuc1tidXldW21zZy5zZW5kZXJdIDwgYnV5YW1vdW50KSB7CiAgICAgIHJldmVydCgpOwogICAgfQoKICAgIHVpbnQgX3NlbGxlcmZlZSA9IHNhZmVNdWwoc2VsbGFtb3VudCwgc2VsbGVyZmVlKSAvIHNlbGxlcmZlZURpdmlkZTsKICAgIHVpbnQgX2J1eWVyZmVlID0gc2FmZU11bChidXlhbW91bnQsIGJ1eWVyZmVlKSAvIGJ1eWVyZmVlRGl2aWRlOwoKICAgIC8qCiAgICAgKiBvcmRlcgogICAgICovCgogICAgb3JkZXJzW2lkXVtzZWxsZXJdLnNlbGxhbW91bnQgPSBzYWZlU3ViKG9yZGVyc1tpZF1bc2VsbGVyXS5zZWxsYW1vdW50LCBzZWxsYW1vdW50KTsKICAgIG9yZGVyc1tpZF1bc2VsbGVyXS5idXlhbW91bnQgPSBzYWZlU3ViKG9yZGVyc1tpZF1bc2VsbGVyXS5idXlhbW91bnQsIGJ1eWFtb3VudCk7CgogICAgLyoKICAgICAqIGJhbGFuY2Ugc2VsbCB0b2tlbgogICAgICovCgogICAgdG9rZW5zW3NlbGxdW3NlbGxlcl0gPSBzYWZlU3ViKHRva2Vuc1tzZWxsXVtzZWxsZXJdLCBzZWxsYW1vdW50KTsKICAgIHRva2Vuc1tzZWxsXVtvd25lcl0gPSBzYWZlQWRkKHRva2Vuc1tzZWxsXVtvd25lcl0sIF9zZWxsZXJmZWUpOwogICAgdG9rZW5zW3NlbGxdW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbc2VsbF1bbXNnLnNlbmRlcl0sIHNhZmVTdWIoc2VsbGFtb3VudCwgX3NlbGxlcmZlZSkpOwoKICAgIC8qCiAgICAgKiBiYWxhbmNlIGJ1eSB0b2tlbgogICAgICovCgogICAgdG9rZW5zW2J1eV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1tidXldW21zZy5zZW5kZXJdLCBidXlhbW91bnQpOwogICAgdG9rZW5zW2J1eV1bb3duZXJdID0gc2FmZUFkZCh0b2tlbnNbYnV5XVtvd25lcl0sIF9idXllcmZlZSk7CiAgICB0b2tlbnNbYnV5XVtzZWxsZXJdID0gc2FmZUFkZCh0b2tlbnNbYnV5XVtzZWxsZXJdLCBzYWZlU3ViKGJ1eWFtb3VudCwgX2J1eWVyZmVlKSk7CgogICAgLyoKICAgICAqIGNhbGwgdG8gYnV5IGZ1bmN0aW9uIHRvIGNsZWFyIHN0YWNrCiAgICAgKi8KCiAgICBfdG9idXkoaWQsIHNlbGxlciwgc2VsbGFtb3VudCwgYnV5YW1vdW50KTsKICB9CgogIGZ1bmN0aW9uIF90b2J1eSh1aW50IGlkLCBhZGRyZXNzIHNlbGxlciwgdWludCBzZWxsYW1vdW50LCB1aW50IGJ1eWFtb3VudCkKICAgIHByaXZhdGUKICB7CiAgICBieXRlczMyIG5vbmNlID0gc2hhMyhibG9jay5udW1iZXIsIG1zZy5kYXRhLCBfbm9uY2UrKyk7CiAgICBvbkJ1eSgKICAgICAgICAgbm9uY2UsCiAgICAgICAgIGlkLAogICAgICAgICBvcmRlcnNbaWRdW3NlbGxlcl0uc2VsbCwKICAgICAgICAgc2VsbGFtb3VudCwKICAgICAgICAgb3JkZXJzW2lkXVtzZWxsZXJdLnNlbGxhbW91bnQsCiAgICAgICAgIG9yZGVyc1tpZF1bc2VsbGVyXS5idXksCiAgICAgICAgIGJ1eWFtb3VudCwKICAgICAgICAgb3JkZXJzW2lkXVtzZWxsZXJdLmJ1eWFtb3VudCwKICAgICAgICAgc2VsbGVyLAogICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICBibG9jay5udW1iZXIsCiAgICAgICAgIG5vdwogICAgICAgICApOwogIH0KCiAgZnVuY3Rpb24gdG9zZWxsKGFkZHJlc3Mgc2VsbCwgdWludCBzZWxsYW1vdW50LCBhZGRyZXNzIGJ1eSwgdWludCBidXlhbW91bnQsCiAgICAgICAgICAgICAgIGFkZHJlc3MgYnV5ZXIsIHVpbnQgZXhwaXJlLCB1aW50IGJyb2FkY2FzdCkKICAgIHB1YmxpYwogICAgb25seVJ1bm5pbmcKICB7CgogICAgaWYgKHRva2Vuc1tzZWxsXVttc2cuc2VuZGVyXSA8IHNlbGxhbW91bnQpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CgogICAgLyoKICAgICAqIGlmIGJ1eWVyID4gMCwgdGhlIG9yZGVyIG9ubHkgY2FuIGJlIHB1cmNoYXNlZCBieSB0aGUgc3BlY2lmaWVkIGJ1eWVyLgogICAgICogYW5kIGhlcmUgd2UgZG8gbm90IGNoZWNrIHRoZSB0b2tlbiBiYWxhbmNlIHRvIGltcG9ydmUgdGhlIHBvb3IgcGVyZm9ybWFuY2UKICAgICAqLwoKICAgIF9pZCA9IF9pZCArIDE7CiAgICBvcmRlcnNbX2lkXVttc2cuc2VuZGVyXS5pZCA9IF9pZDsKICAgIG9yZGVyc1tfaWRdW21zZy5zZW5kZXJdLnNlbGwgPSBzZWxsOwogICAgb3JkZXJzW19pZF1bbXNnLnNlbmRlcl0uc2VsbGFtb3VudCA9IHNlbGxhbW91bnQ7CiAgICBvcmRlcnNbX2lkXVttc2cuc2VuZGVyXS5idXkgPSBidXk7CiAgICBvcmRlcnNbX2lkXVttc2cuc2VuZGVyXS5idXlhbW91bnQgPSBidXlhbW91bnQ7CiAgICBvcmRlcnNbX2lkXVttc2cuc2VuZGVyXS5zZWxsZXIgPSBtc2cuc2VuZGVyOwogICAgb3JkZXJzW19pZF1bbXNnLnNlbmRlcl0uYnV5ZXIgPSBidXllcjsKICAgIG9yZGVyc1tfaWRdW21zZy5zZW5kZXJdLmNyZWF0ZWQgPSBibG9jay5udW1iZXI7CiAgICBvcmRlcnNbX2lkXVttc2cuc2VuZGVyXS5leHBpcmVkID0gc2FmZUFkZChibG9jay5udW1iZXIsIGV4cGlyZSk7CgogICAgYnl0ZXMzMiBub25jZSA9IHNoYTMoYmxvY2subnVtYmVyLCBtc2cuZGF0YSwgX25vbmNlKyspOwoKICAgIG9uU2VsbChub25jZSwgX2lkLCBzZWxsLCBzZWxsYW1vdW50LCBidXksIGJ1eWFtb3VudCwgbXNnLnNlbmRlciwgYnV5ZXIsIGJsb2NrLm51bWJlciwgb3JkZXJzW19pZF1bbXNnLnNlbmRlcl0uZXhwaXJlZCwgbm93KTsKICB9CgogIGZ1bmN0aW9uIHRvY2FuY2VsKHVpbnQgaWQpCiAgICBwdWJsaWMKICB7CiAgICBvcmRlcnNbaWRdW21zZy5zZW5kZXJdLnNlbGxhbW91bnQgPSAwOwoKICAgIGJ5dGVzMzIgbm9uY2UgPSBzaGEzKGJsb2NrLm51bWJlciwgbXNnLmRhdGEsIF9ub25jZSsrKTsKCiAgICBvbkNhbmNlbChub25jZSwgaWQsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gZ2V0T3JkZXIodWludCBpZCwgYWRkcmVzcyBzZWxsZXIpCiAgICBwdWJsaWMKICAgIGNvbnN0YW50CiAgICByZXR1cm5zCiAgICAoYWRkcmVzcywgdWludCwgYWRkcmVzcywgdWludCwgYWRkcmVzcywgdWludCkKICB7CiAgICByZXR1cm4gKG9yZGVyc1tpZF1bc2VsbGVyXS5zZWxsLAogICAgICBvcmRlcnNbaWRdW3NlbGxlcl0uc2VsbGFtb3VudCwKICAgICAgb3JkZXJzW2lkXVtzZWxsZXJdLmJ1eSwKICAgICAgb3JkZXJzW2lkXVtzZWxsZXJdLmJ1eWFtb3VudCwKICAgICAgb3JkZXJzW2lkXVtzZWxsZXJdLmJ1eWVyLAogICAgICBvcmRlcnNbaWRdW3NlbGxlcl0uZXhwaXJlZAogICAgKTsKICB9Cn0='.
	

]
