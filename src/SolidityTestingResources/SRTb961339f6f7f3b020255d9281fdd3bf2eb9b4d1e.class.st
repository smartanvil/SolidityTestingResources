Class {
	#name : #SRTb961339f6f7f3b020255d9281fdd3bf2eb9b4d1e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb961339f6f7f3b020255d9281fdd3bf2eb9b4d1e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IFNtYXJ0Um91bGV0dGVUb2tlbiB7CgkvL1Rva2VucyBkYXRhCglzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0VSQzIwJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwoKCXN0cnVjdCBob2xkZXJEYXRhIHsKCQl1aW50MjU2IHRva2Vuc19jb3VudDsKCQlib29sIGluaXQ7Cgl9CgoJc3RydWN0IHRlbXBIb2xkZXJEYXRhIHsKCQl1aW50MjU2IHRva2Vuc19jb3VudDsKCQl1aW50MjU2IHN0YXJ0X2RhdGU7CgkJdWludDI1NiBlbmRfZGF0ZTsKCX0KCglhZGRyZXNzW10gbGlzdEFkZHJIb2xkZXJzOwoKCW1hcHBpbmcoIGFkZHJlc3MgPT4gaG9sZGVyRGF0YSApIF9iYWxhbmNlczsKCW1hcHBpbmcoIGFkZHJlc3MgPT4gdGVtcEhvbGRlckRhdGEgKSBfdGVtcF9iYWxhbmNlOwoJbWFwcGluZyggYWRkcmVzcyA9PiBtYXBwaW5nKCBhZGRyZXNzID0+IHVpbnQyNTYgKSApIF9hcHByb3ZhbHM7CgoJYm9vbCBzdG9wX29wZXJhdGlvbjsKCQoJdWludDI1NiBfc3VwcGx5OwoJdWludDI1NiBfaW5pdF9jb3VudF90b2tlbnM7Cgl1aW50MjU2IHB1YmxpYyBjb3N0T2ZPbmVUb2tlbjsgLy90aGUgY29zdCBvZiBvbmUgdG9rZW4gaW4gd2VpCgkKCWFkZHJlc3Mgd2FsbGV0X0lDTzsKCWJvb2wgZW5hYmxlSUNPOwoJdWludDI1NiBtaW5fdmFsdWVfYnV5VG9rZW47IC8vaW4gd2VpCgl1aW50MjU2IG1heF92YWx1ZV9idXlUb2tlbjsgLy9pbiB3ZWkKCglhZGRyZXNzIGZvbmRfd2FsbGV0OwoJYWRkcmVzcyBkZXZlbG9wZXJfd2FsbGV0OwoKCWFkZHJlc3MgZGl2aWRlbnRfY29udHJhY3QgPSBhZGRyZXNzKDB4MCk7CgkKCWV2ZW50IFRva2VuQnV5KGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgYW1vdW50T2ZUb2tlbnMpOwoKICAgIC8vQ29udHJhY3QgZGF0YQoJYWRkcmVzcyBkZXZlbG9wZXI7CglhZGRyZXNzIG1hbmFnZXI7CgoJc3RydWN0IGdhbWVzRGF0YSB7CgkJYm9vbCBpbml0OwoJfQoKCW1hcHBpbmcoIGFkZHJlc3MgPT4gZ2FtZXNEYXRhKSBsaXN0R2FtZXM7CglhZGRyZXNzW10gYWRkckdhbWVzOwoKCglmdW5jdGlvbiBTbWFydFJvdWxldHRlVG9rZW4oKQoJewoJCV9zdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDA7CgkJX2luaXRfY291bnRfdG9rZW5zID0gMTAwMDAwMDAwMDAwMDAwMDAwOwoKCQlkZXZlbG9wZXJfd2FsbGV0ID0gYWRkcmVzcygweDg1MjFFMWY5MjIwQTI1MWRFMGFiNzhmNmEyRTg3NTRDYTlFNzUyNDIpOwoJCV9iYWxhbmNlc1tkZXZlbG9wZXJfd2FsbGV0XSA9IGhvbGRlckRhdGEoKF9zdXBwbHkqMjApLzEwMCwgdHJ1ZSk7CgkJCgkJd2FsbGV0X0lDTyA9IGFkZHJlc3MoMHgyZGZmODdmODg5MmQ2NWY3YTk3YjEyODdlNzk1NDA1MDk4YWU3YjdmKTsKCQlfYmFsYW5jZXNbd2FsbGV0X0lDT10gPSBob2xkZXJEYXRhKChfc3VwcGx5KjYwKS8xMDAsIHRydWUpOwoJCQoJCWZvbmRfd2FsbGV0ID0gYWRkcmVzcygweDM1MDFERDJCNTE1RURDMTkyMGY5MDA3NzgyRGE1YWMwMTg5MjI1MDIpOwoJCV9iYWxhbmNlc1tmb25kX3dhbGxldF0gPSBob2xkZXJEYXRhKChfc3VwcGx5KjIwKS8xMDAsIHRydWUpOwoJCQoJCWxpc3RBZGRySG9sZGVycy5wdXNoKGRldmVsb3Blcl93YWxsZXQpOwoJCWxpc3RBZGRySG9sZGVycy5wdXNoKHdhbGxldF9JQ08pOwoJCWxpc3RBZGRySG9sZGVycy5wdXNoKGZvbmRfd2FsbGV0KTsKICAgICAgICAKICAgICAgICBuYW1lID0gJ1JvdWxldHRlIFRva2VuJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHN5bWJvbCA9ICdSTFQnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBkZWNpbWFscyA9IDEwOwogICAgICAgIGNvc3RPZk9uZVRva2VuID0gMTUwMDAwMDAwMDAwMDAwMDsKCgkJZGV2ZWxvcGVyID0gbXNnLnNlbmRlcjsKCQltYW5hZ2VyID0gbXNnLnNlbmRlcjsJCQoJCQoJCWVuYWJsZUlDTyA9IGZhbHNlOwoJCW1pbl92YWx1ZV9idXlUb2tlbiA9IDEwMDAwMDAwMDAwMDAwMDAwMDA7CgkJbWF4X3ZhbHVlX2J1eVRva2VuID0gNTAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKCQlzdG9wX29wZXJhdGlvbiA9IGZhbHNlOwoJfQoKCW1vZGlmaWVyIGlzRGV2ZWxvcGVyKCl7CgkJaWYgKG1zZy5zZW5kZXIhPWRldmVsb3BlcikgdGhyb3c7CgkJXzsKCX0KCgltb2RpZmllciBpc01hbmFnZXIoKXsKCQlpZiAobXNnLnNlbmRlciE9bWFuYWdlciAmJiBtc2cuc2VuZGVyIT1kZXZlbG9wZXIpIHRocm93OwoJCV87Cgl9CgoJbW9kaWZpZXIgaXNBY2Nlc3NTdG9wT3BlcmF0aW9uKCl7CgkJaWYgKG1zZy5zZW5kZXIhPW1hbmFnZXIgJiYgbXNnLnNlbmRlciE9ZGV2ZWxvcGVyICYmIChtc2cuc2VuZGVyIT1kaXZpZGVudF9jb250cmFjdCB8fCBkaXZpZGVudF9jb250cmFjdD09YWRkcmVzcygweDApKSkgdGhyb3c7CgkJXzsKCX0KCglmdW5jdGlvbiBjaGFuZ2VEZXZlbG9wZXIoYWRkcmVzcyBuZXdfZGV2ZWxvcGVyKQoJaXNEZXZlbG9wZXIKCXsKCQlpZihuZXdfZGV2ZWxvcGVyID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7CgkJZGV2ZWxvcGVyID0gbmV3X2RldmVsb3BlcjsKCX0KCglmdW5jdGlvbiBjaGFuZ2VNYW5hZ2VyKGFkZHJlc3MgbmV3X21hbmFnZXIpCglpc0RldmVsb3BlcgoJewoJCWlmKG5ld19tYW5hZ2VyID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7CgkJbWFuYWdlciA9IG5ld19tYW5hZ2VyOwoJfQoKCWZ1bmN0aW9uIGNoYW5nZURpdmlkZW50Q29udHJhY3QoYWRkcmVzcyBuZXdfY29udHJhY3QpIGlzTWFuYWdlcgoJewoJCWlmKGRpdmlkZW50X2NvbnRyYWN0IT1hZGRyZXNzKDB4MCkpIHRocm93OwoJCWlmKGRpdmlkZW50X2NvbnRyYWN0PT1hZGRyZXNzKDB4MCkpIHRocm93OwoJCWRpdmlkZW50X2NvbnRyYWN0ID0gbmV3X2NvbnRyYWN0OwoJfQoKCWZ1bmN0aW9uIG5ld0Nvc3RUb2tlbih1aW50MjU2IG5ld19jb3N0KQoJaXNNYW5hZ2VyCgl7CgkJaWYobmV3X2Nvc3QgPT0gMCkgdGhyb3c7CgkJY29zdE9mT25lVG9rZW4gPSBuZXdfY29zdDsKCX0KCglmdW5jdGlvbiBnZXRvc3RUb2tlbigpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikKCXsKCQlyZXR1cm4gY29zdE9mT25lVG9rZW47Cgl9CgoJZnVuY3Rpb24gYWRkTmV3R2FtZShhZGRyZXNzIG5ld19nYW1lKQoJaXNNYW5hZ2VyCgl7CgkJaWYobmV3X2dhbWUgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKCQlsaXN0R2FtZXNbbmV3X2dhbWVdID0gZ2FtZXNEYXRhKHRydWUpOwoJCWFkZHJHYW1lcy5wdXNoKG5ld19nYW1lKTsKCX0KCglmdW5jdGlvbiBkZWxldGVHYW1lKGFkZHJlc3MgZ2FtZSkKCWlzTWFuYWdlcgoJewoJCWlmKGdhbWUgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKCQlpZihsaXN0R2FtZXNbZ2FtZV0uaW5pdCl7CgkJCWxpc3RHYW1lc1tnYW1lXS5pbml0ID0gZmFsc2U7CgkJfQoJfQoKCWZ1bmN0aW9uIGtpbGwoKSBpc0RldmVsb3BlciB7CgkJc3VpY2lkZShkZXZlbG9wZXIpOwoJfQoKCWZ1bmN0aW9uIGFkZFVzZXJUb0xpc3QoYWRkcmVzcyB1c2VyKSBpbnRlcm5hbCB7CgkJaWYoIV9iYWxhbmNlc1t1c2VyXS5pbml0KXsKCQkJbGlzdEFkZHJIb2xkZXJzLnB1c2godXNlcik7CgkJfQoJfQoKCWZ1bmN0aW9uIGdhbWVMaXN0T2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCB2YWx1ZSkgewoJCWdhbWVzRGF0YSBnYW1lX2RhdGEgPSBsaXN0R2FtZXNbd2hvXTsKCQlyZXR1cm4gZ2FtZV9kYXRhLmluaXQ7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFRva2VucyBGdW5jdGlvbnMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAgIGZ1bmN0aW9uIHN0b3BPcGVyYXRpb24oKSBpc0FjY2Vzc1N0b3BPcGVyYXRpb24gewoJCXN0b3Bfb3BlcmF0aW9uID0gdHJ1ZTsKCX0KCglmdW5jdGlvbiBzdGFydE9wZXJhdGlvbigpIGlzQWNjZXNzU3RvcE9wZXJhdGlvbiB7CgkJc3RvcF9vcGVyYXRpb24gPSBmYWxzZTsKCX0KCglmdW5jdGlvbiBpc09wZXJhdGlvbkJsb2NrZWQoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKXsKCQlyZXR1cm4gc3RvcF9vcGVyYXRpb247Cgl9CgoJZnVuY3Rpb24gcnVuSUNPKCkgaXNNYW5hZ2VyIHsKCQllbmFibGVJQ08gPSB0cnVlOwoJfQoKCWZ1bmN0aW9uIHN0b3BJQ08oKSBpc01hbmFnZXIgewoJCWVuYWJsZUlDTyA9IGZhbHNlOwoJfQoKCWZ1bmN0aW9uIGluZm9JQ08oKSBjb25zdGFudCByZXR1cm5zIChib29sKXsKCQlyZXR1cm4gZW5hYmxlSUNPOwoJfQoKCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpIHsKCQlyZXR1cm4gX3N1cHBseTsKCX0KCglmdW5jdGlvbiBpbml0Q291bnRUb2tlbnMoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGluaXRfY291bnQpIHsKCQlyZXR1cm4gX2luaXRfY291bnRfdG9rZW5zOwoJfQoKCWZ1bmN0aW9uIGJhbGFuY2VPZiggYWRkcmVzcyB3aG8gKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHZhbHVlKSB7CgkJcmV0dXJuIF9iYWxhbmNlc1t3aG9dLnRva2Vuc19jb3VudDsKCX0KCglmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9hbGxvd2FuY2UpIHsKCQlyZXR1cm4gX2FwcHJvdmFsc1tvd25lcl1bc3BlbmRlcl07Cgl9CgoJLy8gb3ZlcmZsb3cgY2hlY2sKCWZ1bmN0aW9uIHNhZmVUb0FkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewoJCXJldHVybiAoYSArIGIgPj0gYSAmJiBhICsgYiA+PSBiKTsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlciggYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvaykgewoJCWlmKHN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCgkJaWYoIF9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQgPCB2YWx1ZSApIHsKCQkgICAgdGhyb3c7CgkJfQoJCWlmKCAhc2FmZVRvQWRkKF9iYWxhbmNlc1t0b10udG9rZW5zX2NvdW50LCB2YWx1ZSkgKSB7CgkJICAgIHRocm93OwoJCX0KCgkJX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudCAtPSB2YWx1ZTsKCQlpZihfYmFsYW5jZXNbdG9dLmluaXQpewoJCQlfYmFsYW5jZXNbdG9dLnRva2Vuc19jb3VudCArPSB2YWx1ZTsKCQl9CgkJZWxzZXsKCQkJYWRkVXNlclRvTGlzdCh0byk7CgkJCV9iYWxhbmNlc1t0b10gPSBob2xkZXJEYXRhKHZhbHVlLCB0cnVlKTsKCQl9CgoJCVRyYW5zZmVyKCBtc2cuc2VuZGVyLCB0bywgdmFsdWUgKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvaykgewoJCWlmKHN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCgkJaWYoIF9iYWxhbmNlc1tmcm9tXS50b2tlbnNfY291bnQgPCB2YWx1ZSApIHsKCQkgICAgdGhyb3c7CgkJfQoJCQoJCWlmKCBfYXBwcm92YWxzW2Zyb21dW21zZy5zZW5kZXJdIDwgdmFsdWUgKSB7CgkJICAgIHRocm93OwoJCX0KCQlpZiggIXNhZmVUb0FkZChfYmFsYW5jZXNbdG9dLnRva2Vuc19jb3VudCwgdmFsdWUpICkgewoJCSAgICB0aHJvdzsKCQl9CgkJLy8gdHJhbnNmZXIgYW5kIHJldHVybiB0cnVlCgkJX2FwcHJvdmFsc1tmcm9tXVttc2cuc2VuZGVyXSAtPSB2YWx1ZTsKCQlfYmFsYW5jZXNbZnJvbV0udG9rZW5zX2NvdW50IC09IHZhbHVlOwoJCWlmKF9iYWxhbmNlc1t0b10uaW5pdCl7CgkJCV9iYWxhbmNlc1t0b10udG9rZW5zX2NvdW50ICs9IHZhbHVlOwoJCX0KCQllbHNlewoJCQlhZGRVc2VyVG9MaXN0KHRvKTsKCQkJX2JhbGFuY2VzW3RvXSA9IGhvbGRlckRhdGEodmFsdWUsIHRydWUpOwoJCX0JCQoJCQoJCVRyYW5zZmVyKCBmcm9tLCB0bywgdmFsdWUgKTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCglmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvaykgewoJCWlmKHN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCgkJX2FwcHJvdmFsc1ttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IHZhbHVlOwoJCUFwcHJvdmFsKCBtc2cuc2VuZGVyLCBzcGVuZGVyLCB2YWx1ZSApOwoJCXJldHVybiB0cnVlOwoJfQoKCWV2ZW50IEVtaXNzaW9uKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgdWludDI1NiBiZXQsIHVpbnQyNTYgY29lZiwgdWludDI1NiBkZWNpbWFscywgdWludDI1NiBjb3N0X3Rva2VuKTsKCglmdW5jdGlvbiBlbWlzc2lvbihhZGRyZXNzIHBsYXllciwgYWRkcmVzcyBwYXJ0bmVyLCB1aW50MjU2IHZhbHVlX2JldCwgdWludDE2IGNvZWZfcGxheWVyLCB1aW50MTYgY29lZl9wYXJ0bmVyKSBleHRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKCQlpZihzdG9wX29wZXJhdGlvbikgdGhyb3c7CgoJCWlmKGxpc3RHYW1lc1ttc2cuc2VuZGVyXS5pbml0ID09IGZhbHNlKSB0aHJvdzsKCQlpZihwbGF5ZXIgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKCQlpZih2YWx1ZV9iZXQgPT0gMCkgdGhyb3c7CgoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7CgoJCXVpbnQyNTYgcGxheWVyX3Rva2VuID0gKCh2YWx1ZV9iZXQqY29lZl9wbGF5ZXIqZGVjaW1hbHNfdG9rZW4pLzEwMDAwKS9jb3N0T2ZPbmVUb2tlbjsKCQlpZihfYmFsYW5jZXNbcGxheWVyXS5pbml0KXsKCQkJX2JhbGFuY2VzW3BsYXllcl0udG9rZW5zX2NvdW50ICs9IHBsYXllcl90b2tlbjsKCQl9CgkJZWxzZXsKCQkJYWRkVXNlclRvTGlzdChwbGF5ZXIpOwoJCQlfYmFsYW5jZXNbcGxheWVyXSA9IGhvbGRlckRhdGEocGxheWVyX3Rva2VuLCB0cnVlKTsKCQl9CgkJRW1pc3Npb24ocGxheWVyLCBwbGF5ZXJfdG9rZW4sIHZhbHVlX2JldCwgY29lZl9wbGF5ZXIsIGRlY2ltYWxzX3Rva2VuLCBjb3N0T2ZPbmVUb2tlbik7CgoJCXVpbnQyNTYgcGFydG5lcl90b2tlbiA9IDA7CgkJaWYocGFydG5lciAhPSBhZGRyZXNzKDB4MCkpewoJCQlwYXJ0bmVyX3Rva2VuID0gKCh2YWx1ZV9iZXQqY29lZl9wYXJ0bmVyKmRlY2ltYWxzX3Rva2VuKS8xMDAwMCkvY29zdE9mT25lVG9rZW47CgkJCWlmKF9iYWxhbmNlc1twYXJ0bmVyXS5pbml0KXsKCQkJCV9iYWxhbmNlc1twYXJ0bmVyXS50b2tlbnNfY291bnQgKz0gcGFydG5lcl90b2tlbjsKCQkJfQoJCQllbHNlewoJCQkJYWRkVXNlclRvTGlzdChwYXJ0bmVyKTsKCQkJCV9iYWxhbmNlc1twYXJ0bmVyXSA9IGhvbGRlckRhdGEocGFydG5lcl90b2tlbiwgdHJ1ZSk7CgkJCX0KCQkJRW1pc3Npb24ocGFydG5lciwgcGFydG5lcl90b2tlbiwgdmFsdWVfYmV0LCBjb2VmX3BhcnRuZXIsIGRlY2ltYWxzX3Rva2VuLCBjb3N0T2ZPbmVUb2tlbik7CgkJfQoKCQlfc3VwcGx5ICs9IChwbGF5ZXJfdG9rZW4rcGFydG5lcl90b2tlbik7CgoJCXJldHVybiBwbGF5ZXJfdG9rZW47Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFRlbXBvcmFyeSBUb2tlbnMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglhZGRyZXNzW10gbGlzdEFkZHJUZW1wSG9sZGVyczsKCWV2ZW50IFRlbXBUb2tlbnNTZW5kKGFkZHJlc3MgaW5kZXhlZCByZWNpcGllbnQsIHVpbnQyNTYgY291bnQsIHVpbnQyNTYgc3RhcnQsIHVpbnQyNTYgZW5kKTsKCglmdW5jdGlvbiBzZW5kVGVtcFRva2VucyhhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBjb3VudCwgdWludDI1NiBwZXJpb2QpIGlzTWFuYWdlciB7CgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93OwoKCQlpZihjb3VudD09MCB8fCBwZXJpb2Q9PTApIHRocm93OwoJCQoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7CgkJY291bnQgPSBjb3VudCpkZWNpbWFsc190b2tlbjsKCgkJaWYoX2JhbGFuY2VzW2ZvbmRfd2FsbGV0XS50b2tlbnNfY291bnQgPCBjb3VudCkgdGhyb3c7CgkJaWYoX3RlbXBfYmFsYW5jZVtyZWNpcGllbnRdLnRva2Vuc19jb3VudCA+IDApIHRocm93OwoKCQlfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0gPSB0ZW1wSG9sZGVyRGF0YShjb3VudCwgbm93LCBub3cgKyBwZXJpb2QpOwoJCWxpc3RBZGRyVGVtcEhvbGRlcnMucHVzaChyZWNpcGllbnQpOwoJCV9iYWxhbmNlc1tmb25kX3dhbGxldF0udG9rZW5zX2NvdW50IC09IGNvdW50OwoJCVRlbXBUb2tlbnNTZW5kKHJlY2lwaWVudCwgY291bnQsIF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS5zdGFydF9kYXRlLCBfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0uZW5kX2RhdGUpOwoJfQoKCWZ1bmN0aW9uIHRlbXBUb2tlbnNCYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCS8vdGVtcEhvbGRlckRhdGEgZGF0YV9ob2xkZXIgPSBfX3RlbXBfYmFsYW5jZVt3aG9dOwoJCWlmKF90ZW1wX2JhbGFuY2Vbd2hvXS5lbmRfZGF0ZSA8IG5vdykgcmV0dXJuIDA7CgkJZWxzZSByZXR1cm4gX3RlbXBfYmFsYW5jZVt3aG9dLnRva2Vuc19jb3VudDsKCX0KCglmdW5jdGlvbiB0ZW1wVG9rZW5zUGVyaW9kT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCWlmKF90ZW1wX2JhbGFuY2Vbd2hvXS5lbmRfZGF0ZSA8IG5vdykgcmV0dXJuIDA7CgkJZWxzZSByZXR1cm4gX3RlbXBfYmFsYW5jZVt3aG9dLmVuZF9kYXRlOwoJfQoKCWZ1bmN0aW9uIHJldHVyblRlbXBUb2tlbnMoYWRkcmVzcyByZWNpcGllbnQpIGlzTWFuYWdlciB7CgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93OwoJCQoJCWlmKF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS50b2tlbnNfY291bnQgPT0gMCkgdGhyb3c7CgoJCV9iYWxhbmNlc1tmb25kX3dhbGxldF0udG9rZW5zX2NvdW50ICs9IF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS50b2tlbnNfY291bnQ7CgkJX3RlbXBfYmFsYW5jZVtyZWNpcGllbnRdID0gdGVtcEhvbGRlckRhdGEoMCwgMCwgMCk7CQkKCX0KCglmdW5jdGlvbiBnZXRMaXN0VGVtcEhvbGRlcnMoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3NbXSl7CgkJcmV0dXJuIGxpc3RBZGRyVGVtcEhvbGRlcnM7Cgl9CgoJZnVuY3Rpb24gZ2V0Q291bnRUZW1wSG9sZGVycygpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CgkJcmV0dXJuIGxpc3RBZGRyVGVtcEhvbGRlcnMubGVuZ3RoOwoJfQoKCWZ1bmN0aW9uIGdldEl0ZW1UZW1wSG9sZGVycyh1aW50MjU2IGluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewoJCWlmKGluZGV4ID49IGxpc3RBZGRyVGVtcEhvbGRlcnMubGVuZ3RoKSByZXR1cm4gYWRkcmVzcygweDApOwoJCWVsc2UgcmV0dXJuIGxpc3RBZGRyVGVtcEhvbGRlcnNbaW5kZXhdOwoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBJbnZlc3QgRnVuY3Rpb25zCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLypldmVudCBTdWNjZXNzUHJvZml0U2VuZChhZGRyZXNzIGluZGV4ZWQgaG9sZGVyLCB1aW50IHZhbHVlKTsKCWV2ZW50IEZhaWxQcm9maXRTZW5kKGFkZHJlc3MgaW5kZXhlZCBob2xkZXIsIHVpbnQgdmFsdWUpOyovCgoJZnVuY3Rpb24oKSBwYXlhYmxlCgl7CQoJCWlmKHN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCQlpZihtc2cuc2VuZGVyID09IGRldmVsb3BlcikgdGhyb3c7CgkJaWYobXNnLnNlbmRlciA9PSBtYW5hZ2VyKSB0aHJvdzsKCQlpZihtc2cuc2VuZGVyID09IGRldmVsb3Blcl93YWxsZXQpIHRocm93OwoJCWlmKG1zZy5zZW5kZXIgPT0gd2FsbGV0X0lDTykgdGhyb3c7CgkJaWYobXNnLnNlbmRlciA9PSBmb25kX3dhbGxldCkgdGhyb3c7CgoJCWlmKGxpc3RHYW1lc1ttc2cuc2VuZGVyXS5pbml0KSB0aHJvdzsKCgkJaWYoZW5hYmxlSUNPID09IGZhbHNlKSB0aHJvdzsKCQkJCgkJaWYobXNnLnZhbHVlIDwgbWluX3ZhbHVlX2J1eVRva2VuKSB0aHJvdzsKCQkKCQl1aW50MjU2IHZhbHVlX3NlbmQgPSBtc2cudmFsdWU7CgkJaWYodmFsdWVfc2VuZCA+IG1heF92YWx1ZV9idXlUb2tlbil7CgkJCXZhbHVlX3NlbmQgPSBtYXhfdmFsdWVfYnV5VG9rZW47CgkJCWlmKG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUtbWF4X3ZhbHVlX2J1eVRva2VuKT09ZmFsc2UpIHRocm93OwoJCX0KCgkJdWludDI1NiBkZWNpbWFsc190b2tlbiA9IDEwKip1aW50MjU2KGRlY2ltYWxzKTsKCQkKCQl1aW50MjU2IGNvdW50X3Rva2VucyA9ICh2YWx1ZV9zZW5kKmRlY2ltYWxzX3Rva2VuKS9jb3N0T2ZPbmVUb2tlbjsKCQkKCQlpZihjb3VudF90b2tlbnMgPl9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgKXsKCQkJY291bnRfdG9rZW5zID0gX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudDsKCQl9CgkJaWYodmFsdWVfc2VuZCA+IChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKXsJCQkJCgkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7CgkJCXZhbHVlX3NlbmQgPSB2YWx1ZV9zZW5kIC0gKChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKTsKCQl9CgoJCWlmKCFfYmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdCl7CgkJCWFkZFVzZXJUb0xpc3QobXNnLnNlbmRlcik7CgkJCV9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgLT0gY291bnRfdG9rZW5zOwkJCQoJCQlfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBob2xkZXJEYXRhKGNvdW50X3Rva2VucywgdHJ1ZSk7CgkJfQoJCWVsc2V7CgkJCWlmKCgoX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudCpjb3N0T2ZPbmVUb2tlbikvZGVjaW1hbHNfdG9rZW4pKygoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbik+bWF4X3ZhbHVlX2J1eVRva2VuKSB7CgkJCQljb3VudF90b2tlbnMgPSAoKG1heF92YWx1ZV9idXlUb2tlbipkZWNpbWFsc190b2tlbikvY29zdE9mT25lVG9rZW4pLV9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQ7CQkJCQkKCQkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7CgkJCQl2YWx1ZV9zZW5kID0gKChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKTsKCQkJfQoKCQkJX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudCAtPSBjb3VudF90b2tlbnM7CgkJCV9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQgKz0gY291bnRfdG9rZW5zOwoJCX0KCgkJaWYodmFsdWVfc2VuZD4wKXsKCQkJaWYod2FsbGV0X0lDTy5zZW5kKHZhbHVlX3NlbmQpPT1mYWxzZSkgdGhyb3c7CgkJfQoKCQlpZihjb3VudF90b2tlbnM+MCl7CgkJCVRva2VuQnV5KG1zZy5zZW5kZXIsIGNvdW50X3Rva2Vucyk7CgkJfQoKCQlpZihfYmFsYW5jZXNbd2FsbGV0X0lDT10udG9rZW5zX2NvdW50ID09IDApewoJCQllbmFibGVJQ08gPSBmYWxzZTsKCQl9Cgl9CgoJZnVuY3Rpb24gZ2V0TGlzdEFkZHJlc3NIb2xkZXJzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10pewoJCXJldHVybiBsaXN0QWRkckhvbGRlcnM7Cgl9CgoJZnVuY3Rpb24gZ2V0Q291bnRIb2xkZXJzKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKCQlyZXR1cm4gbGlzdEFkZHJIb2xkZXJzLmxlbmd0aDsKCX0KCglmdW5jdGlvbiBnZXRJdGVtSG9sZGVycyh1aW50MjU2IGluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewoJCWlmKGluZGV4ID49IGxpc3RBZGRySG9sZGVycy5sZW5ndGgpIHJldHVybiBhZGRyZXNzKDB4MCk7CgkJZWxzZSByZXR1cm4gbGlzdEFkZHJIb2xkZXJzW2luZGV4XTsKCX0KfQ=='.
	

]
