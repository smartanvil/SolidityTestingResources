Class {
	#name : #SRT548fe7c07062954a1930a1df08c9ee24fe3cc30a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT548fe7c07062954a1930a1df08c9ee24fe3cc30a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CgogIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0T3duZXI7CgogIGV2ZW50IENvbnRyYWN0T3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgY29udHJhY3RPd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5Q29udHJhY3RPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cmFjdE93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckNvbnRyYWN0T3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgcmVxdWlyZShfbmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBDb250cmFjdE93bmVyc2hpcFRyYW5zZmVycmVkKGNvbnRyYWN0T3duZXIsIF9uZXdPd25lcik7CiAgICBjb250cmFjdE93bmVyID0gX25ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBwYXlvdXRGcm9tQ29udHJhY3QoKSBwdWJsaWMgb25seUNvbnRyYWN0T3duZXIgewogICAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfSAgCgp9CgovLy8gQHRpdGxlIEludGVyZmFjZSBmb3IgY29udHJhY3RzIGNvbmZvcm1pbmcgdG8gRVJDLTcyMTogTm9uLUZ1bmdpYmxlIFRva2VucwovLy8gQGF1dGhvciBEaWV0ZXIgU2hpcmxleSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjVlM2EzYjJhM2IxZTNmMjYzNzMxMzMyNDNiMzA3MDNkMzEiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PiAoaHR0cHM6Ly9naXRodWIuY29tL2RldGUpCmNvbnRyYWN0IEVSQzcyMSB7CiAgLy8gUmVxdWlyZWQgbWV0aG9kcwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgYXBwcm92ZWQsIHVpbnQyNTYgdG9rZW5JZCk7CgogIC8vIE9wdGlvbmFsCiAgLy8gZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBuYW1lKTsKICAvLyBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgc3ltYm9sKTsKICAvLyBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IHRva2VuSWQpOwogIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwp9Cgpjb250cmFjdCBDcnlwdG9Ecmlua3MgaXMgRVJDNzIxLCBPd25hYmxlIHsKCiAgZXZlbnQgRHJpbmtDcmVhdGVkKHVpbnQyNTYgdG9rZW5JZCwgc3RyaW5nIG5hbWUsIGFkZHJlc3Mgb3duZXIpOwogIGV2ZW50IFRva2VuU29sZCh1aW50MjU2IHRva2VuSWQsIHVpbnQyNTYgb2xkUHJpY2UsIHVpbnQyNTYgbmV3UHJpY2UsIGFkZHJlc3MgcHJldk93bmVyLCBhZGRyZXNzIHdpbm5lciwgc3RyaW5nIG5hbWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIkNyeXB0b0RyaW5rcyI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiRHJpbmtzVG9rZW4iOwoKICB1aW50MjU2IHByaXZhdGUgc3RhcnRpbmdQcmljZSA9IDAuMDIgZXRoZXI7CiAgCiAgdWludDI1NiBwcml2YXRlIHN0YXJ0VGltZSA9IG5vdzsKCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgZHJpbmtJZFRvT3duZXI7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBkcmlua0lkVG9BcHByb3ZlZDsKCiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGRyaW5rSWRUb1ByaWNlOwoKICAvKioqIERBVEFUWVBFUyAqKiovCiAgc3RydWN0IERyaW5rIHsKICAgIHN0cmluZyBuYW1lOwogIH0KCiAgRHJpbmtbXSBwcml2YXRlIGRyaW5rczsKCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKICAgIGRyaW5rSWRUb0FwcHJvdmVkW190b2tlbklkXSA9IF90bzsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsgLy9FUkM3MjEKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVPbmVEcmluayhzdHJpbmcgX25hbWUpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICBfY3JlYXRlRHJpbmsoX25hbWUsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlTWFueURyaW5rcygpIHB1YmxpYyBvbmx5Q29udHJhY3RPd25lciB7CiAgICAgdWludDI1NiB0b3RhbERyaW5rcyA9IHRvdGFsU3VwcGx5KCk7CgkgCiAgICAgcmVxdWlyZSAodG90YWxEcmlua3MgPCAxKTsKCSAKIAkgX2NyZWF0ZURyaW5rKCJCYXJtZW4iLCBhZGRyZXNzKHRoaXMpLCAxIGV0aGVyKTsKIAkgX2NyZWF0ZURyaW5rKCJWb2RrYSIsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwoJIF9jcmVhdGVEcmluaygiV2luZSIsIGFkZHJlc3ModGhpcyksIHN0YXJ0aW5nUHJpY2UpOwoJIF9jcmVhdGVEcmluaygiQ29nbmFjIiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJNYXJ0aW5pIiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJCZWVyIiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJUZXF1aWxhIiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJXaGlza2V5IiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJCYWlsZXlzIiwgYWRkcmVzcyh0aGlzKSwgc3RhcnRpbmdQcmljZSk7CgkgX2NyZWF0ZURyaW5rKCJDaGFtcGFnbmUiLCBhZGRyZXNzKHRoaXMpLCBzdGFydGluZ1ByaWNlKTsKICB9CiAgCiAgZnVuY3Rpb24gZ2V0RHJpbmsodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIGRyaW5rTmFtZSwgdWludDI1NiBzZWxsaW5nUHJpY2UsIGFkZHJlc3Mgb3duZXIpIHsKICAgIERyaW5rIHN0b3JhZ2UgZHJpbmsgPSBkcmlua3NbX3Rva2VuSWRdOwogICAgZHJpbmtOYW1lID0gZHJpbmsubmFtZTsKICAgIHNlbGxpbmdQcmljZSA9IGRyaW5rSWRUb1ByaWNlW190b2tlbklkXTsKICAgIG93bmVyID0gZHJpbmtJZFRvT3duZXJbX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gaW1wbGVtZW50c0VSQzcyMSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgeyAvL0VSQzcyMQogICAgcmV0dXJuIE5BTUU7CiAgfQoKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsgLy9FUkM3MjEKICAgIG93bmVyID0gZHJpbmtJZFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogIC8vIEFsbG93cyBzb21lb25lIHRvIHNlbmQgZXRoZXIgYW5kIG9idGFpbiB0aGUgdG9rZW4KICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgCglyZXF1aXJlIChub3cgLSBzdGFydFRpbWUgPj0gMTA4MDAgfHwgX3Rva2VuSWQ9PTApOyAvLzMgaG91cnMKCQogICAgYWRkcmVzcyBvbGRPd25lciA9IGRyaW5rSWRUb093bmVyW190b2tlbklkXTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwoKICAgIHVpbnQyNTYgc2VsbGluZ1ByaWNlID0gZHJpbmtJZFRvUHJpY2VbX3Rva2VuSWRdOwoKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbmV3T3duZXIpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHNlbGxpbmdQcmljZSk7CgogICAgdWludDI1NiBwYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgOSksIDEwKSk7IC8vOTAlIHRvIHByZXZpb3VzIG93bmVyCiAgICB1aW50MjU2IGJhcm1lbl9wYXltZW50ID0gdWludDI1NihTYWZlTWF0aC5kaXYoc2VsbGluZ1ByaWNlLCAxMCkpOyAvLzEwJSB0byBiYXJtZW4KCglhZGRyZXNzIGJhcm1lbiA9IG93bmVyT2YoMCk7CgkKICAgIC8vIE5leHQgcHJpY2Ugd2lsbCBpbiAyIHRpbWVzIG1vcmUgaWYgaXQgbGVzcyB0aGVuIDEgZXRoZXIuCglpZiAoc2VsbGluZ1ByaWNlID49IDEgZXRoZXIpCgkJZHJpbmtJZFRvUHJpY2VbX3Rva2VuSWRdID0gdWludDI1NihTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMyksIDIpKTsKCWVsc2UgCQoJCWRyaW5rSWRUb1ByaWNlW190b2tlbklkXSA9IHVpbnQyNTYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMikpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKCiAgICAvLyBQYXkgcHJldmlvdXMgdG9rZW5Pd25lciBpZiBvd25lciBpcyBub3QgY29udHJhY3QKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOyAvLwogICAgfQoKICAgIC8vIFBheSAxMCUgdG8gYmFybWVuLCBpZiBkcmluayBzb2xkCgkvLyB0b2tlbiAwIG5vdCBkcmluaywgaXRzIGJhcm1lbgogICAgaWYgKF90b2tlbklkID4gMCkgewogICAgICBiYXJtZW4udHJhbnNmZXIoYmFybWVuX3BheW1lbnQpOyAvLwogICAgfQoKICAgIFRva2VuU29sZChfdG9rZW5JZCwgc2VsbGluZ1ByaWNlLCBkcmlua0lkVG9QcmljZVtfdG9rZW5JZF0sIG9sZE93bmVyLCBuZXdPd25lciwgZHJpbmtzW190b2tlbklkXS5uYW1lKTsKCQogICAgaWYgKG1zZy52YWx1ZSA+IHNlbGxpbmdQcmljZSkgeyAvL2lmIGV4Y2VzcyBwYXkKCSAgICB1aW50MjU2IHB1cmNoYXNlRXhjZXNzID0gU2FmZU1hdGguc3ViKG1zZy52YWx1ZSwgc2VsbGluZ1ByaWNlKTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKCX0KICB9CgogIGZ1bmN0aW9uIHNlY29uZHNBZnRlclN0YXJ0KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgeyAvL0VSQzcyMQogICAgcmV0dXJuIHVpbnQyNTYobm93IC0gc3RhcnRUaW1lKTsKICB9CiAgCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7IC8vRVJDNzIxCiAgICByZXR1cm4gU1lNQk9MOwogIH0KCgogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsgLy9FUkM3MjEKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRkcmVzcyBvbGRPd25lciA9IGRyaW5rSWRUb093bmVyW190b2tlbklkXTsKCiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChuZXdPd25lcikpOwogICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gcHJpY2VPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHByaWNlKSB7IC8vZm9yIHdlYiBzaXRlIHZpZXcKICAgIHJldHVybiBkcmlua0lkVG9QcmljZVtfdG9rZW5JZF07CiAgfQogIAogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7IC8vZm9yIHdlYiBzaXRlIHZpZXcKICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwogICAgaWYgKHRva2VuQ291bnQgPT0gMCkgewogICAgICAgIC8vIFJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgIH0gZWxzZSB7CiAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgdWludDI1NiB0b3RhbERyaW5rcyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwoKICAgICAgdWludDI1NiBkcmlua0lkOwogICAgICBmb3IgKGRyaW5rSWQgPSAwOyBkcmlua0lkIDw9IHRvdGFsRHJpbmtzOyBkcmlua0lkKyspIHsKICAgICAgICBpZiAoZHJpbmtJZFRvT3duZXJbZHJpbmtJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0SW5kZXhdID0gZHJpbmtJZDsKICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsgLy9FUkM3MjEKICAgIHJldHVybiBkcmlua3MubGVuZ3RoOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCglfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7IC8vRVJDNzIxCiAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYXBwcm92ZWQoX3RvLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgoKICAvKiBQUklWQVRFIEZVTkNUSU9OUyAqLwogIGZ1bmN0aW9uIF9hZGRyZXNzTm90TnVsbChhZGRyZXNzIF90bykgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBfdG8gIT0gYWRkcmVzcygwKTsKICB9CgogIGZ1bmN0aW9uIF9hcHByb3ZlZChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBkcmlua0lkVG9BcHByb3ZlZFtfdG9rZW5JZF0gPT0gX3RvOwogIH0KCiAgZnVuY3Rpb24gX2NyZWF0ZURyaW5rKHN0cmluZyBfbmFtZSwgYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIERyaW5rIG1lbW9yeSBfZHJpbmsgPSBEcmluayh7CiAgICAgIG5hbWU6IF9uYW1lCiAgICB9KTsKICAgIHVpbnQyNTYgbmV3RHJpbmtJZCA9IGRyaW5rcy5wdXNoKF9kcmluaykgLSAxOwoKICAgIHJlcXVpcmUobmV3RHJpbmtJZCA9PSB1aW50MjU2KHVpbnQzMihuZXdEcmlua0lkKSkpOyAvL2NoZWNrIG1heGltdW0gbGltaXQgb2YgdG9rZW5zCgogICAgRHJpbmtDcmVhdGVkKG5ld0RyaW5rSWQsIF9uYW1lLCBfb3duZXIpOwoKICAgIGRyaW5rSWRUb1ByaWNlW25ld0RyaW5rSWRdID0gX3ByaWNlOwoKICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfb3duZXIsIG5ld0RyaW5rSWQpOwogIH0KCiAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2hlY2tlZEFkZHIsIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gX2NoZWNrZWRBZGRyID09IGRyaW5rSWRUb093bmVyW190b2tlbklkXTsKICB9CgpmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICBkcmlua0lkVG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CgogICAgLy8gV2hlbiBjcmVhdGluZyBuZXcgZHJpbmtzIF9mcm9tIGlzIDB4MCwgYnV0IHdlIGNhbid0IGFjY291bnQgdGhhdCBhZGRyZXNzLgogICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgLy8gY2xlYXIgYW55IHByZXZpb3VzbHkgYXBwcm92ZWQgb3duZXJzaGlwIGV4Y2hhbmdlCiAgICAgIGRlbGV0ZSBkcmlua0lkVG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICB9CgogICAgLy8gRW1pdCB0aGUgdHJhbnNmZXIgZXZlbnQuCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQp9'.
	

]
