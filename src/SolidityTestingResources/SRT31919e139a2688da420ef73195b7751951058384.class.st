Class {
	#name : #SRT31919e139a2688da420ef73195b7751951058384,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT31919e139a2688da420ef73195b7751951058384 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gVGhlIHRva2VuIGJlaW5nIHNvbGQKICBNaW50YWJsZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgLy8gc3RhcnQgYW5kIGVuZCBibG9jayB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsKICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsKCiAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogIHVpbnQyNTYgcHVibGljIHJhdGU7CgogIC8vIGFtb3VudCBvZiByYWlzZWQgbW9uZXkgaW4gd2VpCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAvKioKICAgKiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovIAogIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgoKICBmdW5jdGlvbiBDcm93ZHNhbGUodWludDI1NiBfc3RhcnRCbG9jaywgdWludDI1NiBfZW5kQmxvY2ssIHVpbnQyNTYgX3JhdGUsIGFkZHJlc3MgX3dhbGxldCkgewogICAgcmVxdWlyZShfc3RhcnRCbG9jayA+PSBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZShfZW5kQmxvY2sgPj0gX3N0YXJ0QmxvY2spOwogICAgcmVxdWlyZShfcmF0ZSA+IDApOwogICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CgogICAgdG9rZW4gPSBjcmVhdGVUb2tlbkNvbnRyYWN0KCk7CiAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsKICAgIHJhdGUgPSBfcmF0ZTsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgfQoKICAvLyBjcmVhdGVzIHRoZSB0b2tlbiB0byBiZSBzb2xkLiAKICAvLyBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBoYXZlIGNyb3dkc2FsZSBvZiBhIHNwZWNpZmljIG1pbnRhYmxlIHRva2VuLgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChNaW50YWJsZVRva2VuKSB7CiAgICByZXR1cm4gbmV3IE1pbnRhYmxlVG9rZW4oKTsKICB9CgoKICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgfQoKICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcGF5YWJsZSB7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CgogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZSk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgdG9rZW4ubWludChiZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zKTsKCiAgICBmb3J3YXJkRnVuZHMoKTsKICB9CgogIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGZ1bmQgY29sbGVjdGlvbiB3YWxsZXQKICAvLyBvdmVycmlkZSB0byBjcmVhdGUgY3VzdG9tIGZ1bmQgZm9yd2FyZGluZyBtZWNoYW5pc21zCiAgZnVuY3Rpb24gZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGNhbiBidXkgdG9rZW5zCiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQyNTYgY3VycmVudCA9IGJsb2NrLm51bWJlcjsKICAgIGJvb2wgd2l0aGluUGVyaW9kID0gY3VycmVudCA+PSBzdGFydEJsb2NrICYmIGN1cnJlbnQgPD0gZW5kQmxvY2s7CiAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IG1zZy52YWx1ZSAhPSAwOwogICAgcmV0dXJuIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2U7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBibG9jay5udW1iZXIgPiBlbmRCbG9jazsKICB9CgoKfQoKY29udHJhY3QgV2hpdGVMaXN0Q3Jvd2RzYWxlIGlzIENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHVpbnQyNTYgcHVibGljIHdoaXRlTGlzdEVuZEJsb2NrOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpc1doaXRlTGlzdGVkOwoKICBldmVudCBJbnZlc3RvcldoaXRlTGlzdEFkZGl0aW9uKGFkZHJlc3MgaW52ZXN0b3IpOwoKICBmdW5jdGlvbiBXaGl0ZUxpc3RDcm93ZHNhbGUodWludDI1NiBfd2hpdGVMaXN0RW5kQmxvY2spIHsKICAgIHJlcXVpcmUoX3doaXRlTGlzdEVuZEJsb2NrID4gc3RhcnRCbG9jayk7CiAgICB3aGl0ZUxpc3RFbmRCbG9jayA9IF93aGl0ZUxpc3RFbmRCbG9jazsKICB9CgogIGZ1bmN0aW9uIGFkZFRvV2hpdGVMaXN0KGFkZHJlc3MgaW52ZXN0b3IpIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXJ0QmxvY2sgPiBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZSghaXNXaGl0ZUxpc3RlZFtpbnZlc3Rvcl0pOwogICAgcmVxdWlyZShpbnZlc3RvciAhPSAwKTsKCiAgICBpc1doaXRlTGlzdGVkW2ludmVzdG9yXSA9IHRydWU7CiAgICBJbnZlc3RvcldoaXRlTGlzdEFkZGl0aW9uKGludmVzdG9yKTsKICB9CgogIC8vIG92ZXJyaWRpbmcgQ3Jvd2RzYWxlI2J1eVRva2VucyB0byBhZGQgZXh0cmEgd2hpdGVsaXN0IGxvZ2ljCiAgLy8gd2UgZGlkIG5vdCB1c2UgdmFsaWRQdXJjaGFzZSBiZWNhdXNlIHdlIGNhbm5vdCBnZXQgdGhlIGJlbmVmaWNpYXJ5IGFkZHJlc3MKICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcGF5YWJsZSB7CiAgICByZXF1aXJlKHZhbGlkV2hpdGVMaXN0ZWRQdXJjaGFzZShiZW5lZmljaWFyeSkpOwogICAgcmV0dXJuIHN1cGVyLmJ1eVRva2VucyhiZW5lZmljaWFyeSk7CiAgfQoKICBmdW5jdGlvbiB2YWxpZFdoaXRlTGlzdGVkUHVyY2hhc2UoYWRkcmVzcyBiZW5lZmljaWFyeSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIGlzV2hpdGVMaXN0ZWRbYmVuZWZpY2lhcnldIHx8IHdoaXRlTGlzdEVuZEJsb2NrIDw9IGJsb2NrLm51bWJlcjsKICB9Cgp9Cgpjb250cmFjdCBCb251c1doaXRlTGlzdENyb3dkc2FsZSBpcyBXaGl0ZUxpc3RDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IGJvbnVzV2hpdGVMaXN0UmF0ZTsKCiAgZXZlbnQgQm9udXNXaGl0ZUxpc3QoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIGZ1bmN0aW9uIEJvbnVzV2hpdGVMaXN0Q3Jvd2RzYWxlKHVpbnQyNTYgX2JvbnVzV2hpdGVMaXN0UmF0ZSkgewogICAgcmVxdWlyZShfYm9udXNXaGl0ZUxpc3RSYXRlID4gMCk7CiAgICBib251c1doaXRlTGlzdFJhdGUgPSBfYm9udXNXaGl0ZUxpc3RSYXRlOwogIH0KCiAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgewogICAgc3VwZXIuYnV5VG9rZW5zKGJlbmVmaWNpYXJ5KTsKCiAgICBpZih3aGl0ZUxpc3RFbmRCbG9jayA+IGJsb2NrLm51bWJlciAmJiBpc1doaXRlTGlzdGVkW2JlbmVmaWNpYXJ5XSl7CiAgICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgICB1aW50MjU2IGJvbnVzVG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKS5tdWwoYm9udXNXaGl0ZUxpc3RSYXRlKS5kaXYoMTAwKTsKICAgICAgdG9rZW4ubWludChiZW5lZmljaWFyeSwgYm9udXNUb2tlbnMpOwogICAgICBCb251c1doaXRlTGlzdChtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBib251c1Rva2Vucyk7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgUmVmZXJlZENyb3dkc2FsZSBpcyBXaGl0ZUxpc3RDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gYWRkcmVzcykgcmVmZXJyYWxzOwoKICBldmVudCBSZWZlcnJlZEludmVzdG9yQWRkaXRpb24oYWRkcmVzcyB3aGl0ZUxpc3RlZEludmVzdG9yLCBhZGRyZXNzIHJlZmVycmVkSW52ZXN0b3IpOwoKICBmdW5jdGlvbiBSZWZlcmVkQ3Jvd2RzYWxlKCkge30KCiAgZnVuY3Rpb24gYWRkVG9SZWZlcnJhbHMoYWRkcmVzcyB3aGl0ZUxpc3RlZEludmVzdG9yLCBhZGRyZXNzIHJlZmVycmVkSW52ZXN0b3IpIHB1YmxpYyB7CiAgICByZXF1aXJlKGlzV2hpdGVMaXN0ZWRbd2hpdGVMaXN0ZWRJbnZlc3Rvcl0pOwogICAgcmVxdWlyZSghaXNXaGl0ZUxpc3RlZFtyZWZlcnJlZEludmVzdG9yXSk7CiAgICByZXF1aXJlKHdoaXRlTGlzdGVkSW52ZXN0b3IgIT0gMCk7CiAgICByZXF1aXJlKHJlZmVycmVkSW52ZXN0b3IgIT0gMCk7CiAgICByZXF1aXJlKHJlZmVycmFsc1tyZWZlcnJlZEludmVzdG9yXSA9PSAweDApOwoKICAgIHJlZmVycmFsc1tyZWZlcnJlZEludmVzdG9yXSA9IHdoaXRlTGlzdGVkSW52ZXN0b3I7CiAgICBSZWZlcnJlZEludmVzdG9yQWRkaXRpb24od2hpdGVMaXN0ZWRJbnZlc3RvciwgcmVmZXJyZWRJbnZlc3Rvcik7CiAgfQoKICBmdW5jdGlvbiB2YWxpZFdoaXRlTGlzdGVkUHVyY2hhc2UoYWRkcmVzcyBiZW5lZmljaWFyeSkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnZhbGlkV2hpdGVMaXN0ZWRQdXJjaGFzZShiZW5lZmljaWFyeSkgfHwgcmVmZXJyYWxzW2JlbmVmaWNpYXJ5XSAhPSAweDA7CiAgfQoKfQoKY29udHJhY3QgQm9udXNSZWZlcnJlckNyb3dkc2FsZSBpcyBSZWZlcmVkQ3Jvd2RzYWxlLCBCb251c1doaXRlTGlzdENyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHVpbnQyNTYgYm9udXNSZWZlcnJlZFJhdGU7CgogIGV2ZW50IEJvbnVzUmVmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIGZ1bmN0aW9uIEJvbnVzUmVmZXJyZXJDcm93ZHNhbGUodWludDI1NiBfYm9udXNSZWZlcnJlZFJhdGUpIHsKICAgIHJlcXVpcmUoX2JvbnVzUmVmZXJyZWRSYXRlID4gMCAmJiBfYm9udXNSZWZlcnJlZFJhdGUgPCBib251c1doaXRlTGlzdFJhdGUpOwogICAgYm9udXNSZWZlcnJlZFJhdGUgPSBfYm9udXNSZWZlcnJlZFJhdGU7CiAgfQoKICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcGF5YWJsZSB7CiAgICBzdXBlci5idXlUb2tlbnMoYmVuZWZpY2lhcnkpOwoKICAgIGlmKHdoaXRlTGlzdEVuZEJsb2NrID4gYmxvY2subnVtYmVyICYmIHJlZmVycmFsc1tiZW5lZmljaWFyeV0gIT0gMHgwKXsKICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgIHVpbnQyNTYgYm9udXNSZWZlcnJlclRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZSkubXVsKGJvbnVzV2hpdGVMaXN0UmF0ZSAtIGJvbnVzUmVmZXJyZWRSYXRlKS5kaXYoMTAwKTsKICAgICAgdWludDI1NiBib251c1JlZmVycmVkVG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKS5tdWwoYm9udXNSZWZlcnJlZFJhdGUpLmRpdigxMDApOwogICAgICB0b2tlbi5taW50KGJlbmVmaWNpYXJ5LCBib251c1JlZmVycmVkVG9rZW5zKTsKICAgICAgdG9rZW4ubWludChyZWZlcnJhbHNbYmVuZWZpY2lhcnldLCBib251c1JlZmVycmVyVG9rZW5zKTsKICAgICAgQm9udXNXaGl0ZUxpc3QobXNnLnNlbmRlciwgcmVmZXJyYWxzW2JlbmVmaWNpYXJ5XSwgd2VpQW1vdW50LCBib251c1JlZmVycmVyVG9rZW5zKTsKICAgICAgQm9udXNSZWZlcnJlZChtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBib251c1JlZmVycmVkVG9rZW5zKTsKICAgIH0KICB9Cgp9Cgpjb250cmFjdCBQYXJ0aWFsT3duZXJzaGlwQ3Jvd2RzYWxlIGlzIEJvbnVzUmVmZXJyZXJDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHBlcmNlbnRUb0ludmVzdG9yOwoKICBldmVudCBDb21wYW55VG9rZW5Jc3N1ZWQoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgogIGZ1bmN0aW9uIFBhcnRpYWxPd25lcnNoaXBDcm93ZHNhbGUodWludDI1NiBfcGVyY2VudFRvSW52ZXN0b3IpIHsKICAgIHJlcXVpcmUoX3BlcmNlbnRUb0ludmVzdG9yICE9IDApOwogICAgcGVyY2VudFRvSW52ZXN0b3IgPSBfcGVyY2VudFRvSW52ZXN0b3I7CiAgfQoKICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcGF5YWJsZSB7CiAgICBzdXBlci5idXlUb2tlbnMoYmVuZWZpY2lhcnkpOwogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICB1aW50MjU2IGludmVzdG9yVG9rZW5zID0gd2VpQW1vdW50Lm11bChyYXRlKTsKICAgIHVpbnQyNTYgY29tcGFueVRva2VucyA9IGludmVzdG9yVG9rZW5zLm11bCgxMDAgLSBwZXJjZW50VG9JbnZlc3RvcikuZGl2KHBlcmNlbnRUb0ludmVzdG9yKTsKICAgIGlmKHdoaXRlTGlzdEVuZEJsb2NrID4gYmxvY2subnVtYmVyICYmIChyZWZlcnJhbHNbYmVuZWZpY2lhcnldICE9IDB4MCB8fCBpc1doaXRlTGlzdGVkW2JlbmVmaWNpYXJ5XSkpewogICAgICBjb21wYW55VG9rZW5zID0gY29tcGFueVRva2Vucy5zdWIoaW52ZXN0b3JUb2tlbnMubXVsKGJvbnVzV2hpdGVMaXN0UmF0ZSkuZGl2KDEwMCkpOwogICAgfQoKICAgIHRva2VuLm1pbnQod2FsbGV0LCBjb21wYW55VG9rZW5zKTsKICAgIENvbXBhbnlUb2tlbklzc3VlZChtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBjb21wYW55VG9rZW5zKTsKICB9Cgp9Cgpjb250cmFjdCBDYXBwZWRDcm93ZHNhbGUgaXMgQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgdWludDI1NiBwdWJsaWMgY2FwOwoKICBmdW5jdGlvbiBDYXBwZWRDcm93ZHNhbGUodWludDI1NiBfY2FwKSB7CiAgICByZXF1aXJlKF9jYXAgPiAwKTsKICAgIGNhcCA9IF9jYXA7CiAgfQoKICAvLyBvdmVycmlkaW5nIENyb3dkc2FsZSN2YWxpZFB1cmNoYXNlIHRvIGFkZCBleHRyYSBjYXAgbG9naWMKICAvLyBAcmV0dXJuIHRydWUgaWYgaW52ZXN0b3JzIGNhbiBidXkgYXQgdGhlIG1vbWVudAogIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBib29sIHdpdGhpbkNhcCA9IHdlaVJhaXNlZC5hZGQobXNnLnZhbHVlKSA8PSBjYXA7CiAgICByZXR1cm4gc3VwZXIudmFsaWRQdXJjaGFzZSgpICYmIHdpdGhpbkNhcDsKICB9CgogIC8vIG92ZXJyaWRpbmcgQ3Jvd2RzYWxlI2hhc0VuZGVkIHRvIGFkZCBjYXAgbG9naWMKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgY2FwUmVhY2hlZCA9IHdlaVJhaXNlZCA+PSBjYXA7CiAgICByZXR1cm4gc3VwZXIuaGFzRW5kZWQoKSB8fCBjYXBSZWFjaGVkOwogIH0KCn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgRmluYWxpemFibGVDcm93ZHNhbGUgaXMgQ3Jvd2RzYWxlLCBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQgPSBmYWxzZTsKCiAgZXZlbnQgRmluYWxpemVkKCk7CgogIC8vIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgY3Jvd2RzYWxlIGVuZHMsIHRvIGRvCiAgLy8gc29tZSBleHRyYSBmaW5hbGl6YXRpb24gd29yawogIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgIHJlcXVpcmUoaGFzRW5kZWQoKSk7CgogICAgZmluYWxpemF0aW9uKCk7CiAgICBGaW5hbGl6ZWQoKTsKICAgIAogICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogIH0KCiAgLy8gZW5kIHRva2VuIG1pbnRpbmcgb24gZmluYWxpemF0aW9uCiAgLy8gb3ZlcnJpZGUgdGhpcyB3aXRoIGN1c3RvbSBsb2dpYyBpZiBuZWVkZWQKICBmdW5jdGlvbiBmaW5hbGl6YXRpb24oKSBpbnRlcm5hbCB7CiAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgfQoKCgp9Cgpjb250cmFjdCBSZWZ1bmRWYXVsdCBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgZW51bSBTdGF0ZSB7IEFjdGl2ZSwgUmVmdW5kaW5nLCBDbG9zZWQgfQoKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0ZWQ7CiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwogIFN0YXRlIHB1YmxpYyBzdGF0ZTsKCiAgZXZlbnQgQ2xvc2VkKCk7CiAgZXZlbnQgUmVmdW5kc0VuYWJsZWQoKTsKICBldmVudCBSZWZ1bmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgd2VpQW1vdW50KTsKCiAgZnVuY3Rpb24gUmVmdW5kVmF1bHQoYWRkcmVzcyBfd2FsbGV0KSB7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gMHgwKTsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICBzdGF0ZSA9IFN0YXRlLkFjdGl2ZTsKICB9CgogIGZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyBpbnZlc3Rvcikgb25seU93bmVyIHBheWFibGUgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IGRlcG9zaXRlZFtpbnZlc3Rvcl0uYWRkKG1zZy52YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBjbG9zZSgpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKICAgIENsb3NlZCgpOwogICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBlbmFibGVSZWZ1bmRzKCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgIHN0YXRlID0gU3RhdGUuUmVmdW5kaW5nOwogICAgUmVmdW5kc0VuYWJsZWQoKTsKICB9CgogIGZ1bmN0aW9uIHJlZnVuZChhZGRyZXNzIGludmVzdG9yKSB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLlJlZnVuZGluZyk7CiAgICB1aW50MjU2IGRlcG9zaXRlZFZhbHVlID0gZGVwb3NpdGVkW2ludmVzdG9yXTsKICAgIGRlcG9zaXRlZFtpbnZlc3Rvcl0gPSAwOwogICAgaW52ZXN0b3IudHJhbnNmZXIoZGVwb3NpdGVkVmFsdWUpOwogICAgUmVmdW5kZWQoaW52ZXN0b3IsIGRlcG9zaXRlZFZhbHVlKTsKICB9Cn0KCmNvbnRyYWN0IFJlZnVuZGFibGVDcm93ZHNhbGUgaXMgRmluYWxpemFibGVDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBtaW5pbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgaW4gd2VpcwogIHVpbnQyNTYgcHVibGljIGdvYWw7CgogIC8vIHJlZnVuZCB2YXVsdCB1c2VkIHRvIGhvbGQgZnVuZHMgd2hpbGUgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcKICBSZWZ1bmRWYXVsdCBwdWJsaWMgdmF1bHQ7CgogIGZ1bmN0aW9uIFJlZnVuZGFibGVDcm93ZHNhbGUodWludDI1NiBfZ29hbCkgewogICAgcmVxdWlyZShfZ29hbCA+IDApOwogICAgdmF1bHQgPSBuZXcgUmVmdW5kVmF1bHQod2FsbGV0KTsKICAgIGdvYWwgPSBfZ29hbDsKICB9CgogIC8vIFdlJ3JlIG92ZXJyaWRpbmcgdGhlIGZ1bmQgZm9yd2FyZGluZyBmcm9tIENyb3dkc2FsZS4KICAvLyBJbiBhZGRpdGlvbiB0byBzZW5kaW5nIHRoZSBmdW5kcywgd2Ugd2FudCB0byBjYWxsCiAgLy8gdGhlIFJlZnVuZFZhdWx0IGRlcG9zaXQgZnVuY3Rpb24KICBmdW5jdGlvbiBmb3J3YXJkRnVuZHMoKSBpbnRlcm5hbCB7CiAgICB2YXVsdC5kZXBvc2l0LnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlcik7CiAgfQoKICAvLyBpZiBjcm93ZHNhbGUgaXMgdW5zdWNjZXNzZnVsLCBpbnZlc3RvcnMgY2FuIGNsYWltIHJlZnVuZHMgaGVyZQogIGZ1bmN0aW9uIGNsYWltUmVmdW5kKCkgewogICAgcmVxdWlyZShpc0ZpbmFsaXplZCk7CiAgICByZXF1aXJlKCFnb2FsUmVhY2hlZCgpKTsKCiAgICB2YXVsdC5yZWZ1bmQobXNnLnNlbmRlcik7CiAgfQoKICAvLyB2YXVsdCBmaW5hbGl6YXRpb24gdGFzaywgY2FsbGVkIHdoZW4gb3duZXIgY2FsbHMgZmluYWxpemUoKQogIGZ1bmN0aW9uIGZpbmFsaXphdGlvbigpIGludGVybmFsIHsKICAgIGlmIChnb2FsUmVhY2hlZCgpKSB7CiAgICAgIHZhdWx0LmNsb3NlKCk7CiAgICB9IGVsc2UgewogICAgICB2YXVsdC5lbmFibGVSZWZ1bmRzKCk7CiAgICB9CgogICAgc3VwZXIuZmluYWxpemF0aW9uKCk7CiAgfQoKICBmdW5jdGlvbiBnb2FsUmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gd2VpUmFpc2VkID49IGdvYWw7CiAgfQoKfQoKY29udHJhY3QgRGVtZXRlckNyb3dkc2FsZSBpcwogIENyb3dkc2FsZSwKICBDYXBwZWRDcm93ZHNhbGUsCiAgUmVmdW5kYWJsZUNyb3dkc2FsZSwKICBXaGl0ZUxpc3RDcm93ZHNhbGUsCiAgUmVmZXJlZENyb3dkc2FsZSwKICBCb251c1doaXRlTGlzdENyb3dkc2FsZSwKICBCb251c1JlZmVycmVyQ3Jvd2RzYWxlLAogIFBhcnRpYWxPd25lcnNoaXBDcm93ZHNhbGUgewoKICAgIHVpbnQyNTYgZW5kQmxvY2s7CgogIGZ1bmN0aW9uIERlbWV0ZXJDcm93ZHNhbGUoCiAgICB1aW50MjU2IF9zdGFydEJsb2NrLAogICAgdWludDI1NiBfZW5kQmxvY2ssCiAgICB1aW50MjU2IF9yYXRlLAogICAgYWRkcmVzcyBfd2FsbGV0LAogICAgdWludDI1NiBfY2FwLAogICAgdWludDI1NiBfZ29hbCwKICAgIHVpbnQyNTYgX3doaXRlTGlzdEVuZEJsb2NrLAogICAgdWludDI1NiBfYm9udXNXaGl0ZUxpc3RSYXRlLAogICAgdWludDI1NiBfYm9udXNSZWZlcnJlZFJhdGUsCiAgICB1aW50MjU2IF9wZXJjZW50VG9JbnZlc3RvcgogICkKICAgIENyb3dkc2FsZShfc3RhcnRCbG9jaywgX2VuZEJsb2NrLCBfcmF0ZSwgX3dhbGxldCkKICAgIENhcHBlZENyb3dkc2FsZShfY2FwKQogICAgUmVmdW5kYWJsZUNyb3dkc2FsZShfZ29hbCkKICAgIFdoaXRlTGlzdENyb3dkc2FsZShfd2hpdGVMaXN0RW5kQmxvY2spCiAgICBSZWZlcmVkQ3Jvd2RzYWxlKCkKICAgIEJvbnVzV2hpdGVMaXN0Q3Jvd2RzYWxlKF9ib251c1doaXRlTGlzdFJhdGUpCiAgICBCb251c1JlZmVycmVyQ3Jvd2RzYWxlKF9ib251c1JlZmVycmVkUmF0ZSkKICAgIFBhcnRpYWxPd25lcnNoaXBDcm93ZHNhbGUoX3BlcmNlbnRUb0ludmVzdG9yKQogIHsKICAgIERlbWV0ZXJUb2tlbih0b2tlbikuc2V0RW5kQmxvY2soX2VuZEJsb2NrKTsKICB9CgogIC8vIGNyZWF0ZXMgdGhlIHRva2VuIHRvIGJlIHNvbGQuCiAgLy8gb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gaGF2ZSBjcm93ZHNhbGUgb2YgYSBzcGVjaWZpYyBNaW50YWJsZVRva2VuIHRva2VuLgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChNaW50YWJsZVRva2VuKSB7CiAgICByZXR1cm4gbmV3IERlbWV0ZXJUb2tlbigpOwogIH0KCn0KCmNvbnRyYWN0IERlbWV0ZXJDcm93ZHNhbGVJbnN0YW5jZSBpcyBEZW1ldGVyQ3Jvd2RzYWxlIHsKCiAgZnVuY3Rpb24gRGVtZXRlckNyb3dkc2FsZUluc3RhbmNlKCkgRGVtZXRlckNyb3dkc2FsZSgKICAgIDQxNjQ5ODksCiAgICA0MTc2OTg5LAogICAgMTAwMDAwMDAwMDAwMCwKICAgIDB4MTRmMDFlMDAwOTJhNWIwZEJENDM0MTQ3OTM1NDFkZjMxNjM2M0Q4MiwKICAgIDIwMDAwMDAwMDAwMDAwMDAwLAogICAgMTAwMDAwMDAwMDAwMDAwMDAsCiAgICA0MTY4OTg5LAogICAgNywKICAgIDMsCiAgICAzMAogICl7fQoKfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFRpbWVCbG9ja2VkVG9rZW4gaXMgRVJDMjAsIE93bmFibGUgewoKICB1aW50MjU2IGVuZEJsb2NrOwoKICAvKioKICAgKiBAZGV2IENoZWNrcyB3aGV0aGVyIGl0IGNhbiB0cmFuc2ZlciBvciBvdGhlcndpc2UgdGhyb3dzLgogICAqLwogIG1vZGlmaWVyIGNhblRyYW5zZmVyKCkgewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBlbmRCbG9jayk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gc2V0RW5kQmxvY2sodWludDI1NiBfZW5kQmxvY2spIG9ubHlPd25lciB7CiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsKICB9CgogIC8qKgogICAqIEBkZXYgQ2hlY2tzIG1vZGlmaWVyIGFuZCBhbGxvd3MgdHJhbnNmZXIgaWYgdG9rZW5zIGFyZSBub3QgbG9ja2VkLgogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2lldmUgdGhlIHRva2Vucy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgY2FuVHJhbnNmZXIgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBDaGVja3MgbW9kaWZpZXIgYW5kIGFsbG93cyB0cmFuc2ZlciBpZiB0b2tlbnMgYXJlIG5vdCBsb2NrZWQuCiAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHNlbmQgdGhlIHRva2Vucy4KICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2lldmUgdGhlIHRva2Vucy4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBjYW5UcmFuc2ZlciByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNpZXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBEZW1ldGVyVG9rZW4gaXMgTWludGFibGVUb2tlbiwgVGltZUJsb2NrZWRUb2tlbiB7CiAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkRlbWV0ZXIiOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkRNVCI7CiAgdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSAxODsKfQ=='.
	

]
