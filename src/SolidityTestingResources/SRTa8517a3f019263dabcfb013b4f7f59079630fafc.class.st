Class {
	#name : #SRTa8517a3f019263dabcfb013b4f7f59079630fafc,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa8517a3f019263dabcfb013b4f7f59079630fafc >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CiAKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgdG9rZW5CYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZSh0b2tlbkJhbGFuY2VzW21zZy5zZW5kZXJdPj1fdmFsdWUpOwogICAgdG9rZW5CYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRva2VuQmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICB0b2tlbkJhbGFuY2VzW190b10gPSB0b2tlbkJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIHRva2VuQmFsYW5jZXNbX293bmVyXTsKICB9CiAgCn0KCmNvbnRyYWN0IFJldm9sdXRpb25Db2luIGlzIEJhc2ljVG9rZW4sT3duYWJsZSB7CgogICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgCiAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJSLWV2b2x1dGlvbmNvaW4iOwogICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJSVkwiOwogICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICB1aW50MjU2IHB1YmxpYyBwcmVJY29CdXlQcmljZSA9IDIyMjIyMjIyMjIyMjIyMjsgICAvLyBwZXIgdG9rZW4gdGhlIHByaWNlIGlzIDIuMjIyMioxMF4tNCBldGgsIHRoaXMgcHJpY2UgaXMgZXF1aXZhbGVudCBpbiB3ZWkKICAgdWludDI1NiBwdWJsaWMgSWNvUHJpY2UgPSAxMDAwMDAwMDAwMDAwMDAwOwogICB1aW50MjU2IHB1YmxpYyBib251c1BoYXNlMSA9IDMwOwogICB1aW50MjU2IHB1YmxpYyBib251c1BoYXNlMiA9IDIwOwogICB1aW50MjU2IHB1YmxpYyBib251c1BoYXNlMyA9IDEwOwogICB1aW50MjU2IHB1YmxpYyBUT0tFTlNfU09MRDsKICAKICAgYWRkcmVzcyBwdWJsaWMgZXRoU3RvcmUgPSAweERkNjRFRjBjOGE0MWQ4YTE3RjA5Y2UyMjc5RDc5YjMzOTcxODRBMTA7CiAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gMTAwMDAwMDAwOwogICBldmVudCBEZWJ1ZyhzdHJpbmcgbWVzc2FnZSwgYWRkcmVzcyBhZGRyLCB1aW50MjU2IG51bWJlcik7CiAgIGV2ZW50IGxvZyhzdHJpbmcgbWVzc2FnZSwgdWludDI1NiBudW1iZXIpOwogICAvKioKICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBnaXZlcyBtc2cuc2VuZGVyIGFsbCBvZiBleGlzdGluZyB0b2tlbnMuCiAgICovCiAgIC8vVE9ETzogQ2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gUmV2b2x1dGlvbkNvaW4oKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gZXRoU3RvcmU7CiAgICAgICAgdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsKICAgICAgICB0b2tlbkJhbGFuY2VzW2V0aFN0b3JlXSA9IElOSVRJQUxfU1VQUExZICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsgICAvL1NpbmNlIHdlIGRpdmlkZWQgdGhlIHRva2VuIGludG8gMTBeMTggcGFydHMKICAgICAgICBUT0tFTlNfU09MRCA9IDA7CiAgICB9CiAgICAKICAgIAogICAgLy8gZmFsbGJhY2sgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYnV5IHRva2VucwogICAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAvLyByZXF1aXJlKG1zZy5zZW5kZXIgIT0gb3duZXIpOyAgIC8vb3duZXIgc2hvdWxkIG5vdCBiZSBidXlpbmcgYW55IHRva2VucwogICAgICAgIGJ1eShtc2cuc2VuZGVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FsY3VsYXRlVG9rZW5zKHVpbnQgYW10KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHRva2Vuc1lvdUNhbkdpdmUsIHVpbnQgcmV0dXJuQW1vdW50KSB7CiAgICAgICAgdWludCBib251cyA9IDA7CiAgICAgICAgdWludCB0b2tlbnNSZXF1aXJlZCA9IDA7CiAgICAgICAgdWludCB0b2tlbnNXaXRob3V0Qm9udXMgPSAwOwogICAgICAgIHVpbnQgcHJpY2VDaGFyZ2VkID0gMDsKICAgICAgICAKICAgICAgICAvL3ByZS1pY28gcGhhc2UKICAgICAgICBpZiAoVE9LRU5TX1NPTEQgPDQ1MDAwMDApCiAgICAgICAgewogICAgICAgICAgICB0b2tlbnNSZXF1aXJlZCA9IGFtdC5kaXYocHJlSWNvQnV5UHJpY2UpOwogICAgICAgICAgICBpZiAodG9rZW5zUmVxdWlyZWQgKyBUT0tFTlNfU09MRCA+IDQ1MDAwMDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2Vuc1lvdUNhbkdpdmUgPSA0NTAwMDAwIC0gVE9LRU5TX1NPTEQ7CiAgICAgICAgICAgICAgICByZXR1cm5BbW91bnQgPSB0b2tlbnNSZXF1aXJlZCAtIHRva2Vuc1lvdUNhbkdpdmU7CiAgICAgICAgICAgICAgICByZXR1cm5BbW91bnQgPSByZXR1cm5BbW91bnQubXVsKHByZUljb0J1eVByaWNlKTsKICAgICAgICAgICAgICAgIGxvZygiVG9rZW5zIGJlaW5nIGJvdWdodCBleGNlZWQgdGhlIGxpbWl0IG9mIHByZS1pY28uIFJldHVybmluZyByZW1haW5pbmcgYW1vdW50IixyZXR1cm5BbW91bnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW5zWW91Q2FuR2l2ZSA9IHRva2Vuc1JlcXVpcmVkOwogICAgICAgICAgICAgICAgcmV0dXJuQW1vdW50ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXF1aXJlICh0b2tlbnNZb3VDYW5HaXZlICsgVE9LRU5TX1NPTEQgPD0gNDUwMDAwMCk7CiAgICAgICAgfQogICAgICAgIC8vaWNvIHBoYXNlIDEgd2l0aCAzMCUgYm9udXMKICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PTQ1MDAwMDAgJiYgVE9LRU5TX1NPTEQgPDI0MDAwMDAwKQogICAgICAgIHsKICAgICAgICAgICAgIHRva2Vuc1JlcXVpcmVkID0gYW10LmRpdihJY29QcmljZSk7CiAgICAgICAgICAgICBib251cyA9IHRva2Vuc1JlcXVpcmVkLm11bChib251c1BoYXNlMSk7CiAgICAgICAgICAgICBib251cyA9IGJvbnVzLmRpdigxMDApOwogICAgICAgICAgICAgdG9rZW5zUmVxdWlyZWQgPSB0b2tlbnNSZXF1aXJlZC5hZGQoYm9udXMpOwogICAgICAgICAgICAgaWYgKHRva2Vuc1JlcXVpcmVkICsgVE9LRU5TX1NPTEQgPiAyNDAwMDAwMCkKICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2Vuc1lvdUNhbkdpdmUgPSAyNDAwMDAwMCAtIFRPS0VOU19TT0xEOwogICAgICAgICAgICAgICAgdG9rZW5zV2l0aG91dEJvbnVzID0gdG9rZW5zWW91Q2FuR2l2ZS5tdWwoMTApOwogICAgICAgICAgICAgICAgdG9rZW5zV2l0aG91dEJvbnVzID0gdG9rZW5zV2l0aG91dEJvbnVzLmRpdigxMyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHByaWNlQ2hhcmdlZCA9IHRva2Vuc1dpdGhvdXRCb251cy5tdWwoSWNvUHJpY2UpOyAKICAgICAgICAgICAgICAgIHJldHVybkFtb3VudCA9IGFtdCAtIHByaWNlQ2hhcmdlZDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9nKCJUb2tlbnMgYmVpbmcgYm91Z2h0IGV4Y2VlZCB0aGUgbGltaXQgb2YgaWNvIHBoYXNlIDEuIFJldHVybmluZyByZW1haW5pbmcgYW1vdW50IixyZXR1cm5BbW91bnQpOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbnNZb3VDYW5HaXZlID0gdG9rZW5zUmVxdWlyZWQ7CiAgICAgICAgICAgICAgICByZXR1cm5BbW91bnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlcXVpcmUgKHRva2Vuc1lvdUNhbkdpdmUgKyBUT0tFTlNfU09MRCA8PSAyNDAwMDAwMCk7CiAgICAgICAgfQogICAgICAgIC8vaWNvIHBoYXNlIDIgd2l0aCAyMCUgYm9udXMKICAgICAgICBpZiAoVE9LRU5TX1NPTEQgPj0yNDAwMDAwMCAmJiBUT0tFTlNfU09MRCA8NDIwMDAwMDApCiAgICAgICAgewogICAgICAgICAgICAgdG9rZW5zUmVxdWlyZWQgPSBhbXQuZGl2KEljb1ByaWNlKTsKICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zUmVxdWlyZWQubXVsKGJvbnVzUGhhc2UyKTsKICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICB0b2tlbnNSZXF1aXJlZCA9IHRva2Vuc1JlcXVpcmVkLmFkZChib251cyk7CiAgICAgICAgICAgICBpZiAodG9rZW5zUmVxdWlyZWQgKyBUT0tFTlNfU09MRCA+IDQyMDAwMDAwKQogICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW5zWW91Q2FuR2l2ZSA9IDQyMDAwMDAwIC0gVE9LRU5TX1NPTEQ7CiAgICAgICAgICAgICAgICB0b2tlbnNXaXRob3V0Qm9udXMgPSB0b2tlbnNZb3VDYW5HaXZlLm11bCgxMCk7CiAgICAgICAgICAgICAgICB0b2tlbnNXaXRob3V0Qm9udXMgPSB0b2tlbnNXaXRob3V0Qm9udXMuZGl2KDEzKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcHJpY2VDaGFyZ2VkID0gdG9rZW5zV2l0aG91dEJvbnVzLm11bChJY29QcmljZSk7IAogICAgICAgICAgICAgICAgcmV0dXJuQW1vdW50ID0gYW10IC0gcHJpY2VDaGFyZ2VkOwogICAgICAgICAgICAgICAgbG9nKCJUb2tlbnMgYmVpbmcgYm91Z2h0IGV4Y2VlZCB0aGUgbGltaXQgb2YgaWNvIHBoYXNlIDIuIFJldHVybmluZyByZW1haW5pbmcgYW1vdW50IixyZXR1cm5BbW91bnQpOwogICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW5zWW91Q2FuR2l2ZSA9IHRva2Vuc1JlcXVpcmVkOwogICAgICAgICAgICAgICAgcmV0dXJuQW1vdW50ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICAgcmVxdWlyZSAodG9rZW5zWW91Q2FuR2l2ZSArIFRPS0VOU19TT0xEIDw9IDQyMDAwMDAwKTsKICAgICAgICB9CiAgICAgICAgLy9pY28gcGhhc2UgMyB3aXRoIDEwJSBib251cwogICAgICAgIGlmIChUT0tFTlNfU09MRCA+PTQyMDAwMDAwICYmIFRPS0VOU19TT0xEIDw1ODUwMDAwMCkKICAgICAgICB7CiAgICAgICAgICAgICB0b2tlbnNSZXF1aXJlZCA9IGFtdC5kaXYoSWNvUHJpY2UpOwogICAgICAgICAgICAgYm9udXMgPSB0b2tlbnNSZXF1aXJlZC5tdWwoYm9udXNQaGFzZTMpOwogICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgIHRva2Vuc1JlcXVpcmVkID0gdG9rZW5zUmVxdWlyZWQuYWRkKGJvbnVzKTsKICAgICAgICAgICAgICBpZiAodG9rZW5zUmVxdWlyZWQgKyBUT0tFTlNfU09MRCA+IDU4NTAwMDAwKQogICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW5zWW91Q2FuR2l2ZSA9IDU4NTAwMDAwIC0gVE9LRU5TX1NPTEQ7CiAgICAgICAgICAgICAgICB0b2tlbnNXaXRob3V0Qm9udXMgPSB0b2tlbnNZb3VDYW5HaXZlLm11bCgxMCk7CiAgICAgICAgICAgICAgICB0b2tlbnNXaXRob3V0Qm9udXMgPSB0b2tlbnNXaXRob3V0Qm9udXMuZGl2KDEzKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcHJpY2VDaGFyZ2VkID0gdG9rZW5zV2l0aG91dEJvbnVzLm11bChJY29QcmljZSk7IAogICAgICAgICAgICAgICAgcmV0dXJuQW1vdW50ID0gYW10IC0gcHJpY2VDaGFyZ2VkOwogICAgICAgICAgICAgICAgbG9nKCJUb2tlbnMgYmVpbmcgYm91Z2h0IGV4Y2VlZCB0aGUgbGltaXQgb2YgaWNvIHBoYXNlIDMuIFJldHVybmluZyByZW1haW5pbmcgYW1vdW50IixyZXR1cm5BbW91bnQpOwogICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2Vuc1lvdUNhbkdpdmUgPSB0b2tlbnNSZXF1aXJlZDsKICAgICAgICAgICAgICAgIHJldHVybkFtb3VudCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIHJlcXVpcmUgKHRva2Vuc1lvdUNhbkdpdmUgKyBUT0tFTlNfU09MRCA8PSA1ODUwMDAwMCk7CiAgICAgICAgfQogICAgICAgIGlmIChUT0tFTlNfU09MRCA9PSA1ODUwMDAwMCkKICAgICAgICB7CiAgICAgICAgICAgIGxvZygiSUNPIGhhcyBlbmRlZC4gQWxsIHRva2VucyBzb2xkLiIsIDU4NTAwMDAwKTsKICAgICAgICAgICAgdG9rZW5zWW91Q2FuR2l2ZSA9IDA7CiAgICAgICAgICAgIHJldHVybkFtb3VudCA9IGFtdDsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShUT0tFTlNfU09MRCA8PTU4NTAwMDAwKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnV5KGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgcHVibGljIHJldHVybnMgKHVpbnQgdG9rZW5zKSB7CiAgICAgICAgdWludCBwYXltZW50VG9HaXZlQmFjayA9IDA7CiAgICAgICAgKHRva2VucyxwYXltZW50VG9HaXZlQmFjaykgPSBjYWxjdWxhdGVUb2tlbnMobXNnLnZhbHVlKTsKICAgICAgICAKICAgICAgICBUT0tFTlNfU09MRCArPSB0b2tlbnM7CiAgICAgICAgdG9rZW5zID0gdG9rZW5zICogKDEwICoqIHVpbnQyNTYoZGVjaW1hbHMpKTsKICAgICAgICAKICAgICAgICByZXF1aXJlKHRva2VuQmFsYW5jZXNbb3duZXJdID49IHRva2Vucyk7ICAgICAgICAgICAgICAgLy8gY2hlY2tzIGlmIGl0IGhhcyBlbm91Z2ggdG8gc2VsbAogICAgICAgIAogICAgICAgIHRva2VuQmFsYW5jZXNbYmVuZWZpY2lhcnldID0gdG9rZW5CYWxhbmNlc1tiZW5lZmljaWFyeV0uYWRkKHRva2Vucyk7ICAgICAgICAgICAgICAgICAgLy8gYWRkcyB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQogICAgICAgIHRva2VuQmFsYW5jZXNbb3duZXJdID0gdG9rZW5CYWxhbmNlc1tvd25lcl0uc3ViKHRva2Vucyk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICAKICAgICAgICBUcmFuc2Zlcihvd25lciwgYmVuZWZpY2lhcnksIHRva2Vucyk7ICAgICAgICAgICAgICAgLy8gZXhlY3V0ZSBhbiBldmVudCByZWZsZWN0aW5nIHRoZSBjaGFuZ2UKICAgIAogICAgICAgIGlmIChwYXltZW50VG9HaXZlQmFjayA+MCkKICAgICAgICB7CiAgICAgICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKHBheW1lbnRUb0dpdmVCYWNrKTsKICAgICAgICB9CiAgICAKICAgICAgICBldGhTdG9yZS50cmFuc2Zlcihtc2cudmFsdWUgLSBwYXltZW50VG9HaXZlQmFjayk7ICAgICAgICAgICAgICAgICAgICAgICAvL3NlbmQgdGhlIGV0aCB0byB0aGUgYWRkcmVzcyB3aGVyZSBldGggc2hvdWxkIGJlIGNvbGxlY3RlZAogICAgICAgIAogICAgICAgIHJldHVybiB0b2tlbnM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kcyBmdW5jdGlvbiBhbmQgcmV0dXJucwogICAgfQogICAgCiAgIGZ1bmN0aW9uIGdldFRva2VuQmFsYW5jZShhZGRyZXNzIHlvdXJBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIHRva2VuQmFsYW5jZXNbeW91ckFkZHJlc3NdLmRpdiAoMTAqKmRlY2ltYWxzKTsgLy8gc2hvdyB0b2tlbiBiYWxhbmNlIGluIGZ1bGwgdG9rZW5zIG5vdCBwYXJ0CiAgICB9Cn0='.
	

]
