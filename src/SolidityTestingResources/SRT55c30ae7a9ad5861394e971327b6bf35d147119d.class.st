Class {
	#name : #SRT55c30ae7a9ad5861394e971327b6bf35d147119d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT55c30ae7a9ad5861394e971327b6bf35d147119d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CmNvbnRyYWN0IG93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiAgYm9vbCkgcHVibGljIGFkbWluczsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRtaW5zW21zZy5zZW5kZXJdPXRydWU7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFkbWluICAgewogICAgICAgIHJlcXVpcmUoYWRtaW5zW21zZy5zZW5kZXJdID09IHRydWUpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogICAgZnVuY3Rpb24gbWFrZUFkbWluKGFkZHJlc3MgbmV3QWRtaW4sIGJvb2wgaXNBZG1pbikgb25seU93bmVyIHsKICAgICAgICBhZG1pbnNbbmV3QWRtaW5dID0gaXNBZG1pbjsKICAgIH0KfQoKaW50ZXJmYWNlIHRva2VuUmVjaXBpZW50IHsKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpOwp9Cgpjb250cmFjdCBFVEQgaXMgb3duZWQgewogICAgLy8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4KICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50MjU2IG1pbkJhbGFuY2VGb3JBY2NvdW50czsKICAgIGJvb2wgcHVibGljIHVzZXJzQ2FuVHJhZGU7CiAgICBib29sIHB1YmxpYyB1c2Vyc0NhblVuZnJlZXplOwoKICAgIGJvb2wgcHVibGljIGljbyA9IHRydWU7IC8vdHVybiBpY28gb24gYW5kIG9mCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBhZG1pbjsKCgogICAgbW9kaWZpZXIgbm90SUNPIHsKICAgICAgICByZXF1aXJlKGFkbWluW21zZy5zZW5kZXJdIHx8ICFpY28pOwogICAgICAgIF87CiAgICB9CgoKICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBiYWxhbmNlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwoKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+ICBib29sKSBwdWJsaWMgZnJvemVuOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gIGJvb2wpIHB1YmxpYyBjYW5UcmFkZTsgLy91c2VyIGFsbG93ZWQgdG8gYnV5IG9yIHNlbGwKCiAgICAvLyBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbiBvbiB0aGUgYmxvY2toY2FpbiB3aGVuIGFuIGFkZHJlc3MgaXMgcmV3YXJkCiAgICBldmVudCBSZXdhcmQoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlLCBzdHJpbmcgZGF0YSwgdWludDI1NiB0aW1lKTsKCiAgICAvLyBUaGlzIG5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdGhlIGFtb3VudCBidXJudAogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgLy8gVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzCiAgICBldmVudCBGcm96ZW4oYWRkcmVzcyBpbmRleGVkIGFkZHIsIGJvb2wgZnJvemVuKTsKCiAgICAvLyBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMKICAgIGV2ZW50IFVubG9jayhhZGRyZXNzIGluZGV4ZWQgYWRkciwgYWRkcmVzcyBmcm9tLCB1aW50MjU2IHZhbCk7CgogICAgLy8gVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzCgoKICAgIC8vIFRoaXMgZ2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cwogICAgLy8gZXZlbnQgVW5mcmVlemUoYWRkcmVzcyBpbmRleGVkIGFkZHIpOwoKICAgIC8qKgogICAgICogQ29uc3RyY3RvciBmdW5jdGlvbgogICAgICoKICAgICAqIEluaXRpYWxpemVzIGNvbnRyYWN0IHdpdGggaW5pdGlhbCBzdXBwbHkgdG9rZW5zIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBFVEQoKSB7CiAgICAgICAgdWludDI1NiBpbml0aWFsU3VwcGx5ID0gMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseSA7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHRvdGFsU3VwcGx5ID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWwgc3VwcGx5CiAgICAgICAgbmFtZSA9ICJFdGhlcmV1bURpYW1vbmQiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBuYW1lIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgc3ltYm9sID0gIkVURCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc3ltYm9sIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgZGVjaW1hbHMgPSAxODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIGRlY2ltYWxzIGZvciBkaXNwbGF5IHB1cnBvc2VzCiAgICAgICAgbWluQmFsYW5jZUZvckFjY291bnRzID0gMTAwMDAwMDAwMDAwMDAwMDsKICAgICAgICB1c2Vyc0NhblRyYWRlPWZhbHNlOwogICAgICAgIHVzZXJzQ2FuVW5mcmVlemU9ZmFsc2U7CiAgICAgICAgYWRtaW5bbXNnLnNlbmRlcl09dHJ1ZTsKICAgICAgICBjYW5UcmFkZVttc2cuc2VuZGVyXT10cnVlOwoKICAgIH0KCiAgICAvKioKICAgICAqIEluY3JlYWNlIFRvdGFsIFN1cHBseQogICAgICoKICAgICAqIEluY3JlYXNlcyB0aGUgdG90YWwgY29pbiBzdXBwbHkKICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VUb3RhbFN1cHBseSAoYWRkcmVzcyB0YXJnZXQsICB1aW50MjU2IGluY3JlYXNlQnkgKSAgb25seU93bmVyIHsKICAgICAgICBiYWxhbmNlT2ZbdGFyZ2V0XSArPSBpbmNyZWFzZUJ5OwogICAgICAgIHRvdGFsU3VwcGx5ICs9IGluY3JlYXNlQnk7CiAgICAgICAgVHJhbnNmZXIoMCwgb3duZXIsIGluY3JlYXNlQnkpOwogICAgICAgIFRyYW5zZmVyKG93bmVyLCB0YXJnZXQsIGluY3JlYXNlQnkpOwogICAgfQoKICAgIGZ1bmN0aW9uICB1c2Vyc0NhblVuRnJlZXplKGJvb2wgY2FuKSB7CiAgICAgICAgdXNlcnNDYW5VbmZyZWV6ZT1jYW47CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWluQmFsYW5jZSh1aW50IG1pbmltdW1CYWxhbmNlSW5XZWkpIG9ubHlPd25lciB7CiAgICAgICAgbWluQmFsYW5jZUZvckFjY291bnRzID0gbWluaW11bUJhbGFuY2VJbldlaTsKICAgIH0KCiAgICAvKioKICAgICAqIHRyYW5zZmVyQW5kRnJlZXplCiAgICAgKgogICAgICogRnVuY3Rpb24gdG8gdHJhbnNmZXIgdG8gYW5kIGZyZWV6ZSBhbmQgYWNjb3VudCBhdCB0aGUgc2FtZSB0aW1lCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW5kRnJlZXplIChhZGRyZXNzIHRhcmdldCwgIHVpbnQyNTYgYW1vdW50ICkgIG9ubHlBZG1pbiB7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIHRhcmdldCwgYW1vdW50KTsKICAgICAgICBmcmVlemUodGFyZ2V0LCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIF9mcmVlemUgaW50ZXJuYWwKICAgICAqCiAgICAgKiBmdW5jdGlvbiB0byBmcmVlemUgYW4gYWNjb3VudAogICAgICovCiAgICBmdW5jdGlvbiBfZnJlZXplIChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZSApICBpbnRlcm5hbCAgewoKICAgICAgICBmcm96ZW5bdGFyZ2V0XT1mcm96ZTsKICAgICAgICBGcm96ZW4odGFyZ2V0LCBmcm96ZSk7CiAgICB9CgoKCiAgICAvKioKICAgICAqIGZyZWV6ZQogICAgICoKICAgICAqIGZ1bmN0aW9uIHRvIGZyZWV6ZSBhbiBhY2NvdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGZyZWV6ZSAoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJvemUgKSAgIHsKICAgICAgICBpZihmcm96ZSB8fCAoIWZyb3plICYmICF1c2Vyc0NhblVuZnJlZXplKSkgewogICAgICAgICAgICByZXF1aXJlKGFkbWluW21zZy5zZW5kZXJdKTsKICAgICAgICB9CgogICAgICAgIF9mcmVlemUodGFyZ2V0LCBmcm96ZSk7CiAgICB9CgoKCiAgICAvKioKICAgICAqIEludGVybmFsIHRyYW5zZmVyLCBvbmx5IGNhbiBiZSBjYWxsZWQgYnkgdGhpcyBjb250cmFjdAogICAgICovCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgdHJhbnNmZXIgdG8gMHgwIGFkZHJlc3MuIFVzZSBidXJuKCkgaW5zdGVhZAoKICAgICAgICByZXF1aXJlKCFmcm96ZW5bX2Zyb21dKTsgICAgICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCB0cmFuc2ZlciBmcm9tIGZyb3plbiBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW190b10gKyBfdmFsdWUgPiBiYWxhbmNlT2ZbX3RvXSk7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZmVyIHRva2VucwogICAgICoKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW5zIHRvIGBfdG9gIGZyb20geW91ciBhY2NvdW50CiAgICAgKgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIHRoZSBhbW91bnQgdG8gc2VuZAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG5vdElDTyB7CiAgICAgICAgcmVxdWlyZSghZnJvemVuW21zZy5zZW5kZXJdKTsgICAgICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCB0cmFuc2ZlciBmcm9tIGZyb3plbiBhZGRyZXNzCiAgICAgICAgaWYgKG1zZy5zZW5kZXIuYmFsYW5jZSAgPCBtaW5CYWxhbmNlRm9yQWNjb3VudHMpIHsKICAgICAgICAgICAgc2VsbCgobWluQmFsYW5jZUZvckFjY291bnRzIC0gbXNnLnNlbmRlci5iYWxhbmNlKSAqIHNlbGxQcmljZSk7CiAgICAgICAgfQogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgoKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b3RhbExvY2tlZFJld2FyZHNPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGxvY2tlZFJld2FyZHNPZjsgLy9iYWxhbmNlIG9mIGEgbG9ja2VkIHJld2FyZAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nICh1aW50MzIgID0+IGFkZHJlc3MpKSBwdWJsaWMgdXNlclJld2FyZGVyczsgLy9pbmRleGVkIGxpc3Qgb2YgcmV3YXJkZWVzIHJld2FyZGVyCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDMyKSkgcHVibGljIHVzZXJSZXdhcmRDb3VudDsgLy9hIGxpc3Qgb2YgbnVtYmVyIG9mIHRpbWVzIGEgY3VzdG9tZXIgaGFzIHJlY2VpdmVkIHJld2FyZCBmcm9tIGEgZ2l2ZW4gbWVyY2hhbnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDMyKSBwdWJsaWMgdXNlclJld2FyZGVyQ291bnQ7IC8vbnVtYmVyIG9mIHJld2FyZGVycyBwZXIgY3VzdG9tZXIKCiAgICAvL21lcmNoYW50CiAgICBtYXBwaW5nIChhZGRyZXNzID0+ICB1aW50MjU2ICApIHB1YmxpYyB0b3RhbFJld2FyZElzc3VlZE91dDsKCiAgICAvKioKICAgICAqIFJld2FyZCB0b2tlbnMgLSB0b2tlbnMgZ28gdG8KICAgICAqCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBmcm9tIHlvdXIgYWNjb3VudAogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IHRvIHNlbmQKICAgICAqLwogICAgZnVuY3Rpb24gcmV3YXJkKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYm9vbCBsb2NrZWQsIHN0cmluZyBkYXRhKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKCFmcm96ZW5bbXNnLnNlbmRlcl0pOyAgICAgICAgICAgICAgICAgICAgICAgLy9wcmV2ZW50IHRyYW5zZmVyIGZyb20gZnJvemVuIGFkZHJlc3MKICAgICAgICBpZiAobXNnLnNlbmRlci5iYWxhbmNlICA8IG1pbkJhbGFuY2VGb3JBY2NvdW50cykgewogICAgICAgICAgICBzZWxsKChtaW5CYWxhbmNlRm9yQWNjb3VudHMgLSBtc2cuc2VuZGVyLmJhbGFuY2UpICogc2VsbFByaWNlKTsKICAgICAgICB9CiAgICAgICAgaWYoIWxvY2tlZCkgewogICAgICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICAvL3ByZXZlbnQgdHJhbnNmZXIgZnJvbSBmcm96ZW4gYWRkcmVzcwogICAgICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICAgICAgcmVxdWlyZSh0b3RhbExvY2tlZFJld2FyZHNPZltfdG9dICsgX3ZhbHVlID4gdG90YWxMb2NrZWRSZXdhcmRzT2ZbX3RvXSk7IC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgICAgIHRvdGFsTG9ja2VkUmV3YXJkc09mW190b10gKz0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgICAgIGxvY2tlZFJld2FyZHNPZltfdG9dW21zZy5zZW5kZXJdICs9IF92YWx1ZTsKICAgICAgICAgICAgaWYodXNlclJld2FyZENvdW50W190b11bbXNnLnNlbmRlcl09PTApIHsKICAgICAgICAgICAgICAgIHVzZXJSZXdhcmRlckNvdW50W190b10gKz0gMTsKICAgICAgICAgICAgICAgIHVzZXJSZXdhcmRlcnNbX3RvXVt1c2VyUmV3YXJkZXJDb3VudFtfdG9dXT1tc2cuc2VuZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHVzZXJSZXdhcmRDb3VudFtfdG9dW21zZy5zZW5kZXJdKz0xOwogICAgICAgICAgICB0b3RhbFJld2FyZElzc3VlZE91dFttc2cuc2VuZGVyXSs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgUmV3YXJkKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBkYXRhLCBub3cpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXIgbG9ja2VkIHJld2FyZHMKICAgICAqCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBtZXJjaGFudAogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgYW1vdW50IHRvIHNlbmQKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJSZXdhcmQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgcmVxdWlyZSghZnJvemVuW21zZy5zZW5kZXJdKTsgICAgICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCB0cmFuc2ZlciBmcm9tIGZyb3plbiBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShsb2NrZWRSZXdhcmRzT2ZbbXNnLnNlbmRlcl1bX3RvXSA+PSBfdmFsdWUgKTsKICAgICAgICByZXF1aXJlKHRvdGFsTG9ja2VkUmV3YXJkc09mW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CgogICAgICAgIGlmIChtc2cuc2VuZGVyLmJhbGFuY2UgIDwgbWluQmFsYW5jZUZvckFjY291bnRzKSB7CiAgICAgICAgICAgIHNlbGwoKG1pbkJhbGFuY2VGb3JBY2NvdW50cyAtIG1zZy5zZW5kZXIuYmFsYW5jZSkgKiBzZWxsUHJpY2UpOwogICAgICAgIH0KICAgICAgICB0b3RhbExvY2tlZFJld2FyZHNPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBsb2NrZWRSZXdhcmRzT2ZbbXNnLnNlbmRlcl1bX3RvXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVubG9ja2VkIGxvY2tlZCByZXdhcmRzIGJ5IG1lcmNoYW50CiAgICAgKgogICAgICogVW5sb2NrIGBfdmFsdWVgIHRva2VucyBvZiBgYWRkYAogICAgICoKICAgICAqIEBwYXJhbSBhZGRyIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byB1bmxvY2sKICAgICAqLwogICAgZnVuY3Rpb24gdW5sb2NrUmV3YXJkKGFkZHJlc3MgYWRkciwgdWludDI1NiBfdmFsdWUpIHsKICAgICAgICByZXF1aXJlKHRvdGFsTG9ja2VkUmV3YXJkc09mW2FkZHJdID4gX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCB0cmFuc2ZlciBmcm9tIGZyb3plbiBhZGRyZXNzCiAgICAgICAgcmVxdWlyZShsb2NrZWRSZXdhcmRzT2ZbYWRkcl1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICk7CiAgICAgICAgaWYoX3ZhbHVlPT0wKSBfdmFsdWU9bG9ja2VkUmV3YXJkc09mW2FkZHJdW21zZy5zZW5kZXJdOwogICAgICAgIGlmIChtc2cuc2VuZGVyLmJhbGFuY2UgIDwgbWluQmFsYW5jZUZvckFjY291bnRzKSB7CiAgICAgICAgICAgIHNlbGwoKG1pbkJhbGFuY2VGb3JBY2NvdW50cyAtIG1zZy5zZW5kZXIuYmFsYW5jZSkgKiBzZWxsUHJpY2UpOwogICAgICAgIH0KICAgICAgICB0b3RhbExvY2tlZFJld2FyZHNPZlthZGRyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKICAgICAgICBsb2NrZWRSZXdhcmRzT2ZbYWRkcl1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VPZlthZGRyXSArPSBfdmFsdWU7CiAgICAgICAgVW5sb2NrKGFkZHIsIG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICB9CgoKCiAgICAvKioKICAgICAqIFRyYW5zZmVyIHRva2VucyBmcm9tIG90aGVyIGFkZHJlc3MKICAgICAqCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VucyB0byBgX3RvYCBpbiBiZWhhbGYgb2YgYF9mcm9tYAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCB0byBzZW5kCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIWZyb3plbltfZnJvbV0pOyAgICAgICAgICAgICAgICAgICAgICAgLy9wcmV2ZW50IHRyYW5zZmVyIGZyb20gZnJvemVuIGFkZHJlc3MKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsgICAgIC8vIENoZWNrIGFsbG93YW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGFsbG93YW5jZSBmb3Igb3RoZXIgYWRkcmVzcwogICAgICoKICAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCB0b2tlbnMgaW4geW91ciBiZWhhbGYKICAgICAqCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3MgYXV0aG9yaXplZCB0byBzcGVuZAogICAgICogQHBhcmFtIF92YWx1ZSB0aGUgbWF4IGFtb3VudCB0aGV5IGNhbiBzcGVuZAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbGxvd2FuY2UgZm9yIG90aGVyIGFkZHJlc3MgYW5kIG5vdGlmeQogICAgICoKICAgICAqIEFsbG93cyBgX3NwZW5kZXJgIHRvIHNwZW5kIG5vIG1vcmUgdGhhbiBgX3ZhbHVlYCB0b2tlbnMgaW4geW91ciBiZWhhbGYsIGFuZCB0aGVuIHBpbmcgdGhlIGNvbnRyYWN0IGFib3V0IGl0CiAgICAgKgogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIGF1dGhvcml6ZWQgdG8gc3BlbmQKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIG1heCBhbW91bnQgdGhleSBjYW4gc3BlbmQKICAgICAqIEBwYXJhbSBfZXh0cmFEYXRhIHNvbWUgZXh0cmEgaW5mb3JtYXRpb24gdG8gc2VuZCB0byB0aGUgYXBwcm92ZWQgY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIG9ubHlPd25lcgogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXN0cm95IHRva2VucwogICAgICoKICAgICAqIFJlbW92ZSBgX3ZhbHVlYCB0b2tlbnMgZnJvbSB0aGUgc3lzdGVtIGlycmV2ZXJzaWJseQogICAgICoKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgdG90YWxTdXBwbHkgLT0gX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVzIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRGVzdHJveSB0b2tlbnMgZnJvbSBvdGhlciBjY291bnQKICAgICAqCiAgICAgKiBSZW1vdmUgYF92YWx1ZWAgdG9rZW5zIGZyb20gdGhlIHN5c3RlbSBpcnJldmVyc2libHkgb24gYmVoYWxmIG9mIGBfZnJvbWAuCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIHRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdmFsdWUgdGhlIGFtb3VudCBvZiBtb25leSB0byBidXJuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXRlZCBiYWxhbmNlIGlzIGVub3VnaAogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIncyBhbGxvd2FuY2UKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRvdGFsU3VwcGx5CiAgICAgICAgQnVybihfZnJvbSwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKgogICAgIGZ1bmN0aW9uIGluY3JlYXNlU3VwcGx5KGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgIHsKICAgICBiYWxhbmNlT2ZbX2Zyb21dICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgdGFyZ2V0ZWQgYmFsYW5jZQogICAgIHRvdGFsU3VwcGx5ICs9IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdG90YWxTdXBwbHkKICAgICAvLyBCdXJuKF9mcm9tLCBfdmFsdWUpOwogICAgIHJldHVybiB0cnVlOwogICAgIH0KICAgICAqLwoKCgoKICAgIHVpbnQyNTYgcHVibGljIHNlbGxQcmljZSA9IDYwODsKICAgIHVpbnQyNTYgcHVibGljIGJ1eVByaWNlID0gNzYwOwoKICAgIGZ1bmN0aW9uIHNldFByaWNlcyh1aW50MjU2IG5ld1NlbGxQcmljZSwgdWludDI1NiBuZXdCdXlQcmljZSkgb25seU93bmVyIHsKICAgICAgICBzZWxsUHJpY2UgPSBuZXdTZWxsUHJpY2U7CiAgICAgICAgYnV5UHJpY2UgPSBuZXdCdXlQcmljZTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldFVzZXJzQ2FuVHJhZGUoYm9vbCB0cmFkZSkgb25seU93bmVyIHsKICAgICAgICB1c2Vyc0NhblRyYWRlPXRyYWRlOwogICAgfQogICAgZnVuY3Rpb24gc2V0Q2FuVHJhZGUoYWRkcmVzcyBhZGRyLCBib29sIHRyYWRlKSBvbmx5T3duZXIgewogICAgICAgIGNhblRyYWRlW2FkZHJdPXRyYWRlOwogICAgfQoKICAgIC8vdXNlciBpcyBidXlpbmcgZXRkCiAgICBmdW5jdGlvbiBidXkoKSBwYXlhYmxlIHJldHVybnMgKHVpbnQyNTYgYW1vdW50KXsKICAgICAgICBpZighdXNlcnNDYW5UcmFkZSAmJiAhY2FuVHJhZGVbbXNnLnNlbmRlcl0pIHJldmVydCgpOwogICAgICAgIGFtb3VudCA9IG1zZy52YWx1ZSAqIGJ1eVByaWNlOyAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlcyB0aGUgYW1vdW50CgogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW3RoaXNdID49IGFtb3VudCk7ICAgICAgICAgICAgICAgLy8gY2hlY2tzIGlmIGl0IGhhcyBlbm91Z2ggdG8gc2VsbAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7ICAgICAgICAgICAgICAgICAgLy8gYWRkcyB0aGUgYW1vdW50IHRvIGJ1eWVyJ3MgYmFsYW5jZQogICAgICAgIGJhbGFuY2VPZlt0aGlzXSAtPSBhbW91bnQ7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgICBUcmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOyAgICAgICAgICAgICAgIC8vIGV4ZWN1dGUgYW4gZXZlbnQgcmVmbGVjdGluZyB0aGUgY2hhbmdlCiAgICAgICAgcmV0dXJuIGFtb3VudDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmRzIGZ1bmN0aW9uIGFuZCByZXR1cm5zCiAgICB9CgogICAgLy91c2VyIGlzIHNlbGxpbmcgdXMgZXRkLCB3ZSBhcmUgc2VsbGluZyBldGggdG8gdGhlIHVzZXIKICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIHJldHVybnMgKHVpbnQgcmV2ZW51ZSl7CiAgICAgICAgcmVxdWlyZSghZnJvemVuW21zZy5zZW5kZXJdKTsKICAgICAgICBpZighdXNlcnNDYW5UcmFkZSAmJiAhY2FuVHJhZGVbbXNnLnNlbmRlcl0pIHsKICAgICAgICAgICAgcmVxdWlyZShtaW5CYWxhbmNlRm9yQWNjb3VudHMgPiBhbW91bnQvc2VsbFByaWNlKTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gYW1vdW50KTsgICAgICAgICAvLyBjaGVja3MgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgICBiYWxhbmNlT2ZbdGhpc10gKz0gYW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZHMgdGhlIGFtb3VudCB0byBvd25lcidzIGJhbGFuY2UKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gYW1vdW50OyAgICAgICAgICAgICAgICAgIC8vIHN1YnRyYWN0cyB0aGUgYW1vdW50IGZyb20gc2VsbGVyJ3MgYmFsYW5jZQogICAgICAgIHJldmVudWUgPSBhbW91bnQgLyBzZWxsUHJpY2U7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyLnNlbmQocmV2ZW51ZSkpOyAgICAgICAgICAgICAgICAvLyBzZW5kcyBldGhlciB0byB0aGUgc2VsbGVyOiBpdCdzIGltcG9ydGFudCB0byBkbyB0aGlzIGxhc3QgdG8gcHJldmVudCByZWN1cnNpb24gYXR0YWNrcwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCk7ICAgICAgICAgICAgICAgLy8gZXhlY3V0ZXMgYW4gZXZlbnQgcmVmbGVjdGluZyBvbiB0aGUgY2hhbmdlCiAgICAgICAgcmV0dXJuIHJldmVudWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmRzIGZ1bmN0aW9uIGFuZCByZXR1cm5zCiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIH0KICAgIGV2ZW50IFdpdGhkcmF3bihhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgYW1vdW50KSBvbmx5T3duZXIgewogICAgICAgIHRhcmdldC50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIFdpdGhkcmF3bih0YXJnZXQsIGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QWRtaW4oYWRkcmVzcyBhZGRyLCBib29sIGVuYWJsZWQpIG9ubHlPd25lciB7CiAgICAgICAgYWRtaW5bYWRkcl09ZW5hYmxlZDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRJQ08oYm9vbCBlbmFibGVkKSBvbmx5T3duZXIgewogICAgICAgIGljbz1lbmFibGVkOwogICAgfQp9'.
	

]
