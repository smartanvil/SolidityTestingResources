Class {
	#name : #SRT76beeb04fbb6326d3c928484de13481284b2100e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT76beeb04fbb6326d3c928484de13481284b2100e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8vIEB0aXRsZSBJbnRlcmZhY2UgZm9yIGNvbnRyYWN0cyBjb25mb3JtaW5nIHRvIEVSQy03MjE6IE5vbi1GdW5naWJsZSBUb2tlbnMKLy8vIEBhdXRob3IgRGlldGVyIFNoaXJsZXkgPDxhIGhyZWY9Ii9jZG4tY2dpL2wvZW1haWwtcHJvdGVjdGlvbiIgY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI1YjNmM2UyZjNlMWIzYTIzMzIzNDM2MjEzZTM1NzUzODM0Ij5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9hPj4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZXRlKQpjb250cmFjdCBFUkM3MjEgewogICAgLy8gUmVxdWlyZWQgbWV0aG9kcwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgLy8gRXZlbnRzCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIG93bmVyLCBhZGRyZXNzIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwoKICAgIC8vIE9wdGlvbmFsCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIG5hbWUpOwogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIHN5bWJvbCk7CiAgICAvLyBmdW5jdGlvbiB0b2tlbnNPZk93bmVyKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSB0b2tlbklkcyk7CiAgICAvLyBmdW5jdGlvbiB0b2tlbk1ldGFkYXRhKHVpbnQyNTYgX3Rva2VuSWQsIHN0cmluZyBfcHJlZmVycmVkVHJhbnNwb3J0KSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgaW5mb1VybCk7CgogICAgLy8gRVJDLTE2NSBDb21wYXRpYmlsaXR5IChodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTY1KQogICAgLy8gZnVuY3Rpb24gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0IF9pbnRlcmZhY2VJRCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgU21hcnRTaWduYXR1cmUgaXMgRVJDNzIxewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBldmVudCBCb3VnaHQgKHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHJpY2UpOwogIGV2ZW50IFNvbGQgKHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZCwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludDI1NiBfcHJpY2UpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9hcHByb3ZlZCwgdWludDI1NiBfdG9rZW5JZCk7CgogIGFkZHJlc3MgcHJpdmF0ZSBvd25lcjsKICAKICB1aW50MjU2IGNvdW50ZXI7CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIG93bmVyT2ZUb2tlbjsKICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgcHJpY2VPZlRva2VuOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSBhcHByb3ZlZE9mVG9rZW47CiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIGNyZWF0b3JPZlRva2VuOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBwYXJlbnRPZlRva2VuOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBiYWxhbmNlT2ZUb2tlbjsgIAogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBmcmVlMU9mVG9rZW47IAogIG1hcHBpbmcgKHVpbnQyNTYgPT4gdWludDI1NikgcHJpdmF0ZSBmcmVlMk9mVG9rZW47IAogICAKICBmdW5jdGlvbiBTbWFydFNpZ25hdHVyZSAoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgY3JlYXRvck9mVG9rZW5bY291bnRlcl0gPSBvd25lck9mVG9rZW5bY291bnRlcl0gPSBtc2cuc2VuZGVyOwogICAgcHJpY2VPZlRva2VuW2NvdW50ZXJdID0gMSBldGhlcjsKICAgIHBhcmVudE9mVG9rZW5bY291bnRlcl0gPSAwOwogICAgZnJlZTFPZlRva2VuW2NvdW50ZXJdID0gMDsKICAgIGZyZWUyT2ZUb2tlbltjb3VudGVyXSA9IDA7ICAgIAogICAgY291bnRlciArPSAxOyAgICAKICB9CgogIC8qIE1vZGlmaWVycyAqLwogIG1vZGlmaWVyIG9ubHlPd25lcih1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKG93bmVyT2ZUb2tlbltfdG9rZW5JZF0gPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KICAKICBtb2RpZmllciBvbmx5Q3JlYXRvcih1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKGNyZWF0b3JPZlRva2VuW190b2tlbklkXSA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfSAgCgogIG1vZGlmaWVyIG9ubHlSb290KCkgewogICAgcmVxdWlyZShjcmVhdG9yT2ZUb2tlblswXSA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfQoKICAvKiBPd25lciAqLwogIGZ1bmN0aW9uIHNldENyZWF0b3IgKGFkZHJlc3MgX2NyZWF0b3IsIHVpbnQgX3Rva2VuSWQpIG9ubHlDcmVhdG9yKF90b2tlbklkKSBwdWJsaWMgewogICAgY3JlYXRvck9mVG9rZW5bX3Rva2VuSWRdID0gX2NyZWF0b3I7CiAgfQoKICAvKiBKdWRnZSBGYWtlIFRva2VuICovCiAgZnVuY3Rpb24ganVkZ2VGYWtlVG9rZW4gKHVpbnQyNTYgX3Rva2VuSWQpIG9ubHlSb290KCkgcHVibGljIHsKICAgIGNyZWF0b3JPZlRva2VuW190b2tlbklkXSA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBqdWRnZUZha2VUb2tlbkFuZFRyYW5zZmVyICh1aW50MjU2IF90b2tlbklkLCBhZGRyZXNzIF9wbGFpbnRpZmYpIG9ubHlSb290KCkgcHVibGljIHsgICAgCiAgICBjcmVhdG9yT2ZUb2tlbltfdG9rZW5JZF0gPSBfcGxhaW50aWZmOwogIH0gIAoKICAvKiBXaXRoZHJhdyAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsRnJvbVJvb3QgKCkgb25seVJvb3QoKSBwdWJsaWMgewogICAgdWludDI1NiB0ID0gYmFsYW5jZU9mVG9rZW5bMF07CiAgICBiYWxhbmNlT2ZUb2tlblswXSA9IDA7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHQpOyAgICAgICAgIAogIH0KICAKICBmdW5jdGlvbiB3aXRoZHJhd0FsbEZyb21Ub2tlbiAodWludDI1NiBfdG9rZW5JZCkgb25seUNyZWF0b3IoX3Rva2VuSWQpIHB1YmxpYyB7CiAgICB1aW50MjU2IHQgPSBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF07CiAgICB1aW50MjU2IHIgPSB0IC8gMjA7CiAgICBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF0gPSAwOwogICAgYmFsYW5jZU9mVG9rZW5bcGFyZW50T2ZUb2tlbltfdG9rZW5JZF1dICs9IHI7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHQgLSByKTsgICAgICAKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3QW1vdW50RnJvbVRva2VuICh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IHQpIG9ubHlDcmVhdG9yKF90b2tlbklkKSBwdWJsaWMgewogICAgaWYgKHQgPiBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF0pIHQgPSBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF07CiAgICB1aW50MjU2IHIgPSB0IC8gMjA7CiAgICBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF0gPSAwOwogICAgYmFsYW5jZU9mVG9rZW5bcGFyZW50T2ZUb2tlbltfdG9rZW5JZF1dICs9IHI7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHQgLSByKTsgCiAgfQogIAogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsKCkgcHVibGljIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIC8qIEJ1eWluZyAqLwogIGZ1bmN0aW9uIGNhbGN1bGF0ZU5leHRQcmljZSAodWludDI1NiBfcHJpY2UpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgcmV0dXJuIF9wcmljZS5tdWwoMTE3KS5kaXYoOTgpOwogIH0KCiAgZnVuY3Rpb24gY2FsY3VsYXRlRGV2Q3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZGV2Q3V0KSB7CiAgICByZXR1cm4gX3ByaWNlLmRpdigyMCk7IC8vIDUlCiAgfQoKICBmdW5jdGlvbiBidXkgKHVpbnQyNTYgX3Rva2VuSWQpIHBheWFibGUgcHVibGljIHsKICAgIHJlcXVpcmUocHJpY2VPZihfdG9rZW5JZCkgPiAwKTsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBwcmljZU9mKF90b2tlbklkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpICE9IG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZSghaXNDb250cmFjdChtc2cuc2VuZGVyKSk7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKG5vdyA+PSBmcmVlMU9mVG9rZW5bX3Rva2VuSWRdKTsKCiAgICBhZGRyZXNzIG9sZE93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgIHVpbnQyNTYgcHJpY2UgPSBwcmljZU9mKF90b2tlbklkKTsKICAgIHVpbnQyNTYgZXhjZXNzID0gbXNnLnZhbHVlLnN1YihwcmljZSk7CgogICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogICAgcHJpY2VPZlRva2VuW190b2tlbklkXSA9IG5leHRQcmljZU9mKF90b2tlbklkKTsKCiAgICBCb3VnaHQoX3Rva2VuSWQsIG5ld093bmVyLCBwcmljZSk7CiAgICBTb2xkKF90b2tlbklkLCBvbGRPd25lciwgcHJpY2UpOwoKICAgIC8vIERldmV2bG9wZXIncyBjdXQgd2hpY2ggaXMgbGVmdCBpbiBjb250cmFjdCBhbmQgYWNjZXNlZCBieQogICAgLy8gYHdpdGhkcmF3QWxsYCBhbmQgYHdpdGhkcmF3QW1vdW50VG9gIG1ldGhvZHMuCiAgICB1aW50MjU2IGRldkN1dCA9IGNhbGN1bGF0ZURldkN1dChwcmljZSk7CgogICAgLy8gVHJhbnNmZXIgcGF5bWVudCB0byBvbGQgb3duZXIgbWludXMgdGhlIGRldmVsb3BlcidzIGN1dC4KICAgIG9sZE93bmVyLnRyYW5zZmVyKHByaWNlLnN1YihkZXZDdXQpKTsKICAgIHVpbnQyNTYgc2hhcmVIb2xkZXJDdXQgPSBkZXZDdXQuZGl2KDIwKTsKICAgIG93bmVyT2ZUb2tlbltwYXJlbnRPZlRva2VuW190b2tlbklkXV0udHJhbnNmZXIoc2hhcmVIb2xkZXJDdXQpOwogICAgYmFsYW5jZU9mVG9rZW5bX3Rva2VuSWRdICs9IGRldkN1dC5zdWIoc2hhcmVIb2xkZXJDdXQpOwoKICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgIG5ld093bmVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgICB9CiAgfQoKICAvKiBFUkM3MjEgKi8KCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBuYW1lKSB7CiAgICByZXR1cm4gInNtYXJ0c2lnbmF0dXJlLmlvIjsKICB9CgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBzeW1ib2wpIHsKICAgIHJldHVybiAiU1NJIjsKICB9CgogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdG90YWxTdXBwbHkpIHsKICAgIHJldHVybiBjb3VudGVyOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfYmFsYW5jZSkgewogICAgdWludDI1NiB0ID0gMDsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGNvdW50ZXI7IGkrKykgewogICAgICBpZiAob3duZXJPZihpKSA9PSBfb3duZXIpIHsKICAgICAgICB0Kys7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH0KCiAgZnVuY3Rpb24gb3duZXJPZiAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpIHsKICAgIHJldHVybiBvd25lck9mVG9rZW5bX3Rva2VuSWRdOwogIH0KICAKICBmdW5jdGlvbiBjcmVhdG9yT2YgKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX2NyZWF0b3IpIHsKICAgIHJldHVybiBjcmVhdG9yT2ZUb2tlbltfdG9rZW5JZF07CiAgfSAgCiAgCiAgZnVuY3Rpb24gcGFyZW50T2YgKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3BhcmVudCkgewogICAgcmV0dXJuIHBhcmVudE9mVG9rZW5bX3Rva2VuSWRdOwogIH0gICAgCiAgCiAgZnVuY3Rpb24gZnJlZTFPZiAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZnJlZSkgewogICAgcmV0dXJuIGZyZWUxT2ZUb2tlbltfdG9rZW5JZF07CiAgfSAgICAKCiAgZnVuY3Rpb24gZnJlZTJPZiAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfZnJlZSkgewogICAgcmV0dXJuIGZyZWUyT2ZUb2tlbltfdG9rZW5JZF07CiAgfSAgICAgIAogIAogIGZ1bmN0aW9uIGJhbGFuY2VGcm9tVG9rZW4gKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlT2ZUb2tlbltfdG9rZW5JZF07CiAgfSAgICAgIAogIAogIGZ1bmN0aW9uIHRva2Vuc09mIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NltdIF90b2tlbklkcykgewogICAgdWludDI1NltdIG1lbW9yeSB0b2tlbnMgPSBuZXcgdWludDI1NltdKGJhbGFuY2VPZihfb3duZXIpKTsKCiAgICB1aW50MjU2IHRva2VuQ291bnRlciA9IDA7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBjb3VudGVyOyBpKyspIHsKICAgICAgaWYgKG93bmVyT2YoaSkgPT0gX293bmVyKSB7CiAgICAgICAgdG9rZW5zW3Rva2VuQ291bnRlcl0gPSBpOwogICAgICAgIHRva2VuQ291bnRlciArPSAxOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRva2VuczsKICB9CgogIGZ1bmN0aW9uIHRva2VuRXhpc3RzICh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9leGlzdHMpIHsKICAgIHJldHVybiBwcmljZU9mKF90b2tlbklkKSA+IDA7CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzIF9hcHByb3ZlZCkgewogICAgcmV0dXJuIGFwcHJvdmVkT2ZUb2tlbltfdG9rZW5JZF07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IF90byk7CiAgICByZXF1aXJlKHRva2VuRXhpc3RzKF90b2tlbklkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IG1zZy5zZW5kZXIpOwoKICAgIGlmIChfdG8gPT0gMCkgewogICAgICBpZiAoYXBwcm92ZWRPZlRva2VuW190b2tlbklkXSAhPSAwKSB7CiAgICAgICAgZGVsZXRlIGFwcHJvdmVkT2ZUb2tlbltfdG9rZW5JZF07CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgMCwgX3Rva2VuSWQpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBhcHByb3ZlZE9mVG9rZW5bX3Rva2VuSWRdID0gX3RvOwogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICB9CgogIC8qIFRyYW5zZmVycmluZyBhIGNvdW50cnkgdG8gYW5vdGhlciBvd25lciB3aWxsIGVudGl0bGUgdGhlIG5ldyBvd25lciB0aGUgcHJvZml0cyBmcm9tIGBidXlgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXJPZihfdG9rZW5JZCkpOwogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShhcHByb3ZlZEZvcihfdG9rZW5JZCkgPT0gbXNnLnNlbmRlcik7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKHRva2VuRXhpc3RzKF90b2tlbklkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgb3duZXJPZlRva2VuW190b2tlbklkXSA9IF90bzsKICAgIGFwcHJvdmVkT2ZUb2tlbltfdG9rZW5JZF0gPSAwOwoKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qIFJlYWQgKi8KCiAgZnVuY3Rpb24gcHJpY2VPZiAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcHJpY2UpIHsKICAgIHJldHVybiBwcmljZU9mVG9rZW5bX3Rva2VuSWRdOwogIH0KCiAgZnVuY3Rpb24gbmV4dFByaWNlT2YgKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgcmV0dXJuIGNhbGN1bGF0ZU5leHRQcmljZShwcmljZU9mKF90b2tlbklkKSk7CiAgfQoKICBmdW5jdGlvbiBhbGxPZiAodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfY3JlYXRvciwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX25leHRQcmljZSkgewogICAgcmV0dXJuIChvd25lck9mVG9rZW5bX3Rva2VuSWRdLCBjcmVhdG9yT2ZUb2tlbltfdG9rZW5JZF0sIHByaWNlT2ZUb2tlbltfdG9rZW5JZF0sIG5leHRQcmljZU9mKF90b2tlbklkKSk7CiAgfQoKICAvKiBVdGlsICovCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIGFkZHIpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0gLy8gc29saXVtLWRpc2FibGUtbGluZQogICAgcmV0dXJuIHNpemUgPiAwOwogIH0KICAKICBmdW5jdGlvbiBjaGFuZ2VQcmljZSh1aW50MjU2IF90b2tlbklkLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfZnJvemVuMSwgdWludDI1NiBfZnJvemVuMikgb25seU93bmVyKF90b2tlbklkKSBwdWJsaWMgewogICAgcmVxdWlyZShub3cgPj0gZnJlZTJPZlRva2VuW190b2tlbklkXSk7CiAgICBwcmljZU9mVG9rZW5bX3Rva2VuSWRdID0gX3ByaWNlOwogICAgZnJlZTFPZlRva2VuW190b2tlbklkXSA9IG5vdyArIF9mcm96ZW4xOwogICAgZnJlZTJPZlRva2VuW190b2tlbklkXSA9IG5vdyArIF9mcm96ZW4xICsgX2Zyb3plbjI7CiAgfQogIAogIGZ1bmN0aW9uIGlzc3VlVG9rZW4odWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX2Zyb3plbjEsIHVpbnQyNTYgX2Zyb3plbjIsIHVpbnQyNTYgX3BhcmVudCkgcHVibGljIHsKICAgIHJlcXVpcmUoX3BhcmVudCA8PSBjb3VudGVyKTsKICAgIGNyZWF0b3JPZlRva2VuW2NvdW50ZXJdID0gb3duZXJPZlRva2VuW2NvdW50ZXJdID0gbXNnLnNlbmRlcjsKICAgIHByaWNlT2ZUb2tlbltjb3VudGVyXSA9IF9wcmljZTsKICAgIHBhcmVudE9mVG9rZW5bY291bnRlcl0gPSBfcGFyZW50OwogICAgZnJlZTFPZlRva2VuW2NvdW50ZXJdID0gbm93ICsgX2Zyb3plbjE7CiAgICBmcmVlMk9mVG9rZW5bY291bnRlcl0gPSBub3cgKyBfZnJvemVuMSArIF9mcm96ZW4yOwogICAgY291bnRlciArPSAxOwogIH0gIAp9'.
	

]
