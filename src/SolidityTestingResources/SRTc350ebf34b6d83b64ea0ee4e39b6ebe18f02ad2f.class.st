Class {
	#name : #SRTc350ebf34b6d83b64ea0ee4e39b6ebe18f02ad2f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc350ebf34b6d83b64ea0ee4e39b6ebe18f02ad2f >> base64 [
	^ 'LyoKICAgQ29weXJpZ2h0IDIwMTYsIDIwMTcgTmV4dXMgRGV2ZWxvcG1lbnQsIExMQwoKICAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgogICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIFRva2VuIHN0YW5kYXJkIEFQSQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdmFsdWUpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKCBhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIgKSBjb25zdGFudCByZXR1cm5zICh1aW50IF9hbGxvd2FuY2UpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoIGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSApIHJldHVybnMgKGJvb2wgb2spOwoKICAgIGV2ZW50IFRyYW5zZmVyKCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKCBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKY29udHJhY3QgRXZlbnRmdWxNYXJrZXQgewogICAgZXZlbnQgSXRlbVVwZGF0ZSggdWludCBpZCApOwogICAgZXZlbnQgVHJhZGUoIHVpbnQgc2VsbF9ob3dfbXVjaCwgYWRkcmVzcyBpbmRleGVkIHNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgICAgICAgdWludCBidXlfaG93X211Y2gsIGFkZHJlc3MgaW5kZXhlZCBidXlfd2hpY2hfdG9rZW4gKTsKCiAgICBldmVudCBMb2dNYWtlKAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIGlkLAogICAgICAgIGJ5dGVzMzIgIGluZGV4ZWQgIHBhaXIsCiAgICAgICAgYWRkcmVzcyAgaW5kZXhlZCAgbWFrZXIsCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgaGF2ZVRva2VuLAogICAgICAgIEVSQzIwICAgICAgICAgICAgIHdhbnRUb2tlbiwKICAgICAgICB1aW50MTI4ICAgICAgICAgICBoYXZlQW1vdW50LAogICAgICAgIHVpbnQxMjggICAgICAgICAgIHdhbnRBbW91bnQsCiAgICAgICAgdWludDY0ICAgICAgICAgICAgdGltZXN0YW1wCiAgICApOwoKICAgIGV2ZW50IExvZ1Rha2UoCiAgICAgICAgYnl0ZXMzMiAgICAgICAgICAgaWQsCiAgICAgICAgYnl0ZXMzMiAgaW5kZXhlZCAgcGFpciwKICAgICAgICBhZGRyZXNzICBpbmRleGVkICBtYWtlciwKICAgICAgICBFUkMyMCAgICAgICAgICAgICBoYXZlVG9rZW4sCiAgICAgICAgRVJDMjAgICAgICAgICAgICAgd2FudFRva2VuLAogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIHRha2VyLAogICAgICAgIHVpbnQxMjggICAgICAgICAgIHRha2VBbW91bnQsCiAgICAgICAgdWludDEyOCAgICAgICAgICAgZ2l2ZUFtb3VudCwKICAgICAgICB1aW50NjQgICAgICAgICAgICB0aW1lc3RhbXAKICAgICk7CgogICAgZXZlbnQgTG9nS2lsbCgKICAgICAgICBieXRlczMyICBpbmRleGVkICBpZCwKICAgICAgICBieXRlczMyICBpbmRleGVkICBwYWlyLAogICAgICAgIGFkZHJlc3MgIGluZGV4ZWQgIG1ha2VyLAogICAgICAgIEVSQzIwICAgICAgICAgICAgIGhhdmVUb2tlbiwKICAgICAgICBFUkMyMCAgICAgICAgICAgICB3YW50VG9rZW4sCiAgICAgICAgdWludDEyOCAgICAgICAgICAgaGF2ZUFtb3VudCwKICAgICAgICB1aW50MTI4ICAgICAgICAgICB3YW50QW1vdW50LAogICAgICAgIHVpbnQ2NCAgICAgICAgICAgIHRpbWVzdGFtcAogICAgKTsKfQoKY29udHJhY3QgU2ltcGxlTWFya2V0IGlzIEV2ZW50ZnVsTWFya2V0IHsKICAgIGJvb2wgbG9ja2VkOwoKICAgIG1vZGlmaWVyIHN5bmNocm9uaXplZCB7CiAgICAgICAgYXNzZXJ0KCFsb2NrZWQpOwogICAgICAgIGxvY2tlZCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBsb2NrZWQgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnQoYm9vbCB4KSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKCF4KSB0aHJvdzsKICAgIH0KCiAgICBzdHJ1Y3QgT2ZmZXJJbmZvIHsKICAgICAgICB1aW50ICAgICBzZWxsX2hvd19tdWNoOwogICAgICAgIEVSQzIwICAgIHNlbGxfd2hpY2hfdG9rZW47CiAgICAgICAgdWludCAgICAgYnV5X2hvd19tdWNoOwogICAgICAgIEVSQzIwICAgIGJ1eV93aGljaF90b2tlbjsKICAgICAgICBhZGRyZXNzICBvd25lcjsKICAgICAgICBib29sICAgICBhY3RpdmU7CiAgICB9CgogICAgbWFwcGluZyAodWludCA9PiBPZmZlckluZm8pIHB1YmxpYyBvZmZlcnM7CgogICAgdWludCBwdWJsaWMgbGFzdF9vZmZlcl9pZDsKCiAgICBmdW5jdGlvbiBuZXh0X2lkKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIGxhc3Rfb2ZmZXJfaWQrKzsgcmV0dXJuIGxhc3Rfb2ZmZXJfaWQ7CiAgICB9CgogICAgbW9kaWZpZXIgY2FuX29mZmVyIHsKICAgICAgICBfOwogICAgfQogICAgbW9kaWZpZXIgY2FuX2J1eSh1aW50IGlkKSB7CiAgICAgICAgYXNzZXJ0KGlzQWN0aXZlKGlkKSk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIGNhbl9jYW5jZWwodWludCBpZCkgewogICAgICAgIGFzc2VydChpc0FjdGl2ZShpZCkpOwogICAgICAgIGFzc2VydChnZXRPd25lcihpZCkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgXzsKICAgIH0KICAgIGZ1bmN0aW9uIGlzQWN0aXZlKHVpbnQgaWQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wgYWN0aXZlKSB7CiAgICAgICAgcmV0dXJuIG9mZmVyc1tpZF0uYWN0aXZlOwogICAgfQogICAgZnVuY3Rpb24gZ2V0T3duZXIodWludCBpZCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyBvd25lcikgewogICAgICAgIHJldHVybiBvZmZlcnNbaWRdLm93bmVyOwogICAgfQogICAgZnVuY3Rpb24gZ2V0T2ZmZXIoIHVpbnQgaWQgKSBjb25zdGFudCByZXR1cm5zICh1aW50LCBFUkMyMCwgdWludCwgRVJDMjApIHsKICAgICAgdmFyIG9mZmVyID0gb2ZmZXJzW2lkXTsKICAgICAgcmV0dXJuIChvZmZlci5zZWxsX2hvd19tdWNoLCBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICAgIG9mZmVyLmJ1eV9ob3dfbXVjaCwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKTsKICAgIH0KCiAgICAvLyBub24gdW5kZXJmbG93aW5nIHN1YnRyYWN0aW9uCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQogICAgLy8gbm9uIG92ZXJmbG93aW5nIG11bHRpcGxpY2F0aW9uCiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50IGMpIHsKICAgICAgICBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFkZSggYWRkcmVzcyBzZWxsZXIsIHVpbnQgc2VsbF9ob3dfbXVjaCwgRVJDMjAgc2VsbF93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGJ1eWVyLCAgdWludCBidXlfaG93X211Y2gsICBFUkMyMCBidXlfd2hpY2hfdG9rZW4gKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgdmFyIHNlbGxlcl9wYWlkX291dCA9IGJ1eV93aGljaF90b2tlbi50cmFuc2ZlckZyb20oIGJ1eWVyLCBzZWxsZXIsIGJ1eV9ob3dfbXVjaCApOwogICAgICAgIGFzc2VydChzZWxsZXJfcGFpZF9vdXQpOwogICAgICAgIHZhciBidXllcl9wYWlkX291dCA9IHNlbGxfd2hpY2hfdG9rZW4udHJhbnNmZXIoIGJ1eWVyLCBzZWxsX2hvd19tdWNoICk7CiAgICAgICAgYXNzZXJ0KGJ1eWVyX3BhaWRfb3V0KTsKICAgICAgICBUcmFkZSggc2VsbF9ob3dfbXVjaCwgc2VsbF93aGljaF90b2tlbiwgYnV5X2hvd19tdWNoLCBidXlfd2hpY2hfdG9rZW4gKTsKICAgIH0KCiAgICAvLyAtLS0tIFB1YmxpYyBlbnRyeXBvaW50cyAtLS0tIC8vCgogICAgZnVuY3Rpb24gbWFrZSgKICAgICAgICBFUkMyMCAgICBoYXZlVG9rZW4sCiAgICAgICAgRVJDMjAgICAgd2FudFRva2VuLAogICAgICAgIHVpbnQxMjggIGhhdmVBbW91bnQsCiAgICAgICAgdWludDEyOCAgd2FudEFtb3VudAogICAgKSByZXR1cm5zIChieXRlczMyIGlkKSB7CiAgICAgICAgcmV0dXJuIGJ5dGVzMzIob2ZmZXIoaGF2ZUFtb3VudCwgaGF2ZVRva2VuLCB3YW50QW1vdW50LCB3YW50VG9rZW4pKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0YWtlKGJ5dGVzMzIgaWQsIHVpbnQxMjggbWF4VGFrZUFtb3VudCkgewogICAgICAgIGFzc2VydChidXkodWludDI1NihpZCksIG1heFRha2VBbW91bnQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBraWxsKGJ5dGVzMzIgaWQpIHsKICAgICAgICBhc3NlcnQoY2FuY2VsKHVpbnQyNTYoaWQpKSk7CiAgICB9CgogICAgLy8gTWFrZSBhIG5ldyBvZmZlci4gVGFrZXMgZnVuZHMgZnJvbSB0aGUgY2FsbGVyIGludG8gbWFya2V0IGVzY3Jvdy4KICAgIGZ1bmN0aW9uIG9mZmVyKCB1aW50IHNlbGxfaG93X211Y2gsIEVSQzIwIHNlbGxfd2hpY2hfdG9rZW4KICAgICAgICAgICAgICAgICAgLCB1aW50IGJ1eV9ob3dfbXVjaCwgIEVSQzIwIGJ1eV93aGljaF90b2tlbiApCiAgICAgICAgY2FuX29mZmVyCiAgICAgICAgc3luY2hyb25pemVkCiAgICAgICAgcmV0dXJucyAodWludCBpZCkKICAgIHsKICAgICAgICBhc3NlcnQodWludDEyOChzZWxsX2hvd19tdWNoKSA9PSBzZWxsX2hvd19tdWNoKTsKICAgICAgICBhc3NlcnQodWludDEyOChidXlfaG93X211Y2gpID09IGJ1eV9ob3dfbXVjaCk7CiAgICAgICAgYXNzZXJ0KHNlbGxfaG93X211Y2ggPiAwKTsKICAgICAgICBhc3NlcnQoc2VsbF93aGljaF90b2tlbiAhPSBFUkMyMCgweDApKTsKICAgICAgICBhc3NlcnQoYnV5X2hvd19tdWNoID4gMCk7CiAgICAgICAgYXNzZXJ0KGJ1eV93aGljaF90b2tlbiAhPSBFUkMyMCgweDApKTsKICAgICAgICBhc3NlcnQoc2VsbF93aGljaF90b2tlbiAhPSBidXlfd2hpY2hfdG9rZW4pOwoKICAgICAgICBPZmZlckluZm8gbWVtb3J5IGluZm87CiAgICAgICAgaW5mby5zZWxsX2hvd19tdWNoID0gc2VsbF9ob3dfbXVjaDsKICAgICAgICBpbmZvLnNlbGxfd2hpY2hfdG9rZW4gPSBzZWxsX3doaWNoX3Rva2VuOwogICAgICAgIGluZm8uYnV5X2hvd19tdWNoID0gYnV5X2hvd19tdWNoOwogICAgICAgIGluZm8uYnV5X3doaWNoX3Rva2VuID0gYnV5X3doaWNoX3Rva2VuOwogICAgICAgIGluZm8ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGluZm8uYWN0aXZlID0gdHJ1ZTsKICAgICAgICBpZCA9IG5leHRfaWQoKTsKICAgICAgICBvZmZlcnNbaWRdID0gaW5mbzsKCiAgICAgICAgdmFyIHNlbGxlcl9wYWlkID0gc2VsbF93aGljaF90b2tlbi50cmFuc2ZlckZyb20oIG1zZy5zZW5kZXIsIHRoaXMsIHNlbGxfaG93X211Y2ggKTsKICAgICAgICBhc3NlcnQoc2VsbGVyX3BhaWQpOwoKICAgICAgICBJdGVtVXBkYXRlKGlkKTsKICAgICAgICBMb2dNYWtlKAogICAgICAgICAgICBieXRlczMyKGlkKSwKICAgICAgICAgICAgc2hhMyhzZWxsX3doaWNoX3Rva2VuLCBidXlfd2hpY2hfdG9rZW4pLAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBzZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICBidXlfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgIHVpbnQxMjgoc2VsbF9ob3dfbXVjaCksCiAgICAgICAgICAgIHVpbnQxMjgoYnV5X2hvd19tdWNoKSwKICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICApOwogICAgfQoKICAgIC8vIEFjY2VwdCBnaXZlbiBgcXVhbnRpdHlgIG9mIGFuIG9mZmVyLiBUcmFuc2ZlcnMgZnVuZHMgZnJvbSBjYWxsZXIgdG8KICAgIC8vIG9mZmVyIG1ha2VyLCBhbmQgZnJvbSBtYXJrZXQgdG8gY2FsbGVyLgogICAgZnVuY3Rpb24gYnV5KCB1aW50IGlkLCB1aW50IHF1YW50aXR5ICkKICAgICAgICBjYW5fYnV5KGlkKQogICAgICAgIHN5bmNocm9uaXplZAogICAgICAgIHJldHVybnMgKCBib29sIHN1Y2Nlc3MgKQogICAgewogICAgICAgIGFzc2VydCh1aW50MTI4KHF1YW50aXR5KSA9PSBxdWFudGl0eSk7CgogICAgICAgIC8vIHJlYWQtb25seSBvZmZlci4gTW9kaWZ5IGFuIG9mZmVyIGJ5IGRpcmVjdGx5IGFjY2Vzc2luZyBvZmZlcnNbaWRdCiAgICAgICAgT2ZmZXJJbmZvIG1lbW9yeSBvZmZlciA9IG9mZmVyc1tpZF07CgogICAgICAgIC8vIGluZmVycmVkIHF1YW50aXR5IHRoYXQgdGhlIGJ1eWVyIHdpc2hlcyB0byBzcGVuZAogICAgICAgIHVpbnQgc3BlbmQgPSBzYWZlTXVsKHF1YW50aXR5LCBvZmZlci5idXlfaG93X211Y2gpIC8gb2ZmZXIuc2VsbF9ob3dfbXVjaDsKICAgICAgICBhc3NlcnQodWludDEyOChzcGVuZCkgPT0gc3BlbmQpOwoKICAgICAgICBpZiAoIHNwZW5kID4gb2ZmZXIuYnV5X2hvd19tdWNoIHx8IHF1YW50aXR5ID4gb2ZmZXIuc2VsbF9ob3dfbXVjaCApIHsKICAgICAgICAgICAgLy8gYnV5ZXIgd2FudHMgbW9yZSB0aGFuIGlzIGF2YWlsYWJsZQogICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmICggc3BlbmQgPT0gb2ZmZXIuYnV5X2hvd19tdWNoICYmIHF1YW50aXR5ID09IG9mZmVyLnNlbGxfaG93X211Y2ggKSB7CiAgICAgICAgICAgIC8vIGJ1eWVyIHdhbnRzIGV4YWN0bHkgd2hhdCBpcyBhdmFpbGFibGUKICAgICAgICAgICAgZGVsZXRlIG9mZmVyc1tpZF07CgogICAgICAgICAgICB0cmFkZSggb2ZmZXIub3duZXIsIHF1YW50aXR5LCBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciwgc3BlbmQsIG9mZmVyLmJ1eV93aGljaF90b2tlbiApOwoKICAgICAgICAgICAgSXRlbVVwZGF0ZShpZCk7CiAgICAgICAgICAgIExvZ1Rha2UoCiAgICAgICAgICAgICAgICBieXRlczMyKGlkKSwKICAgICAgICAgICAgICAgIHNoYTMob2ZmZXIuc2VsbF93aGljaF90b2tlbiwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKSwKICAgICAgICAgICAgICAgIG9mZmVyLm93bmVyLAogICAgICAgICAgICAgICAgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgIG9mZmVyLmJ1eV93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgICAgICB1aW50MTI4KG9mZmVyLnNlbGxfaG93X211Y2gpLAogICAgICAgICAgICAgICAgdWludDEyOChvZmZlci5idXlfaG93X211Y2gpLAogICAgICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoIHNwZW5kID4gMCAmJiBxdWFudGl0eSA+IDAgKSB7CiAgICAgICAgICAgIC8vIGJ1eWVyIHdhbnRzIGEgZnJhY3Rpb24gb2Ygd2hhdCBpcyBhdmFpbGFibGUKICAgICAgICAgICAgb2ZmZXJzW2lkXS5zZWxsX2hvd19tdWNoID0gc2FmZVN1YihvZmZlci5zZWxsX2hvd19tdWNoLCBxdWFudGl0eSk7CiAgICAgICAgICAgIG9mZmVyc1tpZF0uYnV5X2hvd19tdWNoID0gc2FmZVN1YihvZmZlci5idXlfaG93X211Y2gsIHNwZW5kKTsKCiAgICAgICAgICAgIHRyYWRlKCBvZmZlci5vd25lciwgcXVhbnRpdHksIG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciwgc3BlbmQsIG9mZmVyLmJ1eV93aGljaF90b2tlbiApOwoKICAgICAgICAgICAgSXRlbVVwZGF0ZShpZCk7CiAgICAgICAgICAgIExvZ1Rha2UoCiAgICAgICAgICAgICAgICBieXRlczMyKGlkKSwKICAgICAgICAgICAgICAgIHNoYTMob2ZmZXIuc2VsbF93aGljaF90b2tlbiwgb2ZmZXIuYnV5X3doaWNoX3Rva2VuKSwKICAgICAgICAgICAgICAgIG9mZmVyLm93bmVyLAogICAgICAgICAgICAgICAgb2ZmZXIuc2VsbF93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgIG9mZmVyLmJ1eV93aGljaF90b2tlbiwKICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgICAgICB1aW50MTI4KHF1YW50aXR5KSwKICAgICAgICAgICAgICAgIHVpbnQxMjgoc3BlbmQpLAogICAgICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGJ1eWVyIHdhbnRzIGFuIHVuc2F0aXNmaWFibGUgYW1vdW50IChsZXNzIHRoYW4gMSBpbnRlZ2VyKQogICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIENhbmNlbCBhbiBvZmZlci4gUmVmdW5kcyBvZmZlciBtYWtlci4KICAgIGZ1bmN0aW9uIGNhbmNlbCggdWludCBpZCApCiAgICAgICAgY2FuX2NhbmNlbChpZCkKICAgICAgICBzeW5jaHJvbml6ZWQKICAgICAgICByZXR1cm5zICggYm9vbCBzdWNjZXNzICkKICAgIHsKICAgICAgICAvLyByZWFkLW9ubHkgb2ZmZXIuIE1vZGlmeSBhbiBvZmZlciBieSBkaXJlY3RseSBhY2Nlc3Npbmcgb2ZmZXJzW2lkXQogICAgICAgIE9mZmVySW5mbyBtZW1vcnkgb2ZmZXIgPSBvZmZlcnNbaWRdOwogICAgICAgIGRlbGV0ZSBvZmZlcnNbaWRdOwoKICAgICAgICB2YXIgc2VsbGVyX3JlZnVuZGVkID0gb2ZmZXIuc2VsbF93aGljaF90b2tlbi50cmFuc2Zlciggb2ZmZXIub3duZXIgLCBvZmZlci5zZWxsX2hvd19tdWNoICk7CiAgICAgICAgYXNzZXJ0KHNlbGxlcl9yZWZ1bmRlZCk7CgogICAgICAgIEl0ZW1VcGRhdGUoaWQpOwogICAgICAgIExvZ0tpbGwoCiAgICAgICAgICAgIGJ5dGVzMzIoaWQpLAogICAgICAgICAgICBzaGEzKG9mZmVyLnNlbGxfd2hpY2hfdG9rZW4sIG9mZmVyLmJ1eV93aGljaF90b2tlbiksCiAgICAgICAgICAgIG9mZmVyLm93bmVyLAogICAgICAgICAgICBvZmZlci5zZWxsX3doaWNoX3Rva2VuLAogICAgICAgICAgICBvZmZlci5idXlfd2hpY2hfdG9rZW4sCiAgICAgICAgICAgIHVpbnQxMjgob2ZmZXIuc2VsbF9ob3dfbXVjaCksCiAgICAgICAgICAgIHVpbnQxMjgob2ZmZXIuYnV5X2hvd19tdWNoKSwKICAgICAgICAgICAgdWludDY0KG5vdykKICAgICAgICApOwoKICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgIH0KfQoKLy8gU2ltcGxlIE1hcmtldCB3aXRoIGEgbWFya2V0IGxpZmV0aW1lLiBXaGVuIHRoZSBsaWZldGltZSBoYXMgZWxhcHNlZCwKLy8gb2ZmZXJzIGNhbiBvbmx5IGJlIGNhbmNlbGxlZCAob2ZmZXIgYW5kIGJ1eSB3aWxsIHRocm93KS4KCmNvbnRyYWN0IEV4cGlyaW5nTWFya2V0IGlzIFNpbXBsZU1hcmtldCB7CiAgICB1aW50IHB1YmxpYyBsaWZldGltZTsKICAgIHVpbnQgcHVibGljIGNsb3NlX3RpbWU7CgogICAgZnVuY3Rpb24gRXhwaXJpbmdNYXJrZXQodWludCBsaWZldGltZV8pIHsKICAgICAgICBsaWZldGltZSA9IGxpZmV0aW1lXzsKICAgICAgICBjbG9zZV90aW1lID0gZ2V0VGltZSgpICsgbGlmZXRpbWVfOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRpbWUoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcDsKICAgIH0KICAgIGZ1bmN0aW9uIGlzQ2xvc2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCBjbG9zZWQpIHsKICAgICAgICByZXR1cm4gKGdldFRpbWUoKSA+IGNsb3NlX3RpbWUpOwogICAgfQoKICAgIC8vIGFmdGVyIG1hcmtldCBsaWZldGltZSBoYXMgZWxhcHNlZCwgbm8gbmV3IG9mZmVycyBhcmUgYWxsb3dlZAogICAgbW9kaWZpZXIgY2FuX29mZmVyIHsKICAgICAgICBhc3NlcnQoIWlzQ2xvc2VkKCkpOwogICAgICAgIF87CiAgICB9CiAgICAvLyBhZnRlciBjbG9zZSwgbm8gbmV3IGJ1eXMgYXJlIGFsbG93ZWQKICAgIG1vZGlmaWVyIGNhbl9idXkodWludCBpZCkgewogICAgICAgIGFzc2VydChpc0FjdGl2ZShpZCkpOwogICAgICAgIGFzc2VydCghaXNDbG9zZWQoKSk7CiAgICAgICAgXzsKICAgIH0KICAgIC8vIGFmdGVyIGNsb3NlLCBhbnlvbmUgY2FuIGNhbmNlbCBhbiBvZmZlcgogICAgbW9kaWZpZXIgY2FuX2NhbmNlbCh1aW50IGlkKSB7CiAgICAgICAgYXNzZXJ0KGlzQWN0aXZlKGlkKSk7CiAgICAgICAgYXNzZXJ0KGlzQ2xvc2VkKCkgfHwgKG1zZy5zZW5kZXIgPT0gZ2V0T3duZXIoaWQpKSk7CiAgICAgICAgXzsKICAgIH0KfQ=='.
	

]
