Class {
	#name : #SRTbe00f2ee3f4cc6d44953fae9139a34322f7c0871,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbe00f2ee3f4cc6d44953fae9139a34322f7c0871 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Ci8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KfQovKioKICogQHRpdGxlIEdzY1Rva2VuU3RhbmRhcmQKICogQGRldiB0aGUgaW50ZXJmYWNlIG9mIEdzY1Rva2VuU3RhbmRhcmQKICovCmNvbnRyYWN0IEdzY1Rva2VuU3RhbmRhcmQgewogICAgdWludDI1NiBwdWJsaWMgc3Rha2VTdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZU1pbkFnZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlTWF4QWdlOwogICAgZnVuY3Rpb24gbWludCgpIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gY29pbkFnZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYW5udWFsSW50ZXJlc3QoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCB1aW50IF9yZXdhcmQpOwp9Ci8qKgogICAgQERldiBnaXRodWIuY29tL0hhbXphWWFzaW4xCiovCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQpjb250cmFjdCBHc2NUb2tlbiBpcyBFUkMyMCxHc2NUb2tlblN0YW5kYXJkLE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiR2FzIENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiR1NDIjsKICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICB1aW50IHB1YmxpYyBjaGFpblN0YXJ0VGltZTsgLy9jaGFpbiBzdGFydCB0aW1lCiAgICB1aW50IHB1YmxpYyBjaGFpblN0YXJ0QmxvY2tOdW1iZXI7IC8vY2hhaW4gc3RhcnQgYmxvY2sgbnVtYmVyCiAgICB1aW50IHB1YmxpYyBzdGFrZVN0YXJ0VGltZTsgLy9zdGFrZSBzdGFydCB0aW1lCiAgICB1aW50IHB1YmxpYyBzdGFrZU1pbkFnZSA9IDMgZGF5czsgLy8gbWluaW11bSBhZ2UgZm9yIGNvaW4gYWdlOiAzIERheXMKICAgIHVpbnQgcHVibGljIHN0YWtlTWF4QWdlID0gOTAgZGF5czsgLy8gc3Rha2UgYWdlIG9mIGZ1bGwgd2VpZ2h0OiA5MCBEYXlzCiAgICB1aW50IHB1YmxpYyBtYXhNaW50UHJvb2ZPZlN0YWtlID0gMTAqKjE3OyAvLyBkZWZhdWx0IDEwJSBhbm51YWwgaW50ZXJlc3QKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgdWludCBwdWJsaWMgbWF4VG90YWxTdXBwbHk7CiAgICB1aW50IHB1YmxpYyB0b3RhbEluaXRpYWxTdXBwbHk7CiAgICBzdHJ1Y3QgdHJhbnNmZXJJblN0cnVjdCB7CiAgICB1aW50MTI4IGFtb3VudDsKICAgIHVpbnQ2NCB0aW1lOwogICAgfQogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdHJhbnNmZXJJblN0cnVjdFtdKSB0cmFuc2ZlckluczsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CiAgICAvKioKICAgICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIGNhbkdzY01pbnQoKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFN1cHBseSA8IG1heFRvdGFsU3VwcGx5KTsKICAgICAgICBfOwogICAgfQogICAgZnVuY3Rpb24gR3NjVG9rZW4oKSB7CiAgICAgICAgbWF4VG90YWxTdXBwbHkgPSAyNTAwMDAwMDAgKiAxIGV0aGVyOyAvLyAyNTAgTWlsLgogICAgICAgIHRvdGFsSW5pdGlhbFN1cHBseSA9IDEzMDAwMDAwMCAqIDEgZXRoZXI7IC8vIDEzMCBNaWwuCiAgICAgICAgY2hhaW5TdGFydFRpbWUgPSBub3c7CiAgICAgICAgY2hhaW5TdGFydEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxJbml0aWFsU3VwcGx5OwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxJbml0aWFsU3VwcGx5OwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBfdG8pIAogICAgICAgIHJldHVybiBtaW50KCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgCiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBpZih0cmFuc2Zlckluc1tfZnJvbV0ubGVuZ3RoID4gMCkgCiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW19mcm9tXTsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIHRyYW5zZmVySW5zW19mcm9tXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1tfZnJvbV0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgZnVuY3Rpb24gbWludCgpIGNhbkdzY01pbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdIDw9IDApIAogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZih0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5sZW5ndGggPD0gMCkgCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHVpbnQgcmV3YXJkID0gZ2V0UHJvb2ZPZlN0YWtlUmV3YXJkKG1zZy5zZW5kZXIpOwogICAgICAgIGlmKHJld2FyZCA8PSAwKSAKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQocmV3YXJkKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChyZXdhcmQpOwogICAgICAgIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDEyOChiYWxhbmNlc1ttc2cuc2VuZGVyXSksdWludDY0KG5vdykpKTsKICAgICAgICBNaW50KG1zZy5zZW5kZXIsIHJld2FyZCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRCbG9ja051bWJlcigpIHJldHVybnMgKHVpbnQgYmxvY2tOdW1iZXIpIHsKICAgICAgICBibG9ja051bWJlciA9IGJsb2NrLm51bWJlci5zdWIoY2hhaW5TdGFydEJsb2NrTnVtYmVyKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNvaW5BZ2UoKSBjb25zdGFudCByZXR1cm5zICh1aW50IG15Q29pbkFnZSkgewogICAgICAgIG15Q29pbkFnZSA9IGdldENvaW5BZ2UobXNnLnNlbmRlcixub3cpOwogICAgfQogICAgZnVuY3Rpb24gYW5udWFsSW50ZXJlc3QoKSBjb25zdGFudCByZXR1cm5zKHVpbnQgaW50ZXJlc3QpIHsKICAgICAgICBpbnRlcmVzdCA9IG1heE1pbnRQcm9vZk9mU3Rha2U7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRQcm9vZk9mU3Rha2VSZXdhcmQoYWRkcmVzcyBfYWRkcmVzcykgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJlcXVpcmUoIChub3cgPj0gc3Rha2VTdGFydFRpbWUpICYmIChzdGFrZVN0YXJ0VGltZSA+IDApICk7CiAgICAgICAgdWludCBfbm93ID0gbm93OwogICAgICAgIHVpbnQgX2NvaW5BZ2UgPSBnZXRDb2luQWdlKF9hZGRyZXNzLCBfbm93KTsKICAgICAgICBpZihfY29pbkFnZSA8PSAwKSAKICAgICAgICByZXR1cm4gMDsKICAgICAgICB1aW50IGludGVyZXN0ID0gbWF4TWludFByb29mT2ZTdGFrZTsKICAgICAgICByZXR1cm4gKF9jb2luQWdlICogaW50ZXJlc3QpLmRpdigzNjUgKiAoMTAqKmRlY2ltYWxzKSk7IC8vIDIgPSAzNjUKICAgIH0KICAgIGZ1bmN0aW9uIGdldENvaW5BZ2UoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfbm93KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IF9jb2luQWdlKSB7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aCA8PSAwKSAKICAgICAgICByZXR1cm4gMDsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB0cmFuc2Zlckluc1tfYWRkcmVzc10ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYoX25vdyA8IHVpbnQodHJhbnNmZXJJbnNbX2FkZHJlc3NdW2ldLnRpbWUpLmFkZChzdGFrZU1pbkFnZSkpIAogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgdWludCBuQ29pblNlY29uZHMgPSBfbm93LnN1Yih1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKSk7CiAgICAgICAgICAgIGlmKG5Db2luU2Vjb25kcyA+IHN0YWtlTWF4QWdlKSB7CiAgICAgICAgICAgIG5Db2luU2Vjb25kcyA9IHN0YWtlTWF4QWdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb2luQWdlID0gX2NvaW5BZ2UuYWRkKHVpbnQodHJhbnNmZXJJbnNbX2FkZHJlc3NdW2ldLmFtb3VudCkgKiBuQ29pblNlY29uZHMuZGl2KDEgZGF5cykpOyAvLyBkYXlzCiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gb3duZXJTZXRTdGFrZVN0YXJ0VGltZSh1aW50IHRpbWVzdGFtcCkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKChzdGFrZVN0YXJ0VGltZSA8PSAwKSAmJiAodGltZXN0YW1wID49IGNoYWluU3RhcnRUaW1lKSk7CiAgICAgICAgc3Rha2VTdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICB9CiAgICBmdW5jdGlvbiBvd25lckJ1cm5Ub2tlbih1aW50IF92YWx1ZSkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KGJhbGFuY2VzW21zZy5zZW5kZXJdKSx1aW50NjQobm93KSkpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgdG90YWxJbml0aWFsU3VwcGx5ID0gdG90YWxJbml0aWFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIG1heFRvdGFsU3VwcGx5ID0gbWF4VG90YWxTdXBwbHkuc3ViKF92YWx1ZSoxMCk7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgfQogICAgLyogQmF0Y2ggdG9rZW4gdHJhbnNmZXIuIFVzZWQgYnkgY29udHJhY3QgY3JlYXRvciB0byBkaXN0cmlidXRlIGluaXRpYWwgdG9rZW5zIHRvIGhvbGRlcnMgKi8KICAgIGZ1bmN0aW9uIGJhdGNoVHJhbnNmZXIoYWRkcmVzc1tdIF9yZWNpcGllbnRzLCB1aW50W10gX3ZhbHVlcykgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCBfcmVjaXBpZW50cy5sZW5ndGggPiAwICYmIF9yZWNpcGllbnRzLmxlbmd0aCA9PSBfdmFsdWVzLmxlbmd0aCk7CiAgICAgICAgdWludCB0b3RhbCA9IDA7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBfdmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRvdGFsID0gdG90YWwuYWRkKF92YWx1ZXNbaV0pOwogICAgICAgIH0KICAgICAgICByZXF1aXJlKHRvdGFsIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIGZvcih1aW50IGogPSAwOyBqIDwgX3JlY2lwaWVudHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dID0gYmFsYW5jZXNbX3JlY2lwaWVudHNbal1dLmFkZChfdmFsdWVzW2pdKTsKICAgICAgICAgICAgdHJhbnNmZXJJbnNbX3JlY2lwaWVudHNbal1dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MTI4KF92YWx1ZXNbal0pLF9ub3cpKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3JlY2lwaWVudHNbal0sIF92YWx1ZXNbal0pOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1Yih0b3RhbCk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgCiAgICAgICAgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCkgCiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQxMjgoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
