Class {
	#name : #SRTfad4fbb5fb8dc50aa053fe6728691d7b5b4740c5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfad4fbb5fb8dc50aa053fe6728691d7b5b4740c5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjA7CgovKgpQcm9qZWN0OiBYUEEgRXhjaGFuZ2UgLSBodHRwczovL3hwYS5leGNoYW5nZQpBdXRob3IgOiBMdXBoaWEgQ2hhbmcgLSA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjQyMmUzNzMyMmEyYjIzNmMyMTJhMjMyYzI1MDIyYjMxMzcyYzIxMmUyZDM3MjY2YzIxMmQyZiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4KICovCgppbnRlcmZhY2UgVG9rZW4gewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50MjU2IHRzKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7Cn0KCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCB4LCB1aW50IHkpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBwdXJlCiAgICByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgIHJlcXVpcmUoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgeCwgdWludCB5KQogICAgICAgIGludGVybmFsCiAgICAgICAgcHVyZQogICAgcmV0dXJucyh1aW50KSB7CiAgICAgIHJlcXVpcmUoeCA+PSB5KTsKICAgICAgdWludDI1NiB6ID0geCAtIHk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCB4LCB1aW50IHkpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBwdXJlCiAgICByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludCB6ID0geCAqIHk7CiAgICAgIHJlcXVpcmUoKHggPT0gMCkgfHwgKHogLyB4ID09IHkpKTsKICAgICAgcmV0dXJuIHo7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNhZmVEaXYodWludCB4LCB1aW50IHkpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBwdXJlCiAgICByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXF1aXJlKHkgPiAwKTsKICAgICAgICByZXR1cm4geCAvIHk7CiAgICB9CgogICAgZnVuY3Rpb24gcmFuZG9tKHVpbnQgTiwgdWludCBzYWx0KQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgcmV0dXJucyh1aW50KSB7CiAgICAgIGJ5dGVzMzIgaGFzaCA9IGtlY2NhazI1NihibG9jay5udW1iZXIsIG1zZy5zZW5kZXIsIHNhbHQpOwogICAgICByZXR1cm4gdWludChoYXNoKSAlIE47CiAgICB9Cn0KCmNvbnRyYWN0IEF1dGhvcml6YXRpb24gewogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHB1YmxpYyBhZ2VudEJvb2tzOwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBvcGVyYXRvcjsKICAgIGFkZHJlc3MgcHVibGljIGJhbms7CiAgICBib29sIHB1YmxpYyBwb3dlclN0YXR1cyA9IHRydWU7CgogICAgZnVuY3Rpb24gQXV0aG9yaXphdGlvbigpCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIG9wZXJhdG9yID0gbXNnLnNlbmRlcjsKICAgICAgICBiYW5rID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIKICAgIHsKICAgICAgICBhc3NlcnQobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPcGVyYXRvcgogICAgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG9wZXJhdG9yIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBvbmx5QWN0aXZlCiAgICB7CiAgICAgICAgYXNzZXJ0KHBvd2VyU3RhdHVzKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXJfKQogICAgICAgIG9ubHlPd25lcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIG93bmVyID0gbmV3T3duZXJfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhc3NpZ25PcGVyYXRvcihhZGRyZXNzIHVzZXJfKQogICAgICAgIHB1YmxpYwogICAgICAgIG9ubHlPd25lcgogICAgewogICAgICAgIG9wZXJhdG9yID0gdXNlcl87CiAgICAgICAgYWdlbnRCb29rc1tiYW5rXSA9IHVzZXJfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhc3NpZ25CYW5rKGFkZHJlc3MgYmFua18pCiAgICAgICAgcHVibGljCiAgICAgICAgb25seU93bmVyCiAgICB7CiAgICAgICAgYmFuayA9IGJhbmtfOwogICAgfQoKICAgIGZ1bmN0aW9uIGFzc2lnbkFnZW50KAogICAgICAgIGFkZHJlc3MgYWdlbnRfCiAgICApCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgYWdlbnRCb29rc1ttc2cuc2VuZGVyXSA9IGFnZW50XzsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1JlcHJlc2VudG9yKAogICAgICAgIGFkZHJlc3MgcmVwcmVzZW50b3JfCiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGFnZW50Qm9va3NbcmVwcmVzZW50b3JfXSA9PSBtc2cuc2VuZGVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFVzZXIoCiAgICAgICAgYWRkcmVzcyByZXByZXNlbnRvcl8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgIHJldHVybnMoYWRkcmVzcykgewogICAgICAgIHJldHVybiBpc1JlcHJlc2VudG9yKHJlcHJlc2VudG9yXykgPyByZXByZXNlbnRvcl8gOiBtc2cuc2VuZGVyOwogICAgfQp9CgovKiAgRXJyb3IgQ29kZQogICAgMDogaW5zdWZmaWNpZW50IGZ1bmRzICh1c2VyKQogICAgMTogaW5zdWZmaWNpZW50IGZ1bmRzIChjb250cmFjdCkKICAgIDI6IGludmFsaWQgYW1vdW50CiAgICAzOiBpbnZhbGlkIHByaWNlCiAqLwoKLyoKICAgIDEuIOaqoumpl+aYr+WQpuaMh+WumuS7o+eQhueUqOaItu+8jOiLpeaYr+S4lOeCuuWQiOazleS7o+eQhuS6uuWJh+Wwh+aTjeS9nOinkuiJsui9ieaPm+eCuuiiq+S7o+eQhuS6uu+8jOWQpuWJh+aTjeS9nOinkuiJsuS4jeiuigogICAgMi4g5qqi6amX5q2k5pON5L2c5piv5ZCm5pyJ5a2Y5YWlIEVUSO+8jOacieWJh+aaq+aZgue0gOmMhOWtmOWFpemhjeW6piBB77yM6Iul5o6b5Zau5oyH5a6aIGZyb21Ub2tlbiDkuI3mmK8gRVRIIOWJh+ebtOaOpeabtOaWsOeUqOaItiBFVEgg5biz5oi26aSY6aGNCiAgICAzLiDmqqLpqZfmraTmk43kvZzmmK/lkKbmnInlrZjlhaUgZnJvbVRva2Vu77yM5pyJ5YmH5pqr5pmC57SA6YyE5a2Y5YWl6aGN5bqmIEEKICAgIDQuIOaqoumpl+eUqOaItiBmcm9tVG9rZW4g5biz5oi26aSY6aGNICsg5a2Y5YWl6aGN5bqmIEEg5piv5ZCmID49IEFtb3VudO+8jOiLpeaYr+mAgeWHuiBtYWtlT3JkZXIg5o6b5Zau5LqL5Lu277yM5ZCm5YmH57WQ5p2f5pON5L2cCiAgICA1LiDkvp3nhacgZnJvbVRva2Vu44CBdG9Ub2tlbiDlsIvmib7lj6/ljLnphY3nmoTkuqTmmJPlsI0gUAogICAgNi4g5om+5Ye6IFAg55qE5pyA5L2O5YO55qC85Zau6YCy6KGM5Yy56YWN77yM6KiY6YyE5Yy56YWN5pW46YeP77yM6YCB5Ye6IGZpbGxPcmRlciDmiJDkuqTkuovku7bvvIzkuKbntZDnrpcgbWFrZXIg5Lqk5piT57WQ5p6c77yM6Iul5oiQ5Lqk5a6M6YKE5pyJ5o6b5Zau5pW46YeP5pyJ5Ymp5LiU5pyq6YGU6L+05ZyI5qyh5pW45LiK6ZmQ5YmH6YeN6KSH5q2k5q2l6amfCiAgICA3LiDntbHoqIjmraXpqZ8gNiDnuL3miJDkuqTph4/jgIHkuqTmmJPlg7nlt67liKnmvaTjgIHkuqTmmJPmiYvnuozosrsKICAgIDguIOiLpeaJo+mZpOe4veaIkOS6pOmHj+W+jCBUYWtlciDmjpvllq7lsJrmnKrmkq7lkIjlrozvvIzliYflsIflianppJjpoY3luqbovYnmj5vngrogTWFrZXIg5ZauCiAgICA5LiDntZDnrpfkuqTmmJPmiYDmiYvnuozosrsKICAgIDEwLiDntZDnrpcgVGFrZXIg5Lqk5piT57WQ5p6cCiAqLwoKY29udHJhY3QgQmFsaXYgaXMgU2FmZU1hdGgsIEF1dGhvcml6YXRpb24gewogICAgLyogc3RydWN0IGZvciBleGNoYW5nZSBkYXRhICovCiAgICBzdHJ1Y3QgbGlua2VkQm9vayB7CiAgICAgICAgdWludDI1NiBhbW91bnQ7CiAgICAgICAgYWRkcmVzcyBuZXh0VXNlcjsKICAgIH0KCiAgICAvKiBidXNpbmVzcyBvcHRpb25zICovCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIG1pbkFtb3VudDsKICAgIHVpbnQyNTZbM10gcHVibGljIGZlZXJhdGUgPSBbMCwgMSAqICgxMCAqKiAxNSksIDEgKiAoMTAgKiogMTUpXTsKICAgIHVpbnQyNTYgcHVibGljIGF1dG9NYXRjaCA9IDEwOwogICAgdWludDI1NiBwdWJsaWMgbWF4QW1vdW50ID0gMTAgKiogMjc7CiAgICB1aW50MjU2IHB1YmxpYyBtYXhQcmljZSA9IDEwICoqIDM2OwogICAgYWRkcmVzcyBwdWJsaWMgWFBBVG9rZW4gPSAweDAwOTA1MjhhZWIzYTJiNzM2Yjc4MGZkMWI2YzQ3OGJiN2UxZDY0MzE3MDsKCiAgICAvKiBleGNoYW5nZSBkYXRhICovCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gbGlua2VkQm9vaykpKSkgcHVibGljIG9yZGVyQm9va3M7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSkpIHB1YmxpYyBuZXh0T3JkZXJQcmljZTsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBwcmljZUJvb2tzOwogICAgCiAgICAvKiB1c2VyIGRhdGEgKi8KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBpbnRlcm5hbCBtYW51YWxXaXRoZHJhdzsKCiAgICAvKiBldmVudCAqLwogICAgZXZlbnQgZURlcG9zaXQoYWRkcmVzcyB1c2VyLGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IGVXaXRoZHJhdyhhZGRyZXNzIHVzZXIsYWRkcmVzcyB0b2tlbiwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgZU1ha2VPcmRlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHVzZXIsIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IGVGaWxsT3JkZXIoYWRkcmVzcyBmcm9tVG9rZW4sIGFkZHJlc3MgdG9Ub2tlbiwgdWludDI1NiBwcmljZSwgYWRkcmVzcyB1c2VyLCB1aW50MjU2IGFtb3VudCk7CiAgICBldmVudCBlQ2FuY2VsT3JkZXIoYWRkcmVzcyBmcm9tVG9rZW4sIGFkZHJlc3MgdG9Ub2tlbiwgdWludDI1NiBwcmljZSwgYWRkcmVzcyB1c2VyLCB1aW50MjU2IGFtb3VudCk7CgogICAgLy9ldmVudCBFcnJvcih1aW50MjU2IGNvZGUpOwoKICAgIC8qIGNvbnN0cnVjdG9yICovCiAgICBmdW5jdGlvbiBCYWxpdigpIHB1YmxpYyB7fQoKICAgIC8qIE9wZXJhdG9yIEZ1bmN0aW9uCiAgICAgICAgZnVuY3Rpb24gc2V0dXAodWludDI1NiBhdXRvTWF0Y2gsIHVpbnQyNTYgbWF4QW1vdW50LCB1aW50MjU2IG1heFByaWNlKSBleHRlcm5hbDsKICAgICAgICBmdW5jdGlvbiBzZXRNaW5BbW91bnQoYWRkcmVzcyB0b2tlbiwgdWludDI1NiBhbW91bnQpIGV4dGVybmFsOwogICAgICAgIGZ1bmN0aW9uIHNldEZlZXJhdGUodWludDI1NlszXSBbbWFrZXIsIHRha2VyLCBhdXRvV2l0aGRyYXddKSBleHRlcm5hbDsKICAgICovCgogICAgLyogRXh0ZXJuYWwgRnVuY3Rpb24KICAgICAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZTsKICAgICAgICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgcmVwcmVzZW50b3IpIGV4dGVybmFsIHBheWFibGU7CiAgICAgICAgZnVuY3Rpb24gd2l0aGRyYXcoYWRkcmVzcyB0b2tlbiwgdWludDI1NiBhbW91bnQsIGFkZHJlc3MgcmVwcmVzZW50b3IpIGV4dGVybmFsIHJldHVybnMoYm9vbCk7CiAgICAgICAgZnVuY3Rpb24gdXNlclRha2VPcmRlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IGFtb3VudCwgYWRkcmVzcyByZXByZXNlbnRvcikgZXh0ZXJuYWwgcGF5YWJsZSByZXR1cm5zKGJvb2wpOwogICAgICAgIGZ1bmN0aW9uIHVzZXJDYW5jZWxPcmRlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IGFtb3VudCwgYWRkcmVzcyByZXByZXNlbnRvcikgZXh0ZXJuYWwgcmV0dXJucyhib29sKTsKICAgICAgICBmdW5jdGlvbiBjYWN1bGF0ZUZlZShhZGRyZXNzIHVzZXIsIHVpbnQyNTYgYW1vdW50LCB1aW50OCByb2xlKSBleHRlcm5hbCByZXR1cm5zKHVpbnQyNTYgcmVtYWluaW5nLCB1aW50MjU2IGZlZSk7CiAgICAgICAgZnVuY3Rpb24gdHJhZGUoYWRkcmVzcyBmcm9tVG9rZW4sIGFkZHJlc3MgdG9Ub2tlbikgZXh0ZXJuYWw7CiAgICAgICAgZnVuY3Rpb24gc2V0TWFudWFsV2l0aGRyYXcoYm9vbCkgZXh0ZXJuYWw7CiAgICAgICAgZnVuY3Rpb24gZ2V0TWluQW1vdW50KGFkZHJlc3MpIGV4dGVybmFsIHJldHVybnModWludDI1Nik7CiAgICAqLwoKICAgIC8qIEludGVybmFsIEZ1bmN0aW9uCiAgICAgICAgZnVuY3Rpb24gZGVwb3NpdEFuZEZyZWV6ZShhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIpIGludGVybmFsIHBheWFibGUgcmV0dXJucyh1aW50MjU2IGFtb3VudCk7CiAgICAgICAgZnVuY3Rpb24gY2hlY2tCYWxhbmNlKGFkZHJlc3MgdXNlciwgYWRkcmVzcyB0b2tlbiwgdWludDI1NiBhbW91bnQsIHVpbnQyNTYgZGVwb3NpdEFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKICAgICAgICBmdW5jdGlvbiBjaGVja0Ftb3VudChhZGRyZXNzIHRva2VuLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKICAgICAgICBmdW5jdGlvbiBjaGVja1ByaWNlQW1vdW50KHVpbnQyNTYgcHJpY2UpIGludGVybmFsIHJldHVybnMoYm9vbCk7CiAgICAgICAgZnVuY3Rpb24gbWFrZU9yZGVyKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgYW1vdW50LCBhZGRyZXNzIHVzZXIsIHVpbnQyNTYgZGVwb3NpdEFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2IGFtb3VudCk7CiAgICAgICAgZnVuY3Rpb24gZmluZEFuZFRyYWRlKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTZbMl0gdG90YWxNYXRjaEFtb3VudFtmcm9tVG9rZW4sIHRvVG9rZW5dLCB1aW50MjU2WzJdIHByb2ZpdFtmcm9tVG9rZW4sIHRvVG9rZW5dKTsKICAgICAgICBmdW5jdGlvbiBtYWtlVHJhZGUoYWRkcmVzcyBmcm9tVG9rZW4sIGFkZHJlc3MgdG9Ub2tlbiwgdWludDI1NiBwcmljZSwgdWludDI1NiBiZXN0UHJpY2UsIHVpbnQyNTYgcHJldkJlc3RQcmljZSwgdWludDI1NiByZW1haW5pbmdBbW91bnQpIGludGVybmFsIHJldHVybnModWludDI1NlszXSBbZmlsbFRha2VyLCBmaWxsTWFrZXIsIG1ha2VyRmVlXSk7CiAgICAgICAgZnVuY3Rpb24gbWFrZVRyYWRlRGV0YWlsKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgYmVzdFByaWNlLCBhZGRyZXNzIG1ha2VyLCB1aW50MjU2IHJlbWFpbmluZ0Ftb3VudCkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2WzNdIFtmaWxsVGFrZXIsIGZpbGxNYWtlciwgbWFrZXJGZWVdLCBib29sIG1ha2VyRnVsbGZpbGwpOwogICAgICAgIGZ1bmN0aW9uIGNhY3VsYXRlRmlsbCh1aW50MjU2IHByb3ZpZGUsIHVpbnQyNTYgcmVxdWlyZSwgdWludDI1NiBwcmljZSwgdWludDI1NiBwYWlyUHJvdmlkZSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zKHVpbnQyNTYgZmlsbEFtb3VudCk7CiAgICAgICAgZnVuY3Rpb24gY2hlY2tQcmljZVBhaXIodWludDI1NiBwcmljZSwgdWludDI1NiBiZXN0UHJpY2UpIGludGVybmFsIHB1cmUgcmV0dXJucyhib29sIG1hdGNoZWQpOwogICAgICAgIGZ1bmN0aW9uIGZpbGxPcmRlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2IGZlZSk7CiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbihhZGRyZXNzIHVzZXIsIGFkZHJlc3MgdG9rZW4sIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpOwogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbGFuY2UoYWRkcmVzcyB1c2VyLCBhZGRyZXNzIHRva2VuLCB1aW50MjU2IGFtb3VudCwgYm9vbCBhZGRPclN1YikgaW50ZXJuYWwgcmV0dXJucyhib29sKTsKICAgICAgICBmdW5jdGlvbiBjb25uZWN0T3JkZXJQcmljZShhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IHByZXZQcmljZSkgaW50ZXJuYWw7CiAgICAgICAgZnVuY3Rpb24gY29ubmVjdE9yZGVyVXNlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHVzZXIpIGludGVybmFsOwogICAgICAgIGZ1bmN0aW9uIGRpc2Nvbm5lY3RPcmRlclByaWNlKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgcHJldlByaWNlKSBpbnRlcm5hbDsKICAgICAgICBmdW5jdGlvbiBkaXNjb25uZWN0T3JkZXJVc2VyKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIHVpbnQyNTYgcHJldlByaWNlLCBhZGRyZXNzIHVzZXIsIGFkZHJlc3MgcHJldlVzZXIpIGludGVybmFsOwogICAgICAgIGZ1bmN0aW9uIGdldE5leHRPcmRlclByaWNlKGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UpIGludGVybmFsIHZpZXcgcmV0dXJucyh1aW50MjU2IHByaWNlKTsKICAgICAgICBmdW5jdGlvbiB1cGRhdGVOZXh0T3JkZXJQcmljZShhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCB1aW50MjU2IG5leHRQcmljZSkgaW50ZXJuYWw7CiAgICAgICAgZnVuY3Rpb24gZ2V0TmV4T3JkZXJ0VXNlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHVzZXIpIGludGVybmFsIHZpZXcgcmV0dXJucyhhZGRyZXNzIG5leHRVc2VyKTsKICAgICAgICBmdW5jdGlvbiBnZXRPcmRlckFtb3VudChhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHVzZXIpIGludGVybmFsIHZpZXcgcmV0dXJucyh1aW50MjU2IGFtb3VudCk7CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTmV4dE9yZGVyVXNlcihhZGRyZXNzIGZyb21Ub2tlbiwgYWRkcmVzcyB0b1Rva2VuLCB1aW50MjU2IHByaWNlLCBhZGRyZXNzIHVzZXIsIGFkZHJlc3MgbmV4dFVzZXIpIGludGVybmFsOwogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyQW1vdW50KGFkZHJlc3MgZnJvbVRva2VuLCBhZGRyZXNzIHRvVG9rZW4sIHVpbnQyNTYgcHJpY2UsIGFkZHJlc3MgdXNlciwgdWludDI1NiBhbW91bnQsIGJvb2wgYWRkT3JTdWIpIGludGVybmFsOwogICAgKi8KCiAgICAvKiBPcGVyYXRvciBmdW5jdGlvbiAqLwogICAgZnVuY3Rpb24gc2V0dXAoCiAgICAgICAgdWludDI1NiBhdXRvTWF0Y2hfLAogICAgICAgIHVpbnQyNTYgbWF4QW1vdW50XywKICAgICAgICB1aW50MjU2IG1heFByaWNlXywKICAgICAgICBib29sIHBvd2VyXwogICAgKQogICAgICAgIG9ubHlPcGVyYXRvcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGF1dG9NYXRjaCA9IGF1dG9NYXRjaF87CiAgICAgICAgbWF4QW1vdW50ID0gbWF4QW1vdW50XzsKICAgICAgICBtYXhQcmljZSA9IG1heFByaWNlXzsKICAgICAgICBwb3dlclN0YXR1cyA9IHBvd2VyXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0TWluQW1vdW50KAogICAgICAgIGFkZHJlc3MgdG9rZW5fLAogICAgICAgIHVpbnQyNTYgYW1vdW50XwogICAgKQogICAgICAgIG9ubHlPcGVyYXRvcgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIG1pbkFtb3VudFt0b2tlbl9dID0gYW1vdW50XzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0TWluQW1vdW50KAogICAgICAgIGFkZHJlc3MgdG9rZW5fCiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgdmlldwogICAgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG1pbkFtb3VudFt0b2tlbl9dID4gMAogICAgICAgICAgICA/IG1pbkFtb3VudFt0b2tlbl9dCiAgICAgICAgICAgIDogbWluQW1vdW50WzBdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRGZWVyYXRlKAogICAgICAgIHVpbnQyNTZbM10gZmVlcmF0ZV8KICAgICkKICAgICAgICBvbmx5T3BlcmF0b3IKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICByZXF1aXJlKGZlZXJhdGVfWzBdIDwgMC4wNSBldGhlciAmJiBmZWVyYXRlX1sxXSA8IDAuMDUgZXRoZXIgJiYgZmVlcmF0ZV9bMl0gPCAwLjA1IGV0aGVyKTsKICAgICAgICBmZWVyYXRlID0gZmVlcmF0ZV87CiAgICB9CgogICAgLyogRXh0ZXJuYWwgZnVuY3Rpb24gKi8KICAgIC8vIGZhbGxiYWNrCiAgICBmdW5jdGlvbiAoKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgIHsKICAgICAgICBkZXBvc2l0KDAsIDApOwogICAgfQoKICAgIC8vIGRlcG9zaXQgYWxsIGFsbG93YW5jZQogICAgZnVuY3Rpb24gZGVwb3NpdCgKICAgICAgICBhZGRyZXNzIHRva2VuXywKICAgICAgICBhZGRyZXNzIHJlcHJlc2VudG9yXwogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgICAgICBvbmx5QWN0aXZlCiAgICB7CiAgICAgICAgYWRkcmVzcyB1c2VyID0gZ2V0VXNlcihyZXByZXNlbnRvcl8pOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gZGVwb3NpdEFuZEZyZWV6ZSh0b2tlbl8sIHVzZXIpOwogICAgICAgIGlmKGFtb3VudCA+IDApIHsKICAgICAgICAgICAgdXBkYXRlQmFsYW5jZShtc2cuc2VuZGVyLCB0b2tlbl8sIGFtb3VudCwgdHJ1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KAogICAgICAgIGFkZHJlc3MgdG9rZW5fLAogICAgICAgIHVpbnQyNTYgYW1vdW50XywKICAgICAgICBhZGRyZXNzIHJlcHJlc2VudG9yXwogICAgKQogICAgICAgIHB1YmxpYwogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgYWRkcmVzcyB1c2VyID0gZ2V0VXNlcihyZXByZXNlbnRvcl8pOwogICAgICAgIGlmKHVwZGF0ZUJhbGFuY2UodXNlciwgdG9rZW5fLCBhbW91bnRfLCBmYWxzZSkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0cmFuc2ZlclRva2VuKHVzZXIsIHRva2VuXywgYW1vdW50XykpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9Ci8qCiAgICBmdW5jdGlvbiB1c2VyTWFrZU9yZGVyKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIHVpbnQyNTYgYW1vdW50XywKICAgICAgICBhZGRyZXNzIHJlcHJlc2VudG9yXwogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHBheWFibGUKICAgIHJldHVybnMoYm9vbCkgewogICAgICAgIC8vIGRlcG9zaXRUb2tlbiA9PiBtYWtlT3JkZXIgPT4gdXBkYXRlQmFsYW5jZQogICAgICAgIHVpbnQyNTYgZGVwb3NpdEFtb3VudCA9IGRlcG9zaXRBbmRGcmVlemUoZnJvbVRva2VuXywgcmVwcmVzZW50b3JfKTsKICAgICAgICBpZigKICAgICAgICAgICAgY2hlY2tBbW91bnQoZnJvbVRva2VuXywgYW1vdW50XykgJiYKICAgICAgICAgICAgY2hlY2tQcmljZUFtb3VudChwcmljZV8pCiAgICAgICAgKSB7CiAgICAgICAgICAgIGFkZHJlc3MgdXNlciA9IGdldFVzZXIocmVwcmVzZW50b3JfKTsKICAgICAgICAgICAgdWludDI1NiBjb3N0QW1vdW50ID0gbWFrZU9yZGVyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIGFtb3VudF8sIHVzZXIsIGRlcG9zaXRBbW91bnQpOwoKICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBNYWtlT3JkZXIKICAgICAgICAgICAgZU1ha2VPcmRlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyLCBhbW91bnRfKTsKCiAgICAgICAgICAgIGlmKGNvc3RBbW91bnQgPCBkZXBvc2l0QW1vdW50KSB7CiAgICAgICAgICAgICAgICB1cGRhdGVCYWxhbmNlKHVzZXIsIGZyb21Ub2tlbl8sIHNhZmVTdWIoZGVwb3NpdEFtb3VudCwgY29zdEFtb3VudCksIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgaWYoY29zdEFtb3VudCA+IGRlcG9zaXRBbW91bnQpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUJhbGFuY2UodXNlciwgZnJvbVRva2VuXywgc2FmZVN1Yihjb3N0QW1vdW50LCBkZXBvc2l0QW1vdW50KSwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KKi8KICAgIGZ1bmN0aW9uIHVzZXJUYWtlT3JkZXIoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBhbW91bnRfLAogICAgICAgIGFkZHJlc3MgcmVwcmVzZW50b3JfCiAgICApCiAgICAgICAgcHVibGljCiAgICAgICAgcGF5YWJsZQogICAgICAgIG9ubHlBY3RpdmUKICAgIHJldHVybnMoYm9vbCkgewogICAgICAgIC8vIGNoZWNrQmFsYW5jZSA9PiBmaW5kQW5kVHJhZGUgPT4gdXNlck1ha2VPcmRlciA9PiB1cGRhdGVCYWxhbmNlCiAgICAgICAgYWRkcmVzcyB1c2VyID0gZ2V0VXNlcihyZXByZXNlbnRvcl8pOwogICAgICAgIHVpbnQyNTYgZGVwb3NpdEFtb3VudCA9IGRlcG9zaXRBbmRGcmVlemUoZnJvbVRva2VuXywgdXNlcik7CiAgICAgICAgaWYoCiAgICAgICAgICAgIGNoZWNrQW1vdW50KGZyb21Ub2tlbl8sIGFtb3VudF8pICYmCiAgICAgICAgICAgIGNoZWNrUHJpY2VBbW91bnQocHJpY2VfKSAmJgogICAgICAgICAgICBjaGVja0JhbGFuY2UodXNlciwgZnJvbVRva2VuXywgYW1vdW50XywgZGVwb3NpdEFtb3VudCkKICAgICAgICApIHsKICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBNYWtlT3JkZXIKICAgICAgICAgICAgZW1pdCBlTWFrZU9yZGVyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHVzZXIsIGFtb3VudF8pOwoKICAgICAgICAgICAgdWludDI1NlsyXSBtZW1vcnkgZmlsbEFtb3VudDsKICAgICAgICAgICAgdWludDI1NlsyXSBtZW1vcnkgcHJvZml0OwogICAgICAgICAgICAoZmlsbEFtb3VudCwgcHJvZml0KSA9IGZpbmRBbmRUcmFkZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCBhbW91bnRfKTsKICAgICAgICAgICAgdWludDI1NiBmZWU7CiAgICAgICAgICAgIHVpbnQyNTYgdG9BbW91bnQ7CiAgICAgICAgICAgIHVpbnQyNTYgb3JkZXJBbW91bnQ7CgogICAgICAgICAgICBpZihmaWxsQW1vdW50WzBdID4gMCkgewogICAgICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBtYWtlVHJhZGUKICAgICAgICAgICAgICAgIGVtaXQgZUZpbGxPcmRlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyLCBmaWxsQW1vdW50WzBdKTsKCiAgICAgICAgICAgICAgICAvLyBsb2cgcHJpY2UKICAgICAgICAgICAgICAgIHByaWNlQm9va3NbZnJvbVRva2VuX11bdG9Ub2tlbl9dID0gcHJpY2VfOwoKICAgICAgICAgICAgICAgIHRvQW1vdW50ID0gc2FmZURpdihzYWZlTXVsKGZpbGxBbW91bnRbMF0sIHByaWNlXyksIDEgZXRoZXIpOwogICAgICAgICAgICAgICAgaWYoYW1vdW50XyA+IGZpbGxBbW91bnRbMF0pIHsKICAgICAgICAgICAgICAgICAgICBvcmRlckFtb3VudCA9IHNhZmVTdWIoYW1vdW50XywgZmlsbEFtb3VudFswXSk7CiAgICAgICAgICAgICAgICAgICAgbWFrZU9yZGVyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIGFtb3VudF8sIHVzZXIsIGRlcG9zaXRBbW91bnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYodG9BbW91bnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgKHRvQW1vdW50LCBmZWUpID0gY2FjdWxhdGVGZWUodXNlciwgdG9BbW91bnQsIDEpOwogICAgICAgICAgICAgICAgICAgIHByb2ZpdFsxXSA9IHByb2ZpdFsxXSArIGZlZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSBwcm9maXQKICAgICAgICAgICAgICAgICAgICB1cGRhdGVCYWxhbmNlKGJhbmssIGZyb21Ub2tlbl8sIHByb2ZpdFswXSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQmFsYW5jZShiYW5rLCB0b1Rva2VuXywgcHJvZml0WzFdLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdG8gVGFrZXIKICAgICAgICAgICAgICAgICAgICBpZihtYW51YWxXaXRoZHJhd1t1c2VyXSkgewogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVCYWxhbmNlKHVzZXIsIHRvVG9rZW5fLCB0b0Ftb3VudCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXJUb2tlbih1c2VyLCB0b1Rva2VuXywgdG9BbW91bnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yZGVyQW1vdW50ID0gYW1vdW50XzsKICAgICAgICAgICAgICAgIG1ha2VPcmRlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCBvcmRlckFtb3VudCwgdXNlciwgZGVwb3NpdEFtb3VudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHVwZGF0ZSBiYWxhbmNlCiAgICAgICAgICAgIGlmKGFtb3VudF8gPiBkZXBvc2l0QW1vdW50KSB7CiAgICAgICAgICAgICAgICB1cGRhdGVCYWxhbmNlKHVzZXIsIGZyb21Ub2tlbl8sIHNhZmVTdWIoYW1vdW50XywgZGVwb3NpdEFtb3VudCksIGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIGlmKGFtb3VudF8gPCBkZXBvc2l0QW1vdW50KSB7CiAgICAgICAgICAgICAgICB1cGRhdGVCYWxhbmNlKHVzZXIsIGZyb21Ub2tlbl8sIHNhZmVTdWIoZGVwb3NpdEFtb3VudCwgYW1vdW50XyksIHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXNlckNhbmNlbE9yZGVyKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIHVpbnQyNTYgYW1vdW50XywKICAgICAgICBhZGRyZXNzIHJlcHJlc2VudG9yXwogICAgKQogICAgICAgIHB1YmxpYwogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgLy8gdXBkYXRlT3JkZXJBbW91bnQgPT4gZGlzY29ubmVjdE9yZGVyVXNlciA9PiB3aXRoZHJhdwogICAgICAgIGFkZHJlc3MgdXNlciA9IGdldFVzZXIocmVwcmVzZW50b3JfKTsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IGdldE9yZGVyQW1vdW50KGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHVzZXIpOwogICAgICAgIGFtb3VudCA9IGFtb3VudCA+IGFtb3VudF8gPyBhbW91bnRfIDogYW1vdW50OwogICAgICAgIGlmKGFtb3VudCA+IDApIHsKICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBDYW5jZWxPcmRlcgogICAgICAgICAgICBlbWl0IGVDYW5jZWxPcmRlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyLCBhbW91bnQpOwoKICAgICAgICAgICAgdXBkYXRlT3JkZXJBbW91bnQoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgdXNlciwgYW1vdW50LCBmYWxzZSk7CiAgICAgICAgICAgIGlmKGdldE9yZGVyQW1vdW50KGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHVzZXIpID09IDApIHsKICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RPcmRlclVzZXIoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgMCwgdXNlciwgYWRkcmVzcygwKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobWFudWFsV2l0aGRyYXdbdXNlcl0pIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUJhbGFuY2UodXNlciwgZnJvbVRva2VuXywgYW1vdW50LCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRyYW5zZmVyVG9rZW4odXNlciwgZnJvbVRva2VuXywgYW1vdW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyogcm9sZSAtIDA6IG1ha2VyIDE6IHRha2VyICovCiAgICBmdW5jdGlvbiBjYWN1bGF0ZUZlZSgKICAgICAgICBhZGRyZXNzIHVzZXJfLAogICAgICAgIHVpbnQyNTYgYW1vdW50XywKICAgICAgICB1aW50OCByb2xlXwogICAgKQogICAgICAgIHB1YmxpYwogICAgICAgIHZpZXcKICAgIHJldHVybnModWludDI1NiwgdWludDI1NikgewogICAgICAgIHVpbnQyNTYgbXlYUEFCYWxhbmNlID0gVG9rZW4oWFBBVG9rZW4pLmJhbGFuY2VPZih1c2VyXyk7CiAgICAgICAgdWludDI1NiBteUZlZXJhdGUgPSBtYW51YWxXaXRoZHJhd1t1c2VyX10KICAgICAgICAgICAgPyBmZWVyYXRlW3JvbGVfXQogICAgICAgICAgICA6IGZlZXJhdGVbcm9sZV9dICsgZmVlcmF0ZVsyXTsKICAgICAgICBteUZlZXJhdGUgPQogICAgICAgICAgICBteVhQQUJhbGFuY2UgPiAxMDAwMDAwIGV0aGVyID8gbXlGZWVyYXRlICogMC41IGV0aGVyIC8gMSBldGhlciA6CiAgICAgICAgICAgIG15WFBBQmFsYW5jZSA+IDEwMDAwMCBldGhlciA/IG15RmVlcmF0ZSAqIDAuNiBldGhlciAvIDEgZXRoZXIgOgogICAgICAgICAgICBteVhQQUJhbGFuY2UgPiAxMDAwMCBldGhlciA/IG15RmVlcmF0ZSAqIDAuOCBldGhlciAvIDEgZXRoZXIgOgogICAgICAgICAgICBteUZlZXJhdGU7CiAgICAgICAgdWludDI1NiBmZWUgPSBzYWZlRGl2KHNhZmVNdWwoYW1vdW50XywgbXlGZWVyYXRlKSwgMSBldGhlcik7CiAgICAgICAgdWludDI1NiB0b0Ftb3VudCA9IHNhZmVTdWIoYW1vdW50XywgZmVlKTsKICAgICAgICByZXR1cm4odG9BbW91bnQsIGZlZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhZGUoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8KICAgICkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5QWN0aXZlCiAgICB7CiAgICAgICAgLy8gRG9uJ3Qgd29ycnksIHRoaXMgdGFrZXMgbWFrZXIgZmVlcmF0ZQogICAgICAgIHVpbnQyNTYgdGFrZXJQcmljZSA9IGdldE5leHRPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCAwKTsKICAgICAgICBhZGRyZXNzIHRha2VyID0gZ2V0TmV4dE9yZGVyVXNlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgdGFrZXJQcmljZSwgMCk7CiAgICAgICAgdWludDI1NiB0YWtlckFtb3VudCA9IGdldE9yZGVyQW1vdW50KGZyb21Ub2tlbl8sIHRvVG9rZW5fLCB0YWtlclByaWNlLCB0YWtlcik7CiAgICAgICAgLyoKICAgICAgICAgICAgZmlsbEFtb3VudFswXSA9IFRha2VyRmlsbAogICAgICAgICAgICBmaWxsQW1vdW50WzFdID0gTWFrZXJGaWxsCiAgICAgICAgICAgIHByb2ZpdFswXSA9IGZyb21Ub2tlblByb2ZpdAogICAgICAgICAgICBwcm9maXRbMV0gPSB0b1Rva2VuUHJvZml0CiAgICAgICAgICovCiAgICAgICAgdWludDI1NlsyXSBtZW1vcnkgZmlsbEFtb3VudDsKICAgICAgICB1aW50MjU2WzJdIG1lbW9yeSBwcm9maXQ7CiAgICAgICAgKGZpbGxBbW91bnQsIHByb2ZpdCkgPSBmaW5kQW5kVHJhZGUoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHRha2VyUHJpY2UsIHRha2VyQW1vdW50KTsKICAgICAgICBpZihmaWxsQW1vdW50WzBdID4gMCkgewogICAgICAgICAgICBwcm9maXRbMV0gPSBwcm9maXRbMV0gKyBmaWxsT3JkZXIoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHRha2VyUHJpY2UsIHRha2VyLCBmaWxsQW1vdW50WzBdKTsKCiAgICAgICAgICAgIC8vIHNhdmUgcHJvZml0IHRvIG9wZXJhdG9yCiAgICAgICAgICAgIHVwZGF0ZUJhbGFuY2UobXNnLnNlbmRlciwgZnJvbVRva2VuXywgcHJvZml0WzBdLCB0cnVlKTsKICAgICAgICAgICAgdXBkYXRlQmFsYW5jZShtc2cuc2VuZGVyLCB0b1Rva2VuXywgcHJvZml0WzFdLCB0cnVlKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWFudWFsV2l0aGRyYXcoCiAgICAgICAgYm9vbCBtYW51YWxfCiAgICApCiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgbWFudWFsV2l0aGRyYXdbbXNnLnNlbmRlcl0gPSBtYW51YWxfOwogICAgfQoKICAgIC8qIEludGVybmFsIEZ1bmN0aW9uICovCiAgICAvLyBkZXBvc2l0IGFsbCBhbGxvd2FuY2UKICAgIGZ1bmN0aW9uIGRlcG9zaXRBbmRGcmVlemUoCiAgICAgICAgYWRkcmVzcyB0b2tlbl8sCiAgICAgICAgYWRkcmVzcyB1c2VyCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgYW1vdW50OwogICAgICAgIGlmKHRva2VuXyA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIC8vIGxvZyBldmVudDogRGVwb3NpdAogICAgICAgICAgICBlbWl0IGVEZXBvc2l0KHVzZXIsIGFkZHJlc3MoMCksIG1zZy52YWx1ZSk7CgogICAgICAgICAgICBhbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgICAgIHJldHVybiBhbW91bnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYobXNnLnZhbHVlID4gMCkgewogICAgICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBEZXBvc2l0CiAgICAgICAgICAgICAgICBlbWl0IGVEZXBvc2l0KHVzZXIsIGFkZHJlc3MoMCksIG1zZy52YWx1ZSk7CgogICAgICAgICAgICAgICAgdXBkYXRlQmFsYW5jZSh1c2VyLCBhZGRyZXNzKDApLCBtc2cudmFsdWUsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFtb3VudCA9IFRva2VuKHRva2VuXykuYWxsb3dhbmNlKG1zZy5zZW5kZXIsIHRoaXMpOwogICAgICAgICAgICBpZigKICAgICAgICAgICAgICAgIGFtb3VudCA+IDAgJiYKICAgICAgICAgICAgICAgIFRva2VuKHRva2VuXykudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAvLyBsb2cgZXZlbnQ6IERlcG9zaXQKICAgICAgICAgICAgICAgIGVtaXQgZURlcG9zaXQodXNlciwgdG9rZW5fLCBhbW91bnQpOwoKICAgICAgICAgICAgICAgIHJldHVybiBhbW91bnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tCYWxhbmNlKAogICAgICAgIGFkZHJlc3MgdXNlcl8sCiAgICAgICAgYWRkcmVzcyB0b2tlbl8sCiAgICAgICAgdWludDI1NiBhbW91bnRfLAogICAgICAgIHVpbnQyNTYgZGVwb3NpdEFtb3VudF8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKHNhZmVBZGQoYmFsYW5jZXNbdXNlcl9dW3Rva2VuX10sIGRlcG9zaXRBbW91bnRfKSA+PSBhbW91bnRfKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vZW1pdCBFcnJvcigwKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0Ftb3VudCgKICAgICAgICBhZGRyZXNzIHRva2VuXywKICAgICAgICB1aW50MjU2IGFtb3VudF8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHZpZXcKICAgIHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQyNTYgbWluID0gZ2V0TWluQW1vdW50KHRva2VuXyk7CiAgICAgICAgaWYoYW1vdW50XyA+IG1heEFtb3VudCB8fCBhbW91bnRfIDwgbWluKSB7CiAgICAgICAgICAgIC8vZW1pdCBFcnJvcigyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja1ByaWNlQW1vdW50KAogICAgICAgIHVpbnQyNTYgcHJpY2VfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZihwcmljZV8gPT0gMCB8fCBwcmljZV8gPiBtYXhQcmljZSkgewogICAgICAgICAgICAvL2VtaXQgRXJyb3IoMyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbWFrZU9yZGVyKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIHVpbnQyNTYgYW1vdW50XywKICAgICAgICBhZGRyZXNzIHVzZXJfLAogICAgICAgIHVpbnQyNTYgZGVwb3NpdEFtb3VudF8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgaWYoY2hlY2tCYWxhbmNlKHVzZXJfLCBmcm9tVG9rZW5fLCBhbW91bnRfLCBkZXBvc2l0QW1vdW50XykpIHsKICAgICAgICAgICAgdXBkYXRlT3JkZXJBbW91bnQoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgdXNlcl8sIGFtb3VudF8sIHRydWUpOwogICAgICAgICAgICBjb25uZWN0T3JkZXJQcmljZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCAwKTsKICAgICAgICAgICAgY29ubmVjdE9yZGVyVXNlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyXyk7CiAgICAgICAgICAgIHJldHVybiBhbW91bnRfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmaW5kQW5kVHJhZGUoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBhbW91bnRfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHJldHVybnModWludDI1NlsyXSwgdWludDI1NlsyXSkgewogICAgICAgIC8qCiAgICAgICAgICAgIHRvdGFsTWF0Y2hBbW91bnRbMF06IFRha2VyIHRvdGFsIG1hdGNoIGFtb3VudAogICAgICAgICAgICB0b3RhbE1hdGNoQW1vdW50WzFdOiBNYWtlciB0b3RhbCBtYXRjaCBhbW91bnQKICAgICAgICAgICAgcHJvZml0WzBdOiBmcm9tVG9rZW4gcHJvZml0CiAgICAgICAgICAgIHByb2ZpdFsxXTogdG9Ub2tlbiBwcm9maXQKICAgICAgICAgICAgbWF0Y2hBbW91bnRbMF06IFRha2VyIG1hdGNoIGFtb3VudAogICAgICAgICAgICBtYXRjaEFtb3VudFsxXTogTWFrZXIgbWF0Y2ggYW1vdW50CiAgICAgICAgICovCiAgICAgICAgdWludDI1NlsyXSBtZW1vcnkgdG90YWxNYXRjaEFtb3VudDsKICAgICAgICB1aW50MjU2WzJdIG1lbW9yeSBwcm9maXQ7CiAgICAgICAgdWludDI1NlszXSBtZW1vcnkgbWF0Y2hBbW91bnQ7CiAgICAgICAgdWludDI1NiB0b0Ftb3VudDsKICAgICAgICB1aW50MjU2IHJlbWFpbmluZyA9IGFtb3VudF87CiAgICAgICAgdWludDI1NiBtYXRjaGVzID0gMDsKICAgICAgICB1aW50MjU2IHByZXZCZXN0UHJpY2UgPSAwOwogICAgICAgIHVpbnQyNTYgYmVzdFByaWNlID0gZ2V0TmV4dE9yZGVyUHJpY2UodG9Ub2tlbl8sIGZyb21Ub2tlbl8sIHByZXZCZXN0UHJpY2UpOwogICAgICAgIGZvcig7IG1hdGNoZXMgPCBhdXRvTWF0Y2ggJiYgcmVtYWluaW5nID4gMDspIHsKICAgICAgICAgICAgbWF0Y2hBbW91bnQgPSBtYWtlVHJhZGUoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgYmVzdFByaWNlLCBwcmV2QmVzdFByaWNlLCByZW1haW5pbmcpOwogICAgICAgICAgICBpZihtYXRjaEFtb3VudFswXSA+IDApIHsKICAgICAgICAgICAgICAgIHJlbWFpbmluZyA9IHNhZmVTdWIocmVtYWluaW5nLCBtYXRjaEFtb3VudFswXSk7CiAgICAgICAgICAgICAgICB0b3RhbE1hdGNoQW1vdW50WzBdID0gc2FmZUFkZCh0b3RhbE1hdGNoQW1vdW50WzBdLCBtYXRjaEFtb3VudFswXSk7CiAgICAgICAgICAgICAgICB0b3RhbE1hdGNoQW1vdW50WzFdID0gc2FmZUFkZCh0b3RhbE1hdGNoQW1vdW50WzFdLCBtYXRjaEFtb3VudFsxXSk7CiAgICAgICAgICAgICAgICBwcm9maXRbMF0gPSBzYWZlQWRkKHByb2ZpdFswXSwgbWF0Y2hBbW91bnRbMl0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBmb3IgbmV4dCBsb29wCiAgICAgICAgICAgICAgICBtYXRjaGVzKys7CiAgICAgICAgICAgICAgICBwcmV2QmVzdFByaWNlID0gYmVzdFByaWNlOwogICAgICAgICAgICAgICAgYmVzdFByaWNlID0gZ2V0TmV4dE9yZGVyUHJpY2UodG9Ub2tlbl8sIGZyb21Ub2tlbl8sIHByZXZCZXN0UHJpY2UpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKHRvdGFsTWF0Y2hBbW91bnRbMF0gPiAwKSB7CiAgICAgICAgICAgIC8vIGNhbGN1bGF0aW5nIHNwcmVhZCBwcm9maXQKICAgICAgICAgICAgdG9BbW91bnQgPSBzYWZlRGl2KHNhZmVNdWwodG90YWxNYXRjaEFtb3VudFswXSwgcHJpY2VfKSwgMSBldGhlcik7CiAgICAgICAgICAgIHByb2ZpdFsxXSA9IHNhZmVTdWIodG90YWxNYXRjaEFtb3VudFsxXSwgdG9BbW91bnQpOwogICAgICAgICAgICBpZih0b3RhbE1hdGNoQW1vdW50WzFdID49IHNhZmVEaXYoc2FmZU11bChhbW91bnRfLCBwcmljZV8pLCAxIGV0aGVyKSkgewogICAgICAgICAgICAgICAgLy8gZnJvbVByb2ZpdCArPSBhbW91bnRfIC0gdGFrZXJGaWxsOwogICAgICAgICAgICAgICAgcHJvZml0WzBdID0gcHJvZml0WzBdICsgYW1vdW50XyAtIHRvdGFsTWF0Y2hBbW91bnRbMF07CiAgICAgICAgICAgICAgICAvLyBmdWxsZmlsbCBUYWtlciBvcmRlcgogICAgICAgICAgICAgICAgdG90YWxNYXRjaEFtb3VudFswXSA9IGFtb3VudF87CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0b0Ftb3VudCA9IHRvdGFsTWF0Y2hBbW91bnRbMV07CiAgICAgICAgICAgICAgICAvLyBmcm9tUHJvZml0ICs9IHRha2VyRmlsbCAtICh0b0Ftb3VudCAvIHByaWNlXyAqIDEgZXRoZXIpCiAgICAgICAgICAgICAgICBwcm9maXRbMF0gPSBwcm9maXRbMF0gKyB0b3RhbE1hdGNoQW1vdW50WzBdIC0gKHRvQW1vdW50ICogMSBldGhlciAvcHJpY2VfKTsKICAgICAgICAgICAgICAgIC8vIChyZWFsKSB0YWtlckZpbGwgPSB0b0Ftb3VudCAvIHByaWNlXyAqIDEgZXRoZXIKICAgICAgICAgICAgICAgIHRvdGFsTWF0Y2hBbW91bnRbMF0gPSBzYWZlRGl2KHNhZmVNdWwodG9BbW91bnQsIDEgZXRoZXIpLCBwcmljZV8pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKHRvdGFsTWF0Y2hBbW91bnQsIHByb2ZpdCk7CiAgICB9CgogICAgZnVuY3Rpb24gbWFrZVRyYWRlKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIHVpbnQyNTYgYmVzdFByaWNlXywKICAgICAgICB1aW50MjU2IHByZXZCZXN0UHJpY2VfLAogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nXwogICAgKQogICAgICAgIGludGVybmFsCiAgICByZXR1cm5zKHVpbnQyNTZbM10pIHsKICAgICAgICBpZihjaGVja1ByaWNlUGFpcihwcmljZV8sIGJlc3RQcmljZV8pKSB7CiAgICAgICAgICAgIGFkZHJlc3MgcHJldk1ha2VyID0gYWRkcmVzcygwKTsKICAgICAgICAgICAgYWRkcmVzcyBtYWtlciA9IGdldE5leHRPcmRlclVzZXIodG9Ub2tlbl8sIGZyb21Ub2tlbl8sIGJlc3RQcmljZV8sIDApOwogICAgICAgICAgICB1aW50MjU2IHJlbWFpbmluZyA9IHJlbWFpbmluZ187CgogICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgdG90YWxGaWxsWzBdOiBUb3RhbCBUYWtlciBmaWxsQW1vdW50CiAgICAgICAgICAgICAgICB0b3RhbEZpbGxbMV06IFRvdGFsIE1ha2VyIGZpbGxBbW91bnQKICAgICAgICAgICAgICAgIHRvdGFsRmlsbFsyXTogVG90YWwgTWFrZXIgZmVlCiAgICAgICAgICAgICAqLwogICAgICAgICAgICB1aW50MjU2WzNdIG1lbW9yeSB0b3RhbEZpbGw7CiAgICAgICAgICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgYXV0b01hdGNoICYmIHJlbWFpbmluZyA+IDAgJiYgbWFrZXIgIT0gYWRkcmVzcygwKTsgaSsrKSB7CiAgICAgICAgICAgICAgICB1aW50MjU2WzNdIG1lbW9yeSBmaWxsOwogICAgICAgICAgICAgICAgYm9vbCBmdWxsZmlsbDsKICAgICAgICAgICAgICAgIChmaWxsLCBmdWxsZmlsbCkgPSBtYWtlVHJhZGVEZXRhaWwoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgYmVzdFByaWNlXywgbWFrZXIsIHJlbWFpbmluZyk7CiAgICAgICAgICAgICAgICBpZihmaWxsWzBdID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmKGZ1bGxmaWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RPcmRlclVzZXIodG9Ub2tlbl8sIGZyb21Ub2tlbl8sIGJlc3RQcmljZV8sIHByZXZCZXN0UHJpY2VfLCBtYWtlciwgcHJldk1ha2VyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nID0gc2FmZVN1YihyZW1haW5pbmcsIGZpbGxbMF0pOwogICAgICAgICAgICAgICAgICAgIHRvdGFsRmlsbFswXSA9IHNhZmVBZGQodG90YWxGaWxsWzBdLCBmaWxsWzBdKTsKICAgICAgICAgICAgICAgICAgICB0b3RhbEZpbGxbMV0gPSBzYWZlQWRkKHRvdGFsRmlsbFsxXSwgZmlsbFsxXSk7CiAgICAgICAgICAgICAgICAgICAgdG90YWxGaWxsWzJdID0gc2FmZUFkZCh0b3RhbEZpbGxbMl0sIGZpbGxbMl0pOwogICAgICAgICAgICAgICAgICAgIHByZXZNYWtlciA9IG1ha2VyOwogICAgICAgICAgICAgICAgICAgIG1ha2VyID0gZ2V0TmV4dE9yZGVyVXNlcih0b1Rva2VuXywgZnJvbVRva2VuXywgYmVzdFByaWNlXywgcHJldk1ha2VyKTsKICAgICAgICAgICAgICAgICAgICBpZihtYWtlciA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRvdGFsRmlsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBtYWtlVHJhZGVEZXRhaWwoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBiZXN0UHJpY2VfLAogICAgICAgIGFkZHJlc3MgbWFrZXJfLAogICAgICAgIHVpbnQyNTYgcmVtYWluaW5nXwogICAgKQogICAgICAgIGludGVybmFsCiAgICByZXR1cm5zKHVpbnQyNTZbM10sIGJvb2wpIHsKICAgICAgICAvKgogICAgICAgICAgICBmaWxsQW1vdW50WzBdOiBUYWtlciBmaWxsQW1vdW50CiAgICAgICAgICAgIGZpbGxBbW91bnRbMV06IE1ha2VyIGZpbGxBbW91bnQKICAgICAgICAgICAgZmlsbEFtb3VudFsyXTogTWFrZXIgZmVlCiAgICAgICAgICovCiAgICAgICAgdWludDI1NlszXSBtZW1vcnkgZmlsbEFtb3VudDsKICAgICAgICB1aW50MjU2IHRha2VyUHJvdmlkZSA9IHJlbWFpbmluZ187CiAgICAgICAgdWludDI1NiB0YWtlclJlcXVpcmUgPSBzYWZlRGl2KHNhZmVNdWwodGFrZXJQcm92aWRlLCBwcmljZV8pLCAxIGV0aGVyKTsKICAgICAgICB1aW50MjU2IG1ha2VyUHJvdmlkZSA9IGdldE9yZGVyQW1vdW50KHRvVG9rZW5fLCBmcm9tVG9rZW5fLCBiZXN0UHJpY2VfLCBtYWtlcl8pOwogICAgICAgIHVpbnQyNTYgbWFrZXJSZXF1aXJlID0gc2FmZURpdihzYWZlTXVsKG1ha2VyUHJvdmlkZSwgYmVzdFByaWNlXyksIDEgZXRoZXIpOwogICAgICAgIGZpbGxBbW91bnRbMF0gPSBjYWN1bGF0ZUZpbGwodGFrZXJQcm92aWRlLCB0YWtlclJlcXVpcmUsIHByaWNlXywgbWFrZXJQcm92aWRlKTsKICAgICAgICBmaWxsQW1vdW50WzFdID0gY2FjdWxhdGVGaWxsKG1ha2VyUHJvdmlkZSwgbWFrZXJSZXF1aXJlLCBiZXN0UHJpY2VfLCB0YWtlclByb3ZpZGUpOwogICAgICAgIGZpbGxBbW91bnRbMl0gPSBmaWxsT3JkZXIodG9Ub2tlbl8sIGZyb21Ub2tlbl8sIGJlc3RQcmljZV8sIG1ha2VyXywgZmlsbEFtb3VudFsxXSk7CiAgICAgICAgcmV0dXJuIChmaWxsQW1vdW50LCAobWFrZXJSZXF1aXJlIDw9IHRha2VyUHJvdmlkZSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhY3VsYXRlRmlsbCgKICAgICAgICB1aW50MjU2IHByb3ZpZGVfLAogICAgICAgIHVpbnQyNTYgcmVxdWlyZV8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBwYWlyUHJvdmlkZV8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgICAgIHB1cmUKICAgIHJldHVybnModWludDI1NikgewogICAgICAgIHJldHVybiByZXF1aXJlXyA+IHBhaXJQcm92aWRlXyA/IHNhZmVEaXYoc2FmZU11bChwYWlyUHJvdmlkZV8sIDEgZXRoZXIpLCBwcmljZV8pIDogcHJvdmlkZV87CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tQcmljZVBhaXIoCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBiZXN0UHJpY2VfCiAgICApCiAgICAgICAgaW50ZXJuYWwgcHVyZSAKICAgIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKGJlc3RQcmljZV8gPCBwcmljZV8pIHsKICAgICAgICAgICAgcmV0dXJuIGNoZWNrUHJpY2VQYWlyKGJlc3RQcmljZV8sIHByaWNlXyk7CiAgICAgICAgfSBlbHNlIGlmKGJlc3RQcmljZV8gPCAxIGV0aGVyKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZihwcmljZV8gPiAxIGV0aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gcHJpY2VfICogYmVzdFByaWNlXyA8PSAxIGV0aGVyICogMSBldGhlcjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZmlsbE9yZGVyKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIGFkZHJlc3MgdXNlcl8sCiAgICAgICAgdWludDI1NiBhbW91bnRfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHJldHVybnModWludDI1NikgewogICAgICAgIC8vIGxvZyBldmVudDogZmlsbE9yZGVyCiAgICAgICAgZW1pdCBlRmlsbE9yZGVyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHVzZXJfLCBhbW91bnRfKTsKCiAgICAgICAgdWludDI1NiB0b0Ftb3VudCA9IHNhZmVEaXYoc2FmZU11bChhbW91bnRfLCBwcmljZV8pLCAxIGV0aGVyKTsKICAgICAgICB1aW50MjU2IGZlZTsKICAgICAgICB1cGRhdGVPcmRlckFtb3VudChmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyXywgYW1vdW50XywgZmFsc2UpOwogICAgICAgICh0b0Ftb3VudCwgZmVlKSA9IGNhY3VsYXRlRmVlKHVzZXJfLCB0b0Ftb3VudCwgMCk7CiAgICAgICAgaWYobWFudWFsV2l0aGRyYXdbdXNlcl9dKSB7CiAgICAgICAgICAgIHVwZGF0ZUJhbGFuY2UodXNlcl8sIHRvVG9rZW5fLCB0b0Ftb3VudCwgdHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdHJhbnNmZXJUb2tlbih1c2VyXywgdG9Ub2tlbl8sIHRvQW1vdW50KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZlZTsKICAgIH0KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW4oCiAgICAgICAgYWRkcmVzcyB1c2VyXywKICAgICAgICBhZGRyZXNzIHRva2VuXywKICAgICAgICB1aW50MjU2IGFtb3VudF8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYodG9rZW5fID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgaWYoYWRkcmVzcyh0aGlzKS5iYWxhbmNlIDwgYW1vdW50XykgewogICAgICAgICAgICAgICAgLy9lbWl0IEVycm9yKDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gbG9nIGV2ZW50OiBXaXRoZHJhdwogICAgICAgICAgICAgICAgZW1pdCBlV2l0aGRyYXcodXNlcl8sIHRva2VuXywgYW1vdW50Xyk7CgogICAgICAgICAgICAgICAgdXNlcl8udHJhbnNmZXIoYW1vdW50Xyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZihUb2tlbih0b2tlbl8pLnRyYW5zZmVyKHVzZXJfLCBhbW91bnRfKSkgewogICAgICAgICAgICAvLyBsb2cgZXZlbnQ6IFdpdGhkcmF3CiAgICAgICAgICAgIGVtaXQgZVdpdGhkcmF3KHVzZXJfLCB0b2tlbl8sIGFtb3VudF8pOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9lbWl0IEVycm9yKDEpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbGFuY2UoCiAgICAgICAgYWRkcmVzcyB1c2VyXywKICAgICAgICBhZGRyZXNzIHRva2VuXywKICAgICAgICB1aW50MjU2IGFtb3VudF8sCiAgICAgICAgYm9vbCBhZGRPclN1Yl8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYoYWRkT3JTdWJfKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW3VzZXJfXVt0b2tlbl9dID0gc2FmZUFkZChiYWxhbmNlc1t1c2VyX11bdG9rZW5fXSwgYW1vdW50Xyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYoY2hlY2tCYWxhbmNlKHVzZXJfLCB0b2tlbl8sIGFtb3VudF8sIDApKXsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW3VzZXJfXVt0b2tlbl9dID0gc2FmZVN1YihiYWxhbmNlc1t1c2VyX11bdG9rZW5fXSwgYW1vdW50Xyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb25uZWN0T3JkZXJQcmljZSgKICAgICAgICBhZGRyZXNzIGZyb21Ub2tlbl8sCiAgICAgICAgYWRkcmVzcyB0b1Rva2VuXywKICAgICAgICB1aW50MjU2IHByaWNlXywKICAgICAgICB1aW50MjU2IHByZXZfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpZihjaGVja1ByaWNlQW1vdW50KHByaWNlXykpIHsKICAgICAgICAgICAgdWludDI1NiBwcmV2UHJpY2UgPSBnZXROZXh0T3JkZXJQcmljZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJldl8pOwogICAgICAgICAgICB1aW50MjU2IG5leHRQcmljZSA9IGdldE5leHRPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmV2UHJpY2UpOwogICAgICAgICAgICBpZihwcmV2XyAhPSBwcmljZV8gJiYgcHJldlByaWNlICE9IHByaWNlXyAmJiBuZXh0UHJpY2UgIT0gcHJpY2VfKSB7CiAgICAgICAgICAgICAgICBpZihwcmljZV8gPCBwcmV2UHJpY2UpIHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVOZXh0T3JkZXJQcmljZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJldl8sIHByaWNlXyk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTmV4dE9yZGVyUHJpY2UoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgcHJldlByaWNlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihuZXh0UHJpY2UgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZU5leHRPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmV2UHJpY2UsIHByaWNlXyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbm5lY3RPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHByZXZQcmljZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY29ubmVjdE9yZGVyVXNlcigKICAgICAgICBhZGRyZXNzIGZyb21Ub2tlbl8sCiAgICAgICAgYWRkcmVzcyB0b1Rva2VuXywKICAgICAgICB1aW50MjU2IHByaWNlXywKICAgICAgICBhZGRyZXNzIHVzZXJfCiAgICApCiAgICAgICAgaW50ZXJuYWwgCiAgICB7CiAgICAgICAgYWRkcmVzcyBmaXJzdFVzZXIgPSBnZXROZXh0T3JkZXJVc2VyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIDApOwogICAgICAgIGlmKHVzZXJfICE9IGFkZHJlc3MoMCkgJiYgdXNlcl8gIT0gZmlyc3RVc2VyKSB7CiAgICAgICAgICAgIHVwZGF0ZU5leHRPcmRlclVzZXIoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgMCwgdXNlcl8pOwogICAgICAgICAgICBpZihmaXJzdFVzZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICAgICAgdXBkYXRlTmV4dE9yZGVyVXNlcihmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJpY2VfLCB1c2VyXywgZmlyc3RVc2VyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkaXNjb25uZWN0T3JkZXJQcmljZSgKICAgICAgICBhZGRyZXNzIGZyb21Ub2tlbl8sCiAgICAgICAgYWRkcmVzcyB0b1Rva2VuXywKICAgICAgICB1aW50MjU2IHByaWNlXywKICAgICAgICB1aW50MjU2IHByZXZfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpZihjaGVja1ByaWNlQW1vdW50KHByaWNlXykpIHsKICAgICAgICAgICAgdWludDI1NiBwcmV2UHJpY2UgPSBnZXROZXh0T3JkZXJQcmljZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJldl8pOwogICAgICAgICAgICB1aW50MjU2IG5leHRQcmljZSA9IGdldE5leHRPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmV2UHJpY2UpOwogICAgICAgICAgICBpZihwcmljZV8gPT0gcHJldlByaWNlKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVOZXh0T3JkZXJQcmljZShmcm9tVG9rZW5fLCB0b1Rva2VuXywgcHJldl8sIG5leHRQcmljZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZihwcmljZV8gPCBwcmV2UHJpY2UpIHsKICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHByZXZQcmljZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZGlzY29ubmVjdE9yZGVyVXNlcigKICAgICAgICBhZGRyZXNzIGZyb21Ub2tlbl8sCiAgICAgICAgYWRkcmVzcyB0b1Rva2VuXywKICAgICAgICB1aW50MjU2IHByaWNlXywKICAgICAgICB1aW50MjU2IHByZXZQcmljZV8sCiAgICAgICAgYWRkcmVzcyB1c2VyXywKICAgICAgICBhZGRyZXNzIHByZXZfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpZih1c2VyXyA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgYWRkcmVzcyBwcmV2VXNlciA9IGdldE5leHRPcmRlclVzZXIoZnJvbVRva2VuXywgdG9Ub2tlbl8sIHByaWNlXywgcHJldl8pOwogICAgICAgIGFkZHJlc3MgbmV4dFVzZXIgPSBnZXROZXh0T3JkZXJVc2VyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHByZXZVc2VyKTsKICAgICAgICBpZihwcmV2VXNlciA9PSB1c2VyXykgewogICAgICAgICAgICB1cGRhdGVOZXh0T3JkZXJVc2VyKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHByZXZfLCBuZXh0VXNlcik7CiAgICAgICAgICAgIGlmKG5leHRVc2VyID09IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RPcmRlclByaWNlKGZyb21Ub2tlbl8sIHRvVG9rZW5fLCBwcmljZV8sIHByZXZQcmljZV8pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldE5leHRPcmRlclByaWNlKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gbmV4dE9yZGVyUHJpY2VbZnJvbVRva2VuX11bdG9Ub2tlbl9dW3ByaWNlX107CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTmV4dE9yZGVyUHJpY2UoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgdWludDI1NiBuZXh0UHJpY2VfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBuZXh0T3JkZXJQcmljZVtmcm9tVG9rZW5fXVt0b1Rva2VuX11bcHJpY2VfXSA9IG5leHRQcmljZV87CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TmV4dE9yZGVyVXNlcigKICAgICAgICBhZGRyZXNzIGZyb21Ub2tlbl8sCiAgICAgICAgYWRkcmVzcyB0b1Rva2VuXywKICAgICAgICB1aW50MjU2IHByaWNlXywKICAgICAgICBhZGRyZXNzIHVzZXJfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3JkZXJCb29rc1tmcm9tVG9rZW5fXVt0b1Rva2VuX11bcHJpY2VfXVt1c2VyX10ubmV4dFVzZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3JkZXJBbW91bnQoCiAgICAgICAgYWRkcmVzcyBmcm9tVG9rZW5fLAogICAgICAgIGFkZHJlc3MgdG9Ub2tlbl8sCiAgICAgICAgdWludDI1NiBwcmljZV8sCiAgICAgICAgYWRkcmVzcyB1c2VyXwogICAgKQogICAgICAgIGludGVybmFsCiAgICAgICAgdmlldwogICAgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG9yZGVyQm9va3NbZnJvbVRva2VuX11bdG9Ub2tlbl9dW3ByaWNlX11bdXNlcl9dLmFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVOZXh0T3JkZXJVc2VyKAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIGFkZHJlc3MgdXNlcl8sCiAgICAgICAgYWRkcmVzcyBuZXh0VXNlcl8KICAgICkKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIG9yZGVyQm9va3NbZnJvbVRva2VuX11bdG9Ub2tlbl9dW3ByaWNlX11bdXNlcl9dLm5leHRVc2VyID0gbmV4dFVzZXJfOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyQW1vdW50KAogICAgICAgIGFkZHJlc3MgZnJvbVRva2VuXywKICAgICAgICBhZGRyZXNzIHRvVG9rZW5fLAogICAgICAgIHVpbnQyNTYgcHJpY2VfLAogICAgICAgIGFkZHJlc3MgdXNlcl8sCiAgICAgICAgdWludDI1NiBhbW91bnRfLAogICAgICAgIGJvb2wgYWRkT3JTdWJfCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICBpZihhZGRPclN1Yl8pIHsKICAgICAgICAgICAgb3JkZXJCb29rc1tmcm9tVG9rZW5fXVt0b1Rva2VuX11bcHJpY2VfXVt1c2VyX10uYW1vdW50ID0gc2FmZUFkZChvcmRlckJvb2tzW2Zyb21Ub2tlbl9dW3RvVG9rZW5fXVtwcmljZV9dW3VzZXJfXS5hbW91bnQsIGFtb3VudF8pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9yZGVyQm9va3NbZnJvbVRva2VuX11bdG9Ub2tlbl9dW3ByaWNlX11bdXNlcl9dLmFtb3VudCA9IHNhZmVTdWIob3JkZXJCb29rc1tmcm9tVG9rZW5fXVt0b1Rva2VuX11bcHJpY2VfXVt1c2VyX10uYW1vdW50LCBhbW91bnRfKTsKICAgICAgICB9CiAgICB9Cn0='.
	

]
