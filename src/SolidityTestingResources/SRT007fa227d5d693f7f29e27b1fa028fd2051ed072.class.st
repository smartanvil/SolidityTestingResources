Class {
	#name : #SRT007fa227d5d693f7f29e27b1fa028fd2051ed072,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT007fa227d5d693f7f29e27b1fa028fd2051ed072 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wgCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuIAogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKiogCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4gCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4gCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKCgovKioKICogQHRpdGxlIEF1dGhvcml6YWJsZQogKiBAZGV2IEFsbG93cyB0byBhdXRob3JpemUgYWNjZXNzIHRvIGNlcnRhaW4gZnVuY3Rpb24gY2FsbHMKICogCiAqIEFCSQogKiBbeyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbeyJuYW1lIjoiYXV0aG9yaXplckluZGV4IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRBdXRob3JpemVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9hZGRyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJhZGRBdXRob3JpemVkIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJpbnB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImNvbnN0cnVjdG9yIn1dCiAqLwpjb250cmFjdCBBdXRob3JpemFibGUgewoKICBhZGRyZXNzW10gYXV0aG9yaXplcnM7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGF1dGhvcml6ZXJJbmRleDsKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IHRhdCBpcyBub3QgYXV0aG9yaXplZC4gCiAgICovCiAgbW9kaWZpZXIgb25seUF1dGhvcml6ZWQgewogICAgcmVxdWlyZShpc0F1dGhvcml6ZWQobXNnLnNlbmRlcikpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQ29udHJ1Y3RvciB0aGF0IGF1dGhvcml6ZXMgdGhlIG1zZy5zZW5kZXIuIAogICAqLwogIGZ1bmN0aW9uIEF1dGhvcml6YWJsZSgpIHsKICAgIGF1dGhvcml6ZXJzLmxlbmd0aCA9IDI7CiAgICBhdXRob3JpemVyc1sxXSA9IG1zZy5zZW5kZXI7CiAgICBhdXRob3JpemVySW5kZXhbbXNnLnNlbmRlcl0gPSAxOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBnZXQgYSBzcGVjaWZpYyBhdXRob3JpemVyCiAgICogQHBhcmFtIGF1dGhvcml6ZXJJbmRleCBpbmRleCBvZiB0aGUgYXV0aG9yaXplciB0byBiZSByZXRyaWV2ZWQuCiAgICogQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgYXV0aG9yaXplci4KICAgKi8KICBmdW5jdGlvbiBnZXRBdXRob3JpemVyKHVpbnQgYXV0aG9yaXplckluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgIHJldHVybiBhZGRyZXNzKGF1dGhvcml6ZXJzW2F1dGhvcml6ZXJJbmRleCArIDFdKTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgaWYgYW4gYWRkcmVzcyBpcyBhdXRob3JpemVkCiAgICogQHBhcmFtIF9hZGRyIHRoZSBhZGRyZXNzIHRvIGNoZWNrIGlmIGl0IGlzIGF1dGhvcml6ZWQuCiAgICogQHJldHVybiBib29sZWFuIGZsYWcgaWYgYWRkcmVzcyBpcyBhdXRob3JpemVkLgogICAqLwogIGZ1bmN0aW9uIGlzQXV0aG9yaXplZChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgIHJldHVybiBhdXRob3JpemVySW5kZXhbX2FkZHJdID4gMDsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gYWRkIGEgbmV3IGF1dGhvcml6ZXIKICAgKiBAcGFyYW0gX2FkZHIgdGhlIGFkZHJlc3MgdG8gYWRkIGFzIGEgbmV3IGF1dGhvcml6ZXIuCiAgICovCiAgZnVuY3Rpb24gYWRkQXV0aG9yaXplZChhZGRyZXNzIF9hZGRyKSBleHRlcm5hbCBvbmx5QXV0aG9yaXplZCB7CiAgICBhdXRob3JpemVySW5kZXhbX2FkZHJdID0gYXV0aG9yaXplcnMubGVuZ3RoOwogICAgYXV0aG9yaXplcnMubGVuZ3RoKys7CiAgICBhdXRob3JpemVyc1thdXRob3JpemVycy5sZW5ndGggLSAxXSA9IF9hZGRyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRXhjaGFuZ2VSYXRlCiAqIEBkZXYgQWxsb3dzIHVwZGF0aW5nIGFuZCByZXRyaWV2ZWluZyBvZiBDb252ZXJzaW9uIFJhdGVzIGZvciBQQVkgdG9rZW5zCiAqCiAqIEFCSQogKiBbeyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9zeW1ib2wiLCJ0eXBlIjoic3RyaW5nIn0seyJuYW1lIjoiX3JhdGUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InVwZGF0ZVJhdGUiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJkYXRhIiwidHlwZSI6InVpbnQyNTZbXSJ9XSwibmFtZSI6InVwZGF0ZVJhdGVzIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3ltYm9sIiwidHlwZSI6InN0cmluZyJ9XSwibmFtZSI6ImdldFJhdGUiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoib3duZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYnl0ZXMzMiJ9XSwibmFtZSI6InJhdGVzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Im5ld093bmVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJ0cmFuc2Zlck93bmVyc2hpcCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoidGltZXN0YW1wIiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoic3ltYm9sIiwidHlwZSI6ImJ5dGVzMzIifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoicmF0ZSIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiUmF0ZVVwZGF0ZWQiLCJ0eXBlIjoiZXZlbnQifV0KICovCmNvbnRyYWN0IEV4Y2hhbmdlUmF0ZSBpcyBPd25hYmxlIHsKCiAgZXZlbnQgUmF0ZVVwZGF0ZWQodWludCB0aW1lc3RhbXAsIGJ5dGVzMzIgc3ltYm9sLCB1aW50IHJhdGUpOwoKICBtYXBwaW5nKGJ5dGVzMzIgPT4gdWludCkgcHVibGljIHJhdGVzOwoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB1cGRhdGUgYSBzaW5nbGUgcmF0ZS4KICAgKiBAcGFyYW0gX3N5bWJvbCBUaGUgc3ltYm9sIHRvIGJlIHVwZGF0ZWQuIAogICAqIEBwYXJhbSBfcmF0ZSB0aGUgcmF0ZSBmb3IgdGhlIHN5bWJvbC4gCiAgICovCiAgZnVuY3Rpb24gdXBkYXRlUmF0ZShzdHJpbmcgX3N5bWJvbCwgdWludCBfcmF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICByYXRlc1tzaGEzKF9zeW1ib2wpXSA9IF9yYXRlOwogICAgUmF0ZVVwZGF0ZWQobm93LCBzaGEzKF9zeW1ib2wpLCBfcmF0ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB1cGRhdGUgbXVsdGlwbGUgcmF0ZXMuCiAgICogQHBhcmFtIGRhdGEgYW4gYXJyYXkgdGhhdCBhbHRlcm5hdGVzIHNoYTMgaGFzaGVzIG9mIHRoZSBzeW1ib2wgYW5kIHRoZSBjb3JyZXNwb25kaW5nIHJhdGUgLiAKICAgKi8KICBmdW5jdGlvbiB1cGRhdGVSYXRlcyh1aW50W10gZGF0YSkgcHVibGljIG9ubHlPd25lciB7CiAgICBpZiAoZGF0YS5sZW5ndGggJSAyID4gMCkKICAgICAgdGhyb3c7CiAgICB1aW50IGkgPSAwOwogICAgd2hpbGUgKGkgPCBkYXRhLmxlbmd0aCAvIDIpIHsKICAgICAgYnl0ZXMzMiBzeW1ib2wgPSBieXRlczMyKGRhdGFbaSAqIDJdKTsKICAgICAgdWludCByYXRlID0gZGF0YVtpICogMiArIDFdOwogICAgICByYXRlc1tzeW1ib2xdID0gcmF0ZTsKICAgICAgUmF0ZVVwZGF0ZWQobm93LCBzeW1ib2wsIHJhdGUpOwogICAgICBpKys7CiAgICB9CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgYW55b25lIHRvIHJlYWQgdGhlIGN1cnJlbnQgcmF0ZS4KICAgKiBAcGFyYW0gX3N5bWJvbCB0aGUgc3ltYm9sIHRvIGJlIHJldHJpZXZlZC4gCiAgICovCiAgZnVuY3Rpb24gZ2V0UmF0ZShzdHJpbmcgX3N5bWJvbCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgcmV0dXJuIHJhdGVzW3NoYTMoX3N5bWJvbCldOwogIH0KCn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuIAogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZihtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCkgewogICAgICAgdGhyb3c7CiAgICAgfQogICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWFudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFydCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlYWhsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9CgoKCgoKCi8qKgogKiBAdGl0bGUgTWludGFibGUgdG9rZW4KICogQGRldiBTaW1wbGUgRVJDMjAgVG9rZW4gZXhhbXBsZSwgd2l0aCBtaW50YWJsZSB0b2tlbiBjcmVhdGlvbgogKiBAZGV2IElzc3VlOiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvaXNzdWVzLzEyMAogKiBCYXNlZCBvbiBjb2RlIGJ5IFRva2VuTWFya2V0TmV0OiBodHRwczovL2dpdGh1Yi5jb20vVG9rZW5NYXJrZXROZXQvaWNvL2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9NaW50YWJsZVRva2VuLnNvbAogKi8KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseSA9IDA7CgoKICBtb2RpZmllciBjYW5NaW50KCkgewogICAgaWYobWludGluZ0ZpbmlzaGVkKSB0aHJvdzsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjaWV2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBvbmx5T3duZXIgY2FuTWludCByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgUGF5VG9rZW4KICogQGRldiBUaGUgbWFpbiBQQVkgdG9rZW4gY29udHJhY3QKICogCiAqIEFCSSAKICogW3siY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJtaW50aW5nRmluaXNoZWQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoibmFtZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoic3RyaW5nIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9zcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImFwcHJvdmUiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJ0b3RhbFN1cHBseSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfZnJvbSIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InRyYW5zZmVyRnJvbSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJzdGFydFRyYWRpbmciLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJkZWNpbWFscyIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfdG8iLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il9hbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6Im1pbnQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoidHJhZGluZ1N0YXJ0ZWQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfb3duZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6ImJhbGFuY2VPZiIsIm91dHB1dHMiOlt7Im5hbWUiOiJiYWxhbmNlIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6ImZpbmlzaE1pbnRpbmciLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoib3duZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoic3ltYm9sIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJzdHJpbmcifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX3RvIiwidHlwZSI6ImFkZHJlc3MifSx7Im5hbWUiOiJfdmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InRyYW5zZmVyIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfb3duZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsibmFtZSI6Il9zcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJhbGxvd2FuY2UiLCJvdXRwdXRzIjpbeyJuYW1lIjoicmVtYWluaW5nIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoibmV3T3duZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6InRyYW5zZmVyT3duZXJzaGlwIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6InRvIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoidmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6Ik1pbnQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W10sIm5hbWUiOiJNaW50RmluaXNoZWQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6dHJ1ZSwibmFtZSI6Im93bmVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJzcGVuZGVyIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoidmFsdWUiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IkFwcHJvdmFsIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJmcm9tIiwidHlwZSI6ImFkZHJlc3MifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJ0byIsInR5cGUiOiJhZGRyZXNzIn0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InZhbHVlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJUcmFuc2ZlciIsInR5cGUiOiJldmVudCJ9XQogKi8KY29udHJhY3QgSGFyZFRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewoKICBzdHJpbmcgcHVibGljIG5hbWUgPSAiSGFyZCBUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiSERUIjsKICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICBib29sIHB1YmxpYyB0cmFkaW5nU3RhcnRlZCA9IGZhbHNlOwoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRoYXQgdGhyb3dzIGlmIHRyYWRpbmcgaGFzIG5vdCBzdGFydGVkIHlldAogICAqLwogIG1vZGlmaWVyIGhhc1N0YXJ0ZWRUcmFkaW5nKCkgewogICAgcmVxdWlyZSh0cmFkaW5nU3RhcnRlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIGVuYWJsZSB0aGUgdHJhZGluZy4gVGhpcyBjYW4gbm90IGJlIHVuZG9uZQogICAqLwogIGZ1bmN0aW9uIHN0YXJ0VHJhZGluZygpIG9ubHlPd25lciB7CiAgICB0cmFkaW5nU3RhcnRlZCA9IHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gdHJhbnNmZXIgdGhlIFBBWSB0b2tlbnMgb25jZSB0cmFkaW5nIGhhcyBzdGFydGVkCiAgICogQHBhcmFtIF90byB0aGUgcmVjaXBpZW50IGFkZHJlc3Mgb2YgdGhlIHRva2Vucy4gCiAgICogQHBhcmFtIF92YWx1ZSBudW1iZXIgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQuIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaGFzU3RhcnRlZFRyYWRpbmcgewogICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgIC8qKgogICAqIEBkZXYgQWxsb3dzIGFueW9uZSB0byB0cmFuc2ZlciB0aGUgUEFZIHRva2VucyBvbmNlIHRyYWRpbmcgaGFzIHN0YXJ0ZWQKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIGhhc1N0YXJ0ZWRUcmFkaW5nIHsKICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCn0KCgovKioKICogQHRpdGxlIE1haW5TYWxlCiAqIEBkZXYgVGhlIG1haW4gUEFZIHRva2VuIHNhbGUgY29udHJhY3QKICogCiAqIEFCSQogKiBbeyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9tdWx0aXNpZ1ZhdWx0IiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJzZXRNdWx0aXNpZ1ZhdWx0Iiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJhdXRob3JpemVySW5kZXgiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImdldEF1dGhvcml6ZXIiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiZXhjaGFuZ2VSYXRlIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImFsdERlcG9zaXRzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6InJlY2lwaWVudCIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoidG9rZW5zIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhdXRob3JpemVkQ3JlYXRlVG9rZW5zIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbXSwibmFtZSI6ImZpbmlzaE1pbnRpbmciLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJvd25lciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfZXhjaGFuZ2VSYXRlIiwidHlwZSI6ImFkZHJlc3MifV0sIm5hbWUiOiJzZXRFeGNoYW5nZVJhdGUiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfdG9rZW4iLCJ0eXBlIjoiYWRkcmVzcyJ9XSwibmFtZSI6InJldHJpZXZlVG9rZW5zIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoidG90YWxBbHREZXBvc2l0cyIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoic2V0QWx0RGVwb3NpdCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InN0YXJ0Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6InJlY2lwaWVudCIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiY3JlYXRlVG9rZW5zIiwib3V0cHV0cyI6W10sInBheWFibGUiOnRydWUsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYWRkQXV0aG9yaXplZCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6Im11bHRpc2lnVmF1bHQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2hhcmRjYXAiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InNldEhhcmRDYXAiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJuZXdPd25lciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoidHJhbnNmZXJPd25lcnNoaXAiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfc3RhcnQiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6InNldFN0YXJ0Iiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoidG9rZW4iLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6ImFkZHJlc3MifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOlt7Im5hbWUiOiJfYWRkciIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiaXNBdXRob3JpemVkIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJwYXlhYmxlIjp0cnVlLCJ0eXBlIjoiZmFsbGJhY2sifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJyZWNpcGllbnQiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJldGhlcl9hbW91bnQiLCJ0eXBlIjoidWludDI1NiJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJwYXlfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoiZXhjaGFuZ2VyYXRlIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJUb2tlblNvbGQiLCJ0eXBlIjoiZXZlbnQifSx7ImFub255bW91cyI6ZmFsc2UsImlucHV0cyI6W3siaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJyZWNpcGllbnQiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJwYXlfYW1vdW50IiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJBdXRob3JpemVkQ3JlYXRlIiwidHlwZSI6ImV2ZW50In0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiTWFpblNhbGVDbG9zZWQiLCJ0eXBlIjoiZXZlbnQifV0KICovCmNvbnRyYWN0IE1haW5TYWxlIGlzIE93bmFibGUsIEF1dGhvcml6YWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgZXZlbnQgVG9rZW5Tb2xkKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50IGV0aGVyX2Ftb3VudCwgdWludCBwYXlfYW1vdW50LCB1aW50IGV4Y2hhbmdlcmF0ZSk7CiAgZXZlbnQgQXV0aG9yaXplZENyZWF0ZShhZGRyZXNzIHJlY2lwaWVudCwgdWludCBwYXlfYW1vdW50KTsKICBldmVudCBNYWluU2FsZUNsb3NlZCgpOwoKICBIYXJkVG9rZW4gcHVibGljIHRva2VuID0gbmV3IEhhcmRUb2tlbigpOwoKICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ1ZhdWx0OwoKICB1aW50IGhhcmRjYXAgPSAyNTAwIGV0aGVyOwogIEV4Y2hhbmdlUmF0ZSBwdWJsaWMgZXhjaGFuZ2VSYXRlOwoKICB1aW50IHB1YmxpYyBhbHREZXBvc2l0cyA9IDA7CiAgdWludCBwdWJsaWMgc3RhcnQgPSAxNTIxNDkzMjAwOyAvL25ldyBEYXRlKCIwMyAxOSAyMDE4IDIxOjAwOjAwIEdNVCIpLmdldFRpbWUoKSAvIDEwMDAKCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyB0b2tlbiBjcmVhdGlvbiBvbmx5IHdoZW4gdGhlIHNhbGUgSVMgT04KICAgKi8KICBtb2RpZmllciBzYWxlSXNPbigpIHsKICAgIHJlcXVpcmUobm93ID4gc3RhcnQgJiYgbm93IDwgc3RhcnQgKyAzMCBkYXlzKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IHRva2VuIGNyZWF0aW9uIG9ubHkgd2hlbiB0aGUgaGFyZGNhcCBoYXMgbm90IGJlZW4gcmVhY2hlZAogICAqLwogIG1vZGlmaWVyIGlzVW5kZXJIYXJkQ2FwKCkgewogICAgcmVxdWlyZShtdWx0aXNpZ1ZhdWx0LmJhbGFuY2UgKyBhbHREZXBvc2l0cyA8PSBoYXJkY2FwKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyBhbnlvbmUgdG8gY3JlYXRlIHRva2VucyBieSBkZXBvc2l0aW5nIGV0aGVyLgogICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4gCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50KSBwdWJsaWMgaXNVbmRlckhhcmRDYXAgc2FsZUlzT24gcGF5YWJsZSB7CiAgICB1aW50IHJhdGUgPSBleGNoYW5nZVJhdGUuZ2V0UmF0ZSgiRVRIIik7CiAgICB1aW50IHRva2VucyA9IHJhdGUubXVsKG1zZy52YWx1ZSkuZGl2KDEgZXRoZXIpOwogICAgdG9rZW4ubWludChyZWNpcGllbnQsIHRva2Vucyk7CiAgICByZXF1aXJlKG11bHRpc2lnVmF1bHQuc2VuZChtc2cudmFsdWUpKTsKICAgIFRva2VuU29sZChyZWNpcGllbnQsIG1zZy52YWx1ZSwgdG9rZW5zLCByYXRlKTsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0byBzZXQgdGhlIHRvYWwgYWx0IGRlcG9zaXQgbWVhc3VyZWQgaW4gRVRIIHRvIG1ha2Ugc3VyZSB0aGUgaGFyZGNhcCBpbmNsdWRlcyBvdGhlciBkZXBvc2l0cwogICAqIEBwYXJhbSB0b3RhbEFsdERlcG9zaXRzIHRvdGFsIGFtb3VudCBFVEggZXF1aXZhbGVudAogICAqLwogIGZ1bmN0aW9uIHNldEFsdERlcG9zaXQodWludCB0b3RhbEFsdERlcG9zaXRzKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGFsdERlcG9zaXRzID0gdG90YWxBbHREZXBvc2l0czsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIGF1dGhvcml6ZWQgYWNjZXMgdG8gY3JlYXRlIHRva2Vucy4gVGhpcyBpcyB1c2VkIGZvciBCaXRjb2luIGFuZCBFUkMyMCBkZXBvc2l0cwogICAqIEBwYXJhbSByZWNpcGllbnQgdGhlIHJlY2lwaWVudCB0byByZWNlaXZlIHRva2Vucy4KICAgKiBAcGFyYW0gdG9rZW5zIG51bWJlciBvZiB0b2tlbnMgdG8gYmUgY3JlYXRlZC4gCiAgICovCiAgZnVuY3Rpb24gYXV0aG9yaXplZENyZWF0ZVRva2VucyhhZGRyZXNzIHJlY2lwaWVudCwgdWludCB0b2tlbnMpIHB1YmxpYyBvbmx5QXV0aG9yaXplZCB7CiAgICB0b2tlbi5taW50KHJlY2lwaWVudCwgdG9rZW5zKTsKICAgIEF1dGhvcml6ZWRDcmVhdGUocmVjaXBpZW50LCB0b2tlbnMpOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgaGFyZGNhcC4KICAgKiBAcGFyYW0gX2hhcmRjYXAgdGhlIG5ldyBoYXJkY2FwCiAgICovCiAgZnVuY3Rpb24gc2V0SGFyZENhcCh1aW50IF9oYXJkY2FwKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGhhcmRjYXAgPSBfaGFyZGNhcDsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBzZXQgdGhlIHN0YXJ0aW5nIHRpbWUuCiAgICogQHBhcmFtIF9zdGFydCB0aGUgbmV3IF9zdGFydAogICAqLwogIGZ1bmN0aW9uIHNldFN0YXJ0KHVpbnQgX3N0YXJ0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHN0YXJ0ID0gX3N0YXJ0OwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHNldCB0aGUgbXVsdGlzaWcgY29udHJhY3QuCiAgICogQHBhcmFtIF9tdWx0aXNpZ1ZhdWx0IHRoZSBtdWx0aXNpZyBjb250cmFjdCBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gc2V0TXVsdGlzaWdWYXVsdChhZGRyZXNzIF9tdWx0aXNpZ1ZhdWx0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIGlmIChfbXVsdGlzaWdWYXVsdCAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG11bHRpc2lnVmF1bHQgPSBfbXVsdGlzaWdWYXVsdDsKICAgIH0KICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBzZXQgdGhlIGV4Y2hhbmdlcmF0ZSBjb250cmFjdC4KICAgKiBAcGFyYW0gX2V4Y2hhbmdlUmF0ZSB0aGUgZXhjaGFuZ2VyYXRlIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiBzZXRFeGNoYW5nZVJhdGUoYWRkcmVzcyBfZXhjaGFuZ2VSYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgIGV4Y2hhbmdlUmF0ZSA9IEV4Y2hhbmdlUmF0ZShfZXhjaGFuZ2VSYXRlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBvd25lciB0byBmaW5pc2ggdGhlIG1pbnRpbmcuIFRoaXMgd2lsbCBjcmVhdGUgdGhlIAogICAqIHJlc3RyaWN0ZWQgdG9rZW5zIGFuZCB0aGVuIGNsb3NlIHRoZSBtaW50aW5nLgogICAqIFRoZW4gdGhlIG93bmVyc2hpcCBvZiB0aGUgUEFZIHRva2VuIGNvbnRyYWN0IGlzIHRyYW5zZmVyZWQgCiAgICogdG8gdGhpcyBvd25lci4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlPd25lciB7CiAgICB1aW50IGlzc3VlZFRva2VuU3VwcGx5ID0gdG9rZW4udG90YWxTdXBwbHkoKTsKICAgIHVpbnQgcmVzdHJpY3RlZFRva2VucyA9IGlzc3VlZFRva2VuU3VwcGx5Lm11bCg0OSkuZGl2KDUxKTsKICAgIHRva2VuLm1pbnQobXVsdGlzaWdWYXVsdCwgcmVzdHJpY3RlZFRva2Vucyk7CiAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgICB0b2tlbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7CiAgICBNYWluU2FsZUNsb3NlZCgpOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIHRyYW5zZmVyIEVSQzIwIHRva2VucyB0byB0aGUgbXVsdGkgc2lnIHZhdWx0CiAgICogQHBhcmFtIF90b2tlbiB0aGUgY29udHJhY3QgYWRkcmVzcyBvZiB0aGUgRVJDMjAgY29udHJhY3QKICAgKi8KICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbikgcHVibGljIG9ubHlPd25lciB7CiAgICBFUkMyMCB0b2tlbiA9IEVSQzIwKF90b2tlbik7CiAgICB0b2tlbi50cmFuc2ZlcihtdWx0aXNpZ1ZhdWx0LCB0b2tlbi5iYWxhbmNlT2YodGhpcykpOwogIH0KCiAgLyoqCiAgICogQGRldiBGYWxsYmFjayBmdW5jdGlvbiB3aGljaCByZWNlaXZlcyBldGhlciBhbmQgY3JlYXRlZCB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIHRva2VucyBmb3IgdGhlIAogICAqIG1zZy5zZW5kZXIuCiAgICovCiAgZnVuY3Rpb24oKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgIGNyZWF0ZVRva2Vucyhtc2cuc2VuZGVyKTsKICB9Cgp9'.
	

]
