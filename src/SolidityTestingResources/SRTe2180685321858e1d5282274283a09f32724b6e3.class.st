Class {
	#name : #SRTe2180685321858e1d5282274283a09f32724b6e3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe2180685321858e1d5282274283a09f32724b6e3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgcmV2ZXJ0KCk7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgIE1pbnQoX3RvLCBfYW1vdW50KTsKICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBNaWxrQ29pblRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewkKIAogIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogIHVpbnQgcHVibGljIGNvbnN0YW50IFBFUkNFTlRfUkFURSA9IDEwMDsKCiAgdWludCBwdWJsaWMgY29uc3RhbnQgQlVZX0JBQ0tfQk9OVVMgPSAyMDsKICAgCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIk1pbGtjb2luIjsKICAgCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiTUxDTiI7CiAgICAKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAyOwoKICB1aW50IHB1YmxpYyBpbnZlc3RlZDsKCiAgdWludCBwdWJsaWMgdG9rZW5zQWZ0ZXJDcm93ZHNhbGU7CgogIHVpbnQgcHVibGljIHN0YXJ0QnV5QmFja0RhdGU7CgogIHVpbnQgcHVibGljIGVuZEJ1eUJhY2tEYXRlOwoKICB1aW50IHB1YmxpYyB0b0J1eUJhY2s7CgogIGJvb2wgcHVibGljIGRpdmlkZW5kc0NhbGN1bGF0ZWQ7CgogIHVpbnQgcHVibGljIGRpdmlkZW5kc0luZGV4OwoKICB1aW50IHB1YmxpYyBkaXZpZGVuZHNQYXllZEluZGV4OwogICAgICAKICBib29sIHB1YmxpYyBkaXZpZGVuZHNQYXllZDsKCiAgdWludCBwdWJsaWMgZXRoVG9EaXZpZGVuZHNOZWVkczsKCiAgdWludCBwdWJsaWMgYnV5QmFja0ludmVzdGVkVmFsdWU7CgogIGFkZHJlc3NbXSBwdWJsaWMgYWRkcmVzc2VzOwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHNhdmVkQWRkcmVzc2VzOwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGRpdmlkZW5kczsKCiAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBsb2NrQWRkcmVzc2VzOwoKICBmdW5jdGlvbiBhZGRBZGRyZXNzKGFkZHJlc3MgYWRkcikgaW50ZXJuYWwgewogICAgaWYoIXNhdmVkQWRkcmVzc2VzW2FkZHJdKSB7CiAgICAgICBzYXZlZEFkZHJlc3Nlc1thZGRyXSA9IHRydWU7CiAgICAgICBhZGRyZXNzZXMucHVzaChhZGRyKTsgCiAgICB9CiAgfQoKICBmdW5jdGlvbiBjb3VudE9mQWRkcmVzc2VzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgcmV0dXJuIGFkZHJlc3Nlcy5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBib29sIHJlc3VsdCA9IHN1cGVyLm1pbnQoX3RvLCBfYW1vdW50KTsKICAgIGlmKHJlc3VsdCkgewogICAgICBhZGRBZGRyZXNzKF90byk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHBvc3RQcm9jZXNzVHJhbnNmZXIoc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpLCBtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHBvc3RQcm9jZXNzVHJhbnNmZXIoc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSksIF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBwb3N0UHJvY2Vzc1RyYW5zZmVyKGJvb2wgcmVzdWx0LCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgIGlmKHJlc3VsdCkgewogICAgICBpZihfdG8gPT0gYWRkcmVzcyh0aGlzKSkgewogICAgICAgIGJ1eUJhY2soX2Zyb20sIF92YWx1ZSk7CiAgICAgIH0gZWxzZSB7IAogICAgICAgIGFkZEFkZHJlc3MoX3RvKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIGJ1eUJhY2soYWRkcmVzcyBmcm9tLCB1aW50IGFtb3VudCkgaW50ZXJuYWwgewogICAgaWYobm93ID4gZW5kQnV5QmFja0RhdGUpIHsKICAgICAgc3RhcnRCdXlCYWNrRGF0ZSA9IGVuZEJ1eUJhY2tEYXRlOwogICAgICBlbmRCdXlCYWNrRGF0ZSA9IHN0YXJ0QnV5QmFja0RhdGUgKyAxIHllYXJzOyAgICAgIAogICAgICB0b0J1eUJhY2sgPSB0b2tlbnNBZnRlckNyb3dkc2FsZS5kaXYoMTApOwogICAgfQogICAgcmVxdWlyZShub3cgPiBzdGFydEJ1eUJhY2tEYXRlICYmIG5vdyA8IGVuZEJ1eUJhY2tEYXRlICYmIGFtb3VudCA8PSB0b0J1eUJhY2spOyAKICAgIGJhbGFuY2VzW3RoaXNdID0gYmFsYW5jZXNbdGhpc10uc3ViKGFtb3VudCk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihhbW91bnQpOwogICAgQnVybih0aGlzLCBhbW91bnQpOwogICAgdG9CdXlCYWNrID0gdG9CdXlCYWNrLnN1YihhbW91bnQpOwogICAgdWludCB2YWx1ZUluV2VpID0gYW1vdW50Lm11bChidXlCYWNrSW52ZXN0ZWRWYWx1ZSkubXVsKFBFUkNFTlRfUkFURS5hZGQoQlVZX0JBQ0tfQk9OVVMpKS5kaXYoUEVSQ0VOVF9SQVRFKS5kaXYodG90YWxTdXBwbHkpOwogICAgYnV5QmFja0ludmVzdGVkVmFsdWUgPSBidXlCYWNrSW52ZXN0ZWRWYWx1ZS5zdWIoYW1vdW50Lm11bChidXlCYWNrSW52ZXN0ZWRWYWx1ZSkuZGl2KHRvdGFsU3VwcGx5KSk7CiAgICBmcm9tLnRyYW5zZmVyKHZhbHVlSW5XZWkpOwogIH0KCiAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBhbm90aGVyVG9rZW4pIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShhbm90aGVyVG9rZW4gIT0gYWRkcmVzcyh0aGlzKSk7CiAgICBFUkMyMCBhbGllblRva2VuID0gRVJDMjAoYW5vdGhlclRva2VuKTsKICAgIGFsaWVuVG9rZW4udHJhbnNmZXIob3duZXIsIGFsaWVuVG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICB9CgogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcodWludCBuZXdJbnZlc3RlZCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBpbnZlc3RlZCA9IG5ld0ludmVzdGVkOwogICAgYnV5QmFja0ludmVzdGVkVmFsdWUgPSBuZXdJbnZlc3RlZDsKICAgIHRva2Vuc0FmdGVyQ3Jvd2RzYWxlID0gdG90YWxTdXBwbHk7ICAgIAogICAgc3RhcnRCdXlCYWNrRGF0ZSA9IG5vdzsKICAgIGVuZEJ1eUJhY2tEYXRlID0gc3RhcnRCdXlCYWNrRGF0ZSArIDM2NSAqIDEgZGF5czsgICAgICAKICAgIHRvQnV5QmFjayA9IHRva2Vuc0FmdGVyQ3Jvd2RzYWxlLmRpdigxMCk7CiAgICByZXR1cm4gc3VwZXIuZmluaXNoTWludGluZygpOwogIH0KCiAgZnVuY3Rpb24gbG9ja0FkZHJlc3MoYWRkcmVzcyB0b0xvY2spIHB1YmxpYyBvbmx5T3duZXIgewogICAgbG9ja0FkZHJlc3Nlc1t0b0xvY2tdID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHVubG9ja0FkZHJlc3MoYWRkcmVzcyB0b0xvY2spIHB1YmxpYyBvbmx5T3duZXIgewogICAgbG9ja0FkZHJlc3Nlc1t0b0xvY2tdID0gZmFsc2U7CiAgfQoKICAvLyBzaG91bGQgdXNlIHdoZW4gcGF5RGl2aWRlbmRzIGlzIHVuZGVyIHJlLWVudHJhbmNlIGZyZWV6ZQogIGZ1bmN0aW9uIHBheURpdmlkZW5kc01hbnVhbGx5KCkgcHVibGljIHsKICAgIHJlcXVpcmUoZGl2aWRlbmRzW21zZy5zZW5kZXJdID4gMCk7CiAgICB1aW50IGRpdmlkZW5kc1ZhbHVlID0gZGl2aWRlbmRzW21zZy5zZW5kZXJdOwogICAgZGl2aWRlbmRzW21zZy5zZW5kZXJdID0gMDsKICAgIGV0aFRvRGl2aWRlbmRzTmVlZHMgPSBldGhUb0RpdmlkZW5kc05lZWRzLnN1YihkaXZpZGVuZHNWYWx1ZSk7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGRpdmlkZW5kc1ZhbHVlKTsKICB9CgogIC8vIHNob3VsZCB1c2Ugd2hlbiBwYXlEaXZpZGVuZHMgaXMgdW5kZXIgcmUtZW50cmFuY2UgZnJlZXplCiAgZnVuY3Rpb24gcmVzZXREaXZpZGVuZHNDYWxjdWxhdGlvbigpIHB1YmxpYyBvbmx5T3duZXIgewogICAgZGl2aWRlbmRzQ2FsY3VsYXRlZCA9IGZhbHNlOwogICAgZGl2aWRlbmRzUGF5ZWQgPSBmYWxzZTsKICB9CgogIC8vIHJlLWVudHJhbmNlIGF0dGFjayBjYW4gZnJlZXplIGFsbCBkaXZpZGVuZHMgY2FsY3VsYXRpb24KICBmdW5jdGlvbiBwYXlEaXZpZGVuZHModWludCBjb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFkaXZpZGVuZHNQYXllZCAmJiBkaXZpZGVuZHNDYWxjdWxhdGVkKTsKICAgIGZvcih1aW50IGkgPSAwOyBkaXZpZGVuZHNQYXllZEluZGV4IDwgYWRkcmVzc2VzLmxlbmd0aCAmJiBpIDwgY291bnQ7IGkrKykgewogICAgICBhZGRyZXNzIHRva2VuSG9sZGVyID0gYWRkcmVzc2VzW2RpdmlkZW5kc1BheWVkSW5kZXhdOwogICAgICBpZighbG9ja0FkZHJlc3Nlc1t0b2tlbkhvbGRlcl0gJiYgZGl2aWRlbmRzW3Rva2VuSG9sZGVyXSAhPSAwKSB7CiAgICAgICAgdWludCB2YWx1ZSA9IGRpdmlkZW5kc1t0b2tlbkhvbGRlcl07CiAgICAgICAgZGl2aWRlbmRzW3Rva2VuSG9sZGVyXSA9IDA7CiAgICAgICAgZXRoVG9EaXZpZGVuZHNOZWVkcyA9IGV0aFRvRGl2aWRlbmRzTmVlZHMuc3ViKHZhbHVlKTsKICAgICAgICB0b2tlbkhvbGRlci50cmFuc2Zlcih2YWx1ZSk7CiAgICAgIH0KICAgICAgZGl2aWRlbmRzUGF5ZWRJbmRleCsrOwogICAgfQogICAgaWYoZGl2aWRlbmRzUGF5ZWRJbmRleCA9PSBhZGRyZXNzZXMubGVuZ3RoKSB7ICAKICAgICAgZGl2aWRlbmRzUGF5ZWRJbmRleCA9IDA7CiAgICAgIGRpdmlkZW5kc1BheWVkID0gdHJ1ZTsKICAgICAgZGl2aWRlbmRzQ2FsY3VsYXRlZCA9IGZhbHNlOwogICAgfQogIH0KICAKCiAgLy8gcmUtZW50cmFuY2UgYXR0YWNrIGNhbiBmcmVlemUgYWxsIGRpdmlkZW5kcyBjYWxjdWxhdGlvbgogIGZ1bmN0aW9uIGNhbGN1bGF0ZURpdmlkZW5kcyh1aW50IHBlcmNlbnQsIHVpbnQgY291bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZSghZGl2aWRlbmRzQ2FsY3VsYXRlZCk7CiAgICBmb3IodWludCBpID0gMDsgZGl2aWRlbmRzSW5kZXggPCBhZGRyZXNzZXMubGVuZ3RoICYmIGkgPCBjb3VudDsgaSsrKSB7CiAgICAgIGFkZHJlc3MgdG9rZW5Ib2xkZXIgPSBhZGRyZXNzZXNbZGl2aWRlbmRzSW5kZXhdOwogICAgICBpZihiYWxhbmNlc1t0b2tlbkhvbGRlcl0gIT0gMCkgewogICAgICAgIHVpbnQgdmFsdWVJbldlaSA9IGJhbGFuY2VzW3Rva2VuSG9sZGVyXS5tdWwoaW52ZXN0ZWQpLm11bChwZXJjZW50KS5kaXYoUEVSQ0VOVF9SQVRFKS5kaXYodG90YWxTdXBwbHkpOwogICAgICAgIGV0aFRvRGl2aWRlbmRzTmVlZHMgPSBldGhUb0RpdmlkZW5kc05lZWRzLmFkZCh2YWx1ZUluV2VpKTsKICAgICAgICBkaXZpZGVuZHNbdG9rZW5Ib2xkZXJdID0gZGl2aWRlbmRzW3Rva2VuSG9sZGVyXS5hZGQodmFsdWVJbldlaSk7CiAgICAgIH0KICAgICAgZGl2aWRlbmRzSW5kZXgrKzsKICAgIH0KICAgIGlmKGRpdmlkZW5kc0luZGV4ID09IGFkZHJlc3Nlcy5sZW5ndGgpIHsgIAogICAgICBkaXZpZGVuZHNJbmRleCA9IDA7CiAgICAgIGRpdmlkZW5kc0NhbGN1bGF0ZWQgPSB0cnVlOwogICAgICBkaXZpZGVuZHNQYXllZCA9IGZhbHNlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0KCkgcHVibGljIHBheWFibGUgewogIH0KCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgZGVwb3NpdCgpOwogIH0KCn0KCmNvbnRyYWN0IENvbW1vbkNyb3dkc2FsZSBpcyBPd25hYmxlIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAKICB1aW50IHB1YmxpYyBjb25zdGFudCBESVZJREVSID0gMTAwMDAwMDAwMDAwMDAwMDA7CgogIHVpbnQgcHVibGljIGNvbnN0YW50IFBFUkNFTlRfUkFURSA9IDEwMDsKCiAgdWludCBwdWJsaWMgcHJpY2UgPSAxNTAwOwoKICB1aW50IHB1YmxpYyBtaW5JbnZlc3RlZExpbWl0ID0gMTAwMDAwMDAwMDAwMDAwMDAwOwoKICB1aW50IHB1YmxpYyBoYXJkY2FwID0gMjUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICB1aW50IHB1YmxpYyBzdGFydCA9IDE1MTA3NTgwMDA7CgogIHVpbnQgcHVibGljIGludmVzdGVkOwoKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIHN0cnVjdCBNaWxlc3RvbmUgewogICAgdWludCBwZXJpb2RJbkRheXM7CiAgICB1aW50IGJvbnVzOwogIH0KCiAgTWlsZXN0b25lW10gcHVibGljIG1pbGVzdG9uZXM7CgogIE1pbGtDb2luVG9rZW4gcHVibGljIHRva2VuID0gbmV3IE1pbGtDb2luVG9rZW4oKTsKCiAgZnVuY3Rpb24gc2V0SGFyZGNhcCh1aW50IG5ld0hhcmRjYXApIHB1YmxpYyBvbmx5T3duZXIgeyAKICAgIGhhcmRjYXAgPSBuZXdIYXJkY2FwOwogIH0KIAogIGZ1bmN0aW9uIHNldFN0YXJ0KHVpbnQgbmV3U3RhcnQpIHB1YmxpYyBvbmx5T3duZXIgeyAKICAgIHN0YXJ0ID0gbmV3U3RhcnQ7CiAgfQoKICBmdW5jdGlvbiBzZXRXYWxsZXQoYWRkcmVzcyBuZXdXYWxsZXQpIHB1YmxpYyBvbmx5T3duZXIgeyAKICAgIHdhbGxldCA9IG5ld1dhbGxldDsKICB9CgogIGZ1bmN0aW9uIHNldFByaWNlKHVpbnQgbmV3UHJpY2UpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcHJpY2UgPSBuZXdQcmljZTsKICB9CgogIGZ1bmN0aW9uIHNldE1pbkludmVzdGVkTGltaXQodWludCBuZXdNaW5JbnZlc3RlZExpbWl0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIG1pbkludmVzdGVkTGltaXQgPSBuZXdNaW5JbnZlc3RlZExpbWl0OwogIH0KIAogIGZ1bmN0aW9uIG1pbGVzdG9uZXNDb3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIHJldHVybiBtaWxlc3RvbmVzLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGFkZE1pbGVzdG9uZSh1aW50IGxpbWl0LCB1aW50IGJvbnVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgIG1pbGVzdG9uZXMucHVzaChNaWxlc3RvbmUobGltaXQsIGJvbnVzKSk7CiAgfQoKICBmdW5jdGlvbiBlbmQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICB1aW50IGxhc3QgPSBzdGFydDsKICAgIGZvciAodWludCBpID0gMDsgaSA8IG1pbGVzdG9uZXMubGVuZ3RoOyBpKyspIHsKICAgICAgTWlsZXN0b25lIHN0b3JhZ2UgbWlsZXN0b25lID0gbWlsZXN0b25lc1tpXTsKICAgICAgbGFzdCArPSBtaWxlc3RvbmUucGVyaW9kSW5EYXlzICogMSBkYXlzOwogICAgfQogICAgcmV0dXJuIGxhc3Q7CiAgfQoKICBmdW5jdGlvbiBnZXRNaWxlc3RvbmVCb251cygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIHVpbnQgcHJldlRpbWVMaW1pdCA9IHN0YXJ0OwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbWlsZXN0b25lcy5sZW5ndGg7IGkrKykgewogICAgICBNaWxlc3RvbmUgc3RvcmFnZSBtaWxlc3RvbmUgPSBtaWxlc3RvbmVzW2ldOwogICAgICBwcmV2VGltZUxpbWl0ICs9IG1pbGVzdG9uZS5wZXJpb2RJbkRheXMgKiAxIGRheXM7CiAgICAgIGlmIChub3cgPCBwcmV2VGltZUxpbWl0KQogICAgICAgIHJldHVybiBtaWxlc3RvbmUuYm9udXM7CiAgICB9CiAgICByZXZlcnQoKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRva2Vuc01hbnVhbGx5KGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobm93ID49IHN0YXJ0ICYmIG5vdyA8IGVuZCgpKTsKICAgIHRva2VuLm1pbnQodG8sIGFtb3VudCk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVUb2tlbnMoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKG5vdyA+PSBzdGFydCAmJiBub3cgPCBlbmQoKSAmJiBpbnZlc3RlZCA8IGhhcmRjYXApOwogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICBpbnZlc3RlZCA9IGludmVzdGVkLmFkZChtc2cudmFsdWUpOwogICAgdWludCB0b2tlbnMgPSBwcmljZS5tdWwobXNnLnZhbHVlKS5kaXYoRElWSURFUik7CiAgICB1aW50IGJvbnVzUGVyY2VudCA9IGdldE1pbGVzdG9uZUJvbnVzKCk7ICAgIAogICAgaWYoYm9udXNQZXJjZW50ID4gMCkgewogICAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKHRva2Vucy5tdWwoYm9udXNQZXJjZW50KS5kaXYoUEVSQ0VOVF9SQVRFKSk7CiAgICB9CiAgICB0b2tlbi5taW50KG1zZy5zZW5kZXIsIHRva2Vucyk7CiAgfQoKICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlPd25lciB7CiAgICB0b2tlbi5maW5pc2hNaW50aW5nKGludmVzdGVkKTsKICAgIHRva2VuLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKICB9CgogIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICBjcmVhdGVUb2tlbnMoKTsKICB9CgogIGZ1bmN0aW9uIHJldHJpZXZlVG9rZW5zKGFkZHJlc3MgYW5vdGhlclRva2VuKSBwdWJsaWMgb25seU93bmVyIHsKICAgIEVSQzIwIGFsaWVuVG9rZW4gPSBFUkMyMChhbm90aGVyVG9rZW4pOwogICAgYWxpZW5Ub2tlbi50cmFuc2Zlcih3YWxsZXQsIGFsaWVuVG9rZW4uYmFsYW5jZU9mKHRoaXMpKTsKICB9Cgp9Cgpjb250cmFjdCBNaWxrQ29pblRva2VuQ3Jvd2RzYWxlIGlzIENvbW1vbkNyb3dkc2FsZSB7CgogIGZ1bmN0aW9uIE1pbGtDb2luVG9rZW5Dcm93ZHNhbGUoKSBwdWJsaWMgewogICAgc2V0SGFyZGNhcCgyNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDApOwogICAgc2V0U3RhcnQoMTUxMDc1ODAwMCk7CiAgICBzZXRQcmljZSgxNTAwKTsKICAgIHNldFdhbGxldCgweDg3MTI3Q2IyYTczZUE5YmE4NDJiMjA4NDU1ZmEwNzZjYWIwM0U4NDQpOwogICAgYWRkTWlsZXN0b25lKDMsIDEwMCk7CiAgICBhZGRNaWxlc3RvbmUoNSwgNjcpOwogICAgYWRkTWlsZXN0b25lKDUsIDQzKTsKICAgIGFkZE1pbGVzdG9uZSg1LCAyNSk7CiAgICBhZGRNaWxlc3RvbmUoMTIsIDApOwogICAgdHJhbnNmZXJPd25lcnNoaXAoMHhiNzk0QjZjNjExYkZDMDlBQkQyMDYxODQ0MTcwODJkM0NBNTcwRkI3KTsKICB9Cgp9'.
	

]
