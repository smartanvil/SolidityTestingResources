Class {
	#name : #SRTa24e3ec82d4aa6c32d45f54b362d2dbd43c41c37,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa24e3ec82d4aa6c32d45f54b362d2dbd43c41c37 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTA7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHJldmVydCgpOwogIH0KfQoKY29udHJhY3QgVG9rZW4gewogIC8vLyBAcmV0dXJuIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKICB1aW50IHB1YmxpYyBkZWNpbWFsczsKICBzdHJpbmcgcHVibGljIG5hbWU7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKfQoKY29udHJhY3QgUmVzZXJ2ZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBtaW50ZXI7CiAgZnVuY3Rpb24gUmVzZXJ2ZVRva2VuKCkgewogICAgbWludGVyID0gbXNnLnNlbmRlcjsKICB9CiAgZnVuY3Rpb24gY3JlYXRlKGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG1pbnRlcikgcmV2ZXJ0KCk7CiAgICBiYWxhbmNlc1thY2NvdW50XSA9IHNhZmVBZGQoYmFsYW5jZXNbYWNjb3VudF0sIGFtb3VudCk7CiAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIGFtb3VudCk7CiAgfQogIGZ1bmN0aW9uIGRlc3Ryb3koYWRkcmVzcyBhY2NvdW50LCB1aW50IGFtb3VudCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gbWludGVyKSByZXZlcnQoKTsKICAgIGlmIChiYWxhbmNlc1thY2NvdW50XSA8IGFtb3VudCkgcmV2ZXJ0KCk7CiAgICBiYWxhbmNlc1thY2NvdW50XSA9IHNhZmVTdWIoYmFsYW5jZXNbYWNjb3VudF0sIGFtb3VudCk7CiAgICB0b3RhbFN1cHBseSA9IHNhZmVTdWIodG90YWxTdXBwbHksIGFtb3VudCk7CiAgfQp9Cgpjb250cmFjdCBBY2NvdW50TGV2ZWxzIHsKICAvL2dpdmVuIGEgdXNlciwgcmV0dXJucyBhbiBhY2NvdW50IGxldmVsCiAgLy8wID0gcmVndWxhciB1c2VyIChwYXlzIHRha2UgZmVlIGFuZCBtYWtlIGZlZSkKICAvLzEgPSBtYXJrZXQgbWFrZXIgc2lsdmVyIChwYXlzIHRha2UgZmVlLCBubyBtYWtlIGZlZSwgZ2V0cyByZWJhdGUpCiAgLy8yID0gbWFya2V0IG1ha2VyIGdvbGQgKHBheXMgdGFrZSBmZWUsIG5vIG1ha2UgZmVlLCBnZXRzIGVudGlyZSBjb3VudGVycGFydHkncyB0YWtlIGZlZSBhcyByZWJhdGUpCiAgZnVuY3Rpb24gYWNjb3VudExldmVsKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KTsKfQoKY29udHJhY3QgQWNjb3VudExldmVsc1Rlc3QgaXMgQWNjb3VudExldmVscyB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYWNjb3VudExldmVsczsKCiAgZnVuY3Rpb24gc2V0QWNjb3VudExldmVsKGFkZHJlc3MgdXNlciwgdWludCBsZXZlbCkgewogICAgYWNjb3VudExldmVsc1t1c2VyXSA9IGxldmVsOwogIH0KCiAgZnVuY3Rpb24gYWNjb3VudExldmVsKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICByZXR1cm4gYWNjb3VudExldmVsc1t1c2VyXTsKICB9Cn0KCmNvbnRyYWN0IFJZWEVYIGlzIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsgLy90aGUgYWRtaW4gYWRkcmVzcwogIGFkZHJlc3MgcHVibGljIGZlZUFjY291bnQ7IC8vdGhlIGFjY291bnQgdGhhdCB3aWxsIHJlY2VpdmUgZmVlcwogIGFkZHJlc3MgcHVibGljIGFjY291bnRMZXZlbHNBZGRyOyAvL3RoZSBhZGRyZXNzIG9mIHRoZSBBY2NvdW50TGV2ZWxzIGNvbnRyYWN0CiAgdWludCBwdWJsaWMgZmVlTWFrZTsgLy9wZXJjZW50YWdlIHRpbWVzICgxIGV0aGVyKQogIHVpbnQgcHVibGljIGZlZVRha2U7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICB1aW50IHB1YmxpYyBmZWVSZWJhdGU7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyB0b2tlbnM7IC8vbWFwcGluZyBvZiB0b2tlbiBhZGRyZXNzZXMgdG8gbWFwcGluZyBvZiBhY2NvdW50IGJhbGFuY2VzICh0b2tlbj0wIG1lYW5zIEV0aGVyKQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYnl0ZXMzMiA9PiBib29sKSkgcHVibGljIG9yZGVyczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gYm9vbGVhbnMgKHRydWUgPSBzdWJtaXR0ZWQgYnkgdXNlciwgZXF1aXZhbGVudCB0byBvZmZjaGFpbiBzaWduYXR1cmUpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChieXRlczMyID0+IHVpbnQpKSBwdWJsaWMgb3JkZXJGaWxsczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gdWludHMgKGFtb3VudCBvZiBvcmRlciB0aGF0IGhhcyBiZWVuIGZpbGxlZCkKCiAgZXZlbnQgT3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyKTsKICBldmVudCBDYW5jZWwoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcyk7CiAgZXZlbnQgVHJhZGUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIGFkZHJlc3MgZ2V0LCBhZGRyZXNzIGdpdmUpOwogIGV2ZW50IERlcG9zaXQoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50LCB1aW50IGJhbGFuY2UpOwoKICBmdW5jdGlvbiBSWVhFWChhZGRyZXNzIGFkbWluXywgYWRkcmVzcyBmZWVBY2NvdW50XywgYWRkcmVzcyBhY2NvdW50TGV2ZWxzQWRkcl8sIHVpbnQgZmVlTWFrZV8sIHVpbnQgZmVlVGFrZV8sIHVpbnQgZmVlUmViYXRlXykgewogICAgYWRtaW4gPSBhZG1pbl87CiAgICBmZWVBY2NvdW50ID0gZmVlQWNjb3VudF87CiAgICBhY2NvdW50TGV2ZWxzQWRkciA9IGFjY291bnRMZXZlbHNBZGRyXzsKICAgIGZlZU1ha2UgPSBmZWVNYWtlXzsKICAgIGZlZVRha2UgPSBmZWVUYWtlXzsKICAgIGZlZVJlYmF0ZSA9IGZlZVJlYmF0ZV87CiAgfQoKICBmdW5jdGlvbigpIHsKICAgIHJldmVydCgpOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlQWRtaW4oYWRkcmVzcyBhZG1pbl8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSByZXZlcnQoKTsKICAgIGFkbWluID0gYWRtaW5fOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlQWNjb3VudExldmVsc0FkZHIoYWRkcmVzcyBhY2NvdW50TGV2ZWxzQWRkcl8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSByZXZlcnQoKTsKICAgIGFjY291bnRMZXZlbHNBZGRyID0gYWNjb3VudExldmVsc0FkZHJfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlQWNjb3VudChhZGRyZXNzIGZlZUFjY291bnRfKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgcmV2ZXJ0KCk7CiAgICBmZWVBY2NvdW50ID0gZmVlQWNjb3VudF87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VGZWVNYWtlKHVpbnQgZmVlTWFrZV8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSByZXZlcnQoKTsKICAgIGZlZU1ha2UgPSBmZWVNYWtlXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUZlZVRha2UodWludCBmZWVUYWtlXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHJldmVydCgpOwogICAgZmVlVGFrZSA9IGZlZVRha2VfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlUmViYXRlKHVpbnQgZmVlUmViYXRlXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHJldmVydCgpOwogICAgZmVlUmViYXRlID0gZmVlUmViYXRlXzsKICB9CgogIGZ1bmN0aW9uIGRlcG9zaXQoKSBwYXlhYmxlIHsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBtc2cudmFsdWUpOwogICAgRGVwb3NpdCgwLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgewogICAgaWYgKHRva2Vuc1swXVttc2cuc2VuZGVyXSA8IGFtb3VudCkgcmV2ZXJ0KCk7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIGlmICghbXNnLnNlbmRlci5jYWxsLnZhbHVlKGFtb3VudCkoKSkgcmV2ZXJ0KCk7CiAgICBXaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIC8vcmVtZW1iZXIgdG8gY2FsbCBUb2tlbihhZGRyZXNzKS5hcHByb3ZlKHRoaXMsIGFtb3VudCkgb3IgdGhpcyBjb250cmFjdCB3aWxsIG5vdCBiZSBhYmxlIHRvIGRvIHRoZSB0cmFuc2ZlciBvbiB5b3VyIGJlaGFsZi4KICAgIGlmICh0b2tlbj09MCkgcmV2ZXJ0KCk7CiAgICBpZiAoIVRva2VuKHRva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgYW1vdW50KSkgcmV2ZXJ0KCk7CiAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgRGVwb3NpdCh0b2tlbiwgbXNnLnNlbmRlciwgYW1vdW50LCB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIGlmICh0b2tlbj09MCkgcmV2ZXJ0KCk7CiAgICBpZiAodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA8IGFtb3VudCkgcmV2ZXJ0KCk7CiAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgaWYgKCFUb2tlbih0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgcmV2ZXJ0KCk7CiAgICBXaXRoZHJhdyh0b2tlbiwgbXNnLnNlbmRlciwgYW1vdW50LCB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b2tlbnNbdG9rZW5dW3VzZXJdOwogIH0KCiAgZnVuY3Rpb24gb3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgb3JkZXJzW21zZy5zZW5kZXJdW2hhc2hdID0gdHJ1ZTsKICAgIE9yZGVyKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gdHJhZGUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgdWludCBhbW91bnQpIHsKICAgIC8vYW1vdW50IGlzIGluIGFtb3VudEdldCB0ZXJtcwogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgaWYgKCEoCiAgICAgIChvcmRlcnNbdXNlcl1baGFzaF0gfHwgZWNyZWNvdmVyKHNoYTMoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgaGFzaCksdixyLHMpID09IHVzZXIpICYmCiAgICAgIGJsb2NrLm51bWJlciA8PSBleHBpcmVzICYmCiAgICAgIHNhZmVBZGQob3JkZXJGaWxsc1t1c2VyXVtoYXNoXSwgYW1vdW50KSA8PSBhbW91bnRHZXQKICAgICkpIHJldmVydCgpOwogICAgdHJhZGVCYWxhbmNlcyh0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIHVzZXIsIGFtb3VudCk7CiAgICBvcmRlckZpbGxzW3VzZXJdW2hhc2hdID0gc2FmZUFkZChvcmRlckZpbGxzW3VzZXJdW2hhc2hdLCBhbW91bnQpOwogICAgVHJhZGUodG9rZW5HZXQsIGFtb3VudCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlICogYW1vdW50IC8gYW1vdW50R2V0LCB1c2VyLCBtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHRyYWRlQmFsYW5jZXMoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQpIHByaXZhdGUgewogICAgdWludCBmZWVNYWtlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVNYWtlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgZmVlVGFrZVhmZXIgPSBzYWZlTXVsKGFtb3VudCwgZmVlVGFrZSkgLyAoMSBldGhlcik7CiAgICB1aW50IGZlZVJlYmF0ZVhmZXIgPSAwOwogICAgaWYgKGFjY291bnRMZXZlbHNBZGRyICE9IDB4MCkgewogICAgICB1aW50IGFjY291bnRMZXZlbCA9IEFjY291bnRMZXZlbHMoYWNjb3VudExldmVsc0FkZHIpLmFjY291bnRMZXZlbCh1c2VyKTsKICAgICAgaWYgKGFjY291bnRMZXZlbD09MSkgZmVlUmViYXRlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVSZWJhdGUpIC8gKDEgZXRoZXIpOwogICAgICBpZiAoYWNjb3VudExldmVsPT0yKSBmZWVSZWJhdGVYZmVyID0gZmVlVGFrZVhmZXI7CiAgICB9CiAgICB0b2tlbnNbdG9rZW5HZXRdW21zZy5zZW5kZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5HZXRdW21zZy5zZW5kZXJdLCBzYWZlQWRkKGFtb3VudCwgZmVlVGFrZVhmZXIpKTsKICAgIHRva2Vuc1t0b2tlbkdldF1bdXNlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbkdldF1bdXNlcl0sIHNhZmVTdWIoc2FmZUFkZChhbW91bnQsIGZlZVJlYmF0ZVhmZXIpLCBmZWVNYWtlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2V0XVtmZWVBY2NvdW50XSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuR2V0XVtmZWVBY2NvdW50XSwgc2FmZVN1YihzYWZlQWRkKGZlZU1ha2VYZmVyLCBmZWVUYWtlWGZlciksIGZlZVJlYmF0ZVhmZXIpKTsKICAgIHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5HaXZlXVt1c2VyXSwgc2FmZU11bChhbW91bnRHaXZlLCBhbW91bnQpIC8gYW1vdW50R2V0KTsKICAgIHRva2Vuc1t0b2tlbkdpdmVdW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5HaXZlXVttc2cuc2VuZGVyXSwgc2FmZU11bChhbW91bnRHaXZlLCBhbW91bnQpIC8gYW1vdW50R2V0KTsKICB9CgogIGZ1bmN0aW9uIHRlc3RUcmFkZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50IGFtb3VudCwgYWRkcmVzcyBzZW5kZXIpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgaWYgKCEoCiAgICAgIHRva2Vuc1t0b2tlbkdldF1bc2VuZGVyXSA+PSBhbW91bnQgJiYKICAgICAgYXZhaWxhYmxlVm9sdW1lKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIHVzZXIsIHYsIHIsIHMpID49IGFtb3VudAogICAgKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhdmFpbGFibGVWb2x1bWUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoISgKICAgICAgKG9yZGVyc1t1c2VyXVtoYXNoXSB8fCBlY3JlY292ZXIoc2hhMygiXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxuMzIiLCBoYXNoKSx2LHIscykgPT0gdXNlcikgJiYKICAgICAgYmxvY2subnVtYmVyIDw9IGV4cGlyZXMKICAgICkpIHJldHVybiAwOwogICAgdWludCBhdmFpbGFibGUxID0gc2FmZVN1YihhbW91bnRHZXQsIG9yZGVyRmlsbHNbdXNlcl1baGFzaF0pOwogICAgdWludCBhdmFpbGFibGUyID0gc2FmZU11bCh0b2tlbnNbdG9rZW5HaXZlXVt1c2VyXSwgYW1vdW50R2V0KSAvIGFtb3VudEdpdmU7CiAgICBpZiAoYXZhaWxhYmxlMTxhdmFpbGFibGUyKSByZXR1cm4gYXZhaWxhYmxlMTsKICAgIHJldHVybiBhdmFpbGFibGUyOwogIH0KCiAgZnVuY3Rpb24gYW1vdW50RmlsbGVkKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgcmV0dXJuIG9yZGVyRmlsbHNbdXNlcl1baGFzaF07CiAgfQoKICBmdW5jdGlvbiBjYW5jZWxPcmRlcihhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgaWYgKCEob3JkZXJzW21zZy5zZW5kZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSBtc2cuc2VuZGVyKSkgcmV2ZXJ0KCk7CiAgICBvcmRlckZpbGxzW21zZy5zZW5kZXJdW2hhc2hdID0gYW1vdW50R2V0OwogICAgQ2FuY2VsKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIG1zZy5zZW5kZXIsIHYsIHIsIHMpOwogIH0KfQ=='.
	

]
