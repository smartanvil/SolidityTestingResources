Class {
	#name : #SRT19397c7fde68a3b33503d491cac89011a5d9a61f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT19397c7fde68a3b33503d491cac89011a5d9a61f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpICBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKY29udHJhY3QgdG9rZW5SZWNpcGllbnQgewogICAgZXZlbnQgcmVjZWl2ZWRFdGhlcihhZGRyZXNzIHNlbmRlciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgcmVjZWl2ZWRUb2tlbnMoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsKCiAgICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgewogICAgICAgIFRva2VuIHQgPSBUb2tlbihfdG9rZW4pOwogICAgICAgIHJlcXVpcmUodC50cmFuc2ZlckZyb20oX2Zyb20sIHRoaXMsIF92YWx1ZSkpOwogICAgICAgIHJlY2VpdmVkVG9rZW5zKF9mcm9tLCBfdmFsdWUsIF90b2tlbiwgX2V4dHJhRGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSAgcHVibGljIHsKICAgICAgICByZWNlaXZlZEV0aGVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7CiAgICB9Cn0KCmludGVyZmFjZSBUb2tlbiB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKY29udHJhY3QgQ29uZ3Jlc3MgaXMgb3duZWQsIHRva2VuUmVjaXBpZW50IHsKICAgIC8vIENvbnRyYWN0IFZhcmlhYmxlcyBhbmQgZXZlbnRzCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtUXVvcnVtOwogICAgdWludCBwdWJsaWMgZGViYXRpbmdQZXJpb2RJbk1pbnV0ZXM7CiAgICBpbnQgcHVibGljIG1ham9yaXR5TWFyZ2luOwogICAgUHJvcG9zYWxbXSBwdWJsaWMgcHJvcG9zYWxzOwogICAgdWludCBwdWJsaWMgbnVtUHJvcG9zYWxzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbWVtYmVySWQ7CiAgICBNZW1iZXJbXSBwdWJsaWMgbWVtYmVyczsKCiAgICBldmVudCBQcm9wb3NhbEFkZGVkKHVpbnQgcHJvcG9zYWxJRCwgYWRkcmVzcyByZWNpcGllbnQsIHVpbnQgYW1vdW50LCBzdHJpbmcgZGVzY3JpcHRpb24pOwogICAgZXZlbnQgVm90ZWQodWludCBwcm9wb3NhbElELCBib29sIHBvc2l0aW9uLCBhZGRyZXNzIHZvdGVyLCBzdHJpbmcganVzdGlmaWNhdGlvbik7CiAgICBldmVudCBQcm9wb3NhbFRhbGxpZWQodWludCBwcm9wb3NhbElELCBpbnQgcmVzdWx0LCB1aW50IHF1b3J1bSwgYm9vbCBhY3RpdmUpOwogICAgZXZlbnQgTWVtYmVyc2hpcENoYW5nZWQoYWRkcmVzcyBtZW1iZXIsIGJvb2wgaXNNZW1iZXIpOwogICAgZXZlbnQgQ2hhbmdlT2ZSdWxlcyh1aW50IG5ld01pbmltdW1RdW9ydW0sIHVpbnQgbmV3RGViYXRpbmdQZXJpb2RJbk1pbnV0ZXMsIGludCBuZXdNYWpvcml0eU1hcmdpbik7CgogICAgc3RydWN0IFByb3Bvc2FsIHsKICAgICAgICBhZGRyZXNzIHJlY2lwaWVudDsKICAgICAgICB1aW50IGFtb3VudDsKICAgICAgICBzdHJpbmcgZGVzY3JpcHRpb247CiAgICAgICAgdWludCB2b3RpbmdEZWFkbGluZTsKICAgICAgICBib29sIGV4ZWN1dGVkOwogICAgICAgIGJvb2wgcHJvcG9zYWxQYXNzZWQ7CiAgICAgICAgdWludCBudW1iZXJPZlZvdGVzOwogICAgICAgIGludCBjdXJyZW50UmVzdWx0OwogICAgICAgIGJ5dGVzMzIgcHJvcG9zYWxIYXNoOwogICAgICAgIFZvdGVbXSB2b3RlczsKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHZvdGVkOwogICAgfQoKICAgIHN0cnVjdCBNZW1iZXIgewogICAgICAgIGFkZHJlc3MgbWVtYmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQgbWVtYmVyU2luY2U7CiAgICB9CgogICAgc3RydWN0IFZvdGUgewogICAgICAgIGJvb2wgaW5TdXBwb3J0OwogICAgICAgIGFkZHJlc3Mgdm90ZXI7CiAgICAgICAgc3RyaW5nIGp1c3RpZmljYXRpb247CiAgICB9CgogICAgLy8gTW9kaWZpZXIgdGhhdCBhbGxvd3Mgb25seSBzaGFyZWhvbGRlcnMgdG8gdm90ZSBhbmQgY3JlYXRlIG5ldyBwcm9wb3NhbHMKICAgIG1vZGlmaWVyIG9ubHlNZW1iZXJzIHsKICAgICAgICByZXF1aXJlKG1lbWJlcklkW21zZy5zZW5kZXJdICE9IDApOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvciBmdW5jdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBDb25ncmVzcyAoCiAgICAgICAgdWludCBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzLAogICAgICAgIHVpbnQgbWludXRlc0ZvckRlYmF0ZSwKICAgICAgICBpbnQgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5CiAgICApICBwYXlhYmxlIHB1YmxpYyB7CiAgICAgICAgY2hhbmdlVm90aW5nUnVsZXMobWluaW11bVF1b3J1bUZvclByb3Bvc2FscywgbWludXRlc0ZvckRlYmF0ZSwgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5KTsKICAgICAgICAvLyBJdOKAmXMgbmVjZXNzYXJ5IHRvIGFkZCBhbiBlbXB0eSBmaXJzdCBtZW1iZXIKICAgICAgICBhZGRNZW1iZXIoMCwgIiIpOwogICAgICAgIC8vIGFuZCBsZXQncyBhZGQgdGhlIGZvdW5kZXIsIHRvIHNhdmUgYSBzdGVwIGxhdGVyCiAgICAgICAgYWRkTWVtYmVyKG93bmVyLCAnZm91bmRlcicpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIG1lbWJlcgogICAgICoKICAgICAqIE1ha2UgYHRhcmdldE1lbWJlcmAgYSBtZW1iZXIgbmFtZWQgYG1lbWJlck5hbWVgCiAgICAgKgogICAgICogQHBhcmFtIHRhcmdldE1lbWJlciBldGhlcmV1bSBhZGRyZXNzIHRvIGJlIGFkZGVkCiAgICAgKiBAcGFyYW0gbWVtYmVyTmFtZSBwdWJsaWMgbmFtZSBmb3IgdGhhdCBtZW1iZXIKICAgICAqLwogICAgZnVuY3Rpb24gYWRkTWVtYmVyKGFkZHJlc3MgdGFyZ2V0TWVtYmVyLCBzdHJpbmcgbWVtYmVyTmFtZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdWludCBpZCA9IG1lbWJlcklkW3RhcmdldE1lbWJlcl07CiAgICAgICAgaWYgKGlkID09IDApIHsKICAgICAgICAgICAgbWVtYmVySWRbdGFyZ2V0TWVtYmVyXSA9IG1lbWJlcnMubGVuZ3RoOwogICAgICAgICAgICBpZCA9IG1lbWJlcnMubGVuZ3RoKys7CiAgICAgICAgfQoKICAgICAgICBtZW1iZXJzW2lkXSA9IE1lbWJlcih7bWVtYmVyOiB0YXJnZXRNZW1iZXIsIG1lbWJlclNpbmNlOiBub3csIG5hbWU6IG1lbWJlck5hbWV9KTsKICAgICAgICBNZW1iZXJzaGlwQ2hhbmdlZCh0YXJnZXRNZW1iZXIsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIG1lbWJlcgogICAgICoKICAgICAqIEBub3RpY2UgUmVtb3ZlIG1lbWJlcnNoaXAgZnJvbSBgdGFyZ2V0TWVtYmVyYAogICAgICoKICAgICAqIEBwYXJhbSB0YXJnZXRNZW1iZXIgZXRoZXJldW0gYWRkcmVzcyB0byBiZSByZW1vdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcihhZGRyZXNzIHRhcmdldE1lbWJlcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtZW1iZXJJZFt0YXJnZXRNZW1iZXJdICE9IDApOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IG1lbWJlcklkW3RhcmdldE1lbWJlcl07IGk8bWVtYmVycy5sZW5ndGgtMTsgaSsrKXsKICAgICAgICAgICAgbWVtYmVyc1tpXSA9IG1lbWJlcnNbaSsxXTsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIG1lbWJlcnNbbWVtYmVycy5sZW5ndGgtMV07CiAgICAgICAgbWVtYmVycy5sZW5ndGgtLTsKICAgIH0KCiAgICAvKioKICAgICAqIENoYW5nZSB2b3RpbmcgcnVsZXMKICAgICAqCiAgICAgKiBNYWtlIHNvIHRoYXQgcHJvcG9zYWxzIG5lZWQgdG9iZSBkaXNjdXNzZWQgZm9yIGF0IGxlYXN0IGBtaW51dGVzRm9yRGViYXRlLzYwYCBob3VycywKICAgICAqIGhhdmUgYXQgbGVhc3QgYG1pbmltdW1RdW9ydW1Gb3JQcm9wb3NhbHNgIHZvdGVzLCBhbmQgaGF2ZSA1MCUgKyBgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5YCB2b3RlcyB0byBiZSBleGVjdXRlZAogICAgICoKICAgICAqIEBwYXJhbSBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzIGhvdyBtYW55IG1lbWJlcnMgbXVzdCB2b3RlIG9uIGEgcHJvcG9zYWwgZm9yIGl0IHRvIGJlIGV4ZWN1dGVkCiAgICAgKiBAcGFyYW0gbWludXRlc0ZvckRlYmF0ZSB0aGUgbWluaW11bSBhbW91bnQgb2YgZGVsYXkgYmV0d2VlbiB3aGVuIGEgcHJvcG9zYWwgaXMgbWFkZSBhbmQgd2hlbiBpdCBjYW4gYmUgZXhlY3V0ZWQKICAgICAqIEBwYXJhbSBtYXJnaW5PZlZvdGVzRm9yTWFqb3JpdHkgdGhlIHByb3Bvc2FsIG5lZWRzIHRvIGhhdmUgNTAlIHBsdXMgdGhpcyBudW1iZXIKICAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlVm90aW5nUnVsZXMoCiAgICAgICAgdWludCBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzLAogICAgICAgIHVpbnQgbWludXRlc0ZvckRlYmF0ZSwKICAgICAgICBpbnQgbWFyZ2luT2ZWb3Rlc0Zvck1ham9yaXR5CiAgICApIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG1pbmltdW1RdW9ydW0gPSBtaW5pbXVtUXVvcnVtRm9yUHJvcG9zYWxzOwogICAgICAgIGRlYmF0aW5nUGVyaW9kSW5NaW51dGVzID0gbWludXRlc0ZvckRlYmF0ZTsKICAgICAgICBtYWpvcml0eU1hcmdpbiA9IG1hcmdpbk9mVm90ZXNGb3JNYWpvcml0eTsKCiAgICAgICAgQ2hhbmdlT2ZSdWxlcyhtaW5pbXVtUXVvcnVtLCBkZWJhdGluZ1BlcmlvZEluTWludXRlcywgbWFqb3JpdHlNYXJnaW4pOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIFByb3Bvc2FsCiAgICAgKgogICAgICogUHJvcG9zZSB0byBzZW5kIGB3ZWlBbW91bnQgLyAxZTE4YCBldGhlciB0byBgYmVuZWZpY2lhcnlgIGZvciBgam9iRGVzY3JpcHRpb25gLiBgdHJhbnNhY3Rpb25CeXRlY29kZSA/IENvbnRhaW5zIDogRG9lcyBub3QgY29udGFpbmAgY29kZS4KICAgICAqCiAgICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIHRvIHNlbmQgdGhlIGV0aGVyIHRvCiAgICAgKiBAcGFyYW0gd2VpQW1vdW50IGFtb3VudCBvZiBldGhlciB0byBzZW5kLCBpbiB3ZWkKICAgICAqIEBwYXJhbSBqb2JEZXNjcmlwdGlvbiBEZXNjcmlwdGlvbiBvZiBqb2IKICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIGJ5dGVjb2RlIG9mIHRyYW5zYWN0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5ld1Byb3Bvc2FsKAogICAgICAgIGFkZHJlc3MgYmVuZWZpY2lhcnksCiAgICAgICAgdWludCB3ZWlBbW91bnQsCiAgICAgICAgc3RyaW5nIGpvYkRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzIHRyYW5zYWN0aW9uQnl0ZWNvZGUKICAgICkKICAgICAgICBvbmx5TWVtYmVycyBwdWJsaWMKICAgICAgICByZXR1cm5zICh1aW50IHByb3Bvc2FsSUQpCiAgICB7CiAgICAgICAgcHJvcG9zYWxJRCA9IHByb3Bvc2Fscy5sZW5ndGgrKzsKICAgICAgICBQcm9wb3NhbCBzdG9yYWdlIHAgPSBwcm9wb3NhbHNbcHJvcG9zYWxJRF07CiAgICAgICAgcC5yZWNpcGllbnQgPSBiZW5lZmljaWFyeTsKICAgICAgICBwLmFtb3VudCA9IHdlaUFtb3VudDsKICAgICAgICBwLmRlc2NyaXB0aW9uID0gam9iRGVzY3JpcHRpb247CiAgICAgICAgcC5wcm9wb3NhbEhhc2ggPSBrZWNjYWsyNTYoYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdHJhbnNhY3Rpb25CeXRlY29kZSk7CiAgICAgICAgcC52b3RpbmdEZWFkbGluZSA9IG5vdyArIGRlYmF0aW5nUGVyaW9kSW5NaW51dGVzICogMSBtaW51dGVzOwogICAgICAgIHAuZXhlY3V0ZWQgPSBmYWxzZTsKICAgICAgICBwLnByb3Bvc2FsUGFzc2VkID0gZmFsc2U7CiAgICAgICAgcC5udW1iZXJPZlZvdGVzID0gMDsKICAgICAgICBQcm9wb3NhbEFkZGVkKHByb3Bvc2FsSUQsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIGpvYkRlc2NyaXB0aW9uKTsKICAgICAgICBudW1Qcm9wb3NhbHMgPSBwcm9wb3NhbElEKzE7CgogICAgICAgIHJldHVybiBwcm9wb3NhbElEOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHByb3Bvc2FsIGluIEV0aGVyCiAgICAgKgogICAgICogUHJvcG9zZSB0byBzZW5kIGBldGhlckFtb3VudGAgZXRoZXIgdG8gYGJlbmVmaWNpYXJ5YCBmb3IgYGpvYkRlc2NyaXB0aW9uYC4gYHRyYW5zYWN0aW9uQnl0ZWNvZGUgPyBDb250YWlucyA6IERvZXMgbm90IGNvbnRhaW5gIGNvZGUuCiAgICAgKiBUaGlzIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gdXNlIGlmIHRoZSBhbW91bnQgdG8gYmUgZ2l2ZW4gaXMgaW4gcm91bmQgbnVtYmVyIG9mIGV0aGVyIHVuaXRzLgogICAgICoKICAgICAqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gdG8gc2VuZCB0aGUgZXRoZXIgdG8KICAgICAqIEBwYXJhbSBldGhlckFtb3VudCBhbW91bnQgb2YgZXRoZXIgdG8gc2VuZAogICAgICogQHBhcmFtIGpvYkRlc2NyaXB0aW9uIERlc2NyaXB0aW9uIG9mIGpvYgogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uQnl0ZWNvZGUgYnl0ZWNvZGUgb2YgdHJhbnNhY3Rpb24KICAgICAqLwogICAgZnVuY3Rpb24gbmV3UHJvcG9zYWxJbkV0aGVyKAogICAgICAgIGFkZHJlc3MgYmVuZWZpY2lhcnksCiAgICAgICAgdWludCBldGhlckFtb3VudCwKICAgICAgICBzdHJpbmcgam9iRGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMgdHJhbnNhY3Rpb25CeXRlY29kZQogICAgKQogICAgICAgIG9ubHlNZW1iZXJzIHB1YmxpYwogICAgICAgIHJldHVybnMgKHVpbnQgcHJvcG9zYWxJRCkKICAgIHsKICAgICAgICByZXR1cm4gbmV3UHJvcG9zYWwoYmVuZWZpY2lhcnksIGV0aGVyQW1vdW50ICogMSBldGhlciwgam9iRGVzY3JpcHRpb24sIHRyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBwcm9wb3NhbCBjb2RlIG1hdGNoZXMKICAgICAqCiAgICAgKiBAcGFyYW0gcHJvcG9zYWxOdW1iZXIgSUQgbnVtYmVyIG9mIHRoZSBwcm9wb3NhbCB0byBxdWVyeQogICAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyB0byBzZW5kIHRoZSBldGhlciB0bwogICAgICogQHBhcmFtIHdlaUFtb3VudCBhbW91bnQgb2YgZXRoZXIgdG8gc2VuZAogICAgICogQHBhcmFtIHRyYW5zYWN0aW9uQnl0ZWNvZGUgYnl0ZWNvZGUgb2YgdHJhbnNhY3Rpb24KICAgICAqLwogICAgZnVuY3Rpb24gY2hlY2tQcm9wb3NhbENvZGUoCiAgICAgICAgdWludCBwcm9wb3NhbE51bWJlciwKICAgICAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQgd2VpQW1vdW50LAogICAgICAgIGJ5dGVzIHRyYW5zYWN0aW9uQnl0ZWNvZGUKICAgICkKICAgICAgICBjb25zdGFudCBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIGNvZGVDaGVja3NPdXQpCiAgICB7CiAgICAgICAgUHJvcG9zYWwgc3RvcmFnZSBwID0gcHJvcG9zYWxzW3Byb3Bvc2FsTnVtYmVyXTsKICAgICAgICByZXR1cm4gcC5wcm9wb3NhbEhhc2ggPT0ga2VjY2FrMjU2KGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgfQoKICAgIC8qKgogICAgICogTG9nIGEgdm90ZSBmb3IgYSBwcm9wb3NhbAogICAgICoKICAgICAqIFZvdGUgYHN1cHBvcnRzUHJvcG9zYWw/IGluIHN1cHBvcnQgb2YgOiBhZ2FpbnN0YCBwcm9wb3NhbCAjYHByb3Bvc2FsTnVtYmVyYAogICAgICoKICAgICAqIEBwYXJhbSBwcm9wb3NhbE51bWJlciBudW1iZXIgb2YgcHJvcG9zYWwKICAgICAqIEBwYXJhbSBzdXBwb3J0c1Byb3Bvc2FsIGVpdGhlciBpbiBmYXZvciBvciBhZ2FpbnN0IGl0CiAgICAgKiBAcGFyYW0ganVzdGlmaWNhdGlvblRleHQgb3B0aW9uYWwganVzdGlmaWNhdGlvbiB0ZXh0CiAgICAgKi8KICAgIGZ1bmN0aW9uIHZvdGUoCiAgICAgICAgdWludCBwcm9wb3NhbE51bWJlciwKICAgICAgICBib29sIHN1cHBvcnRzUHJvcG9zYWwsCiAgICAgICAgc3RyaW5nIGp1c3RpZmljYXRpb25UZXh0CiAgICApCiAgICAgICAgb25seU1lbWJlcnMgcHVibGljCiAgICAgICAgcmV0dXJucyAodWludCB2b3RlSUQpCiAgICB7CiAgICAgICAgUHJvcG9zYWwgc3RvcmFnZSBwID0gcHJvcG9zYWxzW3Byb3Bvc2FsTnVtYmVyXTsgICAgICAgICAvLyBHZXQgdGhlIHByb3Bvc2FsCiAgICAgICAgcmVxdWlyZSghcC52b3RlZFttc2cuc2VuZGVyXSk7ICAgICAgICAgLy8gSWYgaGFzIGFscmVhZHkgdm90ZWQsIGNhbmNlbAogICAgICAgIHAudm90ZWRbbXNnLnNlbmRlcl0gPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGlzIHZvdGVyIGFzIGhhdmluZyB2b3RlZAogICAgICAgIHAubnVtYmVyT2ZWb3RlcysrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluY3JlYXNlIHRoZSBudW1iZXIgb2Ygdm90ZXMKICAgICAgICBpZiAoc3VwcG9ydHNQcm9wb3NhbCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGV5IHN1cHBvcnQgdGhlIHByb3Bvc2FsCiAgICAgICAgICAgIHAuY3VycmVudFJlc3VsdCsrOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5jcmVhc2Ugc2NvcmUKICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGV5IGRvbid0CiAgICAgICAgICAgIHAuY3VycmVudFJlc3VsdC0tOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjcmVhc2UgdGhlIHNjb3JlCiAgICAgICAgfQoKICAgICAgICAvLyBDcmVhdGUgYSBsb2cgb2YgdGhpcyBldmVudAogICAgICAgIFZvdGVkKHByb3Bvc2FsTnVtYmVyLCAgc3VwcG9ydHNQcm9wb3NhbCwgbXNnLnNlbmRlciwganVzdGlmaWNhdGlvblRleHQpOwogICAgICAgIHJldHVybiBwLm51bWJlck9mVm90ZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5pc2ggdm90ZQogICAgICoKICAgICAqIENvdW50IHRoZSB2b3RlcyBwcm9wb3NhbCAjYHByb3Bvc2FsTnVtYmVyYCBhbmQgZXhlY3V0ZSBpdCBpZiBhcHByb3ZlZAogICAgICoKICAgICAqIEBwYXJhbSBwcm9wb3NhbE51bWJlciBwcm9wb3NhbCBudW1iZXIKICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbkJ5dGVjb2RlIG9wdGlvbmFsOiBpZiB0aGUgdHJhbnNhY3Rpb24gY29udGFpbmVkIGEgYnl0ZWNvZGUsIHlvdSBuZWVkIHRvIHNlbmQgaXQKICAgICAqLwogICAgZnVuY3Rpb24gZXhlY3V0ZVByb3Bvc2FsKHVpbnQgcHJvcG9zYWxOdW1iZXIsIGJ5dGVzIHRyYW5zYWN0aW9uQnl0ZWNvZGUpIHB1YmxpYyB7CiAgICAgICAgUHJvcG9zYWwgc3RvcmFnZSBwID0gcHJvcG9zYWxzW3Byb3Bvc2FsTnVtYmVyXTsKCiAgICAgICAgcmVxdWlyZShub3cgPiBwLnZvdGluZ0RlYWRsaW5lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBpcyBwYXN0IHRoZSB2b3RpbmcgZGVhZGxpbmUKICAgICAgICAgICAgJiYgIXAuZXhlY3V0ZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgaGFzIG5vdCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQKICAgICAgICAgICAgJiYgcC5wcm9wb3NhbEhhc2ggPT0ga2VjY2FrMjU2KHAucmVjaXBpZW50LCBwLmFtb3VudCwgdHJhbnNhY3Rpb25CeXRlY29kZSkgIC8vIGFuZCB0aGUgc3VwcGxpZWQgY29kZSBtYXRjaGVzIHRoZSBwcm9wb3NhbAogICAgICAgICAgICAmJiBwLm51bWJlck9mVm90ZXMgPj0gbWluaW11bVF1b3J1bSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBhIG1pbmltdW0gcXVvcnVtIGhhcyBiZWVuIHJlYWNoZWQuLi4KCiAgICAgICAgLy8gLi4udGhlbiBleGVjdXRlIHJlc3VsdAoKICAgICAgICBpZiAocC5jdXJyZW50UmVzdWx0ID4gbWFqb3JpdHlNYXJnaW4pIHsKICAgICAgICAgICAgLy8gUHJvcG9zYWwgcGFzc2VkOyBleGVjdXRlIHRoZSB0cmFuc2FjdGlvbgoKICAgICAgICAgICAgcC5leGVjdXRlZCA9IHRydWU7IC8vIEF2b2lkIHJlY3Vyc2l2ZSBjYWxsaW5nCiAgICAgICAgICAgIHJlcXVpcmUocC5yZWNpcGllbnQuY2FsbC52YWx1ZShwLmFtb3VudCkodHJhbnNhY3Rpb25CeXRlY29kZSkpOwoKICAgICAgICAgICAgcC5wcm9wb3NhbFBhc3NlZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gUHJvcG9zYWwgZmFpbGVkCiAgICAgICAgICAgIHAucHJvcG9zYWxQYXNzZWQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIEZpcmUgRXZlbnRzCiAgICAgICAgUHJvcG9zYWxUYWxsaWVkKHByb3Bvc2FsTnVtYmVyLCBwLmN1cnJlbnRSZXN1bHQsIHAubnVtYmVyT2ZWb3RlcywgcC5wcm9wb3NhbFBhc3NlZCk7CiAgICB9Cn0='.
	

]
