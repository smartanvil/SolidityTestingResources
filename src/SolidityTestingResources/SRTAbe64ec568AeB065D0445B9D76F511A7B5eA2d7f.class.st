Class {
	#name : #SRTAbe64ec568AeB065D0445B9D76F511A7B5eA2d7f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTAbe64ec568AeB065D0445B9D76F511A7B5eA2d7f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CmNvbnRyYWN0IEFjY2Vzc0NvbnRyb2wgewogICAgYWRkcmVzcyBwdWJsaWMgY3JlYXRvckFkZHJlc3M7CiAgICB1aW50MTYgcHVibGljIHRvdGFsU2VyYXBoaW1zID0gMDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHNlcmFwaGltczsKCiAgICBib29sIHB1YmxpYyBpc01haW50ZW5hbmNlTW9kZSA9IHRydWU7CiAKICAgIG1vZGlmaWVyIG9ubHlDUkVBVE9SKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcmVhdG9yQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5U0VSQVBISU0oKSB7CiAgICAgICAgcmVxdWlyZShzZXJhcGhpbXNbbXNnLnNlbmRlcl0gPT0gdHJ1ZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNDb250cmFjdEFjdGl2ZSB7CiAgICAgICAgcmVxdWlyZSghaXNNYWludGVuYW5jZU1vZGUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIENvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBBY2Nlc3NDb250cm9sKCkgcHVibGljIHsKICAgICAgICBjcmVhdG9yQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhZGRTRVJBUEhJTShhZGRyZXNzIF9uZXdTZXJhcGhpbSkgb25seUNSRUFUT1IgcHVibGljIHsKICAgICAgICBpZiAoc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPT0gZmFsc2UpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19uZXdTZXJhcGhpbV0gPSB0cnVlOwogICAgICAgICAgICB0b3RhbFNlcmFwaGltcyArPSAxOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVtb3ZlU0VSQVBISU0oYWRkcmVzcyBfb2xkU2VyYXBoaW0pIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaWYgKHNlcmFwaGltc1tfb2xkU2VyYXBoaW1dID09IHRydWUpIHsKICAgICAgICAgICAgc2VyYXBoaW1zW19vbGRTZXJhcGhpbV0gPSBmYWxzZTsKICAgICAgICAgICAgdG90YWxTZXJhcGhpbXMgLT0gMTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTWFpbnRlbmFuY2VNb2RlKGJvb2wgX2lzTWFpbnRhaW5pbmcpIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaXNNYWludGVuYW5jZU1vZGUgPSBfaXNNYWludGFpbmluZzsKICAgIH0KCiAgCn0gCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKyB5OwogICAgICBhc3NlcnQoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3VidHJhY3QodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICB1aW50IHogPSB4IC0geTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bHQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKiB5OwogICAgICBhc3NlcnQoKHggPT0gMCl8fCh6L3ggPT0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KICAgIAogICAgIAoKICAgIGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcih1aW50MTYgbWF4UmFuZG9tLCB1aW50OCBtaW4sIGFkZHJlc3MgcHJpdmF0ZUFkZHJlc3MpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4KSB7CiAgICAgICAgdWludDI1NiBnZW5OdW0gPSB1aW50MjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXItMSkpICsgdWludDI1Nihwcml2YXRlQWRkcmVzcyk7CiAgICAgICAgcmV0dXJuIHVpbnQ4KGdlbk51bSAlIChtYXhSYW5kb20gLSBtaW4gKyAxKSttaW4pOwogICAgfQp9Cgpjb250cmFjdCBFbnVtcyB7CiAgICBlbnVtIFJlc3VsdENvZGUgewogICAgICAgIFNVQ0NFU1MsCiAgICAgICAgRVJST1JfQ0xBU1NfTk9UX0ZPVU5ELAogICAgICAgIEVSUk9SX0xPV19CQUxBTkNFLAogICAgICAgIEVSUk9SX1NFTkRfRkFJTCwKICAgICAgICBFUlJPUl9OT1RfT1dORVIsCiAgICAgICAgRVJST1JfTk9UX0VOT1VHSF9NT05FWSwKICAgICAgICBFUlJPUl9JTlZBTElEX0FNT1VOVAogICAgfQoKICAgIGVudW0gQW5nZWxBdXJhIHsgCiAgICAgICAgQmx1ZSwgCiAgICAgICAgWWVsbG93LCAKICAgICAgICBQdXJwbGUsIAogICAgICAgIE9yYW5nZSwgCiAgICAgICAgUmVkLCAKICAgICAgICBHcmVlbiAKICAgIH0KfQoKCmNvbnRyYWN0IElTcG9uc29yZWRMZWFkZXJib2FyZERhdGEgaXMgQWNjZXNzQ29udHJvbCB7CgogIAogICAgdWludDE2IHB1YmxpYyB0b3RhbExlYWRlcmJvYXJkczsKICAgIAogICAgLy9UaGUgcmVzZXJ2ZWQgYmFsYW5jZSBpcyB0aGUgdG90YWwgYmFsYW5jZSBvdXRzdGFuZGluZyBvbiBhbGwgb3BlbiBsZWFkZXJib2FyZHMuIAogICAgLy9XZSBrZWVwIHRyYWNrIG9mIHRoaXMgZmlndXJlIHRvIHByZXZlbnQgdGhlIGRldmVsb3BlcnMgZnJvbSBwdWxsaW5nIG91dCBtb25leSBjdXJyZW50bHkgcGxlZGdlZAogICAgdWludCBwdWJsaWMgY29udHJhY3RSZXNlcnZlZEJhbGFuY2U7CiAgICAKCiAgICBmdW5jdGlvbiBzZXRNaW5NYXhEYXlzKHVpbnQ4IF9taW5EYXlzLCB1aW50OCBfbWF4RGF5cykgZXh0ZXJuYWwgOwogICAgICAgIGZ1bmN0aW9uIG9wZW5MZWFkZXJib2FyZCh1aW50OCBudW1EYXlzLCBzdHJpbmcgbWVzc2FnZSkgZXh0ZXJuYWwgcGF5YWJsZSA7CiAgICAgICAgZnVuY3Rpb24gY2xvc2VMZWFkZXJib2FyZCh1aW50MTYgbGVhZGVyYm9hcmRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNldE1lZGFsc0NsYWltZWQodWludDE2IGxlYWRlcmJvYXJkSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCA7CiAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgb25seUNSRUFUT1IgZXh0ZXJuYWw7CiAgZnVuY3Rpb24gZ2V0VGVhbUZyb21MZWFkZXJib2FyZCh1aW50MTYgbGVhZGVyYm9hcmRJZCwgdWludDggcmFuaykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCBhbmdlbElkLCB1aW50NjQgcGV0SWQsIHVpbnQ2NCBhY2Nlc3NvcnlJZCkgOwogICAgCiAgICBmdW5jdGlvbiBnZXRMZWFkZXJib2FyZCh1aW50MTYgaWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHN0YXJ0VGltZSwgdWludCBlbmRUaW1lLCBib29sIGlzTGl2ZSwgYWRkcmVzcyBzcG9uc29yLCB1aW50IHByaXplLCB1aW50OCBudW1UZWFtcywgc3RyaW5nIG1lc3NhZ2UsIGJvb2wgbWVkYWxzQ2xhaW1lZCk7CiAgICAgIGZ1bmN0aW9uIG5ld1RlYW1PbkVuZCh1aW50MTYgbGVhZGVyYm9hcmRJZCwgdWludDY0IGFuZ2VsSWQsIHVpbnQ2NCBwZXRJZCwgdWludDY0IGFjY2Vzc29yeUlkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICAgICBmdW5jdGlvbiBzd2l0Y2hSYW5raW5ncyAodWludDE2IGxlYWRlcmJvYXJkSWQsIHVpbnQ4IHNwb3QsdWludDY0IGFuZ2VsMUlELCB1aW50NjQgcGV0MUlELCB1aW50NjQgYWNjZXNzb3J5MUlELHVpbnQ2NCBhbmdlbDJJRCx1aW50NjQgcGV0MklELHVpbnQ2NCBhY2Nlc3NvcnkySUQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgICAgIGZ1bmN0aW9uIHZlcmlmeVBvc2l0aW9uKHVpbnQxNiBsZWFkZXJib2FyZElkLCB1aW50OCBzcG90LCB1aW50NjQgYW5nZWxJRCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7IAogICAgICAgIGZ1bmN0aW9uIGFuZ2VsT25MZWFkZXJib2FyZHModWludDY0IGFuZ2VsSUQpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwogICAgICAgICBmdW5jdGlvbiBwZXRPbkxlYWRlcmJvYXJkcyh1aW50NjQgcGV0SUQpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwogICAgICAgICBmdW5jdGlvbiBhY2Nlc3NvcnlPbkxlYWRlcmJvYXJkcyh1aW50NjQgYWNjZXNzb3J5SUQpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIDsKICAgIGZ1bmN0aW9uIHNhZmVNdWx0KHVpbnQgeCwgdWludCB5KSBwdXJlIGludGVybmFsIHJldHVybnModWludCkgOwogICAgIGZ1bmN0aW9uIFNhZmVEaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgOwogICAgZnVuY3Rpb24gZ2V0VG90YWxMZWFkZXJib2FyZHMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDE2KTsKICAgICAgCiAgCiAgICAgICAgCiAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAKICAgICAgCiAgICAgICAgCiAgIAp9CmNvbnRyYWN0IElBbmdlbENhcmREYXRhIGlzIEFjY2Vzc0NvbnRyb2wsIEVudW1zIHsKICAgIHVpbnQ4IHB1YmxpYyB0b3RhbEFuZ2VsQ2FyZFNlcmllczsKICAgIHVpbnQ2NCBwdWJsaWMgdG90YWxBbmdlbHM7CgogICAgCiAgICAvLyB3cml0ZQogICAgLy8gYW5nZWxzCiAgICBmdW5jdGlvbiBjcmVhdGVBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkLCB1aW50IF9iYXNlUHJpY2UsICB1aW50NjQgX21heFRvdGFsLCB1aW50OCBfYmFzZUF1cmEsIHVpbnQxNiBfYmFzZUJhdHRsZVBvd2VyLCB1aW50NjQgX2xpdmVUaW1lKSBvbmx5Q1JFQVRPUiBleHRlcm5hbCByZXR1cm5zKHVpbnQ4KTsKICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZ2VsQ2FyZFNlcmllcyh1aW50OCBfYW5nZWxDYXJkU2VyaWVzSWQsIHVpbnQ2NCBfbmV3UHJpY2UsIHVpbnQ2NCBfbmV3TWF4VG90YWwpIG9ubHlDUkVBVE9SIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2V0QW5nZWwodWludDggX2FuZ2VsQ2FyZFNlcmllc0lkLCBhZGRyZXNzIF9vd25lciwgdWludCBfcHJpY2UsIHVpbnQxNiBfYmF0dGxlUG93ZXIpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCByZXR1cm5zKHVpbnQ2NCk7CiAgICBmdW5jdGlvbiBhZGRUb0FuZ2VsRXhwZXJpZW5jZUxldmVsKHVpbnQ2NCBfYW5nZWxJZCwgdWludCBfdmFsdWUpIG9ubHlTRVJBUEhJTSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHNldEFuZ2VsTGFzdEJhdHRsZVRpbWUodWludDY0IF9hbmdlbElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRBbmdlbExhc3RWc0JhdHRsZVRpbWUodWludDY0IF9hbmdlbElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBzZXRMYXN0QmF0dGxlUmVzdWx0KHVpbnQ2NCBfYW5nZWxJZCwgdWludDE2IF92YWx1ZSkgb25seVNFUkFQSElNIGV4dGVybmFsOwogICAgZnVuY3Rpb24gYWRkQW5nZWxJZE1hcHBpbmcoYWRkcmVzcyBfb3duZXIsIHVpbnQ2NCBfYW5nZWxJZCkgcHJpdmF0ZTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyQW5nZWwoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQ2NCBfYW5nZWxJZCkgb25seVNFUkFQSElNIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpOwogICAgZnVuY3Rpb24gb3duZXJBbmdlbFRyYW5zZmVyIChhZGRyZXNzIF90bywgdWludDY0IF9hbmdlbElkKSAgcHVibGljOwogICAgZnVuY3Rpb24gdXBkYXRlQW5nZWxMb2NrICh1aW50NjQgX2FuZ2VsSWQsIGJvb2wgbmV3VmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHJlbW92ZUNyZWF0b3IoKSBvbmx5Q1JFQVRPUiBleHRlcm5hbDsKCiAgICAvLyByZWFkCiAgICBmdW5jdGlvbiBnZXRBbmdlbENhcmRTZXJpZXModWludDggX2FuZ2VsQ2FyZFNlcmllc0lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCBhbmdlbENhcmRTZXJpZXNJZCwgdWludDY0IGN1cnJlbnRBbmdlbFRvdGFsLCB1aW50IGJhc2VQcmljZSwgdWludDY0IG1heEFuZ2VsVG90YWwsIHVpbnQ4IGJhc2VBdXJhLCB1aW50IGJhc2VCYXR0bGVQb3dlciwgdWludDY0IGxhc3RTZWxsVGltZSwgdWludDY0IGxpdmVUaW1lKTsKICAgIGZ1bmN0aW9uIGdldEFuZ2VsKHVpbnQ2NCBfYW5nZWxJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDY0IGFuZ2VsSWQsIHVpbnQ4IGFuZ2VsQ2FyZFNlcmllc0lkLCB1aW50MTYgYmF0dGxlUG93ZXIsIHVpbnQ4IGF1cmEsIHVpbnQxNiBleHBlcmllbmNlLCB1aW50IHByaWNlLCB1aW50NjQgY3JlYXRlZFRpbWUsIHVpbnQ2NCBsYXN0QmF0dGxlVGltZSwgdWludDY0IGxhc3RWc0JhdHRsZVRpbWUsIHVpbnQxNiBsYXN0QmF0dGxlUmVzdWx0LCBhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIGdldE93bmVyQW5nZWxDb3VudChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCk7CiAgICBmdW5jdGlvbiBnZXRBbmdlbEJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbENhcmRTZXJpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBbmdlbHMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDY0KTsKICAgIGZ1bmN0aW9uIGdldEFuZ2VsTG9ja1N0YXR1cyh1aW50NjQgX2FuZ2VsSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChib29sKTsKfQoKLy9Ob3RlIC0gZHVlIHRvIG5vdCB5ZXQgaW1wbGVtZW50ZWQgZmVhdHVyZXMgd2UgY291bGQgbm90IHN0b3JlIHRlYW1zIGluIGFuIGFycmF5LiAKCmNvbnRyYWN0IFNwb25zb3JlZExlYWRlcmJvYXJkRGF0YSBpcyBJU3BvbnNvcmVkTGVhZGVyYm9hcmREYXRhIHsKCiAgICAvKioqIERBVEEgVFlQRVMgKioqLwogICAgICAgIGFkZHJlc3MgcHVibGljIGFuZ2VsQ2FyZERhdGFDb250cmFjdCA9IDB4NkQyRTc2MjEzNjE1OTI1YzVmYzQzNjU2NUI1ZWU3ODhFZTBFODZEQzsKICAgIAogICAgICBzdHJ1Y3QgVGVhbSB7CiAgICAgICAgdWludDY0IGFuZ2VsSWQ7CiAgICAgICAgdWludDY0IHBldElkOwogICAgICAgIHVpbnQ2NCBhY2Nlc3NvcnlJZDsKICAgIH0KICAgIAogICAgICBzdHJ1Y3QgTGVhZGVyYm9hcmQgewogICAgICAgIHVpbnQgc3RhcnRUaW1lOwogICAgICAgIHVpbnQgZW5kVGltZTsKICAgICAgICBUZWFtIHJhbmswOwogICAgICAgIFRlYW0gcmFuazE7CiAgICAgICAgVGVhbSByYW5rMjsKICAgICAgICBUZWFtIHJhbmszOwogICAgICAgIGJvb2wgaXNMaXZlOwogICAgICAgIGFkZHJlc3Mgc3BvbnNvcjsKICAgICAgICB1aW50IHByaXplOwogICAgICAgIHVpbnQxNiBpZDsKICAgICAgICB1aW50OCBudW1UZWFtczsKICAgICAgICBzdHJpbmcgbWVzc2FnZTsKICAgICAgICBib29sIG1lZGFsc0NsYWltZWQ7CiAgICAgICAgCiAgICB9CgogICAgLy9tYWluIHN0b3JhZ2UKICAgIExlYWRlcmJvYXJkIFtdICBMZWFkZXJib2FyZHM7CiAgICAKICAgIHVpbnQxNiBwdWJsaWMgdG90YWxMZWFkZXJib2FyZHM7CiAgICAKICAgIHVpbnQxNiBtaW5EYXlzPSA0OwogICAgdWludDE2IG1heERheXMgPSAxMDsKICAgIAogICAgLy9UaGUgcmVzZXJ2ZWQgYmFsYW5jZSBpcyB0aGUgdG90YWwgYmFsYW5jZSBvdXRzdGFuZGluZyBvbiBhbGwgb3BlbiBsZWFkZXJib2FyZHMuIAogICAgLy9XZSBrZWVwIHRyYWNrIG9mIHRoaXMgZmlndXJlIHRvIHByZXZlbnQgdGhlIGRldmVsb3BlcnMgZnJvbSBwdWxsaW5nIG91dCBtb25leSBjdXJyZW50bHkgcGxlZGdlZAogICAgdWludCBwdWJsaWMgY29udHJhY3RSZXNlcnZlZEJhbGFuY2U7CiAgICAKICAgIAogICAgbWFwcGluZyAodWludDY0ID0+IGJvb2wpIGFuZ2Vsc09uTGVhZGVyYm9hcmRzOwogICAgbWFwcGluZyAodWludDY0ID0+IGJvb2wpIHBldHNPbkxlYWRlcmJvYXJkczsKICAgIG1hcHBpbmcgKHVpbnQ2NCA9PiBib29sKSBhY2Nlc3Nvcmllc09uTGVhZGVyYm9hcmRzOwogICAgCiAgICAKICAgIAogICAgICAvLyB3cml0ZSBmdW5jdGlvbnMKICAgIGZ1bmN0aW9uIHNldE1pbk1heERheXModWludDggX21pbkRheXMsIHVpbnQ4IF9tYXhEYXlzKSBleHRlcm5hbCB7CiAgICAgICAgbWluRGF5cyA9IF9taW5EYXlzOwogICAgICAgIG1heERheXMgPSBfbWF4RGF5czsKICAgICAgIH0KCiAgCiAgICAgICAgZnVuY3Rpb24gb3BlbkxlYWRlcmJvYXJkKHVpbnQ4IG51bURheXMsIHN0cmluZyBtZXNzYWdlKSBleHRlcm5hbCBwYXlhYmxlIHsKICAgICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgdGhlIHNwb25zb3IgdG8gY3JlYXRlIHRoZSBMZWFkZXJib2FyZCBieSBzZW5kaW5nIG1vbmV5LiAKICAgICAgICAgICAgCiAgICAgICAgICAgaWYgKG1zZy52YWx1ZSA8IDEwMDAwMDAwMDAwMDAwMDAwKSB7cmV2ZXJ0KCk7fQogICAgICAgICAKICAgICAgICAgaWYgKChudW1EYXlzIDwgbWluRGF5cykgfHwgKG51bURheXMgPiBtYXhEYXlzKSkge3JldmVydCgpO30KICAgICAgICAgICAgTGVhZGVyYm9hcmQgbWVtb3J5IGxlYWRlcmJvYXJkOwogICAgICAgICAgICBsZWFkZXJib2FyZC5zdGFydFRpbWUgPSBub3c7CiAgICAgICAgICAgIGxlYWRlcmJvYXJkLmVuZFRpbWUgPSAobm93ICsgKG51bURheXMgKiA4NjQwMCkpOwogICAgICAgICAgICBsZWFkZXJib2FyZC5pc0xpdmUgPSB0cnVlOwogICAgICAgICAgICBsZWFkZXJib2FyZC5zcG9uc29yID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgbGVhZGVyYm9hcmQucHJpemUgPSBtc2cudmFsdWU7CiAgICAgICAgICAgIGxlYWRlcmJvYXJkLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAgICAgICBsZWFkZXJib2FyZC5pZCA9IHRvdGFsTGVhZGVyYm9hcmRzOwogICAgICAgICAgICAKICAgICAgICAgICAgbGVhZGVyYm9hcmQubWVkYWxzQ2xhaW1lZD0gZmFsc2U7CiAgICAgICAgICAgIGxlYWRlcmJvYXJkLm51bVRlYW1zID0gNDsKICAgIAogICAgICAgICAgIExlYWRlcmJvYXJkcy5wdXNoKGxlYWRlcmJvYXJkKTsKICAgICAgICAgICAKICAgICAgICAgICAgVGVhbSBtZW1vcnkgdGVhbTsKICAgICAgICAgICAgdGVhbS5hbmdlbElkID0gMTsKICAgICAgICAgICAgdGVhbS5wZXRJZCA9IDE7CiAgICAgICAgICAgIHRlYW0uYWNjZXNzb3J5SWQgPSAwOwogICAgICAgICAgICBMZWFkZXJib2FyZHNbdG90YWxMZWFkZXJib2FyZHNdLnJhbmsxID0gdGVhbTsKICAgICAgICAgICAgTGVhZGVyYm9hcmRzW3RvdGFsTGVhZGVyYm9hcmRzXS5yYW5rMiA9IHRlYW07CiAgICAgICAgICAgIExlYWRlcmJvYXJkc1t0b3RhbExlYWRlcmJvYXJkc10ucmFuazMgPSB0ZWFtOwogICAgICAgICAgICBMZWFkZXJib2FyZHNbdG90YWxMZWFkZXJib2FyZHNdLnJhbmswID0gdGVhbTsKICAgICAgICAgICAgdG90YWxMZWFkZXJib2FyZHMgKz0xOwogICAgICAgICAgICBjb250cmFjdFJlc2VydmVkQmFsYW5jZSArPSBtc2cudmFsdWU7CiAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBjbG9zZUxlYWRlcmJvYXJkKHVpbnQxNiBsZWFkZXJib2FyZElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgICAgIC8vd2lsbCBiZSBjYWxsZWQgYnkgdGhlIFNwb25zb3JlZExlYWRlcmJvYXJkcyBjb250cmFjdCB3aXRoIGEgY2VydGFpbiBjaGFuY2UgYWZ0ZXIgdGhlIG1pbmltdW0gYmF0dGxlIHRpbWUuIAogICAgICAgICAgIAogICAgICAgICAgICBMZWFkZXJib2FyZCBtZW1vcnkgbGVhZGVyYm9hcmQ7CiAgICAgICAgICAgIGxlYWRlcmJvYXJkID0gTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdOwogICAgICAgICAgICBpZiAobm93IDwgbGVhZGVyYm9hcmQuZW5kVGltZSkge3JldmVydCgpO30KICAgICAgICAgICAgaWYgKGxlYWRlcmJvYXJkLmlzTGl2ZSA9IGZhbHNlKSB7cmV2ZXJ0KCk7fQogICAgICAgICAgICBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0uaXNMaXZlID0gZmFsc2U7CiAgICAgICAgICAgICBJQW5nZWxDYXJkRGF0YSBhbmdlbENhcmREYXRhID0gSUFuZ2VsQ2FyZERhdGEoYW5nZWxDYXJkRGF0YUNvbnRyYWN0KTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgYWRkcmVzcyBvd25lcjE7CiAgICAgICAgICAgICBhZGRyZXNzIG93bmVyMjsKICAgICAgICAgICAgIGFkZHJlc3Mgb3duZXIzOwogICAgICAgICAgICAgYWRkcmVzcyBvd25lcjQ7CiAgICAgICAgICAgICAKICAgICAgICAgICAgKCwsLCwsLCwsLCxvd25lcjEpID0gYW5nZWxDYXJkRGF0YS5nZXRBbmdlbChMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazAuYW5nZWxJZCk7CiAgICAgICAgICAgICgsLCwsLCwsLCwsb3duZXIyKSA9IGFuZ2VsQ2FyZERhdGEuZ2V0QW5nZWwoTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsxLmFuZ2VsSWQpOwogICAgICAgICAgICAoLCwsLCwsLCwsLG93bmVyMykgPSBhbmdlbENhcmREYXRhLmdldEFuZ2VsKExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMi5hbmdlbElkKTsKICAgICAgICAgICAgKCwsLCwsLCwsLCxvd25lcjQpID0gYW5nZWxDYXJkRGF0YS5nZXRBbmdlbChMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazMuYW5nZWxJZCk7CiAgICAgICAgICAgIHVpbnQgcHJpemUgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucHJpemU7CiAgICAgICAgICAgIAogICAgICAgICAgICBvd25lcjEudHJhbnNmZXIoU2FmZURpdihzYWZlTXVsdChwcml6ZSw0NSksIDEwMCkpOwogICAgICAgICAgICBvd25lcjIudHJhbnNmZXIoU2FmZURpdihzYWZlTXVsdChwcml6ZSwyNSksIDEwMCkpOwogICAgICAgICAgICBvd25lcjMudHJhbnNmZXIoU2FmZURpdihzYWZlTXVsdChwcml6ZSwxNSksIDEwMCkpOwogICAgICAgICAgICBvd25lcjQudHJhbnNmZXIoU2FmZURpdihzYWZlTXVsdChwcml6ZSw1KSwgMTAwKSk7CiAgICAKICAgICAgICAgICAgLy9GcmVlIHVwIGNhcmRzIHRvIGJlIG9uIG90aGVyIExlYWRlcmJvYXJkcwogICAgICAgICAgICAKICAgICAgICBhbmdlbHNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazAuYW5nZWxJZF0gPSBmYWxzZTsKICAgICAgICBwZXRzT25MZWFkZXJib2FyZHNbTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmswLnBldElkXSA9IGZhbHNlOwogICAgICAgIGFjY2Vzc29yaWVzT25MZWFkZXJib2FyZHNbTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmswLmFjY2Vzc29yeUlkXSA9IGZhbHNlOwogICAgICAgICAKICAgICAgICAgICAgIAogICAgICAgIGFuZ2Vsc09uTGVhZGVyYm9hcmRzW0xlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMS5hbmdlbElkXSA9IGZhbHNlOwogICAgICAgIHBldHNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazEucGV0SWRdID0gZmFsc2U7CiAgICAgICAgYWNjZXNzb3JpZXNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazEuYWNjZXNzb3J5SWRdID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIGFuZ2Vsc09uTGVhZGVyYm9hcmRzW0xlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMi5hbmdlbElkXSA9IGZhbHNlOwogICAgICAgIHBldHNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIucGV0SWRdID0gZmFsc2U7CiAgICAgICAgYWNjZXNzb3JpZXNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIuYWNjZXNzb3J5SWRdID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIGFuZ2Vsc09uTGVhZGVyYm9hcmRzW0xlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hbmdlbElkXSA9IGZhbHNlOwogICAgICAgIHBldHNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazMucGV0SWRdID0gZmFsc2U7CiAgICAgICAgYWNjZXNzb3JpZXNPbkxlYWRlcmJvYXJkc1tMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazMuYWNjZXNzb3J5SWRdID0gZmFsc2U7CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnRyYWN0UmVzZXJ2ZWRCYWxhbmNlPSBjb250cmFjdFJlc2VydmVkQmFsYW5jZSAtICBTYWZlRGl2KHNhZmVNdWx0KHByaXplLDkwKSwgMTAwKTsKICAgICAgICB9CiAgCiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc2V0TWVkYWxzQ2xhaW1lZCh1aW50MTYgbGVhZGVyYm9hcmRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsIHsKICAgICAgICAgICAgTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLm1lZGFsc0NsYWltZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAKZnVuY3Rpb24gd2l0aGRyYXdFdGhlcigpIGV4dGVybmFsIG9ubHlDUkVBVE9SIHsKICAgIC8vbWFrZSBzdXJlIHdlIGNhbid0IHRyYW5zZmVyIG91dCBiYWxhbmNlIGZvciBsZWFkZXJib2FyZHMgdGhhdCBhcmVuJ3Qgb3Blbi4gCiAgICBjcmVhdG9yQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UtY29udHJhY3RSZXNlcnZlZEJhbGFuY2UpOwp9CgogICAgLy8gQ2FsbCB0byBnZXQgdGhlIHNwZWNpZmllZCB0ZWFtIGF0IGEgY2VydGFpbiBwb3NpdGlvbiBvZiBhIGNlcnRhaW4gYm9hcmQuIAogICBmdW5jdGlvbiBnZXRUZWFtRnJvbUxlYWRlcmJvYXJkKHVpbnQxNiBsZWFkZXJib2FyZElkLCB1aW50OCByYW5rKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDY0IGFuZ2VsSWQsIHVpbnQ2NCBwZXRJZCwgdWludDY0IGFjY2Vzc29yeUlkKSAgIHsKICAgICAgCiAgICAgICAgaWYgKChsZWFkZXJib2FyZElkIDwwKSB8fCAocmFuayA8MCkgfHwgKHJhbmsgPjMpIHx8IChsZWFkZXJib2FyZElkID4gdG90YWxMZWFkZXJib2FyZHMpKSB7cmV2ZXJ0KCk7fQogICAgICAgIGlmIChyYW5rID09IDApIHsKICAgICAgIGFuZ2VsSWQgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazAuYW5nZWxJZDsKICAgICAgIHBldElkID0gTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmswLnBldElkOwogICAgICAgYWNjZXNzb3J5SWQgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazAuYWNjZXNzb3J5SWQ7CiAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgICBpZiAocmFuayA9PSAxKSB7CiAgICAgICBhbmdlbElkID0gTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsxLmFuZ2VsSWQ7CiAgICAgICBwZXRJZCA9IExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMS5wZXRJZDsKICAgICAgIGFjY2Vzc29yeUlkID0gTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsxLmFjY2Vzc29yeUlkOwogICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAgIGlmIChyYW5rID09IDIpIHsKICAgICAgIGFuZ2VsSWQgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIuYW5nZWxJZDsKICAgICAgIHBldElkID0gTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsyLnBldElkOwogICAgICAgYWNjZXNzb3J5SWQgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIuYWNjZXNzb3J5SWQ7CiAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgICAgaWYgKHJhbmsgPT0gMykgewogICAgICAgYW5nZWxJZCA9IExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hbmdlbElkOwogICAgICAgcGV0SWQgPSBMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazMucGV0SWQ7CiAgICAgICBhY2Nlc3NvcnlJZCA9IExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hY2Nlc3NvcnlJZDsKICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAKCiAgIH0KICAgIGZ1bmN0aW9uIGdldExlYWRlcmJvYXJkKHVpbnQxNiBpZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc3RhcnRUaW1lLCB1aW50IGVuZFRpbWUsIGJvb2wgaXNMaXZlLCBhZGRyZXNzIHNwb25zb3IsIHVpbnQgcHJpemUsIHVpbnQ4IG51bVRlYW1zLCBzdHJpbmcgbWVzc2FnZSwgYm9vbCBtZWRhbHNDbGFpbWVkKSB7CiAgICAgICAgICAgIExlYWRlcmJvYXJkIG1lbW9yeSBsZWFkZXJib2FyZDsKICAgICAgICAgICAgbGVhZGVyYm9hcmQgPSBMZWFkZXJib2FyZHNbaWRdOwogICAgICAgICAgICBzdGFydFRpbWUgPSBsZWFkZXJib2FyZC5zdGFydFRpbWU7CiAgICAgICAgICAgIGVuZFRpbWUgPSBsZWFkZXJib2FyZC5lbmRUaW1lOwogICAgICAgICAgICBpc0xpdmUgPSBsZWFkZXJib2FyZC5pc0xpdmU7CiAgICAgICAgICAgIHNwb25zb3IgPSBsZWFkZXJib2FyZC5zcG9uc29yOwogICAgICAgICAgICBwcml6ZSA9IGxlYWRlcmJvYXJkLnByaXplOwogICAgICAgICAgICBudW1UZWFtcyA9IGxlYWRlcmJvYXJkLm51bVRlYW1zOwogICAgICAgICAgICBtZXNzYWdlID0gbGVhZGVyYm9hcmQubWVzc2FnZTsKICAgICAgICAgICAgbWVkYWxzQ2xhaW1lZCA9IGxlYWRlcmJvYXJkLm1lZGFsc0NsYWltZWQ7CiAgICB9CiAgICAKICAgICAKCgogICAgICAgIGZ1bmN0aW9uIG5ld1RlYW1PbkVuZCh1aW50MTYgbGVhZGVyYm9hcmRJZCwgdWludDY0IGFuZ2VsSWQsIHVpbnQ2NCBwZXRJZCwgdWludDY0IGFjY2Vzc29yeUlkKSAgb25seVNFUkFQSElNIGV4dGVybmFsICB7CiAgICAgICAgIC8vdG8gYmUgdXNlZCB3aGVuIGEgdGVhbSBzdWNjZXNzZnVsbHkgY2hhbGxlbmdlcyB0aGUgbGFzdCBzcG90IGFuZCBrbm9ja3MgdGhlIHBydmlvdXMgdGVhbSBvdXQuICAgCiAgICAgICAgIAogICAgICAgICAgICAgICAgVGVhbSBtZW1vcnkgdGVhbTsKICAgICAgICAgICAgICAgLy9yZW1vdmUgb2xkIHRlYW0gZnJvbSBtYXBwaW5ncwogICAgICAgICAgICAgICAgdGVhbSA9IExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMzsKICAgICAgICAgICAgICAgIGFuZ2Vsc09uTGVhZGVyYm9hcmRzW0xlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hbmdlbElkXSA9IGZhbHNlOwogICAgICAgICAgICAgICBwZXRzT25MZWFkZXJib2FyZHNbTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmszLnBldElkXSA9IGZhbHNlOwogICAgICAgICAgICAgICBhY2Nlc3Nvcmllc09uTGVhZGVyYm9hcmRzW0xlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hY2Nlc3NvcnlJZF0gPSBmYWxzZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9BZGQgbmV3IHRlYW0gdG8gZW5kCiAgICAgICAgICAgICAgTGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmszLmFuZ2VsSWQgPSBhbmdlbElkOwogICAgICAgICAgICAgIExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5wZXRJZCA9IHBldElkOwogICAgICAgICAgICAgIExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hY2Nlc3NvcnlJZCA9IGFjY2Vzc29yeUlkOwogICAgICAgICAgICAgIAogICAgICAgICAgICAgIGFuZ2Vsc09uTGVhZGVyYm9hcmRzW2FuZ2VsSWRdID0gdHJ1ZTsKICAgICAgICAgICAgICAgcGV0c09uTGVhZGVyYm9hcmRzW3BldElkXSA9IHRydWU7CiAgICAgICAgICAgICAgIGFjY2Vzc29yaWVzT25MZWFkZXJib2FyZHNbYWNjZXNzb3J5SWRdID0gdHJ1ZTsKICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBzd2l0Y2hSYW5raW5ncyAodWludDE2IGxlYWRlcmJvYXJkSWQsIHVpbnQ4IHNwb3QsdWludDY0IGFuZ2VsMUlELCB1aW50NjQgcGV0MUlELCB1aW50NjQgYWNjZXNzb3J5MUlELHVpbnQ2NCBhbmdlbDJJRCx1aW50NjQgcGV0MklELHVpbnQ2NCBhY2Nlc3NvcnkySUQgKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgIC8vcHV0IHRlYW0gMSBmcm9tIHNwb3QgdG8gc3BvdCsxIGFuZCBwdXQgdGVhbSAyIHRvIHNwb3QuIAogICAgCiAgICAgICAgICAgICAgICBUZWFtIG1lbW9yeSB0ZWFtOwogICAgICAgICAgICAgICAgdGVhbS5hbmdlbElkID0gYW5nZWwxSUQ7CiAgICAgICAgICAgICAgICB0ZWFtLnBldElkID0gcGV0MUlEOwogICAgICAgICAgICAgICAgdGVhbS5hY2Nlc3NvcnlJZCA9IGFjY2Vzc29yeTFJRDsKICAgICAgICAgICAgICAgIGlmIChzcG90ID09IDApIHtMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazEgPSB0ZWFtO30KICAgICAgICAgICAgICAgIGlmIChzcG90ID09IDEpIHtMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIgPSB0ZWFtO30KICAgICAgICAgICAgICAgIGlmIChzcG90ID09IDIpIHtMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazMgPSB0ZWFtO30KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGVhbS5hbmdlbElkID0gYW5nZWwySUQ7CiAgICAgICAgICAgICAgICB0ZWFtLnBldElkID0gcGV0MklEOwogICAgICAgICAgICAgICAgdGVhbS5hY2Nlc3NvcnlJZCA9IGFjY2Vzc29yeTJJRDsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoc3BvdCA9PSAwKSB7TGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmswID0gdGVhbTt9CiAgICAgICAgICAgICAgICBpZiAoc3BvdCA9PSAxKSB7TGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsxID0gdGVhbTt9CiAgICAgICAgICAgICAgICBpZiAoc3BvdCA9PSAyKSB7TGVhZGVyYm9hcmRzW2xlYWRlcmJvYXJkSWRdLnJhbmsyID0gdGVhbTt9CiAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHZlcmlmeVBvc2l0aW9uKHVpbnQxNiBsZWFkZXJib2FyZElkLCB1aW50OCBzcG90LCB1aW50NjQgYW5nZWxJRCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgCiAgICAgICAgICAgICAgIGlmIChzcG90ID09IDApIHsKICAgICAgICAgICAgICAgICAgIGlmIChMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazAuYW5nZWxJZCA9PSBhbmdlbElEKSB7cmV0dXJuIHRydWU7fQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmIChzcG90ID09IDEpIHsKICAgICAgICAgICAgICAgICAgIGlmIChMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazEuYW5nZWxJZCA9PSBhbmdlbElEKSB7cmV0dXJuIHRydWU7fQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmIChzcG90ID09IDIpIHsKICAgICAgICAgICAgICAgICAgIGlmIChMZWFkZXJib2FyZHNbbGVhZGVyYm9hcmRJZF0ucmFuazIuYW5nZWxJZCA9PSBhbmdlbElEKSB7cmV0dXJuIHRydWU7fQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgaWYgKHNwb3QgPT0gMykgewogICAgICAgICAgICAgICAgICAgaWYgKExlYWRlcmJvYXJkc1tsZWFkZXJib2FyZElkXS5yYW5rMy5hbmdlbElkID09IGFuZ2VsSUQpIHtyZXR1cm4gdHJ1ZTt9CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vZWFjaCBhbmdlbCBjYW4gb25seSBiZSBvbiBPTkUgc3BvbnNvcmVkIGxlYWRlcmJvYXJkIGF0IGEgdGltZS4gCiAgICAgICAgZnVuY3Rpb24gYW5nZWxPbkxlYWRlcmJvYXJkcyh1aW50NjQgYW5nZWxJRCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gYW5nZWxzT25MZWFkZXJib2FyZHNbYW5nZWxJRF07IAogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL2VhY2ggcGV0IGNhbiBvbmx5IGJlIG9uIE9ORSBzcG9uc29yZWQgbGVhZGVyYm9hcmQgYXQgYSB0aW1lLiAKICAgICAgICAgZnVuY3Rpb24gcGV0T25MZWFkZXJib2FyZHModWludDY0IHBldElEKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBwZXRzT25MZWFkZXJib2FyZHNbcGV0SURdOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9FYWNoIEFjY2Vzc29yeSBjYW4gb25seSBiZSBvbiBvbmUgc3BvbnNvcmVkIGxlYWRlcmJvYXJkCiAgICAgICAgIGZ1bmN0aW9uIGFjY2Vzc29yeU9uTGVhZGVyYm9hcmRzKHVpbnQ2NCBhY2Nlc3NvcnlJRCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gYWNjZXNzb3JpZXNPbkxlYWRlcmJvYXJkc1thY2Nlc3NvcnlJRF07IAogICAgICAgIH0KICAgICAgICAKICAgICAgIAogICAgCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50IHgsIHVpbnQgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludCB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQogICAgCiAgICAgZnVuY3Rpb24gU2FmZURpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogICAgLy8vIFJlYWQgYWNjZXNzCiAgICAgfQogICAKICAgCiAgICBmdW5jdGlvbiBnZXRUb3RhbExlYWRlcmJvYXJkcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICByZXR1cm4gdG90YWxMZWFkZXJib2FyZHM7CiAgICB9CiAgICAgIAogIAogICAgICAgIAogICAKICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgCiAgICAgIAogICAgICAgIAogICAKfQ=='.
	

]
