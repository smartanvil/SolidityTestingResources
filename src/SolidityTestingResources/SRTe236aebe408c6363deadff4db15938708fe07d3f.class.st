Class {
	#name : #SRTe236aebe408c6363deadff4db15938708fe07d3f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe236aebe408c6363deadff4db15938708fe07d3f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTQ7CgovKioKICogQ29udHJhY3QgdGhhdCBleHBvc2VzIHRoZSBuZWVkZWQgZXJjMjAgdG9rZW4gZnVuY3Rpb25zCiAqLwoKY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewogIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7Cn0KCi8qKgogKiBDb250cmFjdCB0aGF0IHdpbGwgZm9yd2FyZCBhbnkgaW5jb21pbmcgRXRoZXIgdG8gaXRzIGNyZWF0b3IKICovCmNvbnRyYWN0IEZvcndhcmRlciB7CiAgLy8gQWRkcmVzcyB0byB3aGljaCBhbnkgZnVuZHMgc2VudCB0byB0aGlzIGNvbnRyYWN0IHdpbGwgYmUgZm9yd2FyZGVkCiAgYWRkcmVzcyBwdWJsaWMgcGFyZW50QWRkcmVzczsKICBldmVudCBGb3J3YXJkZXJEZXBvc2l0ZWQoYWRkcmVzcyBmcm9tLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKTsKCiAgZXZlbnQgVG9rZW5zRmx1c2hlZCgKICAgIGFkZHJlc3MgdG9rZW5Db250cmFjdEFkZHJlc3MsIC8vIFRoZSBjb250cmFjdCBhZGRyZXNzIG9mIHRoZSB0b2tlbgogICAgdWludCB2YWx1ZSAvLyBBbW91bnQgb2YgdG9rZW4gc2VudAogICk7CgogIC8qKgogICAqIENyZWF0ZSB0aGUgY29udHJhY3QsIGFuZCBzZXQgdGhlIGRlc3RpbmF0aW9uIGFkZHJlc3MgdG8gdGhhdCBvZiB0aGUgY3JlYXRvcgogICAqLwogIGZ1bmN0aW9uIEZvcndhcmRlcigpIHsKICAgIHBhcmVudEFkZHJlc3MgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogTW9kaWZpZXIgdGhhdCB3aWxsIGV4ZWN1dGUgaW50ZXJuYWwgY29kZSBibG9jayBvbmx5IGlmIHRoZSBzZW5kZXIgaXMgYSBwYXJlbnQgb2YgdGhlIGZvcndhcmRlciBjb250cmFjdAogICAqLwogIG1vZGlmaWVyIG9ubHlQYXJlbnQgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gcGFyZW50QWRkcmVzcykgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQoKICAvKioKICAgKiBEZWZhdWx0IGZ1bmN0aW9uOyBHZXRzIGNhbGxlZCB3aGVuIEV0aGVyIGlzIGRlcG9zaXRlZCwgYW5kIGZvcndhcmRzIGl0IHRvIHRoZSBkZXN0aW5hdGlvbiBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIGlmICghcGFyZW50QWRkcmVzcy5jYWxsLnZhbHVlKG1zZy52YWx1ZSkobXNnLmRhdGEpKQogICAgICB0aHJvdzsKICAgIC8vIEZpcmUgb2ZmIHRoZSBkZXBvc2l0ZWQgZXZlbnQgaWYgd2UgY2FuIGZvcndhcmQgaXQgIAogICAgRm9yd2FyZGVyRGVwb3NpdGVkKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgbXNnLmRhdGEpOwogIH0KCiAgLyoqCiAgICogRXhlY3V0ZSBhIHRva2VuIHRyYW5zZmVyIG9mIHRoZSBmdWxsIGJhbGFuY2UgZnJvbSB0aGUgZm9yd2FyZGVyIHRva2VuIHRvIHRoZSBtYWluIHdhbGxldCBjb250cmFjdAogICAqIEBwYXJhbSB0b2tlbkNvbnRyYWN0QWRkcmVzcyB0aGUgYWRkcmVzcyBvZiB0aGUgZXJjMjAgdG9rZW4gY29udHJhY3QKICAgKi8KICBmdW5jdGlvbiBmbHVzaFRva2VucyhhZGRyZXNzIHRva2VuQ29udHJhY3RBZGRyZXNzKSBvbmx5UGFyZW50IHsKICAgIEVSQzIwSW50ZXJmYWNlIGluc3RhbmNlID0gRVJDMjBJbnRlcmZhY2UodG9rZW5Db250cmFjdEFkZHJlc3MpOwogICAgdmFyIGZvcndhcmRlckFkZHJlc3MgPSBhZGRyZXNzKHRoaXMpOwogICAgdmFyIGZvcndhcmRlckJhbGFuY2UgPSBpbnN0YW5jZS5iYWxhbmNlT2YoZm9yd2FyZGVyQWRkcmVzcyk7CiAgICBpZiAoZm9yd2FyZGVyQmFsYW5jZSA9PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghaW5zdGFuY2UudHJhbnNmZXIocGFyZW50QWRkcmVzcywgZm9yd2FyZGVyQmFsYW5jZSkpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBUb2tlbnNGbHVzaGVkKHRva2VuQ29udHJhY3RBZGRyZXNzLCBmb3J3YXJkZXJCYWxhbmNlKTsKICB9CgogIC8qKgogICAqIEl0IGlzIHBvc3NpYmxlIHRoYXQgZnVuZHMgd2VyZSBzZW50IHRvIHRoaXMgYWRkcmVzcyBiZWZvcmUgdGhlIGNvbnRyYWN0IHdhcyBkZXBsb3llZC4KICAgKiBXZSBjYW4gZmx1c2ggdGhvc2UgZnVuZHMgdG8gdGhlIGRlc3RpbmF0aW9uIGFkZHJlc3MuCiAgICovCiAgZnVuY3Rpb24gZmx1c2goKSB7CiAgICBpZiAoIXBhcmVudEFkZHJlc3MuY2FsbC52YWx1ZSh0aGlzLmJhbGFuY2UpKCkpCiAgICAgIHRocm93OwogIH0KfQoKLyoqCiAqIEJhc2ljIG11bHRpLXNpZ25lciB3YWxsZXQgZGVzaWduZWQgZm9yIHVzZSBpbiBhIGNvLXNpZ25pbmcgZW52aXJvbm1lbnQgd2hlcmUgMiBzaWduYXR1cmVzIGFyZSByZXF1aXJlZCB0byBtb3ZlIGZ1bmRzLgogKiBUeXBpY2FsbHkgdXNlZCBpbiBhIDItb2YtMyBzaWduaW5nIGNvbmZpZ3VyYXRpb24uIFVzZXMgZWNyZWNvdmVyIHRvIGFsbG93IGZvciAyIHNpZ25hdHVyZXMgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24uCiAqLwpjb250cmFjdCBXYWxsZXRTaW1wbGUgewogIC8vIEV2ZW50cwogIGV2ZW50IERlcG9zaXRlZChhZGRyZXNzIGZyb20sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpOwogIGV2ZW50IFNhZmVNb2RlQWN0aXZhdGVkKGFkZHJlc3MgbXNnU2VuZGVyKTsKICBldmVudCBUcmFuc2FjdGVkKAogICAgYWRkcmVzcyBtc2dTZW5kZXIsIC8vIEFkZHJlc3Mgb2YgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSBpbml0aWF0aW5nIHRoZSB0cmFuc2FjdGlvbgogICAgYWRkcmVzcyBvdGhlclNpZ25lciwgLy8gQWRkcmVzcyBvZiB0aGUgc2lnbmVyIChzZWNvbmQgc2lnbmF0dXJlKSB1c2VkIHRvIGluaXRpYXRlIHRoZSB0cmFuc2FjdGlvbgogICAgYnl0ZXMzMiBvcGVyYXRpb24sIC8vIE9wZXJhdGlvbiBoYXNoIChzaGEzIG9mIHRvQWRkcmVzcywgdmFsdWUsIGRhdGEsIGV4cGlyZVRpbWUsIHNlcXVlbmNlSWQpCiAgICBhZGRyZXNzIHRvQWRkcmVzcywgLy8gVGhlIGFkZHJlc3MgdGhlIHRyYW5zYWN0aW9uIHdhcyBzZW50IHRvCiAgICB1aW50IHZhbHVlLCAvLyBBbW91bnQgb2YgV2VpIHNlbnQgdG8gdGhlIGFkZHJlc3MKICAgIGJ5dGVzIGRhdGEgLy8gRGF0YSBzZW50IHdoZW4gaW52b2tpbmcgdGhlIHRyYW5zYWN0aW9uCiAgKTsKICBldmVudCBUb2tlblRyYW5zYWN0ZWQoCiAgICBhZGRyZXNzIG1zZ1NlbmRlciwgLy8gQWRkcmVzcyBvZiB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlIGluaXRpYXRpbmcgdGhlIHRyYW5zYWN0aW9uCiAgICBhZGRyZXNzIG90aGVyU2lnbmVyLCAvLyBBZGRyZXNzIG9mIHRoZSBzaWduZXIgKHNlY29uZCBzaWduYXR1cmUpIHVzZWQgdG8gaW5pdGlhdGUgdGhlIHRyYW5zYWN0aW9uCiAgICBieXRlczMyIG9wZXJhdGlvbiwgLy8gT3BlcmF0aW9uIGhhc2ggKHNoYTMgb2YgdG9BZGRyZXNzLCB2YWx1ZSwgdG9rZW5Db250cmFjdEFkZHJlc3MsIGV4cGlyZVRpbWUsIHNlcXVlbmNlSWQpCiAgICBhZGRyZXNzIHRvQWRkcmVzcywgLy8gVGhlIGFkZHJlc3MgdGhlIHRyYW5zYWN0aW9uIHdhcyBzZW50IHRvCiAgICB1aW50IHZhbHVlLCAvLyBBbW91bnQgb2YgdG9rZW4gc2VudAogICAgYWRkcmVzcyB0b2tlbkNvbnRyYWN0QWRkcmVzcyAvLyBUaGUgY29udHJhY3QgYWRkcmVzcyBvZiB0aGUgdG9rZW4KICApOwoKICAvLyBQdWJsaWMgZmllbGRzCiAgYWRkcmVzc1tdIHB1YmxpYyBzaWduZXJzOyAvLyBUaGUgYWRkcmVzc2VzIHRoYXQgY2FuIGNvLXNpZ24gdHJhbnNhY3Rpb25zIG9uIHRoZSB3YWxsZXQKICBib29sIHB1YmxpYyBzYWZlTW9kZSA9IGZhbHNlOyAvLyBXaGVuIGFjdGl2ZSwgd2FsbGV0IG1heSBvbmx5IHNlbmQgdG8gc2lnbmVyIGFkZHJlc3NlcwoKICAvLyBJbnRlcm5hbCBmaWVsZHMKICB1aW50IGNvbnN0YW50IFNFUVVFTkNFX0lEX1dJTkRPV19TSVpFID0gMTA7CiAgdWludFsxMF0gcmVjZW50U2VxdWVuY2VJZHM7CgogIC8qKgogICAqIE1vZGlmaWVyIHRoYXQgd2lsbCBleGVjdXRlIGludGVybmFsIGNvZGUgYmxvY2sgb25seSBpZiB0aGUgc2VuZGVyIGlzIGFuIGF1dGhvcml6ZWQgc2lnbmVyIG9uIHRoaXMgd2FsbGV0CiAgICovCiAgbW9kaWZpZXIgb25seXNpZ25lciB7CiAgICBpZiAoIWlzU2lnbmVyKG1zZy5zZW5kZXIpKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgogIC8qKgogICAqIFNldCB1cCBhIHNpbXBsZSBtdWx0aS1zaWcgd2FsbGV0IGJ5IHNwZWNpZnlpbmcgdGhlIHNpZ25lcnMgYWxsb3dlZCB0byBiZSB1c2VkIG9uIHRoaXMgd2FsbGV0LgogICAqIDIgc2lnbmVycyB3aWxsIGJlIHJlcXVpcmVkIHRvIHNlbmQgYSB0cmFuc2FjdGlvbiBmcm9tIHRoaXMgd2FsbGV0LgogICAqIE5vdGU6IFRoZSBzZW5kZXIgaXMgTk9UIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIGxpc3Qgb2Ygc2lnbmVycy4KICAgKiBTaWduZXJzIENBTk5PVCBiZSBjaGFuZ2VkIG9uY2UgdGhleSBhcmUgc2V0CiAgICoKICAgKiBAcGFyYW0gYWxsb3dlZFNpZ25lcnMgQW4gYXJyYXkgb2Ygc2lnbmVycyBvbiB0aGUgd2FsbGV0CiAgICovCiAgZnVuY3Rpb24gV2FsbGV0U2ltcGxlKGFkZHJlc3NbXSBhbGxvd2VkU2lnbmVycykgewogICAgaWYgKGFsbG93ZWRTaWduZXJzLmxlbmd0aCAhPSAzKSB7CiAgICAgIC8vIEludmFsaWQgbnVtYmVyIG9mIHNpZ25lcnMKICAgICAgdGhyb3c7CiAgICB9CiAgICBzaWduZXJzID0gYWxsb3dlZFNpZ25lcnM7CiAgfQoKICAvKioKICAgKiBHZXRzIGNhbGxlZCB3aGVuIGEgdHJhbnNhY3Rpb24gaXMgcmVjZWl2ZWQgd2l0aG91dCBjYWxsaW5nIGEgbWV0aG9kCiAgICovCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIGlmIChtc2cudmFsdWUgPiAwKSB7CiAgICAgIC8vIEZpcmUgZGVwb3NpdGVkIGV2ZW50IGlmIHdlIGFyZSByZWNlaXZpbmcgZnVuZHMKICAgICAgRGVwb3NpdGVkKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSwgbXNnLmRhdGEpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGNvbnRyYWN0IChhbmQgYWxzbyBhZGRyZXNzKSB0aGF0IGZvcndhcmRzIGZ1bmRzIHRvIHRoaXMgY29udHJhY3QKICAgKiByZXR1cm5zIGFkZHJlc3Mgb2YgbmV3bHkgY3JlYXRlZCBmb3J3YXJkZXIgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUZvcndhcmRlcigpIG9ubHlzaWduZXIgcmV0dXJucyAoYWRkcmVzcykgewogICAgcmV0dXJuIG5ldyBGb3J3YXJkZXIoKTsKICB9CgogIC8qKgogICAqIEV4ZWN1dGUgYSBtdWx0aS1zaWduYXR1cmUgdHJhbnNhY3Rpb24gZnJvbSB0aGlzIHdhbGxldCB1c2luZyAyIHNpZ25lcnM6IG9uZSBmcm9tIG1zZy5zZW5kZXIgYW5kIHRoZSBvdGhlciBmcm9tIGVjcmVjb3Zlci4KICAgKiBUaGUgc2lnbmF0dXJlIGlzIGEgc2lnbmVkIGZvcm0gKHVzaW5nIGV0aC5zaWduKSBvZiB0aWdodGx5IHBhY2tlZCB0b0FkZHJlc3MsIHZhbHVlLCBkYXRhLCBleHBpcmVUaW1lIGFuZCBzZXF1ZW5jZUlkCiAgICogU2VxdWVuY2UgSURzIGFyZSBudW1iZXJzIHN0YXJ0aW5nIGZyb20gMS4gVGhleSBhcmUgdXNlZCB0byBwcmV2ZW50IHJlcGxheSBhdHRhY2tzIGFuZCBtYXkgbm90IGJlIHJlcGVhdGVkLgogICAqCiAgICogQHBhcmFtIHRvQWRkcmVzcyB0aGUgZGVzdGluYXRpb24gYWRkcmVzcyB0byBzZW5kIGFuIG91dGdvaW5nIHRyYW5zYWN0aW9uCiAgICogQHBhcmFtIHZhbHVlIHRoZSBhbW91bnQgaW4gV2VpIHRvIGJlIHNlbnQKICAgKiBAcGFyYW0gZGF0YSB0aGUgZGF0YSB0byBzZW5kIHRvIHRoZSB0b0FkZHJlc3Mgd2hlbiBpbnZva2luZyB0aGUgdHJhbnNhY3Rpb24KICAgKiBAcGFyYW0gZXhwaXJlVGltZSB0aGUgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgMTk3MCBmb3Igd2hpY2ggdGhpcyB0cmFuc2FjdGlvbiBpcyB2YWxpZAogICAqIEBwYXJhbSBzZXF1ZW5jZUlkIHRoZSB1bmlxdWUgc2VxdWVuY2UgaWQgb2J0YWluYWJsZSBmcm9tIGdldE5leHRTZXF1ZW5jZUlkCiAgICogQHBhcmFtIHNpZ25hdHVyZSB0aGUgcmVzdWx0IG9mIGV0aC5zaWduIG9uIHRoZSBvcGVyYXRpb25IYXNoIHNoYTModG9BZGRyZXNzLCB2YWx1ZSwgZGF0YSwgZXhwaXJlVGltZSwgc2VxdWVuY2VJZCkKICAgKi8KICBmdW5jdGlvbiBzZW5kTXVsdGlTaWcoYWRkcmVzcyB0b0FkZHJlc3MsIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEsIHVpbnQgZXhwaXJlVGltZSwgdWludCBzZXF1ZW5jZUlkLCBieXRlcyBzaWduYXR1cmUpIG9ubHlzaWduZXIgewogICAgLy8gVmVyaWZ5IHRoZSBvdGhlciBzaWduZXIKICAgIHZhciBvcGVyYXRpb25IYXNoID0gc2hhMygiRVRIRVIiLCB0b0FkZHJlc3MsIHZhbHVlLCBkYXRhLCBleHBpcmVUaW1lLCBzZXF1ZW5jZUlkKTsKICAgIAogICAgdmFyIG90aGVyU2lnbmVyID0gdmVyaWZ5TXVsdGlTaWcodG9BZGRyZXNzLCBvcGVyYXRpb25IYXNoLCBzaWduYXR1cmUsIGV4cGlyZVRpbWUsIHNlcXVlbmNlSWQpOwoKICAgIC8vIFN1Y2Nlc3MsIHNlbmQgdGhlIHRyYW5zYWN0aW9uCiAgICBpZiAoISh0b0FkZHJlc3MuY2FsbC52YWx1ZSh2YWx1ZSkoZGF0YSkpKSB7CiAgICAgIC8vIEZhaWxlZCBleGVjdXRpbmcgdHJhbnNhY3Rpb24KICAgICAgdGhyb3c7CiAgICB9CiAgICBUcmFuc2FjdGVkKG1zZy5zZW5kZXIsIG90aGVyU2lnbmVyLCBvcGVyYXRpb25IYXNoLCB0b0FkZHJlc3MsIHZhbHVlLCBkYXRhKTsKICB9CiAgCiAgLyoqCiAgICogRXhlY3V0ZSBhIG11bHRpLXNpZ25hdHVyZSB0b2tlbiB0cmFuc2ZlciBmcm9tIHRoaXMgd2FsbGV0IHVzaW5nIDIgc2lnbmVyczogb25lIGZyb20gbXNnLnNlbmRlciBhbmQgdGhlIG90aGVyIGZyb20gZWNyZWNvdmVyLgogICAqIFRoZSBzaWduYXR1cmUgaXMgYSBzaWduZWQgZm9ybSAodXNpbmcgZXRoLnNpZ24pIG9mIHRpZ2h0bHkgcGFja2VkIHRvQWRkcmVzcywgdmFsdWUsIHRva2VuQ29udHJhY3RBZGRyZXNzLCBleHBpcmVUaW1lIGFuZCBzZXF1ZW5jZUlkCiAgICogU2VxdWVuY2UgSURzIGFyZSBudW1iZXJzIHN0YXJ0aW5nIGZyb20gMS4gVGhleSBhcmUgdXNlZCB0byBwcmV2ZW50IHJlcGxheSBhdHRhY2tzIGFuZCBtYXkgbm90IGJlIHJlcGVhdGVkLgogICAqCiAgICogQHBhcmFtIHRvQWRkcmVzcyB0aGUgZGVzdGluYXRpb24gYWRkcmVzcyB0byBzZW5kIGFuIG91dGdvaW5nIHRyYW5zYWN0aW9uCiAgICogQHBhcmFtIHZhbHVlIHRoZSBhbW91bnQgaW4gdG9rZW5zIHRvIGJlIHNlbnQKICAgKiBAcGFyYW0gdG9rZW5Db250cmFjdEFkZHJlc3MgdGhlIGFkZHJlc3Mgb2YgdGhlIGVyYzIwIHRva2VuIGNvbnRyYWN0CiAgICogQHBhcmFtIGV4cGlyZVRpbWUgdGhlIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIDE5NzAgZm9yIHdoaWNoIHRoaXMgdHJhbnNhY3Rpb24gaXMgdmFsaWQKICAgKiBAcGFyYW0gc2VxdWVuY2VJZCB0aGUgdW5pcXVlIHNlcXVlbmNlIGlkIG9idGFpbmFibGUgZnJvbSBnZXROZXh0U2VxdWVuY2VJZAogICAqIEBwYXJhbSBzaWduYXR1cmUgdGhlIHJlc3VsdCBvZiBldGguc2lnbiBvbiB0aGUgb3BlcmF0aW9uSGFzaCBzaGEzKHRvQWRkcmVzcywgdmFsdWUsIHRva2VuQ29udHJhY3RBZGRyZXNzLCBleHBpcmVUaW1lLCBzZXF1ZW5jZUlkKQogICAqLwogIGZ1bmN0aW9uIHNlbmRNdWx0aVNpZ1Rva2VuKGFkZHJlc3MgdG9BZGRyZXNzLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRva2VuQ29udHJhY3RBZGRyZXNzLCB1aW50IGV4cGlyZVRpbWUsIHVpbnQgc2VxdWVuY2VJZCwgYnl0ZXMgc2lnbmF0dXJlKSBvbmx5c2lnbmVyIHsKICAgIC8vIFZlcmlmeSB0aGUgb3RoZXIgc2lnbmVyCiAgICB2YXIgb3BlcmF0aW9uSGFzaCA9IHNoYTMoIkVSQzIwIiwgdG9BZGRyZXNzLCB2YWx1ZSwgdG9rZW5Db250cmFjdEFkZHJlc3MsIGV4cGlyZVRpbWUsIHNlcXVlbmNlSWQpOwogICAgCiAgICB2YXIgb3RoZXJTaWduZXIgPSB2ZXJpZnlNdWx0aVNpZyh0b0FkZHJlc3MsIG9wZXJhdGlvbkhhc2gsIHNpZ25hdHVyZSwgZXhwaXJlVGltZSwgc2VxdWVuY2VJZCk7CiAgICAKICAgIEVSQzIwSW50ZXJmYWNlIGluc3RhbmNlID0gRVJDMjBJbnRlcmZhY2UodG9rZW5Db250cmFjdEFkZHJlc3MpOwogICAgaWYgKCFpbnN0YW5jZS50cmFuc2Zlcih0b0FkZHJlc3MsIHZhbHVlKSkgewogICAgICAgIHRocm93OwogICAgfQogICAgVG9rZW5UcmFuc2FjdGVkKG1zZy5zZW5kZXIsIG90aGVyU2lnbmVyLCBvcGVyYXRpb25IYXNoLCB0b0FkZHJlc3MsIHZhbHVlLCB0b2tlbkNvbnRyYWN0QWRkcmVzcyk7CiAgfQoKICAvKioKICAgKiBFeGVjdXRlIGEgdG9rZW4gZmx1c2ggZnJvbSBvbmUgb2YgdGhlIGZvcndhcmRlciBhZGRyZXNzZXMuIFRoaXMgdHJhbnNmZXIgbmVlZHMgb25seSBhIHNpbmdsZSBzaWduYXR1cmUgYW5kIGNhbiBiZSBkb25lIGJ5IGFueSBzaWduZXIKICAgKgogICAqIEBwYXJhbSBmb3J3YXJkZXJBZGRyZXNzIHRoZSBhZGRyZXNzIG9mIHRoZSBmb3J3YXJkZXIgYWRkcmVzcyB0byBmbHVzaCB0aGUgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gdG9rZW5Db250cmFjdEFkZHJlc3MgdGhlIGFkZHJlc3Mgb2YgdGhlIGVyYzIwIHRva2VuIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gZmx1c2hGb3J3YXJkZXJUb2tlbnMoYWRkcmVzcyBmb3J3YXJkZXJBZGRyZXNzLCBhZGRyZXNzIHRva2VuQ29udHJhY3RBZGRyZXNzKSBvbmx5c2lnbmVyIHsgICAgCiAgICBGb3J3YXJkZXIgZm9yd2FyZGVyID0gRm9yd2FyZGVyKGZvcndhcmRlckFkZHJlc3MpOwogICAgZm9yd2FyZGVyLmZsdXNoVG9rZW5zKHRva2VuQ29udHJhY3RBZGRyZXNzKTsKICB9ICAKICAKICAvKioKICAgKiBEbyBjb21tb24gbXVsdGlzaWcgdmVyaWZpY2F0aW9uIGZvciBib3RoIGV0aCBzZW5kcyBhbmQgZXJjMjB0b2tlbiB0cmFuc2ZlcnMKICAgKgogICAqIEBwYXJhbSB0b0FkZHJlc3MgdGhlIGRlc3RpbmF0aW9uIGFkZHJlc3MgdG8gc2VuZCBhbiBvdXRnb2luZyB0cmFuc2FjdGlvbgogICAqIEBwYXJhbSBvcGVyYXRpb25IYXNoIHRoZSBzaGEzIG9mIHRoZSB0b0FkZHJlc3MsIHZhbHVlLCBkYXRhL3Rva2VuQ29udHJhY3RBZGRyZXNzIGFuZCBleHBpcmVUaW1lCiAgICogQHBhcmFtIHNpZ25hdHVyZSB0aGUgdGlnaHRseSBwYWNrZWQgc2lnbmF0dXJlIG9mIHIsIHMsIGFuZCB2IGFzIGFuIGFycmF5IG9mIDY1IGJ5dGVzIChyZXR1cm5lZCBieSBldGguc2lnbikKICAgKiBAcGFyYW0gZXhwaXJlVGltZSB0aGUgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgMTk3MCBmb3Igd2hpY2ggdGhpcyB0cmFuc2FjdGlvbiBpcyB2YWxpZAogICAqIEBwYXJhbSBzZXF1ZW5jZUlkIHRoZSB1bmlxdWUgc2VxdWVuY2UgaWQgb2J0YWluYWJsZSBmcm9tIGdldE5leHRTZXF1ZW5jZUlkCiAgICogcmV0dXJucyBhZGRyZXNzIG9mIHRoZSBhZGRyZXNzIHRvIHNlbmQgdG9rZW5zIG9yIGV0aCB0bwogICAqLwogIGZ1bmN0aW9uIHZlcmlmeU11bHRpU2lnKGFkZHJlc3MgdG9BZGRyZXNzLCBieXRlczMyIG9wZXJhdGlvbkhhc2gsIGJ5dGVzIHNpZ25hdHVyZSwgdWludCBleHBpcmVUaW1lLCB1aW50IHNlcXVlbmNlSWQpIHByaXZhdGUgcmV0dXJucyAoYWRkcmVzcykgewoKICAgIHZhciBvdGhlclNpZ25lciA9IHJlY292ZXJBZGRyZXNzRnJvbVNpZ25hdHVyZShvcGVyYXRpb25IYXNoLCBzaWduYXR1cmUpOwoKICAgIC8vIFZlcmlmeSBpZiB3ZSBhcmUgaW4gc2FmZSBtb2RlLiBJbiBzYWZlIG1vZGUsIHRoZSB3YWxsZXQgY2FuIG9ubHkgc2VuZCB0byBzaWduZXJzCiAgICBpZiAoc2FmZU1vZGUgJiYgIWlzU2lnbmVyKHRvQWRkcmVzcykpIHsKICAgICAgLy8gV2UgYXJlIGluIHNhZmUgbW9kZSBhbmQgdGhlIHRvQWRkcmVzcyBpcyBub3QgYSBzaWduZXIuIERpc2FsbG93IQogICAgICB0aHJvdzsKICAgIH0KICAgIC8vIFZlcmlmeSB0aGF0IHRoZSB0cmFuc2FjdGlvbiBoYXMgbm90IGV4cGlyZWQKICAgIGlmIChleHBpcmVUaW1lIDwgYmxvY2sudGltZXN0YW1wKSB7CiAgICAgIC8vIFRyYW5zYWN0aW9uIGV4cGlyZWQKICAgICAgdGhyb3c7CiAgICB9CgogICAgLy8gVHJ5IHRvIGluc2VydCB0aGUgc2VxdWVuY2UgSUQuIFdpbGwgdGhyb3cgaWYgdGhlIHNlcXVlbmNlIGlkIHdhcyBpbnZhbGlkCiAgICB0cnlJbnNlcnRTZXF1ZW5jZUlkKHNlcXVlbmNlSWQpOwoKICAgIGlmICghaXNTaWduZXIob3RoZXJTaWduZXIpKSB7CiAgICAgIC8vIE90aGVyIHNpZ25lciBub3Qgb24gdGhpcyB3YWxsZXQgb3Igb3BlcmF0aW9uIGRvZXMgbm90IG1hdGNoIGFyZ3VtZW50cwogICAgICB0aHJvdzsKICAgIH0KICAgIGlmIChvdGhlclNpZ25lciA9PSBtc2cuc2VuZGVyKSB7CiAgICAgIC8vIENhbm5vdCBhcHByb3ZlIG93biB0cmFuc2FjdGlvbgogICAgICB0aHJvdzsKICAgIH0KCiAgICByZXR1cm4gb3RoZXJTaWduZXI7CiAgfQoKICAvKioKICAgKiBJcnJldm9jYWJseSBwdXRzIGNvbnRyYWN0IGludG8gc2FmZSBtb2RlLiBXaGVuIGluIHRoaXMgbW9kZSwgdHJhbnNhY3Rpb25zIG1heSBvbmx5IGJlIHNlbnQgdG8gc2lnbmluZyBhZGRyZXNzZXMuCiAgICovCiAgZnVuY3Rpb24gYWN0aXZhdGVTYWZlTW9kZSgpIG9ubHlzaWduZXIgewogICAgc2FmZU1vZGUgPSB0cnVlOwogICAgU2FmZU1vZGVBY3RpdmF0ZWQobXNnLnNlbmRlcik7CiAgfQoKICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYW4gYWRkcmVzcyBpcyBhIHNpZ25lciBvbiB0aGlzIHdhbGxldAogICAqIEBwYXJhbSBzaWduZXIgYWRkcmVzcyB0byBjaGVjawogICAqIHJldHVybnMgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgYWRkcmVzcyBpcyBzaWduZXIgb3Igbm90CiAgICovCiAgZnVuY3Rpb24gaXNTaWduZXIoYWRkcmVzcyBzaWduZXIpIHJldHVybnMgKGJvb2wpIHsKICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhbGwgc2lnbmVycyBvbiB0aGUgd2FsbGV0IGFuZAogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc2lnbmVycy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoc2lnbmVyc1tpXSA9PSBzaWduZXIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoqCiAgICogR2V0cyB0aGUgc2Vjb25kIHNpZ25lcidzIGFkZHJlc3MgdXNpbmcgZWNyZWNvdmVyCiAgICogQHBhcmFtIG9wZXJhdGlvbkhhc2ggdGhlIHNoYTMgb2YgdGhlIHRvQWRkcmVzcywgdmFsdWUsIGRhdGEvdG9rZW5Db250cmFjdEFkZHJlc3MgYW5kIGV4cGlyZVRpbWUKICAgKiBAcGFyYW0gc2lnbmF0dXJlIHRoZSB0aWdodGx5IHBhY2tlZCBzaWduYXR1cmUgb2YgciwgcywgYW5kIHYgYXMgYW4gYXJyYXkgb2YgNjUgYnl0ZXMgKHJldHVybmVkIGJ5IGV0aC5zaWduKQogICAqIHJldHVybnMgYWRkcmVzcyByZWNvdmVyZWQgZnJvbSB0aGUgc2lnbmF0dXJlCiAgICovCiAgZnVuY3Rpb24gcmVjb3ZlckFkZHJlc3NGcm9tU2lnbmF0dXJlKGJ5dGVzMzIgb3BlcmF0aW9uSGFzaCwgYnl0ZXMgc2lnbmF0dXJlKSBwcml2YXRlIHJldHVybnMgKGFkZHJlc3MpIHsKICAgIGlmIChzaWduYXR1cmUubGVuZ3RoICE9IDY1KSB7CiAgICAgIHRocm93OwogICAgfQogICAgLy8gV2UgbmVlZCB0byB1bnBhY2sgdGhlIHNpZ25hdHVyZSwgd2hpY2ggaXMgZ2l2ZW4gYXMgYW4gYXJyYXkgb2YgNjUgYnl0ZXMgKGZyb20gZXRoLnNpZ24pCiAgICBieXRlczMyIHI7CiAgICBieXRlczMyIHM7CiAgICB1aW50OCB2OwogICAgYXNzZW1ibHkgewogICAgICByIDo9IG1sb2FkKGFkZChzaWduYXR1cmUsIDMyKSkKICAgICAgcyA6PSBtbG9hZChhZGQoc2lnbmF0dXJlLCA2NCkpCiAgICAgIHYgOj0gYW5kKG1sb2FkKGFkZChzaWduYXR1cmUsIDY1KSksIDI1NSkKICAgIH0KICAgIGlmICh2IDwgMjcpIHsKICAgICAgdiArPSAyNzsgLy8gRXRoZXJldW0gdmVyc2lvbnMgYXJlIDI3IG9yIDI4IGFzIG9wcG9zZWQgdG8gMCBvciAxIHdoaWNoIGlzIHN1Ym1pdHRlZCBieSBzb21lIHNpZ25pbmcgbGlicwogICAgfQogICAgcmV0dXJuIGVjcmVjb3ZlcihvcGVyYXRpb25IYXNoLCB2LCByLCBzKTsKICB9CgogIC8qKgogICAqIFZlcmlmeSB0aGF0IHRoZSBzZXF1ZW5jZSBpZCBoYXMgbm90IGJlZW4gdXNlZCBiZWZvcmUgYW5kIGluc2VydHMgaXQuIFRocm93cyBpZiB0aGUgc2VxdWVuY2UgSUQgd2FzIG5vdCBhY2NlcHRlZC4KICAgKiBXZSBjb2xsZWN0IGEgd2luZG93IG9mIHVwIHRvIDEwIHJlY2VudCBzZXF1ZW5jZSBpZHMsIGFuZCBhbGxvdyBhbnkgc2VxdWVuY2UgaWQgdGhhdCBpcyBub3QgaW4gdGhlIHdpbmRvdyBhbmQKICAgKiBncmVhdGVyIHRoYW4gdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgd2luZG93LgogICAqIEBwYXJhbSBzZXF1ZW5jZUlkIHRvIGluc2VydCBpbnRvIGFycmF5IG9mIHN0b3JlZCBpZHMKICAgKi8KICBmdW5jdGlvbiB0cnlJbnNlcnRTZXF1ZW5jZUlkKHVpbnQgc2VxdWVuY2VJZCkgb25seXNpZ25lciBwcml2YXRlIHsKICAgIC8vIEtlZXAgYSBwb2ludGVyIHRvIHRoZSBsb3dlc3QgdmFsdWUgZWxlbWVudCBpbiB0aGUgd2luZG93CiAgICB1aW50IGxvd2VzdFZhbHVlSW5kZXggPSAwOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgU0VRVUVOQ0VfSURfV0lORE9XX1NJWkU7IGkrKykgewogICAgICBpZiAocmVjZW50U2VxdWVuY2VJZHNbaV0gPT0gc2VxdWVuY2VJZCkgewogICAgICAgIC8vIFRoaXMgc2VxdWVuY2UgSUQgaGFzIGJlZW4gdXNlZCBiZWZvcmUuIERpc2FsbG93IQogICAgICAgIHRocm93OwogICAgICB9CiAgICAgIGlmIChyZWNlbnRTZXF1ZW5jZUlkc1tpXSA8IHJlY2VudFNlcXVlbmNlSWRzW2xvd2VzdFZhbHVlSW5kZXhdKSB7CiAgICAgICAgbG93ZXN0VmFsdWVJbmRleCA9IGk7CiAgICAgIH0KICAgIH0KICAgIGlmIChzZXF1ZW5jZUlkIDwgcmVjZW50U2VxdWVuY2VJZHNbbG93ZXN0VmFsdWVJbmRleF0pIHsKICAgICAgLy8gVGhlIHNlcXVlbmNlIElEIGJlaW5nIHVzZWQgaXMgbG93ZXIgdGhhbiB0aGUgbG93ZXN0IHZhbHVlIGluIHRoZSB3aW5kb3cKICAgICAgLy8gc28gd2UgY2Fubm90IGFjY2VwdCBpdCBhcyBpdCBtYXkgaGF2ZSBiZWVuIHVzZWQgYmVmb3JlCiAgICAgIHRocm93OwogICAgfQogICAgaWYgKHNlcXVlbmNlSWQgPiAocmVjZW50U2VxdWVuY2VJZHNbbG93ZXN0VmFsdWVJbmRleF0gKyAxMDAwMCkpIHsKICAgICAgLy8gQmxvY2sgc2VxdWVuY2UgSURzIHdoaWNoIGFyZSBtdWNoIGhpZ2hlciB0aGFuIHRoZSBsb3dlc3QgdmFsdWUKICAgICAgLy8gVGhpcyBwcmV2ZW50cyBwZW9wbGUgYmxvY2tpbmcgdGhlIGNvbnRyYWN0IGJ5IHVzaW5nIHZlcnkgbGFyZ2Ugc2VxdWVuY2UgSURzIHF1aWNrbHkKICAgICAgdGhyb3c7CiAgICB9CiAgICByZWNlbnRTZXF1ZW5jZUlkc1tsb3dlc3RWYWx1ZUluZGV4XSA9IHNlcXVlbmNlSWQ7CiAgfQoKICAvKioKICAgKiBHZXRzIHRoZSBuZXh0IGF2YWlsYWJsZSBzZXF1ZW5jZSBJRCBmb3Igc2lnbmluZyB3aGVuIHVzaW5nIGV4ZWN1dGVBbmRDb25maXJtCiAgICogcmV0dXJucyB0aGUgc2VxdWVuY2VJZCBvbmUgaGlnaGVyIHRoYW4gdGhlIGhpZ2hlc3QgY3VycmVudGx5IHN0b3JlZAogICAqLwogIGZ1bmN0aW9uIGdldE5leHRTZXF1ZW5jZUlkKCkgcmV0dXJucyAodWludCkgewogICAgdWludCBoaWdoZXN0U2VxdWVuY2VJZCA9IDA7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBTRVFVRU5DRV9JRF9XSU5ET1dfU0laRTsgaSsrKSB7CiAgICAgIGlmIChyZWNlbnRTZXF1ZW5jZUlkc1tpXSA+IGhpZ2hlc3RTZXF1ZW5jZUlkKSB7CiAgICAgICAgaGlnaGVzdFNlcXVlbmNlSWQgPSByZWNlbnRTZXF1ZW5jZUlkc1tpXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGhpZ2hlc3RTZXF1ZW5jZUlkICsgMTsKICB9Cn0='.
	

]
