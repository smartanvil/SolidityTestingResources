Class {
	#name : #SRTC67a50adFbDD3C8ce6157cd65360047843541175,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTC67a50adFbDD3C8ce6157cd65360047843541175 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CgogIC8qKgogICogQGRldiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZWdlciBkaXZpc2lvbiBvZiB0d28gbnVtYmVycywgdHJ1bmNhdGluZyB0aGUgcXVvdGllbnQuCiAgKi8KICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBTdWJzdHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgQ2xhaW1hYmxlCiAqIEBkZXYgRXh0ZW5zaW9uIGZvciB0aGUgT3duYWJsZSBjb250cmFjdCwgd2hlcmUgdGhlIG93bmVyc2hpcCBuZWVkcyB0byBiZSBjbGFpbWVkLgogKiBUaGlzIGFsbG93cyB0aGUgbmV3IG93bmVyIHRvIGFjY2VwdCB0aGUgdHJhbnNmZXIuCiAqLwpjb250cmFjdCBDbGFpbWFibGUgaXMgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgcGVuZGluZ093bmVyOwoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgcGVuZGluZ093bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlQZW5kaW5nT3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcGVuZGluZ093bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byBzZXQgdGhlIHBlbmRpbmdPd25lciBhZGRyZXNzLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHB1YmxpYyB7CiAgICBwZW5kaW5nT3duZXIgPSBuZXdPd25lcjsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBwZW5kaW5nT3duZXIgYWRkcmVzcyB0byBmaW5hbGl6ZSB0aGUgdHJhbnNmZXIuCiAgICovCiAgZnVuY3Rpb24gY2xhaW1Pd25lcnNoaXAoKSBvbmx5UGVuZGluZ093bmVyIHB1YmxpYyB7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgcGVuZGluZ093bmVyKTsKICAgIG93bmVyID0gcGVuZGluZ093bmVyOwogICAgcGVuZGluZ093bmVyID0gYWRkcmVzcygwKTsKICB9Cn0KCgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBTYWZlRVJDMjAKICogQGRldiBXcmFwcGVycyBhcm91bmQgRVJDMjAgb3BlcmF0aW9ucyB0aGF0IHRocm93IG9uIGZhaWx1cmUuCiAqIFRvIHVzZSB0aGlzIGxpYnJhcnkgeW91IGNhbiBhZGQgYSBgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMDtgIHN0YXRlbWVudCB0byB5b3VyIGNvbnRyYWN0LAogKiB3aGljaCBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIHNhZmUgb3BlcmF0aW9ucyBhcyBgdG9rZW4uc2FmZVRyYW5zZmVyKC4uLilgLCBldGMuCiAqLwpsaWJyYXJ5IFNhZmVFUkMyMCB7CiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyKEVSQzIwQmFzaWMgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi50cmFuc2Zlcih0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oRVJDMjAgdG9rZW4sIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyRnJvbShmcm9tLCB0bywgdmFsdWUpKTsKICB9CgogIGZ1bmN0aW9uIHNhZmVBcHByb3ZlKEVSQzIwIHRva2VuLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi5hcHByb3ZlKHNwZW5kZXIsIHZhbHVlKSk7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBDb250cmFjdHMgdGhhdCBzaG91bGQgYmUgYWJsZSB0byByZWNvdmVyIHRva2VucwogKiBAYXV0aG9yIFN5bFRpCiAqIEBkZXYgVGhpcyBhbGxvdyBhIGNvbnRyYWN0IHRvIHJlY292ZXIgYW55IEVSQzIwIHRva2VuIHJlY2VpdmVkIGluIGEgY29udHJhY3QgYnkgdHJhbnNmZXJyaW5nIHRoZSBiYWxhbmNlIHRvIHRoZSBjb250cmFjdCBvd25lci4KICogVGhpcyB3aWxsIHByZXZlbnQgYW55IGFjY2lkZW50YWwgbG9zcyBvZiB0b2tlbnMuCiAqLwpjb250cmFjdCBDYW5SZWNsYWltVG9rZW4gaXMgT3duYWJsZSB7CiAgdXNpbmcgU2FmZUVSQzIwIGZvciBFUkMyMEJhc2ljOwoKICAvKioKICAgKiBAZGV2IFJlY2xhaW0gYWxsIEVSQzIwQmFzaWMgY29tcGF0aWJsZSB0b2tlbnMKICAgKiBAcGFyYW0gdG9rZW4gRVJDMjBCYXNpYyBUaGUgYWRkcmVzcyBvZiB0aGUgdG9rZW4gY29udHJhY3QKICAgKi8KICBmdW5jdGlvbiByZWNsYWltVG9rZW4oRVJDMjBCYXNpYyB0b2tlbikgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIHRva2VuLnNhZmVUcmFuc2Zlcihvd25lciwgYmFsYW5jZSk7CiAgfQoKfQoKCi8vLyBAZGV2IEltcGxlbWVudHMgYWNjZXNzIGNvbnRyb2wgdG8gdGhlIENocm9ub3MgY29udHJhY3QuCmNvbnRyYWN0IENocm9ub3NBY2Nlc3NDb250cm9sIGlzIENsYWltYWJsZSwgUGF1c2FibGUsIENhblJlY2xhaW1Ub2tlbiB7CiAgICBhZGRyZXNzIHB1YmxpYyBjZm9BZGRyZXNzOwogICAgCiAgICBmdW5jdGlvbiBDaHJvbm9zQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgLy8gVGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0IGlzIHRoZSBpbml0aWFsIENGTy4KICAgICAgICBjZm9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgQWNjZXNzIG1vZGlmaWVyIGZvciBDRk8tb25seSBmdW5jdGlvbmFsaXR5LgogICAgbW9kaWZpZXIgb25seUNGTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2ZvQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDRk8uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IGNvbnRyYWN0IG93bmVyLgogICAgLy8vIEBwYXJhbSBfbmV3Q0ZPIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgQ0ZPLgogICAgZnVuY3Rpb24gc2V0Q0ZPKGFkZHJlc3MgX25ld0NGTykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9uZXdDRk8gIT0gYWRkcmVzcygwKSk7CgogICAgICAgIGNmb0FkZHJlc3MgPSBfbmV3Q0ZPOwogICAgfQp9CgoKLy8vIEBkZXYgRGVmaW5lcyBiYXNlIGRhdGEgc3RydWN0dXJlcyBmb3IgQ2hyb25vcy4KY29udHJhY3QgQ2hyb25vc0Jhc2UgaXMgQ2hyb25vc0FjY2Vzc0NvbnRyb2wgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAKICAgIC8vLyBAbm90aWNlIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIGEgZ2FtZSBpcyBsaXZlLgogICAgYm9vbCBwdWJsaWMgZ2FtZVN0YXJ0ZWQ7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBwbGF5ZXIgd2hvIHN0YXJ0ZWQgdGhlIGdhbWUuCiAgICBhZGRyZXNzIHB1YmxpYyBnYW1lU3RhcnRlcjsKICAgIAogICAgLy8vIEBub3RpY2UgVGhlIGxhc3QgcGxheWVyIHRvIGhhdmUgZW50ZXJlZC4KICAgIGFkZHJlc3MgcHVibGljIGxhc3RQbGF5ZXI7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSB0aW1lc3RhbXAgdGhlIGxhc3Qgd2FnZXIgdGltZXMgb3V0LgogICAgdWludDI1NiBwdWJsaWMgbGFzdFdhZ2VyVGltZW91dFRpbWVzdGFtcDsKCiAgICAvLy8gQG5vdGljZSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgYmVmb3JlIHRoZSBnYW1lIGVuZHMuCiAgICB1aW50MjU2IHB1YmxpYyB0aW1lb3V0OwogICAgCiAgICAvLy8gQG5vdGljZSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgYmVmb3JlIHRoZSBnYW1lIGVuZHMgLS0gc2V0dGluZwogICAgLy8vIGZvciB0aGUgbmV4dCBnYW1lLgogICAgdWludDI1NiBwdWJsaWMgbmV4dFRpbWVvdXQ7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBtaW5pbXVtIG51bWJlciBvZiBzZWNvbmRzIGJlZm9yZSB0aGUgZ2FtZSBlbmRzLgogICAgdWludDI1NiBwdWJsaWMgbWluaW11bVRpbWVvdXQ7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBtaW5tdW0gbnVtYmVyIG9mIHNlY29uZHMgYmVmb3JlIHRoZSBnYW1lIGVuZHMgLS0KICAgIC8vLyBzZXR0aW5nIGZvciB0aGUgbmV4dCBnYW1lLgogICAgdWludDI1NiBwdWJsaWMgbmV4dE1pbmltdW1UaW1lb3V0OwogICAgCiAgICAvLy8gQG5vdGljZSBUaGUgbnVtYmVyIG9mIHdhZ2VycyByZXF1aXJlZCB0byBtb3ZlIHRvIHRoZQogICAgLy8vIG1pbmltdW0gdGltZW91dC4KICAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dDsKICAgIAogICAgLy8vIEBub3RpY2UgVGhlIG51bWJlciBvZiB3YWdlcnMgcmVxdWlyZWQgdG8gbW92ZSB0byB0aGUKICAgIC8vLyBtaW5pbXVtIHRpbWVvdXQgLS0gc2V0dGluZyBmb3IgdGhlIG5leHQgZ2FtZS4KICAgIHVpbnQyNTYgcHVibGljIG5leHROdW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQ7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSB3YWdlciBpbmRleCBvZiB0aGUgdGhlIGN1cnJlbnQgd2FnZXIgaW4gdGhlIGdhbWUuCiAgICB1aW50MjU2IHB1YmxpYyB3YWdlckluZGV4ID0gMDsKICAgIAogICAgLy8vIEBub3RpY2UgQ2FsY3VsYXRlIHRoZSBjdXJyZW50IGdhbWUncyB0aW1lb3V0LgogICAgZnVuY3Rpb24gY2FsY3VsYXRlVGltZW91dCgpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NikgewogICAgICAgIGlmICh3YWdlckluZGV4ID49IG51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dCB8fCBudW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbWluaW11bVRpbWVvdXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVGhpcyBjYW5ub3QgdW5kZXJmbG93LCBhcyB0aW1lb3V0IGlzIGd1YXJhbnRlZWQgdG8gYmUKICAgICAgICAgICAgLy8gZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIG1pbmltdW1UaW1lb3V0LgogICAgICAgICAgICB1aW50MjU2IGRpZmZlcmVuY2UgPSB0aW1lb3V0IC0gbWluaW11bVRpbWVvdXQ7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRlY3JlYXNlIGluIHRpbWVvdXQsIGJhc2VkIG9uIHRoZSBudW1iZXIgb2Ygd2FnZXJzIHBlcmZvcm1lZC4KICAgICAgICAgICAgdWludDI1NiBkZWNyZWFzZSA9IGRpZmZlcmVuY2UubXVsKHdhZ2VySW5kZXgpLmRpdihudW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVGhpcyBzdWJ0cmFjdGlvbiBjYW5ub3QgdW5kZXJmbG93LCBhcyBkZWNyZWFzZSBpcyBndWFyYW50ZWVkIHRvIGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aW1lb3V0LiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gKHRpbWVvdXQgLSBkZWNyZWFzZSk7CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBQdWxsUGF5bWVudAogKiBAZGV2IEJhc2UgY29udHJhY3Qgc3VwcG9ydGluZyBhc3luYyBzZW5kIGZvciBwdWxsIHBheW1lbnRzLiBJbmhlcml0IGZyb20gdGhpcwogKiBjb250cmFjdCBhbmQgdXNlIGFzeW5jU2VuZCBpbnN0ZWFkIG9mIHNlbmQuCiAqLwpjb250cmFjdCBQdWxsUGF5bWVudCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgcGF5bWVudHM7CiAgdWludDI1NiBwdWJsaWMgdG90YWxQYXltZW50czsKCiAgLyoqCiAgKiBAZGV2IHdpdGhkcmF3IGFjY3VtdWxhdGVkIGJhbGFuY2UsIGNhbGxlZCBieSBwYXllZS4KICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3UGF5bWVudHMoKSBwdWJsaWMgewogICAgYWRkcmVzcyBwYXllZSA9IG1zZy5zZW5kZXI7CiAgICB1aW50MjU2IHBheW1lbnQgPSBwYXltZW50c1twYXllZV07CgogICAgcmVxdWlyZShwYXltZW50ICE9IDApOwogICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gcGF5bWVudCk7CgogICAgdG90YWxQYXltZW50cyA9IHRvdGFsUGF5bWVudHMuc3ViKHBheW1lbnQpOwogICAgcGF5bWVudHNbcGF5ZWVdID0gMDsKCiAgICBhc3NlcnQocGF5ZWUuc2VuZChwYXltZW50KSk7CiAgfQoKICAvKioKICAqIEBkZXYgQ2FsbGVkIGJ5IHRoZSBwYXllciB0byBzdG9yZSB0aGUgc2VudCBhbW91bnQgYXMgY3JlZGl0IHRvIGJlIHB1bGxlZC4KICAqIEBwYXJhbSBkZXN0IFRoZSBkZXN0aW5hdGlvbiBhZGRyZXNzIG9mIHRoZSBmdW5kcy4KICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0byB0cmFuc2Zlci4KICAqLwogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CiAgICBwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwogICAgdG90YWxQYXltZW50cyA9IHRvdGFsUGF5bWVudHMuYWRkKGFtb3VudCk7CiAgfQp9CgoKLy8vIEBkZXYgRGVmaW5lcyBiYXNlIGZpbmFuY2UgZnVuY3Rpb25hbGl0eSBmb3IgQ2hyb25vcy4KY29udHJhY3QgQ2hyb25vc0ZpbmFuY2UgaXMgQ2hyb25vc0Jhc2UsIFB1bGxQYXltZW50IHsKICAgIC8vLyBAbm90aWNlIFRoZSBkZXYgZmVlIGluIDEvMTAwMHRoCiAgICAvLy8gb2YgYSBwZXJjZW50YWdlLgogICAgdWludDI1NiBwdWJsaWMgZmVlUGVyY2VudGFnZSA9IDI1MDA7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBnYW1lIHN0YXJ0ZXIgZmVlLgogICAgdWludDI1NiBwdWJsaWMgZ2FtZVN0YXJ0ZXJEaXZpZGVuZFBlcmNlbnRhZ2UgPSAxMDAwOwogICAgCiAgICAvLy8gQG5vdGljZSBUaGUgd2FnZXIgcHJpY2UuCiAgICB1aW50MjU2IHB1YmxpYyBwcmljZTsKICAgIAogICAgLy8vIEBub3RpY2UgVGhlIHdhZ2VyIHByaWNlIC0tIHNldHRpbmcgZm9yIHRoZSBuZXh0IGdhbWUuCiAgICB1aW50MjU2IHB1YmxpYyBuZXh0UHJpY2U7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBjdXJyZW50IHByaXplIHBvb2wgKGluIHdlaSkuCiAgICB1aW50MjU2IHB1YmxpYyBwcml6ZVBvb2w7CiAgICAKICAgIC8vLyBAbm90aWNlIFRoZSBjdXJyZW50IDd0aCB3YWdlciBwb29sIChpbiB3ZWkpLgogICAgdWludDI1NiBwdWJsaWMgd2FnZXJQb29sOwogICAgCiAgICAvLy8gQG5vdGljZSBTZXRzIGEgbmV3IGdhbWUgc3RhcnRlciBkaXZpZGVuZCBwZXJjZW50YWdlLgogICAgLy8vIEBwYXJhbSBfZ2FtZVN0YXJ0ZXJEaXZpZGVuZFBlcmNlbnRhZ2UgVGhlIG5ldyBnYW1lIHN0YXJ0ZXIgZGl2aWRlbmQgcGVyY2VudGFnZS4KICAgIGZ1bmN0aW9uIHNldEdhbWVTdGFydGVkRGl2aWRlbmRQZXJjZW50YWdlKHVpbnQyNTYgX2dhbWVTdGFydGVyRGl2aWRlbmRQZXJjZW50YWdlKSBleHRlcm5hbCBvbmx5Q0ZPIHsKICAgICAgICAvLyBHYW1lIHN0YXJ0ZWQgZGl2aWRlbmQgcGVyY2VudGFnZSBtdXN0IGJlIDAuNSUgYXQgbGVhc3QgYW5kIDQlIGF0IHRoZSBtb3N0LgogICAgICAgIHJlcXVpcmUoNTAwIDw9IF9nYW1lU3RhcnRlckRpdmlkZW5kUGVyY2VudGFnZSAmJiBfZ2FtZVN0YXJ0ZXJEaXZpZGVuZFBlcmNlbnRhZ2UgPD0gNDAwMCk7CiAgICAgICAgCiAgICAgICAgZ2FtZVN0YXJ0ZXJEaXZpZGVuZFBlcmNlbnRhZ2UgPSBfZ2FtZVN0YXJ0ZXJEaXZpZGVuZFBlcmNlbnRhZ2U7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFNlbmQgZnVuZHMgdG8gYSBiZW5lZmljaWFyeS4gSWYgc2VuZGluZyBmYWlscywgYXNzaWduCiAgICAvLy8gZnVuZHMgdG8gdGhlIGJlbmVmaWNpYXJ5J3MgYmFsYW5jZSBmb3IgbWFudWFsIHdpdGhkcmF3YWwuCiAgICAvLy8gQHBhcmFtIGJlbmVmaWNpYXJ5IFRoZSBiZW5lZmljaWFyeSdzIGFkZHJlc3MgdG8gc2VuZCBmdW5kcyB0bwogICAgLy8vIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0byBzZW5kLgogICAgZnVuY3Rpb24gX3NlbmRGdW5kcyhhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIGlmICghYmVuZWZpY2lhcnkuc2VuZChhbW91bnQpKSB7CiAgICAgICAgICAgIC8vIEZhaWxlZCB0byBzZW5kIGZ1bmRzLiBUaGlzIGNhbiBoYXBwZW4gZHVlIHRvIGEgZmFpbHVyZSBpbgogICAgICAgICAgICAvLyBmYWxsYmFjayBjb2RlIG9mIHRoZSBiZW5lZmljaWFyeSwgb3IgYmVjYXVzZSBvZiBjYWxsc3RhY2sKICAgICAgICAgICAgLy8gZGVwdGguCiAgICAgICAgICAgIC8vIFNlbmQgZnVuZHMgYXN5bmNocm9ub3VzbHkgZm9yIG1hbnVhbCB3aXRoZHJhd2FsIGJ5IHRoZQogICAgICAgICAgICAvLyBiZW5lZmljaWFyeS4KICAgICAgICAgICAgYXN5bmNTZW5kKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8vIEBub3RpY2UgV2l0aGRyYXcgKHVub3dlZCkgY29udHJhY3QgYmFsYW5jZS4KICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnJlZUJhbGFuY2UoKSBleHRlcm5hbCBvbmx5Q0ZPIHsKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGZyZWUgKHVub3dlZCkgYmFsYW5jZS4KICAgICAgICB1aW50MjU2IGZyZWVCYWxhbmNlID0gdGhpcy5iYWxhbmNlLnN1Yih0b3RhbFBheW1lbnRzKS5zdWIocHJpemVQb29sKS5zdWIod2FnZXJQb29sKTsKICAgICAgICAKICAgICAgICBjZm9BZGRyZXNzLnRyYW5zZmVyKGZyZWVCYWxhbmNlKTsKICAgIH0KfQoKCi8vLyBAZGV2IERlZmluZXMgY29yZSBDaHJvbm9zIGZ1bmN0aW9uYWxpdHkuCmNvbnRyYWN0IENocm9ub3NDb3JlIGlzIENocm9ub3NGaW5hbmNlIHsKICAgIAogICAgZnVuY3Rpb24gQ2hyb25vc0NvcmUodWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX3RpbWVvdXQsIHVpbnQyNTYgX21pbmltdW1UaW1lb3V0LCB1aW50MjU2IF9udW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdGltZW91dCA+PSBfbWluaW11bVRpbWVvdXQpOwogICAgICAgIAogICAgICAgIG5leHRQcmljZSA9IF9wcmljZTsKICAgICAgICBuZXh0VGltZW91dCA9IF90aW1lb3V0OwogICAgICAgIG5leHRNaW5pbXVtVGltZW91dCA9IF9taW5pbXVtVGltZW91dDsKICAgICAgICBuZXh0TnVtYmVyT2ZXYWdlcnNUb01pbmltdW1UaW1lb3V0ID0gX251bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dDsKICAgICAgICBOZXh0R2FtZShuZXh0UHJpY2UsIG5leHRUaW1lb3V0LCBuZXh0TWluaW11bVRpbWVvdXQsIG5leHROdW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQpOwogICAgfQogICAgCiAgICBldmVudCBOZXh0R2FtZSh1aW50MjU2IHByaWNlLCB1aW50MjU2IHRpbWVvdXQsIHVpbnQyNTYgbWluaW11bVRpbWVvdXQsIHVpbnQyNTYgbnVtYmVyT2ZXYWdlcnNUb01pbmltdW1UaW1lb3V0KTsKICAgIGV2ZW50IFN0YXJ0KGFkZHJlc3MgaW5kZXhlZCBzdGFydGVyLCB1aW50MjU2IHRpbWVzdGFtcCwgdWludDI1NiBwcmljZSwgdWludDI1NiB0aW1lb3V0LCB1aW50MjU2IG1pbmltdW1UaW1lb3V0LCB1aW50MjU2IG51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dCk7CiAgICBldmVudCBFbmQoYWRkcmVzcyBpbmRleGVkIHdpbm5lciwgdWludDI1NiB0aW1lc3RhbXAsIHVpbnQyNTYgcHJpemUpOwogICAgZXZlbnQgUGxheShhZGRyZXNzIGluZGV4ZWQgcGxheWVyLCB1aW50MjU2IHRpbWVzdGFtcCwgdWludDI1NiB0aW1lb3V0VGltZXN0YW1wLCB1aW50MjU2IHdhZ2VySW5kZXgsIHVpbnQyNTYgbmV3UHJpemVQb29sKTsKICAgIAogICAgLy8vIEBub3RpY2UgUGFydGljaXBhdGUgaW4gdGhlIGdhbWUuCiAgICAvLy8gQHBhcmFtIHN0YXJ0TmV3R2FtZUlmSWRsZSBTdGFydCBhIG5ldyBnYW1lIGlmIHRoZSBjdXJyZW50IGdhbWUgaXMgaWRsZS4KICAgIGZ1bmN0aW9uIHBsYXkoYm9vbCBzdGFydE5ld0dhbWVJZklkbGUpIGV4dGVybmFsIHBheWFibGUgewogICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgZ2FtZSBzaG91bGQgZW5kLiBQcm9jZXNzIHBheW1lbnQuCiAgICAgICAgX3Byb2Nlc3NHYW1lRW5kKCk7CiAgICAgICAgCiAgICAgICAgaWYgKCFnYW1lU3RhcnRlZCkgewogICAgICAgICAgICAvLyBJZiB0aGUgZ2FtZSBpcyBub3Qgc3RhcnRlZCwgdGhlIGNvbnRyYWN0IG11c3Qgbm90IGJlIHBhdXNlZC4KICAgICAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIElmIHRoZSBnYW1lIGlzIG5vdCBzdGFydGVkLCB0aGUgcGxheWVyIG11c3QgYmUgd2lsbGluZyB0byBzdGFydAogICAgICAgICAgICAvLyBhIG5ldyBnYW1lLgogICAgICAgICAgICByZXF1aXJlKHN0YXJ0TmV3R2FtZUlmSWRsZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXQgdGhlIHByaWNlIGFuZCB0aW1lb3V0LgogICAgICAgICAgICBwcmljZSA9IG5leHRQcmljZTsKICAgICAgICAgICAgdGltZW91dCA9IG5leHRUaW1lb3V0OwogICAgICAgICAgICBtaW5pbXVtVGltZW91dCA9IG5leHRNaW5pbXVtVGltZW91dDsKICAgICAgICAgICAgbnVtYmVyT2ZXYWdlcnNUb01pbmltdW1UaW1lb3V0ID0gbmV4dE51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dDsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBnYW1lLgogICAgICAgICAgICBnYW1lU3RhcnRlZCA9IHRydWU7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXQgdGhlIGdhbWUgc3RhcnRlci4KICAgICAgICAgICAgZ2FtZVN0YXJ0ZXIgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRW1pdCBzdGFydCBldmVudC4KICAgICAgICAgICAgU3RhcnQobXNnLnNlbmRlciwgYmxvY2sudGltZXN0YW1wLCBwcmljZSwgdGltZW91dCwgbWluaW11bVRpbWVvdXQsIG51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEVub3VnaCBFdGhlciBtdXN0IGJlIHN1cHBsaWVkLgogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgICAgICAKICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGZlZXMgYW5kIGRpdmlkZW5kcy4KICAgICAgICB1aW50MjU2IGZlZSA9IHByaWNlLm11bChmZWVQZXJjZW50YWdlKS5kaXYoMTAwMDAwKTsKICAgICAgICB1aW50MjU2IGRpdmlkZW5kID0gcHJpY2UubXVsKGdhbWVTdGFydGVyRGl2aWRlbmRQZXJjZW50YWdlKS5kaXYoMTAwMDAwKTsKICAgICAgICB1aW50MjU2IHdhZ2VyUG9vbFBhcnQgPSBwcmljZS5tdWwoMikuZGl2KDcpOwogICAgICAgIAogICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdGltZW91dC4KICAgICAgICB1aW50MjU2IGN1cnJlbnRUaW1lb3V0ID0gY2FsY3VsYXRlVGltZW91dCgpOwogICAgICAgIAogICAgICAgIC8vIFNldCB0aGUgbGFzdCBwbGF5ZXIsIHRpbWVzdGFtcCwgdGltZW91dCB0aW1lc3RhbXAsIGFuZCBpbmNyZWFzZSBwcml6ZS4KICAgICAgICBsYXN0UGxheWVyID0gbXNnLnNlbmRlcjsKICAgICAgICBsYXN0V2FnZXJUaW1lb3V0VGltZXN0YW1wID0gYmxvY2sudGltZXN0YW1wICsgY3VycmVudFRpbWVvdXQ7CiAgICAgICAgcHJpemVQb29sID0gcHJpemVQb29sLmFkZChwcmljZS5zdWIoZmVlKS5zdWIoZGl2aWRlbmQpLnN1Yih3YWdlclBvb2xQYXJ0KSk7CiAgICAgICAgCiAgICAgICAgLy8gRW1pdCBldmVudC4KICAgICAgICBQbGF5KG1zZy5zZW5kZXIsIGJsb2NrLnRpbWVzdGFtcCwgbGFzdFdhZ2VyVGltZW91dFRpbWVzdGFtcCwgd2FnZXJJbmRleCwgcHJpemVQb29sKTsKICAgICAgICAKICAgICAgICAvLyBTZW5kIHRoZSBnYW1lIHN0YXJ0ZXIgZGl2aWRlbmQuCiAgICAgICAgX3NlbmRGdW5kcyhnYW1lU3RhcnRlciwgZGl2aWRlbmQpOwogICAgICAgIAogICAgICAgIC8vIEdpdmUgdGhlIHdhZ2VyIHByaWNlIGV2ZXJ5IDd0aCB3YWdlci4KICAgICAgICBpZiAod2FnZXJJbmRleCA+IDAgJiYgKHdhZ2VySW5kZXggJSA3KSA9PSAwKSB7CiAgICAgICAgICAgIC8vIEdpdmUgdGhlIHdhZ2VyIHByaXplIHRvIHRoZSBzZW5kZXIuCiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2FnZXJQb29sKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB3YWdlciBwb29sLgogICAgICAgICAgICB3YWdlclBvb2wgPSAwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBBZGQgZnVuZHMgdG8gdGhlIHdhZ2VyIHBvb2wuCiAgICAgICAgd2FnZXJQb29sID0gd2FnZXJQb29sLmFkZCh3YWdlclBvb2xQYXJ0KTsKICAgICAgICAKICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIHdhZ2VyIGluZGV4LgogICAgICAgIHdhZ2VySW5kZXggPSB3YWdlckluZGV4LmFkZCgxKTsKICAgICAgICAKICAgICAgICAvLyBSZWZ1bmQgYW55IGV4Y2VzcyBFdGhlciBzZW50LgogICAgICAgIC8vIFRoaXMgc3VidHJhY3Rpb24gbmV2ZXIgdW5kZXJmbG93cywgYXMgbXNnLnZhbHVlIGlzIGd1YXJhbnRlZWQKICAgICAgICAvLyB0byBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gcHJpY2UuCiAgICAgICAgdWludDI1NiBleGNlc3MgPSBtc2cudmFsdWUgLSBwcmljZTsKICAgICAgICAKICAgICAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLy8gQG5vdGljZSBTZXQgdGhlIHBhcmFtZXRlcnMgZm9yIHRoZSBuZXh0IGdhbWUuCiAgICAvLy8gQHBhcmFtIF9wcmljZSBUaGUgcHJpY2Ugb2Ygd2FnZXJzIGZvciB0aGUgbmV4dCBnYW1lLgogICAgLy8vIEBwYXJhbSBfdGltZW91dCBUaGUgdGltZW91dCBpbiBzZWNvbmRzIGZvciB0aGUgbmV4dCBnYW1lLgogICAgLy8vIEBwYXJhbSBfbWluaW11bVRpbWVvdXQgVGhlIG1pbmltdW0gdGltZW91dCBpbiBzZWNvbmRzIGZvcgogICAgLy8vIHRoZSBuZXh0IGdhbWUuCiAgICAvLy8gQHBhcmFtIF9udW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQgVGhlIG51bWJlciBvZiB3YWdlcnMKICAgIC8vLyByZXF1aXJlZCB0byBtb3ZlIHRvIHRoZSBtaW5pbXVtIHRpbWVvdXQgZm9yIHRoZSBuZXh0IGdhbWUuCiAgICBmdW5jdGlvbiBzZXROZXh0R2FtZSh1aW50MjU2IF9wcmljZSwgdWludDI1NiBfdGltZW91dCwgdWludDI1NiBfbWluaW11bVRpbWVvdXQsIHVpbnQyNTYgX251bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dCkgZXh0ZXJuYWwgb25seUNGTyB7CiAgICAgICAgcmVxdWlyZShfdGltZW91dCA+PSBfbWluaW11bVRpbWVvdXQpOwogICAgCiAgICAgICAgbmV4dFByaWNlID0gX3ByaWNlOwogICAgICAgIG5leHRUaW1lb3V0ID0gX3RpbWVvdXQ7CiAgICAgICAgbmV4dE1pbmltdW1UaW1lb3V0ID0gX21pbmltdW1UaW1lb3V0OwogICAgICAgIG5leHROdW1iZXJPZldhZ2Vyc1RvTWluaW11bVRpbWVvdXQgPSBfbnVtYmVyT2ZXYWdlcnNUb01pbmltdW1UaW1lb3V0OwogICAgICAgIE5leHRHYW1lKG5leHRQcmljZSwgbmV4dFRpbWVvdXQsIG5leHRNaW5pbXVtVGltZW91dCwgbmV4dE51bWJlck9mV2FnZXJzVG9NaW5pbXVtVGltZW91dCk7CiAgICB9IAogICAgCiAgICAvLy8gQG5vdGljZSBFbmQgdGhlIGdhbWUuIFBheSBwcml6ZS4KICAgIGZ1bmN0aW9uIGVuZEdhbWUoKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfcHJvY2Vzc0dhbWVFbmQoKSk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IEVuZCB0aGUgZ2FtZS4gUGF5IHByaXplLgogICAgZnVuY3Rpb24gX3Byb2Nlc3NHYW1lRW5kKCkgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKCFnYW1lU3RhcnRlZCkgewogICAgICAgICAgICAvLyBObyBnYW1lIGlzIHN0YXJ0ZWQuCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAKICAgICAgICBpZiAoYmxvY2sudGltZXN0YW1wIDw9IGxhc3RXYWdlclRpbWVvdXRUaW1lc3RhbXApIHsKICAgICAgICAgICAgLy8gVGhlIGdhbWUgaGFzIG5vdCB5ZXQgZmluaXNoZWQuCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwcml6ZS4gQW55IGxlZnRvdmVyIGZ1bmRzIGZvciB0aGUKICAgICAgICAvLyA3dGggd2FnZXIgcHJpemUgaXMgYWRkZWQgdG8gdGhlIHByaXplIHBvb2wuCiAgICAgICAgdWludDI1NiBwcml6ZSA9IHByaXplUG9vbC5hZGQod2FnZXJQb29sKTsKICAgICAgICAKICAgICAgICAvLyBUaGUgZ2FtZSBoYXMgZmluaXNoZWQuIFBheSB0aGUgcHJpemUgdG8gdGhlIGxhc3QgcGxheWVyLgogICAgICAgIF9zZW5kRnVuZHMobGFzdFBsYXllciwgcHJpemUpOwogICAgICAgIAogICAgICAgIC8vIEVtaXQgZXZlbnQuCiAgICAgICAgRW5kKGxhc3RQbGF5ZXIsIGxhc3RXYWdlclRpbWVvdXRUaW1lc3RhbXAsIHByaXplKTsKICAgICAgICAKICAgICAgICAvLyBSZXNldCB0aGUgZ2FtZS4KICAgICAgICBnYW1lU3RhcnRlZCA9IGZhbHNlOwogICAgICAgIGdhbWVTdGFydGVyID0gMHgwOwogICAgICAgIGxhc3RQbGF5ZXIgPSAweDA7CiAgICAgICAgbGFzdFdhZ2VyVGltZW91dFRpbWVzdGFtcCA9IDA7CiAgICAgICAgd2FnZXJJbmRleCA9IDA7CiAgICAgICAgcHJpemVQb29sID0gMDsKICAgICAgICB3YWdlclBvb2wgPSAwOwogICAgICAgIAogICAgICAgIC8vIEluZGljYXRlIGVuZGluZyB0aGUgZ2FtZSB3YXMgc3VjY2Vzc2Z1bC4KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
