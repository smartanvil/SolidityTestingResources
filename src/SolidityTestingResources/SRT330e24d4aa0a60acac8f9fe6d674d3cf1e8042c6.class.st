Class {
	#name : #SRT330e24d4aa0a60acac8f9fe6d674d3cf1e8042c6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT330e24d4aa0a60acac8f9fe6d674d3cf1e8042c6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CmNvbnRyYWN0IFRva2VuIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CmNvbnRyYWN0IExvY2FsRXRoZXJldW1Fc2Nyb3dzIHsKICAgIC8vIFRoZSBhZGRyZXNzIG9mIHRoZSBhcmJpdHJhdG9yCiAgICAvLyBJbiB0aGUgZmlyc3QgdmVyc2lvbiwgdGhpcyBpcyBhbHdheXMgbG9jYWxldGhlcmV1bSBzdGFmZi4KICAgIGFkZHJlc3MgcHVibGljIGFyYml0cmF0b3I7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIHJlbGF5ZXI7CiAgICB1aW50MzIgcHVibGljIHJlcXVlc3RDYW5jZWxsYXRpb25NaW5pbXVtVGltZTsKICAgIHVpbnQyNTYgcHVibGljIGZlZXNBdmFpbGFibGVGb3JXaXRoZHJhdzsKCiAgICB1aW50OCBjb25zdGFudCBBQ1RJT05fU0VMTEVSX0NBTk5PVF9DQU5DRUwgPSAweDAxOyAvLyBDYWxsZWQgd2hlbiBtYXJraW5nIGFzIHBhaWQgb3IgY2FsbGluZyBhIGRpc3B1dGUgYXMgdGhlIGJ1eWVyCiAgICB1aW50OCBjb25zdGFudCBBQ1RJT05fQlVZRVJfQ0FOQ0VMID0gMHgwMjsKICAgIHVpbnQ4IGNvbnN0YW50IEFDVElPTl9TRUxMRVJfQ0FOQ0VMID0gMHgwMzsKICAgIHVpbnQ4IGNvbnN0YW50IEFDVElPTl9TRUxMRVJfUkVRVUVTVF9DQU5DRUwgPSAweDA0OwogICAgdWludDggY29uc3RhbnQgQUNUSU9OX1JFTEVBU0UgPSAweDA1OwogICAgdWludDggY29uc3RhbnQgQUNUSU9OX0RJU1BVVEUgPSAweDA2OwoKICAgIGV2ZW50IENyZWF0ZWQoYnl0ZXMzMiBfdHJhZGVIYXNoKTsKICAgIGV2ZW50IFNlbGxlckNhbmNlbERpc2FibGVkKGJ5dGVzMzIgX3RyYWRlSGFzaCk7CiAgICBldmVudCBTZWxsZXJSZXF1ZXN0ZWRDYW5jZWwoYnl0ZXMzMiBfdHJhZGVIYXNoKTsKICAgIGV2ZW50IENhbmNlbGxlZEJ5U2VsbGVyKGJ5dGVzMzIgX3RyYWRlSGFzaCk7CiAgICBldmVudCBDYW5jZWxsZWRCeUJ1eWVyKGJ5dGVzMzIgX3RyYWRlSGFzaCk7CiAgICBldmVudCBSZWxlYXNlZChieXRlczMyIF90cmFkZUhhc2gpOwogICAgZXZlbnQgRGlzcHV0ZVJlc29sdmVkKGJ5dGVzMzIgX3RyYWRlSGFzaCk7CgogICAgc3RydWN0IEVzY3JvdyB7CiAgICAgICAgLy8gU2V0IHNvIHdlIGtub3cgdGhlIHRyYWRlIGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZAogICAgICAgIGJvb2wgZXhpc3RzOwogICAgICAgIC8vIFRoZSB0aW1lc3RhbXAgaW4gd2hpY2ggdGhlIHNlbGxlciBjYW4gY2FuY2VsIHRoZSB0cmFkZSBpZiB0aGUgYnV5ZXIgaGFzIG5vdCB5ZXQgbWFya2VkIGFzIHBhaWQuIFNldCB0byAwIG9uIG1hcmtlZCBwYWlkIG9yIGRpc3B1dGUKICAgICAgICAvLyAxID0gdW5saW1pdGVkIGNhbmNlbCB0aW1lCiAgICAgICAgdWludDMyIHNlbGxlckNhbkNhbmNlbEFmdGVyOwogICAgICAgIC8vIFRoZSB0b3RhbCBjb3N0IG9mIGdhcyBzcGVudCBieSByZWxheWluZyBwYXJ0aWVzLiBUaGlzIGFtb3VudCB3aWxsIGJlCiAgICAgICAgLy8gcmVmdW5kZWQvcGFpZCB0byBsb2NhbGV0aGVyZXVtLmNvbSBvbmNlIHRoZSBlc2Nyb3cgaXMgZmluaXNoZWQuCiAgICAgICAgdWludDEyOCB0b3RhbEdhc0ZlZXNTcGVudEJ5UmVsYXllcjsKICAgIH0KICAgIC8vIE1hcHBpbmcgb2YgYWN0aXZlIHRyYWRlcy4gS2V5IGlzIGEgaGFzaCBvZiB0aGUgdHJhZGUgZGF0YQogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiBFc2Nyb3cpIHB1YmxpYyBlc2Nyb3dzOwoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFyYml0cmF0b3IoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFyYml0cmF0b3IpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmVsYXllZFNlbmRlcigKICAgICAgYnl0ZXMxNiBfdHJhZGVJRCwgLy8gVGhlIHVuaXF1ZSBJRCBvZiB0aGUgdHJhZGUsIGdlbmVyYXRlZCBieSBsb2NhbGV0aGVyZXVtLmNvbQogICAgICB1aW50OCBfYWN0aW9uQnl0ZSwgLy8gVGhlIGRlc2lyZWQgYWN0aW9uIG9mIHRoZSB1c2VyLCBtYXRjaGluZyBhbiBBQ1RJT05fKiBjb25zdGFudAogICAgICB1aW50MTI4IF9tYXhpbXVtR2FzUHJpY2UsIC8vIFRoZSBtYXhpbXVtIGdhcyBwcmljZSB0aGUgdXNlciBpcyB3aWxsaW5nIHRvIHBheQogICAgICB1aW50OCBfdiwgLy8gU2lnbmF0dXJlIHZhbHVlCiAgICAgIGJ5dGVzMzIgX3IsIC8vIFNpZ25hdHVyZSB2YWx1ZQogICAgICBieXRlczMyIF9zIC8vIFNpZ25hdHVyZSB2YWx1ZQogICAgKSB2aWV3IHByaXZhdGUgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGJ5dGVzMzIgX2hhc2ggPSBrZWNjYWsyNTYoX3RyYWRlSUQsIF9hY3Rpb25CeXRlLCBfbWF4aW11bUdhc1ByaWNlKTsKICAgICAgICBpZih0eC5nYXNwcmljZSA+IF9tYXhpbXVtR2FzUHJpY2UpIHJldHVybjsKICAgICAgICByZXR1cm4gZWNyZWNvdmVyKF9oYXNoLCBfdiwgX3IsIF9zKTsKICAgIH0KCiAgICBmdW5jdGlvbiBMb2NhbEV0aGVyZXVtRXNjcm93cygpIHB1YmxpYyB7CiAgICAgICAgLyoqCiAgICAgICAgICogSW5pdGlhbGl6ZSB0aGUgY29udHJhY3QuCiAgICAgICAgICovCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGFyYml0cmF0b3IgPSBtc2cuc2VuZGVyOwogICAgICAgIHJlbGF5ZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHJlcXVlc3RDYW5jZWxsYXRpb25NaW5pbXVtVGltZSA9IDIgaG91cnM7IC8vIFRPRE8KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFc2Nyb3dBbmRIYXNoKAogICAgICAvKioKICAgICAgICogSGFzaGVzIHRoZSB2YWx1ZXMgYW5kIHJldHVybnMgdGhlIG1hdGNoaW5nIGVzY3JvdyBvYmplY3QgYW5kIHRyYWRlIGhhc2guCiAgICAgICAqIFJldHVybnMgYW4gZW1wdHkgZXNjcm93IHN0cnVjdCBhbmQgMCBfdHJhZGVIYXNoIGlmIG5vdCBmb3VuZAogICAgICAgKi8KICAgICAgYnl0ZXMxNiBfdHJhZGVJRCwKICAgICAgYWRkcmVzcyBfc2VsbGVyLAogICAgICBhZGRyZXNzIF9idXllciwKICAgICAgdWludDI1NiBfdmFsdWUsCiAgICAgIHVpbnQxNiBfZmVlCiAgICApIHZpZXcgcHJpdmF0ZSByZXR1cm5zIChFc2Nyb3csIGJ5dGVzMzIpIHsKICAgICAgICBieXRlczMyIF90cmFkZUhhc2ggPSBrZWNjYWsyNTYoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlKTsKICAgICAgICByZXR1cm4gKGVzY3Jvd3NbX3RyYWRlSGFzaF0sIF90cmFkZUhhc2gpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZUVzY3JvdygKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZSBhIG5ldyBlc2Nyb3cgYW5kIGFkZCBpdCB0byBgZXNjcm93c2AuCiAgICAgICAqIF90cmFkZUhhc2ggaXMgY3JlYXRlZCBieSBoYXNoaW5nIF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSBhbmQgX2ZlZSB2YXJpYWJsZXMuIFRoZXNlIHZhcmlhYmxlcyBtdXN0IGJlIHN1cHBsaWVkIG9uIGZ1dHVyZSBjb250cmFjdCBjYWxscy4KICAgICAgICogdiwgciBhbmQgcyBpcyB0aGUgc2lnbmF0dXJlIGRhdGEgc3VwcGxpZWQgZnJvbSB0aGUgYXBpLiBUaGUgc2lnIGlzIGtlY2NhazI1NihfdHJhZGVIYXNoLCBfcGF5bWVudFdpbmRvd0luU2Vjb25kcywgX2V4cGlyeSkuCiAgICAgICAqLwogICAgICBieXRlczE2IF90cmFkZUlELCAvLyBUaGUgdW5pcXVlIElEIG9mIHRoZSB0cmFkZSwgZ2VuZXJhdGVkIGJ5IGxvY2FsZXRoZXJldW0uY29tCiAgICAgIGFkZHJlc3MgX3NlbGxlciwgLy8gVGhlIHNlbGxpbmcgcGFydHkgb2YgdGhlIHRyYWRlCiAgICAgIGFkZHJlc3MgX2J1eWVyLCAvLyBUaGUgYnV5aW5nIHBhcnR5IG9mIHRoZSB0cmFkZQogICAgICB1aW50MjU2IF92YWx1ZSwgLy8gVGhlIGV0aGVyIGFtb3VudCBiZWluZyBoZWxkIGluIGVzY3JvdwogICAgICB1aW50MTYgX2ZlZSwgLy8gVGhlIGxvY2FsZXRoZXJldW0uY29tIGZlZSBpbiAxLzEwMDAwdGhzCiAgICAgIHVpbnQzMiBfcGF5bWVudFdpbmRvd0luU2Vjb25kcywgLy8gVGhlIHRpbWUgaW4gc2Vjb25kcyBmcm9tIGNvbnRyYWN0IGNyZWF0aW9uIHRoYXQgdGhlIGJ1eWVyIGhhcyB0byBtYXJrIGFzIHBhaWQKICAgICAgdWludDMyIF9leHBpcnksIC8vIFByb3ZpZGVkIGJ5IGxvY2FsZXRoZXJldW0uY29tLiBUaGlzIHRyYW5zYWN0aW9uIG11c3QgYmUgY3JlYXRlZCBiZWZvcmUgdGhpcyB0aW1lLgogICAgICB1aW50OCBfdiwgLy8gU2lnbmF0dXJlIHZhbHVlCiAgICAgIGJ5dGVzMzIgX3IsIC8vIFNpZ25hdHVyZSB2YWx1ZQogICAgICBieXRlczMyIF9zIC8vIFNpZ25hdHVyZSB2YWx1ZQogICAgKSBwYXlhYmxlIGV4dGVybmFsIHsKICAgICAgICBieXRlczMyIF90cmFkZUhhc2ggPSBrZWNjYWsyNTYoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlKTsKICAgICAgICByZXF1aXJlKCFlc2Nyb3dzW190cmFkZUhhc2hdLmV4aXN0cyk7IC8vIFJlcXVpcmUgdGhhdCB0cmFkZSBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0CiAgICAgICAgcmVxdWlyZShlY3JlY292ZXIoa2VjY2FrMjU2KF90cmFkZUhhc2gsIF9wYXltZW50V2luZG93SW5TZWNvbmRzLCBfZXhwaXJ5KSwgX3YsIF9yLCBfcykgPT0gcmVsYXllcik7IC8vIFNpZ25hdHVyZSBtdXN0IGhhdmUgY29tZSBmcm9tIHRoZSByZWxheWVyCiAgICAgICAgcmVxdWlyZShibG9jay50aW1lc3RhbXAgPCBfZXhwaXJ5KTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA9PSBfdmFsdWUgJiYgbXNnLnZhbHVlID4gMCk7IC8vIENoZWNrIHNlbnQgZXRoIGFnYWluc3Qgc2lnbmVkIF92YWx1ZSBhbmQgbWFrZSBzdXJlIGlzIG5vdCAwCiAgICAgICAgdWludDMyIF9zZWxsZXJDYW5DYW5jZWxBZnRlciA9IF9wYXltZW50V2luZG93SW5TZWNvbmRzID09IDAgPyAxIDogdWludDMyKGJsb2NrLnRpbWVzdGFtcCkgKyBfcGF5bWVudFdpbmRvd0luU2Vjb25kczsKICAgICAgICBlc2Nyb3dzW190cmFkZUhhc2hdID0gRXNjcm93KHRydWUsIF9zZWxsZXJDYW5DYW5jZWxBZnRlciwgMCk7CiAgICAgICAgQ3JlYXRlZChfdHJhZGVIYXNoKTsKICAgIH0KCiAgICB1aW50MTYgY29uc3RhbnQgR0FTX2RvUmVsZWFzZSA9IDM2MTAwOwogICAgZnVuY3Rpb24gZG9SZWxlYXNlKAogICAgICAvKioKICAgICAgICogQ2FsbGVkIGJ5IHRoZSBzZWxsZXIgdG8gcmVsZWFzZXMgdGhlIGZ1bmRzIGZvciBhIHN1Y2Nlc3NmdWwgdHJhZGUuCiAgICAgICAqIERlbGV0ZXMgdGhlIHRyYWRlIGZyb20gdGhlIGBlc2Nyb3dzYCBtYXBwaW5nLgogICAgICAgKi8KICAgICAgYnl0ZXMxNiBfdHJhZGVJRCwKICAgICAgYWRkcmVzcyBfc2VsbGVyLAogICAgICBhZGRyZXNzIF9idXllciwKICAgICAgdWludDI1NiBfdmFsdWUsCiAgICAgIHVpbnQxNiBfZmVlLAogICAgICB1aW50MTI4IF9hZGRpdGlvbmFsR2FzCiAgICApIHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciAoX2VzY3JvdywgX3RyYWRlSGFzaCkgPSBnZXRFc2Nyb3dBbmRIYXNoKF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSk7CiAgICAgICAgaWYgKCFfZXNjcm93LmV4aXN0cykgcmV0dXJuIGZhbHNlOwogICAgICAgIHVpbnQxMjggX2dhc0ZlZXMgPSBfZXNjcm93LnRvdGFsR2FzRmVlc1NwZW50QnlSZWxheWVyICsgKG1zZy5zZW5kZXIgPT0gcmVsYXllciA/IEdBU19kb1JlbGVhc2UgKyBfYWRkaXRpb25hbEdhcyA6IDApOwogICAgICAgIGRlbGV0ZSBlc2Nyb3dzW190cmFkZUhhc2hdOwogICAgICAgIFJlbGVhc2VkKF90cmFkZUhhc2gpOwogICAgICAgIHRyYW5zZmVyTWludXNGZWVzKF9idXllciwgX3ZhbHVlLCBfZ2FzRmVlcywgX2ZlZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgdWludDE2IGNvbnN0YW50IEdBU19kb0Rpc2FibGVTZWxsZXJDYW5jZWwgPSAxMjEwMDsKICAgIGZ1bmN0aW9uIGRvRGlzYWJsZVNlbGxlckNhbmNlbCgKICAgICAgLyoqCiAgICAgICAqIFN0b3BzIHRoZSBzZWxsZXIgZnJvbSBjYW5jZWxsaW5nIHRoZSB0cmFkZS4KICAgICAgICogQ2FuIG9ubHkgYmUgY2FsbGVkIHRoZSBidXllci4KICAgICAgICogVXNlZCB0byBtYXJrIHRoZSB0cmFkZSBhcyBwYWlkLCBvciBpZiB0aGUgYnV5ZXIgaGFzIGEgZGlzcHV0ZS4KICAgICAgICovCiAgICAgIGJ5dGVzMTYgX3RyYWRlSUQsCiAgICAgIGFkZHJlc3MgX3NlbGxlciwKICAgICAgYWRkcmVzcyBfYnV5ZXIsCiAgICAgIHVpbnQyNTYgX3ZhbHVlLAogICAgICB1aW50MTYgX2ZlZSwKICAgICAgdWludDEyOCBfYWRkaXRpb25hbEdhcwogICAgKSBwcml2YXRlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB2YXIgKF9lc2Nyb3csIF90cmFkZUhhc2gpID0gZ2V0RXNjcm93QW5kSGFzaChfdHJhZGVJRCwgX3NlbGxlciwgX2J1eWVyLCBfdmFsdWUsIF9mZWUpOwogICAgICAgIGlmICghX2VzY3Jvdy5leGlzdHMpIHJldHVybiBmYWxzZTsKICAgICAgICBpZihfZXNjcm93LnNlbGxlckNhbkNhbmNlbEFmdGVyID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICBlc2Nyb3dzW190cmFkZUhhc2hdLnNlbGxlckNhbkNhbmNlbEFmdGVyID0gMDsKICAgICAgICBTZWxsZXJDYW5jZWxEaXNhYmxlZChfdHJhZGVIYXNoKTsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSByZWxheWVyKSB7CiAgICAgICAgICBpbmNyZWFzZUdhc1NwZW50KF90cmFkZUhhc2gsIEdBU19kb0Rpc2FibGVTZWxsZXJDYW5jZWwgKyBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBHQVNfZG9CdXllckNhbmNlbCA9IDM2MTAwOwogICAgZnVuY3Rpb24gZG9CdXllckNhbmNlbCgKICAgICAgLyoqCiAgICAgICAqIENhbmNlbHMgdGhlIHRyYWRlIGFuZCByZXR1cm5zIHRoZSBldGhlciB0byB0aGUgc2VsbGVyLgogICAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgdGhlIGJ1eWVyLgogICAgICAgKi8KICAgICAgYnl0ZXMxNiBfdHJhZGVJRCwKICAgICAgYWRkcmVzcyBfc2VsbGVyLAogICAgICBhZGRyZXNzIF9idXllciwKICAgICAgdWludDI1NiBfdmFsdWUsCiAgICAgIHVpbnQxNiBfZmVlLAogICAgICB1aW50MTI4IF9hZGRpdGlvbmFsR2FzCiAgICApIHByaXZhdGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciAoX2VzY3JvdywgX3RyYWRlSGFzaCkgPSBnZXRFc2Nyb3dBbmRIYXNoKF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSk7CiAgICAgICAgaWYgKCFfZXNjcm93LmV4aXN0cykgcmV0dXJuIGZhbHNlOwogICAgICAgIHVpbnQxMjggX2dhc0ZlZXMgPSBfZXNjcm93LnRvdGFsR2FzRmVlc1NwZW50QnlSZWxheWVyICsgKG1zZy5zZW5kZXIgPT0gcmVsYXllciA/IEdBU19kb0J1eWVyQ2FuY2VsICsgX2FkZGl0aW9uYWxHYXMgOiAwKTsKICAgICAgICBkZWxldGUgZXNjcm93c1tfdHJhZGVIYXNoXTsKICAgICAgICBDYW5jZWxsZWRCeUJ1eWVyKF90cmFkZUhhc2gpOwogICAgICAgIHRyYW5zZmVyTWludXNGZWVzKF9zZWxsZXIsIF92YWx1ZSwgX2dhc0ZlZXMsIDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBHQVNfZG9TZWxsZXJDYW5jZWwgPSAzNjEwMDsKICAgIGZ1bmN0aW9uIGRvU2VsbGVyQ2FuY2VsKAogICAgICAvKioKICAgICAgICogQ2FuY2VscyB0aGUgdHJhZGUgYW5kIHJldHVybnMgdGhlIGV0aGVyIHRvIHRoZSBzZWxsZXIuCiAgICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCB0aGUgc2VsbGVyLgogICAgICAgKiBDYW4gb25seSBiZSBjYWxsZWQgaWYgdGhlIHBheW1lbnQgd2luZG93IHdhcyBtaXNzZWQgYnkgdGhlIGJ1eWVyCiAgICAgICAqLwogICAgICBieXRlczE2IF90cmFkZUlELAogICAgICBhZGRyZXNzIF9zZWxsZXIsCiAgICAgIGFkZHJlc3MgX2J1eWVyLAogICAgICB1aW50MjU2IF92YWx1ZSwKICAgICAgdWludDE2IF9mZWUsCiAgICAgIHVpbnQxMjggX2FkZGl0aW9uYWxHYXMKICAgICkgcHJpdmF0ZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgdmFyIChfZXNjcm93LCBfdHJhZGVIYXNoKSA9IGdldEVzY3Jvd0FuZEhhc2goX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlKTsKICAgICAgICBpZiAoIV9lc2Nyb3cuZXhpc3RzKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYoX2VzY3Jvdy5zZWxsZXJDYW5DYW5jZWxBZnRlciA8PSAxIHx8IF9lc2Nyb3cuc2VsbGVyQ2FuQ2FuY2VsQWZ0ZXIgPiBibG9jay50aW1lc3RhbXApIHJldHVybiBmYWxzZTsKICAgICAgICB1aW50MTI4IF9nYXNGZWVzID0gX2VzY3Jvdy50b3RhbEdhc0ZlZXNTcGVudEJ5UmVsYXllciArIChtc2cuc2VuZGVyID09IHJlbGF5ZXIgPyBHQVNfZG9TZWxsZXJDYW5jZWwgKyBfYWRkaXRpb25hbEdhcyA6IDApOwogICAgICAgIGRlbGV0ZSBlc2Nyb3dzW190cmFkZUhhc2hdOwogICAgICAgIENhbmNlbGxlZEJ5U2VsbGVyKF90cmFkZUhhc2gpOwogICAgICAgIHRyYW5zZmVyTWludXNGZWVzKF9zZWxsZXIsIF92YWx1ZSwgX2dhc0ZlZXMsIDApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBHQVNfZG9TZWxsZXJSZXF1ZXN0Q2FuY2VsID0gMTIxMDA7CiAgICBmdW5jdGlvbiBkb1NlbGxlclJlcXVlc3RDYW5jZWwoCiAgICAgIC8qKgogICAgICAgKiBDYWxsZWQgYnkgdGhlIHNlbGxlciBpZiB0aGUgYnV5ZXIgaXMgdW5yZXNwb25zaXZlCiAgICAgICAqIENhbiBvbmx5IGJlIGNhbGxlZCBvbiB1bmxpbWl0ZWQgcGF5bWVudCB3aW5kb3cgdHJhZGVzIChzZWxsZXJDYW5DYW5jZWxBZnRlciA9PSAxKQogICAgICAgKiBTZXRzIHRoZSBwYXltZW50IHdpbmRvdyB0byBgcmVxdWVzdENhbmNlbGxhdGlvbk1pbmltdW1UaW1lYCBmcm9tIG5vdywgaW4gd2hpY2ggaXQgY2FuIGJlIGNhbmNlbGxlZC4KICAgICAgICovCiAgICAgIGJ5dGVzMTYgX3RyYWRlSUQsCiAgICAgIGFkZHJlc3MgX3NlbGxlciwKICAgICAgYWRkcmVzcyBfYnV5ZXIsCiAgICAgIHVpbnQyNTYgX3ZhbHVlLAogICAgICB1aW50MTYgX2ZlZSwKICAgICAgdWludDEyOCBfYWRkaXRpb25hbEdhcwogICAgKSBwcml2YXRlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBDYWxsZWQgb24gdW5saW1pdGVkIHBheW1lbnQgd2luZG93IHRyYWRlcyB3aGVyZXQgdGhlIGJ1eWVyIGlzIG5vdCByZXNwb25kaW5nCiAgICAgICAgdmFyIChfZXNjcm93LCBfdHJhZGVIYXNoKSA9IGdldEVzY3Jvd0FuZEhhc2goX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlKTsKICAgICAgICBpZiAoIV9lc2Nyb3cuZXhpc3RzKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYoX2VzY3Jvdy5zZWxsZXJDYW5DYW5jZWxBZnRlciAhPSAxKSByZXR1cm4gZmFsc2U7CiAgICAgICAgZXNjcm93c1tfdHJhZGVIYXNoXS5zZWxsZXJDYW5DYW5jZWxBZnRlciA9IHVpbnQzMihibG9jay50aW1lc3RhbXApICsgcmVxdWVzdENhbmNlbGxhdGlvbk1pbmltdW1UaW1lOwogICAgICAgIFNlbGxlclJlcXVlc3RlZENhbmNlbChfdHJhZGVIYXNoKTsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSByZWxheWVyKSB7CiAgICAgICAgICBpbmNyZWFzZUdhc1NwZW50KF90cmFkZUhhc2gsIEdBU19kb1NlbGxlclJlcXVlc3RDYW5jZWwgKyBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBHQVNfZG9SZXNvbHZlRGlzcHV0ZSA9IDM2MTAwOwogICAgZnVuY3Rpb24gcmVzb2x2ZURpc3B1dGUoCiAgICAgIC8qKgogICAgICAgKiBDYWxsZWQgYnkgdGhlIGFyYml0cmF0b3IgdG8gcmVzb2x2ZSBhIGRpc3B1dGUKICAgICAgICogUmVxdWlyZXMgdGhlIHNpZ25lZCBBQ1RJT05fRElTUFVURSBhY3Rpb25CeXRlIGZyb20gZWl0aGVyIHRoZSBidXllciBvciB0aGUgc2VsbGVyCiAgICAgICAqLwogICAgICBieXRlczE2IF90cmFkZUlELAogICAgICBhZGRyZXNzIF9zZWxsZXIsCiAgICAgIGFkZHJlc3MgX2J1eWVyLAogICAgICB1aW50MjU2IF92YWx1ZSwKICAgICAgdWludDE2IF9mZWUsCiAgICAgIHVpbnQ4IF92LAogICAgICBieXRlczMyIF9yLAogICAgICBieXRlczMyIF9zLAogICAgICB1aW50OCBfYnV5ZXJQZXJjZW50CiAgICApIGV4dGVybmFsIG9ubHlBcmJpdHJhdG9yIHsKICAgICAgICBhZGRyZXNzIF9zaWduYXR1cmUgPSBlY3JlY292ZXIoa2VjY2FrMjU2KF90cmFkZUlELCBBQ1RJT05fRElTUFVURSksIF92LCBfciwgX3MpOwogICAgICAgIHJlcXVpcmUoX3NpZ25hdHVyZSA9PSBfYnV5ZXIgfHwgX3NpZ25hdHVyZSA9PSBfc2VsbGVyKTsKCiAgICAgICAgdmFyIChfZXNjcm93LCBfdHJhZGVIYXNoKSA9IGdldEVzY3Jvd0FuZEhhc2goX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlKTsKICAgICAgICByZXF1aXJlKF9lc2Nyb3cuZXhpc3RzKTsKICAgICAgICByZXF1aXJlKF9idXllclBlcmNlbnQgPD0gMTAwKTsKCiAgICAgICAgdWludDI1NiBfdG90YWxGZWVzID0gX2VzY3Jvdy50b3RhbEdhc0ZlZXNTcGVudEJ5UmVsYXllciArIEdBU19kb1Jlc29sdmVEaXNwdXRlOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIC0gX3RvdGFsRmVlcyA8PSBfdmFsdWUpOyAvLyBQcmV2ZW50IHVuZGVyZmxvdwogICAgICAgIGZlZXNBdmFpbGFibGVGb3JXaXRoZHJhdyArPSBfdG90YWxGZWVzOyAvLyBBZGQgdGhlIHRoZSBwb3QgZm9yIGxvY2FsZXRoZXJldW0gdG8gd2l0aGRyYXcKCiAgICAgICAgZGVsZXRlIGVzY3Jvd3NbX3RyYWRlSGFzaF07CiAgICAgICAgRGlzcHV0ZVJlc29sdmVkKF90cmFkZUhhc2gpOwogICAgICAgIF9idXllci50cmFuc2ZlcigoX3ZhbHVlIC0gX3RvdGFsRmVlcykgKiBfYnV5ZXJQZXJjZW50IC8gMTAwKTsKICAgICAgICBfc2VsbGVyLnRyYW5zZmVyKChfdmFsdWUgLSBfdG90YWxGZWVzKSAqICgxMDAgLSBfYnV5ZXJQZXJjZW50KSAvIDEwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVsZWFzZShieXRlczE2IF90cmFkZUlELCBhZGRyZXNzIF9zZWxsZXIsIGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF92YWx1ZSwgdWludDE2IF9mZWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpewogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX3NlbGxlcik7CiAgICAgIHJldHVybiBkb1JlbGVhc2UoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCAwKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRpc2FibGVTZWxsZXJDYW5jZWwoYnl0ZXMxNiBfdHJhZGVJRCwgYWRkcmVzcyBfc2VsbGVyLCBhZGRyZXNzIF9idXllciwgdWludDI1NiBfdmFsdWUsIHVpbnQxNiBfZmVlKSBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBfYnV5ZXIpOwogICAgICByZXR1cm4gZG9EaXNhYmxlU2VsbGVyQ2FuY2VsKF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSwgMCk7CiAgICB9CiAgICBmdW5jdGlvbiBidXllckNhbmNlbChieXRlczE2IF90cmFkZUlELCBhZGRyZXNzIF9zZWxsZXIsIGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF92YWx1ZSwgdWludDE2IF9mZWUpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IF9idXllcik7CiAgICAgIHJldHVybiBkb0J1eWVyQ2FuY2VsKF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSwgMCk7CiAgICB9CiAgICBmdW5jdGlvbiBzZWxsZXJDYW5jZWwoYnl0ZXMxNiBfdHJhZGVJRCwgYWRkcmVzcyBfc2VsbGVyLCBhZGRyZXNzIF9idXllciwgdWludDI1NiBfdmFsdWUsIHVpbnQxNiBfZmVlKSBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBfc2VsbGVyKTsKICAgICAgcmV0dXJuIGRvU2VsbGVyQ2FuY2VsKF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSwgMCk7CiAgICB9CiAgICBmdW5jdGlvbiBzZWxsZXJSZXF1ZXN0Q2FuY2VsKGJ5dGVzMTYgX3RyYWRlSUQsIGFkZHJlc3MgX3NlbGxlciwgYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50MTYgX2ZlZSkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX3NlbGxlcik7CiAgICAgIHJldHVybiBkb1NlbGxlclJlcXVlc3RDYW5jZWwoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWxheVNlbGxlckNhbm5vdENhbmNlbChieXRlczE2IF90cmFkZUlELCBhZGRyZXNzIF9zZWxsZXIsIGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF92YWx1ZSwgdWludDE2IF9mZWUsIHVpbnQxMjggX21heGltdW1HYXNQcmljZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmV0dXJuIHJlbGF5KF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSwgX21heGltdW1HYXNQcmljZSwgX3YsIF9yLCBfcywgQUNUSU9OX1NFTExFUl9DQU5OT1RfQ0FOQ0VMLCAwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbGF5QnV5ZXJDYW5jZWwoYnl0ZXMxNiBfdHJhZGVJRCwgYWRkcmVzcyBfc2VsbGVyLCBhZGRyZXNzIF9idXllciwgdWludDI1NiBfdmFsdWUsIHVpbnQxNiBfZmVlLCB1aW50MTI4IF9tYXhpbXVtR2FzUHJpY2UsIHVpbnQ4IF92LCBieXRlczMyIF9yLCBieXRlczMyIF9zKSBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgIHJldHVybiByZWxheShfdHJhZGVJRCwgX3NlbGxlciwgX2J1eWVyLCBfdmFsdWUsIF9mZWUsIF9tYXhpbXVtR2FzUHJpY2UsIF92LCBfciwgX3MsIEFDVElPTl9CVVlFUl9DQU5DRUwsIDApOwogICAgfQogICAgZnVuY3Rpb24gcmVsYXlSZWxlYXNlKGJ5dGVzMTYgX3RyYWRlSUQsIGFkZHJlc3MgX3NlbGxlciwgYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50MTYgX2ZlZSwgdWludDEyOCBfbWF4aW11bUdhc1ByaWNlLCB1aW50OCBfdiwgYnl0ZXMzMiBfciwgYnl0ZXMzMiBfcykgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICByZXR1cm4gcmVsYXkoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCBfbWF4aW11bUdhc1ByaWNlLCBfdiwgX3IsIF9zLCBBQ1RJT05fUkVMRUFTRSwgMCk7CiAgICB9CiAgICBmdW5jdGlvbiByZWxheVNlbGxlckNhbmNlbChieXRlczE2IF90cmFkZUlELCBhZGRyZXNzIF9zZWxsZXIsIGFkZHJlc3MgX2J1eWVyLCB1aW50MjU2IF92YWx1ZSwgdWludDE2IF9mZWUsIHVpbnQxMjggX21heGltdW1HYXNQcmljZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmV0dXJuIHJlbGF5KF90cmFkZUlELCBfc2VsbGVyLCBfYnV5ZXIsIF92YWx1ZSwgX2ZlZSwgX21heGltdW1HYXNQcmljZSwgX3YsIF9yLCBfcywgQUNUSU9OX1NFTExFUl9DQU5DRUwsIDApOwogICAgfQogICAgZnVuY3Rpb24gcmVsYXlTZWxsZXJSZXF1ZXN0Q2FuY2VsKGJ5dGVzMTYgX3RyYWRlSUQsIGFkZHJlc3MgX3NlbGxlciwgYWRkcmVzcyBfYnV5ZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50MTYgX2ZlZSwgdWludDEyOCBfbWF4aW11bUdhc1ByaWNlLCB1aW50OCBfdiwgYnl0ZXMzMiBfciwgYnl0ZXMzMiBfcykgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICByZXR1cm4gcmVsYXkoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCBfbWF4aW11bUdhc1ByaWNlLCBfdiwgX3IsIF9zLCBBQ1RJT05fU0VMTEVSX1JFUVVFU1RfQ0FOQ0VMLCAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWxheSgKICAgICAgYnl0ZXMxNiBfdHJhZGVJRCwKICAgICAgYWRkcmVzcyBfc2VsbGVyLAogICAgICBhZGRyZXNzIF9idXllciwKICAgICAgdWludDI1NiBfdmFsdWUsCiAgICAgIHVpbnQxNiBfZmVlLAogICAgICB1aW50MTI4IF9tYXhpbXVtR2FzUHJpY2UsCiAgICAgIHVpbnQ4IF92LAogICAgICBieXRlczMyIF9yLAogICAgICBieXRlczMyIF9zLAogICAgICB1aW50OCBfYWN0aW9uQnl0ZSwKICAgICAgdWludDEyOCBfYWRkaXRpb25hbEdhcwogICAgKSBwcml2YXRlIHJldHVybnMgKGJvb2wpIHsKICAgICAgYWRkcmVzcyBfcmVsYXllZFNlbmRlciA9IGdldFJlbGF5ZWRTZW5kZXIoX3RyYWRlSUQsIF9hY3Rpb25CeXRlLCBfbWF4aW11bUdhc1ByaWNlLCBfdiwgX3IsIF9zKTsKICAgICAgaWYgKF9yZWxheWVkU2VuZGVyID09IF9idXllcikgewogICAgICAgIGlmIChfYWN0aW9uQnl0ZSA9PSBBQ1RJT05fU0VMTEVSX0NBTk5PVF9DQU5DRUwpIHsKICAgICAgICAgIHJldHVybiBkb0Rpc2FibGVTZWxsZXJDYW5jZWwoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfSBlbHNlIGlmIChfYWN0aW9uQnl0ZSA9PSBBQ1RJT05fQlVZRVJfQ0FOQ0VMKSB7CiAgICAgICAgICByZXR1cm4gZG9CdXllckNhbmNlbChfdHJhZGVJRCwgX3NlbGxlciwgX2J1eWVyLCBfdmFsdWUsIF9mZWUsIF9hZGRpdGlvbmFsR2FzKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoX3JlbGF5ZWRTZW5kZXIgPT0gX3NlbGxlcikgewogICAgICAgIGlmIChfYWN0aW9uQnl0ZSA9PSBBQ1RJT05fUkVMRUFTRSkgewogICAgICAgICAgcmV0dXJuIGRvUmVsZWFzZShfdHJhZGVJRCwgX3NlbGxlciwgX2J1eWVyLCBfdmFsdWUsIF9mZWUsIF9hZGRpdGlvbmFsR2FzKTsKICAgICAgICB9IGVsc2UgaWYgKF9hY3Rpb25CeXRlID09IEFDVElPTl9TRUxMRVJfQ0FOQ0VMKSB7CiAgICAgICAgICByZXR1cm4gZG9TZWxsZXJDYW5jZWwoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfSBlbHNlIGlmIChfYWN0aW9uQnl0ZSA9PSBBQ1RJT05fU0VMTEVSX1JFUVVFU1RfQ0FOQ0VMKXsKICAgICAgICAgIHJldHVybiBkb1NlbGxlclJlcXVlc3RDYW5jZWwoX3RyYWRlSUQsIF9zZWxsZXIsIF9idXllciwgX3ZhbHVlLCBfZmVlLCBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBHQVNfYmF0Y2hSZWxheUJhc2VDb3N0ID0gMjg1MDA7CiAgICBmdW5jdGlvbiBiYXRjaFJlbGF5KAogICAgICAvKioKICAgICAgICogQ2FsbCBtdWx0aXBsZSByZWxheSBtZXRob2RzIGF0IG9uY2UgdG8gc2F2ZSBvbiBnYXMuCiAgICAgICAqLwogICAgICAgIGJ5dGVzMTZbXSBfdHJhZGVJRCwKICAgICAgICBhZGRyZXNzW10gX3NlbGxlciwKICAgICAgICBhZGRyZXNzW10gX2J1eWVyLAogICAgICAgIHVpbnQyNTZbXSBfdmFsdWUsCiAgICAgICAgdWludDE2W10gX2ZlZSwKICAgICAgICB1aW50MTI4W10gX21heGltdW1HYXNQcmljZSwKICAgICAgICB1aW50OFtdIF92LAogICAgICAgIGJ5dGVzMzJbXSBfciwKICAgICAgICBieXRlczMyW10gX3MsCiAgICAgICAgdWludDhbXSBfYWN0aW9uQnl0ZQogICAgKSBwdWJsaWMgcmV0dXJucyAoYm9vbFtdKSB7CiAgICAgICAgYm9vbFtdIG1lbW9yeSBfcmVzdWx0cyA9IG5ldyBib29sW10oX3RyYWRlSUQubGVuZ3RoKTsKICAgICAgICB1aW50MTI4IF9hZGRpdGlvbmFsR2FzID0gdWludDEyOChtc2cuc2VuZGVyID09IHJlbGF5ZXIgPyBHQVNfYmF0Y2hSZWxheUJhc2VDb3N0IC8gX3RyYWRlSUQubGVuZ3RoIDogMCk7CiAgICAgICAgZm9yICh1aW50OCBpPTA7IGk8X3RyYWRlSUQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX3Jlc3VsdHNbaV0gPSByZWxheShfdHJhZGVJRFtpXSwgX3NlbGxlcltpXSwgX2J1eWVyW2ldLCBfdmFsdWVbaV0sIF9mZWVbaV0sIF9tYXhpbXVtR2FzUHJpY2VbaV0sIF92W2ldLCBfcltpXSwgX3NbaV0sIF9hY3Rpb25CeXRlW2ldLCBfYWRkaXRpb25hbEdhcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmNyZWFzZUdhc1NwZW50KGJ5dGVzMzIgX3RyYWRlSGFzaCwgdWludDEyOCBfZ2FzKSBwcml2YXRlIHsKICAgICAgICAvKiogSW5jcmVhc2UgYHRvdGFsR2FzRmVlc1NwZW50QnlSZWxheWVyYCB0byBiZSBjaGFyZ2VkIGxhdGVyIG9uIGNvbXBsZXRpb24gb2YgdGhlIHRyYWRlLgogICAgICAgICAqLwogICAgICAgIGVzY3Jvd3NbX3RyYWRlSGFzaF0udG90YWxHYXNGZWVzU3BlbnRCeVJlbGF5ZXIgKz0gX2dhcyAqIHVpbnQxMjgodHguZ2FzcHJpY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyTWludXNGZWVzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgdWludDEyOCBfdG90YWxHYXNGZWVzU3BlbnRCeVJlbGF5ZXIsIHVpbnQxNiBfZmVlKSBwcml2YXRlIHsKICAgICAgICB1aW50MjU2IF90b3RhbEZlZXMgPSAoX3ZhbHVlICogX2ZlZSAvIDEwMDAwKSArIF90b3RhbEdhc0ZlZXNTcGVudEJ5UmVsYXllcjsKICAgICAgICBpZihfdmFsdWUgLSBfdG90YWxGZWVzID4gX3ZhbHVlKSByZXR1cm47IC8vIFByZXZlbnQgdW5kZXJmbG93CiAgICAgICAgZmVlc0F2YWlsYWJsZUZvcldpdGhkcmF3ICs9IF90b3RhbEZlZXM7IC8vIEFkZCB0aGUgdGhlIHBvdCBmb3IgbG9jYWxldGhlcmV1bSB0byB3aXRoZHJhdwogICAgICAgIF90by50cmFuc2ZlcihfdmFsdWUgLSBfdG90YWxGZWVzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0ZlZXMoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgLyoqCiAgICAgICAqIFdpdGhkcmF3IGZlZXMgY29sbGVjdGVkIGJ5IHRoZSBjb250cmFjdC4gT25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcy4KICAgICAgICovCiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGZlZXNBdmFpbGFibGVGb3JXaXRoZHJhdyk7IC8vIEFsc28gcHJldmVudHMgdW5kZXJmbG93CiAgICAgICAgZmVlc0F2YWlsYWJsZUZvcldpdGhkcmF3IC09IF9hbW91bnQ7CiAgICAgICAgX3RvLnRyYW5zZmVyKF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFyYml0cmF0b3IoYWRkcmVzcyBfbmV3QXJiaXRyYXRvcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICAvKioKICAgICAgICAgKiBTZXQgdGhlIGFyYml0cmF0b3IgdG8gYSBuZXcgYWRkcmVzcy4gT25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcy4KICAgICAgICAgKiBAcGFyYW0gYWRkcmVzcyBfbmV3QXJiaXRyYXRvcgogICAgICAgICAqLwogICAgICAgIGFyYml0cmF0b3IgPSBfbmV3QXJiaXRyYXRvcjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICAvKioKICAgICAgICAgKiBDaGFuZ2UgdGhlIG93bmVyIHRvIGEgbmV3IGFkZHJlc3MuIE9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMuCiAgICAgICAgICogQHBhcmFtIGFkZHJlc3MgX25ld093bmVyCiAgICAgICAgICovCiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0UmVsYXllcihhZGRyZXNzIF9uZXdSZWxheWVyKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIC8qKgogICAgICAgICAqIENoYW5nZSB0aGUgcmVsYXllciB0byBhIG5ldyBhZGRyZXNzLiBPbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzLgogICAgICAgICAqIEBwYXJhbSBhZGRyZXNzIF9uZXdSZWxheWVyCiAgICAgICAgICovCiAgICAgICAgcmVsYXllciA9IF9uZXdSZWxheWVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJlcXVlc3RDYW5jZWxsYXRpb25NaW5pbXVtVGltZSh1aW50MzIgX25ld1JlcXVlc3RDYW5jZWxsYXRpb25NaW5pbXVtVGltZSkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICAvKioKICAgICAgICAgKiBDaGFuZ2UgdGhlIHJlcXVlc3RDYW5jZWxsYXRpb25NaW5pbXVtVGltZS4gT25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcy4KICAgICAgICAgKiBAcGFyYW0gdWludDMyIF9uZXdSZXF1ZXN0Q2FuY2VsbGF0aW9uTWluaW11bVRpbWUKICAgICAgICAgKi8KICAgICAgICByZXF1ZXN0Q2FuY2VsbGF0aW9uTWluaW11bVRpbWUgPSBfbmV3UmVxdWVzdENhbmNlbGxhdGlvbk1pbmltdW1UaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9rZW4oVG9rZW4gX3Rva2VuQ29udHJhY3QsIGFkZHJlc3MgX3RyYW5zZmVyVG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgZXh0ZXJuYWwgewogICAgICAgIC8qKgogICAgICAgICAqIElmIEVSQzIwIHRva2VucyBhcmUgc2VudCB0byB0aGlzIGNvbnRyYWN0LCB0aGV5IHdpbGwgYmUgdHJhcHBlZCBmb3JldmVyLgogICAgICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgd2F5IGZvciB1cyB0byB3aXRoZHJhdyB0aGVtIHNvIHdlIGNhbiBnZXQgdGhlbSBiYWNrIHRvIHRoZWlyIHJpZ2h0ZnVsIG93bmVyCiAgICAgICAgICovCiAgICAgICAgIF90b2tlbkNvbnRyYWN0LnRyYW5zZmVyKF90cmFuc2ZlclRvLCBfdmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXJUb2tlbkZyb20oVG9rZW4gX3Rva2VuQ29udHJhY3QsIGFkZHJlc3MgX3RyYW5zZmVyVG8sIGFkZHJlc3MgX3RyYW5zZmVyRnJvbSwgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgLyoqCiAgICAgICAgICogSWYgRVJDMjAgdG9rZW5zIGFyZSBzZW50IHRvIHRoaXMgY29udHJhY3QsIHRoZXkgd2lsbCBiZSB0cmFwcGVkIGZvcmV2ZXIuCiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBpcyB3YXkgZm9yIHVzIHRvIHdpdGhkcmF3IHRoZW0gc28gd2UgY2FuIGdldCB0aGVtIGJhY2sgdG8gdGhlaXIgcmlnaHRmdWwgb3duZXIKICAgICAgICAgKi8KICAgICAgICAgX3Rva2VuQ29udHJhY3QudHJhbnNmZXJGcm9tKF90cmFuc2ZlclRvLCBfdHJhbnNmZXJGcm9tLCBfdmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gYXBwcm92ZVRva2VuKFRva2VuIF90b2tlbkNvbnRyYWN0LCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICAvKioKICAgICAgICAgKiBJZiBFUkMyMCB0b2tlbnMgYXJlIHNlbnQgdG8gdGhpcyBjb250cmFjdCwgdGhleSB3aWxsIGJlIHRyYXBwZWQgZm9yZXZlci4KICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHdheSBmb3IgdXMgdG8gd2l0aGRyYXcgdGhlbSBzbyB3ZSBjYW4gZ2V0IHRoZW0gYmFjayB0byB0aGVpciByaWdodGZ1bCBvd25lcgogICAgICAgICAqLwogICAgICAgICBfdG9rZW5Db250cmFjdC5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQp9'.
	

]
