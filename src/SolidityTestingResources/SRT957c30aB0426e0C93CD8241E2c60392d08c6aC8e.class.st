Class {
	#name : #SRT957c30aB0426e0C93CD8241E2c60392d08c6aC8e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT957c30aB0426e0C93CD8241E2c60392d08c6aC8e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTQ7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCi8vSW50ZXJmYWNlIGRlY2xhcmF0aW9uIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9laXBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICAvL2Zyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9iMzk1YjA2YjY1Y2UzNWNhYzE1NWMxM2QwMWFiM2ZjOWQ0MmM1Y2ZiL2NvbnRyYWN0cy90b2tlbi9FUkMyMEJhc2ljLnNvbAogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7IC8vdG9rZW5zIHRoYXQgY2FuIHZvdGUsIHRyYW5zZmVyLCByZWNlaXZlIGRpdmlkZW5kCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgLy9mcm9tOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvYjM5NWIwNmI2NWNlMzVjYWMxNTVjMTNkMDFhYjNmYzlkNDJjNWNmYi9jb250cmFjdHMvdG9rZW4vRVJDMjAuc29sCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IE1vZHVtVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwdWJsaWMgYWxsb3dlZDsKCiAgICBlbnVtIFVwZGF0ZU1vZGV7V2VpLCBWb3RlLCBCb3RofSAvL3VwZGF0ZSBtb2RlIGZvciB0aGUgYWNjb3VudAogICAgc3RydWN0IEFjY291bnQgewogICAgICAgIHVpbnQyNTYgbGFzdFByb3Bvc2FsU3RhcnRUaW1lOyAvL0ZvciBjaGVja2luZyBhdCB3aGljaCBwcm9wb3NhbCB2YWx1ZU1vZFZvdGUgd2FzIGxhc3QgdXBkYXRlZAogICAgICAgIHVpbnQyNTYgbGFzdEFpcmRyb3BXZWk7IC8vRm9yIGNoZWNraW5nIGFmdGVyIHdoaWNoIGFpckRyb3AgYm9udXNXZWkgd2FzIGxhc3QgdXBkYXRlZAogICAgICAgIHVpbnQyNTYgbGFzdEFpcmRyb3BDbGFpbVRpbWU7IC8vZm9yIHVuY2xhaW1lZCBhaXJkcm9wcywgcmUtYWlyZHJvcAogICAgICAgIHVpbnQyNTYgYm9udXNXZWk7ICAgICAgLy9haXJEcm9wL0RpdmlkZW5kIHBheW91dCBhdmFpbGFibGUgZm9yIHdpdGhkcmF3YWwuCiAgICAgICAgdWludDI1NiB2YWx1ZU1vZFZvdGU7ICAvLyB2b3RlcyBhdmFpbGFibGUgZm9yIHZvdGluZyBvbiBhY3RpdmUgUHJvcG9zYWwKICAgICAgICB1aW50MjU2IHZhbHVlTW9kOyAgICAgIC8vIHRoZSBvd25lZCB0b2tlbnMKICAgIH0KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBBY2NvdW50KSBwdWJsaWMgYWNjb3VudHM7CgogICAgLy9BaXJkb3JwCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbERyb3BQZXJVbmxvY2tlZFRva2VuID0gMDsgICAgIC8vdG90YWxseSBhaXJkcm9wcGVkIGV0aCBwZXIgdW5sb2NrZWQgdG9rZW4KICAgIHVpbnQyNTYgcHVibGljIHJvdW5kaW5nID0gMDsgICAgICAgICAgICAgICAgICAgICAgLy9haXJkcm9wcyBub3QgYWNjb3VudGVkIHlldCB0byBtYWtlIHN5c3RlbSByb3VuZGluZyBlcnJvciBwcm9vZgoKICAgIC8vVG9rZW4gbG9ja2VkL3VubG9ja2VkIC0gdG90YWxTdXBwbHkvbWF4CiAgICB1aW50MjU2IHB1YmxpYyBsb2NrZWRUb2tlbnMgPSA5ICogMTEwMCAqIDEwMDA7ICAgLy90b2tlbiB0aGF0IG5lZWQgdG8gYmUgdW5sb2NrZWQgYnkgdm90aW5nCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBtYXhUb2tlbnMgPSAzMCAqIDEwMDAgKiAxMDAwOyAgICAgIC8vbWF4IGRpc3RyaWJ1dGFibGUgdG9rZW5zCgogICAgLy9taW50aW5nIHBoYXNlIHJ1bm5pbmcgaWYgZmFsc2UsIHRydWUgb3RoZXJ3aXNlLiBNYW55IG9wZXJhdGlvbnMgY2FuIG9ubHkgYmUgY2FsbGVkIHdoZW4KICAgIC8vbWludGluZyBwaGFzZSBpcyBvdmVyCiAgICBib29sIHB1YmxpYyBtaW50RG9uZSA9IGZhbHNlOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcmVkaXN0cmlidXRpb25UaW1lb3V0ID0gNTQ4IGRheXM7IC8vMTggbW9udGgKCiAgICAvL2FzIHN1Z2dlc3RlZCBpbiBodHRwczovL3RoZWV0aGVyZXVtLndpa2kvdy9pbmRleC5waHAvRVJDMjBfVG9rZW5fU3RhbmRhcmQKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJNb2R1bSBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJNT0QiOwogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMDsKCiAgICAvL1ZvdGluZwogICAgc3RydWN0IFByb3Bvc2FsIHsKICAgICAgICBzdHJpbmcgYWRkcjsgICAgICAgIC8vVXJpIGZvciBtb3JlIGluZm8KICAgICAgICBieXRlczMyIGhhc2g7ICAgICAgIC8vSGFzaCBvZiB0aGUgdXJpIGNvbnRlbnQgZm9yIGNoZWNraW5nCiAgICAgICAgdWludDI1NiB2YWx1ZU1vZDsgICAgICAvL3Rva2VuIHRvIHVubG9jazogcHJvcG9zYWwgd2l0aCAwIGFtb3VudCBpcyBpbnZhbGlkCiAgICAgICAgdWludDI1NiBzdGFydFRpbWU7CiAgICAgICAgdWludDI1NiB5YXk7CiAgICAgICAgdWludDI1NiBuYXk7CiAgICB9CiAgICBQcm9wb3NhbCBwdWJsaWMgY3VycmVudFByb3Bvc2FsOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdm90aW5nRHVyYXRpb24gPSAyIHdlZWtzOwogICAgdWludDI1NiBwdWJsaWMgbGFzdE5lZ2F0aXZlVm90aW5nID0gMDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGJsb2NraW5nRHVyYXRpb24gPSA5MCBkYXlzOwoKICAgIGV2ZW50IFZvdGVkKGFkZHJlc3MgX2FkZHIsIGJvb2wgb3B0aW9uLCB1aW50MjU2IHZvdGVzKTsgLy9jYWxsZWQgd2hlbiBhIHZvdGUgaXMgY2FzdGVkCiAgICBldmVudCBQYXlvdXQodWludDI1NiB3ZWlQZXJUb2tlbik7IC8vY2FsbGVkIHdoZW4gYW4gc29tZW9uZSBwYXllZCBFVEhzIHRvIHRoaXMgY29udHJhY3QsIHRoYXQgY2FuIGJlIGRpc3RyaWJ1dGVkCgogICAgZnVuY3Rpb24gTW9kdW1Ub2tlbigpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogSW4gY2FzZSBhbiBvd25lciBhY2NvdW50IGdldHMgY29tcHJvbWlzZWQsIGl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byBtb3ZlIGNvbnRyb2wKICAgICAqIG92ZXIgdG8gYW5vdGhlciBhY2NvdW50LiBUaGlzIGhlbHBzIGluIGNhc2VzIGxpa2UgdGhlIFBhcml0eSBtdWx0aXNpZyBleHBsb2l0OiBBcwogICAgICogc29vbiBhcyBhbiBleHBsb2l0IGJlY29tZXMga25vd24sIHRoZSBhZmZlY3RlZCBwYXJ0aWVzIG1pZ2h0IGhhdmUgYSBzbWFsbCB0aW1lCiAgICAgKiB3aW5kb3cgYmVmb3JlIGJlaW5nIGF0dGFja2VkLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG93bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqIFZvdGluZyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgLyoKICAgICAqIEluIGFkZGl0aW9uIHRvIHRoZSB0aGUgdm9kZSB3aXRoIGFkZHJlc3MvVVJMIGFuZCBpdHMgaGFzaCwgd2UgYWxzbyBzZXQgdGhlIHZhbHVlCiAgICAgKiBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZCBmcm9tIHRoZSBsb2NrZWQgdG9rZW5zIHRvIHRoZSBtb2R1bSBhY2NvdW50LgogICAgICovCiAgICBmdW5jdGlvbiB2b3RpbmdQcm9wb3NhbChzdHJpbmcgX2FkZHIsIGJ5dGVzMzIgX2hhc2gsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7IC8vIHByb3Bvc2FsIG9ueSBieSBvbndlcgogICAgICAgIHJlcXVpcmUoIWlzUHJvcG9zYWxBY3RpdmUoKSk7IC8vIG5vIHByb3Bvc2FsIGlzIGFjdGl2ZSwgY2Fubm90IHZvdGUgaW4gcGFyYWxsZWwKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBsb2NrZWRUb2tlbnMpOyAvL3Byb3Bvc2FsIGNhbm5vdCBiZSBsYXJnZXIgdGhhbiByZW1haW5pbmcgbG9ja2VkIHRva2VucwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7IC8vdGhlcmUgbmVlZHMgdG8gYmUgbG9ja2VkIHRva2VucyB0byBtYWtlIHByb3Bvc2FsLCBhdCBsZWFzdCAxIGxvY2tlZCB0b2tlbgogICAgICAgIHJlcXVpcmUoX2hhc2ggIT0gYnl0ZXMzMigwKSk7IC8vaGFzaCBuZWVkIHRvIGJlIHNldAogICAgICAgIHJlcXVpcmUoYnl0ZXMoX2FkZHIpLmxlbmd0aCA+IDApOyAvL3RoZSBhZGRyZXNzIG5lZWQgdG8gYmUgc2V0IGFuZCBub24tZW1wdHkKICAgICAgICByZXF1aXJlKG1pbnREb25lKTsgLy9taW50aW5nIHBoYXNlIG5lZWRzIHRvIGJlIG92ZXIKICAgICAgICAvL2luIGNhc2Ugb2YgbmVnYXRpdmUgdm90ZSwgd2FpdCA5MCBkYXlzLiBJZiBubyBsYXN0TmVnYXRpdmVWb3RpbmcgaGF2ZQogICAgICAgIC8vb2NjdXJlZCwgbGFzdE5lZ2F0aXZlVm90aW5nIGlzIDAgYW5kIG5vdyBpcyBhbHdheXMgbGFyZ2VyIHRoYW4gMTQuMS4xOTcwCiAgICAgICAgLy8oMS4xLjE5NzAgcGx1cyBibG9ja2luZ0R1cmF0aW9uKS4KICAgICAgICByZXF1aXJlKG5vdyA+PSBsYXN0TmVnYXRpdmVWb3RpbmcuYWRkKGJsb2NraW5nRHVyYXRpb24pKTsKCiAgICAgICAgY3VycmVudFByb3Bvc2FsID0gUHJvcG9zYWwoX2FkZHIsIF9oYXNoLCBfdmFsdWUsIG5vdywgMCwgMCk7CiAgICB9CgogICAgZnVuY3Rpb24gdm90ZShib29sIF92b3RlKSBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUoaXNWb3RlT25nb2luZygpKTsgLy8gdm90ZSBuZWVkcyB0byBiZSBvbmdvaW5nCiAgICAgICAgQWNjb3VudCBzdG9yYWdlIGFjY291bnQgPSB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIsIFVwZGF0ZU1vZGUuVm90ZSk7CiAgICAgICAgdWludDI1NiB2b3RlcyA9IGFjY291bnQudmFsdWVNb2RWb3RlOyAvL2F2YWlsYWJsZSB2b3RlcwogICAgICAgIHJlcXVpcmUodm90ZXMgPiAwKTsgLy92b3RlciBtdXN0IGhhdmUgYSB2b3RlIGxlZnQsIGVpdGhlciBieSBub3Qgdm90aW5nIHlldCwgb3IgaGF2ZSBtb2R1bSB0b2tlbnMKCiAgICAgICAgaWYoX3ZvdGUpIHsKICAgICAgICAgICAgY3VycmVudFByb3Bvc2FsLnlheSA9IGN1cnJlbnRQcm9wb3NhbC55YXkuYWRkKHZvdGVzKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGN1cnJlbnRQcm9wb3NhbC5uYXkgPSBjdXJyZW50UHJvcG9zYWwubmF5LmFkZCh2b3Rlcyk7CiAgICAgICAgfQoKICAgICAgICBhY2NvdW50LnZhbHVlTW9kVm90ZSA9IDA7CiAgICAgICAgVm90ZWQobXNnLnNlbmRlciwgX3ZvdGUsIHZvdGVzKTsKICAgICAgICByZXR1cm4gdm90ZXM7CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd1ZvdGVzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgQWNjb3VudCBtZW1vcnkgYWNjb3VudCA9IGFjY291bnRzW19hZGRyXTsKICAgICAgICBpZihhY2NvdW50Lmxhc3RQcm9wb3NhbFN0YXJ0VGltZSA8IGN1cnJlbnRQcm9wb3NhbC5zdGFydFRpbWUgfHwgLy8gdGhlIHVzZXIgZGlkIHNldCBoaXMgdG9rZW4gcG93ZXIgeWV0CiAgICAgICAgICAgIChhY2NvdW50Lmxhc3RQcm9wb3NhbFN0YXJ0VGltZSA9PSAwICYmIGN1cnJlbnRQcm9wb3NhbC5zdGFydFRpbWUgPT0gMCkpIHsKICAgICAgICAgICAgcmV0dXJuIGFjY291bnQudmFsdWVNb2Q7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhY2NvdW50LnZhbHVlTW9kVm90ZTsKICAgIH0KCiAgICAvLyBUaGUgdm90aW5nIGNhbiBiZSBjbGFpbWVkIGJ5IHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBjbGFpbVZvdGluZ1Byb3Bvc2FsKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOyAvL29ubHkgb3duZXIgY2FuIGNsYWltIHByb3Bvc2FsCiAgICAgICAgcmVxdWlyZShpc1Byb3Bvc2FsQWN0aXZlKCkpOyAvLyBwcm9wb3NhbCBhY3RpdmUKICAgICAgICByZXF1aXJlKGlzVm90aW5nUGhhc2VPdmVyKCkpOyAvLyB2b3RpbmcgaGFzIGFscmVhZHkgZW5kZWQKCiAgICAgICAgaWYoY3VycmVudFByb3Bvc2FsLnlheSA+IGN1cnJlbnRQcm9wb3NhbC5uYXkgJiYgY3VycmVudFByb3Bvc2FsLnZhbHVlTW9kID4gMCkgewogICAgICAgICAgICAvL1ZvdGUgd2FzIGFjY2VwdGVkCiAgICAgICAgICAgIEFjY291bnQgc3RvcmFnZSBhY2NvdW50ID0gdXBkYXRlQWNjb3VudChvd25lciwgVXBkYXRlTW9kZS5Cb3RoKTsKICAgICAgICAgICAgdWludDI1NiB2YWx1ZU1vZCA9IGN1cnJlbnRQcm9wb3NhbC52YWx1ZU1vZDsKICAgICAgICAgICAgYWNjb3VudC52YWx1ZU1vZCA9IGFjY291bnQudmFsdWVNb2QuYWRkKHZhbHVlTW9kKTsgLy9hZGQgdG9rZW5zIHRvIG93bmVyCiAgICAgICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKHZhbHVlTW9kKTsKICAgICAgICAgICAgbG9ja2VkVG9rZW5zID0gbG9ja2VkVG9rZW5zLnN1Yih2YWx1ZU1vZCk7CiAgICAgICAgfSBlbHNlIGlmKGN1cnJlbnRQcm9wb3NhbC55YXkgPD0gY3VycmVudFByb3Bvc2FsLm5heSkgewogICAgICAgICAgICAvL2luIGNhc2Ugb2YgYSBuZWdhdGl2ZSB2b3RlLCBzZXQgdGhlIHRpbWUgb2YgdGhpcyBuZWdhdGl2ZQogICAgICAgICAgICAvL3ZvdGUgdG8gdGhlIGVuZCBvZiB0aGUgbmVnYXRpdmUgdm90aW5nIHBlcmlvZC4KICAgICAgICAgICAgLy9UaGlzIHdpbGwgcHJldmVudCBhbnkgbmV3IHZvdGluZyB0byBiZSBjb25kdWN0ZWQuCiAgICAgICAgICAgIGxhc3ROZWdhdGl2ZVZvdGluZyA9IGN1cnJlbnRQcm9wb3NhbC5zdGFydFRpbWUuYWRkKHZvdGluZ0R1cmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIGN1cnJlbnRQcm9wb3NhbDsgLy9wcm9wb3NhbCBlbmRlZAogICAgfQoKICAgIGZ1bmN0aW9uIGlzUHJvcG9zYWxBY3RpdmUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgIHsKICAgICAgICByZXR1cm4gY3VycmVudFByb3Bvc2FsLmhhc2ggIT0gYnl0ZXMzMigwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1ZvdGVPbmdvaW5nKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpICB7CiAgICAgICAgcmV0dXJuIGlzUHJvcG9zYWxBY3RpdmUoKQogICAgICAgICAgICAmJiBub3cgPj0gY3VycmVudFByb3Bvc2FsLnN0YXJ0VGltZQogICAgICAgICAgICAmJiBub3cgPCBjdXJyZW50UHJvcG9zYWwuc3RhcnRUaW1lLmFkZCh2b3RpbmdEdXJhdGlvbik7CiAgICAgICAgLy9pdHMgc2FmZSB0byB1c2UgaXQgZm9yIGxvbmdlciBwZXJpb2RzOgogICAgICAgIC8vaHR0cHM6Ly9ldGhlcmV1bS5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvNjc5NS9pcy1ibG9jay10aW1lc3RhbXAtc2FmZS1mb3ItbG9uZ2VyLXRpbWUtcGVyaW9kcwogICAgfQoKICAgIGZ1bmN0aW9uIGlzVm90aW5nUGhhc2VPdmVyKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpICB7CiAgICAgICAgLy9pdHMgc2FmZSB0byB1c2UgaXQgZm9yIGxvbmdlciBwZXJpb2RzOgogICAgICAgIC8vaHR0cHM6Ly9ldGhlcmV1bS5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvNjc5NS9pcy1ibG9jay10aW1lc3RhbXAtc2FmZS1mb3ItbG9uZ2VyLXRpbWUtcGVyaW9kcwogICAgICAgIHJldHVybiBub3cgPj0gY3VycmVudFByb3Bvc2FsLnN0YXJ0VGltZS5hZGQodm90aW5nRHVyYXRpb24pOwogICAgfQoKICAgIC8vKioqKioqKioqKioqKioqKioqKioqKiogTWludGluZyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzW10gX3JlY2lwaWVudCwgdWludDI1NltdIF92YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOyAvL29ubHkgb3duZXIgY2FuIGNsYWltIHByb3Bvc2FsCiAgICAgICAgcmVxdWlyZSghbWludERvbmUpOyAvL29ubHkgZHVyaW5nIG1pbnRpbmcKICAgICAgICAvL3JlcXVpcmUoX3JlY2lwaWVudC5sZW5ndGggPT0gX3ZhbHVlLmxlbmd0aCk7IC8vaW5wdXQgbmVlZCB0byBiZSBvZiBzYW1lIHNpemUKICAgICAgICAvL3dlIGtub3cgd2hhdCB3ZSBhcmUgZG9pbmcuLi4gcmVtb3ZlIGNoZWNrIHRvIHNhdmUgZ2FzCgogICAgICAgIC8vd2Ugd2FudCB0byBtaW50IGEgY291cGxlIG9mIGFjY291bnRzCiAgICAgICAgZm9yICh1aW50OCBpPTA7IGk8X3JlY2lwaWVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAKICAgICAgICAgICAgLy9yZXF1aXJlKGxvY2tlZFRva2Vucy5hZGQodG90YWxTdXBwbHkpLmFkZChfdmFsdWVbaV0pIDw9IG1heFRva2Vucyk7CiAgICAgICAgICAgIC8vZG8gdGhlIGNoZWNrIGluIHRoZSBtaW50RG9uZQoKICAgICAgICAgICAgLy8xMjEgZ2FzIGNhbiBiZSBzYXZlZCBieSBjcmVhdGluZyB0ZW1wb3JhcnkgdmFyaWFibGVzCiAgICAgICAgICAgIGFkZHJlc3MgdG1wUmVjaXBpZW50ID0gX3JlY2lwaWVudFtpXTsKICAgICAgICAgICAgdWludCB0bXBWYWx1ZSA9IF92YWx1ZVtpXTsKCiAgICAgICAgICAgIC8vbm8gbmVlZCB0byB1cGRhdGUgYWNjb3VudCwgYXMgd2UgaGF2ZSBub3Qgc2V0IG1pbnRpbmcgdG8gdHJ1ZS4gVGhpcyBtZWFucwogICAgICAgICAgICAvL25vYm9keSBjYW4gc3RhcnQgYSBwcm9wb3NhbCAoaXNWb3RlT25nb2luZygpIGlzIGFsd2F5cyBmYWxzZSkgYW5kIGFpcmRyb3AKICAgICAgICAgICAgLy9jYW5ub3QgYmUgZG9uZSBlaXRoZXIgdG90YWxEcm9wUGVyVW5sb2NrZWRUb2tlbiBpcyAwIHRodXMsIGJvbnVzIGlzIGFsd2F5cwogICAgICAgICAgICAvL3plcm8uCiAgICAgICAgICAgIEFjY291bnQgc3RvcmFnZSBhY2NvdW50ID0gYWNjb3VudHNbdG1wUmVjaXBpZW50XTsKICAgICAgICAgICAgYWNjb3VudC52YWx1ZU1vZCA9IGFjY291bnQudmFsdWVNb2QuYWRkKHRtcFZhbHVlKTsKICAgICAgICAgICAgLy9pZiB0aGlzIHJlbWFpbnMgMCwgd2UgY2Fubm90IGNhbGN1bGF0ZSB0aGUgdGltZSBwZXJpb2Qgd2hlbiB0aGUgdXNlciBjbGFpbWVkCiAgICAgICAgICAgIC8vaGlzIGFpcmRyb3AsIHRodXMsIHNldCBpdCB0byBub3cKICAgICAgICAgICAgYWNjb3VudC5sYXN0QWlyZHJvcENsYWltVGltZSA9IG5vdzsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQodG1wVmFsdWUpOyAvL2NyZWF0ZSB0aGUgdG9rZW5zIGFuZCBhZGQgdG8gcmVjaXBpZW50CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRtcFJlY2lwaWVudCwgdG1wVmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaW50RG9uZSgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICByZXF1aXJlKCFtaW50RG9uZSk7IC8vb25seSBpbiBtaW50aW5nIHBoYXNlCiAgICAgICAgLy9oZXJlIHdlIGNoZWNrIHRoYXQgd2UgbmV2ZXIgZXhjZWVkIHRoZSAzMG1pbyBtYXggdG9rZW5zLiBUaGlzIGluY2x1ZGVzCiAgICAgICAgLy90aGUgbG9ja2VkIGFuZCB0aGUgdW5sb2NrZWQgdG9rZW5zLgogICAgICAgIHJlcXVpcmUobG9ja2VkVG9rZW5zLmFkZCh0b3RhbFN1cHBseSkgPD0gbWF4VG9rZW5zKTsKICAgICAgICBtaW50RG9uZSA9IHRydWU7IC8vZW5kIHRoZSBtaW50aW5nCiAgICB9CgogICAgLy91cGRhdGVzIGFuIGFjY291bnQgZm9yIHZvdGluZyBvciBhaXJkcm9wIG9yIGJvdGguIFRoaXMgaXMgcmVxdWlyZWQgdG8gYmUgYWJsZSB0byBmaXggdGhlIGFtb3VudCBvZiB0b2tlbnMgYmVmb3JlCiAgICAvL2Egdm90ZSBvciBhaXJkcm9wIGhhcHBlbmQuCiAgICBmdW5jdGlvbiB1cGRhdGVBY2NvdW50KGFkZHJlc3MgX2FkZHIsIFVwZGF0ZU1vZGUgbW9kZSkgaW50ZXJuYWwgcmV0dXJucyAoQWNjb3VudCBzdG9yYWdlKXsKICAgICAgICBBY2NvdW50IHN0b3JhZ2UgYWNjb3VudCA9IGFjY291bnRzW19hZGRyXTsKICAgICAgICBpZihtb2RlID09IFVwZGF0ZU1vZGUuVm90ZSB8fCBtb2RlID09IFVwZGF0ZU1vZGUuQm90aCkgewogICAgICAgICAgICBpZihpc1ZvdGVPbmdvaW5nKCkgJiYgYWNjb3VudC5sYXN0UHJvcG9zYWxTdGFydFRpbWUgPCBjdXJyZW50UHJvcG9zYWwuc3RhcnRUaW1lKSB7Ly8gdGhlIHVzZXIgZGlkIHNldCBoaXMgdG9rZW4gcG93ZXIgeWV0CiAgICAgICAgICAgICAgICBhY2NvdW50LnZhbHVlTW9kVm90ZSA9IGFjY291bnQudmFsdWVNb2Q7CiAgICAgICAgICAgICAgICBhY2NvdW50Lmxhc3RQcm9wb3NhbFN0YXJ0VGltZSA9IGN1cnJlbnRQcm9wb3NhbC5zdGFydFRpbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKG1vZGUgPT0gVXBkYXRlTW9kZS5XZWkgfHwgbW9kZSA9PSBVcGRhdGVNb2RlLkJvdGgpIHsKICAgICAgICAgICAgdWludDI1NiBib251cyA9IHRvdGFsRHJvcFBlclVubG9ja2VkVG9rZW4uc3ViKGFjY291bnQubGFzdEFpcmRyb3BXZWkpOwogICAgICAgICAgICBpZihib251cyAhPSAwKSB7CiAgICAgICAgICAgICAgICBhY2NvdW50LmJvbnVzV2VpID0gYWNjb3VudC5ib251c1dlaS5hZGQoYm9udXMubXVsKGFjY291bnQudmFsdWVNb2QpKTsKICAgICAgICAgICAgICAgIGFjY291bnQubGFzdEFpcmRyb3BXZWkgPSB0b3RhbERyb3BQZXJVbmxvY2tlZFRva2VuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYWNjb3VudDsKICAgIH0KCiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqIEFpcmRyb3AgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAvL2RlZmF1bHQgZnVuY3Rpb24gdG8gcGF5IGJvbnVzLCBhbnlib2R5IHRoYXQgc2VuZHMgZXRoIHRvIHRoaXMgY29udHJhY3Qgd2lsbCBkaXN0cmlidXRlIHRoZSB3ZWkKICAgIC8vdG8gdGhlaXIgdG9rZW4gaG9sZGVycwogICAgLy9EaXZpZGVuZCBwYXltZW50IC8gQWlyZHJvcAogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtaW50RG9uZSk7IC8vbWludGluZyBuZWVkcyB0byBiZSBvdmVyCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsgLy9FVEggcGF5bWVudCBuZWVkIHRvIGJlIG9uZS13YXkgb25seSwgZnJvbSBtb2R1bSB0byB0b2tlbmhvbGRlcnMsIGNvbmZpcm1lZCBieSBMeWtrZQogICAgICAgIHBheW91dChtc2cudmFsdWUpOwogICAgfQogICAgCiAgICAvL2FueWJvZHkgY2FuIHBheSBhbmQgYWRkIGFkZHJlc3MgdGhhdCB3aWxsIGJlIGNoZWNrZWQgaWYgdGhleQogICAgLy9jYW4gYmUgYWRkZWQgdG8gdGhlIGJvbnVzCiAgICBmdW5jdGlvbiBwYXlCb251cyhhZGRyZXNzW10gX2FkZHIpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOyAgLy9FVEggcGF5bWVudCBuZWVkIHRvIGJlIG9uZS13YXkgb25seSwgZnJvbSBtb2R1bSB0byB0b2tlbmhvbGRlcnMsIGNvbmZpcm1lZCBieSBMeWtrZQogICAgICAgIHVpbnQyNTYgdG90YWxXZWkgPSAwOwogICAgICAgIGZvciAodWludDggaT0wOyBpPF9hZGRyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIEFjY291bnQgc3RvcmFnZSBhY2NvdW50ID0gdXBkYXRlQWNjb3VudChfYWRkcltpXSwgVXBkYXRlTW9kZS5XZWkpOwogICAgICAgICAgICBpZihub3cgPj0gYWNjb3VudC5sYXN0QWlyZHJvcENsYWltVGltZSArIHJlZGlzdHJpYnV0aW9uVGltZW91dCkgewogICAgICAgICAgICAgICAgdG90YWxXZWkgKz0gYWNjb3VudC5ib251c1dlaTsKICAgICAgICAgICAgICAgIGFjY291bnQuYm9udXNXZWkgPSAwOwogICAgICAgICAgICAgICAgYWNjb3VudC5sYXN0QWlyZHJvcENsYWltVGltZSA9IG5vdzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHBheW91dChtc2cudmFsdWUuYWRkKHRvdGFsV2VpKSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHBheW91dCh1aW50MjU2IHZhbHVlV2VpKSBpbnRlcm5hbCB7CiAgICAgICAgdWludDI1NiB2YWx1ZSA9IHZhbHVlV2VpLmFkZChyb3VuZGluZyk7IC8vYWRkIG9sZCByb3VuZGluZwogICAgICAgIHJvdW5kaW5nID0gdmFsdWUgJSB0b3RhbFN1cHBseTsgLy9lbnN1cmUgbm8gcm91bmRpbmcgZXJyb3IKICAgICAgICB1aW50MjU2IHdlaVBlclRva2VuID0gdmFsdWUuc3ViKHJvdW5kaW5nKS5kaXYodG90YWxTdXBwbHkpOwogICAgICAgIHRvdGFsRHJvcFBlclVubG9ja2VkVG9rZW4gPSB0b3RhbERyb3BQZXJVbmxvY2tlZFRva2VuLmFkZCh3ZWlQZXJUb2tlbik7IC8vYWNjb3VudCBmb3IgbG9ja2VkIHRva2VucyBhbmQgYWRkIHRoZSBkcm9wCiAgICAgICAgUGF5b3V0KHdlaVBlclRva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzaG93Qm9udXMoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGJvbnVzID0gdG90YWxEcm9wUGVyVW5sb2NrZWRUb2tlbi5zdWIoYWNjb3VudHNbX2FkZHJdLmxhc3RBaXJkcm9wV2VpKTsKICAgICAgICBpZihib251cyAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybiBhY2NvdW50c1tfYWRkcl0uYm9udXNXZWkuYWRkKGJvbnVzLm11bChhY2NvdW50c1tfYWRkcl0udmFsdWVNb2QpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFjY291bnRzW19hZGRyXS5ib251c1dlaTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGFpbUJvbnVzKCkgcHVibGljIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKG1pbnREb25lKTsgLy9taW50aW5nIG5lZWRzIHRvIGJlIG92ZXIKCiAgICAgICAgQWNjb3VudCBzdG9yYWdlIGFjY291bnQgPSB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIsIFVwZGF0ZU1vZGUuV2VpKTsKICAgICAgICB1aW50MjU2IHNlbmRWYWx1ZSA9IGFjY291bnQuYm9udXNXZWk7IC8vZmV0Y2ggdGhlIHZhbHVlcwoKICAgICAgICBpZihzZW5kVmFsdWUgIT0gMCkgewogICAgICAgICAgICBhY2NvdW50LmJvbnVzV2VpID0gMDsgLy9zZXQgdG8gemVybyAoYmVmb3JlLCBhZ2FpbnN0IHJlZW50cnkpCiAgICAgICAgICAgIGFjY291bnQubGFzdEFpcmRyb3BDbGFpbVRpbWUgPSBub3c7IC8vbWFyayBhcyBjb2xsZWN0ZWQgbm93CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoc2VuZFZhbHVlKTsgLy9zZW5kIHRoZSBib251cyB0byB0aGUgY29ycmVjdCBhY2NvdW50CiAgICAgICAgICAgIHJldHVybiBzZW5kVmFsdWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVSQzIwICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKICAgIC8vIEdldCB0aGUgYWNjb3VudCBiYWxhbmNlIG9mIGFub3RoZXIgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXS52YWx1ZU1vZDsKICAgIH0KCiAgICAvLyBTZW5kIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zIHRvIGFkZHJlc3MgX3RvCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKG1pbnREb25lKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIEFjY291bnQgbWVtb3J5IHRtcEZyb20gPSBhY2NvdW50c1ttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKHRtcEZyb20udmFsdWVNb2QgPj0gX3ZhbHVlKTsKCiAgICAgICAgQWNjb3VudCBzdG9yYWdlIGZyb20gPSB1cGRhdGVBY2NvdW50KG1zZy5zZW5kZXIsIFVwZGF0ZU1vZGUuQm90aCk7CiAgICAgICAgQWNjb3VudCBzdG9yYWdlIHRvID0gdXBkYXRlQWNjb3VudChfdG8sIFVwZGF0ZU1vZGUuQm90aCk7CiAgICAgICAgZnJvbS52YWx1ZU1vZCA9IGZyb20udmFsdWVNb2Quc3ViKF92YWx1ZSk7CiAgICAgICAgdG8udmFsdWVNb2QgPSB0by52YWx1ZU1vZC5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKG1pbnREb25lKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIEFjY291bnQgbWVtb3J5IHRtcEZyb20gPSBhY2NvdW50c1tfZnJvbV07CiAgICAgICAgcmVxdWlyZSh0bXBGcm9tLnZhbHVlTW9kID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwoKICAgICAgICBBY2NvdW50IHN0b3JhZ2UgZnJvbSA9IHVwZGF0ZUFjY291bnQoX2Zyb20sIFVwZGF0ZU1vZGUuQm90aCk7CiAgICAgICAgQWNjb3VudCBzdG9yYWdlIHRvID0gdXBkYXRlQWNjb3VudChfdG8sIFVwZGF0ZU1vZGUuQm90aCk7CiAgICAgICAgZnJvbS52YWx1ZU1vZCA9IGZyb20udmFsdWVNb2Quc3ViKF92YWx1ZSk7CiAgICAgICAgdG8udmFsdWVNb2QgPSB0by52YWx1ZU1vZC5hZGQoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqIGFwcHJvdmUsIGFsbG93YW5jZSwgaW5jcmVhc2VBcHByb3ZhbCwgYW5kIGRlY3JlYXNlQXBwcm92YWwgdXNlZCBmcm9tOgogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvdG9rZW4vU3RhbmRhcmRUb2tlbi5zb2wKICAgIC8vCiAgICAvLyBjaGFuZ2VkIGZyb20gdWludCB0byB1aW50MjU2IGFzIHRoaXMgaXMgY29uc2lkZXJlZCB0byBiZSBiZXN0IHByYWN0aWNlLgoKICAgIC8qKgogICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICAqLwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKgogICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50MjU2IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
