Class {
	#name : #SRTb762a327203f57f2e1fe94049d4794b5a4271c6f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb762a327203f57f2e1fe94049d4794b5a4271c6f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7Ci8vIFdlIGhhdmUgdG8gc3BlY2lmeSB3aGF0IHZlcnNpb24gb2YgY29tcGlsZXIgdGhpcyBjb2RlIHdpbGwgY29tcGlsZSB3aXRoCgoKY29udHJhY3QgTWFyYmxlRWFydGggewoKCiAgc3RydWN0IE5ld01vb24gewoKICAgIHVpbnQgdGltZUFkZGVkOwogICAgTW9vblR5cGUgbW9vblR5cGU7CiAgICB1aW50NjQgdm90ZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHN1cHBvcnRNYXA7CgogIH0KCgogIGVudW0gTW9vblR5cGUgeyBWZXJpZmljYXRpb24sIFB1cmdlfQoKICBNUkJMVG9rZW4gdG9rZW5Db250cmFjdDsKICBWZXJpZmljYXRpb25Nb29uIHZlcmlmaWNhdGlvbkNvbnRyYWN0OwogIFB1cmdlTW9vbiBwdXJnZUNvbnRyYWN0OwoKICBhZGRyZXNzW10gYWRkcmVzc2VzOwogIGJ5dGVzMzJbXSBpZGVudGl0aWVzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYnl0ZXMzMikgdm90ZXJNYXA7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gTmV3TW9vbikgcHVibGljIHByb3Bvc2VkTW9vbnM7CiAgYWRkcmVzc1tdIHB1YmxpYyBwcm9wb3NlZE1vb25zSW5kZXg7CgogIGFkZHJlc3MgcHVibGljIHZlcmlmaWNhdGlvbkFkZHJlc3M7CiAgYWRkcmVzcyBwdWJsaWMgcHVyZ2VBZGRyZXNzOwogIGFkZHJlc3MgcHVibGljIHRva2VuQWRkcmVzczsKCiAgYWRkcmVzcyBwdWJsaWMgbGFzdFZlcmlmaWVkOwoKLy9jb25zdHJ1Y3RvcgoKICBmdW5jdGlvbiBNYXJibGVFYXJ0aChhZGRyZXNzIHZlcmlmaWNhdGlvbk1vb24sIGFkZHJlc3MgcHVyZ2VNb29uKSBwdWJsaWMgewoKICAgIHZlcmlmaWNhdGlvbk1vb24gPSB2ZXJpZmljYXRpb25Nb29uOwogICAgcHVyZ2VNb29uID0gcHVyZ2VNb29uOwoKICB9CgogIGZ1bmN0aW9uIHByb3Bvc2VOZXdNb29uKGFkZHJlc3MgbUFkZHJlc3MsIE1vb25UeXBlIG1vb25UeXBlKSBwdWJsaWMgIHsKICAgIAogICAgaWYgKChibG9jay50aW1lc3RhbXAgLSBwcm9wb3NlZE1vb25zW3Byb3Bvc2VkTW9vbnNJbmRleFswXV0udGltZUFkZGVkKSA+IDE3MjgwMCkgewoKICAgICAgZGVsZXRlIHByb3Bvc2VkTW9vbnNbcHJvcG9zZWRNb29uc0luZGV4WzBdXTsKICAgICAgZGVsZXRlIHByb3Bvc2VkTW9vbnNJbmRleFswXTsKCiAgICAgIH0KCiAgICBpZiAocHJvcG9zZWRNb29uc0luZGV4Lmxlbmd0aCA+PSAxMDAwKSB7CiAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcHJvcG9zZWRNb29uc1ttQWRkcmVzc10gPSBOZXdNb29uKGJsb2NrLnRpbWVzdGFtcCwgbW9vblR5cGUsIDEpOwogICAgICBwcm9wb3NlZE1vb25zSW5kZXgucHVzaChtQWRkcmVzcyk7CgogIH0KCgogIGZ1bmN0aW9uIHN1cHBvcnROZXdNb29uKGFkZHJlc3MgbmV3TW9vbkFkZHJlc3MpIHB1YmxpYyB7CgogICAgTmV3TW9vbiBzdG9yYWdlIG5ld01vb24gPSBwcm9wb3NlZE1vb25zW25ld01vb25BZGRyZXNzXTsKCiAgICBpZiAoIW5ld01vb24uc3VwcG9ydE1hcFttc2cuc2VuZGVyXSkgewogICAgICBuZXdNb29uLnN1cHBvcnRNYXBbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICBuZXdNb29uLnZvdGVzKys7CiAgICAgIHByb3Bvc2VkTW9vbnNbbmV3TW9vbkFkZHJlc3NdID0gbmV3TW9vbjsKICAgIH0KCiAgICB1aW50IHF1b3RpZW50ID0gKG5ld01vb24udm90ZXMqMTAwKS9hZGRyZXNzZXMubGVuZ3RoOwoKICAgIGlmIChxdW90aWVudCA+PSA2NykgewogICAgCiAgICAgIHJlcGxhY2VOZXdNb29uKG5ld01vb24sIG5ld01vb25BZGRyZXNzKTsKICAgIH0KCiAgfQoKICBmdW5jdGlvbiByZXBsYWNlTmV3TW9vbihOZXdNb29uIG5ld01vb24sIGFkZHJlc3MgbmV3TW9vbkFkZHJlc3MpIGludGVybmFsIHsKCiAgICAgIGlmIChuZXdNb29uLm1vb25UeXBlID09IE1vb25UeXBlLlZlcmlmaWNhdGlvbikgewogICAgICAgdmVyaWZpY2F0aW9uQWRkcmVzcyA9IG5ld01vb25BZGRyZXNzOwogICAgICB9CgogICAgICBlbHNlIGlmIChuZXdNb29uLm1vb25UeXBlID09IE1vb25UeXBlLlB1cmdlKSB7CiAgICAgICAgcHVyZ2VBZGRyZXNzID0gbmV3TW9vbkFkZHJlc3M7CiAgICAgIH0KCiAgICAgIGRlbGV0ZSBwcm9wb3NlZE1vb25zW25ld01vb25BZGRyZXNzXTsgCgogIH0KCiAgZnVuY3Rpb24gcHJvcG9zZVB1cmdlKGFkZHJlc3MgcHJvcG9zZWRBZGRyZXNzLCBieXRlczMyIHByb29mKSBwdWJsaWMgewoKICAgIHB1cmdlQ29udHJhY3QgPSBQdXJnZU1vb24ocHVyZ2VBZGRyZXNzKTsKICAgIHB1cmdlQ29udHJhY3QucHJvcG9zZShwcm9wb3NlZEFkZHJlc3MsIHByb29mLCBhZGRyZXNzZXMsIGlkZW50aXRpZXMpOwoKICB9CgogIGZ1bmN0aW9uIHByb3Bvc2VWb3RlcihieXRlczMyIHByb29mKSBwdWJsaWMgewoKICAgIHZlcmlmaWNhdGlvbkNvbnRyYWN0ID0gVmVyaWZpY2F0aW9uTW9vbih2ZXJpZmljYXRpb25BZGRyZXNzKTsKICAgIHZlcmlmaWNhdGlvbkNvbnRyYWN0LnByb3Bvc2UobXNnLnNlbmRlciwgcHJvb2YsIGFkZHJlc3NlcywgaWRlbnRpdGllcyk7CgogIH0KCiAgZnVuY3Rpb24gYWRkVm90ZXIoYWRkcmVzcyB2b3RlckFkZHJlc3MsIGFkZHJlc3MgdmVyaWZpZXJBZGRyZXNzLCBieXRlczMyIGlkZW50aXR5KSBwdWJsaWMgewogICAgCiAgICBpZiAobXNnLnNlbmRlciAhPSB2ZXJpZmljYXRpb25BZGRyZXNzKQogICAgICByZXR1cm47CgogICAgYWRkcmVzc2VzLnB1c2godm90ZXJBZGRyZXNzKTsKICAgIGlkZW50aXRpZXMucHVzaChpZGVudGl0eSk7CiAgICB2b3Rlck1hcFt2b3RlckFkZHJlc3NdID0gaWRlbnRpdHk7CgogICAgdG9rZW5Db250cmFjdCA9IE1SQkxUb2tlbih0b2tlbkFkZHJlc3MpOwogICAgdG9rZW5Db250cmFjdC50cmFuc2Zlcih2b3RlckFkZHJlc3MsIG5ld1ZvdGVyQWxsb2NhdGlvbigpKTsKICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodmVyaWZpZXJBZGRyZXNzLCB2ZXJpZmllckFsbG9jYXRpb24oKSk7CiAgICBsYXN0VmVyaWZpZWQgPSB2b3RlckFkZHJlc3M7CgogIH0KCiAgZnVuY3Rpb24gZ2V0QmFsYW5jZSgpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IE1SQkxUb2tlbih0b2tlbkFkZHJlc3MpOyAgICAgICAgICAgIAogICAgICAgIHJldHVybiB0b2tlbkNvbnRyYWN0LmdldEJhbGFuY2UodGhpcyk7CiAgICB9CgogICAgZnVuY3Rpb24gdmVyaWZpZXJBbGxvY2F0aW9uKCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgIAogICAgICB1aW50IGNvbnRyYWN0QmFsYW5jZSA9IGdldEJhbGFuY2UoKTsKICAgICAgcmV0dXJuICgtY29udHJhY3RCYWxhbmNlKmFkZHJlc3Nlcy5sZW5ndGgvMTAwMDAwMDAwMDAwICsgMipjb250cmFjdEJhbGFuY2UvMTAwMDAwMDAwMDApKjEvNTsKCiAgICB9CgogIGZ1bmN0aW9uIG5ld1ZvdGVyQWxsb2NhdGlvbigpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgICAgdWludCBjb250cmFjdEJhbGFuY2UgPSBnZXRCYWxhbmNlKCk7CiAgICAgICAgICAgaWYgKGFkZHJlc3Nlcy5sZW5ndGggPCAxMDAwMDAwKSB7cnVuTG90dGVyeShjb250cmFjdEJhbGFuY2UpOyB9CgogICAgICByZXR1cm4gKC1jb250cmFjdEJhbGFuY2UqYWRkcmVzc2VzLmxlbmd0aC8xMDAwMDAwMDAwMDAgKyAyKmNvbnRyYWN0QmFsYW5jZS8xMDAwMDAwMDAwMCkqNC81OwoKICB9CgogIGZ1bmN0aW9uIHJ1bkxvdHRlcnkodWludCBjb250cmFjdEJhbGFuY2UpIGludGVybmFsIHsKCiAgICAgICAgICAgIGJ5dGVzMzIgYmxvY2tIYXNoID0gYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlcik7CiAgICAgICAgICAgIGJ5dGVzMzIgcmFuZG9tSGFzaCA9IGtlY2NhazI1NihsYXN0VmVyaWZpZWQsIGJsb2NrSGFzaCk7CiAgICAgICAgICAgIHVpbnQgaGFzaE51bWJlciA9IHVpbnQocmFuZG9tSGFzaCk7CiAgICAgCiAgICAgICAgaWYgKGFkZHJlc3Nlcy5sZW5ndGggPCAxMDAwICYmIGhhc2hOdW1iZXIgPCAyKioyNDYpIHsKICAgICAgICAgICAgIHRva2VuQ29udHJhY3QgPSBNUkJMVG9rZW4odG9rZW5BZGRyZXNzKTsKICAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIobGFzdFZlcmlmaWVkLCBjb250cmFjdEJhbGFuY2UvNSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGhhc2hOdW1iZXIgPCAyKioyMzYpICB7CiAgICAgICAgICAgICB0b2tlbkNvbnRyYWN0ID0gTVJCTFRva2VuKHRva2VuQWRkcmVzcyk7CiAgICAgICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKGxhc3RWZXJpZmllZCwgY29udHJhY3RCYWxhbmNlLzUpOwogICAgICAgfQoKICB9CgogIGZ1bmN0aW9uIHB1cmdlVm90ZXIoYWRkcmVzcyBwdXJnZWRBZGRyZXNzLCB1aW50IGFycmF5SW5kZXgpIHB1YmxpYyB7CiAgICAKICAgIGlmIChtc2cuc2VuZGVyICE9IHB1cmdlQWRkcmVzcykKICAgICAgcmV0dXJuOwoKICAgIGlmIChhZGRyZXNzZXNbYXJyYXlJbmRleF0gIT0gcHVyZ2VkQWRkcmVzcykKICAgICAgcmV0dXJuOwoKICAgICAgZGVsZXRlIGFkZHJlc3Nlc1thcnJheUluZGV4XTsKICAgICAgZGVsZXRlIGlkZW50aXRpZXNbYXJyYXlJbmRleF07CiAgICAgIGRlbGV0ZSB2b3Rlck1hcFtwdXJnZWRBZGRyZXNzXTsKCiAgfQoKfQoKCmNvbnRyYWN0IFZlcmlmaWNhdGlvbk1vb24gewogIAogICAgc3RydWN0IE5ld1ZvdGVyIHsKCgogICAgICB1aW50IHRpbWVBZGRlZDsKICAgICAgdWludDY0IHZvdGVzOwogICAgICBieXRlczMyIGFyZ3VtZW50OwogICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHN1cHBvcnRNYXA7CgoKICB9CgogIGFkZHJlc3MgcHVibGljIG1hcmJsZUVhcnRoQWRkcmVzczsKICBtYXBwaW5nIChhZGRyZXNzID0+IE5ld1ZvdGVyKSBwdWJsaWMgcHJvcG9zZWRWb3RlcnM7CiAgdWludDE2IHB1YmxpYyBudW1iZXJPZlByb3Bvc2VkOwogIGFkZHJlc3NbXSBwdWJsaWMgdm90ZXJBZGRyZXNzZXM7CiAgYnl0ZXMzMltdIHB1YmxpYyB2b3RlcklkZW50aXRpZXM7CgogIGZ1bmN0aW9uIHByb3Bvc2UoYWRkcmVzcyBzZWxmUHJvcG9zZWQsIGJ5dGVzMzIgYXJndW1lbnQsIGFkZHJlc3NbXSBhZGRyZXNzZXMsIGJ5dGVzMzJbXSBpZGVudGl0aWVzKSBwdWJsaWMgewoKICAgIGlmIChtc2cuc2VuZGVyICE9IG1hcmJsZUVhcnRoQWRkcmVzcykKICAgICAgcmV0dXJuOwoKICAgIHZvdGVyQWRkcmVzc2VzID0gYWRkcmVzc2VzOwogICAgdm90ZXJJZGVudGl0aWVzID0gaWRlbnRpdGllczsKCiAgICBpZiAoYWRkcmVzc2VzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgYWRkVm90ZXIoc2VsZlByb3Bvc2VkLCBzZWxmUHJvcG9zZWQsIGFyZ3VtZW50KTsKICAgIH0KICAgIGVsc2UgewoKICAgIE5ld1ZvdGVyIG1lbW9yeSBuZXdWb3RlcjsKICAgIG5ld1ZvdGVyLmFyZ3VtZW50ID0gYXJndW1lbnQ7CiAgICBuZXdWb3Rlci50aW1lQWRkZWQgPSBibG9jay50aW1lc3RhbXA7CiAgICBwcm9wb3NlZFZvdGVyc1tzZWxmUHJvcG9zZWRdID0gbmV3Vm90ZXI7CgogICAgfQoKICB9CgogIGZ1bmN0aW9uIGFkZFZvdGVyKGFkZHJlc3MgdmVyaWZpZWRBZGRyZXNzLGFkZHJlc3MgdmVyaWZpZXJBZGRyZXNzLCBieXRlczMyIGFyZ3VtZW50KSBpbnRlcm5hbCB7CgogICAgICAgICBNYXJibGVFYXJ0aCBtYXJibGVFYXJ0aCA9IE1hcmJsZUVhcnRoKG1hcmJsZUVhcnRoQWRkcmVzcyk7CiAgICAgICAgIG1hcmJsZUVhcnRoLmFkZFZvdGVyKHZlcmlmaWVkQWRkcmVzcywgdmVyaWZpZXJBZGRyZXNzLCBhcmd1bWVudCk7CgogIH0KCiAgZnVuY3Rpb24gc3VwcG9ydE5ld1ZvdGVyKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyB7CgogICAgaWYgKChibG9jay50aW1lc3RhbXAgLSBwcm9wb3NlZFZvdGVyc1swXS50aW1lQWRkZWQpID4gNjA0ODAwKSB7CgogICAgICBkZWxldGUgcHJvcG9zZWRWb3RlcnNbMF07CiAgICAgIG51bWJlck9mUHJvcG9zZWQtLTsKCiAgICAgIH0KCiAgICBpZiAobnVtYmVyT2ZQcm9wb3NlZCA+PSAxMDAwKSB7CgogICAgICByZXR1cm47CgogICAgICB9CgogICAgaWYgKCFwcm9wb3NlZFZvdGVyc1tfYWRkcmVzc10uc3VwcG9ydE1hcFttc2cuc2VuZGVyXSkgewogICAgICBwcm9wb3NlZFZvdGVyc1tfYWRkcmVzc10uc3VwcG9ydE1hcFttc2cuc2VuZGVyXSA9IHRydWU7CiAgICAgIHByb3Bvc2VkVm90ZXJzW19hZGRyZXNzXS52b3RlcysrOwogICAgICBudW1iZXJPZlByb3Bvc2VkKys7CgogICAgfQoKICAgIGlmIChwcm9wb3NlZFZvdGVyc1tfYWRkcmVzc10udm90ZXMqMTAwIC8gdm90ZXJBZGRyZXNzZXMubGVuZ3RoID4gNTApIHsKCiAgICAgICAgYWRkVm90ZXIoX2FkZHJlc3MsIG1zZy5zZW5kZXIsIHByb3Bvc2VkVm90ZXJzW19hZGRyZXNzXS5hcmd1bWVudCk7CiAgICAgICAgZGVsZXRlIHByb3Bvc2VkVm90ZXJzW19hZGRyZXNzXTsKICAgICAgICBudW1iZXJPZlByb3Bvc2VkLS07CgogICAgfQogIH0KfQoKY29udHJhY3QgUHVyZ2VNb29uIHsKICAKICAgIHN0cnVjdCBOZXdQdXJnZSB7CgogICAgICB1aW50IHRpbWVBZGRlZDsKICAgICAgdWludDY0IHZvdGVzOwogICAgICBieXRlczMyIGFyZ3VtZW50OwogICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHN1cHBvcnRNYXA7CgogIH0KCiAgYWRkcmVzcyBwdWJsaWMgbWFyYmxlRWFydGhBZGRyZXNzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gTmV3UHVyZ2UpIHB1YmxpYyBwcm9wb3NlZFB1cmdlczsKICB1aW50MTYgcHVibGljIG51bWJlck9mUHJvcG9zZWQ7CiAgYWRkcmVzc1tdIHB1YmxpYyB2b3RlckFkZHJlc3NlczsKICBieXRlczMyW10gcHVibGljIHZvdGVySWRlbnRpdGllczsKCiAgZnVuY3Rpb24gcHJvcG9zZShhZGRyZXNzIHByb3Bvc2VkLCBieXRlczMyIGFyZ3VtZW50LCBhZGRyZXNzW10gYWRkcmVzc2VzLCBieXRlczMyW10gaWRlbnRpdGllcykgcHVibGljIHsKCiAgICBpZiAobXNnLnNlbmRlciAhPSBtYXJibGVFYXJ0aEFkZHJlc3MpCiAgICAgIHJldHVybjsKCiAgICB2b3RlckFkZHJlc3NlcyA9IGFkZHJlc3NlczsKICAgIHZvdGVySWRlbnRpdGllcyA9IGlkZW50aXRpZXM7CgogICAgTmV3UHVyZ2UgbWVtb3J5IG5ld1B1cmdlOwogICAgbmV3UHVyZ2UuYXJndW1lbnQgPSBhcmd1bWVudDsKICAgIG5ld1B1cmdlLnRpbWVBZGRlZCA9IGJsb2NrLnRpbWVzdGFtcDsKICAgIHByb3Bvc2VkUHVyZ2VzW3Byb3Bvc2VkXSA9IG5ld1B1cmdlOwoKICB9CgogIGZ1bmN0aW9uIHB1cmdlVm90ZXIoYWRkcmVzcyBwdXJnZWRBZGRyZXNzLCB1aW50IGFycmF5SW5kZXgpIGludGVybmFsIHsKCiAgICAgICAgIE1hcmJsZUVhcnRoIG1hcmJsZUVhcnRoID0gTWFyYmxlRWFydGgobWFyYmxlRWFydGhBZGRyZXNzKTsKICAgICAgICAgbWFyYmxlRWFydGgucHVyZ2VWb3RlcihwdXJnZWRBZGRyZXNzLCBhcnJheUluZGV4KTsKCiAgfQoKICBmdW5jdGlvbiBzdXBwb3J0TmV3UHVyZ2UoYWRkcmVzcyBfYWRkcmVzcywgdWludCBhcnJheUluZGV4KSBwdWJsaWMgewoKICAgIGlmICgoYmxvY2sudGltZXN0YW1wIC0gcHJvcG9zZWRQdXJnZXNbMF0udGltZUFkZGVkKSA+IDYwNDgwMCkgewoKICAgICAgZGVsZXRlIHByb3Bvc2VkUHVyZ2VzWzBdOwogICAgICBudW1iZXJPZlByb3Bvc2VkLS07CgogICAgICB9CgogICAgaWYgKG51bWJlck9mUHJvcG9zZWQgPj0gMTAwMCkgewoKICAgICAgcmV0dXJuOwoKICAgICAgfQoKICAgIGlmICghcHJvcG9zZWRQdXJnZXNbX2FkZHJlc3NdLnN1cHBvcnRNYXBbbXNnLnNlbmRlcl0pIHsKICAgICAgcHJvcG9zZWRQdXJnZXNbX2FkZHJlc3NdLnN1cHBvcnRNYXBbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICBwcm9wb3NlZFB1cmdlc1tfYWRkcmVzc10udm90ZXMrKzsKICAgICAgbnVtYmVyT2ZQcm9wb3NlZCsrOwoKICAgIH0KCiAgICBpZiAocHJvcG9zZWRQdXJnZXNbX2FkZHJlc3NdLnZvdGVzKjEwMCAvIHZvdGVyQWRkcmVzc2VzLmxlbmd0aCA+IDUwKSB7CgogICAgICAgIHB1cmdlVm90ZXIoX2FkZHJlc3MsIGFycmF5SW5kZXgpOwogICAgICAgIGRlbGV0ZSBwcm9wb3NlZFB1cmdlc1tfYWRkcmVzc107CiAgICAgICAgbnVtYmVyT2ZQcm9wb3NlZC0tOwoKICAgIH0KICB9Cn0KCgppbnRlcmZhY2UgdG9rZW5SZWNpcGllbnQgeyBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKSBleHRlcm5hbDsgfQoKY29udHJhY3QgTVJCTFRva2VuIHsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJNYXJibGUiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiTVJCTCI7CiAgICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDE4OwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAxMDAqMTAwMCoxMDAwKjEwMDAqMTAqKmRlY2ltYWxzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBNUkJMVG9rZW4oKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAgICAgICAgICAgICAgICAKICAgIH0KCgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsKICAgICAgICB1aW50IHByZXZpb3VzQmFsYW5jZXMgPSBiYWxhbmNlT2ZbX2Zyb21dICsgYmFsYW5jZU9mW190b107CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYmFsYW5jZU9mW190b10gKz0gX3ZhbHVlOwogICAgICAgIGVtaXQgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2UoYWRkcmVzcyBfYWRkcmVzcykgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBiYWxhbmNlT2ZbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsgICAgIAogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIHB1YmxpYwogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHRva2VuUmVjaXBpZW50IHNwZW5kZXIgPSB0b2tlblJlY2lwaWVudChfc3BlbmRlcik7CiAgICAgICAgaWYgKGFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSkpIHsKICAgICAgICAgICAgc3BlbmRlci5yZWNlaXZlQXBwcm92YWwobXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsgICAKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOyAgICAgICAgICAgIAogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgZW1pdCBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGJ1cm5Gcm9tKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgIAogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7ICAgICAgICAgICAgIAogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBlbWl0IEJ1cm4oX2Zyb20sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
