Class {
	#name : #SRTdbd5f2fa4ab9f59feb26612a2a54f1bf363fadfd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdbd5f2fa4ab9f59feb26612a2a54f1bf363fadfd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgoKLyoqCiAqIE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludCBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICBpZiAoIWFzc2VydGlvbikgewogICAgICB0aHJvdzsKICAgIH0KICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogIC8qKgogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICB0aHJvdzsKICAgICB9CiAgICAgXzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKCgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKCgoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludCB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgoKCgoKLy8vIEB0aXRsZSBUUkEgUHJvdG9jb2wgVG9rZW4uCmNvbnRyYWN0IFRSQVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBOQU1FID0gIlRSQUNvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiVFJBIjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IERFQ0lNQUxTID0gMTg7CgogICAgLy8vIER1cmluZyB0b2tlbiBzYWxlLCB3ZSB1c2Ugb25lIGNvbnNpc3RlbnQgcHJpY2U6IDUwMDAwIFRSQS9FVEguCiAgICAvLy8gV2Ugc3BsaXQgdGhlIGVudGlyZSB0b2tlbiBzYWxlIHBlcmlvZCBpbnRvIDMgcGhhc2VzLCBlYWNoCiAgICAvLy8gcGhhc2UgaGFzIGEgZGlmZmVyZW50IGJvbnVzIHNldHRpbmcgYXMgc3BlY2lmaWVkIGluIGBib251c1BlcmNlbnRhZ2VzYC4KICAgIC8vLyBUaGUgcmVhbCBwcmljZSBmb3IgcGhhc2UgaSBpcyBgKDEgKyBib251c1BlcmNlbnRhZ2VzW2ldLzEwMC4wKSAqIEJBU0VfUkFURWAuCiAgICAvLy8gVGhlIGZpcnN0IHBoYXNlIG9yIGVhcmx5LWJpcmQgcGhhc2UgaGFzIGEgbXVjaCBoaWdoZXIgYm9udXMuCiAgICB1aW50OFsxMF0gcHVibGljIGJvbnVzUGVyY2VudGFnZXMgPSBbCiAgICAgICAgMjAsCiAgICAgICAgMTAsCiAgICAgICAgMAogICAgXTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBOVU1fT0ZfUEhBU0UgPSAzOwogIAogICAgLy8vIEVhY2ggcGhhc2UgY29udGFpbnMgZXhhY3RseSAyOTAwMCBFdGhlcmV1bSBibG9ja3MsIHdoaWNoIGlzIHJvdWdobHkgNyBkYXlzLAogICAgLy8vIHdoaWNoIG1ha2VzIHRoaXMgMy1waGFzZSBzYWxlIHBlcmlvZCByb3VnaGx5IDIxIGRheXMuCiAgICB1aW50MTYgcHVibGljIGNvbnN0YW50IEJMT0NLU19QRVJfUEhBU0UgPSAyOTAwMDsKCiAgICAvLy8gVGhpcyBpcyB3aGVyZSB3ZSBob2xkIEVUSCBkdXJpbmcgdGhpcyB0b2tlbiBzYWxlLiBXZSB3aWxsIG5vdCB0cmFuc2ZlciBhbnkgRXRoZXIKICAgIC8vLyBvdXQgb2YgdGhpcyBhZGRyZXNzIGJlZm9yZSB3ZSBpbnZvY2F0ZSB0aGUgYGNsb3NlYCBmdW5jdGlvbiB0byBmaW5hbGl6ZSB0aGUgc2FsZS4gCiAgICAvLy8gVGhpcyBwcm9taXNlIGlzIG5vdCBndWFucmFudGVlZCBieSBzbWFydCBjb250cmFjdCBieSBjYW4gYmUgdmVyaWZpZWQgd2l0aCBwdWJsaWMKICAgIC8vLyBFdGhlcmV1bSB0cmFuc2FjdGlvbnMgZGF0YSBhdmFpbGFibGUgb24gc2V2ZXJhbCBibG9ja2NoYWluIGJyb3dzZXJzLgogICAgLy8vIFRoaXMgaXMgdGhlIG9ubHkgYWRkcmVzcyBmcm9tIHdoaWNoIGBzdGFydGAgYW5kIGBjbG9zZWAgY2FuIGJlIGludm9jYXRlZC4KICAgIC8vLyBOb3RlOiB0aGlzIHdpbGwgYmUgaW5pdGlhbGl6ZWQgZHVyaW5nIHRoZSBjb250cmFjdCBkZXBsb3ltZW50LgogICAgYWRkcmVzcyBwdWJsaWMgdGFyZ2V0OwoKICAgIC8vLyBgZmlyc3RibG9ja2Agc3BlY2lmaWVzIGZyb20gd2hpY2ggYmxvY2sgb3VyIHRva2VuIHNhbGUgc3RhcnRzLgogICAgLy8vIFRoaXMgY2FuIG9ubHkgYmUgbW9kaWZpZWQgb25jZSBieSB0aGUgb3duZXIgb2YgYHRhcmdldGAgYWRkcmVzcy4KICAgIHVpbnQgcHVibGljIGZpcnN0YmxvY2sgPSAwOwoKICAgIC8vLyBJbmRpY2F0ZXMgd2hldGhlciB1bnNvbGQgdG9rZW4gaGF2ZSBiZWVuIGlzc3VlZC4gVGhpcyBwYXJ0IG9mIFRSQSB0b2tlbgogICAgLy8vIGlzIG1hbmFnZWQgYnkgdGhlIHByb2plY3QgdGVhbSBhbmQgaXMgaXNzdWVkIGRpcmVjdGx5IHRvIGB0YXJnZXRgLgogICAgYm9vbCBwdWJsaWMgdW5zb2xkVG9rZW5Jc3N1ZWQgPSBmYWxzZTsKCiAgICAvLy8gTWluaW11bSBhbW91bnQgb2YgZnVuZHMgdG8gYmUgcmFpc2VkIGZvciB0aGUgc2FsZSB0byBzdWNjZWVkLiAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEdPQUwgPSA1MDAwIGV0aGVyOwoKICAgIC8vLyBNYXhpbXVtIGFtb3VudCBvZiBmdW5kIHRvIGJlIHJhaXNlZCwgdGhlIHNhbGUgZW5kcyBvbiByZWFjaGluZyB0aGlzIGFtb3VudC4KICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEhBUkRfQ0FQID0gMTAwMDAgZXRoZXI7CgogICAgLy8vIEJhc2UgZXhjaGFuZ2UgcmF0ZSBpcyBzZXQgdG8gMSBFVEggPSA1MDAwMCBUUkEuCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBCQVNFX1JBVEUgPSA1MDAwMDsKCiAgICAvLy8gQSBzaW1wbGUgc3RhdCBmb3IgZW1pdHRpbmcgZXZlbnRzLgogICAgdWludCBwdWJsaWMgdG90YWxFdGhSZWNlaXZlZCA9IDA7CgogICAgLy8vIElzc3VlIGV2ZW50IGluZGV4IHN0YXJ0aW5nIGZyb20gMC4KICAgIHVpbnQgcHVibGljIGlzc3VlSW5kZXggPSAwOwoKICAgIC8qIAogICAgICogRVZFTlRTCiAgICAgKi8KCiAgICAvLy8gRW1pdHRlZCBvbmx5IG9uY2UgYWZ0ZXIgdG9rZW4gc2FsZSBzdGFydHMuCiAgICBldmVudCBTYWxlU3RhcnRlZCgpOwoKICAgIC8vLyBFbWl0dGVkIG9ubHkgb25jZSBhZnRlciB0b2tlbiBzYWxlIGVuZGVkIChhbGwgdG9rZW4gaXNzdWVkKS4KICAgIGV2ZW50IFNhbGVFbmRlZCgpOwoKICAgIC8vLyBFbWl0dGVkIHdoZW4gYSBmdW5jdGlvbiBpcyBpbnZvY2F0ZWQgYnkgdW5hdXRob3JpemVkIGFkZHJlc3Nlcy4KICAgIGV2ZW50IEludmFsaWRDYWxsZXIoYWRkcmVzcyBjYWxsZXIpOwoKICAgIC8vLyBFbWl0dGVkIHdoZW4gYSBmdW5jdGlvbiBpcyBpbnZvY2F0ZWQgd2l0aG91dCB0aGUgc3BlY2lmaWVkIHByZWNvbmRpdGlvbnMuCiAgICAvLy8gVGhpcyBldmVudCB3aWxsIG5vdCBjb21lIGFsb25lIHdpdGggYW4gZXhjZXB0aW9uLgogICAgZXZlbnQgSW52YWxpZFN0YXRlKGJ5dGVzIG1zZyk7CgogICAgLy8vIEVtaXR0ZWQgZm9yIGVhY2ggc3VjdWVzc2Z1bCB0b2tlbiBwdXJjaGFzZS4KICAgIGV2ZW50IElzc3VlKHVpbnQgaXNzdWVJbmRleCwgYWRkcmVzcyBhZGRyLCB1aW50IGV0aEFtb3VudCwgdWludCB0b2tlbkFtb3VudCk7CgogICAgLy8vIEVtaXR0ZWQgaWYgdGhlIHRva2VuIHNhbGUgc3VjY2VlZGVkLgogICAgZXZlbnQgU2FsZVN1Y2NlZWRlZCgpOwoKICAgIC8vLyBFbWl0dGVkIGlmIHRoZSB0b2tlbiBzYWxlIGZhaWxlZC4KICAgIC8vLyBXaGVuIHRva2VuIHNhbGUgZmFpbGVkLCBhbGwgRXRoZXIgd2lsbCBiZSByZXR1cm4gdG8gdGhlIG9yaWdpbmFsIHB1cmNoYXNpbmcKICAgIC8vLyBhZGRyZXNzIHdpdGggYSBtaW5vciBkZWR1Y3Rpb24gb2YgdHJhbnNhY3Rpb24gZmVl77yIZ2FzKQogICAgZXZlbnQgU2FsZUZhaWxlZCgpOwoKICAgIC8qCiAgICAgKiBNT0RJRklFUlMKICAgICAqLwoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSW52YWxpZENhbGxlcihtc2cuc2VuZGVyKTsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgfQoKICAgIG1vZGlmaWVyIGJlZm9yZVN0YXJ0IHsKICAgICAgICBpZiAoIXNhbGVTdGFydGVkKCkpIHsKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBJbnZhbGlkU3RhdGUoIlNhbGUgaGFzIG5vdCBzdGFydGVkIHlldCIpOwogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgbW9kaWZpZXIgaW5Qcm9ncmVzcyB7CiAgICAgICAgaWYgKHNhbGVTdGFydGVkKCkgJiYgIXNhbGVFbmRlZCgpKSB7CiAgICAgICAgICAgIF87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgSW52YWxpZFN0YXRlKCJTYWxlIGlzIG5vdCBpbiBwcm9ncmVzcyIpOwogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgbW9kaWZpZXIgYWZ0ZXJFbmQgewogICAgICAgIGlmIChzYWxlRW5kZWQoKSkgewogICAgICAgICAgICBfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEludmFsaWRTdGF0ZSgiU2FsZSBpcyBub3QgZW5kZWQgeWV0Iik7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENPTlNUUlVDVE9SIAogICAgICogCiAgICAgKiBAZGV2IEluaXRpYWxpemUgdGhlIFRSQSBUb2tlbgogICAgICogQHBhcmFtIF90YXJnZXQgVGhlIGVzY3JvdyBhY2NvdW50IGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gVFJBVG9rZW4oYWRkcmVzcyBfdGFyZ2V0KSB7CiAgICAgICAgdGFyZ2V0ID0gX3RhcmdldDsKICAgICAgICB0b3RhbFN1cHBseSA9IDEwICoqIDI3OwogICAgICAgIGJhbGFuY2VzW3RhcmdldF0gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgICAvKgogICAgICogUFVCTElDIEZVTkNUSU9OUwogICAgICovCgogICAgLy8vIEBkZXYgU3RhcnQgdGhlIHRva2VuIHNhbGUuCiAgICAvLy8gQHBhcmFtIF9maXJzdGJsb2NrIFRoZSBibG9jayBmcm9tIHdoaWNoIHRoZSBzYWxlIHdpbGwgc3RhcnQuCiAgICBmdW5jdGlvbiBzdGFydCh1aW50IF9maXJzdGJsb2NrKSBwdWJsaWMgb25seU93bmVyIGJlZm9yZVN0YXJ0IHsKICAgICAgICBpZiAoX2ZpcnN0YmxvY2sgPD0gYmxvY2subnVtYmVyKSB7CiAgICAgICAgICAgIC8vIE11c3Qgc3BlY2lmeSBhIGJsb2NrIGluIHRoZSBmdXR1cmUuCiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgZmlyc3RibG9jayA9IF9maXJzdGJsb2NrOwogICAgICAgIFNhbGVTdGFydGVkKCk7CiAgICB9CgogICAgLy8vIEBkZXYgVHJpZ2dlcnMgdW5zb2xkIHRva2VucyB0byBiZSBpc3N1ZWQgdG8gYHRhcmdldGAgYWRkcmVzcy4KICAgIGZ1bmN0aW9uIGNsb3NlKCkgcHVibGljIG9ubHlPd25lciBhZnRlckVuZCB7CiAgICAgICAgaWYgKHRvdGFsRXRoUmVjZWl2ZWQgPCBHT0FMKSB7CiAgICAgICAgICAgIFNhbGVGYWlsZWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTYWxlU3VjY2VlZGVkKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGN1cnJlbnQgcHJpY2UuCiAgICBmdW5jdGlvbiBwcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHRva2VucykgewogICAgICAgIHJldHVybiBjb21wdXRlVG9rZW5BbW91bnQoMSBldGhlcik7CiAgICB9CgogICAgLy8vIEBkZXYgVGhpcyBkZWZhdWx0IGZ1bmN0aW9uIGFsbG93cyB0b2tlbiB0byBiZSBwdXJjaGFzZWQgYnkgZGlyZWN0bHkKICAgIC8vLyBzZW5kaW5nIGV0aGVyIHRvIHRoaXMgc21hcnQgY29udHJhY3QuCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBpc3N1ZVRva2VuKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IElzc3VlIHRva2VuIGJhc2VkIG9uIEV0aGVyIHJlY2VpdmVkLgogICAgLy8vIEBwYXJhbSByZWNpcGllbnQgQWRkcmVzcyB0aGF0IG5ld2x5IGlzc3VlZCB0b2tlbiB3aWxsIGJlIHNlbnQgdG8uCiAgICBmdW5jdGlvbiBpc3N1ZVRva2VuKGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlIGluUHJvZ3Jlc3MgewogICAgICAgIC8vIFdlIG9ubHkgYWNjZXB0IG1pbmltdW0gcHVyY2hhc2Ugb2YgMC4wMSBFVEguCiAgICAgICAgYXNzZXJ0KG1zZy52YWx1ZSA+PSAwLjAxIGV0aGVyKTsKCiAgICAgICAgLy8gV2Ugb25seSBhY2NlcHQgbWF4aW11bSBwdXJjaGFzZSBvZiAxMDAwMCBFVEguCiAgICAgICAgYXNzZXJ0KG1zZy52YWx1ZSA8PSAxMDAwMCBldGhlcik7CgogICAgICAgIC8vIFdlIG9ubHkgYWNjZXB0IHRvdGFsRXRoUmVjZWl2ZWQgPCBIQVJEX0NBUAogICAgICAgIHVpbnQgZXRoUmVjZWl2ZWQgPSB0b3RhbEV0aFJlY2VpdmVkICsgbXNnLnZhbHVlOwogICAgICAgIGFzc2VydChldGhSZWNlaXZlZCA8PSBIQVJEX0NBUCk7CgogICAgICAgIHVpbnQgdG9rZW5zID0gY29tcHV0ZVRva2VuQW1vdW50KG1zZy52YWx1ZSk7CiAgICAgICAgdG90YWxFdGhSZWNlaXZlZCA9IHRvdGFsRXRoUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQodG9rZW5zKTsKICAgICAgICBiYWxhbmNlc1t0YXJnZXRdID0gYmFsYW5jZXNbdGFyZ2V0XS5zdWIodG9rZW5zKTsKCiAgICAgICAgSXNzdWUoCiAgICAgICAgICAgIGlzc3VlSW5kZXgrKywKICAgICAgICAgICAgcmVjaXBpZW50LAogICAgICAgICAgICBtc2cudmFsdWUsCiAgICAgICAgICAgIHRva2VucwogICAgICAgICk7CgogICAgICAgIGlmICghdGFyZ2V0LnNlbmQobXNnLnZhbHVlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIElOVEVSTkFMIEZVTkNUSU9OUwogICAgICovCiAgCiAgICAvLy8gQGRldiBDb21wdXRlIHRoZSBhbW91bnQgb2YgVFJBIHRva2VuIHRoYXQgY2FuIGJlIHB1cmNoYXNlZC4KICAgIC8vLyBAcGFyYW0gZXRoQW1vdW50IEFtb3VudCBvZiBFdGhlciB0byBwdXJjaGFzZSBUUkEuCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgVFJBIHRva2VuIHRvIHB1cmNoYXNlCiAgICBmdW5jdGlvbiBjb21wdXRlVG9rZW5BbW91bnQodWludCBldGhBbW91bnQpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG9rZW5zKSB7CiAgICAgICAgdWludCBwaGFzZSA9IChibG9jay5udW1iZXIgLSBmaXJzdGJsb2NrKS5kaXYoQkxPQ0tTX1BFUl9QSEFTRSk7CgogICAgICAgIC8vIEEgc2FmZSBjaGVjawogICAgICAgIGlmIChwaGFzZSA+PSBib251c1BlcmNlbnRhZ2VzLmxlbmd0aCkgewogICAgICAgICAgICBwaGFzZSA9IGJvbnVzUGVyY2VudGFnZXMubGVuZ3RoIC0gMTsKICAgICAgICB9CgogICAgICAgIHVpbnQgdG9rZW5CYXNlID0gZXRoQW1vdW50Lm11bChCQVNFX1JBVEUpOwogICAgICAgIHVpbnQgdG9rZW5Cb251cyA9IHRva2VuQmFzZS5tdWwoYm9udXNQZXJjZW50YWdlc1twaGFzZV0pLmRpdigxMDApOwoKICAgICAgICB0b2tlbnMgPSB0b2tlbkJhc2UuYWRkKHRva2VuQm9udXMpOwogICAgfQoKICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgc2FsZSBoYXMgc3RhcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgZnVuY3Rpb24gc2FsZVN0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChmaXJzdGJsb2NrID4gMCAmJiBibG9jay5udW1iZXIgPj0gZmlyc3RibG9jayk7CiAgICB9CgogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZiBzYWxlIGhhcyBlbmRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgZnVuY3Rpb24gc2FsZUVuZGVkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBmaXJzdGJsb2NrID4gMCAmJiAoc2FsZUR1ZSgpIHx8IGhhcmRDYXBSZWFjaGVkKCkpOwogICAgfQoKICAgIC8vLyBAcmV0dXJuIHRydWUgaWYgc2FsZSBpcyBkdWUgd2hlbiB0aGUgbGFzdCBwaGFzZSBpcyBmaW5pc2hlZC4KICAgIGZ1bmN0aW9uIHNhbGVEdWUoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLm51bWJlciA+PSBmaXJzdGJsb2NrICsgQkxPQ0tTX1BFUl9QSEFTRSAqIE5VTV9PRl9QSEFTRTsKICAgIH0KCiAgICAvLy8gQHJldHVybiB0cnVlIGlmIHRoZSBoYXJkIGNhcCBpcyByZWFjaGVkLgogICAgZnVuY3Rpb24gaGFyZENhcFJlYWNoZWQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRvdGFsRXRoUmVjZWl2ZWQgPj0gSEFSRF9DQVA7CiAgICB9Cn0='.
	

]
