Class {
	#name : #SRTfa6512358d241b636edf5f8ccaaf86676dec21a7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfa6512358d241b636edf5f8ccaaf86676dec21a7 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCi8qKgogKiBUaGUgRU5TIHJlZ2lzdHJ5IGNvbnRyYWN0LgogKi8KY29udHJhY3QgRU5TIHsKICAgIC8vIExvZ2dlZCB3aGVuIHRoZSBvd25lciBvZiBhIG5vZGUgYXNzaWducyBhIG5ldyBvd25lciB0byBhIHN1Ym5vZGUuCiAgICBldmVudCBOZXdPd25lcihieXRlczMyIGluZGV4ZWQgbm9kZSwgYnl0ZXMzMiBpbmRleGVkIGxhYmVsLCBhZGRyZXNzIG93bmVyKTsKCiAgICAvLyBMb2dnZWQgd2hlbiB0aGUgb3duZXIgb2YgYSBub2RlIHRyYW5zZmVycyBvd25lcnNoaXAgdG8gYSBuZXcgYWNjb3VudC4KICAgIGV2ZW50IFRyYW5zZmVyKGJ5dGVzMzIgaW5kZXhlZCBub2RlLCBhZGRyZXNzIG93bmVyKTsKCiAgICAvLyBMb2dnZWQgd2hlbiB0aGUgcmVzb2x2ZXIgZm9yIGEgbm9kZSBjaGFuZ2VzLgogICAgZXZlbnQgTmV3UmVzb2x2ZXIoYnl0ZXMzMiBpbmRleGVkIG5vZGUsIGFkZHJlc3MgcmVzb2x2ZXIpOwoKICAgIC8vIExvZ2dlZCB3aGVuIHRoZSBUVEwgb2YgYSBub2RlIGNoYW5nZXMKICAgIGV2ZW50IE5ld1RUTChieXRlczMyIGluZGV4ZWQgbm9kZSwgdWludDY0IHR0bCk7CgogICAgc3RydWN0IFJlY29yZCB7CiAgICAgICAgYWRkcmVzcyBvd25lcjsKICAgICAgICBhZGRyZXNzIHJlc29sdmVyOwogICAgICAgIHVpbnQ2NCB0dGw7CiAgICB9CgogICAgbWFwcGluZyhieXRlczMyPT5SZWNvcmQpIHJlY29yZHM7CgogICAgLy8gUGVybWl0cyBtb2RpZmljYXRpb25zIG9ubHkgYnkgdGhlIG93bmVyIG9mIHRoZSBzcGVjaWZpZWQgbm9kZS4KICAgIG1vZGlmaWVyIG9ubHlfb3duZXIoYnl0ZXMzMiBub2RlKSB7CiAgICAgICAgaWYgKHJlY29yZHNbbm9kZV0ub3duZXIgIT0gbXNnLnNlbmRlcikgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRU5TIHJlZ2lzdHJhci4KICAgICAqLwogICAgZnVuY3Rpb24gRU5TKCkgewogICAgICAgIHJlY29yZHNbMF0ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyB0aGF0IG93bnMgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICovCiAgICBmdW5jdGlvbiBvd25lcihieXRlczMyIG5vZGUpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gcmVjb3Jkc1tub2RlXS5vd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGFkZHJlc3Mgb2YgdGhlIHJlc29sdmVyIGZvciB0aGUgc3BlY2lmaWVkIG5vZGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlc29sdmVyKGJ5dGVzMzIgbm9kZSkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiByZWNvcmRzW25vZGVdLnJlc29sdmVyOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgVFRMIG9mIGEgbm9kZSwgYW5kIGFueSByZWNvcmRzIGFzc29jaWF0ZWQgd2l0aCBpdC4KICAgICAqLwogICAgZnVuY3Rpb24gdHRsKGJ5dGVzMzIgbm9kZSkgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIHJlY29yZHNbbm9kZV0udHRsOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmZXJzIG93bmVyc2hpcCBvZiBhIG5vZGUgdG8gYSBuZXcgYWRkcmVzcy4gTWF5IG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBjdXJyZW50CiAgICAgKiBvd25lciBvZiB0aGUgbm9kZS4KICAgICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZi4KICAgICAqIEBwYXJhbSBvd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IG93bmVyLgogICAgICovCiAgICBmdW5jdGlvbiBzZXRPd25lcihieXRlczMyIG5vZGUsIGFkZHJlc3Mgb3duZXIpIG9ubHlfb3duZXIobm9kZSkgewogICAgICAgIFRyYW5zZmVyKG5vZGUsIG93bmVyKTsKICAgICAgICByZWNvcmRzW25vZGVdLm93bmVyID0gb3duZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgb3duZXJzaGlwIG9mIGEgc3Vibm9kZSBzaGEzKG5vZGUsIGxhYmVsKSB0byBhIG5ldyBhZGRyZXNzLiBNYXkgb25seSBiZQogICAgICogY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgcGFyZW50IG5vZGUuCiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgcGFyZW50IG5vZGUuCiAgICAgKiBAcGFyYW0gbGFiZWwgVGhlIGhhc2ggb2YgdGhlIGxhYmVsIHNwZWNpZnlpbmcgdGhlIHN1Ym5vZGUuCiAgICAgKiBAcGFyYW0gb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBvd25lci4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0U3Vibm9kZU93bmVyKGJ5dGVzMzIgbm9kZSwgYnl0ZXMzMiBsYWJlbCwgYWRkcmVzcyBvd25lcikgb25seV9vd25lcihub2RlKSB7CiAgICAgICAgdmFyIHN1Ym5vZGUgPSBzaGEzKG5vZGUsIGxhYmVsKTsKICAgICAgICBOZXdPd25lcihub2RlLCBsYWJlbCwgb3duZXIpOwogICAgICAgIHJlY29yZHNbc3Vibm9kZV0ub3duZXIgPSBvd25lcjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHJlc29sdmVyIGFkZHJlc3MgZm9yIHRoZSBzcGVjaWZpZWQgbm9kZS4KICAgICAqIEBwYXJhbSBub2RlIFRoZSBub2RlIHRvIHVwZGF0ZS4KICAgICAqIEBwYXJhbSByZXNvbHZlciBUaGUgYWRkcmVzcyBvZiB0aGUgcmVzb2x2ZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFJlc29sdmVyKGJ5dGVzMzIgbm9kZSwgYWRkcmVzcyByZXNvbHZlcikgb25seV9vd25lcihub2RlKSB7CiAgICAgICAgTmV3UmVzb2x2ZXIobm9kZSwgcmVzb2x2ZXIpOwogICAgICAgIHJlY29yZHNbbm9kZV0ucmVzb2x2ZXIgPSByZXNvbHZlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIFRUTCBmb3IgdGhlIHNwZWNpZmllZCBub2RlLgogICAgICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdG8gdXBkYXRlLgogICAgICogQHBhcmFtIHR0bCBUaGUgVFRMIGluIHNlY29uZHMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFRUTChieXRlczMyIG5vZGUsIHVpbnQ2NCB0dGwpIG9ubHlfb3duZXIobm9kZSkgewogICAgICAgIE5ld1RUTChub2RlLCB0dGwpOwogICAgICAgIHJlY29yZHNbbm9kZV0udHRsID0gdHRsOwogICAgfQp9CgovKioKICogQGRldiBBIGJhc2ljIGludGVyZmFjZSBmb3IgRU5TIHJlc29sdmVycy4KICovCmNvbnRyYWN0IFJlc29sdmVyIHsKICBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQgaW50ZXJmYWNlSUQpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFkZHIoYnl0ZXMzMiBub2RlKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKICBmdW5jdGlvbiBzZXRBZGRyKGJ5dGVzMzIgbm9kZSwgYWRkcmVzcyBhZGRyKSBwdWJsaWM7Cn0KCmNvbnRyYWN0IFJlZ2lzdHJhckludGVyZmFjZSB7CiAgZXZlbnQgT3duZXJDaGFuZ2VkKGJ5dGVzMzIgaW5kZXhlZCBsYWJlbCwgYWRkcmVzcyBpbmRleGVkIG9sZE93bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwogIGV2ZW50IERvbWFpbkNvbmZpZ3VyZWQoYnl0ZXMzMiBpbmRleGVkIGxhYmVsKTsKICBldmVudCBEb21haW5Vbmxpc3RlZChieXRlczMyIGluZGV4ZWQgbGFiZWwpOwogIGV2ZW50IE5ld1JlZ2lzdHJhdGlvbihieXRlczMyIGluZGV4ZWQgbGFiZWwsIHN0cmluZyBzdWJkb21haW4sIGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVyLCB1aW50IHByaWNlKTsKICBldmVudCBSZW50UGFpZChieXRlczMyIGluZGV4ZWQgbGFiZWwsIHN0cmluZyBzdWJkb21haW4sIHVpbnQgYW1vdW50LCB1aW50IGV4cGlyYXRpb25EYXRlKTsKCiAgLy8gSW50ZXJmYWNlSUQgb2YgdGhlc2UgZm91ciBtZXRob2RzIGlzIDB4YzFiMTVmNWEKICBmdW5jdGlvbiBxdWVyeShieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluKSB2aWV3IHJldHVybnMoc3RyaW5nIGRvbWFpbiwgdWludCBzaWdudXBGZWUsIHVpbnQgcmVudCwgdWludCByZWZlcnJhbEZlZVBQTSk7CiAgZnVuY3Rpb24gcmVnaXN0ZXIoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbiwgYWRkcmVzcyBvd25lciwgYWRkcmVzcyByZWZlcnJlciwgYWRkcmVzcyByZXNvbHZlcikgcHVibGljIHBheWFibGU7CgogIGZ1bmN0aW9uIHJlbnREdWUoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50IHRpbWVzdGFtcCk7CiAgZnVuY3Rpb24gcGF5UmVudChieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluKSBwdWJsaWMgcGF5YWJsZTsKfQovKioKICogQGRldiBJbXBsZW1lbnRzIGFuIEVOUyByZWdpc3RyYXIgdGhhdCBzZWxscyBzdWJkb21haW5zIG9uIGJlaGFsZiBvZiB0aGVpciBvd25lcnMuCiAqCiAqIFVzZXJzIG1heSByZWdpc3RlciBhIHN1YmRvbWFpbiBieSBjYWxsaW5nIGByZWdpc3RlcmAgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZG9tYWluCiAqIHRoZXkgd2lzaCB0byByZWdpc3RlciB1bmRlciwgYW5kIHRoZSBsYWJlbCBoYXNoIG9mIHRoZSBzdWJkb21haW4gdGhleSB3YW50IHRvCiAqIHJlZ2lzdGVyLiBUaGV5IG11c3QgYWxzbyBzcGVjaWZ5IHRoZSBuZXcgb3duZXIgb2YgdGhlIGRvbWFpbiwgYW5kIHRoZSByZWZlcnJlciwKICogd2hvIGlzIHBhaWQgYW4gb3B0aW9uYWwgZmluZGVyJ3MgZmVlLiBUaGUgcmVnaXN0cmFyIHRoZW4gY29uZmlndXJlcyBhIHNpbXBsZQogKiBkZWZhdWx0IHJlc29sdmVyLCB3aGljaCByZXNvbHZlcyBgYWRkcmAgbG9va3VwcyB0byB0aGUgbmV3IG93bmVyLCBhbmQgc2V0cwogKiB0aGUgYG93bmVyYCBhY2NvdW50IGFzIHRoZSBvd25lciBvZiB0aGUgc3ViZG9tYWluIGluIEVOUy4KICoKICogTmV3IGRvbWFpbnMgbWF5IGJlIGFkZGVkIGJ5IGNhbGxpbmcgYGNvbmZpZ3VyZURvbWFpbmAsIHRoZW4gdHJhbnNmZXJyaW5nCiAqIG93bmVyc2hpcCBpbiB0aGUgRU5TIHJlZ2lzdHJ5IHRvIHRoaXMgY29udHJhY3QuIE93bmVyc2hpcCBpbiB0aGUgY29udHJhY3QKICogbWF5IGJlIHRyYW5zZmVycmVkIHVzaW5nIGB0cmFuc2ZlcmAsIGFuZCBhIGRvbWFpbiBtYXkgYmUgdW5saXN0ZWQgZm9yIHNhbGUKICogdXNpbmcgYHVubGlzdERvbWFpbmAuIFRoZXJlIGlzIChkZWxpYmVyYXRlbHkpIG5vIHdheSB0byByZWNvdmVyIG93bmVyc2hpcAogKiBpbiBFTlMgb25jZSB0aGUgbmFtZSBpcyB0cmFuc2ZlcnJlZCB0byB0aGlzIHJlZ2lzdHJhci4KICoKICogQ3JpdGljYWxseSwgdGhpcyBjb250cmFjdCBkb2VzIG5vdCBjaGVjayB0d28ga2V5IHByb3BlcnRpZXMgb2YgYSBsaXN0ZWQgZG9tYWluOgogKgogKiAtIElzIHRoZSBuYW1lIFVUUzQ2IG5vcm1hbGlzZWQ/CiAqIC0gSXMgdGhlIERlZWQgaGVsZCBieSBhbiBhcHByb3ByaWF0ZSBjdXN0b2RpYW4gY29udHJhY3Q/CiAqCiAqIFVzZXIgYXBwbGljYXRpb25zIE1VU1QgY2hlY2sgdGhlc2UgdHdvIGVsZW1lbnRzIGZvciBlYWNoIGRvbWFpbiBiZWZvcmUKICogb2ZmZXJpbmcgdGhlbSB0byB1c2VycyBmb3IgcmVnaXN0cmF0aW9uLgogKgogKiBBcHBsaWNhdGlvbnMgc2hvdWxkIGFkZGl0aW9uYWxseSBjaGVjayB0aGF0IHRoZSBkb21haW5zIHRoZXkgYXJlIG9mZmVyaW5nIHRvCiAqIHJlZ2lzdGVyIGFyZSBjb250cm9sbGVkIGJ5IHRoaXMgcmVnaXN0cmFyLCBzaW5jZSBjYWxscyB0byBgcmVnaXN0ZXJgIHdpbGwKICogZmFpbCBpZiB0aGlzIGlzIG5vdCB0aGUgY2FzZS4KICovCmNvbnRyYWN0IFN1YmRvbWFpblJlZ2lzdHJhciBpcyBSZWdpc3RyYXJJbnRlcmZhY2UgewogIC8vIG5hbWVoYXNoKCdldGgnKQogIGJ5dGVzMzIgY29uc3RhbnQgcHVibGljIFRMRF9OT0RFID0gMHg5M2NkZWI3MDhiNzU0NWRjNjY4ZWI5MjgwMTc2MTY5ZDFjMzNjZmQ4ZWQ2ZjA0NjkwYTBiY2M4OGE5M2ZjNGFlOwoKICBFTlMgcHVibGljIGVuczsKCiAgc3RydWN0IERvbWFpbiB7CiAgICBzdHJpbmcgbmFtZTsKICAgIGFkZHJlc3Mgb3duZXI7CiAgICB1aW50IHByaWNlOwogICAgdWludCByZWZlcnJhbEZlZVBQTTsKICB9CgogIG1hcHBpbmcoYnl0ZXMzMj0+RG9tYWluKSBkb21haW5zOwoKICBmdW5jdGlvbiBTdWJkb21haW5SZWdpc3RyYXIoRU5TIF9lbnMpIHB1YmxpYyB7CiAgICBlbnMgPSBfZW5zOwogIH0KCiAgLyoqCiAgICogQGRldiBvd25lciByZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHRoYXQgY29udHJvbHMgYSBkb21haW4uCiAgICogICAgICBJbml0aWFsbHkgdGhpcyBpcyB0aGUgb3duZXIgb2YgdGhlIG5hbWUgaW4gRU5TLiBJZiB0aGUgbmFtZSBoYXMgYmVlbgogICAqICAgICAgdHJhbnNmZXJyZWQgdG8gdGhpcyBjb250cmFjdCwgdGhlbiB0aGUgaW50ZXJuYWwgbWFwcGluZyBpcyBjb25zdWx0ZWQKICAgKiAgICAgIHRvIGRldGVybWluZSB3aG8gY29udHJvbHMgaXQuCiAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBoYXNoIG9mIHRoZSBkZWVkIHRvIGNoZWNrLgogICAqIEByZXR1cm4gVGhlIGFkZHJlc3Mgb3duaW5nIHRoZSBkZWVkLgogICAqLwogIGZ1bmN0aW9uIG93bmVyKGJ5dGVzMzIgbGFiZWwpIHB1YmxpYyB2aWV3IHJldHVybnMoYWRkcmVzcyByZXQpIHsKICAgICAgcmV0ID0gZW5zLm93bmVyKGtlY2NhazI1NihUTERfTk9ERSwgbGFiZWwpKTsKICAgICAgaWYocmV0ID09IGFkZHJlc3ModGhpcykpIHsKICAgICAgICByZXQgPSBkb21haW5zW2xhYmVsXS5vd25lcjsKICAgICAgfQogIH0KCiAgbW9kaWZpZXIgb3duZXJfb25seShieXRlczMyIGxhYmVsKSB7CiAgICAgIHJlcXVpcmUob3duZXIobGFiZWwpID09IG1zZy5zZW5kZXIpOwogICAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlcnMgaW50ZXJuYWwgY29udHJvbCBvZiBhIG5hbWUgdG8gYSBuZXcgYWNjb3VudC4gRG9lcyBub3QgdXBkYXRlCiAgICogICAgICBFTlMuCiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gdHJhbnNmZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBuZXcgb3duZXIuCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoc3RyaW5nIG5hbWUsIGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgewogICAgdmFyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgT3duZXJDaGFuZ2VkKGtlY2NhazI1NihuYW1lKSwgZG9tYWluc1tsYWJlbF0ub3duZXIsIG5ld093bmVyKTsKICAgIGRvbWFpbnNbbGFiZWxdLm93bmVyID0gbmV3T3duZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFNldHMgdGhlIHJlc29sdmVyIHJlY29yZCBmb3IgYSBuYW1lIGluIEVOUy4KICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZXQgdGhlIHJlc29sdmVyIGZvci4KICAgKiBAcGFyYW0gcmVzb2x2ZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHJlc29sdmVyCiAgICovCiAgZnVuY3Rpb24gc2V0UmVzb2x2ZXIoc3RyaW5nIG5hbWUsIGFkZHJlc3MgcmVzb2x2ZXIpIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgewogICAgdmFyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgdmFyIG5vZGUgPSBrZWNjYWsyNTYoVExEX05PREUsIGxhYmVsKTsKICAgIGVucy5zZXRSZXNvbHZlcihub2RlLCByZXNvbHZlcik7CiAgfQoKICAvKioKICAgKiBAZGV2IENvbmZpZ3VyZXMgYSBkb21haW4gZm9yIHNhbGUuCiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gY29uZmlndXJlLgogICAqIEBwYXJhbSBwcmljZSBUaGUgcHJpY2UgaW4gd2VpIHRvIGNoYXJnZSBmb3Igc3ViZG9tYWluIHJlZ2lzdHJhdGlvbnMKICAgKiBAcGFyYW0gcmVmZXJyYWxGZWVQUE0gVGhlIHJlZmVycmFsIGZlZSB0byBvZmZlciwgaW4gcGFydHMgcGVyIG1pbGxpb24KICAgKi8KICBmdW5jdGlvbiBjb25maWd1cmVEb21haW4oc3RyaW5nIG5hbWUsIHVpbnQgcHJpY2UsIHVpbnQgcmVmZXJyYWxGZWVQUE0pIHB1YmxpYyBvd25lcl9vbmx5KGtlY2NhazI1NihuYW1lKSkgewogICAgdmFyIGxhYmVsID0ga2VjY2FrMjU2KG5hbWUpOwogICAgdmFyIGRvbWFpbiA9IGRvbWFpbnNbbGFiZWxdOwoKICAgIGlmKGtlY2NhazI1Nihkb21haW4ubmFtZSkgIT0gbGFiZWwpIHsKICAgICAgLy8gTmV3IGxpc3RpbmcKICAgICAgZG9tYWluLm5hbWUgPSBuYW1lOwogICAgfQogICAgaWYoZG9tYWluLm93bmVyICE9IG1zZy5zZW5kZXIpIHsKICAgICAgZG9tYWluLm93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIGRvbWFpbi5wcmljZSA9IHByaWNlOwogICAgZG9tYWluLnJlZmVycmFsRmVlUFBNID0gcmVmZXJyYWxGZWVQUE07CiAgICBEb21haW5Db25maWd1cmVkKGxhYmVsKTsKICB9CgogIC8qKgogICAqIEBkZXYgVW5saXN0cyBhIGRvbWFpbgogICAqIE1heSBvbmx5IGJlIGNhbGxlZCBieSB0aGUgb3duZXIuCiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGRvbWFpbiB0byB1bmxpc3QuCiAgICovCiAgZnVuY3Rpb24gdW5saXN0RG9tYWluKHN0cmluZyBuYW1lKSBwdWJsaWMgb3duZXJfb25seShrZWNjYWsyNTYobmFtZSkpIHsKICAgIHZhciBsYWJlbCA9IGtlY2NhazI1NihuYW1lKTsKICAgIHZhciBkb21haW4gPSBkb21haW5zW2xhYmVsXTsKICAgIERvbWFpblVubGlzdGVkKGxhYmVsKTsKCiAgICBkb21haW4ubmFtZSA9ICcnOwogICAgZG9tYWluLm93bmVyID0gb3duZXIobGFiZWwpOwogICAgZG9tYWluLnByaWNlID0gMDsKICAgIGRvbWFpbi5yZWZlcnJhbEZlZVBQTSA9IDA7CiAgfQoKICAvKioKICAgKiBAZGV2IFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzdWJkb21haW4uCiAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBoYXNoIGZvciB0aGUgZG9tYWluLgogICAqIEBwYXJhbSBzdWJkb21haW4gVGhlIGxhYmVsIGZvciB0aGUgc3ViZG9tYWluLgogICAqIEByZXR1cm4gZG9tYWluIFRoZSBuYW1lIG9mIHRoZSBkb21haW4sIG9yIGFuIGVtcHR5IHN0cmluZyBpZiB0aGUgc3ViZG9tYWluCiAgICogICAgICAgICAgICAgICAgaXMgdW5hdmFpbGFibGUuCiAgICogQHJldHVybiBwcmljZSBUaGUgcHJpY2UgdG8gcmVnaXN0ZXIgYSBzdWJkb21haW4sIGluIHdlaS4KICAgKiBAcmV0dXJuIHJlbnQgVGhlIHJlbnQgdG8gcmV0YWluIGEgc3ViZG9tYWluLCBpbiB3ZWkgcGVyIHNlY29uZC4KICAgKiBAcmV0dXJuIHJlZmVycmFsRmVlUFBNIFRoZSByZWZlcnJhbCBmZWUgZm9yIHRoZSBkYXBwLCBpbiBwcG0uCiAgICovCiAgZnVuY3Rpb24gcXVlcnkoYnl0ZXMzMiBsYWJlbCwgc3RyaW5nIHN1YmRvbWFpbikgdmlldyByZXR1cm5zKHN0cmluZyBkb21haW4sIHVpbnQgcHJpY2UsIHVpbnQgcmVudCwgdWludCByZWZlcnJhbEZlZVBQTSkgewogICAgdmFyIG5vZGUgPSBrZWNjYWsyNTYoVExEX05PREUsIGxhYmVsKTsKICAgIHZhciBzdWJub2RlID0ga2VjY2FrMjU2KG5vZGUsIGtlY2NhazI1NihzdWJkb21haW4pKTsKCiAgICBpZihlbnMub3duZXIoc3Vibm9kZSkgIT0gMCkgewogICAgICByZXR1cm4gKCcnLCAwLCAwLCAwKTsKICAgIH0KCiAgICB2YXIgZGF0YSA9IGRvbWFpbnNbbGFiZWxdOwogICAgcmV0dXJuIChkYXRhLm5hbWUsIGRhdGEucHJpY2UsIDAsIGRhdGEucmVmZXJyYWxGZWVQUE0pOwogIH0KCiAgLyoqCiAgICogQGRldiBSZWdpc3RlcnMgYSBzdWJkb21haW4uCiAgICogQHBhcmFtIGxhYmVsIFRoZSBsYWJlbCBoYXNoIG9mIHRoZSBkb21haW4gdG8gcmVnaXN0ZXIgYSBzdWJkb21haW4gb2YuCiAgICogQHBhcmFtIHN1YmRvbWFpbiBUaGUgZGVzaXJlZCBzdWJkb21haW4gbGFiZWwuCiAgICogQHBhcmFtIHN1YmRvbWFpbk93bmVyIFRoZSBhY2NvdW50IHRoYXQgc2hvdWxkIG93biB0aGUgbmV3bHkgY29uZmlndXJlZCBzdWJkb21haW4uCiAgICogQHBhcmFtIHJlZmVycmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IHRvIHJlY2VpdmUgdGhlIHJlZmVycmFsIGZlZS4KICAgKi8KICBmdW5jdGlvbiByZWdpc3RlcihieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluLCBhZGRyZXNzIHN1YmRvbWFpbk93bmVyLCBhZGRyZXNzIHJlc29sdmVyLCBhZGRyZXNzIHJlZmVycmVyKSBwdWJsaWMgcGF5YWJsZSB7CiAgICB2YXIgZG9tYWluTm9kZSA9IGtlY2NhazI1NihUTERfTk9ERSwgbGFiZWwpOwogICAgdmFyIHN1YmRvbWFpbkxhYmVsID0ga2VjY2FrMjU2KHN1YmRvbWFpbik7CgogICAgLy8gU3ViZG9tYWluIG11c3Qgbm90IGJlIHJlZ2lzdGVyZWQgYWxyZWFkeS4KICAgIHJlcXVpcmUoZW5zLm93bmVyKGtlY2NhazI1Nihkb21haW5Ob2RlLCBzdWJkb21haW5MYWJlbCkpID09IGFkZHJlc3MoMCkpOwoKICAgIHZhciBkb21haW4gPSBkb21haW5zW2xhYmVsXTsKCiAgICAvLyBEb21haW4gbXVzdCBiZSBhdmFpbGFibGUgZm9yIHJlZ2lzdHJhdGlvbgogICAgcmVxdWlyZShrZWNjYWsyNTYoZG9tYWluLm5hbWUpID09IGxhYmVsKTsKCiAgICAvLyBVc2VyIG11c3QgaGF2ZSBwYWlkIGVub3VnaAogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gZG9tYWluLnByaWNlKTsKCiAgICAvLyBTZW5kIGFueSBleHRyYSBiYWNrCiAgICBpZihtc2cudmFsdWUgPiBkb21haW4ucHJpY2UpIHsKICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcihtc2cudmFsdWUgLSBkb21haW4ucHJpY2UpOwogICAgfQoKICAgIC8vIFNlbmQgYW55IHJlZmVycmFsIGZlZQogICAgdmFyIHRvdGFsID0gZG9tYWluLnByaWNlOwogICAgaWYoZG9tYWluLnJlZmVycmFsRmVlUFBNICogZG9tYWluLnByaWNlID4gMCAmJiByZWZlcnJlciAhPSAwICYmIHJlZmVycmVyICE9IGRvbWFpbi5vd25lcikgewogICAgICB2YXIgcmVmZXJyYWxGZWUgPSAoZG9tYWluLnByaWNlICogZG9tYWluLnJlZmVycmFsRmVlUFBNKSAvIDEwMDAwMDA7CiAgICAgIHJlZmVycmVyLnRyYW5zZmVyKHJlZmVycmFsRmVlKTsKICAgICAgdG90YWwgLT0gcmVmZXJyYWxGZWU7CiAgICB9CgogICAgLy8gU2VuZCB0aGUgcmVnaXN0cmF0aW9uIGZlZQogICAgaWYodG90YWwgPiAwKSB7CiAgICAgIGRvbWFpbi5vd25lci50cmFuc2Zlcih0b3RhbCk7CiAgICB9CgogICAgLy8gUmVnaXN0ZXIgdGhlIGRvbWFpbgogICAgaWYoc3ViZG9tYWluT3duZXIgPT0gMCkgewogICAgICBzdWJkb21haW5Pd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CiAgICBkb1JlZ2lzdHJhdGlvbihkb21haW5Ob2RlLCBzdWJkb21haW5MYWJlbCwgc3ViZG9tYWluT3duZXIsIFJlc29sdmVyKHJlc29sdmVyKSk7CgogICAgTmV3UmVnaXN0cmF0aW9uKGxhYmVsLCBzdWJkb21haW4sIHN1YmRvbWFpbk93bmVyLCByZWZlcnJlciwgZG9tYWluLnByaWNlKTsKICB9CgogIGZ1bmN0aW9uIGRvUmVnaXN0cmF0aW9uKGJ5dGVzMzIgbm9kZSwgYnl0ZXMzMiBsYWJlbCwgYWRkcmVzcyBzdWJkb21haW5Pd25lciwgUmVzb2x2ZXIgcmVzb2x2ZXIpIGludGVybmFsIHsKICAgIC8vIEdldCB0aGUgc3ViZG9tYWluIHNvIHdlIGNhbiBjb25maWd1cmUgaXQKICAgIGVucy5zZXRTdWJub2RlT3duZXIobm9kZSwgbGFiZWwsIHRoaXMpOwoKICAgIHZhciBzdWJub2RlID0ga2VjY2FrMjU2KG5vZGUsIGxhYmVsKTsKICAgIC8vIFNldCB0aGUgc3ViZG9tYWluJ3MgcmVzb2x2ZXIKICAgIGVucy5zZXRSZXNvbHZlcihzdWJub2RlLCByZXNvbHZlcik7CgogICAgLy8gU2V0IHRoZSBhZGRyZXNzIHJlY29yZCBvbiB0aGUgcmVzb2x2ZXIKICAgIHJlc29sdmVyLnNldEFkZHIoc3Vibm9kZSwgc3ViZG9tYWluT3duZXIpOwoKICAgIC8vIFBhc3Mgb3duZXJzaGlwIG9mIHRoZSBuZXcgc3ViZG9tYWluIHRvIHRoZSByZWdpc3RyYW50CiAgICBlbnMuc2V0T3duZXIoc3Vibm9kZSwgc3ViZG9tYWluT3duZXIpOwogIH0KCiAgZnVuY3Rpb24gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0IGludGVyZmFjZUlEKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gKAogICAgICAgICAoaW50ZXJmYWNlSUQgPT0gMHgwMWZmYzlhNykgLy8gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0KQogICAgICB8fCAoaW50ZXJmYWNlSUQgPT0gMHhjMWIxNWY1YSkgLy8gUmVnaXN0cmFySW50ZXJmYWNlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcmVudER1ZShieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluKSBwdWJsaWMgdmlldyByZXR1cm5zKHVpbnQgdGltZXN0YW1wKSB7CiAgICByZXR1cm4gMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwogIH0KCiAgZnVuY3Rpb24gcGF5UmVudChieXRlczMyIGxhYmVsLCBzdHJpbmcgc3ViZG9tYWluKSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXZlcnQoKTsKICB9Cn0='.
	

]
