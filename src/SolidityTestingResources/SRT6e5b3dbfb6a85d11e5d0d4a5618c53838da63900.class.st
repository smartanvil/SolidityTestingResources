Class {
	#name : #SRT6e5b3dbfb6a85d11e5d0d4a5618c53838da63900,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6e5b3dbfb6a85d11e5d0d4a5618c53838da63900 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBMZWVTdW5nQ29pbiBNYWRlIEJ5IFBpbmtDaGVycnkgLSA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjgwZTllZWYzZTFlZWU5ZjRmOWYzZWJlMWVlYzBlN2VkZTFlOWVjYWVlM2VmZWQiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+Ci8vIExlZVN1bmdDb2luIFJlcXVlc3QgUXVlc3Rpb24gLSA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjZjMDcwMzFlMDkwZDBmMDMwNTAyMWYwMzAwMTkxODA1MDMwMjJjMGIwMTBkMDUwMDQyMGYwMzAxIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPgoKbGlicmFyeSBTYWZlTWF0aAp7CiAgCWZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KQogICAgewoJCXVpbnQyNTYgYyA9IGEgKiBiOwoJCWFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CgoJCXJldHVybiBjOwogIAl9CgogIAlmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikKCXsKCQl1aW50MjU2IGMgPSBhIC8gYjsKCgkJcmV0dXJuIGM7CiAgCX0KCiAgCWZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KQoJewoJCWFzc2VydChiIDw9IGEpOwoKCQlyZXR1cm4gYSAtIGI7CiAgCX0KCiAgCWZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KQoJewoJCXVpbnQyNTYgYyA9IGEgKyBiOwoJCWFzc2VydChjID49IGEpOwoKCQlyZXR1cm4gYzsKICAJfQp9CgoKY29udHJhY3QgT3duZXJIZWxwZXIKewogIAlhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgCWV2ZW50IE93bmVyVHJhbnNmZXJQcm9wb3NlKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7CgogIAltb2RpZmllciBvbmx5T3duZXIKCXsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwoJCV87CiAgCX0KCiAgCWZ1bmN0aW9uIE93bmVySGVscGVyKCkgcHVibGljCgl7CgkJb3duZXIgPSBtc2cuc2VuZGVyOwogIAl9CgogIAlmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF90bykgb25seU93bmVyIHB1YmxpYwoJewogICAgICAgICAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICAJCXJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMHgwKSk7CiAgICAJCW93bmVyID0gX3RvOwogICAgCQlPd25lclRyYW5zZmVyUHJvcG9zZShvd25lciwgX3RvKTsKICAJfQoKfQoKCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlCnsKICAJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgCWV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwoJZXZlbnQgQnVybmVkKGFkZHJlc3MgaW5kZXhlZCBfYnVybmVyLCB1aW50IF92YWx1ZSk7CgogIAlmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIAlmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CglmdW5jdGlvbiBidXJuKHVpbnQgX2J1cm5BbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwp9CgoKY29udHJhY3QgRVJDMjBUb2tlbiBpcyBFUkMyMEludGVyZmFjZSwgT3duZXJIZWxwZXIKewogIAl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgCXVpbnQgcHVibGljIHRva2Vuc0lzc3VlZFRvdGFsID0gMDsKICAJYWRkcmVzcyBwdWJsaWMgY29uc3RhbnQgYnVybkFkZHJlc3MgPSAwOwoKICAJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogIAltYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgCWZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCgl7CgkJcmV0dXJuIHRva2Vuc0lzc3VlZFRvdGFsOwogIAl9CgogIAlmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpCgl7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgCX0KCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQoJewoJCXJlcXVpcmUoIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCgkgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CgkJYmFsYW5jZXNbX3RvXSAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCgkJVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgIAoJCXJldHVybiB0cnVlOwogIAl9CgogIAlmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKCXsKCQlyZXF1aXJlICggYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCApOwoKCQlhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAJCQoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfYW1vdW50KTsKCgkJcmV0dXJuIHRydWU7Cgl9CgogIAlmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKCXsKCQlyZXF1aXJlKCBiYWxhbmNlc1tfZnJvbV0gPj0gX2Ftb3VudCApOwoJCXJlcXVpcmUoIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQgKTsKCQliYWxhbmNlc1tfZnJvbV0gICAgICAgICAgICA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CgkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX2Ftb3VudCk7CgkJYmFsYW5jZXNbX3RvXSAgICAgICAgICAgICAgPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CgkJcmV0dXJuIHRydWU7CiAgCX0KCiAgCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKQoJewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIAl9CgoJZnVuY3Rpb24gYnVybih1aW50IF9idXJuQW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQoJewoJCWFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKCQliYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX2J1cm5BbW91bnQpOwoJCXRva2Vuc0lzc3VlZFRvdGFsID0gdG9rZW5zSXNzdWVkVG90YWwuc3ViKF9idXJuQW1vdW50KTsKCQlCdXJuZWQoYnVybmVyLCBfYnVybkFtb3VudCk7CgkJVHJhbnNmZXIoYnVybmVyLCBidXJuQWRkcmVzcywgX2J1cm5BbW91bnQpOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KfQoKY29udHJhY3QgTGVlU3VuZ0NvaW4gaXMgRVJDMjBUb2tlbgp7Cgl1aW50IGNvbnN0YW50IEUxOCA9IDEwKioxODsKCiAgCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAJPSAiTGVlIFN1bmcgQ29pbiI7CiAgCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sIAk9ICJMU0MiOwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyAJPSAxODsKCglhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CglhZGRyZXNzIHB1YmxpYyBhZG1pbldhbGxldDsKCgl1aW50IHB1YmxpYyBjb25zdGFudCB0b3RhbENvaW5DYXAgICA9IDIwMDAwMDAwMCAqIEUxODsKCXVpbnQgcHVibGljIGNvbnN0YW50IGljb0NvaW5DYXAgICAgID0gMTQwMDAwMDAwICogRTE4OwoJdWludCBwdWJsaWMgY29uc3RhbnQgbWt0Q29pbkNhcCAgICAgPSAgNjAwMDAwMDAgKiBFMTg7Cgl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlQ29pbkNhcCA9ICA0ODAwMDAwMCAqIEUxODsKCgl1aW50IHB1YmxpYyBjb2luUGVyRXRoID0gMjAwMDAgKiBFMTg7CgoJdWludCBwdWJsaWMgY29uc3RhbnQgcHJpdmF0ZVNhbGVCb251cwkgPSAzMDsKCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVGaXJzdEJvbnVzCSA9IDIwOwoJdWludCBwdWJsaWMgY29uc3RhbnQgcHJlU2FsZVNlY29uZEJvbnVzICA9IDE1OwoJdWludCBwdWJsaWMgY29uc3RhbnQgbWFpblNhbGVGaXJzdEJvbnVzCSA9IDU7Cgl1aW50IHB1YmxpYyBjb25zdGFudCBtYWluU2FsZVNlY29uZEJvbnVzID0gMDsKCiAgCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVGaXJzdFN0YXJ0RGF0ZSA9IDE1MTc3ODg4MDA7IC8vIDIwMTgtMDItMDUgMDA6MDAgVVRDCiAgCXVpbnQgcHVibGljIGNvbnN0YW50IHByZVNhbGVGaXJzdEVuZERhdGUgICA9IDE1MTgzMDcyMDA7IC8vIDIwMTgtMDItMTEgMDA6MDAgVVRDCgogIAl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlU2Vjb25kU3RhcnREYXRlID0gMTUxODM5MzYwMDsgLy8gMjAxOC0wMi0xMiAwMDowMCBVVEMKICAJdWludCBwdWJsaWMgY29uc3RhbnQgcHJlU2FsZVNlY29uZEVuZERhdGUgICA9IDE1MTg5MTIwMDA7IC8vIDIwMTgtMDItMTggMDA6MDAgVVRDCgoKICAJdWludCBwdWJsaWMgY29uc3RhbnQgbWFpblNhbGVGaXJzdFN0YXJ0RGF0ZSA9IDE1MTk2MDMyMDA7IC8vIDIwMTgtMDItMjYgMDA6MDAgVVRDCiAgCXVpbnQgcHVibGljIGNvbnN0YW50IG1haW5TYWxlRmlyc3RFbmREYXRlICAgPSAxNTIwMTIxNjAwOyAvLyAyMDE4LTAzLTA0IDAwOjAwIFVUQwoKICAJdWludCBwdWJsaWMgY29uc3RhbnQgbWFpblNhbGVTZWNvbmRTdGFydERhdGUgPSAxNTIwMjA4MDAwOyAvLyAyMDE4LTAzLTA1IDAwOjAwIFVUQwogIAl1aW50IHB1YmxpYyBjb25zdGFudCBtYWluU2FsZVNlY29uZEVuZERhdGUgICA9IDE1MjA3MjY0MDA7IC8vIDIwMTgtMDMtMTEgMDA6MDAgVVRDCgoJdWludCBwdWJsaWMgY29uc3RhbnQgdHJhbnNmZXJDb29sZG93biA9IDIgZGF5czsKCgl1aW50IHB1YmxpYyBjb25zdGFudCBwcmVTYWxlTWluRXRoICA9IDEgZXRoZXI7Cgl1aW50IHB1YmxpYyBjb25zdGFudCBtYWluU2FsZU1pbkV0aCA9ICAxIGV0aGVyIC8gMjsgLy8gMC41IEV0aGVyCgogIAl1aW50IHB1YmxpYyBpY29FdGhlclJlY2VpdmVkID0gMDsgLy8gRXRoZXIgYWN0dWFsbHkgcmVjZWl2ZWQgYnkgdGhlIGNvbnRyYWN0CgogICAgdWludCBwdWJsaWMgY29pbklzc3VlZFRvdGFsICAgICA9IDA7CiAgCXVpbnQgcHVibGljIGNvaW5Jc3N1ZWRJY28gICAgICAgPSAwOwogIAl1aW50IHB1YmxpYyBjb2luSXNzdWVkTWt0ICAgICAgID0gMDsKCXVpbnQgcHVibGljIGNvaW5Jc3N1ZWRQcml2YXRlICAgPSAwOwoJCgl1aW50IHB1YmxpYyBjb2luQnVybkljbyA9IDA7Cgl1aW50IHB1YmxpYyBjb2luQnVybk1rdCA9IDA7CgogIAltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGljb0V0aGVyQ29udHJpYnV0ZWQ7CiAgCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgaWNvQ29pblJlY2VpdmVkOwogIAltYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHJlZnVuZENsYWltZWQ7CiAgCW1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgY29pbkxvY2tlZDsKICAJCiAJZXZlbnQgV2FsbGV0Q2hhbmdlKGFkZHJlc3MgX25ld1dhbGxldCk7CiAgCWV2ZW50IEFkbWluV2FsbGV0Q2hhbmdlKGFkZHJlc3MgX25ld0FkbWluV2FsbGV0KTsKICAJZXZlbnQgQ29pbk1pbnRlZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF90b2tlbnMsIHVpbnQgX2JhbGFuY2UpOwogIAlldmVudCBDb2luSXNzdWVkKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQgX3Rva2VucywgdWludCBfYmFsYW5jZSwgdWludCBfZXRoZXJDb250cmlidXRlZCk7CiAgCWV2ZW50IFJlZnVuZChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50IF9hbW91bnQsIHVpbnQgX3Rva2Vucyk7CiAgCWV2ZW50IExvY2tSZW1vdmUoYWRkcmVzcyBpbmRleGVkIF9wYXJ0aWNpcGFudCk7CglldmVudCBXaXRoRHJhdyhhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF9hbW91bnQpOwoJZXZlbnQgT3duZXJSZWNsYWltKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF9vd25lciwgdWludCBfYW1vdW50KTsKCiAgCWZ1bmN0aW9uIExlZVN1bmdDb2luKCkgcHVibGljCgl7CgkJcmVxdWlyZSggaWNvQ29pbkNhcCArIG1rdENvaW5DYXAgPT0gdG90YWxDb2luQ2FwICk7CgkJd2FsbGV0ID0gb3duZXI7CgkJYWRtaW5XYWxsZXQgPSBvd25lcjsKICAJfQoKICAJZnVuY3Rpb24gKCkgcGF5YWJsZSBwdWJsaWMKCXsKICAgIAlidXlDb2luKCk7CiAgCX0KICAJCiAgCWZ1bmN0aW9uIGF0Tm93KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpCgl7CgkJcmV0dXJuIG5vdzsKICAJfQoKICAJZnVuY3Rpb24gYnV5Q29pbigpIHByaXZhdGUKCXsKCQl1aW50IG5vd1RpbWUgPSBhdE5vdygpOwoKCQl1aW50IHNhbGVUaW1lID0gMDsgLy8gMSA6IHByZVNhbGVGaXJzdCwgMiA6IHByZVNhbGVTZWNvbmQsIDMgOiBtYWluU2FsZUZpcnN0LCA0IDogbWFpblNhbGVTZWNvbmQKCgkJdWludCBtaW5FdGggPSAwOwoJCXVpbnQgbWF4RXRoID0gMzAwIGV0aGVyOwoKCQl1aW50IGNvaW5zID0gMDsKCQl1aW50IGNvaW5Cb251cyA9IDA7CgkJdWludCBjb2luQ2FwID0gMDsKCgkJaWYgKG5vd1RpbWUgPiBwcmVTYWxlRmlyc3RTdGFydERhdGUgJiYgbm93VGltZSA8IHByZVNhbGVGaXJzdEVuZERhdGUpCgkJewoJCQlzYWxlVGltZSA9IDE7CgkJCW1pbkV0aCA9IHByZVNhbGVNaW5FdGg7CgkJCWNvaW5Cb251cyA9IHByZVNhbGVGaXJzdEJvbnVzOwoJCQljb2luQ2FwID0gcHJlU2FsZUNvaW5DYXA7CgkJfQoKCQlpZiAobm93VGltZSA+IHByZVNhbGVTZWNvbmRTdGFydERhdGUgJiYgbm93VGltZSA8IHByZVNhbGVTZWNvbmRFbmREYXRlKQoJCXsKCQkJc2FsZVRpbWUgPSAyOwoJCQltaW5FdGggPSBwcmVTYWxlTWluRXRoOwoJCQljb2luQm9udXMgPSBwcmVTYWxlU2Vjb25kQm9udXM7CgkJCWNvaW5DYXAgPSBwcmVTYWxlQ29pbkNhcDsKCQl9CgoJCWlmIChub3dUaW1lID4gbWFpblNhbGVGaXJzdFN0YXJ0RGF0ZSAmJiBub3dUaW1lIDwgbWFpblNhbGVGaXJzdEVuZERhdGUpCgkJewoJCQlzYWxlVGltZSA9IDM7CgkJCW1pbkV0aCA9IG1haW5TYWxlTWluRXRoOwoJCQljb2luQm9udXMgPSBtYWluU2FsZUZpcnN0Qm9udXM7CgkJCWNvaW5DYXAgPSBpY29Db2luQ2FwOwoJCX0KCgkJaWYgKG5vd1RpbWUgPiBtYWluU2FsZVNlY29uZFN0YXJ0RGF0ZSAmJiBub3dUaW1lIDwgbWFpblNhbGVTZWNvbmRFbmREYXRlKQoJCXsKCQkJc2FsZVRpbWUgPSA0OwoJCQltaW5FdGggPSBtYWluU2FsZU1pbkV0aDsKCQkJY29pbkJvbnVzID0gbWFpblNhbGVTZWNvbmRCb251czsKCQkJY29pbkNhcCA9IGljb0NvaW5DYXA7CgkJfQoJCQoJCXJlcXVpcmUoIHNhbGVUaW1lID49IDEgJiYgc2FsZVRpbWUgPD0gNCApOwoJCXJlcXVpcmUoIG1zZy52YWx1ZSA+PSBtaW5FdGggKTsKCQlyZXF1aXJlKCBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpIDw9IG1heEV0aCApOwoKCQljb2lucyA9IGNvaW5QZXJFdGgubXVsKG1zZy52YWx1ZSkgLyAxIGV0aGVyOwogICAgICAJY29pbnMgPSBjb2lucy5tdWwoMTAwICsgY29pbkJvbnVzKSAvIDEwMDsKCgkJcmVxdWlyZSggY29pbklzc3VlZEljby5hZGQoY29pbnMpIDw9IGNvaW5DYXAgKTsKCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gICAgICAgID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKGNvaW5zKTsKCSAgICBpY29Db2luUmVjZWl2ZWRbbXNnLnNlbmRlcl0gPSBpY29Db2luUmVjZWl2ZWRbbXNnLnNlbmRlcl0uYWRkKGNvaW5zKTsKCQljb2luSXNzdWVkSWNvICAgICAgICAgICAgICAgPSBjb2luSXNzdWVkSWNvLmFkZChjb2lucyk7CgkJdG9rZW5zSXNzdWVkVG90YWwgICAgICAgICAgID0gdG9rZW5zSXNzdWVkVG90YWwuYWRkKGNvaW5zKTsKICAgIAoJCWljb0V0aGVyUmVjZWl2ZWQgICAgICAgICAgICAgICAgPSBpY29FdGhlclJlY2VpdmVkLmFkZChtc2cudmFsdWUpOwoJCWljb0V0aGVyQ29udHJpYnV0ZWRbbXNnLnNlbmRlcl0gPSBpY29FdGhlckNvbnRyaWJ1dGVkW21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpOwogICAgCgkJY29pbkxvY2tlZFttc2cuc2VuZGVyXSA9IHRydWU7CiAgICAKCQlUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIGNvaW5zKTsKCQlDb2luSXNzdWVkKG1zZy5zZW5kZXIsIGNvaW5zLCBiYWxhbmNlc1ttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKCgkJd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgCX0KCiAJZnVuY3Rpb24gaXNUcmFuc2ZlcmFibGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCB0cmFuc2ZlcmFibGUpCgl7CgkJaWYgKCBhdE5vdygpIDwgbWFpblNhbGVTZWNvbmRFbmREYXRlICsgdHJhbnNmZXJDb29sZG93biApCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlyZXR1cm4gdHJ1ZTsKICAJfQoKCWZ1bmN0aW9uIGNvaW5Mb2NrUmVtb3ZlKGFkZHJlc3MgX3BhcnRpY2lwYW50KSBwdWJsaWMKCXsKCQlyZXF1aXJlKCBtc2cuc2VuZGVyID09IGFkbWluV2FsbGV0IHx8IG1zZy5zZW5kZXIgPT0gb3duZXIgKTsKCQljb2luTG9ja2VkW19wYXJ0aWNpcGFudF0gPSBmYWxzZTsKCQlMb2NrUmVtb3ZlKF9wYXJ0aWNpcGFudCk7CiAgCX0KCglmdW5jdGlvbiBjb2luTG9ja1Jtb3ZlTXVsdGlwbGUoYWRkcmVzc1tdIF9wYXJ0aWNpcGFudHMpIHB1YmxpYwoJewoJCXJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gYWRtaW5XYWxsZXQgfHwgbXNnLnNlbmRlciA9PSBvd25lciApOwogICAgCQkKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBfcGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKQoJCXsKICAJCQljb2luTG9ja2VkW19wYXJ0aWNpcGFudHNbaV1dID0gZmFsc2U7CiAgCQkJTG9ja1JlbW92ZShfcGFydGljaXBhbnRzW2ldKTsKCQl9CiAgCX0KCiAgCWZ1bmN0aW9uIGNoYW5nZVdhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciBwdWJsaWMKCXsKICAgIAkJcmVxdWlyZSggX3dhbGxldCAhPSBhZGRyZXNzKDB4MCkgKTsKICAgIAkJd2FsbGV0ID0gX3dhbGxldDsKICAgIAkJV2FsbGV0Q2hhbmdlKHdhbGxldCk7CiAgCX0KCiAgCWZ1bmN0aW9uIGNoYW5nZUFkbWluV2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgb25seU93bmVyIHB1YmxpYwoJewogICAgCQlyZXF1aXJlKCBfd2FsbGV0ICE9IGFkZHJlc3MoMHgwKSApOwogICAgCQlhZG1pbldhbGxldCA9IF93YWxsZXQ7CiAgICAJCUFkbWluV2FsbGV0Q2hhbmdlKGFkbWluV2FsbGV0KTsKICAJfQoKICAJZnVuY3Rpb24gbWludE1hcmtldGluZyhhZGRyZXNzIF9wYXJ0aWNpcGFudCwgdWludCBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljCgl7CgkJdWludCBjb2lucyA9IF9hbW91bnQgKiBFMTg7CgkJCgkJcmVxdWlyZSggY29pbnMgPD0gbWt0Q29pbkNhcC5zdWIoY29pbklzc3VlZE1rdCkgKTsKCQkKCQliYWxhbmNlc1tfcGFydGljaXBhbnRdID0gYmFsYW5jZXNbX3BhcnRpY2lwYW50XS5hZGQoY29pbnMpOwoJCQoJCWNvaW5Jc3N1ZWRNa3QgICA9IGNvaW5Jc3N1ZWRNa3QuYWRkKGNvaW5zKTsKCQljb2luSXNzdWVkVG90YWwgPSBjb2luSXNzdWVkVG90YWwuYWRkKGNvaW5zKTsKCQkKCQljb2luTG9ja2VkW19wYXJ0aWNpcGFudF0gPSB0cnVlOwoJCQoJCVRyYW5zZmVyKDB4MCwgX3BhcnRpY2lwYW50LCBjb2lucyk7CgkJQ29pbk1pbnRlZChfcGFydGljaXBhbnQsIGNvaW5zLCBiYWxhbmNlc1tfcGFydGljaXBhbnRdKTsKICAJfQoKICAJZnVuY3Rpb24gbWludFByaXZhdGUoYWRkcmVzcyBfcGFydGljaXBhbnQsIHVpbnQgX2V0aGVyVmFsdWUpIG9ubHlPd25lciBwdWJsaWMKCXsKCQl1aW50IGNvaW5zID0gY29pblBlckV0aC5tdWwoX2V0aGVyVmFsdWUpOwogICAgICAJY29pbnMgPSBjb2lucy5tdWwoMTAwICsgcHJpdmF0ZVNhbGVCb251cykgLyAxMDA7CgoJCXJlcXVpcmUoIGNvaW5zIDw9IGljb0NvaW5DYXAuc3ViKGNvaW5Jc3N1ZWRJY28pICk7CgkJcmVxdWlyZSggYXROb3coKSA8IHByZVNhbGVGaXJzdFN0YXJ0RGF0ZSApOwoKCQliYWxhbmNlc1tfcGFydGljaXBhbnRdID0gYmFsYW5jZXNbX3BhcnRpY2lwYW50XS5hZGQoY29pbnMpOwoKCQljb2luSXNzdWVkUHJpdmF0ZSAgID0gY29pbklzc3VlZFByaXZhdGUuYWRkKGNvaW5zKTsKCQljb2luSXNzdWVkSWNvICAgICAgID0gY29pbklzc3VlZEljby5hZGQoY29pbnMpOwoJCWNvaW5Jc3N1ZWRUb3RhbCAgICAgPSBjb2luSXNzdWVkVG90YWwuYWRkKGNvaW5zKTsKCgkJY29pbkxvY2tlZFtfcGFydGljaXBhbnRdID0gdHJ1ZTsKCQlUcmFuc2ZlcigweDAsIF9wYXJ0aWNpcGFudCwgY29pbnMpOwoJCUNvaW5NaW50ZWQoX3BhcnRpY2lwYW50LCBjb2lucywgYmFsYW5jZXNbX3BhcnRpY2lwYW50XSk7CiAgCX0KICAJCiAgCWZ1bmN0aW9uIG93bmVyV2l0aGRyYXcoKSBleHRlcm5hbCBvbmx5T3duZXIKCXsKCQl1aW50IGFtb3VudCA9IHRoaXMuYmFsYW5jZTsKCQl3YWxsZXQudHJhbnNmZXIoYW1vdW50KTsKCQlXaXRoRHJhdyhtc2cuc2VuZGVyLCBhbW91bnQpOwogIAl9CiAgCQogIAlmdW5jdGlvbiB0cmFuc2ZlckFueUVSQzIwVG9rZW4oYWRkcmVzcyB0b2tlbkFkZHJlc3MsIHVpbnQgYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKCXsKICAJCXJldHVybiBFUkMyMEludGVyZmFjZSh0b2tlbkFkZHJlc3MpLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogIAl9CiAgCQogIAlmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQoJewoJCXJlcXVpcmUoIGlzVHJhbnNmZXJhYmxlKCkgKTsKCQlyZXF1aXJlKCBjb2luTG9ja2VkW21zZy5zZW5kZXJdID09IGZhbHNlICk7CgkJcmVxdWlyZSggY29pbkxvY2tlZFtfdG9dID09IGZhbHNlICk7CgkJcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgCX0KICAJCiAgCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQoJewoJCXJlcXVpcmUoIGlzVHJhbnNmZXJhYmxlKCkgKTsKCQlyZXF1aXJlKCBjb2luTG9ja2VkW19mcm9tXSA9PSBmYWxzZSApOwoJCXJlcXVpcmUoIGNvaW5Mb2NrZWRbX3RvXSA9PSBmYWxzZSApOwoJCXJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgCX0KCiAgCWZ1bmN0aW9uIHRyYW5zZmVyTXVsdGlwbGUoYWRkcmVzc1tdIF9hZGRyZXNzZXMsIHVpbnRbXSBfYW1vdW50cykgZXh0ZXJuYWwKICAJewoJCXJlcXVpcmUoIGlzVHJhbnNmZXJhYmxlKCkgKTsKCQlyZXF1aXJlKCBjb2luTG9ja2VkW21zZy5zZW5kZXJdID09IGZhbHNlICk7CgkJcmVxdWlyZSggX2FkZHJlc3Nlcy5sZW5ndGggPT0gX2Ftb3VudHMubGVuZ3RoICk7CgkJCgkJZm9yICh1aW50IGkgPSAwOyBpIDwgX2FkZHJlc3Nlcy5sZW5ndGg7IGkrKykKCQl7CiAgCQkJaWYgKGNvaW5Mb2NrZWRbX2FkZHJlc3Nlc1tpXV0gPT0gZmFsc2UpIAoJCQl7CgkJCQlzdXBlci50cmFuc2ZlcihfYWRkcmVzc2VzW2ldLCBfYW1vdW50c1tpXSk7CgkJCX0KCQl9CiAgCX0KCiAgCWZ1bmN0aW9uIHJlY2xhaW1GdW5kcygpIGV4dGVybmFsCgl7CgkJdWludCBjb2luczsKCQl1aW50IGFtb3VudDsKCgkJcmVxdWlyZSggYXROb3coKSA+IG1haW5TYWxlU2Vjb25kRW5kRGF0ZSApOwoJCXJlcXVpcmUoICFyZWZ1bmRDbGFpbWVkW21zZy5zZW5kZXJdICk7CgkJcmVxdWlyZSggaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXSA+IDAgKTsKCgkJY29pbnMgPSBpY29Db2luUmVjZWl2ZWRbbXNnLnNlbmRlcl07CgkJYW1vdW50ID0gaWNvRXRoZXJDb250cmlidXRlZFttc2cuc2VuZGVyXTsKCgkJYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoY29pbnMpOwoJCXRva2Vuc0lzc3VlZFRvdGFsICAgID0gdG9rZW5zSXNzdWVkVG90YWwuc3ViKGNvaW5zKTsKCgkJcmVmdW5kQ2xhaW1lZFttc2cuc2VuZGVyXSA9IHRydWU7CgoJCW1zZy5zZW5kZXIudHJhbnNmZXIoYW1vdW50KTsKCgkJVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBjb2lucyk7CgkJUmVmdW5kKG1zZy5zZW5kZXIsIGFtb3VudCwgY29pbnMpOwogIAl9CiAgCQogICAgZnVuY3Rpb24gdHJhbnNmZXJUb093bmVyKGFkZHJlc3MgX2Zyb20pIG9ubHlPd25lciBwdWJsaWMKICAgIHsKCQlyZXF1aXJlKCBjb2luTG9ja2VkW19mcm9tXSA9PSBmYWxzZSApOwogICAgICAgIHVpbnQgYW1vdW50ID0gYmFsYW5jZU9mKF9mcm9tKTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKGFtb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChhbW91bnQpOwogICAgICAgIAogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBvd25lciwgYW1vdW50KTsKICAgICAgICBPd25lclJlY2xhaW0oX2Zyb20sIG93bmVyLCBhbW91bnQpOwogICAgfQoKCWZ1bmN0aW9uIGJ1cm5Db2lucyh1aW50IF9pY29BbW91bnQsIHVpbnQgX21rdEFtb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpCgl7CgkgICAgdWludCBpY29Db2lucyA9IF9pY29BbW91bnQgKiBFMTg7CgkgICAgdWludCBta3RDb2lucyA9IF9ta3RBbW91bnQgKiBFMTg7CgkgICAgCgkgICAgdWludCB0b3RhbEJ1cm5Db2lucyA9IDA7CgkgICAgdG90YWxCdXJuQ29pbnMgPSB0b3RhbEJ1cm5Db2lucy5hZGQoaWNvQ29pbnMpOwoJICAgIHRvdGFsQnVybkNvaW5zID0gdG90YWxCdXJuQ29pbnMuYWRkKG1rdENvaW5zKTsKCSAgICAKCSAgICBjb2luQnVybkljbyA9IGNvaW5CdXJuSWNvLmFkZChpY29Db2lucyk7CgkgICAgY29pbkJ1cm5Na3QgPSBjb2luQnVybk1rdC5hZGQobWt0Q29pbnMpOwoJICAgIAoJCXJldHVybiBzdXBlci5idXJuKHRvdGFsQnVybkNvaW5zKTsKCX0KCn0='.
	

]
