Class {
	#name : #SRT19de65cb8f9747987ae97cfbd176f5031c35da30,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT19de65cb8f9747987ae97cfbd176f5031c35da30 >> base64 [
	^ 'LyoqCiAgICBDb3B5cmlnaHQgKGMpIDIwMTggVGF5bG9yIE8mIzIyMDsKCiAgICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKICAgIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAgICBUSEUgU09GVFdBUkUuCgogICAgYmFzZWQgb24gdGhlIGNvbnRyYWN0cyBvZiBPcGVuWmVwcGVsaW46CiAgICBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L3RyZWUvbWFzdGVyL2NvbnRyYWN0cwoKKiovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xODsKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgovKioKICBAdGl0bGUgVGF5bG9yVG9rZW4KKiovCmNvbnRyYWN0IFRheWxvclRva2VuIGlzIE93bmFibGV7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLyoqCiAgICAgICAgRVZFTlRTCiAgICAqKi8KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQyNTYgX2Ftb3VudCk7CiAgICAvKioKICAgICAgICBDT05UUkFDVCBWQVJJQUJMRVMKICAgICoqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvL3RoaXMgYWRkcmVzcyBjYW4gdHJhbnNmZXIgZXZlbiB3aGVuIHRyYW5zZmVyIGlzIGRpc2FibGVkLgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0ZWRUcmFuc2ZlcjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHdoaXRlbGlzdGVkQnVybjsKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiVGF5bG9yIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlRBWSI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQyNTYgY29uc3RhbnQgaW50ZXJuYWwgREVDSU1BTF9DQVNFUyA9IDEwKioxODsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5ID0gMTAqKjcgKiBERUNJTUFMX0NBU0VTOwogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJhYmxlID0gZmFsc2U7CgogICAgLyoqCiAgICAgICAgTU9ESUZJRVJTCiAgICAqKi8KICAgIG1vZGlmaWVyIG9ubHlXaGVuVHJhbnNmZXJhYmxlKCl7CiAgICAgIGlmKCF3aGl0ZWxpc3RlZFRyYW5zZmVyW21zZy5zZW5kZXJdKXsKICAgICAgICByZXF1aXJlKHRyYW5zZmVyYWJsZSk7CiAgICAgIH0KICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAgICBDT05TVFJVQ1RPUgogICAgKiovCgogICAgLyoqCiAgICAgIEBkZXYgQ29uc3RydWN0b3IgZnVuY3Rpb24gZXhlY3V0ZWQgb24gY29udHJhY3QgY3JlYXRpb24KICAgICoqLwogICAgZnVuY3Rpb24gVGF5bG9yVG9rZW4oKQogICAgICBPd25hYmxlKCkKICAgICAgcHVibGljCiAgICB7CiAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQodG90YWxTdXBwbHkpOwogICAgICB3aGl0ZWxpc3RlZFRyYW5zZmVyW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgd2hpdGVsaXN0ZWRCdXJuW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSxvd25lciwgdG90YWxTdXBwbHkpOwogICAgfQoKICAgIC8qKgogICAgICAgIE9XTkVSIE9OTFkgRlVOQ1RJT05TCiAgICAqKi8KCiAgICAvKioKICAgICAgQGRldiBBY3RpdmF0ZXMgdGhlIHRyYXNmZXIgZm9yIGFsbCB1c2VycwogICAgKiovCiAgICBmdW5jdGlvbiBhY3RpdmF0ZVRyYW5zZmVycygpCiAgICAgIHB1YmxpYwogICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgdHJhbnNmZXJhYmxlID0gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAgQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIGFkZCBhZGRyZXNzZSB0aGF0IGNhbiBieXBhc3MgdGhlCiAgICAgIHRyYW5zZmVyIGxvY2suIEVnOiBJQ08gY29udHJhY3QsIFRHRSBjb250cmFjdC4KICAgICAgQHBhcmFtIF9hZGRyZXNzIGFkZHJlc3MgQWRkcmVzcyB0byBiZSBhZGRlZAogICAgKiovCiAgICBmdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZFRyYW5zZmVyKGFkZHJlc3MgX2FkZHJlc3MpCiAgICAgIHB1YmxpYwogICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgd2hpdGVsaXN0ZWRUcmFuc2ZlcltfYWRkcmVzc10gPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICBAZGV2IFNlbmRzIGFsbCBhdmFpYmxlIFRBWSB0byB0aGUgVEdFIGNvbnRyYWN0IHRvIGJlIHByb3Blcmx5CiAgICAgIGRpc3RyaWJ1dGUKICAgICAgQHBhcmFtIF90Z2VBZGRyZXNzIGFkZHJlc3MgQWRkcmVzcyBvZiB0aGUgdG9rZW4gZGlzdHJpYnV0aW9uCiAgICAgIGNvbnRyYWN0CiAgICAqKi8KICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGUoYWRkcmVzcyBfdGdlQWRkcmVzcykKICAgICAgcHVibGljCiAgICAgIG9ubHlPd25lcgogICAgewogICAgICB3aGl0ZWxpc3RlZFRyYW5zZmVyW190Z2VBZGRyZXNzXSA9IHRydWU7CiAgICAgIHRyYW5zZmVyKF90Z2VBZGRyZXNzLCBiYWxhbmNlc1tvd25lcl0pOwogICAgfQoKCiAgICAvKioKICAgICAgQGRldiBBbGxvd3MgdGhlIG93bmVyIHRvIGFkZCBhZGRyZXNzZSB0aGF0IGNhbiBidXJuIHRva2VucwogICAgICBFZzogSUNPIGNvbnRyYWN0LCBUR0UgY29udHJhY3QuCiAgICAgIEBwYXJhbSBfYWRkcmVzcyBhZGRyZXNzIEFkZHJlc3MgdG8gYmUgYWRkZWQKICAgICoqLwogICAgZnVuY3Rpb24gYWRkV2hpdGVsaXN0ZWRCdXJuKGFkZHJlc3MgX2FkZHJlc3MpCiAgICAgIHB1YmxpYwogICAgICBvbmx5T3duZXIKICAgIHsKICAgICAgd2hpdGVsaXN0ZWRCdXJuW19hZGRyZXNzXSA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgICAgUFVCTElDIEZVTkNUSU9OUwogICAgKiovCgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgICAgcHVibGljCiAgICAgIG9ubHlXaGVuVHJhbnNmZXJhYmxlCiAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbQogICAgICAoYWRkcmVzcyBfZnJvbSwKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF92YWx1ZSkKICAgICAgICBwdWJsaWMKICAgICAgICBvbmx5V2hlblRyYW5zZmVyYWJsZQogICAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICBGb3Igc2VjdXJpdHkgcmVhc29ucywgaWYgb25lIG5lZWQgdG8gY2hhbmdlIHRoZSB2YWx1ZSBmcm9tIGEgZXhpc3RpbmcgYWxsb3dhbmNlLCBpdCBtdXN0IGZ1cnN0IHNldHMKICAgIGl0IHRvIHplcm8gYW5kIHRoZW4gc2V0cyB0aGUgbmV3IHZhbHVlCgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkKICAgICAgcHVibGljCiAgICAgIG9ubHlXaGVuVHJhbnNmZXJhYmxlCiAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAgIC8qKgogICAgICogQGRldiBJbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgICoKICAgICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKQogICAgICBwdWJsaWMKICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICAqCiAgICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBkZWNyZW1lbnQKICAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHBhcmFtIF9zdWJ0cmFjdGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gZGVjcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgICAqLwogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpCiAgICAgIHB1YmxpYwogICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgIH0KICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgIEBkZXYgQWxsb3dzIGZvciBtc2cuc2VuZGVyIHRvIGJ1cm4gaGlzIG9uIHRva2VucwogICAgICBAcGFyYW0gX2Ftb3VudCB1aW50MjU2IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgKiovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX2Ftb3VudCkKICAgICAgcHVibGljCiAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgcmVxdWlyZSh3aGl0ZWxpc3RlZEJ1cm5bbXNnLnNlbmRlcl0pOwogICAgICByZXF1aXJlKF9hbW91bnQgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgdG90YWxTdXBwbHkgPSAgdG90YWxTdXBwbHkuc3ViKF9hbW91bnQpOwogICAgICBCdXJuKG1zZy5zZW5kZXIsIF9hbW91bnQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLyoqCiAgICAgICAgQ09OU1RBTlQgRlVOQ1RJT05TCiAgICAqKi8KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICAgICAgdmlldwogICAgICBwdWJsaWMKICAgICAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpCiAgICB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKfQoKCgoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIFRva2VuVmVzdGluZwogKiBAZGV2IEEgdG9rZW4gaG9sZGVyIGNvbnRyYWN0IHRoYXQgY2FuIHJlbGVhc2UgaXRzIHRva2VuIGJhbGFuY2UgZ3JhZHVhbGx5IGxpa2UgYQogKiB0eXBpY2FsIHZlc3Rpbmcgc2NoZW1lLCB3aXRoIGEgY2xpZmYgYW5kIHZlc3RpbmcgcGVyaW9kLgogKi8KY29udHJhY3QgVG9rZW5WZXN0aW5nIGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBldmVudCBSZWxlYXNlZCh1aW50MjU2IGFtb3VudCk7CgogIC8vIGJlbmVmaWNpYXJ5IG9mIHRva2VucyBhZnRlciB0aGV5IGFyZSByZWxlYXNlZAogIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICBUYXlsb3JUb2tlbiBwdWJsaWMgdG9rZW47CgogIHVpbnQyNTYgcHVibGljIGNsaWZmOwogIHVpbnQyNTYgcHVibGljIHN0YXJ0OwogIHVpbnQyNTYgcHVibGljIGR1cmF0aW9uOwoKICB1aW50MjU2IHB1YmxpYyByZWxlYXNlZDsKCiAgLyoqCiAgICogQGRldiBDcmVhdGVzIGEgdmVzdGluZyBjb250cmFjdCB0aGF0IHZlc3RzIGl0cyBiYWxhbmNlIG9mIGFueSBFUkMyMCB0b2tlbiB0byB0aGUKICAgKiBfYmVuZWZpY2lhcnksIGdyYWR1YWxseSBpbiBhIGxpbmVhciBmYXNoaW9uIHVudGlsIF9zdGFydCArIF9kdXJhdGlvbi4gQnkgdGhlbiBhbGwKICAgKiBvZiB0aGUgYmFsYW5jZSB3aWxsIGhhdmUgdmVzdGVkLgogICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgYWRkcmVzcyBvZiB0aGUgYmVuZWZpY2lhcnkgdG8gd2hvbSB2ZXN0ZWQgdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZAogICAqIEBwYXJhbSBfY2xpZmYgZHVyYXRpb24gaW4gc2Vjb25kcyBvZiB0aGUgY2xpZmYgaW4gd2hpY2ggdG9rZW5zIHdpbGwgYmVnaW4gdG8gdmVzdAogICAqIEBwYXJhbSBfZHVyYXRpb24gZHVyYXRpb24gaW4gc2Vjb25kcyBvZiB0aGUgcGVyaW9kIGluIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCB2ZXN0CiAgICogQHBhcmFtIF90b2tlbiBUaGUgdG9rZW4gdG8gYmUgdmVzdGVkCiAgICovCiAgZnVuY3Rpb24gVG9rZW5WZXN0aW5nKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LGFkZHJlc3MgX3Rva2VuLCB1aW50MjU2IF9zdGFydCwgdWludDI1NiBfY2xpZmYsIHVpbnQyNTYgX2R1cmF0aW9uKSBwdWJsaWMgewogICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF9jbGlmZiA8PSBfZHVyYXRpb24pOwoKICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgZHVyYXRpb24gPSBfZHVyYXRpb247CiAgICB0b2tlbiA9IFRheWxvclRva2VuKF90b2tlbik7CiAgICBjbGlmZiA9IF9zdGFydC5hZGQoX2NsaWZmKTsKICAgIHN0YXJ0ID0gX3N0YXJ0OwogIH0KCiAgLyoqCiAgICogQG5vdGljZSBUcmFuc2ZlcnMgdmVzdGVkIHRva2VucyB0byBiZW5lZmljaWFyeS4KICAgKi8KICBmdW5jdGlvbiByZWxlYXNlKCkgcHVibGljIHsKICAgIHVpbnQyNTYgdW5yZWxlYXNlZCA9IHJlbGVhc2FibGVBbW91bnQoKTsKICAgIHJlcXVpcmUodW5yZWxlYXNlZCA+IDApOwoKICAgIHJlbGVhc2VkID0gcmVsZWFzZWQuYWRkKHVucmVsZWFzZWQpOwoKICAgIHRva2VuLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCB1bnJlbGVhc2VkKTsKCiAgICBSZWxlYXNlZCh1bnJlbGVhc2VkKTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2FsY3VsYXRlcyB0aGUgYW1vdW50IHRoYXQgaGFzIGFscmVhZHkgdmVzdGVkIGJ1dCBoYXNuJ3QgYmVlbiByZWxlYXNlZCB5ZXQuCiAgICovCiAgZnVuY3Rpb24gcmVsZWFzYWJsZUFtb3VudCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB2ZXN0ZWRBbW91bnQoKS5zdWIocmVsZWFzZWQpOwogIH0KCiAgLyoqCiAgICogQGRldiBDYWxjdWxhdGVzIHRoZSBhbW91bnQgdGhhdCBoYXMgYWxyZWFkeSB2ZXN0ZWQuCiAgICovCiAgZnVuY3Rpb24gdmVzdGVkQW1vdW50KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjdXJyZW50QmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIHVpbnQyNTYgdG90YWxCYWxhbmNlID0gY3VycmVudEJhbGFuY2UuYWRkKHJlbGVhc2VkKTsKCiAgICBpZiAobm93IDwgY2xpZmYpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgaWYgKG5vdyA+PSBjbGlmZiAmJiBub3cgPCBzdGFydC5hZGQoZHVyYXRpb24pKSB7CiAgICAgIHJldHVybiB0b3RhbEJhbGFuY2UgLyAyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRvdGFsQmFsYW5jZTsKICAgIH0KICB9Cn0='.
	

]
