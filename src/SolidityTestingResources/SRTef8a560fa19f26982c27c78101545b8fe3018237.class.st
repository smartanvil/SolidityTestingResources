Class {
	#name : #SRTef8a560fa19f26982c27c78101545b8fe3018237,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTef8a560fa19f26982c27c78101545b8fe3018237 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmNvbnRyYWN0IEV0aGVyVGFua3MgewogICAgCiAgICBzdHJ1Y3QgVGFua0h1bGwgewogICAgICAgIHVpbnQzMiBhcm1vcjsgLy8gSHVsbCdzIGFybW9yIHZhbHVlCiAgICAgICAgdWludDMyIHNwZWVkOyAvLyBIdWxsJ3Mgc3BlZWQgdmFsdWUKICAgICAgICB1aW50OCBsZWFndWU7IC8vIFRoZSBiYXR0bGUgbGVhZ3VlIHdoaWNoIGFsbG93cyB0byBwbGF5IHdpdGggdGhpcyBodWxsIHR5cGUKICAgIH0KICAgIAogICAgc3RydWN0IFRhbmtXZWFwb24gewogICAgICAgIHVpbnQzMiBtaW5EYW1hZ2U7IC8vIFdlYXBvbiBtaW5pbWFsIGRhbWFnZSB2YWx1ZQogICAgICAgIHVpbnQzMiBtYXhEYW1hZ2U7IC8vIFdlYXBvbiBtYXhpbXVtIGRhbWFnZSB2YWx1ZQogICAgICAgIHVpbnQzMiBhdHRhY2tTcGVlZDsgLy8gV2VhcG9uJ3MgYXR0YWNrIHNwZWVkIHZhbHVlCiAgICAgICAgdWludDggbGVhZ3VlOyAvLyBUaGUgYmF0dGxlIGxlYWd1ZSB3aGljaCBhbGxvd3MgdG8gcGxheSB3aXRoIHRoaXMgd2VhcG9uIHR5cGUKICAgIH0KICAgIAogICAgc3RydWN0IFRhbmtQcm9kdWN0IHsKICAgICAgICBzdHJpbmcgbmFtZTsgLy8gVGFuaydzIG5hbWUKICAgICAgICB1aW50MzIgaHVsbDsgLy8gSHVsbCdzIElECiAgICAgICAgdWludDMyIHdlYXBvbjsgLy8gV2VhcG9uJ3MgSUQKICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCBpdCdzIGltcG9zc2libGUgdG8gZGVmaW5lIHRoZSB2YXJpYWJsZSBpbnNpZGUgdGhlIHN0cnVjdCBhcyBjb25zdGFudC4KICAgICAgICAvLyBIb3dldmVyLCB5b3UgY2FuIHJlYWQgdGhpcyBzbWFydC1jb250cmFjdCBhbmQgc2VlIHRoYXQgdGhlcmUgYXJlIG5vIGNoYW5nZXMgYXQgYWxsIHJlbGF0ZWQgdG8gdGhlIHN0YXJ0IHByaWNlcy4KICAgICAgICB1aW50MjU2IHN0YXJ0UHJpY2U7CiAgICAgICAgdWludDI1NiBjdXJyZW50UHJpY2U7IC8vIFRoZSBjdXJyZW50IHByaWNlLiBDaGFuZ2VzIGV2ZXJ5IHRpbWUgc29tZW9uZSBidXlzIHRoaXMga2luZCBvZiB0YW5rCiAgICAgICAgdWludDI1NiBlYXJuaW5nOyAvLyBUaGUgYW1vdW50IG9mIGVhcm5pbmcgZWFjaCBvd25lciBvZiB0aGlzIHRhbmsgZ2V0cyB3aGVuIHNvbWVvbmUgYnV5cyB0aGlzIHR5cGUgb2YgdGFuawogICAgICAgIHVpbnQyNTYgcmVsZWFzZVRpbWU7IC8vIFRoZSBtb21lbnQgd2hlbiBpdCB3aWxsIGJlIGFsbG93ZWQgdG8gYnV5IHRoaXMgdHlwZSBvZiB0YW5rCiAgICAgICAgdWludDMyIGFtb3VudE9mVGFua3M7IC8vIFRoZSBhbW91bnQgb2YgdGFua3Mgd2l0aCB0aGlzIGtpbmQgb2YgcHJvZHVjdAogICAgICAgIAogICAgfQogICAgICAgIAogICAgc3RydWN0IFRhbmtFbnRpdHkgewogICAgICAgIHVpbnQzMiBwcm9kdWN0SUQ7CiAgICAgICAgdWludDhbNF0gdXBncmFkZXM7CiAgICAgICAgYWRkcmVzcyBvd25lcjsgLy8gVGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyIG9mIHRoaXMgdGFuawogICAgICAgIGFkZHJlc3MgZWFybmVyOyAvLyBUaGUgYWRkcmVzcyBvZiB0aGUgZWFybmVyIG9mIHRoaXMgdGFuayB3aG8gZ2V0IHBhaWQKICAgICAgICBib29sIHNlbGxpbmc7IC8vIElzIHRoaXMgdGFuayBvbiB0aGUgYXVjdGlvbiBub3c/CiAgICAgICAgdWludDI1NiBhdWN0aW9uRW50aXR5OyAvLyBJZiBpdCdzIG9uIHRoZSBhdWN0aW9uLAogICAgICAgIHVpbnQyNTYgZWFybmVkOyAvLyBUb3RhbCBmdW5kcyBlYXJuZWQgd2l0aCB0aGlzIHRhbmsKICAgICAgICB1aW50MzIgZXhwOyAvLyBUYW5rJ3MgZXhwZXJpZW5jZQogICAgICAgIHVpbnQzMiBsYXN0Q2FzaG91dEluZGV4OyAvLyBMYXN0IGFtb3VudCBvZiB0YW5rcyBleGlzdGluZyBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIFByb2R1Y3RJRAogICAgfQogICAgCgogICAgc3RydWN0IEF1Y3Rpb25FbnRpdHkgewogICAgICAgIHVpbnQzMiB0YW5rSWQ7CiAgICAgICAgdWludDI1NiBzdGFydFByaWNlOwogICAgICAgIHVpbnQyNTYgZmluaXNoUHJpY2U7CiAgICAgICAgdWludDI1NiBzdGFydFRpbWU7CiAgICAgICAgdWludDI1NiBkdXJhdGlvbjsKICAgIH0KICAgIAogICAgZXZlbnQgRXZlbnRDYXNoT3V0ICgKICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICB1aW50MjU2IGFtb3VudAogICAgICAgKTsgLy87LSkKICAgIAogICAgZXZlbnQgRXZlbnRMb2dpbiAoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHBsYXllciwKICAgICAgICBzdHJpbmcgaGFzaAogICAgICAgICk7IC8vOy0pCiAgICAKICAgIGV2ZW50IEV2ZW50VXBncmFkZVRhbmsgKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgdWludDMyIHRhbmtJRCwKICAgICAgICB1aW50OCB1cGdyYWRlQ2hvaWNlCiAgICAgICAgKTsgLy8gOy0pCiAgICAKICAgIGV2ZW50IEV2ZW50VHJhbnNmZXIgKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlY2VpdmVyLAogICAgICAgIHVpbnQzMiB0YW5rSUQKICAgICAgICApOyAvLyA7LSkKICAgICAgICAKICAgIGV2ZW50IEV2ZW50VHJhbnNmZXJBY3Rpb24gKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBwbGF5ZXIsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHJlY2VpdmVyLAogICAgICAgIHVpbnQzMiB0YW5rSUQsCiAgICAgICAgdWludDggQWN0aW9uVHlwZQogICAgICAgICk7IC8vIDstKQogICAgICAgIAogICAgZXZlbnQgRXZlbnRBdWN0aW9uICgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgcGxheWVyLAogICAgICAgIHVpbnQzMiB0YW5rSUQsCiAgICAgICAgdWludDI1NiBzdGFydFByaWNlLAogICAgICAgIHVpbnQyNTYgZmluaXNoUHJpY2UsCiAgICAgICAgdWludDI1NiBkdXJhdGlvbiwKICAgICAgICB1aW50MjU2IGN1cnJlbnRUaW1lCiAgICAgICAgKTsgLy8gOy0pCiAgICBldmVudCBFdmVudENhbmNlbEF1Y3Rpb24gKAogICAgICAgIHVpbnQzMiB0YW5rSUQKICAgICAgICApOyAvLyA7LSkKICAgIAogICAgZXZlbnQgRXZlbnRCaWQgKAogICAgICAgIHVpbnQzMiB0YW5rSUQgIAogICAgICAgICk7IC8vIDstKQogICAgCiAgICBldmVudCBFdmVudFByb2R1Y3QgKAogICAgICAgIHVpbnQzMiBwcm9kdWN0SUQsCiAgICAgICAgc3RyaW5nIG5hbWUsCiAgICAgICAgdWludDMyIGh1bGwsCiAgICAgICAgdWludDMyIHdlYXBvbiwKICAgICAgICB1aW50MjU2IHByaWNlLAogICAgICAgIHVpbnQyNTYgZWFybmluZywKICAgICAgICB1aW50MjU2IHJlbGVhc2VUaW1lLAogICAgICAgIHVpbnQyNTYgY3VycmVudFRpbWUKICAgICAgICApOyAvLyA7LSkKICAgICAgICAKICAgIGV2ZW50IEV2ZW50QnV5VGFuayAoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIHBsYXllciwKICAgICAgICB1aW50MzIgcHJvZHVjdElELAogICAgICAgIHVpbnQzMiB0YW5rSUQKICAgICAgICApOyAvLyA7LSkKCiAgICAKICAgIGFkZHJlc3MgcHVibGljIFVwZ3JhZGVNYXN0ZXI7IC8vIEVhcm5zIGZlZXMgZm9yIHVwZ3JhZGluZyB0YW5rcyAoMC4wNSBFdGgpCiAgICBhZGRyZXNzIHB1YmxpYyBBdWN0aW9uTWFzdGVyOyAvLyBFYXJucyBmZWVzIGZvciBwcm9kdWNpbmcgYXVjdGlvbnMgKDMlKQogICAgYWRkcmVzcyBwdWJsaWMgVGFua1NlbGxNYXN0ZXI7IC8vIEVhcm5zIGZlZXMgZm9yIHNlbGxpbmcgdGFua3MgKHN0YXJ0IHByaWNlKQogICAgYWRkcmVzcyBwdWJsaWMgRXhwb3J0TWFzdGVyOyAvLyBFeHBvcnRzIHRhbmtzIGZyb20gdGhlIHByZXZpb3VzIGNvbnRyYWN0LgogICAgYm9vbCBwdWJsaWMgY2FuRXhwb3J0ID0gdHJ1ZTsgLy8gSWYgZmFsc2UgLS0gdGhlIGV4cG9ydGluZyBpcyBub3QgYWxsb3dlZCBmb3IgdGhpcyBjb250cmFjdCBmb3JldmVyLCBzbyBpdCdzIHNhZmUuCiAgICAvLyBObyBtb2RpZmllcnMgd2VyZSBuZWVkZWQsIGJlY2F1c2UgZWFjaCBhY2Nlc3MgaXMgY2hlY2tlZCBubyBtb3JlIHRoYW4gb25lIHRpbWUgaW4gdGhlIHdob2xlIGNvZGUsCiAgICAvLyBTbyBjYWxsaW5nICJyZXF1aXJlKG1zZy5zZW5kZXIgPT0gVXBncmFkZU1hc3Rlcik7IiBpcyBlbm91Z2guCiAgICAKICAgIGZ1bmN0aW9uIENoYW5nZVVwZ3JhZGVNYXN0ZXIgKGFkZHJlc3MgX25ld01hc3RlcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gVXBncmFkZU1hc3Rlcik7CiAgICAgICAgVXBncmFkZU1hc3RlciA9IF9uZXdNYXN0ZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENoYW5nZVRhbmtTZWxsTWFzdGVyIChhZGRyZXNzIF9uZXdNYXN0ZXIpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IFRhbmtTZWxsTWFzdGVyKTsKICAgICAgICBUYW5rU2VsbE1hc3RlciA9IF9uZXdNYXN0ZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIENoYW5nZUF1Y3Rpb25NYXN0ZXIgKGFkZHJlc3MgX25ld01hc3RlcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gQXVjdGlvbk1hc3Rlcik7CiAgICAgICAgQXVjdGlvbk1hc3RlciA9IF9uZXdNYXN0ZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIEZpbmlzaGVkRXhwb3J0aW5nICgpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IEV4cG9ydE1hc3Rlcik7CiAgICAgICAgY2FuRXhwb3J0ID0gZmFsc2U7IC8vIE5vdywgdGhlIGV4cG9ydGluZyBwcm9jZXNzIGhhcyBiZWVuIGZpbmlzaGVkLCBzbyB3ZSBkbyBub3QgbmVlZCB0byBleHBvcnQgYW55dGhpbmcgYW55bW9yZS4gRG9uZS4KICAgIH0KICAgIAogICAgZnVuY3Rpb24gRXRoZXJUYW5rcygpIHB1YmxpYyB7CiAgICAgICAgCiAgICAgICAgVXBncmFkZU1hc3RlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgQXVjdGlvbk1hc3RlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgVGFua1NlbGxNYXN0ZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIEV4cG9ydE1hc3RlciA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIENyZWF0aW5nIDExIGh1bGxzCiAgICAgICAgbmV3VGFua0h1bGwoMTAwLCA1LCAxKTsKICAgICAgICBuZXdUYW5rSHVsbCg2MCwgNiwgMik7CiAgICAgICAgbmV3VGFua0h1bGwoMTQwLCA0LCAxKTsKICAgICAgICBuZXdUYW5rSHVsbCgyMDAsIDMsIDEpOwogICAgICAgIG5ld1RhbmtIdWxsKDI0MCwgMywgMSk7CiAgICAgICAgbmV3VGFua0h1bGwoMjAwLCA2LCAyKTsKICAgICAgICBuZXdUYW5rSHVsbCgzNjAsIDQsIDIpOwogICAgICAgIG5ld1RhbmtIdWxsKDE4MCwgOSwgMyk7CiAgICAgICAgbmV3VGFua0h1bGwoMjQwLCA4LCAzKTsKICAgICAgICBuZXdUYW5rSHVsbCg1MDAsIDQsIDIpOwogICAgICAgIG5ld1RhbmtIdWxsKDQ0MCwgNiwgMyk7CiAgICAgICAgCiAgICAgICAgLy8gQ3JlYXRpbmcgMTEgd2VhcG9ucwogICAgICAgIG5ld1RhbmtXZWFwb24oNiwgMTQsIDUsIDEpOwogICAgICAgIG5ld1RhbmtXZWFwb24oMTgsIDI2LCAzLCAyKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDQ0LCA2NiwgMiwgMSk7CiAgICAgICAgbmV3VGFua1dlYXBvbigyMSwgNDksIDMsIDEpOwogICAgICAgIG5ld1RhbmtXZWFwb24oNjAsIDkwLCAyLCAyKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDIxLCA0OSwgMiwgMik7CiAgICAgICAgbmV3VGFua1dlYXBvbig0OCwgNzIsIDMsIDIpOwogICAgICAgIG5ld1RhbmtXZWFwb24oMTMsIDI5LCA5LCAzKTsKICAgICAgICBuZXdUYW5rV2VhcG9uKDM2LCA4NCwgNCwgMyk7CiAgICAgICAgbmV3VGFua1dlYXBvbigxMjAsIDE4MCwgMiwgMyk7CiAgICAgICAgbmV3VGFua1dlYXBvbig3MiwgMTA4LCA0LCAzKTsKICAgICAgICAKICAgICAgICAvLyBDcmVhdGluZyBmaXJzdCAxMSB0YW5rIHR5cGVzCiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIkxULTEiLCAxLCAxLCAxMDAwMDAwMDAwMDAwMDAwMCwgMTAwMDAwMDAwMDAwMDAwLCBub3cpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJMVC0yIiwgMiwgMiwgNTAwMDAwMDAwMDAwMDAwMDAsIDUwMDAwMDAwMDAwMDAwMCwgbm93KTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiTVQtMSIsIDMsIDMsIDEwMDAwMDAwMDAwMDAwMDAwMCwgMTAwMDAwMDAwMDAwMDAwMCwgbm93KTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiSFQtMSIsIDQsIDQsIDUwMDAwMDAwMDAwMDAwMDAwMCwgNTAwMDAwMDAwMDAwMDAwMCwgbm93KTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiU1BHLTEiLCA1LCA1LCA1MDAwMDAwMDAwMDAwMDAwMDAsIDUwMDAwMDAwMDAwMDAwMDAsIG5vdyk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIk1ULTIiLCA2LCA2LCA3MDAwMDAwMDAwMDAwMDAwMDAsIDcwMDAwMDAwMDAwMDAwMDAsIG5vdysoNjAqNjAqMikpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJIVC0yIiwgNywgNywgMTUwMDAwMDAwMDAwMDAwMDAwMCwgMTUwMDAwMDAwMDAwMDAwMDAsIG5vdysoNjAqNjAqNSkpOwogICAgICAgIG5ld1RhbmtQcm9kdWN0KCJMVC0zIiwgOCwgOCwgMzAwMDAwMDAwMDAwMDAwMDAwLCAzMDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKjgpKTsKICAgICAgICBuZXdUYW5rUHJvZHVjdCgiTVQtMyIsIDksIDksIDE1MDAwMDAwMDAwMDAwMDAwMDAsIDE1MDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKjI0KSk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIlNQRy0yIiwgMTAsIDEwLCAyMDAwMDAwMDAwMDAwMDAwMDAwLCAyMDAwMDAwMDAwMDAwMDAwMCwgbm93Kyg2MCo2MCoyNCoyKSk7CiAgICAgICAgbmV3VGFua1Byb2R1Y3QoIkhULTMiLCAxMSwgMTEsIDI1MDAwMDAwMDAwMDAwMDAwMDAsIDI1MDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKjI0KjMpKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FzaE91dCAodWludDI1NiBfYW1vdW50KSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSAoX2Ftb3VudCA+PSAwKTsgLy9qdXN0IGluIGNhc2UKICAgICAgICByZXF1aXJlIChfYW1vdW50ID09IHVpbnQyNTYodWludDEyOChfYW1vdW50KSkpOyAvLyBKdXN0IHNvbWUgbWFnaWMgc3R1ZmYKICAgICAgICByZXF1aXJlICh0aGlzLmJhbGFuY2UgPj0gX2Ftb3VudCk7IC8vIENoZWNraW5nIGlmIHRoaXMgY29udHJhY3QgaGFzIGVub3VnaHQgbW9uZXkgdG8gcGF5CiAgICAgICAgcmVxdWlyZSAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX2Ftb3VudCk7IC8vIENoZWNraW5nIGlmIHBsYXllciBoYXMgZW5vdWdoIGZ1bmRzIG9uIGhpcyBiYWxhbmNlCiAgICAgICAgaWYgKF9hbW91bnQgPT0gMCl7CiAgICAgICAgICAgIF9hbW91bnQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3RlZCBhbW91bnQgaXMgMCwgaXQgbWVhbnMgdGhhdCBwbGF5ZXIgd2FudHMgdG8gY2FzaG91dCB0aGUgd2hvbGUgYW1vdW50IG9mIGJhbGFuY2UKICAgICAgICB9CiAgICAgICAgaWYgKG1zZy5zZW5kZXIuc2VuZChfYW1vdW50KSl7IC8vIFNlbmRpbmcgZnVuZHMgYW5kIGlmIHRoZSB0cmFuc2FjdGlvbiBpcyBzdWNjZXNzZnVsCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7IC8vIENoYW5naW5nIHRoZSBhbW91bnQgb2YgZnVuZHMgb24gdGhlIHBsYXllcidzIGluLWdhbWUgYmFsYW5jZQogICAgICAgIH0KICAgICAgICAKICAgICAgICBFdmVudENhc2hPdXQgKG1zZy5zZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FzaE91dFRhbmsgKHVpbnQzMiBfdGFua0lEKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld0lkVGFuayk7IC8vIENoZWNraW5nIGlmIHRoZSB0YW5rIGV4aXN0cwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLm93bmVyID09IG1zZy5zZW5kZXIpOyAvLyBDaGVja2luZyBpZiBzZW5kZXIgb3ducyB0aGlzIHRhbmsKICAgICAgICB1aW50MjU2IF9hbW91bnQgPSB0YW5rUHJvZHVjdHNbdGFua3NbX3RhbmtJRF0ucHJvZHVjdElEXS5lYXJuaW5nKih0YW5rUHJvZHVjdHNbdGFua3NbX3RhbmtJRF0ucHJvZHVjdElEXS5hbW91bnRPZlRhbmtzLXRhbmtzW190YW5rSURdLmxhc3RDYXNob3V0SW5kZXgpOwogICAgICAgIHJlcXVpcmUgKHRoaXMuYmFsYW5jZSA+PSBfYW1vdW50KTsgLy8gQ2hlY2tpbmcgaWYgdGhpcyBjb250cmFjdCBoYXMgZW5vdWdodCBtb25leSB0byBwYXkKICAgICAgICByZXF1aXJlIChfYW1vdW50ID4gMCk7CiAgICAgICAgCiAgICAgICAgaWYgKHRhbmtzW190YW5rSURdLm93bmVyLnNlbmQoX2Ftb3VudCkpeyAvLyBTZW5kaW5nIGZ1bmRzIGFuZCBpZiB0aGUgdHJhbnNhY3Rpb24gaXMgc3VjY2Vzc2Z1bAogICAgICAgICAgICB0YW5rc1tfdGFua0lEXS5sYXN0Q2FzaG91dEluZGV4ID0gdGFua1Byb2R1Y3RzW3RhbmtzW190YW5rSURdLnByb2R1Y3RJRF0uYW1vdW50T2ZUYW5rczsgLy8gQ2hhbmdpbmcgdGhlIGFtb3VudCBvZiBmdW5kcyBvbiB0aGUgcGxheWVyJ3MgaW4tZ2FtZSBiYWxhbmNlCiAgICAgICAgfQogICAgICAgIAogICAgICAgIEV2ZW50Q2FzaE91dCAobXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBsb2dpbiAoc3RyaW5nIF9oYXNoKSBwdWJsaWMgewogICAgICAgIEV2ZW50TG9naW4gKG1zZy5zZW5kZXIsIF9oYXNoKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vdXBncmFkZSB0YW5rCiAgICAvLyBAX3VwZ3JhZGVDaG9pY2U6IDAgaXMgZm9yIGFybW9yLCAxIGlzIGZvciBkYW1hZ2UsIDIgaXMgZm9yIHNwZWVkLCAzIGlzIGZvciBhdHRhY2sgc3BlZWQKICAgIGZ1bmN0aW9uIHVwZ3JhZGVUYW5rICh1aW50MzIgX3RhbmtJRCwgdWludDggX3VwZ3JhZGVDaG9pY2UpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlIChfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3SWRUYW5rKTsgLy8gQ2hlY2tpbmcgaWYgdGhlIHRhbmsgZXhpc3RzCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0ub3duZXIgPT0gbXNnLnNlbmRlcik7IC8vIENoZWNraW5nIGlmIHNlbmRlciBvd25zIHRoaXMgdGFuawogICAgICAgIHJlcXVpcmUgKF91cGdyYWRlQ2hvaWNlID49IDAgJiYgX3VwZ3JhZGVDaG9pY2UgPCA0KTsgLy8gSGFzIHRvIGJlIGJldHdlZW4gMCBhbmQgMwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnVwZ3JhZGVzW191cGdyYWRlQ2hvaWNlXSA8IDUpOyAvLyBPbmx5IDUgdXBncmFkZXMgYXJlIGFsbG93ZWQgZm9yIGVhY2ggdHlwZSBvZiB0YW5rJ3MgcGFyYW1ldHJlcwogICAgICAgIHJlcXVpcmUgKG1zZy52YWx1ZSA+PSB1cGdyYWRlUHJpY2UpOyAvLyBDaGVja2luZyBpZiB0aGVyZSBpcyBlbm91Z2ggYW1vdW50IG9mIG1vbmV5IGZvciB0aGUgdXBncmFkZQogICAgICAgIHRhbmtzW190YW5rSURdLnVwZ3JhZGVzW191cGdyYWRlQ2hvaWNlXSsrOyAvLyBVcGdyYWRpbmcKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBtc2cudmFsdWUtdXBncmFkZVByaWNlOyAvLyBSZXR1cm5pbmcgdGhlIHJlc3QgYW1vdW50IG9mIG1vbmV5IGJhY2sgdG8gdGhlIHRhbmsgb3duZXIKICAgICAgICBiYWxhbmNlc1tVcGdyYWRlTWFzdGVyXSArPSB1cGdyYWRlUHJpY2U7IC8vIFNlbmRpbmcgdGhlIGFtb3VudCBvZiBtb25leSBzcGVudCBvbiB0aGUgdXBncmFkZSB0byB0aGUgY29udHJhY3QgY3JlYXRvcgogICAgICAgIAogICAgICAgIEV2ZW50VXBncmFkZVRhbmsgKG1zZy5zZW5kZXIsIF90YW5rSUQsIF91cGdyYWRlQ2hvaWNlKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIAogICAgLy8gVHJhbnNmZXIuIFVzaW5nIGZvciBzZW5kaW5nIHRhbmtzIHRvIGFub3RoZXIgcGxheWVycwogICAgZnVuY3Rpb24gX3RyYW5zZmVyICh1aW50MzIgX3RhbmtJRCwgYWRkcmVzcyBfcmVjZWl2ZXIpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoX3RhbmtJRCA+IDAgJiYgX3RhbmtJRCA8IG5ld0lkVGFuayk7IC8vIENoZWNraW5nIGlmIHRoZSB0YW5rIGV4aXN0cwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLm93bmVyID09IG1zZy5zZW5kZXIpOyAvL0NoZWNraW5nIGlmIHNlbmRlciBvd25zIHRoaXMgdGFuawogICAgICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgIT0gX3JlY2VpdmVyKTsgLy8gQ2hlY2tpbmcgdGhhdCB0aGUgb3duZXIgaXMgbm90IHNlbmRpbmcgdGhlIHRhbmsgdG8gaGltc2VsZgogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnNlbGxpbmcgPT0gZmFsc2UpOyAvL01ha2luZyBzdXJlIHRoYXQgdGhlIHRhbmsgaXMgbm90IG9uIHRoZSBhdWN0aW9uIG5vdwogICAgICAgIHRhbmtzW190YW5rSURdLm93bmVyID0gX3JlY2VpdmVyOyAvLyBDaGFuZ2luZyB0aGUgdGFuaydzIG93bmVyCiAgICAgICAgdGFua3NbX3RhbmtJRF0uZWFybmVyID0gX3JlY2VpdmVyOyAvLyBDaGFuZ2luZyB0aGUgdGFuaydzIGVhcm5lciBhZGRyZXNzCgogICAgICAgIEV2ZW50VHJhbnNmZXIgKG1zZy5zZW5kZXIsIF9yZWNlaXZlciwgX3RhbmtJRCk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBUcmFuc2ZlciBBY3Rpb24uIFVzaW5nIGZvciBzZW5kaW5nIHRhbmtzIHRvIEV0aGVyVGFua3MnIGNvbnRyYWN0cy4gRm9yIGV4YW1wbGUsIHRoZSBiYXR0bGUtYXJlYSBjb250cmFjdC4KICAgIGZ1bmN0aW9uIF90cmFuc2ZlckFjdGlvbiAodWludDMyIF90YW5rSUQsIGFkZHJlc3MgX3JlY2VpdmVyLCB1aW50OCBfQWN0aW9uVHlwZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlIChfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3SWRUYW5rKTsgLy8gQ2hlY2tpbmcgaWYgdGhlIHRhbmsgZXhpc3RzCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0ub3duZXIgPT0gbXNnLnNlbmRlcik7IC8vIENoZWNraW5nIGlmIHNlbmRlciBvd25zIHRoaXMgdGFuawogICAgICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgIT0gX3JlY2VpdmVyKTsgLy8gQ2hlY2tpbmcgdGhhdCB0aGUgb3duZXIgaXMgbm90IHNlbmRpbmcgdGhlIHRhbmsgdG8gaGltc2VsZgogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnNlbGxpbmcgPT0gZmFsc2UpOyAvLyBNYWtpbmcgc3VyZSB0aGF0IHRoZSB0YW5rIGlzIG5vdCBvbiB0aGUgYXVjdGlvbiBub3cKICAgICAgICB0YW5rc1tfdGFua0lEXS5vd25lciA9IF9yZWNlaXZlcjsgLy8gQ2hhbmdpbmcgdGhlIHRhbmsncyBvd25lcgogICAgICAgIAogICAgICAgIC8vIEFzIHlvdSBjYW4gc2VlLCB3ZSBkbyBub3QgY2hhbmdlIHRoZSBlYXJuZXIgaGVyZS4KICAgICAgICAvLyBJdCBtZWFucyB0aGF0IHRlY2huaWNhbGx5IHNwZWFraW5nLCB0aGUgdGFuaydzIG93bmVyIGlzIHN0aWxsIGdldHRpbmcgaGlzIGVhcm5pbmdzLgogICAgICAgIC8vIEl0J3MgbG9naWNhbGx5IHRoYXQgdGhpcyBtZXRob2QgKHRyYW5zZmVyQWN0aW9uKSB3aWxsIGJlIHVzZWQgZm9yIHNlbmRpbmcgdGFua3MgdG8gdGhlIGJhdHRsZSBhcmVhIGNvbnRyYWN0IG9yIHNvbWUgb3RoZXIgY29udHJhY3RzIHdoaWNoIHdpbGwgYmUgaW50ZXJhY3Rpbmcgd2l0aCB0YW5rcwogICAgICAgIC8vIEJlIGNhcmVmdWwgd2l0aCB0aGlzIG1ldGhvZCEgRG8gbm90IGNhbGwgaXQgdG8gdHJhbnNmZXIgdGFua3MgdG8gYW5vdGhlciBwbGF5ZXIhCiAgICAgICAgLy8gVGhlIHJlYXNvbiB5b3Ugc2hvdWxkIG5vdCBkbyB0aGlzIGlzIHRoYXQgdGhlIG1ldGhvZCBjYWxsZWQgInRyYW5zZmVyIiBjaGFuZ2VzIHRoZSBvd25lciBhbmQgZWFybmVyLCBzbyBpdCBpcyBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIGVhcm5lciBhZGRyZXNzIHRvIHRoZSBjdXJyZW50IG93bmVyIGFkZHJlc3MgYW55IHRpbWUuCiAgICAgICAgLy8gSG93ZXZlciwgZm9yIG91ciBzcGVjaWFsIGNvbnRyYWN0cyBsaWtlIGJhdHRsZSBhcmVhLCB5b3UgYXJlIGFibGUgdG8gcmVhZCB0aGlzIGNvbnRyYWN0IGFuZCBtYWtlIHN1cmUgdGhhdCB5b3VyIHRhbmsgd2lsbCBub3QgYmUgc2VudCB0byBhbnlvbmUgZWxzZSwgb25seSBiYWNrIHRvIHlvdS4KICAgICAgICAvLyBTbywgcGxlYXNlLCBkbyBub3QgdXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgeW91ciB0YW5rcyB0byBvdGhlciBwbGF5ZXJzLiBVc2UgaXQganVzdCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBFdGhlclRhbmtzJyBjb250cmFjdHMsIHdoaWNoIHdpbGwgYmUgbGlzdGVkIG9uIEV0aGVyVGFua3MuY29tCiAgICAgICAgCiAgICAgICAgRXZlbnRUcmFuc2ZlckFjdGlvbiAobXNnLnNlbmRlciwgX3JlY2VpdmVyLCBfdGFua0lELCBfQWN0aW9uVHlwZSk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvL3NlbGxpbmcKICAgIGZ1bmN0aW9uIHNlbGxUYW5rICh1aW50MzIgX3RhbmtJRCwgdWludDI1NiBfc3RhcnRQcmljZSwgdWludDI1NiBfZmluaXNoUHJpY2UsIHVpbnQyNTYgX2R1cmF0aW9uKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdJZFRhbmspOwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLm93bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUgKHRhbmtzW190YW5rSURdLnNlbGxpbmcgPT0gZmFsc2UpOyAvLyBNYWtpbmcgc3VyZSB0aGF0IHRoZSB0YW5rIGlzIG5vdCBvbiB0aGUgYXVjdGlvbiBhbHJlYWR5CiAgICAgICAgcmVxdWlyZSAoX3N0YXJ0UHJpY2UgPj0gX2ZpbmlzaFByaWNlKTsKICAgICAgICByZXF1aXJlIChfc3RhcnRQcmljZSA+IDAgJiYgX2ZpbmlzaFByaWNlID49IDApOwogICAgICAgIHJlcXVpcmUgKF9kdXJhdGlvbiA+IDApOwogICAgICAgIHJlcXVpcmUgKF9zdGFydFByaWNlID09IHVpbnQyNTYodWludDEyOChfc3RhcnRQcmljZSkpKTsgLy8gSnVzdCBzb21lIG1hZ2ljIHN0dWZmCiAgICAgICAgcmVxdWlyZSAoX2ZpbmlzaFByaWNlID09IHVpbnQyNTYodWludDEyOChfZmluaXNoUHJpY2UpKSk7IC8vIEp1c3Qgc29tZSBtYWdpYyBzdHVmZgogICAgICAgIAogICAgICAgIGF1Y3Rpb25zW25ld0lkQXVjdGlvbkVudGl0eV0gPSBBdWN0aW9uRW50aXR5KF90YW5rSUQsIF9zdGFydFByaWNlLCBfZmluaXNoUHJpY2UsIG5vdywgX2R1cmF0aW9uKTsKICAgICAgICB0YW5rc1tfdGFua0lEXS5zZWxsaW5nID0gdHJ1ZTsKICAgICAgICB0YW5rc1tfdGFua0lEXS5hdWN0aW9uRW50aXR5ID0gbmV3SWRBdWN0aW9uRW50aXR5Kys7CiAgICAgICAgCiAgICAgICAgRXZlbnRBdWN0aW9uIChtc2cuc2VuZGVyLCBfdGFua0lELCBfc3RhcnRQcmljZSwgX2ZpbmlzaFByaWNlLCBfZHVyYXRpb24sIG5vdyk7CiAgICB9CiAgICAKICAgIC8vYmlkZGluZyBmdW5jdGlvbiwgcGVvcGxlIHVzZSB0aGlzIHRvIGJ1eSB0YW5rcwogICAgZnVuY3Rpb24gYmlkICh1aW50MzIgX3RhbmtJRCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUgKF90YW5rSUQgPiAwICYmIF90YW5rSUQgPCBuZXdJZFRhbmspOyAvLyBDaGVja2luZyBpZiB0aGUgdGFuayBleGlzdHMKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5zZWxsaW5nID09IHRydWUpOyAvLyBDaGVja2luZyBpZiB0aGlzIHRhbmtzIGlzIG9uIHRoZSBhdWN0aW9uIG5vdwogICAgICAgIEF1Y3Rpb25FbnRpdHkgbWVtb3J5IGN1cnJlbnRBdWN0aW9uID0gYXVjdGlvbnNbdGFua3NbX3RhbmtJRF0uYXVjdGlvbkVudGl0eV07IC8vIFRoZSBhdWN0aW9uIGVudGl0eSBmb3IgdGhpcyB0YW5rLiBKdXN0IHRvIG1ha2UgdGhlIGxpbmUgYmVsb3cgZWFzaWVyIHRvIHJlYWQKICAgICAgICB1aW50MjU2IGN1cnJlbnRQcmljZSA9IGN1cnJlbnRBdWN0aW9uLnN0YXJ0UHJpY2UtKCgoY3VycmVudEF1Y3Rpb24uc3RhcnRQcmljZS1jdXJyZW50QXVjdGlvbi5maW5pc2hQcmljZSkvKGN1cnJlbnRBdWN0aW9uLmR1cmF0aW9uKSkqKG5vdy1jdXJyZW50QXVjdGlvbi5zdGFydFRpbWUpKTsKICAgICAgICAvLyBUaGUgbGluZSBhYm92ZSBjYWxjdWxhdGVzIHRoZSBjdXJyZW50IHByaWNlIHVzaW5nIHRoZSBmb3JtdWxhIFN0YXJ0UHJpY2UtKCgoU3RhcnRQcmljZS1GaW5pc2hQcmljZSkvRHVyYXRpb24pKihDdXJyZW50VGltZS1TdGFydFRpbWUpCiAgICAgICAgaWYgKGN1cnJlbnRQcmljZSA8IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlKXsgLy8gSWYgdGhlIGF1Y3Rpb24gZHVyYXRpb24gdGltZSBoYXMgYmVlbiBleHBpcmVkCiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlOyAgLy8gU2V0dGluZyB0aGUgY3VycmVudCBwcmljZSBhcyBmaW5pc2hQcmljZSAKICAgICAgICB9CiAgICAgICAgcmVxdWlyZSAoY3VycmVudFByaWNlID49IDApOyAvLyBXaG8ga25vd3MgOikKICAgICAgICByZXF1aXJlIChtc2cudmFsdWUgPj0gY3VycmVudFByaWNlKTsgLy8gQ2hlY2tpbmcgaWYgdGhlIGJ1eWVyIHNlbnQgdGhlIGFtb3VudCBvZiBtb25leSB3aGljaCBpcyBtb3JlIG9yIGVxdWFsIHRoZSBjdXJyZW50IHByaWNlCiAgICAgICAgCiAgICAgICAgLy8gQWxsIGlzIGZpbmUsIGNoYW5naW5nIGJhbGFuY2VzIGFuZCBjaGFuZ2luZyB0YW5rJ3Mgb3duZXIKICAgICAgICB1aW50MjU2IG1hcmtldEZlZSA9IChjdXJyZW50UHJpY2UvMTAwKSozOyAvLyBDYWxjdWxhdGluZyAzJSBvZiB0aGUgY3VycmVudCBwcmljZSBhcyBhIGZlZQogICAgICAgIGJhbGFuY2VzW3RhbmtzW190YW5rSURdLm93bmVyXSArPSBjdXJyZW50UHJpY2UtbWFya2V0RmVlOyAvLyBHaXZpbmcgW2N1cnJlbnQgcHJpY2VdLVtmZWVdIGFtb3VudCB0byBzZWxsZXIKICAgICAgICBiYWxhbmNlc1tBdWN0aW9uTWFzdGVyXSArPSBtYXJrZXRGZWU7IC8vIFNlbmRpbmcgdGhlIGZlZSBhbW91bnQgdG8gdGhlIGNvbnRyYWN0IGNyZWF0b3IncyBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlLWN1cnJlbnRQcmljZTsgLy9SZXR1cm4gdGhlIHJlc3QgYW1vdW50IHRvIGJ1eWVyCiAgICAgICAgdGFua3NbX3RhbmtJRF0ub3duZXIgPSBtc2cuc2VuZGVyOyAvLyBDaGFuZ2luZyB0aGUgb3duZXIgb2YgdGhlIHRhbmsKICAgICAgICB0YW5rc1tfdGFua0lEXS5zZWxsaW5nID0gZmFsc2U7IC8vIENoYW5nZSB0aGUgdGFuayBzdGF0dXMgdG8gIm5vdCBzZWxsaW5nIG5vdyIKICAgICAgICBkZWxldGUgYXVjdGlvbnNbdGFua3NbX3RhbmtJRF0uYXVjdGlvbkVudGl0eV07IC8vIERlbGV0aW5nIHRoZSBhdWN0aW9uIGVudGl0eSBmcm9tIHRoZSBzdG9yYWdlIGZvciBhdWN0aW9ucyAtLSB3ZSBkb24ndCBuZWVkIGl0IGFueW1vcmUKICAgICAgICB0YW5rc1tfdGFua0lEXS5hdWN0aW9uRW50aXR5ID0gMDsgLy8gTm90IG5lY2Vzc2FyeSwgYnV0IGRlbGV0aW5nIHRoZSBJRCBvZiBhdWN0aW9uIGVudGl0eSB3aGljaCB3YXMgZGVsZXRlZCBpbiB0aGUgb3BlcmF0aW9uIGFib3ZlCiAgICAgICAgCiAgICAgICAgRXZlbnRCaWQgKF90YW5rSUQpOwogICAgfQogICAgCiAgICAvL2NhbmNlbCBhdWN0aW9uCiAgICBmdW5jdGlvbiBjYW5jZWxBdWN0aW9uICh1aW50MzIgX3RhbmtJRCkgcHVibGljIHsKICAgICAgICByZXF1aXJlIChfdGFua0lEID4gMCAmJiBfdGFua0lEIDwgbmV3SWRUYW5rKTsgLy8gQ2hlY2tpbmcgaWYgdGhlIHRhbmsgZXhpc3RzCiAgICAgICAgcmVxdWlyZSAodGFua3NbX3RhbmtJRF0uc2VsbGluZyA9PSB0cnVlKTsgLy8gQ2hlY2tpbmcgaWYgdGhpcyB0YW5rcyBpcyBvbiB0aGUgYXVjdGlvbiBub3cKICAgICAgICByZXF1aXJlICh0YW5rc1tfdGFua0lEXS5vd25lciA9PSBtc2cuc2VuZGVyKTsgLy8gQ2hlY2tpbmcgaWYgc2VuZGVyIG93bnMgdGhpcyB0YW5rCiAgICAgICAgdGFua3NbX3RhbmtJRF0uc2VsbGluZyA9IGZhbHNlOyAvLyBDaGFuZ2UgdGhlIHRhbmsgc3RhdHVzIHRvICJub3Qgc2VsbGluZyBub3ciCiAgICAgICAgZGVsZXRlIGF1Y3Rpb25zW3RhbmtzW190YW5rSURdLmF1Y3Rpb25FbnRpdHldOyAvLyBEZWxldGluZyB0aGUgYXVjdGlvbiBlbnRpdHkgZnJvbSB0aGUgc3RvcmFnZSBmb3IgYXVjdGlvbnMgLS0gd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlCiAgICAgICAgdGFua3NbX3RhbmtJRF0uYXVjdGlvbkVudGl0eSA9IDA7IC8vIE5vdCBuZWNlc3NhcnksIGJ1dCBkZWxldGluZyB0aGUgSUQgb2YgYXVjdGlvbiBlbnRpdHkgd2hpY2ggd2FzIGRlbGV0ZWQgaW4gdGhlIG9wZXJhdGlvbiBhYm92ZQogICAgICAgIAogICAgICAgIEV2ZW50Q2FuY2VsQXVjdGlvbiAoX3RhbmtJRCk7CiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gbmV3VGFua1Byb2R1Y3QgKHN0cmluZyBfbmFtZSwgdWludDMyIF9odWxsLCB1aW50MzIgX3dlYXBvbiwgdWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX2Vhcm5pbmcsIHVpbnQyNTYgX3JlbGVhc2VUaW1lKSBwcml2YXRlIHsKICAgICAgICB0YW5rUHJvZHVjdHNbbmV3SWRUYW5rUHJvZHVjdCsrXSA9IFRhbmtQcm9kdWN0KF9uYW1lLCBfaHVsbCwgX3dlYXBvbiwgX3ByaWNlLCBfcHJpY2UsIF9lYXJuaW5nLCBfcmVsZWFzZVRpbWUsIDApOwogICAgICAgIAogICAgICAgIEV2ZW50UHJvZHVjdCAobmV3SWRUYW5rUHJvZHVjdC0xLCBfbmFtZSwgX2h1bGwsIF93ZWFwb24sIF9wcmljZSwgX2Vhcm5pbmcsIF9yZWxlYXNlVGltZSwgbm93KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gbmV3VGFua0h1bGwgKHVpbnQzMiBfYXJtb3IsIHVpbnQzMiBfc3BlZWQsIHVpbnQ4IF9sZWFndWUpIHByaXZhdGUgewogICAgICAgIHRhbmtIdWxsc1tuZXdJZFRhbmtIdWxsKytdID0gVGFua0h1bGwoX2FybW9yLCBfc3BlZWQsIF9sZWFndWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBuZXdUYW5rV2VhcG9uICh1aW50MzIgX21pbkRhbWFnZSwgdWludDMyIF9tYXhEYW1hZ2UsIHVpbnQzMiBfYXR0YWNrU3BlZWQsIHVpbnQ4IF9sZWFndWUpIHByaXZhdGUgewogICAgICAgIHRhbmtXZWFwb25zW25ld0lkVGFua1dlYXBvbisrXSA9IFRhbmtXZWFwb24oX21pbkRhbWFnZSwgX21heERhbWFnZSwgX2F0dGFja1NwZWVkLCBfbGVhZ3VlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZXhwb3J0VGFuayAoYWRkcmVzcyBfb3duZXIsIHVpbnQzMiBfdGFua3Byb2R1Y3RJRCkgcHVibGljIHsKICAgICAgICByZXF1aXJlIChjYW5FeHBvcnQgPT0gdHJ1ZSk7IC8vIENhbiBiZSBjYWxsZWQgb25seSBpZiB0aGUgcHJvY2VzcyBvZiBleHBvcnRpbmcgaXMgYWxsb3dlZAogICAgICAgIHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uY3VycmVudFByaWNlICs9IHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uZWFybmluZzsKICAgICAgICB0YW5rc1tuZXdJZFRhbmsrK10gPSBUYW5rRW50aXR5IChfdGFua3Byb2R1Y3RJRCwgWzAsIDAsIDAsIDBdLCBfb3duZXIsIF9vd25lciwgZmFsc2UsIDAsIDAsIDAsICsrdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5hbW91bnRPZlRhbmtzKTsKICAgICAgICBFdmVudEJ1eVRhbmsgKG1zZy5zZW5kZXIsIF90YW5rcHJvZHVjdElELCBuZXdJZFRhbmstMSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJ1eVRhbmsgKHVpbnQzMiBfdGFua3Byb2R1Y3RJRCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUgKHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uY3VycmVudFByaWNlID4gMCAmJiBtc2cudmFsdWUgPiAwKTsgLy92YWx1ZSBpcyBtb3JlIHRoYW4gMCwgcHJpY2UgaXMgbW9yZSB0aGFuIDAKICAgICAgICByZXF1aXJlIChtc2cudmFsdWUgPj0gdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5jdXJyZW50UHJpY2UpOyAvL3ZhbHVlIGlzIGhpZ2hlciB0aGFuIHByaWNlCiAgICAgICAgcmVxdWlyZSAodGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5yZWxlYXNlVGltZSA8PSBub3cpOyAvL2NoZWNraW5nIGlmIHRoaXMgdGFuayB3YXMgcmVsZWFzZWQuCiAgICAgICAgLy8gQmFzaWNhbGx5LCB0aGUgcmVsZWFzZVRpbWUgd2FzIGltcGxlbWVudGVkIGp1c3QgdG8gZ2l2ZSBhIGNoYW5jZSB0byBnZXQgdGhlIG5ldyB0YW5rIGZvciBhcyBtYW55IHBsYXllcnMgYXMgcG9zc2libGUuCiAgICAgICAgLy8gSXQgcHJldmVudHMgdGhlIHVzaW5nIG9mIGJvdHMuCiAgICAgICAgCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IHRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uY3VycmVudFByaWNlKXsKICAgICAgICAgICAgLy8gSWYgcGxheWVyIHBheWVkIG1vcmUsIHB1dCB0aGUgcmVzdCBhbW91bnQgb2YgbW9uZXkgb24gaGlzIGJhbGFuY2UKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlLXRhbmtQcm9kdWN0c1tfdGFua3Byb2R1Y3RJRF0uY3VycmVudFByaWNlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmN1cnJlbnRQcmljZSArPSB0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmVhcm5pbmc7CiAgICAgICAgCiAgICAgICAgLypmb3IgKHVpbnQzMiBpbmRleCA9IDE7IGluZGV4IDwgbmV3SWRUYW5rOyBpbmRleCsrKXsKICAgICAgICAgICAgaWYgKHRhbmtzW2luZGV4XS5wcm9kdWN0SUQgPT0gX3Rhbmtwcm9kdWN0SUQpewogICAgICAgICAgICAgICAgYmFsYW5jZXNbdGFua3NbaW5kZXhdLmVhcm5lcl0gKz0gdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5lYXJuaW5nOwogICAgICAgICAgICAgICAgdGFua3NbaW5kZXhdLmVhcm5lZCArPSB0YW5rUHJvZHVjdHNbX3Rhbmtwcm9kdWN0SURdLmVhcm5pbmc7CiAgICAgICAgICAgIH0KICAgICAgICB9Ki8KICAgICAgICAvLyBUaGlzIGlzIHdoeSB3ZSBkZWNpZGVkIHRvIGNyZWF0ZSB0aGUgbmV3IGNvbnRyYWN0IC0gdG8gYXZvaWQgbG9vcHMuIE91ciBzdWdnZXN0aW9uIHRvIHlvdTogTkVWRVIgRVZFUiBVU0UgTE9PUFMgSU4gU01BUlQtQ09OVFJBQ1RTCiAgICAgICAgCiAgICAgICAgaWYgKHRhbmtzQmVmb3JlVGhlTmV3VGFua1R5cGUoKSA9PSAwICYmIG5ld0lkVGFua1Byb2R1Y3QgPD0gMTIxKXsKICAgICAgICAgICAgbmV3VGFua1R5cGUoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGFua3NbbmV3SWRUYW5rKytdID0gVGFua0VudGl0eSAoX3Rhbmtwcm9kdWN0SUQsIFswLCAwLCAwLCAwXSwgbXNnLnNlbmRlciwgbXNnLnNlbmRlciwgZmFsc2UsIDAsIDAsIDAsICsrdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5hbW91bnRPZlRhbmtzKTsKCiAgICAgICAgLy8gQWZ0ZXIgYWxsIG93bmVycyBvZiB0aGUgc2FtZSB0eXBlIG9mIHRhbmsgZ290IHRoZWlyIGVhcm5pbmdzLCBhZG1pbnMgZ2V0IHRoZSBhbW91bnQgd2hpY2ggcmVtYWlucyBhbmQgbm8gb25lIG5lZWQgaXQKICAgICAgICAvLyBCYXNpY2FsbHksIGl0IGlzIHRoZSBzdGFydCBwcmljZSBvZiB0aGUgdGFuay4KICAgICAgICBiYWxhbmNlc1tUYW5rU2VsbE1hc3Rlcl0gKz0gdGFua1Byb2R1Y3RzW190YW5rcHJvZHVjdElEXS5zdGFydFByaWNlOwogICAgICAgIAogICAgICAgIEV2ZW50QnV5VGFuayAobXNnLnNlbmRlciwgX3Rhbmtwcm9kdWN0SUQsIG5ld0lkVGFuay0xKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIFRoaXMgaXMgdGhlIHRyaWNreSBtZXRob2Qgd2hpY2ggY3JlYXRlcyB0aGUgbmV3IHR5cGUgdGFuay4KICAgIGZ1bmN0aW9uIG5ld1RhbmtUeXBlICgpIHB1YmxpYyB7CiAgICAgICAgaWYgKG5ld0lkVGFua1Byb2R1Y3QgPiAxMjEpewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vY3JlYXRpbmcgbmV3IHRhbmsgdHlwZSEKICAgICAgICBpZiAoY3JlYXRlTmV3VGFua0h1bGwgPCBuZXdJZFRhbmtIdWxsIC0gMSAmJiBjcmVhdGVOZXdUYW5rV2VhcG9uID49IG5ld0lkVGFua1dlYXBvbiAtIDEpIHsKICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbiA9IDE7CiAgICAgICAgICAgIGNyZWF0ZU5ld1RhbmtIdWxsKys7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbisrOwogICAgICAgICAgICBpZiAoY3JlYXRlTmV3VGFua0h1bGwgPT0gY3JlYXRlTmV3VGFua1dlYXBvbikgewogICAgICAgICAgICAgICAgY3JlYXRlTmV3VGFua1dlYXBvbisrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG5ld1RhbmtQcm9kdWN0ICgiVGFuayIsIHVpbnQzMihjcmVhdGVOZXdUYW5rSHVsbCksIHVpbnQzMihjcmVhdGVOZXdUYW5rV2VhcG9uKSwgMjAwMDAwMDAwMDAwMDAwMDAwLCAzMDAwMDAwMDAwMDAwMDAwLCBub3crKDYwKjYwKSk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBPdXIgc3RvcmFnZSwga2V5cyBhcmUgbGlzdGVkIGZpcnN0LCB0aGVuIG1hcHBpbmdzLgogICAgLy8gT2YgY291cnNlLCBpbnN0ZWFkIG9mIHNvbWUgbWFwcGluZ3Mgd2UgY291bGQgdXNlIGFycmF5cywgYnV0IHdoeSBub3QKICAgIAogICAgdWludDMyIHB1YmxpYyBuZXdJZFRhbmsgPSAxOyAvLyBUaGUgbmV4dCBJRCBmb3IgdGhlIG5ldyB0YW5rCiAgICB1aW50MzIgcHVibGljIG5ld0lkVGFua1Byb2R1Y3QgPSAxOyAvLyBUaGUgbmV4dCBJRCBmb3IgdGhlIG5ldyB0YW5rIHR5cGUKICAgIHVpbnQzMiBwdWJsaWMgbmV3SWRUYW5rSHVsbCA9IDE7IC8vIFRoZSBuZXh0IElEIGZvciB0aGUgbmV3IGh1bGwKICAgIHVpbnQzMiBwdWJsaWMgbmV3SWRUYW5rV2VhcG9uID0gMTsgLy8gVGhlIG5ldyBJRCBmb3IgdGhlIG5ldyB3ZWFwb24KICAgIHVpbnQzMiBwdWJsaWMgY3JlYXRlTmV3VGFua0h1bGwgPSAxOyAvLyBGb3IgbmV3VGFua1R5cGUoKQogICAgdWludDMyIHB1YmxpYyBjcmVhdGVOZXdUYW5rV2VhcG9uID0gMDsgLy8gRm9yIG5ld1RhbmtUeXBlKCkKICAgIHVpbnQyNTYgcHVibGljIG5ld0lkQXVjdGlvbkVudGl0eSA9IDE7IC8vIFRoZSBuZXh0IElEIGZvciB0aGUgbmV3IGF1Y3Rpb24gZW50aXR5CgogICAgbWFwcGluZyAodWludDMyID0+IFRhbmtFbnRpdHkpIHRhbmtzOyAvLyBUaGUgc3RvcmFnZSAKICAgIG1hcHBpbmcgKHVpbnQzMiA9PiBUYW5rUHJvZHVjdCkgdGFua1Byb2R1Y3RzOwogICAgbWFwcGluZyAodWludDMyID0+IFRhbmtIdWxsKSB0YW5rSHVsbHM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQzMltdKSB0YW5rT3duZXJzOwogICAgbWFwcGluZyAodWludDMyID0+IFRhbmtXZWFwb24pIHRhbmtXZWFwb25zOwogICAgbWFwcGluZyAodWludDI1NiA9PiBBdWN0aW9uRW50aXR5KSBhdWN0aW9uczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdXBncmFkZVByaWNlID0gNTAwMDAwMDAwMDAwMDAwMDA7IC8vIFRoZSBmZWUgd2hpY2ggdGhlIFVncmFkZU1hc3RlciBlYXJucyBmb3IgdXBncmFkaW5nIHRhbmtzCgogICAgZnVuY3Rpb24gZ2V0VGFua05hbWUgKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChzdHJpbmcpewogICAgICAgIHJldHVybiB0YW5rUHJvZHVjdHNbX0lEXS5uYW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUYW5rUHJvZHVjdCAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQzMls2XSl7CiAgICAgICAgcmV0dXJuIFt0YW5rSHVsbHNbdGFua1Byb2R1Y3RzW19JRF0uaHVsbF0uYXJtb3IsIHRhbmtIdWxsc1t0YW5rUHJvZHVjdHNbX0lEXS5odWxsXS5zcGVlZCwgdGFua1dlYXBvbnNbdGFua1Byb2R1Y3RzW19JRF0ud2VhcG9uXS5taW5EYW1hZ2UsIHRhbmtXZWFwb25zW3RhbmtQcm9kdWN0c1tfSURdLndlYXBvbl0ubWF4RGFtYWdlLCB0YW5rV2VhcG9uc1t0YW5rUHJvZHVjdHNbX0lEXS53ZWFwb25dLmF0dGFja1NwZWVkLCB1aW50MzIodGFua1Byb2R1Y3RzW19JRF0ucmVsZWFzZVRpbWUpXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VGFua0RldGFpbHMgKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MzJbNl0pewogICAgICAgIHJldHVybiBbdGFua3NbX0lEXS5wcm9kdWN0SUQsIHVpbnQzMih0YW5rc1tfSURdLnVwZ3JhZGVzWzBdKSwgdWludDMyKHRhbmtzW19JRF0udXBncmFkZXNbMV0pLCB1aW50MzIodGFua3NbX0lEXS51cGdyYWRlc1syXSksIHVpbnQzMih0YW5rc1tfSURdLnVwZ3JhZGVzWzNdKSwgdWludDMyKHRhbmtzW19JRF0uZXhwKV07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRhbmtPd25lcih1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyl7CiAgICAgICAgcmV0dXJuIHRhbmtzW19JRF0ub3duZXI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRhbmtTZWxsKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKXsKICAgICAgICByZXR1cm4gdGFua3NbX0lEXS5zZWxsaW5nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUYW5rVG90YWxFYXJuZWQodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiB0YW5rc1tfSURdLmVhcm5lZDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VGFua0F1Y3Rpb25FbnRpdHkgKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gdGFua3NbX0lEXS5hdWN0aW9uRW50aXR5OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHJpY2UgKHVpbnQzMiBfSUQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gdGFua1Byb2R1Y3RzW19JRF0uY3VycmVudFByaWNlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRQcm9kdWN0RWFybmluZyAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiB0YW5rUHJvZHVjdHNbX0lEXS5lYXJuaW5nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRUYW5rRWFybmluZyAodWludDMyIF9JRCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIHJldHVybiB0YW5rUHJvZHVjdHNbdGFua3NbX0lEXS5wcm9kdWN0SURdLmVhcm5pbmcqKHRhbmtQcm9kdWN0c1t0YW5rc1tfSURdLnByb2R1Y3RJRF0uYW1vdW50T2ZUYW5rcy10YW5rc1tfSURdLmxhc3RDYXNob3V0SW5kZXgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50UHJpY2VBdWN0aW9uICh1aW50MzIgX0lEKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgICAgcmVxdWlyZSAoZ2V0VGFua1NlbGwoX0lEKSk7CiAgICAgICAgQXVjdGlvbkVudGl0eSBtZW1vcnkgY3VycmVudEF1Y3Rpb24gPSBhdWN0aW9uc1t0YW5rc1tfSURdLmF1Y3Rpb25FbnRpdHldOyAvLyBUaGUgYXVjdGlvbiBlbnRpdHkgZm9yIHRoaXMgdGFuay4gSnVzdCB0byBtYWtlIHRoZSBsaW5lIGJlbG93IGVhc2llciB0byByZWFkCiAgICAgICAgdWludDI1NiBjdXJyZW50UHJpY2UgPSBjdXJyZW50QXVjdGlvbi5zdGFydFByaWNlLSgoKGN1cnJlbnRBdWN0aW9uLnN0YXJ0UHJpY2UtY3VycmVudEF1Y3Rpb24uZmluaXNoUHJpY2UpLyhjdXJyZW50QXVjdGlvbi5kdXJhdGlvbikpKihub3ctY3VycmVudEF1Y3Rpb24uc3RhcnRUaW1lKSk7CiAgICAgICAgaWYgKGN1cnJlbnRQcmljZSA8IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlKXsgLy8gSWYgdGhlIGF1Y3Rpb24gZHVyYXRpb24gdGltZSBoYXMgYmVlbiBleHBpcmVkCiAgICAgICAgICAgIGN1cnJlbnRQcmljZSA9IGN1cnJlbnRBdWN0aW9uLmZpbmlzaFByaWNlOyAgLy8gU2V0dGluZyB0aGUgY3VycmVudCBwcmljZSBhcyBmaW5pc2hQcmljZSAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcmljZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0UGxheWVyQmFsYW5jZShhZGRyZXNzIF9wbGF5ZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX3BsYXllcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldENvbnRyYWN0QmFsYW5jZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBob3dNYW55VGFua3MoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDMyKXsKICAgICAgICByZXR1cm4gbmV3SWRUYW5rUHJvZHVjdDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdGFua3NCZWZvcmVUaGVOZXdUYW5rVHlwZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICByZXR1cm4gMTAwMCsoKChuZXdJZFRhbmtQcm9kdWN0KSsxMCkqKChuZXdJZFRhbmtQcm9kdWN0KSsxMCkqKG5ld0lkVGFua1Byb2R1Y3QtMTEpKS1uZXdJZFRhbms7CiAgICB9Cn0KCi8qCiAgICBUaGUgcHJldmlvdXMgY29udHJhY3QgYWRkcmVzczogMHhjYTUwODg0NDliOTZjMjI1ODAxY2VkOGU5ZWZkY2FlMWUwYzkyYTNkCiAgICAKICAgIEV0aGVyVGFua3MuY29tCiAgICBFdGhlcmVUYW5rcy5jb20KKi8='.
	

]
