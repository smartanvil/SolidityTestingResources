Class {
	#name : #SRT3200a57215941de7e460cf32810780ee5bf8a134,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3200a57215941de7e460cf32810780ee5bf8a134 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgogLy8vIEB0aXRsZSBPd25hYmxlIGNvbnRyYWN0IC0gYmFzZSBjb250cmFjdCB3aXRoIGFuIG93bmVyCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cn0KCiAvLy8gQHRpdGxlIFNhZmVNYXRoIGNvbnRyYWN0IC0gbWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlRGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA+IDApOwogICAgdWludCBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KfQoKLy8vIEB0aXRsZSBIYWx0YWJsZSBjb250cmFjdCAtIGFic3RyYWN0IGNvbnRyYWN0IHRoYXQgYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCi8vLyBPcmlnaW5hbGx5IGVudmlzaW9uZWQgaW4gRmlyc3RCbG9vZCBJQ08gY29udHJhY3QuCmNvbnRyYWN0IEhhbHRhYmxlIGlzIE93bmFibGUgewogIGJvb2wgcHVibGljIGhhbHRlZDsKCiAgbW9kaWZpZXIgc3RvcEluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUoIWhhbHRlZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUoaGFsdGVkKTsKICAgIF87CiAgfQoKICAvLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBoYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGhhbHRlZCA9IHRydWU7CiAgfQoKICAvLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbmQgb2YgZW1lcmdlbmN5LCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogIGZ1bmN0aW9uIHVuaGFsdCgpIGV4dGVybmFsIG9ubHlPd25lciBvbmx5SW5FbWVyZ2VuY3kgewogICAgaGFsdGVkID0gZmFsc2U7CiAgfQp9CgogLy8vIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2Ugc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiAgdWludCBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQgYW1vdW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sIG9rKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB2YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgoKLy8vIEB0aXRsZSBQYXlGYWlyVG9rZW4gY29udHJhY3QgLSBzdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIFNob3J0IEhhbmQgQXR0YWNrIGFuZCBhcHByb3ZlKCkgcmFjZSBjb25kaXRpb24gbWl0aWdhdGlvbi4KY29udHJhY3QgUGF5RmFpclRva2VuIGlzIFNhZmVNYXRoLCBFUkMyMCwgT3duYWJsZSB7CiBzdHJpbmcgcHVibGljIG5hbWUgPSAiUGF5RmFpciBUb2tlbiI7CiBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJQRlIiOwogdWludCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA4OwogdWludCBwdWJsaWMgY29uc3RhbnQgRlJPWkVOX1RPS0VOUyA9IDExZTY7CiB1aW50IHB1YmxpYyBjb25zdGFudCBGUkVFWkVfUEVSSU9EID0gMSB5ZWFyczsKIHVpbnQgcHVibGljIGNvbnN0YW50IE1VTFRJUExJRVIgPSAxMCAqKiBkZWNpbWFsczsKIHVpbnQgcHVibGljIGNyb3dkU2FsZU92ZXJUaW1lc3RhbXA7CgogLy8vIGNvbnRyYWN0IHRoYXQgaXMgYWxsb3dlZCB0byBjcmVhdGUgbmV3IHRva2VucyBhbmQgYWxsb3dzIHVubGlmdCB0aGUgdHJhbnNmZXIgbGltaXRzIG9uIHRoaXMgdG9rZW4KIGFkZHJlc3MgcHVibGljIGNyb3dkc2FsZUFnZW50OwogLy8vIEEgY3Jvd2RzYWxlIGNvbnRyYWN0IGNhbiByZWxlYXNlIHVzIHRvIHRoZSB3aWxkIGlmIElDTyBzdWNjZXNzLiBJZiBmYWxzZSB3ZSBhcmUgYXJlIGluIHRyYW5zZmVyIGxvY2sgdXAgcGVyaW9kLgogYm9vbCBwdWJsaWMgcmVsZWFzZWQgPSBmYWxzZTsKIC8vLyBhcHByb3ZlKCkgYWxsb3dhbmNlcwogbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogLy8vIGhvbGRlciBiYWxhbmNlcwogbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKIC8vLyBAZGV2IExpbWl0IHRva2VuIHRyYW5zZmVyIHVudGlsIHRoZSBjcm93ZHNhbGUgaXMgb3Zlci4KIG1vZGlmaWVyIGNhblRyYW5zZmVyKCkgewogICBpZighcmVsZWFzZWQpIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNyb3dkc2FsZUFnZW50KTsKICAgfQogICBfOwogfQoKIG1vZGlmaWVyIGNoZWNrRnJvemVuQW1vdW50KGFkZHJlc3Mgc291cmNlLCB1aW50IGFtb3VudCkgewogICBpZiAoc291cmNlID09IG93bmVyICYmIG5vdyA8IGNyb3dkU2FsZU92ZXJUaW1lc3RhbXAgKyBGUkVFWkVfUEVSSU9EKSB7CiAgICAgdmFyIGZyb3plblRva2VucyA9IDEwICoqIGRlY2ltYWxzICogRlJPWkVOX1RPS0VOUzsKICAgICByZXF1aXJlKHNhZmVTdWIoYmFsYW5jZXNbb3duZXJdLCBhbW91bnQpID4gZnJvemVuVG9rZW5zKTsKICAgfQogICBfOwogfQoKIC8vLyBAZGV2IFRoZSBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIG9ubHkgYmVmb3JlIG9yIGFmdGVyIHRoZSB0b2tlbnMgaGF2ZSBiZWVuIHJlbGVhc2VzZAogLy8vIEBwYXJhbSBfcmVsZWFzZWQgdG9rZW4gdHJhbnNmZXIgYW5kIG1pbnQgc3RhdGUKIG1vZGlmaWVyIGluUmVsZWFzZVN0YXRlKGJvb2wgX3JlbGVhc2VkKSB7CiAgIHJlcXVpcmUoX3JlbGVhc2VkID09IHJlbGVhc2VkKTsKICAgXzsKIH0KCiAvLy8gQGRldiBUaGUgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBvbmx5IGJ5IHJlbGVhc2UgYWdlbnQuCiBtb2RpZmllciBvbmx5Q3Jvd2RzYWxlQWdlbnQoKSB7CiAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjcm93ZHNhbGVBZ2VudCk7CiAgIF87CiB9CgogLy8vIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgaHR0cDovL3Zlc3NlbmVzLmNvbS90aGUtZXJjMjAtc2hvcnQtYWRkcmVzcy1hdHRhY2stZXhwbGFpbmVkLwogLy8vIEBwYXJhbSBzaXplIHBheWxvYWQgc2l6ZQogbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPj0gc2l6ZSArIDQpOwogICAgXzsKIH0KCiAvLy8gQGRldiBNYWtlIHN1cmUgd2UgYXJlIG5vdCBkb25lIHlldC4KIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFyZWxlYXNlZCk7CiAgICBfOwogIH0KCiAvLy8gQGRldiBDb25zdHJ1Y3RvcgogZnVuY3Rpb24gUGF5RmFpclRva2VuKCkgewogICBvd25lciA9IG1zZy5zZW5kZXI7CiB9CgogLy8vIEZhbGxiYWNrIG1ldGhvZCB3aWxsIGJ1eW91dCB0b2tlbnMKIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgIHJldmVydCgpOwogfQogLy8vIEBkZXYgQ3JlYXRlIG5ldyB0b2tlbnMgYW5kIGFsbG9jYXRlIHRoZW0gdG8gYW4gYWRkcmVzcy4gT25seSBjYWxsYWJseSBieSBhIGNyb3dkc2FsZSBjb250cmFjdAogLy8vIEBwYXJhbSByZWNlaXZlciBBZGRyZXNzIG9mIHJlY2VpdmVyCiAvLy8gQHBhcmFtIGFtb3VudCAgTnVtYmVyIG9mIHRva2VucyB0byBpc3N1ZS4KIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpIG9ubHlDcm93ZHNhbGVBZ2VudCBjYW5NaW50IHB1YmxpYyB7CiAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIGFtb3VudCk7CiAgICBiYWxhbmNlc1tyZWNlaXZlcl0gPSBzYWZlQWRkKGJhbGFuY2VzW3JlY2VpdmVyXSwgYW1vdW50KTsKICAgIFRyYW5zZmVyKDAsIHJlY2VpdmVyLCBhbW91bnQpOwogfQoKIC8vLyBAZGV2IFNldCB0aGUgY29udHJhY3QgdGhhdCBjYW4gY2FsbCByZWxlYXNlIGFuZCBtYWtlIHRoZSB0b2tlbiB0cmFuc2ZlcmFibGUuCiAvLy8gQHBhcmFtIF9jcm93ZHNhbGVBZ2VudCBjcm93ZHNhbGUgY29udHJhY3QgYWRkcmVzcwogZnVuY3Rpb24gc2V0Q3Jvd2RzYWxlQWdlbnQoYWRkcmVzcyBfY3Jvd2RzYWxlQWdlbnQpIG9ubHlPd25lciBpblJlbGVhc2VTdGF0ZShmYWxzZSkgcHVibGljIHsKICAgY3Jvd2RzYWxlQWdlbnQgPSBfY3Jvd2RzYWxlQWdlbnQ7CiB9CiAvLy8gQGRldiBPbmUgd2F5IGZ1bmN0aW9uIHRvIHJlbGVhc2UgdGhlIHRva2VucyB0byB0aGUgd2lsZC4gQ2FuIGJlIGNhbGxlZCBvbmx5IGZyb20gdGhlIHJlbGVhc2UgYWdlbnQgdGhhdCBpcyB0aGUgZmluYWwgSUNPIGNvbnRyYWN0LiBJdCBpcyBvbmx5IGNhbGxlZCBpZiB0aGUgY3Jvd2RzYWxlIGhhcyBiZWVuIHN1Y2Nlc3MgKGZpcnN0IG1pbGVzdG9uZSByZWFjaGVkKS4KIGZ1bmN0aW9uIHJlbGVhc2VUb2tlblRyYW5zZmVyKCkgcHVibGljIG9ubHlDcm93ZHNhbGVBZ2VudCB7CiAgIGNyb3dkU2FsZU92ZXJUaW1lc3RhbXAgPSBub3c7CiAgIHJlbGVhc2VkID0gdHJ1ZTsKIH0KCiAvLy8gQGRldiBDb252ZXJ0cyB0b2tlbiB2YWx1ZSB0byB2YWx1ZSB3aXRoIGRlY2ltYWwgcGxhY2VzCiAvLy8gQHBhcmFtIGFtb3VudCBTb3VyY2UgdG9rZW4gdmFsdWUKIGZ1bmN0aW9uIGNvbnZlcnRUb0RlY2ltYWwodWludCBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgIHJldHVybiBzYWZlTXVsKGFtb3VudCwgTVVMVElQTElFUik7CiB9CgogLy8vIEBkZXYgVHJhbmZlciB0b2tlbnMgdG8gYWRkcmVzcwogLy8vIEBwYXJhbSBfdG8gZGVzdCBhZGRyZXNzCiAvLy8gQHBhcmFtIF92YWx1ZSB0b2tlbnMgYW1vdW50CiAvLy8gQHJldHVybiB0cmFuc2ZlciByZXN1bHQKIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgY2FuVHJhbnNmZXIgY2hlY2tGcm96ZW5BbW91bnQobXNnLnNlbmRlciwgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwoKICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICByZXR1cm4gdHJ1ZTsKIH0KCiAvLy8gQGRldiBUcmFuZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIG90aGVyCiAvLy8gQHBhcmFtIF9mcm9tIHNvdXJjZSBhZGRyZXNzCiAvLy8gQHBhcmFtIF90byBkZXN0IGFkZHJlc3MKIC8vLyBAcGFyYW0gX3ZhbHVlIHRva2VucyBhbW91bnQKIC8vLyBAcmV0dXJuIHRyYW5zZmVyIHJlc3VsdAogZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgY2FuVHJhbnNmZXIgY2hlY2tGcm96ZW5BbW91bnQoX2Zyb20sIF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gc2FmZVN1YihfYWxsb3dhbmNlLCBfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogfQogLy8vIEBkZXYgVG9rZW5zIGJhbGFuY2UKIC8vLyBAcGFyYW0gX293bmVyIGhvbGRlciBhZGRyZXNzCiAvLy8gQHJldHVybiBiYWxhbmNlIGFtb3VudAogZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiB9CgogLy8vIEBkZXYgQXBwcm92ZSB0cmFuc2ZlcgogLy8vIEBwYXJhbSBfc3BlbmRlciBob2xkZXIgYWRkcmVzcwogLy8vIEBwYXJhbSBfdmFsdWUgdG9rZW5zIGFtb3VudAogLy8vIEByZXR1cm4gcmVzdWx0CiBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICByZXF1aXJlICgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgIHJldHVybiB0cnVlOwogfQoKIC8vLyBAZGV2IFRva2VuIGFsbG93YW5jZQogLy8vIEBwYXJhbSBfb3duZXIgaG9sZGVyIGFkZHJlc3MKIC8vLyBAcGFyYW0gX3NwZW5kZXIgc3BlbmRlciBhZGRyZXNzCiAvLy8gQHJldHVybiByZW1haW4gYW1vdW50CiBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogfQp9CgogLy8vIEB0aXRsZSBLaWxsYWJsZSBjb250cmFjdCAtIGJhc2UgY29udHJhY3QgdGhhdCBjYW4gYmUga2lsbGVkIGJ5IG93bmVyLiBBbGwgZnVuZHMgaW4gY29udHJhY3Qgd2lsbCBiZSBzZW50IHRvIHRoZSBvd25lci4KY29udHJhY3QgS2lsbGFibGUgaXMgT3duYWJsZSB7CiAgZnVuY3Rpb24ga2lsbCgpIG9ubHlPd25lciB7CiAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogIH0KfQoKLy8vIEB0aXRsZSBQYXlGYWlyVG9rZW5Dcm93ZHNhbGUgY29udHJhY3QgLSBjb250cmFjdCBmb3IgdG9rZW4gc2FsZXMuCmNvbnRyYWN0IFBheUZhaXJUb2tlbkNyb3dkc2FsZSBpcyBIYWx0YWJsZSwgS2lsbGFibGUsIFNhZmVNYXRoIHsKCiAgLy8vIFRvdGFsIGNvdW50IG9mIHRva2VucyBkaXN0cmlidXRlZCB2aWEgSUNPCiAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9UQUxfSUNPX1RPS0VOUyA9IDU2ZTY7CgogIC8vLyBUb3RhbCBjb3VudCBvZiB0b2tlbnMgZGlzdHJpYnV0ZWQgbWFudWFsbHkgb24gdGhlIHByZS1JQ08gc3RhZ2UKICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVfSUNPX01BWF9UT0tFTlMgPSAzM2U2OwoKICAvLy8gTWltaW5hbCB0b2tlbnMgZnVuZGluZyBnb2FsIGluIFdlaSwgaWYgdGhpcyBnb2FsIGlzbid0IHJlYWNoZWQgZHVyaW5nIElDTywgcmVmdW5kIHdpbGwgYmVnaW4KICB1aW50IHB1YmxpYyBjb25zdGFudCBNSU5fSUNPX0dPQUwgPSAxIGV0aGVyOwoKICAvLy8gVGhlIGR1cmF0aW9uIG9mIElDTwogIHVpbnQgcHVibGljIGNvbnN0YW50IElDT19EVVJBVElPTiA9IDMwIGRheXM7CgogIC8vLyBUaGUgdG9rZW4gd2UgYXJlIHNlbGxpbmcKICBQYXlGYWlyVG9rZW4gcHVibGljIHRva2VuOwoKICAvLy8gdG9rZW5zIHdpbGwgYmUgdHJhbnNmZXJlZCBmcm9tIHRoaXMgYWRkcmVzcwogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnV2FsbGV0OwoKICAvLy8gdGhlIFVOSVggdGltZXN0YW1wIHN0YXJ0IGRhdGUgb2YgdGhlIGNyb3dkc2FsZQogIHVpbnQgcHVibGljIHN0YXJ0c0F0OwoKICAvLy8gSG93IG1hbnkgd2VpIG9mIGZ1bmRpbmcgd2UgaGF2ZSByYWlzZWQKICB1aW50IHB1YmxpYyB3ZWlSYWlzZWQgPSAwOwoKICAvLy8gSG93IG11Y2ggd2VpIHdlIGhhdmUgcmV0dXJuZWQgYmFjayB0byB0aGUgY29udHJhY3QgYWZ0ZXIgYSBmYWlsZWQgY3Jvd2RmdW5kLgogIHVpbnQgcHVibGljIGxvYWRlZFJlZnVuZCA9IDA7CgogIC8vLyBIb3cgbXVjaCB3ZWkgd2UgaGF2ZSBnaXZlbiBiYWNrIHRvIGludmVzdG9ycy4KICB1aW50IHB1YmxpYyB3ZWlSZWZ1bmRlZCA9IDA7CgogIC8vLyBUb3RhbCBjb3VudCBvZiB0b2tlbnMgZGlzdHJpYnV0ZWQgdmlhIHByZS1JQ08KICB1aW50IHB1YmxpYyBwcmVJY29Ub2tlbnNEaXN0cmlidXRlZCA9IDA7CgogIC8vLyBIYXMgdGhpcyBjcm93ZHNhbGUgYmVlbiBmaW5hbGl6ZWQKICBib29sIHB1YmxpYyBmaW5hbGl6ZWQ7CgogIC8vLyBIb3cgbXVjaCBFVEggZWFjaCBhZGRyZXNzIGhhcyBpbnZlc3RlZCB0byB0aGlzIGNyb3dkc2FsZQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGludmVzdGVkQW1vdW50T2Y7CgogIC8vLyBIb3cgbXVjaCB0b2tlbnMgdGhpcyBjcm93ZHNhbGUgaGFzIGNyZWRpdGVkIGZvciBlYWNoIGludmVzdG9yIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b2tlbkFtb3VudE9mOwoKICAvLy8gRGVmaW5lIHByZUlDTyBwcmljaW5nIHNjaGVkdWxlIHVzaW5nIG1pbGVzdG9uZXMuCiAgc3RydWN0IE1pbGVzdG9uZSB7CiAgICAgIC8vIFVOSVggdGltZXN0YW1wIHdoZW4gdGhpcyBtaWxlc3RvbmUga2lja3MgaW4KICAgICAgdWludCBzdGFydDsKICAgICAgLy8gVU5JWCB0aW1lc3RhbXAgd2hlbiB0aGlzIG1pbGVzdG9uZSBraWNrcyBvdXQKICAgICAgdWludCBlbmQ7CiAgICAgIC8vIEhvdyBtYW55ICUgdG9rZW5zIHdpbGwgYWRkCiAgICAgIHVpbnQgYm9udXM7CiAgfQoKICAvLy8gRGVmaW5lIGEgc3RydWN0dXJlIGZvciBvbmUgaW52ZXN0bWVudCBldmVudCBvY2N1cnJlbmNlCiAgc3RydWN0IEludmVzdG1lbnQgewogICAgICAvLy8gV2hvIGludmVzdGVkCiAgICAgIGFkZHJlc3Mgc291cmNlOwoKICAgICAgLy8vIFdlaWdodCBjb2VmZmljaWVudCBvZiBpbnZlc3RtZW50IChlYXJseSBpbnZlc3RtZW50IGJvbnVzKSBpbiAlCiAgICAgIHVpbnQgd2VpZ2h0OwoKICAgICAgLy8vIEFtb3VudCBpbnZlc3RlZAogICAgICB1aW50IHdlaVZhbHVlOwogIH0KCiAgTWlsZXN0b25lW10gcHVibGljIG1pbGVzdG9uZXM7CiAgSW52ZXN0bWVudFtdIHB1YmxpYyBpbnZlc3RtZW50czsKCiAgLy8vIFN0YXRlIG1hY2hpbmUKICAvLy8gUHJlcGFyaW5nOiBBbGwgY29udHJhY3QgaW5pdGlhbGl6YXRpb24gY2FsbHMgYW5kIHZhcmlhYmxlcyBoYXZlIG5vdCBiZWVuIHNldCB5ZXQKICAvLy8gUHJlZnVuZGluZzogV2UgaGF2ZSBub3QgcGFzc2VkIHN0YXJ0IHRpbWUgeWV0CiAgLy8vIEZ1bmRpbmc6IEFjdGl2ZSBjcm93ZHNhbGUKICAvLy8gU3VjY2VzczogTWluaW11bSBmdW5kaW5nIGdvYWwgcmVhY2hlZAogIC8vLyBGYWlsdXJlOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCBub3QgcmVhY2hlZCBiZWZvcmUgZW5kaW5nIHRpbWUKICAvLy8gRmluYWxpemVkOiBUaGUgZmluYWxpemVkIGhhcyBiZWVuIGNhbGxlZCBhbmQgc3VjY2VzZnVsbHkgZXhlY3V0ZWRcCiAgLy8vIFJlZnVuZGluZzogUmVmdW5kcyBhcmUgbG9hZGVkIG9uIHRoZSBjb250cmFjdCBmb3IgcmVjbGFpbS4KICBlbnVtIFN0YXRlIHtVbmtub3duLCBQcmVwYXJpbmcsIFByZUZ1bmRpbmcsIEZ1bmRpbmcsIFN1Y2Nlc3MsIEZhaWx1cmUsIEZpbmFsaXplZCwgUmVmdW5kaW5nfQoKICAvLy8gQSBuZXcgaW52ZXN0bWVudCB3YXMgbWFkZQogIGV2ZW50IEludmVzdGVkKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKICAvLy8gUmVmdW5kIHdhcyBwcm9jZXNzZWQgZm9yIGEgY29udHJpYnV0b3IKICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB3ZWlBbW91bnQpOwoKICAvLy8gQGRldiBNb2RpZmllZCBhbGxvd2luZyBleGVjdXRpb24gb25seSBpZiB0aGUgY3Jvd2RzYWxlIGlzIGN1cnJlbnRseSBydW5uaW5nCiAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBzdGF0ZSkgewogICAgcmVxdWlyZShnZXRTdGF0ZSgpID09IHN0YXRlKTsKICAgIF87CiAgfQoKICAvLy8gQGRldiBDb25zdHJ1Y3RvcgogIC8vLyBAcGFyYW0gX3Rva2VuIFBheSBGYWlyIHRva2VuIGFkZHJlc3MKICAvLy8gQHBhcmFtIF9tdWx0aXNpZ1dhbGxldCB0ZWFtIHdhbGxldAogIC8vLyBAcGFyYW0gX3N0YXJ0IHRva2VuIElDTyBzdGFydCBkYXRlCiAgZnVuY3Rpb24gUGF5RmFpclRva2VuQ3Jvd2RzYWxlKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9tdWx0aXNpZ1dhbGxldCwgdWludCBfc3RhcnQpIHsKICAgIHJlcXVpcmUoX211bHRpc2lnV2FsbGV0ICE9IDApOwogICAgcmVxdWlyZShfc3RhcnQgIT0gMCk7CgogICAgdG9rZW4gPSBQYXlGYWlyVG9rZW4oX3Rva2VuKTsKCiAgICBtdWx0aXNpZ1dhbGxldCA9IF9tdWx0aXNpZ1dhbGxldDsKICAgIHN0YXJ0c0F0ID0gX3N0YXJ0OwoKICAgIG1pbGVzdG9uZXMucHVzaChNaWxlc3RvbmUoc3RhcnRzQXQsIHN0YXJ0c0F0ICsgMSBkYXlzLCAyMCkpOwogICAgbWlsZXN0b25lcy5wdXNoKE1pbGVzdG9uZShzdGFydHNBdCArIDEgZGF5cywgc3RhcnRzQXQgKyA1IGRheXMsIDE1KSk7CiAgICBtaWxlc3RvbmVzLnB1c2goTWlsZXN0b25lKHN0YXJ0c0F0ICsgNSBkYXlzLCBzdGFydHNBdCArIDEwIGRheXMsIDEwKSk7CiAgICBtaWxlc3RvbmVzLnB1c2goTWlsZXN0b25lKHN0YXJ0c0F0ICsgMTAgZGF5cywgc3RhcnRzQXQgKyAyMCBkYXlzLCA1KSk7CiAgfQoKICAvLy8gIERvbid0IGV4cGVjdCB0byBqdXN0IHNlbmQgaW4gbW9uZXkgYW5kIGdldCB0b2tlbnMuCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgIGJ1eSgpOwogIH0KCiAgLy8vIEBkZXYgR2V0IHRoZSBjdXJyZW50IG1pbGVzdG9uZSBvciBiYWlsIG91dCBpZiB3ZSBhcmUgbm90IGluIHRoZSBtaWxlc3RvbmUgcGVyaW9kcy4KICAvLy8gQHJldHVybiBNaWxlc3RvbmUgY3VycmVudCBib251cyBtaWxlc3RvbmUKICBmdW5jdGlvbiBnZXRDdXJyZW50TWlsZXN0b25lKCkgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zIChNaWxlc3RvbmUpIHsKICAgIGZvciAodWludCBpID0gMDsgaSA8IG1pbGVzdG9uZXMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKG1pbGVzdG9uZXNbaV0uc3RhcnQgPD0gbm93ICYmIG1pbGVzdG9uZXNbaV0uZW5kID4gbm93KSB7CiAgICAgICAgcmV0dXJuIG1pbGVzdG9uZXNbaV07CiAgICAgIH0KICAgfQogfQoKICAgLy8vIEBkZXYgTWFrZSBhbiBpbnZlc3RtZW50LiBDcm93ZHNhbGUgbXVzdCBiZSBydW5uaW5nIGZvciBvbmUgdG8gaW52ZXN0LgogICAvLy8gQHBhcmFtIHJlY2VpdmVyIFRoZSBFdGhlcmV1bSBhZGRyZXNzIHdobyByZWNlaXZlcyB0aGUgdG9rZW5zCiAgZnVuY3Rpb24gaW52ZXN0SW50ZXJuYWwoYWRkcmVzcyByZWNlaXZlcikgc3RvcEluRW1lcmdlbmN5IHByaXZhdGUgewogICAgdmFyIHN0YXRlID0gZ2V0U3RhdGUoKTsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuRnVuZGluZyk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgIC8vIEFkZCBpbnZlc3RtZW50IHJlY29yZAogICAgdmFyIHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgIGludmVzdG1lbnRzLnB1c2goSW52ZXN0bWVudChyZWNlaXZlciwgd2VpQW1vdW50LCBnZXRDdXJyZW50TWlsZXN0b25lKCkuYm9udXMgKyAxMDApKTsKICAgIGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdID0gc2FmZUFkZChpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSwgd2VpQW1vdW50KTsKCiAgICAvLyBVcGRhdGUgdG90YWxzCiAgICB3ZWlSYWlzZWQgPSBzYWZlQWRkKHdlaVJhaXNlZCwgd2VpQW1vdW50KTsKICAgIC8vIFRyYW5zZmVyIGZ1bmRzIHRvIHRoZSB0ZWFtIHdhbGxldAogICAgbXVsdGlzaWdXYWxsZXQudHJhbnNmZXIod2VpQW1vdW50KTsKICAgIC8vIFRlbGwgdXMgaW52ZXN0IHdhcyBzdWNjZXNzCiAgICBJbnZlc3RlZChyZWNlaXZlciwgd2VpQW1vdW50KTsKICB9CgogIC8vLyBAZGV2IEFsbG93IGFub255bW91cyBjb250cmlidXRpb25zIHRvIHRoaXMgY3Jvd2RzYWxlLgogIC8vLyBAcGFyYW0gcmVjZWl2ZXIgVGhlIEV0aGVyZXVtIGFkZHJlc3Mgd2hvIHJlY2VpdmVzIHRoZSB0b2tlbnMKICBmdW5jdGlvbiBpbnZlc3QoYWRkcmVzcyByZWNlaXZlcikgcHVibGljIHBheWFibGUgewogICAgaW52ZXN0SW50ZXJuYWwocmVjZWl2ZXIpOwogIH0KCiAgZnVuY3Rpb24gc2VuZFByZUljb1Rva2VucyhhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCkgcHVibGljIGluU3RhdGUoU3RhdGUuUHJlRnVuZGluZykgb25seU93bmVyIHsKICAgIHJlcXVpcmUocmVjZWl2ZXIgIT0gMCk7CiAgICByZXF1aXJlKGFtb3VudCA+IDApOwogICAgcmVxdWlyZShzYWZlQWRkKHByZUljb1Rva2Vuc0Rpc3RyaWJ1dGVkLCBhbW91bnQpIDw9IHRva2VuLmNvbnZlcnRUb0RlY2ltYWwoUFJFX0lDT19NQVhfVE9LRU5TKSk7CgogICAgcHJlSWNvVG9rZW5zRGlzdHJpYnV0ZWQgPSBzYWZlQWRkKHByZUljb1Rva2Vuc0Rpc3RyaWJ1dGVkLCBhbW91bnQpOwogICAgYXNzaWduVG9rZW5zKHJlY2VpdmVyLCBhbW91bnQpOwogIH0KCiAgLy8vIEBkZXYgVGhlIGJhc2ljIGVudHJ5IHBvaW50IHRvIHBhcnRpY2lwYXRlIHRoZSBjcm93ZHNhbGUgcHJvY2Vzcy4KICBmdW5jdGlvbiBidXkoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBpbnZlc3QobXNnLnNlbmRlcik7CiAgfQoKICAvLy8gQGRldiBGaW5hbGl6ZSBhIHN1Y2NjZXNmdWwgY3Jvd2RzYWxlLgogIGZ1bmN0aW9uIGZpbmFsaXplKCkgcHVibGljIGluU3RhdGUoU3RhdGUuU3VjY2Vzcykgb25seU93bmVyIHN0b3BJbkVtZXJnZW5jeSB7CiAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwoKICAgIGZpbmFsaXplZCA9IHRydWU7CiAgICBmaW5hbGl6ZUNyb3dkc2FsZSgpOwogIH0KCiAgLy8vIEBkZXYgRmluYWxpemUgYSBzdWNjY2VzZnVsIGNyb3dkc2FsZS4KICBmdW5jdGlvbiBmaW5hbGl6ZUNyb3dkc2FsZSgpIGludGVybmFsIHsKICAgIC8vIENhbGN1bGF0ZSBkaXZpc29yIG9mIHRoZSB0b3RhbCB0b2tlbiBjb3VudAogICAgdWludCBkaXZpc29yOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgaW52ZXN0bWVudHMubGVuZ3RoOyBpKyspCiAgICAgICBkaXZpc29yID0gc2FmZUFkZChkaXZpc29yLCBzYWZlTXVsKGludmVzdG1lbnRzW2ldLndlaVZhbHVlLCBpbnZlc3RtZW50c1tpXS53ZWlnaHQpKTsKCiAgICB1aW50IGxvY2FsTXVsdGlwbGllciA9IDEwICoqIDEyOwogICAgLy8gR2V0IHVuaXQgcHJpY2UKICAgIHVpbnQgdW5pdFByaWNlID0gc2FmZURpdihzYWZlTXVsKHRva2VuLmNvbnZlcnRUb0RlY2ltYWwoVE9UQUxfSUNPX1RPS0VOUyksIGxvY2FsTXVsdGlwbGllciksIGRpdmlzb3IpOwoKICAgIC8vIERpc3RyaWJ1dGUgdG9rZW5zIGFtb25nIGludmVzdG9ycwogICAgZm9yIChpID0gMDsgaSA8IGludmVzdG1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHRva2VuQW1vdW50ID0gc2FmZURpdihzYWZlTXVsKHVuaXRQcmljZSwgc2FmZU11bChpbnZlc3RtZW50c1tpXS53ZWlWYWx1ZSwgaW52ZXN0bWVudHNbaV0ud2VpZ2h0KSksIGxvY2FsTXVsdGlwbGllcik7CiAgICAgICAgdG9rZW5BbW91bnRPZltpbnZlc3RtZW50c1tpXS5zb3VyY2VdICs9IHRva2VuQW1vdW50OwogICAgICAgIGFzc2lnblRva2VucyhpbnZlc3RtZW50c1tpXS5zb3VyY2UsIHRva2VuQW1vdW50KTsKICAgIH0KCiAgICB0b2tlbi5yZWxlYXNlVG9rZW5UcmFuc2ZlcigpOwogIH0KCiAgLy8vIEBkZXYgQWxsb3cgbG9hZCByZWZ1bmRzIGJhY2sgb24gdGhlIGNvbnRyYWN0IGZvciB0aGUgcmVmdW5kaW5nLgogIGZ1bmN0aW9uIGxvYWRSZWZ1bmQoKSBwdWJsaWMgcGF5YWJsZSBpblN0YXRlKFN0YXRlLkZhaWx1cmUpIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICBsb2FkZWRSZWZ1bmQgPSBzYWZlQWRkKGxvYWRlZFJlZnVuZCwgbXNnLnZhbHVlKTsKICB9CgogIC8vLyBAZGV2IEludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kLgogIGZ1bmN0aW9uIHJlZnVuZCgpIHB1YmxpYyBpblN0YXRlKFN0YXRlLlJlZnVuZGluZykgewogICAgdWludDI1NiB3ZWlWYWx1ZSA9IGludmVzdGVkQW1vdW50T2ZbbXNnLnNlbmRlcl07CiAgICBpZiAod2VpVmFsdWUgPT0gMCkKICAgICAgcmV0dXJuOwogICAgaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXSA9IDA7CiAgICB3ZWlSZWZ1bmRlZCA9IHNhZmVBZGQod2VpUmVmdW5kZWQsIHdlaVZhbHVlKTsKICAgIFJlZnVuZChtc2cuc2VuZGVyLCB3ZWlWYWx1ZSk7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHdlaVZhbHVlKTsKICB9CgogIC8vLyBAZGV2IE1pbmltdW0gZ29hbCB3YXMgcmVhY2hlZAogIC8vLyBAcmV0dXJuIHRydWUgaWYgdGhlIGNyb3dkc2FsZSBoYXMgcmFpc2VkIGVub3VnaCBtb25leSB0byBub3QgaW5pdGlhdGUgdGhlIHJlZnVuZGluZwogIGZ1bmN0aW9uIGlzTWluaW11bUdvYWxSZWFjaGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wgcmVhY2hlZCkgewogICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBNSU5fSUNPX0dPQUw7CiAgfQoKICAvLy8gQGRldiBDaGVjayBpZiB0aGUgSUNPIGdvYWwgd2FzIHJlYWNoZWQuCiAgLy8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgY3Jvd2RzYWxlIGhhcyByYWlzZWQgZW5vdWdoIG1vbmV5IHRvIGJlIGEgc3VjY2VzcwogIGZ1bmN0aW9uIGlzQ3Jvd2RzYWxlRnVsbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gaXNNaW5pbXVtR29hbFJlYWNoZWQoKSAmJiBub3cgPiBzdGFydHNBdCArIElDT19EVVJBVElPTjsKICB9CgogIC8vLyBAZGV2IENyb3dkZnVuZCBzdGF0ZSBtYWNoaW5lIG1hbmFnZW1lbnQuCiAgLy8vIEByZXR1cm4gU3RhdGUgY3VycmVudCBzdGF0ZQogIGZ1bmN0aW9uIGdldFN0YXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKFN0YXRlKSB7CiAgICBpZiAoZmluYWxpemVkKQogICAgICByZXR1cm4gU3RhdGUuRmluYWxpemVkOwogICAgaWYgKGFkZHJlc3ModG9rZW4pID09IDAgfHwgYWRkcmVzcyhtdWx0aXNpZ1dhbGxldCkgPT0gMCkKICAgICAgcmV0dXJuIFN0YXRlLlByZXBhcmluZzsKICAgIGlmIChwcmVJY29Ub2tlbnNEaXN0cmlidXRlZCA8IHRva2VuLmNvbnZlcnRUb0RlY2ltYWwoUFJFX0lDT19NQVhfVE9LRU5TKSkKICAgICAgICByZXR1cm4gU3RhdGUuUHJlRnVuZGluZzsKICAgIGlmIChub3cgPj0gc3RhcnRzQXQgJiYgbm93IDwgc3RhcnRzQXQgKyBJQ09fRFVSQVRJT04gJiYgIWlzQ3Jvd2RzYWxlRnVsbCgpKQogICAgICByZXR1cm4gU3RhdGUuRnVuZGluZzsKICAgIGlmIChpc01pbmltdW1Hb2FsUmVhY2hlZCgpKQogICAgICByZXR1cm4gU3RhdGUuU3VjY2VzczsKICAgIGlmICghaXNNaW5pbXVtR29hbFJlYWNoZWQoKSAmJiB3ZWlSYWlzZWQgPiAwICYmIGxvYWRlZFJlZnVuZCA+PSB3ZWlSYWlzZWQpCiAgICAgIHJldHVybiBTdGF0ZS5SZWZ1bmRpbmc7CiAgICByZXR1cm4gU3RhdGUuRmFpbHVyZTsKICB9CgogIAogICAvLy8gQGRldiBEeW5hbWljYWxseSBjcmVhdGUgdG9rZW5zIGFuZCBhc3NpZ24gdGhlbSB0byB0aGUgaW52ZXN0b3IuCiAgIC8vLyBAcGFyYW0gcmVjZWl2ZXIgaW52ZXN0b3IgYWRkcmVzcwogICAvLy8gQHBhcmFtIHRva2VuQW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHdlIHRyeSB0byBnaXZlIHRvIHRoZSBpbnZlc3RvciBpbiB0aGUgY3VycmVudCB0cmFuc2FjdGlvbgogICBmdW5jdGlvbiBhc3NpZ25Ub2tlbnMoYWRkcmVzcyByZWNlaXZlciwgdWludCB0b2tlbkFtb3VudCkgcHJpdmF0ZSB7CiAgICAgdG9rZW4ubWludChyZWNlaXZlciwgdG9rZW5BbW91bnQpOwogICB9Cn0='.
	

]
