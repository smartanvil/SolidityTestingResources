Class {
	#name : #SRT8fa1EaD5d8d774b27d288711abE4d4258224ae26,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8fa1EaD5d8d774b27d288711abE4d4258224ae26 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgoqIExPSyAnTG9va1JldiBUb2tlbicgY3Jvd2RmdW5kaW5nIGNvbnRyYWN0CioKKiBSZWZlciB0byBodHRwczovL2xvb2tyZXYuY29tLyBmb3IgZnVydGhlciBpbmZvcm1hdGlvbi4KKiAKKiBEZXZlbG9wZXI6IExvb2tSZXYgKFRNKSAyMDE3LgoqCiogQXVkaXRlZCBieSBCb2treVBvb0JhaCAvIEJvayBDb25zdWx0aW5nIFB0eSBMdGQgMjAxNy4KKiAKKiBUaGUgTUlUIExpY2Vuc2UuCioKKi8KCi8qCiAqIEVSQzIwIFRva2VuIFN0YW5kYXJkCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKgogKi8KY29udHJhY3QgRVJDMjAgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF93aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBvayk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7Cn0KCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhICYmIGMgPj0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgdWludCBjID0gYSAtIGI7CiAgICBhc3NlcnQoYyA8PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChfbmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lcik7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvKTsKfQoKLyoqCiAqIFN0YW5kYXJkIEVSQzIwIHRva2VuIHdpdGggU2hvcnQgSGFuZCBBdHRhY2sgYW5kIGFwcHJvdmUoKSByYWNlIGNvbmRpdGlvbiBtaXRpZ2F0aW9uLgogKgogKiBCYXNlZCBvbiBjb2RlIGJ5IEludmVzdFNlZWQKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIE93bmFibGUsIFNhZmVNYXRoIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYmFsYW5jZXNbX3RvXSArIF9hbW91bnQgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLF9hbW91bnQpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sX2Ftb3VudCk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgICAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB7CiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KfQoKLyoqCiAqIExvb2tSZXYgdG9rZW4gaW5pdGlhbCBvZmZlcmluZy4KICoKICogVG9rZW4gc3VwcGx5IGlzIGNyZWF0ZWQgaW4gdGhlIHRva2VuIGNvbnRyYWN0IGNyZWF0aW9uIGFuZCBhbGxvY2F0ZWQgdG8gb3duZXIuCiAqCiAqLwpjb250cmFjdCBMb29rUmV2VG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgLyoKICAgICogIFRva2VuIG1ldGEgZGF0YQogICAgKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJMb29rUmV2IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkxPSyI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgVkVSU0lPTiA9ICdMT0sxLjAnOwogICAgYm9vbCBwdWJsaWMgZmluYWxpc2VkID0gZmFsc2U7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGt5Y1JlcXVpcmVkOwoKICAgIC8vIFN0YXJ0IC0gV2VkbmVzZGF5LCBBdWd1c3QgMTYsIDIwMTcgMTA6MDA6MDAgQU0gR01ULTA3OjAwIERTVAogICAgLy8gRW5kIC0gU2F0dXJkYXksIFNlcHRlbWJlciAxNiwgMjAxNyAxMDowMDowMCBBTSBHTVQtMDc6MDAgRFNUCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBTVEFSVF9EQVRFID0gMTUwMjkwMjgwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEVORF9EQVRFID0gMTUwNTU4MTIwMDsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBERUNJTUFMU0ZBQ1RPUiA9IDEwKip1aW50KGRlY2ltYWxzKTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19TT0ZUX0NBUCA9ICAgMTAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19IQVJEX0NBUCA9IDIwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFRPS0VOU19UT1RBTCA9ICAgIDQwMDAwMDAwMDAgKiBERUNJTUFMU0ZBQ1RPUjsKICAgIHVpbnQgcHVibGljIGluaXRpYWxTdXBwbHkgPSAxMDAwMDAwMCAqIERFQ0lNQUxTRkFDVE9SOwoKICAgIC8vIDEgS0VUSEVSID0gMiw0MDAsMDAwIHRva2VucwogICAgLy8gMSBFVEggPSAyLDQwMCB0b2tlbnMKICAgIC8vIFByZXNhbGUgMjAlIGRpc2NvdW50IDEgRVRIID0gMywwMDAgdG9rZW5zCiAgICAvLyBQcmVzYWxlIDEwJSBkaXNjb3VudCAxIEVUSCA9IDIsNjY3IHRva2VucwogICAgdWludCBwdWJsaWMgdG9rZW5zUGVyS0V0aGVyID0gMzAwMDAwMDsKICAgIHVpbnQgcHVibGljIENPTlRSSUJVVElPTlNfTUlOID0gMCBldGhlcjsKICAgIHVpbnQgcHVibGljIENPTlRSSUJVVElPTlNfTUFYID0gMCBldGhlcjsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEtZQ19USFJFU0hPTEQgPSAxMDAwMCAqIERFQ0lNQUxTRkFDVE9SOwoKICAgIGZ1bmN0aW9uIExvb2tSZXZUb2tlbigpIHsKICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICB3YWxsZXQgPSBvd25lcjsKICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OwogICAgICBiYWxhbmNlc1tvd25lcl0gPSB0b3RhbFN1cHBseTsKICAgIH0KCiAgIC8vIExvb2tSZXYgY2FuIGNoYW5nZSB0aGUgY3Jvd2RzYWxlIHdhbGxldCBhZGRyZXNzCiAgIGZ1bmN0aW9uIHNldFdhbGxldChhZGRyZXNzIF93YWxsZXQpIG9ubHlPd25lciB7CiAgICAgICAgd2FsbGV0ID0gX3dhbGxldDsKICAgICAgICBXYWxsZXRVcGRhdGVkKHdhbGxldCk7CiAgICB9CiAgICBldmVudCBXYWxsZXRVcGRhdGVkKGFkZHJlc3MgbmV3V2FsbGV0KTsKCiAgICAvLyBDYW4gb25seSBiZSBzZXQgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgY3Jvd2RzYWxlCiAgICAvLyBPd25lciBjYW4gY2hhbmdlIHRoZSByYXRlIGJlZm9yZSB0aGUgY3Jvd2RzYWxlIHN0YXJ0cwogICAgZnVuY3Rpb24gc2V0VG9rZW5zUGVyS0V0aGVyKHVpbnQgX3Rva2Vuc1BlcktFdGhlcikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5vdyA8IFNUQVJUX0RBVEUpOwogICAgICAgIHJlcXVpcmUoX3Rva2Vuc1BlcktFdGhlciA+IDApOwogICAgICAgIHRva2Vuc1BlcktFdGhlciA9IF90b2tlbnNQZXJLRXRoZXI7CiAgICAgICAgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh0b2tlbnNQZXJLRXRoZXIpOwogICAgfQogICAgZXZlbnQgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh1aW50IHRva2Vuc1BlcktFdGhlcik7CgogICAgLy8gQWNjZXB0IGV0aGVycyB0byBidXkgdG9rZW5zIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBwcm94eVBheW1lbnQobXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gQWNjZXB0IGV0aGVycyBhbmQgZXhjaGFuZ2VzIHRvIHB1cmNoYXNlIHRva2VucyBvbiBiZWhhbGYgb2YgdXNlcgogICAgLy8gbXNnLnZhbHVlIChpbiB1bml0cyBvZiB3ZWkpCiAgICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCkgcGF5YWJsZSB7CgogICAgICAgIHJlcXVpcmUoIWZpbmFsaXNlZCk7CgogICAgICAgIHJlcXVpcmUobm93IDw9IEVORF9EQVRFKTsKCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiBDT05UUklCVVRJT05TX01JTik7CiAgICAgICAgcmVxdWlyZShDT05UUklCVVRJT05TX01BWCA9PSAwIHx8IG1zZy52YWx1ZSA8IENPTlRSSUJVVElPTlNfTUFYKTsKCiAgICAgICAgIC8vIENhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zIGZvciBjb250cmlidXRlZCBFVEgKICAgICAgICAgLy8gYDE4YCBpcyB0aGUgRVRIIGRlY2ltYWxzCiAgICAgICAgIC8vIGAtIGRlY2ltYWxzYCBpcyB0aGUgdG9rZW4gZGVjaW1hbHMKICAgICAgICAgdWludCB0b2tlbnMgPSBtc2cudmFsdWUgKiB0b2tlbnNQZXJLRXRoZXIgLyAxMCoqdWludCgxOCAtIGRlY2ltYWxzICsgMyk7CgogICAgICAgICAvLyBDaGVjayBpZiB0aGUgaGFyZCBjYXAgd2lsbCBiZSBleGNlZWRlZAogICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ICsgdG9rZW5zIDw9IFRPS0VOU19IQVJEX0NBUCk7CgogICAgICAgICAvLyBBZGQgdG9rZW5zIHB1cmNoYXNlZCB0byBhY2NvdW50J3MgYmFsYW5jZSBhbmQgdG90YWwgc3VwcGx5CiAgICAgICAgIGJhbGFuY2VzW3BhcnRpY2lwYW50XSA9IHNhZmVBZGQoYmFsYW5jZXNbcGFydGljaXBhbnRdLHRva2Vucyk7CiAgICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZUFkZCh0b3RhbFN1cHBseSx0b2tlbnMpOwoKICAgICAgICAgLy8gTG9nIHRoZSB0b2tlbnMgcHVyY2hhc2VkIAogICAgICAgICBUcmFuc2ZlcigweDAsIHBhcnRpY2lwYW50LCB0b2tlbnMpOwogICAgICAgICAvLyAtIGJ1eWVyID0gcGFydGljaXBhbnQKICAgICAgICAgLy8gLSBldGhlcnMgPSBtc2cudmFsdWUKICAgICAgICAgLy8gLSBwYXJ0aWNpcGFudFRva2VuQmFsYW5jZSA9IGJhbGFuY2VzW3BhcnRpY2lwYW50XQogICAgICAgICAvLyAtIHRva2VucyA9IHRva2VucwogICAgICAgICAvLyAtIG5ld1RvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkKICAgICAgICAgLy8gLSB0b2tlbnNQZXJLRXRoZXIgPSB0b2tlbnNQZXJLRXRoZXIKICAgICAgICAgVG9rZW5zQm91Z2h0KHBhcnRpY2lwYW50LCBtc2cudmFsdWUsIGJhbGFuY2VzW3BhcnRpY2lwYW50XSwgdG9rZW5zLAogICAgICAgICAgICAgIHRvdGFsU3VwcGx5LCB0b2tlbnNQZXJLRXRoZXIpOwoKICAgICAgICAgaWYgKG1zZy52YWx1ZSA+IEtZQ19USFJFU0hPTEQpIHsKICAgICAgICAgICAgIC8vIEtZQyB2ZXJpZmljYXRpb24gcmVxdWlyZWQgYmVmb3JlIHBhcnRpY2lwYW50IGNhbiB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgICAgICAgICBreWNSZXF1aXJlZFtwYXJ0aWNpcGFudF0gPSB0cnVlOwogICAgICAgICB9CgogICAgICAgICAvLyBUcmFuc2ZlciB0aGUgY29udHJpYnV0ZWQgZXRoZXJzIHRvIHRoZSBjcm93ZHNhbGUgd2FsbGV0CiAgICAgICAgIC8vIHRocm93IGlzIGRlcHJlY2F0ZWQgc3RhcnRpbmcgZnJvbSBFdGhlcmV1bSB2MC45LjAKICAgICAgICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICB9CgogICAgZXZlbnQgVG9rZW5zQm91Z2h0KGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludCBldGhlcnMsIAogICAgICAgIHVpbnQgcGFydGljaXBhbnRUb2tlbkJhbGFuY2UsIHVpbnQgdG9rZW5zLCB1aW50IG5ld1RvdGFsU3VwcGx5LCAKICAgICAgICB1aW50IHRva2Vuc1BlcktFdGhlcik7CgogICAgZnVuY3Rpb24gZmluYWxpc2UoKSBvbmx5T3duZXIgewogICAgICAgIC8vIENhbiBvbmx5IGZpbmFsaXNlIGlmIHJhaXNlZCA+IHNvZnQgY2FwIG9yIGFmdGVyIHRoZSBlbmQgZGF0ZQogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPj0gVE9LRU5TX1NPRlRfQ0FQIHx8IG5vdyA+IEVORF9EQVRFKTsKCiAgICAgICAgcmVxdWlyZSghZmluYWxpc2VkKTsKCiAgICAgICAgZmluYWxpc2VkID0gdHJ1ZTsKICAgIH0KCiAgIGZ1bmN0aW9uIGFkZFByZWNvbW1pdG1lbnQoYWRkcmVzcyBwYXJ0aWNpcGFudCwgdWludCBiYWxhbmNlKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobm93IDwgU1RBUlRfREFURSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlID4gMCk7CiAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdID0gc2FmZUFkZChiYWxhbmNlc1twYXJ0aWNpcGFudF0sYmFsYW5jZSk7CiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LGJhbGFuY2UpOwogICAgICAgIFRyYW5zZmVyKDB4MCwgcGFydGljaXBhbnQsIGJhbGFuY2UpOwogICAgICAgIFByZWNvbW1pdG1lbnRBZGRlZChwYXJ0aWNpcGFudCwgYmFsYW5jZSk7CiAgICB9CiAgICBldmVudCBQcmVjb21taXRtZW50QWRkZWQoYWRkcmVzcyBpbmRleGVkIHBhcnRpY2lwYW50LCB1aW50IGJhbGFuY2UpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBiZWZvcmUgY3Jvd2RzYWxlIGVuZHMKICAgICAgICAvLyBBbGxvdyBhd2FyZGluZyB0ZWFtIG1lbWJlcnMgYmVmb3JlLCBkdXJpbmcgYW5kIGFmdGVyIGNyb3dkc2FsZQogICAgICAgIHJlcXVpcmUoZmluYWxpc2VkIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHJlcXVpcmUoIWt5Y1JlcXVpcmVkW21zZy5zZW5kZXJdKTsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIGJlZm9yZSBjcm93ZHNhbGUgZW5kcwogICAgICAgIHJlcXVpcmUoZmluYWxpc2VkKTsKICAgICAgICByZXF1aXJlKCFreWNSZXF1aXJlZFtfZnJvbV0pOwogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24ga3ljVmVyaWZ5KGFkZHJlc3MgcGFydGljaXBhbnQsIGJvb2wgX3JlcXVpcmVkKSBvbmx5T3duZXIgewogICAgICAgIGt5Y1JlcXVpcmVkW3BhcnRpY2lwYW50XSA9IF9yZXF1aXJlZDsKICAgICAgICBLeWNWZXJpZmllZChwYXJ0aWNpcGFudCwga3ljUmVxdWlyZWRbcGFydGljaXBhbnRdKTsKICAgIH0KICAgIGV2ZW50IEt5Y1ZlcmlmaWVkKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgYm9vbCByZXF1aXJlZCk7CgogICAgLy8gQW55IGFjY291bnQgY2FuIGJ1cm4gX2Zyb20ncyB0b2tlbnMgYXMgbG9uZyBhcyB0aGUgX2Zyb20gYWNjb3VudCBoYXMKICAgIC8vIGFwcHJvdmVkIHRoZSBfYW1vdW50IHRvIGJlIGJ1cm50IHVzaW5nIGFwcHJvdmUoMHgwLCBfYW1vdW50KQogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludCBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID49IF9hbW91bnQpOwoKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF9hbW91bnQKICAgICAgICAgICAgJiYgYWxsb3dlZFtfZnJvbV1bMHgwXSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIF9hbW91bnQgPiAwCiAgICAgICAgICAgICYmIGJhbGFuY2VzWzB4MF0gKyBfYW1vdW50ID4gYmFsYW5jZXNbMHgwXQogICAgICAgICkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbMHgwXSA9IHNhZmVBZGQoYmFsYW5jZXNbMHgwXSxfYW1vdW50KTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bMHgwXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bMHgwXSxfYW1vdW50KTsKICAgICAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LF9hbW91bnQpOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgMHgwLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBMb29rUmV2IGNhbiB0cmFuc2ZlciBvdXQgYW55IGFjY2lkZW50YWxseSBzZW50IEVSQzIwIHRva2VucwogICAgZnVuY3Rpb24gdHJhbnNmZXJBbnlFUkMyMFRva2VuKGFkZHJlc3MgdG9rZW5BZGRyZXNzLCB1aW50IGFtb3VudCkgb25seU93bmVyIHJldHVybnMgKGJvb2wgc3VjY2VzcykgCiAgICB7CiAgICAgICAgcmV0dXJuIEVSQzIwKHRva2VuQWRkcmVzcykudHJhbnNmZXIob3duZXIsIGFtb3VudCk7CiAgICB9Cn0='.
	

]
