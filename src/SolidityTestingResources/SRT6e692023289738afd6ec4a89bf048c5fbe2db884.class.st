Class {
	#name : #SRT6e692023289738afd6ec4a89bf048c5fbe2db884,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6e692023289738afd6ec4a89bf048c5fbe2db884 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogLSBUZXN0aW5nIC0KClByb29mIG9mIFdlYWsgSGFuZHMgIC0gIE5ldyBPcGVuIEVkaXRpb24hCiBfX19fXyAgICAgICAgICAgICBfX19fXyAgICAgXyBfIF8gX19fX18gCnwgICAgIHxfX18gX19fIF9fX3wgIF8gIHxfX198IHwgfCB8ICB8ICB8CnwgIHwgIHwgLiB8IC1ffCAgIHwgICBfX3wgLiB8IHwgfCB8ICAgICB8CnxfX19fX3wgIF98X19ffF98X3xfX3wgIHxfX198X19fX198X198X198CiAgICAgIHxffCAgICAgICAgICAgICAgCiAgICAgIApQcm9vZiBvZiBXZWFrIEhhbmRzICAtICBOZXcgT3BlbiBFZGl0aW9uIQoKT3BlblBvV0ggd2FzIG1hZGUgdG8gYmUgYSBkZWNlbnRyYWxpemVkIGNsb25lIG9mIFBvV0ggd2l0aCBhbiBldmVuIHN0YXJ0IGZvciBhbGwuIAoKSXQncyBzaW1wbGU6Ci0gVGhlIGZpcnN0IDUwIHRyYW5zYWN0aW9ucyBjYW4gb25seSBidXkgaW4gZm9yIDAuMSBFVEggbWF4LiBBbnl0aGluZyBtb3JlIGdldHMgcmVmdW5kZWQuIAotIFRoZSBjb250cmFjdCBhZGRyZXNzIGlzIHJlbGVhc2VkIHJvdWdobHkgNyBkYXlzIHByaW9yIHRvIHRoZSBnYW1lIHN0YXJ0aW5nIChiYXNlZCBvbiBibG9jayBudW1iZXIpLCBhbG93aW5nIHRpbWUgZm9yIHJldmlldyBhbmQgcHJlcGFyYXRpb24uCi1fQW55IHB1cmNoYXNlcyBkb25lIGJlZm9yZSB0aGUgc3RhcnQgYmxvY2sgYXJlIHJlZnVuZGVkLgoKQ3JlZGl0czoKCkJhc2VkIG9uIG9yaWdpbmFsIFBvV0ggY29uY2VwdDogaHR0cHM6Ly90ZXN0LmpvY2hlbi1ob2VuaWNrZS5kZS9ldGgvcG9ueml0b2tlbi8KT3JpZ2luYWwgUG9XSENvaW4gTGF1bmNoOiBQb256aUJvdApFdGhQeSBTZWN1cmUgUmV3cml0ZSBhbmQgQXVkaXQ6IGRpdmluZSwgdG9ja3NJY2ssIGFyYwpMaW1pdGF0aW9uIG9mIEJ1eWluIEFtb3VudDogdG9ja3NpY2sKRGVsYXllZCBQdWJsaWMgU3RhcnQgVGltZTogQ29tbW9uIFNlbnNlIC8gaHR0cHM6Ly9zb2xpZGl0eS5yZWFkdGhlZG9jcy5pby8gLyBUaGUgUGVvcGxlCm1vZGVybnZpbGxhaW46IFNoaXQgU2hhZG93IGRpZG4ndCBldmVuIGdldCBhIG1lbnRpb24/CgoKKi8KCmNvbnRyYWN0IE9wZW5Qb1dIIHsKCgkvLyBzY2FsZUZhY3RvciBpcyB1c2VkIHRvIGNvbnZlcnQgRXRoZXIgaW50byB0b2tlbnMgYW5kIHZpY2UtdmVyc2E6IHRoZXkncmUgb2YgZGlmZmVyZW50CgkvLyBvcmRlcnMgb2YgbWFnbml0dWRlLCBoZW5jZSB0aGUgbmVlZCB0byBicmlkZ2UgYmV0d2VlbiB0aGUgdHdvLgoJdWludDI1NiBjb25zdGFudCBzY2FsZUZhY3RvciA9IDB4MTAwMDAwMDAwMDAwMDAwMDA7ICAvLyAyXjY0CgoJLy8gTnVtYmVyIG9mIGZpcnN0IGJ1eWVycyB0aGF0IGFyZSBsaW1pdGVkCgl1aW50OCBjb25zdGFudCBsaW1pdGVkRmlyc3RCdXllcnMgPSA1MDsgICAgLy8gTGltaXQgNTAgYnV5ZXJzIHRvIDAuMQoJdWludDI1NiBjb25zdGFudCBmaXJzdEJ1eWVyTGltaXQgPSAwLjEgZXRoZXI7CgkKCS8vIENSUiA9IDUwJQoJLy8gQ1JSIGlzIENhc2ggUmVzZXJ2ZSBSYXRpbyAoaW4gdGhpcyBjYXNlIENyeXB0byBSZXNlcnZlIFJhdGlvKS4KCS8vIEZvciBtb3JlIG9uIHRoaXM6IGNoZWNrIG91dCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNlcnZlX3JlcXVpcmVtZW50CglpbnQgY29uc3RhbnQgY3JyX24gPSAxOyAvLyBDUlIgbnVtZXJhdG9yCglpbnQgY29uc3RhbnQgY3JyX2QgPSAyOyAvLyBDUlIgZGVub21pbmF0b3IKCgkvLyBUaGUgcHJpY2UgY29lZmZpY2llbnQuIENob3NlbiBzdWNoIHRoYXQgYXQgMSB0b2tlbiB0b3RhbCBzdXBwbHkKCS8vIHRoZSBhbW91bnQgaW4gcmVzZXJ2ZSBpcyAwLjUgZXRoZXIgYW5kIHRva2VuIHByaWNlIGlzIDEgRXRoZXIuCglpbnQgY29uc3RhbnQgcHJpY2VfY29lZmYgPSAtMHgyOTZBQkY3ODRBMzU4NDY4QzsKCgkvLyBUeXBpY2FsIHZhbHVlcyB0aGF0IHdlIGhhdmUgdG8gZGVjbGFyZS4KCXN0cmluZyBjb25zdGFudCBwdWJsaWMgbmFtZSA9ICJPcGVuUG9XSCI7CglzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJPUG9XSCI7Cgl1aW50OCBjb25zdGFudCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKCgkvLyBBcnJheSBiZXR3ZWVuIGVhY2ggYWRkcmVzcyBhbmQgdGhlaXIgbnVtYmVyIG9mIHRva2Vucy4KCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5CYWxhbmNlOwoJCQoJLy8gQXJyYXkgYmV0d2VlbiBlYWNoIGFkZHJlc3MgYW5kIGhvdyBtdWNoIEV0aGVyIGhhcyBiZWVuIHBhaWQgb3V0IHRvIGl0LgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCW1hcHBpbmcoYWRkcmVzcyA9PiBpbnQyNTYpIHB1YmxpYyBwYXlvdXRzOwoKCS8vIFZhcmlhYmxlIHRyYWNraW5nIGhvdyBtYW55IHRva2VucyBhcmUgaW4gZXhpc3RlbmNlIG92ZXJhbGwuCgl1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCgkvLyBBZ2dyZWdhdGUgc3VtIG9mIGFsbCBwYXlvdXRzLgoJLy8gTm90ZSB0aGF0IHRoaXMgaXMgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCWludDI1NiB0b3RhbFBheW91dHM7CgoJLy8gVmFyaWFibGUgdHJhY2tpbmcgaG93IG11Y2ggRXRoZXIgZWFjaCB0b2tlbiBpcyBjdXJyZW50bHkgd29ydGguCgkvLyBOb3RlIHRoYXQgdGhpcyBpcyBzY2FsZWQgYnkgdGhlIHNjYWxlRmFjdG9yIHZhcmlhYmxlLgoJdWludDI1NiBlYXJuaW5nc1BlclRva2VuOwoJCgkvLyBDdXJyZW50IGNvbnRyYWN0IGJhbGFuY2UgaW4gRXRoZXIKCXVpbnQyNTYgcHVibGljIGNvbnRyYWN0QmFsYW5jZTsKCQoJLy8gU3RvcmVzIGZpcnN0IGJ1eWVyIGNvdW50ZG93bgoJdWludDggaW5pdGlhbEZ1bmRzOwoKIAkvLyBHYW1lIFN0YXJ0IFRpbWUKIAkvLyBBcm91bmQgNyBkYXlzIEAgMTVzL2Jsb2NrCiAgCXVpbnQgcHVibGljIGdhbWVTdGFydEJsb2NrOwogIAl1aW50IGNvbnN0YW50IGdhbWVTdGFydEJsb2NrT2Zmc2V0ID0gNDsgCiAgICAKCWZ1bmN0aW9uIE9wZW5Qb1dIKCkgcHVibGljIHsKICAgIAlpbml0aWFsRnVuZHMgPSBsaW1pdGVkRmlyc3RCdXllcnM7CiAgICAJZ2FtZVN0YXJ0QmxvY2sgPSBibG9jay5udW1iZXIgKyBnYW1lU3RhcnRCbG9ja09mZnNldDsgCiAgICB9CgoJLy8gVGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgYXJlIHVzZWQgYnkgdGhlIGZyb250LWVuZCBmb3IgZGlzcGxheSBwdXJwb3Nlcy4KCgkvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdG9rZW5zIGN1cnJlbnRseSBoZWxkIGJ5IF9vd25lci4KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewoJCXJldHVybiB0b2tlbkJhbGFuY2VbX293bmVyXTsKCX0KCgkvLyBXaXRoZHJhd3MgYWxsIGRpdmlkZW5kcyBoZWxkIGJ5IHRoZSBjYWxsZXIgc2VuZGluZyB0aGUgdHJhbnNhY3Rpb24sIHVwZGF0ZXMKCS8vIHRoZSByZXF1aXNpdGUgZ2xvYmFsIHZhcmlhYmxlcywgYW5kIHRyYW5zZmVycyBFdGhlciBiYWNrIHRvIHRoZSBjYWxsZXIuCglmdW5jdGlvbiB3aXRoZHJhdygpIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gSW5jcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBTZW5kIHRoZSBkaXZpZGVuZHMgdG8gdGhlIGFkZHJlc3MgdGhhdCByZXF1ZXN0ZWQgdGhlIHdpdGhkcmF3LgoJCWNvbnRyYWN0QmFsYW5jZSA9IHN1Yihjb250cmFjdEJhbGFuY2UsIGJhbGFuY2UpOwoJCW1zZy5zZW5kZXIudHJhbnNmZXIoYmFsYW5jZSk7Cgl9CgoJLy8gQ29udmVydHMgdGhlIEV0aGVyIGFjY3J1ZWQgYXMgZGl2aWRlbmRzIGJhY2sgaW50byBFUFkgdG9rZW5zIHdpdGhvdXQgaGF2aW5nIHRvCgkvLyB3aXRoZHJhdyBpdCBmaXJzdC4gU2F2ZXMgb24gZ2FzIGFuZCBwb3RlbnRpYWwgcHJpY2Ugc3Bpa2UgbG9zcy4KCWZ1bmN0aW9uIHJlaW52ZXN0RGl2aWRlbmRzKCkgcHVibGljIHsKCQkvLyBSZXRyaWV2ZSB0aGUgZGl2aWRlbmRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWRkcmVzcyB0aGUgcmVxdWVzdCBjYW1lIGZyb20uCgkJdmFyIGJhbGFuY2UgPSBkaXZpZGVuZHMobXNnLnNlbmRlcik7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXRzIGFycmF5LCBpbmNyZW1lbnRpbmcgdGhlIHJlcXVlc3QgYWRkcmVzcyBieSBgYmFsYW5jZWAuCgkJLy8gU2luY2UgdGhpcyBpcyBlc3NlbnRpYWxseSBhIHNob3J0Y3V0IHRvIHdpdGhkcmF3aW5nIGFuZCByZWludmVzdGluZywgdGhpcyBzdGVwIHN0aWxsIGhvbGRzLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gSW5jcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQkvLyBBc3NpZ24gYmFsYW5jZSB0byBhIG5ldyB2YXJpYWJsZS4KCQl1aW50IHZhbHVlXyA9ICh1aW50KSAoYmFsYW5jZSk7CgkJCgkJLy8gSWYgeW91ciBkaXZpZGVuZHMgYXJlIHdvcnRoIGxlc3MgdGhhbiAxIHN6YWJvLCBvciBtb3JlIHRoYW4gYSBtaWxsaW9uIEV0aGVyCgkJLy8gKGluIHdoaWNoIGNhc2UsIHdoeSBhcmUgeW91IGV2ZW4gaGVyZSksIGFib3J0LgoJCWlmICh2YWx1ZV8gPCAwLjAwMDAwMSBldGhlciB8fCB2YWx1ZV8gPiAxMDAwMDAwIGV0aGVyKQoJCQlyZXZlcnQoKTsKCQkJCgkJLy8gbXNnLnNlbmRlciBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgY2FsbGVyLgoJCXZhciBzZW5kZXIgPSBtc2cuc2VuZGVyOwoJCQoJCS8vIEEgdGVtcG9yYXJ5IHJlc2VydmUgdmFyaWFibGUgdXNlZCBmb3IgY2FsY3VsYXRpbmcgdGhlIHJld2FyZCB0aGUgaG9sZGVyIGdldHMgZm9yIGJ1eWluZyB0b2tlbnMuCgkJLy8gKFllcywgdGhlIGJ1eWVyIHJlY2VpdmVzIGEgcGFydCBvZiB0aGUgZGlzdHJpYnV0aW9uIGFzIHdlbGwhKQoJCXZhciByZXMgPSByZXNlcnZlKCkgLSBiYWxhbmNlOwoKCQkvLyAxMCUgb2YgdGhlIHRvdGFsIEV0aGVyIHNlbnQgaXMgdXNlZCB0byBwYXkgZXhpc3RpbmcgaG9sZGVycy4KCQl2YXIgZmVlID0gZGl2KHZhbHVlXywgMTApOwoJCQoJCS8vIFRoZSBhbW91bnQgb2YgRXRoZXIgdXNlZCB0byBwdXJjaGFzZSBuZXcgdG9rZW5zIGZvciB0aGUgY2FsbGVyLgoJCXZhciBudW1FdGhlciA9IHZhbHVlXyAtIGZlZTsKCQkKCQkvLyBUaGUgbnVtYmVyIG9mIHRva2VucyB3aGljaCBjYW4gYmUgcHVyY2hhc2VkIGZvciBudW1FdGhlci4KCQl2YXIgbnVtVG9rZW5zID0gY2FsY3VsYXRlRGl2aWRlbmRUb2tlbnMobnVtRXRoZXIsIGJhbGFuY2UpOwoJCQoJCS8vIFRoZSBidXllciBmZWUsIHNjYWxlZCBieSB0aGUgc2NhbGVGYWN0b3IgdmFyaWFibGUuCgkJdmFyIGJ1eWVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB0cnVlKSwgb3IKCQkvLyBlbHNlIHlvdSdyZSBnb25uYSBoYXZlIGEgYmFkIHRpbWUuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBDb21wdXRlIHRoZSBib251cyBjby1lZmZpY2llbnQgZm9yIGFsbCBleGlzdGluZyBob2xkZXJzIGFuZCB0aGUgYnV5ZXIuCgkJCS8vIFRoZSBidXllciByZWNlaXZlcyBwYXJ0IG9mIHRoZSBkaXN0cmlidXRpb24gZm9yIGVhY2ggdG9rZW4gYm91Z2h0IGluIHRoZQoJCQkvLyBzYW1lIHdheSB0aGV5IHdvdWxkIGhhdmUgaWYgdGhleSBib3VnaHQgZWFjaCB0b2tlbiBpbmRpdmlkdWFsbHkuCgkJCXZhciBib251c0NvRWZmID0KCQkJICAgIChzY2FsZUZhY3RvciAtIChyZXMgKyBudW1FdGhlcikgKiBudW1Ub2tlbnMgKiBzY2FsZUZhY3RvciAvICh0b3RhbFN1cHBseSArIG51bVRva2VucykgLyBudW1FdGhlcikKCQkJICAgICogKHVpbnQpKGNycl9kKSAvICh1aW50KShjcnJfZC1jcnJfbik7CgkJCQkKCQkJLy8gVGhlIHRvdGFsIHJld2FyZCB0byBiZSBkaXN0cmlidXRlZCBhbW9uZ3N0IHRoZSBtYXNzZXMgaXMgdGhlIGZlZSAoaW4gRXRoZXIpCgkJCS8vIG11bHRpcGxpZWQgYnkgdGhlIGJvbnVzIGNvLWVmZmljaWVudC4KCQkJdmFyIGhvbGRlclJld2FyZCA9IGZlZSAqIGJvbnVzQ29FZmY7CgkJCQoJCQlidXllckZlZSAtPSBob2xkZXJSZXdhcmQ7CgoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIGV4aXN0aW5nIHRva2VuIGhvbGRlcnMgYmVmb3JlIHRoZSBuZXcgdG9rZW5zIGFyZSBwdXJjaGFzZWQuCgkJCS8vIHJld2FyZFBlclNoYXJlIGlzIHRoZSBhbW91bnQgZ2FpbmVkIHBlciB0b2tlbiB0aGFua3MgdG8gdGhpcyBidXktaW4uCgkJCXZhciByZXdhcmRQZXJTaGFyZSA9IGhvbGRlclJld2FyZCAvIHRvdGFsU3VwcGx5OwoJCQkKCQkJLy8gVGhlIEV0aGVyIHZhbHVlIHBlciB0b2tlbiBpcyBpbmNyZWFzZWQgcHJvcG9ydGlvbmFsbHkuCgkJCWVhcm5pbmdzUGVyVG9rZW4gKz0gcmV3YXJkUGVyU2hhcmU7CgkJfQoJCQoJCS8vIEFkZCB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBjcmVhdGVkIHRvIHRoZSB0b3RhbCBzdXBwbHkuIFdlJ3JlIGEgY3J5cHRvIGNlbnRyYWwgYmFuayEKCQl0b3RhbFN1cHBseSA9IGFkZCh0b3RhbFN1cHBseSwgbnVtVG9rZW5zKTsKCQkKCQkvLyBBc3NpZ24gdGhlIHRva2VucyB0byB0aGUgYmFsYW5jZSBvZiB0aGUgYnV5ZXIuCgkJdG9rZW5CYWxhbmNlW3NlbmRlcl0gPSBhZGQodG9rZW5CYWxhbmNlW3NlbmRlcl0sIG51bVRva2Vucyk7CgkJCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmICA9IChpbnQyNTYpICgoZWFybmluZ3NQZXJUb2tlbiAqIG51bVRva2VucykgLSBidXllckZlZSk7CgkJCgkJLy8gVGhlbiB3ZSB1cGRhdGUgdGhlIHBheW91dHMgYXJyYXkgZm9yIHRoZSBidXllciB3aXRoIHRoaXMgYW1vdW50Li4uCgkJcGF5b3V0c1tzZW5kZXJdICs9IHBheW91dERpZmY7CgkJCgkJLy8gQW5kIHRoZW4gd2UgZmluYWxseSBhZGQgaXQgdG8gdGhlIHZhcmlhYmxlIHRyYWNraW5nIHRoZSB0b3RhbCBhbW91bnQgc3BlbnQgdG8gbWFpbnRhaW4gaW52YXJpYW5jZS4KCQl0b3RhbFBheW91dHMgICAgKz0gcGF5b3V0RGlmZjsKCQkKCX0KCgkvLyBTZWxscyB5b3VyIHRva2VucyBmb3IgRXRoZXIuIFRoaXMgRXRoZXIgaXMgYXNzaWduZWQgdG8gdGhlIGNhbGxlcnMgZW50cnkKCS8vIGluIHRoZSB0b2tlbkJhbGFuY2UgYXJyYXksIGFuZCB0aGVyZWZvcmUgaXMgc2hvd24gYXMgYSBkaXZpZGVuZC4gQSBzZWNvbmQKCS8vIGNhbGwgdG8gd2l0aGRyYXcoKSBtdXN0IGJlIG1hZGUgdG8gaW52b2tlIHRoZSB0cmFuc2ZlciBvZiBFdGhlciBiYWNrIHRvIHlvdXIgYWRkcmVzcy4KCWZ1bmN0aW9uIHNlbGxNeVRva2VucygpIHB1YmxpYyB7CgkJdmFyIGJhbGFuY2UgPSBiYWxhbmNlT2YobXNnLnNlbmRlcik7CgkJc2VsbChiYWxhbmNlKTsKCX0KCgkvLyBUaGUgc2xhbS10aGUtYnV0dG9uIGVzY2FwZSBoYXRjaC4gU2VsbHMgdGhlIGNhbGxlcnMgdG9rZW5zIGZvciBFdGhlciwgdGhlbiBpbW1lZGlhdGVseQoJLy8gaW52b2tlcyB0aGUgd2l0aGRyYXcoKSBmdW5jdGlvbiwgc2VuZGluZyB0aGUgcmVzdWx0aW5nIEV0aGVyIHRvIHRoZSBjYWxsZXJzIGFkZHJlc3MuCiAgICBmdW5jdGlvbiBnZXRNZU91dE9mSGVyZSgpIHB1YmxpYyB7CgkJc2VsbE15VG9rZW5zKCk7CiAgICAgICAgd2l0aGRyYXcoKTsKCX0KCQoJLy8gR2F0ZWtlZXBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgYW1vdW50IG9mIEV0aGVyIGJlaW5nIHNlbnQgaXNuJ3QgZWl0aGVyCgkvLyB0b28gc21hbGwgb3IgdG9vIGxhcmdlLiBJZiBpdCBwYXNzZXMsIGdvZXMgZGlyZWN0IHRvIGJ1eSgpLgoJZnVuY3Rpb24gZnVuZCgpIHBheWFibGUgcHVibGljIHsKICAKICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IGdhbWVTdGFydEJsb2NrKTsgICAgICAgICAgICAgIC8vIElmIGdhbWUgaGFzIG5vdCBzdGFydGVkIHlldCwgcmVmdW5kIHRoZSBtb25leS4KICAgIAoJCS8vIERvbid0IGFsbG93IGZvciBmdW5kaW5nIGlmIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBpcyBsZXNzIHRoYW4gMSBzemFiby4KCQlpZiAobXNnLnZhbHVlID4gMC4wMDAwMDEgZXRoZXIpIHsKCQkJLy8gTGltaXQgZmlyc3QgYnV5ZXJzIHRvIDAuMSBldGhlcgoJCQlpZiggaW5pdGlhbEZ1bmRzID4gMCApIHsKCQkJCWluaXRpYWxGdW5kcy0tOwoJCQkJcmVxdWlyZSggbXNnLnZhbHVlIDw9IGZpcnN0QnV5ZXJMaW1pdCApOwoJCQl9CgkJICAgIGNvbnRyYWN0QmFsYW5jZSA9IGFkZChjb250cmFjdEJhbGFuY2UsIG1zZy52YWx1ZSk7CgkJCWJ1eSgpOwoJCX0gZWxzZSB7CgkJCXJldmVydCgpOwoJCX0KICAgIH0KCgkvLyBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIChkeW5hbWljKSBwcmljZSBvZiBidXlpbmcgYSBmaW5uZXkgd29ydGggb2YgdG9rZW5zLgoJZnVuY3Rpb24gYnV5UHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCXJldHVybiBnZXRUb2tlbnNGb3JFdGhlcigxIGZpbm5leSk7Cgl9CgoJLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSAoZHluYW1pYykgcHJpY2Ugb2Ygc2VsbGluZyBhIHNpbmdsZSB0b2tlbi4KCWZ1bmN0aW9uIHNlbGxQcmljZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdmFyIGV0aCA9IGdldEV0aGVyRm9yVG9rZW5zKDEgZmlubmV5KTsKICAgICAgICB2YXIgZmVlID0gZGl2KGV0aCwgMTApOwogICAgICAgIHJldHVybiBldGggLSBmZWU7CiAgICB9CgoJLy8gQ2FsY3VsYXRlIHRoZSBjdXJyZW50IGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGNhbGxlciBhZGRyZXNzLiBUaGlzIGlzIHRoZSBuZXQgcmVzdWx0CgkvLyBvZiBtdWx0aXBseWluZyB0aGUgbnVtYmVyIG9mIHRva2VucyBoZWxkIGJ5IHRoZWlyIGN1cnJlbnQgdmFsdWUgaW4gRXRoZXIgYW5kIHN1YnRyYWN0aW5nIHRoZQoJLy8gRXRoZXIgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHBhaWQgb3V0LgoJZnVuY3Rpb24gZGl2aWRlbmRzKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQlyZXR1cm4gKHVpbnQyNTYpICgoaW50MjU2KShlYXJuaW5nc1BlclRva2VuICogdG9rZW5CYWxhbmNlW19vd25lcl0pIC0gcGF5b3V0c1tfb3duZXJdKSAvIHNjYWxlRmFjdG9yOwoJfQoKCS8vIFZlcnNpb24gb2Ygd2l0aGRyYXcgdGhhdCBleHRyYWN0cyB0aGUgZGl2aWRlbmRzIGFuZCBzZW5kcyB0aGUgRXRoZXIgdG8gdGhlIGNhbGxlci4KCS8vIFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBjYXNlIHdoZW4gdGhlcmUgaXMgbm8gdHJhbnNhY3Rpb24gZGF0YSwgYW5kIHRoYXQgc2hvdWxkIGJlCgkvLyBxdWl0ZSByYXJlIHVubGVzcyBpbnRlcmFjdGluZyBkaXJlY3RseSB3aXRoIHRoZSBzbWFydCBjb250cmFjdC4KCWZ1bmN0aW9uIHdpdGhkcmF3T2xkKGFkZHJlc3MgdG8pIHB1YmxpYyB7CgkJLy8gUmV0cmlldmUgdGhlIGRpdmlkZW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFkZHJlc3MgdGhlIHJlcXVlc3QgY2FtZSBmcm9tLgoJCXZhciBiYWxhbmNlID0gZGl2aWRlbmRzKG1zZy5zZW5kZXIpOwoJCQoJCS8vIFVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSwgaW5jcmVtZW50aW5nIHRoZSByZXF1ZXN0IGFkZHJlc3MgYnkgYGJhbGFuY2VgLgoJCXBheW91dHNbbXNnLnNlbmRlcl0gKz0gKGludDI1NikgKGJhbGFuY2UgKiBzY2FsZUZhY3Rvcik7CgkJCgkJLy8gSW5jcmVhc2UgdGhlIHRvdGFsIGFtb3VudCB0aGF0J3MgYmVlbiBwYWlkIG91dCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyArPSAoaW50MjU2KSAoYmFsYW5jZSAqIHNjYWxlRmFjdG9yKTsKCQkKCQljb250cmFjdEJhbGFuY2UgPSBzdWIoY29udHJhY3RCYWxhbmNlLCBiYWxhbmNlKTsKCQkvLyBTZW5kIHRoZSBkaXZpZGVuZHMgdG8gdGhlIGFkZHJlc3MgdGhhdCByZXF1ZXN0ZWQgdGhlIHdpdGhkcmF3LgoJCXRvLnRyYW5zZmVyKGJhbGFuY2UpOwkJCgl9CgoJLy8gSW50ZXJuYWwgYmFsYW5jZSBmdW5jdGlvbiwgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGR5bmFtaWMgcmVzZXJ2ZSB2YWx1ZS4KCWZ1bmN0aW9uIGJhbGFuY2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudCkgewoJCS8vIG1zZy52YWx1ZSBpcyB0aGUgYW1vdW50IG9mIEV0aGVyIHNlbnQgYnkgdGhlIHRyYW5zYWN0aW9uLgoJCXJldHVybiBjb250cmFjdEJhbGFuY2UgLSBtc2cudmFsdWU7Cgl9CgoJZnVuY3Rpb24gYnV5KCkgaW50ZXJuYWwgewoJCS8vIEFueSB0cmFuc2FjdGlvbiBvZiBsZXNzIHRoYW4gMSBzemFibyBpcyBsaWtlbHkgdG8gYmUgd29ydGggbGVzcyB0aGFuIHRoZSBnYXMgdXNlZCB0byBzZW5kIGl0LgoJCWlmIChtc2cudmFsdWUgPCAwLjAwMDAwMSBldGhlciB8fCBtc2cudmFsdWUgPiAxMDAwMDAwIGV0aGVyKQoJCQlyZXZlcnQoKTsKCQkJCQkJCgkJLy8gbXNnLnNlbmRlciBpcyB0aGUgYWRkcmVzcyBvZiB0aGUgY2FsbGVyLgoJCXZhciBzZW5kZXIgPSBtc2cuc2VuZGVyOwoJCQoJCS8vIDEwJSBvZiB0aGUgdG90YWwgRXRoZXIgc2VudCBpcyB1c2VkIHRvIHBheSBleGlzdGluZyBob2xkZXJzLgoJCXZhciBmZWUgPSBkaXYobXNnLnZhbHVlLCAxMCk7CgkJCgkJLy8gVGhlIGFtb3VudCBvZiBFdGhlciB1c2VkIHRvIHB1cmNoYXNlIG5ldyB0b2tlbnMgZm9yIHRoZSBjYWxsZXIuCgkJdmFyIG51bUV0aGVyID0gbXNnLnZhbHVlIC0gZmVlOwoJCQoJCS8vIFRoZSBudW1iZXIgb2YgdG9rZW5zIHdoaWNoIGNhbiBiZSBwdXJjaGFzZWQgZm9yIG51bUV0aGVyLgoJCXZhciBudW1Ub2tlbnMgPSBnZXRUb2tlbnNGb3JFdGhlcihudW1FdGhlcik7CgkJCgkJLy8gVGhlIGJ1eWVyIGZlZSwgc2NhbGVkIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQl2YXIgYnV5ZXJGZWUgPSBmZWUgKiBzY2FsZUZhY3RvcjsKCQkKCQkvLyBDaGVjayB0aGF0IHdlIGhhdmUgdG9rZW5zIGluIGV4aXN0ZW5jZSAodGhpcyBzaG91bGQgYWx3YXlzIGJlIHRydWUpLCBvcgoJCS8vIGVsc2UgeW91J3JlIGdvbm5hIGhhdmUgYSBiYWQgdGltZS4KCQlpZiAodG90YWxTdXBwbHkgPiAwKSB7CgkJCS8vIENvbXB1dGUgdGhlIGJvbnVzIGNvLWVmZmljaWVudCBmb3IgYWxsIGV4aXN0aW5nIGhvbGRlcnMgYW5kIHRoZSBidXllci4KCQkJLy8gVGhlIGJ1eWVyIHJlY2VpdmVzIHBhcnQgb2YgdGhlIGRpc3RyaWJ1dGlvbiBmb3IgZWFjaCB0b2tlbiBib3VnaHQgaW4gdGhlCgkJCS8vIHNhbWUgd2F5IHRoZXkgd291bGQgaGF2ZSBpZiB0aGV5IGJvdWdodCBlYWNoIHRva2VuIGluZGl2aWR1YWxseS4KCQkJdmFyIGJvbnVzQ29FZmYgPQoJCQkgICAgKHNjYWxlRmFjdG9yIC0gKHJlc2VydmUoKSArIG51bUV0aGVyKSAqIG51bVRva2VucyAqIHNjYWxlRmFjdG9yIC8gKHRvdGFsU3VwcGx5ICsgbnVtVG9rZW5zKSAvIG51bUV0aGVyKQoJCQkgICAgKiAodWludCkoY3JyX2QpIC8gKHVpbnQpKGNycl9kLWNycl9uKTsKCQkJCQoJCQkvLyBUaGUgdG90YWwgcmV3YXJkIHRvIGJlIGRpc3RyaWJ1dGVkIGFtb25nc3QgdGhlIG1hc3NlcyBpcyB0aGUgZmVlIChpbiBFdGhlcikKCQkJLy8gbXVsdGlwbGllZCBieSB0aGUgYm9udXMgY28tZWZmaWNpZW50LgoJCQl2YXIgaG9sZGVyUmV3YXJkID0gZmVlICogYm9udXNDb0VmZjsKCQkJCgkJCWJ1eWVyRmVlIC09IGhvbGRlclJld2FyZDsKCgkJCS8vIEZlZSBpcyBkaXN0cmlidXRlZCB0byBhbGwgZXhpc3RpbmcgdG9rZW4gaG9sZGVycyBiZWZvcmUgdGhlIG5ldyB0b2tlbnMgYXJlIHB1cmNoYXNlZC4KCQkJLy8gcmV3YXJkUGVyU2hhcmUgaXMgdGhlIGFtb3VudCBnYWluZWQgcGVyIHRva2VuIHRoYW5rcyB0byB0aGlzIGJ1eS1pbi4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gaG9sZGVyUmV3YXJkIC8gdG90YWxTdXBwbHk7CgkJCQoJCQkvLyBUaGUgRXRoZXIgdmFsdWUgcGVyIHRva2VuIGlzIGluY3JlYXNlZCBwcm9wb3J0aW9uYWxseS4KCQkJZWFybmluZ3NQZXJUb2tlbiArPSByZXdhcmRQZXJTaGFyZTsKCQkJCgkJfQoKCQkvLyBBZGQgdGhlIG51bVRva2VucyB3aGljaCB3ZXJlIGp1c3QgY3JlYXRlZCB0byB0aGUgdG90YWwgc3VwcGx5LiBXZSdyZSBhIGNyeXB0byBjZW50cmFsIGJhbmshCgkJdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIG51bVRva2Vucyk7CgoJCS8vIEFzc2lnbiB0aGUgdG9rZW5zIHRvIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2Vbc2VuZGVyXSA9IGFkZCh0b2tlbkJhbGFuY2Vbc2VuZGVyXSwgbnVtVG9rZW5zKTsKCgkJLy8gVXBkYXRlIHRoZSBwYXlvdXQgYXJyYXkgc28gdGhhdCB0aGUgYnV5ZXIgY2Fubm90IGNsYWltIGRpdmlkZW5kcyBvbiBwcmV2aW91cyBwdXJjaGFzZXMuCgkJLy8gQWxzbyBpbmNsdWRlIHRoZSBmZWUgcGFpZCBmb3IgZW50ZXJpbmcgdGhlIHNjaGVtZS4KCQkvLyBGaXJzdCB3ZSBjb21wdXRlIGhvdyBtdWNoIHdhcyBqdXN0IHBhaWQgb3V0IHRvIHRoZSBidXllci4uLgoJCXZhciBwYXlvdXREaWZmID0gKGludDI1NikgKChlYXJuaW5nc1BlclRva2VuICogbnVtVG9rZW5zKSAtIGJ1eWVyRmVlKTsKCQkKCQkvLyBUaGVuIHdlIHVwZGF0ZSB0aGUgcGF5b3V0cyBhcnJheSBmb3IgdGhlIGJ1eWVyIHdpdGggdGhpcyBhbW91bnQuLi4KCQlwYXlvdXRzW3NlbmRlcl0gKz0gcGF5b3V0RGlmZjsKCQkKCQkvLyBBbmQgdGhlbiB3ZSBmaW5hbGx5IGFkZCBpdCB0byB0aGUgdmFyaWFibGUgdHJhY2tpbmcgdGhlIHRvdGFsIGFtb3VudCBzcGVudCB0byBtYWludGFpbiBpbnZhcmlhbmNlLgoJCXRvdGFsUGF5b3V0cyAgICArPSBwYXlvdXREaWZmOwoJCQoJfQoKCS8vIFNlbGwgZnVuY3Rpb24gdGhhdCB0YWtlcyB0b2tlbnMgYW5kIGNvbnZlcnRzIHRoZW0gaW50byBFdGhlci4gQWxzbyBjb21lcyB3aXRoIGEgMTAlIGZlZQoJLy8gdG8gZGlzY291cmFnaW5nIGR1bXBpbmcsIGFuZCBtZWFucyB0aGF0IGlmIHNvbWVvbmUgbmVhciB0aGUgdG9wIHNlbGxzLCB0aGUgZmVlIGRpc3RyaWJ1dGVkCgkvLyB3aWxsIGJlICpzaWduaWZpY2FudCouCglmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCB7CgkgICAgLy8gQ2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgRXRoZXIgdGhhdCB0aGUgaG9sZGVycyB0b2tlbnMgc2VsbCBmb3IgYXQgdGhlIGN1cnJlbnQgc2VsbCBwcmljZS4KCQl2YXIgbnVtRXRoZXJzQmVmb3JlRmVlID0gZ2V0RXRoZXJGb3JUb2tlbnMoYW1vdW50KTsKCQkKCQkvLyAxMCUgb2YgdGhlIHJlc3VsdGluZyBFdGhlciBpcyB1c2VkIHRvIHBheSByZW1haW5pbmcgaG9sZGVycy4KICAgICAgICB2YXIgZmVlID0gZGl2KG51bUV0aGVyc0JlZm9yZUZlZSwgMTApOwoJCQoJCS8vIE5ldCBFdGhlciBmb3IgdGhlIHNlbGxlciBhZnRlciB0aGUgZmVlIGhhcyBiZWVuIHN1YnRyYWN0ZWQuCiAgICAgICAgdmFyIG51bUV0aGVycyA9IG51bUV0aGVyc0JlZm9yZUZlZSAtIGZlZTsKCQkKCQkvLyAqUmVtb3ZlKiB0aGUgbnVtVG9rZW5zIHdoaWNoIHdlcmUganVzdCBzb2xkIGZyb20gdGhlIHRvdGFsIHN1cHBseS4gV2UncmUgL2RlZmluaXRlbHkvIGEgY3J5cHRvIGNlbnRyYWwgYmFuay4KCQl0b3RhbFN1cHBseSA9IHN1Yih0b3RhbFN1cHBseSwgYW1vdW50KTsKCQkKICAgICAgICAvLyBSZW1vdmUgdGhlIHRva2VucyBmcm9tIHRoZSBiYWxhbmNlIG9mIHRoZSBidXllci4KCQl0b2tlbkJhbGFuY2VbbXNnLnNlbmRlcl0gPSBzdWIodG9rZW5CYWxhbmNlW21zZy5zZW5kZXJdLCBhbW91bnQpOwoKICAgICAgICAvLyBVcGRhdGUgdGhlIHBheW91dCBhcnJheSBzbyB0aGF0IHRoZSBzZWxsZXIgY2Fubm90IGNsYWltIGZ1dHVyZSBkaXZpZGVuZHMgdW5sZXNzIHRoZXkgYnV5IGJhY2sgaW4uCgkJLy8gRmlyc3Qgd2UgY29tcHV0ZSBob3cgbXVjaCB3YXMganVzdCBwYWlkIG91dCB0byB0aGUgc2VsbGVyLi4uCgkJdmFyIHBheW91dERpZmYgPSAoaW50MjU2KSAoZWFybmluZ3NQZXJUb2tlbiAqIGFtb3VudCArIChudW1FdGhlcnMgKiBzY2FsZUZhY3RvcikpOwoJCQogICAgICAgIC8vIFdlIHJlZHVjZSB0aGUgYW1vdW50IHBhaWQgb3V0IHRvIHRoZSBzZWxsZXIgKHRoaXMgZWZmZWN0aXZlbHkgcmVzZXRzIHRoZWlyIHBheW91dHMgdmFsdWUgdG8gemVybywKCQkvLyBzaW5jZSB0aGV5J3JlIHNlbGxpbmcgYWxsIG9mIHRoZWlyIHRva2VucykuIFRoaXMgbWFrZXMgc3VyZSB0aGUgc2VsbGVyIGlzbid0IGRpc2FkdmFudGFnZWQgaWYKCQkvLyB0aGV5IGRlY2lkZSB0byBidXkgYmFjayBpbi4KCQlwYXlvdXRzW21zZy5zZW5kZXJdIC09IHBheW91dERpZmY7CQkKCQkKCQkvLyBEZWNyZWFzZSB0aGUgdG90YWwgYW1vdW50IHRoYXQncyBiZWVuIHBhaWQgb3V0IHRvIG1haW50YWluIGludmFyaWFuY2UuCiAgICAgICAgdG90YWxQYXlvdXRzIC09IHBheW91dERpZmY7CgkJCgkJLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlIHRva2VucyBpbiBleGlzdGVuY2UgKHRoaXMgaXMgYSBiaXQgb2YgYW4gaXJyZWxldmFudCBjaGVjayBzaW5jZSB3ZSdyZQoJCS8vIHNlbGxpbmcgdG9rZW5zLCBidXQgaXQgZ3VhcmRzIGFnYWluc3QgZGl2aXNpb24gYnkgemVybykuCgkJaWYgKHRvdGFsU3VwcGx5ID4gMCkgewoJCQkvLyBTY2FsZSB0aGUgRXRoZXIgdGFrZW4gYXMgdGhlIHNlbGxpbmcgZmVlIGJ5IHRoZSBzY2FsZUZhY3RvciB2YXJpYWJsZS4KCQkJdmFyIGV0aGVyRmVlID0gZmVlICogc2NhbGVGYWN0b3I7CgkJCQoJCQkvLyBGZWUgaXMgZGlzdHJpYnV0ZWQgdG8gYWxsIHJlbWFpbmluZyB0b2tlbiBob2xkZXJzLgoJCQkvLyByZXdhcmRQZXJTaGFyZSBpcyB0aGUgYW1vdW50IGdhaW5lZCBwZXIgdG9rZW4gdGhhbmtzIHRvIHRoaXMgc2VsbC4KCQkJdmFyIHJld2FyZFBlclNoYXJlID0gZXRoZXJGZWUgLyB0b3RhbFN1cHBseTsKCQkJCgkJCS8vIFRoZSBFdGhlciB2YWx1ZSBwZXIgdG9rZW4gaXMgaW5jcmVhc2VkIHByb3BvcnRpb25hbGx5LgoJCQllYXJuaW5nc1BlclRva2VuID0gYWRkKGVhcm5pbmdzUGVyVG9rZW4sIHJld2FyZFBlclNoYXJlKTsKCQl9Cgl9CgkKCS8vIER5bmFtaWMgdmFsdWUgb2YgRXRoZXIgaW4gcmVzZXJ2ZSwgYWNjb3JkaW5nIHRvIHRoZSBDUlIgcmVxdWlyZW1lbnQuCglmdW5jdGlvbiByZXNlcnZlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBhbW91bnQpIHsKCQlyZXR1cm4gc3ViKGJhbGFuY2UoKSwKCQkJICgodWludDI1NikgKChpbnQyNTYpIChlYXJuaW5nc1BlclRva2VuICogdG90YWxTdXBwbHkpIC0gdG90YWxQYXlvdXRzKSAvIHNjYWxlRmFjdG9yKSk7Cgl9CgoJLy8gQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IGNhbiBiZSBib3VnaHQgZm9yIGEgZ2l2ZW4gYW1vdW50IG9mIEV0aGVyLCBhY2NvcmRpbmcgdG8gdGhlCgkvLyBkeW5hbWljIHJlc2VydmUgYW5kIHRvdGFsU3VwcGx5IHZhbHVlcyAoZGVyaXZlZCBmcm9tIHRoZSBidXkgYW5kIHNlbGwgcHJpY2VzKS4KCWZ1bmN0aW9uIGdldFRva2Vuc0ZvckV0aGVyKHVpbnQyNTYgZXRoZXJ2YWx1ZSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5zKSB7CgkJcmV0dXJuIHN1YihmaXhlZEV4cChmaXhlZExvZyhyZXNlcnZlKCkgKyBldGhlcnZhbHVlKSpjcnJfbi9jcnJfZCArIHByaWNlX2NvZWZmKSwgdG90YWxTdXBwbHkpOwoJfQoKCS8vIFNlbWFudGljYWxseSBzaW1pbGFyIHRvIGdldFRva2Vuc0ZvckV0aGVyLCBidXQgc3VidHJhY3RzIHRoZSBjYWxsZXJzIGJhbGFuY2UgZnJvbSB0aGUgYW1vdW50IG9mIEV0aGVyIHJldHVybmVkIGZvciBjb252ZXJzaW9uLgoJZnVuY3Rpb24gY2FsY3VsYXRlRGl2aWRlbmRUb2tlbnModWludDI1NiBldGhlcnZhbHVlLCB1aW50MjU2IHN1YnZhbHVlKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b2tlbnMpIHsKCQlyZXR1cm4gc3ViKGZpeGVkRXhwKGZpeGVkTG9nKHJlc2VydmUoKSAtIHN1YnZhbHVlICsgZXRoZXJ2YWx1ZSkqY3JyX24vY3JyX2QgKyBwcmljZV9jb2VmZiksIHRvdGFsU3VwcGx5KTsKCX0KCgkvLyBDb252ZXJ0cyBhIG51bWJlciB0b2tlbnMgaW50byBhbiBFdGhlciB2YWx1ZS4KCWZ1bmN0aW9uIGdldEV0aGVyRm9yVG9rZW5zKHVpbnQyNTYgdG9rZW5zKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBldGhlcnZhbHVlKSB7CgkJLy8gSG93IG11Y2ggcmVzZXJ2ZSBFdGhlciBkbyB3ZSBoYXZlIGxlZnQgaW4gdGhlIGNvbnRyYWN0PwoJCXZhciByZXNlcnZlQW1vdW50ID0gcmVzZXJ2ZSgpOwoKCQkvLyBJZiB5b3UncmUgdGhlIEhpZ2hsYW5kZXIgKG9yIGJhZ2hvbGRlciksIHlvdSBnZXQgVGhlIFByaXplLiBFdmVyeXRoaW5nIGxlZnQgaW4gdGhlIHZhdWx0LgoJCWlmICh0b2tlbnMgPT0gdG90YWxTdXBwbHkpCgkJCXJldHVybiByZXNlcnZlQW1vdW50OwoKCQkvLyBJZiB0aGVyZSB3b3VsZCBiZSBleGNlc3MgRXRoZXIgbGVmdCBhZnRlciB0aGUgdHJhbnNhY3Rpb24gdGhpcyBpcyBjYWxsZWQgd2l0aGluLCByZXR1cm4gdGhlIEV0aGVyCgkJLy8gY29ycmVzcG9uZGluZyB0byB0aGUgZXF1YXRpb24gaW4gRHIgSm9jaGVuIEhvZW5pY2tlJ3Mgb3JpZ2luYWwgUG9uemkgcGFwZXIsIHdoaWNoIGNhbiBiZSBmb3VuZAoJCS8vIGF0IGh0dHBzOi8vdGVzdC5qb2NoZW4taG9lbmlja2UuZGUvZXRoL3BvbnppdG9rZW4vIGluIHRoZSB0aGlyZCBlcXVhdGlvbiwgd2l0aCB0aGUgQ1JSIG51bWVyYXRvciAKCQkvLyBhbmQgZGVub21pbmF0b3IgYWx0ZXJlZCB0byAxIGFuZCAyIHJlc3BlY3RpdmVseS4KCQlyZXR1cm4gc3ViKHJlc2VydmVBbW91bnQsIGZpeGVkRXhwKChmaXhlZExvZyh0b3RhbFN1cHBseSAtIHRva2VucykgLSBwcmljZV9jb2VmZikgKiBjcnJfZC9jcnJfbikpOwoJfQoKCS8vIFlvdSBkb24ndCBjYXJlIGFib3V0IHRoZXNlLCBidXQgaWYgeW91IHJlYWxseSBkbyB0aGV5J3JlIGhleCB2YWx1ZXMgZm9yIAoJLy8gY28tZWZmaWNpZW50cyB1c2VkIHRvIHNpbXVsYXRlIGFwcHJveGltYXRpb25zIG9mIHRoZSBsb2cgYW5kIGV4cCBmdW5jdGlvbnMuCglpbnQyNTYgIGNvbnN0YW50IG9uZSAgICAgICAgPSAweDEwMDAwMDAwMDAwMDAwMDAwOwoJdWludDI1NiBjb25zdGFudCBzcXJ0MiAgICAgID0gMHgxNmEwOWU2NjdmM2JjYzkwODsKCXVpbnQyNTYgY29uc3RhbnQgc3FydGRvdDUgICA9IDB4MGI1MDRmMzMzZjlkZTY0ODQ7CglpbnQyNTYgIGNvbnN0YW50IGxuMiAgICAgICAgPSAweDBiMTcyMTdmN2QxY2Y3OWFjOwoJaW50MjU2ICBjb25zdGFudCBsbjJfNjRkb3Q1ID0gMHgyY2I1M2YwOWYwNWNjNjI3Yzg7CglpbnQyNTYgIGNvbnN0YW50IGMxICAgICAgICAgPSAweDFmZmZmZmZmZmZmOWRhYzliOwoJaW50MjU2ICBjb25zdGFudCBjMyAgICAgICAgID0gMHgwYWFhYWFhYWMxNjg3NzkwODsKCWludDI1NiAgY29uc3RhbnQgYzUgICAgICAgICA9IDB4MDY2NjY2NGU1ZTlmYTBjOTk7CglpbnQyNTYgIGNvbnN0YW50IGM3ICAgICAgICAgPSAweDA0OTI1NDAyNmE3NjMwYWNmOwoJaW50MjU2ICBjb25zdGFudCBjOSAgICAgICAgID0gMHgwMzhiZDc1ZWQzNzc1M2Q2ODsKCWludDI1NiAgY29uc3RhbnQgYzExICAgICAgICA9IDB4MDMyODRhMGMxNDYxMDkyNGY7CgoJLy8gVGhlIHBvbHlub21pYWwgUiA9IGMxKnggKyBjMyp4XjMgKyAuLi4gKyBjMTEgKiB4XjExCgkvLyBhcHByb3hpbWF0ZXMgdGhlIGZ1bmN0aW9uIGxvZygxK3gpLWxvZygxLXgpCgkvLyBIZW5jZSBSKHMpID0gbG9nKCgxK3MpLygxLXMpKSA9IGxvZyhhKQoJZnVuY3Rpb24gZml4ZWRMb2codWludDI1NiBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKGludDI1NiBsb2cpIHsKCQlpbnQzMiBzY2FsZSA9IDA7CgkJd2hpbGUgKGEgPiBzcXJ0MikgewoJCQlhIC89IDI7CgkJCXNjYWxlKys7CgkJfQoJCXdoaWxlIChhIDw9IHNxcnRkb3Q1KSB7CgkJCWEgKj0gMjsKCQkJc2NhbGUtLTsKCQl9CgkJaW50MjU2IHMgPSAoKChpbnQyNTYpKGEpIC0gb25lKSAqIG9uZSkgLyAoKGludDI1NikoYSkgKyBvbmUpOwoJCXZhciB6ID0gKHMqcykgLyBvbmU7CgkJcmV0dXJuIHNjYWxlICogbG4yICsKCQkJKHMqKGMxICsgKHoqKGMzICsgKHoqKGM1ICsgKHoqKGM3ICsgKHoqKGM5ICsgKHoqYzExL29uZSkpCgkJCQkvb25lKSkvb25lKSkvb25lKSkvb25lKSkvb25lKTsKCX0KCglpbnQyNTYgY29uc3RhbnQgYzIgPSAgMHgwMmFhYWFhYWFhYTAxNWRiMDsKCWludDI1NiBjb25zdGFudCBjNCA9IC0weDAwMGI2MGI2MDgwODM5OWQxOwoJaW50MjU2IGNvbnN0YW50IGM2ID0gIDB4MDAwMDQ1NTk1NmJjY2RkMDY7CglpbnQyNTYgY29uc3RhbnQgYzggPSAtMHgwMDAwMDFiODkzYWQwNGIzYTsKCQoJLy8gVGhlIHBvbHlub21pYWwgUiA9IDIgKyBjMip4XjIgKyBjNCp4XjQgKyAuLi4KCS8vIGFwcHJveGltYXRlcyB0aGUgZnVuY3Rpb24geCooZXhwKHgpKzEpLyhleHAoeCktMSkKCS8vIEhlbmNlIGV4cCh4KSA9IChSKHgpK3gpLyhSKHgpLXgpCglmdW5jdGlvbiBmaXhlZEV4cChpbnQyNTYgYSkgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2IGV4cCkgewoJCWludDI1NiBzY2FsZSA9IChhICsgKGxuMl82NGRvdDUpKSAvIGxuMiAtIDY0OwoJCWEgLT0gc2NhbGUqbG4yOwoJCWludDI1NiB6ID0gKGEqYSkgLyBvbmU7CgkJaW50MjU2IFIgPSAoKGludDI1NikoMikgKiBvbmUpICsKCQkJKHoqKGMyICsgKHoqKGM0ICsgKHoqKGM2ICsgKHoqYzgvb25lKSkvb25lKSkvb25lKSkvb25lKTsKCQlleHAgPSAodWludDI1NikgKCgoUiArIGEpICogb25lKSAvIChSIC0gYSkpOwoJCWlmIChzY2FsZSA+PSAwKQoJCQlleHAgPDw9IHNjYWxlOwoJCWVsc2UKCQkJZXhwID4+PSAtc2NhbGU7CgkJcmV0dXJuIGV4cDsKCX0KCQoJLy8gVGhlIGJlbG93IGFyZSBzYWZlbWF0aCBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIGZvdXIgYXJpdGhtZXRpYyBvcGVyYXRvcnMKCS8vIGRlc2lnbmVkIHRvIGV4cGxpY2l0bHkgcHJldmVudCBvdmVyLSBhbmQgdW5kZXItZmxvd3Mgb2YgaW50ZWdlciB2YWx1ZXMuCgoJZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQlpZiAoYSA9PSAwKSB7CgkJCXJldHVybiAwOwoJCX0KCQl1aW50MjU2IGMgPSBhICogYjsKCQlhc3NlcnQoYyAvIGEgPT0gYik7CgkJcmV0dXJuIGM7Cgl9CgoJZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKCQkvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKCQl1aW50MjU2IGMgPSBhIC8gYjsKCQkvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAoJCXJldHVybiBjOwoJfQoKCWZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJYXNzZXJ0KGIgPD0gYSk7CgkJcmV0dXJuIGEgLSBiOwoJfQoKCWZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CgkJdWludDI1NiBjID0gYSArIGI7CgkJYXNzZXJ0KGMgPj0gYSk7CgkJcmV0dXJuIGM7Cgl9CgoJLy8gVGhpcyBhbGxvd3MgeW91IHRvIGJ1eSB0b2tlbnMgYnkgc2VuZGluZyBFdGhlciBkaXJlY3RseSB0byB0aGUgc21hcnQgY29udHJhY3QKCS8vIHdpdGhvdXQgaW5jbHVkaW5nIGFueSB0cmFuc2FjdGlvbiBkYXRhICh1c2VmdWwgZm9yLCBzYXksIG1vYmlsZSB3YWxsZXQgYXBwcykuCglmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7CgkJLy8gbXNnLnZhbHVlIGlzIHRoZSBhbW91bnQgb2YgRXRoZXIgc2VudCBieSB0aGUgdHJhbnNhY3Rpb24uCgkJaWYgKG1zZy52YWx1ZSA+IDApIHsKCQkJZnVuZCgpOwoJCX0gZWxzZSB7CgkJCXdpdGhkcmF3T2xkKG1zZy5zZW5kZXIpOwoJCX0KCX0KfQ=='.
	

]
