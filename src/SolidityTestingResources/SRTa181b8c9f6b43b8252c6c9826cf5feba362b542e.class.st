Class {
	#name : #SRTa181b8c9f6b43b8252c6c9826cf5feba362b542e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa181b8c9f6b43b8252c6c9826cf5feba362b542e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7IC8vIHNvbGhpbnQtZGlzYWJsZS1saW5lCgoKCgpjb250cmFjdCBFUkM3MjEgewogIC8vIFJlcXVpcmVkIG1ldGhvZHMKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgYWRkcik7CiAgZnVuY3Rpb24gdGFrZU93bmVyc2hpcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwogIGV2ZW50IERpc3NvbHZlZChhZGRyZXNzICBvd25lciwgdWludDI1NiB0b2tlbklkKTsKICBldmVudCBUcmFuc2ZlckRpc3NvbHZlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHRva2VuSWQpOwogIAp9CgoKY29udHJhY3QgQ3J5cHRvU3RhbXBzIGlzIEVSQzcyMSB7CgogIAogIC8qKiogRVZFTlRTICoqKi8KCiAgCiAgLy8vIEBkZXYgVGhlIEJpcnRoIGV2ZW50IGlzIGZpcmVkIHdoZW5ldmVyIGEgbmV3IHN0YW1wIGlzIGNyZWF0ZWQuCiAgZXZlbnQgc3RhbXBCaXJ0aCh1aW50MjU2IHRva2VuSWQsICBhZGRyZXNzIG93bmVyKTsKCiAgLy8vIEBkZXYgVGhlIFRva2VuU29sZCBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIHN0YW1wIGlzIHNvbGQuCiAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBvbGRQcmljZSwgdWludDI1NiBuZXdQcmljZSwgYWRkcmVzcyBwcmV2T3duZXIsIGFkZHJlc3Mgd2lubmVyKTsKCiAgLy8vIEBkZXYgVHJhbnNmZXIgZXZlbnQgYXMgZGVmaW5lZCBpbiBjdXJyZW50IGRyYWZ0IG9mIEVSQzcyMS4gCiAgLy8vICBvd25lcnNoaXAgaXMgYXNzaWduZWQsIGluY2x1ZGluZyBiaXJ0aHMuCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHRva2VuSWQpOwoKCgogIAogIC8qKiogQ09OU1RBTlRTICoqKi8KCgogIC8vLyBAbm90aWNlIE5hbWUgYW5kIHN5bWJvbCBvZiB0aGUgbm9uIGZ1bmdpYmxlIHRva2VuLCBhcyBkZWZpbmVkIGluIEVSQzcyMS4KICBzdHJpbmcgcHVibGljIGNvbnN0YW50IE5BTUUgPSAiQ3J5cHRvU3RhbXBzIjsgLy8gCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgPSAiQ1MiOyAvLyAKICAKICAvLyBAZGV2IGZpcnN0U3RlcExpbWl0IGZvciB0aGUgY2hhbmdlIGluIHJhdGUgb2YgcHJpY2UgaW5jcmVhc2UKICB1aW50MjU2IHByaXZhdGUgZmlyc3RTdGVwTGltaXQgPSAgMS4yOCBldGhlcjsKICAKCgogIAogIAogIC8qKiogU1RPUkFHRSAqKiovCgoKCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gc3RhbXAgSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgc3RhbXBzIGhhdmUKICAvLy8gIHNvbWUgdmFsaWQgb3duZXIgYWRkcmVzcy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBzdGFtcEluZGV4VG9Pd25lcjsKICAKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBvd25lciBhZGRyZXNzIHRvIGNvdW50IG9mIHN0YW1wcyB0aGF0IGFkZHJlc3Mgb3ducy4KICAvLyAgVXNlZCBpbnRlcm5hbGx5IGluc2lkZSBiYWxhbmNlT2YoKSB0byByZXNvbHZlIG93bmVyc2hpcCBjb3VudC4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZXJzaGlwVG9rZW5Db3VudDsKCiAgLy8vIEBkZXYgQSBtYXBwaW5nIGZyb20gc3RhbXAgSURzIHRvIGFuIGFkZHJlc3MgdGhhdCBoYXMgYmVlbiBhcHByb3ZlZCB0byBjYWxsCiAgLy8vICB0cmFuc2ZlckZyb20oKS4gRWFjaCBzdGFtcCBjYW4gb25seSBoYXZlIG9uZSBhcHByb3ZlZCBhZGRyZXNzIGZvciB0cmFuc2ZlcgogIC8vLyAgYXQgYW55IHRpbWUuIEEgemVybyB2YWx1ZSBtZWFucyBubyBhcHByb3ZhbCBpcyBvdXRzdGFuZGluZy4KICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBzdGFtcEluZGV4VG9BcHByb3ZlZDsKCiAgLy8gQGRldiBBIG1hcHBpbmcgZnJvbSBzdGFtcCBJRHMgdG8gdGhlIHByaWNlIG9mIHRoZSB0b2tlbi4KICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgc3RhbXBJbmRleFRvUHJpY2U7CiAgCiAgCiAgCiAgLy9AZGV2IEEgbWFwcGluZyBmcm9tIHN0YW1wIElEcyB0byB0aGUgbnVtYmVyIG9mIHRyYW5zYWN0aW9ucyB0aGF0IHRoZSBzdGFtcCBoYXMgZ29uZSB0aHJvdWdoLiAKICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikgcHVibGljIHN0YW1wSW5kZXh0b3RyYW5zYWN0aW9uczsKICAKICAvL0BkZXYgVG8gY2FsY3VsYXRlIHRoZSB0b3RhbCBldGhlcnMgdHJhbnNhY3RlZCBpbiB0aGUgZ2FtZS4KICB1aW50MjU2IHB1YmxpYyB0b3RhbGV0aGVyc3RyYW5zYWN0ZWQ7CgogIC8vQGRldiBUbyBjYWxjdWxhdGUgdGhlIHRvdGFsIHRyYW5zYWN0aW9ucyBpbiB0aGUgZ2FtZS4KICB1aW50MjU2IHB1YmxpYyB0b3RhbHRyYW5zYWN0aW9uczsKICAKICAvL0BkZXYgVG8gY2FsY3VsYXRlIHRoZSB0b3RhbCBzdGFtcHMgY3JlYXRlZC4KICB1aW50MjU2IHB1YmxpYyBzdGFtcENyZWF0ZWRDb3VudDsKICAKICAKICAKCiAvKioqIFNUT1JBR0UgRk9SIERJU1NPTFZFRCAqKiovCiAKIAogLy9AZGV2IEEgbWFwcGluZyBmcm9tIHN0YW1wIElEcyB0byB0aGVpciBkaXNzb2x2ZWQgc3RhdHVzLgogIC8vSW5pdGlhbGx5IGFsbCB2YWx1ZXMgYXJlIHNldCB0byBmYWxzZSBieSBkZWZhdWx0CiAgbWFwcGluZyAodWludDI1NiA9PiBib29sKSBwdWJsaWMgc3RhbXBJbmRleHRvZGlzc29sdmVkOwogCiAKIC8vQGRldiBBIG1hcHBpbmcgZnJvbSBkaXNzb2x2ZWQgc3RhbXAgSURzIHRvIHRoZWlyIGFwcHJvdmFsIHN0YXR1cy4KICAvL0luaXRpYWxseSBhbGwgdmFsdWVzIGFyZSBzZXQgdG8gZmFsc2UgYnkgZGVmYXVsdAogbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwdWJsaWMgZGlzc29sdmVkSW5kZXhUb0FwcHJvdmVkOwogCiAgCiAgCiAgCiAgLyoqKiBEQVRBVFlQRVMgKioqLwogIAogIHN0cnVjdCBTdGFtcCB7CiAgICB1aW50MjU2IGJpcnRodGltZTsKICB9CiAgCiAgCgogIFN0YW1wW10gcHJpdmF0ZSBzdGFtcHM7CgogCiAKIAogCiAgCiAgCiAgCiAgLyoqKiBBQ0NFU1MgTU9ESUZJRVJTICoqKi8KICAKICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENFTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICAKICAKICAvLyBUaGUgYWRkcmVzc2VzIG9mIHRoZSBhY2NvdW50cyAob3IgY29udHJhY3RzKSB0aGF0IGNhbiBleGVjdXRlIGFjdGlvbnMgd2l0aGluIGVhY2ggcm9sZXMuCiAgYWRkcmVzcyBwdWJsaWMgY2VvQWRkcmVzczsKICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwogIGJvb2wgcHJpdmF0ZSBwYXVzZWQ7CiAgCiAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzKTsKICAgIF87CiAgfQoKICAvLy8gQGRldiBBY2Nlc3MgbW9kaWZpZXIgZm9yIENPTy1vbmx5IGZ1bmN0aW9uYWxpdHkKICBtb2RpZmllciBvbmx5Q09PKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgXzsKICB9CgogIC8vLyBBY2Nlc3MgbW9kaWZpZXIgZm9yIGNvbnRyYWN0IG93bmVyIG9ubHkgZnVuY3Rpb25hbGl0eQogIG1vZGlmaWVyIG9ubHlDTGV2ZWwoKSB7CiAgICByZXF1aXJlKAogICAgICBtc2cuc2VuZGVyID09IGNlb0FkZHJlc3MgfHwKICAgICAgbXNnLnNlbmRlciA9PSBjb29BZGRyZXNzCiAgICApOwogICAgXzsKICB9CgogIAogIC8vLyBAZGV2IEFzc2lnbnMgYSBuZXcgYWRkcmVzcyB0byBhY3QgYXMgdGhlIENFTy4gT25seSBhdmFpbGFibGUgdG8gdGhlIGN1cnJlbnQgQ0VPLgogIC8vLyBAcGFyYW0gX25ld0NFTyBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IENFTwogIAogIGZ1bmN0aW9uIHNldENFTyhhZGRyZXNzIF9uZXdDRU8pIHB1YmxpYyBvbmx5Q0VPIHsKICAgIHJlcXVpcmUoX25ld0NFTyAhPSBhZGRyZXNzKDApKTsKCiAgICBjZW9BZGRyZXNzID0gX25ld0NFTzsKICB9CgogCiAKICAvLy8gQGRldiBBc3NpZ25zIGEgbmV3IGFkZHJlc3MgdG8gYWN0IGFzIHRoZSBDT08uIE9ubHkgYXZhaWxhYmxlIHRvIHRoZSBjdXJyZW50IENPTy4KICAvLy8gQHBhcmFtIF9uZXdDT08gVGhlIGFkZHJlc3Mgb2YgdGhlIG5ldyBDT08KICAKICBmdW5jdGlvbiBzZXRDT08oYWRkcmVzcyBfbmV3Q09PKSBwdWJsaWMgb25seUNFTyB7CiAgICByZXF1aXJlKF9uZXdDT08gIT0gYWRkcmVzcygwKSk7CgogICAgY29vQWRkcmVzcyA9IF9uZXdDT087CiAgfQogIAogIAogIAogIC8qKiogQ09OU1RSVUNUT1IgKioqLwogIGZ1bmN0aW9uIENyeXB0b1N0YW1wcygpIHB1YmxpYyB7CiAgICBjZW9BZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIGNvb0FkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgcGF1c2VkID0gZmFsc2U7CiAgfQoKICAKICAKICAKICAKICAvKioqIFBVQkxJQyBGVU5DVElPTlMgKioqLwogIC8vLyBAbm90aWNlIEdyYW50IGFub3RoZXIgYWRkcmVzcyB0aGUgcmlnaHQgdG8gdHJhbnNmZXIgc3RhbXAgdmlhIHRha2VPd25lcnNoaXAoKSBhbmQgdHJhbnNmZXJGcm9tKCkuCiAgCiAgLy8vICBjbGVhciBhbGwgYXBwcm92YWxzLgogIAogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgCiAgCiAgLy9AZGV2IHRvIHBhdXNlIGFuZCB1bnBhdXNlIHRoZSBjb250cmFjdCBpbiBlbWVyZ2VuY3kgc2l0dWF0aW9ucwogIGZ1bmN0aW9uIHBhdXNlY29udHJhY3QoKSBwdWJsaWMgb25seUNMZXZlbAogIHsKICAgICAgcGF1c2VkID0gdHJ1ZTsKICB9CiAgCiAgCiAgCiAgZnVuY3Rpb24gdW5wYXVzZWNvbnRyYWN0KCkgcHVibGljIG9ubHlDRU8KICB7CiAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICAKICB9CiAgCiAgCiAgCiAgZnVuY3Rpb24gYXBwcm92ZSgKICAgIGFkZHJlc3MgX3RvLAogICAgdWludDI1NiBfdG9rZW5JZAogICkgcHVibGljIHsKICAgIC8vIENhbGxlciBtdXN0IG93biB0b2tlbi4KICAgIHJlcXVpcmUocGF1c2VkID09IGZhbHNlKTsKICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX3Rva2VuSWQpKTsKCiAgICBzdGFtcEluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfdG87CgogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAKICAKICAvLy8gRm9yIHF1ZXJ5aW5nIGJhbGFuY2Ugb2YgYSBwYXJ0aWN1bGFyIGFjY291bnQKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmb3IgYmFsYW5jZSBxdWVyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgCiAgCiAgCiAgCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBvd25lcnNoaXBUb2tlbkNvdW50W19vd25lcl07CiAgfQoKICAKICAKICAvL0BkZXYgVG8gY3JlYXRlIGEgc3RhbXAuCiAgZnVuY3Rpb24gY3JlYXRlU3RhbXAoYWRkcmVzcyBfb3duZXIsICB1aW50MjU2IF9wcmljZSkgcHVibGljIG9ubHlDT08gewogICAgCiAgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7CiAgICBhZGRyZXNzIHN0YW1wT3duZXIgPSBfb3duZXI7CiAgICBpZiAoc3RhbXBPd25lciA9PSBhZGRyZXNzKDApKSB7CiAgICAgIHN0YW1wT3duZXIgPSBjb29BZGRyZXNzOwogICAgfQoKICAgIHJlcXVpcmUoX3ByaWNlID49IDApOwoKICAgIHN0YW1wQ3JlYXRlZENvdW50Kys7CiAgICBfY3JlYXRlU3RhbXAoIHN0YW1wT3duZXIsIF9wcmljZSk7CiAgfQoKICAKIAogIC8vQGRldiBUbyBnZXQgc3RhbXAgaW5mb3JtYXRpb24KICAKICBmdW5jdGlvbiBnZXRTdGFtcCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgIHVpbnQyNTYgYmlydGh0aW1lc3RhbXAsCiAgICB1aW50MjU2IHNlbGxpbmdQcmljZSwKICAgIGFkZHJlc3Mgb3duZXIKICApIHsKICAgIFN0YW1wIHN0b3JhZ2Ugc3RhbXAgPSBzdGFtcHNbX3Rva2VuSWRdOwogICAgYmlydGh0aW1lc3RhbXAgPSBzdGFtcC5iaXJ0aHRpbWU7CiAgICBzZWxsaW5nUHJpY2UgPSBzdGFtcEluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICBvd25lciA9IHN0YW1wSW5kZXhUb093bmVyW190b2tlbklkXTsKICB9CgogIAogIAogIAogIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIAogIAogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgCiAgCiAgCiAgCiAgZnVuY3Rpb24gbmFtZSgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIE5BTUU7CiAgfQoKICAKICAKICAvLy8gRm9yIHF1ZXJ5aW5nIG93bmVyIG9mIHN0YW1wCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgdG9rZW5JRCBmb3Igb3duZXIgaW5xdWlyeQogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgCiAgCiAgCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKQogICAgcHVibGljCiAgICB2aWV3CiAgICByZXR1cm5zIChhZGRyZXNzIG93bmVyKQogIHsKICAgIG93bmVyID0gc3RhbXBJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICB9CgogIAogIAogIC8vQGRldiBUbyBwYXlvdXQgdG8gYW4gYWRkcmVzcwogIAogIGZ1bmN0aW9uIHBheW91dChhZGRyZXNzIF90bykgcHVibGljIG9ubHlDTGV2ZWwgewogICAgX3BheW91dChfdG8pOwogIH0KICAKICAKICAKICAKICAKICAKICAvL0AgVG8gc2V0IHRoZSBjdXQgcmVjZWl2ZWQgYnkgc21hcnQgY29udHJhY3QKICB1aW50MjU2IHByaXZhdGUgY3V0OwogIAogIAogIAogIAogIGZ1bmN0aW9uIHNldGN1dCh1aW50MjU2IGN1dG93bmVyKSBvbmx5Q0VPIHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpCiAgeyAKICAgICAgY3V0ID0gY3V0b3duZXI7CiAgICAgIHJldHVybihjdXQpOwogICAgICAKICB9CgogIAogIAogIAogIAogIC8vIEFsbG93cyBzb21lb25lIHRvIHNlbmQgZXRoZXIgYW5kIG9idGFpbiB0aGUgdG9rZW4KICAKICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gc3RhbXBJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICByZXF1aXJlKHN0YW1wSW5kZXh0b2Rpc3NvbHZlZFtfdG9rZW5JZF0gPT0gZmFsc2UpOwogICAgcmVxdWlyZShwYXVzZWQgPT0gZmFsc2UpOwogICAgdWludDI1NiBzZWxsaW5nUHJpY2UgPSBzdGFtcEluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICB0b3RhbGV0aGVyc3RyYW5zYWN0ZWQgPSB0b3RhbGV0aGVyc3RyYW5zYWN0ZWQgKyBzZWxsaW5nUHJpY2U7CgogICAgLy8gTWFraW5nIHN1cmUgdG9rZW4gb3duZXIgaXMgbm90IHNlbmRpbmcgdG8gc2VsZgogICAgcmVxdWlyZShvbGRPd25lciAhPSBuZXdPd25lcik7CgogICAgLy8gU2FmZXR5IGNoZWNrIHRvIHByZXZlbnQgYWdhaW5zdCBhbiB1bmV4cGVjdGVkIDB4MCBkZWZhdWx0LgogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwobmV3T3duZXIpKTsKCiAgICAvLyBNYWtpbmcgc3VyZSBzZW50IGFtb3VudCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlbGxpbmdQcmljZQogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gc2VsbGluZ1ByaWNlKTsKCiAgICB1aW50MjU2IHBheW1lbnQgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCBjdXQpLCAxMDApKTsKICAgIHVpbnQyNTYgcHVyY2hhc2VFeGNlc3MgPSBTYWZlTWF0aC5zdWIobXNnLnZhbHVlLCBzZWxsaW5nUHJpY2UpOwoKICAgIC8vIFVwZGF0ZSBwcmljZXMKICAgIGlmIChzZWxsaW5nUHJpY2UgPCBmaXJzdFN0ZXBMaW1pdCkgewogICAgICAvLyBmaXJzdCBzdGFnZQogICAgICBzdGFtcEluZGV4VG9QcmljZVtfdG9rZW5JZF0gPSBTYWZlTWF0aC5kaXYoU2FmZU1hdGgubXVsKHNlbGxpbmdQcmljZSwgMjAwKSwgY3V0KTsKICAgIH0gCiAgICBlbHNlIHsKICAgICAgCiAgICAgIHN0YW1wSW5kZXhUb1ByaWNlW190b2tlbklkXSA9IFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbGluZ1ByaWNlLCAxMjUpLCBjdXQpOwogICAgfQoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKCiAgICAvLyBQYXkgcHJldmlvdXMgdG9rZW5Pd25lciBpZiBvd25lciBpcyBub3QgY29udHJhY3QKICAgIGlmIChvbGRPd25lciAhPSBhZGRyZXNzKHRoaXMpKSB7CiAgICAgIG9sZE93bmVyLnRyYW5zZmVyKHBheW1lbnQpOyAvLygxLTAuMDYpCiAgICB9CgogICAgVG9rZW5Tb2xkKF90b2tlbklkLCBzZWxsaW5nUHJpY2UsIHN0YW1wSW5kZXhUb1ByaWNlW190b2tlbklkXSwgb2xkT3duZXIsIG5ld093bmVyKTsKCiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHB1cmNoYXNlRXhjZXNzKTsKICB9CgogIAogIAogIAogIC8vQGRldiBUbyBnZXQgcHJpY2Ugb2YgYSBzdGFtcAogIGZ1bmN0aW9uIHByaWNlT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBwcmljZSkgewogICAgcmV0dXJuIHN0YW1wSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICB9CgogIAogIAogIC8vQGRldiBUbyBnZXQgdGhlIG5leHQgcHJpY2Ugb2YgYSBzdGFtcAogIGZ1bmN0aW9uIG5leHRwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgIHVpbnQyNTYgY3VycmVudHNlbGxpbmdQcmljZSA9IHN0YW1wSW5kZXhUb1ByaWNlW190b2tlbklkXTsKICAgIAogICAgaWYgKGN1cnJlbnRzZWxsaW5nUHJpY2UgPCBmaXJzdFN0ZXBMaW1pdCkgewogICAgICAvLyBmaXJzdCBzdGFnZQogICAgICByZXR1cm4gU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChjdXJyZW50c2VsbGluZ1ByaWNlLCAyMDApLCBjdXQpOwogICAgfSAKICAgIGVsc2UgewogICAgICAKICAgICAgcmV0dXJuIFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoY3VycmVudHNlbGxpbmdQcmljZSwgMTI1KSwgY3V0KTsKICAgIH0KICAgIAogIH0KCiAgCiAgCiAgCiAgCiAgCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAKICAKICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBTWU1CT0w7CiAgfQoKICAKICAvLy8gQG5vdGljZSBBbGxvdyBwcmUtYXBwcm92ZWQgdXNlciB0byB0YWtlIG93bmVyc2hpcCBvZiBhIHRva2VuCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIAogIAogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRkcmVzcyBvbGRPd25lciA9IHN0YW1wSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIHJlcXVpcmUocGF1c2VkID09IGZhbHNlKTsKICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CgogICAgLy8gTWFraW5nIHN1cmUgdHJhbnNmZXIgaXMgYXBwcm92ZWQKICAgIHJlcXVpcmUoX2FwcHJvdmVkKG5ld093bmVyLCBfdG9rZW5JZCkpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKICB9CgogIAogIAogIAogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBvd25lciBvZiB0aGUgc3RhbXAKICAvLy8gQGRldiBUaGlzIG1ldGhvZCBNVVNUIE5FVkVSIGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBjb2RlLiBGaXJzdCwgaXQncyBmYWlybHkKICAvLy8gIGV4cGVuc2l2ZSAoaXQgd2Fsa3MgdGhlIGVudGlyZSBTdGFtcHMgYXJyYXkgbG9va2luZyBmb3Igc3RhbXBzIGJlbG9uZ2luZyB0byBvd25lciksCiAgLy8vICBidXQgaXQgYWxzbyByZXR1cm5zIGEgZHluYW1pYyBhcnJheSwgd2hpY2ggaXMgb25seSBzdXBwb3J0ZWQgZm9yIHdlYjMgY2FsbHMsIGFuZAogIC8vLyAgbm90IGNvbnRyYWN0LXRvLWNvbnRyYWN0IGNhbGxzLgogIAogIAogIAogIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnModWludDI1NltdIG93bmVyVG9rZW5zKSB7CiAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgIGlmICh0b2tlbkNvdW50ID09IDApIHsKICAgICAgICAvLyBSZXR1cm4gYW4gZW1wdHkgYXJyYXkKICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgIHVpbnQyNTYgdG90YWxTdGFtcHMgPSB0b3RhbFN1cHBseSgpOwogICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKCiAgICAgIHVpbnQyNTYgc3RhbXBJZDsKICAgICAgZm9yIChzdGFtcElkID0gMDsgc3RhbXBJZCA8PSB0b3RhbFN0YW1wczsgc3RhbXBJZCsrKSB7CiAgICAgICAgaWYgKHN0YW1wSW5kZXhUb093bmVyW3N0YW1wSWRdID09IF9vd25lcikgewogICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IHN0YW1wSWQ7CiAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0KCiAgCiAgCiAgLy8vIEZvciBxdWVyeWluZyB0b3RhbFN1cHBseSBvZiB0b2tlbgogIC8vLyBAZGV2IFJlcXVpcmVkIGZvciBFUkMtNzIxIGNvbXBsaWFuY2UuCiAgCiAgCiAgCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKSB7CiAgICByZXR1cm4gc3RhbXBzLmxlbmd0aDsKICB9CgogIC8vLyBPd25lciBpbml0YXRlcyB0aGUgdHJhbnNmZXIgb2YgdGhlIHRva2VuIHRvIGFub3RoZXIgYWNjb3VudAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgdG8uCiAgLy8vIEBwYXJhbSBfdG9rZW5JZCBUaGUgSUQgb2YgdGhlIFRva2VuIHRoYXQgY2FuIGJlIHRyYW5zZmVycmVkIGlmIHRoaXMgY2FsbCBzdWNjZWVkcy4KICAvLy8gQGRldiBSZXF1aXJlZCBmb3IgRVJDLTcyMSBjb21wbGlhbmNlLgogIAogIAogIAogIGZ1bmN0aW9uIHRyYW5zZmVyKAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CiAgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7CgogICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLy8vIFRoaXJkLXBhcnR5IGluaXRpYXRlcyB0cmFuc2ZlciBvZiB0b2tlbiBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIGZvciB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQgZnJvbS4KICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBmb3IgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkIHRvLgogIC8vLyBAcGFyYW0gX3Rva2VuSWQgVGhlIElEIG9mIHRoZSBUb2tlbiB0aGF0IGNhbiBiZSB0cmFuc2ZlcnJlZCBpZiB0aGlzIGNhbGwgc3VjY2VlZHMuCiAgLy8vIEBkZXYgUmVxdWlyZWQgZm9yIEVSQy03MjEgY29tcGxpYW5jZS4KICAKICAKICAKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oCiAgICBhZGRyZXNzIF9mcm9tLAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FwcHJvdmVkKF90bywgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwoKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQogIAogIAogIC8vQGRldiBUbyBzZXQgdGhlIG51bWJlciBpbiB3aGljaCB0aGUgc3RhbXAgZ2V0cyBkaXNzb2x2ZWQgaW50by4KICB1aW50MjU2IHByaXZhdGUgbnVtOwogIAogIAogIAogIGZ1bmN0aW9uIHNldG51bWJlcih1aW50MjU2IG51bWJlcikgb25seUNFTyBwdWJsaWMgcmV0dXJucyh1aW50MjU2KQogIHsKICAgICAgbnVtID0gbnVtYmVyOwogICAgICByZXR1cm4gbnVtOwogIH0KICAKICAKICAvL0BkZXYgVG8gc2V0IHRoZSBwcmljZSBhdCB3aGljaCBkaXNzb2x1dGlvbiBzdGFydHMuCiAgIHVpbnQyNTYgcHJpdmF0ZSBwcmljZWF0ZGlzc29sdXRpb247CiAgCiAgCiAgCiAgZnVuY3Rpb24gc2V0ZGlzc29sdmVwcmljZSh1aW50MjU2IG51bWJlcikgb25seUNFTyBwdWJsaWMgcmV0dXJucyh1aW50MjU2KQogIHsKICAgICAgcHJpY2VhdGRpc3NvbHV0aW9uID0gbnVtYmVyOwogICAgICByZXR1cm4gcHJpY2VhdGRpc3NvbHV0aW9uOwogIH0KICAKICAKICAvL0AgVG8gc2V0IHRoZSBhZGRyZXNzIHRvIHdoaWNoIGRpc3NvbHZlZCBzdGFtcCBpcyBzZW50LgogIGFkZHJlc3MgcHJpdmF0ZSBhZGRyZXNzYXRkaXNzb2x1dGlvbjsKICAKICAKICAKICBmdW5jdGlvbiBzZXRkaXNzb2x2ZWFkZHJlc3MoYWRkcmVzcyBkaXNzb2x2ZWFkZHJlc3MpIG9ubHlDRU8gcHVibGljIHJldHVybnMoYWRkcmVzcykKICB7CiAgICAgIGFkZHJlc3NhdGRpc3NvbHV0aW9uID0gZGlzc29sdmVhZGRyZXNzOwogICAgICByZXR1cm4gYWRkcmVzc2F0ZGlzc29sdXRpb247CiAgfQogIAogIAogIC8vQGRldiBmb3IgZW1lcmdlbmN5IHB1cnBvc2VzCiAgZnVuY3Rpb24gY29udHJvbHN0YW1wZGlzc29sdXRpb24oYm9vbCBjb250cm9sLHVpbnQyNTYgX3Rva2VuSWQpIG9ubHlDRU8gcHVibGljCiAgewogICAgICBzdGFtcEluZGV4dG9kaXNzb2x2ZWRbX3Rva2VuSWRdID0gY29udHJvbDsKICAgICAgCiAgfQogIAogIAogIC8vQGRldiBEaXNzb2x2ZSBmdW5jdGlvbiB3aGljaCBtaW5lcyBuZXcgc3RhbXBzLgogIGZ1bmN0aW9uIGRpc3NvbHZlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYwogIHsgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7CiAgICAgIHJlcXVpcmUoc3RhbXBJbmRleFRvT3duZXJbX3Rva2VuSWRdID09IG1zZy5zZW5kZXIpOwogICAgICByZXF1aXJlKHByaWNlT2YoX3Rva2VuSWQpPj0gcHJpY2VhdGRpc3NvbHV0aW9uICk7CiAgICAgIHJlcXVpcmUoc3RhbXBJbmRleHRvZGlzc29sdmVkW190b2tlbklkXSA9PSBmYWxzZSk7CiAgICAgIGFkZHJlc3MgcmVjaWV2ZXIgPSBzdGFtcEluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgICAgIAogICAgICB1aW50MjU2IHByaWNlID0gcHJpY2VPZihfdG9rZW5JZCk7CiAgICAgIHVpbnQyNTYgbmV3cHJpY2UgPSBTYWZlTWF0aC5kaXYocHJpY2UsbnVtKTsKICAgICAgCiAgICAgIGFwcHJvdmUoYWRkcmVzc2F0ZGlzc29sdXRpb24sIF90b2tlbklkKTsKICAgICAgdHJhbnNmZXIoYWRkcmVzc2F0ZGlzc29sdXRpb24sX3Rva2VuSWQpOwogICAgICBzdGFtcEluZGV4dG9kaXNzb2x2ZWRbX3Rva2VuSWRdID0gdHJ1ZTsKICAgICAgCiAgICAgIHVpbnQyNTYgaTsKICAgICAgZm9yKGkgPSAwOyBpPG51bTsgaSsrKQogICAgICB7CiAgICAgIF9jcmVhdGVTdGFtcCggcmVjaWV2ZXIsIG5ld3ByaWNlKTsKICAgICAgICAgIAogICAgICB9CiAgICAgIERpc3NvbHZlZChtc2cuc2VuZGVyLF90b2tlbklkKTsKICAgIAogIH0KICAKIC8vQGRldiBUaGUgY29udHJhY3Qgd2hpY2ggaXMgdXNlZCB0byBpbnRlcmFjdCB3aXRoIGRpc3NvbHZlZCBzdGFtcHMuCiBhZGRyZXNzIHByaXZhdGUgZGlzc29sdmVkY29udHJhY3Q7IAogCiAKIAogCiAvKioqIFBVQkxJQyBGVU5DVElPTlMgRk9SIERJU1NPTFZFRCBTVEFNUFMgKioqLwogCiAKIGZ1bmN0aW9uIHNldGRpc3NvbHZlZGNvbnRyYWN0KGFkZHJlc3MgZGlzc29sdmVkYWRkcmVzcykgb25seUNFTyBwdWJsaWMgcmV0dXJucyhhZGRyZXNzKQogewogICAgIAogICAgIGRpc3NvbHZlZGNvbnRyYWN0ID0gZGlzc29sdmVkYWRkcmVzczsKICAgICByZXR1cm4gZGlzc29sdmVkY29udHJhY3Q7CiB9CiAKIC8vQGRldiBUbyB0cmFuc2ZlciBkaXNzb2x2ZWQgc3RhbXAuIFJlcXVpcmVzIHRoZSBjb250cmFjdCBhc3NpZ25lZCBmb3IgZGlzc29sdXRpb24gbWFuYWdlbWVudCB0byBzZW5kIG1lc3NhZ2UuCiBmdW5jdGlvbiB0cmFuc2ZlcmRpc3NvbHZlZEZyb20oCiAgICBhZGRyZXNzIF9mcm9tLAogICAgYWRkcmVzcyBfdG8sCiAgICB1aW50MjU2IF90b2tlbklkCiAgKSBwdWJsaWMgewogICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKF90bykpOwogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGRpc3NvbHZlZGNvbnRyYWN0KTsKCiAgICBfdHJhbnNmZXJkaXNzb2x2ZWQoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KICAKICAKCgogIAogIAogIAogIAogIAogIC8qKiogUFJJVkFURSBGVU5DVElPTlMgKioqLwogIC8vLyBTYWZldHkgY2hlY2sgb24gX3RvIGFkZHJlc3MgdG8gcHJldmVudCBhZ2FpbnN0IGFuIHVuZXhwZWN0ZWQgMHgwIGRlZmF1bHQuCiAgZnVuY3Rpb24gX2FkZHJlc3NOb3ROdWxsKGFkZHJlc3MgX3RvKSBwcml2YXRlIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIF90byAhPSBhZGRyZXNzKDApOwogIH0KCiAgCiAgCiAgLy8vIEZvciBjaGVja2luZyBhcHByb3ZhbCBvZiB0cmFuc2ZlciBmb3IgYWRkcmVzcyBfdG8KICAKICAKICAKICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3RhbXBJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF90bzsKICB9CgogIAogIC8vLyBGb3IgY3JlYXRpbmcgU3RhbXAKICAKICAKICBmdW5jdGlvbiBfY3JlYXRlU3RhbXAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKSBwcml2YXRlIHsKICAgIFN0YW1wIG1lbW9yeSBfc3RhbXAgPSBTdGFtcCh7CiAgICAgIGJpcnRodGltZTogbm93CiAgICB9KTsKICAgIHVpbnQyNTYgbmV3U3RhbXBJZCA9IHN0YW1wcy5wdXNoKF9zdGFtcCkgLSAxOwoKICAgIC8vIEl0J3MgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gaGFwcGVuLCA0IGJpbGxpb24gdG9rZW5zIGFyZSBBIExPVCwgYnV0CiAgICAvLyBsZXQncyBqdXN0IGJlIDEwMCUgc3VyZSB3ZSBuZXZlciBsZXQgdGhpcyBoYXBwZW4uCiAgICByZXF1aXJlKG5ld1N0YW1wSWQgPT0gdWludDI1Nih1aW50MzIobmV3U3RhbXBJZCkpKTsKCiAgICBzdGFtcEJpcnRoKG5ld1N0YW1wSWQsIF9vd25lcik7CgogICAgc3RhbXBJbmRleFRvUHJpY2VbbmV3U3RhbXBJZF0gPSBfcHJpY2U7CgogICAgLy8gVGhpcyB3aWxsIGFzc2lnbiBvd25lcnNoaXAsIGFuZCBhbHNvIGVtaXQgdGhlIFRyYW5zZmVyIGV2ZW50IGFzCiAgICAvLyBwZXIgRVJDNzIxIGRyYWZ0CiAgICBfdHJhbnNmZXIoYWRkcmVzcygwKSwgX293bmVyLCBuZXdTdGFtcElkKTsKICB9CgogIAogIAogIC8vLyBDaGVjayBmb3IgdG9rZW4gb3duZXJzaGlwCiAgCiAgCiAgCiAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBjbGFpbWFudCwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBjbGFpbWFudCA9PSBzdGFtcEluZGV4VG9Pd25lcltfdG9rZW5JZF07CiAgfQoKICAKICAKICAvLy8gRm9yIHBheWluZyBvdXQgYmFsYW5jZSBvbiBjb250cmFjdAogIAogIAogIAogIGZ1bmN0aW9uIF9wYXlvdXQoYWRkcmVzcyBfdG8pIHByaXZhdGUgewogICAgaWYgKF90byA9PSBhZGRyZXNzKDApKSB7CiAgICAgIGNlb0FkZHJlc3MudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0gZWxzZSB7CiAgICAgIF90by50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgfQogIH0KCiAgCiAgCiAgCiAgLy8vIEBkZXYgQXNzaWducyBvd25lcnNoaXAgb2YgYSBzcGVjaWZpYyBTdGFtcCB0byBhbiBhZGRyZXNzLgogIAogIAogIAogIGZ1bmN0aW9uIF90cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgIAogICAgcmVxdWlyZShwYXVzZWQgPT0gZmFsc2UpOwogICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICBzdGFtcEluZGV4dG90cmFuc2FjdGlvbnNbX3Rva2VuSWRdID0gc3RhbXBJbmRleHRvdHJhbnNhY3Rpb25zW190b2tlbklkXSArIDE7CiAgICB0b3RhbHRyYW5zYWN0aW9ucysrOwogICAgLy90cmFuc2ZlciBvd25lcnNoaXAKICAgIHN0YW1wSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKICAgIAoKICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IHN0YW1wcyBfZnJvbSBpcyAweDAsIGJ1dCB3ZSBjYW4ndCBhY2NvdW50IHRoYXQgYWRkcmVzcy4KICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX2Zyb21dLS07CiAgICAgIC8vIGNsZWFyIGFueSBwcmV2aW91c2x5IGFwcHJvdmVkIG93bmVyc2hpcCBleGNoYW5nZQogICAgICBkZWxldGUgc3RhbXBJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KICAKICAKICAKLyoqKiBQUklWQVRFIEZVTkNUSU9OUyBGT1IgRElTU09MVkVEIFNUQU1QUyoqKi8gIAogIAogIAogIAogIC8vQCBUbyB0cmFuc2ZlciBhIGRpc3NvbHZlZCBzdGFtcC4KICBmdW5jdGlvbiBfdHJhbnNmZXJkaXNzb2x2ZWQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgCiAgICByZXF1aXJlKHN0YW1wSW5kZXh0b2Rpc3NvbHZlZFtfdG9rZW5JZF0gPT0gdHJ1ZSk7CiAgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7CiAgICBvd25lcnNoaXBUb2tlbkNvdW50W190b10rKzsKICAgIHN0YW1wSW5kZXh0b3RyYW5zYWN0aW9uc1tfdG9rZW5JZF0gPSBzdGFtcEluZGV4dG90cmFuc2FjdGlvbnNbX3Rva2VuSWRdICsgMTsKICAgIC8vdHJhbnNmZXIgb3duZXJzaGlwCiAgICBzdGFtcEluZGV4VG9Pd25lcltfdG9rZW5JZF0gPSBfdG87CiAgICB0b3RhbHRyYW5zYWN0aW9ucysrOwogICAgCgogICAgLy8gV2hlbiBjcmVhdGluZyBuZXcgc3RhbXAgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICBpZiAoX2Zyb20gIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lcnNoaXBUb2tlbkNvdW50W19mcm9tXS0tOwogICAgICAvLyBjbGVhciBhbnkgcHJldmlvdXNseSBhcHByb3ZlZCBvd25lcnNoaXAgZXhjaGFuZ2UKICAgICAgCiAgICB9CgogICAgLy8gRW1pdCB0aGUgdHJhbnNmZXIgZXZlbnQuCiAgICBUcmFuc2ZlckRpc3NvbHZlZChfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQogIAogIAogIAp9CgoKCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3Vic3RyYWN0cyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93IChpLmUuIGlmIHN1YnRyYWhlbmQgaXMgZ3JlYXRlciB0aGFuIG1pbnVlbmQpLgogICovCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFkZHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9'.
	

]
