Class {
	#name : #SRTe2e5d0e1422e927abab19ad2067f802ad07fb364,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe2e5d0e1422e927abab19ad2067f802ad07fb364 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgoKLy8vIFRoaXMgaXMgdGhlIHNtYXJ0IGNvbnRyYWN0IGZvciB0aGUgTE9UVVMgVE9LRU4gTkVUV09SSyAoTFRPKQovLy8gSXQgY292ZXJzIHRoZSBkZXBsb3ltZW50IG9mIHRoZSB0aHJlZSAoMykgQ3Jvd2RzYWxlIHBlcmlvZHMKLy8vIEFzIHdlbGwgYXMgdGhlIGRpc3RyaWJ1dGlvbiBvZjoKLy8vICgxKSBDb2xsZWN0ZWQgQ3Jvd2RzYWxlIGZ1bmQKLy8vICgyKSBSZXNlcnZlZCB0b2tlbnMgZm9yIEFpcmRyb3AKLy8vICgzKSBSZXNlcnZlZCBUb2tlbiBTdXBwbHkgKDU1JSBvZiB0b3RhbCBzdXBwbHkpCi8vLyAoNCkgVW5zb2xkIHRva2VucyBkdXJpbmcgdGhlIENyb3dkc2FsZSBQZXJpb2QKCi8vLyBUb3RhbCBTdXBwbHkgaXMgOTAsMDAwLDAwMCB0b2tlbnMsIGZvciB0ZXN0IHB1cnBvc2VzIHdlIHdpbGwgdXNlIDkwLDAwMCB0b2tlbnMKLy8vIFdlJ3ZlIHNldCBhIHN0YW5kYXJkIHJhdGUgb2Y6Ci8vLyAxIEVUSCA9IDMsMDAwIHRva2VucyBvciAxIHggMTBeMTggd2VpIGZvciBJQ08gcHJpY2UKCi8vLyBEZXBsb3ltZW50czoKLy8vIEZpcnN0IHN1Y2Nlc3NmdWwgZGVwbG95bWVudCBvZiBFVEgtVG9rZW4gZXhjaGFuZ2Ugb24gMTEvMDEvMjAxNyA0QU0gR01UKzggZG9uZSBieSBEb25kaQovLy8gU2Vjb25kIHN1Y2Nlc3NmdWwgcnVuIGJhc2VkIG9uIGFwcHJvdmVkIHBhcmFtZXRlcnM6IDExLzAxLzIwMTcgMTFQTSBHTVQrOAovLy8gRG9uZSBieSBNaWNoYWVsLCBTYW0sIGFuZCBNYWhsb3J5Ci8vLwovLy8gRmluYWwgVGlja2VyIFN5bWJvbCB3aWxsIGJlIC0tIExUTyAoTG90dXMgVG9rZW4sIEluYy4pIC0tIHVubGVzcyBhbHJlYWR5IHRha2VuLgoKLy8vIENvcmUgTWVtYmVycyBhcmU6Ci8vLyBKb3NzIE1vcmVyYSAoQ29uY2VwdCBEZXNpZ25lcikgYW5kIEpvbmF0aGFuIEJhdGUgKExlYWQgQ29vcmRpbmF0b3IpCgovLy8gSW5pdGlhbCBTaGFyZWhvbGRlcnMgYXJlOgovLy8gTHVrZSBNY1dyaWdodCwgQ2xhaXJlIFpoYW5nLCBhbmQgV2FuamlhbyBOYW4KCi8vLyB0aGlzIGlzIGEgZnJlZWxhbmNlIGNvbGxhYm9yYXRpdmUgd29yayBvZiBmb3VyICg0KSBkZXZlbG9wZXJzOgovLy8gQGF1dGhvciBET05ESSBJTVBFUklBTCwgTUlDSEFFTCBERSBHVVpNQU4sIFNBTVVFTCBTRU5ET04gSUkKCi8vLyBJbml0aXRhbCBjb2RlIHJlc2VhcmNoZWQgYnkgTWljaGFlbCBvbiAxMC8yNi8yMDE3IDNQTSBHTVQgKyA4Ci8vLyBNYWpvciBjb2Rpbmcgd29ya3MgYnkgRG9uZGkKLy8vIE1pbm9yIGNvZGUgbW9kcywgdGVzdCBkZXBsb3ltZW50cyBhbmQgZGVidWdnaW5nIGJ5IFNhbXVlbAovLy8gQWRkaXRpb25hbCBEZXBsb3ltZW50IFRlc3QgYnkgTWFobG9yeQovLy8gc21hcnQgY29udHJhY3QgZGV2ZWxvcG1lbnQgY29tcGVuc2F0aW9uIGlzIGFncmVlZCBhdAovLy8gMiUgcGVyIGRldmVsb3BlciBvdXQgb2YgdGhlIGNyb3dkc2FsZSB0b2tlbiBzdXBwbHkgYW5kL29yIGZ1bmRzIHJhaXNlZAovLy8gQWxsIG90aGVyIHZhbHVlcyBhcmUgYmFzZWQgb24gQ29yZSBUZWFtIGRpc2N1c3Npb25zCgoKCi8vLyBTYWZlTWF0aCBoZWxwcyBwcm90ZWN0IGFnYWluc3QgaW50ZWdlciBvdmVyZmxvdyBvciB1bmRlcmZsb3cKY29udHJhY3QgU2FmZU1hdGggewogICAgIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgICAgcmV0dXJuIGM7CiAgICAgfQoKICAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgIH0KCiAgICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgICAgICAgcmV0dXJuIGM7CiAgICAgfQp9CgovLyBTdGFuZGFyZCB0b2tlbiBpbnRlcmZhY2UgKEVSQyAyMCkKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCmNvbnRyYWN0IFRva2VuIGlzIFNhZmVNYXRoIHsKICAgICAvLyBGdW5jdGlvbnM6CiAgICAgLy8vIEByZXR1cm4gdG90YWwgYW1vdW50IG9mIHRva2VucwoKICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CgogICAgIC8vLyBAcGFyYW0gX293bmVyIC0gVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCgogICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CgogICAgIC8vLyBAbm90aWNlIHNlbmQgX3ZhbHVlIHRva2VuIHRvIF90byBmcm9tIG1zZy5zZW5kZXIKICAgICAvLy8gQHBhcmFtIF90byAtIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAvLy8gQHBhcmFtIF92YWx1ZSAtIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKCiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sKTsKCiAgICAgLy8vIEBub3RpY2Ugc2VuZCBfdmFsdWUgdG9rZW4gdG8gX3RvIGZyb20gX2Zyb20gb24gdGhlIGNvbmRpdGlvbiBpdCBpcyBhcHByb3ZlZCBieSBfZnJvbQogICAgIC8vLyBAcGFyYW0gX2Zyb20gLSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAgLy8vIEBwYXJhbSBfdG8gLSBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgLSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CgogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwoKICAgICAvLy8gQG5vdGljZSBtc2cuc2VuZGVyIGFwcHJvdmVzIF9hZGRyIHRvIHNwZW5kIF92YWx1ZSB0b2tlbnMKICAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIC0gVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgLy8vIEBwYXJhbSBfdmFsdWUgLSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKCiAgICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgIC8vLyBAcGFyYW0gX293bmVyIC0gVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgLSBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CgogICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICAgLy8gRXZlbnRzOgogICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBTdGRUb2tlbiBpcyBUb2tlbiB7CiAgICAgLy8gRmllbGRzOgogICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICAgdWludCBwdWJsaWMgc3VwcGx5ID0gMDsgIC8vLyBpbml0aWFsaXplZCBzdXBwbHkgaXMgemVybwoKICAgICAvLyBGdW5jdGlvbnM6CiAgICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyhib29sKSB7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CiAgICAgICAgICByZXF1aXJlKGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKTsKCiAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sX3ZhbHVlKTsKICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKCiAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgogICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wpewogICAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICAgIHJlcXVpcmUoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwoKICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKICAgICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZXNbX2Zyb21dLF92YWx1ZSk7CiAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sX3ZhbHVlKTsKCiAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQoKICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gc3VwcGx5OwogICAgIH0KCiAgICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICAgfQoKICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGFwcHJvdmUoX3NwZW5kZXIsIDApIGlmIGl0IGlzIG5vdAogICAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgICAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgfQoKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgICB9Cn0KCgoKY29udHJhY3QgTG90dXNUb2tlbiBpcyBTdGRUb2tlbiB7CiAgICBzdHJ1Y3QgU2FsZSB7CiAgICAgICAgdWludCB0b2tlbkxpbWl0OwogICAgICAgIHVpbnQgdG9rZW5QcmljZUluV2VpOwogICAgICAgIHVpbnQgdG9rZW5zU29sZDsKICAgICAgICB1aW50IG1pblB1cmNoYXNlSW5XZWk7CiAgICAgICAgdWludCBtYXhQdXJjaGFzZUluV2VpOwogICAgICAgIHVpbnQgc2FsZUxpbWl0UGVyQWRkcmVzczsKICAgIH0KCiAgICBzdHJ1Y3QgU2lnbmF0b3J5IHsKICAgICAgICBhZGRyZXNzIGFjY291bnQ7CiAgICAgICAgYm9vbCBzaWduZWQ7CiAgICB9CgogICAgc3RydWN0IFNhbGVUb3RhbHMgewogICAgICAgIHVpbnQgZWFybHlBZG9wdGVyc1NvbGQ7CiAgICAgICAgdWludCBpY29PbmVTb2xkOwogICAgICAgIHVpbnQgaWNvVHdvU29sZDsKICAgIH0KCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiTG90dXMgVG9rZW4gSW5jIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkxUTyI7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFscyA9IDE4OwoKICAgIC8vLyBUaGUgYWRkcmVzcyB0aGF0IG93bnMgdGhpcyBjb250cmFjdC4KICAgIC8vLyBPbmx5IHRoaXMgYWRkcmVzcyBpcyBhbGxvd2VkIHRvIGV4ZWN1dGUgdGhlIGZ1bmN0aW9ucyB0aGF0IG1vdmUgdGhlIHNhbGUgdGhyb3VnaCBzdGFnZXMuCiAgICBhZGRyZXNzIHByaXZhdGUgb3duZXI7CgogICAgLy8vIFZlc3RpbmcgcGFyYW1ldGVycwogICAgLy8vIFZlc3RpbmcgY2xpZmYuIFRoaXMgbXVzdCBiZSBzZXQgdG8gc29tZSB0aW1lIGluIHRoZSBmdXR1cmUgdG8gYWxsb3cgZm9yIHByb3BlciB2ZXN0aW5nLgogICAgdWludCBwdWJsaWMgY2xpZmYgPSAwOwogICAgLy8vIFRpbWVzcGFuIHRvIHNjaGVkdWxlIGFsbG9jYXRpb24gb2YgdmVzdGVkIHNoYXJlcy4KICAgIHVpbnQgcHJpdmF0ZSB2ZXN0aW5nU2NoZWR1bGUgPSAzMCBkYXlzOyAvLyBUZXN0aW5nIGNvZGUgaGFzIHRoaXMgc2V0IHRvIDEgbWludXRlIGZvciB0aGUgcHJvZHVjdGlvbgogICAgLy8vIGRlcGxveSBzZXQgdGhpcyB0byAiMzAgZGF5cyIuIDwtLS0tLTw8PDw8PDw8PAoKICAgIC8vLyB3YWxsZXQgZGVjbGFyYXRpb25zIChhZGRlZCAxMS85LzIwMTcgMTozMFBNIEdNVCArIDgpIGJ5IFNhbQogICAgLy8vIHZlbnR1cmUgY2FwaXRhbGlzdHMgKHNoYXJlaG9sZGVycykKICAgIGFkZHJlc3MgcHVibGljIHZjMVdhbGxldDRQY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyB2YzJXYWxsZXQ0UGN0OwogICAgYWRkcmVzcyBwdWJsaWMgdmMzV2FsbGV0NFBjdDsKCiAgICAvLy8gY28tZm91bmRlcnMKICAgIGFkZHJlc3MgcHVibGljIGNmMVdhbGxldDJQY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyBjZjJXYWxsZXQyUGN0OwoKICAgIC8vLyBkZXYtdGVhbQogICAgYWRkcmVzcyBwdWJsaWMgZGV2MVdhbGxldDJQY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyBkZXYyV2FsbGV0MlBjdDsKICAgIGFkZHJlc3MgcHVibGljIGRldjNXYWxsZXQyUGN0OwogICAgYWRkcmVzcyBwdWJsaWMgZGV2NFdhbGxldDJQY3Q7CgogICAgLy8vIGJyYW5kaW5nCiAgICBhZGRyZXNzIHB1YmxpYyBwcmVpY29icmFuZGluZ1dhbGxldDFQY3Q7CgogICAgLy8vIG1hbmFnZW1lbnQgbXVsdGktc2lnIGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGxvdHVzV2FsbGV0NzVQY3Q7CgogICAgLy8vIGFpcmRyb3AgY29udHJhY3QgYWRkcmVzcwogICAgYWRkcmVzcyBwdWJsaWMgYWlyZHJvcFdhbGxldDVQY3Q7CgogICAgLy8vIHRva2Vuc1NvbGQgYW1vdW50IG9mIHRva2VucyBzb2xkIG9yIHRyYW5zZmVycmVkCiAgICB1aW50IHB1YmxpYyB0b2tlbnNTb2xkID0gMDsKCiAgICAvLy8gQWxsb2NhdGlvbiBvZiBjb2xsZWN0ZWQgZXRoIGZyb20gc2FsZSB0byByZXNwZWN0aXZlIHdhbGxldHMuCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgZXRoRGlzdHJpYnV0aW9uOwoKICAgIC8vLyBBbGxvY2F0aW9uIG9mIHRva2VucyBsZWZ0IG92ZXIgZnJvbSBjcm93ZHNhbGUuIE5vdGUgdGhhdCB0aGVzZSBhcmUgcmVzZXJ2ZWQgdW5kZXIgYSB2ZXN0aW5nIHNjaGVtZSBkZXNjcmliZWQgaW4gdGhlIHdoaXRlcGFwZXIuCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSB2ZXN0aW5nVG9rZW5zOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgd2l0aGRyYXduVmVzdGVkVG9rZW5zOwoKICAgIFNhbGUgcHVibGljIEVBUkxZQURPUFRFUlM7CiAgICBTYWxlIHB1YmxpYyBJQ09fT05FOwogICAgU2FsZSBwdWJsaWMgSUNPX1RXTzsKCiAgICAvLy8gUGVyIHNhbGUgc3RhZ2UgbGVkZ2VyLiBVc2VkIHRvIHRyYWNrIGFuZCBzZXQgbGltaXRzIG9uIHRva2VucyBwdXJjaGFzZWQgYnkgYW4gYWRkcmVzcyBwZXIgc2FsZSBzdGFnZS4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGVhcmx5QWRvcHRlcnNBZGRyZXNzUHVyY2hhc2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgaWNvT25lQWRkcmVzc1B1cmNoYXNlZDsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGljb1R3b0FkZHJlc3NQdXJjaGFzZWQ7CgogICAgZW51bSBTYWxlU3RhZ2UgeyBXYWl0aW5nLCBFYXJseUFkb3B0ZXJzLCBFYXJseUFkb3B0ZXJzQ2xvc2VkLCAgSWNvT25lLCBJY29PbmVDbG9zZWQsIEljb1R3bywgQ2xvc2VkIH0KICAgIFNhbGVTdGFnZSBjdXJyZW50U3RhZ2UgPSBTYWxlU3RhZ2UuV2FpdGluZzsKCiAgICAvLy8gdmFyIGRlY2xhcmF0aW9ucyB0byBnZXQgd2FsbGV0IGFkZHJlc3NlcyAoMTEvNy8yMDE3IDE6MzBQTSBHTVQgKyA4KSBieSBTYW0KICAgIGZ1bmN0aW9uIExvdHVzVG9rZW4oYWRkcmVzcyBfc2hhcmVob2xkZXIxQWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfc2hhcmVob2xkZXIyQWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfc2hhcmVob2xkZXIzQWNjb3VudCwKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vLyBjby1mb3VuZGVycwogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9jb3JlMUFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2NvcmUyQWNjb3VudCwKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vLyBkZXYtdGVhbQogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9kZXYxQWNjb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfZGV2MkFjY291bnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2RldjNBY2NvdW50LAogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9kZXY0QWNjb3VudCwKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vLyBicmFuZGluZwogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9icmFuZGluZ0FjY291bnQsCgogICAgICAgICAgICAgICAgICAgICAgICAvLy8gY29tcGFueSB3YWxsZXQKICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfbG90dXNUb2tlbkFjY291bnQsCgogICAgICAgICAgICAgICAgICAgICAgICAvLy8gYWlyZHJvcCBjb250cmFjdCBhZGRyZXNzCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2FpcmRyb3BDb250cmFjdEFjY291bnQKCiAgICApIHB1YmxpYyB7CiAgICAgICAgLy8vIFRoZSBvd25lciBpcyB3aG9ldmVyIGluaXRpYWxpemVkIHRoZSBjb250cmFjdC4KICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIFRvdGFsIHN1cHBseSBvZiB0b2tlbnMgaXMgZml4ZWQgYXQgdGhpcyB2YWx1ZSAoOTAwMDAwMDApLgogICAgICAgIC8vIENvbnZlcnQgdG8gdGhlIGFwcHJvcHJpYXRlIGRlY2ltYWwgcGxhY2UuCiAgICAgICAgc3VwcGx5ID0gOTAwMDAwMDAgKiAxMCAqKiBkZWNpbWFsczsKCiAgICAgICAgLy8vIENyb3dkc2FsZSBwYXJhbWV0ZXJzIHNldCBieSBTYW0gKDExLzcvMjAxNykKCiAgICAgICAgLy8vIEVBUkxZQURPUFRFUlMgdG9rZW5zIGFyZSAxMCUgb2YgdG90YWwgc3VwcGx5LgogICAgICAgIC8vLyBFQVJMWUFET1BURVJTIHZhbHVlOiAxIEVUSCBhdCA1OTk5IHRva2VucwogICAgICAgIC8vLyAxIHRva2VuID0gMSBFVEggLyA2MDAwID0gKDEwXjE4KS82MDAwCiAgICAgICAgLy8vIEVBUkxZQURPUFRFUlMgdmFsdWUgaW4gd2VpOiAxNjY2NjY2NjY2NjY2Njcgd2VpcwogICAgICAgIC8vLyBFQVJMWUFET1BURVJTIHNldCB0b2tlbnMgc29sZCB0byB6ZXJvIGF0IGNvbnRyYWN0IGNyZWF0aW9uLgogICAgICAgIC8vLyBFQVJMWUFET1BURVJTIG1pbiBwdXJjaGFzZSBpbiB3ZWk6IDIgKiAxMCAqKiAxNyBvciAwLjIgRVRIIGJ5IERvbmRpCiAgICAgICAgLy8vIEVBUkxZQURPUFRFUlMgbWF4IHB1cmNoYXNlIGluIHdlaTogMSAqIDEwICoqIDE4IG9yIDEgRVRIIGJ5IERvbmRpICh0ZXN0KQogICAgICAgIC8vLyBtYXggcHVyY2hhc2UgcGVyIHRyYW5zYWN0aW9uIGluIHdlaTogNSAqIDEwICoqIDE4ICg1IGV0aCBvbiBMSVZFKQogICAgICAgIC8vLyBFQVJMWUFET1BURVJTIG1heCBwdXJjaGFzZSBwZXIgYWRkcmVzcyBmb3IgdGVzdGluZyBwdXJwb3NlczogNTk5OSAoMSBldGhlcikKICAgICAgICAvLy8gbWF4IHB1cmNoYXNlIHBlciBhZGRyZXNzIG9uIGxpdmUgZGVwbG95bWVudDogZXF1aXZhbGVudCB0byAxMCBldGhlcnMKICAgICAgICAvLy8gTWF4IEV0aGVycyB0byByYWlzZTogMTUwMCAobGl2ZSk7IDEuNSBldGhlcnMgKHRlc3QpCiAgICAgICAgdWludCBlYXJseUFkb3B0ZXJzU3VwcGx5ID0gKHN1cHBseSAqIDEwIC8gMTAwKTsgLy8vIC0gMjAwMDAwMDAwMDAwMDAwMDAwMDsKICAgICAgICAvLyBFQVJMWUFET1BURVJTID0gU2FsZShzdXBwbHkgKiAxMCAvIDEwMCwgMTY2NjY2NjY2NjY2NjY3LCAwKTsKICAgICAgICBFQVJMWUFET1BURVJTID0gU2FsZShlYXJseUFkb3B0ZXJzU3VwcGx5LCAxNjY2NjY2NjY2NjY2NjcsIDAsIDIgKiAxMCAqKiAxNywgNSAqIDEwICoqIDE4LCA1OTk5MDAwMDAwMDAwMDAwMDAwMDAwMCk7CgogICAgICAgIC8vLyBQUkVTQUxFIHRva2VucyBhcmUgMTUlIG9mIHRvdGFsIHN1cHBseS4KICAgICAgICAvLy8gSUNPMSAoUFJFU0FMRSkgdmFsdWU6IDEgRVRIID0gMzc1MCB0b2tlbnMKICAgICAgICAvLy8gMSB0b2tlbiA9IDEvMzc1MCA9ICgxMF4xOCkvMzc1MAogICAgICAgIC8vLyBJQ08xIHZhbHVlIGluIHdlaTogMjY2NjY2NjY2NjY2NjY2IGNoYW5nZWQgZnJvbSAzMzMzMzMzMzMzMzMzMzQKICAgICAgICAvLy8gSUNPX09ORSBzZXQgdG9rZW5zIHNvbGQgdG8gemVybyBhdCBjb250cmFjdCBjcmVhdGlvbi4KICAgICAgICAvLy8gSUNPX09ORSBtaW4gcHVyY2hhc2UgaW4gd2VpOiAyICogMTAgKiogMTcgb3IgMC4yIEVUSCBieSBEb25kaQogICAgICAgIC8vLyBJQ09fT05FIG1heCBwdXJjaGFzZSBpbiB3ZWk6IDIgKiAxMCAqKiAxOCBvciAyIEVUSCBieSBEb25kaSAoVEVTVCkKICAgICAgICAvLy8gbWF4IHB1cmNoYXNlIHBlciB0cmFuc2FjdGlvbiBpbiB3ZWk6IDEwICogMTAgKiogMTggKDEwIGV0aCBvbiBMSVZFKQogICAgICAgIC8vLyBJQ09fT05FIG1heCBwdXJjaGFzZSBwZXIgYWRkcmVzcyBmb3IgdGVzdGluZyBwdXJwb3NlczogNzUwMCAoMiBldGhlcnMpCiAgICAgICAgLy8vIG1heCBwdXJjaGFzZSBwZXIgYWRkcmVzcyBvbiBsaXZlIGRlcGxveW1lbnQ6IGVxdWl2YWxlbnQgdG8gMTggZXRoZXJzIG9yCiAgICAgICAgLy8vIG1heCBldGhlcnMgdG8gcmFpc2U6IDM2MDAgKGxpdmUpOyAzLjYgKHRlc3QpCiAgICAgICAgSUNPX09ORSA9IFNhbGUoc3VwcGx5ICogMTUgLyAxMDAsIDI2NjY2NjY2NjY2NjY2NiwgMCwgMiAqIDEwICoqIDE3LCAxMCAqIDEwICoqIDE4LCA2NzUwMDAwMDAwMDAwMDAwMDAwMDAwMCk7CgogICAgICAgIC8vLyBJQ08yIChNQUlOIElDTykgdG9rZW5zIGFyZSAxNSUgb2YgdG90YWwgc3VwcGx5LgogICAgICAgIC8vLyBJQ08yIHZhbHVlOiAxIEVUSCA9IDMwMDAgdG9rZW5zIGluc3RlYWQgb2YgMjAwMAogICAgICAgIC8vLyAgMSB0b2tlbiA9IDEvMzAwMCA9ICgxMF4xOCkvMzAwMAogICAgICAgIC8vLyBJQ08yIHZhbHVlIGluIHdlaTogMzMzMzMzMzMzMzMzMzM0IGNoYW5nZWQgZnJvbSA1MDAwMDAwMDAwMDAwMDAKICAgICAgICAvLy8gSUNPX1RXTyBzZXQgdG9rZW5zIHNvbGQgdG8gemVybyBhdCBjb250cmFjdCBjcmVhdGlvbi4KICAgICAgICAvLy8gSUNPX1RXTyBtaW4gcHVyY2hhc2UgaW4gd2VpOiAyICogMTAgKiogMTcgb3IgMC4yIEVUSCBieSBEb25kaQogICAgICAgIC8vLyBJQ09fVFdPIG1heCBwdXJjaGFzZSBpbiB3ZWk6IDMgKiAxMCAqKiAxOCBvciAzIEVUSCBieSBEb25kaSAodGVzdCkKICAgICAgICAvLy8gbWF4IHB1cmNoYXNlIHBlciB0cmFuc2FjdGlvbiBpbiB3ZWk6IDIwICogMTAgKiogMTggKDIwIGV0aCBvbiBMSVZFKQogICAgICAgIC8vLyBJQ09fVFdPIG1heCBwdXJjaGFzZSBwZXIgYWRkcmVzcyBmb3IgdGVzdGluZyBwdXJwb3NlczogMTAwMDAKICAgICAgICAvLy8gbWF4IHB1cmNoYXNlIHBlciBhZGRyZXNzIG9uIGxpdmUgZGVwbG95bWVudDogZXF1aXZhbGVudCB0byAyNSBldGhlcnMgKDc1MDAwKQogICAgICAgIC8vLyBtYXggZXRoZXJzIHRvIHJhaXNlOiA0LDUwMCAobGl2ZSk7IDQuNSAodGVzdCkKICAgICAgICBJQ09fVFdPID0gU2FsZShzdXBwbHkgKiAxNSAvIDEwMCwgMzMzMzMzMzMzMzMzMzM0LCAwLCAyICogMTAgKiogMTcsIDIwICogMTAgKiogMTgsIDc1MDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKCiAgICAgICAgLy8gVGVjaG5pY2FsbHkgdGhpcyBjaGVjayBzaG91bGQgIG5vdCBiZSByZXF1aXJlZCBhcyB0aGUgbGltaXRzIGFyZSBjb21wdXRlZCBhYm92ZSBhcyBmcmFjdGlvbnMgb2YgdGhlIHRvdGFsIHN1cHBseS4KICAgICAgICByZXF1aXJlKHNhZmVBZGQoc2FmZUFkZChFQVJMWUFET1BURVJTLnRva2VuTGltaXQsIElDT19PTkUudG9rZW5MaW1pdCksIElDT19PTkUudG9rZW5MaW1pdCkgIDw9IHN1cHBseSk7CgogICAgICAgIC8vLyBGb3Igc2FmZXR5IHplcm8gb3V0IHRoZSBhbGxvY2F0aW9uIGZvciB0aGUgMCBhZGRyZXNzLgogICAgICAgIGV0aERpc3RyaWJ1dGlvblswWDBdID0gMDsKCiAgICAgICAgLy8vIHZlbnR1cmUgY2FwaXRhbGlzdAogICAgICAgIHZjMVdhbGxldDRQY3QgPSBfc2hhcmVob2xkZXIxQWNjb3VudDsKICAgICAgICB2YzJXYWxsZXQ0UGN0ID0gX3NoYXJlaG9sZGVyMkFjY291bnQ7CiAgICAgICAgdmMzV2FsbGV0NFBjdCA9IF9zaGFyZWhvbGRlcjNBY2NvdW50OwoKICAgICAgICAvLy8gY28tZm91bmRlcnMKICAgICAgICBjZjFXYWxsZXQyUGN0ID0gX2NvcmUxQWNjb3VudDsKICAgICAgICBjZjJXYWxsZXQyUGN0ID0gX2NvcmUyQWNjb3VudDsKCiAgICAgICAgLy8vIGRldi10ZWFtCiAgICAgICAgZGV2MVdhbGxldDJQY3QgPSBfZGV2MUFjY291bnQ7CiAgICAgICAgZGV2MldhbGxldDJQY3QgPSBfZGV2MkFjY291bnQ7CiAgICAgICAgZGV2M1dhbGxldDJQY3QgPSBfZGV2M0FjY291bnQ7CiAgICAgICAgZGV2NFdhbGxldDJQY3QgPSBfZGV2NEFjY291bnQ7CgogICAgICAgIC8vLyBicmFuZGluZwogICAgICAgIHByZWljb2JyYW5kaW5nV2FsbGV0MVBjdCA9IF9icmFuZGluZ0FjY291bnQ7CgogICAgICAgIGxvdHVzV2FsbGV0NzVQY3QgPSBfbG90dXNUb2tlbkFjY291bnQ7IC8vLyB0aGlzIHdpbGwgZ28gdG8gdGhlIGNvbXBhbnkgY29udHJvbGxlZCBtdWx0aS1zaWcgd2FsbGV0CiAgICAgICAgLy8vIHRoaXMgcmVwbGFjZWQgYWRtaW5XYWxsZXQsIHBvc3RpY29zZFdhbGxldCwgbWt0Z1dhbGxldCwgbGVnYWxXYWxsZXQsIGNudGduY3lXYWxsZXQKICAgICAgICAvLy8gaXQgd2lsbCBjb250YWluIGJvdGggdGhlIDc1JSBvZiBFVEhzIGNvbGxlY3RlZCB2aWEgY3Jvd2RzYWxlCiAgICAgICAgLy8vIGl0IHdpbGwgYWxzbyBjb250YWluIHRoZSB1bnNvbGQgdG9rZW5zIHZpYSB0aGUgY3Jvd2RzYWxlIHBlcmlvZHMKICAgICAgICAvLy8gaXQgd2lsbCBhbHNvIGNvbnRhaW4gdGhlIDU1JSB0b2tlbnMgZnJvbSB0b3RhbCBzdXBwbHkKCiAgICAgICAgYWlyZHJvcFdhbGxldDVQY3QgPSBfYWlyZHJvcENvbnRyYWN0QWNjb3VudDsgLy8vIGFpcmRyb3Agd2FsbGV0IGNvbnRyYWN0CiAgICB9CgogICAgLy8vIG1vZGlmaWVyIGNvZGVkIGJ5IERvbmRpCiAgICBtb2RpZmllciBtdXN0QmVTZWxsaW5nIHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycyB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb09uZSB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3byk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvd25lck9ubHkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBmdW5jdGlvbiBjb2RlZCBieSBEb25kaQogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgbXVzdEJlU2VsbGluZyB7CiAgICAgICAgLy8gTXVzdCBoYXZlIHNlbnQgc29tZSBldGhlci4KICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwoKICAgICAgICAvLyBNdXN0IGJlIHB1cmNoYXNpbmcgYXQgbGVhc3QgdGhlIG1pbiBhbGxvd2VkIGFuZCBub3QgbW9yZSB0aGFuIHRoZSBtYXggYWxsb3dlZCBFVEguCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gY3VycmVudE1pblB1cmNoYXNlKCkgJiYgbXNnLnZhbHVlIDw9IGN1cnJlbnRNYXhQdXJjaGFzZSgpKTsKCgogICAgICAgIC8vIFRoZSBwcmljZSBhdCB0aGUgY3VycmVudCBzYWxlIHN0YWdlLgogICAgICAgIHVpbnQgcHJpY2VOb3cgPSBjdXJyZW50U2FsZVByaWNlSW5XZWkoKTsKICAgICAgICAvLyBUaGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBmb3Igc2FsZSBhdCB0aGlzIHN0YWdlCiAgICAgICAgdWludCBjdXJyZW50TGltaXQgPSBjdXJyZW50U2FsZUxpbWl0KCk7CiAgICAgICAgLy8gVGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBoYXZlIGJlZW4gc29sZCBhdCB0aGlzIHNhbGUgc3RhZ2UuCiAgICAgICAgdWludCBjdXJyZW50U29sZCA9IGN1cnJlbnRTYWxlU29sZCgpOwogICAgICAgIC8vIFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYSBzaW5nbGUgYWRkcmVzcyBjYW4gcHVyY2hhc2UgYXQgdGhpcyBzYWxlIHN0YWdlLgogICAgICAgIHVpbnQgY3VycmVudExpbWl0UGVyQWRkcmVzcyA9IGN1cnJlbnRTYWxlTGltaXRQZXJBZGRyZXNzKCk7CiAgICAgICAgLy8gVGhlIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMgYWxyZWFkeSBwdXJjaGFzZWQgYnkgdGhlIGN1cnJlbnQgYnV5ZXIuCiAgICAgICAgdWludCBjdXJyZW50U3RhZ2VUb2tlbnNCb3VnaHQgPSBjdXJyZW50U3RhZ2VUb2tlbnNCb3VnaHRCeUFkZHJlc3MoKTsKCiAgICAgICAgLy8gQ29udmVydCBtc2cudmFsdWUgaW50byB3ZWkgKGxpbmUgYWRkZWQgMTEvMS8yMDE3IDExUE0pCiAgICAgICAgdWludCBwcmljZUluV2VpID0gbXNnLnZhbHVlOwoKICAgICAgICAvLyBjaGFuZ2UgbnVtZXJhdG9yIGZyb20gbXNnLnZhbHVlIGludG8gcHJpY2VJbldlaSAxMS8wMS8yMDE3IDExUE0KICAgICAgICB1aW50IHRva2Vuc0F0UHJpY2UgPSAocHJpY2VJbldlaSAvIHByaWNlTm93KSAqIDEwICoqIGRlY2ltYWxzOyAgICAgLy8gdG90YWwgdG9rZW4gZXF1aXZhbGVudCBvZiBjb250cmlidXRlZCBFVEgKCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBwYXltZW50IGRvZXMgbm90IGV4Y2VlZCB0aGUgc3VwcGx5ICgxMS81LzIwMTcgMTBBTSkKICAgICAgICAvLyAgYmFja2VyIHdpdGggZXhhY3QgRVRIIHNlbnQgZXF1aXZhbGVudCB0byBzdXBwbHkgbGVmdCB3aWxsIGdldCBhY2NlcHRlZAogICAgICAgIHJlcXVpcmUodG9rZW5zQXRQcmljZSArIGN1cnJlbnRTb2xkIDw9IGN1cnJlbnRMaW1pdCk7CgogICAgICAgIC8vIEJ1eWVyIGNhbid0IGV4Y2VlZCB0aGUgcGVyIGFkZHJlc3MgbGltaXQKICAgICAgICByZXF1aXJlKHRva2Vuc0F0UHJpY2UgKyBjdXJyZW50U3RhZ2VUb2tlbnNCb3VnaHQgPD0gY3VycmVudExpbWl0UGVyQWRkcmVzcyk7CgogICAgICAgIC8vIHJlbW92ZSBjb25kaXRpb25hbCBzdGF0ZW1lbnRzIGFuZCBwcm9jZWVkIHdpdGggY3JlZGl0IG9mIHRva2VucyB0byBiYWNrZXIgKDExLzUvMjAxNyAxMEFNKQogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgdG9rZW5zQXRQcmljZSk7ICAvLy8gc2VuZCB0b2tlbnMKICAgICAgICB0b2tlbnNTb2xkID0gc2FmZUFkZCh0b2tlbnNTb2xkLCB0b2tlbnNBdFByaWNlKTsgLy8vIFVwZGF0ZSB0b3RhbCB0b2tlbiBzb2xkCgogICAgICAgIC8vIFVwZGF0ZSB0b2tlbnMgc29sZCBmb3IgY3VycmVudCBzYWxlLgogICAgICAgIF9hZGRUb2tlbnNTb2xkVG9DdXJyZW50U2FsZSh0b2tlbnNBdFByaWNlKTsKCiAgICAgICAgLy8gRGlzdHJpYnV0ZSBldGhlciBhcyBpdCBhcnJpdmVzLgogICAgICAgIGRpc3RyaWJ1dGVDb2xsZWN0ZWRFdGhlcigpOwoKICAgICAgICAvLyBTaG93IHRyYW5zYWN0aW9uIGRldGFpbHMgb24gYmxvY2tjaGFpbiBleHBsb3JlcgogICAgICAgIFRyYW5zZmVyKHRoaXMsIG1zZy5zZW5kZXIsIHRva2Vuc0F0UHJpY2UpOwogICAgfQoKICAgIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGZ1bmQgY29sbGVjdGlvbiB3YWxsZXRzCiAgICAvLyBvdmVycmlkZSB0byBjcmVhdGUgY3VzdG9tIGZ1bmQgZm9yd2FyZGluZyBtZWNoYW5pc21zCiAgICAvLyB0YWtlbiBmcm9tIE9wZW5aZXBwZWxpbiwgYWRkZWQgMTEvNy8yMDE3IDEwQU0KICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVDb2xsZWN0ZWRFdGhlcigpIGludGVybmFsIHsKCiAgICAvKioKICAgIC8vLyBOb3ZlbWJlciA5LCAyMDE3CiAgICAvLy8gRGlzdHJpYnV0aW9uIGRldGFpbHM6IFRvdGFsU3VwcGx5ID0gOU0gdG9rZW5zCiAgICAvLy8gZWFjaCBjb3JlIG1lbWJlciByZWNlaXZlcyAuOSUgZnJvbSBUb3RhbFN1cHBseSAoOU0gKiA5IC8gMTAwMCkKICAgIC8vLyBleGNlcHQgZm9yIGJyYW5kaW5nLCB3aGljaCBnZXRzIC40NSUgKDlNICogNDUgLyAxMDAwMCkKICAgIC8vLyBzZWVkIGZ1bmQgdmVudHVyZSBjYXBpdGFsaXN0IHJlY2VpdmVzIDEuOCUgZWFjaCBtdWx0aXBsaWVkIGJ5IDMgcGVyc29ucyAoOU0gKiAxOCAvIDEwMDApCiAgICAvLy8gSW4gQ3Jvd2RzYWxlIHZhbHVlcyAod2hpY2ggaXMgNDUlIG9mIHRoZSBUb3RhbFN1cHBseSksIHRoaXMgZGl2aWRlcyB0aGUgZnVuZHMgaW50bzoKICAgIC8vLyAyNSUgZm9yIGFsbCBjb3JlIG1lbWJlcnMgYW5kIHNoYXJlaG9sZGVycyAoMTAgaW5kaXZpZHVhbHMpCiAgICAvLy8gYW5kIDc1JSB0byBMb3R1cyBQb3N0IElDTyBNYW5hZ2VtZW50CiAgICAqKi8KCiAgICAvLy8gQWxsb2NhdGUgZXRoIHRvIHRoZSBhcHByb3ByaWF0ZSBhY2NvdW50cy4KICAgIC8vLyBUbyB0cmFuc2ZlciB0aGUgc2hhcmUgb2YgdGhlIGNvbGxlY3RlZCBFVEgsIGFjY291bnRzIG5lZWQgdG8gY2FsbCB0aGUgJ3dpdGhkcmF3IGFsbG9jYXRpb24nIGZ1bmN0aW9uIGZyb20gdGhlIGFkZHJlc3NlcyBwYXNzZWQgdG8gdGhpcyBjb250cmFjdCBkdXJpbmcgZGVwbG95bWVudC4KICAgIC8vLyBOb3RlIHRoYXQgZHVlIHRvIHRoZSBpbXBsZW1lbnRhdGlvbiBiZWxvdyBpdCBpcyBub3QgcG9zc2libGUgdG8gdXNlIHRoZSBzYW1lIGFkZHJlc3MgZm9yIG11bHRpcGxlIHJlY2lwaWVudHMuIElmIHRoZSBzYW1lIGFkZHJlc3MgaXMgdXNlZCB0d2ljZSBvciBtb3JlLCBvbmx5IHRoZSBsYXN0IGFsbG9jYXRpb24gd2lsbCBhcHBseS4KCiAgICAvLy8gVE9ETzogVXBkYXRlIHRoZSBDcm93ZHNhbGUgRnVuZCBkaXZpc2lvbiAoMTEvOS8yMDE3KQogICAgLy8vIExpbmVzIDM2MSB0byAzOTIgdXBkYXRlZCBvbiAxMS85LzIwMTcgYnkgU2FtCiAgICAvLy8gc2hhcmVob2xkZXJzIGVhY2ggZ2V0IDQlIG9mIHRoZSBDcm93ZHNhbGUgRnVuZAogICAgICAgIGV0aERpc3RyaWJ1dGlvblt2YzFXYWxsZXQ0UGN0XSA9IHNhZmVBZGQoZXRoRGlzdHJpYnV0aW9uW3ZjMVdhbGxldDRQY3RdLCBtc2cudmFsdWUgKiA0IC8gMTAwKTsKICAgICAgICBldGhEaXN0cmlidXRpb25bdmMyV2FsbGV0NFBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvblt2YzJXYWxsZXQ0UGN0XSwgbXNnLnZhbHVlICogNCAvIDEwMCk7CiAgICAgICAgZXRoRGlzdHJpYnV0aW9uW3ZjM1dhbGxldDRQY3RdID0gc2FmZUFkZChldGhEaXN0cmlidXRpb25bdmMzV2FsbGV0NFBjdF0sIG1zZy52YWx1ZSAqIDQgLyAxMDApOwoKICAgIC8vLyBjby1mb3VuZGVycyBlYWNoIGdldCAyJSBvZiB0aGUgQ3Jvd2RzYWxlIEZ1bmQKICAgICAgICBldGhEaXN0cmlidXRpb25bY2YxV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvbltjZjFXYWxsZXQyUGN0XSwgbXNnLnZhbHVlICogMiAvIDEwMCk7CiAgICAgICAgZXRoRGlzdHJpYnV0aW9uW2NmMldhbGxldDJQY3RdID0gc2FmZUFkZChldGhEaXN0cmlidXRpb25bY2YyV2FsbGV0MlBjdF0sIG1zZy52YWx1ZSAqIDIgLyAxMDApOwoKICAgIC8vLyBkZXYtdGVhbSBtZW1iZXJzIGVhY2ggZ2V0IDIlIG9mIHRoZSBDcm93ZHNhbGUgRnVuZAogICAgICAgIGV0aERpc3RyaWJ1dGlvbltkZXYxV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvbltkZXYxV2FsbGV0MlBjdF0sIG1zZy52YWx1ZSAqIDIgLyAxMDApOwogICAgICAgIGV0aERpc3RyaWJ1dGlvbltkZXYzV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvbltkZXYzV2FsbGV0MlBjdF0sIG1zZy52YWx1ZSAqIDIgLyAxMDApOwogICAgICAgIGV0aERpc3RyaWJ1dGlvbltkZXYyV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvbltkZXYyV2FsbGV0MlBjdF0sIG1zZy52YWx1ZSAqIDIgLyAxMDApOwogICAgICAgIGV0aERpc3RyaWJ1dGlvbltkZXY0V2FsbGV0MlBjdF0gPSBzYWZlQWRkKGV0aERpc3RyaWJ1dGlvbltkZXY0V2FsbGV0MlBjdF0sIG1zZy52YWx1ZSAqIDIgLyAxMDApOwoKICAgIC8vLyBicmFuZGluZyBkZXZlbG9wZXIgZ2V0cyAxJSBvZiB0aGUgQ3Jvd2RzYWxlIEZ1bmQKICAgICAgICBldGhEaXN0cmlidXRpb25bcHJlaWNvYnJhbmRpbmdXYWxsZXQxUGN0XSA9IHNhZmVBZGQoZXRoRGlzdHJpYnV0aW9uW3ByZWljb2JyYW5kaW5nV2FsbGV0MVBjdF0sIG1zZy52YWx1ZSAqIDEgLyAxMDApOwoKICAgIC8vLyBtYW5hZ2VtZW50IG11bHRpLXNpZyBhZGRyZXNzIGdldHMgNzUlIG9mIENyb3dkc2FsZSBGdW5kCiAgICAgICAgZXRoRGlzdHJpYnV0aW9uW2xvdHVzV2FsbGV0NzVQY3RdID0gc2FmZUFkZChldGhEaXN0cmlidXRpb25bbG90dXNXYWxsZXQ3NVBjdF0sIG1zZy52YWx1ZSAqIDc1IC8gMTAwKTsKICAgIH0KCiAgICAvLy8gRGlzdHJpYnV0ZSB0aGUgdG9rZW5zIGxlZnQgYWZ0ZXIgdGhlIGNyb3dkc2FsZSB0byB0aGUgcHJlLWFncmVlZCBhY2NvdW50cwogICAgZnVuY3Rpb24gZGlzdHJpYnV0ZVJlbWFpbmluZ1Rva2VucygpIGludGVybmFsIG93bmVyT25seSB7CiAgICAgICAgLy8vIEBkZXYgdG8gc2FtOiBSZW1haW5pbmcgdG9rZW5zIGFyZSBkaXN0cmlidXRlZCBoZXJlLiAoMTEvOC8yMDE3KQogICAgICAgIHVpbnQgY3Jvd2RzYWxlU3VwcGx5ID0gc3VwcGx5ICogNDAgLyAxMDA7CiAgICAgICAgdWludCB1bnNvbGRUb2tlbnMgPSBjcm93ZHNhbGVTdXBwbHkgLSB0b2tlbnNTb2xkOwoKICAgICAgICAvLyBsaW5lcyA0MDAgdG8gNDUwIHVwZGF0ZWQgb24gMTEvOS8yMDE3IGJ5IFNhbQogICAgICAgIC8vIExvdHVzIFdhbGxldCBnZXRzIDc1JSBvZiB0aGUgdW5zb2xkVG9rZW5zCiAgICAgICAgYmFsYW5jZXNbbG90dXNXYWxsZXQ3NVBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2xvdHVzV2FsbGV0NzVQY3RdLCB1bnNvbGRUb2tlbnMgKiA3NSAvIDEwMCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgbG90dXNXYWxsZXQ3NVBjdCwgdW5zb2xkVG9rZW5zICogNzUgLyAxMDApOwoKICAgICAgICAvLyBTaGFyZWhvbGRlcnMgZ2V0IDQlIGVhY2ggKHgzKSBvZiB0aGUgdW5zb2xkVG9rZW5zLCBDb3JlIFRlYW0gKENUKSBnZXRzIDIlIGVhY2ggKHg2KSBhbmQgQnJhbmRpbmcgZ2V0cyAxJQogICAgICAgIC8vIFRvdGFsOiAyNSUgb2YgdW5zb2xkVG9rZW5zCiAgICAgICAgLy8gT25seSAyNSUgb2YgdGhlIGFjdHVhbCBhbGxvY2F0aW9ucyBhcmUgaW1tZWRpYXRlbHkgdHJhbnNmZXJyZWQgdG8gdGhlIHJlY2lwaWVudHMsIHRoZSByZXN0IGFyZSBsZWZ0IG92ZXIgZm9yIHZlc3RpbmcuCiAgICAgICAgLy8gVGhlIHJlbWFpbmluZyB0b2tlbnMgKDc1JSkgYXJlIHJlc2VydmVkIGZvciB2ZXN0aW5nIGFuZCBhcmUgdHJhbnNmZXJyZWQgdG8gdGhlIExvdHVzIFRva2VuIEluYyB3YWxsZXQgY29udHJhY3QgYWRkcmVzcy4KICAgICAgICAvLyBTaGFyZWhvbGRlciAxOiBMdWtlIE1jV3JpZ2h0CiAgICAgICAgYmFsYW5jZXNbdmMxV2FsbGV0NFBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW3ZjMVdhbGxldDRQY3RdLCAgdW5zb2xkVG9rZW5zICogNCAvIDEwMCAqIDI1IC8gMTAwKTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCB2YzFXYWxsZXQ0UGN0LCB1bnNvbGRUb2tlbnMgKiA0IC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIC8vIFZlc3RpbmcKICAgICAgICB2ZXN0aW5nVG9rZW5zW3ZjMVdhbGxldDRQY3RdID0gc2FmZUFkZCh2ZXN0aW5nVG9rZW5zW3ZjMVdhbGxldDRQY3RdLCB1bnNvbGRUb2tlbnMgKiA0IC8gMTAwICogNzUgLyAxMDApOwoKICAgICAgICAvLyBTaGFyZWhvbGRlciAyOiBDbGFpcmUgWmhhbmcKICAgICAgICBiYWxhbmNlc1t2YzJXYWxsZXQ0UGN0XSA9IHNhZmVBZGQoYmFsYW5jZXNbdmMyV2FsbGV0NFBjdF0sIHVuc29sZFRva2VucyAqIDQgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgdmMyV2FsbGV0NFBjdCwgdW5zb2xkVG9rZW5zICogNCAvIDEwMCAqIDI1IC8gMTAwKTsKICAgICAgICAvLyBWZXN0aW5nCiAgICAgICAgdmVzdGluZ1Rva2Vuc1t2YzJXYWxsZXQ0UGN0XSA9IHNhZmVBZGQodmVzdGluZ1Rva2Vuc1t2YzJXYWxsZXQ0UGN0XSwgdW5zb2xkVG9rZW5zICogNCAvIDEwMCAqIDc1IC8gMTAwKTsKCiAgICAgICAgLy8gU2hhcmVob2xkZXIgMzogV2FuIEppYW8gTmFuCiAgICAgICAgYmFsYW5jZXNbdmMzV2FsbGV0NFBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW3ZjM1dhbGxldDRQY3RdLCB1bnNvbGRUb2tlbnMgKiA0IC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHZjM1dhbGxldDRQY3QsIHVuc29sZFRva2VucyAqIDQgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgLy8gVmVzdGluZwogICAgICAgIHZlc3RpbmdUb2tlbnNbdmMzV2FsbGV0NFBjdF0gPSBzYWZlQWRkKHZlc3RpbmdUb2tlbnNbdmMzV2FsbGV0NFBjdF0sIHVuc29sZFRva2VucyAqIDQgLyAxMDAgKiA3NSAvIDEwMCk7CgogICAgICAgIC8vIENUIENvLUZvdW5kZXIgMTogSm9zcyBNb3JlcmEKICAgICAgICBiYWxhbmNlc1tjZjFXYWxsZXQyUGN0XSA9IHNhZmVBZGQoYmFsYW5jZXNbY2YxV2FsbGV0MlBjdF0sIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgY2YxV2FsbGV0MlBjdCwgdW5zb2xkVG9rZW5zICogMiAvIDEwMCAqIDI1IC8gMTAwKTsKICAgICAgICAvLyBWZXN0aW5nCiAgICAgICAgdmVzdGluZ1Rva2Vuc1tjZjFXYWxsZXQyUGN0XSA9IHNhZmVBZGQodmVzdGluZ1Rva2Vuc1tjZjFXYWxsZXQyUGN0XSwgdW5zb2xkVG9rZW5zICogMiAvIDEwMCAqIDc1IC8gMTAwKTsKCiAgICAgICAgLy8gQ1QgQ28tRm91bmRlciAyOiBKb25hdGhhbiBCYXRlCiAgICAgICAgYmFsYW5jZXNbY2YyV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2NmMldhbGxldDJQY3RdLCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIGNmMldhbGxldDJQY3QsIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgLy8gVmVzdGluZwogICAgICAgIHZlc3RpbmdUb2tlbnNbY2YyV2FsbGV0MlBjdF0gPSBzYWZlQWRkKHZlc3RpbmdUb2tlbnNbY2YyV2FsbGV0MlBjdF0sIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiA3NSAvIDEwMCk7CgogICAgICAgIC8vIENUIERldi1UZWFtIExlYWRlciBhbmQgU29jaWFsIE1lZGlhIE1hbmFnZXI6IE1pY2hhZWwgRGUgR3V6bWFuCiAgICAgICAgYmFsYW5jZXNbZGV2MVdhbGxldDJQY3RdID0gc2FmZUFkZChiYWxhbmNlc1tkZXYxV2FsbGV0MlBjdF0sIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgZGV2MVdhbGxldDJQY3QsIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiAyNSAvIDEwMCk7CiAgICAgICAgLy8gVmVzdGluZwogICAgICAgIHZlc3RpbmdUb2tlbnNbZGV2MVdhbGxldDJQY3RdID0gc2FmZUFkZCh2ZXN0aW5nVG9rZW5zW2RldjFXYWxsZXQyUGN0XSwgdW5zb2xkVG9rZW5zICogMiAvIDEwMCAqIDc1IC8gMTAwKTsKCiAgICAgICAgLy8gQ1QgU2VuaW9yIFNvbGlkaXR5IERldmVsb3BlcjoKICAgICAgICBiYWxhbmNlc1tkZXYyV2FsbGV0MlBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2RldjJXYWxsZXQyUGN0XSwgdW5zb2xkVG9rZW5zICogMiAvIDEwMCAqIDI1IC8gMTAwKTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCBkZXYyV2FsbGV0MlBjdCwgdW5zb2xkVG9rZW5zICogMiAvIDEwMCAqIDI1IC8gMTAwKTsKICAgICAgICAvLyBWZXN0aW5nCiAgICAgICAgdmVzdGluZ1Rva2Vuc1tkZXYyV2FsbGV0MlBjdF0gPSBzYWZlQWRkKHZlc3RpbmdUb2tlbnNbZGV2MldhbGxldDJQY3RdLCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogNzUgLyAxMDApOwoKICAgICAgICAvLyBDVCBTZXJ2ZXIgTWFuYWdlciBhbmQgSnVuaW9yIERldmVsb3BlcjogTWFobG9yeSBBbWJyb3NpbwogICAgICAgIGJhbGFuY2VzW2RldjNXYWxsZXQyUGN0XSA9IHNhZmVBZGQoYmFsYW5jZXNbZGV2M1dhbGxldDJQY3RdLCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIGRldjNXYWxsZXQyUGN0LCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIC8vIFZlc3RpbmcKICAgICAgICB2ZXN0aW5nVG9rZW5zW2RldjNXYWxsZXQyUGN0XSA9IHNhZmVBZGQodmVzdGluZ1Rva2Vuc1tkZXYzV2FsbGV0MlBjdF0sIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiA3NSAvIDEwMCk7CgogICAgICAgIC8vIENUIEJyYW5kaW5nIC0gTG9nbywgV2hpdGVwYXBlciBEZXNpZ24sIFdlYnNpdGUgRGVzaWduOiBUYW1seW4KICAgICAgICBiYWxhbmNlc1twcmVpY29icmFuZGluZ1dhbGxldDFQY3RdID0gc2FmZUFkZChiYWxhbmNlc1twcmVpY29icmFuZGluZ1dhbGxldDFQY3RdLCB1bnNvbGRUb2tlbnMgKiAxIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIHByZWljb2JyYW5kaW5nV2FsbGV0MVBjdCwgdW5zb2xkVG9rZW5zICogMSAvIDEwMCAgKiAyNSAvIDEwMCk7CiAgICAgICAgLy8gVmVzdGluZwogICAgICAgIHZlc3RpbmdUb2tlbnNbcHJlaWNvYnJhbmRpbmdXYWxsZXQxUGN0XSA9IHNhZmVBZGQodmVzdGluZ1Rva2Vuc1twcmVpY29icmFuZGluZ1dhbGxldDFQY3RdLCB1bnNvbGRUb2tlbnMgKiAxIC8gMTAwICogNzUgLyAxMDApOwoKICAgICAgICAvLyBDVCBKciBTb2xpZGl0eSBEZXZlbG9wZXI6IFNhbXVlbCBUIFNlbmRvbiBJSQogICAgICAgIGJhbGFuY2VzW2RldjRXYWxsZXQyUGN0XSA9IHNhZmVBZGQoYmFsYW5jZXNbZGV2NFdhbGxldDJQY3RdLCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIFRyYW5zZmVyKHRoaXMsIGRldjRXYWxsZXQyUGN0LCB1bnNvbGRUb2tlbnMgKiAyIC8gMTAwICogMjUgLyAxMDApOwogICAgICAgIC8vIFZlc3RpbmcKICAgICAgICB2ZXN0aW5nVG9rZW5zW2RldjRXYWxsZXQyUGN0XSA9IHNhZmVBZGQodmVzdGluZ1Rva2Vuc1tkZXY0V2FsbGV0MlBjdF0sIHVuc29sZFRva2VucyAqIDIgLyAxMDAgKiA3NSAvIDEwMCk7CgogICAgICAgIC8vIFRPRE86IEF0IHRoaXMgcG9pbnQgYWxsIHRva2VucyBoYXZlIGJlZW4gYWxsb2NhdGVkLgogICAgICAgIC8vICAgMSkgU2hvdWxkIHRoZSB0b2tlbnNTb2xkIHZhbHVlIGJlIHVwZGF0ZWQgYXMgd2VsbD8KICAgICAgICAvLyAgIDIpIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlZGdlIGNhc2VzIHRoYXQgd2lsbCByZXN1bHQgaW4gaW5hZHZlcmRlbnRseSBtaW5pbmcgYWRkaXRpb25hbCB0b2tlbnMuCiAgICAgICAgLy8gICAgICBPbmUgcG9zc2libGl0eSBpcyB0byBrZWVwIGEgJ3Rva2Vuc0lzc3VlZCcgY291bnRlciBhbmQgdmFsaWRhdGUgYWdhaW5zdCB0aGF0IHdoZW4gaXNzdWluZyAobm90IHRyYW5zZmVyaW5nKSB0b2tlbnMuCgogICAgICAgIC8vLyB0cmFuc2ZlciB0aGUgcmVzdCBvZiB0aGUgdG9rZW4gc3VwcGx5IG1pbnVzIHRoZSBjcm93ZHNhbGUgc3VwcGx5IHRvIHRoZSBMb3R1cyBXYWxsZXQKICAgICAgICB1aW50IHJlc2VydmVkU3VwcGx5ID0gc3VwcGx5ICogNTUgLyAxMDA7CgogICAgICAgIC8vLyBUaGlzIHNob3VsZCBiZSBhIG11bHRpLXNpZyB3YWxsZXQgc28gdGhhdCBlYWNoIHRpbWUgZnVuZCBpcyB3aXRoZHJhd24gZnJvbSB0aGUgc21hcnQgY29udHJhY3QsCiAgICAgICAgLy8vIGl0IG5lZWRzIHRvIGJlIGV4ZWN1dGVkIGZyb20gd2l0aGluIHRoZSBtdWx0aS1zaWcgd2FsbGV0LCBhbmQgZWFjaCB0aW1lIGZ1bmRzIGFyZSB3aXRoZHJhd24sCiAgICAgICAgLy8vIGl0IHdpbGwgbmVlZCBzaWduYXR1cmVzIGZyb20gYWxsIHNpZ25hdG9yaWVzCiAgICAgICAgYmFsYW5jZXNbbG90dXNXYWxsZXQ3NVBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2xvdHVzV2FsbGV0NzVQY3RdLCByZXNlcnZlZFN1cHBseSk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgbG90dXNXYWxsZXQ3NVBjdCwgcmVzZXJ2ZWRTdXBwbHkpOwoKICAgICAgICAvLy8gdHJhbnNmZXIgdGhlIHRva2VucyBmb3IgQWlyZHJvcCBvbiBhIHdhbGxldCBjb250cmFjdAogICAgICAgIHVpbnQgYWlyZHJvcFN1cHBseSA9IHN1cHBseSAqIDUgLyAxMDA7CiAgICAgICAgLy8vIFVOQ0VSVEFJTiB3aGV0aGVyIHRoaXMgc2hvdWxkIGJlIG11bHRpLXNpZyBvciBub3QKICAgICAgICBiYWxhbmNlc1thaXJkcm9wV2FsbGV0NVBjdF0gPSBzYWZlQWRkKGJhbGFuY2VzW2FpcmRyb3BXYWxsZXQ1UGN0XSwgYWlyZHJvcFN1cHBseSk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgYWlyZHJvcFdhbGxldDVQY3QsIGFpcmRyb3BTdXBwbHkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0RWFybHlBZG9wdGVycygpIHB1YmxpYyBvd25lck9ubHkgewogICAgICAgIHJlcXVpcmUoY3VycmVudFN0YWdlID09IFNhbGVTdGFnZS5XYWl0aW5nKTsKICAgICAgICBjdXJyZW50U3RhZ2UgPSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVyczsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZUVhcmx5QWRvcHRlcnMoKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycyk7CiAgICAgICAgY3VycmVudFN0YWdlID0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnNDbG9zZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRJY29PbmUoKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycyB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnNDbG9zZWQpOwogICAgICAgIGN1cnJlbnRTdGFnZSA9IFNhbGVTdGFnZS5JY29PbmU7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VJY29PbmUoKSBwdWJsaWMgb3duZXJPbmx5IHsKICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKTsKICAgICAgICBjdXJyZW50U3RhZ2UgPSBTYWxlU3RhZ2UuSWNvT25lQ2xvc2VkOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0SWNvVHdvKCkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb09uZSB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb09uZUNsb3NlZCk7CiAgICAgICAgY3VycmVudFN0YWdlID0gU2FsZVN0YWdlLkljb1R3bzsKCiAgICAgICAgLy8vIG9wdGlvbmFsIGF1dG8gZXhlYyBwcm9jZXNzIGNvbmRpdGlvbiB0byBlbmRTYWxlCiAgICAgICAgLy8vIG9ubHkgaWYgdG90YWwgdG9rZW5zIHNvbGQgaXMgcmVhY2hlZCAoMTEvMDcvMjAxNyAzUE0gR01UICsgOCkKICAgICAgICAvLy8gaWYgdG90YWwgdG9rZW5zIHNvbGQgaXMgPSB0byBzdW0gb2YgZWFybHlhZG9wdGVycywgaWNvb25lLCBpY290d28gc3VwcGxpZXMKCiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VTYWxlKCkgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3byk7CiAgICAgICAgY3VycmVudFN0YWdlID0gU2FsZVN0YWdlLkNsb3NlZDsKICAgICAgICBkaXN0cmlidXRlUmVtYWluaW5nVG9rZW5zKCk7IC8vIDExLzIyLzIwMTcgYnkgRG9uZGkKICAgICAgICAvLy8gU3RhcnQgY291bnRkb3duIHRvIGNsaWZmCiAgICAgICAgY2xpZmYgPSBub3cgKyAxODAgZGF5czsgLy8gVGVzdGluZyBjb2RlIGhhcyB0aGlzIHNldCB0byAibm93ICsgNSBtaW51dGVzIgogICAgICAgIC8vLyBpbiB0aGUgbGl2ZSBkZXBsb3kgc2V0IHRoaXMgdG8gIm5vdyArIDE4MCBkYXlzIi4KICAgIH0KCiAgICBtb2RpZmllciBkb25lU2VsbGluZyB7CiAgICAgICAgcmVxdWlyZShjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkNsb3NlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBMZXQgdGhlIGNhbGxlciB3aXRoZHJhdyBhbGwgZXRoZXIgYWxsb2NhdGVkIHRvIGl0IGR1cmluZyB0aGUgc2FsZSBwZXJpb2QuCiAgICBmdW5jdGlvbiB3aXRoZHJhd0FsbG9jYXRpb24oKSBwdWJsaWMgewogICAgICAgIC8vIExpZnRlZCBmcm9tOiBodHRwOi8vc29saWRpdHkucmVhZHRoZWRvY3MuaW8vZW4vZGV2ZWxvcC9zb2xpZGl0eS1ieS1leGFtcGxlLmh0bWwKICAgICAgICAvLyBJdCBpcyBhIGdvb2QgZ3VpZGVsaW5lIHRvIHN0cnVjdHVyZSBmdW5jdGlvbnMgdGhhdCBpbnRlcmFjdAogICAgICAgIC8vIHdpdGggb3RoZXIgY29udHJhY3RzIChpLmUuIHRoZXkgY2FsbCBmdW5jdGlvbnMgb3Igc2VuZCBFdGhlcikKICAgICAgICAvLyBpbnRvIHRocmVlIHBoYXNlczoKICAgICAgICAvLyAxLiBjaGVja2luZyBjb25kaXRpb25zCiAgICAgICAgLy8gMi4gcGVyZm9ybWluZyBhY3Rpb25zIChwb3RlbnRpYWxseSBjaGFuZ2luZyBjb25kaXRpb25zKQogICAgICAgIC8vIDMuIGludGVyYWN0aW5nIHdpdGggb3RoZXIgY29udHJhY3RzCgogICAgICAgIC8vIENoZWNraW5nIENvbmRpdGlvbnMKICAgICAgICByZXF1aXJlKGV0aERpc3RyaWJ1dGlvblttc2cuc2VuZGVyXSA+IDApOwogICAgICAgIC8vIE11c3QgYmUgYXQgbGVhc3QgYWZ0ZXIgYSBzYWxlIHN0YWdlIGJ1dCBub3QgZHVyaW5nIGEgc2FsZS4KICAgICAgICByZXF1aXJlKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVyc0Nsb3NlZCB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb09uZUNsb3NlZCB8fCBjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkNsb3NlZCk7CiAgICAgICAgLy8gNzUlIGFsbG9jYXRpb24gY2FuIG9ubHkgYmUgd2l0aGRyYXduIHdoZW4gdGhlIGNyb3dkIHNhbGUgaGFzIGNvbXBsZXRlZAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBsb3R1c1dhbGxldDc1UGN0IHx8IGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuQ2xvc2VkKTsKCgogICAgICAgIC8vIFBlcmZvcm1pbmcgYWN0aW9ucwogICAgICAgIC8vIGNvcHkgdGhlIGN1cnJlbnQgdmFsdWUgYWxsb2NhdGVkIGFzIHdlIHdpbGwgY2hhbmdlIHRoZSBzYXZlZCB2YWx1ZSBsYXRlci4KICAgICAgICB1aW50IHRvVHJhbnNmZXIgPSBldGhEaXN0cmlidXRpb25bbXNnLnNlbmRlcl07CiAgICAgICAgLy8gTm90ZSB0aGF0IGluIG9yZGVyIHRvIGF2b2lkIHJlLWVudHJhbmN5IHRoZSBhbGxvY2F0aW9uIGlzIHplcm9lZCBCRUZPUkUgdGhlIGFjdHVhbCB0cmFuc2Zlci4KICAgICAgICBldGhEaXN0cmlidXRpb25bbXNnLnNlbmRlcl0gPSAwOwoKICAgICAgICAvLyAoUG90ZW50aWFsbHkpIGludGVyYWN0aW5nIHdpdGggb3RoZXIgY29udHJhY3RzLgogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodG9UcmFuc2Zlcik7CiAgICB9CgogICAgZnVuY3Rpb24gY3VycmVudFNhbGVQcmljZUluV2VpKCkgY29uc3RhbnQgcHVibGljIG11c3RCZVNlbGxpbmcgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYoY3VycmVudFN0YWdlID09IFNhbGVTdGFnZS5FYXJseUFkb3B0ZXJzKSB7CiAgICAgICAgICAgIHJldHVybiBFQVJMWUFET1BURVJTLnRva2VuUHJpY2VJbldlaTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fT05FLnRva2VuUHJpY2VJbldlaTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvVHdvKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fVFdPLnRva2VuUHJpY2VJbldlaTsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIGN1cnJlbnRTYWxlTGltaXQoKSBjb25zdGFudCBwdWJsaWMgbXVzdEJlU2VsbGluZyByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZihjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnMpIHsKICAgICAgICAgICAgcmV0dXJuIEVBUkxZQURPUFRFUlMudG9rZW5MaW1pdDsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fT05FLnRva2VuTGltaXQ7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3bykgewogICAgICAgICAgICByZXR1cm4gSUNPX1RXTy50b2tlbkxpbWl0OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50U2FsZVNvbGQoKSBjb25zdGFudCBwdWJsaWMgbXVzdEJlU2VsbGluZyByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZihjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnMpIHsKICAgICAgICAgICAgcmV0dXJuIEVBUkxZQURPUFRFUlMudG9rZW5zU29sZDsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fT05FLnRva2Vuc1NvbGQ7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3bykgewogICAgICAgICAgICByZXR1cm4gSUNPX1RXTy50b2tlbnNTb2xkOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50TWluUHVyY2hhc2UoKSBjb25zdGFudCBwdWJsaWMgbXVzdEJlU2VsbGluZyByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZihjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnMpIHsKICAgICAgICAgICAgcmV0dXJuIEVBUkxZQURPUFRFUlMubWluUHVyY2hhc2VJbldlaTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fT05FLm1pblB1cmNoYXNlSW5XZWk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3bykgewogICAgICAgICAgICByZXR1cm4gSUNPX1RXTy5taW5QdXJjaGFzZUluV2VpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50TWF4UHVyY2hhc2UoKSBjb25zdGFudCBwdWJsaWMgbXVzdEJlU2VsbGluZyByZXR1cm5zKHVpbnQpIHsKICAgICAgICBpZihjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkVhcmx5QWRvcHRlcnMpIHsKICAgICAgICAgICAgcmV0dXJuIEVBUkxZQURPUFRFUlMubWF4UHVyY2hhc2VJbldlaTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvT25lKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fT05FLm1heFB1cmNoYXNlSW5XZWk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3bykgewogICAgICAgICAgICByZXR1cm4gSUNPX1RXTy5tYXhQdXJjaGFzZUluV2VpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50U2FsZUxpbWl0UGVyQWRkcmVzcygpIGNvbnN0YW50IHB1YmxpYyBtdXN0QmVTZWxsaW5nIHJldHVybnModWludCkgewogICAgICAgIGlmKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycykgewogICAgICAgICAgICByZXR1cm4gRUFSTFlBRE9QVEVSUy5zYWxlTGltaXRQZXJBZGRyZXNzOwogICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFN0YWdlID09IFNhbGVTdGFnZS5JY29PbmUpIHsKICAgICAgICAgICAgcmV0dXJuIElDT19PTkUuc2FsZUxpbWl0UGVyQWRkcmVzczsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvVHdvKSB7CiAgICAgICAgICAgIHJldHVybiBJQ09fVFdPLnNhbGVMaW1pdFBlckFkZHJlc3M7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGN1cnJlbnRTdGFnZVRva2Vuc0JvdWdodEJ5QWRkcmVzcygpIGNvbnN0YW50IHB1YmxpYyBtdXN0QmVTZWxsaW5nIHJldHVybnModWludCkgewogICAgICAgIGlmKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycykgewogICAgICAgICAgICByZXR1cm4gZWFybHlBZG9wdGVyc0FkZHJlc3NQdXJjaGFzZWRbbXNnLnNlbmRlcl07CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb09uZSkgewogICAgICAgICAgICByZXR1cm4gaWNvT25lQWRkcmVzc1B1cmNoYXNlZFttc2cuc2VuZGVyXTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuSWNvVHdvKSB7CiAgICAgICAgICAgIHJldHVybiBpY29Ud29BZGRyZXNzUHVyY2hhc2VkW21zZy5zZW5kZXJdOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfYWRkVG9rZW5zU29sZFRvQ3VycmVudFNhbGUodWludCBfYWRkaXRpb25hbFRva2Vuc1NvbGQpIGludGVybmFsIG11c3RCZVNlbGxpbmcgewogICAgICAgIGlmKGN1cnJlbnRTdGFnZSA9PSBTYWxlU3RhZ2UuRWFybHlBZG9wdGVycykgewogICAgICAgICAgICBFQVJMWUFET1BURVJTLnRva2Vuc1NvbGQgPSBzYWZlQWRkKEVBUkxZQURPUFRFUlMudG9rZW5zU29sZCwgX2FkZGl0aW9uYWxUb2tlbnNTb2xkKTsKICAgICAgICAgICAgZWFybHlBZG9wdGVyc0FkZHJlc3NQdXJjaGFzZWRbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGVhcmx5QWRvcHRlcnNBZGRyZXNzUHVyY2hhc2VkW21zZy5zZW5kZXJdLCBfYWRkaXRpb25hbFRva2Vuc1NvbGQpOwogICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFN0YWdlID09IFNhbGVTdGFnZS5JY29PbmUpIHsKICAgICAgICAgICAgSUNPX09ORS50b2tlbnNTb2xkID0gc2FmZUFkZChJQ09fT05FLnRva2Vuc1NvbGQsIF9hZGRpdGlvbmFsVG9rZW5zU29sZCk7CiAgICAgICAgICAgIGljb09uZUFkZHJlc3NQdXJjaGFzZWRbbXNnLnNlbmRlcl0gPSBzYWZlQWRkKGljb09uZUFkZHJlc3NQdXJjaGFzZWRbbXNnLnNlbmRlcl0sIF9hZGRpdGlvbmFsVG9rZW5zU29sZCk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U3RhZ2UgPT0gU2FsZVN0YWdlLkljb1R3bykgewogICAgICAgICAgICBJQ09fVFdPLnRva2Vuc1NvbGQgPSBzYWZlQWRkKElDT19UV08udG9rZW5zU29sZCwgX2FkZGl0aW9uYWxUb2tlbnNTb2xkKTsKICAgICAgICAgICAgaWNvVHdvQWRkcmVzc1B1cmNoYXNlZFttc2cuc2VuZGVyXSA9IHNhZmVBZGQoaWNvVHdvQWRkcmVzc1B1cmNoYXNlZFttc2cuc2VuZGVyXSwgX2FkZGl0aW9uYWxUb2tlbnNTb2xkKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdWZXN0ZWRUb2tlbnMoKSBwdWJsaWMgZG9uZVNlbGxpbmcgewogICAgICAgIC8vIDEuIGNoZWNraW5nIGNvbmRpdGlvbnMKICAgICAgICAvLyBDbGlmZiBtdXN0IGhhdmUgYmVlbiBwcmV2aW91c2x5IHNldCAoVGhpcyBpcyBzZXQgaW4gY2xvc2VTYWxlKS4KICAgICAgICByZXF1aXJlKGNsaWZmID4gMCk7CiAgICAgICAgLy8gTXVzdCBiZSBwYXN0IHRoZSBjbGlmZi4gKGFuZCBlcXVhbCBvciBncmVhdGVyIHRoYW4gdGhlIGluaXRpYWwgdmFsdWUgb2YgY2xpZmYgdXBvbiBDbG9zZVNhbGUpCiAgICAgICAgcmVxdWlyZShub3cgPj0gY2xpZmYpOwogICAgICAgIC8vIE11c3QgaGF2ZSBzb21lIChyZW1haW5pbmcpIHZlc3RlZCB0b2tlbnMgZm9yIHdpdGhkcmF3YWwuCiAgICAgICAgcmVxdWlyZSh3aXRoZHJhd25WZXN0ZWRUb2tlbnNbbXNnLnNlbmRlcl0gPCB2ZXN0aW5nVG9rZW5zW21zZy5zZW5kZXJdKTsKCiAgICAgICAgLy8gMi4gcGVyZm9ybWluZyBhY3Rpb25zIChwb3RlbnRpYWxseSBjaGFuZ2luZyBjb25kaXRpb25zKQogICAgICAgIC8vIEhvdyBtYW55IHNjaGVkdWxlZCBhbGxvY2F0aW9ucyBoYXZlIHBhc3NlZC4KICAgICAgICB1aW50IHNjaGVkdWxlc1Bhc3NlZCA9ICgobm93IC0gY2xpZmYpIC8gdmVzdGluZ1NjaGVkdWxlKSArIDE7CiAgICAgICAgLy8gTnVtYmVyIG9mIHRva2VucyBhdmFpbGFibGUgdG8gdGhlIHVzZXIgYXQgdGhpcyBwb2ludCAobWF5IGluY2x1ZGUgcHJldmlvdXNseSBhbHJlYWR5IHdpdGhkcmF3biB0b2tlbnMpLgogICAgICAgIHVpbnQgdmVzdGVkVG9rZW5zID0gKHZlc3RpbmdUb2tlbnNbbXNnLnNlbmRlcl0gLyAxNSkgKiBzY2hlZHVsZXNQYXNzZWQ7CiAgICAgICAgLy8gQWN0dWFsIHRva2VucyBhdmFpbGFibGUgZm9yIHdpdGhkcmF3YWwgYXQgdGhpcyBwb2ludC4KICAgICAgICB1aW50IGF2YWlsYWJsZVRvV2l0aGRyYXcgPSB2ZXN0ZWRUb2tlbnMgLSB3aXRoZHJhd25WZXN0ZWRUb2tlbnNbbXNnLnNlbmRlcl07CiAgICAgICAgLy8gRm9yIGNvbnRyYWN0IHNhZmV0eSBtYXJrIHRva2VucyBhcyBhbGxvY2F0ZWQgYmVmb3JlIGFsbG9jYXRpbmcuCiAgICAgICAgd2l0aGRyYXduVmVzdGVkVG9rZW5zW21zZy5zZW5kZXJdID0gc2FmZUFkZCh3aXRoZHJhd25WZXN0ZWRUb2tlbnNbbXNnLnNlbmRlcl0sIGF2YWlsYWJsZVRvV2l0aGRyYXcpOwogICAgICAgIC8vIEFsbG9jYXRlIHRva2VucwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgYXZhaWxhYmxlVG9XaXRoZHJhdyk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgYXZhaWxhYmxlVG9XaXRoZHJhdyk7CiAgICB9Cn0='.
	

]
