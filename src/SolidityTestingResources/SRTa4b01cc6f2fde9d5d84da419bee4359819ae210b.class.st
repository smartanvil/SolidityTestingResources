Class {
	#name : #SRTa4b01cc6f2fde9d5d84da419bee4359819ae210b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa4b01cc6f2fde9d5d84da419bee4359819ae210b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7Cgpjb250cmFjdCBFUkM3MjEgewogICAgLy8gRVJDMjAgY29tcGF0aWJsZSBmdW5jdGlvbnMKICAgIC8vIHVzZSB2YXJpYWJsZSBnZXR0ZXIKICAgIC8vIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgbmFtZSk7CiAgICAvLyBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgc3ltYm9sKTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIDsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5JZCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbDsKICAgIAogICAgLy8gT3B0aW9uYWwKICAgIC8vIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIDsKICAgIC8vIGZ1bmN0aW9uIHRva2VuT2ZPd25lckJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2luZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IHRva2VuSWQpOwogICAgLy8gZnVuY3Rpb24gdG9rZW5NZXRhZGF0YSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIGluZm9VcmwpOwogICAgCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKfQoKY29udHJhY3QgRVJDMjAgewogICAgLy8gR2V0IHRoZSB0b3RhbCB0b2tlbiBzdXBwbHkKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KTsKIAogICAgLy8gR2V0IHRoZSBhY2NvdW50IGJhbGFuY2Ugb2YgYW5vdGhlciBhY2NvdW50IHdpdGggYWRkcmVzcyBfb3duZXIKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAKICAgIC8vIFNlbmQgX3ZhbHVlIGFtb3VudCBvZiB0b2tlbnMgdG8gYWRkcmVzcyBfdG8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAKICAgIC8vIHRyYW5zZmVyIF92YWx1ZSBhbW91bnQgb2YgdG9rZW4gYXBwcm92ZWQgYnkgYWRkcmVzcyBfZnJvbQogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICAKICAgIC8vIGFwcHJvdmUgYW4gYWRkcmVzcyB3aXRoIF92YWx1ZSBhbW91bnQgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLyBnZXQgcmVtYWluaW5nIHRva2VuIGFwcHJvdmVkIGJ5IF9vd25lciB0byBfc3BlbmRlcgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogIAogICAgLy8gVHJpZ2dlcmVkIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZC4KICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogCiAgICAvLyBUcmlnZ2VyZWQgd2hlbmV2ZXIgYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgaXMgY2FsbGVkLgogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFZpcnR1YWxHaWZ0IGlzIEVSQzcyMSB7CiAgICAKICAgIC8vIGxvYWQgR1RPIHRvIFZpcnR1YWwgR2lmdCBjb250cmFjdCwgdG8gaW50ZXJhY3Qgd2l0aCBHVE8KICAgIEVSQzIwIEdUTyA9IEVSQzIwKDB4MDBDNWJCYUU1MDc4MUJlMTY2OTMwNmI5ZTAwMUVGRjU3YTI5NTdiMDlkKTsKICAgIAogICAgLy8gR2lmdCBkYXRhCiAgICBzdHJ1Y3QgR2lmdCB7CiAgICAgICAgLy8gZ2lmdCBwcmljZQogICAgICAgIHVpbnQyNTYgcHJpY2U7CiAgICAgICAgLy8gZ2lmdCBkZXNjcmlwdGlvbgogICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbjsKICAgIH0KICAgIAogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICAKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfR2lmdElkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX0dpZnRJZCk7CiAgICBldmVudCBDcmVhdGlvbihhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IGluZGV4ZWQgR2lmdElkKTsKICAgIAogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlZpcnR1YWxHaWZ0IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlZURyI7CiAgICAKICAgIC8vIEdpZnQgb2JqZWN0IHN0b3JhZ2UgaW4gYXJyYXkKICAgIEdpZnRbXSBnaWZ0U3RvcmFnZTsKICAgIAogICAgLy8gdG90YWwgR2lmdCBvZiBhbiBhZGRyZXNzCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBiYWxhbmNlczsKICAgIAogICAgLy8gaW5kZXggb2YgR2lmdCBhcnJheSB0byBPd25lcgogICAgbWFwcGluZyh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgR2lmdEluZGV4VG9Pd25lcnM7CiAgICAKICAgIC8vIEdpZnQgZXhpc3Qgb3Igbm90CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gYm9vbCkgcHJpdmF0ZSBHaWZ0RXhpc3RzOwogICAgCiAgICAvLyBtYXBwaW5nIGZyb20gb3duZXIgYW5kIGFwcHJvdmVkIGFkZHJlc3MgdG8gR2lmdElkCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHJpdmF0ZSBhbGxvd2VkOwogICAgCiAgICAvLyBtYXBwaW5nIGZyb20gb3duZXIgYW5kIGluZGV4IEdpZnQgb2Ygb3duZXIgdG8gR2lmdElkCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpKSBwcml2YXRlIG93bmVySW5kZXhUb0dpZnRzOwogICAgCiAgICAvLyBHaWZ0IG1ldGFkYXRhCiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gc3RyaW5nKSBHaWZ0TGlua3M7CgogICAgbW9kaWZpZXIgb25seU93bmVyKCl7CiAgICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUdpZnRPd25lcih1aW50MjU2IEdpZnRJZCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IEdpZnRJbmRleFRvT3duZXJzW0dpZnRJZF0pOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIHZhbGlkR2lmdCh1aW50MjU2IEdpZnRJZCl7CiAgICAgICAgcmVxdWlyZShHaWZ0RXhpc3RzW0dpZnRJZF0pOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFZpcnR1YWxHaWZ0KCkKICAgIHB1YmxpY3sKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgLy8gc2F2ZSB0ZW1wb3JhcnlseSBuZXcgR2lmdAogICAgICAgIEdpZnQgbWVtb3J5IG5ld0dpZnQgPSBHaWZ0KHsKICAgICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiTVlUSElDQUwiCiAgICAgICAgfSk7CiAgICAgICAgLy8gcHVzaCB0byBhcnJheSBhbmQgcmV0dXJuIHRoZSBsZW5ndGggaXMgdGhlIGlkIG9mIG5ldyBHaWZ0CiAgICAgICAgdWludDI1NiBteXRoaWNhbEdpZnQgPSBnaWZ0U3RvcmFnZS5wdXNoKG5ld0dpZnQpIC0gMTsgLy8gaWQgPSAwCiAgICAgICAgLy8gbXl0aGljYWwgR2lmdCBpcyBub3QgZXhpc3QKICAgICAgICBHaWZ0RXhpc3RzW215dGhpY2FsR2lmdF0gPSBmYWxzZTsKICAgICAgICAvLyBhc3NpZ24gdXJsIGZvciBHaWZ0CiAgICAgICAgR2lmdExpbmtzW215dGhpY2FsR2lmdF0gPSAibXl0aGljYWxHaWZ0IjsKICAgICAgICAvLyBUaGlzIHdpbGwgYXNzaWduIG93bmVyc2hpcCwgYW5kIGFsc28gZW1pdCB0aGUgVHJhbnNmZXIgZXZlbnQgYXMKICAgICAgICAvLyBwZXIgRVJDNzIxIGRyYWZ0CiAgICAgICAgX3RyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIG15dGhpY2FsR2lmdCk7CiAgICAgICAgLy8gZXZlbnQgY3JlYXRlIG5ldyBHaWZ0IGZvciBtc2cuc2VuZGVyCiAgICAgICAgQ3JlYXRpb24obXNnLnNlbmRlciwgbXl0aGljYWxHaWZ0KTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgdGhpcyBmdW5jdGlvbiBjaGFuZ2UgR1RPIGFkZHJlc3MsIHRoaXMgbWVhbiB5b3UgY2FuIHVzZSBtYW55IHRva2VuIHRvIGJ1eSBnaWZ0CiAgICAvLy8gYnkgY2hhbmdlIEdUTyBhZGRyZXNzIHRvIEJOQiBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIG5ld0FkZHJlc3MgaXMgbmV3IGFkZHJlc3Mgb2YgR1RPIG9yIGFub3RoZXIgR2lmdCBsaWtlIEJOQgogICAgZnVuY3Rpb24gY2hhbmdlR1RPQWRkcmVzcyhhZGRyZXNzIG5ld0FkZHJlc3MpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcnsKICAgICAgICBHVE8gPSBFUkMyMChuZXdBZGRyZXNzKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgcmV0dXJuIGN1cnJlbnQgR1RPIGFkZHJlc3MKICAgIGZ1bmN0aW9uIGdldEdUT0FkZHJlc3MoKQogICAgcHVibGljCiAgICBjb25zdGFudAogICAgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBhZGRyZXNzKEdUTyk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IHJldHVybiB0b3RhbCBzdXBwbHkgb2YgR2lmdAogICAgLy8vIEByZXR1cm4gbGVuZ3RoIG9mIEdpZnQgc3RvcmFnZSBhcnJheSwgZXhjZXB0IEdpZnQgWmVybwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKQogICAgcHVibGljIAogICAgY29uc3RhbnQKICAgIHJldHVybnMgKHVpbnQyNTYpewogICAgICAgIC8vIGV4Y2x1c2l2ZSBHaWZ0IFplcm8KICAgICAgICByZXR1cm4gZ2lmdFN0b3JhZ2UubGVuZ3RoIC0gMTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgYWxsb3cgcGVvcGxlIHRvIGJ1eSBHaWZ0CiAgICAvLy8gQHBhcmFtIEdpZnRJZCA6IGlkIG9mIGdpZnQgdXNlciB3YW50IHRvIGJ1eQogICAgZnVuY3Rpb24gYnV5KHVpbnQyNTYgR2lmdElkKSAKICAgIHZhbGlkR2lmdChHaWZ0SWQpCiAgICBwdWJsaWMgewogICAgICAgIC8vIGdldCBvbGQgb3duZXIgb2YgR2lmdAogICAgICAgIGFkZHJlc3Mgb2xkb3duZXIgPSBvd25lck9mKEdpZnRJZCk7CiAgICAgICAgLy8gdGVsbCBnaWZ0byB0cmFuc2ZlciBHVE8gZnJvbSBuZXcgb3duZXIgdG8gb2xkb3duZXIKICAgICAgICAvLyBOT1RFOiBuZXcgb3duZXIgTVVTVCBhcHByb3ZlIGZvciBWaXJ0dWFsIEdpZnQgY29udHJhY3QgdG8gdGFrZSBoaXMgYmFsYW5jZQogICAgICAgIHJlcXVpcmUoR1RPLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBvbGRvd25lciwgZ2lmdFN0b3JhZ2VbR2lmdElkXS5wcmljZSkgPT0gdHJ1ZSk7CiAgICAgICAgLy8gYXNzaWduIG5ldyBvd25lciBmb3IgR2lmdElkCiAgICAgICAgLy8gVE9ETzogb2xkIG93bmVyIHNob3VsZCBoYXZlIHNvbWV0aGluZyB0byBjb25maXJtIHRoYXQgaGUgd2FudCB0byBzZWxsIHRoaXMgR2lmdAogICAgICAgIF90cmFuc2ZlcihvbGRvd25lciwgbXNnLnNlbmRlciwgR2lmdElkKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgb3duZXIgc2VuZCBnaWZ0IHRvIHJlY2lwaWVudCB3aGVuIFZHIHdhcyBhcHByb3ZlZAogICAgLy8vIEBwYXJhbSByZWNpcGllbnQgOiByZWNlaXZlZCBnaWZ0CiAgICAvLy8gQHBhcmFtIEdpZnRJZCA6IGlkIG9mIGdpZnQgd2hpY2ggcmVjaXBpZW50IHdhbnQgdG8gYnV5CiAgICBmdW5jdGlvbiBzZW5kR2lmdChhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBHaWZ0SWQpCiAgICBvbmx5R2lmdE93bmVyKEdpZnRJZCkKICAgIHZhbGlkR2lmdChHaWZ0SWQpCiAgICBwdWJsaWMgewogICAgICAgIC8vIHRyYW5zZmVyIEdUTyB0byBvd25lcgogICAgICAgIC8vIHJlcXVpcmUoR1RPLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGdpZnRTdG9yYWdlW0dpZnRJZF0ucHJpY2UpID09IHRydWUpOwogICAgICAgIC8vIHRyYW5zZmVyIGdpZnQgdG8gcmVjaXBpZW50CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIHJlY2lwaWVudCwgR2lmdElkKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgZ2V0IHRvdGFsIEdpZnQgb2YgYW4gYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfb3duZXIgdG8gZ2V0IGJhbGFuY2UKICAgIC8vLyBAcmV0dXJuIGJhbGFuY2Ugb2YgYW4gYWRkcmVzcwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSAKICAgIHB1YmxpYyAKICAgIGNvbnN0YW50IAogICAgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKXsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaXNFeGlzdCh1aW50MjU2IEdpZnRJZCkKICAgIHB1YmxpYwogICAgY29uc3RhbnQKICAgIHJldHVybnMoYm9vbCl7CiAgICAgICAgcmV0dXJuIEdpZnRFeGlzdHNbR2lmdElkXTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgZ2V0IG93bmVyIG9mIGFuIEdpZnQgaWQKICAgIC8vLyBAcGFyYW0gX0dpZnRJZCA6IGlkIG9mIEdpZnQgdG8gZ2V0IG93bmVyCiAgICAvLy8gQHJldHVybiBvd25lciA6IG93bmVyIG9mIGFuIEdpZnQgaWQKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfR2lmdElkKQogICAgcHVibGljCiAgICBjb25zdGFudCAKICAgIHJldHVybnMgKGFkZHJlc3MgX293bmVyKSB7CiAgICAgICAgcmVxdWlyZShHaWZ0RXhpc3RzW19HaWZ0SWRdKTsKICAgICAgICByZXR1cm4gR2lmdEluZGV4VG9Pd25lcnNbX0dpZnRJZF07CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGFwcHJvdmUgR2lmdCBpZCBmcm9tIG1zZy5zZW5kZXIgdG8gYW4gYWRkcmVzcwogICAgLy8vIEBwYXJhbSBfdG8gOiBhZGRyZXNzIGlzIGFwcHJvdmVkCiAgICAvLy8gQHBhcmFtIF9HaWZ0SWQgOiBpZCBvZiBHaWZ0IGluIGFycmF5CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9HaWZ0SWQpCiAgICB2YWxpZEdpZnQoX0dpZnRJZCkKICAgIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyT2YoX0dpZnRJZCkpOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgICAgIAogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3RvXSA9IF9HaWZ0SWQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfR2lmdElkKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgZ2V0IGlkIG9mIEdpZnQgd2FzIGFwcHJvdmVkIGZyb20gb3duZXIgdG8gc3BlbmRlcgogICAgLy8vIEBwYXJhbSBfb3duZXIgOiBhZGRyZXNzIG93bmVyIG9mIEdpZnQKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgOiBzcGVuZGVyIHdhcyBhcHByb3ZlZAogICAgLy8vIEByZXR1cm4gR2lmdElkCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIAogICAgcHVibGljIAogICAgY29uc3RhbnQgCiAgICByZXR1cm5zICh1aW50MjU2IEdpZnRJZCkgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICAvLy8gQGRldiBhIHNwZW5kZXIgdGFrZSBvd25lciBzaGlwIG9mIEdpZnQgaWQsIHdoZW4gaGUgd2FzIGFwcHJvdmVkCiAgICAvLy8gQHBhcmFtIF9HaWZ0SWQgOiBpZCBvZiBHaWZ0IGhhcyBiZWluZyB0YWtlT3duZXJzaGlwCiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX0dpZnRJZCkKICAgIHZhbGlkR2lmdChfR2lmdElkKQogICAgcHVibGljIHsKICAgICAgICAvLyBnZXQgb2xkb3duZXIgb2YgR2lmdGlkCiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IG93bmVyT2YoX0dpZnRJZCk7CiAgICAgICAgLy8gbmV3IG93bmVyIGlzIG1zZyBzZW5kZXIKICAgICAgICBhZGRyZXNzIG5ld093bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICAKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IG9sZE93bmVyKTsKICAgICAgICAvLyBuZXdPd25lciBtdXN0IGJlIGFwcHJvdmVkIGJ5IG9sZE93bmVyCiAgICAgICAgcmVxdWlyZShhbGxvd2VkW29sZE93bmVyXVtuZXdPd25lcl0gPT0gX0dpZnRJZCk7CgogICAgICAgIC8vIHRyYW5zZmVyIEdpZnQgZm9yIG5ldyBvd25lcgogICAgICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF9HaWZ0SWQpOwoKICAgICAgICAvLyBkZWxldGUgYXBwcm92ZSB3aGVuIGJlaW5nIGRvbmUgdGFrZSBvd25lciBzaGlwCiAgICAgICAgZGVsZXRlIGFsbG93ZWRbb2xkT3duZXJdW25ld093bmVyXTsKCiAgICAgICAgVHJhbnNmZXIob2xkT3duZXIsIG5ld093bmVyLCBfR2lmdElkKTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgdHJhbnNmZXIgb3duZXJzaGlwIG9mIGEgc3BlY2lmaWMgR2lmdCB0byBhbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSA6IGFkZHJlc3Mgb3duZXIgb2YgR2lmdGlkCiAgICAvLy8gQHBhcmFtIF90byA6IGFkZHJlc3MncyByZWNlaXZlZAogICAgLy8vIEBwYXJhbSBfR2lmdElkIDogR2lmdCBpZAogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9HaWZ0SWQpIAogICAgaW50ZXJuYWwgewogICAgICAgIC8vIFNpbmNlIHRoZSBudW1iZXIgb2YgR2lmdCBpcyBjYXBwZWQgdG8gMl4zMiB3ZSBjYW4ndCBvdmVyZmxvdyB0aGlzCiAgICAgICAgYmFsYW5jZXNbX3RvXSsrOwogICAgICAgIC8vIHRyYW5zZmVyIG93bmVyc2hpcAogICAgICAgIEdpZnRJbmRleFRvT3duZXJzW19HaWZ0SWRdID0gX3RvOwogICAgICAgIC8vIFdoZW4gY3JlYXRpbmcgbmV3IEdpZnQgX2Zyb20gaXMgMHgwLCBidXQgd2UgY2FuJ3QgYWNjb3VudCB0aGF0IGFkZHJlc3MuCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dLS07CiAgICAgICAgfQogICAgICAgIC8vIEVtaXQgdGhlIHRyYW5zZmVyIGV2ZW50LgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9HaWZ0SWQpOwogICAgfQogICAgCiAgICAvLy8gQGRldiB0cmFuc2ZlciBvd25lcnNoaXAgb2YgR2lmdGlkIGZyb20gbXNnIHNlbmRlciB0byBhbiBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIF90byA6IGFkZHJlc3MncyByZWNlaXZlZAogICAgLy8vIEBwYXJhbSBfR2lmdElkIDogR2lmdCBpZAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX0dpZnRJZCkKICAgIHZhbGlkR2lmdChfR2lmdElkKQogICAgZXh0ZXJuYWwgewogICAgICAgIC8vIG5vdCB0cmFuc2ZlciB0byB6ZXJvCiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICAvLyBhZGRyZXNzIHJlY2VpdmVkIGRpZmZlcmVudCBmcm9tIHNlbmRlcgogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBfdG8pOwogICAgICAgIC8vIHNlbmRlciBtdXN0IGJlIG93bmVyIG9mIEdpZnRpZAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lck9mKF9HaWZ0SWQpKTsKICAgICAgICAvLyBkbyBub3Qgc2VuZCB0byBHaWZ0IGNvbnRyYWN0CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgCiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX0dpZnRJZCk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IHRyYW5zZmVyIEdpZnRpZCB3YXMgYXBwcm92ZWQgYnkgX2Zyb20gdG8gX3RvCiAgICAvLy8gQHBhcmFtIF9mcm9tIDogYWRkcmVzcyBvd25lciBvZiBHaWZ0aWQKICAgIC8vLyBAcGFyYW0gX3RvIDogYWRkcmVzcyBpcyByZWNlaXZlZAogICAgLy8vIEBwYXJhbSBfR2lmdElkIDogR2lmdCBpZAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9HaWZ0SWQpCiAgICB2YWxpZEdpZnQoX0dpZnRJZCkKICAgIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKF9mcm9tID09IG93bmVyT2YoX0dpZnRJZCkpOwogICAgICAgIC8vIENoZWNrIGZvciBhcHByb3ZhbCBhbmQgdmFsaWQgb3duZXJzaGlwCiAgICAgICAgcmVxdWlyZShhbGxvd2FuY2UoX2Zyb20sIG1zZy5zZW5kZXIpID09IF9HaWZ0SWQpOwogICAgICAgIC8vIGFkZHJlc3MgcmVjZWl2ZWQgZGlmZmVyZW50IGZyb20gX293bmVyCiAgICAgICAgcmVxdWlyZShfZnJvbSAhPSBfdG8pOwogICAgICAgIAogICAgICAgIC8vIFNhZmV0eSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdC4KICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICAvLyBEaXNhbGxvdyB0cmFuc2ZlcnMgdG8gdGhpcyBjb250cmFjdCB0byBwcmV2ZW50IGFjY2lkZW50YWwgbWlzdXNlLgogICAgICAgIC8vIFRoZSBjb250cmFjdCBzaG91bGQgbmV2ZXIgb3duIGFueSBHaWZ0CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgICAgIC8vIFJlYXNzaWduIG93bmVyc2hpcCAoYWxzbyBjbGVhcnMgcGVuZGluZyBhcHByb3ZhbHMgYW5kIGVtaXRzIFRyYW5zZmVyIGV2ZW50KS4KICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX0dpZnRJZCk7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFJldHVybnMgYSBsaXN0IG9mIGFsbCBHaWZ0IElEcyBhc3NpZ25lZCB0byBhbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIG93bmVyIHdob3NlIEdpZnQgd2UgYXJlIGludGVyZXN0ZWQgaW4uCiAgICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBNVVNUIE5FVkVSIGJlIGNhbGxlZCBieSBzbWFydCBjb250cmFjdCBjb2RlLiBGaXJzdCwgaXQncyBmYWlybHkKICAgIC8vLyAgZXhwZW5zaXZlIChpdCB3YWxrcyB0aGUgZW50aXJlIEdpZnQgYXJyYXkgbG9va2luZyBmb3IgR2lmdCBiZWxvbmdpbmcgdG8gb3duZXIpLAogICAgLy8vIEByZXR1cm4gb3duZXJHaWZ0cyA6IGxpc3QgR2lmdCBvZiBvd25lcgogICAgZnVuY3Rpb24gR2lmdHNPZk93bmVyKGFkZHJlc3MgX293bmVyKSAKICAgIHB1YmxpYyAKICAgIHZpZXcgCiAgICByZXR1cm5zKHVpbnQyNTZbXSBvd25lckdpZnRzKSB7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBHaWZ0Q291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICBpZiAoR2lmdENvdW50ID09IDApIHsKICAgICAgICAgICAgLy8gUmV0dXJuIGFuIGVtcHR5IGFycmF5CiAgICAgICAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXShHaWZ0Q291bnQpOwogICAgICAgICAgICB1aW50MjU2IHRvdGFsID0gdG90YWxTdXBwbHkoKTsKICAgICAgICAgICAgdWludDI1NiByZXN1bHRJbmRleCA9IDA7CgogICAgICAgICAgICAvLyBXZSBjb3VudCBvbiB0aGUgZmFjdCB0aGF0IGFsbCBHaWZ0IGhhdmUgSURzIHN0YXJ0aW5nIGF0IDEgYW5kIGluY3JlYXNpbmcKICAgICAgICAgICAgLy8gc2VxdWVudGlhbGx5IHVwIHRvIHRoZSB0b3RhbENhdCBjb3VudC4KICAgICAgICAgICAgdWludDI1NiBHaWZ0SWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBzY2FuIGFycmF5IGFuZCBmaWx0ZXIgR2lmdCBvZiBvd25lcgogICAgICAgICAgICBmb3IgKEdpZnRJZCA9IDA7IEdpZnRJZCA8PSB0b3RhbDsgR2lmdElkKyspIHsKICAgICAgICAgICAgICAgIGlmIChHaWZ0SW5kZXhUb093bmVyc1tHaWZ0SWRdID09IF9vd25lcikgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRJbmRleF0gPSBHaWZ0SWQ7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0SW5kZXgrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IFJldHVybnMgYSBHaWZ0IElEcyBhc3NpZ25lZCB0byBhbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIG93bmVyIHdob3NlIEdpZnQgd2UgYXJlIGludGVyZXN0ZWQgaW4uCiAgICAvLy8gQHBhcmFtIF9pbmRleCB0byBvd25lciBHaWZ0IGxpc3QKICAgIC8vLyBAbm90aWNlIFRoaXMgbWV0aG9kIE1VU1QgTkVWRVIgYmUgY2FsbGVkIGJ5IHNtYXJ0IGNvbnRyYWN0IGNvZGUuIEZpcnN0LCBpdCdzIGZhaXJseQogICAgLy8vICBleHBlbnNpdmUgKGl0IHdhbGtzIHRoZSBlbnRpcmUgR2lmdCBhcnJheSBsb29raW5nIGZvciBHaWZ0IGJlbG9uZ2luZyB0byBvd25lciksCiAgICAvLy8gIGl0IGlzIG9ubHkgc3VwcG9ydGVkIGZvciB3ZWIzIGNhbGxzLCBhbmQKICAgIC8vLyAgbm90IGNvbnRyYWN0LXRvLWNvbnRyYWN0IGNhbGxzLgogICAgZnVuY3Rpb24gZ2lmdE93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpCiAgICBleHRlcm5hbAogICAgY29uc3RhbnQgCiAgICByZXR1cm5zICh1aW50MjU2IEdpZnRJZCkgewogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgb3duZXJHaWZ0cyA9IEdpZnRzT2ZPd25lcihfb3duZXIpOwogICAgICAgIHJldHVybiBvd25lckdpZnRzW19pbmRleF07CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGdldCBHaWZ0IG1ldGFkYXRhICh1cmwpIGZyb20gR2lmdExpbmtzCiAgICAvLy8gQHBhcmFtIF9HaWZ0SWQgOiBHaWZ0IGlkCiAgICAvLy8gQHJldHVybiBpbmZvVXJsIDogdXJsIG9mIEdpZnQKICAgIGZ1bmN0aW9uIEdpZnRNZXRhZGF0YSh1aW50MjU2IF9HaWZ0SWQpCiAgICBwdWJsaWMKICAgIGNvbnN0YW50CiAgICByZXR1cm5zIChzdHJpbmcgaW5mb1VybCkgewogICAgICAgIHJldHVybiBHaWZ0TGlua3NbX0dpZnRJZF07CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGZ1bmN0aW9uIGNyZWF0ZSBuZXcgR2lmdAogICAgLy8vIEBwYXJhbSBfcHJpY2UgOiBHaWZ0IHByb3BlcnR5CiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiA6IEdpZnQgcHJvcGVydHkKICAgIC8vLyBAcmV0dXJuIEdpZnRJZAogICAgZnVuY3Rpb24gY3JlYXRlR2lmdCh1aW50MjU2IF9wcmljZSwgc3RyaW5nIF9kZXNjcmlwdGlvbiwgc3RyaW5nIF91cmwpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lcgogICAgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIHNhdmUgdGVtcG9yYXJpbHkgbmV3IEdpZnQKICAgICAgICBHaWZ0IG1lbW9yeSBuZXdHaWZ0ID0gR2lmdCh7CiAgICAgICAgICAgIHByaWNlOiBfcHJpY2UsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfZGVzY3JpcHRpb24KICAgICAgICB9KTsKICAgICAgICAvLyBwdXNoIHRvIGFycmF5IGFuZCByZXR1cm4gdGhlIGxlbmd0aCBpcyB0aGUgaWQgb2YgbmV3IEdpZnQKICAgICAgICB1aW50MjU2IG5ld0dpZnRJZCA9IGdpZnRTdG9yYWdlLnB1c2gobmV3R2lmdCkgLSAxOwogICAgICAgIC8vIHR1cm4gb24gZXhpc3RlbgogICAgICAgIEdpZnRFeGlzdHNbbmV3R2lmdElkXSA9IHRydWU7CiAgICAgICAgLy8gYXNzaW4gZ2lmdCB1cmwKICAgICAgICBHaWZ0TGlua3NbbmV3R2lmdElkXSA9IF91cmw7CiAgICAgICAgLy8gZXZlbnQgY3JlYXRlIG5ldyBHaWZ0IGZvciBtc2cuc2VuZGVyCiAgICAgICAgQ3JlYXRpb24obXNnLnNlbmRlciwgbmV3R2lmdElkKTsKICAgICAgICAKICAgICAgICAvLyBUaGlzIHdpbGwgYXNzaWduIG93bmVyc2hpcCwgYW5kIGFsc28gZW1pdCB0aGUgVHJhbnNmZXIgZXZlbnQgYXMKICAgICAgICAvLyBwZXIgRVJDNzIxIGRyYWZ0CiAgICAgICAgX3RyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIG5ld0dpZnRJZCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG5ld0dpZnRJZDsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgZ2V0IEdpZnQgcHJvcGVydHkKICAgIC8vLyBAcGFyYW0gR2lmdElkIDogaWQgb2YgR2lmdAogICAgLy8vIEByZXR1cm4gcHJvcGVydGllcyBvZiBHaWZ0CiAgICBmdW5jdGlvbiBnZXRHaWZ0KHVpbnQyNTYgR2lmdElkKQogICAgcHVibGljCiAgICBjb25zdGFudCAKICAgIHJldHVybnMgKHVpbnQyNTYsIHN0cmluZyl7CiAgICAgICAgaWYoR2lmdElkID4gZ2lmdFN0b3JhZ2UubGVuZ3RoKXsKICAgICAgICAgICAgcmV0dXJuICgwLCAiIik7CiAgICAgICAgfQogICAgICAgIEdpZnQgbWVtb3J5IG5ld0dpZnQgPSBnaWZ0U3RvcmFnZVtHaWZ0SWRdOwogICAgICAgIHJldHVybiAobmV3R2lmdC5wcmljZSwgbmV3R2lmdC5kZXNjcmlwdGlvbik7CiAgICB9CiAgICAKICAgIC8vLyBAZGV2IGNoYW5nZSBnaWZ0IHByb3BlcnRpZXMKICAgIC8vLyBAcGFyYW0gR2lmdElkIDogdG8gY2hhbmdlCiAgICAvLy8gQHBhcmFtIF9wcmljZSA6IG5ldyBwcmljZSBvZiBnaWZ0CiAgICAvLy8gQHBhcmFtIF9kZXNjcmlwdGlvbiA6IG5ldyBkZXNjcmlwdGlvbgogICAgLy8vIEBwYXJhbSBfZ2lmdFVybCA6IG5ldyB1cmwgCiAgICBmdW5jdGlvbiB1cGRhdGVHaWZ0KHVpbnQyNTYgR2lmdElkLCB1aW50MjU2IF9wcmljZSwgc3RyaW5nIF9kZXNjcmlwdGlvbiwgc3RyaW5nIF9naWZ0VXJsKQogICAgcHVibGljCiAgICBvbmx5T3duZXIgewogICAgICAgIC8vIGNoZWNrIEdpZnQgZXhpc3QgRmlyc3QKICAgICAgICByZXF1aXJlKEdpZnRFeGlzdHNbR2lmdElkXSk7CiAgICAgICAgLy8gc2V0dGluZyBuZXcgcHJvcGVydGllcwogICAgICAgIGdpZnRTdG9yYWdlW0dpZnRJZF0ucHJpY2UgPSBfcHJpY2U7CiAgICAgICAgZ2lmdFN0b3JhZ2VbR2lmdElkXS5kZXNjcmlwdGlvbiA9IF9kZXNjcmlwdGlvbjsKICAgICAgICBHaWZ0TGlua3NbR2lmdElkXSA9IF9naWZ0VXJsOwogICAgfQogICAgCiAgICAvLy8gQGRldiByZW1vdmUgZ2lmdCAKICAgIC8vLyBAcGFyYW0gR2lmdElkIDogZ2lmdCBpZCB0byByZW1vdmUKICAgIGZ1bmN0aW9uIHJlbW92ZUdpZnQodWludDI1NiBHaWZ0SWQpCiAgICBwdWJsaWMKICAgIG9ubHlPd25lciB7CiAgICAgICAgLy8ganVzdCBzZXR0aW5nIEdpZnRFeGlzdHMgZXF1YWwgdG8gZmFsc2UKICAgICAgICBHaWZ0RXhpc3RzW0dpZnRJZF0gPSBmYWxzZTsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgd2l0aGRyYXcgR1RPIGluIHRoaXMgY29udHJhY3QKICAgIGZ1bmN0aW9uIHdpdGhkcmF3R1RPKCkKICAgIG9ubHlPd25lcgogICAgcHVibGljIHsKICAgICAgICBHVE8udHJhbnNmZXIob3duZXIsIEdUTy5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpOwogICAgfQogICAgCn0='.
	

]
