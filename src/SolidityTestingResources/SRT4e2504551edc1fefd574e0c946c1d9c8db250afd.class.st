Class {
	#name : #SRT4e2504551edc1fefd574e0c946c1d9c8db250afd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4e2504551edc1fefd574e0c946c1d9c8db250afd >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjE5OwoKLy8vZnJvbSBaZXBwZWxpbgpjb250cmFjdCBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgdWludCBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgICAgICBpZiAoIWFzc2VydGlvbikgdGhyb3c7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgYWRkcmVzcyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IEZpbmFsaXphYmxlIGlzIE93bmVkIHsKICAgIGJvb2wgcHVibGljIGZpbmFsaXplZDsKCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciB7CiAgICAgICAgZmluYWxpemVkID0gdHJ1ZTsKICAgIH0KCiAgICBtb2RpZmllciBub3RGaW5hbGl6ZWQoKSB7CiAgICAgICAgaWYgKGZpbmFsaXplZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KfQoKY29udHJhY3QgQml0dGxlU29sdXRpb25zICB7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IFRva2VuUmVjZWl2YWJsZSBpcyBPd25lZCB7CiAgICBldmVudCBsb2dUb2tlblRyYW5zZmVyKGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KTsKCiAgICBmdW5jdGlvbiBjbGFpbVRva2VucyhhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfdG8pIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICAgICAgQml0dGxlU29sdXRpb25zIHRva2VuID0gQml0dGxlU29sdXRpb25zIChfdG9rZW4pOwogICAgICAgIHVpbnQgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAodG9rZW4udHJhbnNmZXIoX3RvLCBiYWxhbmNlKSkgewogICAgICAgICAgICBsb2dUb2tlblRyYW5zZmVyKF90b2tlbiwgX3RvLCBiYWxhbmNlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKY29udHJhY3QgRXZlbnREZWZpbml0aW9ucyB7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9Cgpjb250cmFjdCBCaXR0bGUgaXMgRmluYWxpemFibGUsIFRva2VuUmVjZWl2YWJsZSwgU2FmZU1hdGgsIEV2ZW50RGVmaW5pdGlvbnMgewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJCaXR0bGUiOwogICAgdWludDggcHVibGljIGRlY2ltYWxzID0gMTA7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJCVFQiOwoKICAgIENvbnRyb2xsZXIgY29udHJvbGxlcjsKICAgIGFkZHJlc3Mgb3duZXI7CgogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhjb250cm9sbGVyKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cm9sbGVyKGFkZHJlc3MgX2MpIG9ubHlPd25lciBub3RGaW5hbGl6ZWQgewogICAgICAgIGNvbnRyb2xsZXIgPSBDb250cm9sbGVyKF9jKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBhKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuYmFsYW5jZU9mKGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBjb250cm9sbGVyLnRvdGFsU3VwcGx5KCk7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkKICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICBzdWNjZXNzID0gY29udHJvbGxlci50cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgb25seVBheWxvYWRTaXplKDMpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgIHN1Y2Nlc3MgPSBjb250cm9sbGVyLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpCiAgICBvbmx5UGF5bG9hZFNpemUoMikKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vcHJvbW90ZSBzYWZlIHVzZXIgYmVoYXZpb3IKICAgICAgICBpZiAoY29udHJvbGxlci5hbGxvd2FuY2UobXNnLnNlbmRlciwgX3NwZW5kZXIpID4gMCkgdGhyb3c7CgogICAgICAgIHN1Y2Nlc3MgPSBjb250cm9sbGVyLmFwcHJvdmUobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpCiAgICBvbmx5UGF5bG9hZFNpemUoMikKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHN1Y2Nlc3MgPSBjb250cm9sbGVyLmluY3JlYXNlQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hZGRlZFZhbHVlKTsKICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICB1aW50IG5ld3ZhbCA9IGNvbnRyb2xsZXIuYWxsb3dhbmNlKG1zZy5zZW5kZXIsIF9zcGVuZGVyKTsKICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIG5ld3ZhbCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkKICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgc3VjY2VzcyA9IGNvbnRyb2xsZXIuZGVjcmVhc2VBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgdWludCBuZXd2YWwgPSBjb250cm9sbGVyLmFsbG93YW5jZShtc2cuc2VuZGVyLCBfc3BlbmRlcik7CiAgICAgICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBuZXd2YWwpOwogICAgICAgIH0KICAgIH0KCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW13b3JkcykgewogICAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPj0gbnVtd29yZHMgKiAzMiArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gYnVybih1aW50IF9hbW91bnQpIHsKICAgICAgICBjb250cm9sbGVyLmJ1cm4obXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb250cm9sbGVyVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgb25seUNvbnRyb2xsZXIgewogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gY29udHJvbGxlckFwcHJvdmUoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKQogICAgb25seUNvbnRyb2xsZXIgewogICAgICAgIEFwcHJvdmFsKF9vd25lciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CgogICAgLy8gbXVsdGktYXBwcm92ZSwgbXVsdGktdHJhbnNmZXIKCiAgICBib29sIHB1YmxpYyBtdWx0aWxvY2tlZDsKCiAgICBtb2RpZmllciBub3RNdWx0aWxvY2tlZCB7CiAgICAgICAgYXNzZXJ0KCFtdWx0aWxvY2tlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL2RvIHdlIHdhbnQgbG9jayBwZXJtYW5lbnQ/IEkgdGhpbmsgc28uCiAgICBmdW5jdGlvbiBsb2NrTXVsdGlzKCkgb25seU93bmVyIHsKICAgICAgICBtdWx0aWxvY2tlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIG11bHRpIGZ1bmN0aW9ucyBqdXN0IGlzc3VlIGV2ZW50cywgdG8gZml4IGluaXRpYWwgZXZlbnQgaGlzdG9yeQoKICAgIGZ1bmN0aW9uIG11bHRpVHJhbnNmZXIodWludFtdIGJpdHMpIG9ubHlPd25lciBub3RNdWx0aWxvY2tlZCB7CiAgICAgICAgaWYgKGJpdHMubGVuZ3RoICUgMyAhPSAwKSB0aHJvdzsKICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPGJpdHMubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgICAgYWRkcmVzcyBmcm9tID0gYWRkcmVzcyhiaXRzW2ldKTsKICAgICAgICAgICAgYWRkcmVzcyB0byA9IGFkZHJlc3MoYml0c1tpKzFdKTsKICAgICAgICAgICAgdWludCBhbW91bnQgPSBiaXRzW2krMl07CiAgICAgICAgICAgIFRyYW5zZmVyKGZyb20sIHRvLCBhbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBtdWx0aUFwcHJvdmUodWludFtdIGJpdHMpIG9ubHlPd25lciBub3RNdWx0aWxvY2tlZCB7CiAgICAgICAgaWYgKGJpdHMubGVuZ3RoICUgMyAhPSAwKSB0aHJvdzsKICAgICAgICBmb3IgKHVpbnQgaT0wOyBpPGJpdHMubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgICAgYWRkcmVzcyBvd25lciA9IGFkZHJlc3MoYml0c1tpXSk7CiAgICAgICAgICAgIGFkZHJlc3Mgc3BlbmRlciA9IGFkZHJlc3MoYml0c1tpKzFdKTsKICAgICAgICAgICAgdWludCBhbW91bnQgPSBiaXRzW2krMl07CiAgICAgICAgICAgIEFwcHJvdmFsKG93bmVyLCBzcGVuZGVyLCBhbW91bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBzdHJpbmcgcHVibGljIG1vdGQ7CiAgICBldmVudCBNb3RkKHN0cmluZyBtZXNzYWdlKTsKICAgIGZ1bmN0aW9uIHNldE1vdGQoc3RyaW5nIF9tKSBvbmx5T3duZXIgewogICAgICAgIG1vdGQgPSBfbTsKICAgICAgICBNb3RkKF9tKTsKICAgIH0KfQoKY29udHJhY3QgQ29udHJvbGxlciBpcyBPd25lZCwgRmluYWxpemFibGUgewogICAgTGVkZ2VyIHB1YmxpYyBsZWRnZXI7CiAgICBhZGRyZXNzIHB1YmxpYyB0b2tlbjsKCiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIF90b2tlbikgb25seU93bmVyIHsKICAgICAgICB0b2tlbiA9IF90b2tlbjsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMZWRnZXIoYWRkcmVzcyBfbGVkZ2VyKSBvbmx5T3duZXIgewogICAgICAgIGxlZGdlciA9IExlZGdlcihfbGVkZ2VyKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5VG9rZW4oKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gdG9rZW4pIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGxlZGdlci50b3RhbFN1cHBseSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9hKSBvbmx5VG9rZW4gY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBMZWRnZXIobGVkZ2VyKS5iYWxhbmNlT2YoX2EpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikKICAgIG9ubHlUb2tlbiBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGxlZGdlci5hbGxvd2FuY2UoX293bmVyLCBfc3BlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgb25seVRva2VuCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gbGVkZ2VyLnRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX3NwZW5kZXIsIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkKICAgIG9ubHlUb2tlbgogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIGxlZGdlci50cmFuc2ZlckZyb20oX3NwZW5kZXIsIF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpCiAgICBvbmx5VG9rZW4KICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBsZWRnZXIuYXBwcm92ZShfb3duZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKQogICAgb25seVRva2VuCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gbGVkZ2VyLmluY3JlYXNlQXBwcm92YWwoX293bmVyLCBfc3BlbmRlciwgX2FkZGVkVmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpCiAgICBvbmx5VG9rZW4KICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBsZWRnZXIuZGVjcmVhc2VBcHByb3ZhbChfb3duZXIsIF9zcGVuZGVyLCBfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KCgogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBvbmx5VG9rZW4gewogICAgICAgIGxlZGdlci5idXJuKF9vd25lciwgX2Ftb3VudCk7CiAgICB9Cn0KCmNvbnRyYWN0IExlZGdlciBpcyBPd25lZCwgU2FmZU1hdGgsIEZpbmFsaXphYmxlIHsKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93YW5jZTsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGZ1bmN0aW9uIHNldENvbnRyb2xsZXIoYWRkcmVzcyBfY29udHJvbGxlcikgb25seU93bmVyIG5vdEZpbmFsaXplZCB7CiAgICAgICAgY29udHJvbGxlciA9IF9jb250cm9sbGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlDb250cm9sbGVyKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNvbnRyb2xsZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKQogICAgb25seUNvbnRyb2xsZXIKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSByZXR1cm4gZmFsc2U7CgogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VPZltfZnJvbV0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW190b10gPSBzYWZlQWRkKGJhbGFuY2VPZltfdG9dLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9zcGVuZGVyLCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpCiAgICBvbmx5Q29udHJvbGxlcgogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VPZltfZnJvbV0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKCiAgICAgICAgdmFyIGFsbG93ZWQgPSBhbGxvd2FuY2VbX2Zyb21dW19zcGVuZGVyXTsKICAgICAgICBpZiAoYWxsb3dlZCA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW19zcGVuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZCwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkKICAgIG9ubHlDb250cm9sbGVyCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL3JlcXVpcmUgdXNlciB0byBzZXQgdG8gemVybyBiZWZvcmUgcmVzZXR0aW5nIHRvIG5vbnplcm8KICAgICAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdICE9IDApKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkKICAgIG9ubHlDb250cm9sbGVyCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdOwogICAgICAgIGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXSA9IHNhZmVBZGQob2xkVmFsdWUsIF9hZGRlZFZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKQogICAgb25seUNvbnRyb2xsZXIKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2FuY2VbX293bmVyXVtfc3BlbmRlcl07CiAgICAgICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICAgICAgICBhbGxvd2FuY2VbX293bmVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93YW5jZVtfb3duZXJdW19zcGVuZGVyXSA9IHNhZmVTdWIob2xkVmFsdWUsIF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBldmVudCBMb2dNaW50KGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludCBhbW91bnQpOwogICAgZXZlbnQgTG9nTWludGluZ1N0b3BwZWQoKTsKCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX2EsIHVpbnQgX2Ftb3VudCkgb25seU93bmVyIG1pbnRpbmdBY3RpdmUgewogICAgICAgIGJhbGFuY2VPZltfYV0gKz0gX2Ftb3VudDsKICAgICAgICB0b3RhbFN1cHBseSArPSBfYW1vdW50OwogICAgICAgIExvZ01pbnQoX2EsIF9hbW91bnQpOwogICAgfQoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdTdG9wcGVkOwoKICAgIGZ1bmN0aW9uIHN0b3BNaW50aW5nKCkgb25seU93bmVyIHsKICAgICAgICBtaW50aW5nU3RvcHBlZCA9IHRydWU7CiAgICAgICAgTG9nTWludGluZ1N0b3BwZWQoKTsKICAgIH0KCiAgICBtb2RpZmllciBtaW50aW5nQWN0aXZlKCkgewogICAgICAgIGlmIChtaW50aW5nU3RvcHBlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBiYWxhbmNlT2ZbX293bmVyXSA9IHNhZmVTdWIoYmFsYW5jZU9mW19vd25lcl0sIF9hbW91bnQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gc2FmZVN1Yih0b3RhbFN1cHBseSwgX2Ftb3VudCk7CiAgICB9Cn0='.
	

]
