Class {
	#name : #SRTce5c603c78d047ef43032e96b5b785324f753a4f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTce5c603c78d047ef43032e96b5b785324f753a4f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gVkVSU0lPTiBMQVZBKEopICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gaGVyZSdzIGhvdyB0aGlzIHdvcmtzOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gdGhlIGN1cnJlbnQgYW1vdW50IG9mIGRpdmlkZW5kcyBkdWUgdG8gZWFjaCB0b2tlbi1ob2xkZXIncyAgaXM6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gICBwcmV2aW91c19kdWUgKyBbIHAoeCkgKiB0KHgpL04gXSArIFsgcCh4KzEpICogdCh4KzEpL04gXSArIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gICB3aGVyZSBwKHgpIGlzIHRoZSB4J3RoIHBheW1lbnQgcmVjZWl2ZWQgYnkgdGhlIGNvbnRyYWN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gICAgICAgICB0KHgpIGlzIHRoZSBudW1iZXIgb2YgdG9rZW5zIGhlbGQgYnkgdGhlIHRva2VuLWhvbGRlciBhdCB0aGUgdGltZSBvZiBwKHgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gICAgICAgICBOICAgIGlzIHRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zLCB3aGljaCBuZXZlciBjaGFuZ2VzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLy8gYXNzdW1lIHRoYXQgdCh4KSB0YWtlcyBvbiAzIHZhbHVlcywgdChhKSwgdChiKSBhbmQgdChjKSwgZHVyaW5nIHBlcmlvZHMgYSwgYiwgYW5kIGMuIHRoZW46Ci8vIGZhY3RvcmluZzoKLy8gICBjdXJyZW50X2R1ZSA9IHsgKHQoYSkgKiBbcCh4KSArIHAoeCsxKV0gLi4uKSArCi8vICAgICAgICAgICAgICAgICAgICh0KGIpICogW3AoeSkgKyBwKHkrMSldIC4uLikgKwovLyAgICAgICAgICAgICAgICAgICAodChjKSAqIFtwKHopICsgcCh6KzEpXSAuLi4pIH0gLyBOCi8vCi8vIG9yCi8vCi8vICAgY3VycmVudF9kdWUgPSB7ICh0KGEpICogcGVyaW9kX2FfZmVlcykgKwovLyAgICAgICAgICAgICAgICAgICAodChiKSAqIHBlcmlvZF9iX2ZlZXMpICsKLy8gICAgICAgICAgICAgICAgICAgKHQoYykgKiBwZXJpb2RfY19mZWVzKSB9IC8gTgovLwovLyBpZiB3ZSBkZXNpZ25hdGUgY3VycmVudF9kdWUgKiBOIGFzIGN1cnJlbnQtcG9pbnRzLCB0aGVuCi8vCi8vICAgY3VycmVudFBvaW50cyA9IHsgICh0KGEpICogcGVyaW9kX2FfZmVlcykgKwovLyAgICAgICAgICAgICAgICAgICAgICAodChiKSAqIHBlcmlvZF9iX2ZlZXMpICsKLy8gICAgICAgICAgICAgICAgICAgICAgKHQoYykgKiBwZXJpb2RfY19mZWVzKSB9Ci8vCi8vIG9yIG1vcmUgc3VjY2ljdGx5LCBpZiB3ZSByZWNvbXB1dGUgY3VycmVudCBwb2ludHMgYmVmb3JlIGEgdG9rZW4taG9sZGVyJ3MgbnVtYmVyIG9mCi8vIHRva2VucywgVCwgaXMgYWJvdXQgdG8gY2hhbmdlOgovLwovLyAgIGN1cnJlbnRQb2ludHMgPSBwcmV2aW91c19wb2ludHMgKyAoVCAqIGN1cnJlbnQtcGVyaW9kLWZlZXMpCi8vCi8vIHdoZW4gd2Ugd2FudCB0byBkbyBhIHBheW91dCwgd2UnbGwgY2FsY3VsYXRlOgovLyAgY3VycmVudF9kdWUgPSBjdXJyZW50LXBvaW50cyAvIE4KLy8KLy8gd2UnbGwga2VlcCB0cmFjayBvZiBhIHRva2VuLWhvbGRlcidzIGN1cnJlbnQtcGVyaW9kLXBvaW50cywgd2hpY2ggaXM6Ci8vICAgVCAqIGN1cnJlbnQtcGVyaW9kLWZlZXMKLy8gYnkgdGFraW5nIGEgc25hcHNob3Qgb2YgZmVlcyBjb2xsZWN0ZWQgZXhhY3RseSB3aGVuIHRoZSBjdXJyZW50IHBlcmlvZCBiZWdhbjsgdGhhdCBpcywgdGhlIHdoZW4gdGhlCi8vIG51bWJlciBvZiB0b2tlbnMgbGFzdCBjaGFuZ2VkLiB0aGF0IGlzLCB3ZSBrZWVwIGEgcnVubmluZyBjb3VudCBvZiB0b3RhbCBmZWVzIHJlY2VpdmVkCi8vCi8vICAgVG90YWxGZWVzUmVjZWl2ZWQgPSBwKHgpICsgcCh4KzEpICsgcCh4KzIpCi8vCi8vICh3aGljaCBoYXBwaWx5IGlzIHRoZSBzYW1lIGZvciBhbGwgdG9rZW4gaG9sZGVycykgdGhlbiwgYmVmb3JlIGFueSB0b2tlbiBob2xkZXIgY2hhbmdlcyB0aGVpciBudW1iZXIgb2YKLy8gdG9rZW5zIHdlIGNvbXB1dGUgKGZvciB0aGF0IHRva2VuIGhvbGRlcik6Ci8vCi8vICBmdW5jdGlvbiBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhY2N0KSB7Ci8vICAgIGN1cnJlbnRQb2ludHNbYWNjdF0gKz0gKFRvdGFsRmVlc1JlY2VpdmVkIC0gbGFzdFNuYXBzaG90W2FjY3RdKSAqIFRbYWNjdF0KLy8gICAgbGFzdFNuYXBzaG90W2FjY3RdID0gVG90YWxGZWVzUmVjZWl2ZWQKLy8gIH0KLy8KLy8gaW4gdGhlIHdpdGhkcmF3IGZjbiwgYWxsIHdlIG5lZWQgaXM6Ci8vCi8vICBmdW5jdGlvbiB3aXRoZHJhdyhhY2N0KSB7Ci8vICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KGFjY3QpOwovLyAgICBjdXJyZW50X2Ftb3VudF9kdWUgPSBjdXJyZW50UG9pbnRzW2FjY3RdIC8gTgovLyAgICBjdXJyZW50UG9pbnRzW2FjY3RdID0gMDsKLy8gICAgc2VuZChjdXJyZW50X2Ftb3VudF9kdWUpOwovLyAgfQovLwovLwovLyBzcGVjaWFsIHByb3Zpc2lvbnMgZm9yIHRyYW5zZmVycyBmcm9tIHRoZSBvbGQgZTRyb3cgY29udHJhY3QgKHRva2VuLXNwbGl0IHRyYW5zZmVycykKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBub3JtYWxseSB3aGVuIGEgbmV3IGFjY3QgaXMgY3JlYXRlZCwgZWcgY3V6IHRva2VucyBhcmUgdHJhbnNmZXJyZWQgZnJvbSBvbmUgYWNjdCB0byBhbm90aGVyLCB3ZSBmaXJzdCBjYWxsCi8vIGNhbGNDdXJQb2ludHNGb3JBY2N0KGFjY3QpIG9uIHRoZSBvbGQgYWNjdDsgb24gdGhlIG5ldyBhY2N0IHdlIHNldDoKLy8gIGN1cnJlbnRQb2ludHNbYWNjdF0gPSAwOwovLyAgbGFzdFNuYXBzaG90W2FjY3RdID0gVG90YWxGZWVzUmVjZWl2ZWQ7Ci8vCi8vIHRoaXMgc3RhcnRzIHRoZSBuZXcgYWNjb3VudCB3aXRoIG5vIGNyZWRpdHMgZm9yIGFueSBkaXZpZGVuZHMgdGhhdCBoYXZlIGJlZW4gY29sbGVjdGVkIHNvIGZhciwgd2hpY2ggaXMgd2hhdAovLyB5b3Ugd291bGQgZ2VuZXJhbGx5IHdhbnQuIGhvd2V2ZXIsIHRoZXJlIGlzIGEgY2FzZSBpbiB3aGljaCB0b2tlbnMgYXJlIHRyYW5zZmVycmVkIGZyb20gdGhlIG9sZCBlNHJvdyBjb250cmFjdC4KLy8gaW4gdGhhdCBjYXNlIHRoZSB0b2tlbnMgd2VyZSByZXNlcnZlZCBvbiB0aGlzIGNvbnRyYWN0IGFsbCBhbG9uZywgYW5kIHRoZXkgZWFybiBkaXZpZGVuZHMgZXZlbiBiZWZvcmUgdGhleSBhcmUKLy8gYXNzaWduZWQgdG8gYW4gYWNjb3VudC4gc28gZm9yIHRva2VuLXNwbGl0IHRyYW5zZmVyczoKLy8gIGN1cnJlbnRQb2ludHNbYWNjdF0gPSAwOwovLyAgbGFzdFNuYXBzaG90W2FjY3RdID0gMDsKLy8KLy8gdGhlbiBpbW1lZGlhdGVseSBjYWxsIGNhbGNDdXJQb2ludHNGb3JBY2N0KGFjY3QpIGZvciB0aGUgbmV3IHRva2VuLXNwbGl0IGFjY291bnQuIGhlIHdpbGwgZ2V0IGNyZWRpdAovLyBmb3IgYWxsIHRoZSBhY2N1bXVsYXRlZCBwb2ludHMsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aW1lLgovLwovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8vIEFic3RyYWN0IGNvbnRyYWN0IGZvciB0aGUgZnVsbCBFUkMgMjAgVG9rZW4gc3RhbmRhcmQKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gQUJTVFJBQ1Qgc3RhbmRhcmQgdG9rZW4gY2xhc3MKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IFRva2VuIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gIEU0Um93UmV3YXJkcyAtIGFic3RyYWN0IGU0IGRpdmlkZW5kIGNvbnRyYWN0Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEU0TGF2YVJld2FyZHMKewogICAgICAgIGZ1bmN0aW9uIGNoZWNrRGl2aWRlbmRzKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfYW1vdW50KTsKICAgICAgICBmdW5jdGlvbiB3aXRoZHJhd0RpdmlkZW5kcygpIHB1YmxpYyByZXR1cm5zICh1aW50IG5hbW91bnQpOwogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyRGl2aWRlbmRzKGFkZHJlc3MgX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgICAgIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfdG9rZW5zLCB1aW50IF9zbmFwc2hvdCwgdWludCBfcG9pbnRzKTsKCn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vICBFNExhdmFPcHRpbiAtIGFic3RyYWN0IGU0IG9wdGluIGNvbnRyYWN0Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEU0TGF2YU9wdEluCnsKICAgICAgICBmdW5jdGlvbiBvcHRJbkZyb21DbGFzc2ljKCkgcHVibGljOwp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gIEU0Uk9XIChMQVZBKSAtIHRva2VuIGNvbnRyYWN0Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IEU0TGF2YSBpcyBUb2tlbiwgRTRMYXZhUmV3YXJkcywgRTRMYXZhT3B0SW4gewogICAgICAgIGV2ZW50IFN0YXRFdmVudChzdHJpbmcgbXNnKTsKICAgICAgICBldmVudCBTdGF0RXZlbnRJKHN0cmluZyBtc2csIHVpbnQgdmFsKTsKCiAgICAgICAgZW51bSBTZXR0aW5nU3RhdGVWYWx1ZSAge2RlYnVnLCBsb2NrZWRSZWxlYXNlfQoKICAgICAgICBzdHJ1Y3QgdG9rZW5BY2NvdW50IHsKICAgICAgICAgICAgICAgIGJvb2wgYWxsb2NlZDsgICAgICAgLy8gZmxhZyB0byBhc2NlcnQgcHJpb3IgYWxsb2NhdGlvbgogICAgICAgICAgICAgICAgdWludCB0b2tlbnM7ICAgICAgICAvLyBudW0gdG9rZW5zIGN1cnJlbnRseSBoZWxkIGluIHRoaXMgYWNjdAogICAgICAgICAgICAgICAgdWludCBjdXJyZW50UG9pbnRzOyAvLyB1cGRhdGVkIGJlZm9yZSB0b2tlbiBiYWxhbmNlIGNoYW5nZXMsIG9yIGJlZm9yZSBhIHdpdGhkcmF3YWwuIGNyZWRpdCBmb3Igb3duaW5nIHRva2VucwogICAgICAgICAgICAgICAgdWludCBsYXN0U25hcHNob3Q7ICAvLyBzbmFwc2hvdCBvZiBnbG9iYWwgVG90YWxQb2ludHMsIGxhc3QgdGltZSB3ZSB1cGRhdGVkIHRoaXMgYWNjdCdzIGN1cnJlbnRQb2ludHMKICAgICAgICB9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyAgZGF0YSBzdG9yYWdlCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICB1aW50IGNvbnN0YW50IE51bU9yaWdUb2tlbnMgICAgICAgICA9IDU3NjI7ICAgLy8gbnVtYmVyIG9mIG9sZCB0b2tlbnMsIGZyb20gb3JpZ2luYWwgdG9rZW4gY29udHJhY3QKICAgICAgICB1aW50IGNvbnN0YW50IE5ld1Rva2Vuc1Blck9yaWdUb2tlbiA9IDEwMDAwMDsgLy8gaG93IG1hbnkgbmV3IHRva2VucyBhcmUgY3JlYXRlZCBmb3IgZWFjaCBmcm9tIG9yaWdpbmFsIHRva2VuCiAgICAgICAgdWludCBjb25zdGFudCBOZXdUb2tlblN1cHBseSAgICAgICAgPSA1NzYyICogMTAwMDAwOwogICAgICAgIHVpbnQgcHVibGljIG51bVRva3NTd2l0Y2hlZE92ZXI7ICAgICAgICAgICAgICAvLyBjb3VudCBvbGQgdG9rZW5zIHRoYXQgaGF2ZSBiZWVuIGNvbnZlcnRlZAogICAgICAgIHVpbnQgcHVibGljIGhvbGRvdmVyQmFsYW5jZTsgICAgICAgICAgICAgICAgICAvLyBmdW5kcyByZWNlaXZlZCwgYnV0IG5vdCB5ZXQgZGlzdHJpYnV0ZWQKICAgICAgICB1aW50IHB1YmxpYyBUb3RhbEZlZXNSZWNlaXZlZDsgICAgICAgICAgICAgICAgLy8gdG90YWwgZmVlcyByZWNlaXZlZCBmcm9tIHBhcnRuZXIgY29udHJhY3QocykKCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgZGV2ZWxvcGVyczsgICAgICAgICAgICAgICAgICAgIC8vIGRldmVsb3BlcnMgdG9rZW4gaG9sZGluZyBhZGRyZXNzCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlcGxveWVyIGV4ZWN1dG9yCiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb2xkRTQ7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZHIgb2Ygb2xkIGU0IHRva2VuIGNvbnRyYWN0CiAgICAgICAgYWRkcmVzcyBwdWJsaWMgb2xkRTRSZWN5Y2xlQmluOyAgICAgICAgICAgICAgIC8vIGFkZHIgdG8gdHJhbnNmZXIgb2xkIHRva2VucwoKICAgICAgICB1aW50IHB1YmxpYyBkZWNpbWFsczsKICAgICAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKCiAgICAgICAgbWFwcGluZyAoYWRkcmVzcyA9PiB0b2tlbkFjY291bnQpIGhvbGRlckFjY291bnRzOyAgICAgICAgICAvLyB3aG8gaG9sZHMgaG93IG1hbnkgdG9rZW5zIChoaWdoIHR3byBieXRlcyBjb250YWluIGN1clBheUlkKQogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgaG9sZGVySW5kZXhlczsgICAgICAgICAgICAgICAgICAgLy8gZm9yIGl0ZXJhdGlvbiB0aHJ1IGhvbGRlcgogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsgLy8gYXBwcm92YWxzCiAgICAgICAgdWludCBwdWJsaWMgbnVtQWNjb3VudHM7CgogICAgICAgIHVpbnQgcHVibGljIHBheW91dFRocmVzaG9sZDsgICAgICAgICAgICAgICAgICAvLyBubyB3aXRoZHJhd2FscyBsZXNzIHRoYW4gdGhpcyBhbW91bnQsIHRvIGF2b2lkIHJlbWFpbmRlcnMKICAgICAgICB1aW50IHB1YmxpYyByd0dhczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV3YXJkIGdhcwogICAgICAgIHVpbnQgcHVibGljIG9wdEluWGZlckdhczsgICAgICAgICAgICAgICAgICAgICAvLyBnYXMgdXNlZCB3aGVuIG9wdEluRnJvbUNsYXNzaWMgY2FsbHMgeGZlciBvbiBvbGQgY29udHJhY3QKICAgICAgICB1aW50IHB1YmxpYyBvcHRJbkZjbk1pbkdhczsgICAgICAgICAgICAgICAgICAgLy8gZ2FzIHdlIG5lZWQgZm9yIHRoZSBvcHRJbkZyb21DbGFzc2ljIGZjbiwgKmV4Y2x1ZGluZyogb3B0SW5YZmVyR2FzCiAgICAgICAgdWludCBwdWJsaWMgdmVzdFRpbWUgPSAxNTI1MjE5MjAxOyAgICAgICAgICAgIC8vIDEgeWVhciBwYXN0IHNhbGUgdmVzdCBkZXZlbG9wZXIgdG9rZW5zCgogICAgICAgIFNldHRpbmdTdGF0ZVZhbHVlIHB1YmxpYyBzZXR0aW5nc1N0YXRlOwoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBjb250cmFjdCBjb25zdHJ1Y3RvcgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gRTRMYXZhKCkKICAgICAgICB7CiAgICAgICAgICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgICAgICBkZXZlbG9wZXJzID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgICAgIGRlY2ltYWxzID0gMjsKICAgICAgICAgICAgICAgIHN5bWJvbCA9ICJFNFJPVyI7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHVzZSB0aGlzIHRvIHJlc2V0IGV2ZXJ5dGhpbmcsIHdpbGwgbmV2ZXIgYmUgY2FsbGVkIGFmdGVyIGxvY2tSZWxlYXNlCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBhcHBseVNldHRpbmdzKFNldHRpbmdTdGF0ZVZhbHVlIHFTdGF0ZSwgdWludCBfdGhyZXNob2xkLCB1aW50IF9ydywgdWludCBfb3B0WGZlckdhcywgdWludCBfb3B0RmNuR2FzICkKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgICAgIC8vIHRoZXNlIHNldHRpbmdzIGFyZSBwZXJtYW5lbnRseSB0d2Vha2FibGUgZm9yIHBlcmZvcm1hbmNlIGFkanVzdG1lbnRzCiAgICAgICAgICAgICAgICBwYXlvdXRUaHJlc2hvbGQgPSBfdGhyZXNob2xkOwogICAgICAgICAgICAgICAgcndHYXMgPSBfcnc7CiAgICAgICAgICAgICAgICBvcHRJblhmZXJHYXMgPSBfb3B0WGZlckdhczsKICAgICAgICAgICAgICAgIG9wdEluRmNuTWluR2FzID0gX29wdEZjbkdhczsKCiAgICAgICAgICAgICAgICAvLyB0aGlzIGZpcnN0IHRlc3QgY2hlY2tzIGlmIGFscmVhZHkgbG9ja2VkCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgc2V0dGluZ3NTdGF0ZSA9IHFTdGF0ZTsKCiAgICAgICAgICAgICAgICAvLyB0aGlzIHNlY29uZCB0ZXN0IGFsbG93cyBsb2NraW5nIHdpdGhvdXQgY2hhbmdpbmcgb3RoZXIgcGVybWFuZW50IHNldHRpbmdzCiAgICAgICAgICAgICAgICAvLyBXQVJOSU5HLCBNQUtFIFNVUkUgWU9VUidSRSBIQVBQWSBXSVRIIEFMTCBTRVRUSU5HUwogICAgICAgICAgICAgICAgLy8gQkVGT1JFIExPQ0tJTkcKCiAgICAgICAgICAgICAgICBpZiAocVN0YXRlID09IFNldHRpbmdTdGF0ZVZhbHVlLmxvY2tlZFJlbGVhc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJMb2NraW5nISIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gemVybyBvdXQgYWxsIHRva2VuIGhvbGRlcnMuCiAgICAgICAgICAgICAgICAvLyBsZWF2ZSBhbGxvY2VkIG9uLCBsZWF2ZSBudW0gYWNjb3VudHMKICAgICAgICAgICAgICAgIC8vIGNhbnQgZGVsZXRlIHRoZW0gYW55d2F5cwoKICAgICAgICAgICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IG51bUFjY291bnRzOyBpKysgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgYSA9IGhvbGRlckluZGV4ZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1thXS50b2tlbnMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW2FdLmN1cnJlbnRQb2ludHMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW2FdLmxhc3RTbmFwc2hvdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBudW1Ub2tzU3dpdGNoZWRPdmVyID0gMDsKICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSA9IDA7CiAgICAgICAgICAgICAgICBUb3RhbEZlZXNSZWNlaXZlZCA9IDA7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFsYW5jZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvd25lci5jYWxsLmdhcyhyd0dhcykudmFsdWUodGhpcy5iYWxhbmNlKSgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiRVJST1IhIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIm9rIik7CgogICAgICAgIH0KCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGFsbG9jYXRlIGEgbmV3IGFjY291bnQgYnkgc2V0dGluZyBhbGxvYyB0byB0cnVlCiAgICAgICAgLy8gYWRkIGhvbGRlciBpbmRleCwgYnVtcCB0aGUgbnVtIGFjY291bnRzCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjb3VudChhZGRyZXNzIF9hZGRyKSBpbnRlcm5hbCAgewogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FkZHJdLmFsbG9jZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FkZHJdLnRva2VucyA9IDA7CiAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfYWRkcl0uY3VycmVudFBvaW50cyA9IDA7CiAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfYWRkcl0ubGFzdFNuYXBzaG90ID0gVG90YWxGZWVzUmVjZWl2ZWQ7CiAgICAgICAgICAgICAgICBob2xkZXJJbmRleGVzW251bUFjY291bnRzKytdID0gX2FkZHI7CiAgICAgICAgfQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEJFR0lOIEVSQy0yMCBmcm9tIFN0YW5kYXJkVG9rZW4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkKICAgICAgICB7CiAgICAgICAgICAgICAgICBzdXBwbHkgPSBOZXdUb2tlblN1cHBseTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzZW5kZXIgdHJhbnNmZXJzIHRva2VucyB0byBhIG5ldyBhY2N0CiAgICAgICAgLy8gZG8gbm90IHVzZSB0aGlzIGZjbiBmb3IgYSB0b2tlbi1zcGxpdCB0cmFuc2ZlciBmcm9tIHRoZSBvbGQgdG9rZW4gY29udHJhY3QhCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgobXNnLnNlbmRlciA9PSBkZXZlbG9wZXJzKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAgKG5vdyA8IHZlc3RUaW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvL3N0YXRFdmVudCgiVG9rZW5zIG5vdCB5ZXQgdmVzdGVkLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAgICAgICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgICAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgICAgICAgICAvL2lmIChob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS50b2tlbnMgPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBob2xkZXJBY2NvdW50c1tfdG9dKSB7CiAgICAgICAgICAgICAgICBpZiAoaG9sZGVyQWNjb3VudHNbbXNnLnNlbmRlcl0udG9rZW5zID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy9maXJzdCBjcmVkaXQgc2VuZGVyIHdpdGggcG9pbnRzIGFjY3J1ZWQgc28gZmFyLi4gbXVzdCBkbyB0aGlzIGJlZm9yZSBudW1iZXIgb2YgaGVsZCB0b2tlbnMgY2hhbmdlcwogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KG1zZy5zZW5kZXIpOwogICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW21zZy5zZW5kZXJdLnRva2VucyAtPSBfdmFsdWU7CgogICAgICAgICAgICAgICAgICAgIGlmICghaG9sZGVyQWNjb3VudHNbX3RvXS5hbGxvY2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFjY291bnQoX3RvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy9jcmVkaXQgZGVzdGluYXRpb24gYWNjdCB3aXRoIHBvaW50cyBhY2NydWVkIHNvIGZhci4uIG11c3QgZG8gdGhpcyBiZWZvcmUgbnVtYmVyIG9mIGhlbGQgdG9rZW5zIGNoYW5nZXMKICAgICAgICAgICAgICAgICAgICBjYWxjQ3VyUG9pbnRzRm9yQWNjdChfdG8pOwogICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW190b10udG9rZW5zICs9IF92YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBpZiAoKF9mcm9tID09IGRldmVsb3BlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICYmICAobm93IDwgdmVzdFRpbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3RhdEV2ZW50KCJUb2tlbnMgbm90IHlldCB2ZXN0ZWQuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgICAgICAgICAvL2lmIChob2xkZXJBY2NvdW50c1tfZnJvbV0udG9rZW5zID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgaG9sZGVyQWNjb3VudHNbX3RvXS50b2tlbnMgKyBfdmFsdWUgPiBob2xkZXJBY2NvdW50c1tfdG9dLnRva2VucykgewogICAgICAgICAgICAgICAgaWYgKGhvbGRlckFjY291bnRzW19mcm9tXS50b2tlbnMgPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CgogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KF9mcm9tKTsKICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tfZnJvbV0udG9rZW5zIC09IF92YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFob2xkZXJBY2NvdW50c1tfdG9dLmFsbG9jZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjb3VudChfdG8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvL2NyZWRpdCBkZXN0aW5hdGlvbiBhY2N0IHdpdGggcG9pbnRzIGFjY3J1ZWQgc28gZmFyLi4gbXVzdCBkbyB0aGlzIGJlZm9yZSBudW1iZXIgb2YgaGVsZCB0b2tlbnMgY2hhbmdlcwogICAgICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KF90byk7CiAgICAgICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX3RvXS50b2tlbnMgKz0gX3ZhbHVlOwoKICAgICAgICAgICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlID0gaG9sZGVyQWNjb3VudHNbX293bmVyXS50b2tlbnM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgICAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgICAgIH0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFTkQgRVJDMjAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gY2FsYyBjdXJyZW50IHBvaW50cyBmb3IgYSB0b2tlbiBob2xkZXI7IHRoYXQgaXMsIHBvaW50cyB0aGF0IGFyZSBkdWUgdG8gdGhpcyB0b2tlbiBob2xkZXIgZm9yIGFsbCBkaXZpZGVuZHMKICAgICAgICAvLyByZWNlaXZlZCBieSB0aGUgY29udHJhY3QgZHVyaW5nIHRoZSBjdXJyZW50ICJwZXJpb2QiLiB0aGUgcGVyaW9kIGJlZ2FuIHRoZSBsYXN0IHRpbWUgdGhpcyBmY24gd2FzIGNhbGxlZCwgYXQgd2hpY2gKICAgICAgICAvLyB0aW1lIHdlIHVwZGF0ZWQgdGhlIGFjY291bnQncyBzbmFwc2hvdCBvZiB0aGUgcnVubmluZyBwb2ludCBjb3VudCwgVG90YWxGZWVzUmVjZWl2ZWQuIGR1cmluZyB0aGUgcGVyaW9kIHRoZSBhY2NvdW50J3MKICAgICAgICAvLyBudW1iZXIgb2YgdG9rZW5zIG11c3Qgbm90IGhhdmUgY2hhbmdlZC4gc28gYWx3YXlzIGNhbGwgdGhpcyBmY24gYmVmb3JlIGNoYW5naW5nIHRoZSBudW1iZXIgb2YgdG9rZW5zLgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBjYWxjQ3VyUG9pbnRzRm9yQWNjdChhZGRyZXNzIF9hY2N0KSBpbnRlcm5hbCB7CiAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbX2FjY3RdLmN1cnJlbnRQb2ludHMgKz0gKFRvdGFsRmVlc1JlY2VpdmVkIC0gaG9sZGVyQWNjb3VudHNbX2FjY3RdLmxhc3RTbmFwc2hvdCkgKiBob2xkZXJBY2NvdW50c1tfYWNjdF0udG9rZW5zOwogICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW19hY2N0XS5sYXN0U25hcHNob3QgPSBUb3RhbEZlZXNSZWNlaXZlZDsKICAgICAgICB9CgoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBhY2NlcHQgcGF5bWVudCBmcm9tIGEgcGFydG5lciBjb250cmFjdAogICAgICAgIC8vIGZ1bmRzIHNlbnQgaGVyZSBhcmUgYWRkZWQgdG8gVG90YWxGZWVzUmVjZWl2ZWQKICAgICAgICAvLyBXQVJOSU5HISBETyBOT1QgQ0FMTCBUSElTIEZVTkNUSU9OIExFU1QgWU9VIExPU0UgWU9VUiBNT05FWQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgICAgICAgICAgaG9sZG92ZXJCYWxhbmNlICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgICAgIFRvdGFsRmVlc1JlY2VpdmVkICs9IG1zZy52YWx1ZTsKICAgICAgICAgICAgICAgIFN0YXRFdmVudEkoIlBheW1lbnQiLCBtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gb25lIG5ldmVyIGtub3dzIGlmIHRoaXMgd2lsbCBjb21lIGluIGhhbmR5LgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGJsYWNrSG9sZSgpIHBheWFibGUgewogICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgiYWRqdXN0ZWQiLCBtc2cudmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNlbmRlciB3aXRoZHJhdyBlbnRpcmUgcmV3YXJkcy9kaXZpZGVuZHMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gd2l0aGRyYXdEaXZpZGVuZHMoKSBwdWJsaWMgcmV0dXJucyAodWludCBfYW1vdW50KQogICAgICAgIHsKICAgICAgICAgICAgICAgIGNhbGNDdXJQb2ludHNGb3JBY2N0KG1zZy5zZW5kZXIpOwoKICAgICAgICAgICAgICAgIF9hbW91bnQgPSBob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzIC8gTmV3VG9rZW5TdXBwbHk7CiAgICAgICAgICAgICAgICBpZiAoX2Ftb3VudCA8PSBwYXlvdXRUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50SSgibG93IEJhbGFuY2UiLCBfYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtc2cuc2VuZGVyID09IGRldmVsb3BlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgIChub3cgPCB2ZXN0VGltZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRva2VucyBub3QgeWV0IHZlc3RlZC4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYW1vdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgX3BvaW50c1VzZWQgPSBfYW1vdW50ICogTmV3VG9rZW5TdXBwbHk7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW21zZy5zZW5kZXJdLmN1cnJlbnRQb2ludHMgLT0gX3BvaW50c1VzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGRvdmVyQmFsYW5jZSAtPSBfYW1vdW50OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5zZW5kZXIuY2FsbC5nYXMocndHYXMpLnZhbHVlKF9hbW91bnQpKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gYWxsb3cgc2VuZGVyIHRvIHRyYW5zZmVyIGRpdmlkZW5kcwogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckRpdmlkZW5kcyhhZGRyZXNzIF90bykgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgobXNnLnNlbmRlciA9PSBkZXZlbG9wZXJzKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAgKG5vdyA8IHZlc3RUaW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvL3N0YXRFdmVudCgiVG9rZW5zIG5vdCB5ZXQgdmVzdGVkLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYWxjQ3VyUG9pbnRzRm9yQWNjdChtc2cuc2VuZGVyKTsKICAgICAgICAgICAgICAgIGlmIChob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJaZXJvIGJhbGFuY2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFob2xkZXJBY2NvdW50c1tfdG9dLmFsbG9jZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjb3VudChfdG8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FsY0N1clBvaW50c0ZvckFjY3QoX3RvKTsKICAgICAgICAgICAgICAgIGhvbGRlckFjY291bnRzW190b10uY3VycmVudFBvaW50cyArPSBob2xkZXJBY2NvdW50c1ttc2cuc2VuZGVyXS5jdXJyZW50UG9pbnRzOwogICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbbXNnLnNlbmRlcl0uY3VycmVudFBvaW50cyA9IDA7CiAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRyYXNuZmVyZWQgRGl2aWRlbmRzIik7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNldCBnYXMgZm9yIG9wZXJhdGlvbnMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc2V0T3BHYXModWludCBfcncsIHVpbnQgX29wdFhmZXJHYXMsIHVpbnQgX29wdEZjbkdhcykKICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lciAmJiBtc2cuc2VuZGVyICE9IGRldmVsb3BlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9TdGF0RXZlbnQoIm9ubHkgb3duZXIgY2FsbHMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcndHYXMgPSBfcnc7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdEluWGZlckdhcyA9IF9vcHRYZmVyR2FzOwogICAgICAgICAgICAgICAgICAgICAgICBvcHRJbkZjbk1pbkdhcyA9IF9vcHRGY25HYXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIGNoZWNrIHJld2FyZHMuICBwYXNzIGluIGFkZHJlc3Mgb2YgdG9rZW4gaG9sZGVyCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGNoZWNrRGl2aWRlbmRzKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfYW1vdW50KQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChob2xkZXJBY2NvdW50c1tfYWRkcl0uYWxsb2NlZCkgewogICAgICAgICAgICAgICAgICAgLy9kb24ndCBjYWxsIGNhbGNDdXJQb2ludHNGb3JBY2N0IGhlcmUsIGN1eiB0aGlzIGlzIGEgY29uc3RhbnQgZmNuCiAgICAgICAgICAgICAgICAgICB1aW50IF9jdXJyZW50UG9pbnRzID0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmN1cnJlbnRQb2ludHMgKwogICAgICAgICAgICAgICAgICAgICAgICAoKFRvdGFsRmVlc1JlY2VpdmVkIC0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmxhc3RTbmFwc2hvdCkgKiBob2xkZXJBY2NvdW50c1tfYWRkcl0udG9rZW5zKTsKICAgICAgICAgICAgICAgICAgIF9hbW91bnQgPSBfY3VycmVudFBvaW50cyAvIE5ld1Rva2VuU3VwcGx5OwoKICAgICAgICAgICAgICAgIC8vIGxvdyBiYWxhbmNlPyBsZXQgaGltIHNlZSBpdCAtRXRhbnNreQogICAgICAgICAgICAgICAgICAvLyBpZiAoX2Ftb3VudCA8PSBwYXlvdXRUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgLy8gICAgX2Ftb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBzd2FwIGV4ZWN1dG9yCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBvd25lciA9IF9hZGRyOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIC8vIHNldCBkZXZlbG9wZXJzIGFjY291bnQKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gc2V0RGV2ZWxvcGVyKGFkZHJlc3MgX2FkZHIpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBkZXZlbG9wZXJzID0gX2FkZHI7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gc2V0IG9sZEU0IEFkZHJlc3NlcwogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBmdW5jdGlvbiBzZXRPbGRFNChhZGRyZXNzIF9vbGRFNCwgYWRkcmVzcyBfb2xkRTRSZWN5bGUpCiAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIKICAgICAgICAgICAgICAgICAgICAgICAgfHwgc2V0dGluZ3NTdGF0ZSA9PSBTZXR0aW5nU3RhdGVWYWx1ZS5sb2NrZWRSZWxlYXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBvbGRFNCA9IF9vbGRFNDsKICAgICAgICAgICAgICAgIG9sZEU0UmVjeWNsZUJpbiA9IF9vbGRFNFJlY3lsZTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBnZXQgYWNjb3VudCBpbmZvCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IHJldHVybnModWludCBfdG9rZW5zLCB1aW50IF9zbmFwc2hvdCwgdWludCBfcG9pbnRzKQogICAgICAgIHsKICAgICAgICAgICAgICAgIF90b2tlbnMgPSBob2xkZXJBY2NvdW50c1tfYWRkcl0udG9rZW5zOwogICAgICAgICAgICAgICAgX3NuYXBzaG90ID0gaG9sZGVyQWNjb3VudHNbX2FkZHJdLmxhc3RTbmFwc2hvdDsKICAgICAgICAgICAgICAgIF9wb2ludHMgPSBob2xkZXJBY2NvdW50c1tfYWRkcl0uY3VycmVudFBvaW50czsKICAgICAgICB9CgoKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgLy8gREVCVUcgT05MWSAtIGVuZCB0aGlzIGNvbnRyYWN0LCBzdWljaWRlIHRvIGRldmVsb3BlcnMKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gaGFyYUtpcmkoKQogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1N0YXRlICE9IFNldHRpbmdTdGF0ZVZhbHVlLmRlYnVnKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgICAgICBzdWljaWRlKGRldmVsb3BlcnMpOwogICAgICAgIH0KCgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAvLyBPUFQgSU4gRlJPTSBDTEFTU0lDLgogICAgICAgIC8vIEFsbCBvbGQgdG9rZW4gaG9sZGVycyBjYW4gb3B0IGludG8gdGhpcyBuZXcgY29udHJhY3QgYnkgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLgogICAgICAgIC8vIFRoaXMgInRyYW5zZmVyRnJvbSJzIHRva2VucyBmcm9tIHRoZSBvbGQgYWRkcmVzc2VzIHRvIHRoZSBuZXcgcmVjeWNsZUJpbiBhZGRyZXNzCiAgICAgICAgLy8gd2hpY2ggaXMgYSBuZXcgYWRkcmVzcyBzZXQgdXAgb24gdGhlIG9sZCBjb250cmFjdC4gIEFmdGVyd2hpY2ggbmV3IHRva2VucwogICAgICAgIC8vIGFyZSBjcmVkaXRlZCB0byB0aGUgb2xkIGhvbGRlci4gIEFsc28gdGhlIGxhc3RTbmFwU2hvdCBpcyBzZXQgdG8gMCB0aGVuCiAgICAgICAgLy8gY2FsY0NyZWRpdGVkIHBvaW50cyBhcmUgY2FsbGVkIHNldHRpbmcgdXAgdGhlIG5ldyBzaWduYXRvcmVlIGFsbCBvZiBoaXMKICAgICAgICAvLyBhY2NydWVkIGRpdmlkZW5kcy4KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZnVuY3Rpb24gb3B0SW5Gcm9tQ2xhc3NpYygpIHB1YmxpYwogICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChvbGRFNCA9PSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiY29uZmlnIGVyciIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAxLiBjaGVjayBiYWxhbmNlIG9mIG1zZy5zZW5kZXIgaW4gb2xkIGNvbnRyYWN0LgogICAgICAgICAgICAgICAgYWRkcmVzcyBucmVxdWVzdGVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgICAgICAgICAvLyAyLiBtYWtlIHN1cmUgYWNjb3VudCBub3QgYWxyZWFkeSBhbGxvY2QgKGluIGZhY3QsIGl0J3Mgb2sgaWYgaXQncyBhbGxvY2QsIHNvIGxvbmcKICAgICAgICAgICAgICAgIC8vIGFzIGl0IGlzIGVtcHR5IG5vdy4gdGhlIHJlYXNvbiBmb3IgdGhpcyBjaGVjayBpcyBjdXogd2UgYXJlIGdvaW5nIHRvIGNyZWRpdCBoaW0gd2l0aAogICAgICAgICAgICAgICAgLy8gZGl2aWRlbmRzLCBhY2NvcmRpbmcgdG8gaGlzIHRva2VuIGNvdW50LCBmcm9tIHRoZSBiZWdpbiBvZiB0aW1lLgogICAgICAgICAgICAgICAgaWYgKGhvbGRlckFjY291bnRzW25yZXF1ZXN0ZXJdLnRva2VucyAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRFdmVudCgiQWNjb3VudCBoYXMgYWxyZWFkeSBoYXMgdG9rZW5zISIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gMy4gY2hlY2sgaGlzIHRvayBiYWxhbmNlCiAgICAgICAgICAgICAgICBUb2tlbiBpY2xhc3NpYyA9IFRva2VuKG9sZEU0KTsKICAgICAgICAgICAgICAgIHVpbnQgX3Rva3MgPSBpY2xhc3NpYy5iYWxhbmNlT2YobnJlcXVlc3Rlcik7CiAgICAgICAgICAgICAgICBpZiAoX3Rva3MgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIk5vdGhpbmcgdG8gZG8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIG11c3QgYmUgMTAwIHBlcmNlbnQgb2YgaG9sZGluZ3MKICAgICAgICAgICAgICAgIGlmIChpY2xhc3NpYy5hbGxvd2FuY2UobnJlcXVlc3RlciwgYWRkcmVzcyh0aGlzKSkgPCBfdG9rcykgewogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlBsZWFzZSBhcHByb3ZlIHRoaXMgY29udHJhY3QgdG8gdHJhbnNmZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIDQuIGJlZm9yZSB3ZSBkbyB0aGUgdHJhbnNmZXIsIG1ha2Ugc3VyZSB0aGF0IHdlIGhhdmUgYXQgbGVhc3QgZW5vdWdoIGdhcyBmb3IgdGhlCiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciBwbHVzIHRoZSByZW1haW5kZXIgb2YgdGhpcyBmY24uCiAgICAgICAgICAgICAgICBpZiAobXNnLmdhcyA8IG9wdEluWGZlckdhcyArIG9wdEluRmNuTWluR2FzKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsKCiAgICAgICAgICAgICAgICAvLyA1LiB0cmFuc2ZlciBoaXMgb2xkIHRva3MgdG8gcmVjeWxlIGJpbgogICAgICAgICAgICAgICAgaWNsYXNzaWMudHJhbnNmZXJGcm9tLmdhcyhvcHRJblhmZXJHYXMpKG5yZXF1ZXN0ZXIsIG9sZEU0UmVjeWNsZUJpbiwgX3Rva3MpOwoKICAgICAgICAgICAgICAgIC8vIHRvZG8sIGVycm9yIGNoZWNrPwogICAgICAgICAgICAgICAgaWYgKGljbGFzc2ljLmJhbGFuY2VPZihucmVxdWVzdGVyKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3MsIGFkZCB0aGUgYWNjb3VudCwgc2V0IHRoZSB0b2tlbnMsIHNldCBzbmFwc2hvdCB0byB6ZXJvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaG9sZGVyQWNjb3VudHNbbnJlcXVlc3Rlcl0uYWxsb2NlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBY2NvdW50KG5yZXF1ZXN0ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBob2xkZXJBY2NvdW50c1tucmVxdWVzdGVyXS50b2tlbnMgPSBfdG9rcyAqIE5ld1Rva2Vuc1Blck9yaWdUb2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgaG9sZGVyQWNjb3VudHNbbnJlcXVlc3Rlcl0ubGFzdFNuYXBzaG90ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsY0N1clBvaW50c0ZvckFjY3QobnJlcXVlc3Rlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bVRva3NTd2l0Y2hlZE92ZXIgKz0gX3Rva3M7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gZGVjcmVtZW50IHBvaW50cyBmcm9tIGEgImhvbGRpbmcgYWNjb3VudCIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYi9jIHRoZXJlIGlzIG5vIG5lZWQgdG8ga2VlcCBpdC4KICAgICAgICAgICAgICAgICAgICAgICAgU3RhdEV2ZW50KCJTdWNjZXNzIFN3aXRjaGVkIE92ZXIiKTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBTdGF0RXZlbnQoIlRyYW5zZmVyIEVycm9yISBwbGVhc2UgY29udGFjdCBEZXYgdGVhbSEiKTsKCgogICAgICAgIH0KCgoKfQ=='.
	

]
