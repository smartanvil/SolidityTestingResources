Class {
	#name : #SRTd697A61D5FB4e076125e0bE647f902b02bb3A0F1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd697A61D5FB4e076125e0bE647f902b02bb3A0F1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sIAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLiAKICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uIAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIGlmIChwYXVzZWQpIHRocm93OwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIE5PVCBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkIHsKICAgIGlmICghcGF1c2VkKSB0aHJvdzsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyBfdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBPd25hYmxlLCBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAvLyBhZGRpdGlvbmFsIHZhcmlhYmxlcyBmb3IgdXNlIGlmIHRyYW5zYWN0aW9uIGZlZXMgZXZlciBiZWNhbWUgbmVjZXNzYXJ5CiAgdWludCBwdWJsaWMgYmFzaXNQb2ludHNSYXRlID0gMDsKICB1aW50IHB1YmxpYyBtYXhpbXVtRmVlID0gMDsKCiAgLyoqCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgKi8KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAgaWYobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgIHRocm93OwogICAgIH0KICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICB1aW50IGZlZSA9IChfdmFsdWUubXVsKGJhc2lzUG9pbnRzUmF0ZSkpLmRpdigxMDAwMCk7CiAgICBpZiAoZmVlID4gbWF4aW11bUZlZSkgewogICAgICBmZWUgPSBtYXhpbXVtRmVlOwogICAgfQogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoZmVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgc2VuZEFtb3VudCk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBvd25lciwgZmVlKTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCiAgdWludCBjb25zdGFudCBNQVhfVUlOVCA9IDIqKjI1NiAtIDE7CgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIHVpbnQgZmVlID0gKF92YWx1ZS5tdWwoYmFzaXNQb2ludHNSYXRlKSkuZGl2KDEwMDAwKTsKICAgIGlmIChmZWUgPiBtYXhpbXVtRmVlKSB7CiAgICAgIGZlZSA9IG1heGltdW1GZWU7CiAgICB9CiAgICB1aW50IHNlbmRBbW91bnQgPSBfdmFsdWUuc3ViKGZlZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKHNlbmRBbW91bnQpOwogICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChmZWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgaWYgKF9hbGxvd2FuY2UgPCBNQVhfVUlOVCkgewogICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICB9CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBzZW5kQW1vdW50KTsKICAgIFRyYW5zZmVyKF9mcm9tLCBvd25lciwgZmVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBVcGdyYWRlZFN0YW5kYXJkVG9rZW4gaXMgU3RhbmRhcmRUb2tlbnsKICAgICAgICAvLyB0aG9zZSBtZXRob2RzIGFyZSBjYWxsZWQgYnkgdGhlIGxlZ2FjeSBjb250cmFjdAogICAgICAgIC8vIGFuZCB0aGV5IG11c3QgZW5zdXJlIG1zZy5zZW5kZXIgdG8gYmUgdGhlIGNvbnRyYWN0IGFkZHJlc3MKICAgICAgICBmdW5jdGlvbiB0cmFuc2ZlckJ5TGVnYWN5KGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tQnlMZWdhY3koYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKICAgICAgICBmdW5jdGlvbiBhcHByb3ZlQnlMZWdhY3koYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKLy8vIEB0aXRsZSAtIFRldGhlciBUb2tlbiBDb250cmFjdCAtIFRldGhlci50bwovLy8gQGF1dGhvciBFbnJpY28gUnViYm9saSAtIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iYmRkOGQzY2ZkNGRlZDJmZGRmZDRjOWRiZDRkM2Q4YzU5M2RlZDJkMCI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+Ci8vLyBAYXV0aG9yIFdpbGwgSGFyYm9ybmUgLSA8PGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjVhMmQzMzM2MzYxYTNmMmUzMjNjMzMzNDNmMjI3NDM5MzUzNyI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4+Cgpjb250cmFjdCBUZXRoZXJUb2tlbiBpcyBQYXVzYWJsZSwgU3RhbmRhcmRUb2tlbiB7CgogIHN0cmluZyBwdWJsaWMgbmFtZTsKICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICB1aW50IHB1YmxpYyBkZWNpbWFsczsKICBhZGRyZXNzIHB1YmxpYyB1cGdyYWRlZEFkZHJlc3M7CiAgYm9vbCBwdWJsaWMgZGVwcmVjYXRlZDsKCiAgLy8gIFRoZSBjb250cmFjdCBjYW4gYmUgaW5pdGlhbGl6ZWQgd2l0aCBhIG51bWJlciBvZiB0b2tlbnMKICAvLyAgQWxsIHRoZSB0b2tlbnMgYXJlIGRlcG9zaXRlZCB0byB0aGUgb3duZXIgYWRkcmVzcwogIC8vCiAgLy8gQHBhcmFtIF9iYWxhbmNlIEluaXRpYWwgc3VwcGx5IG9mIHRoZSBjb250cmFjdAogIC8vIEBwYXJhbSBfbmFtZSBUb2tlbiBOYW1lCiAgLy8gQHBhcmFtIF9zeW1ib2wgVG9rZW4gc3ltYm9sCiAgLy8gQHBhcmFtIF9kZWNpbWFscyBUb2tlbiBkZWNpbWFscwogIGZ1bmN0aW9uIFRldGhlclRva2VuKHVpbnQgX2luaXRpYWxTdXBwbHksIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQgX2RlY2ltYWxzKXsKICAgICAgX3RvdGFsU3VwcGx5ID0gX2luaXRpYWxTdXBwbHk7CiAgICAgIG5hbWUgPSBfbmFtZTsKICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgIGJhbGFuY2VzW293bmVyXSA9IF9pbml0aWFsU3VwcGx5OwogICAgICBkZXByZWNhdGVkID0gZmFsc2U7CiAgfQoKICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCB7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gVXBncmFkZWRTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXJCeUxlZ2FjeShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIHsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBVcGdyYWRlZFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS50cmFuc2ZlckZyb21CeUxlZ2FjeShtc2cuc2VuZGVyLCBfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmJhbGFuY2VPZih3aG8pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmJhbGFuY2VPZih3aG8pOwogICAgfQogIH0KCiAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gVXBncmFkZWRTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykuYXBwcm92ZUJ5TGVnYWN5KG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgICB9CiAgfQoKICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN1cGVyLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsKICAgIH0KICB9CgogIC8vIGRlcHJlY2F0ZSBjdXJyZW50IGNvbnRyYWN0IGluIGZhdm91ciBvZiBhIG5ldyBvbmUKICBmdW5jdGlvbiBkZXByZWNhdGUoYWRkcmVzcyBfdXBncmFkZWRBZGRyZXNzKSBvbmx5T3duZXIgewogICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICB1cGdyYWRlZEFkZHJlc3MgPSBfdXBncmFkZWRBZGRyZXNzOwogICAgRGVwcmVjYXRlKF91cGdyYWRlZEFkZHJlc3MpOwogIH0KCiAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaWYgZmF2b3VyIG9mIGEgbmV3IG9uZQogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLnRvdGFsU3VwcGx5KCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgfQogIH0KCiAgLy8gSXNzdWUgYSBuZXcgYW1vdW50IG9mIHRva2VucwogIC8vIHRoZXNlIHRva2VucyBhcmUgZGVwb3NpdGVkIGludG8gdGhlIG93bmVyIGFkZHJlc3MKICAvLwogIC8vIEBwYXJhbSBfYW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgaXNzdWVkCiAgZnVuY3Rpb24gaXNzdWUodWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICBpZiAoX3RvdGFsU3VwcGx5ICsgYW1vdW50IDwgX3RvdGFsU3VwcGx5KSB0aHJvdzsKICAgIGlmIChiYWxhbmNlc1tvd25lcl0gKyBhbW91bnQgPCBiYWxhbmNlc1tvd25lcl0pIHRocm93OwoKICAgIGJhbGFuY2VzW293bmVyXSArPSBhbW91bnQ7CiAgICBfdG90YWxTdXBwbHkgKz0gYW1vdW50OwogICAgSXNzdWUoYW1vdW50KTsKICB9CgogIC8vIFJlZGVlbSB0b2tlbnMuCiAgLy8gVGhlc2UgdG9rZW5zIGFyZSB3aXRoZHJhd24gZnJvbSB0aGUgb3duZXIgYWRkcmVzcwogIC8vIGlmIHRoZSBiYWxhbmNlIG11c3QgYmUgZW5vdWdoIHRvIGNvdmVyIHRoZSByZWRlZW0KICAvLyBvciB0aGUgY2FsbCB3aWxsIGZhaWwuCiAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICBmdW5jdGlvbiByZWRlZW0odWludCBhbW91bnQpIG9ubHlPd25lciB7CiAgICAgIGlmIChfdG90YWxTdXBwbHkgPCBhbW91bnQpIHRocm93OwogICAgICBpZiAoYmFsYW5jZXNbb3duZXJdIDwgYW1vdW50KSB0aHJvdzsKCiAgICAgIF90b3RhbFN1cHBseSAtPSBhbW91bnQ7CiAgICAgIGJhbGFuY2VzW293bmVyXSAtPSBhbW91bnQ7CiAgICAgIFJlZGVlbShhbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gc2V0UGFyYW1zKHVpbnQgbmV3QmFzaXNQb2ludHMsIHVpbnQgbmV3TWF4RmVlKSBvbmx5T3duZXIgewogICAgICAvLyBFbnN1cmUgdHJhbnNwYXJlbmN5IGJ5IGhhcmRjb2RpbmcgbGltaXQgYmV5b25kIHdoaWNoIGZlZXMgY2FuIG5ldmVyIGJlIGFkZGVkCiAgICAgIGlmIChuZXdCYXNpc1BvaW50cyA+IDIwKSB0aHJvdzsKICAgICAgaWYgKG5ld01heEZlZSA+IDUwKSB0aHJvdzsKCiAgICAgIGJhc2lzUG9pbnRzUmF0ZSA9IG5ld0Jhc2lzUG9pbnRzOwogICAgICBtYXhpbXVtRmVlID0gbmV3TWF4RmVlLm11bCgxMCoqZGVjaW1hbHMpOwoKICAgICAgUGFyYW1zKGJhc2lzUG9pbnRzUmF0ZSwgbWF4aW11bUZlZSk7CiAgfQoKICAvLyBDYWxsZWQgd2hlbiBuZXcgdG9rZW4gYXJlIGlzc3VlZAogIGV2ZW50IElzc3VlKHVpbnQgYW1vdW50KTsKCiAgLy8gQ2FsbGVkIHdoZW4gdG9rZW5zIGFyZSByZWRlZW1lZAogIGV2ZW50IFJlZGVlbSh1aW50IGFtb3VudCk7CgogIC8vIENhbGxlZCB3aGVuIGNvbnRyYWN0IGlzIGRlcHJlY2F0ZWQKICBldmVudCBEZXByZWNhdGUoYWRkcmVzcyBuZXdBZGRyZXNzKTsKCiAgLy8gQ2FsbGVkIGlmIGNvbnRyYWN0IGV2ZXIgYWRkcyBmZWVzCiAgZXZlbnQgUGFyYW1zKHVpbnQgZmVlQmFzaXNQb2ludHMsIHVpbnQgbWF4RmVlKTsKfQ=='.
	

]
