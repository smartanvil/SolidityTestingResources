Class {
	#name : #SRT5703f9eaC1256E4DD00f7c91A787512EF2193313,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5703f9eaC1256E4DD00f7c91A787512EF2193313 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEdBVCBPd25lcnNoaXAgQ29udHJhY3QKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDE3IEdBVCBTeXN0ZW1zIEx0ZC4KLy8gaHR0cDovL3d3dy5nYXRjb2luLmlvLwovLwovLyBUaGUgTUlUIExpY2VuY2UuCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgovLyBJbXBsZW1lbnRhdGlvbiBvZiBhIHNpbXBsZSBvd25lcnNoaXAgbW9kZWwgd2l0aCB0cmFuc2ZlciBhY2NlcHRhbmNlLgovLwpjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBldmVudCBPd25lckNoYW5nZWQoYWRkcmVzcyBpbmRleGVkIF9uZXdPd25lcik7CgoKICAgIGZ1bmN0aW9uIE93bmVkKCkgcHVibGljIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7CgogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwoKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CgogICAgICAgIE93bmVyQ2hhbmdlZChtc2cuc2VuZGVyKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gR0FUIFRva2VuIEVSQzIwIEludGVyZmFjZQovLwovLyBDb3B5cmlnaHQgKGMpIDIwMTcgR0FUIFN5c3RlbXMgTHRkLgovLyBodHRwOi8vd3d3LmdhdGNvaW4uaW8vCi8vCi8vIFRoZSBNSVQgTGljZW5jZS4KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gRVJDMjAgU3RhbmRhcmQgSW50ZXJmYWNlIGFzIHNwZWNpZmllZCBhdDoKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIHsKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7Cn0KCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xNzsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gR0FUIFRva2VuIEltcGxlbWVudGF0aW9uCi8vCi8vIENvcHlyaWdodCAoYykgMjAxNyBHQVQgU3lzdGVtcyBMdGQuCi8vIGh0dHA6Ly93d3cuZ2F0Y29pbi5pby8KLy8KLy8gVGhlIE1JVCBMaWNlbmNlLgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKCgovLyBJbXBsZW1lbnRhdGlvbiBvZiBzdGFuZGFyZCBFUkMyMCB0b2tlbiB3aXRoIG93bmVyc2hpcC4KLy8KY29udHJhY3QgR0FUVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIE93bmVkIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgICBmdW5jdGlvbiBHQVRUb2tlbihzdHJpbmcgX3N5bWJvbCwgc3RyaW5nIF9uYW1lLCB1aW50MjU2IF9kZWNpbWFscywgdWludDI1NiBfdG90YWxTdXBwbHkpIHB1YmxpYwogICAgICAgIE93bmVkKCkKICAgIHsKICAgICAgICBzeW1ib2wgICAgICA9IF9zeW1ib2w7CiAgICAgICAgbmFtZSAgICAgICAgPSBfbmFtZTsKICAgICAgICBkZWNpbWFscyAgICA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKCiAgICAgICAgVHJhbnNmZXIoMHgwLCBvd25lciwgX3RvdGFsU3VwcGx5KTsKICAgIH0KCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICB9CgoKICAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgIH0KCgogICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgogICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICAgICAgIHJldHVybiB0cnVlOwogICAgIH0KfQoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE3OwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBHQVQgVG9rZW4gU2FsZSBDb25maWd1cmF0aW9uCi8vCi8vIENvcHlyaWdodCAoYykgMjAxNyBHQVQgU3lzdGVtcyBMdGQuCi8vIGh0dHA6Ly93d3cuZ2F0Y29pbi5pby8KLy8KLy8gVGhlIE1JVCBMaWNlbmNlLgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKY29udHJhY3QgR0FUVG9rZW5TYWxlQ29uZmlnIHsKCiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBTWU1CT0wgICAgICAgICAgICAgICAgICA9ICJHQVQiOwogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgTkFNRSAgICAgICAgICAgICAgICAgICAgPSAiR0FUIFRva2VuIjsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IERFQ0lNQUxTICAgICAgICAgICAgICAgID0gMTg7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgREVDSU1BTFNGQUNUT1IgICAgICAgICAgPSAxMCoqdWludDI1NihERUNJTUFMUyk7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTVEFSVF9USU1FICAgICAgICAgICAgICA9IDE1MDkxOTIwMDA7IC8vIDI4LU9jdC0yMDE3LCAxMjowMDowMCBVVEMKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IEVORF9USU1FICAgICAgICAgICAgICAgID0gMTUxMTg3MDM5OTsgLy8gMjgtTm92LTIwMTcsIDExOjU5OjU5IFVUQwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgQ09OVFJJQlVUSU9OX01JTiAgICAgICAgPSAwLjEgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9UT1RBTF9DQVAgICAgICAgICA9IDEwMDAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QUklWQVRFX1NBTEVfQ0FQICA9ICAgNzAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QUkVTQUxFX0NBUCAgICAgICA9ICAgMTUwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9QVUJMSUNfU0FMRV9DQVAgICA9ICAxMzAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7IC8vIFRoaXMgYWxzbyBpbmNsdWRlcyBwcmVzYWxlCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9GT1VOREFUSU9OX0NBUCAgICA9ICAxMDAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SRVNFUlZFMV9DQVAgICAgICA9ICAgNTAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SRVNFUlZFMl9DQVAgICAgICA9ICAgNTAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9GVVRVUkVfQ0FQICAgICAgICA9ICA2MDAwMDAwMDAgICogREVDSU1BTFNGQUNUT1I7CgogICAgLy8gRGVmYXVsdCBib251cyBhbW91bnQgZm9yIHRoZSBwcmVzYWxlLgogICAgLy8gMTAwID0gbm8gYm9udXMKICAgIC8vIDEyMCA9IDIwJSBib251cy4KICAgIC8vIE5vdGUgdGhhdCB0aGUgb3duZXIgY2FuIGNoYW5nZSB0aGUgYW1vdW50IG9mIGJvbnVzIGdpdmVuLgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRV9CT05VUyAgICAgID0gMTIwOwoKICAgIC8vIERlZmF1bHQgdmFsdWUgZm9yIHRva2Vuc1BlcktFdGhlciBiYXNlZCBvbiBFVEggYXQgMzAwIFVTRC4KICAgIC8vIFRoZSBvd25lciBjYW4gdXBkYXRlIHRoaXMgdmFsdWUgYmVmb3JlIHRoZSBzYWxlIHN0YXJ0cyBiYXNlZCBvbiB0aGUKICAgIC8vIHByaWNlIG9mIGV0aGVyIGF0IHRoYXQgdGltZS4KICAgIC8vIEUuZy4gMzAwIFVTRC9FVEggLT4gMzAwLDAwMCBVU0QvS0VUSCAvIDAuMiBVU0QvVE9LRU4gPSAxLDUwMCwwMDAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOU19QRVJfS0VUSEVSID0gMTUwMDAwMDsKfQoKCnByYWdtYSBzb2xpZGl0eSBeMC40LjE3OwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBHQVQgVG9rZW4gU2FtcGxlIEltcGxlbWVudGF0aW9uCi8vCi8vIENvcHlyaWdodCAoYykgMjAxNyBHQVQgU3lzdGVtcyBMdGQuCi8vIGh0dHA6Ly93d3cuZ2F0Y29pbi5pby8KLy8KLy8gVGhlIE1JVCBMaWNlbmNlLgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKCgoKLy8gVGhpcyBpcyB0aGUgbWFpbiBjb250cmFjdCB0aGF0IGRyaXZlcyB0aGUgR0FUIHRva2VuIHNhbGUuCi8vIEl0IGV4cG9zZXMgdGhlIEVSQzIwIGludGVyZmFjZSBhbG9uZyB3aXRoIHZhcmlvdXMgc2FsZS1yZWxhdGVkIGZ1bmN0aW9ucy4KLy8KY29udHJhY3QgR0FUVG9rZW5TYWxlIGlzIEdBVFRva2VuLCBHQVRUb2tlblNhbGVDb25maWcgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIE9uY2UgZmluYWxpemVkLCB0b2tlbnMgd2lsbCBiZSBmcmVlbHkgdHJhZGFibGUKICAgIGJvb2wgcHVibGljIGZpbmFsaXplZDsKCiAgICAvLyBTYWxlIGNhbiBiZSBzdXNwZW5kZWQgb3IgcmVzdW1lZCBieSB0aGUgb3duZXIKICAgIGJvb2wgcHVibGljIHN1c3BlbmRlZDsKCiAgICAvLyBBZGRyZXNzZXMgZm9yIHRoZSBiYW5rLCBmdW5kaW5nIGFuZCByZXNlcnZlcy4KICAgIGFkZHJlc3MgcHVibGljIGJhbmtBZGRyZXNzOwogICAgYWRkcmVzcyBwdWJsaWMgZnVuZGluZ0FkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyByZXNlcnZlMUFkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyByZXNlcnZlMkFkZHJlc3M7CgogICAgLy8gUHJpY2Ugb2YgdG9rZW5zIHBlciAxMDAwIEVUSAogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zUGVyS0V0aGVyOwoKICAgIC8vIFRoZSBib251cyBhbW91bnQgb24gdG9rZW4gcHVyY2hhc2VzCiAgICAvLyBFLmcuIDEyMCBtZWFucyBhIDIwJSBib251cyB3aWxsIGJlIGFwcGxpZWQuCiAgICB1aW50MjU2IHB1YmxpYyBib251czsKCiAgICAvLyBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIHRoYXQgaGF2ZSBiZWVuIHNvbGQgdGhyb3VnaCB0aGUgc2FsZSBjb250cmFjdCBzbyBmYXIuCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFRva2Vuc1NvbGQ7CgogICAgLy8gS2VlcCB0cmFjayBvZiBzdGFydCB0aW1lIGFuZCBlbmQgdGltZSBmb3IgdGhlIHNhbGUuIFRoZXNlIGhhdmUgZGVmYXVsdAogICAgLy8gdmFsdWVzIHdoZW4gdGhlIGNvbnRyYWN0IGlzIGRlcGxveWVkIGJ1dCBjYW4gYmUgY2hhbmdlZCBieSBvd25lciBhcyBuZWVkZWQuCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwoKCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IFRva2Vuc1B1cmNoYXNlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgY29zdCwgdWludDI1NiB0b2tlbnMpOwogICAgZXZlbnQgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZCh1aW50MjU2IG5ld0Ftb3VudCk7CiAgICBldmVudCBCb251c0Ftb3VudFVwZGF0ZWQodWludDI1NiBuZXdBbW91bnQpOwogICAgZXZlbnQgVGltZVdpbmRvd1VwZGF0ZWQodWludDI1NiBuZXdTdGFydFRpbWUsIHVpbnQyNTYgbmV3RW5kVGltZSk7CiAgICBldmVudCBTYWxlU3VzcGVuZGVkKCk7CiAgICBldmVudCBTYWxlUmVzdW1lZCgpOwogICAgZXZlbnQgVG9rZW5GaW5hbGl6ZWQoKTsKICAgIGV2ZW50IENvbnRyYWN0VG9rZW5zUmVjbGFpbWVkKHVpbnQyNTYgYW1vdW50KTsKCgogICAgZnVuY3Rpb24gR0FUVG9rZW5TYWxlKGFkZHJlc3MgX2JhbmtBZGRyZXNzLCBhZGRyZXNzIF9mdW5kaW5nQWRkcmVzcywgYWRkcmVzcyBfcmVzZXJ2ZTFBZGRyZXNzLCBhZGRyZXNzIF9yZXNlcnZlMkFkZHJlc3MpIHB1YmxpYwogICAgICAgIEdBVFRva2VuKFNZTUJPTCwgTkFNRSwgREVDSU1BTFMsIDApCiAgICB7CiAgICAgICAgLy8gQ2FuIG9ubHkgY3JlYXRlIHRoZSBjb250cmFjdCBpcyB0aGUgc2FsZSBoYXMgbm90IHlldCBzdGFydGVkIG9yIGVuZGVkLgogICAgICAgIHJlcXVpcmUoU1RBUlRfVElNRSA+PSBjdXJyZW50VGltZSgpKTsKICAgICAgICByZXF1aXJlKEVORF9USU1FID4gU1RBUlRfVElNRSk7CgogICAgICAgIC8vIE5lZWQgdmFsaWQgd2FsbGV0IGFkZHJlc3NlcwogICAgICAgIHJlcXVpcmUoX2JhbmtBZGRyZXNzICAgICE9IGFkZHJlc3MoMHgwKSk7CiAgICAgICAgcmVxdWlyZShfYmFua0FkZHJlc3MgICAgIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShfZnVuZGluZ0FkZHJlc3MgIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9mdW5kaW5nQWRkcmVzcyAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKF9yZXNlcnZlMUFkZHJlc3MgIT0gYWRkcmVzcygweDApKTsKICAgICAgICByZXF1aXJlKF9yZXNlcnZlMUFkZHJlc3MgIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShfcmVzZXJ2ZTJBZGRyZXNzICE9IGFkZHJlc3MoMHgwKSk7CiAgICAgICAgcmVxdWlyZShfcmVzZXJ2ZTJBZGRyZXNzICE9IGFkZHJlc3ModGhpcykpOwoKICAgICAgICB1aW50MjU2IHNhbGVzVG90YWwgPSBUT0tFTl9QVUJMSUNfU0FMRV9DQVAuYWRkKFRPS0VOX1BSSVZBVEVfU0FMRV9DQVApOwogICAgICAgIHJlcXVpcmUoc2FsZXNUb3RhbC5hZGQoVE9LRU5fRlVUVVJFX0NBUCkuYWRkKFRPS0VOX0ZPVU5EQVRJT05fQ0FQKS5hZGQoVE9LRU5fUkVTRVJWRTFfQ0FQKS5hZGQoVE9LRU5fUkVTRVJWRTJfQ0FQKSA9PSBUT0tFTl9UT1RBTF9DQVApOwoKICAgICAgICAvLyBTdGFydCBpbiBub24tZmluYWxpemVkIHN0YXRlCiAgICAgICAgZmluYWxpemVkID0gZmFsc2U7CiAgICAgICAgc3VzcGVuZGVkID0gZmFsc2U7CgogICAgICAgIC8vIFN0YXJ0IGFuZCBlbmQgdGltZXMgKHVzZWQgZm9yIHByZXNhbGUpLgogICAgICAgIHN0YXJ0VGltZSA9IFNUQVJUX1RJTUU7CiAgICAgICAgZW5kVGltZSAgID0gRU5EX1RJTUU7CgogICAgICAgIC8vIEluaXRpYWwgcHJpY2luZwogICAgICAgIHRva2Vuc1BlcktFdGhlciA9IFRPS0VOU19QRVJfS0VUSEVSOwoKICAgICAgICAvLyBCb251cyBmb3IgY29udHJpYnV0aW9ucwogICAgICAgIGJvbnVzID0gUFJFU0FMRV9CT05VUzsKCiAgICAgICAgLy8gSW5pdGlhbGl6ZSB3YWxsZXQgYWRkcmVzc2VzCiAgICAgICAgYmFua0FkZHJlc3MgICAgPSBfYmFua0FkZHJlc3M7CiAgICAgICAgZnVuZGluZ0FkZHJlc3MgPSBfZnVuZGluZ0FkZHJlc3M7CiAgICAgICAgcmVzZXJ2ZTFBZGRyZXNzID0gX3Jlc2VydmUxQWRkcmVzczsKICAgICAgICByZXNlcnZlMkFkZHJlc3MgPSBfcmVzZXJ2ZTJBZGRyZXNzOwoKICAgICAgICAvLyBBc3NpZ24gaW5pdGlhbCBiYWxhbmNlcwogICAgICAgIGJhbGFuY2VzW2FkZHJlc3ModGhpcyldID0gYmFsYW5jZXNbYWRkcmVzcyh0aGlzKV0uYWRkKFRPS0VOX1BSRVNBTEVfQ0FQKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChUT0tFTl9QUkVTQUxFX0NBUCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBhZGRyZXNzKHRoaXMpLCBUT0tFTl9QUkVTQUxFX0NBUCk7CgogICAgICAgIGJhbGFuY2VzW3Jlc2VydmUxQWRkcmVzc10gPSBiYWxhbmNlc1tyZXNlcnZlMUFkZHJlc3NdLmFkZChUT0tFTl9SRVNFUlZFMV9DQVApOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKFRPS0VOX1JFU0VSVkUxX0NBUCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCByZXNlcnZlMUFkZHJlc3MsIFRPS0VOX1JFU0VSVkUxX0NBUCk7CgogICAgICAgIGJhbGFuY2VzW3Jlc2VydmUyQWRkcmVzc10gPSBiYWxhbmNlc1tyZXNlcnZlMkFkZHJlc3NdLmFkZChUT0tFTl9SRVNFUlZFMl9DQVApOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKFRPS0VOX1JFU0VSVkUyX0NBUCk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCByZXNlcnZlMkFkZHJlc3MsIFRPS0VOX1JFU0VSVkUyX0NBUCk7CgogICAgICAgIHVpbnQyNTYgYmFua0JhbGFuY2UgPSBUT0tFTl9UT1RBTF9DQVAuc3ViKHRvdGFsU3VwcGx5KTsKICAgICAgICBiYWxhbmNlc1tiYW5rQWRkcmVzc10gPSBiYWxhbmNlc1tiYW5rQWRkcmVzc10uYWRkKGJhbmtCYWxhbmNlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChiYW5rQmFsYW5jZSk7CiAgICAgICAgVHJhbnNmZXIoMHgwLCBiYW5rQWRkcmVzcywgYmFua0JhbGFuY2UpOwoKICAgICAgICAvLyBUaGUgdG90YWwgc3VwcGx5IHRoYXQgd2UgY2FsY3VsYXRlZCBoZXJlIHNob3VsZCBiZSB0aGUgc2FtZSBhcyBpbiB0aGUgY29uZmlnLgogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpICA9PSBUT0tFTl9QUkVTQUxFX0NBUCk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2YocmVzZXJ2ZTFBZGRyZXNzKSA9PSBUT0tFTl9SRVNFUlZFMV9DQVApOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mKHJlc2VydmUyQWRkcmVzcykgPT0gVE9LRU5fUkVTRVJWRTJfQ0FQKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZihiYW5rQWRkcmVzcykgICAgPT0gYmFua0JhbGFuY2UpOwogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPT0gVE9LRU5fVE9UQUxfQ0FQKTsKICAgIH0KCgogICAgZnVuY3Rpb24gY3VycmVudFRpbWUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBub3c7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSBwcmljZSBmb3IgdG9rZW5zLgogICAgLy8KICAgIGZ1bmN0aW9uIHNldFRva2Vuc1BlcktFdGhlcih1aW50MjU2IF90b2tlbnNQZXJLRXRoZXIpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90b2tlbnNQZXJLRXRoZXIgPiAwKTsKCiAgICAgICAgLy8gU2V0IHRoZSB0b2tlbnNQZXJLRXRoZXIgYW1vdW50IGZvciBhbnkgbmV3IHNhbGUuCiAgICAgICAgdG9rZW5zUGVyS0V0aGVyID0gX3Rva2Vuc1BlcktFdGhlcjsKCiAgICAgICAgVG9rZW5zUGVyS0V0aGVyVXBkYXRlZChfdG9rZW5zUGVyS0V0aGVyKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSBib251cyBhbW91bnQgYXBwbGllZCB0byBwdXJjaGFzZXMuCiAgICAvLwogICAgZnVuY3Rpb24gc2V0Qm9udXModWludDI1NiBfYm9udXMpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICAvLyAxMDAgbWVhbnMgbm8gYm9udXMKICAgICAgICByZXF1aXJlKF9ib251cyA+PSAxMDApOwoKICAgICAgICAvLyAyMDAgbWVhbnMgMTAwJSBib251cwogICAgICAgIHJlcXVpcmUoX2JvbnVzIDw9IDIwMCk7CgogICAgICAgIGJvbnVzID0gX2JvbnVzOwoKICAgICAgICBCb251c0Ftb3VudFVwZGF0ZWQoX2JvbnVzKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gY2hhbmdlIHRoZSB0aW1lIHdpbmRvdyBmb3IgdGhlIHNhbGUuCiAgICAvLwogICAgZnVuY3Rpb24gc2V0VGltZVdpbmRvdyh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9zdGFydFRpbWUgPj0gU1RBUlRfVElNRSk7CiAgICAgICAgcmVxdWlyZShfZW5kVGltZSA+IF9zdGFydFRpbWUpOwoKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgICA9IF9lbmRUaW1lOwoKICAgICAgICBUaW1lV2luZG93VXBkYXRlZChfc3RhcnRUaW1lLCBfZW5kVGltZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIHN1c3BlbmQgLyBzdG9wIHRoZSBzYWxlLgogICAgLy8KICAgIGZ1bmN0aW9uIHN1c3BlbmQoKSBleHRlcm5hbCBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKHN1c3BlbmRlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHN1c3BlbmRlZCA9IHRydWU7CgogICAgICAgIFNhbGVTdXNwZW5kZWQoKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgb3duZXIgdG8gcmVzdW1lIHRoZSBzYWxlLgogICAgLy8KICAgIGZ1bmN0aW9uIHJlc3VtZSgpIGV4dGVybmFsIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiAoc3VzcGVuZGVkID09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHN1c3BlbmRlZCA9IGZhbHNlOwoKICAgICAgICBTYWxlUmVzdW1lZCgpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgLy8gQWNjZXB0IGV0aGVyIGNvbnRyaWJ1dGlvbnMgZHVyaW5nIHRoZSB0b2tlbiBzYWxlLgogICAgLy8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgoKICAgIC8vIEFsbG93cyB0aGUgY2FsbGVyIHRvIGJ1eSB0b2tlbnMgZm9yIGFub3RoZXIgcmVjaXBpZW50IChwcm94eSBwdXJjaGFzZSkuCiAgICAvLyBUaGlzIGNhbiBiZSB1c2VkIGJ5IGV4Y2hhbmdlcyBmb3IgZXhhbXBsZS4KICAgIC8vCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUoIXN1c3BlbmRlZCk7CiAgICAgICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSBhZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcyh0aGlzKSk7CiAgICAgICAgcmVxdWlyZShjdXJyZW50VGltZSgpID49IHN0YXJ0VGltZSk7CiAgICAgICAgcmVxdWlyZShjdXJyZW50VGltZSgpIDw9IGVuZFRpbWUpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IENPTlRSSUJVVElPTl9NSU4pOwogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBmdW5kaW5nQWRkcmVzcyk7CgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBzYWxlIGNvbnRyYWN0IHN0aWxsIGhhcyB0b2tlbnMgZm9yIHNhbGUuCiAgICAgICAgdWludDI1NiBzYWxlQmFsYW5jZSA9IGJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKHNhbGVCYWxhbmNlID4gMCk7CgogICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHRva2VucyB0aGF0IHRoZSBldGhlciBzaG91bGQgY29udmVydCB0by4KICAgICAgICB1aW50MjU2IHRva2VucyA9IG1zZy52YWx1ZS5tdWwodG9rZW5zUGVyS0V0aGVyKS5tdWwoYm9udXMpLmRpdigxMCoqKDE4IC0gREVDSU1BTFMgKyAzICsgMikpOwogICAgICAgIHJlcXVpcmUodG9rZW5zID4gMCk7CgogICAgICAgIHVpbnQyNTYgY29zdCA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50MjU2IHJlZnVuZCA9IDA7CgogICAgICAgIGlmICh0b2tlbnMgPiBzYWxlQmFsYW5jZSkgewogICAgICAgICAgICAvLyBOb3QgZW5vdWdoIHRva2VucyBsZWZ0IGZvciBzYWxlIHRvIGZ1bGZpbGwgdGhlIGZ1bGwgb3JkZXIuCiAgICAgICAgICAgIHRva2VucyA9IHNhbGVCYWxhbmNlOwoKICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBhY3R1YWwgY29zdCBmb3IgdGhlIHRva2VucyB0aGF0IGNhbiBiZSBwdXJjaGFzZWQuCiAgICAgICAgICAgIGNvc3QgPSB0b2tlbnMubXVsKDEwKiooMTggLSBERUNJTUFMUyArIDMgKyAyKSkuZGl2KHRva2Vuc1BlcktFdGhlci5tdWwoYm9udXMpKTsKCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIEVUSCByZWZ1bmQgdG8gdGhlIGNvbnRyaWJ1dG9yLgogICAgICAgICAgICByZWZ1bmQgPSBtc2cudmFsdWUuc3ViKGNvc3QpOwogICAgICAgIH0KCiAgICAgICAgdG90YWxUb2tlbnNTb2xkID0gdG90YWxUb2tlbnNTb2xkLmFkZCh0b2tlbnMpOwoKICAgICAgICAvLyBNb3ZlIHRva2VucyBmcm9tIHRoZSBzYWxlIGNvbnRyYWN0IHRvIHRoZSBiZW5lZmljaWFyeQogICAgICAgIGJhbGFuY2VzW2FkZHJlc3ModGhpcyldID0gYmFsYW5jZXNbYWRkcmVzcyh0aGlzKV0uc3ViKHRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbYmVuZWZpY2lhcnldICAgPSBiYWxhbmNlc1tiZW5lZmljaWFyeV0uYWRkKHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcyh0aGlzKSwgYmVuZWZpY2lhcnksIHRva2Vucyk7CgogICAgICAgIGlmIChyZWZ1bmQgPiAwKSB7CiAgICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihyZWZ1bmQpOwogICAgICAgIH0KCiAgICAgICAgLy8gVHJhbnNmZXIgdGhlIGNvbnRyaWJ1dGVkIGV0aGVyIHRvIHRoZSBjcm93ZHNhbGUgd2FsbGV0cy4KICAgICAgICB1aW50MjU2IGNvbnRyaWJ1dGlvbiAgICAgID0gbXNnLnZhbHVlLnN1YihyZWZ1bmQpOwogICAgICAgIHVpbnQyNTYgcmVzZXJ2ZUFsbG9jYXRpb24gPSBjb250cmlidXRpb24uZGl2KDIwKTsKCiAgICAgICAgZnVuZGluZ0FkZHJlc3MudHJhbnNmZXIoY29udHJpYnV0aW9uLnN1YihyZXNlcnZlQWxsb2NhdGlvbikpOwogICAgICAgIHJlc2VydmUxQWRkcmVzcy50cmFuc2ZlcihyZXNlcnZlQWxsb2NhdGlvbik7CgogICAgICAgIFRva2Vuc1B1cmNoYXNlZChiZW5lZmljaWFyeSwgY29zdCwgdG9rZW5zKTsKCiAgICAgICAgcmV0dXJuIHRva2VuczsKICAgIH0KCgogICAgLy8gRVJDMjAgdHJhbnNmZXIgZnVuY3Rpb24sIG1vZGlmaWVkIHRvIG9ubHkgYWxsb3cgdHJhbnNmZXJzIG9uY2UgdGhlIHNhbGUgaGFzIGJlZW4gZmluYWxpemVkLgogICAgLy8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoIWlzVHJhbnNmZXJBbGxvd2VkKG1zZy5zZW5kZXIsIF90bykpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgICB9CgoKICAgIC8vIEVSQzIwIHRyYW5zZmVyRnJvbSBmdW5jdGlvbiwgbW9kaWZpZWQgdG8gb25seSBhbGxvdyB0cmFuc2ZlcnMgb25jZSB0aGUgc2FsZSBoYXMgYmVlbiBmaW5hbGl6ZWQuCiAgICAvLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoIWlzVHJhbnNmZXJBbGxvd2VkKF9mcm9tLCBfdG8pKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgoKICAgIC8vIEludGVybmFsIGhlbHBlciB0byBjaGVjayBpZiB0aGUgdHJhbnNmZXIgc2hvdWxkIGJlIGFsbG93ZWQKICAgIC8vCiAgICBmdW5jdGlvbiBpc1RyYW5zZmVyQWxsb3dlZChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bykgcHJpdmF0ZSB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoZmluYWxpemVkKSB7CiAgICAgICAgICAgIC8vIFdlIGFsbG93IGV2ZXJ5Ym9keSB0byB0cmFuc2ZlciB0b2tlbnMgb25jZSB0aGUgc2FsZSBpcyBmaW5hbGl6ZWQuCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9mcm9tID09IGJhbmtBZGRyZXNzIHx8IF90byA9PSBiYW5rQWRkcmVzcykgewogICAgICAgICAgICAvLyBXZSBhbGxvdyB0aGUgYmFuayB0byBpbml0aWF0ZSB0cmFuc2ZlcnMuIFdlIGFsc28gYWxsb3cgaXQgdG8gYmUgdGhlIHJlY2lwaWVudAogICAgICAgICAgICAvLyBvZiB0cmFuc2ZlcnMgYmVmb3JlIHRoZSB0b2tlbiBpcyBmaW5hbGl6ZWQgaW4gY2FzZSBhIHJlY2lwaWVudCB3YW50cyB0byBzZW5kCiAgICAgICAgICAgIC8vIGJhY2sgdG9rZW5zLiBFLmcuIEtZQyByZXF1aXJlbWVudHMgY2Fubm90IGJlIG1ldC4KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgoKICAgIC8vIEFsbG93cyBvd25lciB0byB0cmFuc2ZlciB0b2tlbnMgYXNzaWduZWQgdG8gdGhlIHNhbGUgY29udHJhY3QsIGJhY2sgdG8gdGhlIGJhbmsgd2FsbGV0LgogICAgZnVuY3Rpb24gcmVjbGFpbUNvbnRyYWN0VG9rZW5zKCkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB1aW50MjU2IHRva2VucyA9IGJhbGFuY2VPZihhZGRyZXNzKHRoaXMpKTsKCiAgICAgICAgaWYgKHRva2VucyA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGJhbGFuY2VzW2FkZHJlc3ModGhpcyldID0gYmFsYW5jZXNbYWRkcmVzcyh0aGlzKV0uc3ViKHRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbYmFua0FkZHJlc3NdICAgPSBiYWxhbmNlc1tiYW5rQWRkcmVzc10uYWRkKHRva2Vucyk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcyh0aGlzKSwgYmFua0FkZHJlc3MsIHRva2Vucyk7CgogICAgICAgIENvbnRyYWN0VG9rZW5zUmVjbGFpbWVkKHRva2Vucyk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICAvLyBBbGxvd3MgdGhlIG93bmVyIHRvIGZpbmFsaXplIHRoZSBzYWxlIGFuZCBhbGxvdyB0b2tlbnMgdG8gYmUgdHJhZGVkLgogICAgLy8KICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwoKICAgICAgICBmaW5hbGl6ZWQgPSB0cnVlOwoKICAgICAgICBUb2tlbkZpbmFsaXplZCgpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ=='.
	

]
