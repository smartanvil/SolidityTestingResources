Class {
	#name : #SRT839e78cf4b2d6c6bc80d679eb95d072a0358d5b3,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT839e78cf4b2d6c6bc80d679eb95d072a0358d5b3 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwoKbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IFRva2VuIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewoKICBib29sIHB1YmxpYyBlbmRJVE8gPSBmYWxzZTsKCiAgdWludCBwdWJsaWMgZW5kRGF0ZSA9IDE1MzAzNjAwMDA7ICAvLyBKdW5lIDMwIDIwMTggVG9rZW4gdHJhbnNmZXIgZW5hYmxlCgogIC8qKgogICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIG5vdCBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZShub3cgPj0gZW5kRGF0ZSB8fCBlbmRJVE8pOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHVuUGF1c2UoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgZW5kSVRPID0gdHJ1ZTsKICAgICAgcmV0dXJuIGVuZElUTzsKICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuLCBQYXVzYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBCdXJuYWJsZSBUb2tlbgogKiBAZGV2IFRva2VuIHRoYXQgY2FuIGJlIGlycmV2ZXJzaWJseSBidXJuZWQgKGRlc3Ryb3llZCkuCiAqLwpjb250cmFjdCBCdXJuYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgLyoqCiAgICAgKiBAZGV2IEJ1cm5zIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2Vucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSBidXJuZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBLZWVwcGV0VG9rZW4gaXMgQnVybmFibGVUb2tlbiB7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIktlZXBQZXQgVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiUEVUIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDA7CgogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFkgPSAzNTAwMDAwOwoKICAgIC8qKgogICAgICogQGRldiBDb25zdHJ1Y3RvciB0aGF0IGdpdmVzIG1zZy5zZW5kZXIgYWxsIG9mIGV4aXN0aW5nIHRva2Vucy4KICAgICAqLwogICAgZnVuY3Rpb24gS2VlcHBldFRva2VuKCkgcHVibGljIHsKICAgICAgICB0b3RhbFN1cHBseSA9IElOSVRJQUxfU1VQUExZOwogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IElOSVRJQUxfU1VQUExZOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbnMoYWRkcmVzcyBfdG8sIHVpbnQgX2Ftb3VudCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF9hbW91bnQ7CiAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfYW1vdW50OwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgUmVmdW5kVmF1bHQKICogQGRldiBUaGlzIGNvbnRyYWN0IGlzIHVzZWQgZm9yIHN0b3JpbmcgZnVuZHMgd2hpbGUgYSBjcm93ZHNhbGUKICogaXMgaW4gcHJvZ3Jlc3MuIFN1cHBvcnRzIHJlZnVuZGluZyB0aGUgbW9uZXkgaWYgY3Jvd2RzYWxlIGZhaWxzLAogKiBhbmQgZm9yd2FyZGluZyBpdCBpZiBjcm93ZHNhbGUgaXMgc3VjY2Vzc2Z1bC4KICovCmNvbnRyYWN0IFJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGRlcG9zaXRlZDsKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgU3RhdGUgcHVibGljIHN0YXRlOwoKICBldmVudCBDbG9zZWQoKTsKICBldmVudCBSZWZ1bmRzRW5hYmxlZCgpOwogIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB3ZWlBbW91bnQpOwoKICBmdW5jdGlvbiBSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgc3RhdGUgPSBTdGF0ZS5BY3RpdmU7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgaW52ZXN0b3IpIG9ubHlPd25lciBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKICAgIENsb3NlZCgpOwogICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBlbmFibGVSZWZ1bmRzKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgIFJlZnVuZHNFbmFibGVkKCk7CiAgfQoKICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUmVmdW5kaW5nKTsKICAgIHVpbnQyNTYgZGVwb3NpdGVkVmFsdWUgPSBkZXBvc2l0ZWRbaW52ZXN0b3JdOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IDA7CiAgICBpbnZlc3Rvci50cmFuc2ZlcihkZXBvc2l0ZWRWYWx1ZSk7CiAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogIH0KfQoKY29udHJhY3QgU2FsZXNNYW5hZ2VyIGlzIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLyoqCiAgICAgKiBQcmUtSUNPCiAgICAgKiBTdGFydCBkYXRlIDMxIERlY2VtYmVyIDIwMTcgKDEyOjAwIEdNVCkKICAgICAqIEVuZCBkYXRlIG9yIEhhcmQgQ2FwLCAgMTUgSmFudWFyeSAyMDE4ICgxMjowMCBHTVQpCiAgICAgKiBUb2tlbiBhbW91bnQgMzUwMDAwMAogICAgICogbWluIGV0aCA9IDAsMDAwMgogICAgICogdG9rZW4gcHJpY2UgPSAxLDUkCiAgICAgKiB0cmFuc2ZlciB0byB3YWxsZXQgPSBORUVEIHdhbGxldAogICAgICogKi8KICAgIC8vIFRPRE86IHNldCBhY3R1YWwgZGF0ZXMgYmVmb3JlIGRlcGxveQogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZXRoZXJDb3N0ID0gNzUwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgc3RhcnREYXRlID0gMTUxNDcyMTYwMDsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IGVuZERhdGUgPSAxNTE2MDE3NjAwOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgc29mdENhcCA9IDI1MDAwMCAvIGV0aGVyQ29zdCAqIDEgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBoYXJkQ2FwID0gMTA1MDAwMCAvIGV0aGVyQ29zdCAqIDEgZXRoZXI7CgogICAgc3RydWN0IFN0YXQgewogICAgICAgIHVpbnQyNTYgY3VycmVudEZ1bmRyYWlzZXI7CiAgICAgICAgdWludDI1NiBhZGRpdGlvbmFsRXRoQW1vdW50OwogICAgICAgIHVpbnQyNTYgZXRoQW1vdW50OwogICAgICAgIHVpbnQgdHhDb3VudGVyOwogICAgfQoKICAgIFN0YXQgcHVibGljIHN0YXQ7CgogICAgLy8gRVRIIDc1MCQgMTMuMTIuMjAxNyB0b2tlbiBwcmljZSAxLjUkCiAgICAvLyBUT0RPOiBzZXQgYWN0dWFsIHByaWNlIGJlZm9yZSBkZXBsb3kKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRva2VuUHJpY2UgPSB1aW50MjU2KDE1ICogMSBldGhlcikuZGl2KGV0aGVyQ29zdCAqIDEwKTsKICAgIFJlZnVuZFZhdWx0IHB1YmxpYyByZWZ1bmRWYXVsdDsKICAgIEtlZXBwZXRUb2tlbiBwdWJsaWMga2VlcHBldFRva2VuOwoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiBQcmUtSUNPIGVuZCBkYXRlIGlzIG5vdwogICAgICovCiAgICBtb2RpZmllciBpc0ZpbmlzaGVkKCkgewogICAgICAgIHJlcXVpcmUobm93ID49IGVuZERhdGUpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gU2FsZXNNYW5hZ2VyKGFkZHJlc3Mgd2FsbGV0KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUod2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGtlZXBwZXRUb2tlbiA9IG5ldyBLZWVwcGV0VG9rZW4oKTsKICAgICAgICByZWZ1bmRWYXVsdCA9IG5ldyBSZWZ1bmRWYXVsdCh3YWxsZXQpOwogICAgfQoKICAgIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IDIgKiAxMCoqMTUgICYmIG5vdyA+PSBzdGFydERhdGUgJiYgbm93IDwgZW5kRGF0ZSk7CiAgICAgICByZXF1aXJlKHN0YXQuZXRoQW1vdW50ICsgc3RhdC5hZGRpdGlvbmFsRXRoQW1vdW50IDwgaGFyZENhcCk7CiAgICAgICBidXlUb2tlbnMoKTsKICAgIH0KCiAgICB1aW50IGJvbnVzWDJTdGFnZTEgPSBzb2Z0Q2FwOwogICAgdWludCBib251c1gyU3RhZ2UyID0gNTI1MDAwIC8gZXRoZXJDb3N0ICogMSBldGhlcjsKICAgIHVpbnQgYm9udXNYMlN0YWdlMyA9IDc4NzUwMCAvIGV0aGVyQ29zdCAqIDEgZXRoZXI7CiAgICB1aW50IGJvbnVzWDJTdGFnZTQgPSBoYXJkQ2FwOwoKICAgIGZ1bmN0aW9uIGNoZWNrQm9udXModWludDI1NiBhbW91bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICB1aW50MjU2IGN1cnJlbnQgPSBzdGF0LmV0aEFtb3VudCArIHN0YXQuYWRkaXRpb25hbEV0aEFtb3VudDsKICAgICAgICB1aW50MjU2IHdpdGhBbW91bnQgPSBjdXJyZW50LmFkZChhbW91bnQpOwoKICAgICAgICByZXR1cm4gKChjdXJyZW50IDwgYm9udXNYMlN0YWdlMSAmJiBib251c1gyU3RhZ2UxIDw9IHdpdGhBbW91bnQpCiAgICAgICAgfHwgKGN1cnJlbnQgPCBib251c1gyU3RhZ2UyICYmIGJvbnVzWDJTdGFnZTIgPD0gd2l0aEFtb3VudCkKICAgICAgICB8fCAoY3VycmVudCA8IGJvbnVzWDJTdGFnZTMgJiYgYm9udXNYMlN0YWdlMyA8PSB3aXRoQW1vdW50KQogICAgICAgIHx8IChjdXJyZW50IDwgYm9udXNYMlN0YWdlNCAmJiBib251c1gyU3RhZ2U0IDw9IHdpdGhBbW91bnQpKTsKICAgIH0KCiAgICB1aW50IHByaXZhdGUgYm9udXNQZXJpb2QgPSAxIGRheXM7CgogICAgZnVuY3Rpb24gY291bnRNdWx0aXBseUJvbnVzKHVpbnQyNTYgYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKG5vdyA+PSBzdGFydERhdGUgJiYgbm93IDw9IHN0YXJ0RGF0ZSArIGJvbnVzUGVyaW9kKSB7IC8vIEZyb20gMzEgZGVjZW1iZXIgMjAxNyB0byAxIGphbnVhcnkgMjAxOCAoMTI6MDAgR01UKSDigJQgeDUKICAgICAgICAgICAgcmV0dXJuIDU7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPiBzdGFydERhdGUgKyBib251c1BlcmlvZCAmJiBub3cgPD0gc3RhcnREYXRlICsgMiAqIGJvbnVzUGVyaW9kKSB7IC8vIEZyb20gMSBqYW51YXJ5IDIwMTcgdG8gMiBqYW51YXJ5IDIwMTggKDEyOjAwIEdNVCkg4oCUIHg0CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgIH0KICAgICAgICBpZiAobm93ID4gc3RhcnREYXRlICsgMiAqIGJvbnVzUGVyaW9kICYmIG5vdyA8PSBzdGFydERhdGUgKyAzICogYm9udXNQZXJpb2QpIHsgLy8gRnJvbSAyIGphbnVhcnkgMjAxNyB0byAzIGphbnVhcnkgMjAxOCAoMTI6MDAgR01UKSDigJQgeDMKICAgICAgICAgICAgcmV0dXJuIDM7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPiBzdGFydERhdGUgKyAzICogYm9udXNQZXJpb2QgJiYgbm93IDw9IHN0YXJ0RGF0ZSArIDQgKiBib251c1BlcmlvZCkgeyAvLyBGcm9tIDMgamFudWFyeSAyMDE3IHRvIDQgamFudWFyeSAyMDE4ICgxMjowMCBHTVQpIOKAlCB4MgogICAgICAgICAgICByZXR1cm4gMjsKICAgICAgICB9CiAgICAgICAgaWYgKGNoZWNrQm9udXMoYW1vdW50KSkgewogICAgICAgICAgICByZXR1cm4gMjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gbXNnLnZhbHVlLmRpdih0b2tlblByaWNlKTsKICAgICAgICB1aW50MjU2IGJhbGFuY2UgPSBrZWVwcGV0VG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHRva2VucyA9IHRva2Vucy5tdWwoY291bnRNdWx0aXBseUJvbnVzKG1zZy52YWx1ZSkpOwoKICAgICAgICBpZiAoYmFsYW5jZSA8IHRva2VucykgewogICAgICAgICAgICB1aW50MjU2IHRlbXBUb2tlblByaWNlID0gbXNnLnZhbHVlLmRpdih0b2tlbnMpOyAvLyBUZW1wIHRva2VuIHByaWNlIGZvciB0b2tlbnMgd2hpY2ggd2VyZSBib3VnaHQuCiAgICAgICAgICAgIHVpbnQyNTYgdG9SZXR1cm4gPSB0ZW1wVG9rZW5QcmljZS5tdWwodG9rZW5zLnN1YihiYWxhbmNlKSk7IC8vIEFtb3VudCBmb3IgcmV0dXJpbmcuCiAgICAgICAgICAgIHNlbmRUb2tlbnMoYmFsYW5jZSwgbXNnLnZhbHVlIC0gdG9SZXR1cm4pOwogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRvUmV0dXJuKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzZW5kVG9rZW5zKHRva2VucywgbXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zKHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfZXRoZXJzKSBpbnRlcm5hbCB7CiAgICAgICAga2VlcHBldFRva2VuLnNlbmRUb2tlbnMobXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgUmVmdW5kVmF1bHQgcmVmdW5kVmF1bHRDb250cmFjdCA9IFJlZnVuZFZhdWx0KHJlZnVuZFZhdWx0KTsKICAgICAgICBzdGF0LmN1cnJlbnRGdW5kcmFpc2VyICs9IF9hbW91bnQ7CiAgICAgICAgc3RhdC5ldGhBbW91bnQgKz0gX2V0aGVyczsKICAgICAgICBzdGF0LnR4Q291bnRlciArPSAxOwogICAgICAgIHJlZnVuZFZhdWx0Q29udHJhY3QuZGVwb3NpdC52YWx1ZShfZXRoZXJzKShtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kVG9rZW5zTWFudWFsbHkoYWRkcmVzcyBfdG8sIHVpbnQyNTYgZXRoQW1vdW50LCB1aW50IG11bHRpcGxpZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXVsdGlwbGllciA8IDYpOyAvLyBjYW4gYmUgbXVsdGlwbGllciBtb3JlIHRoZW4gaW4gZml2ZSB0aW1lcy4KICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApICYmIG5vdyA8PSBlbmREYXRlICsgMyBkYXlzKTsgLy8gYXZhaWxhYmxlIHRvIHNlbmQgNzIgaG91cnMgYWZ0ZXIgZW5kRGF0ZQogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gZXRoQW1vdW50LmRpdih0b2tlblByaWNlKS5tdWwobXVsdGlwbGllcik7CiAgICAgICAga2VlcHBldFRva2VuLnNlbmRUb2tlbnMoX3RvLCB0b2tlbnMpOwogICAgICAgIHN0YXQuY3VycmVudEZ1bmRyYWlzZXIgKz0gdG9rZW5zOwogICAgICAgIHN0YXQuYWRkaXRpb25hbEV0aEFtb3VudCArPSBldGhBbW91bnQ7CiAgICAgICAgc3RhdC50eENvdW50ZXIgKz0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0Z1bmRzKCkgcHVibGljIGlzRmluaXNoZWQgb25seU93bmVyIHsKICAgICAgICBSZWZ1bmRWYXVsdCByZWZ1bmRWYXVsdENvbnRyYWN0ID0gUmVmdW5kVmF1bHQocmVmdW5kVmF1bHQpOwogICAgICAgIHVpbnQyNTYgbGVmdFZhbHVlID0ga2VlcHBldFRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBrZWVwcGV0VG9rZW4uYnVybihsZWZ0VmFsdWUpOwogICAgICAgIHVpbnQyNTYgZnVsbEFtb3VudCA9IHN0YXQuYWRkaXRpb25hbEV0aEFtb3VudC5hZGQoc3RhdC5ldGhBbW91bnQpOwogICAgICAgIGlmIChmdWxsQW1vdW50IDwgc29mdENhcCkgewogICAgICAgICAgICAvLyBJZiBzb2Z0IGNhcCBpcyBub3QgcmVhY2hlZCBlbmFibGUgcmVmdW5kcwogICAgICAgICAgICByZWZ1bmRWYXVsdENvbnRyYWN0LmVuYWJsZVJlZnVuZHMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBTZW5kIGV0aCB0byBtdWx0aXNpZwogICAgICAgICAgICByZWZ1bmRWYXVsdENvbnRyYWN0LmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVuUGF1c2VUb2tlbigpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoa2VlcHBldFRva2VuLnVuUGF1c2UoKSk7CiAgICB9Cn0='.
	

]
