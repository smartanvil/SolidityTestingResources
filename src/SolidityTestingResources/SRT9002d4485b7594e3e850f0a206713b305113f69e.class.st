Class {
	#name : #SRT9002d4485b7594e3e850f0a206713b305113f69e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9002d4485b7594e3e850f0a206713b305113f69e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuNDsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVEaXYodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiID4gMCk7CiAgICB1aW50IGMgPSBhIC8gYjsKICAgIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB7CiAgICAgIHRocm93OwogICAgfQogIH0KfQoKCgpjb250cmFjdCBUb2tlbiBpcyBTYWZlTWF0aCB7CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKXB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkge30KICAgIAogICAKICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKXB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSlwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwogICAgCn0KCgovL0VSQzIwIENvbXBsaWFudApjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgICAKICAgIAogICAgCiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApCiAgICAgICAgewogICAgICAgICAgICBpZihpbmZsYXRpb25fY29tcGxldGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHVpbnQyNTYgQ2FsY3VsYXRlZEZlZSA9IHNhZmVNdWwoc2FmZURpdih0cmFuc2FjdGlvbmZlZUFtb3VudCwxMDAwMDAwMDAwMDAwMDApLHRyYW5zYWN0aW9uZmVlQW1vdW50KTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSxfdmFsdWUpOwogICAgICAgICAgICAgICBfdmFsdWUgPSBzYWZlU3ViKF92YWx1ZSxDYWxjdWxhdGVkRmVlKTsKICAgICAgICAgICAgICAgIHRvdGFsRmVlQ29sbGVjdGVkID0gc2FmZUFkZCh0b3RhbEZlZUNvbGxlY3RlZCxDYWxjdWxhdGVkRmVlKTsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBzYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKICAgICAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLF92YWx1ZSk7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLF92YWx1ZSk7CiAgICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID1zYWZlQWRkKGJhbGFuY2VzW190b10sX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID1zYWZlU3ViKGJhbGFuY2VzW19mcm9tXSxfdmFsdWUpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sX3ZhbHVlKTsgCiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseT0gICAwOwogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbFN1cHBseT0gMjUwMDAwMCoxMCoqMTI7CiAgICB1aW50MjU2IHB1YmxpYyByZXdhcmRzdXBwbHk9IDQ1MDAwMDAqMTAqKjEyOwogICAgYm9vbCBwdWJsaWMgaW5mbGF0aW9uX2NvbXBsZXRlOwogICAgdWludDI1NiBwdWJsaWMgdHJhbnNhY3Rpb25mZWVBbW91bnQ7IC8vIFRoaXMgaXMgdGhlIHBlcmNlbnRhZ2UgcGVyIHRyYW5zYWN0aW9uIEhhd2FsYS5Ub2RheSBzaGFsbCBiZSBjb2xsZWN0aW5nIAogICAgdWludDI1NiBwdWJsaWMgdG90YWxGZWVDb2xsZWN0ZWQ7Cn0KCgoKY29udHJhY3QgSGF3YWxhVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgCiAgICB1aW50MjU2IHB1YmxpYyAgdG90YWxzdGFrZWFtb3VudDsKICAgIHVpbnQyNTYgcHVibGljIEhhd2FsYUtpY2tvZmZUaW1lOwogICAgYWRkcmVzcyBfY29udHJhY3RPd25lcjsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsRmVlQ29sbGVjdGVkOwogIAogICAgc3RyaW5nIHB1YmxpYyBuYW1lOyAgICAgICAgICAgICAgICAgIAogICAgdWludDggcHVibGljIGRlY2ltYWxzOyAgICAgICAgICAgICAgIAogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnSEFUJzsgICAgICAgCgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gSUZTQmFsYW5jZSkgcHVibGljIElGU0JhbGFuY2VzOwogICBzdHJ1Y3QgSUZTQmFsYW5jZQogICAgewogICAgICAgIAogICAgICAgICB1aW50MjU2IFRvdGFsUmV3YXJkc0NvbGxlY3RlZDsgCiAgICAgICAgdWludDI1NiBBbW91bnQ7IAogICAgICAgIHVpbnQyNTYgSUZTTG9ja1RpbWU7CiAgICAgICAgdWludDI1NiBMYXN0Q29sbGVjdGVkUmV3YXJkOwogICAgfQogICAgCiAgIAogICAgZXZlbnQgSUZTQWN0aXZlKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQyNTYgX3ZhbHVlLHVpbnQyNTYgX2xvY2t0aW1lKTsKICAgIAogICAgZnVuY3Rpb24gKCkgcHVibGljIHsKICAgICAgICAvL2lmIGV0aGVyIGlzIHNlbnQgdG8gdGhpcyBhZGRyZXNzLCBzZW5kIGl0IGJhY2suCiAgICAKICAgICAgICB0aHJvdzsKICAgIH0KCiAgCgogICAgICAKCiAgICAgIGZ1bmN0aW9uIENhbGN1bGF0ZVJld2FyZCh1aW50MjU2IHN0YWtpbmdhbW91bnQsdWludDI1NiBpbml0aWFsTG9ja1RpbWUsdWludDI1NiBfY3VycmVudHRpbWUpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2IF9hbW91bnQpIHsKICAgICAgICAgCiAgICAgICAgCiAgICAgICAgIHVpbnQgX3RpbWVzaW5jZVN0YWtpbmcgPSh1aW50KF9jdXJyZW50dGltZSktdWludChpbml0aWFsTG9ja1RpbWUpKS8gMSBkYXlzOwogICAgICAgICBfdGltZXNpbmNlU3Rha2luZyA9IHNhZmVEaXYoX3RpbWVzaW5jZVN0YWtpbmcsMyk7Ly9leHBsb2l0aW5nIG5vbi1mbG9hdGluZyBwb2ludCBkaXZpc2lvbgogICAgICAgICBfdGltZXNpbmNlU3Rha2luZyA9IHNhZmVNdWwoX3RpbWVzaW5jZVN0YWtpbmcsMyk7Ly9nZXQgdG8gbnVtYmVyIG9mIGRheXMgcmV3YXJkIHNoYWxsIGJlIGRpc3RyaWJ1dGVkCiAgICAgICAgCiAgICAgIAogICAgICAgIAogICAgICAgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gMSB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgLy9fYW1vdW50ID0gMTsvL3NhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMCksMTUpKTsKICAgICAgICAgICAgICAKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKHNhZmVEaXYoc3Rha2luZ2Ftb3VudCwxMDAwMDAwMDAwMDAwKSw0MTA5NTg5MDQpIDsvLzE1JSBzYWZlRGl2KDQsMTAwKTsvL3NhZmVNdWwoc3Rha2luZ2Ftb3VudCxzYWZlRGl2KDQsMTAwKSk7CiAgICAgICAgICAgICBfYW1vdW50ID0gc2FmZU11bChfdGltZXNpbmNlU3Rha2luZyxfYW1vdW50KTsKICAgICAgICAgIAogICAgICAgICB9CiAgICAgICAgZWxzZSBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gMiB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDQxMDk1ODkwNCkgOy8vMTUlIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgICBlbHNlICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gMyB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDMyODc2NzEyMykgOy8vMTIlIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgICBlbHNlICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gNCB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDMyODc2NzEyMykgOy8vMTIlIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgIGVsc2UgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gNSB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDMyODc2NzEyMykgOy8vMTIlIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgIGVsc2UgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gNiB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDI3Mzk3MjYwMikgOy8vMTAlIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgZWxzZSAgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gNyB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDI3Mzk3MjYwMikgOy8vMTAlICBzYWZlRGl2KDQsMTAwKTsvL3NhZmVNdWwoc3Rha2luZ2Ftb3VudCxzYWZlRGl2KDQsMTAwKSk7CiAgICAgICAgICAgICBfYW1vdW50ID0gc2FmZU11bChfdGltZXNpbmNlU3Rha2luZyxfYW1vdW50KTsKICAgICAgICAgICAgIAogICAgICAgICB9CiAgICAgICBlbHNlICAgaWYoc2FmZVN1YihfY3VycmVudHRpbWUsSGF3YWxhS2lja29mZlRpbWUpIDw9IDggeWVhcnMpCiAgICAgICAgIHsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKHNhZmVEaXYoc3Rha2luZ2Ftb3VudCwxMDAwMDAwMDAwMDAwKSwyMTkxNzgwODIpIDsvLzglIHNhZmVEaXYoNCwxMDApOy8vc2FmZU11bChzdGFraW5nYW1vdW50LHNhZmVEaXYoNCwxMDApKTsKICAgICAgICAgICAgIF9hbW91bnQgPSBzYWZlTXVsKF90aW1lc2luY2VTdGFraW5nLF9hbW91bnQpOwogICAgICAgICAgICAgCiAgICAgICAgIH0KICAgICAgZWxzZSAgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPD0gOSB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDIwNTQ3OTQ1MikgOy8vNy41MCUgc2FmZURpdig0LDEwMCk7Ly9zYWZlTXVsKHN0YWtpbmdhbW91bnQsc2FmZURpdig0LDEwMCkpOwogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoX3RpbWVzaW5jZVN0YWtpbmcsX2Ftb3VudCk7CiAgICAgICAgICAgICAKICAgICAgICAgfQogICAgICAgZWxzZSAgIGlmKHNhZmVTdWIoX2N1cnJlbnR0aW1lLEhhd2FsYUtpY2tvZmZUaW1lKSA8PSAxMCB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDE5ODYzMDEzNikgOy8vNy4yNSUgc2FmZURpdig0LDEwMCk7Ly9zYWZlTXVsKHN0YWtpbmdhbW91bnQsc2FmZURpdig0LDEwMCkpOwogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoX3RpbWVzaW5jZVN0YWtpbmcsX2Ftb3VudCk7CiAgICAgICAgICAgICAKICAgICAgICAgfQogICAgICAgIGVsc2UgICBpZihzYWZlU3ViKF9jdXJyZW50dGltZSxIYXdhbGFLaWNrb2ZmVGltZSkgPiAxMCB5ZWFycykKICAgICAgICAgewogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoc2FmZURpdihzdGFraW5nYW1vdW50LDEwMDAwMDAwMDAwMDApLDE5ODYzMDEzNikgOy8vNy4yNSUgc2FmZURpdig0LDEwMCk7Ly9zYWZlTXVsKHN0YWtpbmdhbW91bnQsc2FmZURpdig0LDEwMCkpOwogICAgICAgICAgICAgX2Ftb3VudCA9IHNhZmVNdWwoX3RpbWVzaW5jZVN0YWtpbmcsX2Ftb3VudCk7CiAgICAgICAgICAgICAKICAgICAgICAgfQogICAgICAgICByZXR1cm4gX2Ftb3VudDsKICAgICAgICAgLy9leHRyYWN0IG9ueSB0aGUgcXVvdGllbnQgZnJvbSBfdGltZXNpbmNlU3Rha2luZwogICAgICAgIAogICAgIH0KICAgICAKICAgICBmdW5jdGlvbiBjaGFuZ2VUcmFuc2FjdGlvbkZlZSh1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgICB7CiAgICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBfY29udHJhY3RPd25lcikgewogICAgICAgICAgICAgIAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uZmVlQW1vdW50ID0gYW1vdW50OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgIGVsc2V7CiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgIH0KICAgICB9CiAgICAgCiAgICAgZnVuY3Rpb24gY2FuRXhlY3V0ZSh1aW50IGluaXRpYWxMb2NrVGltZSx1aW50MjU2IF9jdXJyZW50dGltZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgICB7CiAgICAgICAgICBpZiAoX2N1cnJlbnR0aW1lID49IGluaXRpYWxMb2NrVGltZSArIDMgZGF5cykgewogICAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgIGVsc2V7CiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgIH0KICAgICB9CiAgICAgCiAgICAgCiAgICAgIGZ1bmN0aW9uIGRpc3BlcnNlUmV3YXJkcyhhZGRyZXNzIHRvYWRkcmVzcyAsdWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAKICAgICAgICAgIGlmKG1zZy5zZW5kZXI9PV9jb250cmFjdE93bmVyKQogICAgICAgICAgewogICAgICAgICAgICAgaWYoaW5mbGF0aW9uX2NvbXBsZXRlKQogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWYodG90YWxGZWVDb2xsZWN0ZWQ+MCAmJiB0b3RhbEZlZUNvbGxlY3RlZD5hbW91bnQpCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0b3RhbEZlZUNvbGxlY3RlZCA9IHNhZmVTdWIodG90YWxGZWVDb2xsZWN0ZWQsYW1vdW50KTsKICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXNbdG9hZGRyZXNzXSA9IHNhZmVBZGQoYmFsYW5jZXNbdG9hZGRyZXNzXSxhbW91bnQpOwogICAgICAgICAgICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCB0b2FkZHJlc3MsIGFtb3VudCk7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgCiAgICAgIH0KICAgICAgIGZ1bmN0aW9uIGNsYWltSUZTUmV3YXJkKGFkZHJlc3MgX3NlbmRlcikgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyl7CiAgICAgCiAgICAgICAKICAgICAgICBpZihtc2cuc2VuZGVyIT1fc2VuZGVyKS8vTWFrZSBzdXJlIG9ubHkgYXV0aG9yaXplIG93bmVyIG9mIGFjY291bnQgY291bGQgdHJpZ2dlciBJRlMgYW5kIGhlL3NoZSBtdXN0IGhhdmUgZW5vdWdoIGJhbGFuY2UgdG8gdHJpZ2dlciBJRlMKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgaWYoSUZTQmFsYW5jZXNbX3NlbmRlcl0uQW1vdW50PD0wKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgLy8gaXMgSUZTIGJhbGFuY2UgYWdlIG1pbmltdW0gMyBkYXk/CiAgICAgICAgICAgICAgICB1aW50MjU2IF9jdXJyZW50dGltZSA9IG5vdzsKICAgICAgICAgICAgICAgIGlmKGNhbkV4ZWN1dGUoSUZTQmFsYW5jZXNbX3NlbmRlcl0uSUZTTG9ja1RpbWUsX2N1cnJlbnR0aW1lKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL0dldCBUb3RhbCBudW1iZXIgb2YgZGF5cyBpbiBtdWx0aXBsZSBvZiAzJ3MuLiBTdXBwb3NlIGlmIHRoZSBzdGFraW5nIGxvY2sgd2FzIGRvbmUgMTAgZGF5cyBhZ28KICAgICAgICAgICAgICAgICAgICAvL2J1dCB0aGUgcmV3YXJkIHNoYWxsIGJlIGFsbG9jYXRlZCBhbmQgY2FsY3VsYXRlZCBmb3IgOSBEYXlzLgogICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgY2FsY3VsYXRlZHJld2FyZCA9IENhbGN1bGF0ZVJld2FyZChJRlNCYWxhbmNlc1tfc2VuZGVyXS5BbW91bnQsSUZTQmFsYW5jZXNbX3NlbmRlcl0uSUZTTG9ja1RpbWUsX2N1cnJlbnR0aW1lKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgIGlmKCFpbmZsYXRpb25fY29tcGxldGUpCiAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYocmV3YXJkc3VwcGx5Pj1jYWxjdWxhdGVkcmV3YXJkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICByZXdhcmRzdXBwbHkgPSBzYWZlU3ViKHJld2FyZHN1cHBseSxjYWxjdWxhdGVkcmV3YXJkKTsKICAgICAgICAgICAgICAgICAgICAgICAgIGJhbGFuY2VzW19zZW5kZXJdID1zYWZlQWRkKGJhbGFuY2VzW19zZW5kZXJdLCBjYWxjdWxhdGVkcmV3YXJkKTsKICAgICAgICAgICAgICAgICAgICAgICAgIElGU0JhbGFuY2VzW19zZW5kZXJdLklGU0xvY2tUaW1lID0gX2N1cnJlbnR0aW1lOy8vcmVzZXQgdGhlIGNsb2NrCiAgICAgICAgICAgICAgICAgICAgICAgICBJRlNCYWxhbmNlc1tfc2VuZGVyXS5Ub3RhbFJld2FyZHNDb2xsZWN0ZWQgPSBzYWZlQWRkKCBJRlNCYWxhbmNlc1tfc2VuZGVyXS5Ub3RhbFJld2FyZHNDb2xsZWN0ZWQsY2FsY3VsYXRlZHJld2FyZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgSUZTQmFsYW5jZXNbX3NlbmRlcl0uTGFzdENvbGxlY3RlZFJld2FyZCA9IHJld2FyZHN1cHBseTsvL1NldCB0aGlzIHRvIHNlZSBsYXN0IGNvbGxlY3RlZCByZXdhcmQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJld2FyZHN1cHBseT4wKS8vd2hhdGV2ZXIgcmVtYWluaW5nIGluIHRoZSBzdXBwbHkgaGFuZCBpdCBvdXQgdG8gbGFzdCBzdGFraW5nIGFjY291bnQKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZXNbX3NlbmRlcl0gPXNhZmVBZGQoYmFsYW5jZXNbX3NlbmRlcl0sIHJld2FyZHN1cHBseSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJld2FyZHN1cHBseSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbmZsYXRpb25fY29tcGxldGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIE5vdCB0aW1lIHlldCB0byBwcm9jZXNzIHN0YWtpbmcgcmV3YXJkIAogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgIAogICAgZnVuY3Rpb24gc2V0SUZTKGFkZHJlc3MgX3NlbmRlcix1aW50MjU2IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpewogICAgICAgIGlmKG1zZy5zZW5kZXIhPV9zZW5kZXIgfHwgYmFsYW5jZXNbX3NlbmRlcl08X2Ftb3VudCB8fCByZXdhcmRzdXBwbHk9PTApLy9NYWtlIHN1cmUgb25seSBhdXRob3JpemUgb3duZXIgb2YgYWNjb3VudCBjb3VsZCB0cmlnZ2VyIElGUyBhbmQgaGUvc2hlIG11c3QgaGF2ZSBlbm91Z2ggYmFsYW5jZSB0byB0cmlnZ2VyIElGUwogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlc1tfc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbX3NlbmRlcl0sX2Ftb3VudCk7CiAgICAgICAgSUZTQmFsYW5jZXNbX3NlbmRlcl0uQW1vdW50ID0gc2FmZUFkZChJRlNCYWxhbmNlc1tfc2VuZGVyXS5BbW91bnQsX2Ftb3VudCk7CiAgICAgICAgSUZTQmFsYW5jZXNbX3NlbmRlcl0uSUZTTG9ja1RpbWUgPSBub3c7CiAgICAgICAgSUZTQWN0aXZlKF9zZW5kZXIsX2Ftb3VudCxJRlNCYWxhbmNlc1tfc2VuZGVyXS5JRlNMb2NrVGltZSk7CiAgICAgICAgdG90YWxzdGFrZWFtb3VudCA9ICBzYWZlQWRkKHRvdGFsc3Rha2VhbW91bnQsX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgCiAgICB9CiAgICBmdW5jdGlvbiByZUNsYWltSUZTKGFkZHJlc3MgX3NlbmRlcilwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKXsKICAgICAgICBpZihtc2cuc2VuZGVyIT1fc2VuZGVyIHx8IElGU0JhbGFuY2VzW19zZW5kZXJdLkFtb3VudDw9MCApLy9NYWtlIHN1cmUgb25seSBhdXRob3JpemUgb3duZXIgb2YgYWNjb3VudCBhbmQgPiAwIHN0YWtpbmcgY291bGQgdHJpZ2dlciByZUNsYWltSUZTICAKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGJhbGFuY2VzW19zZW5kZXJdID0gc2FmZUFkZChiYWxhbmNlc1tfc2VuZGVyXSxJRlNCYWxhbmNlc1tfc2VuZGVyXS5BbW91bnQpOwogICAgICAgICAgICB0b3RhbHN0YWtlYW1vdW50ID0gIHNhZmVTdWIodG90YWxzdGFrZWFtb3VudCxJRlNCYWxhbmNlc1tfc2VuZGVyXS5BbW91bnQpOwogICAgICAgICAgICBJRlNCYWxhbmNlc1tfc2VuZGVyXS5BbW91bnQgPSAwOwogICAgICAgICAgICBJRlNCYWxhbmNlc1tfc2VuZGVyXS5JRlNMb2NrVGltZSA9IDA7Ly8gCiAgICAgICAgICAgIElGU0FjdGl2ZShfc2VuZGVyLDAsSUZTQmFsYW5jZXNbX3NlbmRlcl0uSUZTTG9ja1RpbWUpOy8vQnJvYWRjYXN0IGV2ZW50IC4uLiBPdXIgbW9iaWxlIGhvb2tzIHNob3VsZCBiZSBsaXN0ZW5pbmcgdG8gcmVsZWFzZSB0aW1lCiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICAgICAgCiAgICAgICAgCiAgICB9CiAgICAKICAgIAogICAgZnVuY3Rpb24gSGF3YWxhVG9rZW4oCiAgICAgICAgKXB1YmxpYyB7CiAgICAgICAgLy9BZGQgaW5pdGlhbCBzdXBwbHkgdG8gdG90YWwgc3VwcGx5IHRvIG1ha2UgIDdNLiByZW1haW5pbmcgNC41TSBsb2NrZWQgaW4gZm9yIHJld2FyZCBkaXN0cmlidXRpb24gICAgICAgIAogICAgICAgIHRvdGFsU3VwcGx5PXNhZmVBZGQoaW5pdGlhbFN1cHBseSxyZXdhcmRzdXBwbHkpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gaW5pdGlhbFN1cHBseTsgICAgICAgICAgICAgICAKICAgICAgICBuYW1lID0gIkhhd2FsYVRva2VuIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBkZWNpbWFscyA9IDEyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBzeW1ib2wgPSAiSEFUIjsgIAogICAgICAgIGluZmxhdGlvbl9jb21wbGV0ZSA9IGZhbHNlOwogICAgICAgIEhhd2FsYUtpY2tvZmZUaW1lPW5vdzsKICAgICAgICB0b3RhbHN0YWtlYW1vdW50PTA7CiAgICAgICAgdG90YWxGZWVDb2xsZWN0ZWQ9MDsKICAgICAgICB0cmFuc2FjdGlvbmZlZUFtb3VudD0xMDAwMDAwMDAwMDA7Ly8gSW5pdGlhbGl6ZWQgd2l0aCAwLjEwIFBlcmNlbnQgcGVyIHRyYW5zYWN0aW9uIGFmdGVyIDEwIHllYXJzCiAgICAgICAgX2NvbnRyYWN0T3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2V4dHJhRGF0YSlwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIGlmKCFfc3BlbmRlci5jYWxsKGJ5dGVzNChieXRlczMyKHNoYTMoInJlY2VpdmVBcHByb3ZhbChhZGRyZXNzLHVpbnQyNTYsYWRkcmVzcyxieXRlcykiKSkpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpKSB7IHRocm93OyB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
