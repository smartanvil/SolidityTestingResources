Class {
	#name : #SRTDF35a8572E8c107E17803f7AF2Fc48B6c226C6A4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTDF35a8572E8c107E17803f7AF2Fc48B6c226C6A4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCmNvbnRyYWN0IEdpbW1lclRva2VuU2FsZSBpcyBQYXVzYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvKioKICAgICogQGRldiBTdXBwb3J0ZXIgc3RydWN0dXJlLCB3aGljaCBhbGxvd3MgdXMgdG8gdHJhY2sKICAgICogaG93IG11Y2ggdGhlIHVzZXIgaGFzIGJvdWdodCBzbyBmYXIsIGFuZCBpZiBoZSdzIGZsYWdnZWQgYXMga25vd24KICAgICovCiAgICBzdHJ1Y3QgU3VwcG9ydGVyIHsKICAgICAgICB1aW50MjU2IHdlaVNwZW50OyAvLyB0aGUgdG90YWwgYW1vdW50IG9mIFdlaSB0aGlzIGFkZHJlc3MgaGFzIHNlbnQgdG8gdGhpcyBjb250cmFjdAogICAgICAgIGJvb2wgaGFzS1lDOyAvLyBpZiB0aGUgdXNlciBoYXMgS1lDIGZsYWdnZWQKICAgIH0KCiAgICAvLyBWYXJpYWJsZXMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBTdXBwb3J0ZXIpIHB1YmxpYyBzdXBwb3J0ZXJzTWFwOyAvLyBNYXBwaW5nIHdpdGggYWxsIHRoZSBjYW1wYWlnbiBzdXBwb3J0ZXJzCiAgICBHaW1tZXJUb2tlbiBwdWJsaWMgdG9rZW47IC8vIEVSQzIwIEdNUiBUb2tlbiBjb250cmFjdCBhZGRyZXNzCiAgICBhZGRyZXNzIHB1YmxpYyBmdW5kV2FsbGV0OyAvLyBXYWxsZXQgYWRkcmVzcyB0byBmb3J3YXJkIGFsbCBFdGhlciB0bwogICAgYWRkcmVzcyBwdWJsaWMga3ljTWFuYWdlcldhbGxldDsgLy8gV2FsbGV0IGFkZHJlc3MgdGhhdCBtYW5hZ2VzIHRoZSBhcHByb3ZhbCBvZiBLWUMKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGQ7IC8vIEhvdyBtYW55IHRva2VucyBzb2xkIGhhdmUgYmVlbiBzb2xkIGluIHRvdGFsCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7IC8vIFRvdGFsIGFtb3VudCBvZiByYWlzZWQgbW9uZXkgaW4gV2VpCiAgICB1aW50MjU2IHB1YmxpYyBtYXhUeEdhczsgLy8gTWF4aW11bSB0cmFuc2FjdGlvbiBnYXMgcHJpY2UgYWxsb3dlZCBmb3IgZmFpci1jaGFuY2UgdHJhbnNhY3Rpb25zCiAgICB1aW50MjU2IHB1YmxpYyBzYWxlV2VpTGltaXRXaXRob3V0S1lDOyAvLyBUaGUgbWF4aW11bSBhbW91bnQgb2YgV2VpIGFuIGFkZHJlc3MgY2FuIHNwZW5kIGhlcmUgd2l0aG91dCBuZWVkaW5nIEtZQyBhcHByb3ZhbCBkdXJpbmcgQ3Jvd2RTYWxlCiAgICBib29sIHB1YmxpYyBmaW5pc2hlZDsgLy8gRmxhZyBkZW5vdGluZyB0aGUgb3duZXIgaGFzIGludm9rZWQgZmluaXNoQ29udHJhY3QoKQoKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE9ORV9NSUxMSU9OID0gMTAwMDAwMDsgLy8gT25lIG1pbGxpb24gZm9yIHRva2VuIGNhcCBjYWxjdWxhdGlvbiByZWZlcmVuY2UKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFBSRV9TQUxFX0dNUl9UT0tFTl9DQVAgPSAxNSAqIE9ORV9NSUxMSU9OICogMSBldGhlcjsgLy8gTWF4aW11bSBhbW91bnQgdGhhdCBjYW4gYmUgc29sZCBkdXJpbmcgdGhlIFByZSBTYWxlIHBlcmlvZAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgR01SX1RPS0VOX1NBTEVfQ0FQID0gMTAwICogT05FX01JTExJT04gKiAxIGV0aGVyOyAvLyBNYXhpbXVtIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgc29sZCBieSB0aGlzIGNvbnRyYWN0CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBNSU5fRVRIRVIgPSAwLjEgZXRoZXI7IC8vIE1pbmltdW0gRVRIIENvbnRyaWJ1dGlvbiBhbGxvd2VkIGR1cmluZyB0aGUgY3Jvd2Qgc2FsZQoKICAgIC8qIEFsbG93ZWQgQ29udHJpYnV0aW9uIGluIEV0aGVyICovCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQUkVfU0FMRV8zMF9FVEggPSAzMCBldGhlcjsgLy8gTWluaW11bSAzMCBFdGhlciB0byBnZXQgMjUlIEJvbnVzIFRva2VucwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFX1NBTEVfMzAwX0VUSCA9IDMwMCBldGhlcjsgLy8gTWluaW11bSAzMDAgRXRoZXIgdG8gZ2V0IDMwJSBCb251cyBUb2tlbnMKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFBSRV9TQUxFXzEwMDBfRVRIID0gMTAwMCBldGhlcjsgLy8gTWluaW11bSAzMDAwIEV0aGVyIHRvIGdldCA0MCUgQm9udXMgVG9rZW5zCgogICAgLyogQm9udXMgVG9rZW5zIGJhc2VkIG9uIHRoZSBFVEggQ29udHJpYnV0ZWQgaW4gc2luZ2xlIHRyYW5zYWN0aW9uICovCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SQVRFX0JBU0VfUkFURSA9IDI1MDA7IC8vIEJhc2UgUHJpY2UgZm9yIHJlZmVyZW5jZSBvbmx5CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SQVRFXzA1X1BFUkNFTlRfQk9OVVMgPSAyNjI1OyAvLyAwNSUgQm9udXMgVG9rZW5zIER1cmluZyBDcm93ZCBTYWxlJ3MgV2VlayA0CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SQVRFXzEwX1BFUkNFTlRfQk9OVVMgPSAyNzUwOyAvLyAxMCUgQm9udXMgVG9rZW5zIER1cmluZyBDcm93ZCBTYWxlJ3MgV2VlayAzCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9SQVRFXzE1X1BFUkNFTlRfQk9OVVMgPSAyODc1OyAvLyAxNSUgQm9udXMgVG9rZW5zIER1cmluZyBDcm93ZCBTYWxlJ3NXZWVrIDIKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1JBVEVfMjBfUEVSQ0VOVF9CT05VUyA9IDMwMDA7IC8vIDIwJSBCb251cyBUb2tlbnMgRHVyaW5nIENyb3dkIFNhbGUnc1dlZWsgMQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVE9LRU5fUkFURV8yNV9QRVJDRU5UX0JPTlVTID0gMzEyNTsgLy8gMjUlIEJvbnVzIFRva2VucywgRHVyaW5nIFByZVNhbGUgd2hlbiA+PSAzMCBFVEggJiA8IDMwMCBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1JBVEVfMzBfUEVSQ0VOVF9CT05VUyA9IDMyNTA7IC8vIDMwJSBCb251cyBUb2tlbnMsIER1cmluZyBQcmVTYWxlIHdoZW4gPj0gMzAwIEVUSCAmIDwgMzAwMCBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1JBVEVfNDBfUEVSQ0VOVF9CT05VUyA9IDM1MDA7IC8vIDQwJSBCb251cyBUb2tlbnMsIER1cmluZyBQcmVTYWxlIHdoZW4gPj0gMzAwMCBFVEgKCiAgICAvKiBUaW1lc3RhbXBzIHdoZXJlIGludmVzdG1lbnRzIGFyZSBhbGxvd2VkICovCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBQUkVfU0FMRV9TVEFSVF9USU1FID0gMTUxNjE5MDQwMDsgLy8gUHJlU2FsZSBTdGFydCBUaW1lIDogVVRDOiBXZWRuZXNkYXksIDE3IEphbnVhcnkgMjAxOCAxMjowMDowMCAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFBSRV9TQUxFX0VORF9USU1FID0gMTUxNzQwMDAwMDsgLy8gUHJlU2FsZSBFbmQgVGltZSA6IFVUQzogV2VkbmVzZGF5LCAzMSBKYW51YXJ5IDIwMTggMTI6MDA6MDAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFNUQVJUX1dFRUtfMSA9IDE1MTc0ODY0MDA7IC8vIENyb3dkU2FsZSBTdGFydCBXZWVrLTEgOiBVVEM6IFRodXJzZGF5LCAxIEZlYnJ1YXJ5IDIwMTggMTI6MDA6MDAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFNUQVJUX1dFRUtfMiA9IDE1MTgwOTEyMDA7IC8vIENyb3dkU2FsZSBTdGFydCBXZWVrLTIgOiBVVEM6IFRodXJzZGF5LCA4IEZlYnJ1YXJ5IDIwMTggMTI6MDA6MDAKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFNUQVJUX1dFRUtfMyA9IDE1MTg2OTYwMDA7IC8vIENyb3dkU2FsZSBTdGFydCBXZWVrLTMgOiBVVEM6IFRodXJzZGF5LCAxNSBGZWJydWFyeSAyMDE4IDEyOjAwOjAwCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBTVEFSVF9XRUVLXzQgPSAxNTE5MzAwODAwOyAvLyBDcm93ZFNhbGUgU3RhcnQgV2Vlay00IDogVVRDOiBUaHVyc2RheSwgMjIgRmVicnVhcnkgMjAxOCAxMjowMDowMAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgU0FMRV9FTkRfVElNRSA9IDE1MTk5MDU2MDA7IC8vIENyb3dkU2FsZSBFbmQgVGltZSA6IFVUQzogVGh1cnNkYXksIDEgTWFyY2ggMjAxOCAxMjowMDowMAoKICAgIC8qKgogICAgKiBAZGV2IE1vZGlmaWVyIHRvIG9ubHkgYWxsb3cgS1lDTWFuYWdlciBXYWxsZXQKICAgICogdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uCiAgICAqLwogICAgbW9kaWZpZXIgb25seUt5Y01hbmFnZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGt5Y01hbmFnZXJXYWxsZXQpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAqIEV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgICAqIEBwYXJhbSBwdXJjaGFzZXIgVGhlIHdhbGxldCBhZGRyZXNzIHRoYXQgYm91Z2h0IHRoZSB0b2tlbnMKICAgICogQHBhcmFtIHZhbHVlIEhvdyBtYW55IFdlaXMgd2VyZSBwYWlkIGZvciB0aGUgcHVyY2hhc2UKICAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQKICAgICovCiAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCiAgICAvKioKICAgICAqIEV2ZW50IGZvciBreWMgc3RhdHVzIGNoYW5nZSBsb2dnaW5nCiAgICAgKiBAcGFyYW0gdXNlciBVc2VyIHdobyBoYXMgaGFkIGhpcyBLWUMgc3RhdHVzIGNoYW5nZWQKICAgICAqIEBwYXJhbSBpc0FwcHJvdmVkIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIEtZQyBhcHByb3ZhbCB0aGUgdXNlciBoYXMgYmVlbiBjaGFuZ2VkIHRvCiAgICAgKi8KICAgIGV2ZW50IEtZQyhhZGRyZXNzIGluZGV4ZWQgdXNlciwgYm9vbCBpc0FwcHJvdmVkKTsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gX2Z1bmRXYWxsZXQgQWRkcmVzcyB0byBmb3J3YXJkIGFsbCByZWNlaXZlZCBFdGhlcnMgdG8KICAgICAqIEBwYXJhbSBfa3ljTWFuYWdlcldhbGxldCBLWUMgTWFuYWdlciB3YWxsZXQgdG8gYXBwcm92ZSAvIGRpc2FwcHJvdmUgdXNlcidzIEtZQwogICAgICogQHBhcmFtIF9zYWxlV2VpTGltaXRXaXRob3V0S1lDIE1heGltdW0gYW1vdW50IG9mIFdlaSBhbiBhZGRyZXNzIGNhbiBzcGVuZCBpbiB0aGUgY29udHJhY3Qgd2l0aG91dCBLWUMgZHVyaW5nIHRoZSBjcm93ZHNhbGUKICAgICAqIEBwYXJhbSBfbWF4VHhHYXMgTWF4aW11bSBnYXMgcHJpY2UgYSB0cmFuc2FjdGlvbiBjYW4gaGF2ZSBiZWZvcmUgYmVpbmcgcmV2ZXJ0ZWQKICAgICAqLwogICAgZnVuY3Rpb24gR2ltbWVyVG9rZW5TYWxlKAogICAgICAgIGFkZHJlc3MgX2Z1bmRXYWxsZXQsIAogICAgICAgIGFkZHJlc3MgX2t5Y01hbmFnZXJXYWxsZXQsCiAgICAgICAgdWludDI1NiBfc2FsZVdlaUxpbWl0V2l0aG91dEtZQywgCiAgICAgICAgdWludDI1NiBfbWF4VHhHYXMKICAgICkKICAgIHB1YmxpYyAKICAgIHsKICAgICAgICByZXF1aXJlKF9mdW5kV2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX2t5Y01hbmFnZXJXYWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfc2FsZVdlaUxpbWl0V2l0aG91dEtZQyA+IDApOwogICAgICAgIHJlcXVpcmUoX21heFR4R2FzID4gMCk7CgogICAgICAgIGZ1bmRXYWxsZXQgPSBfZnVuZFdhbGxldDsKICAgICAgICBreWNNYW5hZ2VyV2FsbGV0ID0gX2t5Y01hbmFnZXJXYWxsZXQ7CiAgICAgICAgc2FsZVdlaUxpbWl0V2l0aG91dEtZQyA9IF9zYWxlV2VpTGltaXRXaXRob3V0S1lDOwogICAgICAgIG1heFR4R2FzID0gX21heFR4R2FzOwoKICAgICAgICB0b2tlbiA9IG5ldyBHaW1tZXJUb2tlbigpOwogICAgfQoKICAgIC8qIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMgKi8KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMoKTsKICAgIH0KCiAgICAvKiBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24gKi8KICAgIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIERvIG5vdCBhbGxvdyBpZiBnYXNwcmljZSBpcyBiaWdnZXIgdGhhbiB0aGUgbWF4aW11bQogICAgICAgIC8vIFRoaXMgaXMgZm9yIGZhaXItY2hhbmNlIGZvciBhbGwgY29udHJpYnV0b3JzLCBzbyBubyBvbmUgY2FuCiAgICAgICAgLy8gc2V0IGEgdG9vLWhpZ2ggdHJhbnNhY3Rpb24gcHJpY2UgYW5kIGJlIGFibGUgdG8gYnV5IGVhcmxpZXIKICAgICAgICByZXF1aXJlKHR4Lmdhc3ByaWNlIDw9IG1heFR4R2FzKTsKICAgICAgICAvLyB2YWxpZCBwdXJjaGFzZSBpZGVudGlmaWVzIHdoaWNoIHN0YWdlIHRoZSBjb250cmFjdCBpcyBhdCAoUHJlU3RhdGUvVG9rZW4gU2FsZSkKICAgICAgICAvLyBtYWtpbmcgc3VyZSB3ZXJlIGluc2lkZSB0aGUgY29udHJpYnV0aW9uIHBlcmlvZCBhbmQgdGhlIHVzZXIKICAgICAgICAvLyBpcyBzZW5kaW5nIGVub3VnaCBXZWkgZm9yIHRoZSBzdGFnZSdzIHJ1bGVzCiAgICAgICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKCkpOwoKICAgICAgICBhZGRyZXNzIHNlbmRlciA9IG1zZy5zZW5kZXI7CiAgICAgICAgdWludDI1NiB3ZWlBbW91bnRTZW50ID0gbXNnLnZhbHVlOwoKICAgICAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgICAgICB1aW50MjU2IHJhdGUgPSBnZXRSYXRlKHdlaUFtb3VudFNlbnQpOwogICAgICAgIHVpbnQyNTYgbmV3VG9rZW5zID0gd2VpQW1vdW50U2VudC5tdWwocmF0ZSk7CgogICAgICAgIC8vIGxvb2sgaWYgd2UgaGF2ZSBub3QgeWV0IHJlYWNoZWQgdGhlIGNhcAogICAgICAgIHVpbnQyNTYgdG90YWxUb2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQobmV3VG9rZW5zKTsKICAgICAgICBpZiAoaXNDcm93ZFNhbGVSdW5uaW5nKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSh0b3RhbFRva2Vuc1NvbGQgPD0gR01SX1RPS0VOX1NBTEVfQ0FQKTsKICAgICAgICB9IGVsc2UgaWYgKGlzUHJlU2FsZVJ1bm5pbmcoKSkgeyAKICAgICAgICAgICAgcmVxdWlyZSh0b3RhbFRva2Vuc1NvbGQgPD0gUFJFX1NBTEVfR01SX1RPS0VOX0NBUCk7CiAgICAgICAgfQoKICAgICAgICAvLyB1cGRhdGUgc3VwcG9ydGVyIHN0YXRlCiAgICAgICAgU3VwcG9ydGVyIHN0b3JhZ2Ugc3VwID0gc3VwcG9ydGVyc01hcFtzZW5kZXJdOwogICAgICAgIHVpbnQyNTYgdG90YWxXZWkgPSBzdXAud2VpU3BlbnQuYWRkKHdlaUFtb3VudFNlbnQpOwogICAgICAgIHN1cC53ZWlTcGVudCA9IHRvdGFsV2VpOwoKICAgICAgICAvLyB1cGRhdGUgY29udHJhY3Qgc3RhdGUKICAgICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudFNlbnQpOwogICAgICAgIHRva2Vuc1NvbGQgPSB0b3RhbFRva2Vuc1NvbGQ7CgogICAgICAgIC8vIG1pbnQgdGhlIGNvaW5zCiAgICAgICAgdG9rZW4ubWludChzZW5kZXIsIG5ld1Rva2Vucyk7CiAgICAgICAgVG9rZW5QdXJjaGFzZShzZW5kZXIsIHdlaUFtb3VudFNlbnQsIG5ld1Rva2Vucyk7CgogICAgICAgIC8vIGZvcndhcmQgdGhlIGZ1bmRzIHRvIHRoZSB3YWxsZXQKICAgICAgICBmdW5kV2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRW5kcyB0aGUgb3BlcmF0aW9uIG9mIHRoZSBjb250cmFjdAogICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaENvbnRyYWN0KCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBjb250cmlidXRpb24gcGVyaW9kIGhhcyBlbmRlZAogICAgICAgIHJlcXVpcmUobm93ID4gU0FMRV9FTkRfVElNRSk7CiAgICAgICAgcmVxdWlyZSghZmluaXNoZWQpOwoKICAgICAgICBmaW5pc2hlZCA9IHRydWU7CgogICAgICAgIC8vIHNlbmQgdGhlIDEwJSBjb21taXNzaW9uIHRvIEdpbW1lcidzIGZ1bmQgd2FsbGV0CiAgICAgICAgdWludDI1NiB0ZW5QQyA9IHRva2Vuc1NvbGQuZGl2KDEwKTsKICAgICAgICB0b2tlbi5taW50KGZ1bmRXYWxsZXQsIHRlblBDKTsKCiAgICAgICAgLy8gZmluaXNoIHRoZSBtaW50aW5nIG9mIHRoZSB0b2tlbiwgc28gdGhlIHN5c3RlbSBhbGxvd3MgdHJhbnNmZXJzCiAgICAgICAgdG9rZW4uZmluaXNoTWludGluZygpOwoKICAgICAgICAvLyB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRvIHRoZSBmdW5kIHdhbGxldCwKICAgICAgICAvLyBzbyBpdCBpc24ndCBsb2NrZWQgdG8gYmUgYSBjaGlsZCBvZiB0aGUgY3Jvd2Qgc2FsZSBjb250cmFjdAogICAgICAgIHRva2VuLnRyYW5zZmVyT3duZXJzaGlwKGZ1bmRXYWxsZXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNhbGVXZWlMaW1pdFdpdGhvdXRLWUModWludDI1NiBfbmV3U2FsZVdlaUxpbWl0V2l0aG91dEtZQykgcHVibGljIG9ubHlLeWNNYW5hZ2VyIHsKICAgICAgICByZXF1aXJlKF9uZXdTYWxlV2VpTGltaXRXaXRob3V0S1lDID4gMCk7CiAgICAgICAgc2FsZVdlaUxpbWl0V2l0aG91dEtZQyA9IF9uZXdTYWxlV2VpTGltaXRXaXRob3V0S1lDOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFVwZGF0ZXMgdGhlIG1heGltdW0gYWxsb3dlZCB0cmFuc2FjdGlvbiBjb3N0IHRoYXQgY2FuIGJlIHJlY2VpdmVkCiAgICAqIG9uIHRoZSBidXlUb2tlbnMoKSBmdW5jdGlvbi4KICAgICogQHBhcmFtIF9uZXdNYXhUeEdhcyBUaGUgbmV3IG1heGltdW0gdHJhbnNhY3Rpb24gY29zdAogICAgKi8KICAgIGZ1bmN0aW9uIHVwZGF0ZU1heFR4R2FzKHVpbnQyNTYgX25ld01heFR4R2FzKSBwdWJsaWMgb25seUt5Y01hbmFnZXIgewogICAgICAgIHJlcXVpcmUoX25ld01heFR4R2FzID4gMCk7CiAgICAgICAgbWF4VHhHYXMgPSBfbmV3TWF4VHhHYXM7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRmxhZyBhbiB1c2VyIGFzIGtub3duCiAgICAqIEBwYXJhbSBfdXNlciBUaGUgdXNlciB0byBmbGFnIGFzIGtub3duCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZVVzZXJLWUMoYWRkcmVzcyBfdXNlcikgb25seUt5Y01hbmFnZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF91c2VyICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICBTdXBwb3J0ZXIgc3RvcmFnZSBzdXAgPSBzdXBwb3J0ZXJzTWFwW191c2VyXTsKICAgICAgICBzdXAuaGFzS1lDID0gdHJ1ZTsKICAgICAgICBLWUMoX3VzZXIsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBGbGFnIGFuIHVzZXIgYXMgdW5rbm93bi9kaXNhcHByb3ZlZAogICAgICogQHBhcmFtIF91c2VyIFRoZSB1c2VyIHRvIGZsYWcgYXMgdW5rbm93biAvIHN1c3BlY2lvdXMKICAgICAqLwogICAgZnVuY3Rpb24gZGlzYXBwcm92ZVVzZXJLWUMoYWRkcmVzcyBfdXNlcikgb25seUt5Y01hbmFnZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF91c2VyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIAogICAgICAgIFN1cHBvcnRlciBzdG9yYWdlIHN1cCA9IHN1cHBvcnRlcnNNYXBbX3VzZXJdOwogICAgICAgIHN1cC5oYXNLWUMgPSBmYWxzZTsKICAgICAgICBLWUMoX3VzZXIsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBDaGFuZ2VzIHRoZSBLWUMgbWFuYWdlciB0byBhIG5ldyBhZGRyZXNzCiAgICAqIEBwYXJhbSBfbmV3S1lDTWFuYWdlcldhbGxldCBUaGUgbmV3IGFkZHJlc3MgdGhhdCB3aWxsIGJlIG1hbmFnaW5nIEtZQyBhcHByb3ZhbAogICAgKi8KICAgIGZ1bmN0aW9uIHNldEtZQ01hbmFnZXIoYWRkcmVzcyBfbmV3S1lDTWFuYWdlcldhbGxldCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfbmV3S1lDTWFuYWdlcldhbGxldCAhPSBhZGRyZXNzKDApKTsKICAgICAgICBreWNNYW5hZ2VyV2FsbGV0ID0gX25ld0tZQ01hbmFnZXJXYWxsZXQ7CiAgICB9CiAgICAKICAgIC8qKgogICAgKiBAZGV2IFJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlIHRva2VuIHNhbGUgc3RhZ2VzIGFyZSBjdXJyZW50bHkgcnVubmluZwogICAgKiBAcmV0dXJuIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoaXMgY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbiBpc1Rva2VuU2FsZVJ1bm5pbmcoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAoaXNQcmVTYWxlUnVubmluZygpIHx8IGlzQ3Jvd2RTYWxlUnVubmluZygpKTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZXNhbGUgc2FsZSBpcyBjdXJyZW50bHkgcnVubmluZwogICAgKiBAcmV0dXJuIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBwcmVzYWxlCiAgICAqLwogICAgZnVuY3Rpb24gaXNQcmVTYWxlUnVubmluZygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIChub3cgPj0gUFJFX1NBTEVfU1RBUlRfVElNRSAmJiBub3cgPCBQUkVfU0FMRV9FTkRfVElNRSk7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgUmV0dXJucyB0cnVlIGlmIHRoZSBwdWJsaWMgc2FsZSBpcyBjdXJyZW50bHkgcnVubmluZwogICAgKiBAcmV0dXJuIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBjcm93ZCBzYWxlCiAgICAqLwogICAgZnVuY3Rpb24gaXNDcm93ZFNhbGVSdW5uaW5nKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKG5vdyA+PSBTVEFSVF9XRUVLXzEgJiYgbm93IDw9IFNBTEVfRU5EX1RJTUUpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFJldHVybnMgdHJ1ZSBpZiB0aGUgcHVibGljIHNhbGUgaGFzIGVuZGVkCiAgICAqIEByZXR1cm4gQSBib29sZWFuIHJlcHJlc2VudGluZyBpZiB3ZSBhcmUgcGFzdCB0aGUgY29udHJpYnV0aW9uIGRhdGUgZm9yIHRoaXMgY29udHJhY3QKICAgICovCiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG5vdyA+IFNBTEVfRU5EX1RJTUU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgUmV0dXJucyB0cnVlIGlmIHRoZSBwcmUgc2FsZSBoYXMgZW5kZWQKICAgICogQHJldHVybiBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIGlmIHdlIGFyZSBwYXN0IHRoZSBwcmUgc2FsZSBjb250cmlidXRpb24gZGF0ZXMKICAgICovCiAgICBmdW5jdGlvbiBoYXNQcmVTYWxlRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPiBQUkVfU0FMRV9FTkRfVElNRTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBSZXR1cm5zIGlmIGFuIHVzZXIgaGFzIEtZQyBhcHByb3ZhbCBvciBub3QKICAgICogQHJldHVybiBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSB1c2VyJ3MgS1lDIHN0YXR1cwogICAgKi8KICAgIGZ1bmN0aW9uIHVzZXJIYXNLWUMoYWRkcmVzcyBfdXNlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwcG9ydGVyc01hcFtfdXNlcl0uaGFzS1lDOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIHRoZSB3ZWlTcGVudCBvZiBhIHVzZXIKICAgICAqLwogICAgZnVuY3Rpb24gdXNlcldlaVNwZW50KGFkZHJlc3MgX3VzZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHN1cHBvcnRlcnNNYXBbX3VzZXJdLndlaVNwZW50OwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBSZXR1cm5zIHRoZSByYXRlIHRoZSB1c2VyIHdpbGwgYmUgcGF5aW5nIGF0LAogICAgICogYmFzZWQgb24gdGhlIGFtb3VudCBvZiBXZWkgc2VudCB0byB0aGUgY29udHJhY3QsIGFuZCB0aGUgY3VycmVudCB0aW1lCiAgICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSByYXRlIHRoZSB1c2VyIHdpbGwgcGF5IGZvciB0aGUgR01SIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiBnZXRSYXRlKHVpbnQyNTYgX3dlaUFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgeyAgIAogICAgICAgIGlmIChpc0Nyb3dkU2FsZVJ1bm5pbmcoKSkgewogICAgICAgICAgICBpZiAobm93ID49IFNUQVJUX1dFRUtfNCkgeyByZXR1cm4gVE9LRU5fUkFURV8wNV9QRVJDRU5UX0JPTlVTOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSBTVEFSVF9XRUVLXzMpIHsgcmV0dXJuIFRPS0VOX1JBVEVfMTBfUEVSQ0VOVF9CT05VUzsgfQogICAgICAgICAgICBlbHNlIGlmIChub3cgPj0gU1RBUlRfV0VFS18yKSB7IHJldHVybiBUT0tFTl9SQVRFXzE1X1BFUkNFTlRfQk9OVVM7IH0KICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IFNUQVJUX1dFRUtfMSkgeyByZXR1cm4gVE9LRU5fUkFURV8yMF9QRVJDRU5UX0JPTlVTOyB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGlzUHJlU2FsZVJ1bm5pbmcoKSkgewogICAgICAgICAgICBpZiAoX3dlaUFtb3VudCA+PSBQUkVfU0FMRV8xMDAwX0VUSCkgeyByZXR1cm4gVE9LRU5fUkFURV80MF9QRVJDRU5UX0JPTlVTOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKF93ZWlBbW91bnQgPj0gUFJFX1NBTEVfMzAwX0VUSCkgeyByZXR1cm4gVE9LRU5fUkFURV8zMF9QRVJDRU5UX0JPTlVTOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKF93ZWlBbW91bnQgPj0gUFJFX1NBTEVfMzBfRVRIKSB7IHJldHVybiBUT0tFTl9SQVRFXzI1X1BFUkNFTlRfQk9OVVM7IH0KICAgICAgICB9CiAgICB9CgogICAgLyogQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2FjdGlvbiBjYW4gYnV5IHRva2Vucywgb3RoZXJ3aXNlIGZhbHNlICovCiAgICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgdXNlckhhc0t5YyA9IHVzZXJIYXNLWUMobXNnLnNlbmRlcik7CgogICAgICAgIGlmIChpc0Nyb3dkU2FsZVJ1bm5pbmcoKSkgewogICAgICAgICAgICAvLyBjcm93ZHNhbGUgcmVzdHJpY3Rpb25zIChLWUMgb25seSBuZWVkZWQgYWZ0ZXIgd2VpIGxpbWl0LCBtaW5pbXVtIG9mIDAuMSBFVEggdHgpCiAgICAgICAgICAgIGlmKCF1c2VySGFzS3ljKSB7CiAgICAgICAgICAgICAgICBTdXBwb3J0ZXIgc3RvcmFnZSBzdXAgPSBzdXBwb3J0ZXJzTWFwW21zZy5zZW5kZXJdOwogICAgICAgICAgICAgICAgdWludDI1NiBldGhDb250cmlidXRpb24gPSBzdXAud2VpU3BlbnQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgICAgICAgICBpZiAoZXRoQ29udHJpYnV0aW9uID4gc2FsZVdlaUxpbWl0V2l0aG91dEtZQykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbXNnLnZhbHVlID49IE1JTl9FVEhFUjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoaXNQcmVTYWxlUnVubmluZygpKSB7CiAgICAgICAgICAgIC8vIHByZXNhbGUgcmVzdHJpY3Rpb25zIChhdCBsZWFzdCAzMCBldGgsIGFsd2F5cyBLWUMpCiAgICAgICAgICAgIHJldHVybiB1c2VySGFzS3ljICYmIG1zZy52YWx1ZSA+PSBQUkVfU0FMRV8zMF9FVEg7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBAZGV2IEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX2FkZGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gaW5jcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICoKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBkZWNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3N1YnRyYWN0ZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBkZWNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9Cgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBzdG9wIG1pbnRpbmcgbmV3IHRva2Vucy4KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY29udHJhY3QgR2ltbWVyVG9rZW4gaXMgTWludGFibGVUb2tlbiAgewogICAgLy8gQ29uc3RhbnRzCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiR2ltbWVyVG9rZW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiR01SIjsgIAogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogICAgLyoqCiAgICAqIEBkZXYgTW9kaWZpZXIgdG8gb25seSBhbGxvdyB0cmFuc2ZlcnMgYWZ0ZXIgdGhlIG1pbnRpbmcgaGFzIGJlZW4gZG9uZQogICAgKi8KICAgIG1vZGlmaWVyIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkKCkgewogICAgICAgIHJlcXVpcmUobWludGluZ0ZpbmlzaGVkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIHZhbGlkRGVzdGluYXRpb24oYWRkcmVzcyBfdG8pIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDB4MCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gR2ltbWVyVG9rZW4oKSBwdWJsaWMgewogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyAgICAgICAgCiAgICAgICAgb25seVdoZW5UcmFuc2ZlckVuYWJsZWQKICAgICAgICB2YWxpZERlc3RpbmF0aW9uKF90bykgICAgICAgICAKICAgICAgICByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYwogICAgICAgIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkICAgICAgICAgCiAgICAgICAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYwogICAgICAgIG9ubHlXaGVuVHJhbnNmZXJFbmFibGVkICAgICAgICAgCiAgICAgICAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci5pbmNyZWFzZUFwcHJvdmFsKF9zcGVuZGVyLCBfYWRkZWRWYWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMKICAgICAgICBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZCAgICAgICAgIAogICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIuZGVjcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMKICAgICAgICBvbmx5V2hlblRyYW5zZmVyRW5hYmxlZAogICAgICAgIHZhbGlkRGVzdGluYXRpb24oX3RvKSAgICAgICAgIAogICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQp9'.
	

]
