Class {
	#name : #SRT5fdca7a3d3ec979dd5b2bfec2ecc6ad0fb0a87bb,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5fdca7a3d3ec979dd5b2bfec2ecc6ad0fb0a87bb >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBJTWludGFibGVUb2tlbiB7CiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBQcmljaW5nU3RyYXRlZ3kgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIHVpbnQgcHVibGljIHJhdGUwOwogICAgdWludCBwdWJsaWMgcmF0ZTE7CiAgICB1aW50IHB1YmxpYyByYXRlMjsKCiAgICB1aW50IHB1YmxpYyB0aHJlc2hvbGQxOwogICAgdWludCBwdWJsaWMgdGhyZXNob2xkMjsKCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtV2VpQW1vdW50OwoKICAgIGZ1bmN0aW9uIFByaWNpbmdTdHJhdGVneSgKICAgICAgICB1aW50IF9yYXRlMCwKICAgICAgICB1aW50IF9yYXRlMSwKICAgICAgICB1aW50IF9yYXRlMiwKICAgICAgICB1aW50IF9taW5pbXVtV2VpQW1vdW50LAogICAgICAgIHVpbnQgX3RocmVzaG9sZDEsCiAgICAgICAgdWludCBfdGhyZXNob2xkMgogICAgKSB7CiAgICAgICAgcmVxdWlyZShfcmF0ZTAgPiAwKTsKICAgICAgICByZXF1aXJlKF9yYXRlMSA+IDApOwogICAgICAgIHJlcXVpcmUoX3JhdGUyID4gMCk7CiAgICAgICAgcmVxdWlyZShfbWluaW11bVdlaUFtb3VudCA+IDApOwogICAgICAgIHJlcXVpcmUoX3RocmVzaG9sZDEgPiAwKTsKICAgICAgICByZXF1aXJlKF90aHJlc2hvbGQyID4gMCk7CgogICAgICAgIHJhdGUwID0gX3JhdGUwOwogICAgICAgIHJhdGUxID0gX3JhdGUxOwogICAgICAgIHJhdGUyID0gX3JhdGUyOwogICAgICAgIG1pbmltdW1XZWlBbW91bnQgPSBfbWluaW11bVdlaUFtb3VudDsKICAgICAgICB0aHJlc2hvbGQxID0gX3RocmVzaG9sZDE7CiAgICAgICAgdGhyZXNob2xkMiA9IF90aHJlc2hvbGQyOwogICAgfQoKICAgIC8qKiBJbnRlcmZhY2UgZGVjbGFyYXRpb24uICovCiAgICBmdW5jdGlvbiBpc1ByaWNpbmdTdHJhdGVneSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqIENhbGN1bGF0ZSB0aGUgY3VycmVudCBwcmljZSBmb3IgYnV5IGluIGFtb3VudC4gKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2VuQW1vdW50KHVpbnQgd2VpQW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCB0b2tlbkFtb3VudCkgewogICAgICAgIHVpbnQgYm9udXNSYXRlID0gMDsKCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSBtaW5pbXVtV2VpQW1vdW50KSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSB0aHJlc2hvbGQxKSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSB0aHJlc2hvbGQyKSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHdlaUFtb3VudC5tdWwoYm9udXNSYXRlKTsKICAgIH0KfQoKY29udHJhY3QgUHJlc2FsZSBpcyBQYXVzYWJsZSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgLyogTWF4IGludmVzdG1lbnQgY291bnQgd2hlbiB3ZSBhcmUgc3RpbGwgYWxsb3dlZCB0byBjaGFuZ2UgdGhlIG11bHRpc2lnIGFkZHJlc3MgKi8KICAgIHVpbnQgcHVibGljIE1BWF9JTlZFU1RNRU5UU19CRUZPUkVfTVVMVElTSUdfQ0hBTkdFID0gNTAwOwoKICAgIC8qIFRoZSB0b2tlbiB3ZSBhcmUgc2VsbGluZyAqLwogICAgSU1pbnRhYmxlVG9rZW4gcHVibGljIHRva2VuOwoKICAgIC8qIEhvdyB3ZSBhcmUgZ29pbmcgdG8gcHJpY2Ugb3VyIG9mZmVyaW5nICovCiAgICBQcmljaW5nU3RyYXRlZ3kgcHVibGljIHByaWNpbmdTdHJhdGVneTsKCiAgICAvKiB0b2tlbnMgd2lsbCBiZSB0cmFuc2ZlcmVkIGZyb20gdGhpcyBhZGRyZXNzICovCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ1dhbGxldDsKCiAgICAvKiBpZiB0aGUgZnVuZGluZyBnb2FsIGlzIG5vdCByZWFjaGVkLCBpbnZlc3RvcnMgbWF5IHdpdGhkcmF3IHRoZWlyIGZ1bmRzICovCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtRnVuZGluZ0dvYWw7CgogICAgLyogdGhlIFVOSVggdGltZXN0YW1wIHN0YXJ0IGRhdGUgb2YgdGhlIHByZXNhbGUgKi8KICAgIHVpbnQgcHVibGljIHN0YXJ0c0F0OwoKICAgIC8qIHRoZSBVTklYIHRpbWVzdGFtcCBlbmQgZGF0ZSBvZiB0aGUgcHJlc2FsZSAqLwogICAgdWludCBwdWJsaWMgZW5kc0F0OwoKICAgIC8qIE1heGltdW0gYW1vdW50IG9mIHRva2VucyB0aGlzIHByZXNhbGUgY2FuIHNlbGwuICovCiAgICB1aW50IHB1YmxpYyB0b2tlbnNIYXJkQ2FwOwoKICAgIC8qIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFscmVhZHkgc29sZCB0aHJvdWdoIHRoaXMgY29udHJhY3QqLwogICAgdWludCBwdWJsaWMgdG9rZW5zU29sZCA9IDA7CgogICAgLyogSG93IG1hbnkgd2VpIG9mIGZ1bmRpbmcgd2UgaGF2ZSByYWlzZWQgKi8KICAgIHVpbnQgcHVibGljIHdlaVJhaXNlZCA9IDA7CgogICAgLyogSG93IG1hbnkgZGlzdGluY3QgYWRkcmVzc2VzIGhhdmUgaW52ZXN0ZWQgKi8KICAgIHVpbnQgcHVibGljIGludmVzdG9yQ291bnQgPSAwOwoKICAgIC8qIEhvdyBtdWNoIHdlaSB3ZSBoYXZlIHJldHVybmVkIGJhY2sgdG8gdGhlIGNvbnRyYWN0IGFmdGVyIGEgZmFpbGVkIGNyb3dkZnVuZC4gKi8KICAgIHVpbnQgcHVibGljIGxvYWRlZFJlZnVuZCA9IDA7CgogICAgLyogSG93IG11Y2ggd2VpIHdlIGhhdmUgZ2l2ZW4gYmFjayB0byBpbnZlc3RvcnMuKi8KICAgIHVpbnQgcHVibGljIHdlaVJlZnVuZGVkID0gMDsKCiAgICAvKiogSG93IG11Y2ggRVRIIGVhY2ggYWRkcmVzcyBoYXMgaW52ZXN0ZWQgdG8gdGhpcyBwcmVzYWxlICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBpbnZlc3RlZEFtb3VudE9mOwoKICAgIC8qKiBIb3cgbXVjaCB0b2tlbnMgdGhpcyBwcmVzYWxlIGhhcyBjcmVkaXRlZCBmb3IgZWFjaCBpbnZlc3RvciBhZGRyZXNzICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b2tlbkFtb3VudE9mOwoKICAgIC8qKiBBZGRyZXNzZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBpbnZlc3QgZXZlbiBiZWZvcmUgSUNPIG9mZmljYWwgb3BlbnMuIE9ubHkgZm9yIHRlc3RpbmcgcHVycHVzZXMuICovCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBlYXJseVBhcnRpY2lwYW50V2hpdGVsaXN0OwoKICAgIC8qKiBTdGF0ZSBtYWNoaW5lCiAgICAqCiAgICAqIC0gUHJlcGFyaW5nOiBBbGwgY29udHJhY3QgaW5pdGlhbGl6YXRpb24gY2FsbHMgYW5kIHZhcmlhYmxlcyBoYXZlIG5vdCBiZWVuIHNldCB5ZXQKICAgICogLSBQcmVmdW5kaW5nOiBXZSBoYXZlIG5vdCBwYXNzZWQgc3RhcnQgdGltZSB5ZXQKICAgICogLSBGdW5kaW5nOiBBY3RpdmUgcHJlc2FsZQogICAgKiAtIFN1Y2Nlc3M6IE1pbmltdW0gZnVuZGluZyBnb2FsIHJlYWNoZWQKICAgICogLSBGYWlsdXJlOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCBub3QgcmVhY2hlZCBiZWZvcmUgZW5kaW5nIHRpbWUKICAgICogLSBSZWZ1bmRpbmc6IFJlZnVuZHMgYXJlIGxvYWRlZCBvbiB0aGUgY29udHJhY3QgZm9yIHJlY2xhaW0uCiAgICAqLwogICAgZW51bSBTdGF0ZXtVbmtub3duLCBQcmVwYXJpbmcsIFByZUZ1bmRpbmcsIEZ1bmRpbmcsIFN1Y2Nlc3MsIEZhaWx1cmUsIFJlZnVuZGluZ30KCiAgICAvLyBBIG5ldyBpbnZlc3RtZW50IHdhcyBtYWRlCiAgICBldmVudCBJbnZlc3RlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCwgdWludCB0b2tlbkFtb3VudCk7CgogICAgLy8gUmVmdW5kIHdhcyBwcm9jZXNzZWQgZm9yIGEgY29udHJpYnV0b3IKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CgogICAgLy8gQWRkcmVzcyBlYXJseSBwYXJ0aWNpcGF0aW9uIHdoaXRlbGlzdCBzdGF0dXMgY2hhbmdlZAogICAgZXZlbnQgV2hpdGVsaXN0ZWQoYWRkcmVzcyBhZGRyLCBib29sIHN0YXR1cyk7CgogICAgLy8gUHJlc2FsZSBlbmQgdGltZSBoYXMgYmVlbiBjaGFuZ2VkCiAgICBldmVudCBFbmRzQXRDaGFuZ2VkKHVpbnQgZW5kc0F0KTsKCiAgICBmdW5jdGlvbiBQcmVzYWxlKAogICAgICAgIGFkZHJlc3MgX3Rva2VuLCAKICAgICAgICBhZGRyZXNzIF9wcmljaW5nU3RyYXRlZ3ksIAogICAgICAgIGFkZHJlc3MgX211bHRpc2lnV2FsbGV0LCAKICAgICAgICB1aW50IF9zdGFydCwgCiAgICAgICAgdWludCBfZW5kLCAKICAgICAgICB1aW50IF90b2tlbnNIYXJkQ2FwLAogICAgICAgIHVpbnQgX21pbmltdW1GdW5kaW5nR29hbAogICAgKSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW4gIT0gMCk7CiAgICAgICAgcmVxdWlyZShfcHJpY2luZ1N0cmF0ZWd5ICE9IDApOwogICAgICAgIHJlcXVpcmUoX211bHRpc2lnV2FsbGV0ICE9IDApOwogICAgICAgIHJlcXVpcmUoX3N0YXJ0ICE9IDApOwogICAgICAgIHJlcXVpcmUoX2VuZCAhPSAwKTsKICAgICAgICByZXF1aXJlKF9zdGFydCA8IF9lbmQpOwogICAgICAgIHJlcXVpcmUoX3Rva2Vuc0hhcmRDYXAgIT0gMCk7CgogICAgICAgIHRva2VuID0gSU1pbnRhYmxlVG9rZW4oX3Rva2VuKTsKICAgICAgICBzZXRQcmljaW5nU3RyYXRlZ3koX3ByaWNpbmdTdHJhdGVneSk7CiAgICAgICAgbXVsdGlzaWdXYWxsZXQgPSBfbXVsdGlzaWdXYWxsZXQ7CiAgICAgICAgc3RhcnRzQXQgPSBfc3RhcnQ7CiAgICAgICAgZW5kc0F0ID0gX2VuZDsKICAgICAgICB0b2tlbnNIYXJkQ2FwID0gX3Rva2Vuc0hhcmRDYXA7CiAgICAgICAgbWluaW11bUZ1bmRpbmdHb2FsID0gX21pbmltdW1GdW5kaW5nR29hbDsKICAgIH0KCiAgICAvKioKICAgICogQnV5IHRva2VucwogICAgKi8KICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgaW52ZXN0KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgKiBNYWtlIGFuIGludmVzdG1lbnQuCiAgICAqCiAgICAqIFByZXNhbGUgbXVzdCBiZSBydW5uaW5nIGZvciBvbmUgdG8gaW52ZXN0LgogICAgKiBXZSBtdXN0IGhhdmUgbm90IHByZXNzZWQgdGhlIGVtZXJnZW5jeSBicmFrZS4KICAgICoKICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSBFdGhlcmV1bSBhZGRyZXNzIHdobyByZWNlaXZlcyB0aGUgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24gaW52ZXN0KGFkZHJlc3MgcmVjZWl2ZXIpIHdoZW5Ob3RQYXVzZWQgcGF5YWJsZSB7CgogICAgICAgIC8vIERldGVybWluZSBpZiBpdCdzIGEgZ29vZCB0aW1lIHRvIGFjY2VwdCBpbnZlc3RtZW50IGZyb20gdGhpcyBwYXJ0aWNpcGFudAogICAgICAgIGlmIChnZXRTdGF0ZSgpID09IFN0YXRlLlByZUZ1bmRpbmcpIHsKICAgICAgICAgICAgLy8gQXJlIHdlIHdoaXRlbGlzdGVkIGZvciBlYXJseSBkZXBvc2l0CiAgICAgICAgICAgIHJlcXVpcmUoZWFybHlQYXJ0aWNpcGFudFdoaXRlbGlzdFtyZWNlaXZlcl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoZ2V0U3RhdGUoKSA9PSBTdGF0ZS5GdW5kaW5nKTsKICAgICAgICB9CgogICAgICAgIHVpbnQgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwoKICAgICAgICAvLyBBY2NvdW50IHByZXNhbGUgc2FsZXMgc2VwYXJhdGVseSwgc28gdGhhdCB0aGV5IGRvIG5vdCBjb3VudCBhZ2FpbnN0IHByaWNpbmcgdHJhbmNoZXMKICAgICAgICB1aW50IHRva2VuQW1vdW50ID0gcHJpY2luZ1N0cmF0ZWd5LmNhbGN1bGF0ZVRva2VuQW1vdW50KHdlaUFtb3VudCk7CgogICAgICAgIC8vIER1c3QgdHJhbnNhY3Rpb24KICAgICAgICByZXF1aXJlKHRva2VuQW1vdW50ID4gMCk7CgogICAgICAgIGlmIChpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSA9PSAwKSB7CiAgICAgICAgICAgIC8vIEEgbmV3IGludmVzdG9yCiAgICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZSBpbnZlc3RvcgogICAgICAgIGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdID0gaW52ZXN0ZWRBbW91bnRPZltyZWNlaXZlcl0uYWRkKHdlaUFtb3VudCk7CiAgICAgICAgdG9rZW5BbW91bnRPZltyZWNlaXZlcl0gPSB0b2tlbkFtb3VudE9mW3JlY2VpdmVyXS5hZGQodG9rZW5BbW91bnQpOwoKICAgICAgICAvLyBVcGRhdGUgdG90YWxzCiAgICAgICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwogICAgICAgIHRva2Vuc1NvbGQgPSB0b2tlbnNTb2xkLmFkZCh0b2tlbkFtb3VudCk7CgogICAgICAgIC8vIENoZWNrIHRoYXQgd2UgZGlkIG5vdCBidXN0IHRoZSBjYXAKICAgICAgICByZXF1aXJlKCFpc0JyZWFraW5nQ2FwKHRva2Vuc1NvbGQpKTsKCiAgICAgICAgdG9rZW4ubWludChyZWNlaXZlciwgdG9rZW5BbW91bnQpOwoKICAgICAgICAvLyBQb2NrZXQgdGhlIG1vbmV5CiAgICAgICAgbXVsdGlzaWdXYWxsZXQudHJhbnNmZXIod2VpQW1vdW50KTsKCiAgICAgICAgLy8gVGVsbCB1cyBpbnZlc3Qgd2FzIHN1Y2Nlc3MKICAgICAgICBJbnZlc3RlZChyZWNlaXZlciwgd2VpQW1vdW50LCB0b2tlbkFtb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbG93IGFkZHJlc3NlcyB0byBkbyBlYXJseSBwYXJ0aWNpcGF0aW9uLgogICAgKgogICAgKi8KICAgIGZ1bmN0aW9uIHNldEVhcmx5UGFyaWNpcGFudFdoaXRlbGlzdChhZGRyZXNzIGFkZHIsIGJvb2wgc3RhdHVzKSBvbmx5T3duZXIgewogICAgICAgIGVhcmx5UGFydGljaXBhbnRXaGl0ZWxpc3RbYWRkcl0gPSBzdGF0dXM7CiAgICAgICAgV2hpdGVsaXN0ZWQoYWRkciwgc3RhdHVzKTsKICAgIH0KCiAgICAvKioKICAgICogQWxsb3cgcHJlc2FsZSBvd25lciB0byBjbG9zZSBlYXJseSBvciBleHRlbmQgdGhlIHByZXNhbGUuCiAgICAqCiAgICAqIFRoaXMgaXMgdXNlZnVsIGUuZy4gZm9yIGEgbWFudWFsIHNvZnQgY2FwIGltcGxlbWVudGF0aW9uOgogICAgKiAtIGFmdGVyIFggYW1vdW50IGlzIHJlYWNoZWQgZGV0ZXJtaW5lIG1hbnVhbCBjbG9zaW5nCiAgICAqCiAgICAqIFRoaXMgbWF5IHB1dCB0aGUgcHJlc2FsZSB0byBhbiBpbnZhbGlkIHN0YXRlLAogICAgKiBidXQgd2UgdHJ1c3Qgb3duZXJzIGtub3cgd2hhdCB0aGV5IGFyZSBkb2luZy4KICAgICoKICAgICovCiAgICBmdW5jdGlvbiBzZXRFbmRzQXQodWludCB0aW1lKSBvbmx5T3duZXIgewoKICAgICAgICByZXF1aXJlKG5vdyA8PSB0aW1lKTsKCiAgICAgICAgZW5kc0F0ID0gdGltZTsKICAgICAgICBFbmRzQXRDaGFuZ2VkKGVuZHNBdCk7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbG93IHRvIChyZSlzZXQgcHJpY2luZyBzdHJhdGVneS4KICAgICoKICAgICogRGVzaWduIGNob2ljZTogbm8gc3RhdGUgcmVzdHJpY3Rpb25zIG9uIHRoZSBzZXQsIHNvIHRoYXQgd2UgY2FuIGZpeCBmYXQgZmluZ2VyIG1pc3Rha2VzLgogICAgKi8KICAgIGZ1bmN0aW9uIHNldFByaWNpbmdTdHJhdGVneShhZGRyZXNzIF9wcmljaW5nU3RyYXRlZ3kpIG9ubHlPd25lciB7CiAgICAgICAgcHJpY2luZ1N0cmF0ZWd5ID0gUHJpY2luZ1N0cmF0ZWd5KF9wcmljaW5nU3RyYXRlZ3kpOwoKICAgICAgICAvLyBEb24ndCBhbGxvdyBzZXR0aW5nIGJhZCBhZ2VudAogICAgICAgIHJlcXVpcmUocHJpY2luZ1N0cmF0ZWd5LmlzUHJpY2luZ1N0cmF0ZWd5KCkpOwogICAgfQoKICAgIC8qKgogICAgKiBBbGxvdyB0byBjaGFuZ2UgdGhlIHRlYW0gbXVsdGlzaWcgYWRkcmVzcyBpbiB0aGUgY2FzZSBvZiBlbWVyZ2VuY3kuCiAgICAqCiAgICAqIFRoaXMgYWxsb3dzIHRvIHNhdmUgYSBkZXBsb3llZCBwcmVzYWxlIHdhbGxldCBpbiB0aGUgY2FzZSB0aGUgcHJlc2FsZSBoYXMgbm90IHlldCBiZWd1bgogICAgKiAod2UgaGF2ZSBkb25lIG9ubHkgZmV3IHRlc3QgdHJhbnNhY3Rpb25zKS4gQWZ0ZXIgdGhlIHByZXNhbGUgaXMgZ29pbmcKICAgICogdGhlbiBtdWx0aXNpZyBhZGRyZXNzIHN0YXlzIGxvY2tlZCBmb3IgdGhlIHNhZmV0eSByZWFzb25zLgogICAgKi8KICAgIGZ1bmN0aW9uIHNldE11bHRpc2lnKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lciB7CgogICAgICAgIHJlcXVpcmUoaW52ZXN0b3JDb3VudCA8PSBNQVhfSU5WRVNUTUVOVFNfQkVGT1JFX01VTFRJU0lHX0NIQU5HRSk7CgogICAgICAgIG11bHRpc2lnV2FsbGV0ID0gYWRkcjsKICAgIH0KCiAgICAvKioKICAgICogQWxsb3cgbG9hZCByZWZ1bmRzIGJhY2sgb24gdGhlIGNvbnRyYWN0IGZvciB0aGUgcmVmdW5kaW5nLgogICAgKgogICAgKiBUaGUgdGVhbSBjYW4gdHJhbnNmZXIgdGhlIGZ1bmRzIGJhY2sgb24gdGhlIHNtYXJ0IGNvbnRyYWN0IGluIHRoZSBjYXNlIHRoZSBtaW5pbXVtIGdvYWwgd2FzIG5vdCByZWFjaGVkLi4KICAgICovCiAgICBmdW5jdGlvbiBsb2FkUmVmdW5kKCkgcHVibGljIHBheWFibGUgaW5TdGF0ZShTdGF0ZS5GYWlsdXJlKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICAgICAgbG9hZGVkUmVmdW5kID0gbG9hZGVkUmVmdW5kLmFkZChtc2cudmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgKiBJbnZlc3RvcnMgY2FuIGNsYWltIHJlZnVuZC4KICAgICoKICAgICogTm90ZSB0aGF0IGFueSByZWZ1bmRzIGZyb20gcHJveHkgYnV5ZXJzIHNob3VsZCBiZSBoYW5kbGVkIHNlcGFyYXRlbHksCiAgICAqIGFuZCBub3QgdGhyb3VnaCB0aGlzIGNvbnRyYWN0LgogICAgKi8KICAgIGZ1bmN0aW9uIHJlZnVuZCgpIHB1YmxpYyBpblN0YXRlKFN0YXRlLlJlZnVuZGluZykgewogICAgICAgIHVpbnQyNTYgd2VpVmFsdWUgPSBpbnZlc3RlZEFtb3VudE9mW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUod2VpVmFsdWUgPiAwKTsKCiAgICAgICAgaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgd2VpUmVmdW5kZWQgPSB3ZWlSZWZ1bmRlZC5hZGQod2VpVmFsdWUpOwogICAgICAgIFJlZnVuZChtc2cuc2VuZGVyLCB3ZWlWYWx1ZSk7CiAgICAgICAgCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2Zlcih3ZWlWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIENyb3dkZnVuZCBzdGF0ZSBtYWNoaW5lIG1hbmFnZW1lbnQuCiAgICAqCiAgICAqIFdlIG1ha2UgaXQgYSBmdW5jdGlvbiBhbmQgZG8gbm90IGFzc2lnbiB0aGUgcmVzdWx0IHRvIGEgdmFyaWFibGUsIHNvIHRoZXJlIGlzIG5vIGNoYW5jZSBvZiB0aGUgdmFyaWFibGUgYmVpbmcgc3RhbGUuCiAgICAqLwogICAgZnVuY3Rpb24gZ2V0U3RhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoU3RhdGUpIHsKICAgICAgICBpZiAoYWRkcmVzcyhwcmljaW5nU3RyYXRlZ3kpID09IDApCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QcmVwYXJpbmc7CiAgICAgICAgZWxzZSBpZiAoYmxvY2sudGltZXN0YW1wIDwgc3RhcnRzQXQpCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QcmVGdW5kaW5nOwogICAgICAgIGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA8PSBlbmRzQXQgJiYgIWlzUHJlc2FsZUZ1bGwoKSkKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkZ1bmRpbmc7CiAgICAgICAgZWxzZSBpZiAoaXNNaW5pbXVtR29hbFJlYWNoZWQoKSkKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLlN1Y2Nlc3M7CiAgICAgICAgZWxzZSBpZiAoIWlzTWluaW11bUdvYWxSZWFjaGVkKCkgJiYgd2VpUmFpc2VkID4gMCAmJiBsb2FkZWRSZWZ1bmQgPj0gd2VpUmFpc2VkKQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUmVmdW5kaW5nOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkZhaWx1cmU7CiAgICB9CgogICAgLyoqCiAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgcHJlc2FsZSBoYXMgcmFpc2VkIGVub3VnaCBtb25leSB0byBiZSBhIHN1Y2Nlc3NmdWwuCiAgICAqLwogICAgZnVuY3Rpb24gaXNNaW5pbXVtR29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCByZWFjaGVkKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBtaW5pbXVtRnVuZGluZ0dvYWw7CiAgICB9CgogICAgLyoqCiAgICAqIENhbGxlZCBmcm9tIGludmVzdCgpIHRvIGNvbmZpcm0gaWYgdGhlIGN1cnJldCBpbnZlc3RtZW50IGRvZXMgbm90IGJyZWFrIG91ciBjYXAgcnVsZS4KICAgICovCiAgICBmdW5jdGlvbiBpc0JyZWFraW5nQ2FwKHVpbnQgdG9rZW5zU29sZFRvdGFsKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2Vuc1NvbGRUb3RhbCA+IHRva2Vuc0hhcmRDYXA7CiAgICB9CgogICAgZnVuY3Rpb24gaXNQcmVzYWxlRnVsbCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2Vuc1NvbGQgPj0gdG9rZW5zSGFyZENhcDsKICAgIH0KCiAgICAvLwogICAgLy8gTW9kaWZpZXJzCiAgICAvLwoKICAgIC8qKiBNb2RpZmllZCBhbGxvd2luZyBleGVjdXRpb24gb25seSBpZiB0aGUgcHJlc2FsZSBpcyBjdXJyZW50bHkgcnVubmluZy4gICovCiAgICBtb2RpZmllciBpblN0YXRlKFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmVxdWlyZShnZXRTdGF0ZSgpID09IHN0YXRlKTsKICAgICAgICBfOwogICAgfQp9'.
	

]
