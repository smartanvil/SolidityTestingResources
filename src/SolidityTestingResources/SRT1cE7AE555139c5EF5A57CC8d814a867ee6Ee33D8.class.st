Class {
	#name : #SRT1cE7AE555139c5EF5A57CC8d814a867ee6Ee33D8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT1cE7AE555139c5EF5A57CC8d814a867ee6Ee33D8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyBFUkMyMCB0b2tlbiBwcm90b2NvbCwgc2VlIG1vcmUgZGV0YWlscyBhdAovLyBodHRwczovL3RoZWV0aGVyZXVtLndpa2kvdy9pbmRleC5waHAvRVJDMjBfVG9rZW5fU3RhbmRhcmQKLy8gQW5kIGFsc28gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzIwCgpjb250cmFjdCBUb2tlbiB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgovLyBTYWZlIG1hdGhlbWF0aWNzIHRvIG1ha2UgdGhlIGNvZGUgbW9yZSByZWFkYWJsZQoKY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovLyBPd25hYmxlIGludGVyZmFjZSB0byBzaW1wbGlmeSBvd25lciBjaGVja3MKCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX25ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgb3duZXIgPSBfbmV3T3duZXI7CiAgfQp9CgovLyBJbnRlcmZhY2UgZm9yIHRyYWRpbmcgZGlzY291bnRzIGFuZCByZWJhdGVzIGZvciBzcGVjaWZpYyBhY2NvdW50cwoKY29udHJhY3QgQWNjb3VudE1vZGlmaWVyc0ludGVyZmFjZSB7CiAgZnVuY3Rpb24gYWNjb3VudE1vZGlmaWVycyhhZGRyZXNzIF91c2VyKSBjb25zdGFudCByZXR1cm5zKHVpbnQgdGFrZUZlZURpc2NvdW50LCB1aW50IHJlYmF0ZVBlcmNlbnRhZ2UpOwogIGZ1bmN0aW9uIHRyYWRlTW9kaWZpZXJzKGFkZHJlc3MgX21ha2VyLCBhZGRyZXNzIF90YWtlcikgY29uc3RhbnQgcmV0dXJucyh1aW50IHRha2VGZWVEaXNjb3VudCwgdWludCByZWJhdGVQZXJjZW50YWdlKTsKfQoKLy8gSW50ZXJmYWNlIGZvciB0cmFkZSB0YWNrZXIKCmNvbnRyYWN0IFRyYWRlVHJhY2tlckludGVyZmFjZSB7CiAgZnVuY3Rpb24gdHJhZGVDb21wbGV0ZShhZGRyZXNzIF90b2tlbkdldCwgdWludCBfYW1vdW50R2V0LCBhZGRyZXNzIF90b2tlbkdpdmUsIHVpbnQgX2Ftb3VudEdpdmUsIGFkZHJlc3MgX2dldCwgYWRkcmVzcyBfZ2l2ZSwgdWludCBfdGFrZXJGZWUsIHVpbnQgX21ha2VyUmViYXRlKTsKfQoKLy8gRXhjaGFuZ2UgY29udHJhY3QKCmNvbnRyYWN0IFRva2VuU3RvcmUgaXMgU2FmZU1hdGgsIE93bmFibGUgewoKICAvLyBUaGUgYWNjb3VudCB0aGF0IHdpbGwgcmVjZWl2ZSBmZWVzCiAgYWRkcmVzcyBmZWVBY2NvdW50OwoKICAvLyBUaGUgYWNjb3VudCB0aGF0IHN0b3JlcyBmZWUgZGlzY291bnRzL3JlYmF0ZXMKICBhZGRyZXNzIGFjY291bnRNb2RpZmllcnM7CiAgCiAgLy8gVHJhZGUgdHJhY2tlciBhY2NvdW50CiAgYWRkcmVzcyB0cmFkZVRyYWNrZXI7CgogIC8vIFdlIGNoYXJnZSBvbmx5IHRoZSB0YWtlcnMgYW5kIHRoaXMgaXMgdGhlIGZlZSwgcGVyY2VudGFnZSB0aW1lcyAxIGV0aGVyCiAgdWludCBwdWJsaWMgZmVlOwoKICAvLyBNYXBwaW5nIG9mIHRva2VuIGFkZHJlc3NlcyB0byBtYXBwaW5nIG9mIGFjY291bnQgYmFsYW5jZXMgKHRva2VuIDAgbWVhbnMgRXRoZXIpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBwdWJsaWMgdG9rZW5zOwoKICAvLyBNYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gdWludHMgKGFtb3VudCBvZiBvcmRlciB0aGF0IGhhcyBiZWVuIGZpbGxlZCkKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGJ5dGVzMzIgPT4gdWludCkpIHB1YmxpYyBvcmRlckZpbGxzOwogIAogIC8vIEFkZHJlc3Mgb2YgYSBuZXh0IGFuZCBwcmV2aW91cyB2ZXJzaW9ucyBvZiB0aGUgY29udHJhY3QsIGFsc28gc3RhdHVzIG9mIHRoZSBjb250cmFjdAogIC8vIGNhbiBiZSB1c2VkIGZvciB1c2VyLXRyaWdnZXJlZCBmdW5kIG1pZ3JhdGlvbnMKICBhZGRyZXNzIHB1YmxpYyBzdWNjZXNzb3I7CiAgYWRkcmVzcyBwdWJsaWMgcHJlZGVjZXNzb3I7CiAgYm9vbCBwdWJsaWMgZGVwcmVjYXRlZDsKICB1aW50MTYgcHVibGljIHZlcnNpb247CgogIC8vIExvZ2dpbmcgZXZlbnRzCiAgLy8gTm90ZTogT3JkZXIgY3JlYXRpb24gaXMgaGFuZGxlZCBvZmYtY2hhaW4sIHNlZSBleHBsYW5hdGlvbiBmdXJ0aGVyIGJlbG93CiAgZXZlbnQgQ2FuY2VsKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpOwogIGV2ZW50IFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCBhZGRyZXNzIGdldCwgYWRkcmVzcyBnaXZlLCB1aW50IG5vbmNlKTsKICBldmVudCBEZXBvc2l0KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHVpbnQgYmFsYW5jZSk7CiAgZXZlbnQgV2l0aGRyYXcoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKICBldmVudCBGdW5kc01pZ3JhdGVkKGFkZHJlc3MgdXNlcik7CgogIGZ1bmN0aW9uIFRva2VuU3RvcmUodWludCBfZmVlLCBhZGRyZXNzIF9wcmVkZWNlc3NvcikgewogICAgZmVlQWNjb3VudCA9IG93bmVyOwogICAgZmVlID0gX2ZlZTsKICAgIHByZWRlY2Vzc29yID0gX3ByZWRlY2Vzc29yOwogICAgZGVwcmVjYXRlZCA9IGZhbHNlOwogICAgaWYgKHByZWRlY2Vzc29yICE9IGFkZHJlc3MoMCkpIHsKICAgICAgdmVyc2lvbiA9IFRva2VuU3RvcmUocHJlZGVjZXNzb3IpLnZlcnNpb24oKSArIDE7CiAgICB9IGVsc2UgewogICAgICB2ZXJzaW9uID0gMTsKICAgIH0KICB9CgogIC8vIFRocm93IG9uIGRlZmF1bHQgaGFuZGxlciB0byBwcmV2ZW50IGRpcmVjdCB0cmFuc2FjdGlvbnMgb2YgRXRoZXIKICBmdW5jdGlvbigpIHsKICAgIHJldmVydCgpOwogIH0KICAKICBtb2RpZmllciBkZXByZWNhYmxlKCkgewogICAgcmVxdWlyZSghZGVwcmVjYXRlZCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gZGVwcmVjYXRlKGJvb2wgX2RlcHJlY2F0ZWQsIGFkZHJlc3MgX3N1Y2Nlc3Nvcikgb25seU93bmVyIHsKICAgIGRlcHJlY2F0ZWQgPSBfZGVwcmVjYXRlZDsKICAgIHN1Y2Nlc3NvciA9IF9zdWNjZXNzb3I7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VGZWVBY2NvdW50KGFkZHJlc3MgX2ZlZUFjY291bnQpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9mZWVBY2NvdW50ICE9IGFkZHJlc3MoMCkpOwogICAgZmVlQWNjb3VudCA9IF9mZWVBY2NvdW50OwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlQWNjb3VudE1vZGlmaWVycyhhZGRyZXNzIF9hY2NvdW50TW9kaWZpZXJzKSBvbmx5T3duZXIgewogICAgYWNjb3VudE1vZGlmaWVycyA9IF9hY2NvdW50TW9kaWZpZXJzOwogIH0KICAKICBmdW5jdGlvbiBjaGFuZ2VUcmFkZVRyYWNrZXIoYWRkcmVzcyBfdHJhZGVUcmFja2VyKSBvbmx5T3duZXIgewogICAgdHJhZGVUcmFja2VyID0gX3RyYWRlVHJhY2tlcjsKICB9CgogIC8vIEZlZSBjYW4gb25seSBiZSBkZWNyZWFzZWQhCiAgZnVuY3Rpb24gY2hhbmdlRmVlKHVpbnQgX2ZlZSkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX2ZlZSA8PSBmZWUpOwogICAgZmVlID0gX2ZlZTsKICB9CiAgCiAgLy8gQWxsb3dzIGEgdXNlciB0byBnZXQgaGVyIGN1cnJlbnQgZGlzY291bnQvcmViYXRlCiAgZnVuY3Rpb24gZ2V0QWNjb3VudE1vZGlmaWVycygpIGNvbnN0YW50IHJldHVybnModWludCB0YWtlRmVlRGlzY291bnQsIHVpbnQgcmViYXRlUGVyY2VudGFnZSkgewogICAgaWYgKGFjY291bnRNb2RpZmllcnMgIT0gYWRkcmVzcygwKSkgewogICAgICByZXR1cm4gQWNjb3VudE1vZGlmaWVyc0ludGVyZmFjZShhY2NvdW50TW9kaWZpZXJzKS5hY2NvdW50TW9kaWZpZXJzKG1zZy5zZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICgwLCAwKTsKICAgIH0KICB9CiAgCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBEZXBvc2l0cywgd2l0aGRyYXdhbHMsIGJhbGFuY2VzCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgZnVuY3Rpb24gZGVwb3NpdCgpIHBheWFibGUgZGVwcmVjYWJsZSB7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKICAgIERlcG9zaXQoMCwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCB0b2tlbnNbMF1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBfYW1vdW50KSB7CiAgICByZXF1aXJlKHRva2Vuc1swXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50KTsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBfYW1vdW50KTsKICAgIGlmICghbXNnLnNlbmRlci5jYWxsLnZhbHVlKF9hbW91bnQpKCkpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICBXaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBfYW1vdW50LCB0b2tlbnNbMF1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdFRva2VuKGFkZHJlc3MgX3Rva2VuLCB1aW50IF9hbW91bnQpIGRlcHJlY2FibGUgewogICAgLy8gTm90ZSB0aGF0IFRva2VuKF90b2tlbikuYXBwcm92ZSh0aGlzLCBfYW1vdW50KSBuZWVkcyB0byBiZSBjYWxsZWQKICAgIC8vIGZpcnN0IG9yIHRoaXMgY29udHJhY3Qgd2lsbCBub3QgYmUgYWJsZSB0byBkbyB0aGUgdHJhbnNmZXIuCiAgICByZXF1aXJlKF90b2tlbiAhPSAwKTsKICAgIGlmICghVG9rZW4oX3Rva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgX2Ftb3VudCkpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICB0b2tlbnNbX3Rva2VuXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zW190b2tlbl1bbXNnLnNlbmRlcl0sIF9hbW91bnQpOwogICAgRGVwb3NpdChfdG9rZW4sIG1zZy5zZW5kZXIsIF9hbW91bnQsIHRva2Vuc1tfdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWRkcmVzcyBfdG9rZW4sIHVpbnQgX2Ftb3VudCkgewogICAgcmVxdWlyZShfdG9rZW4gIT0gMCk7CiAgICByZXF1aXJlKHRva2Vuc1tfdG9rZW5dW21zZy5zZW5kZXJdID49IF9hbW91bnQpOwogICAgdG9rZW5zW190b2tlbl1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1tfdG9rZW5dW21zZy5zZW5kZXJdLCBfYW1vdW50KTsKICAgIGlmICghVG9rZW4oX3Rva2VuKS50cmFuc2Zlcihtc2cuc2VuZGVyLCBfYW1vdW50KSkgewogICAgICByZXZlcnQoKTsKICAgIH0KICAgIFdpdGhkcmF3KF90b2tlbiwgbXNnLnNlbmRlciwgX2Ftb3VudCwgdG9rZW5zW190b2tlbl1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF91c2VyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gdG9rZW5zW190b2tlbl1bX3VzZXJdOwogIH0KICAKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIFRyYWRpbmcKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAvLyBOb3RlOiBPcmRlciBjcmVhdGlvbiBoYXBwZW5zIG9mZi1jaGFpbiBidXQgdGhlIG9yZGVycyBhcmUgc2lnbmVkIGJ5IGNyZWF0b3JzLAogIC8vIHdlIHZhbGlkYXRlIHRoZSBjb250ZW50cyBhbmQgdGhlIGNyZWF0b3IgYWRkcmVzcyBpbiB0aGUgbG9naWMgYmVsb3cKCiAgZnVuY3Rpb24gdHJhZGUoYWRkcmVzcyBfdG9rZW5HZXQsIHVpbnQgX2Ftb3VudEdldCwgYWRkcmVzcyBfdG9rZW5HaXZlLCB1aW50IF9hbW91bnRHaXZlLAogICAgICB1aW50IF9leHBpcmVzLCB1aW50IF9ub25jZSwgYWRkcmVzcyBfdXNlciwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MsIHVpbnQgX2Ftb3VudCkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIF90b2tlbkdldCwgX2Ftb3VudEdldCwgX3Rva2VuR2l2ZSwgX2Ftb3VudEdpdmUsIF9leHBpcmVzLCBfbm9uY2UpOwogICAgLy8gQ2hlY2sgb3JkZXIgc2lnbmF0dXJlcyBhbmQgZXhwaXJhdGlvbiwgYWxzbyBjaGVjayBpZiBub3QgZnVsZmlsbGVkIHlldAoJCWlmIChlY3JlY292ZXIoc2hhMygiXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxuMzIiLCBoYXNoKSwgX3YsIF9yLCBfcykgIT0gX3VzZXIgfHwKICAgICAgYmxvY2subnVtYmVyID4gX2V4cGlyZXMgfHwKICAgICAgc2FmZUFkZChvcmRlckZpbGxzW191c2VyXVtoYXNoXSwgX2Ftb3VudCkgPiBfYW1vdW50R2V0KSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgdHJhZGVCYWxhbmNlcyhfdG9rZW5HZXQsIF9hbW91bnRHZXQsIF90b2tlbkdpdmUsIF9hbW91bnRHaXZlLCBfdXNlciwgbXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICBvcmRlckZpbGxzW191c2VyXVtoYXNoXSA9IHNhZmVBZGQob3JkZXJGaWxsc1tfdXNlcl1baGFzaF0sIF9hbW91bnQpOwogICAgVHJhZGUoX3Rva2VuR2V0LCBfYW1vdW50LCBfdG9rZW5HaXZlLCBfYW1vdW50R2l2ZSAqIF9hbW91bnQgLyBfYW1vdW50R2V0LCBfdXNlciwgbXNnLnNlbmRlciwgX25vbmNlKTsKICB9CiAgCiAgZnVuY3Rpb24gdHJhZGVCYWxhbmNlcyhhZGRyZXNzIF90b2tlbkdldCwgdWludCBfYW1vdW50R2V0LCBhZGRyZXNzIF90b2tlbkdpdmUsIHVpbnQgX2Ftb3VudEdpdmUsCiAgICAgIGFkZHJlc3MgX3VzZXIsIGFkZHJlc3MgX2NhbGxlciwgdWludCBfYW1vdW50KSBwcml2YXRlIHsKCiAgICB1aW50IGZlZVRha2VWYWx1ZSA9IHNhZmVNdWwoX2Ftb3VudCwgZmVlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgcmViYXRlVmFsdWUgPSAwOwogICAgdWludCB0b2tlbkdpdmVWYWx1ZSA9IHNhZmVNdWwoX2Ftb3VudEdpdmUsIF9hbW91bnQpIC8gX2Ftb3VudEdldDsgLy8gUHJvcG9ydGlvbmF0ZSB0byByZXF1ZXN0IHJhdGlvCgogICAgLy8gQXBwbHkgbW9kaWZpZXJzCiAgICBpZiAoYWNjb3VudE1vZGlmaWVycyAhPSBhZGRyZXNzKDApKSB7CiAgICAgIHZhciAoZmVlVGFrZURpc2NvdW50LCByZWJhdGVQZXJjZW50YWdlKSA9IEFjY291bnRNb2RpZmllcnNJbnRlcmZhY2UoYWNjb3VudE1vZGlmaWVycykudHJhZGVNb2RpZmllcnMoX3VzZXIsIF9jYWxsZXIpOwogICAgICAvLyBDaGVjayB0aGF0IHRoZSBkaXNjb3VudHMvcmViYXRlcyBhcmUgbmV2ZXIgaGlnaGVyIHRoZW4gMTAwJQogICAgICBpZiAoZmVlVGFrZURpc2NvdW50ID4gMTAwKSB7CiAgICAgICAgZmVlVGFrZURpc2NvdW50ID0gMDsKICAgICAgfQogICAgICBpZiAocmViYXRlUGVyY2VudGFnZSA+IDEwMCkgewogICAgICAgIHJlYmF0ZVBlcmNlbnRhZ2UgPSAwOwogICAgICB9CiAgICAgIGZlZVRha2VWYWx1ZSA9IHNhZmVNdWwoZmVlVGFrZVZhbHVlLCAxMDAgLSBmZWVUYWtlRGlzY291bnQpIC8gMTAwOyAgLy8gZGlzY291bnRlZCBmZWUKICAgICAgcmViYXRlVmFsdWUgPSBzYWZlTXVsKHJlYmF0ZVBlcmNlbnRhZ2UsIGZlZVRha2VWYWx1ZSkgLyAxMDA7ICAgICAgICAvLyAlIG9mIGFjdHVhbCB0YWtlciBmZWUKICAgIH0KICAgIAogICAgdG9rZW5zW190b2tlbkdldF1bX3VzZXJdID0gc2FmZUFkZCh0b2tlbnNbX3Rva2VuR2V0XVtfdXNlcl0sIHNhZmVBZGQoX2Ftb3VudCwgcmViYXRlVmFsdWUpKTsKICAgIHRva2Vuc1tfdG9rZW5HZXRdW19jYWxsZXJdID0gc2FmZVN1Yih0b2tlbnNbX3Rva2VuR2V0XVtfY2FsbGVyXSwgc2FmZUFkZChfYW1vdW50LCBmZWVUYWtlVmFsdWUpKTsKICAgIHRva2Vuc1tfdG9rZW5HaXZlXVtfdXNlcl0gPSBzYWZlU3ViKHRva2Vuc1tfdG9rZW5HaXZlXVtfdXNlcl0sIHRva2VuR2l2ZVZhbHVlKTsKICAgIHRva2Vuc1tfdG9rZW5HaXZlXVtfY2FsbGVyXSA9IHNhZmVBZGQodG9rZW5zW190b2tlbkdpdmVdW19jYWxsZXJdLCB0b2tlbkdpdmVWYWx1ZSk7CiAgICB0b2tlbnNbX3Rva2VuR2V0XVtmZWVBY2NvdW50XSA9IHNhZmVBZGQodG9rZW5zW190b2tlbkdldF1bZmVlQWNjb3VudF0sIHNhZmVTdWIoZmVlVGFrZVZhbHVlLCByZWJhdGVWYWx1ZSkpOwogICAgCiAgICBpZiAodHJhZGVUcmFja2VyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgVHJhZGVUcmFja2VySW50ZXJmYWNlKHRyYWRlVHJhY2tlcikudHJhZGVDb21wbGV0ZShfdG9rZW5HZXQsIF9hbW91bnQsIF90b2tlbkdpdmUsIHRva2VuR2l2ZVZhbHVlLCBfdXNlciwgX2NhbGxlciwgZmVlVGFrZVZhbHVlLCByZWJhdGVWYWx1ZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0ZXN0VHJhZGUoYWRkcmVzcyBfdG9rZW5HZXQsIHVpbnQgX2Ftb3VudEdldCwgYWRkcmVzcyBfdG9rZW5HaXZlLCB1aW50IF9hbW91bnRHaXZlLCB1aW50IF9leHBpcmVzLAogICAgICB1aW50IF9ub25jZSwgYWRkcmVzcyBfdXNlciwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MsIHVpbnQgX2Ftb3VudCwgYWRkcmVzcyBfc2VuZGVyKSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgIGlmICh0b2tlbnNbX3Rva2VuR2V0XVtfc2VuZGVyXSA8IF9hbW91bnQgfHwKICAgICAgYXZhaWxhYmxlVm9sdW1lKF90b2tlbkdldCwgX2Ftb3VudEdldCwgX3Rva2VuR2l2ZSwgX2Ftb3VudEdpdmUsIF9leHBpcmVzLCBfbm9uY2UsIF91c2VyLCBfdiwgX3IsIF9zKSA8IF9hbW91bnQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhdmFpbGFibGVWb2x1bWUoYWRkcmVzcyBfdG9rZW5HZXQsIHVpbnQgX2Ftb3VudEdldCwgYWRkcmVzcyBfdG9rZW5HaXZlLCB1aW50IF9hbW91bnRHaXZlLCB1aW50IF9leHBpcmVzLAogICAgICB1aW50IF9ub25jZSwgYWRkcmVzcyBfdXNlciwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIF90b2tlbkdldCwgX2Ftb3VudEdldCwgX3Rva2VuR2l2ZSwgX2Ftb3VudEdpdmUsIF9leHBpcmVzLCBfbm9uY2UpOwogICAgaWYgKGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLCBfdiwgX3IsIF9zKSAhPSBfdXNlciB8fAogICAgICBibG9jay5udW1iZXIgPiBfZXhwaXJlcykgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQgYXZhaWxhYmxlMSA9IHNhZmVTdWIoX2Ftb3VudEdldCwgb3JkZXJGaWxsc1tfdXNlcl1baGFzaF0pOwogICAgdWludCBhdmFpbGFibGUyID0gc2FmZU11bCh0b2tlbnNbX3Rva2VuR2l2ZV1bX3VzZXJdLCBfYW1vdW50R2V0KSAvIF9hbW91bnRHaXZlOwogICAgaWYgKGF2YWlsYWJsZTEgPCBhdmFpbGFibGUyKSByZXR1cm4gYXZhaWxhYmxlMTsKICAgIHJldHVybiBhdmFpbGFibGUyOwogIH0KCiAgZnVuY3Rpb24gYW1vdW50RmlsbGVkKGFkZHJlc3MgX3Rva2VuR2V0LCB1aW50IF9hbW91bnRHZXQsIGFkZHJlc3MgX3Rva2VuR2l2ZSwgdWludCBfYW1vdW50R2l2ZSwgdWludCBfZXhwaXJlcywKICAgICAgdWludCBfbm9uY2UsIGFkZHJlc3MgX3VzZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIF90b2tlbkdldCwgX2Ftb3VudEdldCwgX3Rva2VuR2l2ZSwgX2Ftb3VudEdpdmUsIF9leHBpcmVzLCBfbm9uY2UpOwogICAgcmV0dXJuIG9yZGVyRmlsbHNbX3VzZXJdW2hhc2hdOwogIH0KCiAgZnVuY3Rpb24gY2FuY2VsT3JkZXIoYWRkcmVzcyBfdG9rZW5HZXQsIHVpbnQgX2Ftb3VudEdldCwgYWRkcmVzcyBfdG9rZW5HaXZlLCB1aW50IF9hbW91bnRHaXZlLCB1aW50IF9leHBpcmVzLAogICAgICB1aW50IF9ub25jZSwgdWludDggX3YsIGJ5dGVzMzIgX3IsIGJ5dGVzMzIgX3MpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCBfdG9rZW5HZXQsIF9hbW91bnRHZXQsIF90b2tlbkdpdmUsIF9hbW91bnRHaXZlLCBfZXhwaXJlcywgX25vbmNlKTsKICAgIGlmICghKGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLCBfdiwgX3IsIF9zKSA9PSBtc2cuc2VuZGVyKSkgewogICAgICByZXZlcnQoKTsKICAgIH0KICAgIG9yZGVyRmlsbHNbbXNnLnNlbmRlcl1baGFzaF0gPSBfYW1vdW50R2V0OwogICAgQ2FuY2VsKF90b2tlbkdldCwgX2Ftb3VudEdldCwgX3Rva2VuR2l2ZSwgX2Ftb3VudEdpdmUsIF9leHBpcmVzLCBfbm9uY2UsIG1zZy5zZW5kZXIsIF92LCBfciwgX3MpOwogIH0KICAKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIE1pZ3JhdGlvbnMKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAvLyBVc2VyLXRyaWdnZXJlZCAoISkgZnVuZCBtaWdyYXRpb25zIGluIGNhc2UgY29udHJhY3QgZ290IHVwZGF0ZWQKICAvLyBTaW1pbGFyIHRvIHdpdGhkcmF3IGJ1dCB3ZSB1c2UgYSBzdWNjZXNzb3IgYWNjb3VudCBpbnN0ZWFkCiAgLy8gQXMgd2UgZG9uJ3Qgc3RvcmUgdXNlciB0b2tlbnMgbGlzdCBvbiBjaGFpbiwgaXQgaGFzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBvdXRzaWRlCiAgZnVuY3Rpb24gbWlncmF0ZUZ1bmRzKGFkZHJlc3NbXSBfdG9rZW5zKSB7CiAgCiAgICAvLyBHZXQgdGhlIGxhdGVzdCBzdWNjZXNzb3IgaW4gdGhlIGNoYWluCiAgICByZXF1aXJlKHN1Y2Nlc3NvciAhPSBhZGRyZXNzKDApKTsKICAgIFRva2VuU3RvcmUgbmV3RXhjaGFuZ2UgPSBUb2tlblN0b3JlKHN1Y2Nlc3Nvcik7CiAgICBmb3IgKHVpbnQxNiBuID0gMDsgbiA8IDIwOyBuKyspIHsgIC8vIFdlIHdpbGwgbG9vayBwYXN0IDIwIGNvbnRyYWN0cyBpbiB0aGUgZnV0dXJlCiAgICAgIGFkZHJlc3MgbmV4dFN1Y2Nlc3NvciA9IG5ld0V4Y2hhbmdlLnN1Y2Nlc3NvcigpOwogICAgICBpZiAobmV4dFN1Y2Nlc3NvciA9PSBhZGRyZXNzKHRoaXMpKSB7ICAvLyBDaXJjdWxhciBzdWNjZXNzaW9uCiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgICAgaWYgKG5leHRTdWNjZXNzb3IgPT0gYWRkcmVzcygwKSkgeyAvLyBXZSByZWFjaGVkIHRoZSBuZXdlc3QsIHN0b3AKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBuZXdFeGNoYW5nZSA9IFRva2VuU3RvcmUobmV4dFN1Y2Nlc3Nvcik7CiAgICB9CgogICAgLy8gRXRoZXIKICAgIHVpbnQgZXRoZXJBbW91bnQgPSB0b2tlbnNbMF1bbXNnLnNlbmRlcl07CiAgICBpZiAoZXRoZXJBbW91bnQgPiAwKSB7CiAgICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IDA7CiAgICAgIG5ld0V4Y2hhbmdlLmRlcG9zaXRGb3JVc2VyLnZhbHVlKGV0aGVyQW1vdW50KShtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBUb2tlbnMKICAgIGZvciAobiA9IDA7IG4gPCBfdG9rZW5zLmxlbmd0aDsgbisrKSB7CiAgICAgIGFkZHJlc3MgdG9rZW4gPSBfdG9rZW5zW25dOwogICAgICByZXF1aXJlKHRva2VuICE9IGFkZHJlc3MoMCkpOyAvLyAwID0gRXRoZXIsIHdlIGhhbmRsZSBpdCBhYm92ZQogICAgICB1aW50IHRva2VuQW1vdW50ID0gdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXTsKICAgICAgaWYgKHRva2VuQW1vdW50ID09IDApIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIVRva2VuKHRva2VuKS5hcHByb3ZlKG5ld0V4Y2hhbmdlLCB0b2tlbkFtb3VudCkpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gMDsKICAgICAgbmV3RXhjaGFuZ2UuZGVwb3NpdFRva2VuRm9yVXNlcih0b2tlbiwgdG9rZW5BbW91bnQsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIEZ1bmRzTWlncmF0ZWQobXNnLnNlbmRlcik7CiAgfQoKICAvLyBUaGlzIGlzIHVzZWQgZm9yIG1pZ3JhdGlvbnMgb25seS4gVG8gYmUgY2FsbGVkIGJ5IHByZXZpb3VzIGV4Y2hhbmdlIG9ubHksCiAgLy8gdXNlci10cmlnZ2VyZWQsIG9uIGJlaGFsZiBvZiB0aGUgdXNlciBjYWxsZWQgdGhlIG1pZ3JhdGVGdW5kcyBtZXRob2QuCiAgLy8gTm90ZSB0aGF0IGl0IGRvZXMgZXhhY3RseSB0aGUgc2FtZSBhcyBkZXBvc2l0VG9rZW4sIGJ1dCBhcyB0aGlzIGlzIGNhbGxlZAogIC8vIGJ5IGEgcHJldmlvdXMgZ2VuZXJhdGlvbiBvZiBleGNoYW5nZSBpdHNlbGYsIHdlIGNyZWRpdCBpbnRlcm5hbGx5IG5vdCB0aGUKICAvLyBwcmV2aW91cyBleGNoYW5nZSwgYnV0IHRoZSB1c2VyIGl0IHdhcyBjYWxsZWQgZm9yLgogIGZ1bmN0aW9uIGRlcG9zaXRGb3JVc2VyKGFkZHJlc3MgX3VzZXIpIHBheWFibGUgZGVwcmVjYWJsZSB7CiAgICByZXF1aXJlKF91c2VyICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgIFRva2VuU3RvcmUgY2FsbGVyID0gVG9rZW5TdG9yZShtc2cuc2VuZGVyKTsKICAgIHJlcXVpcmUoY2FsbGVyLnZlcnNpb24oKSA+IDApOyAvLyBNYWtlIHN1cmUgaXQncyBhbiBleGNoYW5nZSBhY2NvdW50CiAgICB0b2tlbnNbMF1bX3VzZXJdID0gc2FmZUFkZCh0b2tlbnNbMF1bX3VzZXJdLCBtc2cudmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdFRva2VuRm9yVXNlcihhZGRyZXNzIF90b2tlbiwgdWludCBfYW1vdW50LCBhZGRyZXNzIF91c2VyKSBkZXByZWNhYmxlIHsKICAgIHJlcXVpcmUoX3Rva2VuICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdXNlciAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOwogICAgVG9rZW5TdG9yZSBjYWxsZXIgPSBUb2tlblN0b3JlKG1zZy5zZW5kZXIpOwogICAgcmVxdWlyZShjYWxsZXIudmVyc2lvbigpID4gMCk7IC8vIE1ha2Ugc3VyZSBpdCdzIGFuIGV4Y2hhbmdlIGFjY291bnQKICAgIGlmICghVG9rZW4oX3Rva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgX2Ftb3VudCkpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICB0b2tlbnNbX3Rva2VuXVtfdXNlcl0gPSBzYWZlQWRkKHRva2Vuc1tfdG9rZW5dW191c2VyXSwgX2Ftb3VudCk7CiAgfQp9'.
	

]
