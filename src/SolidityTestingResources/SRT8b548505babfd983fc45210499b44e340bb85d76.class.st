Class {
	#name : #SRT8b548505babfd983fc45210499b44e340bb85d76,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT8b548505babfd983fc45210499b44e340bb85d76 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBIZWRnZWx5IC0gVGhlIEV0aGVyZXVtIEludmVydGVkIE1hcmtldAovLyA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImJkY2ZkY2Q5ZGNkMGQyY2VkZWQ1ZmRkYWQwZGNkNGQxOTNkZWQyZDAiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L3NwYW4+Ci8vIENvbnRyYWN0IGJhc2VkIGludmVzdG1lbnQgZ2FtZQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewoKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgoKLyoqCiAqIEB0aXRsZSBTeW5kaWNhdGUKICogQGRldiBTeW5kaWNhdGVkIHByb2ZpdCBzaGFyaW5nIC0gZm9yIGVhcmx5IGFkb3B0ZXJzCiAqIFNoYXJlcyBhcmUgbm90IHRyYW5zZmVyYWJsZSAtCiAqLwpjb250cmFjdCBTeW5kaWNhdGUgaXMgT3duYWJsZXsKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN5bmRpY2F0ZVNoYXJlcyA9IDIwMDAwOwogICAgdWludDI1NiBwdWJsaWMgYXZhaWxhYmxlRWFybHlQbGF5ZXJTaGFyZXMgPSA1MDAwOwogICAgdWludDI1NiBwdWJsaWMgYXZhaWxhYmxlQnV5SW5TaGFyZXMgPSA1MDAwOwogICAgdWludDI1NiBwdWJsaWMgbWluaW11bUJ1eUluID0gMTA7CiAgICB1aW50MjU2IHB1YmxpYyBidXlJblNoYXJlUHJpY2UgPSA1MDAwMDAwMDAwMDAwMDA7IC8vIHdlaSA9IDAuMDAwNSBldGhlcgogICAgdWludDI1NiBwdWJsaWMgc2hhcmVDeWNsZVNlc3Npb25TaXplID0gMTAwMDsgLy8gbnVtYmVyIG9mIHNlc3Npb25zIGluIGEgc2hhcmUgY3ljbGUKICAgIHVpbnQyNTYgcHVibGljIHNoYXJlQ3ljbGVJbmRleCA9IDA7IC8vIGN1cnJlbnQgcG9zaXRpb24gaW4gc2hhcmUgY3ljbGUKICAgIHVpbnQyNTYgcHVibGljIGN1cnJlbnRTeW5kaWNhdGVWYWx1ZSA9IDA7IC8vIHRvdGFsIHZhbHVlIG9mIHN5bmRpY2F0ZSB0byBiZSBkaXZpZGVkIGFtb25nIG1lbWJlcnMKICAgIHVpbnQyNTYgcHVibGljIG51bWJlclN5bmRpY2F0ZU1lbWJlcnMgPSAwOwogICAgdWludDI1NiBwdWJsaWMgc3luZGljYXRlUHJlY2lzaW9uID0gMTAwMDAwMDAwMDAwMDAwMDsKCiAgICBzdHJ1Y3QgbWVtYmVyIHsKICAgICAgICB1aW50MjU2IG51bVNoYXJlczsKICAgICAgICB1aW50MjU2IHByb2ZpdFNoYXJlOwogICAgIH0KCiAgICBhZGRyZXNzW10gcHJpdmF0ZSBzeW5kaWNhdGVNZW1iZXJzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1lbWJlciApIHByaXZhdGUgbWVtYmVyczsKCiAgICBldmVudCBQcm9maXRTaGFyZSgKICAgICAgICAgIHVpbnQyNTYgX2N1cnJlbnRTeW5kaWNhdGVWYWx1ZSwKICAgICAgICAgIHVpbnQyNTYgX251bWJlclN5bmRpY2F0ZU1lbWJlcnMsCiAgICAgICAgICB1aW50MjU2IF90b3RhbE93bmVkU2hhcmVzLAogICAgICAgICAgdWludDI1NiBfcHJvZml0UGVyU2hhcmUKICAgICk7CgogICAgZnVuY3Rpb24gU3luZGljYXRlKCkgcHVibGljIHsKICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLm51bVNoYXJlcyA9IDEwMDAwOyAvLyBvd25lciBwb3J0aW9uCiAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5wcm9maXRTaGFyZSA9IDA7CiAgICAgICAgbnVtYmVyU3luZGljYXRlTWVtYmVycyA9IDE7CiAgICAgICAgc3luZGljYXRlTWVtYmVycy5wdXNoKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIGluaXRpYXRlcyBhIGRpdmlkZW5kIG9mIG5lY2Vzc2FyeSwgc2VuZHMKICAgIGZ1bmN0aW9uIGNsYWltUHJvZml0KCkgcHVibGljIHsKICAgICAgaWYgKG1lbWJlcnNbbXNnLnNlbmRlcl0ubnVtU2hhcmVzPT0wKSByZXZlcnQoKTsgLy8gb25seSBzeW5kaWNhdGUgbWVtYmVycy4KICAgICAgdWludDI1NiBwcm9maXRTaGFyZSA9IG1lbWJlcnNbbXNnLnNlbmRlcl0ucHJvZml0U2hhcmU7CiAgICAgIGlmIChwcm9maXRTaGFyZT4wKXsKICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLnByb2ZpdFNoYXJlID0gMDsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHByb2ZpdFNoYXJlKTsKICAgICAgfQogICAgfQoKICAgIC8vIGRpc3RyaWJ1dGUgcHJvZml0IGFtb25nZSBzeW5kaWNhdGUgbWVtYmVycyBvbiBhIHBlcmNlbnRhZ2Ugc2hhcmUgYmFzaXMKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVQcm9maXQoKSBpbnRlcm5hbCB7CgogICAgICB1aW50MjU2IHRvdGFsT3duZWRTaGFyZXMgPSB0b3RhbFN5bmRpY2F0ZVNoYXJlcy0oYXZhaWxhYmxlRWFybHlQbGF5ZXJTaGFyZXMrYXZhaWxhYmxlQnV5SW5TaGFyZXMpOwogICAgICB1aW50MjU2IHByb2ZpdFBlclNoYXJlID0gU2FmZU1hdGguZGl2KGN1cnJlbnRTeW5kaWNhdGVWYWx1ZSx0b3RhbE93bmVkU2hhcmVzKTsKCiAgICAgIC8vIGZvcmVhY2ggbWVtYmVyICwgY2FsY3VsYXRlIHRoZWlyIHByb2ZpdHNoYXJlCiAgICAgIGZvcih1aW50IGkgPSAwOyBpPCBudW1iZXJTeW5kaWNhdGVNZW1iZXJzOyBpKyspCiAgICAgIHsKICAgICAgICAvLyBkbyArPSBzbyB0aGF0IGFjcnVlcyBhY3Jvc3Mgc2hhcmUgY3ljbGVzLgogICAgICAgIG1lbWJlcnNbc3luZGljYXRlTWVtYmVyc1tpXV0ucHJvZml0U2hhcmUrPVNhZmVNYXRoLm11bChtZW1iZXJzW3N5bmRpY2F0ZU1lbWJlcnNbaV1dLm51bVNoYXJlcyxwcm9maXRQZXJTaGFyZSk7CiAgICAgIH0KCiAgICAgIC8vIGVtaXQgYSBwcm9maXQgc2hhcmUgZXZlbnQKICAgICAgUHJvZml0U2hhcmUoY3VycmVudFN5bmRpY2F0ZVZhbHVlLCBudW1iZXJTeW5kaWNhdGVNZW1iZXJzLCB0b3RhbE93bmVkU2hhcmVzICwgcHJvZml0UGVyU2hhcmUpOwoKICAgICAgY3VycmVudFN5bmRpY2F0ZVZhbHVlPTA7IC8vIGFsbCB0aGUgcHJvZml0IGhhcyBiZWVuIGRpdmlkZWQgdXAKICAgICAgc2hhcmVDeWNsZUluZGV4ID0gMDsgLy8gcmVzdGFydCB0aGUgc2hhcmUgY3ljbGUgY291bnQuCiAgICB9CgogICAgLy8gYWxsb2NhdGUgc3luZGljYXRlIHNoYXJlcyB1cCB0byB0aGUgbGltaXQuCiAgICBmdW5jdGlvbiBhbGxvY2F0ZUVhcmx5UGxheWVyU2hhcmUoKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKGF2YWlsYWJsZUVhcmx5UGxheWVyU2hhcmVzPT0wKSByZXR1cm47CgkJICAgIGF2YWlsYWJsZUVhcmx5UGxheWVyU2hhcmVzLS07CiAgICAgICAJYWRkTWVtYmVyKCk7IC8vIHBvc3NpYmx5IGFkZCB0aGlzIG1lbWJlciB0byB0aGUgc3luZGljYXRlCiAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5udW1TaGFyZXMrPTE7CgogICAgfQoKICAgIC8vIGFkZCBuZXcgbWVtYmVyIG9mIHN5bmRpY2F0ZQogICAgZnVuY3Rpb24gYWRkTWVtYmVyKCkgaW50ZXJuYWwgewogICAgCSBpZiAobWVtYmVyc1ttc2cuc2VuZGVyXS5udW1TaGFyZXMgPT0gMCl7CgkJICAgICAgICAgIHN5bmRpY2F0ZU1lbWJlcnMucHVzaChtc2cuc2VuZGVyKTsKCQkgICAgICAgICAgbnVtYmVyU3luZGljYXRlTWVtYmVycysrOwoJCSAgICB9CiAgICB9CgogICAgLy8gYnV5IGludG8gc3luZGljYXRlCiAgICBmdW5jdGlvbiBidXlJbnRvU3luZGljYXRlKCkgcHVibGljIHBheWFibGUgIHsKICAgIAkJaWYobXNnLnZhbHVlPT0wIHx8IGF2YWlsYWJsZUJ1eUluU2hhcmVzPT0wKSByZXZlcnQoKTsKICAgICAgCQlpZihtc2cudmFsdWUgPCBtaW5pbXVtQnV5SW4qYnV5SW5TaGFyZVByaWNlKSByZXZlcnQoKTsKCiAgICAgCQl1aW50MjU2IHZhbHVlID0gKG1zZy52YWx1ZS9zeW5kaWNhdGVQcmVjaXNpb24pKnN5bmRpY2F0ZVByZWNpc2lvbjsgLy8gZW5zdXJlIHByZWNpc2lvbgoJCSAgICB1aW50MjU2IGFsbG9jYXRpb24gPSB2YWx1ZS9idXlJblNoYXJlUHJpY2U7CgoJCSAgICBpZiAoYWxsb2NhdGlvbiA+PSBhdmFpbGFibGVCdXlJblNoYXJlcyl7CgkJICAgICAgICBhbGxvY2F0aW9uID0gYXZhaWxhYmxlQnV5SW5TaGFyZXM7IC8vIGxpbWl0IGhpdAoJCSAgICB9CgkJICAgIGF2YWlsYWJsZUJ1eUluU2hhcmVzLT1hbGxvY2F0aW9uOwoJCSAgICBhZGRNZW1iZXIoKTsgLy8gcG9zc2libHkgYWRkIHRoaXMgbWVtYmVyIHRvIHRoZSBzeW5kaWNhdGUKCSAgICAgIG1lbWJlcnNbbXNnLnNlbmRlcl0ubnVtU2hhcmVzKz1hbGxvY2F0aW9uOwoKICAgIH0KCiAgICAvLyBob3cgbWFueSBzaGFyZXM/CiAgICBmdW5jdGlvbiBtZW1iZXJTaGFyZUNvdW50KCkgcHVibGljICB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gbWVtYmVyc1ttc2cuc2VuZGVyXS5udW1TaGFyZXM7CiAgICB9CgogICAgLy8gaG93IG11Y2ggcHJvZml0PwogICAgZnVuY3Rpb24gbWVtYmVyUHJvZml0U2hhcmUoKSBwdWJsaWMgIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBtZW1iZXJzW21zZy5zZW5kZXJdLnByb2ZpdFNoYXJlOwogICAgfQoKfQoKCi8qKgogKiBDb3JlIEhlZGdlbHkgQ29udHJhY3QKICovCmNvbnRyYWN0IEhlZGdlbHkgaXMgT3duYWJsZSwgU3luZGljYXRlIHsKCiAgIC8vIEFycmF5IG9mIHBsYXllcnMKICAgYWRkcmVzc1tdIHByaXZhdGUgcGxheWVyczsKICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHByaXZhdGUgYWN0aXZlUGxheWVyczsKICAgdWludDI1NiBudW1QbGF5ZXJzID0gMDsKCiAgIC8vIG1hcCBlYWNoIHBsYXllciBhZGRyZXNzIHRvIHRoZWlyIHBvcnRmb2xpbyBvZiBpbnZlc3RtZW50cwogICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NiBbMTBdICkgcHJpdmF0ZSBwbGF5ZXJQb3J0Zm9saW87CgogICB1aW50MjU2IHB1YmxpYyB0b3RhbEhlZGdlbHlXaW5uaW5nczsKICAgdWludDI1NiBwdWJsaWMgdG90YWxIZWRnZWx5SW52ZXN0ZWQ7CgogICB1aW50MjU2WzEwXSBwcml2YXRlIG1hcmtldE9wdGlvbnM7CgogICAvLyBUaGUgdG90YWwgYW1vdW50IG9mIEV0aGVyIGJldCBmb3IgdGhpcyBjdXJyZW50IG1hcmtldAogICB1aW50MjU2IHB1YmxpYyB0b3RhbEludmVzdGVkOwogICAvLyBUaGUgYW1vdW50IG9mIEV0aGVyIHVzZWQgdG8gc2VlIHRoZSBtYXJrZXQKICAgdWludDI1NiBwcml2YXRlIHNlZWRJbnZlc3RtZW50OwoKICAgLy8gVGhlIHRvdGFsIG51bWJlciBvZiBpbnZlc3RtZW50cyB0aGUgdXNlcnMgaGF2ZSBtYWRlCiAgIHVpbnQyNTYgcHVibGljIG51bWJlck9mSW52ZXN0bWVudHM7CgogICAvLyBUaGUgbnVtYmVyIHRoYXQgd29uIHRoZSBsYXN0IGdhbWUKICAgdWludDI1NiBwdWJsaWMgbnVtYmVyV2lubmVyOwoKICAgLy8gY3VycmVudCBzZXNzaW9uIGluZm9ybWF0aW9uCiAgIHVpbnQyNTYgcHVibGljIHN0YXJ0aW5nQmxvY2s7CiAgIHVpbnQyNTYgcHVibGljIGVuZGluZ0Jsb2NrOwogICB1aW50MjU2IHB1YmxpYyBzZXNzaW9uQmxvY2tTaXplOwogICB1aW50MjU2IHB1YmxpYyBzZXNzaW9uTnVtYmVyOwogICB1aW50MjU2IHB1YmxpYyBjdXJyZW50TG93ZXN0OwogICB1aW50MjU2IHB1YmxpYyBjdXJyZW50TG93ZXN0Q291bnQ7IC8vIHNob3VsZCBjb3VudCB0aGUgbnVtYmVyIG9mIGN1cnJlbnRMb3dlc3QgdG8gcHJldmVudCBhIHRpZQoKICAgdWludDI1NiBwdWJsaWMgcHJlY2lzaW9uID0gMTAwMDAwMDAwMDAwMDAwMDsgLy8gcm91bmRpbmcgdG8gdGhpcyB3aWxsIGtlZXAgaXQgdG8gMSBmaW5uZXkgcmVzb2x1dGlvbgogICB1aW50MjU2IHB1YmxpYyBtaW5pbXVtU3Rha2UgPSAxIGZpbm5leTsKCiAgICAgZXZlbnQgSW52ZXN0KAogICAgICAgICAgIGFkZHJlc3MgX2Zyb20sCiAgICAgICAgICAgdWludDI1NiBfb3B0aW9uLAogICAgICAgICAgIHVpbnQyNTYgX3ZhbHVlLAogICAgICAgICAgIHVpbnQyNTZbMTBdIF9tYXJrZXRPcHRpb25zLAogICAgICAgICAgIHVpbnQgX2Jsb2NrTnVtYmVyCiAgICAgKTsKCiAgICAgZXZlbnQgRW5kU2Vzc2lvbigKICAgICAgICAgICB1aW50MjU2IF9zZXNzaW9uTnVtYmVyLAogICAgICAgICAgIHVpbnQyNTYgX3dpbm5pbmdPcHRpb24sCiAgICAgICAgICAgdWludDI1NlsxMF0gX21hcmtldE9wdGlvbnMsCiAgICAgICAgICAgdWludDI1NiBfYmxvY2tOdW1iZXIKICAgICApOwoKICAgICBldmVudCBTdGFydFNlc3Npb24oCiAgICAgICAgICAgdWludDI1NiBfc2Vzc2lvbk51bWJlciwKICAgICAgICAgICB1aW50MjU2IF9zZXNzaW9uQmxvY2tTaXplLAogICAgICAgICAgIHVpbnQyNTZbMTBdIF9tYXJrZXRPcHRpb25zLAogICAgICAgICAgIHVpbnQyNTYgX2Jsb2NrTnVtYmVyCiAgICAgKTsKCiAgICBib29sIGxvY2tlZDsKICAgIG1vZGlmaWVyIG5vUmVlbnRyYW5jeSgpIHsKICAgICAgICByZXF1aXJlKCFsb2NrZWQpOwogICAgICAgIGxvY2tlZCA9IHRydWU7CiAgICAgICAgXzsKICAgICAgICBsb2NrZWQgPSBmYWxzZTsKICAgIH0KCiAgIGZ1bmN0aW9uIEhlZGdlbHkoKSBwdWJsaWMgewogICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICBzZXNzaW9uQmxvY2tTaXplID0gMTAwOwogICAgIHNlc3Npb25OdW1iZXIgPSAwOwogICAgIHRvdGFsSGVkZ2VseVdpbm5pbmdzID0gMDsKICAgICB0b3RhbEhlZGdlbHlJbnZlc3RlZCA9IDA7CiAgICAgbnVtUGxheWVycyA9IDA7CiAgICAgcmVzZXRNYXJrZXQoKTsKICAgfQoKICAgIC8vIHRoZSBmdWxsIGFtb3VudCBpbnZlc3RlZCBpbiBlYWNoIG9wdGlvbgogICBmdW5jdGlvbiBnZXRNYXJrZXRPcHRpb25zKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTZbMTBdKQogICAgewogICAgICAgIHJldHVybiBtYXJrZXRPcHRpb25zOwogICAgfQoKICAgIC8vIGVhY2ggcGxheWVyIGNhbiBnZXQgdGhlaXIgb3duIHBvcnRmb2xpbwogICBmdW5jdGlvbiBnZXRQbGF5ZXJQb3J0Zm9saW8oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NlsxMF0pCiAgICB7CiAgICAgICAgcmV0dXJuIHBsYXllclBvcnRmb2xpb1ttc2cuc2VuZGVyXTsKICAgIH0KCiAgICAvLyB0aGUgbnVtYmVyIG9mIGludmVzdG9ycyB0aGlzIHNlc3Npb24KICAgIGZ1bmN0aW9uIG51bWJlck9mSW52ZXN0b3JzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCBjb3VudCkgewogICAgICAgIHJldHVybiBudW1QbGF5ZXJzOwogICAgfQoKICAgIC8vIGdlbmVyYXRlIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIDEgYW5kIDIwIHRvIHNlZWQgYSBzeW1ib2wKICAgIGZ1bmN0aW9uIHJhbmQoKSBpbnRlcm5hbCByZXR1cm5zICh1aW50NjQpIHsKICAgICAgcmV0dXJuIHJhbmRvbSgxOSkrMTsKICAgIH0KCiAgICAvLyBwc2V1ZG8gcmFuZG9tIC0gYnV0IGRvZXMgdGhhdCBtYXR0ZXI/CiAgICB1aW50NjQgX3NlZWQgPSAwOwogICAgZnVuY3Rpb24gcmFuZG9tKHVpbnQ2NCB1cHBlcikgcHJpdmF0ZSByZXR1cm5zICh1aW50NjQgcmFuZG9tTnVtYmVyKSB7CiAgICAgICBfc2VlZCA9IHVpbnQ2NChrZWNjYWsyNTYoa2VjY2FrMjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIpLCBfc2VlZCksIG5vdykpOwogICAgICAgcmV0dXJuIF9zZWVkICUgdXBwZXI7CiAgICAgfQoKICAgIC8vIHJlc2V0cyB0aGUgbWFya2V0IGNvbmRpdGlvbnMKICAgZnVuY3Rpb24gcmVzZXRNYXJrZXQoKSBpbnRlcm5hbCB7CgogICAgc2Vzc2lvbk51bWJlciArKzsKICAgIHN0YXJ0aW5nQmxvY2sgPSBibG9jay5udW1iZXI7CiAgICBlbmRpbmdCbG9jayA9IHN0YXJ0aW5nQmxvY2sgKyBzZXNzaW9uQmxvY2tTaXplOyAvLyBhcHByb3hpbWF0ZWx5IGV2ZXJ5IDUgbWludXRlcyAtIGNhbiBwbGF5IHdpdGggdGhpcwogICAgbnVtUGxheWVycyA9IDA7CgogICAgLy8gcmFuZG9taXplIHRoZSBpbml0aWFsIG1hcmtldCB2YWx1ZXMKICAgIHVpbnQyNTYgc3VtSW52ZXN0ZWQgPSAwOwogICAgZm9yKHVpbnQgaT0wO2k8MTA7aSsrKQogICAgewogICAgICAgIHVpbnQyNTYgbnVtID0gIHJhbmQoKTsKICAgICAgICBtYXJrZXRPcHRpb25zW2ldID1udW0gKiBwcmVjaXNpb247IC8vIHdlaQogICAgICAgIHN1bUludmVzdGVkKz0gIG1hcmtldE9wdGlvbnNbaV07CiAgICB9CgogICAgIHBsYXllclBvcnRmb2xpb1t0aGlzXSA9IG1hcmtldE9wdGlvbnM7CiAgICAgdG90YWxJbnZlc3RlZCA9ICBzdW1JbnZlc3RlZDsKICAgICBzZWVkSW52ZXN0bWVudCA9IHN1bUludmVzdGVkOwogICAgIGluc2VydFBsYXllcih0aGlzKTsKICAgICBudW1QbGF5ZXJzPTE7CiAgICAgbnVtYmVyT2ZJbnZlc3RtZW50cyA9IDEwOwoKICAgICBjdXJyZW50TG93ZXN0ID0gZmluZEN1cnJlbnRMb3dlc3QoKTsKICAgICBTdGFydFNlc3Npb24oc2Vzc2lvbk51bWJlciwgc2Vzc2lvbkJsb2NrU2l6ZSwgbWFya2V0T3B0aW9ucyAsIHN0YXJ0aW5nQmxvY2spOwoKICAgfQoKCiAgICAvLyB1dGlsaXR5IHRvIHJvdW5kIHRvIHRoZSBnYW1lIHByZWNpc2lvbgogICAgZnVuY3Rpb24gcm91bmRJdCh1aW50MjU2IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAgIHsKICAgICAgICAvLyByb3VuZCBkb3duIHRvIGNvcnJlY3QgcHJlaWNpc2lvbgogICAgICAgIHVpbnQyNTYgcmVzdWx0ID0gKGFtb3VudC9wcmVjaXNpb24pKnByZWNpc2lvbjsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8vIG1haW4gZW50cnkgcG9pbnQgZm9yIGludmVzdG9ycy9wbGF5ZXJzCiAgICBmdW5jdGlvbiBpbnZlc3QodWludDI1NiBvcHRpb25OdW1iZXIpIHB1YmxpYyBwYXlhYmxlIG5vUmVlbnRyYW5jeSB7CgogICAgICAvLyBDaGVjayB0aGF0IHRoZSBudW1iZXIgaXMgd2l0aGluIHRoZSByYW5nZSAodWludHMgYXJlIGFsd2F5cz49MCBhbnl3YXkpCiAgICAgIGFzc2VydChvcHRpb25OdW1iZXIgPD0gOSk7CiAgICAgIHVpbnQyNTYgYW1vdW50ID0gcm91bmRJdChtc2cudmFsdWUpOyAvLyByb3VuZCB0byBwcmVjaXNpb24KICAgICAgYXNzZXJ0KGFtb3VudCA+PSBtaW5pbXVtU3Rha2UpOwoKICAgICAgdWludDI1NiBob2xkaW5nID0gcGxheWVyUG9ydGZvbGlvW21zZy5zZW5kZXJdW29wdGlvbk51bWJlcl07CiAgICAgIGhvbGRpbmcgPSBTYWZlTWF0aC5hZGQoaG9sZGluZywgYW1vdW50KTsKICAgICAgcGxheWVyUG9ydGZvbGlvW21zZy5zZW5kZXJdW29wdGlvbk51bWJlcl0gPSBob2xkaW5nOwoKICAgICAgbWFya2V0T3B0aW9uc1tvcHRpb25OdW1iZXJdID0gU2FmZU1hdGguYWRkKG1hcmtldE9wdGlvbnNbb3B0aW9uTnVtYmVyXSxhbW91bnQpOwoKICAgICAgbnVtYmVyT2ZJbnZlc3RtZW50cyArPSAxOwogICAgICB0b3RhbEludmVzdGVkICs9IGFtb3VudDsKICAgICAgdG90YWxIZWRnZWx5SW52ZXN0ZWQgKz0gYW1vdW50OwogICAgICBpZiAoIWFjdGl2ZVBsYXllcnNbbXNnLnNlbmRlcl0pewogICAgICAgICAgICAgICAgICAgIGluc2VydFBsYXllcihtc2cuc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICBhY3RpdmVQbGF5ZXJzW21zZy5zZW5kZXJdPXRydWU7CiAgICAgICB9CgogICAgICBJbnZlc3QobXNnLnNlbmRlciwgb3B0aW9uTnVtYmVyLCBhbW91bnQsIG1hcmtldE9wdGlvbnMsIGJsb2NrLm51bWJlcik7CgogICAgICAvLyBwb3NzaWJseSBhbGxvY2F0ZSBzeW5kaWNhdGUgc2hhcmVzCiAgICAgIGFsbG9jYXRlRWFybHlQbGF5ZXJTaGFyZSgpOyAvLyBhbGxvY2F0ZSBhIHNpbmdsZSBzaGFyZSBwZXIgaW52ZXN0bWVudCBmb3IgZWFybHkgYWRvcHRlcnMKCiAgICAgIGN1cnJlbnRMb3dlc3QgPSBmaW5kQ3VycmVudExvd2VzdCgpOwogICAgICBpZiAoYmxvY2subnVtYmVyID49IGVuZGluZ0Jsb2NrICYmIGN1cnJlbnRMb3dlc3RDb3VudD09MSkgZGlzdHJpYnV0ZVdpbm5pbmdzKCk7CgogICAgfSAvLyBlbmQgaW52ZXN0CgoKICAgIC8vIGZpbmQgbG93ZXN0IG9wdGlvbiBzZXRzIGN1cnJlbnRMb3dlc3RDb3VudD4xIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gMSBsb3dlc3QKICAgIGZ1bmN0aW9uIGZpbmRDdXJyZW50TG93ZXN0KCkgaW50ZXJuYWwgcmV0dXJucyAodWludCBsb3dlc3RPcHRpb24pIHsKCiAgICAgIHVpbnQgd2lubmVyID0gMDsKICAgICAgdWludCBsb3dlc3RUb3RhbCA9IG1hcmtldE9wdGlvbnNbMF07CiAgICAgIGN1cnJlbnRMb3dlc3RDb3VudCA9IDA7CiAgICAgIGZvcih1aW50IGk9MDtpPDEwO2krKykKICAgICAgewogICAgICAgICAgaWYgKG1hcmtldE9wdGlvbnMgW2ldPGxvd2VzdFRvdGFsKXsKICAgICAgICAgICAgICB3aW5uZXIgPSBpOwogICAgICAgICAgICAgIGxvd2VzdFRvdGFsID0gbWFya2V0T3B0aW9ucyBbaV07CiAgICAgICAgICAgICAgY3VycmVudExvd2VzdENvdW50ID0gMDsKICAgICAgICAgIH0KICAgICAgICAgaWYgKG1hcmtldE9wdGlvbnMgW2ldPT1sb3dlc3RUb3RhbCl7Y3VycmVudExvd2VzdENvdW50Kz0xO30KICAgICAgfQogICAgICByZXR1cm4gd2lubmVyOwogICAgfQoKICAgIC8vIGRpc3RyaWJ1dGUgd2lubmluZ3MgYXQgdGhlIGVuZCBvZiBhIHNlc3Npb24KICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVXaW5uaW5ncygpIGludGVybmFsIHsKCiAgICAgIGlmIChjdXJyZW50TG93ZXN0Q291bnQ+MSl7CiAgICAgIHJldHVybjsgLy8gY2Fubm90IGVuZCBzZXNzaW9uIGJlY2F1c2UgdGhlcmUgaXMgbm8gbG93ZXN0LgogICAgICB9CgogICAgICBudW1iZXJXaW5uZXIgPSBjdXJyZW50TG93ZXN0OwoKICAgICAgLy8gcmVjb3JkIHRoZSBlbmQgb2Ygc2Vzc2lvbgogICAgICBFbmRTZXNzaW9uKHNlc3Npb25OdW1iZXIsIG51bWJlcldpbm5lciwgbWFya2V0T3B0aW9ucyAsIGJsb2NrLm51bWJlcik7CgogICAgICB1aW50MjU2IHNlc3Npb25XaW5uaW5ncyA9IDA7CiAgICAgIGZvcih1aW50IGo9MTtqPG51bVBsYXllcnM7aisrKQogICAgICB7CiAgICAgIGlmIChwbGF5ZXJQb3J0Zm9saW9bcGxheWVyc1tqXV1bbnVtYmVyV2lubmVyXT4wKXsKICAgICAgICB1aW50MjU2IHdpbm5pbmdBbW91bnQgPSAgcGxheWVyUG9ydGZvbGlvW3BsYXllcnNbal1dW251bWJlcldpbm5lcl07CiAgICAgICAgdWludDI1NiB3aW5uaW5ncyA9IFNhZmVNYXRoLm11bCg4LHdpbm5pbmdBbW91bnQpOyAvLyBlaWdodCB0aW1lcyB0aGUgaW52ZXN0ZWQgYW1vdW50LgogICAgICAgIHRvdGFsSGVkZ2VseVdpbm5pbmdzKz13aW5uaW5nczsKICAgICAgICBzZXNzaW9uV2lubmluZ3MrPXdpbm5pbmdzOwogICAgICAgIHBsYXllcnNbal0udHJhbnNmZXIod2lubmluZ3MpOyAvLyBkb24ndCB0aHJvdyBoZXJlCiAgICAgIH0KCiAgICAgIHBsYXllclBvcnRmb2xpb1twbGF5ZXJzW2pdXSA9IFswLDAsMCwwLDAsMCwwLDAsMCwwXTsKICAgICAgYWN0aXZlUGxheWVyc1twbGF5ZXJzW2pdXT1mYWxzZTsKCiAgICAgIH0KCiAgICAgIHVpbnQyNTYgcGxheWVySW52ZXN0bWVudHMgPSB0b3RhbEludmVzdGVkLXNlZWRJbnZlc3RtZW50OwoKICAgICAgaWYgKHNlc3Npb25XaW5uaW5ncz5wbGF5ZXJJbnZlc3RtZW50cyl7CiAgICAgICAgdWludDI1NiBsb3NzID0gc2Vzc2lvbldpbm5pbmdzLXBsYXllckludmVzdG1lbnRzOyAvLyB0aGlzIGlzIGEgbG9zcwogICAgICAgIGlmIChjdXJyZW50U3luZGljYXRlVmFsdWU+PWxvc3MpewogICAgICAgICAgY3VycmVudFN5bmRpY2F0ZVZhbHVlLT1sb3NzOwogICAgICAgIH1lbHNlewogICAgICAgICAgY3VycmVudFN5bmRpY2F0ZVZhbHVlID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChwbGF5ZXJJbnZlc3RtZW50cz5zZXNzaW9uV2lubmluZ3MpewogICAgICAgIGN1cnJlbnRTeW5kaWNhdGVWYWx1ZSs9cGxheWVySW52ZXN0bWVudHMtc2Vzc2lvbldpbm5pbmdzOyAvLyB0aGlzIGlzIGEgZ2FpbgogICAgICB9CgogICAgICAvLyBjaGVjayBpZiBzaGFyZSBjeWNsZSBpcyBjb21wbGV0ZSBhbmQgaWYgcmVxdWlyZWQgZGlzdHJpYnV0ZSBwcm9maXRzCiAgICAgIHNoYXJlQ3ljbGVJbmRleCs9MTsKICAgICAgaWYgKHNoYXJlQ3ljbGVJbmRleCA+PSBzaGFyZUN5Y2xlU2Vzc2lvblNpemUpewogICAgICAgIGRpc3RyaWJ1dGVQcm9maXQoKTsKICAgICAgfQoKICAgICAgcmVzZXRNYXJrZXQoKTsKICAgIH0gLy8gZW5kIGRpc3RyaWJ1dGUgd2lubmluZ3MKCgogICAgLy8gY29udmVuaWVuY2UgdG8gbWFuYWdlIGEgZ3Jvd2luZyBhcnJheQogICAgZnVuY3Rpb24gaW5zZXJ0UGxheWVyKGFkZHJlc3MgdmFsdWUpIGludGVybmFsIHsKICAgICAgICBpZihudW1QbGF5ZXJzID09IHBsYXllcnMubGVuZ3RoKSB7CiAgICAgICAgICAgIHBsYXllcnMubGVuZ3RoICs9IDE7CiAgICAgICAgfQogICAgICAgIHBsYXllcnNbbnVtUGxheWVycysrXSA9IHZhbHVlOwogICAgfQoKICAgLy8gV2UgbWlnaHQgdmFyeSB0aGlzIGF0IHNvbWUgcG9pbnQKICAgIGZ1bmN0aW9uIHNldHNlc3Npb25CbG9ja1NpemUgKHVpbnQyNTYgYmxvY2tDb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgc2Vzc2lvbkJsb2NrU2l6ZSA9IGJsb2NrQ291bnQ7CiAgICB9CgogICAgLy8gLS0tLS0gYWRtaW4gZnVuY3Rpb25zIGluIGV2ZW50IG9mIGFuIGlzc3VlIC0tCgogICAgZnVuY3Rpb24gd2l0aGRyYXcodWludDI1NiBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYW1vdW50PD10aGlzLmJhbGFuY2UpOwogICAgICAgIGlmIChhbW91bnQ9PTApewogICAgICAgICAgICBhbW91bnQ9dGhpcy5iYWxhbmNlOwogICAgICAgIH0KICAgICAgICBvd25lci50cmFuc2ZlcihhbW91bnQpOwogICAgfQoKCiAgIC8vIEluIHRoZSBldmVudCBvZiBjYXRhc3Ryb3BoZQogICAgZnVuY3Rpb24ga2lsbCgpICBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICAgaWYobXNnLnNlbmRlciA9PSBvd25lcikKICAgICAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KCiAgICAvLyBkb25hdGlvbnMsIGZ1bmRpbmcsIHJlcGxlbmlzaAogICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUge30KCgp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQ=='.
	

]
