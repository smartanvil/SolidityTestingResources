Class {
	#name : #SRTbbb5f545846bc9057c3d26686397ce89a1609b7c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbbb5f545846bc9057c3d26686397ce89a1609b7c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0T3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIFByZWFsbG9jCiAqIEBkZXYgUHJlLWFsbG9jIHN0b3JhZ2UgdmFycywgdG8gZmxhdHRlbiBnYXMgdXNhZ2UgaW4gZnV0dXJlIG9wZXJhdGlvbnMuCiAqLwpsaWJyYXJ5IFByZWFsbG9jIHsKICAgIHN0cnVjdCBVSU5UMjU2IHsKICAgICAgICB1aW50MjU2IHZhbHVlXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXQoVUlOVDI1NiBzdG9yYWdlIGksIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgICAgICBpLnZhbHVlXyA9IH52YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXQoVUlOVDI1NiBzdG9yYWdlIGkpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gfmkudmFsdWVfOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgoKLy8gQWJzdHJhY3QgY29udHJhY3QgZm9yIHRoZSBmdWxsIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCmNvbnRyYWN0IFRva2VuIHsKICAgIC8qIFRoaXMgaXMgYSBzbGlnaHQgY2hhbmdlIHRvIHRoZSBFUkMyMCBiYXNlIHN0YW5kYXJkLgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgICBpcyByZXBsYWNlZCB3aXRoOgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBUaGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIHRvdGFsU3VwcGx5LgogICAgVGhpcyBpcyBtb3ZlZCB0byB0aGUgYmFzZSBjb250cmFjdCBzaW5jZSBwdWJsaWMgZ2V0dGVyIGZ1bmN0aW9ucyBhcmUgbm90CiAgICBjdXJyZW50bHkgcmVjb2duaXNlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWF0Y2hpbmcgYWJzdHJhY3QKICAgIGZ1bmN0aW9uIGJ5IHRoZSBjb21waWxlci4KICAgICovCiAgICAvLy8gdG90YWwgYW1vdW50IG9mIHRva2VucwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgLy8vIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX2FkZHJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CgoKCi8vLyBWRU4gdG9rZW4sIEVSQzIwIGNvbXBsaWFudApjb250cmFjdCBWRU4gaXMgVG9rZW4sIE93bmVkIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSAgICA9ICJWZUNoYWluIFRva2VuIjsgIC8vVGhlIFRva2VuJ3MgbmFtZQogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7ICAgICAgICAgICAgICAgLy9OdW1iZXIgb2YgZGVjaW1hbHMgb2YgdGhlIHNtYWxsZXN0IHVuaXQKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICA9ICJWRU4iOyAgICAgICAgICAgIC8vQW4gaWRlbnRpZmllciAgICAKCiAgICBzdHJ1Y3QgQWNjb3VudCB7CiAgICAgICAgdWludDI1NiBiYWxhbmNlOwogICAgICAgIC8vIHJhdyB0b2tlbiBjYW4gYmUgdHJhbnNmb3JtZWQgaW50byBiYWxhbmNlIHdpdGggYm9udXMKICAgICAgICB1aW50MjU2IHJhd1Rva2VuczsKICAgIH0KCiAgICAvLyBCYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQWNjb3VudCkgYWNjb3VudHM7CgogICAgLy8gT3duZXIgb2YgYWNjb3VudCBhcHByb3ZlcyB0aGUgdHJhbnNmZXIgb2YgYW4gYW1vdW50IHRvIGFub3RoZXIgYWNjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvLyBldmVyeSBidXlpbmcgd2lsbCB1cGRhdGUgdGhpcyB2YXIuIAogICAgLy8gcHJlLWFsbG9jIHRvIG1ha2UgZmlyc3QgYnV5aW5nIGNvc3Qgbm8gbXVjaCBtb3JlIGdhcyB0aGFuIHN1YnNlcXVlbnQKICAgIHVzaW5nIFByZWFsbG9jIGZvciBQcmVhbGxvYy5VSU5UMjU2OwogICAgUHJlYWxsb2MuVUlOVDI1NiByYXdUb2tlbnNTdXBwbGllZDsKCiAgICAvLyBib251cyB0aGF0IGNhbiBiZSBzaGFyZWQgYnkgcmF3IHRva2VucwogICAgdWludDI1NiBib251c09mZmVyZWQ7CgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFZFTigpIHsKICAgICAgICByYXdUb2tlbnNTdXBwbGllZC5zZXQoMCk7CiAgICB9CgogICAgLy8gU2VuZCBiYWNrIGV0aGVyIHNlbnQgdG8gbWUKICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXZlcnQoKTsKICAgIH0KCiAgICAvLyBJZiBzZWFsZWQsIHRyYW5zZmVyIGlzIGVuYWJsZWQgYW5kIG1pbnQgaXMgZGlzYWJsZWQKICAgIGZ1bmN0aW9uIGlzU2VhbGVkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBvd25lciA9PSAwOwogICAgfQoKICAgIC8vIENsYWltIGJvbnVzIGJ5IHJhdyB0b2tlbnMKICAgIGZ1bmN0aW9uIGNsYWltQm9udXMoYWRkcmVzcyBfb3duZXIpIGludGVybmFseyAgICAgIAogICAgICAgIHJlcXVpcmUoaXNTZWFsZWQoKSk7CiAgICAgICAgaWYgKGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zICE9IDApIHsKICAgICAgICAgICAgYWNjb3VudHNbX293bmVyXS5iYWxhbmNlID0gYmFsYW5jZU9mKF9vd25lcik7CiAgICAgICAgICAgIGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zID0gMDsKICAgICAgICB9CiAgICB9CgogICAgLy8gV2hhdCBpcyB0aGUgYmFsYW5jZSBvZiBhIHBhcnRpY3VsYXIgYWNjb3VudD8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgaWYgKGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zID09IDApCiAgICAgICAgICAgIHJldHVybiBhY2NvdW50c1tfb3duZXJdLmJhbGFuY2U7CgogICAgICAgIGlmIChpc1NlYWxlZCgpKSB7CiAgICAgICAgICAgIHVpbnQyNTYgYm9udXMgPSAKICAgICAgICAgICAgICAgICBhY2NvdW50c1tfb3duZXJdLnJhd1Rva2VucwogICAgICAgICAgICAgICAgLm11bChib251c09mZmVyZWQpCiAgICAgICAgICAgICAgICAuZGl2KHJhd1Rva2Vuc1N1cHBsaWVkLmdldCgpKTsKCiAgICAgICAgICAgIHJldHVybiBhY2NvdW50c1tfb3duZXJdLmJhbGFuY2UKICAgICAgICAgICAgICAgICAgICAuYWRkKGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zKQogICAgICAgICAgICAgICAgICAgIC5hZGQoYm9udXMpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXS5iYWxhbmNlLmFkZChhY2NvdW50c1tfb3duZXJdLnJhd1Rva2Vucyk7CiAgICB9CgogICAgLy8gVHJhbnNmZXIgdGhlIGJhbGFuY2UgZnJvbSBvd25lcidzIGFjY291bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGlzU2VhbGVkKCkpOwoKICAgICAgICAvLyBpbXBsaWNpdGx5IGNsYWltIGJvbnVzIGZvciBib3RoIHNlbmRlciBhbmQgcmVjZWl2ZXIKICAgICAgICBjbGFpbUJvbnVzKG1zZy5zZW5kZXIpOwogICAgICAgIGNsYWltQm9udXMoX3RvKTsKCiAgICAgICAgaWYgKGFjY291bnRzW21zZy5zZW5kZXJdLmJhbGFuY2UgPj0gX2Ftb3VudAogICAgICAgICAgICAmJiBfYW1vdW50ID4gMAogICAgICAgICAgICAmJiBhY2NvdW50c1tfdG9dLmJhbGFuY2UgKyBfYW1vdW50ID4gYWNjb3VudHNbX3RvXS5iYWxhbmNlKSB7CiAgICAgICAgICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmJhbGFuY2UgLT0gX2Ftb3VudDsKICAgICAgICAgICAgYWNjb3VudHNbX3RvXS5iYWxhbmNlICs9IF9hbW91bnQ7CiAgICAgICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gU2VuZCBfdmFsdWUgYW1vdW50IG9mIHRva2VucyBmcm9tIGFkZHJlc3MgX2Zyb20gdG8gYWRkcmVzcyBfdG8KICAgIC8vIFRoZSB0cmFuc2ZlckZyb20gbWV0aG9kIGlzIHVzZWQgZm9yIGEgd2l0aGRyYXcgd29ya2Zsb3csIGFsbG93aW5nIGNvbnRyYWN0cyB0byBzZW5kCiAgICAvLyB0b2tlbnMgb24geW91ciBiZWhhbGYsIGZvciBleGFtcGxlIHRvICJkZXBvc2l0IiB0byBhIGNvbnRyYWN0IGFkZHJlc3MgYW5kL29yIHRvIGNoYXJnZQogICAgLy8gZmVlcyBpbiBzdWItY3VycmVuY2llczsgdGhlIGNvbW1hbmQgc2hvdWxkIGZhaWwgdW5sZXNzIHRoZSBfZnJvbSBhY2NvdW50IGhhcwogICAgLy8gZGVsaWJlcmF0ZWx5IGF1dGhvcml6ZWQgdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSB2aWEgc29tZSBtZWNoYW5pc207IHdlIHByb3Bvc2UKICAgIC8vIHRoZXNlIHN0YW5kYXJkaXplZCBBUElzIGZvciBhcHByb3ZhbDoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudAogICAgKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGlzU2VhbGVkKCkpOwoKICAgICAgICAvLyBpbXBsaWNpdGx5IGNsYWltIGJvbnVzIGZvciBib3RoIHNlbmRlciBhbmQgcmVjZWl2ZXIKICAgICAgICBjbGFpbUJvbnVzKF9mcm9tKTsKICAgICAgICBjbGFpbUJvbnVzKF90byk7CgogICAgICAgIGlmIChhY2NvdW50c1tfZnJvbV0uYmFsYW5jZSA+PSBfYW1vdW50CiAgICAgICAgICAgICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF9hbW91bnQKICAgICAgICAgICAgJiYgX2Ftb3VudCA+IDAKICAgICAgICAgICAgJiYgYWNjb3VudHNbX3RvXS5iYWxhbmNlICsgX2Ftb3VudCA+IGFjY291bnRzW190b10uYmFsYW5jZSkgewogICAgICAgICAgICBhY2NvdW50c1tfZnJvbV0uYmFsYW5jZSAtPSBfYW1vdW50OwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfYW1vdW50OwogICAgICAgICAgICBhY2NvdW50c1tfdG9dLmJhbGFuY2UgKz0gX2Ftb3VudDsKICAgICAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQWxsb3cgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB5b3VyIGFjY291bnQsIG11bHRpcGxlIHRpbWVzLCB1cCB0byB0aGUgX3ZhbHVlIGFtb3VudC4KICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggX3ZhbHVlLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX2Ftb3VudDsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQXBwcm92ZXMgYW5kIHRoZW4gY2FsbHMgdGhlIHJlY2VpdmluZyBjb250cmFjdCAqLwogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICAvL2NhbGwgdGhlIHJlY2VpdmVBcHByb3ZhbCBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQuIFRoaXMgY3JhZnRzIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgbWFudWFsbHkgc28gb25lIGRvZXNuJ3QgaGF2ZSB0byBpbmNsdWRlIGEgY29udHJhY3QgaW4gaGVyZSBqdXN0IGZvciB0aGlzLgogICAgICAgIC8vcmVjZWl2ZUFwcHJvdmFsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlLCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0LCBieXRlcyBfZXh0cmFEYXRhKQogICAgICAgIC8vaXQgaXMgYXNzdW1lZCB0aGF0IHdoZW4gZG9lcyB0aGlzIHRoYXQgdGhlIGNhbGwgKnNob3VsZCogc3VjY2VlZCwgb3RoZXJ3aXNlIG9uZSB3b3VsZCB1c2UgdmFuaWxsYSBhcHByb3ZlIGluc3RlYWQuCiAgICAgICAgLy9pZighX3NwZW5kZXIuY2FsbChieXRlczQoYnl0ZXMzMihzaGEzKCJyZWNlaXZlQXBwcm92YWwoYWRkcmVzcyx1aW50MjU2LGFkZHJlc3MsYnl0ZXMpIikpKSwgbXNnLnNlbmRlciwgX3ZhbHVlLCB0aGlzLCBfZXh0cmFEYXRhKSkgeyByZXZlcnQoKTsgfQogICAgICAgIEFwcHJvdmFsUmVjZWl2ZXIoX3NwZW5kZXIpLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvLyBNaW50IHRva2VucyBhbmQgYXNzaWduIHRvIHNvbWUgb25lCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9hbW91bnQsIGJvb2wgX2lzUmF3KSBvbmx5T3duZXJ7CiAgICAgICAgaWYgKF9pc1JhdykgewogICAgICAgICAgICBhY2NvdW50c1tfb3duZXJdLnJhd1Rva2VucyA9IGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zLmFkZChfYW1vdW50KTsKICAgICAgICAgICAgcmF3VG9rZW5zU3VwcGxpZWQuc2V0KHJhd1Rva2Vuc1N1cHBsaWVkLmdldCgpLmFkZChfYW1vdW50KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWNjb3VudHNbX293bmVyXS5iYWxhbmNlID0gYWNjb3VudHNbX293bmVyXS5iYWxhbmNlLmFkZChfYW1vdW50KTsKICAgICAgICB9CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKDAsIF9vd25lciwgX2Ftb3VudCk7CiAgICB9CiAgICAKICAgIC8vIE9mZmVyIGJvbnVzIHRvIHJhdyB0b2tlbnMgaG9sZGVyCiAgICBmdW5jdGlvbiBvZmZlckJvbnVzKHVpbnQyNTYgX2JvbnVzKSBvbmx5T3duZXIgewogICAgICAgIGJvbnVzT2ZmZXJlZCA9IGJvbnVzT2ZmZXJlZC5hZGQoX2JvbnVzKTsKICAgIH0KCiAgICAvLyBTZXQgb3duZXIgdG8gemVybyBhZGRyZXNzLCB0byBkaXNhYmxlIG1pbnQsIGFuZCBlbmFibGUgdG9rZW4gdHJhbnNmZXIKICAgIGZ1bmN0aW9uIHNlYWwoKSBvbmx5T3duZXIgewogICAgICAgIHNldE93bmVyKDApOwoKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChib251c09mZmVyZWQpOwogICAgICAgIFRyYW5zZmVyKDAsIGFkZHJlc3MoLTEpLCBib251c09mZmVyZWQpOwogICAgfQp9Cgpjb250cmFjdCBBcHByb3ZhbFJlY2VpdmVyIHsKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCwgYnl0ZXMgX2V4dHJhRGF0YSk7Cn0KCgovLyBDb250cmFjdCB0byBzZWxsIGFuZCBkaXN0cmlidXRlIFZFTiB0b2tlbnMKY29udHJhY3QgVkVOU2FsZSBpcyBPd25lZHsKCiAgICAvLy8gY2hhcnQgb2Ygc3RhZ2UgdHJhbnNpdGlvbiAKICAgIC8vLwogICAgLy8vIGRlcGxveSAgIGluaXRpYWxpemUgICAgICBzdGFydFRpbWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZSAgICAgICAgICAgICAgICAgZmluYWxpemUKICAgIC8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgPC1lYXJseVN0YWdlTGFzdHMtPiB8ICAgICAgICAgICAgIHwgPC0gY2xvc2VkU3RhZ2VMYXN0cyAtPiB8CiAgICAvLy8gIE8tLS0tLS0tLS0tLU8tLS0tLS0tLS0tLS0tLS1PLS0tLS0tLS0tLS0tLS0tLS0tLS0tTy0tLS0tLS0tLS0tLS1PLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTy0tLS0tLS0tLS0tLT4KICAgIC8vLyAgICAgQ3JlYXRlZCAgICAgSW5pdGlhbGl6ZWQgICAgICAgICAgIEVhcmx5ICAgICAgICAgICAgIE5vcm1hbCAgICAgICAgICAgICBDbG9zZWQgICAgICAgICAgICBGaW5hbGl6ZWQKICAgIGVudW0gU3RhZ2UgewogICAgICAgIE5vdENyZWF0ZWQsCiAgICAgICAgQ3JlYXRlZCwKICAgICAgICBJbml0aWFsaXplZCwKICAgICAgICBFYXJseSwKICAgICAgICBOb3JtYWwsCiAgICAgICAgQ2xvc2VkLAogICAgICAgIEZpbmFsaXplZAogICAgfQoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b3RhbFN1cHBseSAgICAgICAgID0gKDEwICoqIDkpICogKDEwICoqIDE4KTsgLy8gMSBiaWxsaW9uIFZFTiwgZGVjaW1hbHMgc2V0IHRvIDE4CgogICAgdWludDI1NiBjb25zdGFudCBwcml2YXRlU3VwcGx5ICAgICAgICAgICAgICA9IHRvdGFsU3VwcGx5ICogOSAvIDEwMDsgIC8vIDklIGZvciBwcml2YXRlIElDTwogICAgdWludDI1NiBjb25zdGFudCBjb21tZXJjaWFsUGxhbiAgICAgICAgICAgICA9IHRvdGFsU3VwcGx5ICogMjMgLyAxMDA7IC8vIDIzJSBmb3IgY29tbWVyY2lhbCBwbGFuCiAgICB1aW50MjU2IGNvbnN0YW50IHJlc2VydmVkRm9yVGVhbSAgICAgICAgICAgID0gdG90YWxTdXBwbHkgKiA1IC8gMTAwOyAgLy8gNSUgZm9yIHRlYW0KICAgIHVpbnQyNTYgY29uc3RhbnQgcmVzZXJ2ZWRGb3JPcGVyYXRpb25zICAgICAgPSB0b3RhbFN1cHBseSAqIDIyIC8gMTAwOyAvLyAyMiBmb3Igb3BlcmF0aW9ucwoKICAgIC8vIDU5JQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgbm9uUHVibGljU3VwcGx5ICAgICA9IHByaXZhdGVTdXBwbHkgKyBjb21tZXJjaWFsUGxhbiArIHJlc2VydmVkRm9yVGVhbSArIHJlc2VydmVkRm9yT3BlcmF0aW9uczsKICAgIC8vIDQxJQogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgcHVibGljU3VwcGx5ID0gdG90YWxTdXBwbHkgLSBub25QdWJsaWNTdXBwbHk7CgogICAgdWludDI1NiBwdWJsaWMgb2ZmaWNpYWxMaW1pdDsKICAgIHVpbnQyNTYgcHVibGljIGNoYW5uZWxzTGltaXQ7CgogICAgdXNpbmcgUHJlYWxsb2MgZm9yIFByZWFsbG9jLlVJTlQyNTY7CiAgICBQcmVhbGxvYy5VSU5UMjU2IG9mZmljaWFsU29sZF87IC8vIGFtb3VudCBvZiB0b2tlbnMgb2ZmaWNpYWxseSBzb2xkIG91dAoKICAgIHVpbnQyNTYgcHVibGljIGNoYW5uZWxzU29sZDsgICAgLy8gYW1vdW50IG9mIHRva2VucyBzb2xkIG91dCB2aWEgY2hhbm5lbHMKICAgIAogICAgdWludDI1NiBjb25zdGFudCB2ZW5QZXJFdGggPSAzNTAwOyAgLy8gbm9ybWFsIGV4Y2hhbmdlIHJhdGUKICAgIHVpbnQyNTYgY29uc3RhbnQgdmVuUGVyRXRoRWFybHlTdGFnZSA9IHZlblBlckV0aCArIHZlblBlckV0aCAqIDE1IC8gMTAwOyAgLy8gZWFybHkgc3RhZ2UgaGFzIDE1JSByZXdhcmQKICAgCiAgICBWRU4gdmVuOyAvLyBWRU4gdG9rZW4gY29udHJhY3QgZm9sbG93cyBFUkMyMCBzdGFuZGFyZAoKICAgIGFkZHJlc3MgZXRoVmF1bHQ7IC8vIHRoZSBhY2NvdW50IHRvIGtlZXAgcmVjZWl2ZWQgZXRoZXIKICAgIGFkZHJlc3MgdmVuVmF1bHQ7IC8vIHRoZSBhY2NvdW50IHRvIGtlZXAgbm9uLXB1YmxpYyBvZmZlcmVkIFZFTiB0b2tlbnMKCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7IC8vIHRpbWUgdG8gc3RhcnQgc2FsZQogICAgdWludCBwdWJsaWMgZW5kVGltZTsgICAvLyB0aWVtIHRvIGNsb3NlIHNhbGUKICAgIHVpbnQgcHVibGljIGVhcmx5U3RhZ2VMYXN0czsgLy8gZWFybHkgYmlyZCBzdGFnZSBsYXN0cyBpbiBzZWNvbmRzCgogICAgYm9vbCBpbml0aWFsaXplZDsKICAgIGJvb2wgZmluYWxpemVkOwoKICAgIGZ1bmN0aW9uIFZFTlNhbGUoKSB7CiAgICAgICAgb2ZmaWNpYWxTb2xkXy5zZXQoMCk7CiAgICB9ICAgIAoKICAgIC8vLyBAbm90aWNlIGNhbGN1bHRlIGV4Y2hhbmdlIHJhdGUgYWNjb3JkaW5nIHRvIGN1cnJlbnQgc3RhZ2UKICAgIC8vLyBAcmV0dXJuIGV4Y2hhbmdlIHJhdGUuIHplcm8gaWYgbm90IGluIHNhbGUuCiAgICBmdW5jdGlvbiBleGNoYW5nZVJhdGUoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KXsKICAgICAgICBpZiAoc3RhZ2UoKSA9PSBTdGFnZS5FYXJseSkgewogICAgICAgICAgICByZXR1cm4gdmVuUGVyRXRoRWFybHlTdGFnZTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YWdlKCkgPT0gU3RhZ2UuTm9ybWFsKSB7CiAgICAgICAgICAgIHJldHVybiB2ZW5QZXJFdGg7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGZvciB0ZXN0IHB1cnBvc2UKICAgIGZ1bmN0aW9uIGJsb2NrVGltZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYmxvY2sudGltZXN0YW1wOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGVzdGltYXRlIHN0YWdlCiAgICAvLy8gQHJldHVybiBjdXJyZW50IHN0YWdlCiAgICBmdW5jdGlvbiBzdGFnZSgpIGNvbnN0YW50IHJldHVybnMgKFN0YWdlKSB7IAogICAgICAgIGlmIChmaW5hbGl6ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFN0YWdlLkZpbmFsaXplZDsKICAgICAgICB9CgogICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHsKICAgICAgICAgICAgLy8gZGVwbG95ZWQgYnV0IG5vdCBpbml0aWFsaXplZAogICAgICAgICAgICByZXR1cm4gU3RhZ2UuQ3JlYXRlZDsKICAgICAgICB9CgogICAgICAgIGlmIChibG9ja1RpbWUoKSA8IHN0YXJ0VGltZSkgewogICAgICAgICAgICAvLyBub3Qgc3RhcnRlZCB5ZXQKICAgICAgICAgICAgcmV0dXJuIFN0YWdlLkluaXRpYWxpemVkOwogICAgICAgIH0KCiAgICAgICAgaWYgKG9mZmljaWFsU29sZF8uZ2V0KCkuYWRkKGNoYW5uZWxzU29sZCkgPj0gcHVibGljU3VwcGx5KSB7CiAgICAgICAgICAgIC8vIGFsbCBzb2xkIG91dAogICAgICAgICAgICByZXR1cm4gU3RhZ2UuQ2xvc2VkOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJsb2NrVGltZSgpIDwgZW5kVGltZSkgewogICAgICAgICAgICAvLyBpbiBzYWxlICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChibG9ja1RpbWUoKSA8IHN0YXJ0VGltZS5hZGQoZWFybHlTdGFnZUxhc3RzKSkgewogICAgICAgICAgICAgICAgLy8gZWFybHkgYmlyZCBzdGFnZQogICAgICAgICAgICAgICAgcmV0dXJuIFN0YWdlLkVhcmx5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIG5vcm1hbCBzdGFnZQogICAgICAgICAgICByZXR1cm4gU3RhZ2UuTm9ybWFsOwogICAgICAgIH0KCiAgICAgICAgLy8gY2xvc2VkCiAgICAgICAgcmV0dXJuIFN0YWdlLkNsb3NlZDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBlbnRyeSB0byBidXkgdG9rZW5zCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsgICAgICAgIAogICAgICAgIGJ1eSgpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGVudHJ5IHRvIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IDAuMDEgZXRoZXIpOwoKICAgICAgICB1aW50MjU2IHJhdGUgPSBleGNoYW5nZVJhdGUoKTsKICAgICAgICAvLyBoZXJlIGRvbid0IG5lZWQgdG8gY2hlY2sgc3RhZ2UuIHJhdGUgaXMgb25seSB2YWxpZCB3aGVuIGluIHNhbGUKICAgICAgICByZXF1aXJlKHJhdGUgPiAwKTsKCiAgICAgICAgdWludDI1NiByZW1haW5lZCA9IG9mZmljaWFsTGltaXQuc3ViKG9mZmljaWFsU29sZF8uZ2V0KCkpOwogICAgICAgIHVpbnQyNTYgcmVxdWVzdGVkID0gbXNnLnZhbHVlLm11bChyYXRlKTsKICAgICAgICBpZiAocmVxdWVzdGVkID4gcmVtYWluZWQpIHsKICAgICAgICAgICAgLy9leGNlZWQgcmVtYWluZWQKICAgICAgICAgICAgcmVxdWVzdGVkID0gcmVtYWluZWQ7CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IGV0aENvc3QgPSByZXF1ZXN0ZWQuZGl2KHJhdGUpOwogICAgICAgIGlmIChyZXF1ZXN0ZWQgPiAwKSB7CiAgICAgICAgICAgIHZlbi5taW50KG1zZy5zZW5kZXIsIHJlcXVlc3RlZCwgdHJ1ZSk7CiAgICAgICAgICAgIC8vIHRyYW5zZmVyIEVUSCB0byB2YXVsdAogICAgICAgICAgICBldGhWYXVsdC50cmFuc2ZlcihldGhDb3N0KTsKCiAgICAgICAgICAgIG9mZmljaWFsU29sZF8uc2V0KG9mZmljaWFsU29sZF8uZ2V0KCkuYWRkKHJlcXVlc3RlZCkpOwogICAgICAgICAgICBvblNvbGQobXNnLnNlbmRlciwgcmVxdWVzdGVkLCBldGhDb3N0KTsgICAgICAgIAogICAgICAgIH0KCiAgICAgICAgdWludDI1NiB0b1JldHVybiA9IG1zZy52YWx1ZS5zdWIoZXRoQ29zdCk7CiAgICAgICAgaWYodG9SZXR1cm4gPiAwKSB7CiAgICAgICAgICAgIC8vIHJldHVybiBvdmVyIHBheWVkIEVUSAogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRvUmV0dXJuKTsKICAgICAgICB9ICAgICAgICAKICAgIH0KCiAgICAvLy8gQG5vdGljZSBjYWxjdWxhdGUgdG9rZW5zIHNvbGQgb2ZmaWNpYWxseQogICAgZnVuY3Rpb24gb2ZmaWNpYWxTb2xkKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBvZmZpY2lhbFNvbGRfLmdldCgpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIG1hbnVhbGx5IG9mZmVyIHRva2VucyB0byBjaGFubmVscwogICAgZnVuY3Rpb24gb2ZmZXJUb0NoYW5uZWxzKHVpbnQyNTYgX3ZlbkFtb3VudCkgb25seU93bmVyIHsKICAgICAgICBTdGFnZSBzdGcgPSBzdGFnZSgpOwogICAgICAgIC8vIHNpbmNlIHRoZSBzZXR0bGVtZW50IG1heSBiZSBkZWxheWVkLCBzbyBpdCdzIGFsbG93ZWQgaW4gY2xvc2VkIHN0YWdlCiAgICAgICAgcmVxdWlyZShzdGcgPT0gU3RhZ2UuRWFybHkgfHwgc3RnID09IFN0YWdlLk5vcm1hbCB8fCBzdGcgPT0gU3RhZ2UuQ2xvc2VkKTsKCiAgICAgICAgY2hhbm5lbHNTb2xkID0gY2hhbm5lbHNTb2xkLmFkZChfdmVuQW1vdW50KTsKCiAgICAgICAgLy9zaG91bGQgbm90IGV4Y2VlZCBsaW1pdAogICAgICAgIHJlcXVpcmUoY2hhbm5lbHNTb2xkIDw9IGNoYW5uZWxzTGltaXQpOwoKICAgICAgICB2ZW4ubWludCgKICAgICAgICAgICAgdmVuVmF1bHQsCiAgICAgICAgICAgIF92ZW5BbW91bnQsCiAgICAgICAgICAgIHRydWUgIC8vIHVuc29sZCB0b2tlbnMgY2FuIGJlIGNsYWltZWQgYnkgY2hhbm5lbHMgcG9ydGlvbgogICAgICAgICAgICApOwoKICAgICAgICBvblNvbGQodmVuVmF1bHQsIF92ZW5BbW91bnQsIDApOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGluaXRpYWxpemUgdG8gcHJlcGFyZSBmb3Igc2FsZQogICAgLy8vIEBwYXJhbSBfdmVuIFRoZSBhZGRyZXNzIFZFTiB0b2tlbiBjb250cmFjdCBmb2xsb3dpbmcgRVJDMjAgc3RhbmRhcmQKICAgIC8vLyBAcGFyYW0gX2V0aFZhdWx0IFRoZSBwbGFjZSB0byBzdG9yZSByZWNlaXZlZCBFVEgKICAgIC8vLyBAcGFyYW0gX3ZlblZhdWx0IFRoZSBwbGFjZSB0byBzdG9yZSBub24tcHVibGljbHkgc3VwcGxpZWQgVkVOIHRva2VucwogICAgLy8vIEBwYXJhbSBfY2hhbm5lbHNMaW1pdCBUaGUgaGFyZCBsaW1pdCBmb3IgY2hhbm5lbHMgc2FsZQogICAgLy8vIEBwYXJhbSBfc3RhcnRUaW1lIFRoZSB0aW1lIHdoZW4gc2FsZSBzdGFydHMKICAgIC8vLyBAcGFyYW0gX2VuZFRpbWUgVGhlIHRpbWUgd2hlbiBzYWxlIGVuZHMKICAgIC8vLyBAcGFyYW0gX2Vhcmx5U3RhZ2VMYXN0cyBkdXJhdGlvbiBvZiBlYXJseSBzdGFnZQogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgKICAgICAgICBWRU4gX3ZlbiwKICAgICAgICBhZGRyZXNzIF9ldGhWYXVsdCwKICAgICAgICBhZGRyZXNzIF92ZW5WYXVsdCwKICAgICAgICB1aW50MjU2IF9jaGFubmVsc0xpbWl0LAogICAgICAgIHVpbnQgX3N0YXJ0VGltZSwKICAgICAgICB1aW50IF9lbmRUaW1lLAogICAgICAgIHVpbnQgX2Vhcmx5U3RhZ2VMYXN0cykgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHN0YWdlKCkgPT0gU3RhZ2UuQ3JlYXRlZCk7CgogICAgICAgIC8vIG93bmVyc2hpcCBvZiB0b2tlbiBjb250cmFjdCBzaG91bGQgYWxyZWFkeSBiZSB0aGlzCiAgICAgICAgcmVxdWlyZShfdmVuLm93bmVyKCkgPT0gYWRkcmVzcyh0aGlzKSk7CgogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhfZXRoVmF1bHQpICE9IDApOwogICAgICAgIHJlcXVpcmUoYWRkcmVzcyhfdmVuVmF1bHQpICE9IDApOwoKICAgICAgICByZXF1aXJlKF9zdGFydFRpbWUgPiBibG9ja1RpbWUoKSk7CiAgICAgICAgcmVxdWlyZShfc3RhcnRUaW1lLmFkZChfZWFybHlTdGFnZUxhc3RzKSA8IF9lbmRUaW1lKTsgICAgICAgIAoKICAgICAgICB2ZW4gPSBfdmVuOwogICAgICAgIAogICAgICAgIGV0aFZhdWx0ID0gX2V0aFZhdWx0OwogICAgICAgIHZlblZhdWx0ID0gX3ZlblZhdWx0OwoKICAgICAgICBjaGFubmVsc0xpbWl0ID0gX2NoYW5uZWxzTGltaXQ7CiAgICAgICAgb2ZmaWNpYWxMaW1pdCA9IHB1YmxpY1N1cHBseS5zdWIoX2NoYW5uZWxzTGltaXQpOwoKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgICAgICBlYXJseVN0YWdlTGFzdHMgPSBfZWFybHlTdGFnZUxhc3RzOyAgICAgICAgCiAgICAgICAgCiAgICAgICAgdmVuLm1pbnQoCiAgICAgICAgICAgIHZlblZhdWx0LAogICAgICAgICAgICByZXNlcnZlZEZvclRlYW0uYWRkKHJlc2VydmVkRm9yT3BlcmF0aW9ucyksCiAgICAgICAgICAgIGZhbHNlIC8vIHRlYW0gYW5kIG9wZXJhdGlvbnMgcmVzZXJ2ZWQgcG9ydGlvbiBjYW4ndCBzaGFyZSB1bnNvbGQgdG9rZW5zCiAgICAgICAgKTsKCiAgICAgICAgdmVuLm1pbnQoCiAgICAgICAgICAgIHZlblZhdWx0LAogICAgICAgICAgICBwcml2YXRlU3VwcGx5LmFkZChjb21tZXJjaWFsUGxhbiksCiAgICAgICAgICAgIHRydWUgLy8gcHJpdmF0ZSBJQ08gYW5kIGNvbW1lcmNpYWwgcGxhbiBjYW4gc2hhcmUgdW5zb2xkIHRva2VucwogICAgICAgICk7CgogICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgICBvbkluaXRpYWxpemVkKCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgZmluYWxpemUKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHsKICAgICAgICAvLyBvbmx5IGFmdGVyIGNsb3NlZCBzdGFnZQogICAgICAgIHJlcXVpcmUoc3RhZ2UoKSA9PSBTdGFnZS5DbG9zZWQpOyAgICAgICAKCiAgICAgICAgdWludDI1NiB1bnNvbGQgPSBwdWJsaWNTdXBwbHkuc3ViKG9mZmljaWFsU29sZF8uZ2V0KCkpLnN1YihjaGFubmVsc1NvbGQpOwoKICAgICAgICBpZiAodW5zb2xkID4gMCkgewogICAgICAgICAgICAvLyB1bnNvbGQgVkVOIGFzIGJvbnVzCiAgICAgICAgICAgIHZlbi5vZmZlckJvbnVzKHVuc29sZCk7ICAgICAgICAKICAgICAgICB9CiAgICAgICAgdmVuLnNlYWwoKTsKCiAgICAgICAgZmluYWxpemVkID0gdHJ1ZTsKICAgICAgICBvbkZpbmFsaXplZCgpOwogICAgfQoKICAgIGV2ZW50IG9uSW5pdGlhbGl6ZWQoKTsKICAgIGV2ZW50IG9uRmluYWxpemVkKCk7CgogICAgZXZlbnQgb25Tb2xkKGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludDI1NiB2ZW5BbW91bnQsIHVpbnQyNTYgZXRoQ29zdCk7Cn0='.
	

]
