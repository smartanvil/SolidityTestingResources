Class {
	#name : #SRT9b5F737C26040707921A309ae83976Ad15227FA5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9b5F737C26040707921A309ae83976Ad15227FA5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPiAwKTsKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CiAgICByZXR1cm4gYzsKICB9CiAgZnVuY3Rpb24gc3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgZnVuY3Rpb24gYWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHsKICAgICAgdGhyb3c7CiAgICB9CiAgfQp9CmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9Ci8qCiAqIFBhdXNhYmxlCiAqIEFic3RyYWN0IGNvbnRyYWN0IHRoYXQgYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbgogKiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBib29sIHB1YmxpYyBzdG9wcGVkOwogIG1vZGlmaWVyIHN0b3BJbkVtZXJnZW5jeSB7CiAgICBpZiAoc3RvcHBlZCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIF87CiAgfQogIAogIG1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBpZiAoIXN0b3BwZWQpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KICAvLyBjYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVtZXJnZW5jeSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogIGZ1bmN0aW9uIGVtZXJnZW5jeVN0b3AoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgc3RvcHBlZCA9IHRydWU7CiAgfQogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICBmdW5jdGlvbiByZWxlYXNlKCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBzdG9wcGVkID0gZmFsc2U7CiAgfQp9CmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9Ci8qCiAqIFB1bGxQYXltZW50CiAqIEJhc2UgY29udHJhY3Qgc3VwcG9ydGluZyBhc3luYyBzZW5kIGZvciBwdWxsIHBheW1lbnRzLgogKiBJbmhlcml0IGZyb20gdGhpcyBjb250cmFjdCBhbmQgdXNlIGFzeW5jU2VuZCBpbnN0ZWFkIG9mIHNlbmQuCiAqLwpjb250cmFjdCBQdWxsUGF5bWVudCB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBwYXltZW50czsKICBldmVudCBMb2dSZWZ1bmRFVEgoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CiAgLyoqCiAgKiAgU3RvcmUgc2VudCBhbW91bnQgYXMgY3JlZGl0IHRvIGJlIHB1bGxlZCwgY2FsbGVkIGJ5IHBheWVyIAogICoqLwogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIGRlc3QsIHVpbnQgYW1vdW50KSBpbnRlcm5hbCB7CiAgICBwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwogIH0KICAvLyB3aXRoZHJhdyBhY2N1bXVsYXRlZCBiYWxhbmNlLCBjYWxsZWQgYnkgcGF5ZWUKICBmdW5jdGlvbiB3aXRoZHJhd1BheW1lbnRzKCkgewogICAgYWRkcmVzcyBwYXllZSA9IG1zZy5zZW5kZXI7CiAgICB1aW50IHBheW1lbnQgPSBwYXltZW50c1twYXllZV07CiAgICAKICAgIGlmIChwYXltZW50ID09IDApIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBpZiAodGhpcy5iYWxhbmNlIDwgcGF5bWVudCkgewogICAgICB0aHJvdzsKICAgIH0KICAgIHBheW1lbnRzW3BheWVlXSA9IDA7CiAgICBpZiAoIXBheWVlLnNlbmQocGF5bWVudCkpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBMb2dSZWZ1bmRFVEgocGF5ZWUscGF5bWVudCk7CiAgfQp9CmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwogIAogIC8qCiAgICogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIAogICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICB0aHJvdzsKICAgICB9CiAgICAgXzsKICB9CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cn0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBCYXNpY1Rva2VuLCBFUkMyMCB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhbGxvd2VkOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIGlmIChfdmFsdWUgPiBfYWxsb3dhbmNlKSB0aHJvdzsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgewogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB0aHJvdzsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KfQovKioKICogIE9yZW5Db2luIHRva2VuIGNvbnRyYWN0LiBJbXBsZW1lbnRzCiAqLwpjb250cmFjdCBPcmVuQ29pbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiT3JlbkNvaW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk9SRU4iOwogIHVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gODsKICAvLyBDb25zdHJ1Y3RvcgogIGZ1bmN0aW9uIE9yZW5Db2luKCkgewogICAgICB0b3RhbFN1cHBseSA9IDQwMDAwMDAwMDAwMDAwMDAwOwogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAvLyBTZW5kIGFsbCB0b2tlbnMgdG8gb3duZXIKICB9CiAgLyoqCiAgICogIEJ1cm4gYXdheSB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiBPcmVuQ29pbiB0b2tlbnMKICAgKi8KICBmdW5jdGlvbiBidXJuKHVpbnQgX3ZhbHVlKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCAweDAsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KLyoKICBDcm93ZHNhbGUgU21hcnQgQ29udHJhY3QgZm9yIHRoZSBPcmVucGxhdGZvcm0uY29tIHByb2plY3QKICBUaGlzIHNtYXJ0IGNvbnRyYWN0IGNvbGxlY3RzIEVUSCwgYW5kIGluIHJldHVybiBlbWl0cyBPcmVuQ29pbiB0b2tlbnMgdG8gdGhlIGJhY2tlcnMKKi8KY29udHJhY3QgQ3Jvd2RzYWxlIGlzIFBhdXNhYmxlLCBQdWxsUGF5bWVudCB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwogICAgc3RydWN0IEJhY2tlciB7CiAgICAgICAgdWludCB3ZWlSZWNlaXZlZDsgLy8gQW1vdW50IG9mIEV0aGVyIGdpdmVuCiAgICAgICAgdWludCBjb2luU2VudDsKICAgIH0KICAgIC8qCiAgICAqIENvbnN0YW50cwogICAgKi8KICAgIC8qIE1pbmltdW0gbnVtYmVyIG9mIE9yZW5Db2luIHRvIHNlbGwgKi8KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9DQVAgPSA0MjAwMDAwMDAwMDAwMDsgLy8gc29mdGNhcAogICAgLyogTWF4aW11bSBudW1iZXIgb2YgT3JlbkNvaW4gdG8gc2VsbCAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUFYX0NBUCA9IDQwMDAwMDAwMDAwMDAwMDAwOyAvLyA0MDAsMDAwLDAwMCBPcmVuQ29pbnMKICAgIC8qIE1pbmltdW0gYW1vdW50IHRvIGludmVzdCAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0lOVkVTVF9FVEhFUiA9IDEwMCBmaW5uZXk7CiAgICAvKiBDcm93ZHNhbGUgcGVyaW9kICovCiAgICB1aW50IHByaXZhdGUgY29uc3RhbnQgQ1JPV0RTQUxFX1BFUklPRCA9IDE1IGRheXM7CiAgICAvKiBOdW1iZXIgb2YgT3JlbkNvaW5zIHBlciBFdGhlciAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgQ09JTl9QRVJfRVRIRVIgPSAzMDAwMDAwMDAwMDA7IC8vIDMsMDAwIE9yZW5Db2lucwogICAgLyoKICAgICogVmFyaWFibGVzCiAgICAqLwogICAgLyogT3JlbkNvaW4gY29udHJhY3QgcmVmZXJlbmNlICovCiAgICBPcmVuQ29pbiBwdWJsaWMgY29pbjsKICAgIC8qIE11bHRpc2lnIGNvbnRyYWN0IHRoYXQgd2lsbCByZWNlaXZlIHRoZSBFdGhlciAqLwogICAgYWRkcmVzcyBwdWJsaWMgbXVsdGlzaWdFdGhlcjsKICAgIC8qIE51bWJlciBvZiBFdGhlciByZWNlaXZlZCAqLwogICAgdWludCBwdWJsaWMgZXRoZXJSZWNlaXZlZDsKICAgIC8qIE51bWJlciBvZiBPcmVuQ29pbnMgc2VudCB0byBFdGhlciBjb250cmlidXRvcnMgKi8KICAgIHVpbnQgcHVibGljIGNvaW5TZW50VG9FdGhlcjsKICAgIC8qIENyb3dkc2FsZSBzdGFydCB0aW1lICovCiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICAvKiBDcm93ZHNhbGUgZW5kIHRpbWUgKi8KICAgIHVpbnQgcHVibGljIGVuZFRpbWU7CiAgICAvKiBJcyBjcm93ZHNhbGUgc3RpbGwgb24gZ29pbmcgKi8KICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZDsKICAgIC8qIEJhY2tlcnMgRXRoZXIgaW5kZXhlZCBieSB0aGVpciBFdGhlcmV1bSBhZGRyZXNzICovCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQmFja2VyKSBwdWJsaWMgYmFja2VyczsKICAgIC8qCiAgICAqIE1vZGlmaWVycwogICAgKi8KICAgIG1vZGlmaWVyIG1pbkNhcE5vdFJlYWNoZWQoKSB7CiAgICAgICAgaWYgKChub3cgPCBlbmRUaW1lKSB8fCBjb2luU2VudFRvRXRoZXIgPj0gTUlOX0NBUCApIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciByZXNwZWN0VGltZUZyYW1lKCkgewogICAgICAgIGlmICgobm93IDwgc3RhcnRUaW1lKSB8fCAobm93ID4gZW5kVGltZSApKSB0aHJvdzsKICAgICAgICBfOwogICAgfQogICAgLyoKICAgICAqIEV2ZW50CiAgICAqLwogICAgZXZlbnQgTG9nUmVjZWl2ZWRFVEgoYWRkcmVzcyBhZGRyLCB1aW50IHZhbHVlKTsKICAgIGV2ZW50IExvZ0NvaW5zRW1pdGVkKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50IGFtb3VudCk7CiAgICAvKgogICAgICogQ29uc3RydWN0b3IKICAgICovCiAgICBmdW5jdGlvbiBDcm93ZHNhbGUoYWRkcmVzcyBfT3JlbkNvaW5BZGRyZXNzLCBhZGRyZXNzIF90bykgewogICAgICAgIGNvaW4gPSBPcmVuQ29pbihfT3JlbkNvaW5BZGRyZXNzKTsKICAgICAgICBtdWx0aXNpZ0V0aGVyID0gX3RvOwogICAgfQogICAgLyogCiAgICAgKiBUaGUgZmFsbGJhY2sgZnVuY3Rpb24gY29ycmVzcG9uZHMgdG8gYSBkb25hdGlvbiBpbiBFVEgKICAgICAqLwogICAgZnVuY3Rpb24oKSBzdG9wSW5FbWVyZ2VuY3kgcmVzcGVjdFRpbWVGcmFtZSBwYXlhYmxlIHsKICAgICAgICByZWNlaXZlRVRIKG1zZy5zZW5kZXIpOwogICAgfQogICAgLyogCiAgICAgKiBUbyBjYWxsIHRvIHN0YXJ0IHRoZSBjcm93ZHNhbGUKICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnQoKSBvbmx5T3duZXIgewogICAgICAgIGlmIChzdGFydFRpbWUgIT0gMCkgdGhyb3c7IC8vIENyb3dkc2FsZSB3YXMgYWxyZWFkeSBzdGFydGVkCiAgICAgICAgc3RhcnRUaW1lID0gbm93IDsgICAgICAgICAgICAKICAgICAgICBlbmRUaW1lID0gIG5vdyArIENST1dEU0FMRV9QRVJJT0Q7ICAgIAogICAgfQogICAgLyoKICAgICAqICBSZWNlaXZlcyBhIGRvbmF0aW9uIGluIEV0aGVyCiAgICAqLwogICAgZnVuY3Rpb24gcmVjZWl2ZUVUSChhZGRyZXNzIGJlbmVmaWNpYXJ5KSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA8IE1JTl9JTlZFU1RfRVRIRVIpIHRocm93OyAvLyBEb24ndCBhY2NlcHQgZnVuZGluZyB1bmRlciBhIHByZWRlZmluZWQgdGhyZXNob2xkCiAgICAgICAgCiAgICAgICAgdWludCBjb2luVG9TZW5kID0gYm9udXMobXNnLnZhbHVlLm11bChDT0lOX1BFUl9FVEhFUikuZGl2KDEgZXRoZXIpKTsgLy8gQ29tcHV0ZSB0aGUgbnVtYmVyIG9mIE9yZW5Db2luIHRvIHNlbmQKICAgICAgICBpZiAoY29pblRvU2VuZC5hZGQoY29pblNlbnRUb0V0aGVyKSA+IE1BWF9DQVApIHRocm93OyAgICAKICAgICAgICBCYWNrZXIgYmFja2VyID0gYmFja2Vyc1tiZW5lZmljaWFyeV07CiAgICAgICAgY29pbi50cmFuc2ZlcihiZW5lZmljaWFyeSwgY29pblRvU2VuZCk7IC8vIFRyYW5zZmVyIE9yZW5Db2lucyByaWdodCBub3cgCiAgICAgICAgYmFja2VyLmNvaW5TZW50ID0gYmFja2VyLmNvaW5TZW50LmFkZChjb2luVG9TZW5kKTsKICAgICAgICBiYWNrZXIud2VpUmVjZWl2ZWQgPSBiYWNrZXIud2VpUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7IC8vIFVwZGF0ZSB0aGUgdG90YWwgd2VpIGNvbGxlY3RlZCBkdXJpbmcgdGhlIGNyb3dkZnVuZGluZyBmb3IgdGhpcyBiYWNrZXIgICAgCiAgICAgICAgZXRoZXJSZWNlaXZlZCA9IGV0aGVyUmVjZWl2ZWQuYWRkKG1zZy52YWx1ZSk7IC8vIFVwZGF0ZSB0aGUgdG90YWwgd2VpIGNvbGxlY3RlZCBkdXJpbmcgdGhlIGNyb3dkZnVuZGluZwogICAgICAgIGNvaW5TZW50VG9FdGhlciA9IGNvaW5TZW50VG9FdGhlci5hZGQoY29pblRvU2VuZCk7CiAgICAgICAgLy8gU2VuZCBldmVudHMKICAgICAgICBMb2dDb2luc0VtaXRlZChtc2cuc2VuZGVyICxjb2luVG9TZW5kKTsKICAgICAgICBMb2dSZWNlaXZlZEVUSChiZW5lZmljaWFyeSwgZXRoZXJSZWNlaXZlZCk7IAogICAgfQogICAgCiAgICAvKgogICAgICpDb21wdXRlIHRoZSBPcmVuQ29pbiBib251cyBhY2NvcmRpbmcgdG8gdGhlIGludmVzdG1lbnQgcGVyaW9kCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJvbnVzKHVpbnQgYW1vdW50KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgaWYgKGNvaW5TZW50VG9FdGhlciA8IDIwMDAwMDAwMDAwMDAwMDAwKSByZXR1cm4gYW1vdW50LmFkZChhbW91bnQubXVsKDEwKS5kaXYoMjUpKTsgICAvLyBib251cyA0MCUKICAgICAgICByZXR1cm4gYW1vdW50LmFkZChhbW91bnQubXVsKDEwMCkuZGl2KDMzMykpOyAvL2JvbnVzIDMwJQogICAgfQogICAgLyogIAogICAgICogRmluYWxpemUgdGhlIGNyb3dkc2FsZSwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGUgcmVmdW5kIHBlcmlvZAogICAgKi8KICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgaWYgKG5vdyA8IGVuZFRpbWUpIHsgLy8gQ2Fubm90IGZpbmFsaXNlIGJlZm9yZSBDUk9XRFNBTEVfUEVSSU9EIG9yIGJlZm9yZSBzZWxsaW5nIGFsbCBjb2lucwogICAgICAgICAgICBpZiAoY29pblNlbnRUb0V0aGVyID09IE1BWF9DQVApIHsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjb2luU2VudFRvRXRoZXIgPCBNSU5fQ0FQICYmIG5vdyA8IGVuZFRpbWUgKyA1IGRheXMpIHRocm93OyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDVkYXlzIHRvIGdldCByZWZ1bmQgYmVmb3JlIHdlIGNhbiBmaW5hbGlzZQogICAgICAgIAoKICAgICAgICBpZiAoIW11bHRpc2lnRXRoZXIuc2VuZCh0aGlzLmJhbGFuY2UpKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICB1aW50IHJlbWFpbnMgPSBjb2luLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAocmVtYWlucyA+IDApIHsgLy8gQnVybiB0aGUgcmVzdCBvZiBPcmVuQ29pbnMKICAgICAgICAgICAgaWYgKCFjb2luLmJ1cm4ocmVtYWlucykpIHRocm93IDsKICAgICAgICB9CiAgICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgIH0KICAgIC8qICAKICAgICogRmFpbHNhZmUgZHJhaW4KICAgICovCiAgICBmdW5jdGlvbiBkcmFpbigpIG9ubHlPd25lciB7CiAgICAgICAgaWYgKCFvd25lci5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OwogICAgfQogICAgLyoqCiAgICAgKiBBbGxvdyB0byBjaGFuZ2UgdGhlIHRlYW0gbXVsdGlzaWcgYWRkcmVzcyBpbiB0aGUgY2FzZSBvZiBlbWVyZ2VuY3kuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldE11bHRpc2lnKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgaWYgKGFkZHIgPT0gYWRkcmVzcygwKSkgdGhyb3c7CiAgICAgICAgbXVsdGlzaWdFdGhlciA9IGFkZHI7CiAgICB9CiAgICAvKioKICAgICAqIE1hbnVhbGx5IGJhY2sgT3JlbkNvaW4gb3duZXIgYWRkcmVzcy4KICAgICAqLwogICAgZnVuY3Rpb24gYmFja09yZW5Db2luT3duZXIoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBjb2luLnRyYW5zZmVyT3duZXJzaGlwKG93bmVyKTsKICAgIH0KICAgIC8qKgogICAgICogVHJhbnNmZXIgcmVtYWlucyB0byBvd25lciBpbiBjYXNlIGlmIGltcG9zc2libGUgdG8gZG8gbWluIGludmVzdAogICAgICovCiAgICBmdW5jdGlvbiBnZXRSZW1haW5Db2lucygpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHZhciByZW1haW5zID0gTUFYX0NBUCAtIGNvaW5TZW50VG9FdGhlcjsKICAgICAgICB1aW50IG1pbkNvaW5zVG9TZWxsID0gYm9udXMoTUlOX0lOVkVTVF9FVEhFUi5tdWwoQ09JTl9QRVJfRVRIRVIpIC8gKDEgZXRoZXIpKTsKICAgICAgICBpZihyZW1haW5zID4gbWluQ29pbnNUb1NlbGwpIHRocm93OwogICAgICAgIEJhY2tlciBiYWNrZXIgPSBiYWNrZXJzW293bmVyXTsKICAgICAgICBjb2luLnRyYW5zZmVyKG93bmVyLCByZW1haW5zKTsgLy8gVHJhbnNmZXIgT3JlbkNvaW5zIHJpZ2h0IG5vdyAKICAgICAgICBiYWNrZXIuY29pblNlbnQgPSBiYWNrZXIuY29pblNlbnQuYWRkKHJlbWFpbnMpOwogICAgICAgIGNvaW5TZW50VG9FdGhlciA9IGNvaW5TZW50VG9FdGhlci5hZGQocmVtYWlucyk7CiAgICAgICAgLy8gU2VuZCBldmVudHMKICAgICAgICBMb2dDb2luc0VtaXRlZCh0aGlzICxyZW1haW5zKTsKICAgICAgICBMb2dSZWNlaXZlZEVUSChvd25lciwgZXRoZXJSZWNlaXZlZCk7IAogICAgfQogICAgLyogCiAgICAgKiBXaGVuIE1JTl9DQVAgaXMgbm90IHJlYWNoOgogICAgICogMSkgYmFja2VyIGNhbGwgdGhlICJhcHByb3ZlIiBmdW5jdGlvbiBvZiB0aGUgT3JlbkNvaW4gdG9rZW4gY29udHJhY3Qgd2l0aCB0aGUgYW1vdW50IG9mIGFsbCBPcmVuQ29pbnMgdGhleSBnb3QgaW4gb3JkZXIgdG8gYmUgcmVmdW5kCiAgICAgKiAyKSBiYWNrZXIgY2FsbCB0aGUgInJlZnVuZCIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB3aXRoIHRoZSBzYW1lIGFtb3VudCBvZiBPcmVuQ29pbnMKICAgICAqIDMpIGJhY2tlciBjYWxsIHRoZSAid2l0aGRyYXdQYXltZW50cyIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB0byBnZXQgYSByZWZ1bmQgaW4gRVRICiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlZnVuZCh1aW50IF92YWx1ZSkgbWluQ2FwTm90UmVhY2hlZCBwdWJsaWMgewogICAgICAgIAogICAgICAgIGlmIChfdmFsdWUgIT0gYmFja2Vyc1ttc2cuc2VuZGVyXS5jb2luU2VudCkgdGhyb3c7IC8vIGNvbXBhcmUgdmFsdWUgZnJvbSBiYWNrZXIgYmFsYW5jZQogICAgICAgIGNvaW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIGFkZHJlc3ModGhpcyksIF92YWx1ZSk7IC8vIGdldCB0aGUgdG9rZW4gYmFjayB0byB0aGUgY3Jvd2RzYWxlIGNvbnRyYWN0CiAgICAgICAgaWYgKCFjb2luLmJ1cm4oX3ZhbHVlKSkgdGhyb3cgOyAvLyB0b2tlbiBzZW50IGZvciByZWZ1bmQgYXJlIGJ1cm50CiAgICAgICAgdWludCBFVEhUb1NlbmQgPSBiYWNrZXJzW21zZy5zZW5kZXJdLndlaVJlY2VpdmVkOwogICAgICAgIGJhY2tlcnNbbXNnLnNlbmRlcl0ud2VpUmVjZWl2ZWQ9MDsKICAgICAgICBpZiAoRVRIVG9TZW5kID4gMCkgewogICAgICAgICAgICBhc3luY1NlbmQobXNnLnNlbmRlciwgRVRIVG9TZW5kKTsgLy8gcHVsbCBwYXltZW50IHRvIGdldCByZWZ1bmQgaW4gRVRICiAgICAgICAgfQogICAgfQp9'.
	

]
