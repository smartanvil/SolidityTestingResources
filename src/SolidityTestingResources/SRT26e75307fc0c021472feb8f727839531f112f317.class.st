Class {
	#name : #SRT26e75307fc0c021472feb8f727839531f112f317,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT26e75307fc0c021472feb8f727839531f112f317 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBTYWZlTWF0aCB7CgogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgLy8gbWl0aWdhdGUgc2hvcnQgYWRkcmVzcyBhdHRhY2sKICAvLyB0aGFua3MgdG8gaHR0cHM6Ly9naXRodWIuY29tL251bWVyYWkvY29udHJhY3QvYmxvYi9jMTgyNDY1ZjgyZTUwY2VkOGRhY2IzOTc3ZWMzNzRhODkyZjVmYThjL2NvbnRyYWN0cy9TYWZlLnNvbCNMMzAtTDM0LgogIC8vIFRPRE86IGRvdWJsZWNoZWNrIGltcGxpY2F0aW9uIG9mID49IGNvbXBhcmVkIHRvID09CiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQgbnVtV29yZHMpIHsKICAgICBhc3NlcnQobXNnLmRhdGEubGVuZ3RoID49IG51bVdvcmRzICogMzIgKyA0KTsKICAgICBfOwogIH0KCn0KCgpjb250cmFjdCBUb2tlbiB7IC8vIEVSQzIwIHN0YW5kYXJkCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cgp9CgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiwgU2FmZU1hdGggewoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vIFRPRE86IHVwZGF0ZSB0ZXN0cyB0byBleHBlY3QgdGhyb3cKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8gVE9ETzogdXBkYXRlIHRlc3RzIHRvIGV4cGVjdCB0aHJvdwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzJwogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgJ2FwcHJvdmUoX3NwZW5kZXIsIDApJyBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMikgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX29sZFZhbHVlLCB1aW50MjU2IF9uZXdWYWx1ZSkgb25seVBheWxvYWRTaXplKDMpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gX29sZFZhbHVlKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9uZXdWYWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX25ld1ZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKfQoKCmNvbnRyYWN0IEMyMCBpcyBTdGFuZGFyZFRva2VuIHsKCiAgICAvLyBGSUVMRFMKCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiQ3J5cHRvMjAiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQzIwIjsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAiOS4wIjsKCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbkNhcCA9IDg2MjA2ODk2ICogMTAqKjE4OwoKICAgIC8vIGNyb3dkc2FsZSBwYXJhbWV0ZXJzCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nU3RhcnRCbG9jazsKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRCbG9jazsKCiAgICAvLyB2ZXN0aW5nIGZpZWxkcwogICAgYWRkcmVzcyBwdWJsaWMgdmVzdGluZ0NvbnRyYWN0OwogICAgYm9vbCBwcml2YXRlIHZlc3RpbmdTZXQgPSBmYWxzZTsKCiAgICAvLyByb290IGNvbnRyb2wKICAgIGFkZHJlc3MgcHVibGljIGZ1bmRXYWxsZXQ7CiAgICAvLyBjb250cm9sIG9mIGxpcXVpZGl0eSBhbmQgbGltaXRlZCBjb250cm9sIG9mIHVwZGF0ZVByaWNlCiAgICBhZGRyZXNzIHB1YmxpYyBjb250cm9sV2FsbGV0OwogICAgLy8gdGltZSB0byB3YWl0IGJldHdlZW4gY29udHJvbFdhbGxldCBwcmljZSB1cGRhdGVzCiAgICB1aW50MjU2IHB1YmxpYyB3YWl0VGltZSA9IDUgaG91cnM7CgogICAgLy8gZnVuZFdhbGxldCBjb250cm9sbGVkIHN0YXRlIHZhcmlhYmxlcwogICAgLy8gaGFsdGVkOiBoYWx0IGJ1eWluZyBkdWUgdG8gZW1lcmdlbmN5LCB0cmFkZWFibGU6IHNpZ25hbCB0aGF0IGFzc2V0cyBoYXZlIGJlZW4gYWNxdWlyZWQKICAgIGJvb2wgcHVibGljIGhhbHRlZCA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgdHJhZGVhYmxlID0gZmFsc2U7CgogICAgLy8gLS0gdG90YWxTdXBwbHkgZGVmaW5lZCBpbiBTdGFuZGFyZFRva2VuCiAgICAvLyAtLSBtYXBwaW5nIHRvIHRva2VuIGJhbGFuY2VzIGRvbmUgaW4gU3RhbmRhcmRUb2tlbgoKICAgIHVpbnQyNTYgcHVibGljIHByZXZpb3VzVXBkYXRlVGltZSA9IDA7CiAgICBQcmljZSBwdWJsaWMgY3VycmVudFByaWNlOwogICAgdWludDI1NiBwdWJsaWMgbWluQW1vdW50ID0gMC4wNCBldGhlcjsKCiAgICAvLyBtYXAgcGFydGljaXBhbnQgYWRkcmVzcyB0byBhIHdpdGhkcmF3YWwgcmVxdWVzdAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBXaXRoZHJhd2FsKSBwdWJsaWMgd2l0aGRyYXdhbHM7CiAgICAvLyBtYXBzIHByZXZpb3VzVXBkYXRlVGltZSB0byB0aGUgbmV4dCBwcmljZQogICAgbWFwcGluZyAodWludDI1NiA9PiBQcmljZSkgcHVibGljIHByaWNlczsKICAgIC8vIG1hcHMgYWRkcmVzc2VzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CgogICAgLy8gVFlQRVMKCiAgICBzdHJ1Y3QgUHJpY2UgeyAvLyB0b2tlbnNQZXJFdGgKICAgICAgICB1aW50MjU2IG51bWVyYXRvcjsKICAgICAgICB1aW50MjU2IGRlbm9taW5hdG9yOwogICAgfQoKICAgIHN0cnVjdCBXaXRoZHJhd2FsIHsKICAgICAgICB1aW50MjU2IHRva2VuczsKICAgICAgICB1aW50MjU2IHRpbWU7IC8vIHRpbWUgZm9yIGVhY2ggd2l0aGRyYXdhbCBpcyBzZXQgdG8gdGhlIHByZXZpb3VzVXBkYXRlVGltZQogICAgfQoKICAgIC8vIEVWRU5UUwoKICAgIGV2ZW50IEJ1eShhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiBldGhWYWx1ZSwgdWludDI1NiBhbW91bnRUb2tlbnMpOwogICAgZXZlbnQgQWxsb2NhdGVQcmVzYWxlKGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgdWludDI1NiBhbW91bnRUb2tlbnMpOwogICAgZXZlbnQgV2hpdGVsaXN0KGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCk7CiAgICBldmVudCBQcmljZVVwZGF0ZSh1aW50MjU2IG51bWVyYXRvciwgdWludDI1NiBkZW5vbWluYXRvcik7CiAgICBldmVudCBBZGRMaXF1aWRpdHkodWludDI1NiBldGhBbW91bnQpOwogICAgZXZlbnQgUmVtb3ZlTGlxdWlkaXR5KHVpbnQyNTYgZXRoQW1vdW50KTsKICAgIGV2ZW50IFdpdGhkcmF3UmVxdWVzdChhZGRyZXNzIGluZGV4ZWQgcGFydGljaXBhbnQsIHVpbnQyNTYgYW1vdW50VG9rZW5zKTsKICAgIGV2ZW50IFdpdGhkcmF3KGFkZHJlc3MgaW5kZXhlZCBwYXJ0aWNpcGFudCwgdWludDI1NiBhbW91bnRUb2tlbnMsIHVpbnQyNTYgZXRoZXJBbW91bnQpOwoKICAgIC8vIE1PRElGSUVSUwoKICAgIG1vZGlmaWVyIGlzVHJhZGVhYmxlIHsgLy8gZXhlbXB0IHZlc3RpbmdDb250cmFjdCBhbmQgZnVuZFdhbGxldCB0byBhbGxvdyBkZXYgYWxsb2NhdGlvbnMKICAgICAgICByZXF1aXJlKHRyYWRlYWJsZSB8fCBtc2cuc2VuZGVyID09IGZ1bmRXYWxsZXQgfHwgbXNnLnNlbmRlciA9PSB2ZXN0aW5nQ29udHJhY3QpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVdoaXRlbGlzdCB7CiAgICAgICAgcmVxdWlyZSh3aGl0ZWxpc3RbbXNnLnNlbmRlcl0pOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUZ1bmRXYWxsZXQgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBmdW5kV2FsbGV0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNYW5hZ2luZ1dhbGxldHMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sV2FsbGV0IHx8IG1zZy5zZW5kZXIgPT0gZnVuZFdhbGxldCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5X2lmX2NvbnRyb2xXYWxsZXQgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IGNvbnRyb2xXYWxsZXQpIF87CiAgICB9CiAgICBtb2RpZmllciByZXF1aXJlX3dhaXRlZCB7CiAgICAgICAgcmVxdWlyZShzYWZlU3ViKG5vdywgd2FpdFRpbWUpID49IHByZXZpb3VzVXBkYXRlVGltZSk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlfaWZfaW5jcmVhc2UgKHVpbnQyNTYgbmV3TnVtZXJhdG9yKSB7CiAgICAgICAgaWYgKG5ld051bWVyYXRvciA+IGN1cnJlbnRQcmljZS5udW1lcmF0b3IpIF87CiAgICB9CgogICAgLy8gQ09OU1RSVUNUT1IKCiAgICBmdW5jdGlvbiBDMjAoYWRkcmVzcyBjb250cm9sV2FsbGV0SW5wdXQsIHVpbnQyNTYgcHJpY2VOdW1lcmF0b3JJbnB1dCwgdWludDI1NiBzdGFydEJsb2NrSW5wdXQsIHVpbnQyNTYgZW5kQmxvY2tJbnB1dCkgewogICAgICAgIHJlcXVpcmUoY29udHJvbFdhbGxldElucHV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUocHJpY2VOdW1lcmF0b3JJbnB1dCA+IDApOwogICAgICAgIHJlcXVpcmUoZW5kQmxvY2tJbnB1dCA+IHN0YXJ0QmxvY2tJbnB1dCk7CiAgICAgICAgZnVuZFdhbGxldCA9IG1zZy5zZW5kZXI7CiAgICAgICAgY29udHJvbFdhbGxldCA9IGNvbnRyb2xXYWxsZXRJbnB1dDsKICAgICAgICB3aGl0ZWxpc3RbZnVuZFdhbGxldF0gPSB0cnVlOwogICAgICAgIHdoaXRlbGlzdFtjb250cm9sV2FsbGV0XSA9IHRydWU7CiAgICAgICAgY3VycmVudFByaWNlID0gUHJpY2UocHJpY2VOdW1lcmF0b3JJbnB1dCwgMTAwMCk7IC8vIDEgdG9rZW4gPSAxIHVzZCBhdCBJQ08gc3RhcnQKICAgICAgICBmdW5kaW5nU3RhcnRCbG9jayA9IHN0YXJ0QmxvY2tJbnB1dDsKICAgICAgICBmdW5kaW5nRW5kQmxvY2sgPSBlbmRCbG9ja0lucHV0OwogICAgICAgIHByZXZpb3VzVXBkYXRlVGltZSA9IG5vdzsKICAgIH0KCiAgICAvLyBNRVRIT0RTCgogICAgZnVuY3Rpb24gc2V0VmVzdGluZ0NvbnRyYWN0KGFkZHJlc3MgdmVzdGluZ0NvbnRyYWN0SW5wdXQpIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICByZXF1aXJlKHZlc3RpbmdDb250cmFjdElucHV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHZlc3RpbmdDb250cmFjdCA9IHZlc3RpbmdDb250cmFjdElucHV0OwogICAgICAgIHdoaXRlbGlzdFt2ZXN0aW5nQ29udHJhY3RdID0gdHJ1ZTsKICAgICAgICB2ZXN0aW5nU2V0ID0gdHJ1ZTsKICAgIH0KCiAgICAvLyBhbGxvd3MgY29udHJvbFdhbGxldCB0byB1cGRhdGUgdGhlIHByaWNlIHdpdGhpbiBhIHRpbWUgY29udHN0cmFpbnQsIGFsbG93cyBmdW5kV2FsbGV0IGNvbXBsZXRlIGNvbnRyb2wKICAgIGZ1bmN0aW9uIHVwZGF0ZVByaWNlKHVpbnQyNTYgbmV3TnVtZXJhdG9yKSBleHRlcm5hbCBvbmx5TWFuYWdpbmdXYWxsZXRzIHsKICAgICAgICByZXF1aXJlKG5ld051bWVyYXRvciA+IDApOwogICAgICAgIHJlcXVpcmVfbGltaXRlZF9jaGFuZ2UobmV3TnVtZXJhdG9yKTsKICAgICAgICAvLyBlaXRoZXIgY29udHJvbFdhbGxldCBjb21tYW5kIGlzIGNvbXBsaWFudCBvciB0cmFuc2FjdGlvbiBjYW1lIGZyb20gZnVuZFdhbGxldAogICAgICAgIGN1cnJlbnRQcmljZS5udW1lcmF0b3IgPSBuZXdOdW1lcmF0b3I7CiAgICAgICAgLy8gbWFwcyB0aW1lIHRvIG5ldyBQcmljZSAoaWYgbm90IGR1cmluZyBJQ08pCiAgICAgICAgcHJpY2VzW3ByZXZpb3VzVXBkYXRlVGltZV0gPSBjdXJyZW50UHJpY2U7CiAgICAgICAgcHJldmlvdXNVcGRhdGVUaW1lID0gbm93OwogICAgICAgIFByaWNlVXBkYXRlKG5ld051bWVyYXRvciwgY3VycmVudFByaWNlLmRlbm9taW5hdG9yKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXF1aXJlX2xpbWl0ZWRfY2hhbmdlICh1aW50MjU2IG5ld051bWVyYXRvcikKICAgICAgICBwcml2YXRlCiAgICAgICAgb25seV9pZl9jb250cm9sV2FsbGV0CiAgICAgICAgcmVxdWlyZV93YWl0ZWQKICAgICAgICBvbmx5X2lmX2luY3JlYXNlKG5ld051bWVyYXRvcikKICAgIHsKICAgICAgICB1aW50MjU2IHBlcmNlbnRhZ2VfZGlmZiA9IDA7CiAgICAgICAgcGVyY2VudGFnZV9kaWZmID0gc2FmZU11bChuZXdOdW1lcmF0b3IsIDEwMCkgLyBjdXJyZW50UHJpY2UubnVtZXJhdG9yOwogICAgICAgIHBlcmNlbnRhZ2VfZGlmZiA9IHNhZmVTdWIocGVyY2VudGFnZV9kaWZmLCAxMDApOwogICAgICAgIC8vIGNvbnRyb2xXYWxsZXQgY2FuIG9ubHkgaW5jcmVhc2UgcHJpY2UgYnkgbWF4IDIwJSBhbmQgb25seSBldmVyeSB3YWl0VGltZQogICAgICAgIHJlcXVpcmUocGVyY2VudGFnZV9kaWZmIDw9IDIwKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVQcmljZURlbm9taW5hdG9yKHVpbnQyNTYgbmV3RGVub21pbmF0b3IpIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jayk7CiAgICAgICAgcmVxdWlyZShuZXdEZW5vbWluYXRvciA+IDApOwogICAgICAgIGN1cnJlbnRQcmljZS5kZW5vbWluYXRvciA9IG5ld0Rlbm9taW5hdG9yOwogICAgICAgIC8vIG1hcHMgdGltZSB0byBuZXcgUHJpY2UKICAgICAgICBwcmljZXNbcHJldmlvdXNVcGRhdGVUaW1lXSA9IGN1cnJlbnRQcmljZTsKICAgICAgICBwcmV2aW91c1VwZGF0ZVRpbWUgPSBub3c7CiAgICAgICAgUHJpY2VVcGRhdGUoY3VycmVudFByaWNlLm51bWVyYXRvciwgbmV3RGVub21pbmF0b3IpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG9jYXRlVG9rZW5zKGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQyNTYgYW1vdW50VG9rZW5zKSBwcml2YXRlIHsKICAgICAgICByZXF1aXJlKHZlc3RpbmdTZXQpOwogICAgICAgIC8vIDEzJSBvZiB0b3RhbCBhbGxvY2F0ZWQgZm9yIFBSLCBNYXJrZXRpbmcsIFRlYW0sIEFkdmlzb3JzCiAgICAgICAgdWludDI1NiBkZXZlbG9wbWVudEFsbG9jYXRpb24gPSBzYWZlTXVsKGFtb3VudFRva2VucywgMTQ5NDI1Mjg3MzU2MzIxODUpIC8gMTAwMDAwMDAwMDAwMDAwMDAwOwogICAgICAgIC8vIGNoZWNrIHRoYXQgdG9rZW4gY2FwIGlzIG5vdCBleGNlZWRlZAogICAgICAgIHVpbnQyNTYgbmV3VG9rZW5zID0gc2FmZUFkZChhbW91bnRUb2tlbnMsIGRldmVsb3BtZW50QWxsb2NhdGlvbik7CiAgICAgICAgcmVxdWlyZShzYWZlQWRkKHRvdGFsU3VwcGx5LCBuZXdUb2tlbnMpIDw9IHRva2VuQ2FwKTsKICAgICAgICAvLyBpbmNyZWFzZSB0b2tlbiBzdXBwbHksIGFzc2lnbiB0b2tlbnMgdG8gcGFydGljaXBhbnQKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIG5ld1Rva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbcGFydGljaXBhbnRdID0gc2FmZUFkZChiYWxhbmNlc1twYXJ0aWNpcGFudF0sIGFtb3VudFRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbdmVzdGluZ0NvbnRyYWN0XSA9IHNhZmVBZGQoYmFsYW5jZXNbdmVzdGluZ0NvbnRyYWN0XSwgZGV2ZWxvcG1lbnRBbGxvY2F0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvY2F0ZVByZXNhbGVUb2tlbnMoYWRkcmVzcyBwYXJ0aWNpcGFudCwgdWludCBhbW91bnRUb2tlbnMpIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdFbmRCbG9jayk7CiAgICAgICAgcmVxdWlyZShwYXJ0aWNpcGFudCAhPSBhZGRyZXNzKDApKTsKICAgICAgICB3aGl0ZWxpc3RbcGFydGljaXBhbnRdID0gdHJ1ZTsgLy8gYXV0b21hdGljYWxseSB3aGl0ZWxpc3QgYWNjZXB0ZWQgcHJlc2FsZQogICAgICAgIGFsbG9jYXRlVG9rZW5zKHBhcnRpY2lwYW50LCBhbW91bnRUb2tlbnMpOwogICAgICAgIFdoaXRlbGlzdChwYXJ0aWNpcGFudCk7CiAgICAgICAgQWxsb2NhdGVQcmVzYWxlKHBhcnRpY2lwYW50LCBhbW91bnRUb2tlbnMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHZlcmlmeVBhcnRpY2lwYW50KGFkZHJlc3MgcGFydGljaXBhbnQpIGV4dGVybmFsIG9ubHlNYW5hZ2luZ1dhbGxldHMgewogICAgICAgIHdoaXRlbGlzdFtwYXJ0aWNpcGFudF0gPSB0cnVlOwogICAgICAgIFdoaXRlbGlzdChwYXJ0aWNpcGFudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5KCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgYnV5VG8obXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG8oYWRkcmVzcyBwYXJ0aWNpcGFudCkgcHVibGljIHBheWFibGUgb25seVdoaXRlbGlzdCB7CiAgICAgICAgcmVxdWlyZSghaGFsdGVkKTsKICAgICAgICByZXF1aXJlKHBhcnRpY2lwYW50ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbkFtb3VudCk7CiAgICAgICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDwgZnVuZGluZ0VuZEJsb2NrKTsKICAgICAgICB1aW50MjU2IGljb0Rlbm9taW5hdG9yID0gaWNvRGVub21pbmF0b3JQcmljZSgpOwogICAgICAgIHVpbnQyNTYgdG9rZW5zVG9CdXkgPSBzYWZlTXVsKG1zZy52YWx1ZSwgY3VycmVudFByaWNlLm51bWVyYXRvcikgLyBpY29EZW5vbWluYXRvcjsKICAgICAgICBhbGxvY2F0ZVRva2VucyhwYXJ0aWNpcGFudCwgdG9rZW5zVG9CdXkpOwogICAgICAgIC8vIHNlbmQgZXRoZXIgdG8gZnVuZFdhbGxldAogICAgICAgIGZ1bmRXYWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICBCdXkobXNnLnNlbmRlciwgcGFydGljaXBhbnQsIG1zZy52YWx1ZSwgdG9rZW5zVG9CdXkpOwogICAgfQoKICAgIC8vIHRpbWUgYmFzZWQgb24gYmxvY2tudW1iZXJzLCBhc3N1bWluZyBhIGJsb2NrdGltZSBvZiAzMHMKICAgIGZ1bmN0aW9uIGljb0Rlbm9taW5hdG9yUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgaWNvRHVyYXRpb24gPSBzYWZlU3ViKGJsb2NrLm51bWJlciwgZnVuZGluZ1N0YXJ0QmxvY2spOwogICAgICAgIHVpbnQyNTYgZGVub21pbmF0b3I7CiAgICAgICAgaWYgKGljb0R1cmF0aW9uIDwgMjg4MCkgeyAvLyAjYmxvY2tzID0gMjQqNjAqNjAvMzAgPSAyODgwCiAgICAgICAgICAgIHJldHVybiBjdXJyZW50UHJpY2UuZGVub21pbmF0b3I7CiAgICAgICAgfSBlbHNlIGlmIChpY29EdXJhdGlvbiA8IDgwNjQwICkgeyAvLyAjYmxvY2tzID0gNCo3KjI0KjYwKjYwLzMwID0gODA2NDAKICAgICAgICAgICAgZGVub21pbmF0b3IgPSBzYWZlTXVsKGN1cnJlbnRQcmljZS5kZW5vbWluYXRvciwgMTA1KSAvIDEwMDsKICAgICAgICAgICAgcmV0dXJuIGRlbm9taW5hdG9yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRlbm9taW5hdG9yID0gc2FmZU11bChjdXJyZW50UHJpY2UuZGVub21pbmF0b3IsIDExMCkgLyAxMDA7CiAgICAgICAgICAgIHJldHVybiBkZW5vbWluYXRvcjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVxdWVzdFdpdGhkcmF3YWwodWludDI1NiBhbW91bnRUb2tlbnNUb1dpdGhkcmF3KSBleHRlcm5hbCBpc1RyYWRlYWJsZSBvbmx5V2hpdGVsaXN0IHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jayk7CiAgICAgICAgcmVxdWlyZShhbW91bnRUb2tlbnNUb1dpdGhkcmF3ID4gMCk7CiAgICAgICAgYWRkcmVzcyBwYXJ0aWNpcGFudCA9IG1zZy5zZW5kZXI7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2YocGFydGljaXBhbnQpID49IGFtb3VudFRva2Vuc1RvV2l0aGRyYXcpOwogICAgICAgIHJlcXVpcmUod2l0aGRyYXdhbHNbcGFydGljaXBhbnRdLnRva2VucyA9PSAwKTsgLy8gcGFydGljaXBhbnQgY2Fubm90IGhhdmUgb3V0c3RhbmRpbmcgd2l0aGRyYXdhbHMKICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBzYWZlU3ViKGJhbGFuY2VzW3BhcnRpY2lwYW50XSwgYW1vdW50VG9rZW5zVG9XaXRoZHJhdyk7CiAgICAgICAgd2l0aGRyYXdhbHNbcGFydGljaXBhbnRdID0gV2l0aGRyYXdhbCh7dG9rZW5zOiBhbW91bnRUb2tlbnNUb1dpdGhkcmF3LCB0aW1lOiBwcmV2aW91c1VwZGF0ZVRpbWV9KTsKICAgICAgICBXaXRoZHJhd1JlcXVlc3QocGFydGljaXBhbnQsIGFtb3VudFRva2Vuc1RvV2l0aGRyYXcpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgZXh0ZXJuYWwgewogICAgICAgIGFkZHJlc3MgcGFydGljaXBhbnQgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gd2l0aGRyYXdhbHNbcGFydGljaXBhbnRdLnRva2VuczsKICAgICAgICByZXF1aXJlKHRva2VucyA+IDApOyAvLyBwYXJ0aWNpcGFudCBtdXN0IGhhdmUgcmVxdWVzdGVkIGEgd2l0aGRyYXdhbAogICAgICAgIHVpbnQyNTYgcmVxdWVzdFRpbWUgPSB3aXRoZHJhd2Fsc1twYXJ0aWNpcGFudF0udGltZTsKICAgICAgICAvLyBvYnRhaW4gdGhlIG5leHQgcHJpY2UgdGhhdCB3YXMgc2V0IGFmdGVyIHRoZSByZXF1ZXN0CiAgICAgICAgUHJpY2UgcHJpY2UgPSBwcmljZXNbcmVxdWVzdFRpbWVdOwogICAgICAgIHJlcXVpcmUocHJpY2UubnVtZXJhdG9yID4gMCk7IC8vIHByaWNlIG11c3QgaGF2ZSBiZWVuIHNldAogICAgICAgIHVpbnQyNTYgd2l0aGRyYXdWYWx1ZSA9IHNhZmVNdWwodG9rZW5zLCBwcmljZS5kZW5vbWluYXRvcikgLyBwcmljZS5udW1lcmF0b3I7CiAgICAgICAgLy8gaWYgY29udHJhY3QgZXRoYmFsID4gdGhlbiBzZW5kICsgdHJhbnNmZXIgdG9rZW5zIHRvIGZ1bmRXYWxsZXQsIG90aGVyd2lzZSBnaXZlIHRva2VucyBiYWNrCiAgICAgICAgd2l0aGRyYXdhbHNbcGFydGljaXBhbnRdLnRva2VucyA9IDA7CiAgICAgICAgaWYgKHRoaXMuYmFsYW5jZSA+PSB3aXRoZHJhd1ZhbHVlKQogICAgICAgICAgICBlbmFjdF93aXRoZHJhd2FsX2dyZWF0ZXJfZXF1YWwocGFydGljaXBhbnQsIHdpdGhkcmF3VmFsdWUsIHRva2Vucyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBlbmFjdF93aXRoZHJhd2FsX2xlc3MocGFydGljaXBhbnQsIHdpdGhkcmF3VmFsdWUsIHRva2Vucyk7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hY3Rfd2l0aGRyYXdhbF9ncmVhdGVyX2VxdWFsKGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQyNTYgd2l0aGRyYXdWYWx1ZSwgdWludDI1NiB0b2tlbnMpCiAgICAgICAgcHJpdmF0ZQogICAgewogICAgICAgIGFzc2VydCh0aGlzLmJhbGFuY2UgPj0gd2l0aGRyYXdWYWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbZnVuZFdhbGxldF0gPSBzYWZlQWRkKGJhbGFuY2VzW2Z1bmRXYWxsZXRdLCB0b2tlbnMpOwogICAgICAgIHBhcnRpY2lwYW50LnRyYW5zZmVyKHdpdGhkcmF3VmFsdWUpOwogICAgICAgIFdpdGhkcmF3KHBhcnRpY2lwYW50LCB0b2tlbnMsIHdpdGhkcmF3VmFsdWUpOwogICAgfQogICAgZnVuY3Rpb24gZW5hY3Rfd2l0aGRyYXdhbF9sZXNzKGFkZHJlc3MgcGFydGljaXBhbnQsIHVpbnQyNTYgd2l0aGRyYXdWYWx1ZSwgdWludDI1NiB0b2tlbnMpCiAgICAgICAgcHJpdmF0ZQogICAgewogICAgICAgIGFzc2VydCh0aGlzLmJhbGFuY2UgPCB3aXRoZHJhd1ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1twYXJ0aWNpcGFudF0gPSBzYWZlQWRkKGJhbGFuY2VzW3BhcnRpY2lwYW50XSwgdG9rZW5zKTsKICAgICAgICBXaXRoZHJhdyhwYXJ0aWNpcGFudCwgdG9rZW5zLCAwKTsgLy8gaW5kaWNhdGUgYSBmYWlsZWQgd2l0aGRyYXdhbAogICAgfQoKCiAgICBmdW5jdGlvbiBjaGVja1dpdGhkcmF3VmFsdWUodWludDI1NiBhbW91bnRUb2tlbnNUb1dpdGhkcmF3KSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGV0aGVyVmFsdWUpIHsKICAgICAgICByZXF1aXJlKGFtb3VudFRva2Vuc1RvV2l0aGRyYXcgPiAwKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZihtc2cuc2VuZGVyKSA+PSBhbW91bnRUb2tlbnNUb1dpdGhkcmF3KTsKICAgICAgICB1aW50MjU2IHdpdGhkcmF3VmFsdWUgPSBzYWZlTXVsKGFtb3VudFRva2Vuc1RvV2l0aGRyYXcsIGN1cnJlbnRQcmljZS5kZW5vbWluYXRvcikgLyBjdXJyZW50UHJpY2UubnVtZXJhdG9yOwogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID49IHdpdGhkcmF3VmFsdWUpOwogICAgICAgIHJldHVybiB3aXRoZHJhd1ZhbHVlOwogICAgfQoKICAgIC8vIGFsbG93IGZ1bmRXYWxsZXQgb3IgY29udHJvbFdhbGxldCB0byBhZGQgZXRoZXIgdG8gY29udHJhY3QKICAgIGZ1bmN0aW9uIGFkZExpcXVpZGl0eSgpIGV4dGVybmFsIG9ubHlNYW5hZ2luZ1dhbGxldHMgcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKICAgICAgICBBZGRMaXF1aWRpdHkobXNnLnZhbHVlKTsKICAgIH0KCiAgICAvLyBhbGxvdyBmdW5kV2FsbGV0IHRvIHJlbW92ZSBldGhlciBmcm9tIGNvbnRyYWN0CiAgICBmdW5jdGlvbiByZW1vdmVMaXF1aWRpdHkodWludDI1NiBhbW91bnQpIGV4dGVybmFsIG9ubHlNYW5hZ2luZ1dhbGxldHMgewogICAgICAgIHJlcXVpcmUoYW1vdW50IDw9IHRoaXMuYmFsYW5jZSk7CiAgICAgICAgZnVuZFdhbGxldC50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIFJlbW92ZUxpcXVpZGl0eShhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUZ1bmRXYWxsZXQoYWRkcmVzcyBuZXdGdW5kV2FsbGV0KSBleHRlcm5hbCBvbmx5RnVuZFdhbGxldCB7CiAgICAgICAgcmVxdWlyZShuZXdGdW5kV2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGZ1bmRXYWxsZXQgPSBuZXdGdW5kV2FsbGV0OwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUNvbnRyb2xXYWxsZXQoYWRkcmVzcyBuZXdDb250cm9sV2FsbGV0KSBleHRlcm5hbCBvbmx5RnVuZFdhbGxldCB7CiAgICAgICAgcmVxdWlyZShuZXdDb250cm9sV2FsbGV0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNvbnRyb2xXYWxsZXQgPSBuZXdDb250cm9sV2FsbGV0OwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZVdhaXRUaW1lKHVpbnQyNTYgbmV3V2FpdFRpbWUpIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICB3YWl0VGltZSA9IG5ld1dhaXRUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUZ1bmRpbmdTdGFydEJsb2NrKHVpbnQyNTYgbmV3RnVuZGluZ1N0YXJ0QmxvY2spIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdTdGFydEJsb2NrKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IG5ld0Z1bmRpbmdTdGFydEJsb2NrKTsKICAgICAgICBmdW5kaW5nU3RhcnRCbG9jayA9IG5ld0Z1bmRpbmdTdGFydEJsb2NrOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUZ1bmRpbmdFbmRCbG9jayh1aW50MjU2IG5ld0Z1bmRpbmdFbmRCbG9jaykgZXh0ZXJuYWwgb25seUZ1bmRXYWxsZXQgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDwgZnVuZGluZ0VuZEJsb2NrKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8IG5ld0Z1bmRpbmdFbmRCbG9jayk7CiAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gbmV3RnVuZGluZ0VuZEJsb2NrOwogICAgfQoKICAgIGZ1bmN0aW9uIGhhbHQoKSBleHRlcm5hbCBvbmx5RnVuZFdhbGxldCB7CiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHVuaGFsdCgpIGV4dGVybmFsIG9ubHlGdW5kV2FsbGV0IHsKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBlbmFibGVUcmFkaW5nKCkgZXh0ZXJuYWwgb25seUZ1bmRXYWxsZXQgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKTsKICAgICAgICB0cmFkZWFibGUgPSB0cnVlOwogICAgfQoKICAgIC8vIGZhbGxiYWNrIGZ1bmN0aW9uCiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIHJlcXVpcmUodHgub3JpZ2luID09IG1zZy5zZW5kZXIpOwogICAgICAgIGJ1eVRvKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYWltVG9rZW5zKGFkZHJlc3MgX3Rva2VuKSBleHRlcm5hbCBvbmx5RnVuZFdhbGxldCB7CiAgICAgICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgVG9rZW4gdG9rZW4gPSBUb2tlbihfdG9rZW4pOwogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b2tlbi50cmFuc2ZlcihmdW5kV2FsbGV0LCBiYWxhbmNlKTsKICAgICB9CgogICAgLy8gcHJldmVudCB0cmFuc2ZlcnMgdW50aWwgdHJhZGluZyBhbGxvd2VkCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGlzVHJhZGVhYmxlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc1RyYWRlYWJsZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9Cgp9'.
	

]
