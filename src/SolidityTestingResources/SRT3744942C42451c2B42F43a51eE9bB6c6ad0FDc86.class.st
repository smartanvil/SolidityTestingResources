Class {
	#name : #SRT3744942C42451c2B42F43a51eE9bB6c6ad0FDc86,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3744942C42451c2B42F43a51eE9bB6c6ad0FDc86 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjEwOwoKLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgICJPd25lZCIgdG8gZW5zdXJlIGNvbnRyb2wgb2YgY29udHJhY3RzCgogICAgICAgICAgICBJZGVudGljYWwgdG8gaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvb3duZXJzaGlwL093bmFibGUuc29sCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwpjb250cmFjdCBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9CgovKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgU2FmZU1hdGggbGlicmFyeQoKICAgICAgICAgICAgSWRlbnRpY2FsIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVEaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsgLy8gRW5zdXJpbmcgbm8gbmVnYXRpdmVzCiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBFU0cgQXNzZXQgSG9sZGVyIGlzIGNhbGxlZCB3aGVuIHRoZSB0b2tlbiAiYnVybiIgZnVuY3Rpb24gaXMgY2FsbGVkCgogICAgU3VtOiAgICBMb2NrZWQgdG8gZmFsc2Ugc28gdXNlcnMgY2Fubm90IGJ1cm4gdGhlaXIgdG9rZW5zIHVudGlsIHRoZSBBc3NldCBDb250cmFjdCBpcwogICAgICAgICAgICBwdXQgaW4gcGxhY2Ugd2l0aCB2YWx1ZS4KCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCmNvbnRyYWN0IEVTR0Fzc2V0SG9sZGVyIHsKICAgIAogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9ob2xkZXIsIHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKCiAgICAgICAgX2hvbGRlciA9IDB4MDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUbyBhdm9pZCB2YXJpYWJsZSBub3QgdXNlZCBpc3N1ZSBvbiBkZXBsb3ltZW50CiAgICAgICAgX2Ftb3VudCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUbyBhdm9pZCB2YXJpYWJsZSBub3QgdXNlZCBpc3N1ZSBvbiBkZXBsb3ltZW50CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9CgoKLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIFRoZSBFc3BvcnRzIEdvbGQgVG9rZW46ICBFUkMyMCBzdGFuZGFyZCB0b2tlbiB3aXRoIE1JTlQgYW5kIEJVUk4gZnVuY3Rpb25zCgogICAgRnVuYzogICBNaW50LCBBcHByb3ZlLCBUcmFuc2ZlciwgVHJhbnNmZXJGcm9tICAKCiAgICBOb3RlOiAgIE1pbnQgZnVuY3Rpb24gdGFrZXMgVU5JVFMgb2YgdG9rZW5zIHRvIG1pbnQgYXMgSUNPIGV2ZW50IGlzIHNldCB0byBoYXZlIGEgbWluaW11bQogICAgICAgICAgICBjb250cmlidXRpb24gb2YgMSB0b2tlbi4gQWxsIG90aGVyIGZ1bmN0aW9ucyAodHJhbnNmZXIgZXRjKSwgdGhlIHZhbHVlIHRvIHRyYW5zZmVyCiAgICAgICAgICAgIGlzIHRoZSBGVUxMIERFQ0lNQUwgdmFsdWUKICAgICAgICAgICAgVGhlIHVzZXIgaXMgb25seSBldmVyIHByZXNlbnRlZCB3aXRoIHRoZSBsYXR0ZXIgb3B0aW9uLCB0aGVyZWZvcmUgc2hvdWxkIGF2b2lkCiAgICAgICAgICAgIGFueSBjb25mdXNpb24uCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCmNvbnRyYWN0IEVTR1Rva2VuIGlzIE93bmVkIHsKICAgICAgICAKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJFU0cgVG9rZW4iOyAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgdG9rZW4KICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkVTRyI7ICAgICAgICAgICAgICAgICAgIC8vIFRva2VuIHN5bWJvbAogICAgdWludDI1NiBwdWJsaWMgZGVjaW1hbHMgPSAzOyAgICAgICAgICAgICAgICAgICAgLy8gRGVjaW1hbHMgZm9yIHRoZSB0b2tlbgogICAgdWludDI1NiBwdWJsaWMgY3VycmVudFN1cHBseTsgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCBzdXBwbHkgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyBzdXBwbHlDYXA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBIYXJkIGNhcCBvbiBzdXBwbHkgb2YgdG9rZW5zCiAgICBhZGRyZXNzIHB1YmxpYyBJQ09jb250cm9sbGVyOyAgICAgICAgICAgICAgICAgICAvLyBDb250cm9sbGluZyBjb250cmFjdCBmcm9tIElDTwogICAgYWRkcmVzcyBwdWJsaWMgdGltZWxvY2tUb2tlbnM7ICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBmb3IgbG9ja2VkIG1hbmFnZW1lbnQgdG9rZW5zCiAgICBib29sIHB1YmxpYyB0b2tlblBhcmFtZXRlcnNTZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgcGFyYW1ldGVycyByZXF1aXJlZCBhcmUgc2V0CiAgICBib29sIHB1YmxpYyBjb250cm9sbGVyU2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgSUNPIGNvbnRyb2xsZXIgaXMgc2V0CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOyAgICAgICAgICAgICAgICAgICAgICAvLyBCYWxhbmNlcyBvZiBhZGRyZXNzZXMKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIGFsbG93YW5jZTsgICAgLy8gQWxsb3dhbmNlcyBmcm9tIGFkZHJlc3NlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgZnJvemVuQWNjb3VudDsgICAgICAgICAgICAgICAgICAgICAvLyBTYWZldHkgbWVjaGFuaXNtCgoKICAgIG1vZGlmaWVyIG9ubHlDb250cm9sbGVyT3JPd25lcigpIHsgICAgICAgICAgICAvLyBFbnN1cmVzIHRoYXQgb25seSBjb250cmFjdHMgY2FuIG1hbmFnZSBrZXkgZnVuY3Rpb25zCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IElDT2NvbnRyb2xsZXIgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgTWludChhZGRyZXNzIG93bmVyLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogICAgZXZlbnQgQnVybihhZGRyZXNzIGNvaW5ob2xkZXIsIHVpbnQgYW1vdW50KTsKICAgIAogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIENvbnN0cnVjdG9yCgogICAgcGFyYW06ICBPd25lcjogIEFkZHJlc3Mgb2Ygb3duZXIKICAgICAgICAgICAgTmFtZTogICBFc3BvcnRzIEdvbGQgVG9rZW4KICAgICAgICAgICAgU3ltOiAgICBFU0dfVEtOCiAgICAgICAgICAgIERlYzogICAgMwogICAgICAgICAgICBDYXA6ICAgIEhhcmQgY29kZWQgY2FwIHRvIGVuc3VyZSBleGNlc3MgdG9rZW5zIGNhbm5vdCBiZSBtaW50ZWQKCiAgICBPdGhlciBwYXJhbWV0ZXJzIGhhdmUgYmVlbiBzZXQgdXAgYXMgYSBzZXBhcmF0ZSBmdW5jdGlvbiB0byBoZWxwIGxvd2VyIGluaXRpYWwgZ2FzIGRlcGxveW1lbnQgY29zdC4KCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBFU0dUb2tlbigpIHsKICAgICAgICBjdXJyZW50U3VwcGx5ID0gMDsgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnRpbmcgc3VwcGx5IGlzIHplcm8KICAgICAgICBzdXBwbHlDYXAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFyZCBjYXAgc3VwcGx5IGluIFRva2VucyBzZXQgYnkgSUNPCiAgICAgICAgdG9rZW5QYXJhbWV0ZXJzU2V0ID0gZmFsc2U7ICAgICAgICAgICAgIC8vIEVuc3VyZSBwYXJhbWV0ZXJzIGFyZSBzZXQKICAgICAgICBjb250cm9sbGVyU2V0ID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIGNvbnRyb2xsZXIgaXMgc2V0CiAgICB9CgogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIEtleSBwYXJhbWV0ZXJzIHRvIHNldHVwIGZvciBJQ08gZXZlbnQKCiAgICBQYXJhbTogIF9pY28gICAgQWRkcmVzcyBvZiB0aGUgSUNPIEV2ZW50IGNvbnRyYWN0IHRvIGVuc3VyZSB0aGUgSUNPIGV2ZW50IGNhbiBjb250cm9sCiAgICAgICAgICAgICAgICAgICAgdGhlIG1pbnRpbmcgZnVuY3Rpb24KICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gc2V0SUNPQ29udHJvbGxlcihhZGRyZXNzIF9pY28pIG9ubHlPd25lciB7ICAgICAvLyBJQ08gZXZlbnQgYWRkcmVzcyBpcyBsb2NrZWQgaW4KICAgICAgICByZXF1aXJlKF9pY28gIT0gMHgwKTsKICAgICAgICBJQ09jb250cm9sbGVyID0gX2ljbzsKICAgICAgICBjb250cm9sbGVyU2V0ID0gdHJ1ZTsKICAgIH0KCgogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIE5FVwogICAgRGV2OiAgICBBZGRyZXNzIGZvciB0aGUgdGltZWxvY2sgdG9rZW5zIHRvIGJlIGhlbGQKCiAgICBQYXJhbTogIF90aW1lbG9ja0FkZHIgICBBZGRyZXNzIG9mIHRoZSB0aW1lbG9jayBjb250cmFjdCB0aGF0IHdpbGwgaG9sZCB0aGUgbG9ja2VkIHRva2VucwogICAgCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBzZXRQYXJhbWV0ZXJzKGFkZHJlc3MgX3RpbWVsb2NrQWRkcikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF90aW1lbG9ja0FkZHIgIT0gMHgwKTsKCiAgICAgICAgdGltZWxvY2tUb2tlbnMgPSBfdGltZWxvY2tBZGRyOwoKICAgICAgICB0b2tlblBhcmFtZXRlcnNTZXQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhcmFtZXRlcnNBcmVTZXQoKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2VuUGFyYW1ldGVyc1NldCAmJiBjb250cm9sbGVyU2V0OwogICAgfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBTZXQgdGhlIHRvdGFsIG51bWJlciBvZiBUb2tlbnMgdGhhdCBjYW4gYmUgbWludGVkCgogICAgUGFyYW06ICBfc3VwcGx5Q2FwICBUaGUgbnVtYmVyIG9mIHRva2VucyAoaW4gd2hvbGUgdW5pdHMpIHRoYXQgY2FuIGJlIG1pbnRlZC4gVGhpcyBudW1iZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnZXRzIGluY3JlYXNlZCBieSB0aGUgZGVjaW1hbCBudW1iZXIKICAgCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBzZXRUb2tlbkNhcEluVW5pdHModWludDI1NiBfc3VwcGx5Q2FwKSBvbmx5Q29udHJvbGxlck9yT3duZXIgeyAgIC8vIFN1cHBseSBjYXAgaW4gVU5JVFMKICAgICAgICBhc3NlcnQoX3N1cHBseUNhcCA+IDApOwogICAgICAgIAogICAgICAgIHN1cHBseUNhcCA9IFNhZmVNYXRoLnNhZmVNdWwoX3N1cHBseUNhcCwgKDEwKipkZWNpbWFscykpOwogICAgfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBNaW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGZvciB0aGUgdGltZWxvY2sgY29udHJhY3QKCiAgICBQYXJhbTogIF9tTWVudFRrbnMgIE51bWJlciBvZiB0b2tlbnMgaW4gd2hvbGUgdW5pdHMgdGhhdCBuZWVkIHRvIGJlIGxvY2tlZCBpbnRvIHRoZSBUaW1lbG9jawogICAgCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBtaW50TG9ja2VkVG9rZW5zKHVpbnQyNTYgX21NZW50VGtucykgb25seUNvbnRyb2xsZXJPck93bmVyIHsKICAgICAgICBhc3NlcnQoX21NZW50VGtucyA+IDApOwogICAgICAgIGFzc2VydCh0b2tlblBhcmFtZXRlcnNTZXQpOwoKICAgICAgICBtaW50KHRpbWVsb2NrVG9rZW5zLCBfbU1lbnRUa25zKTsgIAogICAgfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBhZGRyZXNzIG93bmVyCgogICAgUGFyYW06ICBfb3duZXIgIEFkZHJlc3Mgb2YgdGhlIG93bmVyIHF1ZXJ5aW5nIHRoZWlyIGJhbGFuY2UKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZU9mW19vd25lcl07CiAgICB9CgogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIE1pbnQgRVNHIFRva2VucyBieSBjb250cm9sbGVyCgogICAgQ29udHJvbDogICAgICAgICAgICBPbmx5Q29udHJvbGxlcnMuIElDTyBldmVudCBuZWVkcyB0byBiZSBhYmxlIHRvIGNvbnRyb2wgdGhlIG1pbnRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24KCiAgICBQYXJhbTogIEFkZHJlc3MgICAgIEFkZHJlc3MgZm9yIHRva2VucyB0byBiZSBtaW50ZWQgdG8KICAgICAgICAgICAgQW1vdW50ICAgICAgTnVtYmVyIG9mIHRva2VucyB0byBiZSBtaW50ZWQgKGluIHdob2xlIFVOSVRTLiBNaW4gbWludGluZyBpcyAxIHRva2VuKQogICAgICAgICAgICAgICAgICAgICAgICBNaW5pbXVtIEVUSCBjb250cmlidXRpb24gaW4gSUNPIGV2ZW50IGlzIDAuMDFFVEggYXQgMTAwIHRva2VucyBwZXIgRVRICiAgICAKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KICAgIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfYWRkcmVzcywgdWludCBfYW1vdW50KSBvbmx5Q29udHJvbGxlck9yT3duZXIgewogICAgICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gMHgwKTsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IFNhZmVNYXRoLnNhZmVNdWwoX2Ftb3VudCwgKDEwKipkZWNpbWFscykpOyAgICAgICAgICAgICAvLyBUb2tlbnMgbWludGVkIHVzaW5nIHVuaXQgcGFyYW1ldGVyIHN1cHBsaWVkCgogICAgICAgIC8vIEVuc3VyZSB0aGF0IHN1cHBseUNhcCBpcyBzZXQgYW5kIHRoYXQgbmV3IHRva2VucyBkb24ndCBicmVhY2ggY2FwCiAgICAgICAgYXNzZXJ0KHN1cHBseUNhcCA+IDAgJiYgYW1vdW50ID4gMCAmJiBTYWZlTWF0aC5zYWZlQWRkKGN1cnJlbnRTdXBwbHksIGFtb3VudCkgPD0gc3VwcGx5Q2FwKTsKICAgICAgICAKICAgICAgICBiYWxhbmNlT2ZbX2FkZHJlc3NdID0gU2FmZU1hdGguc2FmZUFkZChiYWxhbmNlT2ZbX2FkZHJlc3NdLCBhbW91bnQpOyAgICAvLyBBZGQgdG9rZW5zIHRvIGFkZHJlc3MKICAgICAgICBjdXJyZW50U3VwcGx5ID0gU2FmZU1hdGguc2FmZUFkZChjdXJyZW50U3VwcGx5LCBhbW91bnQpOyAgICAgICAgICAgICAgICAvLyBBZGQgdG8gc3VwcGx5CiAgICAgICAgCiAgICAgICAgTWludChfYWRkcmVzcywgYW1vdW50KTsKICAgIH0KICAgIAogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIEVSQzIwIHN0YW5kYXJkIHRyYW5zZmVyIGZ1bmN0aW9uCgogICAgUGFyYW06ICBfdG8gICAgICAgICBBZGRyZXNzIHRvIHNlbmQgdG8KICAgICAgICAgICAgX3ZhbHVlICAgICAgTnVtYmVyIG9mIHRva2VucyB0byBiZSBzZW50IC0gaW4gRlVMTCBkZWNpbWFsIGxlbmd0aAogICAgCiAgICBSZWY6ICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3Rva2VuL0Jhc2ljVG9rZW4uc29sCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0pOyAgICAgICAgLy8gRW5zdXJlIGFjY291bnQgaXMgbm90IGZyb3plbgoKICAgICAgICAvKiAKICAgICAgICAgICAgVXBkYXRlIGJhbGFuY2VzIGZyb20gImZyb20iIGFuZCAidG8iIGFkZHJlc3NlcyB3aXRoIHRoZSB0b2tlbnMgdHJhbnNmZXJyZWQKICAgICAgICAgICAgc2FmZVN1YiBtZXRob2QgZW5zdXJlcyB0aGF0IGFkZHJlc3Mgc2VuZGVyIGhhcyBlbm91Z2ggdG9rZW5zIHRvIHNlbmQKICAgICAgICAqLwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnNhZmVTdWIoYmFsYW5jZU9mW21zZy5zZW5kZXJdLCBfdmFsdWUpOyAgICAKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IFNhZmVNYXRoLnNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7ICAgICAgICAgICAgICAgICAgCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgRVJDMjAgc3RhbmRhcmQgdHJhbnNmZXJGcm9tIGZ1bmN0aW9uCgogICAgUGFyYW06ICBfZnJvbSAgICAgICBBZGRyZXNzIHRvIHNlbmQgZnJvbQogICAgICAgICAgICBfdG8gICAgICAgICBBZGRyZXNzIHRvIHNlbmQgdG8KICAgICAgICAgICAgQW1vdW50ICAgICAgTnVtYmVyIG9mIHRva2VucyB0byBiZSBzZW50IC0gaW4gRlVMTCBkZWNpbWFsIGxlbmd0aAoKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgeyAgIAogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbX2Zyb21dKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgYWNjb3VudCBpcyBub3QgZnJvemVuCiAgICAgICAgCiAgICAgICAgLyogCiAgICAgICAgICAgIEVuc3VyZSBzZW5kZXIgaGFzIGJlZW4gYXV0aG9yaXNlZCB0byBzZW5kIHRoZSByZXF1aXJlZCBudW1iZXIgb2YgdG9rZW5zCiAgICAgICAgKi8KICAgICAgICBpZiAoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA8IF92YWx1ZSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvKiAKICAgICAgICAgICAgVXBkYXRlIGFsbG93YW5jZSBvZiBzZW5kZXIgdG8gcmVmbGVjdCB0b2tlbnMgc2VudAogICAgICAgICovCiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnNhZmVTdWIoYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSwgX3ZhbHVlKTsgCgogICAgICAgIC8qIAogICAgICAgICAgICBVcGRhdGUgYmFsYW5jZXMgZnJvbSAiZnJvbSIgYW5kICJ0byIgYWRkcmVzc2VzIHdpdGggdGhlIHRva2VucyB0cmFuc2ZlcnJlZAogICAgICAgICAgICBzYWZlU3ViIG1ldGhvZCBlbnN1cmVzIHRoYXQgYWRkcmVzcyBzZW5kZXIgaGFzIGVub3VnaCB0b2tlbnMgdG8gc2VuZAogICAgICAgICovCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IFNhZmVNYXRoLnNhZmVTdWIoYmFsYW5jZU9mW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IFNhZmVNYXRoLnNhZmVBZGQoYmFsYW5jZU9mW190b10sIF92YWx1ZSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBFUkMyMCBzdGFuZGFyZCBhcHByb3ZlIGZ1bmN0aW9uCgogICAgUGFyYW06ICBfc3BlbmRlciAgICAgICAgQWRkcmVzcyBvZiBzZW5kZXIgd2hvIGlzIGFwcHJvdmVkCiAgICAgICAgICAgIF92YWx1ZSAgICAgICAgICBUaGUgbnVtYmVyIG9mIHRva2VucyAoZnVsbCBkZWNpbWFscykgdGhhdCBhcmUgYXBwcm92ZWQKCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSAgICAgIC8vIEZVTEwgREVDSU1BTFMgT0YgVE9LRU5TCiAgICAgICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0pOyAgICAgICAgICAgICAgICAvLyBDaGVjayBhY2NvdW50IGlzIG5vdCBmcm96ZW4KCiAgICAgICAgLyogUmVxdWlyaW5nIHRoZSB1c2VyIHRvIHNldCB0byB6ZXJvIGJlZm9yZSByZXNldHRpbmcgdG8gbm9uemVybyAqLwogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB7CiAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgYWxsb3dhbmNlW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICAKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCB0aGUgb3duZXIgaGFzIGFsbG93ZWQgdGhlICJzcGVuZGVyIiB0bwogICAgICAgICAgICB0cmFuc2ZlcgoKICAgIFBhcmFtOiAgX293bmVyICAgICAgICAgIEFkZHJlc3Mgb2YgdGhlIGF1dGhvcmlzZXIgd2hvIG93bnMgdGhlIHRva2VucwogICAgICAgICAgICBfc3BlbmRlciAgICAgICAgQWRkcmVzcyBvZiBzZW5kZXIgd2hvIHdpbGwgYmUgYXV0aG9yaXNlZCB0byBzcGVuZCB0aGUgdG9rZW5zCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dhbmNlW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgQXMgRVNHIGlzIGFpbWluZyB0byBiZSBhIHJlZ3VsYXRlZCBiZXR0aW5nIG9wZXJhdG9yLiBSZWd1bGF0b3J5IGh1cmRsZXMgbWF5IHJlcXVpcmUKICAgICAgICAgICAgdGhpcyBmdW5jdGlvbiBpZiBhbiBhY2NvdW50IG9uIHRoZSBiZXR0aW5nIHBsYXRmb3JtLCB1c2luZyB0aGUgdG9rZW4sIGJyZWFjaGVzCiAgICAgICAgICAgIGEgcmVndWxhdG9yeSByZXF1aXJlbWVudC4KCiAgICAgICAgICAgIEVTRyBjYW4gdGhlbiBlbmdhZ2Ugd2l0aCB0aGUgYWNjb3VudCBob2xkZXIgdG8gZ2V0IGl0IHVubG9ja2VkCgogICAgICAgICAgICBUaGlzIGRvZXMgbm90IHN0b3AgdGhlIHRva2VuIGFjY3J1aW5nIHZhbHVlIGZyb20gaXRzIHNoYXJlIG9mIHRoZSBBc3NldCBDb250cmFjdAoKICAgIFBhcmFtOiAgX3RhcmdldCAgICAgICAgIEFkZHJlc3Mgb2YgYWNjb3VudAogICAgICAgICAgICBfZnJlZXplICAgICAgICAgQm9vbGVhbiB0byBsb2NrL3VubG9jayBhY2NvdW50CgogICAgUmVmOiAgICBUaGlzIGlzIGEgcmVwbGljYSBvZiB0aGUgY29kZSBhcyBwZXIgaHR0cHM6Ly9ldGhlcmV1bS5vcmcvdG9rZW4KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KICAgIGZ1bmN0aW9uIGZyZWV6ZUFjY291bnQoYWRkcmVzcyB0YXJnZXQsIGJvb2wgZnJlZXplKSBvbmx5T3duZXIgewogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICB9CgogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIEJ1cm4gZnVuY3Rpb246IFVzZXIgaXMgYWJsZSB0byBidXJuIHRoZWlyIHRva2VuIGZvciBhIHNoYXJlIG9mIHRoZSBFU0cgQXNzZXQgQ29udHJhY3QKCiAgICBOb3RlOiAgIERlcGxveWVkIHdpdGggdGhlIEVTRyBBc3NldCBDb250cmFjdCBzZXQgdG8gZmFsc2UgdG8gZW5zdXJlIHRva2VuIGhvbGRlcnMgY2Fubm90CiAgICAgICAgICAgIGFjY2lkZW50YWxseSBidXJuIHRoZWlyIHRva2VucyBmb3IgemVybyB2YWx1ZQoKICAgIFBhcmFtOiAgX2Ftb3VudCAgICAgICAgIE51bWJlciBvZiB0b2tlbnMgKGZ1bGwgZGVjaW1hbHMpIHRoYXQgc2hvdWxkIGJlIGJ1cm50CgogICAgUmVmOiAgICBCYXNlZCBvbiB0aGUgb3BlbiBzb3VyY2UgVG9rZW5DYXJkIEJ1cm4gZnVuY3Rpb24uIEEgY29weSBjYW4gYmUgZm91bmQgYXQKICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Jva2t5cG9vYmFoL1Rva2VuQ2FyZElDT0FuYWx5c2lzCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCByZXN1bHQpIHsKCiAgICAgICAgaWYgKF9hbW91bnQgPiBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0pCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAgICAgLy8gSWYgb3duZXIgaGFzIGVub3VnaCB0byBidXJuCgogICAgICAgIC8qIAogICAgICAgICAgICBSZW1vdmUgdG9rZW5zIGZyb20gY2lyY3VsYXRpb24KICAgICAgICAgICAgVXBkYXRlIHNlbmRlcidzIGJhbGFuY2Ugb2YgdG9rZW5zCiAgICAgICAgKi8KICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zYWZlU3ViKGJhbGFuY2VPZlttc2cuc2VuZGVyXSwgX2Ftb3VudCk7CiAgICAgICAgY3VycmVudFN1cHBseSA9IFNhZmVNYXRoLnNhZmVTdWIoY3VycmVudFN1cHBseSwgX2Ftb3VudCk7CgogICAgICAgIC8vIENhbGwgYnVybiBmdW5jdGlvbgogICAgICAgIHJlc3VsdCA9IGVzZ0Fzc2V0SG9sZGVyLmJ1cm4obXNnLnNlbmRlciwgX2Ftb3VudCk7CiAgICAgICAgcmVxdWlyZShyZXN1bHQpOwoKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF9hbW91bnQpOwogICAgfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBTZWN0aW9uIG9mIHRoZSBjb250cmFjdCB0aGF0IGxpbmtzIHRvIHRoZSBFU0cgQXNzZXQgQ29udHJhY3QKCiAgICBOb3RlOiAgIERlcGxveWVkIHdpdGggdGhlIEVTRyBBc3NldCBDb250cmFjdCBzZXQgdG8gZmFsc2UgdG8gZW5zdXJlIHRva2VuIGhvbGRlcnMgY2Fubm90CiAgICAgICAgICAgIGFjY2lkZW50YWxseSBidXJuIHRoZWlyIHRva2VucyBmb3IgemVybyB2YWx1ZQoKICAgIFBhcmFtOiAgX2Ftb3VudCAgICAgICAgIE51bWJlciBvZiB0b2tlbnMgKGZ1bGwgZGVjaW1hbHMpIHRoYXQgc2hvdWxkIGJlIGJ1cm50CgogICAgUmVmOiAgICBCYXNlZCBvbiB0aGUgb3BlbiBzb3VyY2UgVG9rZW5DYXJkIEJ1cm4gZnVuY3Rpb24uIEEgY29weSBjYW4gYmUgZm91bmQgYXQKICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Jva2t5cG9vYmFoL1Rva2VuQ2FyZElDT0FuYWx5c2lzCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgogICAgRVNHQXNzZXRIb2xkZXIgZXNnQXNzZXRIb2xkZXI7ICAgICAgICAgICAgICAvLyBIb2xkcyB0aGUgYWNjdW11bGF0ZWQgYXNzZXQgY29udHJhY3QKICAgIGJvb2wgbG9ja2VkQXNzZXRIb2xkZXI7ICAgICAgICAgICAgICAgICAgICAgLy8gV2lsbCBiZSBsb2NrZWQgdG8gc3RvcCB0b2tlbmhvbGRlciB0byBiZSB1cGdyYWRlZAoKICAgIGZ1bmN0aW9uIGxvY2tBc3NldEhvbGRlcigpIG9ubHlPd25lciB7ICAgICAgLy8gTG9ja2VkIG9uY2UgZGVwbG95ZWQKICAgICAgICBsb2NrZWRBc3NldEhvbGRlciA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QXNzZXRIb2xkZXIoYWRkcmVzcyBfYXNzZXRBZHJlc3MpIG9ubHlPd25lciB7ICAgLy8gVXNlZCB0byBsb2NrIGluIHRoZSBBc3NldCBDb250cmFjdAogICAgICAgIGFzc2VydCghbG9ja2VkQXNzZXRIb2xkZXIpOyAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHdlIGhhdmVuJ3QgbG9ja2VkIHRoZSBhc3NldCBob2xkZXIgeWV0CiAgICAgICAgZXNnQXNzZXRIb2xkZXIgPSBFU0dBc3NldEhvbGRlcihfYXNzZXRBZHJlc3MpOwogICAgfSAgICAKfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBWZXN0ZWQgdG9rZW4gb3B0aW9uIGZvciBtYW5hZ2VtZW50IC0gbG9ja2luZyBpbiBhY2NvdW50IGhvbGRlcnMgZm9yIDIgeWVhcnMKCiAgICBSZWY6ICAgIElkZW50aWNhbCB0byBPcGVuWmVwcGVsaW4gb3BlbiBzb3VyY2UgY29udHJhY3QgZXhjZXB0IHJlbGVhc2VUaW1lIGlzIGxvY2tlZCBpbgogICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy90b2tlbi9Ub2tlblRpbWVsb2NrLnNvbAoKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KY29udHJhY3QgVG9rZW5UaW1lbG9jayB7CgogICAgLy8gRVJDMjAgYmFzaWMgdG9rZW4gY29udHJhY3QgYmVpbmcgaGVsZAogICAgRVNHVG9rZW4gdG9rZW47CgogICAgLy8gYmVuZWZpY2lhcnkgb2YgdG9rZW5zIGFmdGVyIHRoZXkgYXJlIHJlbGVhc2VkCiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsKCiAgICAvLyB0aW1lc3RhbXAgd2hlbiB0b2tlbiByZWxlYXNlIGlzIGVuYWJsZWQKICAgIHVpbnQyNTYgcHVibGljIHJlbGVhc2VUaW1lOwoKICAgIGZ1bmN0aW9uIFRva2VuVGltZWxvY2soYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSB7CiAgICAgICAgcmVxdWlyZShfdG9rZW4gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAweDApOwoKICAgICAgICB0b2tlbiA9IEVTR1Rva2VuKF90b2tlbik7CiAgICAgICAgLy90b2tlbiA9IF90b2tlbjsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICByZWxlYXNlVGltZSA9IG5vdyArIDIgeWVhcnM7CiAgICB9CgogICAgLyogCiAgICAgICAgU2hvdyB0aGUgYmFsYW5jZSBpbiB0aGUgdGltZWxvY2sgZm9yIHRyYW5zcGFyZW5jeQogICAgICAgIFRoZXJlZm9yZSB0cmFuc3BhcmVudCB2aWV3IG9mIHRoZSB3aGl0ZXBhcGVyIGFsbG90dGVkIG1hbmFnZW1lbnQgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24gbG9ja2VkQmFsYW5jZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgIH0KCiAgICAvKiAKICAgICAgICBUcmFuc2ZlcnMgdG9rZW5zIGhlbGQgYnkgdGltZWxvY2sgdG8gYmVuZWZpY2lhcnkKICAgICovCiAgICBmdW5jdGlvbiByZWxlYXNlKCkgewogICAgICAgIHJlcXVpcmUobm93ID49IHJlbGVhc2VUaW1lKTsKCiAgICAgICAgdWludDI1NiBhbW91bnQgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmVxdWlyZShhbW91bnQgPiAwKTsKCiAgICAgICAgdG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksIGFtb3VudCk7CiAgICB9Cn0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgSUNPIENvbnRyb2xsZXIgZXZlbnQKCiAgICAgICAgICAgIElDTyBDb250cm9sbGVyIG1hbmFnZXMgdGhlIElDTyBldmVudCBpbmNsdWRpbmcgcGF5YWJsZSBmdW5jdGlvbnMgdGhhdCB0cmlnZ2VyIG1pbnQsCiAgICAgICAgICAgIFJlZnVuZCBjb2xsZWN0aW9ucywgQmFzZSB0YXJnZXQgYW5kIElDTyBkaXNjb3VudCByYXRlcyBmb3IgZGVwb3NpdHMgYmVmb3JlIEJhc2UKICAgICAgICAgICAgVGFyZ2V0CgogICAgUmVmOiAgICBNb2RpZmllZCB2ZXJzaW9uIG9mIGNyb3dkc2FsZSBjb250cmFjdCB3aXRoIHJlZnVuZCBvcHRpb24gKGlmIGJhc2UgdGFyZ2V0IG5vdCByZWFjaGVkKQogICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9jcm93ZHNhbGUvQ3Jvd2RzYWxlLnNvbAogICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9jcm93ZHNhbGUvUmVmdW5kVmF1bHQuc29sICAgICAgICAgICAKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KY29udHJhY3QgSUNPRXZlbnQgaXMgT3duZWQgewoKICAgIEVTR1Rva2VuIHB1YmxpYyB0b2tlbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFU0cgVE9LRU4gdXNlZCBmb3IgRGVwb3NpdCwgQ2xhaW1zLCBTZXQgQWRkcmVzcwoKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFydFRpbWUgZGVmYXVsdAogICAgdWludDI1NiBwdWJsaWMgZW5kVGltZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZCB0aW1lIGlzIHN0YXJ0ICsgZHVyYXRpb24KICAgIHVpbnQyNTYgZHVyYXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEdXJhdGlvbiBpbiBkYXlzIGZvciBJQ08KICAgIGJvb2wgcGFyYW1ldGVyc1NldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgcGFyYW1hdGVycyBhcmUgbG9ja2VkIGluIGJlZm9yZSBzdGFydGluZyBJQ08KICAgIGJvb2wgc3VwcGx5U2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdG9rZW4gc3VwcGx5IHNldAoKICAgIGFkZHJlc3MgaG9sZGluZ0FjY291bnQgPSAweDA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIGZvciBzdWNjZXNzZnVsIGNsb3Npbmcgb2YgSUNPCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFRva2Vuc01pbnRlZDsgICAgICAgICAgICAgICAgICAgLy8gVG8gcmVjb3JkIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgbWludGVkCgogICAgLy8gRm9yIHB1cmNoYXNpbmcgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyByYXRlX3RvVGFyZ2V0OyAgICAgICAgICAgICAgICAgICAgICAgLy8gUmF0ZSBvZiB0b2tlbnMgcGVyIDEgRVRIIGNvbnRyaWJ1dGVkIHRvIHRoZSBiYXNlIHRhcmdldAogICAgdWludDI1NiBwdWJsaWMgcmF0ZV90b0NhcDsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhdGUgb2YgdG9rZW5zIGZyb20gYmFzZSB0YXJnZXQgdG8gY2FwIHBlciAxIEVUSAogICAgdWludDI1NiBwdWJsaWMgdG90YWxXZWlDb250cmlidXRlZCA9IDA7ICAgICAgICAgICAgIC8vIFRyYWNrcyB0b3RhbCBFdGhlciBjb250cmlidXRlZCBpbiBXRUkKICAgIHVpbnQyNTYgcHVibGljIG1pbldlaUNvbnRyaWJ1dGlvbiA9IDAuMDEgZXRoZXI7ICAgICAvLyBBdCAxMDA6MUVUSCBtZWFucyAxIHRva2VuID0gdGhlIG1pbmltdW0gY29udHJpYnV0aW9uCiAgICB1aW50MjU2IGNvbnN0YW50IHdlaUV0aGVyQ29udmVyc2lvbiA9IDEwKioxODsgICAgICAgLy8gVG8gYWxsb3cgaW5wdXRzIGZvciBzZXR1cCBpbiBFVEggZm9yIHNpbXBsaWNpdHkKCiAgICAvLyBDYXAgcGFyYW1ldGVycwogICAgdWludDI1NiBwdWJsaWMgYmFzZVRhcmdldEluV2VpOyAgICAgICAgICAgICAgICAgICAgIC8vIFRhcmdldCBmb3IgYm9udXMgcmF0ZSBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIGljb0NhcEluV2VpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXggY2FwIG9mIHRoZSBJQ08gaW4gV2VpCgogICAgZXZlbnQgbG9nUHVyY2hhc2UgKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIHVpbnQgdmFsdWUsIHVpbnQyNTYgdG9rZW5zKTsKCiAgICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9ICAgICAgICAgICAgLy8gQWxsb3dzIGNvbnRyb2wgb2YgdGhlIElDTyBzdGF0ZQogICAgU3RhdGUgcHVibGljIHN0YXRlOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgZGVwb3NpdGVkOyAgICAgIC8vIE1hcHBpbmcgZm9yIGFkZHJlc3MgZGVwb3NpdCBhbW91bnRzCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB0b2tlbnNJc3N1ZWQ7ICAgLy8gTWFwcGluZyBmb3IgYWRkcmVzcyB0b2tlbiBhbW91bnRzCgogICAgLyogIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBEZXY6ICAgIENvbnN0cnVjdG9yCgogICAgcGFyYW06ICBQYXJhbWV0ZXJzIGFyZSBzZXQgaW5kaXZpZHVhbGx5IGFmdGVyIGNvbnN0cnVjdGlvbiB0byBsb3dlciBpbml0aWFsIGRlcGxveW1lbnQgZ2FzCiAgICAgICAgICAgIFN0YXRlOiAgc2V0IGRlZmF1bHQgc3RhdGUgdG8gYWN0aXZlCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gSUNPRXZlbnQoKSB7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5BY3RpdmU7CiAgICAgICAgdG90YWxUb2tlbnNNaW50ZWQgPSAwOwogICAgICAgIHBhcmFtZXRlcnNTZXQgPSBmYWxzZTsKICAgICAgICBzdXBwbHlTZXQgPSBmYWxzZTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgVGhpcyBzZWN0aW9uIGlzIHRvIHNldCBwYXJhbWV0ZXJzIGZvciB0aGUgSUNPIGNvbnRyb2wgYnkgdGhlIG93bmVyCgogICAgUGFyYW06ICBfdG9rZW5BZGRyZXNzICAgQWRkcmVzcyBvZiB0aGUgRVNHIFRva2VuIGNvbnRyYWN0IHRoYXQgaGFzIGJlZW4gZGVwbG95ZWQKICAgICAgICAgICAgX3RhcmdldF9yYXRlICAgIE51bWJlciBvZiB0b2tlbnMgKGluIHVuaXRzLCBleGNsIHRva2VuIGRlY2ltYWxzKSBwZXIgMSBFVEggY29udHJpYnV0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cCB0byB0aGUgRVRIIGJhc2UgdGFyZ2V0CiAgICAgICAgICAgIF9jYXBfcmF0ZSAgICAgICBOdW1iZXIgb2YgdG9rZW5zIChpbiB1bml0cywgZXhjbCB0b2tlbiBkZWNpbWFscykgcGVyIDEgRVRIIGNvbnRyaWJ1dGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSB0aGUgYmFzZSB0YXJnZXQgdG8gdGhlIElDTyBjYXAKICAgICAgICAgICAgX2Jhc2VUYXJnZXQgICAgIE51bWJlciBvZiBFVEggdG8gcmVhY2ggdGhlIGJhc2UgdGFyZ2V0LiBFVEggaXMgcmVmdW5kZWQgaWYgYmFzZSB0YXJnZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCByZWFjaGVkCiAgICAgICAgICAgIF9jYXAgICAgICAgICAgICBUb3RhbCBJQ08gY2FwIGluIEVUSC4gTm8gZnVydGhlciBFVEggY2FuIGJlIGRlcG9zaXRlZCBiZXlvbmQgdGhpcwogICAgICAgICAgICBfaG9sZGluZ0FjY291bnQgQWRkcmVzcyBvZiB0aGUgYmVuZWZpY2lhcnkgYWNjb3VudCBvbiBhIHN1Y2Nlc3NmdWwgSUNPCiAgICAgICAgICAgIF9kdXJhdGlvbiAgICAgICBEdXJhdGlvbiBvZiBJQ08gaW4gZGF5cwogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLyAKICAgIGZ1bmN0aW9uIElDT19zZXRQYXJhbWV0ZXJzKGFkZHJlc3MgX3Rva2VuQWRkcmVzcywgdWludDI1NiBfdGFyZ2V0X3JhdGUsIHVpbnQyNTYgX2NhcF9yYXRlLCB1aW50MjU2IF9iYXNlVGFyZ2V0LCB1aW50MjU2IF9jYXAsIGFkZHJlc3MgX2hvbGRpbmdBY2NvdW50LCB1aW50MjU2IF9kdXJhdGlvbikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF90YXJnZXRfcmF0ZSA+IDAgJiYgX2NhcF9yYXRlID4gMCk7CiAgICAgICAgcmVxdWlyZShfYmFzZVRhcmdldCA+PSAwKTsKICAgICAgICByZXF1aXJlKF9jYXAgPiAwKTsKICAgICAgICByZXF1aXJlKF9kdXJhdGlvbiA+IDApOwogICAgICAgIHJlcXVpcmUoX2hvbGRpbmdBY2NvdW50ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfdG9rZW5BZGRyZXNzICE9IDB4MCk7CgogICAgICAgIHJhdGVfdG9UYXJnZXQgPSBfdGFyZ2V0X3JhdGU7CiAgICAgICAgcmF0ZV90b0NhcCA9IF9jYXBfcmF0ZTsKICAgICAgICB0b2tlbiA9IEVTR1Rva2VuKF90b2tlbkFkZHJlc3MpOwogICAgICAgIGJhc2VUYXJnZXRJbldlaSA9IFNhZmVNYXRoLnNhZmVNdWwoX2Jhc2VUYXJnZXQsIHdlaUV0aGVyQ29udmVyc2lvbik7CiAgICAgICAgaWNvQ2FwSW5XZWkgPSBTYWZlTWF0aC5zYWZlTXVsKF9jYXAsIHdlaUV0aGVyQ29udmVyc2lvbik7CiAgICAgICAgaG9sZGluZ0FjY291bnQgPSBfaG9sZGluZ0FjY291bnQ7CiAgICAgICAgZHVyYXRpb24gPSBTYWZlTWF0aC5zYWZlTXVsKF9kdXJhdGlvbiwgMSBkYXlzKTsKICAgICAgICBwYXJhbWV0ZXJzU2V0ID0gdHJ1ZTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgRW5zdXJlIHRoZSBJQ08gcGFyYW1ldGVycyBhcmUgc2V0IGJlZm9yZSBpbml0aWFsaXNpbmcgc3RhcnQgb2YgSUNPCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gZXZlbnRDb25maWd1cmVkKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBwYXJhbWV0ZXJzU2V0ICYmIHN1cHBseVNldDsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgU3RhcnRzIHRoZSBJQ08uIEluaXRpYWxpc2VzIHN0YXJ0dGltZSBhdCBub3cgLSBjdXJyZW50IGJsb2NrIHRpbWVzdGFtcAoKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8gCiAgICBmdW5jdGlvbiBJQ09fc3RhcnQoKSBvbmx5T3duZXIgewogICAgICAgIGFzc2VydCAoZXZlbnRDb25maWd1cmVkKCkpOwogICAgICAgIHN0YXJ0VGltZSA9IG5vdzsKICAgICAgICBlbmRUaW1lID0gU2FmZU1hdGguc2FmZUFkZChzdGFydFRpbWUsIGR1cmF0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBJQ09fc3RhcnRfZnV0dXJlKHVpbnQgX3N0YXJ0VGltZSkgb25seU93bmVyIHsKICAgICAgICBhc3NlcnQoZXZlbnRDb25maWd1cmVkKCkpOwogICAgICAgIHJlcXVpcmUoX3N0YXJ0VGltZSA+IG5vdyk7CiAgICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgICBlbmRUaW1lID0gU2FmZU1hdGguc2FmZUFkZChzdGFydFRpbWUsIGR1cmF0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBJQ09fdG9rZW5fc3VwcGx5Q2FwKCkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKHRva2VuLnBhcmFtZXRlcnNBcmVTZXQoKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgcGFyYW1ldGVycyBhcmUgc2V0IGluIHRoZSB0b2tlbgoKICAgICAgICAvLyBNZXRob2QgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMgcmVxdWlyZWQgdG8gYmFzZSB0YXJnZXQKICAgICAgICB1aW50MjU2IHRhcmdldFRva2VucyA9IFNhZmVNYXRoLnNhZmVNdWwoYmFzZVRhcmdldEluV2VpLCByYXRlX3RvVGFyZ2V0KTsgICAgICAgICAKICAgICAgICB0YXJnZXRUb2tlbnMgPSBTYWZlTWF0aC5zYWZlRGl2KHRhcmdldFRva2Vucywgd2VpRXRoZXJDb252ZXJzaW9uKTsKCiAgICAgICAgLy8gTWV0aG9kIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zIHJlcXVpcmVkIGJldHdlZW4gYmFzZSB0YXJnZXQgYW5kIGNhcAogICAgICAgIHVpbnQyNTYgY2FwVG9rZW5zID0gU2FmZU1hdGguc2FmZVN1YihpY29DYXBJbldlaSwgYmFzZVRhcmdldEluV2VpKTsKICAgICAgICBjYXBUb2tlbnMgPSBTYWZlTWF0aC5zYWZlTXVsKGNhcFRva2VucywgcmF0ZV90b0NhcCk7CiAgICAgICAgY2FwVG9rZW5zID0gU2FmZU1hdGguc2FmZURpdihjYXBUb2tlbnMsIHdlaUV0aGVyQ29udmVyc2lvbik7CgogICAgICAgIC8qCiAgICAgICAgICAgIEhhcmQgc2V0dGluZyBmb3IgMTAlIG9mIGJhc2UgdGFyZ2V0IHRva2VucyBhcyBwZXIgV2hpdGVwYXBlciBhcyBNJ21lbnQgaW5jZW50aXZlCiAgICAgICAgICAgIFRoaXMgaXMgc2V0IHRvIG9ubHkgYSBwZXJjZW50YWdlIG9mIHRoZSBiYXNlIHRhcmdldCwgbm90IG92ZXJhbGwgY2FwCiAgICAgICAgICAgIERvbid0IG5lZWQgdG8gZGl2aWRlIGJ5IHdlaUV0aGVyQ29udmVyc2lvbiBhcyBhbHJlYWR5IGluIHRva2VucwogICAgICAgICovCiAgICAgICAgdWludDI1NiBtbWVudFRva2VucyA9IFNhZmVNYXRoLnNhZmVNdWwodGFyZ2V0VG9rZW5zLCAxMCk7CiAgICAgICAgbW1lbnRUb2tlbnMgPSBTYWZlTWF0aC5zYWZlRGl2KG1tZW50VG9rZW5zLCAxMDApOwoKICAgICAgICAvLyBUb3RhbCBzdXBwbHkgZm9yIHRoZSBJQ08gd2lsbCBiZSBhdmFpbGFibGUgdG9rZW5zICsgbSdtZW50IHJlc2VydmUKICAgICAgICB1aW50MjU2IHRva2Vuc19hdmFpbGFibGUgPSBTYWZlTWF0aC5zYWZlQWRkKGNhcFRva2VucywgdGFyZ2V0VG9rZW5zKTsgCgogICAgICAgIHVpbnQyNTYgdG90YWxfVG9rZW5fU3VwcGx5ID0gU2FmZU1hdGguc2FmZUFkZCh0b2tlbnNfYXZhaWxhYmxlLCBtbWVudFRva2Vucyk7IC8vIFRva2VucyBpbiBVTklUUwoKICAgICAgICB0b2tlbi5zZXRUb2tlbkNhcEluVW5pdHModG90YWxfVG9rZW5fU3VwcGx5KTsgICAgICAgICAgLy8gU2V0IHN1cHBseSBjYXAgYW5kIG1pbnQgdG8gdGltZWxvY2sKICAgICAgICB0b2tlbi5taW50TG9ja2VkVG9rZW5zKG1tZW50VG9rZW5zKTsgICAgICAgICAgICAgICAgICAgLy8gTG9jayBpbiB0aGUgdGltZWxvY2sgdG9rZW5zCiAgICAgICAgc3VwcGx5U2V0ID0gdHJ1ZTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgRmFsbGJhY2sgcGF5YWJsZSBmdW5jdGlvbiBpZiBFVEggaXMgdHJhbnNmZXJyZWQgdG8gdGhlIElDTyBjb250cmFjdAoKICAgIHBhcmFtOiAgTm8gcGFyYW1ldGVycyAtIGNhbGxzIGRlcG9zaXQoQWRkcmVzcykgd2l0aCBtc2cuc2VuZGVyCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgZGVwb3NpdChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgRGVwb3NpdCBmdW5jdGlvbi4gVXNlciBuZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgcHVyY2hhc2UgaXMgd2l0aGluIElDTyBjYXAgcmFuZ2UKCiAgICAgICAgICAgIEZ1bmN0aW9uIGNoZWNrcyB0aGF0IHRoZSBJQ08gaXMgc3RpbGwgYWN0aXZlLCB0aGF0IHRoZSBjYXAgaGFzbid0IGJlZW4gcmVhY2hlZCBhbmQKICAgICAgICAgICAgdGhlIGFkZHJlc3MgcHJvdmlkZWQgaXMgIT0gMHgwLgoKICAgIENhbGxzOiAgZ2V0UHJlVGFyZ2V0Q29udHJpYnV0aW9uKHZhbHVlKQogICAgICAgICAgICAgICAgVGhpcyBmdW5jdGlvbiBjYWxjdWxhdGVzIGhvdyBtdWNoIChpZiBhbnkpIG9mIHRoZSB2YWx1ZSB0cmFuc2ZlcnJlZCBmYWxscyB3aXRoaW4KICAgICAgICAgICAgICAgIHRoZSBiYXNlIHRhcmdldCBnb2FsIGFuZCBxdWFsaWZpZXMgZm9yIHRoZSB0YXJnZXQgcmF0ZSBvZiB0b2tlbnMKCiAgICAgICAgICAgIFRva2VuLm1pbnQoYWRkcmVzcywgbnVtYmVyKQogICAgICAgICAgICAgICAgQ2FsbHMgdGhlIHRva2VuIG1pbnQgZnVuY3Rpb24gaW4gdGhlIEVTR1Rva2VuIGNvbnRyYWN0CgogICAgcGFyYW06IF9mb3IgICAgIEFkZHJlc3Mgb2YgdGhlIHNlbmRlciBmb3IgdG9rZW5zCiAgICAgICAgICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIF9mb3IpIHBheWFibGUgewoKICAgICAgICAvKiAKICAgICAgICAgICAgQ2hlY2tzIHRvIGVuc3VyZSBwdXJjaGFzZSBpcyB2YWxpZC4gQSBwdXJjaGFzZSB0aGF0IGJyZWFjaGVzIHRoZSBjYXAgaXMgbm90IGFsbG93ZWQKICAgICAgICAqLwogICAgICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZShtc2cudmFsdWUpKTsgICAgICAgICAgIC8vIENoZWNrcyB0aW1lLCB2YWx1ZSBwdXJjaGFzZSBpcyB3aXRoaW4gQ2FwIGFuZCBhZGRyZXNzICE9IDB4MAogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsgICAgIC8vIElFIG5vdCBpbiByZWZ1bmQgb3IgY2xvc2VkCiAgICAgICAgcmVxdWlyZSghSUNPX0VuZGVkKCkpOyAgICAgICAgICAgICAgLy8gQ2hlY2tzIHRpbWUgY2xvc2VkIG9yIGNhcCByZWFjaGVkCgogICAgICAgIC8qIAogICAgICAgICAgICBDYWxjdWxhdGVzIGlmIGFueSBvZiB0aGUgdmFsdWUgZmFsbHMgYmVmb3JlIHRoZSBiYXNlIHRhcmdldCBzbyB0aGF0IHRoZSBjb3JyZWN0CiAgICAgICAgICAgIFRva2VuIDogRVRIIHJhdGUgY2FuIGJlIGFwcGxpZWQgdG8gdGhlIHZhbHVlIHRyYW5zZmVycmVkCiAgICAgICAgKi8KICAgICAgICB1aW50MjU2IHRhcmdldENvbnRyaWJ1dGlvbiA9IGdldFByZVRhcmdldENvbnRyaWJ1dGlvbihtc2cudmFsdWUpOyAgICAgICAgICAgICAgIC8vIENvbnRyaWJ1dGlvbiBiZWZvcmUgYmFzZSB0YXJnZXQKICAgICAgICB1aW50MjU2IGNhcENvbnRyaWJ1dGlvbiA9IFNhZmVNYXRoLnNhZmVTdWIobXNnLnZhbHVlLCB0YXJnZXRDb250cmlidXRpb24pOyAgICAgIC8vIENvbnRyaWJ1dGlvbiBhYm92ZSBiYXNlIHRhcmdldAogICAgICAgIHRvdGFsV2VpQ29udHJpYnV0ZWQgPSBTYWZlTWF0aC5zYWZlQWRkKHRvdGFsV2VpQ29udHJpYnV0ZWQsIG1zZy52YWx1ZSk7ICAgICAgICAgLy8gVXBkYXRlIHRvdGFsIGNvbnRyaWJ1dGlvbgoKICAgICAgICAvKiAKICAgICAgICAgICAgQ2FsY3VsYXRlIHRvdGFsIHRva2VucyBlYXJuZWQgYnkgcmF0ZSAqIGNvbnRyaWJ1dGlvbiAoaW4gV2VpKQogICAgICAgICAgICBNdWx0aXBsaWNhdGlvbiBmaXJzdCBlbnN1cmVzIHRoYXQgZGl2aWRpbmcgYmFjayBkb2Vzbid0IHRydW5jYXRlL3JvdW5kCiAgICAgICAgKi8KICAgICAgICB1aW50MjU2IHRhcmdldFRva2Vuc1RvTWludCA9IFNhZmVNYXRoLnNhZmVNdWwodGFyZ2V0Q29udHJpYnV0aW9uLCByYXRlX3RvVGFyZ2V0KTsgICAvLyBEaXNjb3VudCByYXRlIHRva2VucwogICAgICAgIHVpbnQyNTYgY2FwVG9rZW5zVG9NaW50ID0gU2FmZU1hdGguc2FmZU11bChjYXBDb250cmlidXRpb24sIHJhdGVfdG9DYXApOyAgICAgICAgICAgIC8vIFN0YW5kYXJkIHJhdGUgdG9rZW5zCiAgICAgICAgdWludDI1NiB0b2tlbnNUb01pbnQgPSBTYWZlTWF0aC5zYWZlQWRkKHRhcmdldFRva2Vuc1RvTWludCwgY2FwVG9rZW5zVG9NaW50KTsgICAgICAgLy8gVG90YWwgdG9rZW5zCiAgICAgICAgCiAgICAgICAgdG9rZW5zVG9NaW50ID0gU2FmZU1hdGguc2FmZURpdih0b2tlbnNUb01pbnQsIHdlaUV0aGVyQ29udmVyc2lvbik7ICAgICAgICAgICAgICAgICAgLy8gR2V0IHRva2VucyBpbiB1bml0cwogICAgICAgIHRvdGFsVG9rZW5zTWludGVkID0gU2FmZU1hdGguc2FmZUFkZCh0b3RhbFRva2Vuc01pbnRlZCwgdG9rZW5zVG9NaW50KTsgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0b3RhbCB0b2tlbnMgbWludGVkCgogICAgICAgIGRlcG9zaXRlZFtfZm9yXSA9IFNhZmVNYXRoLnNhZmVBZGQoZGVwb3NpdGVkW19mb3JdLCBtc2cudmFsdWUpOyAgICAgICAgICAgICAgICAgICAgIC8vIExvZyBkZXBvc2l0IGFuZCBpbmMgb2YgcmVmdW5kcwogICAgICAgIHRva2Vuc0lzc3VlZFtfZm9yXSA9IFNhZmVNYXRoLnNhZmVBZGQodG9rZW5zSXNzdWVkW19mb3JdLCB0b2tlbnNUb01pbnQpOyAgICAgICAgICAgIC8vIExvZyB0b2tlbnMgaXNzdWVkCgogICAgICAgIHRva2VuLm1pbnQoX2ZvciwgdG9rZW5zVG9NaW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbnQgdG9rZW5zIGZyb20gVG9rZW4gTWludAogICAgICAgIGxvZ1B1cmNoYXNlKF9mb3IsIG1zZy52YWx1ZSwgdG9rZW5zVG9NaW50KTsKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgQ2FsY3VsYXRlcyBob3cgbXVjaCBvZiB0aGUgRVRIIGNvbnRyaWJ1dGVkIGZhbGxzIGJlZm9yZSB0aGUgYmFzZSB0YXJnZXQgY2FwIHRvIHRoZXJlZm9yZQogICAgICAgICAgICBjYWxjdWxhdGUgdGhlIGNvcnJlY3QgcmF0ZXMgb2YgVG9rZW4gdG8gYmUgaXNzdWVkCgogICAgcGFyYW06ICAgICAgX3ZhbHVlU2VudCAgVGhlIHZhbHVlIG9mIEVUSCB0cmFuc2ZlcnJlZCBvbiB0aGUgcGF5YWJsZSBmdW5jdGlvbgoKICAgIHJldHVybnM6ICAgIHVpbnQyNTYgICAgIFRoZSB2YWx1ZSB0aGF0IGZhbGxzIGJlZm9yZSB0aGUgYmFzZSB0YXJnZXQKICAgICAgICAgICAgCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiAgICBmdW5jdGlvbiBnZXRQcmVUYXJnZXRDb250cmlidXRpb24odWludDI1NiBfdmFsdWVTZW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgCiAgICAgICAgdWludDI1NiB0YXJnZXRDb250cmlidXRpb24gPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCByZXR1cm4KCiAgICAgICAgaWYgKHRvdGFsV2VpQ29udHJpYnV0ZWQgPCBiYXNlVGFyZ2V0SW5XZWkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgaWYgKFNhZmVNYXRoLnNhZmVBZGQodG90YWxXZWlDb250cmlidXRlZCwgX3ZhbHVlU2VudCkgPiBiYXNlVGFyZ2V0SW5XZWkpIHsgICAgICAgICAgIC8vIENvbnRyaWJ1dGlvbiBzdHJhZGRsZXMgYmFzZVRhcmdldAogICAgICAgICAgICAgICAgdGFyZ2V0Q29udHJpYnV0aW9uID0gU2FmZU1hdGguc2FmZVN1YihiYXNlVGFyZ2V0SW5XZWksIHRvdGFsV2VpQ29udHJpYnV0ZWQpOyAgICAgLy8gSUYgIzEgbWVhbnMgYWx3YXlzICt2ZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGFyZ2V0Q29udHJpYnV0aW9uID0gX3ZhbHVlU2VudDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGFyZ2V0Q29udHJpYnV0aW9uOyAgICAKICAgIH0KCiAgICAvKiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIERldjogICAgUHVibGljIHZpZXdhYmxlIGZ1bmN0aW9ucyB0byBzaG93IGtleSBwYXJhbWV0ZXJzCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKICAgIC8vIElzIHRoZSBJQ08gTGl2ZTogdGltZSBsaXZlLCBzdGF0ZSBBY3RpdmUKICAgIGZ1bmN0aW9uIElDT19MaXZlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKG5vdyA+PSBzdGFydFRpbWUgJiYgbm93IDwgZW5kVGltZSAmJiBzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgfQoKICAgIC8vIFRpbWUgaXMgdmFsaWQsIHB1cmNoYXNlIGlzbid0IHplcm8gYW5kIGNhcCB3b24ndCBiZSBicmVhY2hlZAogICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSh1aW50MjU2IF92YWx1ZSkgcGF5YWJsZSByZXR1cm5zIChib29sKSB7ICAgICAgICAgIC8vIEtub3duIHRydWUKICAgICAgICBib29sIHZhbGlkVGltZSA9IChub3cgPj0gc3RhcnRUaW1lICYmIG5vdyA8IGVuZFRpbWUpOyAgICAgICAgICAgLy8gTXVzdCBiZSB0cnVlICAgIAogICAgICAgIGJvb2wgdmFsaWRBbW91bnQgPSAoX3ZhbHVlID49IG1pbldlaUNvbnRyaWJ1dGlvbik7CiAgICAgICAgYm9vbCB3aXRoaW5DYXAgPSBTYWZlTWF0aC5zYWZlQWRkKHRvdGFsV2VpQ29udHJpYnV0ZWQsIF92YWx1ZSkgPD0gaWNvQ2FwSW5XZWk7CgogICAgICAgIHJldHVybiB2YWxpZFRpbWUgJiYgdmFsaWRBbW91bnQgJiYgd2l0aGluQ2FwOwogICAgfQoKICAgIC8vIElDTyBoYXMgZW5kZWQKICAgIGZ1bmN0aW9uIElDT19FbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYm9vbCBjYXBSZWFjaGVkID0gKHRvdGFsV2VpQ29udHJpYnV0ZWQgPj0gaWNvQ2FwSW5XZWkpOwogICAgICAgIGJvb2wgc3RhdGVWYWxpZCA9IHN0YXRlID09IFN0YXRlLkNsb3NlZDsKCiAgICAgICAgcmV0dXJuIChub3cgPj0gZW5kVGltZSkgfHwgY2FwUmVhY2hlZCB8fCBzdGF0ZVZhbGlkOwogICAgfQoKICAgIC8vIFdlaSByZW1haW5pbmcgdW50aWwgSUNPIGlzIGNhcHBlZAogICAgZnVuY3Rpb24gV2VpX1JlbWFpbmluZ19Ub19JQ09fQ2FwKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gKGljb0NhcEluV2VpIC0gdG90YWxXZWlDb250cmlidXRlZCk7CiAgICB9CgogICAgLy8gU2hvd3MgaWYgdGhlIGJhc2UgdGFyZ2V0IGNhcCBoYXMgYmVlbiByZWFjaGVkCiAgICBmdW5jdGlvbiBiYXNlVGFyZ2V0UmVhY2hlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAKICAgICAgICByZXR1cm4gdG90YWxXZWlDb250cmlidXRlZCA+PSBiYXNlVGFyZ2V0SW5XZWk7CiAgICB9CgogICAgLy8gU2hvd3MgaWYgdGhlIGNhcCBoYXMgYmVlbiByZWFjaGVkCiAgICBmdW5jdGlvbiBjYXBSZWFjaGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIAogICAgICAgIHJldHVybiB0b3RhbFdlaUNvbnRyaWJ1dGVkID09IGljb0NhcEluV2VpOwogICAgfQoKICAgIC8qICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgRGV2OiAgICBUaGlzIHNlY3Rpb24gY29udHJvbHMgY2xvc2luZyBvZiB0aGUgSUNPLiBUaGUgc3RhdGUgaXMgc2V0IHRvIGNsb3NlZCBzbyB0aGF0IHRoZSBJQ08KICAgICAgICAgICAgaXMgc2hvd24gYXMgZW5kZWQuCgogICAgICAgICAgICBCYXNlZCBvbiB0aGUgZnVuY3Rpb24gZnJvbSBvcGVuIHplcHBlbGluIGNvbnRyYWN0czogUmVmdW5kVmF1bHQgKyBSZWZ1bmRhYmxlQ3Jvd2RzYWxlCgogICAgUmVmOiAgICBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy9jcm93ZHNhbGUvUmVmdW5kYWJsZUNyb3dkc2FsZS5zb2wKICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvY3Jvd2RzYWxlL1JlZnVuZFZhdWx0LnNvbAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKICAgIGV2ZW50IENsb3NlZCgpOwoKICAgIC8vIFNldCBjbG9zZWQgSUNPIGFuZCB0cmFuc2ZlciBiYWxhbmNlIHRvIGhvbGRpbmcgYWNjb3VudAogICAgZnVuY3Rpb24gY2xvc2UoKSBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoKG5vdyA+PSBlbmRUaW1lKSB8fCAodG90YWxXZWlDb250cmlidXRlZCA+PSBpY29DYXBJbldlaSkpOwogICAgICAgIHJlcXVpcmUoc3RhdGU9PVN0YXRlLkFjdGl2ZSk7CiAgICAgICAgc3RhdGUgPSBTdGF0ZS5DbG9zZWQ7CiAgICAgICAgQ2xvc2VkKCk7CgogICAgICAgIGhvbGRpbmdBY2NvdW50LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9Cn0='.
	

]
