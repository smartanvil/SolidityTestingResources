Class {
	#name : #SRTbbca42657b1aecf77afde117ef095dc7c9d37c3a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbbca42657b1aecf77afde117ef095dc7c9d37c3a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CglmdW5jdGlvbiBtdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQl1aW50IGMgPSBhICogYjsKCQlhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwoJCXJldHVybiBjOwoJfQoJZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiIDw9IGEpOwoJCXJldHVybiBhIC0gYjsKCX0KCWZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewoJCWFzc2VydChiID4gMCk7CgkJdWludCBjID0gYSAvIGI7CgkJYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7CgkJcmV0dXJuIGM7Cgl9CglmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQlhc3NlcnQoYiA8PSBhKTsKCQlyZXR1cm4gYSAtIGI7Cgl9CglmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKCQl1aW50IGMgPSBhICsgYjsKCQlhc3NlcnQoYyA+PSBhKTsKCQlyZXR1cm4gYzsKCX0KCWZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CgkJcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwoJfQoJZnVuY3Rpb24gbWluNjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKCQlyZXR1cm4gYSA8IGIgPyBhIDogYjsKCX0KCWZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhID49IGIgPyBhIDogYjsKCX0KCWZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCXJldHVybiBhIDwgYiA/IGEgOiBiOwoJfQoJZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CgkJaWYgKCFhc3NlcnRpb24pIHsKCQkJdGhyb3c7CgkJfQoJfQp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHRocm93OwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKCWJvb2wgcHVibGljIHN0b3BwZWQ7Cgltb2RpZmllciBzdG9wSW5FbWVyZ2VuY3kgewoJCWlmIChzdG9wcGVkKSB7CgkJCXRocm93OwoJCX0KCQlfOwoJfQoKCW1vZGlmaWVyIG9ubHlJbkVtZXJnZW5jeSB7CgkJaWYgKCFzdG9wcGVkKSB7CgkJICB0aHJvdzsKCQl9CglfOwoJfQoJLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKCWZ1bmN0aW9uIGVtZXJnZW5jeVN0b3AoKSBleHRlcm5hbCBvbmx5T3duZXIgewoJCXN0b3BwZWQgPSB0cnVlOwoJfQoJLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbmQgb2YgZW1lcmdlbmN5LCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQoJZnVuY3Rpb24gcmVsZWFzZSgpIGV4dGVybmFsIG9ubHlPd25lciBvbmx5SW5FbWVyZ2VuY3kgewoJCXN0b3BwZWQgPSBmYWxzZTsKCX0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKCXVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoJZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCWZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpOwoJZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7CglmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKTsKCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKTsKCWV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdmFsdWUpOwp9CgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgCgl1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCgltYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgoJLyoKCSogRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2sgIAoJKi8KCW1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKCSAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CgkgICAgIHRocm93OwoJICAgfQoJIF87Cgl9CglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHsKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCX0KCWZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CgkJcmV0dXJuIGJhbGFuY2VzW19vd25lcl07Cgl9Cn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCW1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKCQl2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCWJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKCQlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHsKCQlpZiAoKF92YWx1ZSAhPSAwKSAmJiAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHRocm93OwoJCWFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwoJCUFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoJfQoJZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewoJCXJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwoJfQp9CgoKLyoqCiAqICBSZXNpbGl1bSB0b2tlbiBjb250cmFjdC4gSW1wbGVtZW50cwogKi8KY29udHJhY3QgUmVzaWxpdW0gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlJlc2lsaXVtIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJSRVMiOwogIHVpbnQgcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gNjsKCgogIC8vIENvbnN0cnVjdG9yCiAgZnVuY3Rpb24gUmVzaWxpdW0oKSB7CiAgICAgIHRvdGFsU3VwcGx5ID0gMTAwMDAwMDAwMDAwMDAwMDsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b3RhbFN1cHBseTsgLy8gU2VuZCBhbGwgdG9rZW5zIHRvIG93bmVyCiAgfQoKICAvKioKICAgKiAgQnVybiBhd2F5IHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucwogICAqLwogIGZ1bmN0aW9uIGJ1cm4odWludCBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCgovKioKICogQHRpdGxlIFB1bGxQYXltZW50CiAqIEBkZXYgQmFzZSBjb250cmFjdCBzdXBwb3J0aW5nIGFzeW5jIHNlbmQgZm9yIHB1bGwgcGF5bWVudHMuIEluaGVyaXQgZnJvbSB0aGlzCiAqIGNvbnRyYWN0IGFuZCB1c2UgYXN5bmNTZW5kIGluc3RlYWQgb2Ygc2VuZC4KICovCmNvbnRyYWN0IFB1bGxQYXltZW50IHsKCXVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKCW1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgcGF5bWVudHM7CglldmVudCBMb2dSZWZ1bmRFVEgoYWRkcmVzcyB0bywgdWludCB2YWx1ZSk7CgkvKioKCSogIFN0b3JlIHNlbnQgYW1vdW50IGFzIGNyZWRpdCB0byBiZSBwdWxsZWQsIGNhbGxlZCBieSBwYXllciAKCSoqLwoJZnVuY3Rpb24gYXN5bmNTZW5kKGFkZHJlc3MgZGVzdCwgdWludCBhbW91bnQpIGludGVybmFsIHsKCQlwYXltZW50c1tkZXN0XSA9IHBheW1lbnRzW2Rlc3RdLmFkZChhbW91bnQpOwoJfQoJLy8gd2l0aGRyYXcgYWNjdW11bGF0ZWQgYmFsYW5jZSwgY2FsbGVkIGJ5IHBheWVlCglmdW5jdGlvbiB3aXRoZHJhd1BheW1lbnRzKCkgewoJCWFkZHJlc3MgcGF5ZWUgPSBtc2cuc2VuZGVyOwoJCXVpbnQgcGF5bWVudCA9IHBheW1lbnRzW3BheWVlXTsKCgkJaWYgKHBheW1lbnQgPT0gMCkgewoJCQl0aHJvdzsKCQl9CgkJaWYgKHRoaXMuYmFsYW5jZSA8IHBheW1lbnQpIHsKCQkgICAgdGhyb3c7CgkJfQoJCXBheW1lbnRzW3BheWVlXSA9IDA7CgkJaWYgKCFwYXllZS5zZW5kKHBheW1lbnQpKSB7CgkJICAgIHRocm93OwoJCX0KCQlMb2dSZWZ1bmRFVEgocGF5ZWUscGF5bWVudCk7Cgl9Cn0KCgovKgogIENyb3dkc2FsZSBTbWFydCBDb250cmFjdCBmb3IgdGhlIHNraW5jb2luLm9yZyBwcm9qZWN0CiAgVGhpcyBzbWFydCBjb250cmFjdCBjb2xsZWN0cyBFVEgsIGFuZCBpbiByZXR1cm4gZW1pdHMgUmVzaWxpdW0gdG9rZW5zIHRvIHRoZSBiYWNrZXJzCiovCmNvbnRyYWN0IENyb3dkc2FsZSBpcyBQYXVzYWJsZSwgUHVsbFBheW1lbnQgewogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgCXN0cnVjdCBCYWNrZXIgewoJCXVpbnQgd2VpUmVjZWl2ZWQ7IC8vIEFtb3VudCBvZiBFdGhlciBnaXZlbgoJCXVpbnQgY29pblNlbnQ7Cgl9CgoJLyoKCSogQ29uc3RhbnRzCgkqLwoJLyogTWluaW11bSBudW1iZXIgb2YgUmVzaWxpdW0gdG8gc2VsbCAqLwoJdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX0NBUCA9IDEwMDAwMDAwMDAwOyAvLyAxMC4wMDAgUmVzaWxpdW1zCgkvKiBNYXhpbXVtIG51bWJlciBvZiBSZXNpbGl1bSB0byBzZWxsICovCgl1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfQ0FQID0gMTAwMDAwMDAwMDAwOyAvLyAxMDAwMDAgUmVzaWxpdW1zCgkvKiBNaW5pbXVtIGFtb3VudCB0byBpbnZlc3QgKi8KCXVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9JTlZFU1RfRVRIRVIgPSAxMDAgZmlubmV5OwoJLyogQ3Jvd2RzYWxlIHBlcmlvZCAqLwoJdWludCBwcml2YXRlIGNvbnN0YW50IENST1dEU0FMRV9QRVJJT0QgPSAzMCBkYXlzOwoJLyogTnVtYmVyIG9mIFJlc2lsaXVtcyBwZXIgRXRoZXIgKi8KCXVpbnQgcHVibGljIGNvbnN0YW50IENPSU5fUEVSX0VUSEVSID0gMTAwMDAwMDAwMDsgLy8gMSwwMDAgUmVzaWxpdW1zCgoKCS8qCgkqIFZhcmlhYmxlcwoJKi8KCS8qIFJlc2lsaXVtIGNvbnRyYWN0IHJlZmVyZW5jZSAqLwoJUmVzaWxpdW0gcHVibGljIGNvaW47CiAgICAvKiBNdWx0aXNpZyBjb250cmFjdCB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgRXRoZXIgKi8KCWFkZHJlc3MgcHVibGljIG11bHRpc2lnRXRoZXI7CgkvKiBOdW1iZXIgb2YgRXRoZXIgcmVjZWl2ZWQgKi8KCXVpbnQgcHVibGljIGV0aGVyUmVjZWl2ZWQ7CgkvKiBOdW1iZXIgb2YgUmVzaWxpdW1zIHNlbnQgdG8gRXRoZXIgY29udHJpYnV0b3JzICovCgl1aW50IHB1YmxpYyBjb2luU2VudFRvRXRoZXI7CgkvKiBDcm93ZHNhbGUgc3RhcnQgdGltZSAqLwoJdWludCBwdWJsaWMgc3RhcnRUaW1lOwoJLyogQ3Jvd2RzYWxlIGVuZCB0aW1lICovCgl1aW50IHB1YmxpYyBlbmRUaW1lOwogCS8qIElzIGNyb3dkc2FsZSBzdGlsbCBvbiBnb2luZyAqLwoJYm9vbCBwdWJsaWMgY3Jvd2RzYWxlQ2xvc2VkOwoKCS8qIEJhY2tlcnMgRXRoZXIgaW5kZXhlZCBieSB0aGVpciBFdGhlcmV1bSBhZGRyZXNzICovCgltYXBwaW5nKGFkZHJlc3MgPT4gQmFja2VyKSBwdWJsaWMgYmFja2VyczsKCgoJLyoKCSogTW9kaWZpZXJzCgkqLwoJbW9kaWZpZXIgbWluQ2FwTm90UmVhY2hlZCgpIHsKCQlpZiAoKG5vdyA8IGVuZFRpbWUpIHx8IGNvaW5TZW50VG9FdGhlciA+PSBNSU5fQ0FQICkgdGhyb3c7CgkJXzsKCX0KCgltb2RpZmllciByZXNwZWN0VGltZUZyYW1lKCkgewoJCWlmICgobm93IDwgc3RhcnRUaW1lKSB8fCAobm93ID4gZW5kVGltZSApKSB0aHJvdzsKCQlfOwoJfQoKCS8qCgkgKiBFdmVudAoJKi8KCWV2ZW50IExvZ1JlY2VpdmVkRVRIKGFkZHJlc3MgYWRkciwgdWludCB2YWx1ZSk7CglldmVudCBMb2dDb2luc0VtaXRlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludCBhbW91bnQpOwoKCS8qCgkgKiBDb25zdHJ1Y3RvcgoJKi8KCWZ1bmN0aW9uIENyb3dkc2FsZShhZGRyZXNzIF90b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3RvKSB7CgkJY29pbiA9IFJlc2lsaXVtKF90b2tlbkFkZHJlc3MpOwoJCW11bHRpc2lnRXRoZXIgPSBfdG87Cgl9CgoJLyogCgkgKiBUaGUgZmFsbGJhY2sgZnVuY3Rpb24gY29ycmVzcG9uZHMgdG8gYSBkb25hdGlvbiBpbiBFVEgKCSAqLwoJZnVuY3Rpb24oKSBzdG9wSW5FbWVyZ2VuY3kgcmVzcGVjdFRpbWVGcmFtZSBwYXlhYmxlIHsKCQlyZWNlaXZlRVRIKG1zZy5zZW5kZXIpOwoJfQoKCS8qIAoJICogVG8gY2FsbCB0byBzdGFydCB0aGUgY3Jvd2RzYWxlCgkgKi8KCWZ1bmN0aW9uIHN0YXJ0KCkgb25seU93bmVyIHsKCQlpZiAoc3RhcnRUaW1lICE9IDApIHRocm93OyAvLyBDcm93ZHNhbGUgd2FzIGFscmVhZHkgc3RhcnRlZAoKCQlzdGFydFRpbWUgPSBub3cgOyAgICAgICAgICAgIAoJCWVuZFRpbWUgPSAgbm93ICsgQ1JPV0RTQUxFX1BFUklPRDsgICAgCgl9CgoJLyoKCSAqCVJlY2VpdmVzIGEgZG9uYXRpb24gaW4gRXRoZXIKCSovCglmdW5jdGlvbiByZWNlaXZlRVRIKGFkZHJlc3MgYmVuZWZpY2lhcnkpIGludGVybmFsIHsKCQlpZiAobXNnLnZhbHVlIDwgTUlOX0lOVkVTVF9FVEhFUikgdGhyb3c7IC8vIERvbid0IGFjY2VwdCBmdW5kaW5nIHVuZGVyIGEgcHJlZGVmaW5lZCB0aHJlc2hvbGQKCQkKCQl1aW50IGNvaW5Ub1NlbmQgPSBib251cyhtc2cudmFsdWUubXVsKENPSU5fUEVSX0VUSEVSKS5kaXYoMSBldGhlcikpOyAvLyBDb21wdXRlIHRoZSBudW1iZXIgb2YgUmVzaWxpdW0gdG8gc2VuZAoJCWlmIChjb2luVG9TZW5kLmFkZChjb2luU2VudFRvRXRoZXIpID4gTUFYX0NBUCkgdGhyb3c7CQoKCQlCYWNrZXIgYmFja2VyID0gYmFja2Vyc1tiZW5lZmljaWFyeV07CgkJY29pbi50cmFuc2ZlcihiZW5lZmljaWFyeSwgY29pblRvU2VuZCk7IC8vIFRyYW5zZmVyIFJlc2lsaXVtcyByaWdodCBub3cgCgoJCWJhY2tlci5jb2luU2VudCA9IGJhY2tlci5jb2luU2VudC5hZGQoY29pblRvU2VuZCk7CgkJYmFja2VyLndlaVJlY2VpdmVkID0gYmFja2VyLndlaVJlY2VpdmVkLmFkZChtc2cudmFsdWUpOyAvLyBVcGRhdGUgdGhlIHRvdGFsIHdlaSBjb2xsZWN0ZWQgZHVyaW5nIHRoZSBjcm93ZGZ1bmRpbmcgZm9yIHRoaXMgYmFja2VyICAgIAoKCQlldGhlclJlY2VpdmVkID0gZXRoZXJSZWNlaXZlZC5hZGQobXNnLnZhbHVlKTsgLy8gVXBkYXRlIHRoZSB0b3RhbCB3ZWkgY29sbGVjdGVkIGR1cmluZyB0aGUgY3Jvd2RmdW5kaW5nCgkJY29pblNlbnRUb0V0aGVyID0gY29pblNlbnRUb0V0aGVyLmFkZChjb2luVG9TZW5kKTsKCgkJLy8gU2VuZCBldmVudHMKCQlMb2dDb2luc0VtaXRlZChtc2cuc2VuZGVyICxjb2luVG9TZW5kKTsKCQlMb2dSZWNlaXZlZEVUSChiZW5lZmljaWFyeSwgZXRoZXJSZWNlaXZlZCk7IAoJfQoJCgoJLyoKCSAqQ29tcHV0ZSB0aGUgUmVzaWxpdW0gYm9udXMgYWNjb3JkaW5nIHRvIHRoZSBpbnZlc3RtZW50IHBlcmlvZAoJICovCglmdW5jdGlvbiBib251cyh1aW50IGFtb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludCkgewoJCXJldHVybiBhbW91bnQuYWRkKGFtb3VudC5kaXYoMikpOyAvLyBCb251cyBwcmUtaWNvIDUwJQoJfQoKCS8qCQoJICogRmluYWxpemUgdGhlIGNyb3dkc2FsZSwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGUgcmVmdW5kIHBlcmlvZAoJKi8KCWZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7CgoJCWlmIChub3cgPCBlbmRUaW1lKSB7IC8vIENhbm5vdCBmaW5hbGlzZSBiZWZvcmUgQ1JPV0RTQUxFX1BFUklPRCBvciBiZWZvcmUgc2VsbGluZyBhbGwgY29pbnMKCQkJaWYgKGNvaW5TZW50VG9FdGhlciA9PSBNQVhfQ0FQKSB7CgkJCX0gZWxzZSB7CgkJCQl0aHJvdzsKCQkJfQoJCX0KCgkJaWYgKGNvaW5TZW50VG9FdGhlciA8IE1JTl9DQVAgJiYgbm93IDwgZW5kVGltZSArIDE1IGRheXMpIHRocm93OyAvLyBJZiBNSU5fQ0FQIGlzIG5vdCByZWFjaGVkIGRvbm9ycyBoYXZlIDE1ZGF5cyB0byBnZXQgcmVmdW5kIGJlZm9yZSB3ZSBjYW4gZmluYWxpc2UKCgkJaWYgKCFtdWx0aXNpZ0V0aGVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7IC8vIE1vdmUgdGhlIHJlbWFpbmluZyBFdGhlciB0byB0aGUgbXVsdGlzaWcgYWRkcmVzcwoJCQoJCXVpbnQgcmVtYWlucyA9IGNvaW4uYmFsYW5jZU9mKHRoaXMpOwoJCWlmIChyZW1haW5zID4gMCkgeyAvLyBCdXJuIHRoZSByZXN0IG9mIFJlc2lsaXVtcwoJCQlpZiAoIWNvaW4uYnVybihyZW1haW5zKSkgdGhyb3cgOwoJCX0KCQljcm93ZHNhbGVDbG9zZWQgPSB0cnVlOwoJfQoKCS8qCQoJKiBGYWlsc2FmZSBkcmFpbgoJKi8KCWZ1bmN0aW9uIGRyYWluKCkgb25seU93bmVyIHsKCQlpZiAoIW93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7Cgl9CgoJLyoqCgkgKiBBbGxvdyB0byBjaGFuZ2UgdGhlIHRlYW0gbXVsdGlzaWcgYWRkcmVzcyBpbiB0aGUgY2FzZSBvZiBlbWVyZ2VuY3kuCgkgKi8KCWZ1bmN0aW9uIHNldE11bHRpc2lnKGFkZHJlc3MgYWRkcikgb25seU93bmVyIHB1YmxpYyB7CgkJaWYgKGFkZHIgPT0gYWRkcmVzcygwKSkgdGhyb3c7CgkJbXVsdGlzaWdFdGhlciA9IGFkZHI7Cgl9CgoJLyoqCgkgKiBNYW51YWxseSBiYWNrIFJlc2lsaXVtIG93bmVyIGFkZHJlc3MuCgkgKi8KCWZ1bmN0aW9uIGJhY2tSZXNpbGl1bU93bmVyKCkgb25seU93bmVyIHB1YmxpYyB7CgkJY29pbi50cmFuc2Zlck93bmVyc2hpcChvd25lcik7Cgl9CgoJLyoqCgkgKiBUcmFuc2ZlciByZW1haW5zIHRvIG93bmVyIGluIGNhc2UgaWYgaW1wb3NzaWJsZSB0byBkbyBtaW4gaW52ZXN0CgkgKi8KCWZ1bmN0aW9uIGdldFJlbWFpbkNvaW5zKCkgb25seU93bmVyIHB1YmxpYyB7CgkJdmFyIHJlbWFpbnMgPSBNQVhfQ0FQIC0gY29pblNlbnRUb0V0aGVyOwoJCXVpbnQgbWluQ29pbnNUb1NlbGwgPSBib251cyhNSU5fSU5WRVNUX0VUSEVSLm11bChDT0lOX1BFUl9FVEhFUikgLyAoMSBldGhlcikpOwoKCQlpZihyZW1haW5zID4gbWluQ29pbnNUb1NlbGwpIHRocm93OwoKCQlCYWNrZXIgYmFja2VyID0gYmFja2Vyc1tvd25lcl07CgkJY29pbi50cmFuc2Zlcihvd25lciwgcmVtYWlucyk7IC8vIFRyYW5zZmVyIFJlc2lsaXVtcyByaWdodCBub3cgCgoJCWJhY2tlci5jb2luU2VudCA9IGJhY2tlci5jb2luU2VudC5hZGQocmVtYWlucyk7CgoJCWNvaW5TZW50VG9FdGhlciA9IGNvaW5TZW50VG9FdGhlci5hZGQocmVtYWlucyk7CgoJCS8vIFNlbmQgZXZlbnRzCgkJTG9nQ29pbnNFbWl0ZWQodGhpcyAscmVtYWlucyk7CgkJTG9nUmVjZWl2ZWRFVEgob3duZXIsIGV0aGVyUmVjZWl2ZWQpOyAKCX0KCgoJLyogCiAgCSAqIFdoZW4gTUlOX0NBUCBpcyBub3QgcmVhY2g6CiAgCSAqIDEpIGJhY2tlciBjYWxsIHRoZSAiYXBwcm92ZSIgZnVuY3Rpb24gb2YgdGhlIFJlc2lsaXVtIHRva2VuIGNvbnRyYWN0IHdpdGggdGhlIGFtb3VudCBvZiBhbGwgUmVzaWxpdW1zIHRoZXkgZ290IGluIG9yZGVyIHRvIGJlIHJlZnVuZAogIAkgKiAyKSBiYWNrZXIgY2FsbCB0aGUgInJlZnVuZCIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB3aXRoIHRoZSBzYW1lIGFtb3VudCBvZiBSZXNpbGl1bXMKICAgCSAqIDMpIGJhY2tlciBjYWxsIHRoZSAid2l0aGRyYXdQYXltZW50cyIgZnVuY3Rpb24gb2YgdGhlIENyb3dkc2FsZSBjb250cmFjdCB0byBnZXQgYSByZWZ1bmQgaW4gRVRICiAgIAkgKi8KCWZ1bmN0aW9uIHJlZnVuZCh1aW50IF92YWx1ZSkgbWluQ2FwTm90UmVhY2hlZCBwdWJsaWMgewoJCQoJCWlmIChfdmFsdWUgIT0gYmFja2Vyc1ttc2cuc2VuZGVyXS5jb2luU2VudCkgdGhyb3c7IC8vIGNvbXBhcmUgdmFsdWUgZnJvbSBiYWNrZXIgYmFsYW5jZQoKCQljb2luLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfdmFsdWUpOyAvLyBnZXQgdGhlIHRva2VuIGJhY2sgdG8gdGhlIGNyb3dkc2FsZSBjb250cmFjdAoKCQlpZiAoIWNvaW4uYnVybihfdmFsdWUpKSB0aHJvdyA7IC8vIHRva2VuIHNlbnQgZm9yIHJlZnVuZCBhcmUgYnVybnQKCgkJdWludCBFVEhUb1NlbmQgPSBiYWNrZXJzW21zZy5zZW5kZXJdLndlaVJlY2VpdmVkOwoJCWJhY2tlcnNbbXNnLnNlbmRlcl0ud2VpUmVjZWl2ZWQ9MDsKCgkJaWYgKEVUSFRvU2VuZCA+IDApIHsKCQkJYXN5bmNTZW5kKG1zZy5zZW5kZXIsIEVUSFRvU2VuZCk7IC8vIHB1bGwgcGF5bWVudCB0byBnZXQgcmVmdW5kIGluIEVUSAoJCX0KCX0KCn0='.
	

]
