Class {
	#name : #SRTb28a3dd24036151c819c6d401f7a222d9aa3671b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb28a3dd24036151c819c6d401f7a222d9aa3671b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvb3duZXJzaGlwL093bmFibGUuc29sCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL2xpZmVjeWNsZS9QYXVzYWJsZS5zb2wKCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL21hdGgvU2FmZU1hdGguc29sCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9IYXNOb0V0aGVyLnNvbAoKLyoqCiAqIEB0aXRsZSBDb250cmFjdHMgdGhhdCBzaG91bGQgbm90IG93biBFdGhlcgogKiBAYXV0aG9yIFJlbWNvIEJsb2VtZW4gPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iMmI1OTRlNDY0ODQ0NmIxOSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj7PgC5jb20+CiAqIEBkZXYgVGhpcyB0cmllcyB0byBibG9jayBpbmNvbWluZyBldGhlciB0byBwcmV2ZW50IGFjY2lkZW50YWwgbG9zcyBvZiBFdGhlci4gU2hvdWxkIEV0aGVyIGVuZCB1cAogKiBpbiB0aGUgY29udHJhY3QsIGl0IHdpbGwgYWxsb3cgdGhlIG93bmVyIHRvIHJlY2xhaW0gdGhpcyBldGhlci4KICogQG5vdGljZSBFdGhlciBjYW4gc3RpbGwgYmUgc2VuZCB0byB0aGlzIGNvbnRyYWN0IGJ5OgogKiBjYWxsaW5nIGZ1bmN0aW9ucyBsYWJlbGVkIGBwYXlhYmxlYAogKiBgc2VsZmRlc3RydWN0KGNvbnRyYWN0X2FkZHJlc3MpYAogKiBtaW5pbmcgZGlyZWN0bHkgdG8gdGhlIGNvbnRyYWN0IGFkZHJlc3MKKi8KY29udHJhY3QgSGFzTm9FdGhlciBpcyBPd25hYmxlIHsKCiAgLyoqCiAgKiBAZGV2IENvbnN0cnVjdG9yIHRoYXQgcmVqZWN0cyBpbmNvbWluZyBFdGhlcgogICogQGRldiBUaGUgYHBheWFibGVgIGZsYWcgaXMgYWRkZWQgc28gd2UgY2FuIGFjY2VzcyBgbXNnLnZhbHVlYCB3aXRob3V0IGNvbXBpbGVyIHdhcm5pbmcuIElmIHdlCiAgKiBsZWF2ZSBvdXQgcGF5YWJsZSwgdGhlbiBTb2xpZGl0eSB3aWxsIGFsbG93IGluaGVyaXRpbmcgY29udHJhY3RzIHRvIGltcGxlbWVudCBhIHBheWFibGUKICAqIGNvbnN0cnVjdG9yLiBCeSBkb2luZyBpdCB0aGlzIHdheSB3ZSBwcmV2ZW50IGEgcGF5YWJsZSBjb25zdHJ1Y3RvciBmcm9tIHdvcmtpbmcuIEFsdGVybmF0aXZlbHkKICAqIHdlIGNvdWxkIHVzZSBhc3NlbWJseSB0byBhY2Nlc3MgbXNnLnZhbHVlLgogICovCiAgZnVuY3Rpb24gSGFzTm9FdGhlcigpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IDApOwogIH0KCiAgLyoqCiAgICogQGRldiBEaXNhbGxvd3MgZGlyZWN0IHNlbmQgYnkgc2V0dGluZ3MgYSBkZWZhdWx0IGZ1bmN0aW9uIHdpdGhvdXQgdGhlIGBwYXlhYmxlYCBmbGFnLgogICAqLwogIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgewogIH0KCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciBhbGwgRXRoZXIgaGVsZCBieSB0aGUgY29udHJhY3QgdG8gdGhlIG93bmVyLgogICAqLwogIGZ1bmN0aW9uIHJlY2xhaW1FdGhlcigpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICBhc3NlcnQob3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9BeGllUHJlc2FsZS5zb2wKCmNvbnRyYWN0IEF4aWVQcmVzYWxlIGlzIEhhc05vRXRoZXIsIFBhdXNhYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gTm8gQXhpZXMgY2FuIGJlIGFkb3B0ZWQgYWZ0ZXIgdGhpcyBlbmQgZGF0ZTogRnJpZGF5LCBNYXJjaCAxNiwgMjAxOCAxMTo1OTo1OSBQTSBHTVQuCiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgUFJFU0FMRV9FTkRfVElNRVNUQU1QID0gMTUyMTI0NDc5OTsKCiAgdWludDggY29uc3RhbnQgcHVibGljIENMQVNTX0JFQVNUID0gMDsKICB1aW50OCBjb25zdGFudCBwdWJsaWMgQ0xBU1NfQVFVQVRJQyA9IDI7CiAgdWludDggY29uc3RhbnQgcHVibGljIENMQVNTX1BMQU5UID0gNDsKCiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgSU5JVElBTF9QUklDRV9JTkNSRU1FTlQgPSAxNjAwIHN6YWJvOyAvLyAwLjAwMTYgRXRoZXIKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBJTklUSUFMX1BSSUNFID0gSU5JVElBTF9QUklDRV9JTkNSRU1FTlQ7CiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgUkVGX0NSRURJVFNfUEVSX0FYSUUgPSA1OwoKICBtYXBwaW5nICh1aW50OCA9PiB1aW50MjU2KSBwdWJsaWMgY3VycmVudFByaWNlczsKICBtYXBwaW5nICh1aW50OCA9PiB1aW50MjU2KSBwdWJsaWMgcHJpY2VJbmNyZW1lbnRzOwoKICBtYXBwaW5nICh1aW50OCA9PiB1aW50MjU2KSBwdWJsaWMgdG90YWxBeGllc0Fkb3B0ZWQ7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nICh1aW50OCA9PiB1aW50MjU2KSkgcHVibGljIGF4aWVzQWRvcHRlZDsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgcmVmZXJyYWxDcmVkaXRzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGF4aWVzUmV3YXJkZWQ7CiAgdWludDI1NiBwdWJsaWMgdG90YWxBeGllc1Jld2FyZGVkOwoKICBldmVudCBBeGllc0Fkb3B0ZWQoCiAgICBhZGRyZXNzIGluZGV4ZWQgYWRvcHRlciwKICAgIHVpbnQ4IGluZGV4ZWQgY2xhenosCiAgICB1aW50MjU2IHF1YW50aXR5LAogICAgYWRkcmVzcyBpbmRleGVkIHJlZmVycmVyCiAgKTsKCiAgZXZlbnQgQXhpZXNSZXdhcmRlZChhZGRyZXNzIGluZGV4ZWQgcmVjZWl2ZXIsIHVpbnQyNTYgcXVhbnRpdHkpOwoKICBldmVudCBBZG9wdGVkQXhpZXNSZWRlZW1lZChhZGRyZXNzIGluZGV4ZWQgcmVjZWl2ZXIsIHVpbnQ4IGluZGV4ZWQgY2xhenosIHVpbnQyNTYgcXVhbnRpdHkpOwogIGV2ZW50IFJld2FyZGVkQXhpZXNSZWRlZW1lZChhZGRyZXNzIGluZGV4ZWQgcmVjZWl2ZXIsIHVpbnQyNTYgcXVhbnRpdHkpOwoKICBmdW5jdGlvbiBBeGllUHJlc2FsZSgpIHB1YmxpYyB7CiAgICBwcmljZUluY3JlbWVudHNbQ0xBU1NfQkVBU1RdID0gcHJpY2VJbmNyZW1lbnRzW0NMQVNTX0FRVUFUSUNdID0gLy8KICAgICAgcHJpY2VJbmNyZW1lbnRzW0NMQVNTX1BMQU5UXSA9IElOSVRJQUxfUFJJQ0VfSU5DUkVNRU5UOwoKICAgIGN1cnJlbnRQcmljZXNbQ0xBU1NfQkVBU1RdID0gY3VycmVudFByaWNlc1tDTEFTU19BUVVBVElDXSA9IC8vCiAgICAgIGN1cnJlbnRQcmljZXNbQ0xBU1NfUExBTlRdID0gSU5JVElBTF9QUklDRTsKICB9CgogIGZ1bmN0aW9uIGF4aWVzUHJpY2UoCiAgICB1aW50MjU2IGJlYXN0UXVhbnRpdHksCiAgICB1aW50MjU2IGFxdWF0aWNRdWFudGl0eSwKICAgIHVpbnQyNTYgcGxhbnRRdWFudGl0eQogICkKICAgIHB1YmxpYwogICAgdmlldwogICAgcmV0dXJucyAodWludDI1NiB0b3RhbFByaWNlKQogIHsKICAgIHVpbnQyNTYgcHJpY2U7CgogICAgKHByaWNlLCwpID0gX2F4aWVzUHJpY2UoQ0xBU1NfQkVBU1QsIGJlYXN0UXVhbnRpdHkpOwogICAgdG90YWxQcmljZSA9IHRvdGFsUHJpY2UuYWRkKHByaWNlKTsKCiAgICAocHJpY2UsLCkgPSBfYXhpZXNQcmljZShDTEFTU19BUVVBVElDLCBhcXVhdGljUXVhbnRpdHkpOwogICAgdG90YWxQcmljZSA9IHRvdGFsUHJpY2UuYWRkKHByaWNlKTsKCiAgICAocHJpY2UsLCkgPSBfYXhpZXNQcmljZShDTEFTU19QTEFOVCwgcGxhbnRRdWFudGl0eSk7CiAgICB0b3RhbFByaWNlID0gdG90YWxQcmljZS5hZGQocHJpY2UpOwogIH0KCiAgZnVuY3Rpb24gYWRvcHRBeGllcygKICAgIHVpbnQyNTYgYmVhc3RRdWFudGl0eSwKICAgIHVpbnQyNTYgYXF1YXRpY1F1YW50aXR5LAogICAgdWludDI1NiBwbGFudFF1YW50aXR5LAogICAgYWRkcmVzcyByZWZlcnJlcgogICkKICAgIHB1YmxpYwogICAgcGF5YWJsZQogICAgd2hlbk5vdFBhdXNlZAogIHsKICAgIHJlcXVpcmUobm93IDw9IFBSRVNBTEVfRU5EX1RJTUVTVEFNUCk7CgogICAgcmVxdWlyZShiZWFzdFF1YW50aXR5IDw9IDMpOwogICAgcmVxdWlyZShhcXVhdGljUXVhbnRpdHkgPD0gMyk7CiAgICByZXF1aXJlKHBsYW50UXVhbnRpdHkgPD0gMyk7CgogICAgYWRkcmVzcyBhZG9wdGVyID0gbXNnLnNlbmRlcjsKICAgIGFkZHJlc3MgYWN0dWFsUmVmZXJyZXIgPSAweDA7CgogICAgLy8gQW4gYWRvcHRlciBjYW5ub3QgYmUgaGlzL2hlciBvd24gcmVmZXJyZXIuCiAgICBpZiAocmVmZXJyZXIgIT0gYWRvcHRlcikgewogICAgICBhY3R1YWxSZWZlcnJlciA9IHJlZmVycmVyOwogICAgfQoKICAgIHVpbnQyNTYgdmFsdWUgPSBtc2cudmFsdWU7CiAgICB1aW50MjU2IHByaWNlOwoKICAgIGlmIChiZWFzdFF1YW50aXR5ID4gMCkgewogICAgICBwcmljZSA9IF9hZG9wdEF4aWVzKAogICAgICAgIGFkb3B0ZXIsCiAgICAgICAgQ0xBU1NfQkVBU1QsCiAgICAgICAgYmVhc3RRdWFudGl0eSwKICAgICAgICBhY3R1YWxSZWZlcnJlcgogICAgICApOwoKICAgICAgcmVxdWlyZSh2YWx1ZSA+PSBwcmljZSk7CiAgICAgIHZhbHVlIC09IHByaWNlOwogICAgfQoKICAgIGlmIChhcXVhdGljUXVhbnRpdHkgPiAwKSB7CiAgICAgIHByaWNlID0gX2Fkb3B0QXhpZXMoCiAgICAgICAgYWRvcHRlciwKICAgICAgICBDTEFTU19BUVVBVElDLAogICAgICAgIGFxdWF0aWNRdWFudGl0eSwKICAgICAgICBhY3R1YWxSZWZlcnJlcgogICAgICApOwoKICAgICAgcmVxdWlyZSh2YWx1ZSA+PSBwcmljZSk7CiAgICAgIHZhbHVlIC09IHByaWNlOwogICAgfQoKICAgIGlmIChwbGFudFF1YW50aXR5ID4gMCkgewogICAgICBwcmljZSA9IF9hZG9wdEF4aWVzKAogICAgICAgIGFkb3B0ZXIsCiAgICAgICAgQ0xBU1NfUExBTlQsCiAgICAgICAgcGxhbnRRdWFudGl0eSwKICAgICAgICBhY3R1YWxSZWZlcnJlcgogICAgICApOwoKICAgICAgcmVxdWlyZSh2YWx1ZSA+PSBwcmljZSk7CiAgICAgIHZhbHVlIC09IHByaWNlOwogICAgfQoKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodmFsdWUpOwoKICAgIC8vIFRoZSBjdXJyZW50IHJlZmVycmFsIGlzIGlnbm9yZWQgaWYgdGhlIHJlZmVycmVyJ3MgYWRkcmVzcyBpcyAweDAuCiAgICBpZiAoYWN0dWFsUmVmZXJyZXIgIT0gMHgwKSB7CiAgICAgIHVpbnQyNTYgbnVtQ3JlZGl0ID0gcmVmZXJyYWxDcmVkaXRzW2FjdHVhbFJlZmVycmVyXQogICAgICAgIC5hZGQoYmVhc3RRdWFudGl0eSkKICAgICAgICAuYWRkKGFxdWF0aWNRdWFudGl0eSkKICAgICAgICAuYWRkKHBsYW50UXVhbnRpdHkpOwoKICAgICAgdWludDI1NiBudW1SZXdhcmQgPSBudW1DcmVkaXQgLyBSRUZfQ1JFRElUU19QRVJfQVhJRTsKCiAgICAgIGlmIChudW1SZXdhcmQgPiAwKSB7CiAgICAgICAgcmVmZXJyYWxDcmVkaXRzW2FjdHVhbFJlZmVycmVyXSA9IG51bUNyZWRpdCAlIFJFRl9DUkVESVRTX1BFUl9BWElFOwogICAgICAgIGF4aWVzUmV3YXJkZWRbYWN0dWFsUmVmZXJyZXJdID0gYXhpZXNSZXdhcmRlZFthY3R1YWxSZWZlcnJlcl0uYWRkKG51bVJld2FyZCk7CiAgICAgICAgdG90YWxBeGllc1Jld2FyZGVkID0gdG90YWxBeGllc1Jld2FyZGVkLmFkZChudW1SZXdhcmQpOwogICAgICAgIEF4aWVzUmV3YXJkZWQoYWN0dWFsUmVmZXJyZXIsIG51bVJld2FyZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVmZXJyYWxDcmVkaXRzW2FjdHVhbFJlZmVycmVyXSA9IG51bUNyZWRpdDsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gcmVkZWVtQWRvcHRlZEF4aWVzKAogICAgYWRkcmVzcyByZWNlaXZlciwKICAgIHVpbnQyNTYgYmVhc3RRdWFudGl0eSwKICAgIHVpbnQyNTYgYXF1YXRpY1F1YW50aXR5LAogICAgdWludDI1NiBwbGFudFF1YW50aXR5CiAgKQogICAgcHVibGljCiAgICBvbmx5T3duZXIKICAgIHJldHVybnMgKAogICAgICB1aW50MjU2IC8qIHJlbWFpbmluZ0JlYXN0UXVhbnRpdHkgKi8sCiAgICAgIHVpbnQyNTYgLyogcmVtYWluaW5nQXF1YXRpY1F1YW50aXR5ICovLAogICAgICB1aW50MjU2IC8qIHJlbWFpbmluZ1BsYW50UXVhbnRpdHkgKi8KICAgICkKICB7CiAgICByZXR1cm4gKAogICAgICBfcmVkZWVtQWRvcHRlZEF4aWVzKHJlY2VpdmVyLCBDTEFTU19CRUFTVCwgYmVhc3RRdWFudGl0eSksCiAgICAgIF9yZWRlZW1BZG9wdGVkQXhpZXMocmVjZWl2ZXIsIENMQVNTX0FRVUFUSUMsIGFxdWF0aWNRdWFudGl0eSksCiAgICAgIF9yZWRlZW1BZG9wdGVkQXhpZXMocmVjZWl2ZXIsIENMQVNTX1BMQU5ULCBwbGFudFF1YW50aXR5KQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHJlZGVlbVJld2FyZGVkQXhpZXMoCiAgICBhZGRyZXNzIHJlY2VpdmVyLAogICAgdWludDI1NiBxdWFudGl0eQogICkKICAgIHB1YmxpYwogICAgb25seU93bmVyCiAgICByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZ1F1YW50aXR5KQogIHsKICAgIHJlbWFpbmluZ1F1YW50aXR5ID0gYXhpZXNSZXdhcmRlZFtyZWNlaXZlcl0gPSBheGllc1Jld2FyZGVkW3JlY2VpdmVyXS5zdWIocXVhbnRpdHkpOwoKICAgIGlmIChxdWFudGl0eSA+IDApIHsKICAgICAgLy8gVGhpcyByZXF1aXJlcyB0aGF0IHJld2FyZGVkIEF4aWVzIGFyZSBhbHdheXMgaW5jbHVkZWQgaW4gdGhlIHRvdGFsCiAgICAgIC8vIHRvIG1ha2Ugc3VyZSBvdmVyZmxvdyB3b24ndCBoYXBwZW4uCiAgICAgIHRvdGFsQXhpZXNSZXdhcmRlZCAtPSBxdWFudGl0eTsKCiAgICAgIFJld2FyZGVkQXhpZXNSZWRlZW1lZChyZWNlaXZlciwgcXVhbnRpdHkpOwogICAgfQogIH0KCiAgLyoqCiAgICogQGRldiBDYWxjdWxhdGUgcHJpY2Ugb2YgQXhpZXMgZnJvbSB0aGUgc2FtZSBjbGFzcy4KICAgKiBAcGFyYW0gY2xhenogVGhlIGNsYXNzIG9mIEF4aWVzLgogICAqIEBwYXJhbSBxdWFudGl0eSBOdW1iZXIgb2YgQXhpZXMgdG8gYmUgY2FsY3VsYXRlZC4KICAgKi8KICBmdW5jdGlvbiBfYXhpZXNQcmljZSgKICAgIHVpbnQ4IGNsYXp6LAogICAgdWludDI1NiBxdWFudGl0eQogICkKICAgIHByaXZhdGUKICAgIHZpZXcKICAgIHJldHVybnMgKHVpbnQyNTYgdG90YWxQcmljZSwgdWludDI1NiBwcmljZUluY3JlbWVudCwgdWludDI1NiBjdXJyZW50UHJpY2UpCiAgewogICAgcHJpY2VJbmNyZW1lbnQgPSBwcmljZUluY3JlbWVudHNbY2xhenpdOwogICAgY3VycmVudFByaWNlID0gY3VycmVudFByaWNlc1tjbGF6el07CgogICAgdWludDI1NiBuZXh0UHJpY2U7CgogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgcXVhbnRpdHk7IGkrKykgewogICAgICB0b3RhbFByaWNlID0gdG90YWxQcmljZS5hZGQoY3VycmVudFByaWNlKTsKICAgICAgbmV4dFByaWNlID0gY3VycmVudFByaWNlLmFkZChwcmljZUluY3JlbWVudCk7CgogICAgICBpZiAobmV4dFByaWNlIC8gMTAwIGZpbm5leSAhPSBjdXJyZW50UHJpY2UgLyAxMDAgZmlubmV5KSB7CiAgICAgICAgcHJpY2VJbmNyZW1lbnQgPj49IDE7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRQcmljZSA9IG5leHRQcmljZTsKICAgIH0KICB9CgogIC8qKgogICAqIEBkZXYgQWRvcHQgc29tZSBBeGllcyBmcm9tIHRoZSBzYW1lIGNsYXNzLgogICAqIEBwYXJhbSBhZG9wdGVyIEFkZHJlc3Mgb2YgdGhlIGFkb3B0ZXIuCiAgICogQHBhcmFtIGNsYXp6IFRoZSBjbGFzcyBvZiBhZG9wdGVkIEF4aWVzLgogICAqIEBwYXJhbSBxdWFudGl0eSBOdW1iZXIgb2YgQXhpZXMgdG8gYmUgYWRvcHRlZCwgdGhpcyBzaG91bGQgYmUgcG9zaXRpdmUuCiAgICogQHBhcmFtIHJlZmVycmVyIEFkZHJlc3Mgb2YgdGhlIHJlZmVycmVyLgogICAqLwogIGZ1bmN0aW9uIF9hZG9wdEF4aWVzKAogICAgYWRkcmVzcyBhZG9wdGVyLAogICAgdWludDggY2xhenosCiAgICB1aW50MjU2IHF1YW50aXR5LAogICAgYWRkcmVzcyByZWZlcnJlcgogICkKICAgIHByaXZhdGUKICAgIHJldHVybnMgKHVpbnQyNTYgdG90YWxQcmljZSkKICB7CiAgICAodG90YWxQcmljZSwgcHJpY2VJbmNyZW1lbnRzW2NsYXp6XSwgY3VycmVudFByaWNlc1tjbGF6el0pID0gX2F4aWVzUHJpY2UoY2xhenosIHF1YW50aXR5KTsKCiAgICBheGllc0Fkb3B0ZWRbYWRvcHRlcl1bY2xhenpdID0gYXhpZXNBZG9wdGVkW2Fkb3B0ZXJdW2NsYXp6XS5hZGQocXVhbnRpdHkpOwogICAgdG90YWxBeGllc0Fkb3B0ZWRbY2xhenpdID0gdG90YWxBeGllc0Fkb3B0ZWRbY2xhenpdLmFkZChxdWFudGl0eSk7CgogICAgQXhpZXNBZG9wdGVkKAogICAgICBhZG9wdGVyLAogICAgICBjbGF6eiwKICAgICAgcXVhbnRpdHksCiAgICAgIHJlZmVycmVyCiAgICApOwogIH0KCiAgLyoqCiAgICogQGRldiBSZWRlZW0gYWRvcHRlZCBBeGllcyBmcm9tIHRoZSBzYW1lIGNsYXNzLgogICAqIEBwYXJhbSByZWNlaXZlciBBZGRyZXNzIG9mIHRoZSByZWNlaXZlci4KICAgKiBAcGFyYW0gY2xhenogVGhlIGNsYXNzIG9mIGFkb3B0ZWQgQXhpZXMuCiAgICogQHBhcmFtIHF1YW50aXR5IE51bWJlciBvZiBhZG9wdGVkIEF4aWVzIHRvIGJlIHJlZGVlbWVkLgogICAqLwogIGZ1bmN0aW9uIF9yZWRlZW1BZG9wdGVkQXhpZXMoCiAgICBhZGRyZXNzIHJlY2VpdmVyLAogICAgdWludDggY2xhenosCiAgICB1aW50MjU2IHF1YW50aXR5CiAgKQogICAgcHJpdmF0ZQogICAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmdRdWFudGl0eSkKICB7CiAgICByZW1haW5pbmdRdWFudGl0eSA9IGF4aWVzQWRvcHRlZFtyZWNlaXZlcl1bY2xhenpdID0gYXhpZXNBZG9wdGVkW3JlY2VpdmVyXVtjbGF6el0uc3ViKHF1YW50aXR5KTsKCiAgICBpZiAocXVhbnRpdHkgPiAwKSB7CiAgICAgIC8vIFRoaXMgcmVxdWlyZXMgdGhhdCBhZG9wdGVkIEF4aWVzIGFyZSBhbHdheXMgaW5jbHVkZWQgaW4gdGhlIHRvdGFsCiAgICAgIC8vIHRvIG1ha2Ugc3VyZSBvdmVyZmxvdyB3b24ndCBoYXBwZW4uCiAgICAgIHRvdGFsQXhpZXNBZG9wdGVkW2NsYXp6XSAtPSBxdWFudGl0eTsKCiAgICAgIEFkb3B0ZWRBeGllc1JlZGVlbWVkKHJlY2VpdmVyLCBjbGF6eiwgcXVhbnRpdHkpOwogICAgfQogIH0KfQ=='.
	

]
