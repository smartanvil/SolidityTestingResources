Class {
	#name : #SRT3366cfd8dd3fc653e7dcd56cb9111d848b3732e2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3366cfd8dd3fc653e7dcd56cb9111d848b3732e2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIE93bmVyc2hpcCBpbnRlcmZhY2UKICoKICogUGVybWluZW50IG93bmVyc2hpcAogKgogKiAjY3JlYXRlZCAwMS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBJT3duZXJzaGlwIHsKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIGN1cnJlbnQgb3duZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIGFkZHJlc3MgVGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKfQoKCi8qKgogKiBAdGl0bGUgT3duZXJzaGlwCiAqCiAqIFBlcm1pbmVudCBvd25lcnNoaXAKICoKICogI2NyZWF0ZWQgMDEvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgT3duZXJzaGlwIGlzIElPd25lcnNoaXAgewoKICAgIC8vIE93bmVyCiAgICBhZGRyZXNzIGludGVybmFsIG93bmVyOwoKCiAgICAvKioKICAgICAqIFRoZSBwdWJsaXNoZXIgaXMgdGhlIGluaXRhbCBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBPd25lcnNoaXAoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICAvKioKICAgICAqIEFjY2VzcyBpcyByZXN0cmljdGVkIHRvIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlfb3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIF9hY2NvdW50ID09IG93bmVyOwogICAgfQoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIGN1cnJlbnQgb3duZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIGFkZHJlc3MgVGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBvd25lcjsKICAgIH0KfQoKCi8qKgogKiBAdGl0bGUgVHJhbnNmZXJhYmxlIG93bmVyc2hpcCBpbnRlcmZhY2UKICoKICogRW5oYW5jZXMgb3duZXJzaGlwIGJ5IGFsbG93aW5nIHRoZSBjdXJyZW50IG93bmVyIHRvIAogKiB0cmFuc2ZlciBvd25lcnNoaXAgdG8gYSBuZXcgb3duZXIKICoKICogI2NyZWF0ZWQgMDEvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgSVRyYW5zZmVyYWJsZU93bmVyc2hpcCB7CiAgICAKCiAgICAvKioKICAgICAqIFRyYW5zZmVyIG93bmVyc2hpcCB0byBgX25ld093bmVyYAogICAgICoKICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgbmV3IG93bmVyIAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcik7Cn0KCgovKioKICogQHRpdGxlIFRyYW5zZmVyYWJsZSBvd25lcnNoaXAKICoKICogRW5oYW5jZXMgb3duZXJzaGlwIGJ5IGFsbG93aW5nIHRoZSBjdXJyZW50IG93bmVyIHRvIAogKiB0cmFuc2ZlciBvd25lcnNoaXAgdG8gYSBuZXcgb3duZXIKICoKICogI2NyZWF0ZWQgMDEvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgVHJhbnNmZXJhYmxlT3duZXJzaGlwIGlzIElUcmFuc2ZlcmFibGVPd25lcnNoaXAsIE93bmVyc2hpcCB7CgoKICAgIC8qKgogICAgICogVHJhbnNmZXIgb3duZXJzaGlwIHRvIGBfbmV3T3duZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0aGF0IHdpbGwgYmVjb21lIHRoZSBuZXcgb3duZXIgCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIFBhdXNhYmxlIGludGVyZmFjZQogKgogKiBTaW1wbGUgaW50ZXJmYWNlIHRvIHBhdXNlIGFuZCByZXN1bWUgCiAqCiAqICNjcmVhdGVkIDExLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElQYXVzYWJsZSB7CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGltcGxlbWVudGluZyBjb250cmFjdCBpcyAKICAgICAqIGN1cnJlbnRseSBwYXVzZWQgb3Igbm90CiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBwYXVzZWQgc3RhdGUgaXMgYWN0aXZlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzUGF1c2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSBzdGF0ZSB0byBwYXVzZWQKICAgICAqLwogICAgZnVuY3Rpb24gcGF1c2UoKTsKCgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHN0YXRlIHRvIHJlc3VtZSwgdW5kbyB0aGUgZWZmZWN0cyAKICAgICAqIG9mIGNhbGxpbmcgcGF1c2UKICAgICAqLwogICAgZnVuY3Rpb24gcmVzdW1lKCk7Cn0KCgovKioKICogQHRpdGxlIElBdXRoZW50aWNhdGlvbk1hbmFnZXIgCiAqCiAqIEFsbG93cyB0aGUgYXV0aGVudGljYXRpb24gcHJvY2VzcyB0byBiZSBlbmFibGVkIGFuZCBkaXNhYmxlZAogKgogKiAjY3JlYXRlZCAxNS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBJQXV0aGVudGljYXRpb25NYW5hZ2VyIHsKICAgIAoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQgYW5kIGZhbHNlIAogICAgICogb3RoZXJ3aXNlCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBjb252ZXJ0ZXIgaXMgY3VycmVudGx5IGF1dGhlbnRpY2F0aW5nIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0aW5nKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogRW5hYmxlIGF1dGhlbnRpY2F0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVuYWJsZUF1dGhlbnRpY2F0aW9uKCk7CgoKICAgIC8qKgogICAgICogRGlzYWJsZSBhdXRoZW50aWNhdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlQXV0aGVudGljYXRpb24oKTsKfQoKCi8qKgogKiBAdGl0bGUgSUF1dGhlbnRpY2F0b3IgCiAqCiAqIEF1dGhlbnRpY2F0b3IgaW50ZXJmYWNlCiAqCiAqICNjcmVhdGVkIDE1LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElBdXRoZW50aWNhdG9yIHsKICAgIAoKICAgIC8qKgogICAgICogQXV0aGVudGljYXRlIAogICAgICoKICAgICAqIFJldHVybnMgd2hldGhlciBgX2FjY291bnRgIGlzIGF1dGhlbnRpY2F0ZWQgb3Igbm90CiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhY2NvdW50IHRvIGF1dGhlbnRpY2F0ZQogICAgICogQHJldHVybiB3aGV0aGVyIGBfYWNjb3VudGAgaXMgc3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQKICAgICAqLwogICAgZnVuY3Rpb24gYXV0aGVudGljYXRlKGFkZHJlc3MgX2FjY291bnQpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9CgoKLyoqCiAqIEB0aXRsZSBJV2hpdGVsaXN0IAogKgogKiBXaGl0ZWxpc3QgYXV0aGVudGljYXRpb24gaW50ZXJmYWNlCiAqCiAqICNjcmVhdGVkIDA0LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElXaGl0ZWxpc3QgaXMgSUF1dGhlbnRpY2F0b3IgewogICAgCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYW4gZW50cnkgZXhpc3RzIGZvciBgX2FjY291bnRgCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhY2NvdW50IHRvIGNoZWNrCiAgICAgKiBAcmV0dXJuIHdoZXRoZXIgYF9hY2NvdW50YCBpcyBoYXMgYW4gZW50cnkgaW4gdGhlIHdoaXRlbGlzdAogICAgICovCiAgICBmdW5jdGlvbiBoYXNFbnRyeShhZGRyZXNzIF9hY2NvdW50KSBjb25zdGFudCByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBBZGQgYF9hY2NvdW50YCB0byB0aGUgd2hpdGVsaXN0CiAgICAgKgogICAgICogSWYgYW4gYWNjb3VudCBpcyBjdXJyZW50bHkgZGlzYWJsZWQsIHRoZSBhY2NvdW50IGlzIHJlZW5hYmxlZCwgb3RoZXJ3aXNlIAogICAgICogYSBuZXcgZW50cnkgaXMgY3JlYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWNjb3VudCB0byBhZGQKICAgICAqLwogICAgZnVuY3Rpb24gYWRkKGFkZHJlc3MgX2FjY291bnQpOwoKCiAgICAvKioKICAgICAqIFJlbW92ZSBgX2FjY291bnRgIGZyb20gdGhlIHdoaXRlbGlzdAogICAgICoKICAgICAqIFdpbGwgbm90IGFjdHVhbGx5IHJlbW92ZSB0aGUgZW50cnkgYnV0IGRpc2FibGUgaXQgYnkgdXBkYXRpbmcKICAgICAqIHRoZSBhY2NlcHRlZCByZWNvcmQKICAgICAqCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFjY291bnQgdG8gcmVtb3ZlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZShhZGRyZXNzIF9hY2NvdW50KTsKfQoKCi8qKgogKiBAdGl0bGUgVG9rZW4gcmV0cmlldmUgaW50ZXJmYWNlCiAqCiAqIEFsbG93cyB0b2tlbnMgdG8gYmUgcmV0cmlldmVkIGZyb20gYSBjb250cmFjdAogKgogKiAjY3JlYXRlZCAyOS8wOS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBJVG9rZW5SZXRyaWV2ZXIgewoKICAgIC8qKgogICAgICogRXh0cmFjdHMgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCk7Cn0KCgovKioKICogQHRpdGxlIFRva2VuIHJldHJpZXZlCiAqCiAqIEFsbG93cyB0b2tlbnMgdG8gYmUgcmV0cmlldmVkIGZyb20gYSBjb250cmFjdAogKgogKiAjY3JlYXRlZCAxOC8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBUb2tlblJldHJpZXZlciBpcyBJVG9rZW5SZXRyaWV2ZXIgewoKICAgIC8qKgogICAgICogRXh0cmFjdHMgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIHsKICAgICAgICBJVG9rZW4gdG9rZW5JbnN0YW5jZSA9IElUb2tlbihfdG9rZW5Db250cmFjdCk7CiAgICAgICAgdWludCB0b2tlbkJhbGFuY2UgPSB0b2tlbkluc3RhbmNlLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAodG9rZW5CYWxhbmNlID4gMCkgewogICAgICAgICAgICB0b2tlbkluc3RhbmNlLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2VuQmFsYW5jZSk7CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBUb2tlbiBvYnNlcnZlciBpbnRlcmZhY2UKICoKICogQWxsb3dzIGEgdG9rZW4gc21hcnQtY29udHJhY3QgdG8gbm90aWZ5IG9ic2VydmVycyAKICogd2hlbiB0b2tlbnMgYXJlIHJlY2VpdmVkCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElUb2tlbk9ic2VydmVyIHsKCiAgICAvKioKICAgICAqIENhbGxlZCBieSB0aGUgb2JzZXJ2ZWQgdG9rZW4gc21hcnQtY29udHJhY3QgaW4gb3JkZXIgCiAgICAgKiB0byBub3RpZnkgdGhlIHRva2VuIG9ic2VydmVyIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyB0aGF0IHRoZSB0b2tlbnMgd2hlcmUgc2VuZCBmcm9tCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2FzIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5vdGlmeVRva2Vuc1JlY2VpdmVkKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgQWJzdHJhY3QgdG9rZW4gb2JzZXJ2ZXIKICoKICogQWxsb3dzIG9ic2VydmVycyB0byBiZSBub3RpZmllZCBieSBhbiBvYnNlcnZlZCB0b2tlbiBzbWFydC1jb250cmFjdAogKiB3aGVuIHRva2VucyBhcmUgcmVjZWl2ZWQKICoKICogI2NyZWF0ZWQgMDkvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgVG9rZW5PYnNlcnZlciBpcyBJVG9rZW5PYnNlcnZlciB7CgogICAgLyoqCiAgICAgKiBDYWxsZWQgYnkgdGhlIG9ic2VydmVkIHRva2VuIHNtYXJ0LWNvbnRyYWN0IGluIG9yZGVyIAogICAgICogdG8gbm90aWZ5IHRoZSB0b2tlbiBvYnNlcnZlciB3aGVuIHRva2VucyBhcmUgcmVjZWl2ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCB0aGUgdG9rZW5zIHdoZXJlIHNlbmQgZnJvbQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0aGF0IHdhcyByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBub3RpZnlUb2tlbnNSZWNlaXZlZChhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBvblRva2Vuc1JlY2VpdmVkKG1zZy5zZW5kZXIsIF9mcm9tLCBfdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIEV2ZW50IGhhbmRsZXIKICAgICAqIAogICAgICogQ2FsbGVkIGJ5IGBfdG9rZW5gIHdoZW4gYSB0b2tlbiBhbW91bnQgaXMgcmVjZWl2ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuIFRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhY2NvdW50IG9yIGNvbnRyYWN0IHRoYXQgc2VuZCB0aGUgdHJhbnNhY3Rpb24KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIHZhbHVlIG9mIHRva2VucyB0aGF0IHdoZXJlIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9uVG9rZW5zUmVjZWl2ZWQoYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbDsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgY29tcGF0aWJsZSB0b2tlbiBpbnRlcmZhY2UKICoKICogLSBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAogKiAtIEltcGxlbWVudHMgc2hvcnQgYWRkcmVzcyBhdHRhY2sgZml4CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IElUb2tlbiB7IAoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgdG90YWwgc3VwcGx5IG9mIHRva2VucwogICAgICogCiAgICAgKiBAcmV0dXJuIFRoZSB0b3RhbCBzdXBwbHkKICAgICAqLwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCgogICAgLyoqIAogICAgICogR2V0IGJhbGFuY2Ugb2YgYF9vd25lcmAgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogICAgICogQHJldHVybiBUaGUgYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwoKCiAgICAvKiogCiAgICAgKiBTZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgICAqIAogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAgKiAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogR2V0IHRoZSBhbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyB0aGF0IGBfc3BlbmRlcmAgaXMgYWxsb3dlZCB0byBzcGVuZCBmcm9tIGBfb3duZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogICAgICogQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCk7Cn0KCgovKioKICogQHRpdGxlIE1hbmFnZWRUb2tlbiBpbnRlcmZhY2UKICoKICogQWRkcyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGJhc2ljIEVSQzIwIHRva2VuCiAqIC0gTG9ja2luZwogKiAtIElzc3VpbmcKICogLSBCdXJuaW5nIAogKgogKiAjY3JlYXRlZCAyOS8wOS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBJTWFuYWdlZFRva2VuIGlzIElUb2tlbiB7IAoKICAgIC8qKiAKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKiAKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzTG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogTG9ja3MgdGhlIHRva2VuIHNvIHRoYXQgdGhlIHRyYW5zZmVyaW5nIG9mIHZhbHVlIGlzIGRpc2FibGVkIAogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdW5sb2NraW5nIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBsb2NrKCkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogVW5sb2NrcyB0aGUgdG9rZW4gc28gdGhhdCB0aGUgdHJhbnNmZXJpbmcgb2YgdmFsdWUgaXMgZW5hYmxlZCAKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHVubG9ja2luZyB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdW5sb2NrKCkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogSXNzdWVzIGBfdmFsdWVgIG5ldyB0b2tlbnMgdG8gYF90b2AKICAgICAqCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHdoaWNoIHRoZSB0b2tlbnMgd2lsbCBiZSBpc3N1ZWQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiBuZXcgdG9rZW5zIHRvIGlzc3VlCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHRva2VucyB3aGVyZSBzdWNlc3NmdWxseSBpc3N1ZWQgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzc3VlKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogQnVybnMgYF92YWx1ZWAgdG9rZW5zIG9mIGBfZnJvbWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCBvd25zIHRoZSB0b2tlbnMgdG8gYmUgYnVybmVkCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbnMgd2hlcmUgc3VjZXNzZnVsbHkgYnVybmVkIG9yIG5vdCAKICAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCk7Cn0KCgovKioKICogQHRpdGxlIFRva2VuIENoYW5nZXIgaW50ZXJmYWNlCiAqCiAqIEJhc2ljIHRva2VuIGNoYW5nZXIgcHVibGljIGludGVyZmFjZSAKICoKICogI2NyZWF0ZWQgMDYvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgSVRva2VuQ2hhbmdlciB7CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgJ190b2tlbicgaXMgb24gb2YgdGhlIHRva2VucyB0aGF0IGFyZSAKICAgICAqIG1hbmFnZWQgYnkgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKiAKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3MgYmVpbmcgdGVzdGVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlICdfdG9rZW4nIGlzIHBhcnQgb2YgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzVG9rZW4oYWRkcmVzcyBfdG9rZW4pIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGFkZHJlc3Mgb2YgdGhlIGxlZnQgdG9rZW4KICAgICAqCiAgICAgKiBAcmV0dXJuIExlZnQgdG9rZW4gYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBnZXRMZWZ0VG9rZW4oKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKTsKCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSByaWdodCB0b2tlbgogICAgICoKICAgICAqIEByZXR1cm4gUmlnaHQgdG9rZW4gYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBnZXRSaWdodFRva2VuKCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyk7CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZmVlIHRoYXQgaXMgcGFpZCBpbiB0b2tlbnMgd2hlbiB1c2luZyAKICAgICAqIHRoZSB0b2tlbiBjaGFuZ2VyCiAgICAgKgogICAgICogQHJldHVybiBUaGUgcGVyY2VudGFnZSBvZiB0b2tlbnMgdGhhdCBpcyBjaGFyZ2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEZlZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSByYXRlIHRoYXQgaXMgdXNlZCB0byBjaGFuZ2UgYmV0d2VlbiB0b2tlbnMKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSByYXRlIHVzZWQgd2hlbiBjaGFuZ2luZyB0b2tlbnMKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmF0ZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHByZWNpc2lvbiBvZiB0aGUgcmF0ZSBhbmQgZmVlIHBhcmFtcwogICAgICoKICAgICAqIEByZXR1cm4gVGhlIGFtb3VudCBvZiBkZWNpbWFscyB1c2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFByZWNpc2lvbigpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwoKCiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgYW5kIHJldHVybnMgdGhlIGZlZSBiYXNlZCBvbiBgX3ZhbHVlYCBvZiB0b2tlbnMKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBhY3R1YWwgZmVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUZlZSh1aW50IF92YWx1ZSkgY29uc3RhbnQgcmV0dXJucyAodWludCk7Cn0KCgovKioKICogQHRpdGxlIFRva2VuIENoYW5nZXIKICoKICogUHJvdmlkZXMgYSBnZW5lcmljIHdheSB0byBjb252ZXJ0IGJldHdlZW4gdHdvIHRva2VucyB1c2luZyBhIGZpeGVkIAogKiByYXRpbyBhbmQgYW4gb3B0aW9uYWwgZmVlLgogKgogKiAjY3JlYXRlZCAwNi8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBUb2tlbkNoYW5nZXIgaXMgSVRva2VuQ2hhbmdlciwgSVBhdXNhYmxlIHsKCiAgICBJTWFuYWdlZFRva2VuIHByaXZhdGUgdG9rZW5MZWZ0OyAvLyB0b2tlbkxlZnQgPSB0b2tlblJpZ2h0ICogcmF0ZSAvIHByZWNpc2lvbgogICAgSU1hbmFnZWRUb2tlbiBwcml2YXRlIHRva2VuUmlnaHQ7IC8vIHRva2VuUmlnaHQgPSB0b2tlbkxlZnQgLyByYXRlICogcHJlY2lzaW9uCgogICAgdWludCBwcml2YXRlIHJhdGU7IC8vIFJhdGlvIGJldHdlZW4gdG9rZW5zCiAgICB1aW50IHByaXZhdGUgZmVlOyAvLyBQZXJjZW50YWdlIGxvc3QgaW4gdHJhbnNmZXIKICAgIHVpbnQgcHJpdmF0ZSBwcmVjaXNpb247IC8vIFByZWNpc2lvbiAKICAgIGJvb2wgcHJpdmF0ZSBwYXVzZWQ7IC8vIFBhdXNlZCBzdGF0ZQogICAgYm9vbCBwcml2YXRlIGJ1cm47IC8vIFdoZXRoZXIgdGhlIGNoYW5nZXIgc2hvdWxkIGJ1cm4gdG9rZW5zCgoKICAgIC8qKgogICAgICogT25seSBpZiAnX3Rva2VuJyBpcyB0aGUgbGVmdCBvciByaWdodCB0b2tlbiAKICAgICAqIHRoYXQgb2YgdGhlIHRva2VuIGNoYW5nZXIKICAgICAqLwogICAgbW9kaWZpZXIgaXNfdG9rZW4oYWRkcmVzcyBfdG9rZW4pIHsKICAgICAgICByZXF1aXJlKF90b2tlbiA9PSBhZGRyZXNzKHRva2VuTGVmdCkgfHwgX3Rva2VuID09IGFkZHJlc3ModG9rZW5SaWdodCkpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogQ29uc3RydWN0IHRva2VuIGNoYW5nZXIKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuTGVmdCBSZWYgdG8gdGhlICdsZWZ0JyB0b2tlbiBzbWFydC1jb250cmFjdAogICAgICogQHBhcmFtIF90b2tlblJpZ2h0IFJlZiB0byB0aGUgJ3JpZ2h0JyB0b2tlbiBzbWFydC1jb250cmFjdAogICAgICogQHBhcmFtIF9yYXRlIFRoZSByYXRlIHVzZWQgd2hlbiBjaGFuZ2luZyB0b2tlbnMKICAgICAqIEBwYXJhbSBfZmVlIFRoZSBwZXJjZW50YWdlIG9mIHRva2VucyB0aGF0IGlzIGNoYXJnZWQKICAgICAqIEBwYXJhbSBfZGVjaW1hbHMgVGhlIGFtb3VudCBvZiBkZWNpbWFscyB1c2VkIGZvciBfcmF0ZSBhbmQgX2ZlZQogICAgICogQHBhcmFtIF9wYXVzZWQgV2hldGhlciB0aGUgdG9rZW4gY2hhbmdlciBzdGFydHMgaW4gdGhlIHBhdXNlZCBzdGF0ZSBvciBub3QKICAgICAqIEBwYXJhbSBfYnVybiBXaGV0aGVyIHRoZSBjaGFuZ2VyIHNob3VsZCBidXJuIHRva2VucyBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gVG9rZW5DaGFuZ2VyKGFkZHJlc3MgX3Rva2VuTGVmdCwgYWRkcmVzcyBfdG9rZW5SaWdodCwgdWludCBfcmF0ZSwgdWludCBfZmVlLCB1aW50IF9kZWNpbWFscywgYm9vbCBfcGF1c2VkLCBib29sIF9idXJuKSB7CiAgICAgICAgdG9rZW5MZWZ0ID0gSU1hbmFnZWRUb2tlbihfdG9rZW5MZWZ0KTsKICAgICAgICB0b2tlblJpZ2h0ID0gSU1hbmFnZWRUb2tlbihfdG9rZW5SaWdodCk7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgICAgIGZlZSA9IF9mZWU7CiAgICAgICAgcHJlY2lzaW9uID0gX2RlY2ltYWxzID4gMCA/IDEwKipfZGVjaW1hbHMgOiAxOwogICAgICAgIHBhdXNlZCA9IF9wYXVzZWQ7CiAgICAgICAgYnVybiA9IF9idXJuOwogICAgfQoKICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgJ190b2tlbicgaXMgb24gb2YgdGhlIHRva2VucyB0aGF0IGFyZSAKICAgICAqIG1hbmFnZWQgYnkgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKiAKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3MgYmVpbmcgdGVzdGVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlICdfdG9rZW4nIGlzIHBhcnQgb2YgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzVG9rZW4oYWRkcmVzcyBfdG9rZW4pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIF90b2tlbiA9PSBhZGRyZXNzKHRva2VuTGVmdCkgfHwgX3Rva2VuID09IGFkZHJlc3ModG9rZW5SaWdodCk7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgbGVmdCB0b2tlbgogICAgICoKICAgICAqIEByZXR1cm4gTGVmdCB0b2tlbiBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldExlZnRUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHRva2VuTGVmdDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSByaWdodCB0b2tlbgogICAgICoKICAgICAqIEByZXR1cm4gUmlnaHQgdG9rZW4gYWRkcmVzcwogICAgICovCiAgICBmdW5jdGlvbiBnZXRSaWdodFRva2VuKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gdG9rZW5SaWdodDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBmZWUgdGhhdCBpcyBwYWlkIGluIHRva2VucyB3aGVuIHVzaW5nIAogICAgICogdGhlIHRva2VuIGNoYW5nZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBwZXJjZW50YWdlIG9mIHRva2VucyB0aGF0IGlzIGNoYXJnZWQKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RmVlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZmVlOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHJhdGUgdGhhdCBpcyB1c2VkIHRvIGNoYW5nZSBiZXR3ZWVuIHRva2VucwogICAgICoKICAgICAqIEByZXR1cm4gVGhlIHJhdGUgdXNlZCB3aGVuIGNoYW5naW5nIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiBnZXRSYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcmF0ZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjaXNpb24gb2YgdGhlIHJhdGUgYW5kIGZlZSBwYXJhbXMKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBhbW91bnQgb2YgZGVjaW1hbHMgdXNlZAogICAgICovCiAgICBmdW5jdGlvbiBnZXRQcmVjaXNpb24oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBwcmVjaXNpb247CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSB0b2tlbiBjaGFuZ2VyIGlzIGN1cnJlbnRseSAKICAgICAqIHBhdXNlZCBvciBub3QuIFdoaWxlIGJlaW5nIGluIHRoZSBwYXVzZWQgc3RhdGUgCiAgICAgKiB0aGUgY29udHJhY3Qgc2hvdWxkIHJldmVydCB0aGUgdHJhbnNhY3Rpb24gaW5zdGVhZCAKICAgICAqIG9mIGNvbnZlcnRpbmcgdG9rZW5zCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbiBjaGFuZ2VyIGlzIGluIHRoZSBwYXVzZWQgc3RhdGUKICAgICAqLwogICAgZnVuY3Rpb24gaXNQYXVzZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBwYXVzZWQ7CiAgICB9CgoKICAgIC8qKgogICAgICogUGF1c2UgdGhlIHRva2VuIGNoYW5nZXIgbWFraW5nIHRoZSBjb250cmFjdCAKICAgICAqIHJldmVydCB0aGUgdHJhbnNhY3Rpb24gaW5zdGVhZCBvZiBjb252ZXJ0aW5nIAogICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXN1bWUgdGhlIHRva2VuIGNoYW5nZXIgbWFraW5nIHRoZSBjb250cmFjdCAKICAgICAqIGNvbnZlcnQgdG9rZW5zIGluc3RlYWQgb2YgcmV2ZXJ0aW5nIHRoZSB0cmFuc2FjdGlvbiAKICAgICAqLwogICAgZnVuY3Rpb24gcmVzdW1lKCkgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBmZWUgYmFzZWQgb24gYF92YWx1ZWAgb2YgdG9rZW5zCiAgICAgKgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGlzIGJlaW5nIGNvbnZlcnRlZAogICAgICogQHJldHVybiBUaGUgYWN0dWFsIGZlZQogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludCBfdmFsdWUpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGZlZSA9PSAwID8gMCA6IF92YWx1ZSAqIGZlZSAvIHByZWNpc2lvbjsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0b2tlbnMgYnkgYnVybmluZyB0aGUgdG9rZW5zIHJlY2VpdmVkIGF0IHRoZSB0b2tlbiBzbWFydC1jb250YWN0IAogICAgICogbG9jYXRlZCBhdCBgX2Zyb21gIGFuZCBieSBpc3N1aW5nIHRva2VucyBhdCB0aGUgb3Bwb3NpdGUgdG9rZW4gc21hcnQtY29udHJhY3QKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIHRva2VuIHNtYXJ0LWNvbnRyYWN0IHRoYXQgcmVjZWl2ZWQgdGhlIHRva2VucwogICAgICogQHBhcmFtIF9zZW5kZXIgVGhlIGFjY291bnQgdGhhdCBzZW5kIHRoZSB0b2tlbnMgKHRva2VuIG93bmVyKQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0aGF0IHdoZXJlIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnZlcnQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfc2VuZGVyLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAgICAgdWludCBhbW91bnRUb0lzc3VlOwogICAgICAgIGlmIChfZnJvbSA9PSBhZGRyZXNzKHRva2VuTGVmdCkpIHsKICAgICAgICAgICAgYW1vdW50VG9Jc3N1ZSA9IF92YWx1ZSAqIHJhdGUgLyBwcmVjaXNpb247CiAgICAgICAgICAgIHRva2VuUmlnaHQuaXNzdWUoX3NlbmRlciwgYW1vdW50VG9Jc3N1ZSAtIGNhbGN1bGF0ZUZlZShhbW91bnRUb0lzc3VlKSk7CiAgICAgICAgICAgIGlmIChidXJuKSB7CiAgICAgICAgICAgICAgICB0b2tlbkxlZnQuYnVybih0aGlzLCBfdmFsdWUpOwogICAgICAgICAgICB9ICAgCiAgICAgICAgfSAKICAgICAgICAKICAgICAgICBlbHNlIGlmIChfZnJvbSA9PSBhZGRyZXNzKHRva2VuUmlnaHQpKSB7CiAgICAgICAgICAgIGFtb3VudFRvSXNzdWUgPSBfdmFsdWUgKiBwcmVjaXNpb24gLyByYXRlOwogICAgICAgICAgICB0b2tlbkxlZnQuaXNzdWUoX3NlbmRlciwgYW1vdW50VG9Jc3N1ZSAtIGNhbGN1bGF0ZUZlZShhbW91bnRUb0lzc3VlKSk7CiAgICAgICAgICAgIGlmIChidXJuKSB7CiAgICAgICAgICAgICAgICB0b2tlblJpZ2h0LmJ1cm4odGhpcywgX3ZhbHVlKTsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICB9Cn0KCgovKioKICogQHRpdGxlIERSUFMgQ29udmVydGVyCiAqCiAqIFdpbGwgYWxsb3cgRFJQIHRva2VuIGhvbGRlcnMgdG8gY29udmVydCB0aGVpciBEUlAgQmFsYW5jZSBpbnRvIERSUFMgYXQgdGhlIHJhdGlvIG9mIDE6MSwgbG9ja2luZyBhbGwgcmVjaWV2ZWQgRFJQIGludG8gdGhlIGNvbnZlcnRlci4KICoKICogRFJQUyBhcyBpbmRpY2F0ZWQgYnkgaXRzIOKAmFPigJkgZGVzaWduYXRpb24sIG1haW50YWluaW5nIHRoZSBwcmltYXJ5IHNlY3VyaXR5IGZ1bmN0aW9ucyBvZiB0aGUgRFJQIHRva2VuIGFzIAogKiBvdXRsaW5lZCB3aXRoaW4gdGhlIERjb3JwIHdoaXRlcGFwZXIgKGh0dHBzOi8vd3d3LmRjb3JwLml0L3doaXRlcGFwZXIpLiAmIzE2MDsKICoKICogVGhvc2Ugd2hvIGJlYXIgRFJQUyB3aWxsIGJlIGVudGl0bGVkIHRvIHByb2ZpdCBzaGFyaW5nIGluIHRoZSBmb3JtIG9mIGRpdmlkZW5kcyBhcyBwZXIgYSB2b3RpbmcgcHJvY2VzcywgCiAqIGFuZCBpcyBjb25zaWRlcmVkIHRoZSAiU2VjdXJpdHkiIHRva2VuIG9mIERjb3JwLgogKgogKiBodHRwczovL3d3dy5kY29ycC5pdC9kcnBzCiAqCiAqICNjcmVhdGVkIDExLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IERSUFNUb2tlbkNvbnZlcnRlciBpcyBUb2tlbkNoYW5nZXIsIElBdXRoZW50aWNhdGlvbk1hbmFnZXIsIFRyYW5zZmVyYWJsZU93bmVyc2hpcCwgVG9rZW5SZXRyaWV2ZXIgewoKICAgIC8vIEF1dGhlbnRpY2F0aW9uCiAgICBJV2hpdGVsaXN0IHByaXZhdGUgd2hpdGVsaXN0OwogICAgYm9vbCBwcml2YXRlIHJlcXVpcmVBdXRoZW50aWNhdGlvbjsKCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgZHJwIC0gZHJwcyB0b2tlbiBjaGFuZ2VyCiAgICAgKgogICAgICogUmF0ZSBpcyBtdWx0aXBsaWVkIGJ5IDEwKio2IHRha2luZyBpbnRvIGFjY291bnQgdGhlIGRpZmZlcmVuY2UgaW4gCiAgICAgKiBkZWNpbWFscyBiZXR3ZWVuIChvbGQpIERSUCAoMikgYW5kIERSUFUgKDgpCiAgICAgKgogICAgICogQHBhcmFtIF93aGl0ZWxpc3QgVGhlIGFkZHJlc3Mgb2YgdGhlIHdoaXRlbGlzdCBhdXRoZW50aWNhdG9yCiAgICAgKiBAcGFyYW0gX2RycCBSZWYgdG8gdGhlIChvbGQpIERSUCB0b2tlbiBzbWFydC1jb250cmFjdAogICAgICogQHBhcmFtIF9kcnBzIFJlZiB0byB0aGUgRFJQUyB0b2tlbiBzbWFydC1jb250cmFjdCBodHRwczovL3d3dy5kY29ycC5pdC9kcnBzCiAgICAgKi8KICAgIGZ1bmN0aW9uIERSUFNUb2tlbkNvbnZlcnRlcihhZGRyZXNzIF93aGl0ZWxpc3QsIGFkZHJlc3MgX2RycCwgYWRkcmVzcyBfZHJwcykgCiAgICAgICAgVG9rZW5DaGFuZ2VyKF9kcnAsIF9kcnBzLCAxICogMTAqKjYsIDAsIDAsIGZhbHNlLCBmYWxzZSkgewogICAgICAgIHdoaXRlbGlzdCA9IElXaGl0ZWxpc3QoX3doaXRlbGlzdCk7CiAgICAgICAgcmVxdWlyZUF1dGhlbnRpY2F0aW9uID0gdHJ1ZTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYXV0aGVudGljYXRpb24gaXMgZW5hYmxlZCBhbmQgZmFsc2UgCiAgICAgKiBvdGhlcndpc2UKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGNvbnZlcnRlciBpcyBjdXJyZW50bHkgYXV0aGVudGljYXRpbmcgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRpbmcoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiByZXF1aXJlQXV0aGVudGljYXRpb247CiAgICB9CgoKICAgIC8qKgogICAgICogRW5hYmxlIGF1dGhlbnRpY2F0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVuYWJsZUF1dGhlbnRpY2F0aW9uKCkgcHVibGljIG9ubHlfb3duZXIgewogICAgICAgIHJlcXVpcmVBdXRoZW50aWNhdGlvbiA9IHRydWU7CiAgICB9CgoKICAgIC8qKgogICAgICogRGlzYWJsZSBhdXRoZW50aWNhdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlQXV0aGVudGljYXRpb24oKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgcmVxdWlyZUF1dGhlbnRpY2F0aW9uID0gZmFsc2U7CiAgICB9CgoKICAgIC8qKgogICAgICogUGF1c2UgdGhlIHRva2VuIGNoYW5nZXIgbWFraW5nIHRoZSBjb250cmFjdCAKICAgICAqIHJldmVydCB0aGUgdHJhbnNhY3Rpb24gaW5zdGVhZCBvZiBjb252ZXJ0aW5nIAogICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5X293bmVyIHsKICAgICAgICBzdXBlci5wYXVzZSgpOwogICAgfQoKCiAgICAvKioKICAgICAqIFJlc3VtZSB0aGUgdG9rZW4gY2hhbmdlciBtYWtpbmcgdGhlIGNvbnRyYWN0IAogICAgICogY29udmVydCB0b2tlbnMgaW5zdGVhZCBvZiByZXZlcnRpbmcgdGhlIHRyYW5zYWN0aW9uIAogICAgICovCiAgICBmdW5jdGlvbiByZXN1bWUoKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgc3VwZXIucmVzdW1lKCk7CiAgICB9CgoKICAgIC8qKgogICAgICogUmVxdWVzdCB0aGF0IHRoZSAob2xkKSBkcnAgc21hcnQtY29udHJhY3QgdHJhbnNmZXJzIGBfdmFsdWVgIHdvcnRoIAogICAgICogb2YgKG9sZCkgZHJwIHRvIHRoZSBkcnBzIHRva2VuIGNvbnZlcnRlciB0byBiZSBjb252ZXJ0ZWQKICAgICAqIAogICAgICogTm90ZSEgVGhpcyBmdW5jdGlvbiByZXF1aXJlcyB0aGUgZHJwcyB0b2tlbiBjb252ZXJ0ZXIgc21hcnQtY29udHJhY3QgCiAgICAgKiB0byBiZSBhcHByb3ZlZCB0byBzcGVuZCBhdCBsZWFzdCBgX3ZhbHVlYCB3b3J0aCBvZiAob2xkKSBkcnAgYnkgdGhlIAogICAgICogb3duZXIgb2YgdGhlIHRva2VucyBieSBjYWxsaW5nIHRoZSBhcHByb3ZlKCkgZnVuY3Rpb24gaW4gdGhlIChvbGQpIAogICAgICogZHByIHRva2VuIHNtYXJ0LWNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byB0cmFuc2ZlciBhbmQgY29udmVydAogICAgICovCiAgICBmdW5jdGlvbiByZXF1ZXN0Q29udmVyc2lvbih1aW50IF92YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIGFkZHJlc3Mgc2VuZGVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLy8gQXV0aGVudGljYXRlCiAgICAgICAgcmVxdWlyZSghcmVxdWlyZUF1dGhlbnRpY2F0aW9uIHx8IHdoaXRlbGlzdC5hdXRoZW50aWNhdGUoc2VuZGVyKSk7CgogICAgICAgIElUb2tlbiBkcnBUb2tlbiA9IElUb2tlbihnZXRMZWZ0VG9rZW4oKSk7CiAgICAgICAgZHJwVG9rZW4udHJhbnNmZXJGcm9tKHNlbmRlciwgdGhpcywgX3ZhbHVlKTsgLy8gVHJhbnNmZXIgb2xkIGRycCBmcm9tIHNlbmRlciB0byBjb252ZXJ0ZXIgCiAgICAgICAgY29udmVydChkcnBUb2tlbiwgc2VuZGVyLCBfdmFsdWUpOyAvLyBDb252ZXJ0IHRvIGRycHMKICAgIH0KCgogICAgLyoqCiAgICAgKiBGYWlsc2FmZSBtZWNoYW5pc20KICAgICAqIAogICAgICogQWxsb3dzIHRoZSBvd25lciB0byByZXRyaWV2ZSB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QgdGhhdCAKICAgICAqIG1pZ2h0IGhhdmUgYmVlbiBzZW5kIHRoZXJlIGJ5IGFjY2lkZW50CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIG9ubHlfb3duZXIgewogICAgICAgIHJlcXVpcmUoZ2V0TGVmdFRva2VuKCkgIT0gX3Rva2VuQ29udHJhY3QpOyAvLyBFbnN1cmUgdGhhdCB0aGUgKG9sZCkgZHJwIHRva2VuIHN0YXlzIGxvY2tlZAogICAgICAgIHN1cGVyLnJldHJpZXZlVG9rZW5zKF90b2tlbkNvbnRyYWN0KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBQcmV2ZW50cyB0aGUgYWNjaWRlbnRhbCBzZW5kaW5nIG9mIGV0aGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQp9'.
	

]
