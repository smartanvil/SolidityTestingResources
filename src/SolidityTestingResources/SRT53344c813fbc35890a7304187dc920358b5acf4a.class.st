Class {
	#name : #SRT53344c813fbc35890a7304187dc920358b5acf4a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT53344c813fbc35890a7304187dc920358b5acf4a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuOTsKCi8qKgogKiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbWF4NjQodWludDY0IGEsIHVpbnQ2NCBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1heDI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWluMjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cgp9CgovKioKCSAqIEB0aXRsZSBFUkMyMEJhc2ljCgkgKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKCSAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAoJICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewoJICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCSAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCSAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7CgkgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAgKiBAZGV2IEZpeCBmb3IgdGhlIEVSQzIwIHNob3J0IGFkZHJlc3MgYXR0YWNrLgogICAqLwogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50MjU2IHNpemUpIHsKICAgICByZXF1aXJlKCEobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpKTsKICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1hbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcnQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWFobGYgb2YgbXNnLnNlbmRlci4KICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSghKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSApOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYW4gYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9Cgp9Cgpjb250cmFjdCBQaXhpdV9CZXRhIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gNjsKICAgIGJvb2wgcHVibGljIGlzUGF5YWJsZSA9IHRydWU7CiAgICBib29sIHB1YmxpYyBpc1dpdGhkcmF3YWJsZSA9IHRydWU7CgkKICAgIHN0cnVjdCBleGNoYW5nZVJhdGUgewogICAgICAgIAogICAgICAgIHVpbnQgdGltZTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50IHRpbWUyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50IHZhbHVlOwogICAgICAgIAogICAgfQogICAgCiAgICBzdHJ1Y3QgTWVtYmVyIHsKICAgICAgICAgCiAgICAgICAgYm9vbCBpc0V4aXN0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGJvb2wgaXNEaXZpZGVuZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBib29sIGlzV2l0aGRyYXc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHVpbnQyNTYgZGl2aWRlbmQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB1aW50MjU2IHdpdGhkcmF3OwogICAgICAgIAogICAgfQogICAgCiAgICBleGNoYW5nZVJhdGVbXSBwdWJsaWMgZXhjaGFuZ2VSYXRlQXJyYXk7ICAKCgltYXBwaW5nIChhZGRyZXNzID0+IE1lbWJlcikgcHVibGljIG1lbWJlcnM7IAogICAgYWRkcmVzc1tdIHB1YmxpYyBhZG1pbkFycmF5OyAgIAogICAgYWRkcmVzc1tdIHB1YmxpYyBtZW1iZXJBcnJheTsKCQogICAgYWRkcmVzcyBwdWJsaWMgZGVwb3NpdF9hZGRyZXNzOwogICAgdWludDI1NiBwdWJsaWMgSU5JVElBTF9TVVBQTFkgPSAyMTAwMDAwMDAwMDAwMDsKICAgIHVpbnQyNTYgcHVibGljIHRva2VuRXhjaGFuZ2VSYXRlSW5XZWkgPSAzMDAwMDAwMDA7CgoJLy/kuI3mrbjpm7YKCXVpbnQyNTYgcHVibGljIHRvdGFsX3Rva2Vud2VpID0gMDsgCgl1aW50MjU2IHB1YmxpYyBtaW5fcGF5X3dlaSA9IDA7CgoJLy8gZHJhd2FsbCDmrbjpm7YKCXVpbnQyNTYgcHVibGljIHRvdGFsX2RldmlkZW5kID0gMDsgLy9tZW1iZXIKCXVpbnQyNTYgcHVibGljIHRvdGFsX3dpdGhkcmF3ID0gMDsgLy9tZW1iZXIKICAgIHVpbnQyNTYgcHVibGljIGRlcG9zaXRfYW1vdW50ID0gMDsgIC8vZGVwb3NpdAogICAgdWludDI1NiBwdWJsaWMgd2l0aGRyYXdfYW1vdW50ID0gMDsgLy9kZXBvc2l0CiAgICB1aW50MjU2IHB1YmxpYyBkaXZpZGVuZF9hbW91bnQgPSAwOyAvL2FkbWluICAgCiAgICAKICAgIGZ1bmN0aW9uIFBpeGl1X0JldGEoKSB7CiAgICAgCiAgICAgICAgdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsgCiAgICAgICAgYWRtaW5BcnJheS5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIGFkbWluX3NldF9kZXBvc2l0KG1zZy5zZW5kZXIpOwogICAgICAgICAKICAgIH0KCiAgICBtb2RpZmllciBvbmx5RGVwb3NpdCgpIHsKICAgICAgICAKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZGVwb3NpdF9hZGRyZXNzKTsKICAgICAgICBfOwogICAgICAgIAogICAgfQogICAgCiAgICBtb2RpZmllciBvbmx5QWRtaW4oKSB7CiAgICAgICAgCiAgICAgICAgYm9vbCBvayA9IGFkbWluX2NoZWNrKG1zZy5zZW5kZXIpOwogICAgICAgIHJlcXVpcmUob2spOwogICAgICAgIF87CiAgICAgICAgCiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGFkbWluRXhpc3RzKGFkZHJlc3MgYWRtaW4pIHsKCiAgICAgICAgYm9vbCBvayA9IGZhbHNlOwogICAgICAgIGlmKGFkbWluICE9IG1zZy5zZW5kZXIpewogICAgICAgICAgICAKICAgICAgICAgICAgb2sgPSBhZG1pbl9jaGVjayhhZG1pbik7CiAgICAgICAgCiAgICAgICAgfQogICAgICAgIHJlcXVpcmUob2spOwogICAgICAgIF87IAogICAgICAgIAogICAgfQogICAgCiAgICBtb2RpZmllciBhZG1pbkRvZXNOb3RFeGlzdChhZGRyZXNzIGFkbWluKSB7CgogICAgICAgIGJvb2wgb2sgPSBhZG1pbl9jaGVjayhhZG1pbik7CiAgICAgICAgcmVxdWlyZSghb2spOwogICAgICAgIF87CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2NoZWNrKGFkZHJlc3MgYWRtaW4pIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyhib29sKXsKICAgICAgICAKICAgICAgICBib29sIG9rID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYWRtaW5BcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoYWRtaW4gPT0gYWRtaW5BcnJheVtpXSkgewogICAgICAgICAgICAgICAgb2sgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG9rOwogICAgICAgIAogICAgfQogICAgCiAgICBtb2RpZmllciBtZW1iZXJFeGlzdHMoYWRkcmVzcyBtZW1iZXIpIHsKCiAgICAgICAgYm9vbCBvayA9IGZhbHNlOwogICAgICAgIGlmIChtZW1iZXJzW21lbWJlcl0uaXNFeGlzdHMgPT0gdHJ1ZSkgewogICAgICAgICAgICAKICAgICAgICAgICAgb2sgPSB0cnVlOwogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShvayk7CiAgICAgICAgXzsKICAgICAgICAKICAgIH0KICAgIAogICAgbW9kaWZpZXIgaXNNZW1iZXIoKSB7CgogICAgICAgIGJvb2wgb2sgPSBmYWxzZTsKICAgICAgICBpZiAobWVtYmVyc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyA9PSB0cnVlKSB7ICAgICAgICAgICAgCiAgICAgICAgICAgIG9rID0gdHJ1ZTsgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShvayk7CiAgICAgICAgXzsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fZGVwb3NpdCh1aW50IHhFdGgpIG9ubHlBZG1pbnsKICAgICAgICAKICAgICAgICB1aW50MjU2IHh3ZWkgPSB4RXRoICogMTAqKjE4OwogICAgICAgIGRlcG9zaXRfYW1vdW50ICs9IHh3ZWk7CiAgICAgICAgCiAgICB9CiAgICAKICAgIC8qKgkqCeeuoeeQhuWToeeZvOaUvuiCoeaBrwkqCeavj+WAi+acg+WToeiCoeaBr+S+nSAJKgkqLwogICAgZnVuY3Rpb24gYWRtaW5fZGl2aWRlbmQodWludCB4RXRoKSBvbmx5QWRtaW57CiAgICAgICAgCgkJdWludDI1NiB4d2VpID0geEV0aCAqIDEwKioxODsKCQlyZXF1aXJlKHh3ZWkgPD0gKGRlcG9zaXRfYW1vdW50LWRpdmlkZW5kX2Ftb3VudCkgKTsgCgoJCWRpdmlkZW5kX2Ftb3VudCArPSB4d2VpOwogICAgICAgIHVpbnQyNTYgbGVuID0gbWVtYmVyQXJyYXkubGVuZ3RoOwkKICAgICAgICB1aW50IGkgPSAwOwogICAgICAgIGFkZHJlc3MgX21lbWJlcjsKICAgICAgICAKCQl1aW50IHRvdGFsX2JhbGFuY2VfZGl2aWRlbmVkPTA7CiAgICAgICAgZm9yKCBpID0gMDsgaSA8IGxlbjsgaSsrKXsgICAgICAgICAgICAKICAgICAgICAgICAgX21lbWJlciA9IG1lbWJlckFycmF5W2ldOwoJCQlpZihtZW1iZXJzW19tZW1iZXJdLmlzRGl2aWRlbmQpewoJCQkJdG90YWxfYmFsYW5jZV9kaXZpZGVuZWQgPSBiYWxhbmNlc1tfbWVtYmVyXTsgCgkJCX0gICAgICAgICAgICAKICAgICAgICB9CgkJdWludDI1NiBwZXJUb2tlbldlaSA9IHh3ZWkgLyAodG90YWxfYmFsYW5jZV9kaXZpZGVuZWQgLyAxMCAqKiA2KTsKICAgICAgICAgICAgCiAgICAgICAgZm9yKCBpID0gMDsgaSA8IGxlbjsgaSsrKXsgICAgICAgICAgICAKICAgICAgICAgICAgX21lbWJlciA9IG1lbWJlckFycmF5W2ldOwoJCQlpZihtZW1iZXJzW19tZW1iZXJdLmlzRGl2aWRlbmQpewoJCQkJdWludDI1NiB0aGlzV2VpID0gKGJhbGFuY2VzW19tZW1iZXJdIC8gMTAgKiogNikgKiBwZXJUb2tlbldlaTsKCQkJCW1lbWJlcnNbX21lbWJlcl0uZGl2aWRlbmQgKz0gdGhpc1dlaTsgCgkJCQl0b3RhbF9kZXZpZGVuZCArPSB0aGlzV2VpOwoJCQl9ICAgICAgICAgICAgCiAgICAgICAgfQogICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX3NldF9leGNoYW5nZV9yYXRlKHVpbnRbXSBleGNoYW5nZVJhdGVzKSBvbmx5QWRtaW57CiAgICAgICAgIAogICAgICAgIHVpbnQgbGVuID0gZXhjaGFuZ2VSYXRlcy5sZW5ndGg7CiAgICAgICAgZXhjaGFuZ2VSYXRlQXJyYXkubGVuZ3RoID0gMDsKICAgICAgICAKICAgICAgICBmb3IodWludCBpID0gMDsgaSA8IGxlbjsgaSArPSAzKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIHVpbnQgdGltZTEgPSBleGNoYW5nZVJhdGVzW2ldOwogICAgICAgICAgICB1aW50IHRpbWUyID0gZXhjaGFuZ2VSYXRlc1tpICsgMV07CiAgICAgICAgICAgIHVpbnQgdmFsdWUgPSBleGNoYW5nZVJhdGVzW2kgKyAyXSoxMDAwOwogICAgICAgICAgICBleGNoYW5nZVJhdGVBcnJheS5wdXNoKGV4Y2hhbmdlUmF0ZSh0aW1lMSwgdGltZTIsIHZhbHVlKSk7ICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KCglmdW5jdGlvbiBnZXRfZXhjaGFuZ2Vfd2VpKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKCgkJdWludCBsZW4gPSBleGNoYW5nZVJhdGVBcnJheS5sZW5ndGg7ICAKCQl1aW50IG5vd1RpbWUgPSBibG9jay50aW1lc3RhbXA7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMyl7CiAgICAgICAgICAgIAoJCQlleGNoYW5nZVJhdGUgbWVtb3J5IHJhdGUgPSBleGNoYW5nZVJhdGVBcnJheVtpXTsKICAgICAgICAgICAgdWludCB0aW1lMSA9IHJhdGUudGltZTE7CiAgICAgICAgICAgIHVpbnQgdGltZTIgPSByYXRlLnRpbWUyOwogICAgICAgICAgICB1aW50IHZhbHVlID0gcmF0ZS52YWx1ZTsKCQkJaWYgKG5vd1RpbWU+PSB0aW1lMSAmJiBub3dUaW1lPD10aW1lMikgewoJCQkJdG9rZW5FeGNoYW5nZVJhdGVJbldlaSA9IHZhbHVlOwoJCQkJcmV0dXJuIHZhbHVlOwoJCQl9CiAgICAgICAgICAgIAogICAgICAgIH0KCQlyZXR1cm4gdG9rZW5FeGNoYW5nZVJhdGVJbldlaTsKCX0KCQoJZnVuY3Rpb24gYWRtaW5fc2V0X21pbl9wYXkodWludDI1NiBfbWluX3BheSkgb25seUFkbWluewoJICAgIAoJICAgIHJlcXVpcmUoX21pbl9wYXkgPj0gMCk7CgkgICAgbWluX3BheV93ZWkgPSBfbWluX3BheSAqIDEwICoqIDE4OwoJICAgIAoJfQogICAgCiAgICBmdW5jdGlvbiBnZXRfYWRtaW5fbGlzdCgpIGNvbnN0YW50IHJldHVybnMoYWRkcmVzc1tdIF9hZG1pbkFycmF5KXsKICAgICAgICAKICAgICAgICBfYWRtaW5BcnJheSA9IGFkbWluQXJyYXk7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2FkZChhZGRyZXNzIGFkbWluKSBvbmx5QWRtaW4gYWRtaW5Eb2VzTm90RXhpc3QoYWRtaW4pewogICAgICAgIAogICAgICAgIGFkbWluQXJyYXkucHVzaChhZG1pbik7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2RlbChhZGRyZXNzIGFkbWluKSBvbmx5QWRtaW4gYWRtaW5FeGlzdHMoYWRtaW4pewogICAgICAgIAogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkbWluQXJyYXkubGVuZ3RoIC0gMTsgaSsrKQogICAgICAgICAgICBpZiAoYWRtaW5BcnJheVtpXSA9PSBhZG1pbikgewogICAgICAgICAgICAgICAgYWRtaW5BcnJheVtpXSA9IGFkbWluQXJyYXlbYWRtaW5BcnJheS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIGFkbWluQXJyYXkubGVuZ3RoIC09IDE7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX3NldF9kZXBvc2l0KGFkZHJlc3MgYWRkcikgb25seUFkbWluewogICAgICAgIAogICAgICAgIGRlcG9zaXRfYWRkcmVzcyA9IGFkZHI7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2FjdGl2ZV9wYXlhYmxlKCkgb25seUFkbWluewogICAgCiAgICAgICAgaXNQYXlhYmxlID0gdHJ1ZTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5faW5hY3RpdmVfcGF5YWJsZSgpIG9ubHlBZG1pbnsKICAgICAgICAKICAgICAgICBpc1BheWFibGUgPSBmYWxzZTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fYWN0aXZlX3dpdGhkcmF3YWJsZSgpIG9ubHlBZG1pbnsKICAgICAgICAKICAgICAgICBpc1dpdGhkcmF3YWJsZSA9IHRydWU7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2luYWN0aXZlX3dpdGhkcmF3YWJsZSgpIG9ubHlBZG1pbnsKICAgICAgICAKICAgICAgICBpc1dpdGhkcmF3YWJsZSA9IGZhbHNlOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9hY3RpdmVfZGl2aWRlbmQoYWRkcmVzcyBfbWVtYmVyKSBvbmx5QWRtaW4gbWVtYmVyRXhpc3RzKF9tZW1iZXIpewogICAgICAgIAogICAgICAgIG1lbWJlcnNbX21lbWJlcl0uaXNEaXZpZGVuZCA9IHRydWU7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2luYWN0aXZlX2RpdmlkZW5kKGFkZHJlc3MgX21lbWJlcikgb25seUFkbWluIG1lbWJlckV4aXN0cyhfbWVtYmVyKXsKICAgICAgICAKICAgICAgICBtZW1iZXJzW19tZW1iZXJdLmlzRGl2aWRlbmQgPSBmYWxzZTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fYWN0aXZlX3dpdGhkcmF3KGFkZHJlc3MgX21lbWJlcikgb25seUFkbWluIG1lbWJlckV4aXN0cyhfbWVtYmVyKXsKICAgICAgICAKICAgICAgICBtZW1iZXJzW19tZW1iZXJdLmlzV2l0aGRyYXcgPSB0cnVlOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9pbmFjdGl2ZV93aXRoZHJhdyhhZGRyZXNzIF9tZW1iZXIpIG9ubHlBZG1pbiBtZW1iZXJFeGlzdHMoX21lbWJlcil7CiAgICAgICAgCiAgICAgICAgbWVtYmVyc1tfbWVtYmVyXS5pc1dpdGhkcmF3ID0gZmFsc2U7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldF90b3RhbF9pbmZvKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2IF9kZXBvc2l0X2Ftb3VudCwgdWludDI1NiBfdG90YWxfZGV2aWRlbmQsIHVpbnQyNTYgX3RvdGFsX3JlbWFpbiwgdWludDI1NiBfdG90YWxfd2l0aGRyYXcpewoKICAgICAgICBfdG90YWxfcmVtYWluID0gdG90YWxfZGV2aWRlbmQgLSB0b3RhbF93aXRoZHJhdzsKICAgICAgICBfZGVwb3NpdF9hbW91bnQgPSBkZXBvc2l0X2Ftb3VudDsKICAgICAgICBfdG90YWxfZGV2aWRlbmQgPSB0b3RhbF9kZXZpZGVuZDsKICAgICAgICBfdG90YWxfd2l0aGRyYXcgPSB0b3RhbF93aXRoZHJhdzsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0X2luZm8oYWRkcmVzcyBfbWVtYmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlLCB1aW50MjU2IF9kZXZpZGVuZCwgdWludDI1NiBfcmVtYWluLCB1aW50MjU2IF93aXRoZHJhdyl7CiAgICAgICAgCiAgICAgICAgX2RldmlkZW5kID0gbWVtYmVyc1tfbWVtYmVyXS5kaXZpZGVuZDsKICAgICAgICBfd2l0aGRyYXcgPSBtZW1iZXJzW19tZW1iZXJdLndpdGhkcmF3OwogICAgICAgIF9yZW1haW4gPSBfZGV2aWRlbmQgLSBfd2l0aGRyYXc7CiAgICAgICAgX2JhbGFuY2UgPSBiYWxhbmNlc1tfbWVtYmVyXTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBpc01lbWJlciB7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBfcmVtYWluID0gbWVtYmVyc1ttc2cuc2VuZGVyXS5kaXZpZGVuZCAtIG1lbWJlcnNbbXNnLnNlbmRlcl0ud2l0aGRyYXc7CiAgICAgICAgcmVxdWlyZShfcmVtYWluID4gMCk7CiAgICAgICAgcmVxdWlyZShpc1dpdGhkcmF3YWJsZSk7CiAgICAgICAgcmVxdWlyZShtZW1iZXJzW21zZy5zZW5kZXJdLmlzV2l0aGRyYXcpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX3JlbWFpbik7CiAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS53aXRoZHJhdyArPSBfcmVtYWluOyAKICAgICAgICB0b3RhbF93aXRoZHJhdyArPSBfcmVtYWluOyAgICAgICAgICAKCiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXdfYWRtaW4odWludCB4RXRoKSBvbmx5RGVwb3NpdHsKCiAgICAgICAgdWludDI1NiBfd2l0aGRyYXcgPSB4RXRoICogMTAqKjE4OwoJCXJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gZGVwb3NpdF9hZGRyZXNzICk7CgoJCXJlcXVpcmUodGhpcy5iYWxhbmNlID4gX3dpdGhkcmF3KTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKF93aXRoZHJhdyk7CgogICAgICAgIHdpdGhkcmF3X2Ftb3VudCArPSBfd2l0aGRyYXc7ICAKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2l0aGRyYXdfYWxsX2FkbWluKGFkZHJlc3MgX2RlcG9zaXQpIG9ubHlBZG1pbiB7CiAgICAgICAgCgkJcmVxdWlyZSggX2RlcG9zaXQgPT0gZGVwb3NpdF9hZGRyZXNzICk7IAoKCQlfZGVwb3NpdC50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoKCQl0b3RhbF9kZXZpZGVuZCA9IDA7IC8vbWVtYmVyCgkJdG90YWxfd2l0aGRyYXcgPSAwOyAvL21lbWJlcgoJCWRlcG9zaXRfYW1vdW50ID0gMDsgIC8vZGVwb3NpdAoJCXdpdGhkcmF3X2Ftb3VudCA9IDA7IC8vZGVwb3NpdAoJCWRpdmlkZW5kX2Ftb3VudCA9IDA7IC8vYWRtaW4gICAKICAgICAgICAKICAgIH0KIAoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSAgICAgewoJCXJlcXVpcmUoX3RvICE9IGRlcG9zaXRfYWRkcmVzcyk7CiAgICAgICAgcmVxdWlyZShpc1BheWFibGUpOwoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CgkJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CgoJCWlmIChtZW1iZXJzW190b10uaXNFeGlzdHMgIT0gdHJ1ZSkgewkJCgkJCW1lbWJlcnNbX3RvXS5pc0V4aXN0cyA9IHRydWU7CgkJCW1lbWJlcnNbX3RvXS5pc0RpdmlkZW5kID0gdHJ1ZTsKCQkJbWVtYmVyc1tfdG9dLmlzV2l0aGRyYXcgPSB0cnVlOyAKCQkJbWVtYmVyQXJyYXkucHVzaChfdG8pOwkJCgkJfSAgCgoJCVRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKCX0KIAoJZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDMgKiAzMikgICAgIHsKCQlyZXF1aXJlKF90byAhPSBkZXBvc2l0X2FkZHJlc3MpOwoJCXJlcXVpcmUoX2Zyb20gIT0gZGVwb3NpdF9hZGRyZXNzKTsKICAgICAgICByZXF1aXJlKGlzUGF5YWJsZSk7CgkJdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsgCgkJcmVxdWlyZShfYWxsb3dhbmNlID49IF92YWx1ZSk7CgoJCWJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwoJCWJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKCQlhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CgkJCgkJaWYgKG1lbWJlcnNbX3RvXS5pc0V4aXN0cyAhPSB0cnVlKSB7CQkKCQkJbWVtYmVyc1tfdG9dLmlzRXhpc3RzID0gdHJ1ZTsKCQkJbWVtYmVyc1tfdG9dLmlzRGl2aWRlbmQgPSB0cnVlOwoJCQltZW1iZXJzW190b10uaXNXaXRoZHJhdyA9IHRydWU7IAoJCQltZW1iZXJBcnJheS5wdXNoKF90byk7CQkKCQl9ICAKCgkJVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKCX0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICAKICAgICAgICBwYXkoKTsKICAgICAgICAKICAgIH0KICAKICAgIGZ1bmN0aW9uIHBheSgpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wpIHsKICAgICAgCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiBtaW5fcGF5X3dlaSk7CiAgICAgICAgcmVxdWlyZShpc1BheWFibGUpOwogICAgICAgIAogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gZGVwb3NpdF9hZGRyZXNzKXsKICAgICAgICAgICAgIGRlcG9zaXRfYW1vdW50ICs9IG1zZy52YWx1ZTsKICAgICAgICB9ZWxzZXsKICAgICAgICAKICAgIAkJdWludDI1NiBleGNoYW5nZVdlaSA9IGdldF9leGNoYW5nZV93ZWkoKTsKICAgIAkJdWludDI1NiB0aGlzVG9rZW5XZWkgPSBleGNoYW5nZVdlaSAqIG1zZy52YWx1ZSAvIDEwKioxOCA7CiAgICAgICAgCiAgICAgICAgICAgIGlmIChtZW1iZXJzW21zZy5zZW5kZXJdLmlzRXhpc3RzICE9IHRydWUpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmlzRGl2aWRlbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5pc1dpdGhkcmF3ID0gdHJ1ZTsgCiAgICAgICAgICAgICAgICBtZW1iZXJBcnJheS5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gIAogICAgCQliYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0aGlzVG9rZW5XZWk7CiAgICAJCXRvdGFsX3Rva2Vud2VpICs9IHRoaXNUb2tlbldlaTsKCQkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAKICAgIH0KICAgICAgICAgICAgCiAgICBmdW5jdGlvbiBnZXRfdGhpc19iYWxhbmNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgICAgCiAgICB9CiAgICAKfQ=='.
	

]
