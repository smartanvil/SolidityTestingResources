Class {
	#name : #SRT53ce47cbe7f2be0aecd086a70182a98c907d024d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT53ce47cbe7f2be0aecd086a70182a98c907d024d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Cgpjb250cmFjdCBUb2tlbiB7CiAgLyogVGhpcyBpcyBhIHNsaWdodCBjaGFuZ2UgdG8gdGhlIEVSQzIwIGJhc2Ugc3RhbmRhcmQuCiAgICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgICBUaGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBhIGdldHRlciBmdW5jdGlvbiBmb3IgdGhlIHRvdGFsU3VwcGx5LgogICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgIGN1cnJlbnRseSByZWNvZ25pc2VkIGFzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBtYXRjaGluZyBhYnN0cmFjdAogICAgIGZ1bmN0aW9uIGJ5IHRoZSBjb21waWxlci4KICAqLwogIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgLy8vIEBub3RpY2Ugc2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8vLyBAbm90aWNlIGBtc2cuc2VuZGVyYCBhcHByb3ZlcyBgX3NwZW5kZXJgIHRvIHNwZW5kIGBfdmFsdWVgIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgYXBwcm92YWwgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAvL1JlcGxhY2UgdGhlIGlmIHdpdGggdGhpcyBvbmUgaW5zdGVhZC4KICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9zYW1lIGFzIGFib3ZlLiBSZXBsYWNlIHRoaXMgbGluZSB3aXRoIHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gcHJvdGVjdCBhZ2FpbnN0IHdyYXBwaW5nIHVpbnRzLgogICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KCmNvbnRyYWN0IEVhc3lNaW5lVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJlYXN5TUlORSBUb2tlbiI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRU1UIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgZnVuY3Rpb24gRWFzeU1pbmVUb2tlbihhZGRyZXNzIF9pY29BZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfcHJlSWNvQWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2Vhc3lNaW5lV2FsbGV0QWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgX2JvdW50eVdhbGxldEFkZHJlc3MpIHsKICAgIHJlcXVpcmUoX2ljb0FkZHJlc3MgIT0gMHgwKTsKICAgIHJlcXVpcmUoX3ByZUljb0FkZHJlc3MgIT0gMHgwKTsKICAgIHJlcXVpcmUoX2Vhc3lNaW5lV2FsbGV0QWRkcmVzcyAhPSAweDApOwogICAgcmVxdWlyZShfYm91bnR5V2FsbGV0QWRkcmVzcyAhPSAweDApOwoKICAgIHRvdGFsU3VwcGx5ID0gMzMwMDAwMDAgKiAxMCoqMTg7ICAgICAgICAgICAgICAgICAgICAgLy8gMzMuMDAwLjAwMCBFTVQKCiAgICB1aW50MjU2IGljb1Rva2VucyA9IDI3MDAwMDAwICogMTAqKjE4OyAgICAgICAgICAgICAgIC8vIDI3LjAwMC4wMDAgRU1UCgogICAgdWludDI1NiBwcmVJY29Ub2tlbnMgPSAyMDAwMDAwICogMTAqKjE4OyAgICAgICAgICAgICAvLyAyLjAwMC4wMDAgRU1UCgogICAgdWludDI1NiBlYXN5TWluZVRva2VucyA9IDMwMDAwMDAgKiAxMCoqMTg7ICAgICAgICAgICAvLyAxLjUwMC4wMDAgRU1UIGRldiB0ZWFtICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNTAwLjAwMCBFTVQgYWR2aXNvcnMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxLjAwMC4wMDAgRU1UIGVhc3lNSU5FIGNvcnBvcmF0aW9uICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPSAzLjAwMC4wMDAgRU1UCgogICAgdWludDI1NiBib3VudHlUb2tlbnMgPSAxMDAwMDAwICogMTAqKjE4OyAgICAgICAgICAgICAvLyAxLjAwMC4wMDAgRU1UCgogICAgYXNzZXJ0KGljb1Rva2VucyArIHByZUljb1Rva2VucyArIGVhc3lNaW5lVG9rZW5zICsgYm91bnR5VG9rZW5zID09IHRvdGFsU3VwcGx5KTsKCiAgICBiYWxhbmNlc1tfaWNvQWRkcmVzc10gPSBpY29Ub2tlbnM7CiAgICBUcmFuc2ZlcigwLCBfaWNvQWRkcmVzcywgaWNvVG9rZW5zKTsKCiAgICBiYWxhbmNlc1tfcHJlSWNvQWRkcmVzc10gPSBwcmVJY29Ub2tlbnM7CiAgICBUcmFuc2ZlcigwLCBfcHJlSWNvQWRkcmVzcywgcHJlSWNvVG9rZW5zKTsKCiAgICBiYWxhbmNlc1tfZWFzeU1pbmVXYWxsZXRBZGRyZXNzXSA9IGVhc3lNaW5lVG9rZW5zOwogICAgVHJhbnNmZXIoMCwgX2Vhc3lNaW5lV2FsbGV0QWRkcmVzcywgZWFzeU1pbmVUb2tlbnMpOwoKICAgIGJhbGFuY2VzW19ib3VudHlXYWxsZXRBZGRyZXNzXSA9IGJvdW50eVRva2VuczsKICAgIFRyYW5zZmVyKDAsIF9ib3VudHlXYWxsZXRBZGRyZXNzLCBib3VudHlUb2tlbnMpOwogIH0KCiAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIDB4MCwgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQp9Cgpjb250cmFjdCBFYXN5TWluZVRva2VuV2FsbGV0IHsKCiAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgVkVTVElOR19QRVJJT0QgPSAxODAgZGF5czsKICB1aW50MjU2IGNvbnN0YW50IHB1YmxpYyBEQUlMWV9GVU5EU19SRUxFQVNFID0gMTUwMDAgKiAxMCoqMTg7IC8vIDAuNSUgKiAzTSB0b2tlbnMgPSAxNWsgdG9rZW5zIGEgZGF5CgogIGFkZHJlc3MgcHVibGljIG93bmVyOwogIGFkZHJlc3MgcHVibGljIHdpdGhkcmF3YWxBZGRyZXNzOwogIFRva2VuIHB1YmxpYyBlYXN5TWluZVRva2VuOwogIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFdpdGhkcmF3bjsKCiAgbW9kaWZpZXIgaXNPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gRWFzeU1pbmVUb2tlbldhbGxldCgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIGZ1bmN0aW9uIHNldHVwKGFkZHJlc3MgX2Vhc3lNaW5lVG9rZW4sIGFkZHJlc3MgX3dpdGhkcmF3YWxBZGRyZXNzKQogICAgcHVibGljCiAgICBpc093bmVyCiAgewogICAgcmVxdWlyZShfZWFzeU1pbmVUb2tlbiAhPSAweDApOwogICAgcmVxdWlyZShfd2l0aGRyYXdhbEFkZHJlc3MgIT0gMHgwKTsKCiAgICBlYXN5TWluZVRva2VuID0gVG9rZW4oX2Vhc3lNaW5lVG9rZW4pOwogICAgd2l0aGRyYXdhbEFkZHJlc3MgPSBfd2l0aGRyYXdhbEFkZHJlc3M7CiAgICBzdGFydFRpbWUgPSBub3c7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50MjU2IHJlcXVlc3RlZEFtb3VudCkKICAgIHB1YmxpYwogICAgaXNPd25lcgogICAgcmV0dXJucyAodWludDI1NiBhbW91bnQpCiAgewogICAgdWludDI1NiBsaW1pdCA9IG1heFBvc3NpYmxlV2l0aGRyYXdhbCgpOwogICAgdWludDI1NiB3aXRoZHJhd2FsQW1vdW50ID0gcmVxdWVzdGVkQW1vdW50OwogICAgaWYgKHJlcXVlc3RlZEFtb3VudCA+IGxpbWl0KSB7CiAgICAgIHdpdGhkcmF3YWxBbW91bnQgPSBsaW1pdDsKICAgIH0KCiAgICBpZiAod2l0aGRyYXdhbEFtb3VudCA+IDApIHsKICAgICAgaWYgKCFlYXN5TWluZVRva2VuLnRyYW5zZmVyKHdpdGhkcmF3YWxBZGRyZXNzLCB3aXRoZHJhd2FsQW1vdW50KSkgewogICAgICAgIHJldmVydCgpOwogICAgICB9CiAgICAgIHRvdGFsV2l0aGRyYXduICs9IHdpdGhkcmF3YWxBbW91bnQ7CiAgICB9CgogICAgcmV0dXJuIHdpdGhkcmF3YWxBbW91bnQ7CiAgfQoKICBmdW5jdGlvbiBtYXhQb3NzaWJsZVdpdGhkcmF3YWwoKQogICAgcHVibGljCiAgICBjb25zdGFudAogICAgcmV0dXJucyAodWludDI1NikKICB7CiAgICBpZiAobm93IDwgc3RhcnRUaW1lICsgVkVTVElOR19QRVJJT0QpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9IGVsc2UgewogICAgICB1aW50MjU2IGRheXNQYXNzZWQgPSAobm93IC0gKHN0YXJ0VGltZSArIFZFU1RJTkdfUEVSSU9EKSkgLyA4NjQwMDsKICAgICAgdWludDI1NiByZXMgPSBEQUlMWV9GVU5EU19SRUxFQVNFICogZGF5c1Bhc3NlZCAtIHRvdGFsV2l0aGRyYXduOwogICAgICBpZiAocmVzIDwgMCkgewogICAgICAgIHJldHVybiAwOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0KICAgIH0KICB9Cgp9Cgpjb250cmFjdCBFYXN5TWluZUljbyB7CgogIGV2ZW50IFRva2Vuc1NvbGQoYWRkcmVzcyBpbmRleGVkIGJ1eWVyLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgVG9rZW5zUmVzZXJ2ZWQodWludDI1NiBhbW91bnQpOwogIGV2ZW50IEljb0ZpbmlzaGVkKHVpbnQyNTYgYnVybmVkKTsKCiAgc3RydWN0IFByaWNlVGhyZXNob2xkIHsKICAgIHVpbnQyNTYgdG9rZW5Db3VudDsKICAgIHVpbnQyNTYgcHJpY2U7CiAgICB1aW50MjU2IHRva2Vuc1NvbGQ7CiAgfQoKICAvKiBNYXhpbXVtIGR1cmF0aW9uIG9mIElDTyAqLwogIHVpbnQyNTYgcHVibGljIG1heER1cmF0aW9uOwoKICAvKiBNaW5pbXVtIHN0YXJ0IGRlbGF5IGluIGJsb2NrcyAqLwogIHVpbnQyNTYgcHVibGljIG1pblN0YXJ0RGVsYXk7CgogIC8qIFRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0ICovCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogIC8qIFRoZSBzeXMgYWRkcmVzcyB0aGF0IGhhbmRsZXMgdG9rZW4gcmVzZXJ2YXRpb24gKi8KICBhZGRyZXNzIHB1YmxpYyBzeXM7CgogIC8qIFRoZSByZXNlcnZhdGlvbiBhZGRyZXNzIC0gd2hlcmUgcmVzZXJ2ZWQgdG9rZW5zIHdpbGwgYmUgc2VuZCAqLwogIGFkZHJlc3MgcHVibGljIHJlc2VydmF0aW9uQWRkcmVzczsKCiAgLyogVGhlIGVhc3lNSU5FIHdhbGxldCBhZGRyZXNzICovCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvKiBUaGUgZWFzeU1JTkUgdG9rZW4gKi8KICBFYXN5TWluZVRva2VuIHB1YmxpYyBlYXN5TWluZVRva2VuOwoKICAvKiBJQ08gc3RhcnQgYmxvY2sgKi8KICB1aW50MjU2IHB1YmxpYyBzdGFydEJsb2NrOwoKICAvKiBJQ08gZW5kIGJsb2NrICovCiAgdWludDI1NiBwdWJsaWMgZW5kQmxvY2s7CgogIC8qIFRoZSB0aHJlZSBwcmljZSB0aHJlc2hvbGRzICovCiAgUHJpY2VUaHJlc2hvbGRbM10gcHVibGljIHByaWNlVGhyZXNob2xkczsKCiAgLyogQ3VycmVudCBzdGFnZSAqLwogIFN0YWdlcyBwdWJsaWMgc3RhZ2U7CgogIGVudW0gU3RhZ2VzIHsKICAgIERlcGxveWVkLAogICAgU2V0VXAsCiAgICBTdGFydFNjaGVkdWxlZCwKICAgIFN0YXJ0ZWQsCiAgICBFbmRlZAogIH0KCiAgbW9kaWZpZXIgYXRTdGFnZShTdGFnZXMgX3N0YWdlKSB7CiAgICByZXF1aXJlKHN0YWdlID09IF9zdGFnZSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaXNPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgaXNTeXMoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc3lzKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBpc1ZhbGlkUGF5bG9hZCgpIHsKICAgIHJlcXVpcmUobXNnLmRhdGEubGVuZ3RoID09IDAgfHwgbXNnLmRhdGEubGVuZ3RoID09IDQpOwogICAgXzsKICB9CgogIG1vZGlmaWVyIHRpbWVkVHJhbnNpdGlvbnMoKSB7CiAgICBpZiAoc3RhZ2UgPT0gU3RhZ2VzLlN0YXJ0U2NoZWR1bGVkICYmIGJsb2NrLm51bWJlciA+PSBzdGFydEJsb2NrKSB7CiAgICAgIHN0YWdlID0gU3RhZ2VzLlN0YXJ0ZWQ7CiAgICB9CiAgICBpZiAoc3RhZ2UgPT0gU3RhZ2VzLlN0YXJ0ZWQgJiYgYmxvY2subnVtYmVyID49IGVuZEJsb2NrKSB7CiAgICAgIGZpbmFsaXplKCk7CiAgICB9CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gRWFzeU1pbmVJY28oYWRkcmVzcyBfd2FsbGV0KQogICAgcHVibGljIHsKICAgIHJlcXVpcmUoX3dhbGxldCAhPSAweDApOwoKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICBzdGFnZSA9IFN0YWdlcy5EZXBsb3llZDsKICB9CgogIC8qIEZhbGxiYWNrIGZ1bmN0aW9uICovCiAgZnVuY3Rpb24oKQogICAgcHVibGljCiAgICBwYXlhYmxlCiAgICB0aW1lZFRyYW5zaXRpb25zIHsKICAgIGlmIChzdGFnZSA9PSBTdGFnZXMuU3RhcnRlZCkgewogICAgICBidXlUb2tlbnMoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldmVydCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc2V0dXAoYWRkcmVzcyBfZWFzeU1pbmVUb2tlbiwgYWRkcmVzcyBfc3lzLCBhZGRyZXNzIF9yZXNlcnZhdGlvbkFkZHJlc3MsIHVpbnQyNTYgX21pblN0YXJ0RGVsYXksIHVpbnQyNTYgX21heER1cmF0aW9uKQogICAgcHVibGljCiAgICBpc093bmVyCiAgICBhdFN0YWdlKFN0YWdlcy5EZXBsb3llZCkKICB7CiAgICByZXF1aXJlKF9lYXN5TWluZVRva2VuICE9IDB4MCk7CiAgICByZXF1aXJlKF9zeXMgIT0gMHgwKTsKICAgIHJlcXVpcmUoX3Jlc2VydmF0aW9uQWRkcmVzcyAhPSAweDApOwogICAgcmVxdWlyZShfbWluU3RhcnREZWxheSA+IDApOwogICAgcmVxdWlyZShfbWF4RHVyYXRpb24gPiAwKTsKCiAgICBwcmljZVRocmVzaG9sZHNbMF0gPSBQcmljZVRocmVzaG9sZCgyMDAwMDAwICAqIDEwKioxOCwgMC4wMDA3MCAqIDEwKioxOCwgMCk7CiAgICBwcmljZVRocmVzaG9sZHNbMV0gPSBQcmljZVRocmVzaG9sZCgyMDAwMDAwICAqIDEwKioxOCwgMC4wMDA3NSAqIDEwKioxOCwgMCk7CiAgICBwcmljZVRocmVzaG9sZHNbMl0gPSBQcmljZVRocmVzaG9sZCgyMzAwMDAwMCAqIDEwKioxOCwgMC4wMDA4MCAqIDEwKioxOCwgMCk7CgogICAgZWFzeU1pbmVUb2tlbiA9IEVhc3lNaW5lVG9rZW4oX2Vhc3lNaW5lVG9rZW4pOwogICAgc3lzID0gX3N5czsKICAgIHJlc2VydmF0aW9uQWRkcmVzcyA9IF9yZXNlcnZhdGlvbkFkZHJlc3M7CiAgICBtaW5TdGFydERlbGF5ID0gX21pblN0YXJ0RGVsYXk7CiAgICBtYXhEdXJhdGlvbiA9IF9tYXhEdXJhdGlvbjsKCiAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiYWxhbmNlCiAgICBhc3NlcnQoZWFzeU1pbmVUb2tlbi5iYWxhbmNlT2YodGhpcykgPT0gbWF4VG9rZW5zU29sZCgpKTsKCiAgICBzdGFnZSA9IFN0YWdlcy5TZXRVcDsKICB9CgogIGZ1bmN0aW9uIG1heFRva2Vuc1NvbGQoKQogICAgcHVibGljCiAgICBjb25zdGFudAogICAgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiB0b3RhbCA9IDA7CiAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgcHJpY2VUaHJlc2hvbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRvdGFsICs9IHByaWNlVGhyZXNob2xkc1tpXS50b2tlbkNvdW50OwogICAgfQogICAgcmV0dXJuIHRvdGFsOwogIH0KCiAgZnVuY3Rpb24gdG90YWxUb2tlbnNTb2xkKCkKICAgIHB1YmxpYwogICAgY29uc3RhbnQKICAgIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgdG90YWwgPSAwOwogICAgZm9yICh1aW50OCBpID0gMDsgaSA8IHByaWNlVGhyZXNob2xkcy5sZW5ndGg7IGkrKykgewogICAgICB0b3RhbCArPSBwcmljZVRocmVzaG9sZHNbaV0udG9rZW5zU29sZDsKICAgIH0KICAgIHJldHVybiB0b3RhbDsKICB9CgogIC8qIFNjaGVkdWxlcyBzdGFydCBvZiB0aGUgSUNPICovCiAgZnVuY3Rpb24gc2NoZWR1bGVTdGFydCh1aW50MjU2IF9zdGFydEJsb2NrKQogICAgcHVibGljCiAgICBpc093bmVyCiAgICBhdFN0YWdlKFN0YWdlcy5TZXRVcCkKICB7CiAgICAvLyBTdGFydCBhbGxvd2VkIG1pbmltdW0gNTAwMCBibG9ja3MgZnJvbSBub3cKICAgIHJlcXVpcmUoX3N0YXJ0QmxvY2sgPiBibG9jay5udW1iZXIgKyBtaW5TdGFydERlbGF5KTsKCiAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICBlbmRCbG9jayA9IHN0YXJ0QmxvY2sgKyBtYXhEdXJhdGlvbjsKICAgIHN0YWdlID0gU3RhZ2VzLlN0YXJ0U2NoZWR1bGVkOwogIH0KCiAgZnVuY3Rpb24gdXBkYXRlU3RhZ2UoKQogICAgcHVibGljCiAgICB0aW1lZFRyYW5zaXRpb25zCiAgICByZXR1cm5zIChTdGFnZXMpCiAgewogICAgcmV0dXJuIHN0YWdlOwogIH0KCiAgZnVuY3Rpb24gYnV5VG9rZW5zKCkKICAgIHB1YmxpYwogICAgcGF5YWJsZQogICAgaXNWYWxpZFBheWxvYWQKICAgIHRpbWVkVHJhbnNpdGlvbnMKICAgIGF0U3RhZ2UoU3RhZ2VzLlN0YXJ0ZWQpCiAgewogICAgcmVxdWlyZShtc2cudmFsdWUgPiAwKTsKCiAgICB1aW50MjU2IGFtb3VudFJlbWFpbmluZyA9IG1zZy52YWx1ZTsKICAgIHVpbnQyNTYgdG9rZW5zVG9SZWNlaXZlID0gMDsKCiAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgcHJpY2VUaHJlc2hvbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVpbnQyNTYgdG9rZW5zQXZhaWxhYmxlID0gcHJpY2VUaHJlc2hvbGRzW2ldLnRva2VuQ291bnQgLSBwcmljZVRocmVzaG9sZHNbaV0udG9rZW5zU29sZDsKICAgICAgdWludDI1NiBtYXhUb2tlbnNCeUFtb3VudCA9IGFtb3VudFJlbWFpbmluZyAqIDEwKioxOCAvIHByaWNlVGhyZXNob2xkc1tpXS5wcmljZTsKCiAgICAgIHVpbnQyNTYgdG9rZW5zOwogICAgICBpZiAobWF4VG9rZW5zQnlBbW91bnQgPiB0b2tlbnNBdmFpbGFibGUpIHsKICAgICAgICB0b2tlbnMgPSB0b2tlbnNBdmFpbGFibGU7CiAgICAgICAgYW1vdW50UmVtYWluaW5nIC09IChwcmljZVRocmVzaG9sZHNbaV0ucHJpY2UgKiB0b2tlbnMpIC8gMTAqKjE4OwogICAgICB9IGVsc2UgewogICAgICAgIHRva2VucyA9IG1heFRva2Vuc0J5QW1vdW50OwogICAgICAgIGFtb3VudFJlbWFpbmluZyA9IDA7CiAgICAgIH0KICAgICAgcHJpY2VUaHJlc2hvbGRzW2ldLnRva2Vuc1NvbGQgKz0gdG9rZW5zOwogICAgICB0b2tlbnNUb1JlY2VpdmUgKz0gdG9rZW5zOwogICAgfQoKICAgIGFzc2VydCh0b2tlbnNUb1JlY2VpdmUgPiAwKTsKCiAgICBpZiAoYW1vdW50UmVtYWluaW5nICE9IDApIHsKICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIuc2VuZChhbW91bnRSZW1haW5pbmcpKTsKICAgIH0KCiAgICBhc3NlcnQod2FsbGV0LnNlbmQobXNnLnZhbHVlIC0gYW1vdW50UmVtYWluaW5nKSk7CiAgICBhc3NlcnQoZWFzeU1pbmVUb2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCB0b2tlbnNUb1JlY2VpdmUpKTsKCiAgICBpZiAodG90YWxUb2tlbnNTb2xkKCkgPT0gbWF4VG9rZW5zU29sZCgpKSB7CiAgICAgIGZpbmFsaXplKCk7CiAgICB9CgogICAgVG9rZW5zU29sZChtc2cuc2VuZGVyLCB0b2tlbnNUb1JlY2VpdmUpOwogIH0KCiAgZnVuY3Rpb24gcmVzZXJ2ZVRva2Vucyh1aW50MjU2IHRva2VuQ291bnQpCiAgICBwdWJsaWMKICAgIGlzU3lzCiAgICB0aW1lZFRyYW5zaXRpb25zCiAgICBhdFN0YWdlKFN0YWdlcy5TdGFydGVkKQogIHsKICAgIHJlcXVpcmUodG9rZW5Db3VudCA+IDApOwoKICAgIHVpbnQyNTYgdG9rZW5zUmVtYWluaW5nID0gdG9rZW5Db3VudDsKCiAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgcHJpY2VUaHJlc2hvbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHVpbnQyNTYgdG9rZW5zQXZhaWxhYmxlID0gcHJpY2VUaHJlc2hvbGRzW2ldLnRva2VuQ291bnQgLSBwcmljZVRocmVzaG9sZHNbaV0udG9rZW5zU29sZDsKCiAgICAgIHVpbnQyNTYgdG9rZW5zOwogICAgICBpZiAodG9rZW5zUmVtYWluaW5nID4gdG9rZW5zQXZhaWxhYmxlKSB7CiAgICAgICAgdG9rZW5zID0gdG9rZW5zQXZhaWxhYmxlOwogICAgICB9IGVsc2UgewogICAgICAgIHRva2VucyA9IHRva2Vuc1JlbWFpbmluZzsKICAgICAgfQogICAgICBwcmljZVRocmVzaG9sZHNbaV0udG9rZW5zU29sZCArPSB0b2tlbnM7CiAgICAgIHRva2Vuc1JlbWFpbmluZyAtPSB0b2tlbnM7CiAgICB9CgogICAgdWludDI1NiB0b2tlbnNSZXNlcnZlZCA9IHRva2VuQ291bnQgLSB0b2tlbnNSZW1haW5pbmc7CgogICAgYXNzZXJ0KGVhc3lNaW5lVG9rZW4udHJhbnNmZXIocmVzZXJ2YXRpb25BZGRyZXNzLCB0b2tlbnNSZXNlcnZlZCkpOwoKICAgIGlmICh0b3RhbFRva2Vuc1NvbGQoKSA9PSBtYXhUb2tlbnNTb2xkKCkpIHsKICAgICAgZmluYWxpemUoKTsKICAgIH0KCiAgICBUb2tlbnNSZXNlcnZlZCh0b2tlbnNSZXNlcnZlZCk7CiAgfQoKICAvKiBUcmFuc2ZlciBhbnkgZXRoZXIgYWNjaWRlbnRhbGx5IGxlZnQgaW4gdGhpcyBjb250cmFjdCAqLwogIGZ1bmN0aW9uIGNsZWFudXAoKQogICAgcHVibGljCiAgICBpc093bmVyCiAgICB0aW1lZFRyYW5zaXRpb25zCiAgICBhdFN0YWdlKFN0YWdlcy5FbmRlZCkKICB7CiAgICBhc3NlcnQob3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKTsKICB9CgogIGZ1bmN0aW9uIGZpbmFsaXplKCkKICAgIHByaXZhdGUKICB7CiAgICBzdGFnZSA9IFN0YWdlcy5FbmRlZDsKCiAgICAvLyBidXJuIHVuc29sZCB0b2tlbnMKICAgIHVpbnQyNTYgYmFsYW5jZSA9IGVhc3lNaW5lVG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgZWFzeU1pbmVUb2tlbi5idXJuKGJhbGFuY2UpOwogICAgSWNvRmluaXNoZWQoYmFsYW5jZSk7CiAgfQoKfQ=='.
	

]
