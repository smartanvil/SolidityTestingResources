Class {
	#name : #SRT608c460a08b10ca06b9b5fe45451cf2552fa2e4f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT608c460a08b10ca06b9b5fe45451cf2552fa2e4f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBCVENSZWxheSB7CiAgICBmdW5jdGlvbiBnZXRMYXN0QmxvY2tIZWlnaHQoKSBwdWJsaWMgcmV0dXJucyAoaW50KTsKICAgIGZ1bmN0aW9uIGdldEJsb2NrY2hhaW5IZWFkKCkgcHVibGljIHJldHVybnMgKGludCk7CiAgICBmdW5jdGlvbiBnZXRGZWVBbW91bnQoaW50IGJsb2NrSGFzaCkgcHVibGljIHJldHVybnMgKGludCk7CiAgICBmdW5jdGlvbiBnZXRCbG9ja0hlYWRlcihpbnQgYmxvY2tIYXNoKSBwdWJsaWMgcmV0dXJucyAoYnl0ZXMzMls1XSk7CiAgICBmdW5jdGlvbiBzdG9yZUJsb2NrSGVhZGVyKGJ5dGVzIGJsb2NrSGVhZGVyKSBwdWJsaWMgcmV0dXJucyAoaW50KTsKfQoKY29udHJhY3QgRXNjcm93IHsKICAgIGZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyByZWNpcGllbnQpIHBheWFibGU7Cn0KCmNvbnRyYWN0IEV0aGVyZXVtTG90dGVyeSB7CiAgICB1aW50IGNvbnN0YW50IEdBU19MSU1JVF9ERVBPU0lUID0gMzAwMDAwOwogICAgdWludCBjb25zdGFudCBHQVNfTElNSVRfQlVZID0gNDUwMDAwOwoKICAgIHN0cnVjdCBMb3R0ZXJ5IHsKICAgICAgICB1aW50IGphY2twb3Q7CiAgICAgICAgaW50IGRlY2lkaW5nQmxvY2s7CiAgICAgICAgdWludCBudW1UaWNrZXRzOwogICAgICAgIHVpbnQgbnVtVGlja2V0c1NvbGQ7CiAgICAgICAgdWludCB0aWNrZXRQcmljZTsKICAgICAgICBpbnQgd2lubmluZ1RpY2tldDsKICAgICAgICBhZGRyZXNzIHdpbm5lcjsKICAgICAgICB1aW50IGZpbmFsaXphdGlvbkJsb2NrOwogICAgICAgIGFkZHJlc3MgZmluYWxpemVyOwogICAgICAgIHN0cmluZyBtZXNzYWdlOwogICAgICAgIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgdGlja2V0czsKICAgICAgICBpbnQgbmVhcmVzdEtub3duQmxvY2s7CiAgICAgICAgaW50IG5lYXJlc3RLbm93bkJsb2NrSGFzaDsKICAgIH0KCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIGFkbWluOwogICAgYWRkcmVzcyBwdWJsaWMgcHJvcG9zZWRPd25lcjsKCiAgICBpbnQgcHVibGljIGlkID0gLTE7CiAgICB1aW50IHB1YmxpYyBsYXN0SW5pdFRpbWVzdGFtcDsKICAgIHVpbnQgcHVibGljIGxhc3RTYWxlVGltZXN0YW1wOwoKICAgIHVpbnQgcHVibGljIHJlY2VudEFjdGl2aXR5SWR4OwogICAgdWludFsxMDAwXSBwdWJsaWMgcmVjZW50QWN0aXZpdHk7CgogICAgbWFwcGluZyAoaW50ID0+IExvdHRlcnkpIHB1YmxpYyBsb3R0ZXJpZXM7CgogICAgYWRkcmVzcyBwdWJsaWMgYnRjUmVsYXk7CiAgICBhZGRyZXNzIHB1YmxpYyBlc2Nyb3c7CgogICAgZW51bSBSZWFzb24geyBUaWNrZXRTYWxlQ2xvc2VkLCBUaWNrZXRBbHJlYWR5U29sZCwgSW5zdWZmaWNpZW50R2FzIH0KICAgIGV2ZW50IFB1cmNoYXNlRmFpbGVkKGFkZHJlc3MgaW5kZXhlZCBidXllciwgdWludCBtYXJrLCBSZWFzb24gcmVhc29uKTsKICAgIGV2ZW50IFB1cmNoYXNlU3VjY2Vzc2Z1bChhZGRyZXNzIGluZGV4ZWQgYnV5ZXIsIHVpbnQgbWFyayk7CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUFkbWluT3JPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgYWZ0ZXJJbml0aWFsaXphdGlvbiB7CiAgICAgICAgcmVxdWlyZShpZCA+PSAwKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIEV0aGVyZXVtTG90dGVyeShhZGRyZXNzIF9idGNSZWxheSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF9lc2Nyb3cpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRtaW4gPSBtc2cuc2VuZGVyOwogICAgICAgIGJ0Y1JlbGF5ID0gX2J0Y1JlbGF5OwogICAgICAgIGVzY3JvdyA9IF9lc2Nyb3c7CiAgICB9CgogICAgZnVuY3Rpb24gbmVlZHNJbml0aWFsaXphdGlvbigpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gaWQgPT0gLTEgfHwgbG90dGVyaWVzW2lkXS5maW5hbGl6YXRpb25CbG9jayA+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdExvdHRlcnkodWludCBfamFja3BvdCwgdWludCBfbnVtVGlja2V0cywgdWludCBfdGlja2V0UHJpY2UpCiAgICAgICAgICAgICBvbmx5QWRtaW5Pck93bmVyIHsKICAgICAgICByZXF1aXJlKG5lZWRzSW5pdGlhbGl6YXRpb24oKSk7CiAgICAgICAgcmVxdWlyZShfbnVtVGlja2V0cyAqIF90aWNrZXRQcmljZSA+IF9qYWNrcG90KTsKCiAgICAgICAgaWQgKz0gMTsKICAgICAgICBsb3R0ZXJpZXNbaWRdLmphY2twb3QgPSBfamFja3BvdDsKICAgICAgICBsb3R0ZXJpZXNbaWRdLmRlY2lkaW5nQmxvY2sgPSAtMTsKICAgICAgICBsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHMgPSBfbnVtVGlja2V0czsKICAgICAgICBsb3R0ZXJpZXNbaWRdLnRpY2tldFByaWNlID0gX3RpY2tldFByaWNlOwogICAgICAgIGxvdHRlcmllc1tpZF0ud2lubmluZ1RpY2tldCA9IC0xOwoKICAgICAgICBsYXN0SW5pdFRpbWVzdGFtcCA9IGJsb2NrLnRpbWVzdGFtcDsKICAgICAgICBsYXN0U2FsZVRpbWVzdGFtcCA9IDA7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VGlja2V0cyh1aW50W10gX3RpY2tldHMsIHVpbnQgX21hcmssIGJ5dGVzIF9leHRyYURhdGEpCiAgICAgICAgICAgICBwYXlhYmxlIGFmdGVySW5pdGlhbGl6YXRpb24gewogICAgICAgIGlmIChtc2cuZ2FzIDwgR0FTX0xJTUlUX0JVWSkgewogICAgICAgICAgICBQdXJjaGFzZUZhaWxlZChtc2cuc2VuZGVyLCBfbWFyaywgUmVhc29uLkluc3VmZmljaWVudEdhcyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHNTb2xkID09IGxvdHRlcmllc1tpZF0ubnVtVGlja2V0cykgewogICAgICAgICAgICBQdXJjaGFzZUZhaWxlZChtc2cuc2VuZGVyLCBfbWFyaywgUmVhc29uLlRpY2tldFNhbGVDbG9zZWQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXF1aXJlKF90aWNrZXRzLmxlbmd0aCA+IDApOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IF90aWNrZXRzLmxlbmd0aCAqIGxvdHRlcmllc1tpZF0udGlja2V0UHJpY2UpOwoKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfdGlja2V0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB1aW50IHRpY2tldCA9IF90aWNrZXRzW2ldOwogICAgICAgICAgICByZXF1aXJlKHRpY2tldCA+PSAwKTsKICAgICAgICAgICAgcmVxdWlyZSh0aWNrZXQgPCBsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHMpOwoKICAgICAgICAgICAgaWYgKGxvdHRlcmllc1tpZF0udGlja2V0c1t0aWNrZXRdICE9IDApIHsKICAgICAgICAgICAgICAgIFB1cmNoYXNlRmFpbGVkKG1zZy5zZW5kZXIsIF9tYXJrLCBSZWFzb24uVGlja2V0QWxyZWFkeVNvbGQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX3RpY2tldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGlja2V0ID0gX3RpY2tldHNbaV07CiAgICAgICAgICAgIGxvdHRlcmllc1tpZF0udGlja2V0c1t0aWNrZXRdID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlbcmVjZW50QWN0aXZpdHlJZHhdID0gdGlja2V0OwoKICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlJZHggKz0gMTsKICAgICAgICAgICAgaWYgKHJlY2VudEFjdGl2aXR5SWR4ID49IHJlY2VudEFjdGl2aXR5Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmVjZW50QWN0aXZpdHlJZHggPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHNTb2xkICs9IF90aWNrZXRzLmxlbmd0aDsKICAgICAgICBsYXN0U2FsZVRpbWVzdGFtcCA9IGJsb2NrLnRpbWVzdGFtcDsKCiAgICAgICAgQlRDUmVsYXkoYnRjUmVsYXkpLnN0b3JlQmxvY2tIZWFkZXIoX2V4dHJhRGF0YSk7CgogICAgICAgIFB1cmNoYXNlU3VjY2Vzc2Z1bChtc2cuc2VuZGVyLCBfbWFyayk7CiAgICB9CgogICAgZnVuY3Rpb24gbmVlZHNCbG9ja0ZpbmFsaXphdGlvbigpCiAgICAgICAgICAgICBhZnRlckluaXRpYWxpemF0aW9uIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyBDaGVjayB0aGUgdGltZXN0YW1wIG9mIHRoZSBsYXRlc3QgYmxvY2sga25vd24gdG8gQlRDUmVsYXkKICAgICAgICAvLyBhbmQgcmVxdWlyZSBpdCB0byBiZSBubyBtb3JlIHRoYW4gMiBob3VycyBvbGRlciB0aGFuIHRoZQogICAgICAgIC8vIHRpbWVzdGFtcCBvZiBvdXIgYmxvY2suIFRoaXMgc2hvdWxkIGVuc3VyZSB0aGF0IEJUQ1JlbGF5CiAgICAgICAgLy8gaXMgcmVhc29uYWJseSB1cCB0byBkYXRlLgogICAgICAgIHVpbnQgYnRjVGltZXN0YW1wOwogICAgICAgIGludCBibG9ja0hhc2ggPSBCVENSZWxheShidGNSZWxheSkuZ2V0QmxvY2tjaGFpbkhlYWQoKTsKICAgICAgICAoLGJ0Y1RpbWVzdGFtcCkgPSBnZXRCbG9ja0hlYWRlcihibG9ja0hhc2gpOwoKICAgICAgICB1aW50IGRlbHRhID0gMDsKICAgICAgICBpZiAoYnRjVGltZXN0YW1wIDwgYmxvY2sudGltZXN0YW1wKSB7CiAgICAgICAgICAgIGRlbHRhID0gYmxvY2sudGltZXN0YW1wIC0gYnRjVGltZXN0YW1wOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRlbHRhIDwgMiAqIDYwICogNjAgJiYKICAgICAgICAgICAgICAgbG90dGVyaWVzW2lkXS5udW1UaWNrZXRzU29sZCA9PSBsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHMgJiYKICAgICAgICAgICAgICAgbG90dGVyaWVzW2lkXS5kZWNpZGluZ0Jsb2NrID09IC0xOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplQmxvY2soKQogICAgICAgICAgICAgYWZ0ZXJJbml0aWFsaXphdGlvbiB7CiAgICAgICAgcmVxdWlyZShuZWVkc0Jsb2NrRmluYWxpemF0aW9uKCkpOwoKICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgdGhhdCB0aGUgdGltZXN0YW1wIG9mIHRoZSBsYXRlc3QgYmxvY2sKICAgICAgICAvLyBrbm93biB0byBCVENSZWxheSBpcyB3aXRoaW4gMiBob3VycyBvZiB3aGF0IHRoZSBFdGhlcmV1bSBuZXR3b3JrCiAgICAgICAgLy8gY29uc2lkZXJzICdub3cnLiBJZiB3ZSBhc3N1bWUgdGhpcyB0byBiZSBjb3JyZWN0IHdpdGhpbiArLy0gMyBob3VycywKICAgICAgICAvLyB3ZSBjYW4gY29uY2x1ZGUgdGhhdCAnb3V0IHRoZXJlJyBpbiB0aGUgcmVhbCB3b3JsZCBhdCBtb3N0IDUgaG91cnMKICAgICAgICAvLyBoYXZlIHBhc3NlZC4gQXNzdW1pbmcgYW4gYWN0dWFsIGJsb2NrIHRpbWUgb2YgOSBtaW51dGVzIGZvciBCaXRjb2luLAogICAgICAgIC8vIHdlIGNhbiB1c2UgdGhlIFBvaXNzb24gZGlzdHJpYnV0aW9uIHRvIGNhbGN1bGF0ZSwgdGhhdCBpZiB3ZSB3YWl0IGZvcgogICAgICAgIC8vIDU0IG1vcmUgYmxvY2tzLCB0aGVuIHRoZSBwcm9iYWJpbGl0eSBmb3IgYWxsIG9mIHRoZXNlIDU0IGJsb2NrcwogICAgICAgIC8vIGhhdmluZyBhbHJlYWR5IGJlZW4gbWluZWQgaW4gNSBob3VycyBpcyBsZXNzIHRoYW4gMC4xICUuCiAgICAgICAgaW50IGJsb2NrSGVpZ2h0ID0gQlRDUmVsYXkoYnRjUmVsYXkpLmdldExhc3RCbG9ja0hlaWdodCgpOwogICAgICAgIGxvdHRlcmllc1tpZF0uZGVjaWRpbmdCbG9jayA9IGJsb2NrSGVpZ2h0ICsgNTQ7CiAgICB9CgogICAgZnVuY3Rpb24gbmVlZHNMb3R0ZXJ5RmluYWxpemF0aW9uKCkKICAgICAgICAgICAgIGFmdGVySW5pdGlhbGl6YXRpb24gY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGludCBibG9ja0hlaWdodCA9IEJUQ1JlbGF5KGJ0Y1JlbGF5KS5nZXRMYXN0QmxvY2tIZWlnaHQoKTsKICAgICAgICByZXR1cm4gbG90dGVyaWVzW2lkXS5kZWNpZGluZ0Jsb2NrICE9IC0xICYmCiAgICAgICAgICAgICAgIGJsb2NrSGVpZ2h0ID49IGxvdHRlcmllc1tpZF0uZGVjaWRpbmdCbG9jayArIDYgJiYKICAgICAgICAgICAgICAgbG90dGVyaWVzW2lkXS5maW5hbGl6YXRpb25CbG9jayA9PSAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplTG90dGVyeSh1aW50IF9zdGVwcykKICAgICAgICAgICAgIGFmdGVySW5pdGlhbGl6YXRpb24gewogICAgICAgIHJlcXVpcmUobmVlZHNMb3R0ZXJ5RmluYWxpemF0aW9uKCkpOwoKICAgICAgICBpZiAobG90dGVyaWVzW2lkXS5uZWFyZXN0S25vd25CbG9jayAhPSBsb3R0ZXJpZXNbaWRdLmRlY2lkaW5nQmxvY2spIHsKICAgICAgICAgICAgd2Fsa1Rvd2FyZHNCbG9jayhfc3RlcHMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGludCB3aW5uaW5nVGlja2V0ID0gbG90dGVyaWVzW2lkXS5uZWFyZXN0S25vd25CbG9ja0hhc2ggJQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChsb3R0ZXJpZXNbaWRdLm51bVRpY2tldHMpOwogICAgICAgICAgICBhZGRyZXNzIHdpbm5lciA9IGxvdHRlcmllc1tpZF0udGlja2V0c1t1aW50KHdpbm5pbmdUaWNrZXQpXTsKCiAgICAgICAgICAgIGxvdHRlcmllc1tpZF0ud2lubmluZ1RpY2tldCA9IHdpbm5pbmdUaWNrZXQ7CiAgICAgICAgICAgIGxvdHRlcmllc1tpZF0ud2lubmVyID0gd2lubmVyOwogICAgICAgICAgICBsb3R0ZXJpZXNbaWRdLmZpbmFsaXphdGlvbkJsb2NrID0gYmxvY2subnVtYmVyOwogICAgICAgICAgICBsb3R0ZXJpZXNbaWRdLmZpbmFsaXplciA9IHR4Lm9yaWdpbjsKCiAgICAgICAgICAgIGlmICh3aW5uZXIgIT0gMCkgewogICAgICAgICAgICAgICAgdWludCB2YWx1ZSA9IGxvdHRlcmllc1tpZF0uamFja3BvdDsKICAgICAgICAgICAgICAgIGJvb2wgc3VjY2Vzc2Z1bCA9CiAgICAgICAgICAgICAgICAgICAgd2lubmVyLmNhbGwuZ2FzKEdBU19MSU1JVF9ERVBPU0lUKS52YWx1ZSh2YWx1ZSkoKTsKICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzc2Z1bCkgewogICAgICAgICAgICAgICAgICAgIEVzY3Jvdyhlc2Nyb3cpLmRlcG9zaXQudmFsdWUodmFsdWUpKHdpbm5lcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfID0gYWRtaW4uY2FsbC5nYXMoR0FTX0xJTUlUX0RFUE9TSVQpLnZhbHVlKHRoaXMuYmFsYW5jZSkoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gd2Fsa1Rvd2FyZHNCbG9jayh1aW50IF9zdGVwcykgaW50ZXJuYWwgewogICAgICAgIGludCBibG9ja0hlaWdodDsKICAgICAgICBpbnQgYmxvY2tIYXNoOwogICAgICAgIGlmIChsb3R0ZXJpZXNbaWRdLm5lYXJlc3RLbm93bkJsb2NrID09IDApIHsKICAgICAgICAgICAgYmxvY2tIZWlnaHQgPSBCVENSZWxheShidGNSZWxheSkuZ2V0TGFzdEJsb2NrSGVpZ2h0KCk7CiAgICAgICAgICAgIGJsb2NrSGFzaCA9IEJUQ1JlbGF5KGJ0Y1JlbGF5KS5nZXRCbG9ja2NoYWluSGVhZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJsb2NrSGVpZ2h0ID0gbG90dGVyaWVzW2lkXS5uZWFyZXN0S25vd25CbG9jazsKICAgICAgICAgICAgYmxvY2tIYXNoID0gbG90dGVyaWVzW2lkXS5uZWFyZXN0S25vd25CbG9ja0hhc2g7CiAgICAgICAgfQoKICAgICAgICAvLyBXYWxrIG9ubHkgYSBmZXcgc3RlcHMgdG8ga2VlcCBhbiB1cHBlciBsaW1pdCBvbiBnYXMgY29zdHMuCiAgICAgICAgZm9yICh1aW50IHN0ZXAgPSAwOyBzdGVwIDwgX3N0ZXBzOyBzdGVwKyspIHsKICAgICAgICAgICAgYmxvY2tIZWlnaHQgLT0gMTsKICAgICAgICAgICAgKGJsb2NrSGFzaCwpID0gZ2V0QmxvY2tIZWFkZXIoYmxvY2tIYXNoKTsKCiAgICAgICAgICAgIGlmIChibG9ja0hlaWdodCA9PSBsb3R0ZXJpZXNbaWRdLmRlY2lkaW5nQmxvY2spIHsgYnJlYWs7IH0KICAgICAgICB9CgogICAgICAgIC8vIFN0b3JlIHRoZSBwcm9ncmVzcyB0byBwaWNrIHVwIGZyb20gdGhlcmUgbmV4dCB0aW1lLgogICAgICAgIGxvdHRlcmllc1tpZF0ubmVhcmVzdEtub3duQmxvY2sgPSBibG9ja0hlaWdodDsKICAgICAgICBsb3R0ZXJpZXNbaWRdLm5lYXJlc3RLbm93bkJsb2NrSGFzaCA9IGJsb2NrSGFzaDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCbG9ja0hlYWRlcihpbnQgYmxvY2tIYXNoKQogICAgICAgICAgICAgaW50ZXJuYWwgcmV0dXJucyAoaW50IHByZXZCbG9ja0hhc2gsIHVpbnQgdGltZXN0YW1wKSB7CiAgICAgICAgLy8gV2UgZXhwZWN0IGZyZWUgYWNjZXNzIHRvIEJUQ1JlbGF5LgogICAgICAgIGludCBmZWUgPSBCVENSZWxheShidGNSZWxheSkuZ2V0RmVlQW1vdW50KGJsb2NrSGFzaCk7CiAgICAgICAgcmVxdWlyZShmZWUgPT0gMCk7CgogICAgICAgIC8vIENvZGUgaXMgYmFzZWQgb24gdGphZGUyNzMncyBCVENSZWxheVRvb2xzLgogICAgICAgIGJ5dGVzMzJbNV0gbWVtb3J5IGJsb2NrSGVhZGVyID0KICAgICAgICAgICAgQlRDUmVsYXkoYnRjUmVsYXkpLmdldEJsb2NrSGVhZGVyKGJsb2NrSGFzaCk7CgogICAgICAgIHByZXZCbG9ja0hhc2ggPSAwOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDMyOyBpKyspIHsKICAgICAgICAgICAgdWludCBwb3MgPSA2OCArIGk7ICAvLyBwcmV2LiBibG9jayBoYXNoIHN0YXJ0cyBhdCBwb3NpdGlvbiA2OAogICAgICAgICAgICBieXRlIGRhdGEgPSBibG9ja0hlYWRlcltwb3MgLyAzMl1bcG9zICUgMzJdOwogICAgICAgICAgICBwcmV2QmxvY2tIYXNoID0gcHJldkJsb2NrSGFzaCB8IGludChkYXRhKSAqIGludCgweDEwMCAqKiBpKTsKICAgICAgICB9CgogICAgICAgIHRpbWVzdGFtcCA9IDA7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICAgICAgICBwb3MgPSAxMzIgKyBpOyAgLy8gdGltZXN0YW1wIHN0YXJ0cyBhdCBwb3NpdGlvbiAxMzIKICAgICAgICAgICAgZGF0YSA9IGJsb2NrSGVhZGVyW3BvcyAvIDMyXVtwb3MgJSAzMl07CiAgICAgICAgICAgIHRpbWVzdGFtcCA9IHRpbWVzdGFtcCB8IHVpbnQoZGF0YSkgKiB1aW50KDB4MTAwICoqIGkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChwcmV2QmxvY2tIYXNoLCB0aW1lc3RhbXApOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1lc3NhZ2VMZW5ndGgoc3RyaW5nIF9tZXNzYWdlKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGJ5dGVzKF9tZXNzYWdlKS5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWVzc2FnZShpbnQgX2lkLCBzdHJpbmcgX21lc3NhZ2UpCiAgICAgICAgICAgICBhZnRlckluaXRpYWxpemF0aW9uIHsKICAgICAgICByZXF1aXJlKGxvdHRlcmllc1tfaWRdLndpbm5lciAhPSAwKTsKICAgICAgICByZXF1aXJlKGxvdHRlcmllc1tfaWRdLndpbm5lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKGdldE1lc3NhZ2VMZW5ndGgoX21lc3NhZ2UpIDw9IDUwMCk7CiAgICAgICAgbG90dGVyaWVzW19pZF0ubWVzc2FnZSA9IF9tZXNzYWdlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldExvdHRlcnlEZXRhaWxzQShpbnQgX2lkKQogICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAoaW50IF9hY3R1YWxJZCwgdWludCBfamFja3BvdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBfZGVjaWRpbmdCbG9jaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgX251bVRpY2tldHMsIHVpbnQgX251bVRpY2tldHNTb2xkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfbGFzdFNhbGVUaW1lc3RhbXAsIHVpbnQgX3RpY2tldFByaWNlKSB7CiAgICAgICAgaWYgKF9pZCA9PSAtMSkgewogICAgICAgICAgICBfYWN0dWFsSWQgPSBpZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfYWN0dWFsSWQgPSBfaWQ7CiAgICAgICAgfQogICAgICAgIF9qYWNrcG90ID0gbG90dGVyaWVzW19hY3R1YWxJZF0uamFja3BvdDsKICAgICAgICBfZGVjaWRpbmdCbG9jayA9IGxvdHRlcmllc1tfYWN0dWFsSWRdLmRlY2lkaW5nQmxvY2s7CiAgICAgICAgX251bVRpY2tldHMgPSBsb3R0ZXJpZXNbX2FjdHVhbElkXS5udW1UaWNrZXRzOwogICAgICAgIF9udW1UaWNrZXRzU29sZCA9IGxvdHRlcmllc1tfYWN0dWFsSWRdLm51bVRpY2tldHNTb2xkOwogICAgICAgIF9sYXN0U2FsZVRpbWVzdGFtcCA9IGxhc3RTYWxlVGltZXN0YW1wOwogICAgICAgIF90aWNrZXRQcmljZSA9IGxvdHRlcmllc1tfYWN0dWFsSWRdLnRpY2tldFByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldExvdHRlcnlEZXRhaWxzQihpbnQgX2lkKQogICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAoaW50IF9hY3R1YWxJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBfd2lubmluZ1RpY2tldCwgYWRkcmVzcyBfd2lubmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludCBfZmluYWxpemF0aW9uQmxvY2ssIGFkZHJlc3MgX2ZpbmFsaXplciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBfbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBfcHJldkxvdHRlcnksIGludCBfbmV4dExvdHRlcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgX2Jsb2NrSGVpZ2h0KSB7CiAgICAgICAgaWYgKF9pZCA9PSAtMSkgewogICAgICAgICAgICBfYWN0dWFsSWQgPSBpZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfYWN0dWFsSWQgPSBfaWQ7CiAgICAgICAgfQogICAgICAgIF93aW5uaW5nVGlja2V0ID0gbG90dGVyaWVzW19hY3R1YWxJZF0ud2lubmluZ1RpY2tldDsKICAgICAgICBfd2lubmVyID0gbG90dGVyaWVzW19hY3R1YWxJZF0ud2lubmVyOwogICAgICAgIF9maW5hbGl6YXRpb25CbG9jayA9IGxvdHRlcmllc1tfYWN0dWFsSWRdLmZpbmFsaXphdGlvbkJsb2NrOwogICAgICAgIF9maW5hbGl6ZXIgPSBsb3R0ZXJpZXNbX2FjdHVhbElkXS5maW5hbGl6ZXI7CiAgICAgICAgX21lc3NhZ2UgPSBsb3R0ZXJpZXNbX2FjdHVhbElkXS5tZXNzYWdlOwoKICAgICAgICBpZiAoX2FjdHVhbElkID09IDApIHsKICAgICAgICAgICAgX3ByZXZMb3R0ZXJ5ID0gLTE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3ByZXZMb3R0ZXJ5ID0gX2FjdHVhbElkIC0gMTsKICAgICAgICB9CiAgICAgICAgaWYgKF9hY3R1YWxJZCA9PSBpZCkgewogICAgICAgICAgICBfbmV4dExvdHRlcnkgPSAtMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbmV4dExvdHRlcnkgPSBfYWN0dWFsSWQgKyAxOwogICAgICAgIH0KCiAgICAgICAgX2Jsb2NrSGVpZ2h0ID0gQlRDUmVsYXkoYnRjUmVsYXkpLmdldExhc3RCbG9ja0hlaWdodCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRpY2tldERldGFpbHMoaW50IF9pZCwgdWludCBfb2Zmc2V0LCB1aW50IF9uLCBhZGRyZXNzIF9hZGRyKQogICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDhbXSBkZXRhaWxzKSB7CiAgICAgICAgcmVxdWlyZShfb2Zmc2V0ICsgX24gPD0gbG90dGVyaWVzW19pZF0ubnVtVGlja2V0cyk7CgogICAgICAgIGRldGFpbHMgPSBuZXcgdWludDhbXShfbik7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX247IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIGFkZHIgPSBsb3R0ZXJpZXNbX2lkXS50aWNrZXRzW19vZmZzZXQgKyBpXTsKICAgICAgICAgICAgaWYgKGFkZHIgPT0gX2FkZHIgJiYgX2FkZHIgIT0gMCkgewogICAgICAgICAgICAgICAgZGV0YWlsc1tpXSA9IDI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkciAhPSAwKSB7CiAgICAgICAgICAgICAgICBkZXRhaWxzW2ldID0gMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRldGFpbHNbaV0gPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRpY2tldE93bmVyKGludCBfaWQsIHVpbnQgX3RpY2tldCkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX2lkID49IDApOwogICAgICAgIHJldHVybiBsb3R0ZXJpZXNbX2lkXS50aWNrZXRzW190aWNrZXRdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJlY2VudEFjdGl2aXR5KCkKICAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKGludCBfaWQsIHVpbnQgX2lkeCwgdWludFsxMDAwXSBfcmVjZW50QWN0aXZpdHkpIHsKICAgICAgICBfaWQgPSBpZDsKICAgICAgICBfaWR4ID0gcmVjZW50QWN0aXZpdHlJZHg7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgcmVjZW50QWN0aXZpdHkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX3JlY2VudEFjdGl2aXR5W2ldID0gcmVjZW50QWN0aXZpdHlbaV07CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFkbWluKGFkZHJlc3MgX2FkbWluKSBvbmx5T3duZXIgewogICAgICAgIGFkbWluID0gX2FkbWluOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb3Bvc2VPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIHsKICAgICAgICBwcm9wb3NlZE93bmVyID0gX293bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHsKICAgICAgICByZXF1aXJlKHByb3Bvc2VkT3duZXIgIT0gMCk7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHByb3Bvc2VkT3duZXIpOwogICAgICAgIG93bmVyID0gcHJvcG9zZWRPd25lcjsKICAgIH0KfQ=='.
	

]
