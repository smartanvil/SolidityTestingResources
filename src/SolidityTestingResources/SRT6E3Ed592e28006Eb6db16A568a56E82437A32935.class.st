Class {
	#name : #SRT6E3Ed592e28006Eb6db16A568a56E82437A32935,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT6E3Ed592e28006Eb6db16A568a56E82437A32935 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vLyBAdGl0bGUgT3JhY2xlIGNvbnRyYWN0IHdoZXJlIG0gb2YgbiBwcmVkZXRlcm1pbmVkIHZvdGVycyBkZXRlcm1pbmUgYSB2YWx1ZQpjb250cmFjdCBGZWRlcmF0ZWRPcmFjbGVCeXRlczggewogICAgc3RydWN0IFZvdGVyIHsKICAgICAgICBib29sIGlzVm90ZXI7CiAgICAgICAgYm9vbCBoYXNWb3RlZDsKICAgIH0KCiAgICBldmVudCBWb3RlckFkZGVkKGFkZHJlc3MgYWNjb3VudCk7CiAgICBldmVudCBWb3RlU3VibWl0dGVkKGFkZHJlc3MgYWNjb3VudCwgYnl0ZXM4IHZhbHVlKTsKICAgIGV2ZW50IFZhbHVlRmluYWxpemVkKGJ5dGVzOCB2YWx1ZSk7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IFZvdGVyKSBwdWJsaWMgdm90ZXJzOwogICAgbWFwcGluZyhieXRlczggPT4gdWludDgpIHB1YmxpYyB2b3RlczsKCiAgICB1aW50OCBwdWJsaWMgbTsKICAgIHVpbnQ4IHB1YmxpYyBuOwogICAgYnl0ZXM4IHB1YmxpYyBmaW5hbFZhbHVlOwoKICAgIHVpbnQ4IHByaXZhdGUgdm90ZXJDb3VudDsKICAgIGFkZHJlc3MgcHJpdmF0ZSBjcmVhdG9yOwoKICAgIGZ1bmN0aW9uIEZlZGVyYXRlZE9yYWNsZUJ5dGVzOCh1aW50OCBtXywgdWludDggbl8pIHsKICAgICAgICBjcmVhdG9yID0gbXNnLnNlbmRlcjsKICAgICAgICBtID0gbV87CiAgICAgICAgbiA9IG5fOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFZvdGVyKGFkZHJlc3MgYWNjb3VudCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGNyZWF0b3IpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGlmICh2b3RlckNvdW50ID09IG4pIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICB2YXIgdm90ZXIgPSB2b3RlcnNbYWNjb3VudF07CiAgICAgICAgaWYgKHZvdGVyLmlzVm90ZXIpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICB2b3Rlci5pc1ZvdGVyID0gdHJ1ZTsKICAgICAgICB2b3RlckNvdW50Kys7CiAgICAgICAgVm90ZXJBZGRlZChhY2NvdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWJtaXRWYWx1ZShieXRlczggdmFsdWUpIHsKICAgICAgICB2YXIgdm90ZXIgPSB2b3RlcnNbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKCF2b3Rlci5pc1ZvdGVyKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBpZiAodm90ZXIuaGFzVm90ZWQpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICB2b3Rlci5oYXNWb3RlZCA9IHRydWU7CiAgICAgICAgdm90ZXNbdmFsdWVdKys7CiAgICAgICAgVm90ZVN1Ym1pdHRlZChtc2cuc2VuZGVyLCB2YWx1ZSk7CgogICAgICAgIGlmICh2b3Rlc1t2YWx1ZV0gPT0gbSkgewogICAgICAgICAgICBmaW5hbFZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgIFZhbHVlRmluYWxpemVkKHZhbHVlKTsKICAgICAgICB9CiAgICB9Cn0KCi8vIFRoaXMgbGlicmFyeSBjYW4gYmUgdXNlZCB0byBzY29yZSBieXRlIGJyYWNrZXRzLiBCeXRlIGJyYWNrZXRzIGFyZSBhIHN1Y2NpbmN0IGVuY29kaW5nIG9mIGEKLy8gNjQgdGVhbSBicmFja2V0IGludG8gYW4gOC1ieXRlIGFycmF5LiBUaGUgdG91cm5hbWVudCByZXN1bHRzIGFyZSBlbmNvZGVkIGluIHRoZSBzYW1lIGZvcm1hdCBhbmQKLy8gY29tcGFyZWQgYWdhaW5zdCB0aGUgYnJhY2tldCBwaWNrcy4gVG8gcmVkdWNlIHRoZSBjb21wdXRhdGlvbiB0aW1lIG9mIHNjb3JpbmcgYSBicmFja2V0LCBhIDY0LWJpdAovLyB2YWx1ZSBjYWxsZWQgdGhlICJzY29yaW5nIG1hc2siIGlzIGZpcnN0IGNvbXB1dGVkIG9uY2UgZm9yIGEgcGFydGljdWxhciByZXN1bHQgc2V0IGFuZCB1c2VkIHRvCi8vIHNjb3JlIGFsbCBicmFja2V0cy4KLy8KLy8gQWxnb3JpdGhtIGRlc2NyaXB0aW9uOiBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZmlsZS9kLzBCeEhiYmdydWNDeDJOMU14Y25BMVpFMVdRVzgvdmlldwovLyBSZWZlcmVuY2UgaW1wbGVtZW50YXRpb246IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3B1cnN1aW5ncGFyZXRvL2IxNWYxMTk3ZDk2YjFhMmJiYzQ4CmxpYnJhcnkgQnl0ZUJyYWNrZXQgewogICAgZnVuY3Rpb24gZ2V0QnJhY2tldFNjb3JlKGJ5dGVzOCBicmFja2V0LCBieXRlczggcmVzdWx0cywgdWludDY0IGZpbHRlcikKICAgICAgICBjb25zdGFudAogICAgICAgIHJldHVybnMgKHVpbnQ4IHBvaW50cykKICAgIHsKICAgICAgICB1aW50OCByb3VuZE51bSA9IDA7CiAgICAgICAgdWludDggbnVtR2FtZXMgPSAzMjsKICAgICAgICB1aW50NjQgYmxhY2tsaXN0ID0gKHVpbnQ2NCgxKSA8PCBudW1HYW1lcykgLSAxOwogICAgICAgIHVpbnQ2NCBvdmVybGFwID0gdWludDY0KH4oYnJhY2tldCBeIHJlc3VsdHMpKTsKCiAgICAgICAgd2hpbGUgKG51bUdhbWVzID4gMCkgewogICAgICAgICAgICB1aW50NjQgc2NvcmVzID0gb3ZlcmxhcCAmIGJsYWNrbGlzdDsKICAgICAgICAgICAgcG9pbnRzICs9IHBvcGNvdW50KHNjb3JlcykgPDwgcm91bmROdW07CiAgICAgICAgICAgIGJsYWNrbGlzdCA9IHBhaXJ3aXNlT3Ioc2NvcmVzICYgZmlsdGVyKTsKICAgICAgICAgICAgb3ZlcmxhcCA+Pj0gbnVtR2FtZXM7CiAgICAgICAgICAgIGZpbHRlciA+Pj0gbnVtR2FtZXM7CiAgICAgICAgICAgIG51bUdhbWVzIC89IDI7CiAgICAgICAgICAgIHJvdW5kTnVtKys7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFNjb3JpbmdNYXNrKGJ5dGVzOCByZXN1bHRzKSBjb25zdGFudCByZXR1cm5zICh1aW50NjQgbWFzaykgewogICAgICAgIC8vIEZpbHRlciBmb3IgdGhlIHNlY29uZCBtb3N0IHNpZ25pZmljYW50IGJpdCBzaW5jZSBNU0IgaXMgaWdub3JlZC4KICAgICAgICBieXRlczggYml0U2VsZWN0b3IgPSAxIDw8IDYyOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDMxOyBpKyspIHsKICAgICAgICAgICAgbWFzayA8PD0gMjsKICAgICAgICAgICAgaWYgKHJlc3VsdHMgJiBiaXRTZWxlY3RvciAhPSAwKSB7CiAgICAgICAgICAgICAgICBtYXNrIHw9IDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtYXNrIHw9IDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0cyA8PD0gMTsKICAgICAgICB9CiAgICB9CgogICAgLy8gUmV0dXJucyBhIGJpdHN0cmluZyBvZiBoYWxmIHRoZSBsZW5ndGggYnkgdGFraW5nIGJpdHMgdHdvIGF0IGEgdGltZSBhbmQgT1JpbmcgdGhlbS4KICAgIC8vCiAgICAvLyBTZXBhcmF0ZXMgdGhlIGV2ZW4gYW5kIG9kZCBiaXRzIGJ5IHJlcGVhdGVkbHkKICAgIC8vIHNodWZmbGluZyBzbWFsbGVyIHNlZ21lbnRzIG9mIGEgYml0c3RyaW5nLgogICAgZnVuY3Rpb24gcGFpcndpc2VPcih1aW50NjQgYml0cykgaW50ZXJuYWwgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgdWludDY0IHRtcDsKICAgICAgICB0bXAgPSAoYml0cyBeIChiaXRzID4+IDEpKSAmIDB4MjIyMjIyMjI7CiAgICAgICAgYml0cyBePSAodG1wIF4gKHRtcCA8PCAxKSk7CiAgICAgICAgdG1wID0gKGJpdHMgXiAoYml0cyA+PiAyKSkgJiAweDBjMGMwYzBjOwogICAgICAgIGJpdHMgXj0gKHRtcCBeICh0bXAgPDwgMikpOwogICAgICAgIHRtcCA9IChiaXRzIF4gKGJpdHMgPj4gNCkpICYgMHgwMGYwMDBmMDsKICAgICAgICBiaXRzIF49ICh0bXAgXiAodG1wIDw8IDQpKTsKICAgICAgICB0bXAgPSAoYml0cyBeIChiaXRzID4+IDgpKSAmIDB4MDAwMGZmMDA7CiAgICAgICAgYml0cyBePSAodG1wIF4gKHRtcCA8PCA4KSk7CiAgICAgICAgdWludDY0IGV2ZW5zID0gYml0cyA+PiAxNjsKICAgICAgICB1aW50NjQgb2RkcyA9IGJpdHMgJSAweDEwMDAwOwogICAgICAgIHJldHVybiBldmVucyB8IG9kZHM7CiAgICB9CgogICAgLy8gQ291bnRzIHRoZSBudW1iZXIgb2YgMXMgaW4gYSBiaXRzdHJpbmcuCiAgICBmdW5jdGlvbiBwb3Bjb3VudCh1aW50NjQgYml0cykgaW50ZXJuYWwgcmV0dXJucyAodWludDgpIHsKICAgICAgICBiaXRzIC09IChiaXRzID4+IDEpICYgMHg1NTU1NTU1NTU1NTU1NTU1OwogICAgICAgIGJpdHMgPSAoYml0cyAmIDB4MzMzMzMzMzMzMzMzMzMzMykgKyAoKGJpdHMgPj4gMikgJiAweDMzMzMzMzMzMzMzMzMzMzMpOwogICAgICAgIGJpdHMgPSAoYml0cyArIChiaXRzID4+IDQpKSAmIDB4MGYwZjBmMGYwZjBmMGYwZjsKICAgICAgICByZXR1cm4gdWludDgoKChiaXRzICogMHgwMTAxMDEwMTAxMDEwMTAxKSAmIDB4ZmZmZmZmZmZmZmZmZmZmZikgPj4gNTYpOwogICAgfQp9CgovKioKICogQHRpdGxlIE1hcmNoIE1hZG5lc3MgYnJhY2tldCBwb29sIHNtYXJ0IGNvbnRyYWN0CiAqCiAqIFRoZSBjb250cmFjdCBoYXMgZm91ciBwaGFzZXM6IHN1Ym1pc3Npb24sIHRvdXJuYW1lbnQsIHNjb3JpbmcsIHRoZW4gdGhlIGNvbnRlc3QgaXMgb3Zlci4gRHVyaW5nCiAqIHRoZSBzdWJtaXNzaW9uIHBoYXNlLCBlbnRyYW50cyBzdWJtaXQgYSBjcnlwdG9ncmFwaGljIGNvbW1pdG1lbnQgdG8gdGhlaXIgYnJhY2tldCBwaWNrcy4gRWFjaAogKiBhZGRyZXNzIG1heSBvbmx5IG1ha2Ugb25lIHN1Ym1pc3Npb24uIEVudHJhbnRzIG1heSByZXZlYWwgdGhlaXIgYnJhY2tldHMgYXQgYW55IHRpbWUgYWZ0ZXIgbWFraW5nCiAqIHRoZSBjb21taXRtZW50LiBPbmNlIHRoZSB0b3VybmFtZW50IHN0YXJ0cywgbm8gZnVydGhlciBzdWJtaXNzaW9ucyBhcmUgYWxsb3dlZC4gV2hlbiB0aGUKICogdG91cm5hbWVudCBlbmRzLCB0aGUgcmVzdWx0cyBhcmUgc3VibWl0dGVkIGJ5IHRoZSBvcmFjbGVzIGFuZCB0aGUgc2NvcmluZyBwZXJpb2QgYmVnaW5zLiBEdXJpbmcKICogdGhlIHNjb3JpbmcgcGVyaW9kLCBlbnRyYW50cyBtYXkgcmV2ZWFsIHRoZWlyIGJyYWNrZXQgcGlja3MgYW5kIHNjb3JlIHRoZWlyIGJyYWNrZXRzLiBUaGUgaGlnaGVzdAogKiBzY29yaW5nIGJyYWNrZXQgcmV2ZWFsZWQgaXMgcmVjb3JkZWQuIEFmdGVyIHRoZSBzY29yaW5nIHBlcmlvZCBlbmRzLCBhbGwgZW50cmFudHMgd2l0aCBhIGhpZ2hlc3QKICogc2NvcmluZyBicmFja2V0IHNwbGl0IHRoZSBwb3QgYW5kIG1heSB3aXRoZHJhdyB0aGVpciB3aW5uaW5ncy4KICoKICogSW4gdGhlIGV2ZW50IHRoYXQgdGhlIG9yYWNsZXMgZG8gbm90IHN1Ym1pdCByZXN1bHRzIG9yIGZhaWwgdG8gcmVhY2ggY29uc2Vuc3VzIGFmdGVyIGEgY2VydGFpbgogKiBhbW91bnQgb2YgdGltZSwgZW50cnkgZmVlcyB3aWxsIGJlIHJldHVybmVkIHRvIGVudHJhbnRzLgogKi8KY29udHJhY3QgTWFyY2hNYWRuZXNzIHsKICAgIHN0cnVjdCBTdWJtaXNzaW9uIHsKICAgICAgICBieXRlczMyIGNvbW1pdG1lbnQ7CiAgICAgICAgYnl0ZXM4IGJyYWNrZXQ7CiAgICAgICAgdWludDggc2NvcmU7CiAgICAgICAgYm9vbCBjb2xsZWN0ZWRXaW5uaW5nczsKICAgICAgICBib29sIGNvbGxlY3RlZEVudHJ5RmVlOwogICAgfQoKICAgIGV2ZW50IFN1Ym1pc3Npb25BY2NlcHRlZChhZGRyZXNzIGFjY291bnQpOwogICAgZXZlbnQgTmV3V2lubmVyKGFkZHJlc3Mgd2lubmVyLCB1aW50OCBzY29yZSk7CiAgICBldmVudCBUb3VybmFtZW50T3ZlcigpOwoKICAgIEZlZGVyYXRlZE9yYWNsZUJ5dGVzOCByZXN1bHRzT3JhY2xlOwoKCW1hcHBpbmcoYWRkcmVzcyA9PiBTdWJtaXNzaW9uKSBzdWJtaXNzaW9uczsKCiAgICAvLyBBbW91bnQgdGhhdCB3aW5uZXJzIHdpbGwgY29sbGVjdAogICAgdWludCBwdWJsaWMgd2lubmluZ3M7CgogICAgLy8gTnVtYmVyIG9mIHN1Ym1pc3Npb25zIHdpdGggYSB3aW5uaW5nIHNjb3JlCiAgICB1aW50IHB1YmxpYyBudW1XaW5uZXJzOwoKICAgIC8vIERhdGEgZGVyaXZlZCBmcm9tIHJlc3VsdHMgdXNlZCBieSBicmFja2V0IHNjb3JpbmcgYWxnb3JpdGhtCiAgICB1aW50NjQgcHJpdmF0ZSBzY29yaW5nTWFzazsKCiAgICAvLyBGZWUgaW4gd2VpIHJlcXVpcmVkIHRvIGVudGVyIGEgYnJhY2tldAogICAgdWludCBwdWJsaWMgZW50cnlGZWU7CgogICAgLy8gRHVyYXRpb24gaW4gc2Vjb25kcyBvZiB0aGUgc2NvcmluZyBwaGFzZQogICAgdWludCBwdWJsaWMgc2NvcmluZ0R1cmF0aW9uOwoKICAgIC8vIFRpbWVzdGFtcCBvZiB0aGUgc3RhcnQgb2YgdGhlIHRvdXJuYW1lbnQgcGhhc2UKICAgIHVpbnQgcHVibGljIHRvdXJuYW1lbnRTdGFydFRpbWU7CgogICAgLy8gSW4gY2FzZSB0aGUgb3JhY2xlcyBmYWlsIHRvIHN1Ym1pdCB0aGUgcmVzdWx0cyBvciByZWFjaCBjb25zZW5zdXMsIHRoZSBhbW91bnQgb2YgdGltZSBhZnRlcgogICAgLy8gdGhlIHRvdXJuYW1lbnQgaGFzIHN0YXJ0ZWQgYWZ0ZXIgd2hpY2ggdG8gcmV0dXJuIGVudHJ5IGZlZXMgdG8gdXNlcnMuCiAgICB1aW50IHB1YmxpYyBub0NvbnRlc3RUaW1lOwoKICAgIC8vIFRpbWVzdGFtcCBvZiB0aGUgZW5kIG9mIHRoZSBzY29yaW5nIHBoYXNlCiAgICB1aW50IHB1YmxpYyBjb250ZXN0T3ZlclRpbWU7CgogICAgLy8gQnl0ZSBicmFja2V0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b3VybmFtZW50IHJlc3VsdHMKICAgIGJ5dGVzOCBwdWJsaWMgcmVzdWx0czsKCiAgICAvLyBUaGUgaGlnaGVzdCBzY29yZSBvZiBhIGJyYWNrZXQgc2NvcmVkIHNvIGZhcgogICAgdWludDggcHVibGljIHdpbm5pbmdTY29yZTsKCiAgICAvLyBUaGUgbWF4aW11bSBhbGxvd2VkIG51bWJlciBvZiBzdWJtaXNzaW9ucwogICAgdWludDMyIHB1YmxpYyBtYXhTdWJtaXNzaW9uczsKCiAgICAvLyBUaGUgbnVtYmVyIG9mIGJyYWNrZXRzIHN1Ym1pdHRlZCBzbyBmYXIKICAgIHVpbnQzMiBwdWJsaWMgbnVtU3VibWlzc2lvbnM7CgogICAgLy8gSVBGUyBoYXNoIG9mIEpTT04gZmlsZSBjb250YWluaW5nIHRvdXJuYW1lbnQgaW5mb3JtYXRpb24gKGVnLiB0ZWFtcywgcmVnaW9ucywgZXRjKQogICAgc3RyaW5nIHB1YmxpYyB0b3VybmFtZW50RGF0YUlQRlNIYXNoOwoKCWZ1bmN0aW9uIE1hcmNoTWFkbmVzcygKICAgICAgICB1aW50IGVudHJ5RmVlXywKICAgICAgICB1aW50IHRvdXJuYW1lbnRTdGFydFRpbWVfLAogICAgICAgIHVpbnQgbm9Db250ZXN0VGltZV8sCiAgICAgICAgdWludCBzY29yaW5nRHVyYXRpb25fLAogICAgICAgIHVpbnQzMiBtYXhTdWJtaXNzaW9uc18sCiAgICAgICAgc3RyaW5nIHRvdXJuYW1lbnREYXRhSVBGU0hhc2hfLAogICAgICAgIGFkZHJlc3Mgb3JhY2xlQWRkcmVzcwogICAgKSB7CgkJZW50cnlGZWUgPSBlbnRyeUZlZV87CiAgICAgICAgdG91cm5hbWVudFN0YXJ0VGltZSA9IHRvdXJuYW1lbnRTdGFydFRpbWVfOwogICAgICAgIHNjb3JpbmdEdXJhdGlvbiA9IHNjb3JpbmdEdXJhdGlvbl87CiAgICAgICAgbm9Db250ZXN0VGltZSA9IG5vQ29udGVzdFRpbWVfOwogICAgICAgIG1heFN1Ym1pc3Npb25zID0gbWF4U3VibWlzc2lvbnNfOwogICAgICAgIHRvdXJuYW1lbnREYXRhSVBGU0hhc2ggPSB0b3VybmFtZW50RGF0YUlQRlNIYXNoXzsKICAgICAgICByZXN1bHRzT3JhY2xlID0gRmVkZXJhdGVkT3JhY2xlQnl0ZXM4KG9yYWNsZUFkZHJlc3MpOwoJfQoKICAgIGZ1bmN0aW9uIHN1Ym1pdEJyYWNrZXQoYnl0ZXMzMiBjb21taXRtZW50KSBwYXlhYmxlIHsKICAgICAgICBpZiAobXNnLnZhbHVlICE9IGVudHJ5RmVlKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICBpZiAobm93ID49IHRvdXJuYW1lbnRTdGFydFRpbWUpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGlmIChudW1TdWJtaXNzaW9ucyA+PSBtYXhTdWJtaXNzaW9ucykgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIHZhciBzdWJtaXNzaW9uID0gc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uY29tbWl0bWVudCAhPSAwKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KCiAgICAgICAgc3VibWlzc2lvbi5jb21taXRtZW50ID0gY29tbWl0bWVudDsKICAgICAgICBudW1TdWJtaXNzaW9ucysrOwogICAgICAgIFN1Ym1pc3Npb25BY2NlcHRlZChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydFNjb3JpbmcoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHJlc3VsdHMgIT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPCB0b3VybmFtZW50U3RhcnRUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKG5vdyA+IG5vQ29udGVzdFRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgYnl0ZXM4IG9yYWNsZVZhbHVlID0gcmVzdWx0c09yYWNsZS5maW5hbFZhbHVlKCk7CiAgICAgICAgaWYgKG9yYWNsZVZhbHVlID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0cyA9IG9yYWNsZVZhbHVlOwogICAgICAgIHNjb3JpbmdNYXNrID0gQnl0ZUJyYWNrZXQuZ2V0U2NvcmluZ01hc2socmVzdWx0cyk7CiAgICAgICAgY29udGVzdE92ZXJUaW1lID0gbm93ICsgc2NvcmluZ0R1cmF0aW9uOwogICAgICAgIFRvdXJuYW1lbnRPdmVyKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcmV2ZWFsQnJhY2tldChieXRlczggYnJhY2tldCwgYnl0ZXMxNiBzYWx0KSByZXR1cm5zIChib29sKSB7CiAgICAgICAgdmFyIHN1Ym1pc3Npb24gPSBzdWJtaXNzaW9uc1ttc2cuc2VuZGVyXTsKICAgICAgICBpZiAoc2hhMyhtc2cuc2VuZGVyLCBicmFja2V0LCBzYWx0KSAhPSBzdWJtaXNzaW9uLmNvbW1pdG1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc3VibWlzc2lvbi5icmFja2V0ID0gYnJhY2tldDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzY29yZUJyYWNrZXQoYWRkcmVzcyBhY2NvdW50KSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKHJlc3VsdHMgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChub3cgPj0gY29udGVzdE92ZXJUaW1lKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBzdWJtaXNzaW9uID0gc3VibWlzc2lvbnNbYWNjb3VudF07CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uYnJhY2tldCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uc2NvcmUgIT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBzdWJtaXNzaW9uLnNjb3JlID0gQnl0ZUJyYWNrZXQuZ2V0QnJhY2tldFNjb3JlKHN1Ym1pc3Npb24uYnJhY2tldCwgcmVzdWx0cywgc2NvcmluZ01hc2spOwoKICAgICAgICBpZiAoc3VibWlzc2lvbi5zY29yZSA+IHdpbm5pbmdTY29yZSkgewogICAgICAgICAgICB3aW5uaW5nU2NvcmUgPSBzdWJtaXNzaW9uLnNjb3JlOwogICAgICAgICAgICBudW1XaW5uZXJzID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uc2NvcmUgPT0gd2lubmluZ1Njb3JlKSB7CiAgICAgICAgICAgIG51bVdpbm5lcnMrKzsKICAgICAgICAgICAgd2lubmluZ3MgPSB0aGlzLmJhbGFuY2UgLyBudW1XaW5uZXJzOwogICAgICAgICAgICBOZXdXaW5uZXIoYWNjb3VudCwgc3VibWlzc2lvbi5zY29yZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb2xsZWN0V2lubmluZ3MoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKG5vdyA8IGNvbnRlc3RPdmVyVGltZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3VibWlzc2lvbiA9IHN1Ym1pc3Npb25zW21zZy5zZW5kZXJdOwogICAgICAgIGlmIChzdWJtaXNzaW9uLnNjb3JlICE9IHdpbm5pbmdTY29yZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChzdWJtaXNzaW9uLmNvbGxlY3RlZFdpbm5pbmdzKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHN1Ym1pc3Npb24uY29sbGVjdGVkV2lubmluZ3MgPSB0cnVlOwoKICAgICAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZCh3aW5uaW5ncykpIHsKICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb2xsZWN0RW50cnlGZWUoKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKG5vdyA8IG5vQ29udGVzdFRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAocmVzdWx0cyAhPSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBzdWJtaXNzaW9uID0gc3VibWlzc2lvbnNbbXNnLnNlbmRlcl07CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uY29tbWl0bWVudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKHN1Ym1pc3Npb24uY29sbGVjdGVkRW50cnlGZWUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc3VibWlzc2lvbi5jb2xsZWN0ZWRFbnRyeUZlZSA9IHRydWU7CgogICAgICAgIGlmICghbXNnLnNlbmRlci5zZW5kKGVudHJ5RmVlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJyYWNrZXRTY29yZShieXRlczggYnJhY2tldCkgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICBpZiAocmVzdWx0cyA9PSAwKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICByZXR1cm4gQnl0ZUJyYWNrZXQuZ2V0QnJhY2tldFNjb3JlKGJyYWNrZXQsIHJlc3VsdHMsIHNjb3JpbmdNYXNrKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCcmFja2V0KGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXM4KSB7CiAgICAgICAgcmV0dXJuIHN1Ym1pc3Npb25zW2FjY291bnRdLmJyYWNrZXQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U2NvcmUoYWRkcmVzcyBhY2NvdW50KSBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgIHJldHVybiBzdWJtaXNzaW9uc1thY2NvdW50XS5zY29yZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDb21taXRtZW50KGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBzdWJtaXNzaW9uc1thY2NvdW50XS5jb21taXRtZW50OwogICAgfQoKICAgIGZ1bmN0aW9uIGhhc0NvbGxlY3RlZFdpbm5pbmdzKGFkZHJlc3MgYWNjb3VudCkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdWJtaXNzaW9uc1thY2NvdW50XS5jb2xsZWN0ZWRXaW5uaW5nczsKICAgIH0KfQ=='.
	

]
