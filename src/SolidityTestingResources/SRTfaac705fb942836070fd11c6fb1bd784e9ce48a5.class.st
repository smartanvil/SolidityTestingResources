Class {
	#name : #SRTfaac705fb942836070fd11c6fb1bd784e9ce48a5,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfaac705fb942836070fd11c6fb1bd784e9ce48a5 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgU3RvcmFnZSB7CiAgICBzdHJ1Y3QgQ3JhdGUgewogICAgICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiB1aW50MjU2KSB1aW50czsKICAgICAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gYWRkcmVzcykgYWRkcmVzc2VzOwogICAgICAgIG1hcHBpbmcoYnl0ZXMzMiA9PiBib29sKSBib29sczsKICAgICAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsczsKICAgIH0KCiAgICBtYXBwaW5nKGJ5dGVzMzIgPT4gQ3JhdGUpIGNyYXRlczsKCiAgICBmdW5jdGlvbiBzZXRVSW50KGJ5dGVzMzIgX2NyYXRlLCBieXRlczMyIF9rZXksIHVpbnQyNTYgX3ZhbHVlKSAgewogICAgICAgIGNyYXRlc1tfY3JhdGVdLnVpbnRzW19rZXldID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFVJbnQoYnl0ZXMzMiBfY3JhdGUsIGJ5dGVzMzIgX2tleSkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGNyYXRlc1tfY3JhdGVdLnVpbnRzW19rZXldOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFkZHJlc3MoYnl0ZXMzMiBfY3JhdGUsIGJ5dGVzMzIgX2tleSwgYWRkcmVzcyBfdmFsdWUpICB7CiAgICAgICAgY3JhdGVzW19jcmF0ZV0uYWRkcmVzc2VzW19rZXldID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFkZHJlc3MoYnl0ZXMzMiBfY3JhdGUsIGJ5dGVzMzIgX2tleSkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGNyYXRlc1tfY3JhdGVdLmFkZHJlc3Nlc1tfa2V5XTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRCb29sKGJ5dGVzMzIgX2NyYXRlLCBieXRlczMyIF9rZXksIGJvb2wgX3ZhbHVlKSAgewogICAgICAgIGNyYXRlc1tfY3JhdGVdLmJvb2xzW19rZXldID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJvb2woYnl0ZXMzMiBfY3JhdGUsIGJ5dGVzMzIgX2tleSkgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGNyYXRlc1tfY3JhdGVdLmJvb2xzW19rZXldOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEJhbChieXRlczMyIF9jcmF0ZSwgYWRkcmVzcyBfa2V5LCB1aW50MjU2IF92YWx1ZSkgIHsKICAgICAgICBjcmF0ZXNbX2NyYXRlXS5iYWxzW19rZXldID0gX3ZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhbChieXRlczMyIF9jcmF0ZSwgYWRkcmVzcyBfa2V5KSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gY3JhdGVzW19jcmF0ZV0uYmFsc1tfa2V5XTsKICAgIH0KfQoKY29udHJhY3QgU3RvcmFnZUVuYWJsZWQgewoKICAvLyBzYXRlbGl0ZSBjb250cmFjdCBhZGRyZXNzZXMKICBhZGRyZXNzIHB1YmxpYyBzdG9yYWdlQWRkcjsKCiAgZnVuY3Rpb24gU3RvcmFnZUVuYWJsZWQoYWRkcmVzcyBfc3RvcmFnZUFkZHIpIHsKICAgIHN0b3JhZ2VBZGRyID0gX3N0b3JhZ2VBZGRyOwogIH0KCgogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgLy8gIyMjIyMjIyMjIyMgTlVUWiBGVU5DVElPTlMgICMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiAgLy8gYWxsIE51dHogYmFsYW5jZXMKICBmdW5jdGlvbiBiYWJ6QmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gU3RvcmFnZShzdG9yYWdlQWRkcikuZ2V0QmFsKCdOdXR6JywgX293bmVyKTsKICB9CiAgZnVuY3Rpb24gX3NldEJhYnpCYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX25ld1ZhbHVlKSBpbnRlcm5hbCB7CiAgICBTdG9yYWdlKHN0b3JhZ2VBZGRyKS5zZXRCYWwoJ051dHonLCBfb3duZXIsIF9uZXdWYWx1ZSk7CiAgfQogIC8vIGFjdGl2ZSBzdXBwbHkgLSBzdW0gb2YgYmFsYW5jZXMgYWJvdmUKICBmdW5jdGlvbiBhY3RpdmVTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gU3RvcmFnZShzdG9yYWdlQWRkcikuZ2V0VUludCgnTnV0eicsICdhY3RpdmVTdXBwbHknKTsKICB9CiAgZnVuY3Rpb24gX3NldEFjdGl2ZVN1cHBseSh1aW50MjU2IF9uZXdBY3RpdmVTdXBwbHkpIGludGVybmFsIHsKICAgIFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLnNldFVJbnQoJ051dHonLCAnYWN0aXZlU3VwcGx5JywgX25ld0FjdGl2ZVN1cHBseSk7CiAgfQogIC8vIGJ1cm4gcG9vbCAtIGluYWN0aXZlIHN1cHBseQogIGZ1bmN0aW9uIGJ1cm5Qb29sKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLmdldFVJbnQoJ051dHonLCAnYnVyblBvb2wnKTsKICB9CiAgZnVuY3Rpb24gX3NldEJ1cm5Qb29sKHVpbnQyNTYgX25ld0J1cm5Qb29sKSBpbnRlcm5hbCB7CiAgICBTdG9yYWdlKHN0b3JhZ2VBZGRyKS5zZXRVSW50KCdOdXR6JywgJ2J1cm5Qb29sJywgX25ld0J1cm5Qb29sKTsKICB9CiAgLy8gcG93ZXIgcG9vbCAtIGluYWN0aXZlIHN1cHBseQogIGZ1bmN0aW9uIHBvd2VyUG9vbCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBTdG9yYWdlKHN0b3JhZ2VBZGRyKS5nZXRVSW50KCdOdXR6JywgJ3Bvd2VyUG9vbCcpOwogIH0KICBmdW5jdGlvbiBfc2V0UG93ZXJQb29sKHVpbnQyNTYgX25ld1Bvd2VyUG9vbCkgaW50ZXJuYWwgewogICAgU3RvcmFnZShzdG9yYWdlQWRkcikuc2V0VUludCgnTnV0eicsICdwb3dlclBvb2wnLCBfbmV3UG93ZXJQb29sKTsKICB9CgoKCgoKICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogIC8vICMjIyMjIyMjIyMjIFBPV0VSICAgRlVOQ1RJT05TICAjIyMjIyMjIyMjIyMjCiAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgLy8gYWxsIHBvd2VyIGJhbGFuY2VzCiAgZnVuY3Rpb24gcG93ZXJCYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBTdG9yYWdlKHN0b3JhZ2VBZGRyKS5nZXRCYWwoJ1Bvd2VyJywgX293bmVyKTsKICB9CgogIGZ1bmN0aW9uIF9zZXRQb3dlckJhbGFuY2VPZihhZGRyZXNzIF9vd25lciwgdWludDI1NiBfbmV3VmFsdWUpIGludGVybmFsIHsKICAgIFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLnNldEJhbCgnUG93ZXInLCBfb3duZXIsIF9uZXdWYWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBvdXRzdGFuZGluZ1Bvd2VyKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLmdldFVJbnQoJ1Bvd2VyJywgJ291dHN0YW5kaW5nUG93ZXInKTsKICB9CgogIGZ1bmN0aW9uIF9zZXRPdXRzdGFuZGluZ1Bvd2VyKHVpbnQyNTYgX25ld091dHN0YW5kaW5nUG93ZXIpIGludGVybmFsIHsKICAgIFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLnNldFVJbnQoJ1Bvd2VyJywgJ291dHN0YW5kaW5nUG93ZXInLCBfbmV3T3V0c3RhbmRpbmdQb3dlcik7CiAgfQoKICBmdW5jdGlvbiBhdXRob3JpemVkUG93ZXIoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gU3RvcmFnZShzdG9yYWdlQWRkcikuZ2V0VUludCgnUG93ZXInLCAnYXV0aG9yaXplZFBvd2VyJyk7CiAgfQoKICBmdW5jdGlvbiBfc2V0QXV0aG9yaXplZFBvd2VyKHVpbnQyNTYgX25ld0F1dGhvcml6ZWRQb3dlcikgaW50ZXJuYWwgewogICAgU3RvcmFnZShzdG9yYWdlQWRkcikuc2V0VUludCgnUG93ZXInLCAnYXV0aG9yaXplZFBvd2VyJywgX25ld0F1dGhvcml6ZWRQb3dlcik7CiAgfQoKCiAgZnVuY3Rpb24gZG93bnMoYWRkcmVzcyBfdXNlcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYgdG90YWwsIHVpbnQyNTYgbGVmdCwgdWludDI1NiBzdGFydCkgewogICAgdWludDI1NiByYXdCeXRlcyA9IFN0b3JhZ2Uoc3RvcmFnZUFkZHIpLmdldEJhbCgnUG93ZXJEb3duJywgX3VzZXIpOwogICAgc3RhcnQgPSB1aW50NjQocmF3Qnl0ZXMpOwogICAgbGVmdCA9IHVpbnQ5NihyYXdCeXRlcyA+PiAoNjQpKTsKICAgIHRvdGFsID0gdWludDk2KHJhd0J5dGVzID4+ICg5NiArIDY0KSk7CiAgICByZXR1cm47CiAgfQoKICBmdW5jdGlvbiBfc2V0RG93blJlcXVlc3QoYWRkcmVzcyBfaG9sZGVyLCB1aW50MjU2IHRvdGFsLCB1aW50MjU2IGxlZnQsIHVpbnQyNTYgc3RhcnQpIGludGVybmFsIHsKICAgIHVpbnQyNTYgcmVzdWx0ID0gdWludDY0KHN0YXJ0KSArIChsZWZ0IDw8IDY0KSArICh0b3RhbCA8PCAoOTYgKyA2NCkpOwogICAgU3RvcmFnZShzdG9yYWdlQWRkcikuc2V0QmFsKCdQb3dlckRvd24nLCBfaG9sZGVyLCByZXN1bHQpOwogIH0KCn0KCgpjb250cmFjdCBHb3Zlcm5hYmxlIHsKCiAgLy8gbGlzdCBvZiBhZG1pbnMsIGNvdW5jaWwgYXQgZmlyc3Qgc3BvdAogIGFkZHJlc3NbXSBwdWJsaWMgYWRtaW5zOwoKICBmdW5jdGlvbiBHb3Zlcm5hYmxlKCkgewogICAgYWRtaW5zLmxlbmd0aCA9IDE7CiAgICBhZG1pbnNbMF0gPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seUFkbWlucygpIHsKICAgIGJvb2wgaXNBZG1pbiA9IGZhbHNlOwogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgYWRtaW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChtc2cuc2VuZGVyID09IGFkbWluc1tpXSkgewogICAgICAgIGlzQWRtaW4gPSB0cnVlOwogICAgICB9CiAgICB9CiAgICByZXF1aXJlKGlzQWRtaW4gPT0gdHJ1ZSk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gYWRkQWRtaW4oYWRkcmVzcyBfYWRtaW4pIHB1YmxpYyBvbmx5QWRtaW5zIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGFkbWlucy5sZW5ndGg7IGkrKykgewogICAgICByZXF1aXJlKF9hZG1pbiAhPSBhZG1pbnNbaV0pOwogICAgfQogICAgcmVxdWlyZShhZG1pbnMubGVuZ3RoIDwgMTApOwogICAgYWRtaW5zW2FkbWlucy5sZW5ndGgrK10gPSBfYWRtaW47CiAgfQoKICBmdW5jdGlvbiByZW1vdmVBZG1pbihhZGRyZXNzIF9hZG1pbikgcHVibGljIG9ubHlBZG1pbnMgewogICAgdWludDI1NiBwb3MgPSBhZG1pbnMubGVuZ3RoOwogICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgYWRtaW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChfYWRtaW4gPT0gYWRtaW5zW2ldKSB7CiAgICAgICAgcG9zID0gaTsKICAgICAgfQogICAgfQogICAgcmVxdWlyZShwb3MgPCBhZG1pbnMubGVuZ3RoKTsKICAgIC8vIGlmIG5vdCBsYXN0IGVsZW1lbnQsIHN3aXRjaCB3aXRoIGxhc3QKICAgIGlmIChwb3MgPCBhZG1pbnMubGVuZ3RoIC0gMSkgewogICAgICBhZG1pbnNbcG9zXSA9IGFkbWluc1thZG1pbnMubGVuZ3RoIC0gMV07CiAgICB9CiAgICAvLyB0aGVuIGN1dCBvZmYgdGhlIHRhaWwKICAgIGFkbWlucy5sZW5ndGgtLTsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIEdvdmVybmFibGUgewoKICBib29sIHB1YmxpYyBwYXVzZWQgPSB0cnVlOwoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlBZG1pbnMgd2hlbk5vdFBhdXNlZCB7CiAgICBwYXVzZWQgPSB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlBZG1pbnMgd2hlblBhdXNlZCB7CiAgICAvL1RPRE86IGRvIHNvbWUgY2hlY2tzCiAgICBwYXVzZWQgPSBmYWxzZTsKICB9Cgp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgTnV0ekVuYWJsZWQgaXMgUGF1c2FibGUsIFN0b3JhZ2VFbmFibGVkIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgLy8gc2F0ZWxpdGUgY29udHJhY3QgYWRkcmVzc2VzCiAgYWRkcmVzcyBwdWJsaWMgbnV0ekFkZHI7CgoKICBtb2RpZmllciBvbmx5TnV0eigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBudXR6QWRkcik7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gTnV0ekVuYWJsZWQoYWRkcmVzcyBfbnV0ekFkZHIsIGFkZHJlc3MgX3N0b3JhZ2VBZGRyKQogICAgU3RvcmFnZUVuYWJsZWQoX3N0b3JhZ2VBZGRyKSB7CiAgICBudXR6QWRkciA9IF9udXR6QWRkcjsKICB9CgogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgLy8gIyMjIyMjIyMjIyMgTlVUWiBGVU5DVElPTlMgICMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAvLyB0b3RhbCBzdXBwbHkKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhY3RpdmVTdXBwbHkoKS5hZGQocG93ZXJQb29sKCkpLmFkZChidXJuUG9vbCgpKTsKICB9CgogIC8vIGFsbG93YW5jZXMgYWNjb3JkaW5nIHRvIEVSQzIwCiAgLy8gbm90IHdyaXR0ZW4gdG8gc3RvcmFnZSwgYXMgbm90IHZlcnkgY3JpdGljYWwKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIGludGVybmFsIGFsbG93ZWQ7CgogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnRCYWJ6KSBwdWJsaWMgb25seU51dHogd2hlbk5vdFBhdXNlZCB7CiAgICByZXF1aXJlKF9vd25lciAhPSBfc3BlbmRlcik7CiAgICBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdID0gX2Ftb3VudEJhYno7CiAgfQoKICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudEJhYnosIGJ5dGVzIF9kYXRhKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfYW1vdW50QmFieiA+IDApOwogICAgcmVxdWlyZShfZnJvbSAhPSBfdG8pOwogICAgX3NldEJhYnpCYWxhbmNlT2YoX2Zyb20sIGJhYnpCYWxhbmNlT2YoX2Zyb20pLnN1YihfYW1vdW50QmFieikpOwogICAgX3NldEJhYnpCYWxhbmNlT2YoX3RvLCBiYWJ6QmFsYW5jZU9mKF90bykuYWRkKF9hbW91bnRCYWJ6KSk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50QmFieiwgYnl0ZXMgX2RhdGEpIHB1YmxpYyBvbmx5TnV0eiB3aGVuTm90UGF1c2VkIHsKICAgIF90cmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50QmFieiwgX2RhdGEpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX3NlbmRlciwgYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudEJhYnosIGJ5dGVzIF9kYXRhKSBwdWJsaWMgb25seU51dHogd2hlbk5vdFBhdXNlZCB7CiAgICBhbGxvd2VkW19mcm9tXVtfc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW19zZW5kZXJdLnN1YihfYW1vdW50QmFieik7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudEJhYnosIF9kYXRhKTsKICB9Cgp9CgovKioKICogQHRpdGxlIFB1bGxQYXltZW50CiAqIEBkZXYgQmFzZSBjb250cmFjdCBzdXBwb3J0aW5nIGFzeW5jIHNlbmQgZm9yIHB1bGwgcGF5bWVudHMuCiAqLwpjb250cmFjdCBQdWxsUGF5bWVudCB7CgogIG1vZGlmaWVyIG9ubHlOdXR6KCkgewogICAgICBfOwogIH0KICAKbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICBfOwogIH0KCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCAoKSB7Xzt9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB2YWx1ZSk7CgogIGZ1bmN0aW9uIHBheW1lbnRPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB2YWx1ZSwgdWludDI1NiBkYXRlKSA7CgogIC8vLyBAZGV2IEFsbG93cyB0byBjaGFuZ2UgdGhlIGRhaWx5IGxpbWl0LiBUcmFuc2FjdGlvbiBoYXMgdG8gYmUgc2VudCBieSB3YWxsZXQuCiAgLy8vIEBwYXJhbSBfZGFpbHlMaW1pdCBBbW91bnQgaW4gd2VpLgogIGZ1bmN0aW9uIGNoYW5nZURhaWx5TGltaXQodWludCBfZGFpbHlMaW1pdCkgcHVibGljIDsKCiAgZnVuY3Rpb24gY2hhbmdlV2l0aGRyYXdhbERhdGUoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX25ld0RhdGUpICBwdWJsaWMgOwoKICBmdW5jdGlvbiBhc3luY1NlbmQoYWRkcmVzcyBfZGVzdCkgcHVibGljIHBheWFibGUgOwoKCiAgZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgOwoKICAvKgogICAqIEludGVybmFsIGZ1bmN0aW9ucwogICAqLwogIC8vLyBAZGV2IFJldHVybnMgaWYgYW1vdW50IGlzIHdpdGhpbiBkYWlseSBsaW1pdCBhbmQgcmVzZXRzIHNwZW50VG9kYXkgYWZ0ZXIgb25lIGRheS4KICAvLy8gQHBhcmFtIGFtb3VudCBBbW91bnQgdG8gd2l0aGRyYXcuCiAgLy8vIEByZXR1cm4gUmV0dXJucyBpZiBhbW91bnQgaXMgdW5kZXIgZGFpbHkgbGltaXQuCiAgZnVuY3Rpb24gaXNVbmRlckxpbWl0KHVpbnQgYW1vdW50KSBpbnRlcm5hbCByZXR1cm5zIChib29sKTsKCn0KCgovKioKICogTnV0eiBpbXBsZW1lbnRzIGEgcHJpY2UgZmxvb3IgYW5kIGEgcHJpY2UgY2VpbGluZyBvbiB0aGUgdG9rZW4gYmVpbmcKICogc29sZC4gSXQgaXMgYmFzZWQgb2YgdGhlIHplcHBlbGluIHRva2VuIGNvbnRyYWN0LgogKi8KY29udHJhY3QgTnV0eiB7CgoKICAvLyByZXR1cm5zIGJhbGFuY2VzIG9mIGFjdGl2ZSBob2xkZXJzCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50KTsKCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCiAgZnVuY3Rpb24gYWN0aXZlU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgogIC8vIHJldHVybiByZW1haW5pbmcgYWxsb3dhbmNlCiAgLy8gaWYgY2FsbGluZyByZXR1cm4gYWxsb3dlZFthZGRyZXNzKHRoaXMpXVtfc3BlbmRlcl07CiAgLy8gcmV0dXJucyBiYWxhbmNlIG9mIGV0aGVyIHBhcmtlZCB0byBiZSB3aXRoZHJhd24KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICAvLyByZXR1cm5zIGVpdGhlciB0aGUgc2FsZVByaWNlLCBvciBpZiByZXNlcnZlIGRvZXMgbm90IHN1ZmZpY2UKICAvLyBmb3IgYWN0aXZlIHN1cHBseSwgcmV0dXJucyBtYXhGbG9vcgogIGZ1bmN0aW9uIGZsb29yKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgogIC8vIHJldHVybnMgZWl0aGVyIHRoZSBzYWxlUHJpY2UsIG9yIGlmIHJlc2VydmUgZG9lcyBub3Qgc3VmZmljZQogIC8vIGZvciBhY3RpdmUgc3VwcGx5LCByZXR1cm5zIG1heEZsb29yCiAgZnVuY3Rpb24gY2VpbGluZygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICBmdW5jdGlvbiBwb3dlclBvb2woKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCgogIGZ1bmN0aW9uIF9jaGVja0Rlc3RpbmF0aW9uKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGludGVybmFsOwoKCgogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgLy8gIyMjIyMjIyMjIyMgQURNSU4gRlVOQ1RJT05TICMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICBmdW5jdGlvbiBwb3dlckRvd24oYWRkcmVzcyBwb3dlckFkZHIsIGFkZHJlc3MgX2hvbGRlciwgdWludDI1NiBfYW1vdW50QmFieikgcHVibGljIDsKCgogIGZ1bmN0aW9uIGFzeW5jU2VuZChhZGRyZXNzIF9wdWxsQWRkciwgYWRkcmVzcyBfZGVzdCwgdWludDI1NiBfYW1vdW50V2VpKSBwdWJsaWMgOwoKCiAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyBQVUJMSUMgRlVOQ1RJT05TICMjIyMjIyMjIyMjIyMjIwogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50QmFieikgcHVibGljOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50QmFieiwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudEJhYnopIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgZnVuY3Rpb24gdHJhbnNEYXRhKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnRCYWJ6LCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudEJhYnosIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50QmFieik7CgogIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlOwoKICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF9wcmljZSkgcHVibGljIHBheWFibGU7CgogIGZ1bmN0aW9uIHNlbGwodWludDI1NiBfcHJpY2UsIHVpbnQyNTYgX2Ftb3VudEJhYnopOwoKICBmdW5jdGlvbiBwb3dlclVwKHVpbnQyNTYgX2Ftb3VudEJhYnopIHB1YmxpYzsKCn0KCgpjb250cmFjdCBNYXJrZXRFbmFibGVkIGlzIE51dHpFbmFibGVkIHsKCiAgdWludDI1NiBjb25zdGFudCBJTkZJTklUWSA9IDB4ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjsKCiAgLy8gYWRkcmVzcyBvZiB0aGUgcHVsbCBwYXllbW50IHNhdGVsaXRlCiAgYWRkcmVzcyBwdWJsaWMgcHVsbEFkZHI7CgogIC8vIHRoZSBUb2tlbiBzYWxlIG1lY2hhbmlzbSBwYXJhbWV0ZXJzOgogIC8vIHB1cmNoYXNlUHJpY2UgaXMgdGhlIG51bWJlciBvZiBOVFogcmVjZWl2ZWQgZm9yIHB1cmNoYXNlIHdpdGggMSBFVEgKICB1aW50MjU2IGludGVybmFsIHB1cmNoYXNlUHJpY2U7CgogIC8vIGZsb29yIGlzIHRoZSBudW1iZXIgb2YgTlRaIG5lZWRlZCwgdG8gcmVjZWl2ZSAxIEVUSCBpbiBzZWxsCiAgdWludDI1NiBpbnRlcm5hbCBzYWxlUHJpY2U7CgogIGZ1bmN0aW9uIE1hcmtldEVuYWJsZWQoYWRkcmVzcyBfcHVsbEFkZHIsIGFkZHJlc3MgX3N0b3JhZ2VBZGRyLCBhZGRyZXNzIF9udXR6QWRkcikKICAgIE51dHpFbmFibGVkKF9udXR6QWRkciwgX3N0b3JhZ2VBZGRyKSB7CiAgICBwdWxsQWRkciA9IF9wdWxsQWRkcjsKICB9CgoKICBmdW5jdGlvbiBjZWlsaW5nKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHB1cmNoYXNlUHJpY2U7CiAgfQoKICAvLyByZXR1cm5zIGVpdGhlciB0aGUgc2FsZVByaWNlLCBvciBpZiByZXNlcnZlIGRvZXMgbm90IHN1ZmZpY2UKICAvLyBmb3IgYWN0aXZlIHN1cHBseSwgcmV0dXJucyBtYXhGbG9vcgogIGZ1bmN0aW9uIGZsb29yKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKG51dHpBZGRyLmJhbGFuY2UgPT0gMCkgewogICAgICByZXR1cm4gSU5GSU5JVFk7CiAgICB9CiAgICB1aW50MjU2IG1heEZsb29yID0gYWN0aXZlU3VwcGx5KCkubXVsKDEwMDAwMDApLmRpdihudXR6QWRkci5iYWxhbmNlKTsgLy8gMSwwMDAsMDAwIFdFSSwgdXNlZCBhcyBwcmljZSBmYWN0b3IKICAgIC8vIHJldHVybiBtYXggb2YgbWF4Rmxvb3Igb3Igc2FsZVByaWNlCiAgICByZXR1cm4gbWF4Rmxvb3IgPj0gc2FsZVByaWNlID8gbWF4Rmxvb3IgOiBzYWxlUHJpY2U7CiAgfQoKICBmdW5jdGlvbiBtb3ZlQ2VpbGluZyh1aW50MjU2IF9uZXdQdXJjaGFzZVByaWNlKSBwdWJsaWMgb25seUFkbWlucyB7CiAgICByZXF1aXJlKF9uZXdQdXJjaGFzZVByaWNlIDw9IHNhbGVQcmljZSk7CiAgICBwdXJjaGFzZVByaWNlID0gX25ld1B1cmNoYXNlUHJpY2U7CiAgfQoKICBmdW5jdGlvbiBtb3ZlRmxvb3IodWludDI1NiBfbmV3U2FsZVByaWNlKSBwdWJsaWMgb25seUFkbWlucyB7CiAgICByZXF1aXJlKF9uZXdTYWxlUHJpY2UgPj0gcHVyY2hhc2VQcmljZSk7CiAgICAvLyBtb3ZlRmxvb3IgZmFpbHMgaWYgdGhlIGFkbWluaXN0cmF0b3IgdHJpZXMgdG8gcHVzaCB0aGUgZmxvb3Igc28gbG93CiAgICAvLyB0aGF0IHRoZSBzYWxlIG1lY2hhbmlzbSBpcyBubyBsb25nZXIgYWJsZSB0byBidXkgYmFjayBhbGwgdG9rZW5zIGF0CiAgICAvLyB0aGUgZmxvb3IgcHJpY2UgaWYgdGhvc2UgZnVuZHMgd2VyZSB0byBiZSB3aXRoZHJhd24uCiAgICBpZiAoX25ld1NhbGVQcmljZSA8IElORklOSVRZKSB7CiAgICAgIHJlcXVpcmUobnV0ekFkZHIuYmFsYW5jZSA+PSBhY3RpdmVTdXBwbHkoKS5tdWwoMTAwMDAwMCkuZGl2KF9uZXdTYWxlUHJpY2UpKTsgLy8gMSwwMDAsMDAwIFdFSSwgdXNlZCBhcyBwcmljZSBmYWN0b3IKICAgIH0KICAgIHNhbGVQcmljZSA9IF9uZXdTYWxlUHJpY2U7CiAgfQoKICBmdW5jdGlvbiBwdXJjaGFzZShhZGRyZXNzIF9zZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF9wcmljZSkgcHVibGljIG9ubHlOdXR6IHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gZGlzYWJsZSBwdXJjaGFzZXMgaWYgcHVyY2hhc2VQcmljZSBzZXQgdG8gMAogICAgcmVxdWlyZShwdXJjaGFzZVByaWNlID4gMCk7CiAgICByZXF1aXJlKF9wcmljZSA9PSBwdXJjaGFzZVByaWNlKTsKCiAgICB1aW50MjU2IGFtb3VudEJhYnogPSBwdXJjaGFzZVByaWNlLm11bChfdmFsdWUpLmRpdigxMDAwMDAwKTsgLy8gMSwwMDAsMDAwIFdFSSwgdXNlZCBhcyBwcmljZSBmYWN0b3IKICAgIC8vIGF2b2lkIGRlcG9zaXRzIHRoYXQgaXNzdWUgbm90aGluZwogICAgLy8gbWlnaHQgaGFwcGVuIHdpdGggdmVyeSBoaWdoIHB1cmNoYXNlIHByaWNlCiAgICByZXF1aXJlKGFtb3VudEJhYnogPiAwKTsKCiAgICAvLyBtYWtlIHN1cmUgcG93ZXIgcG9vbCBncm93cyBwcm9wb3J0aW9uYWwgdG8gZWNvbm9teQogICAgdWludDI1NiBhY3RpdmVTdXAgPSBhY3RpdmVTdXBwbHkoKTsKICAgIHVpbnQyNTYgcG93UG9vbCA9IHBvd2VyUG9vbCgpOwogICAgaWYgKHBvd1Bvb2wgPiAwKSB7CiAgICAgIHVpbnQyNTYgcG93ZXJTaGFyZSA9IHBvd1Bvb2wubXVsKGFtb3VudEJhYnopLmRpdihhY3RpdmVTdXAuYWRkKGJ1cm5Qb29sKCkpKTsKICAgICAgX3NldFBvd2VyUG9vbChwb3dQb29sLmFkZChwb3dlclNoYXJlKSk7CiAgICB9CiAgICBfc2V0QWN0aXZlU3VwcGx5KGFjdGl2ZVN1cC5hZGQoYW1vdW50QmFieikpOwogICAgX3NldEJhYnpCYWxhbmNlT2YoX3NlbmRlciwgYmFiekJhbGFuY2VPZihfc2VuZGVyKS5hZGQoYW1vdW50QmFieikpOwogICAgcmV0dXJuIGFtb3VudEJhYno7CiAgfQoKICBmdW5jdGlvbiBzZWxsKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9hbW91bnRCYWJ6KSBwdWJsaWMgb25seU51dHogd2hlbk5vdFBhdXNlZCB7CiAgICB1aW50MjU2IGVmZmVjdGl2ZUZsb29yID0gZmxvb3IoKTsKICAgIHJlcXVpcmUoX2Ftb3VudEJhYnogIT0gMCk7CiAgICByZXF1aXJlKGVmZmVjdGl2ZUZsb29yICE9IElORklOSVRZKTsKICAgIHJlcXVpcmUoX3ByaWNlID09IGVmZmVjdGl2ZUZsb29yKTsKCiAgICB1aW50MjU2IGFtb3VudFdlaSA9IF9hbW91bnRCYWJ6Lm11bCgxMDAwMDAwKS5kaXYoZWZmZWN0aXZlRmxvb3IpOyAgLy8gMSwwMDAsMDAwIFdFSSwgdXNlZCBhcyBwcmljZSBmYWN0b3IKICAgIHJlcXVpcmUoYW1vdW50V2VpID4gMCk7CiAgICAvLyBtYWtlIHN1cmUgcG93ZXIgcG9vbCBzaHJpbmtzIHByb3BvcnRpb25hbCB0byBlY29ub215CiAgICB1aW50MjU2IHBvd1Bvb2wgPSBwb3dlclBvb2woKTsKICAgIHVpbnQyNTYgYWN0aXZlU3VwID0gYWN0aXZlU3VwcGx5KCk7CiAgICBpZiAocG93UG9vbCA+IDApIHsKICAgICAgdWludDI1NiBwb3dlclNoYXJlID0gcG93UG9vbC5tdWwoX2Ftb3VudEJhYnopLmRpdihhY3RpdmVTdXApOwogICAgICBfc2V0UG93ZXJQb29sKHBvd1Bvb2wuc3ViKHBvd2VyU2hhcmUpKTsKICAgIH0KICAgIF9zZXRBY3RpdmVTdXBwbHkoYWN0aXZlU3VwLnN1YihfYW1vdW50QmFieikpOwogICAgX3NldEJhYnpCYWxhbmNlT2YoX2Zyb20sIGJhYnpCYWxhbmNlT2YoX2Zyb20pLnN1YihfYW1vdW50QmFieikpOwogICAgTnV0eihudXR6QWRkcikuYXN5bmNTZW5kKHB1bGxBZGRyLCBfZnJvbSwgYW1vdW50V2VpKTsKICB9CgoKICAvLyB3aXRoZHJhdyBleGNlc3NpdmUgcmVzZXJ2ZSAtIGkuZS4gbWlsZXN0b25lcwogIGZ1bmN0aW9uIGFsbG9jYXRlRXRoZXIodWludDI1NiBfYW1vdW50V2VpLCBhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIG9ubHlBZG1pbnMgewogICAgcmVxdWlyZShfYW1vdW50V2VpID4gMCk7CiAgICAvLyBhbGxvY2F0ZUV0aGVyIGZhaWxzIGlmIGFsbG9jYXRpbmcgdGhvc2UgZnVuZHMgd291bGQgbWVhbiB0aGF0IHRoZQogICAgLy8gc2FsZSBtZWNoYW5pc20gaXMgbm8gbG9uZ2VyIGFibGUgdG8gYnV5IGJhY2sgYWxsIHRva2VucyBhdCB0aGUgZmxvb3IKICAgIC8vIHByaWNlIGlmIHRob3NlIGZ1bmRzIHdlcmUgdG8gYmUgd2l0aGRyYXduLgogICAgcmVxdWlyZShudXR6QWRkci5iYWxhbmNlLnN1YihfYW1vdW50V2VpKSA+PSBhY3RpdmVTdXBwbHkoKS5tdWwoMTAwMDAwMCkuZGl2KHNhbGVQcmljZSkpOyAvLyAxLDAwMCwwMDAgV0VJLCB1c2VkIGFzIHByaWNlIGZhY3RvcgogICAgTnV0eihudXR6QWRkcikuYXN5bmNTZW5kKHB1bGxBZGRyLCBfYmVuZWZpY2lhcnksIF9hbW91bnRXZWkpOwogIH0KCn0KCgoKY29udHJhY3QgUG93ZXIgewoKCgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9ob2xkZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwoKICBmdW5jdGlvbiBhY3RpdmVTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCgogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgLy8gIyMjIyMjIyMjIyMgQURNSU4gRlVOQ1RJT05TICMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICBmdW5jdGlvbiBzbGFzaFBvd2VyKGFkZHJlc3MgX2hvbGRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzMzIgX2RhdGEpIHB1YmxpYyA7CgogIGZ1bmN0aW9uIHBvd2VyVXAoYWRkcmVzcyBfaG9sZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIDsKCiAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAvLyAjIyMjIyMjIyMjIyBQVUJMSUMgRlVOQ1RJT05TICMjIyMjIyMjIyMjIyMjIwogIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogIC8vIHJlZ2lzdGVycyBhIHBvd2VyZG93biByZXF1ZXN0CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudFBvd2VyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgZnVuY3Rpb24gZG93bnRpbWUoKSBwdWJsaWMgcmV0dXJucyAodWludDI1Nik7CgogIGZ1bmN0aW9uIGRvd25UaWNrKGFkZHJlc3MgX293bmVyKSBwdWJsaWM7CgogIGZ1bmN0aW9uIGRvd25zKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiwgdWludDI1NiwgdWludDI1Nik7Cgp9CgoKY29udHJhY3QgUG93ZXJFbmFibGVkIGlzIE1hcmtldEVuYWJsZWQgewoKICAvLyBzYXRlbGl0ZSBjb250cmFjdCBhZGRyZXNzZXMKICBhZGRyZXNzIHB1YmxpYyBwb3dlckFkZHI7CgogIC8vIG1heFBvd2VyIGlzIGEgbGltaXQgb2YgdG90YWwgcG93ZXIgdGhhdCBjYW4gYmUgb3V0c3RhbmRpbmcKICAvLyBtYXhQb3dlciBoYXMgYSB2YWxpZCB2YWx1ZSBiZXR3ZWVuIG91dHN0YW5kaW5nUG93ZXIgYW5kIGF1dGhvcml6ZWRQb3cvMgogIHVpbnQyNTYgcHVibGljIG1heFBvd2VyID0gMDsKCiAgLy8gdGltZSBpdCBzaG91bGQgdGFrZSB0byBwb3dlciBkb3duCiAgdWludDI1NiBwdWJsaWMgZG93bnRpbWU7CgogIG1vZGlmaWVyIG9ubHlQb3dlcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBwb3dlckFkZHIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIFBvd2VyRW5hYmxlZChhZGRyZXNzIF9wb3dlckFkZHIsIGFkZHJlc3MgX3B1bGxBZGRyLCBhZGRyZXNzIF9zdG9yYWdlQWRkciwgYWRkcmVzcyBfbnV0ekFkZHIpCiAgICBNYXJrZXRFbmFibGVkKF9wdWxsQWRkciwgX251dHpBZGRyLCBfc3RvcmFnZUFkZHIpIHsKICAgIHBvd2VyQWRkciA9IF9wb3dlckFkZHI7CiAgfQoKICBmdW5jdGlvbiBzZXRNYXhQb3dlcih1aW50MjU2IF9tYXhQb3dlcikgcHVibGljIG9ubHlBZG1pbnMgewogICAgcmVxdWlyZShvdXRzdGFuZGluZ1Bvd2VyKCkgPD0gX21heFBvd2VyICYmIF9tYXhQb3dlciA8IGF1dGhvcml6ZWRQb3dlcigpKTsKICAgIG1heFBvd2VyID0gX21heFBvd2VyOwogIH0KCiAgZnVuY3Rpb24gc2V0RG93bnRpbWUodWludDI1NiBfZG93bnRpbWUpIHB1YmxpYyBvbmx5QWRtaW5zIHsKICAgIGRvd250aW1lID0gX2Rvd250aW1lOwogIH0KCiAgLy8gdGhpcyBpcyBjYWxsZWQgd2hlbiBOVFogYXJlIGRlcG9zaXRlZCBpbnRvIHRoZSBidXJuIHBvb2wKICBmdW5jdGlvbiBkaWx1dGVQb3dlcih1aW50MjU2IF9hbW91bnRCYWJ6LCB1aW50MjU2IF9hbW91bnRQb3dlcikgcHVibGljIG9ubHlBZG1pbnMgewogICAgdWludDI1NiBhdXRob3JpemVkUG93ID0gYXV0aG9yaXplZFBvd2VyKCk7CiAgICB1aW50MjU2IHRvdGFsQmFieiA9IHRvdGFsU3VwcGx5KCk7CiAgICBpZiAoYXV0aG9yaXplZFBvdyA9PSAwKSB7CiAgICAgIC8vIGR1cmluZyB0aGUgZmlyc3QgY2FwaXRhbCBpbmNyZWFzZSwgc2V0IHZhbHVlIGRpcmVjdGx5IGFzIGF1dGhvcml6ZWQgc2hhcmVzCiAgICAgIF9zZXRBdXRob3JpemVkUG93ZXIoKF9hbW91bnRQb3dlciA+IDApID8gX2Ftb3VudFBvd2VyIDogX2Ftb3VudEJhYnouYWRkKHRvdGFsQmFieikpOwogICAgfSBlbHNlIHsKICAgICAgLy8gaW4gbGF0ZXIgaW5jcmVhc2VzLCBleHBhbmQgYXV0aG9yaXplZCBzaGFyZXMgYXQgc2FtZSByYXRlIGxpa2UgZWNvbm9teQogICAgICBfc2V0QXV0aG9yaXplZFBvd2VyKGF1dGhvcml6ZWRQb3cubXVsKHRvdGFsQmFiei5hZGQoX2Ftb3VudEJhYnopKS5kaXYodG90YWxCYWJ6KSk7CiAgICB9CiAgICBfc2V0QnVyblBvb2woYnVyblBvb2woKS5hZGQoX2Ftb3VudEJhYnopKTsKICB9CgogIGZ1bmN0aW9uIF9zbGFzaFBvd2VyKGFkZHJlc3MgX2hvbGRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzMzIgX2RhdGEpIGludGVybmFsIHsKICAgIHVpbnQyNTYgcHJldmlvdXNseU91dHN0YW5kaW5nID0gb3V0c3RhbmRpbmdQb3dlcigpOwogICAgX3NldE91dHN0YW5kaW5nUG93ZXIocHJldmlvdXNseU91dHN0YW5kaW5nLnN1YihfdmFsdWUpKTsKICAgIC8vIGFkanVzdCBzaXplIG9mIHBvd2VyIHBvb2wKICAgIHVpbnQyNTYgcG93UG9vbCA9IHBvd2VyUG9vbCgpOwogICAgdWludDI1NiBzbGFzaGluZ0JhYnogPSBfdmFsdWUubXVsKHBvd1Bvb2wpLmRpdihwcmV2aW91c2x5T3V0c3RhbmRpbmcpOwogICAgX3NldFBvd2VyUG9vbChwb3dQb29sLnN1YihzbGFzaGluZ0JhYnopKTsKICAgIC8vIHB1dCBldmVudCBpbnRvIHNhdGVsaXRlIGNvbnRyYWN0CiAgICBQb3dlcihwb3dlckFkZHIpLnNsYXNoUG93ZXIoX2hvbGRlciwgX3ZhbHVlLCBfZGF0YSk7CiAgfQoKICBmdW5jdGlvbiBzbGFzaFBvd2VyKGFkZHJlc3MgX2hvbGRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzMzIgX2RhdGEpIHB1YmxpYyBvbmx5QWRtaW5zIHsKICAgIF9zZXRQb3dlckJhbGFuY2VPZihfaG9sZGVyLCBwb3dlckJhbGFuY2VPZihfaG9sZGVyKS5zdWIoX3ZhbHVlKSk7CiAgICBfc2xhc2hQb3dlcihfaG9sZGVyLCBfdmFsdWUsIF9kYXRhKTsKICB9CgogIGZ1bmN0aW9uIHNsYXNoRG93blJlcXVlc3QodWludDI1NiBfcG9zLCBhZGRyZXNzIF9ob2xkZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyIF9kYXRhKSBwdWJsaWMgb25seUFkbWlucyB7CiAgICB2YXIgKHRvdGFsLCBsZWZ0LCBzdGFydCkgPSBkb3ducyhfaG9sZGVyKTsKICAgIGxlZnQgPSBsZWZ0LnN1YihfdmFsdWUpOwogICAgX3NldERvd25SZXF1ZXN0KF9ob2xkZXIsIHRvdGFsLCBsZWZ0LCBzdGFydCk7CiAgICBfc2xhc2hQb3dlcihfaG9sZGVyLCBfdmFsdWUsIF9kYXRhKTsKICB9CgogIC8vIHRoaXMgaXMgY2FsbGVkIHdoZW4gTlRaIGFyZSBkZXBvc2l0ZWQgaW50byB0aGUgcG93ZXIgcG9vbAogIGZ1bmN0aW9uIHBvd2VyVXAoYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF9hbW91bnRCYWJ6KSBwdWJsaWMgb25seU51dHogd2hlbk5vdFBhdXNlZCB7CiAgICB1aW50MjU2IGF1dGhvcml6ZWRQb3cgPSBhdXRob3JpemVkUG93ZXIoKTsKICAgIHJlcXVpcmUoYXV0aG9yaXplZFBvdyAhPSAwKTsKICAgIHJlcXVpcmUoX2Ftb3VudEJhYnogIT0gMCk7CiAgICB1aW50MjU2IHRvdGFsQmFieiA9IHRvdGFsU3VwcGx5KCk7CiAgICByZXF1aXJlKHRvdGFsQmFieiAhPSAwKTsKICAgIHVpbnQyNTYgYW1vdW50UG93ID0gX2Ftb3VudEJhYnoubXVsKGF1dGhvcml6ZWRQb3cpLmRpdih0b3RhbEJhYnopOwogICAgLy8gY2hlY2sgcG93IGxpbWl0cwogICAgdWludDI1NiBvdXRzdGFuZGluZ1BvdyA9IG91dHN0YW5kaW5nUG93ZXIoKTsKICAgIHJlcXVpcmUob3V0c3RhbmRpbmdQb3cuYWRkKGFtb3VudFBvdykgPD0gbWF4UG93ZXIpOwoKICAgIGlmIChfc2VuZGVyICE9IF9mcm9tKSB7CiAgICAgIGFsbG93ZWRbX2Zyb21dW19zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bX3NlbmRlcl0uc3ViKF9hbW91bnRCYWJ6KTsKICAgIH0KCiAgICBfc2V0T3V0c3RhbmRpbmdQb3dlcihvdXRzdGFuZGluZ1Bvdy5hZGQoYW1vdW50UG93KSk7CgogICAgdWludDI1NiBwb3dCYWwgPSBwb3dlckJhbGFuY2VPZihfZnJvbSkuYWRkKGFtb3VudFBvdyk7CiAgICByZXF1aXJlKHBvd0JhbCA+PSBhdXRob3JpemVkUG93LmRpdigxMDAwMCkpOyAvLyBtaW5TaGFyZSA9IDEwMDAwCiAgICBfc2V0UG93ZXJCYWxhbmNlT2YoX2Zyb20sIHBvd0JhbCk7CiAgICBfc2V0QWN0aXZlU3VwcGx5KGFjdGl2ZVN1cHBseSgpLnN1YihfYW1vdW50QmFieikpOwogICAgX3NldEJhYnpCYWxhbmNlT2YoX2Zyb20sIGJhYnpCYWxhbmNlT2YoX2Zyb20pLnN1YihfYW1vdW50QmFieikpOwogICAgX3NldFBvd2VyUG9vbChwb3dlclBvb2woKS5hZGQoX2Ftb3VudEJhYnopKTsKICAgIFBvd2VyKHBvd2VyQWRkcikucG93ZXJVcChfZnJvbSwgYW1vdW50UG93KTsKICB9CgogIGZ1bmN0aW9uIHBvd2VyVG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGlzc3VlZFBvd2VyID0gYXV0aG9yaXplZFBvd2VyKCkuZGl2KDIpOwogICAgLy8gcmV0dXJuIG1heCBvZiBtYXhQb3dlciBvciBpc3N1ZWRQb3dlcgogICAgcmV0dXJuIG1heFBvd2VyID49IGlzc3VlZFBvd2VyID8gbWF4UG93ZXIgOiBpc3N1ZWRQb3dlcjsKICB9CgogIGZ1bmN0aW9uIF92ZXN0ZWREb3duKHVpbnQyNTYgX3RvdGFsLCB1aW50MjU2IF9sZWZ0LCB1aW50MjU2IF9zdGFydCwgdWludDI1NiBfbm93KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoX25vdyA8PSBfc3RhcnQpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAvLyBjYWxjdWxhdGUgYW1vdW50VmVzdGVkCiAgICAvLyBhbW91bnRWZXN0ZWQgaXMgYW1vdW50IHRoYXQgY2FuIGJlIHdpdGhkcmF3biBhY2NvcmRpbmcgdG8gdGltZSBwYXNzZWQKICAgIHVpbnQyNTYgdGltZVBhc3NlZCA9IF9ub3cuc3ViKF9zdGFydCk7CiAgICBpZiAodGltZVBhc3NlZCA+IGRvd250aW1lKSB7CiAgICAgdGltZVBhc3NlZCA9IGRvd250aW1lOwogICAgfQogICAgdWludDI1NiBhbW91bnRWZXN0ZWQgPSBfdG90YWwubXVsKHRpbWVQYXNzZWQpLmRpdihkb3dudGltZSk7CiAgICB1aW50MjU2IGFtb3VudEZyb3plbiA9IF90b3RhbC5zdWIoYW1vdW50VmVzdGVkKTsKICAgIGlmIChfbGVmdCA8PSBhbW91bnRGcm96ZW4pIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICByZXR1cm4gX2xlZnQuc3ViKGFtb3VudEZyb3plbik7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVEb3duUmVxdWVzdChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfYW1vdW50UG93ZXIpIHB1YmxpYyBvbmx5UG93ZXIgd2hlbk5vdFBhdXNlZCB7CiAgICAvLyBwcmV2ZW50IHBvd2VyaW5nIGRvd24gdGlueSBhbW91bnRzCiAgICAvLyB3aGVuIHBvd2VyaW5nIGRvd24sIGF0IGxlYXN0IHRvdGFsU3VwcGx5L21pblNoYXJlIFBvd2VyIHNob3VsZCBiZSBjbGFpbWVkCiAgICByZXF1aXJlKF9hbW91bnRQb3dlciA+PSBhdXRob3JpemVkUG93ZXIoKS5kaXYoMTAwMDApKTsgLy8gbWluU2hhcmUgPSAxMDAwMDsKICAgIF9zZXRQb3dlckJhbGFuY2VPZihfb3duZXIsIHBvd2VyQmFsYW5jZU9mKF9vd25lcikuc3ViKF9hbW91bnRQb3dlcikpOwoKICAgIHZhciAoLCBsZWZ0LCApID0gZG93bnMoX293bmVyKTsKICAgIHVpbnQyNTYgdG90YWwgPSBfYW1vdW50UG93ZXIuYWRkKGxlZnQpOwogICAgX3NldERvd25SZXF1ZXN0KF9vd25lciwgdG90YWwsIHRvdGFsLCBub3cpOwogIH0KCiAgLy8gZXhlY3V0ZXMgYSBwb3dlcmRvd24gcmVxdWVzdAogIGZ1bmN0aW9uIGRvd25UaWNrKGFkZHJlc3MgX2hvbGRlciwgdWludDI1NiBfbm93KSBwdWJsaWMgb25seVBvd2VyIHdoZW5Ob3RQYXVzZWQgewogICAgdmFyICh0b3RhbCwgbGVmdCwgc3RhcnQpID0gZG93bnMoX2hvbGRlcik7CiAgICB1aW50MjU2IGFtb3VudFBvdyA9IF92ZXN0ZWREb3duKHRvdGFsLCBsZWZ0LCBzdGFydCwgX25vdyk7CgogICAgLy8gcHJldmVudCBwb3dlciBkb3duIGluIHRpbnkgc3RlcHMKICAgIHVpbnQyNTYgbWluU3RlcCA9IHRvdGFsLmRpdigxMCk7CiAgICByZXF1aXJlKGxlZnQgPD0gbWluU3RlcCB8fCBtaW5TdGVwIDw9IGFtb3VudFBvdyk7CgogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCByZXByZXNlbnRpbmcgc2hhcmUgb2YgcG93ZXIKICAgIHVpbnQyNTYgYW1vdW50QmFieiA9IGFtb3VudFBvdy5tdWwodG90YWxTdXBwbHkoKSkuZGl2KGF1dGhvcml6ZWRQb3dlcigpKTsKCiAgICAvLyB0cmFuc2ZlciBwb3dlciBhbmQgdG9rZW5zCiAgICBfc2V0T3V0c3RhbmRpbmdQb3dlcihvdXRzdGFuZGluZ1Bvd2VyKCkuc3ViKGFtb3VudFBvdykpOwogICAgbGVmdCA9IGxlZnQuc3ViKGFtb3VudFBvdyk7CiAgICBfc2V0UG93ZXJQb29sKHBvd2VyUG9vbCgpLnN1YihhbW91bnRCYWJ6KSk7CiAgICBfc2V0QWN0aXZlU3VwcGx5KGFjdGl2ZVN1cHBseSgpLmFkZChhbW91bnRCYWJ6KSk7CiAgICBfc2V0QmFiekJhbGFuY2VPZihfaG9sZGVyLCBiYWJ6QmFsYW5jZU9mKF9ob2xkZXIpLmFkZChhbW91bnRCYWJ6KSk7CiAgICAvLyBkb3duIHJlcXVlc3QgY29tcGxldGVkCiAgICBpZiAobGVmdCA9PSAwKSB7CiAgICAgIHN0YXJ0ID0gMDsKICAgICAgdG90YWwgPSAwOwogICAgfQogICAgLy8gVE9ETwogICAgX3NldERvd25SZXF1ZXN0KF9ob2xkZXIsIHRvdGFsLCBsZWZ0LCBzdGFydCk7CiAgICBOdXR6KG51dHpBZGRyKS5wb3dlckRvd24ocG93ZXJBZGRyLCBfaG9sZGVyLCBhbW91bnRCYWJ6KTsKICB9Cn0KCgpjb250cmFjdCBDb250cm9sbGVyIGlzIFBvd2VyRW5hYmxlZCB7CgogIGZ1bmN0aW9uIENvbnRyb2xsZXIoYWRkcmVzcyBfcG93ZXJBZGRyLCBhZGRyZXNzIF9wdWxsQWRkciwgYWRkcmVzcyBfbnV0ekFkZHIsIGFkZHJlc3MgX3N0b3JhZ2VBZGRyKSAKICAgIFBvd2VyRW5hYmxlZChfcG93ZXJBZGRyLCBfcHVsbEFkZHIsIF9udXR6QWRkciwgX3N0b3JhZ2VBZGRyKSB7CiAgfQoKICBmdW5jdGlvbiBzZXRDb250cmFjdHMoYWRkcmVzcyBfc3RvcmFnZUFkZHIsIGFkZHJlc3MgX251dHpBZGRyLCBhZGRyZXNzIF9wb3dlckFkZHIsIGFkZHJlc3MgX3B1bGxBZGRyKSBwdWJsaWMgb25seUFkbWlucyB3aGVuUGF1c2VkIHsKICAgIHN0b3JhZ2VBZGRyID0gX3N0b3JhZ2VBZGRyOwogICAgbnV0ekFkZHIgPSBfbnV0ekFkZHI7CiAgICBwb3dlckFkZHIgPSBfcG93ZXJBZGRyOwogICAgcHVsbEFkZHIgPSBfcHVsbEFkZHI7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VEYWlseUxpbWl0KHVpbnQyNTYgX2RhaWx5TGltaXQpIHB1YmxpYyBvbmx5QWRtaW5zIHsKICAgIFB1bGxQYXltZW50KHB1bGxBZGRyKS5jaGFuZ2VEYWlseUxpbWl0KF9kYWlseUxpbWl0KTsKICB9CgogIGZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfbmV3Q29udHJvbGxlcikgcHVibGljIG9ubHlBZG1pbnMgd2hlblBhdXNlZCB7CiAgICBpZiAocG93ZXJBZGRyICE9IGFkZHJlc3MoMCkpIHsgT3duYWJsZShwb3dlckFkZHIpLnRyYW5zZmVyT3duZXJzaGlwKG1zZy5zZW5kZXIpOyB9CiAgICBpZiAocHVsbEFkZHIgIT0gYWRkcmVzcygwKSkgeyBPd25hYmxlKHB1bGxBZGRyKS50cmFuc2Zlck93bmVyc2hpcChtc2cuc2VuZGVyKTsgfQogICAgaWYgKG51dHpBZGRyICE9IGFkZHJlc3MoMCkpIHsgT3duYWJsZShudXR6QWRkcikudHJhbnNmZXJPd25lcnNoaXAobXNnLnNlbmRlcik7IH0KICAgIGlmIChzdG9yYWdlQWRkciAhPSBhZGRyZXNzKDApKSB7IE93bmFibGUoc3RvcmFnZUFkZHIpLnRyYW5zZmVyT3duZXJzaGlwKG1zZy5zZW5kZXIpOyB9CiAgICBzZWxmZGVzdHJ1Y3QoX25ld0NvbnRyb2xsZXIpOwogIH0KCn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsgICAgICAKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQ=='.
	

]
