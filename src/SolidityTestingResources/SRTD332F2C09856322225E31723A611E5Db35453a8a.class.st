Class {
	#name : #SRTD332F2C09856322225E31723A611E5Db35453a8a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTD332F2C09856322225E31723A611E5Db35453a8a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBBZGRyZXNzZXMgewoKICAgIC8vMiUKICAgIGFkZHJlc3MgcHVibGljIGJvdW50eTsKICAgIAogICAgLy81JQogICAgYWRkcmVzcyBwdWJsaWMgc3VjY2Vzc0ZlZTsKCiAgICAvLzkzJQogICAgYWRkcmVzcyBwdWJsaWMgYWRkcjE7CgogICAgLy85MyUKICAgIGFkZHJlc3MgcHVibGljIGFkZHIyOwoKICAgIC8vOTMlCiAgICBhZGRyZXNzIHB1YmxpYyBhZGRyMzsKCiAgICAvLzkzJQogICAgYWRkcmVzcyBwdWJsaWMgYWRkcjQ7CgoKICBmdW5jdGlvbiBBZGRyZXNzZXMoKSB7CgogICAgICAvLzIlICAgICAgIC8vT1JJR0lOQUwKICAgICAgYm91bnR5ID0gMHgwMDY0OTUyNDU3OTA1ZUJGQjljMDI5MjIwMEE3NEIxZDc0MTRGMDgxOwogICAgICAgICAgICAgICAgIC8vVEVTVAogICAvLyAgIGJvdW50eSA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKICAgICAgCiAgICAgIC8vNSUgICAgICAgLy9PUklHSU5BTAogICAgICBzdWNjZXNzRmVlID0gMHhkQTM5ZTBDZTJhZGY5MzEyOUQwNEY1MzE3NmM3QmZhYWFlOEIwNTFhOwogICAgICAgICAgICAgICAgIC8vVEVTVAogICAgLy8gIHN1Y2Nlc3NGZWUgPSAweGYyODBkYWNmNDdmMzNmNDQyY2Y1ZmE5ZDIwYWJhZWY0YjZlOWNhMTI7CgogICAgLy85MyUgICAgICAgLy9PUklHSU5BTAogICAgICBhZGRyMSA9IDB4MzAwYjg0ODU1OERDMDZFMzI2NThmRkI4RDU5Qzg1OUQwODEyQ0E2QzsKCiAgICAgIC8vOTMlICAgICAgIC8vT1JJR0lOQUwKICAgICAgYWRkcjIgPSAweDQzODhBRDE5MmIwRGFhREJCYWE4NkJlMEFFNzQ5OWI4RDQ0QzVmNzU7CgogICAgICAvLzkzJSAgICAgICAvL09SSUdJTkFMCiAgICAgIGFkZHIzID0gMHg0MEM5RTJEMDgwNzI4OWI0YzI0QjBlMmMzNDI3N0JEZDdGYUNmZDg3OwoKICAgICAgLy85MyUgICAgICAgLy9PUklHSU5BTAogICAgICBhZGRyNCA9IDB4NEUzQjIxOTY4NGI5NTcwRDBkODFDYzEzRTVjMGFBY2FmZTIzMjNCMTsKICAgICAgCgogICAgIC8qIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMSA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMiA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyMyA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsKCiAgICAgIC8vOTMlICAgICAgIC8vVEVTVAogICAgICBhZGRyNCA9IDB4MTYyNjA3OTMyODMxMmNkYjFlNzMxYTkzNGE1NDdjNmQ4MWIzZWUyYzsqLwogIH0KCn0KIApjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgT3duYWJsZSB7CiAgICAKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKIAogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOyAgICAgIAogICAgb3duZXIgPSBuZXdPd25lcjsKICB9CiAKfQoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICAKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KIAogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICByZXR1cm4gYzsKICB9CiAKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KIAogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gbW9kKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICUgYjsKICAgIHJldHVybiBjOwogIH0KICAKfQoKY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICAgIAogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvLzE4LjEwLjIwMTcgMjM6NTkgVVRDCiAgdWludDI1NiBpY29fZmluaXNoID0gMTUwODI4NDc0MDsKCiAgbW9kaWZpZXIgaXNGcmVlemUoKSB7CiAgICBpZihub3cgPCBpY29fZmluaXNoKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaXNGcmVlemUgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQogCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KIAp9Cgpjb250cmFjdCBNaWdyYXRpb25zIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICB1aW50IHB1YmxpYyBsYXN0X2NvbXBsZXRlZF9taWdyYXRpb247CgogIG1vZGlmaWVyIHJlc3RyaWN0ZWQoKSB7CiAgICBpZiAobXNnLnNlbmRlciA9PSBvd25lcikgXzsKICB9CgogIGZ1bmN0aW9uIE1pZ3JhdGlvbnMoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBmdW5jdGlvbiBzZXRDb21wbGV0ZWQodWludCBjb21wbGV0ZWQpIHJlc3RyaWN0ZWQgewogICAgbGFzdF9jb21wbGV0ZWRfbWlncmF0aW9uID0gY29tcGxldGVkOwogIH0KCiAgZnVuY3Rpb24gdXBncmFkZShhZGRyZXNzIG5ld19hZGRyZXNzKSByZXN0cmljdGVkIHsKICAgIE1pZ3JhdGlvbnMgdXBncmFkZWQgPSBNaWdyYXRpb25zKG5ld19hZGRyZXNzKTsKICAgIHVwZ3JhZGVkLnNldENvbXBsZXRlZChsYXN0X2NvbXBsZXRlZF9taWdyYXRpb24pOwogIH0KfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CiAKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogIC8vMTQuMTAuMjAxNyAyMzo1OSBVVEMKICB1aW50MjU2IGljb19maW5pc2ggPSAxNTA4MDI1NTQwOwoKICBtb2RpZmllciBpc0ZyZWV6ZSgpIHsKICAgIGlmKG5vdyA8IGljb19maW5pc2gpIHsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgICBfOwogIH0KIAogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGlzRnJlZXplIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CiAKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogCiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKIAogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKIAogICAgYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKF9vd25lciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CiAKfQoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CgogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBldmVudCBTaG93SW5mbyh1aW50MjU2IF9pbmZvLCBzdHJpbmcgX21lc3NhZ2UpOwoKICBmdW5jdGlvbiBzZXRUb3RhbFN1cHBseSh1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyh1aW50MjU2KSB7CiAgICB0b3RhbFN1cHBseSA9IF9hbW91bnQ7CiAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgfQoKICBmdW5jdGlvbiBnZXRUb3RhbFRva2VuQ291bnQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgfQogIAogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfdG9rZW5zKSBwdWJsaWMgewoKICAgIE1pbnQoX2FkZHJlc3MsIF90b2tlbnMpOwoKICAgIGJhbGFuY2VzW19hZGRyZXNzXSA9IGJhbGFuY2VzW19hZGRyZXNzXS5hZGQoX3Rva2Vucyk7CiAgfQoKICBmdW5jdGlvbiBidXJuVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyB7CiAgICBiYWxhbmNlc1tfYWRkcmVzc10gPSAwOwogICAgdG90YWxTdXBwbHkgPSAwOwogIH0KCn0KCmNvbnRyYWN0IFNpbmdsZVRva2VuQ29pbiBpcyBNaW50YWJsZVRva2VuIHsKICAgIAogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlN0YXJ0IG1pbmluZyI7CiAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlNUTSI7CiAgICAKICAgIHVpbnQzMiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAyOwogICAgCn0KCi8vIC0tLS0tLS0tLUFMRVJULS0tLS0tLS0tCi8vIEJlZm9yZSBkZXBsb3kgdG8gTWFpbiBOZXQgdW5jb21tZW50IGFsbCAqQUREUkVTU0VTIEZPUiBQUk9EVUNUSU9OKiBjb21tZW50IAovLyBCZWZvcmUgZGVwbG95IHRvIE1haW4gTmV0IGNoYW5nZSByaW5rZWJ5LmV0aGVyc2Nhbi5pbyB0byBldGhlcnNjYW4uaW8gCi8vIEJlZm9yZSBkZXBsb3kgdG8gTWFpbiBOZXQgY2hlY2sgYWxsIElDTyBkYXRlcyBpbiBhbGwgLnNvbCBmaWxlcwovLyBCZWZvcmUgZGVwbG95IHRvIE1haW4gTmV0IGNoZWNrIGFsbCBDb21tZW50IGluIC5zb2wgYW5kIC5qcyBmaWxlcwovLyBCZWZvcmUgZGVwbG95IHRvIE1haW4gTmV0IGNoZWNrIGFsbCBjb2RlIGFyZWEgd2l0aCAnKiAxMDAnICYgJy8gMTAwJyBmb3IgLmpzIGZpbGVzCgovLy0tLS0tLS0tLS1DSEVDSy0tLS0tLS0tLS0KLy9HZXQgYmFjayB0b2tlbnMKLy9SZXNldHVwIGNvbmRpdGlvbiB3aXRoIG1pbmN1cAovL1Jlc2V0dXAgd2l0aGRyb3cKLy9SZXNldHVwIHNlbmQgRVRIIHRvIGludmVzdG9ycwovL1JlY2FsY3VsYXRlIHJhdGUgd2l0aCBvcmFjbGl6ZQoKY29udHJhY3QgV3JhcHBlck9yYWNsaXplIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZShzdHJpbmcgZGF0YXNvdXJjZSwgc3RyaW5nIGFyZykgcGF5YWJsZTsKICAgIGZ1bmN0aW9uIHVwZGF0ZSh1aW50IHRpbWVzdGFtcCwgc3RyaW5nIGRhdGFzb3VyY2UsIHN0cmluZyBhcmcpIHBheWFibGU7CiAgICBmdW5jdGlvbiBnZXRXcmFwcGVyQmFsYW5jZSgpIGNvbnN0YW50IHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRXcmFwcGVyRGF0YSgpIGNvbnN0YW50IHJldHVybnMoYnl0ZXMzMik7CiAgICBmdW5jdGlvbiBnZXRQcmljZShzdHJpbmcgZGF0YXNvdXJjZSkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZTsKfQoKY29udHJhY3QgQ3Jvd2RzYWxlIGlzIE93bmFibGUgewoKICBzdHJpbmcgcHVibGljIEVUSFVTRDsKCiAgZXZlbnQgU2hvd1ByaWNlKHN0cmluZyBwcmljZSk7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgU2luZ2xlVG9rZW5Db2luIHB1YmxpYyB0b2tlbiA9IG5ldyBTaW5nbGVUb2tlbkNvaW4oKTsKCiAgICBBZGRyZXNzZXMgcHJpdmF0ZSBhZGRyZXNzZXMgPSBuZXcgQWRkcmVzc2VzKCk7CgogICAgV3JhcHBlck9yYWNsaXplIHByaXZhdGUgd3JhcHBlciA9IFdyYXBwZXJPcmFjbGl6ZSgweGZDNDg0YzY2ZGFFNDY0Q0M2MDU1ZDdhNDc4MkVjODc2MWRjOTg0MkYpOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBpY29fc3RhcnQ7CiAgICB1aW50MjU2IHByaXZhdGUgaWNvX2ZpbmlzaDsKCiAgICB1aW50MjU2IHByaXZhdGUgcmF0ZTsKCiAgICB1aW50MjU2IHByaXZhdGUgZGVjaW1hbHM7CgogICAgdWludDI1NiBwcml2YXRlIHRheDsKCiAgICAvL1RpbWUtYmFzZWQgQm9udXMgUHJvZ3JhbQogICAgdWludDI1NiBwcml2YXRlIGZpcnN0Qm9udXNQaGFzZTsKICAgIHVpbnQyNTYgcHJpdmF0ZSBmaXJzdEV4dHJhQm9udXM7CgogICAgdWludDI1NiBwcml2YXRlIHNlY29uZEJvbnVzUGhhc2U7CiAgICB1aW50MjU2IHByaXZhdGUgc2Vjb25kRXh0cmFCb251czsKCiAgICB1aW50MjU2IHByaXZhdGUgdGhpcmRCb251c1BoYXNlOwogICAgdWludDI1NiBwcml2YXRlIHRoaXJkRXh0cmFCb251czsKCiAgICB1aW50MjU2IHByaXZhdGUgZm91ckJvbnVzUGhhc2U7CiAgICB1aW50MjU2IHByaXZhdGUgZm91ckV4dHJhQm9udXM7CgogICAgLy9XaXRoZHJvdyBQaGFzZXMKICAgIGJvb2wgcHJpdmF0ZSBmaXJzdFdpdGhkcm93UGhhc2U7CiAgICBib29sIHByaXZhdGUgc2Vjb25kV2l0aGRyb3dQaGFzZTsKICAgIGJvb2wgcHJpdmF0ZSB0aGlyZFdpdGhkcm93UGhhc2U7CiAgICBib29sIHByaXZhdGUgZm91cldpdGhkcm93UGhhc2U7CgogICAgdWludDI1NiBwcml2YXRlIGZpcnN0V2l0aGRyb3dBbW91bnQ7CiAgICB1aW50MjU2IHByaXZhdGUgc2Vjb25kV2l0aGRyb3dBbW91bnQ7CiAgICB1aW50MjU2IHByaXZhdGUgdGhpcmRXaXRoZHJvd0Ftb3VudDsKICAgIHVpbnQyNTYgcHJpdmF0ZSBmb3VyV2l0aGRyb3dBbW91bnQ7CgogICAgdWludDI1NiBwcml2YXRlIHRvdGFsRVRIOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSB0b3RhbEFtb3VudDsKCiAgICBib29sIHByaXZhdGUgaW5pdGlhbGl6ZSA9IGZhbHNlOwogICAgCiAgICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgICAvL1N0b3JhZ2UgZm9yIElDTyBCdXllcnMgRVRICiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBpY29fYnV5ZXJzX2V0aDsKCiAgICAvL1N0b3JhZ2UgZm9yIElDTyBCdXllcnMgVG9rZW4KICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwcml2YXRlIGljb19idXllcnNfdG9rZW47CgogICAgYWRkcmVzc1tdIHByaXZhdGUgaW52ZXN0b3JzOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBieXRlczMyKSBwcml2YXRlIHByaXZpbGVnZWRXYWxsZXRzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgbWFudWFsQWRkcmVzc2VzOwoKICAgIGFkZHJlc3NbXSBwcml2YXRlIG1hbnVhbEFkZHJlc3Nlc0NvdW50OwoKICAgIGFkZHJlc3NbXSBwcml2YXRlIHByaXZpbGVnZWRXYWxsZXRzQ291bnQ7CgogICAgYnl0ZXMzMiBwcml2YXRlIGcgPSAiZ3JhbnRlZCI7CgogICAgYnl0ZXMzMiBwcml2YXRlIHIgPSAicmV2b3JrZWQiOwoKICAgIHVpbnQyNTYgcHJpdmF0ZSBzb2xkVG9rZW5zOwogICAgdWludDI1NiBwcml2YXRlIG1pbmN1cDsKCiAgICB1aW50MjU2IHByaXZhdGUgbWluUHJpY2U7CgogICAgZXZlbnQgU2hvd0luZm8odWludDI1NiBfaW5mbyk7CiAgICBldmVudCBTaG93SW5mb1N0cihzdHJpbmcgX2luZm8pOwogICAgZXZlbnQgU2hvd0luZm9Cb29sKGJvb2wgX2luZm8pOwoKICAgIGZ1bmN0aW9uIENyb3dkc2FsZSgpIHsKCiAgICAgIC8vc2V0IGNhbGN1bGF0ZSByYXRlIGZyb20gVVNECiAgICAgIHJhdGUgPSAzNTQ2MDk5MjkwNzgwMTQxOyAvLzAuMDAwMyBFVEggLy90ZW1wCgogICAgICBkZWNpbWFscyA9IDM1NDYwOTkyOTA3ODAxOyAvLyAwLjAwMDAwMDMgRVRIIC8vIDIgZGVjaW1hbHMKCiAgICAgIHRheCA9IDM2MDAwMDAwMDAwMDAwMDAwOyAvL3RheCAmJiBtaW5pbXVtIHByaWNlIH4xMCQKCiAgICAgIC8vbWluUHJpY2UgPSBkZWNpbWFscyArIHRheDsgLy8gfjEwJAoKICAgICAgLy8xOC4wOS4yMDE3IDE1OjAwIFVUQyAoMTUwNTc0NjgwMCkKICAgICAgaWNvX3N0YXJ0ID0gMTUwNTc0NjgwMDsKCiAgICAgIC8vMTcuMTAuMjAxNyAyMzo1OSBVVEMgKDE1MDgyODQ3NDApCiAgICAgIGljb19maW5pc2ggPSAxNTA4Mjg0NzQwOwoKICAgICAgdG90YWxBbW91bnQgPSAxMDIwMDAwMDAwOwoKICAgICAgLy8gNTAwIDAwMCBTVE0gd2l0aCAyIGRlY2ltYWxzCiAgICAgIG1pbmN1cCA9IDUwMDAwMDAwOwogICAgICAKICAgICAgbWludGluZ0ZpbmlzaGVkID0gZmFsc2U7CgogICAgICBzZXRUb3RhbFN1cHBseSgpOwoKICAgICAgLy9UaW1lLUJhc2VkIEJvbnVzIFBoYXNlCiAgICAgIGZpcnN0Qm9udXNQaGFzZSA9IGljb19zdGFydC5hZGQoMjQgaG91cnMpOwogICAgICBmaXJzdEV4dHJhQm9udXMgPSAyNTsKCiAgICAgIHNlY29uZEJvbnVzUGhhc2UgPSBpY29fc3RhcnQuYWRkKDE2OCBob3Vycyk7CiAgICAgIHNlY29uZEV4dHJhQm9udXMgPSAxNTsKCiAgICAgIHRoaXJkQm9udXNQaGFzZSA9IGljb19zdGFydC5hZGQoMzM2IGhvdXJzKTsKICAgICAgdGhpcmRFeHRyYUJvbnVzID0gMTA7CgogICAgICBmb3VyQm9udXNQaGFzZSA9IGljb19zdGFydC5hZGQoNDgwIGhvdXJzKTsKICAgICAgZm91ckV4dHJhQm9udXMgPSA1OwoKICAgICAgLy9XaXRoZHJvdyBQaGFzZXMKICAgICAgZmlyc3RXaXRoZHJvd1BoYXNlID0gZmFsc2U7CiAgICAgIHNlY29uZFdpdGhkcm93UGhhc2UgPSBmYWxzZTsKICAgICAgdGhpcmRXaXRoZHJvd1BoYXNlID0gZmFsc2U7CiAgICAgIGZvdXJXaXRoZHJvd1BoYXNlID0gZmFsc2U7CgogICAgICBmaXJzdFdpdGhkcm93QW1vdW50ID0gNTAwMDAwMDA7CiAgICAgIHNlY29uZFdpdGhkcm93QW1vdW50ID0gMjAwMDAwMDAwOwogICAgICB0aGlyZFdpdGhkcm93QW1vdW50ID0gNTAwMDAwMDAwOwogICAgICBmb3VyV2l0aGRyb3dBbW91bnQgPSAxMDIwMDAwMDAwOwoKICAgICAgdG90YWxFVEggPSAwOwoKICAgICAgc29sZFRva2VucyA9IDA7CgogICAgICBwcml2aWxlZ2VkV2FsbGV0c0NvdW50LnB1c2gobXNnLnNlbmRlcik7CiAgICAgIHByaXZpbGVnZWRXYWxsZXRzW21zZy5zZW5kZXJdID0gZzsKCiAgICB9CgogICAgICBtb2RpZmllciBjYW5NaW50KCkgewogICAgICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICAgICAgXzsKICAgICAgfQoKICAgIGZ1bmN0aW9uKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgIG1pbnQoKTsKICAgIH0KCiAgZnVuY3Rpb24gYnl0ZXNUb1VJbnQoYnl0ZXMzMiB2KSBjb25zdGFudCByZXR1cm5zICh1aW50IHJldCkgewogICAgICAgIGlmICh2ID09IDB4MCkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIHVpbnQgZGlnaXQ7CgogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IDMyOyBpKyspIHsKICAgICAgICAgICAgZGlnaXQgPSB1aW50KCh1aW50KHYpIC8gKDIgKiogKDggKiAoMzEgLSBpKSkpKSAmIDB4ZmYpOwogICAgICAgICAgICBpZiAoZGlnaXQgPT0gMCB8fCBkaWdpdCA9PSA0NikgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZGlnaXQgPCA0OCB8fCBkaWdpdCA+IDU3KSB7CiAgICAgICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXQgKj0gMTA7CiAgICAgICAgICAgIHJldCArPSAoZGlnaXQgLSA0OCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogIGZ1bmN0aW9uIGNhbGN1bGF0ZVJhdGUoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zKHVpbnQyNTYpIHsKICAgIGJ5dGVzMzIgcmVzdWx0ID0gZ2V0V3JhcHBlckRhdGEoKTsKICAgIHVpbnQyNTYgdXNkID0gYnl0ZXNUb1VJbnQocmVzdWx0KTsKCiAgICB1aW50MjU2IHByaWNlID0gMSBldGhlciAvIHVzZDsgLy9wcmljZSBmb3IgMSBTVE0KCiAgICByZXR1cm4gcHJpY2U7CiAgfQoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVdpdGhkcm93KCkgcHJpdmF0ZSB7CiAgICAgIGlmICghZmlyc3RXaXRoZHJvd1BoYXNlICYmIHNvbGRUb2tlbnMgPj0gZmlyc3RXaXRoZHJvd0Ftb3VudCAmJiBzb2xkVG9rZW5zIDwgc2Vjb25kV2l0aGRyb3dBbW91bnQpIHsKICAgICAgICBzZW5kVG9Pd25lcnModGhpcy5iYWxhbmNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXNlY29uZFdpdGhkcm93UGhhc2UgJiYgc29sZFRva2VucyA+PSBzZWNvbmRXaXRoZHJvd0Ftb3VudCAmJiBzb2xkVG9rZW5zIDwgdGhpcmRXaXRoZHJvd0Ftb3VudCkgewogICAgICAgICAgc2VuZFRvT3duZXJzKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcmRXaXRoZHJvd1BoYXNlICYmIHNvbGRUb2tlbnMgPj0gdGhpcmRXaXRoZHJvd0Ftb3VudCAmJiBzb2xkVG9rZW5zIDwgZm91cldpdGhkcm93QW1vdW50KSB7CiAgICAgICAgICAgIHNlbmRUb093bmVycyh0aGlzLmJhbGFuY2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCFmb3VyV2l0aGRyb3dQaGFzZSAmJiBzb2xkVG9rZW5zID49IGZvdXJXaXRoZHJvd0Ftb3VudCkgewogICAgICAgICAgICAgIHNlbmRUb093bmVycyh0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbW9kaWZpZXIgaXNJbml0aWFsaXplKCkgewogICAgICByZXF1aXJlKCFpbml0aWFsaXplKTsKICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUb3RhbFN1cHBseSgpIHByaXZhdGUgaXNJbml0aWFsaXplIG9ubHlPd25lciByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgaW5pdGlhbGl6ZSA9IHRydWU7CiAgICAgIHJldHVybiB0b2tlbi5zZXRUb3RhbFN1cHBseSh0b3RhbEFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZFRvQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IF90b2tlbnMpIGNhbk1pbnQgcHVibGljIHsKCiAgICAgIGlmIChncmFudGVkV2FsbGV0cyhtc2cuc2VuZGVyKSA9PSBmYWxzZSkgewogICAgICAgIHJldmVydCgpOyAgICAgIAogICAgICB9CgogICAgICBTaG93SW5mbyhfdG9rZW5zKTsKCiAgICAgIHVpbnQyNTYgY3VycmVudFRva2VucyA9IF90b2tlbnM7CgogICAgICB1aW50MjU2IHRpbWVCb251cyA9IGNhbGN1bGF0ZUJvbnVzRm9ySG91cnMoY3VycmVudFRva2Vucyk7CgogICAgICB1aW50MjU2IGFsbFRva2VucyA9IGN1cnJlbnRUb2tlbnMuYWRkKHRpbWVCb251cyk7ICAgCgogICAgICB0b2tlbi5hcHByb3ZlKF9hZGRyZXNzLCB0aGlzLCBhbGxUb2tlbnMpOyAgICAgIAoKICAgICAgc2F2ZUluZm9BYm91dEludmVzdG9ycyhfYWRkcmVzcywgMCwgYWxsVG9rZW5zLCB0cnVlKTsgICAgICAgICAKCiAgICAgIHRva2VuLm1pbnQoX2FkZHJlc3MsIGFsbFRva2Vucyk7CgogICAgICBzb2xkVG9rZW5zID0gc29sZFRva2VucyArIGFsbFRva2VuczsKICAgICAgY2FsY3VsYXRlV2l0aGRyb3coKTsKICAgIH0KCiAgICBtb2RpZmllciBpc1JlZnVuZCgpIHsKICAgICAgaWYgKG1zZy52YWx1ZSA8IHRheCkgewogICAgICAgIHJlZnVuZChtc2cudmFsdWUpOwogICAgICAgIHJldmVydCgpOwogICAgICB9CiAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gZ3JhbnRlZFdhbGxldHMoYWRkcmVzcyBfYWRkcmVzcykgcHJpdmF0ZSByZXR1cm5zKGJvb2wpIHsKICAgICAgaWYgKHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSA9PSBnKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIG1vZGlmaWVyIGlzSUNPRmluaXNoZWQoKSB7CiAgICAgIGlmIChub3cgPiBpY29fZmluaXNoKSB7CiAgICAgICAgZmluaXNoTWludGluZygpOwogICAgICAgIHJlZnVuZChtc2cudmFsdWUpOwogICAgICAgIHJldmVydCgpOwogICAgICB9CiAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5zKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICB0b2tlbi5nZXRUb3RhbFRva2VuQ291bnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRQcml2ZWxlZ2VkV2FsbGV0KGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgIGlmIChwcml2aWxlZ2VkV2FsbGV0c0NvdW50Lmxlbmd0aCA9PSAyKSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KCiAgICAgIGlmIChwcml2aWxlZ2VkV2FsbGV0c1tfYWRkcmVzc10gIT0gZyAmJiBwcml2aWxlZ2VkV2FsbGV0c1tfYWRkcmVzc10gIT0gcikgewogICAgICAgIHByaXZpbGVnZWRXYWxsZXRzQ291bnQucHVzaChfYWRkcmVzcyk7CiAgICAgIH0KCiAgICAgIHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSA9IGc7CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUcmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKCiAgICAgIHJlbW92ZVByaXZlbGVnZWRXYWxsZXQobXNnLnNlbmRlcik7CiAgICAgIHNldFByaXZlbGVnZWRXYWxsZXQoX2FkZHJlc3MpOwoKICAgICAgdHJhbnNmZXJPd25lcnNoaXAoX2FkZHJlc3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZVByaXZlbGVnZWRXYWxsZXQoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIG9ubHlPd25lciB7CiAgICAgIGlmIChwcml2aWxlZ2VkV2FsbGV0c1tfYWRkcmVzc10gPT0gZykgewogICAgICAgIHByaXZpbGVnZWRXYWxsZXRzW19hZGRyZXNzXSA9IHI7CiAgICAgICAgZGVsZXRlIHByaXZpbGVnZWRXYWxsZXRzQ291bnRbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgIH0KCiAgICAvL29ubHkgZm9yIGRlbW9uc3RyYXRlIFRlc3QgVmVyc2lvbgogICAgZnVuY3Rpb24gc2V0SUNPRGF0ZSh1aW50MjU2IF90aW1lKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgaWNvX3N0YXJ0ID0gX3RpbWU7CiAgICAgIFNob3dJbmZvKF90aW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJQ09EYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gaWNvX3N0YXJ0OwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbnQoKSBwdWJsaWMgaXNSZWZ1bmQgY2FuTWludCBpc0lDT0ZpbmlzaGVkIHBheWFibGUgewoKICAgICAgcmF0ZSA9IGNhbGN1bGF0ZVJhdGUoKTsKCiAgICAgIGRlY2ltYWxzID0gcmF0ZSAvIDEwMDsgLy9wcmljZSBmb3IgMC4wMSBTVE0KCiAgICAgIHVpbnQyNTYgcmVtYWluZGVyID0gbXNnLnZhbHVlLm1vZChkZWNpbWFscyk7CgogICAgICB1aW50MjU2IGV0aCA9IG1zZy52YWx1ZS5zdWIocmVtYWluZGVyKTsKCiAgICAgIGlmIChyZW1haW5kZXIgIT0gMCkgewogICAgICAgIHJlZnVuZChyZW1haW5kZXIpOwogICAgICB9CgogICAgICB0b3RhbEVUSCA9IHRvdGFsRVRIICsgZXRoOwoKICAgICAgdWludCBjdXJyZW50UmF0ZSA9IHJhdGUgLyAxMDA7IC8vMiBkZWNpbWFscwoKICAgICAgdWludDI1NiB0b2tlbnMgPSBldGguZGl2KGN1cnJlbnRSYXRlKTsKICAgICAgdWludDI1NiB0aW1lQm9udXMgPSBjYWxjdWxhdGVCb251c0ZvckhvdXJzKHRva2Vucyk7CgogICAgICB1aW50MjU2IGFsbFRva2VucyA9IHRva2Vucy5hZGQodGltZUJvbnVzKSArIDEwMDsgLy8gKzEwMCAtIG9yYWNsaXplIFRheAoKICAgICAgc2F2ZUluZm9BYm91dEludmVzdG9ycyhtc2cuc2VuZGVyLCBldGgsIGFsbFRva2VucywgZmFsc2UpOwoKICAgICAgdG9rZW4ubWludChtc2cuc2VuZGVyLCBhbGxUb2tlbnMpOwoKICAgICAgc29sZFRva2VucyA9IHNvbGRUb2tlbnMgKyBhbGxUb2tlbnM7CiAgICAgIGNhbGN1bGF0ZVdpdGhkcm93KCk7CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZUluZm9BYm91dEludmVzdG9ycyhhZGRyZXNzIF9hZGRyZXNzLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3Rva2VucywgYm9vbCBfaXNNYW51YWwpIHByaXZhdGUgewoKICAgICAgaWYgKCFfaXNNYW51YWwpIHsKICAgICAgICBpZiAoaWNvX2J1eWVyc190b2tlbltfYWRkcmVzc10gPT0gMCkgewogICAgICAgICAgaW52ZXN0b3JzLnB1c2goX2FkZHJlc3MpOwogICAgICAgIH0KCiAgICAgICAgLy8gU3RvcmUgRVRIIG9mIEludmVzdG9yCiAgICAgICAgaWNvX2J1eWVyc19ldGhbX2FkZHJlc3NdID0gaWNvX2J1eWVyc19ldGhbX2FkZHJlc3NdLmFkZChfYW1vdW50KTsKCiAgICAgICAgLy8gU3RvcmUgVG9rZW4gb2YgSW52ZXN0b3IKICAgICAgICBpY29fYnV5ZXJzX3Rva2VuW19hZGRyZXNzXSA9IGljb19idXllcnNfdG9rZW5bX2FkZHJlc3NdLmFkZChfdG9rZW5zKTsKICAgICAgCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYobWFudWFsQWRkcmVzc2VzW19hZGRyZXNzXSA9PSAwKSB7CiAgICAgICAgICBtYW51YWxBZGRyZXNzZXNDb3VudC5wdXNoKF9hZGRyZXNzKTsKICAgICAgICB9CgogICAgICAgIG1hbnVhbEFkZHJlc3Nlc1tfYWRkcmVzc10gPSBtYW51YWxBZGRyZXNzZXNbX2FkZHJlc3NdLmFkZChfdG9rZW5zKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hbnVhbEJ5QWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBtYW51YWxBZGRyZXNzZXNbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hbnVhbEludmVzdG9yc0NvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gbWFudWFsQWRkcmVzc2VzQ291bnQubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hbnVhbEFkZHJlc3ModWludCBfaW5kZXgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgcmV0dXJuIG1hbnVhbEFkZHJlc3Nlc0NvdW50W19pbmRleF07CiAgICB9CgogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICBpZihtaW50aW5nRmluaXNoZWQpIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQoKICAgICAgU2hvd0luZm9Cb29sKG1pbnRpbmdGaW5pc2hlZCk7CiAgICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICAgIFNob3dJbmZvQm9vbChtaW50aW5nRmluaXNoZWQpOwogICAgICAKICAgICAgaWYgKHNvbGRUb2tlbnMgPCBtaW5jdXApIHsKICAgICAgICBpZihpbnZlc3RvcnMubGVuZ3RoICE9IDApIHsKICAgICAgICAgIGZvciAodWludDI1NiBpPTA7IGkgPCBpbnZlc3RvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYWRkcmVzcyBhZGRyID0gaW52ZXN0b3JzW2ldOyAgICAgICAgICAKICAgICAgICAgICAgdG9rZW4uYnVyblRva2VucyhhZGRyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYobWFudWFsQWRkcmVzc2VzQ291bnQubGVuZ3RoICE9IDApIHsKICAgICAgICAgIGZvciAodWludDI1NiBqPTA7IGogPCBtYW51YWxBZGRyZXNzZXNDb3VudC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBhZGRyZXNzIG1hbnVhbEFkZHIgPSBtYW51YWxBZGRyZXNzZXNDb3VudFtqXTsKICAgICAgICAgICAgdG9rZW4uYnVyblRva2VucyhtYW51YWxBZGRyKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRGaW5pc2hTdGF0dXMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgIHJldHVybiBtaW50aW5nRmluaXNoZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gbWFudWFsUmVmdW5kKCkgcHVibGljIHsKICAgICAgaWYgKG1pbnRpbmdGaW5pc2hlZCkgewogICAgICAgIGlmKGljb19idXllcnNfZXRoW21zZy5zZW5kZXJdICE9IDApIHsKICAgICAgICAgIHVpbnQyNTYgYW1vdW50ID0gaWNvX2J1eWVyc19ldGhbbXNnLnNlbmRlcl07CiAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgICBpY29fYnV5ZXJzX2V0aFttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXZlcnQoKTsKICAgICAgfQogICAgICAKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmQodWludDI1NiBfYW1vdW50KSBwcml2YXRlIHsKICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihfYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50KSBwcml2YXRlIHsKICAgICAgX2FkZHJlc3MudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VG9rZW5zTWFudWFsKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIG1hbnVhbEFkZHJlc3Nlc1tfYWRkcmVzc107CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlQm9udXNGb3JIb3Vycyh1aW50MjU2IF90b2tlbnMpIHByaXZhdGUgcmV0dXJucyh1aW50MjU2KSB7CgogICAgICAvL0NhbGN1bGF0ZSBmb3IgZmlyc3QgYm9udXMgcHJvZ3JhbQogICAgICBpZiAobm93ID49IGljb19zdGFydCAmJiBub3cgPD0gZmlyc3RCb251c1BoYXNlICkgewogICAgICAgIHJldHVybiBfdG9rZW5zLm11bChmaXJzdEV4dHJhQm9udXMpLmRpdigxMDApOwogICAgICB9CgogICAgICAvL0NhbGN1bGF0ZSBmb3Igc2Vjb25kIGJvbnVzIHByb2dyYW0KICAgICAgaWYgKG5vdyA+IGZpcnN0Qm9udXNQaGFzZSAmJiBub3cgPD0gc2Vjb25kQm9udXNQaGFzZSApIHsKICAgICAgICByZXR1cm4gX3Rva2Vucy5tdWwoc2Vjb25kRXh0cmFCb251cykuZGl2KDEwMCk7CiAgICAgIH0KCiAgICAgIC8vQ2FsY3VsYXRlIGZvciB0aGlyZCBib251cyBwcm9ncmFtCiAgICAgIGlmIChub3cgPiBzZWNvbmRCb251c1BoYXNlICYmIG5vdyA8PSB0aGlyZEJvbnVzUGhhc2UgKSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnMubXVsKHRoaXJkRXh0cmFCb251cykuZGl2KDEwMCk7CiAgICAgIH0KCiAgICAgIC8vQ2FsY3VsYXRlIGZvciBmb3VyIGJvbnVzIHByb2dyYW0KICAgICAgaWYgKG5vdyA+IHRoaXJkQm9udXNQaGFzZSAmJiBub3cgPD0gZm91ckJvbnVzUGhhc2UgKSB7CiAgICAgICAgcmV0dXJuIF90b2tlbnMubXVsKGZvdXJFeHRyYUJvbnVzKS5kaXYoMTAwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZFRvT3duZXJzKHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSB7CiAgICAgIHVpbnQyNTYgdHdvUGVyY2VudCA9IF9hbW91bnQubXVsKDIpLmRpdigxMDApOwogICAgICB1aW50MjU2IGZpdmVQZXJjZW50ID0gX2Ftb3VudC5tdWwoNSkuZGl2KDEwMCk7CiAgICAgIHVpbnQyNTYgbmluZVRocmVlUGVyY2VudCA9IF9hbW91bnQubXVsKDkzKS5kaXYoMTAwKTsKCi8vIC0tLS0tLS0tLS1BRERSRVNTRVMgRk9SIFBST0RVQ1RJT04tLS0tLS0tLS0tLS0tCgogICAgICAvL05pbmVUaHJlZSBQZXJjZW50CiAgICAgIGFkZHJlc3Nlcy5hZGRyMSgpLnRyYW5zZmVyKG5pbmVUaHJlZVBlcmNlbnQpOwogICAgICBhZGRyZXNzZXMuYWRkcjIoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKICAgICAgYWRkcmVzc2VzLmFkZHIzKCkudHJhbnNmZXIobmluZVRocmVlUGVyY2VudCk7CiAgICAgIGFkZHJlc3Nlcy5hZGRyNCgpLnRyYW5zZmVyKG5pbmVUaHJlZVBlcmNlbnQpOwoKICAgICAgaWYgKCFmaXJzdFdpdGhkcm93UGhhc2UpIHsKICAgICAgICBhZGRyZXNzZXMuYWRkcjEoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKICAgICAgICBmaXJzdFdpdGhkcm93UGhhc2UgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghc2Vjb25kV2l0aGRyb3dQaGFzZSkgewogICAgICAgICAgYWRkcmVzc2VzLmFkZHIyKCkudHJhbnNmZXIobmluZVRocmVlUGVyY2VudCk7ICAgCiAgICAgICAgICBzZWNvbmRXaXRoZHJvd1BoYXNlID0gdHJ1ZTsgICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcmRXaXRoZHJvd1BoYXNlKSB7CiAgICAgICAgICAgIGFkZHJlc3Nlcy5hZGRyMygpLnRyYW5zZmVyKG5pbmVUaHJlZVBlcmNlbnQpOwogICAgICAgICAgICB0aGlyZFdpdGhkcm93UGhhc2UgPSB0cnVlOyAgICAgICAgICAgICAgICAKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghZm91cldpdGhkcm93UGhhc2UpIHsKICAgICAgICAgICAgICBhZGRyZXNzZXMuYWRkcjQoKS50cmFuc2ZlcihuaW5lVGhyZWVQZXJjZW50KTsKICAgICAgICAgICAgICBmb3VyV2l0aGRyb3dQaGFzZSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgoKICAgICAgLy9GaXZlIFBlcmNlbnQKICAgICAgYWRkcmVzc2VzLnN1Y2Nlc3NGZWUoKS50cmFuc2ZlcihmaXZlUGVyY2VudCk7CiAgICAgIAogICAgICAvL1R3byBQZXJjZW50CiAgICAgIGFkZHJlc3Nlcy5ib3VudHkoKS50cmFuc2Zlcih0d29QZXJjZW50KTsKICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZUNvbnRyYWN0KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFNvbGRUb2tlbigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIHNvbGRUb2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JzVG9rZW5zKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmV0dXJuIGljb19idXllcnNfdG9rZW5bX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEludmVzdG9yc0VUSChhZGRyZXNzIF9hZGRyZXNzKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBpY29fYnV5ZXJzX2V0aFtfYWRkcmVzc107CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gaW52ZXN0b3JzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJbnZlc3RvckJ5VmFsdWUoYWRkcmVzcyBfYWRkcmVzcykgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gaWNvX2J1eWVyc19ldGhbX2FkZHJlc3NdOwogICAgfQoKICAgIC8vb25seSBmb3IgdGVzdCB2ZXJzaW9uCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sKSB7CiAgICAgIHJldHVybiB0b2tlbi50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SW52ZXN0b3JCeUluZGV4KHVpbnQyNTYgX2luZGV4KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKSB7CiAgICAgIHJldHVybiBpbnZlc3RvcnNbX2luZGV4XTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMZWZ0VG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIGlmKHRva2VuLnRvdGFsU3VwcGx5KCkgIT0gMCkgewogICAgICAgIHJldHVybiB0b2tlbi50b3RhbFN1cHBseSgpIC0gc29sZFRva2VuczsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc29sZFRva2VuczsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsVG9rZW4oKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiB0b2tlbi50b3RhbFN1cHBseSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsRVRIKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gdG90YWxFVEg7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICAKICAgICAgdWludDI1NiBzZWNvbmREaXNjb3VudCA9IGNhbGN1bGF0ZUJvbnVzRm9ySG91cnMocmF0ZSk7CgogICAgICB1aW50MjU2IGludmVzdG9yRGlzY291bnQgPSByYXRlLnN1YihzZWNvbmREaXNjb3VudCk7CgogICAgICByZXR1cm4gaW52ZXN0b3JEaXNjb3VudCAqIDEwOyAvL21pbmltdW0gMTAkIC8vfjEwU1RNCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q29udHJhY3RBZGRyZXNzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMoYWRkcmVzcykgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgcmV0dXJuIG93bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmRPcmFjbGVEYXRhKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGlmIChtc2cudmFsdWUgIT0gMCkgewogICAgICAgICAgICB3cmFwcGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgICAgfQogICAgICAKICAgICAgd3JhcHBlci51cGRhdGUoIlVSTCIsICJqc29uKGh0dHBzOi8vYXBpLmtyYWtlbi5jb20vMC9wdWJsaWMvVGlja2VyP3BhaXI9RVRIVVNEKS5yZXN1bHQuWEVUSFpVU0QuYy4wIik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UXVlcnlQcmljZShzdHJpbmcgZGF0YXNvdXJjZSkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiB3cmFwcGVyLmdldFByaWNlKGRhdGFzb3VyY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrV3JhcHBlckJhbGFuY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiB3cmFwcGVyLmdldFdyYXBwZXJCYWxhbmNlKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0V3JhcHBlckRhdGEoKSBjb25zdGFudCByZXR1cm5zKGJ5dGVzMzIpIHsKICAgICAgcmV0dXJuIHdyYXBwZXIuZ2V0V3JhcHBlckRhdGEoKTsKICAgIH0KfQ=='.
	

]
