Class {
	#name : #SRT466c44812835f57b736ef9f63582b8a6693a14d0,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT466c44812835f57b736ef9f63582b8a6693a14d0 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgoKCgogIAoKICAgCgkKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKyB5OwogICAgICBhc3NlcnQoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU3VidHJhY3QodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICB1aW50IHogPSB4IC0geTsKICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bHQodWludCB4LCB1aW50IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyh1aW50KSB7CiAgICAgIHVpbnQgeiA9IHggKiB5OwogICAgICBhc3NlcnQoKHggPT0gMCl8fCh6L3ggPT0geSkpOwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIodWludDE2IG1heFJhbmRvbSwgdWludDggbWluLCBhZGRyZXNzIHByaXZhdGVBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCkgewogICAgICAgIHVpbnQyNTYgZ2VuTnVtID0gdWludDI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSArIHVpbnQyNTYocHJpdmF0ZUFkZHJlc3MpOwogICAgICAgIHJldHVybiB1aW50OChnZW5OdW0gJSAobWF4UmFuZG9tIC0gbWluICsgMSkrbWluKTsKICAgIH0KfQoKY29udHJhY3QgRW51bXMgewogICAgZW51bSBSZXN1bHRDb2RlIHsKICAgICAgICBTVUNDRVNTLAogICAgICAgIEVSUk9SX0NMQVNTX05PVF9GT1VORCwKICAgICAgICBFUlJPUl9MT1dfQkFMQU5DRSwKICAgICAgICBFUlJPUl9TRU5EX0ZBSUwsCiAgICAgICAgRVJST1JfTk9UX09XTkVSLAogICAgICAgIEVSUk9SX05PVF9FTk9VR0hfTU9ORVksCiAgICAgICAgRVJST1JfSU5WQUxJRF9BTU9VTlQKICAgIH0KCiAgICBlbnVtIEFuZ2VsQXVyYSB7IAogICAgICAgIEJsdWUsIAogICAgICAgIFllbGxvdywgCiAgICAgICAgUHVycGxlLCAKICAgICAgICBPcmFuZ2UsIAogICAgICAgIFJlZCwgCiAgICAgICAgR3JlZW4gCiAgICB9Cn0KCgoKY29udHJhY3QgQWNjZXNzQ29udHJvbCB7CiAgICBhZGRyZXNzIHB1YmxpYyBjcmVhdG9yQWRkcmVzczsKICAgIHVpbnQxNiBwdWJsaWMgdG90YWxTZXJhcGhpbXMgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgc2VyYXBoaW1zOwoKICAgIGJvb2wgcHVibGljIGlzTWFpbnRlbmFuY2VNb2RlID0gdHJ1ZTsKIAogICAgbW9kaWZpZXIgb25seUNSRUFUT1IoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNyZWF0b3JBZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlTRVJBUEhJTSgpIHsKICAgICAgICByZXF1aXJlKHNlcmFwaGltc1ttc2cuc2VuZGVyXSA9PSB0cnVlKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBpc0NvbnRyYWN0QWN0aXZlIHsKICAgICAgICByZXF1aXJlKCFpc01haW50ZW5hbmNlTW9kZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEFjY2Vzc0NvbnRyb2woKSBwdWJsaWMgewogICAgICAgIGNyZWF0b3JBZGRyZXNzID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIAoKICAgIGZ1bmN0aW9uIGFkZFNFUkFQSElNKGFkZHJlc3MgX25ld1NlcmFwaGltKSBvbmx5Q1JFQVRPUiBwdWJsaWMgewogICAgICAgIGlmIChzZXJhcGhpbXNbX25ld1NlcmFwaGltXSA9PSBmYWxzZSkgewogICAgICAgICAgICBzZXJhcGhpbXNbX25ld1NlcmFwaGltXSA9IHRydWU7CiAgICAgICAgICAgIHRvdGFsU2VyYXBoaW1zICs9IDE7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVTRVJBUEhJTShhZGRyZXNzIF9vbGRTZXJhcGhpbSkgb25seUNSRUFUT1IgcHVibGljIHsKICAgICAgICBpZiAoc2VyYXBoaW1zW19vbGRTZXJhcGhpbV0gPT0gdHJ1ZSkgewogICAgICAgICAgICBzZXJhcGhpbXNbX29sZFNlcmFwaGltXSA9IGZhbHNlOwogICAgICAgICAgICB0b3RhbFNlcmFwaGltcyAtPSAxOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVNYWludGVuYW5jZU1vZGUoYm9vbCBfaXNNYWludGFpbmluZykgb25seUNSRUFUT1IgcHVibGljIHsKICAgICAgICBpc01haW50ZW5hbmNlTW9kZSA9IF9pc01haW50YWluaW5nOwogICAgfQoKICAKfSAKY29udHJhY3QgSUFjY2Vzc29yeURhdGEgaXMgQWNjZXNzQ29udHJvbCwgRW51bXMgewogICAgdWludDggcHVibGljIHRvdGFsQWNjZXNzb3J5U2VyaWVzOyAgICAKICAgIHVpbnQzMiBwdWJsaWMgdG90YWxBY2Nlc3NvcmllczsKICAgIAogCiAgICAvKioqIEZVTkNUSU9OUyAqKiovCiAgICAvLyoqKiBXcml0ZSBBY2Nlc3MgKioqLy8KICAgIGZ1bmN0aW9uIGNyZWF0ZUFjY2Vzc29yeVNlcmllcyh1aW50OCBfQWNjZXNzb3J5U2VyaWVzSWQsIHVpbnQzMiBfbWF4VG90YWwsIHVpbnQgX3ByaWNlKSBvbmx5Q1JFQVRPUiBwdWJsaWMgcmV0dXJucyh1aW50OCkgOwoJZnVuY3Rpb24gc2V0QWNjZXNzb3J5KHVpbnQ4IF9BY2Nlc3NvcnlTZXJpZXNJZCwgYWRkcmVzcyBfb3duZXIpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCByZXR1cm5zKHVpbnQ2NCk7CiAgIGZ1bmN0aW9uIGFkZEFjY2Vzc29yeUlkTWFwcGluZyhhZGRyZXNzIF9vd25lciwgdWludDY0IF9hY2Nlc3NvcnlJZCkgcHJpdmF0ZTsKCWZ1bmN0aW9uIHRyYW5zZmVyQWNjZXNzb3J5KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50NjQgX19hY2Nlc3NvcnlJZCkgb25seVNFUkFQSElNIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpOwogICAgZnVuY3Rpb24gb3duZXJBY2Nlc3NvcnlUcmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQ2NCBfX2FjY2Vzc29yeUlkKSAgcHVibGljOwogICAgZnVuY3Rpb24gdXBkYXRlQWNjZXNzb3J5TG9jayAodWludDY0IF9hY2Nlc3NvcnlJZCwgYm9vbCBuZXdWYWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gcmVtb3ZlQ3JlYXRvcigpIG9ubHlDUkVBVE9SIGV4dGVybmFsOwogICAgCiAgICAvLyoqKiBSZWFkIEFjY2VzcyAqKiovLwogICAgZnVuY3Rpb24gZ2V0QWNjZXNzb3J5U2VyaWVzKHVpbnQ4IF9hY2Nlc3NvcnlTZXJpZXNJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDggYWNjZXNzb3J5U2VyaWVzSWQsIHVpbnQzMiBjdXJyZW50VG90YWwsIHVpbnQzMiBtYXhUb3RhbCwgdWludCBwcmljZSkgOwoJZnVuY3Rpb24gZ2V0QWNjZXNzb3J5KHVpbnQgX2FjY2Vzc29yeUlkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50IGFjY2Vzc29yeUlELCB1aW50OCBBY2Nlc3NvcnlTZXJpZXNJRCwgYWRkcmVzcyBvd25lcik7CglmdW5jdGlvbiBnZXRPd25lckFjY2Vzc29yeUNvdW50KGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKCWZ1bmN0aW9uIGdldEFjY2Vzc29yeUJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KSA7CiAgICBmdW5jdGlvbiBnZXRUb3RhbEFjY2Vzc29yeVNlcmllcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCkgOwogICAgZnVuY3Rpb24gZ2V0VG90YWxBY2Nlc3NvcmllcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGdldEFjY2Vzc29yeUxvY2tTdGF0dXModWludDY0IF9hY2Vzc29yeUlkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IEFjY2Vzc29yeURhdGEgaXMgSUFjY2Vzc29yeURhdGEsIFNhZmVNYXRoIHsKICAgIC8qKiogRVZFTlRTICoqKi8KICAgIGV2ZW50IENyZWF0ZWRBY2Nlc3NvcnkgKHVpbnQ2NCBhY2Nlc3NvcnlJZCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgdG9rZW5JZCk7CgogICAgLyoqKiBEQVRBIFRZUEVTICoqKi8KICAgIHN0cnVjdCBBY2Nlc3NvcnlTZXJpZXMgewogICAgICAgIHVpbnQ4IEFjY2Vzc29yeVNlcmllc0lkOwogICAgICAgIHVpbnQzMiBjdXJyZW50VG90YWw7CiAgICAgICAgdWludDMyIG1heFRvdGFsOwogICAgICAgIHVpbnQgcHJpY2U7CiAgICB9CgogICAgc3RydWN0IEFjY2Vzc29yeSB7CiAgICAgICAgdWludDMyIGFjY2Vzc29yeUlkOwogICAgICAgIHVpbnQ4IGFjY2Vzc29yeVNlcmllc0lkOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgYm9vbCBvd25lckxvY2s7CiAgICB9CgoKICAgIC8qKiogU1RPUkFHRSAqKiovCiAgICBtYXBwaW5nKHVpbnQ4ID0+IEFjY2Vzc29yeVNlcmllcykgcHVibGljIEFjY2Vzc29yeVNlcmllc0NvbGxlY3Rpb247CiAgICBtYXBwaW5nKHVpbnQgPT4gQWNjZXNzb3J5KSBwdWJsaWMgQWNjZXNzb3J5Q29sbGVjdGlvbjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50NjRbXSkgcHVibGljIG93bmVyQWNjZXNzb3J5Q29sbGVjdGlvbjsKICAgIAogICAgLyoqKiBGVU5DVElPTlMgKioqLwogICAgLy8qKiogV3JpdGUgQWNjZXNzICoqKi8vCiAgICBmdW5jdGlvbiBBY2Nlc3NvcnlEYXRhKCkgcHVibGljIHsKICAgICAgCiAgICB9CgogICAgLy8qKiogQWNjZXNzb3JpZXMqKiovCiAgICBmdW5jdGlvbiBjcmVhdGVBY2Nlc3NvcnlTZXJpZXModWludDggX0FjY2Vzc29yeVNlcmllc0lkLCB1aW50MzIgX21heFRvdGFsLCB1aW50IF9wcmljZSkgb25seUNSRUFUT1IgcHVibGljIHJldHVybnModWludDgpIHsKICAgICAgICAKICAgICAgICBpZiAoKG5vdyA+IDE1MTcxODkyMDEpIHx8ICh0b3RhbEFjY2Vzc29yeVNlcmllcyA+PSAxOCkpIHtyZXZlcnQoKTt9CiAgICAgICAgLy9UaGlzIGNvbmZpcm1zIHRoYXQgbm8gb25lLCBldmVuIHRoZSBkZXZlbG9vcGVycywgY2FuIGNyZWF0ZSBhbnkgYWNjZXNzb3J5U2VyaWVzIGFmdGVyIEpBTi8yOS8yMDE4IEAgMToyNiBhbSAoVVRDKSBvciBtb3JlIHRoYW4gdGhlIG9yaWdpbmFsIDE4IHNlcmllcy4gCiAgICAgICAgQWNjZXNzb3J5U2VyaWVzIHN0b3JhZ2UgYWNjZXNzb3J5U2VyaWVzID0gQWNjZXNzb3J5U2VyaWVzQ29sbGVjdGlvbltfQWNjZXNzb3J5U2VyaWVzSWRdOwogICAgICAgIGFjY2Vzc29yeVNlcmllcy5BY2Nlc3NvcnlTZXJpZXNJZCA9IF9BY2Nlc3NvcnlTZXJpZXNJZDsKICAgICAgICBhY2Nlc3NvcnlTZXJpZXMubWF4VG90YWwgPSBfbWF4VG90YWw7CiAgICAgICAgYWNjZXNzb3J5U2VyaWVzLnByaWNlID0gX3ByaWNlOwoKICAgICAgICB0b3RhbEFjY2Vzc29yeVNlcmllcyArPSAxOwogICAgICAgIHJldHVybiB0b3RhbEFjY2Vzc29yeVNlcmllczsKICAgIH0KCQoJZnVuY3Rpb24gc2V0QWNjZXNzb3J5KHVpbnQ4IF9zZXJpZXNJRHRvQ3JlYXRlLCBhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWwgb25seVNFUkFQSElNIHJldHVybnModWludDY0KSB7IAogICAgICAgIEFjY2Vzc29yeVNlcmllcyBzdG9yYWdlIHNlcmllcyA9IEFjY2Vzc29yeVNlcmllc0NvbGxlY3Rpb25bX3Nlcmllc0lEdG9DcmVhdGVdOwogICAgICAgIGlmIChzZXJpZXMubWF4VG90YWwgPD0gc2VyaWVzLmN1cnJlbnRUb3RhbCkge3JldmVydCgpO30KICAgICAgICBlbHNlIHsKICAgICAgICB0b3RhbEFjY2Vzc29yaWVzICs9IDE7CiAgICAgICAgc2VyaWVzLmN1cnJlbnRUb3RhbCArPTE7CiAgICAgICBBY2Nlc3Nvcnkgc3RvcmFnZSBhY2Nlc3NvcnkgPSBBY2Nlc3NvcnlDb2xsZWN0aW9uW3RvdGFsQWNjZXNzb3JpZXNdOwogICAgICAgIGFjY2Vzc29yeS5hY2Nlc3NvcnlJZCA9IHRvdGFsQWNjZXNzb3JpZXM7CiAgICAgICBhY2Nlc3NvcnkuYWNjZXNzb3J5U2VyaWVzSWQgPSBfc2VyaWVzSUR0b0NyZWF0ZTsKICAgICAgICBhY2Nlc3Nvcnkub3duZXIgPSBfb3duZXI7CiAgICAgICAgYWNjZXNzb3J5Lm93bmVyTG9jayA9IHRydWU7CiAgICAgICAgdWludDY0W10gc3RvcmFnZSBvd25lcnMgPSBvd25lckFjY2Vzc29yeUNvbGxlY3Rpb25bX293bmVyXTsKICAgICAgICBvd25lcnMucHVzaChhY2Nlc3NvcnkuYWNjZXNzb3J5SWQpOwogICAgICAgfQogICAgICAgIAogICAgfQoKICAgIAogICBmdW5jdGlvbiBhZGRBY2Nlc3NvcnlJZE1hcHBpbmcoYWRkcmVzcyBfb3duZXIsIHVpbnQ2NCBfYWNjZXNzb3J5SWQpIHByaXZhdGUgIHsKICAgICAgICAgICAgdWludDY0W10gc3RvcmFnZSBvd25lcnMgPSBvd25lckFjY2Vzc29yeUNvbGxlY3Rpb25bX293bmVyXTsKICAgICAgICAgIG93bmVycy5wdXNoKF9hY2Nlc3NvcnlJZCk7CiAgICAgICAgICBBY2Nlc3Nvcnkgc3RvcmFnZSBhY2Nlc3NvcnkgPSBBY2Nlc3NvcnlDb2xsZWN0aW9uW19hY2Nlc3NvcnlJZF07CiAgICAgICAgICBhY2Nlc3Nvcnkub3duZXIgPSBfb3duZXI7CiAgICAKICAgfQogICAgCgoJCglmdW5jdGlvbiB0cmFuc2ZlckFjY2Vzc29yeShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDY0IF9fYWNjZXNzb3J5SWQpIG9ubHlTRVJBUEhJTSBwdWJsaWMgcmV0dXJucyhSZXN1bHRDb2RlKSB7CiAgICAgICAgQWNjZXNzb3J5IHN0b3JhZ2UgYWNjZXNzb3J5ID0gQWNjZXNzb3J5Q29sbGVjdGlvbltfX2FjY2Vzc29yeUlkXTsKICAgICAgICBpZiAoYWNjZXNzb3J5Lm93bmVyICE9IF9mcm9tKSB7CiAgICAgICAgICAgIHJldHVybiBSZXN1bHRDb2RlLkVSUk9SX05PVF9PV05FUjsKICAgICAgICB9CiAgICAgICAgaWYgKF9mcm9tID09IF90bykge3JldmVydCgpO30KICAgICAgICBpZiAoYWNjZXNzb3J5Lm93bmVyTG9jayA9PSB0cnVlKSB7cmV2ZXJ0KCk7fQogICAgIGFkZEFjY2Vzc29yeUlkTWFwcGluZyhfdG8sIF9fYWNjZXNzb3J5SWQpOwogICAgICAgIHJldHVybiBSZXN1bHRDb2RlLlNVQ0NFU1M7CiAgICB9CiAgZnVuY3Rpb24gb3duZXJBY2Nlc3NvcnlUcmFuc2ZlciAoYWRkcmVzcyBfdG8sIHVpbnQ2NCBfX2FjY2Vzc29yeUlkKSAgcHVibGljICB7CiAgICAgLy9Bbnkgb3duZXIgb2YgYW4gYWNjZXNzb3J5IGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24gdG8gdHJhbnNmZXIgdGhlaXIgYWNjZXNzb3J5IHRvIGFueSBvdGhlciBhZGRyZXNzLiAKICAgICAKICAgICAgIGlmICgoX19hY2Nlc3NvcnlJZCA+IHRvdGFsQWNjZXNzb3JpZXMpIHx8ICggX19hY2Nlc3NvcnlJZCA9PSAwKSkge3JldmVydCgpO30KICAgICAgICAgQWNjZXNzb3J5IHN0b3JhZ2UgYWNjZXNzb3J5ID0gQWNjZXNzb3J5Q29sbGVjdGlvbltfX2FjY2Vzc29yeUlkXTsKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBfdG8pIHtyZXZlcnQoKTt9IC8vY2FuJ3Qgc2VuZCBhbiBhY2Nlc3NvcnkgdG8geW91cnNlbGYKICAgICAgICBpZiAoYWNjZXNzb3J5Lm93bmVyICE9IG1zZy5zZW5kZXIpIHtyZXZlcnQoKTt9IC8vY2FuJ3Qgc2VuZCBhbiBhY2Nlc3NvcnkgeW91IGRvbid0IG93bi4gCiAgICAgICAgZWxzZSB7CiAgICAgICAgYWNjZXNzb3J5Lm93bmVyID0gX3RvOwogICAgICBhZGRBY2Nlc3NvcnlJZE1hcHBpbmcoX3RvLCBfX2FjY2Vzc29yeUlkKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFjY2Vzc29yeUxvY2sgKHVpbnQ2NCBfYWNjZXNzb3J5SWQsIGJvb2wgbmV3VmFsdWUpIHB1YmxpYyB7CiAgICAgICAgaWYgKChfYWNjZXNzb3J5SWQgPiB0b3RhbEFjY2Vzc29yaWVzKSB8fCAoX2FjY2Vzc29yeUlkID09IDApKSB7cmV2ZXJ0KCk7fQogICAgICAgIEFjY2Vzc29yeSBzdG9yYWdlIGFjY2Vzc29yeSA9IEFjY2Vzc29yeUNvbGxlY3Rpb25bX2FjY2Vzc29yeUlkXTsKICAgICAgICBpZiAoYWNjZXNzb3J5Lm93bmVyICE9IG1zZy5zZW5kZXIpIHsgcmV2ZXJ0KCk7fQogICAgICAgIGFjY2Vzc29yeS5vd25lckxvY2sgPSBuZXdWYWx1ZTsKICAgIH0KICAgIAogICAgICAgZnVuY3Rpb24gcmVtb3ZlQ3JlYXRvcigpIG9ubHlDUkVBVE9SIGV4dGVybmFsIHsKICAgICAgICAvL3RoaXMgZnVuY3Rpb24gaXMgbWVhbnQgdG8gYmUgY2FsbGVkIG9uY2UgYWxsIG1vZHVsZXMgZm9yIHRoZSBnYW1lIGFyZSBpbiBwbGFjZS4gSXQgd2lsbCByZW1vdmUgb3VyIGFiaWxpdHkgdG8gYWRkIGFueSBuZXcgbW9kdWxlcyBhbmQgbWFrZSB0aGUgZ2FtZSBmdWxseSBkZWNlbnRyYWxpemVkLiAKICAgICAgICBjcmVhdG9yQWRkcmVzcyA9IGFkZHJlc3MoMCk7CiAgICB9CgogICAgLy8qKiogUmVhZCBBY2Nlc3MgKioqLy8KICAgIGZ1bmN0aW9uIGdldEFjY2Vzc29yeVNlcmllcyh1aW50OCBfYWNjZXNzb3J5U2VyaWVzSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ4IGFjY2Vzc29yeVNlcmllc0lkLCB1aW50MzIgY3VycmVudFRvdGFsLCB1aW50MzIgbWF4VG90YWwsIHVpbnQgcHJpY2UpIHsKICAgICAgICBBY2Nlc3NvcnlTZXJpZXMgbWVtb3J5IHNlcmllcyA9IEFjY2Vzc29yeVNlcmllc0NvbGxlY3Rpb25bX2FjY2Vzc29yeVNlcmllc0lkXTsKICAgICAgICBhY2Nlc3NvcnlTZXJpZXNJZCA9IHNlcmllcy5BY2Nlc3NvcnlTZXJpZXNJZDsKICAgICAgICBjdXJyZW50VG90YWwgPSBzZXJpZXMuY3VycmVudFRvdGFsOwogICAgICAgIG1heFRvdGFsID0gc2VyaWVzLm1heFRvdGFsOwogICAgICAgIHByaWNlID0gc2VyaWVzLnByaWNlOwogICAgfQoJCglmdW5jdGlvbiBnZXRBY2Nlc3NvcnkodWludCBfYWNjZXNzb3J5SWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQgYWNjZXNzb3J5SUQsIHVpbnQ4IEFjY2Vzc29yeVNlcmllc0lELCBhZGRyZXNzIG93bmVyKSB7CiAgICAgICAgQWNjZXNzb3J5IG1lbW9yeSBhY2Nlc3NvcnkgPSBBY2Nlc3NvcnlDb2xsZWN0aW9uW19hY2Nlc3NvcnlJZF07CiAgICAgICAgYWNjZXNzb3J5SUQgPSBhY2Nlc3NvcnkuYWNjZXNzb3J5SWQ7CiAgICAgICAgQWNjZXNzb3J5U2VyaWVzSUQgPSBhY2Nlc3NvcnkuYWNjZXNzb3J5U2VyaWVzSWQ7CiAgICAgICAgb3duZXIgPSBhY2Nlc3Nvcnkub3duZXI7CiAgCiAgICAgICAKICAgIH0KCQoJZnVuY3Rpb24gZ2V0T3duZXJBY2Nlc3NvcnlDb3VudChhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBvd25lckFjY2Vzc29yeUNvbGxlY3Rpb25bX293bmVyXS5sZW5ndGg7CiAgICB9CgkKCWZ1bmN0aW9uIGdldEFjY2Vzc29yeUJ5SW5kZXgoYWRkcmVzcyBfb3duZXIsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KSB7CiAgICAgICAgaWYgKF9pbmRleCA+PSBvd25lckFjY2Vzc29yeUNvbGxlY3Rpb25bX293bmVyXS5sZW5ndGgpCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIHJldHVybiBvd25lckFjY2Vzc29yeUNvbGxlY3Rpb25bX293bmVyXVtfaW5kZXhdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsQWNjZXNzb3J5U2VyaWVzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgcmV0dXJuIHRvdGFsQWNjZXNzb3J5U2VyaWVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRvdGFsQWNjZXNzb3JpZXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiB0b3RhbEFjY2Vzc29yaWVzOwogICAgfQogICAgICBmdW5jdGlvbiBnZXRBY2Nlc3NvcnlMb2NrU3RhdHVzKHVpbnQ2NCBfYWNlc3NvcnlJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoKF9hY2Vzc29yeUlkID4gdG90YWxBY2Nlc3NvcmllcykgfHwgKF9hY2Vzc29yeUlkID09IDApKSB7cmV2ZXJ0KCk7fQogICAgICAgQWNjZXNzb3J5IHN0b3JhZ2UgYWNjZXNzb3J5ID0gQWNjZXNzb3J5Q29sbGVjdGlvbltfYWNlc3NvcnlJZF07CiAgICAgICByZXR1cm4gYWNjZXNzb3J5Lm93bmVyTG9jazsKICAgIH0KfQ=='.
	

]
