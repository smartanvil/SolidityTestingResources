Class {
	#name : #SRT9544b6a2f02e7be2ae53734e64811475d053d5ae,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9544b6a2f02e7be2ae53734e64811475d053d5ae >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7Ci8vICAgVWJlY29pbi4gQWxsIFJpZ2h0cyBSZXNlcnZlZApsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3Qgb3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHBheWFibGUgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfb3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX293bmVyICE9IDApOwogICAgICAgIG5ld093bmVyID0gX293bmVyOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjb25maXJtT3duZXIoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobmV3T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBkZWxldGUgbmV3T3duZXI7CiAgICB9Cn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7ICAKICAgIAogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIC8qKgogICAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgKi8KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCgogICAgLyoqCiAgICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewoKICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQogICAgCiAgICAvKioKICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsIAogICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljCiAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljCiAgICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgIH0KICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCgpjb250cmFjdCBVYmVjb2luSUNPIGlzIG93bmVkIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CiAgICBhZGRyZXNzIHByaXZhdGUgV0lUSERSQVdfV0FMTEVUOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTb2xkID0gMDsKICAgIHVpbnQyNTYgcHVibGljIHNvbGRPblN0YWdlID0gMDsKICAgIHVpbnQ4IHB1YmxpYyBjdXJyZW50U3RhZ2UgPSAwOwogICAgVWJlY29pbiBwdWJsaWMgcmV3YXJkVG9rZW47CgoKICAgIHVpbnQyNTZbXSB0b2tlbnNSYXRlID0gWzQyMDBdOwogICAgdWludDI1NltdIHRva2Vuc0NhcCA9IFs4MDAwMDAwMF07CiAgICBtYXBwaW5nKGFkZHJlc3M9PnVpbnQyNTYpIGludmVzdG1lbnRzOwogICAgdWludDI1NiBsaW1pdF9vbl9iZW5lZmljaWFyeSA9IDEwMDAgKiAxMDAwIGV0aGVyOwoKICAgIGZ1bmN0aW9uIGludmVzdG1lbnRzT2YoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gaW52ZXN0bWVudHNbYmVuZWZpY2lhcnldOwogICAgfQogIAogICAgZnVuY3Rpb24gYXZhaWxhYmxlT25TdGFnZSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gdG9rZW5zQ2FwW2N1cnJlbnRTdGFnZV0ubXVsKDEgZXRoZXIpLnN1Yihzb2xkT25TdGFnZSk7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlVG9rZW5Db250cmFjdCgpIGludGVybmFsIHJldHVybnMgKFViZWNvaW4pIHsKICAgICAgcmV0dXJuIG5ldyBVYmVjb2luKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY3VycmVudFN0YWdlVG9rZW5zQ2FwKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gdG9rZW5zQ2FwW2N1cnJlbnRTdGFnZV07CiAgICB9CiAgICBmdW5jdGlvbiBjdXJyZW50U3RhZ2VUb2tlbnNSYXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gdG9rZW5zUmF0ZVtjdXJyZW50U3RhZ2VdOwogICAgfQoKICAgIGZ1bmN0aW9uIFViZWNvaW5JQ08oKSBwYXlhYmxlIG93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBXSVRIRFJBV19XQUxMRVQgPSBtc2cuc2VuZGVyOyAKICAgICAgICByZXdhcmRUb2tlbiA9IGNyZWF0ZVRva2VuQ29udHJhY3QoKTsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgewogICAgICBib29sIGNhbkJ1eSA9IGludmVzdG1lbnRzT2YoYmVuZWZpY2lhcnkpIDwgbGltaXRfb25fYmVuZWZpY2lhcnk7CiAgICAgIGJvb2wgdmFsaWRQdXJjaGFzZSA9IGJlbmVmaWNpYXJ5ICE9IDB4MCAmJiBtc2cudmFsdWUgIT0gMDsKICAgICAgdWludDI1NiBjdXJyZW50VG9rZW5zQW1vdW50ID0gYXZhaWxhYmxlVG9rZW5zKCk7CiAgICAgIHJlcXVpcmUoY2FuQnV5ICYmIHZhbGlkUHVyY2hhc2UgJiYgY3VycmVudFRva2Vuc0Ftb3VudCA+IDApOwogICAgICB1aW50MjU2IGJvdWdodFRva2VuczsKICAgICAgdWludDI1NiByZWZ1bmRBbW91bnQgPSAwOwogICAgICAKICAgICAgdWludDI1NlsyXSBtZW1vcnkgdG9rZW5zQW5kUmVmdW5kID0gY2FsY011bHRpU3RhZ2UoKTsKICAgICAgYm91Z2h0VG9rZW5zID0gdG9rZW5zQW5kUmVmdW5kWzBdOwogICAgICByZWZ1bmRBbW91bnQgPSB0b2tlbnNBbmRSZWZ1bmRbMV07CgogICAgICByZXF1aXJlKGJvdWdodFRva2VucyA8IGN1cnJlbnRUb2tlbnNBbW91bnQpOwoKICAgICAgdG90YWxTb2xkID0gdG90YWxTb2xkLmFkZChib3VnaHRUb2tlbnMpOwogICAgICBpbnZlc3RtZW50c1tiZW5lZmljaWFyeV0gPSBpbnZlc3RtZW50c1tiZW5lZmljaWFyeV0uYWRkKGJvdWdodFRva2Vucyk7CiAgICAgIGlmKCBzb2xkT25TdGFnZSA+PSB0b2tlbnNDYXBbY3VycmVudFN0YWdlXS5tdWwoMSBldGhlcikpIHsKICAgICAgICB0b05leHRTdGFnZSgpOwogICAgICB9IAogICAgICAKICAgICAgcmV3YXJkVG9rZW4udHJhbnNmZXIoYmVuZWZpY2lhcnksYm91Z2h0VG9rZW5zKTsKICAgICAgaWYgKHJlZnVuZEFtb3VudCA+IDApIAogICAgICAgICAgcmVmdW5kTW9uZXkocmVmdW5kQW1vdW50KTsKCiAgICAgIHdpdGhkcmF3RnVuZHModGhpcy5iYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmb3JjZVdpdGhkcmF3KCkgb25seU93bmVyIHsKICAgICAgd2l0aGRyYXdGdW5kcyh0aGlzLmJhbGFuY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGNNdWx0aVN0YWdlKCkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2WzJdKSB7CiAgICAgIHVpbnQyNTYgc3RhZ2VCb3VnaHRUb2tlbnM7CiAgICAgIHVpbnQyNTYgdW5kaXN0cmlidXRlZEFtb3VudCA9IG1zZy52YWx1ZTsgCiAgICAgIHVpbnQyNTYgX2JvdWdodFRva2VucyA9IDA7IAogICAgICB1aW50MjU2IHVuZGlzdHJpYnV0ZWRUb2tlbnMgPSBhdmFpbGFibGVUb2tlbnMoKTsgCgogICAgICB3aGlsZSh1bmRpc3RyaWJ1dGVkQW1vdW50ID4gMCAmJiB1bmRpc3RyaWJ1dGVkVG9rZW5zID4gMCkgewogICAgICAgIGJvb2wgbmVlZE5leHRTdGFnZSA9IGZhbHNlOyAKICAgICAgICAKICAgICAgICBzdGFnZUJvdWdodFRva2VucyA9IGdldFRva2Vuc0Ftb3VudCh1bmRpc3RyaWJ1dGVkQW1vdW50KTsKICAgICAgICAKCiAgICAgICAgaWYodG90YWxJbnZlc3RtZW50cyhfYm91Z2h0VG9rZW5zLmFkZChzdGFnZUJvdWdodFRva2VucykpID4gbGltaXRfb25fYmVuZWZpY2lhcnkpewogICAgICAgICAgc3RhZ2VCb3VnaHRUb2tlbnMgPSBsaW1pdF9vbl9iZW5lZmljaWFyeS5zdWIoX2JvdWdodFRva2Vucyk7CiAgICAgICAgICB1bmRpc3RyaWJ1dGVkVG9rZW5zID0gc3RhZ2VCb3VnaHRUb2tlbnM7IAogICAgICAgIH0KCiAgICAgICAgCiAgICAgICAgaWYgKHN0YWdlQm91Z2h0VG9rZW5zID4gYXZhaWxhYmxlT25TdGFnZSgpKSB7CiAgICAgICAgICBzdGFnZUJvdWdodFRva2VucyA9IGF2YWlsYWJsZU9uU3RhZ2UoKTsKICAgICAgICAgIG5lZWROZXh0U3RhZ2UgPSB0cnVlOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgX2JvdWdodFRva2VucyA9IF9ib3VnaHRUb2tlbnMuYWRkKHN0YWdlQm91Z2h0VG9rZW5zKTsKICAgICAgICB1bmRpc3RyaWJ1dGVkVG9rZW5zID0gdW5kaXN0cmlidXRlZFRva2Vucy5zdWIoc3RhZ2VCb3VnaHRUb2tlbnMpOyAKICAgICAgICB1bmRpc3RyaWJ1dGVkQW1vdW50ID0gdW5kaXN0cmlidXRlZEFtb3VudC5zdWIoZ2V0VG9rZW5zQ29zdChzdGFnZUJvdWdodFRva2VucykpOyAKICAgICAgICBzb2xkT25TdGFnZSA9IHNvbGRPblN0YWdlLmFkZChzdGFnZUJvdWdodFRva2Vucyk7CiAgICAgICAgaWYgKG5lZWROZXh0U3RhZ2UpIAogICAgICAgICAgdG9OZXh0U3RhZ2UoKTsKICAgICAgfQogICAgICByZXR1cm4gW19ib3VnaHRUb2tlbnMsdW5kaXN0cmlidXRlZEFtb3VudF07CiAgICB9CgoKICAgIGZ1bmN0aW9uIHNldFdpdGhkcmF3V2FsbGV0KGFkZHJlc3MgYWRkcmVzc1RvV2l0aGRyYXcpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoYWRkcmVzc1RvV2l0aGRyYXcgIT0gMHgwKTsKICAgICAgICBXSVRIRFJBV19XQUxMRVQgPSBhZGRyZXNzVG9XaXRoZHJhdzsKICAgIH0KICAgIGZ1bmN0aW9uIHRvdGFsSW52ZXN0bWVudHModWludCBhZGRpdGlvbmFsQW1vdW50KSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHJldHVybiBpbnZlc3RtZW50c09mKG1zZy5zZW5kZXIpLmFkZChhZGRpdGlvbmFsQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZWZ1bmRNb25leSh1aW50MjU2IHJlZnVuZEFtb3VudCkgaW50ZXJuYWwgewogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHJlZnVuZEFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVyblRva2Vucyh1aW50MjU2IGFtb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgIHJld2FyZFRva2VuLmJ1cm4oYW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb2tlbnNDb3N0KHVpbnQyNTYgX3Rva2Vuc0Ftb3VudCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgIHJldHVybiBfdG9rZW5zQW1vdW50LmRpdih0b2tlbnNSYXRlW2N1cnJlbnRTdGFnZV0pOwogICAgfSAKCiAgICBmdW5jdGlvbiBnZXRUb2tlbnNBbW91bnQodWludDI1NiBfYW1vdW50SW5XZWkpIGludGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikgewogICAgICByZXR1cm4gX2Ftb3VudEluV2VpLm11bCh0b2tlbnNSYXRlW2N1cnJlbnRTdGFnZV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvTmV4dFN0YWdlKCkgaW50ZXJuYWwgewogICAgICAgIAogICAgICAgIGlmKGN1cnJlbnRTdGFnZSA8IHRva2Vuc1JhdGUubGVuZ3RoICYmIGN1cnJlbnRTdGFnZSA8IHRva2Vuc0NhcC5sZW5ndGgpewogICAgICAgICAgY3VycmVudFN0YWdlKys7CiAgICAgICAgICBzb2xkT25TdGFnZSA9IDA7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGF2YWlsYWJsZVRva2VucygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gcmV3YXJkVG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdpdGhkcmF3RnVuZHModWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgICAgICBXSVRIRFJBV19XQUxMRVQudHJhbnNmZXIoYW1vdW50KTsKICAgIH0KfQoKCmNvbnRyYWN0IFViZWNvaW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiVWJlY29pbiI7CiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlVCRSI7CiAgICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAiMS4wIjsKICAgICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgID0gMzAwMDAwMDAwMCAqIDEgZXRoZXI7CiAgICAgIG1hcHBpbmcoYWRkcmVzcz0+dWludDI1NikgcHJlbWluZU9mOwogICAgICBhZGRyZXNzW10gcHJpdmF0ZSBwcmVtaW5lV2FsbGV0cyA9IFsKICAgICAgICAgIDB4YzFiMWRDQTY2NzYxOTg4OEVGMDA1ZkE1MTU0NzJGQzgwNTg4NTZEOSwgCiAgICAgICAgICAweDJhQjU0OUFGOTg3MjJGMDEzNDMyNjk4RDFENzQwMjdjNTg5Nzg0M0IKICAgICAgXTsKCiAgICAgIGZ1bmN0aW9uIFViZWNvaW4oKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7CiAgICAgICAgcHJlbWluZU9mW3ByZW1pbmVXYWxsZXRzWzBdXSA9IDMwMDAwMDAwMCAqIDEgZXRoZXI7IAogICAgICAgIHByZW1pbmVPZltwcmVtaW5lV2FsbGV0c1sxXV0gPSAyNjIwMDAwMDAwICogMSBldGhlcjsKICAgICAgICAgICAgICAgIAogICAgICAgIGZvcih1aW50IGkgPSAwOyBpPHByZW1pbmVXYWxsZXRzLmxlbmd0aDtpKyspIHsKICAgICAgICAgIHRyYW5zZmVyKHByZW1pbmVXYWxsZXRzW2ldLHByZW1pbmVPZltwcmVtaW5lV2FsbGV0c1tpXV0pOwogICAgICAgIH0KICAgICAgfQoKICAgIC8qKgogICAgICogQGRldiBCdXJucyBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgYnVybmVkLgogICAgICovCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LnN1YihfdmFsdWUpOwogICAgICAgIEJ1cm4oYnVybmVyLCBfdmFsdWUpOwogICAgfQogIH0='.
	

]
