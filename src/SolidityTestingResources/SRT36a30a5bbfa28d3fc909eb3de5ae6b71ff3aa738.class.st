Class {
	#name : #SRT36a30a5bbfa28d3fc909eb3de5ae6b71ff3aa738,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT36a30a5bbfa28d3fc909eb3de5ae6b71ff3aa738 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgSVBGU0V2ZW50cyB7CglldmVudCBIYXNoQWRkZWQoYWRkcmVzcyBQdWJLZXksIHN0cmluZyBJUEZTSGFzaCwgdWludCB0dGwpOwoJZXZlbnQgSGFzaFJlbW92ZWQoYWRkcmVzcyBQdWJLZXksIHN0cmluZyBJUEZTSGFzaCk7Cn0KCmNvbnRyYWN0IE11bHRpbWVtYmVyIHsKCiAgICAvLyBUWVBFUwoKICAgIC8vIHN0cnVjdCBmb3IgdGhlIHN0YXR1cyBvZiBhIHBlbmRpbmcgb3BlcmF0aW9uLgogICAgc3RydWN0IFBlbmRpbmdTdGF0ZSB7CiAgICAgICAgdWludCB5ZXROZWVkZWQ7CiAgICAgICAgdWludCBtZW1iZXJzRG9uZTsKICAgICAgICB1aW50IGluZGV4OwogICAgfQoKICAgIC8vIEVWRU5UUwoKICAgIC8vIHRoaXMgY29udHJhY3Qgb25seSBoYXMgc2V2ZW4gdHlwZXMgb2YgZXZlbnRzOiBpdCBjYW4gYWNjZXB0IGEgY29uZmlybWF0aW9uLCBpbiB3aGljaCBjYXNlCiAgICAvLyB3ZSByZWNvcmQgbWVtYmVyIGFuZCBvcGVyYXRpb24gKGhhc2gpIGFsb25nc2lkZSBpdC4KICAgIGV2ZW50IENvbmZpcm1hdGlvbihhZGRyZXNzIG1lbWJlciwgYnl0ZXMzMiBvcGVyYXRpb24pOwogICAgZXZlbnQgUmV2b2tlKGFkZHJlc3MgbWVtYmVyLCBieXRlczMyIG9wZXJhdGlvbik7CiAgICAvLyBzb21lIG90aGVycyBhcmUgaW4gdGhlIGNhc2Ugb2YgYW4gbWVtYmVyIGNoYW5naW5nLgogICAgZXZlbnQgTWVtYmVyQ2hhbmdlZChhZGRyZXNzIG9sZE1lbWJlciwgYWRkcmVzcyBuZXdNZW1iZXIpOwogICAgZXZlbnQgTWVtYmVyQWRkZWQoYWRkcmVzcyBuZXdNZW1iZXIpOwogICAgZXZlbnQgTWVtYmVyUmVtb3ZlZChhZGRyZXNzIG9sZE1lbWJlcik7CiAgICAvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UKICAgIGV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsKCiAgICAvLyBNT0RJRklFUlMKCiAgICAvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4KICAgIG1vZGlmaWVyIG9ubHltZW1iZXIgewogICAgICAgIGlmIChpc01lbWJlcihtc2cuc2VuZGVyKSkKICAgICAgICAgICAgXzsKICAgIH0KICAgIC8vIG11bHRpLXNpZyBmdW5jdGlvbiBtb2RpZmllcjogdGhlIG9wZXJhdGlvbiBtdXN0IGhhdmUgYW4gaW50cmluc2ljIGhhc2ggaW4gb3JkZXIKICAgIC8vIHRoYXQgbGF0ZXIgYXR0ZW1wdHMgY2FuIGJlIHJlYWxpc2VkIGFzIHRoZSBzYW1lIHVuZGVybHlpbmcgb3BlcmF0aW9uIGFuZAogICAgLy8gdGh1cyBjb3VudCBhcyBjb25maXJtYXRpb25zLgogICAgbW9kaWZpZXIgb25seW1hbnltZW1iZXJzKGJ5dGVzMzIgX29wZXJhdGlvbikgewogICAgICAgIGlmIChjb25maXJtQW5kQ2hlY2soX29wZXJhdGlvbikpCiAgICAgICAgICAgIF87CiAgICB9CgogICAgLy8gTUVUSE9EUwoKICAgIC8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnltZW1iZXJzIiB0cmFuc2FjdGlvbnMKICAgIC8vIGFzIHdlbGwgYXMgdGhlIHNlbGVjdGlvbiBvZiBhZGRyZXNzZXMgY2FwYWJsZSBvZiBjb25maXJtaW5nIHRoZW0uCiAgICBmdW5jdGlvbiBNdWx0aW1lbWJlcihhZGRyZXNzW10gX21lbWJlcnMsIHVpbnQgX3JlcXVpcmVkKSBwdWJsaWMgewogICAgICAgIG1fbnVtTWVtYmVycyA9IF9tZW1iZXJzLmxlbmd0aCArIDE7CiAgICAgICAgbV9tZW1iZXJzWzFdID0gdWludChtc2cuc2VuZGVyKTsKICAgICAgICBtX21lbWJlckluZGV4W3VpbnQobXNnLnNlbmRlcildID0gMTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfbWVtYmVycy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICBtX21lbWJlcnNbMiArIGldID0gdWludChfbWVtYmVyc1tpXSk7CiAgICAgICAgICAgIG1fbWVtYmVySW5kZXhbdWludChfbWVtYmVyc1tpXSldID0gMiArIGk7CiAgICAgICAgfQogICAgICAgIG1fcmVxdWlyZWQgPSBfcmVxdWlyZWQ7CiAgICB9CiAgICAKICAgIC8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbgogICAgZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgewogICAgICAgIHVpbnQgbWVtYmVySW5kZXggPSBtX21lbWJlckluZGV4W3VpbnQobXNnLnNlbmRlcildOwogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG1lbWJlcgogICAgICAgIGlmIChtZW1iZXJJbmRleCA9PSAwKSAKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHVpbnQgbWVtYmVySW5kZXhCaXQgPSAyKiptZW1iZXJJbmRleDsKICAgICAgICB2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKICAgICAgICBpZiAocGVuZGluZy5tZW1iZXJzRG9uZSAmIG1lbWJlckluZGV4Qml0ID4gMCkgewogICAgICAgICAgICBwZW5kaW5nLnlldE5lZWRlZCsrOwogICAgICAgICAgICBwZW5kaW5nLm1lbWJlcnNEb25lIC09IG1lbWJlckluZGV4Qml0OwogICAgICAgICAgICBSZXZva2UobXNnLnNlbmRlciwgX29wZXJhdGlvbik7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBSZXBsYWNlcyBhbiBtZW1iZXIgYF9mcm9tYCB3aXRoIGFub3RoZXIgYF90b2AuCiAgICBmdW5jdGlvbiBjaGFuZ2VNZW1iZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIG9ubHltYW55bWVtYmVycyhrZWNjYWsyNTYoX2Zyb20sX3RvKSkgZXh0ZXJuYWwgewogICAgICAgIGlmIChpc01lbWJlcihfdG8pKSAKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHVpbnQgbWVtYmVySW5kZXggPSBtX21lbWJlckluZGV4W3VpbnQoX2Zyb20pXTsKICAgICAgICBpZiAobWVtYmVySW5kZXggPT0gMCkgCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgbV9tZW1iZXJzW21lbWJlckluZGV4XSA9IHVpbnQoX3RvKTsKICAgICAgICBtX21lbWJlckluZGV4W3VpbnQoX2Zyb20pXSA9IDA7CiAgICAgICAgbV9tZW1iZXJJbmRleFt1aW50KF90byldID0gbWVtYmVySW5kZXg7CiAgICAgICAgTWVtYmVyQ2hhbmdlZChfZnJvbSwgX3RvKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkTWVtYmVyKGFkZHJlc3MgX21lbWJlcikgb25seW1hbnltZW1iZXJzKGtlY2NhazI1NihfbWVtYmVyKSkgcHVibGljIHsKICAgICAgICBpZiAoaXNNZW1iZXIoX21lbWJlcikpIAogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGNsZWFyUGVuZGluZygpOwogICAgICAgIGlmIChtX251bU1lbWJlcnMgPj0gY19tYXhNZW1iZXJzKQogICAgICAgICAgICByZW9yZ2FuaXplTWVtYmVycygpOwogICAgICAgIGlmIChtX251bU1lbWJlcnMgPj0gY19tYXhNZW1iZXJzKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgbV9udW1NZW1iZXJzKys7CiAgICAgICAgbV9tZW1iZXJzW21fbnVtTWVtYmVyc10gPSB1aW50KF9tZW1iZXIpOwogICAgICAgIG1fbWVtYmVySW5kZXhbdWludChfbWVtYmVyKV0gPSBtX251bU1lbWJlcnM7CiAgICAgICAgTWVtYmVyQWRkZWQoX21lbWJlcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcihhZGRyZXNzIF9tZW1iZXIpIG9ubHltYW55bWVtYmVycyhrZWNjYWsyNTYoX21lbWJlcikpIHB1YmxpYyB7CiAgICAgICAgdWludCBtZW1iZXJJbmRleCA9IG1fbWVtYmVySW5kZXhbdWludChfbWVtYmVyKV07CiAgICAgICAgaWYgKG1lbWJlckluZGV4ID09IDApIAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKG1fcmVxdWlyZWQgPiBtX251bU1lbWJlcnMgLSAxKSAKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBtX21lbWJlcnNbbWVtYmVySW5kZXhdID0gMDsKICAgICAgICBtX21lbWJlckluZGV4W3VpbnQoX21lbWJlcildID0gMDsKICAgICAgICBjbGVhclBlbmRpbmcoKTsKICAgICAgICByZW9yZ2FuaXplTWVtYmVycygpOyAvL21ha2Ugc3VyZSBtX251bU1lbWJlcnMgaXMgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBtZW1iZXJzIGFuZCBhbHdheXMgcG9pbnRzIHRvIHRoZSBvcHRpbWFsIGZyZWUgc2xvdAogICAgICAgIE1lbWJlclJlbW92ZWQoX21lbWJlcik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZVJlcXVpcmVtZW50KHVpbnQgX25ld1JlcXVpcmVkKSBvbmx5bWFueW1lbWJlcnMoa2VjY2FrMjU2KF9uZXdSZXF1aXJlZCkpIGV4dGVybmFsIHsKICAgICAgICBpZiAoX25ld1JlcXVpcmVkID4gbV9udW1NZW1iZXJzKSAKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIG1fcmVxdWlyZWQgPSBfbmV3UmVxdWlyZWQ7CiAgICAgICAgY2xlYXJQZW5kaW5nKCk7CiAgICAgICAgUmVxdWlyZW1lbnRDaGFuZ2VkKF9uZXdSZXF1aXJlZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGlzTWVtYmVyKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7IAogICAgICAgIHJldHVybiBtX21lbWJlckluZGV4W3VpbnQoX2FkZHIpXSA+IDA7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGhhc0NvbmZpcm1lZChieXRlczMyIF9vcGVyYXRpb24sIGFkZHJlc3MgX21lbWJlcikgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwogICAgICAgIHVpbnQgbWVtYmVySW5kZXggPSBtX21lbWJlckluZGV4W3VpbnQoX21lbWJlcildOwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBtZW1iZXIKICAgICAgICBpZiAobWVtYmVySW5kZXggPT0gMCkgCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBiaXQgdG8gc2V0IGZvciB0aGlzIG1lbWJlci4KICAgICAgICB1aW50IG1lbWJlckluZGV4Qml0ID0gMioqbWVtYmVySW5kZXg7CiAgICAgICAgcmV0dXJuICEocGVuZGluZy5tZW1iZXJzRG9uZSAmIG1lbWJlckluZGV4Qml0ID09IDApOwogICAgfQogICAgCiAgICAvLyBJTlRFUk5BTCBNRVRIT0RTCgogICAgZnVuY3Rpb24gY29uZmlybUFuZENoZWNrKGJ5dGVzMzIgX29wZXJhdGlvbikgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIGRldGVybWluZSB3aGF0IGluZGV4IHRoZSBwcmVzZW50IHNlbmRlciBpczoKICAgICAgICB1aW50IG1lbWJlckluZGV4ID0gbV9tZW1iZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsKICAgICAgICAvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBtZW1iZXIKICAgICAgICBpZiAobWVtYmVySW5kZXggPT0gMCkgCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgdmFyIHBlbmRpbmcgPSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgLy8gaWYgd2UncmUgbm90IHlldCB3b3JraW5nIG9uIHRoaXMgb3BlcmF0aW9uLCBzd2l0Y2ggb3ZlciBhbmQgcmVzZXQgdGhlIGNvbmZpcm1hdGlvbiBzdGF0dXMuCiAgICAgICAgaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDApIHsKICAgICAgICAgICAgLy8gcmVzZXQgY291bnQgb2YgY29uZmlybWF0aW9ucyBuZWVkZWQuCiAgICAgICAgICAgIHBlbmRpbmcueWV0TmVlZGVkID0gbV9yZXF1aXJlZDsKICAgICAgICAgICAgLy8gcmVzZXQgd2hpY2ggbWVtYmVycyBoYXZlIGNvbmZpcm1lZCAobm9uZSkgLSBzZXQgb3VyIGJpdG1hcCB0byAwLgogICAgICAgICAgICBwZW5kaW5nLm1lbWJlcnNEb25lID0gMDsKICAgICAgICAgICAgcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOwogICAgICAgICAgICBtX3BlbmRpbmdJbmRleFtwZW5kaW5nLmluZGV4XSA9IF9vcGVyYXRpb247CiAgICAgICAgfQogICAgICAgIC8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBtZW1iZXIuCiAgICAgICAgdWludCBtZW1iZXJJbmRleEJpdCA9IDIqKm1lbWJlckluZGV4OwogICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5LgogICAgICAgIGlmIChwZW5kaW5nLm1lbWJlcnNEb25lICYgbWVtYmVySW5kZXhCaXQgPT0gMCkgewogICAgICAgICAgICBDb25maXJtYXRpb24obXNnLnNlbmRlciwgX29wZXJhdGlvbik7CiAgICAgICAgICAgIC8vIG9rIC0gY2hlY2sgaWYgY291bnQgaXMgZW5vdWdoIHRvIGdvIGFoZWFkLgogICAgICAgICAgICBpZiAocGVuZGluZy55ZXROZWVkZWQgPD0gMSkgewogICAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvbmZpcm1hdGlvbnM6IHJlc2V0IGFuZCBydW4gaW50ZXJpb3IuCiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXhbbV9wZW5kaW5nW19vcGVyYXRpb25dLmluZGV4XTsKICAgICAgICAgICAgICAgIGRlbGV0ZSBtX3BlbmRpbmdbX29wZXJhdGlvbl07CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG5vdCBlbm91Z2g6IHJlY29yZCB0aGF0IHRoaXMgbWVtYmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLgogICAgICAgICAgICAgICAgcGVuZGluZy55ZXROZWVkZWQtLTsKICAgICAgICAgICAgICAgIHBlbmRpbmcubWVtYmVyc0RvbmUgfD0gbWVtYmVySW5kZXhCaXQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVvcmdhbml6ZU1lbWJlcnMoKSBwcml2YXRlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICB1aW50IGZyZWUgPSAxOwogICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1NZW1iZXJzKSB7CiAgICAgICAgICAgIHdoaWxlIChmcmVlIDwgbV9udW1NZW1iZXJzICYmIG1fbWVtYmVyc1tmcmVlXSAhPSAwKSB7CiAgICAgICAgICAgICAgICBmcmVlKys7CiAgICAgICAgICAgIH0gCgogICAgICAgICAgICB3aGlsZSAobV9udW1NZW1iZXJzID4gMSAmJiBtX21lbWJlcnNbbV9udW1NZW1iZXJzXSA9PSAwKSB7CiAgICAgICAgICAgICAgICBtX251bU1lbWJlcnMtLTsKICAgICAgICAgICAgfSAKCiAgICAgICAgICAgIGlmIChmcmVlIDwgbV9udW1NZW1iZXJzICYmIG1fbWVtYmVyc1ttX251bU1lbWJlcnNdICE9IDAgJiYgbV9tZW1iZXJzW2ZyZWVdID09IDApIHsKICAgICAgICAgICAgICAgIG1fbWVtYmVyc1tmcmVlXSA9IG1fbWVtYmVyc1ttX251bU1lbWJlcnNdOwogICAgICAgICAgICAgICAgbV9tZW1iZXJJbmRleFttX21lbWJlcnNbZnJlZV1dID0gZnJlZTsKICAgICAgICAgICAgICAgIG1fbWVtYmVyc1ttX251bU1lbWJlcnNdID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xlYXJQZW5kaW5nKCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbGVuZ3RoID0gbV9wZW5kaW5nSW5kZXgubGVuZ3RoOwogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGlmIChtX3BlbmRpbmdJbmRleFtpXSAhPSAwKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgbV9wZW5kaW5nW21fcGVuZGluZ0luZGV4W2ldXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkZWxldGUgbV9wZW5kaW5nSW5kZXg7CiAgICB9CiAgICAgICAgCiAgICAvLyBGSUVMRFMKCiAgICAvLyB0aGUgbnVtYmVyIG9mIG1lbWJlcnMgdGhhdCBtdXN0IGNvbmZpcm0gdGhlIHNhbWUgb3BlcmF0aW9uIGJlZm9yZSBpdCBpcyBydW4uCiAgICB1aW50IHB1YmxpYyBtX3JlcXVpcmVkOwogICAgLy8gcG9pbnRlciB1c2VkIHRvIGZpbmQgYSBmcmVlIHNsb3QgaW4gbV9tZW1iZXJzCiAgICB1aW50IHB1YmxpYyBtX251bU1lbWJlcnM7CiAgICAKICAgIC8vIGxpc3Qgb2YgbWVtYmVycwogICAgdWludFsyNTZdIG1fbWVtYmVyczsKICAgIHVpbnQgY29uc3RhbnQgY19tYXhNZW1iZXJzID0gMjUwOwogICAgLy8gaW5kZXggb24gdGhlIGxpc3Qgb2YgbWVtYmVycyB0byBhbGxvdyByZXZlcnNlIGxvb2t1cAogICAgbWFwcGluZyh1aW50ID0+IHVpbnQpIG1fbWVtYmVySW5kZXg7CiAgICAvLyB0aGUgb25nb2luZyBvcGVyYXRpb25zLgogICAgbWFwcGluZyhieXRlczMyID0+IFBlbmRpbmdTdGF0ZSkgbV9wZW5kaW5nOwogICAgYnl0ZXMzMltdIG1fcGVuZGluZ0luZGV4Owp9Cgpjb250cmFjdCBJUEZTUHJveHkgaXMgSVBGU0V2ZW50cywgTXVsdGltZW1iZXIgewoJbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoIGFkZHJlc3MgPT4gYm9vbCkpIHB1YmxpYyBjb21wbGFpbmVkOwoJbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBjb21wbGFpbnQ7Cgl1aW50IHB1YmxpYyBiYW5UaHJlc2hvbGQ7Cgl1aW50IHB1YmxpYyBzaXplTGltaXQ7CglhZGRyZXNzW10gbWVtYmVyczsKCQoJLyoqCgkqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIGEgdmFsaWQgbWVtYmVyLiAKCSovCgltb2RpZmllciBvbmx5VmFsaWRNZW1iZXJzIHsKCQlyZXF1aXJlIChpc01lbWJlcihtc2cuc2VuZGVyKSk7CgkJXzsKCX0KCiAgICBldmVudCBDb250cmFjdEFkZGVkKGFkZHJlc3MgUHViS2V5LCB1aW50IHR0bCk7CiAgICBldmVudCBDb250cmFjdFJlbW92ZWQoYWRkcmVzcyBQdWJLZXkpOwoJZXZlbnQgQmFubmVkKHN0cmluZyBJUEZTSGFzaCk7CglldmVudCBCYW5BdHRlbXB0KGFkZHJlc3MgY29tcGxhaW5lciwgYWRkcmVzcyBfTWVtYmVyLCB1aW50IGNvbXBsYWludHMgKTsKCWV2ZW50IFBlcnNpc3RMaW1pdENoYW5nZWQodWludCBMaW1pdCk7CQoKCS8qKgoJKiBAZGV2IENvbnN0cnVjdG9yIC0gYWRkcyB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBsaXN0IG9mIHZhbGlkIG1lbWJlcnMKCSovCglmdW5jdGlvbiBJUEZTUHJveHkoKSBNdWx0aW1lbWJlciAobWVtYmVycywgMSkgcHVibGljIHsKCQlhZGRDb250cmFjdCh0aGlzLCAwKTsKCQl1cGRhdGVCYW5UaHJlc2hvbGQoMSk7CgkJc2V0VG90YWxQZXJzaXN0TGltaXQoMTAwMDAwMDAwMDApOyAvLzEwIEdCCgl9CgoJLyoqCgkqIEBkZXYgQWRkIGhhc2ggdG8gcGVyc2lzdGVudCBzdG9yYWdlCgkqIEBwYXJhbSBfSVBGU0hhc2ggVGhlIGlwZnMgaGFzaCB0byBwcm9wYWdhdGUuCgkqIEBwYXJhbSBfdHRsIGFtb3VudCBvZiB0aW1lIGlzIHNlY29uZHMgdG8gcGVyc2lzdCB0aGlzLiAKCSovCglmdW5jdGlvbiBhZGRIYXNoKHN0cmluZyBfSVBGU0hhc2gsIHVpbnQgX3R0bCkgcHVibGljIG9ubHlWYWxpZE1lbWJlcnMgewoJCUhhc2hBZGRlZChtc2cuc2VuZGVyLF9JUEZTSGFzaCxfdHRsKTsKCX0KCgkvKioKCSogQGRldiBSZW1vdmUgaGFzaCBmcm9tIHBlcnNpc3RlbnQgc3RvcmFnZQoJKiBAcGFyYW0gX0lQRlNIYXNoIFRoZSBpcGZzIGhhc2ggdG8gcHJvcGFnYXRlLgkKCSovCglmdW5jdGlvbiByZW1vdmVIYXNoKHN0cmluZyBfSVBGU0hhc2gpIHB1YmxpYyBvbmx5VmFsaWRNZW1iZXJzIHsKCQlIYXNoUmVtb3ZlZChtc2cuc2VuZGVyLF9JUEZTSGFzaCk7Cgl9CgoKCS8qKiAKCSogQWRkIGEgY29udHJhY3QgdG8gd2F0Y2ggbGlzdC4gRWFjaCBub2RlIHdpbGwgdGhlbiAKCSogd2F0Y2ggaXQgZm9yIGBIYXNoQWRkZWQobXNnLnNlbmRlcixfSVBGU0hhc2gsX3R0bCk7YCAKCSogZXZlbnRzIGFuZCBpdCB3aWxsIGNhY2hlIHRoZXNlIGV2ZW50cwoJKi8KCglmdW5jdGlvbiBhZGRDb250cmFjdChhZGRyZXNzIF90b1dhdGNoLCB1aW50IF90dGwpIHB1YmxpYyBvbmx5VmFsaWRNZW1iZXJzIHsKCQlDb250cmFjdEFkZGVkKF90b1dhdGNoLCBfdHRsKTsKCX0KCgkvKioKCSogQGRldiBSZW1vdmUgY29udHJhY3QgZnJvbSB3YXRjaCBsaXN0CgkqLwoJZnVuY3Rpb24gcmVtb3ZlQ29udHJhY3QoYWRkcmVzcyBfY29udHJhY3RBZGRyZXNzKSBwdWJsaWMgb25seVZhbGlkTWVtYmVycyB7CgkJQ29udHJhY3RSZW1vdmVkKF9jb250cmFjdEFkZHJlc3MpOwoJfQoKCS8qKgoJKkBkZXYgcmVtb3ZlcyBhIG1lbWJlciB3aG8gZXhjZWVkcyB0aGUgY2FwCgkqLwoJZnVuY3Rpb24gYmFuTWVtYmVyIChhZGRyZXNzIF9NZW1iZXIsIHN0cmluZyBfZXZpZGVuY2UpIHB1YmxpYyBvbmx5VmFsaWRNZW1iZXJzIHsKCQlyZXF1aXJlKGlzTWVtYmVyKF9NZW1iZXIpKTsKCQlyZXF1aXJlKCFjb21wbGFpbmVkW21zZy5zZW5kZXJdW19NZW1iZXJdKTsKCQljb21wbGFpbmVkW21zZy5zZW5kZXJdW19NZW1iZXJdID0gdHJ1ZTsKCQljb21wbGFpbnRbX01lbWJlcl0gKz0gMTsJCgkJaWYgKGNvbXBsYWludFtfTWVtYmVyXSA+PSBiYW5UaHJlc2hvbGQpIHsgCgkJCXJlbW92ZU1lbWJlcihfTWVtYmVyKTsKCQkJaWYgKCFpc01lbWJlcihfTWVtYmVyKSkgewoJCQkJQmFubmVkKF9ldmlkZW5jZSk7CgkJCX0gCgkJfSBlbHNlIHsKCQkJQmFuQXR0ZW1wdChtc2cuc2VuZGVyLCBfTWVtYmVyLCBjb21wbGFpbnRbX01lbWJlcl0pOwoJCX0KCX0KCS8qKgoJKiBAZGV2IHVwZGF0ZSBiYW4gdGhyZXNob2xkCgkqLwoJZnVuY3Rpb24gdXBkYXRlQmFuVGhyZXNob2xkICh1aW50IF9iYW5UaHJlc2hvbGQpIHB1YmxpYyBvbmx5bWFueW1lbWJlcnMoa2VjY2FrMjU2KF9iYW5UaHJlc2hvbGQpKSB7CgkJYmFuVGhyZXNob2xkID0gX2JhblRocmVzaG9sZDsKCX0KCgkvKioKCSogQGRldiBzZXQgdG90YWwgYWxsb3dlZCB1cGxvYWQKCSoKCSoqLwoJZnVuY3Rpb24gc2V0VG90YWxQZXJzaXN0TGltaXQgKHVpbnQgX2xpbWl0KSBwdWJsaWMgb25seW1hbnltZW1iZXJzKGtlY2NhazI1NihfbGltaXQpKSB7CgkJc2l6ZUxpbWl0ID0gX2xpbWl0OwoJCVBlcnNpc3RMaW1pdENoYW5nZWQoX2xpbWl0KTsKCX0KfQ=='.
	

]
