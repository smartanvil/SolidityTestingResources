Class {
	#name : #SRTcb866b3e8bf16c792ec451a7e7090a78f3a09dad,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcb866b3e8bf16c792ec451a7e7090a78f3a09dad >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuOTsKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogQVhORVQgU21hcnQgQ29udHJhY3QgKiAKICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKY29udHJhY3QgU2FmZU1hdGggewogIGZ1bmN0aW9uIHNhZmVNdWwodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICsgYjsKICAgIGFzc2VydChjPj1hICYmIGM+PWIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSB0aHJvdzsKICB9Cn0KCmNvbnRyYWN0IFRva2VuIHsKICAvLy8gQHJldHVybiB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkge30KCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHt9CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAvLy8gQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KCiAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7fQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgLy9pZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cn0KCmNvbnRyYWN0IFJlc2VydmVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CiAgYWRkcmVzcyBwdWJsaWMgbWludGVyOwogIGZ1bmN0aW9uIFJlc2VydmVUb2tlbigpIHsKICAgIG1pbnRlciA9IG1zZy5zZW5kZXI7CiAgfQogIGZ1bmN0aW9uIGNyZWF0ZShhZGRyZXNzIGFjY291bnQsIHVpbnQgYW1vdW50KSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBtaW50ZXIpIHRocm93OwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlQWRkKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG1pbnRlcikgdGhyb3c7CiAgICBpZiAoYmFsYW5jZXNbYWNjb3VudF0gPCBhbW91bnQpIHRocm93OwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlU3ViKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KfQoKY29udHJhY3QgQWNjb3VudExldmVscyB7CiAgLy9naXZlbiBhIHVzZXIsIHJldHVybnMgYW4gYWNjb3VudCBsZXZlbAogIC8vMCA9IHJlZ3VsYXIgdXNlciAocGF5cyB0YWtlIGZlZSBhbmQgbWFrZSBmZWUpCiAgLy8xID0gbWFya2V0IG1ha2VyIHNpbHZlciAocGF5cyB0YWtlIGZlZSwgbm8gbWFrZSBmZWUsIGdldHMgcmViYXRlKQogIC8vMiA9IG1hcmtldCBtYWtlciBnb2xkIChwYXlzIHRha2UgZmVlLCBubyBtYWtlIGZlZSwgZ2V0cyBlbnRpcmUgY291bnRlcnBhcnR5J3MgdGFrZSBmZWUgYXMgcmViYXRlKQogIGZ1bmN0aW9uIGFjY291bnRMZXZlbChhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnModWludCkge30KfQoKY29udHJhY3QgQWNjb3VudExldmVsc1Rlc3QgaXMgQWNjb3VudExldmVscyB7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgYWNjb3VudExldmVsczsKCiAgZnVuY3Rpb24gc2V0QWNjb3VudExldmVsKGFkZHJlc3MgdXNlciwgdWludCBsZXZlbCkgewogICAgYWNjb3VudExldmVsc1t1c2VyXSA9IGxldmVsOwogIH0KCiAgZnVuY3Rpb24gYWNjb3VudExldmVsKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICByZXR1cm4gYWNjb3VudExldmVsc1t1c2VyXTsKICB9Cn0KCmNvbnRyYWN0IEFYTkVUIGlzIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsgLy90aGUgYWRtaW4gYWRkcmVzcwogIGFkZHJlc3MgcHVibGljIGZlZUFjY291bnQ7IC8vdGhlIGFjY291bnQgdGhhdCB3aWxsIHJlY2VpdmUgZmVlcwogIGFkZHJlc3MgcHVibGljIGFjY291bnRMZXZlbHNBZGRyOyAvL3RoZSBhZGRyZXNzIG9mIHRoZSBBY2NvdW50TGV2ZWxzIGNvbnRyYWN0CiAgdWludCBwdWJsaWMgZmVlTWFrZTsgLy9wZXJjZW50YWdlIHRpbWVzICgxIGV0aGVyKQogIHVpbnQgcHVibGljIGZlZVRha2U7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICB1aW50IHB1YmxpYyBmZWVSZWJhdGU7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyB0b2tlbnM7IC8vbWFwcGluZyBvZiB0b2tlbiBhZGRyZXNzZXMgdG8gbWFwcGluZyBvZiBhY2NvdW50IGJhbGFuY2VzICh0b2tlbj0wIG1lYW5zIEV0aGVyKQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYnl0ZXMzMiA9PiBib29sKSkgcHVibGljIG9yZGVyczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gYm9vbGVhbnMgKHRydWUgPSBzdWJtaXR0ZWQgYnkgdXNlciwgZXF1aXZhbGVudCB0byBvZmZjaGFpbiBzaWduYXR1cmUpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChieXRlczMyID0+IHVpbnQpKSBwdWJsaWMgb3JkZXJGaWxsczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gdWludHMgKGFtb3VudCBvZiBvcmRlciB0aGF0IGhhcyBiZWVuIGZpbGxlZCkKCiAgZXZlbnQgT3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyKTsKICBldmVudCBDYW5jZWwoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcyk7CiAgZXZlbnQgVHJhZGUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIGFkZHJlc3MgZ2V0LCBhZGRyZXNzIGdpdmUpOwogIGV2ZW50IERlcG9zaXQoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50LCB1aW50IGJhbGFuY2UpOwoKICBmdW5jdGlvbiBBWE5FVCgpIHsKICAgIGFkbWluID0gbXNnLnNlbmRlcjsKICAgIGZlZUFjY291bnQgPSBtc2cuc2VuZGVyOwogICAgYWNjb3VudExldmVsc0FkZHIgPSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgICBmZWVNYWtlID0gMjAwMDAwMDAwMDAwMDAwMDsKICAgIGZlZVRha2UgPSAxMDAwMDAwMDAwMDAwMDAwOwogICAgZmVlUmViYXRlID0gMDsKICB9CgogIGZ1bmN0aW9uKCkgewogICAgdGhyb3c7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VBZG1pbihhZGRyZXNzIGFkbWluXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgYWRtaW4gPSBhZG1pbl87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VBY2NvdW50TGV2ZWxzQWRkcihhZGRyZXNzIGFjY291bnRMZXZlbHNBZGRyXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgYWNjb3VudExldmVsc0FkZHIgPSBhY2NvdW50TGV2ZWxzQWRkcl87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VGZWVBY2NvdW50KGFkZHJlc3MgZmVlQWNjb3VudF8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB0aHJvdzsKICAgIGZlZUFjY291bnQgPSBmZWVBY2NvdW50XzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUZlZU1ha2UodWludCBmZWVNYWtlXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgaWYgKGZlZU1ha2VfID4gZmVlTWFrZSkgdGhyb3c7CiAgICBmZWVNYWtlID0gZmVlTWFrZV87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VGZWVUYWtlKHVpbnQgZmVlVGFrZV8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB0aHJvdzsKICAgIGlmIChmZWVUYWtlXyA+IGZlZVRha2UgfHwgZmVlVGFrZV8gPCBmZWVSZWJhdGUpIHRocm93OwogICAgZmVlVGFrZSA9IGZlZVRha2VfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlUmViYXRlKHVpbnQgZmVlUmViYXRlXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgaWYgKGZlZVJlYmF0ZV8gPCBmZWVSZWJhdGUgfHwgZmVlUmViYXRlXyA+IGZlZVRha2UpIHRocm93OwogICAgZmVlUmViYXRlID0gZmVlUmViYXRlXzsKICB9CgogIGZ1bmN0aW9uIGRlcG9zaXQoKSBwYXlhYmxlIHsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBtc2cudmFsdWUpOwogICAgRGVwb3NpdCgwLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgewogICAgaWYgKHRva2Vuc1swXVttc2cuc2VuZGVyXSA8IGFtb3VudCkgdGhyb3c7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIGlmICghbXNnLnNlbmRlci5jYWxsLnZhbHVlKGFtb3VudCkoKSkgdGhyb3c7CiAgICBXaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIC8vcmVtZW1iZXIgdG8gY2FsbCBUb2tlbihhZGRyZXNzKS5hcHByb3ZlKHRoaXMsIGFtb3VudCkgb3IgdGhpcyBjb250cmFjdCB3aWxsIG5vdCBiZSBhYmxlIHRvIGRvIHRoZSB0cmFuc2ZlciBvbiB5b3VyIGJlaGFsZi4KICAgIGlmICh0b2tlbj09MCkgdGhyb3c7CiAgICBpZiAoIVRva2VuKHRva2VuKS50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgYW1vdW50KSkgdGhyb3c7CiAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgRGVwb3NpdCh0b2tlbiwgbXNnLnNlbmRlciwgYW1vdW50LCB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIHdpdGhkcmF3VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIGlmICh0b2tlbj09MCkgdGhyb3c7CiAgICBpZiAodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA8IGFtb3VudCkgdGhyb3c7CiAgICB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgaWYgKCFUb2tlbih0b2tlbikudHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50KSkgdGhyb3c7CiAgICBXaXRoZHJhdyh0b2tlbiwgbXNnLnNlbmRlciwgYW1vdW50LCB0b2tlbnNbdG9rZW5dW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b2tlbnNbdG9rZW5dW3VzZXJdOwogIH0KCiAgZnVuY3Rpb24gb3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgb3JkZXJzW21zZy5zZW5kZXJdW2hhc2hdID0gdHJ1ZTsKICAgIE9yZGVyKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gdHJhZGUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgdWludCBhbW91bnQpIHsKICAgIC8vYW1vdW50IGlzIGluIGFtb3VudEdldCB0ZXJtcwogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgaWYgKCEoCiAgICAgIChvcmRlcnNbdXNlcl1baGFzaF0gfHwgZWNyZWNvdmVyKHNoYTMoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgaGFzaCksdixyLHMpID09IHVzZXIpICYmCiAgICAgIGJsb2NrLm51bWJlciA8PSBleHBpcmVzICYmCiAgICAgIHNhZmVBZGQob3JkZXJGaWxsc1t1c2VyXVtoYXNoXSwgYW1vdW50KSA8PSBhbW91bnRHZXQKICAgICkpIHRocm93OwogICAgdHJhZGVCYWxhbmNlcyh0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIHVzZXIsIGFtb3VudCk7CiAgICBvcmRlckZpbGxzW3VzZXJdW2hhc2hdID0gc2FmZUFkZChvcmRlckZpbGxzW3VzZXJdW2hhc2hdLCBhbW91bnQpOwogICAgVHJhZGUodG9rZW5HZXQsIGFtb3VudCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlICogYW1vdW50IC8gYW1vdW50R2V0LCB1c2VyLCBtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHRyYWRlQmFsYW5jZXMoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQpIHByaXZhdGUgewogICAgdWludCBmZWVNYWtlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVNYWtlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgZmVlVGFrZVhmZXIgPSBzYWZlTXVsKGFtb3VudCwgZmVlVGFrZSkgLyAoMSBldGhlcik7CiAgICB1aW50IGZlZVJlYmF0ZVhmZXIgPSAwOwogICAgaWYgKGFjY291bnRMZXZlbHNBZGRyICE9IDB4MCkgewogICAgICB1aW50IGFjY291bnRMZXZlbCA9IEFjY291bnRMZXZlbHMoYWNjb3VudExldmVsc0FkZHIpLmFjY291bnRMZXZlbCh1c2VyKTsKICAgICAgaWYgKGFjY291bnRMZXZlbD09MSkgZmVlUmViYXRlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVSZWJhdGUpIC8gKDEgZXRoZXIpOwogICAgICBpZiAoYWNjb3VudExldmVsPT0yKSBmZWVSZWJhdGVYZmVyID0gZmVlVGFrZVhmZXI7CiAgICB9CiAgICB0b2tlbnNbdG9rZW5HZXRdW21zZy5zZW5kZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5HZXRdW21zZy5zZW5kZXJdLCBzYWZlQWRkKGFtb3VudCwgZmVlVGFrZVhmZXIpKTsKICAgIHRva2Vuc1t0b2tlbkdldF1bdXNlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbkdldF1bdXNlcl0sIHNhZmVTdWIoc2FmZUFkZChhbW91bnQsIGZlZVJlYmF0ZVhmZXIpLCBmZWVNYWtlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2V0XVtmZWVBY2NvdW50XSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuR2V0XVtmZWVBY2NvdW50XSwgc2FmZVN1YihzYWZlQWRkKGZlZU1ha2VYZmVyLCBmZWVUYWtlWGZlciksIGZlZVJlYmF0ZVhmZXIpKTsKICAgIHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdID0gc2FmZVN1Yih0b2tlbnNbdG9rZW5HaXZlXVt1c2VyXSwgc2FmZU11bChhbW91bnRHaXZlLCBhbW91bnQpIC8gYW1vdW50R2V0KTsKICAgIHRva2Vuc1t0b2tlbkdpdmVdW21zZy5zZW5kZXJdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5HaXZlXVttc2cuc2VuZGVyXSwgc2FmZU11bChhbW91bnRHaXZlLCBhbW91bnQpIC8gYW1vdW50R2V0KTsKICB9CgogIGZ1bmN0aW9uIHRlc3RUcmFkZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50IGFtb3VudCwgYWRkcmVzcyBzZW5kZXIpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgaWYgKCEoCiAgICAgIHRva2Vuc1t0b2tlbkdldF1bc2VuZGVyXSA+PSBhbW91bnQgJiYKICAgICAgYXZhaWxhYmxlVm9sdW1lKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIHVzZXIsIHYsIHIsIHMpID49IGFtb3VudAogICAgKSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhdmFpbGFibGVWb2x1bWUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoISgKICAgICAgKG9yZGVyc1t1c2VyXVtoYXNoXSB8fCBlY3JlY292ZXIoc2hhMygiXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxuMzIiLCBoYXNoKSx2LHIscykgPT0gdXNlcikgJiYKICAgICAgYmxvY2subnVtYmVyIDw9IGV4cGlyZXMKICAgICkpIHJldHVybiAwOwogICAgdWludCBhdmFpbGFibGUxID0gc2FmZVN1YihhbW91bnRHZXQsIG9yZGVyRmlsbHNbdXNlcl1baGFzaF0pOwogICAgdWludCBhdmFpbGFibGUyID0gc2FmZU11bCh0b2tlbnNbdG9rZW5HaXZlXVt1c2VyXSwgYW1vdW50R2V0KSAvIGFtb3VudEdpdmU7CiAgICBpZiAoYXZhaWxhYmxlMTxhdmFpbGFibGUyKSByZXR1cm4gYXZhaWxhYmxlMTsKICAgIHJldHVybiBhdmFpbGFibGUyOwogIH0KCiAgZnVuY3Rpb24gYW1vdW50RmlsbGVkKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgcmV0dXJuIG9yZGVyRmlsbHNbdXNlcl1baGFzaF07CiAgfQoKICBmdW5jdGlvbiBjYW5jZWxPcmRlcihhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgewogICAgYnl0ZXMzMiBoYXNoID0gc2hhMjU2KHRoaXMsIHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UpOwogICAgaWYgKCEob3JkZXJzW21zZy5zZW5kZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSBtc2cuc2VuZGVyKSkgdGhyb3c7CiAgICBvcmRlckZpbGxzW21zZy5zZW5kZXJdW2hhc2hdID0gYW1vdW50R2V0OwogICAgQ2FuY2VsKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgZXhwaXJlcywgbm9uY2UsIG1zZy5zZW5kZXIsIHYsIHIsIHMpOwogIH0KfQ=='.
	

]
