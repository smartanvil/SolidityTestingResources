Class {
	#name : #SRT05196e85fcfe0ed4b7978a83966e6748ba8e60e6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT05196e85fcfe0ed4b7978a83966e6748ba8e60e6 >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGM+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQpjb250cmFjdCBFUkM3MjEgewogICAgZnVuY3Rpb24gYXBwcm92ZSggYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBhZGRyKTsKICAgIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHN1cHBseSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB0b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIGFwcHJvdmVkLCB1aW50MjU2IHRva2VuSWQpOwp9Cgpjb250cmFjdCBBdGhsZXRlVG9rZW4gaXMgRVJDNzIxIHsKICAgIC8qKioqICBDT05TVEFOVFMgKioqKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgTkFNRSA9ICJDcnlwdG9GYW50YXN5IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgU1lNQk9MID0gIkF0aGxldGVUb2tlbiI7CgogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IGluaXRQcmljZSA9IDAuMDAxIGV0aGVyOwogICAgdWludDI1NiBwcml2YXRlIGNvbnN0YW50IFBST01PX0NSRUFUSU9OX0xJTUlUID0gNTAwMDA7CgogICAgLyoqKiBFVkVOVFMgICovCiAgICBldmVudCBCaXJ0aCh1aW50MjU2IHRva2VuSWQsIGFkZHJlc3Mgb3duZXIpOwogICAgZXZlbnQgVG9rZW5Tb2xkKHVpbnQyNTYgdG9rZW5JZCwgdWludDI1NiBzZWxsUHJpY2UsIGFkZHJlc3Mgc2VsbE93bmVyLCBhZGRyZXNzIGJ1eU93bmVyLCBzdHJpbmcgYXRobGV0ZUlkKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgICAvKioqIFNUT1JBR0UgKi8KICAgIC8vIEEgbWFwcGluZyBmcm9tIGF0aGxldGUgSURzIHRvIHRoZSBhZGRyZXNzIHRoYXQgb3ducyB0aGVtLiBBbGwgYXRobGV0ZXMgaGF2ZSBzb21lIHZhbGlkIG93bmVyIGFkZHJlc3MuCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBhdGhsZXRlSW5kZXhUb093bmVyOwoKICAgIC8vIEEgbWFwcGluZyBmcm9tIG93bmVyIGFkZHJlc3MgdG8gY291bnQgb2YgdG9rZW5zIHRoYXQgYWRkcmVzcyBvd25zLgogICAgLy8gVXNlZCBpbnRlcm5hbGx5IGluc2lkZSBiYWxhbmNlT2YoKSB0byByZXNvbHZlIG93bmVyc2hpcCBjb3VudC4KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBvd25lcnNoaXBUb2tlbkNvdW50OwoKICAgIC8qKgogICAgICAgICoqKiBBIG1hcHBpbmcgZnJvbSBhdGhsZXRlSURzIHRvIGFuIGFkZHJlc3MgdGhhdCBoYXMgYmVlbiBhcHByb3ZlZCB0byBjYWxsIHRyYW5zZmVyRnJvbSgpLiAKICAgICAgICAqKiogRWFjaCBhdGhsZXRlIGNhbiBvbmx5IGhhdmUgb25lIGFwcHJvdmVkIGFkZHJlc3MgZm9yIHRyYW5zZmVyIGF0IGFueSB0aW1lLgogICAgICAgICoqKiBBIFpFUk8gdmFsdWUgbWVhbnMgbm8gYXBwcm92YWwgaXMgb3V0c3RhbmRpbmcuCiAgICAgKi8KICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHVibGljIGF0aGxldGVJbmRleFRvQXBwcm92ZWQ7CgogICAgLy8gQSBtYXBwaW5nIGZyb20gYXRobGV0ZUlEcyB0byB0aGUgcHJpY2Ugb2YgdGhlIHRva2VuLgogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGF0aGxldGVJbmRleFRvUHJpY2U7CgogICAgLy8gQSBtYXBwaW5nIGZyb20gYXRobGV0ZUlEcyB0byB0aGUgYWN0dWFsIGZlZSBvZiB0aGUgdG9rZW4uCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgYXRobGV0ZUluZGV4VG9BY3R1YWxGZWU7CgogICAgLy8gQSBtYXBwaW5nIGZyb20gYXRobGV0ZUlEcyB0byB0aGUgc2l0ZSBmZWUgb2YgdGhlIHRva2VuLgogICAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIGF0aGxldGVJbmRleFRvU2l0ZUZlZTsKCiAgICAvLyBBIG1hcHBpbmcgZnJvbSBhdGhsZXRlSURzIHRvIHRoZSBhY3R1YWwgd2FsbGV0IGFkZHJlc3Mgb2YgdGhlIHRva2VuCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgYXRobGV0ZUluZGV4VG9BY3R1YWxXYWxsZXRJZDsKCiAgICAvLyBBIG1hcHBpbmcgb2YgYXRobGV0ZUlEcwogICAgbWFwcGluZyAodWludDI1NiA9PiBzdHJpbmcpIHByaXZhdGUgYXRobGV0ZUluZGV4VG9BdGhsZXRlSUQ7CgoKICAgIC8vIFRoZSBhZGRyZXNzZXMgb2YgdGhlIGFjY291bnRzIChvciBjb250cmFjdHMpIHRoYXQgY2FuIGV4ZWN1dGUgYWN0aW9ucyB3aXRoaW4gZWFjaCByb2xlcy4KICAgIGFkZHJlc3MgcHVibGljIGNlb0FkZHJlc3M7CiAgICBhZGRyZXNzIHB1YmxpYyBjb29BZGRyZXNzOwoKICAgIHVpbnQyNTYgcHVibGljIHByb21vQ3JlYXRlZENvdW50OwoKICAgIC8qKiBBVEhMRVRFIERBVEFUWVBFICovCiAgICBzdHJ1Y3QgQXRobGV0ZSB7CiAgICAgICAgc3RyaW5nICBhdGhsZXRlSWQ7CiAgICAgICAgYWRkcmVzcyBhY3R1YWxBZGRyZXNzOwogICAgICAgIHVpbnQyNTYgYWN0dWFsRmVlOwogICAgICAgIHVpbnQyNTYgc2l0ZUZlZTsKICAgICAgICB1aW50MjU2IHNlbGxQcmljZTsKICAgIH0KICAgIEF0aGxldGVbXSBwcml2YXRlIGF0aGxldGVzOwoKICAgIG1hcHBpbmcgKHVpbnQyNTYgPT4gQXRobGV0ZSkgcHJpdmF0ZSBhdGhsZXRlSW5kZXhUb0F0aGxldGU7CgogICAgbW9kaWZpZXIgb25seUNFTygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY2VvQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlDT08oKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvb0FkZHJlc3MpOwogICAgICAgIF87CiAgICB9CiAgICBtb2RpZmllciBvbmx5Q0xldmVsKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjZW9BZGRyZXNzIHx8IG1zZy5zZW5kZXIgPT0gY29vQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKiogQ09OU1RSVUNUT1IgKi8KICAgIGZ1bmN0aW9uIEF0aGxldGVUb2tlbigpIHB1YmxpYyB7CiAgICAgICAgY2VvQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICAgICAgY29vQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLyoqKiBQVUJMSUMgRlVOQ1RJT05TICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCApIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgICAgIGF0aGxldGVJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIG93bmVyc2hpcFRva2VuQ291bnRbX293bmVyXTsKICAgIH0KCgogICAgZnVuY3Rpb24gY3JlYXRlUHJvbW9BdGhsZXRlKGFkZHJlc3MgX293bmVyLCBzdHJpbmcgX2F0aGxldGVJZCwgYWRkcmVzcyBfYWN0dWFsQWRkcmVzcywgdWludDI1NiBfYWN0dWFsRmVlLCB1aW50MjU2IF9zaXRlRmVlLCB1aW50IF9zZWxsUHJpY2UpIHB1YmxpYyBvbmx5Q09PIHsKICAgICAgICByZXF1aXJlKHByb21vQ3JlYXRlZENvdW50IDwgUFJPTU9fQ1JFQVRJT05fTElNSVQpOwoKICAgICAgICBhZGRyZXNzIGF0aGxldGVPd25lciA9IF9vd25lcjsKICAgICAgICBpZiAoIGF0aGxldGVPd25lciA9PSBhZGRyZXNzKDApICkgewogICAgICAgICAgICBhdGhsZXRlT3duZXIgPSBjb29BZGRyZXNzOwogICAgICAgIH0KICAgICAgICBpZiAoIF9zZWxsUHJpY2UgPD0gMCApIHsKICAgICAgICAgICAgX3NlbGxQcmljZSA9IGluaXRQcmljZTsKICAgICAgICB9CiAgICAgICAgcHJvbW9DcmVhdGVkQ291bnQrKzsKCiAgICAgICAgX2NyZWF0ZU9mQXRobGV0ZShhdGhsZXRlT3duZXIsIF9hdGhsZXRlSWQsIF9hY3R1YWxBZGRyZXNzLCBfYWN0dWFsRmVlLCBfc2l0ZUZlZSwgX3NlbGxQcmljZSk7CiAgICB9CgoKICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyYWN0T2ZBdGhsZXRlKHN0cmluZyBfYXRobGV0ZUlkLCBhZGRyZXNzIF9hY3R1YWxBZGRyZXNzLCB1aW50MjU2IF9hY3R1YWxGZWUsIHVpbnQyNTYgX3NpdGVGZWUsIHVpbnQyNTYgX3NlbGxQcmljZSkgcHVibGljIG9ubHlDT097CiAgICAgICAgX2NyZWF0ZU9mQXRobGV0ZShhZGRyZXNzKHRoaXMpLCBfYXRobGV0ZUlkLCBfYWN0dWFsQWRkcmVzcywgX2FjdHVhbEZlZSwgX3NpdGVGZWUsIF9zZWxsUHJpY2UpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEF0aGxldGUodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoIHN0cmluZyBhdGhsZXRlSWQsIGFkZHJlc3MgYWN0dWFsQWRkcmVzcywgdWludDI1NiBhY3R1YWxGZWUsIHVpbnQyNTYgc2l0ZUZlZSwgdWludDI1NiBzZWxsUHJpY2UsIGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBBdGhsZXRlIHN0b3JhZ2UgYXRobGV0ZSA9IGF0aGxldGVzW190b2tlbklkXTsKICAgICAgICBhdGhsZXRlSWQgICAgID0gYXRobGV0ZS5hdGhsZXRlSWQ7CiAgICAgICAgYWN0dWFsQWRkcmVzcyA9IGF0aGxldGUuYWN0dWFsQWRkcmVzczsKICAgICAgICBhY3R1YWxGZWUgICAgID0gYXRobGV0ZS5hY3R1YWxGZWU7CiAgICAgICAgc2l0ZUZlZSAgICAgICA9IGF0aGxldGUuc2l0ZUZlZTsKICAgICAgICBzZWxsUHJpY2UgICAgID0gcHJpY2VPZihfdG9rZW5JZCk7CiAgICAgICAgb3duZXIgICAgICAgICA9IG93bmVyT2YoX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGltcGxlbWVudHNFUkM3MjEoKSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIE5BTUU7CiAgICB9CiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBvd25lciA9IGF0aGxldGVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXlvdXQoYWRkcmVzcyBfdG8pIHB1YmxpYyBvbmx5Q0xldmVsIHsKICAgICAgICBfcGF5b3V0KF90byk7CiAgICB9CiAgICBmdW5jdGlvbiBwdXJjaGFzZSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYWRkcmVzcyBzZWxsT3duZXIgPSBhdGhsZXRlSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgICAgICBhZGRyZXNzIGJ1eU93bmVyID0gbXNnLnNlbmRlcjsKCiAgICAgICAgdWludDI1NiBzZWxsUHJpY2UgPSBwcmljZU9mKF90b2tlbklkKTsKCiAgICAgICAgLy9tYWtlIHN1cmUgdG9rZW4gb3duZXIgaXMgbm90IHNlbmRpbmcgdG8gc2VsZgogICAgICAgIHJlcXVpcmUoc2VsbE93bmVyICE9IGJ1eU93bmVyKTsKICAgICAgICAvL3NhZmVseSBjaGVjayB0byBwcmV2ZW50IGFnYWluc3QgYW4gdW5leHBlY3RlZCAweDAgZGVmYXVsdAogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKGJ1eU93bmVyKSk7CgogICAgICAgIC8vbWFrZSBzdXJlIHNlbnQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgc2VsbFByaWNlCiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gc2VsbFByaWNlKTsKCiAgICAgICAgdWludDI1NiBhY3R1YWxGZWUgPSB1aW50MjU2KFNhZmVNYXRoLmRpdihTYWZlTWF0aC5tdWwoc2VsbFByaWNlLCBhdGhsZXRlSW5kZXhUb0FjdHVhbEZlZVtfdG9rZW5JZF0pLCAxMDApKTsgLy8gY2FsY3VsYXRlIGFjdHVhbCBmZWUKICAgICAgICB1aW50MjU2IHNpdGVGZWUgICA9IHVpbnQyNTYoU2FmZU1hdGguZGl2KFNhZmVNYXRoLm11bChzZWxsUHJpY2UsIGF0aGxldGVJbmRleFRvU2l0ZUZlZVtfdG9rZW5JZF0pLCAxMDApKTsgICAvLyBjYWxjdWxhdGUgc2l0ZSBmZWUKICAgICAgICB1aW50MjU2IHBheW1lbnQgICA9IHVpbnQyNTYoU2FmZU1hdGguc3ViKHNlbGxQcmljZSwgU2FmZU1hdGguYWRkKGFjdHVhbEZlZSwgc2l0ZUZlZSkpKTsgICAvL3BheW1lbnQgZm9yIHNlbGxlcgoKICAgICAgICBfdHJhbnNmZXIoc2VsbE93bmVyLCBidXlPd25lciwgX3Rva2VuSWQpOwoKICAgICAgICAvL1BheSBwcmV2aW91cyB0b2tlbk93bmVyIGlmIG93bmVyIGlzIG5vdCBjb250cmFjdAogICAgICAgIGlmICggc2VsbE93bmVyICE9IGFkZHJlc3ModGhpcykgKSB7CiAgICAgICAgICAgIHNlbGxPd25lci50cmFuc2ZlcihwYXltZW50KTsgLy8gKDEtKGFjdHVhbF9mZWUrc2l0ZV9mZWUpKSpzZWxsUHJpY2UKICAgICAgICB9CgogICAgICAgIFRva2VuU29sZChfdG9rZW5JZCwgc2VsbFByaWNlLCBzZWxsT3duZXIsIGJ1eU93bmVyLCBhdGhsZXRlc1tfdG9rZW5JZF0uYXRobGV0ZUlkKTsKICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHNpdGVGZWUpOwoKICAgICAgICBhZGRyZXNzIGFjdHVhbFdhbGxldCA9IGF0aGxldGVJbmRleFRvQWN0dWFsV2FsbGV0SWRbX3Rva2VuSWRdOwogICAgICAgIGFjdHVhbFdhbGxldC50cmFuc2ZlcihhY3R1YWxGZWUpOwoKICAgICAgICBjZW9BZGRyZXNzLnRyYW5zZmVyKHNpdGVGZWUpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBwcmljZU9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcHJpY2UpIHsKICAgICAgICByZXR1cm4gYXRobGV0ZUluZGV4VG9QcmljZVtfdG9rZW5JZF07CiAgICB9CiAgICBmdW5jdGlvbiBzZXRDRU8oYWRkcmVzcyBfbmV3Q0VPKSBwdWJsaWMgb25seUNFTyB7CiAgICAgICAgcmVxdWlyZShfbmV3Q0VPICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGNlb0FkZHJlc3MgPSBfbmV3Q0VPOwogICAgfQogICAgZnVuY3Rpb24gc2V0Q09PKGFkZHJlc3MgX25ld0NPTykgcHVibGljIG9ubHlDRU8gewogICAgICAgIHJlcXVpcmUoX25ld0NPTyAhPSBhZGRyZXNzKDApKTsKICAgICAgICBjb29BZGRyZXNzID0gX25ld0NPTzsKICAgIH0KICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgICAgIHJldHVybiBTWU1CT0w7CiAgICB9CiAgICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICAgICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgYWRkcmVzcyBvbGRPd25lciA9IGF0aGxldGVJbmRleFRvT3duZXJbX3Rva2VuSWRdOwogICAgICAgIAogICAgICAgIHJlcXVpcmUoX2FkZHJlc3NOb3ROdWxsKG5ld093bmVyKSk7CiAgICAgICAgcmVxdWlyZShfYXBwcm92ZWQobmV3T3duZXIsIF90b2tlbklkKSk7CiAgICAgICAgX3RyYW5zZmVyKG9sZE93bmVyLCBuZXdPd25lciwgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuT2ZPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2W10gb3duZXJUb2tlbnMpIHsKICAgICAgICB1aW50MjU2IHRva2VuQ291bnQgPSBiYWxhbmNlT2YoX293bmVyKTsKICAgICAgICBpZiAoIHRva2VuQ291bnQgPT0gMCApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB1aW50MjU2W10oMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10odG9rZW5Db3VudCk7CiAgICAgICAgICAgIHVpbnQyNTYgdG90YWxBdGhsZXRlcyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwogICAgICAgICAgICB1aW50MjU2IGF0aGxldGVJZDsKCiAgICAgICAgICAgIGZvcihhdGhsZXRlSWQgPSAwOyBhdGhsZXRlSWQgPD0gdG90YWxBdGhsZXRlczsgYXRobGV0ZUlkKyspIHsKICAgICAgICAgICAgICAgIGlmIChhdGhsZXRlSW5kZXhUb093bmVyW2F0aGxldGVJZF0gPT0gX293bmVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGF0aGxldGVJZDsKICAgICAgICAgICAgICAgICAgICByZXN1bHRJbmRleCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiB0b3RhbCkgewogICAgICAgIHJldHVybiBhdGhsZXRlcy5sZW5ndGg7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkICkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzc05vdE51bGwoX3RvKSk7CgogICAgICAgIF90cmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oIGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkICkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9vd25zKF9mcm9tLCBfdG9rZW5JZCkpOwogICAgICAgIHJlcXVpcmUoX2FwcHJvdmVkKF90bywgX3Rva2VuSWQpKTsKICAgICAgICByZXF1aXJlKF9hZGRyZXNzTm90TnVsbChfdG8pKTsKCiAgICAgICAgX3RyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICAvKiogUFJJVkFURSBGVU5DVElPTlMgKi8KICAgIGZ1bmN0aW9uIF9hZGRyZXNzTm90TnVsbChhZGRyZXNzIF90bykgcHJpdmF0ZSBwdXJlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gX3RvICE9IGFkZHJlc3MoMCk7CiAgICB9CiAgICBmdW5jdGlvbiBfYXBwcm92ZWQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGF0aGxldGVJbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF90bzsKICAgIH0KCiAgICAvL1RPRE8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIF9jcmVhdGVPZkF0aGxldGUoYWRkcmVzcyBfYXRobGV0ZU93bmVyLCBzdHJpbmcgX2F0aGxldGVJZCwgYWRkcmVzcyBfYWN0dWFsQWRkcmVzcywgdWludDI1NiBfYWN0dWFsRmVlLCB1aW50MjU2IF9zaXRlRmVlLCB1aW50MjU2IF9zZWxsUHJpY2UpIHByaXZhdGUgewogICAgICAgIAogICAgICAgIEF0aGxldGUgbWVtb3J5IF9hdGhsZXRlID0gQXRobGV0ZSh7IGF0aGxldGVJZDogX2F0aGxldGVJZCwgYWN0dWFsQWRkcmVzczogX2FjdHVhbEFkZHJlc3MsIGFjdHVhbEZlZTogX2FjdHVhbEZlZSwgIHNpdGVGZWU6IF9zaXRlRmVlLCBzZWxsUHJpY2U6IF9zZWxsUHJpY2UgfSk7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBuZXdBdGhsZXRlSWQgPSBhdGhsZXRlcy5wdXNoKF9hdGhsZXRlKSAtIDE7CiAKICAgICAgICBpZiAoIF9zZWxsUHJpY2UgPD0gMCApIHsKICAgICAgICAgICAgX3NlbGxQcmljZSA9IGluaXRQcmljZTsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZShuZXdBdGhsZXRlSWQgPT0gdWludDI1Nih1aW50MzIobmV3QXRobGV0ZUlkKSkpOwogICAgICAgIEJpcnRoKG5ld0F0aGxldGVJZCwgX2F0aGxldGVPd25lcik7CiAgICAgICAgCiAgICAgICAgYXRobGV0ZUluZGV4VG9QcmljZVtuZXdBdGhsZXRlSWRdID0gX3NlbGxQcmljZTsKICAgICAgICBhdGhsZXRlSW5kZXhUb0FjdHVhbEZlZVtuZXdBdGhsZXRlSWRdID0gX2FjdHVhbEZlZTsKICAgICAgICBhdGhsZXRlSW5kZXhUb1NpdGVGZWVbbmV3QXRobGV0ZUlkXSA9IF9zaXRlRmVlOwogICAgICAgIGF0aGxldGVJbmRleFRvQWN0dWFsV2FsbGV0SWRbbmV3QXRobGV0ZUlkXSA9IF9hY3R1YWxBZGRyZXNzOwogICAgICAgIGF0aGxldGVJbmRleFRvQXRobGV0ZUlEW25ld0F0aGxldGVJZF0gPSBfYXRobGV0ZUlkOwogICAgICAgIGF0aGxldGVJbmRleFRvQXRobGV0ZVtuZXdBdGhsZXRlSWRdID0gX2F0aGxldGU7CgogICAgICAgIF90cmFuc2ZlcihhZGRyZXNzKDApLCBfYXRobGV0ZU93bmVyLCBuZXdBdGhsZXRlSWQpOwoKICAgIH0KCiAgICBmdW5jdGlvbiBfb3ducyhhZGRyZXNzIGNsYWltYW50LCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBjbGFpbWFudCA9PSBhdGhsZXRlSW5kZXhUb093bmVyW190b2tlbklkXTsKICAgIH0KICAgIGZ1bmN0aW9uIF9wYXlvdXQoYWRkcmVzcyBfdG8pIHByaXZhdGUgewogICAgICAgIGlmIChfdG8gPT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBjZW9BZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBfdG8udHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX3RvXSsrOwogICAgICAgIGF0aGxldGVJbmRleFRvT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgICAgIGlmIChfZnJvbSAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIG93bmVyc2hpcFRva2VuQ291bnRbX2Zyb21dLS07CiAgICAgICAgICAgIGRlbGV0ZSBhdGhsZXRlSW5kZXhUb0FwcHJvdmVkW190b2tlbklkXTsKICAgICAgICB9CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQoKfQ=='.
	

]
