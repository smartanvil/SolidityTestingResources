Class {
	#name : #SRT2f97dc94317760c7204e72a5bd058c10b409dc12,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT2f97dc94317760c7204e72a5bd058c10b409dc12 >> base64 [
	^ 'LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogVGhpcyBjb250cmFjdCBoYXMgYmVlbiBtZXJnZWQgd2l0aCBzb2xpZGlmeQogKiBodHRwczovL2dpdGh1Yi5jb20vdGllc25ldHdvcmsvc29saWRpZnkKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAKIHByYWdtYSBzb2xpZGl0eSBeMC40LjEwOwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9JVG9rZW5Qb29sLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9FUkMyMFN0YW5kYXJkVG9rZW4uc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lFUkMyMFRva2VuLnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKkBkZXYgRVJDMjAgY29tcGxpYW50IHRva2VuIGludGVyZmFjZS4gCmh0dHBzOi8vdGhlZXRoZXJldW0ud2lraS93L2luZGV4LnBocC9FUkMyMF9Ub2tlbl9TdGFuZGFyZCAKaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvYmxvYi9tYXN0ZXIvRUlQUy9laXAtMjAtdG9rZW4tc3RhbmRhcmQubWQgKi8KY29udHJhY3QgSUVSQzIwVG9rZW4gewoKICAgIC8vIHRoZXNlIGZ1bmN0aW9ucyBhcmVuJ3QgYWJzdHJhY3Qgc2luY2UgdGhlIGNvbXBpbGVyIGVtaXRzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGdldHRlciBmdW5jdGlvbnMgYXMgZXh0ZXJuYWwgICAgCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSkgeyBfbmFtZTsgfQogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7IF9zeW1ib2w7IH0KICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgeyBfZGVjaW1hbHM7IH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50IHRvdGFsKSB7dG90YWw7fQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHtfb3duZXI7IGJhbGFuY2U7fSAgICAKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHtfb3duZXI7IF9zcGVuZGVyOyByZW1haW5pbmc7fQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgCgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKTsKfQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4vSUVSQzIwVG9rZW4uc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vU2FmZU1hdGguc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqZGV2IFV0aWxpdHkgbWV0aG9kcyBmb3Igb3ZlcmZsb3ctcHJvb2YgYXJpdGhtZXRpYyBvcGVyYXRpb25zIAoqLwpjb250cmFjdCBTYWZlTWF0aCB7CgogICAgLyoqZGV2IFJldHVybnMgdGhlIHN1bSBvZiBhIGFuZCBiLiBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIGl0IGV4Y2VlZHMgdWludDI1NiBsaW1pdHMqLwogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgeyAgICAgICAgCiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CgogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKmRldiBSZXR1cm5zIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuIFRocm93cyBhbiBleGNlcHRpb24gaWYgYSBpcyBsZXNzIHRoYW4gYiovCiAgICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGEgPj0gYik7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIC8qKmRldiBSZXR1cm5zIHRoZSBwcm9kdWN0IG9mIGEgYW5kIGIuIFRocm93cyBhbiBleGNlcHRpb24gaWYgaXQgZXhjZWVkcyB1aW50MjU2IGxpbWl0cyovCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApIHx8ICh6IC8geCA9PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZURpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydCh5ICE9IDApOwogICAgICAgIHJldHVybiB4IC8geTsKICAgIH0KfS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vY29tbW9uL1NhZmVNYXRoLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKipAZGV2IFN0YW5kYXJkIEVSQzIwIGNvbXBsaWFudCB0b2tlbiBpbXBsZW1lbnRhdGlvbiAqLwpjb250cmFjdCBFUkMyMFN0YW5kYXJkVG9rZW4gaXMgSUVSQzIwVG9rZW4sIFNhZmVNYXRoIHsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwoKICAgIC8vdG9rZW5zIGFscmVhZHkgaXNzdWVkCiAgICB1aW50MjU2IHRva2Vuc0lzc3VlZDsKICAgIC8vYmFsYW5jZXMgZm9yIGVhY2ggYWNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIC8vb25lIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBmdW5jdGlvbiBFUkMyMFN0YW5kYXJkVG9rZW4oKSB7CiAgICAgCiAgICB9ICAgIAoKICAgIC8vCiAgICAvL0lFUkMyMFRva2VuIGltcGxlbWVudGF0aW9uCiAgICAvLyAKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG90YWwpIHsKICAgICAgICB0b3RhbCA9IHRva2Vuc0lzc3VlZDsKICAgIH0KIAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpIHsKICAgICAgICBiYWxhbmNlID0gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgLy8gc2FmZVN1YiBpbnNpZGUgZG9UcmFuc2ZlciB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBkb1RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgIAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgCiAgICAgICAgLy8gQ2hlY2sgZm9yIGFsbG93YW5jZSBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLCBfdmFsdWUpOyAgICAgICAgCiAgICAgICAgLy8gc2FmZVN1YiBpbnNpZGUgZG9UcmFuc2ZlciB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBkb1RyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7ICAgICAgICAKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZW1haW5pbmcgPSBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfSAgICAKCiAgICAvLwogICAgLy8gQWRkaXRpb25hbCBmdW5jdGlvbnMKICAgIC8vCiAgICAvKipAZGV2IEdldHMgcmVhbCB0b2tlbiBhbW91bnQgaW4gdGhlIHNtYWxsZXN0IHRva2VuIHVuaXRzICovCiAgICBmdW5jdGlvbiBnZXRSZWFsVG9rZW5BbW91bnQodWludDI1NiB0b2tlbnMpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gdG9rZW5zICogKHVpbnQyNTYoMTApICoqIGRlY2ltYWxzKTsKICAgIH0KCiAgICAvLwogICAgLy8gSW50ZXJuYWwgZnVuY3Rpb25zCiAgICAvLyAgICAKICAgIAogICAgZnVuY3Rpb24gZG9UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBzYWZlU3ViKGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfdmFsdWUpOwogICAgfQp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0VSQzIwU3RhbmRhcmRUb2tlbi5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqQGRldiBUb2tlbiBwb29sIHRoYXQgbWFuYWdlcyBpdHMgdG9rZW5zIGJ5IGRlc2lnbmF0aW5nIHRydXN0ZWVzICovCmNvbnRyYWN0IElUb2tlblBvb2wgeyAgICAKCiAgICAvKipAZGV2IFRva2VuIHRvIGJlIG1hbmFnZWQgKi8KICAgIEVSQzIwU3RhbmRhcmRUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgLyoqQGRldiBDaGFuZ2VzIHRydXN0ZWUgc3RhdGUgKi8KICAgIGZ1bmN0aW9uIHNldFRydXN0ZWUoYWRkcmVzcyB0cnVzdGVlLCBib29sIHN0YXRlKTsKCiAgICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlbid0IGFic3RyYWN0IHNpbmNlIHRoZSBjb21waWxlciBlbWl0cyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBnZXR0ZXIgZnVuY3Rpb25zIGFzIGV4dGVybmFsCiAgICAvKipAZGV2IFJldHVybnMgcmVtYWluaW5nIHRva2VuIGFtb3VudCAqLwogICAgZnVuY3Rpb24gZ2V0VG9rZW5BbW91bnQoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRva2Vucykge3Rva2Vuczt9Cn0vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL0lUb2tlblBvb2wuc29sIiA6IGVuZAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9SZXR1cm5Ub2tlbkFnZW50LnNvbCIgOiBzdGFydAogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vY29tbW9uL01hbmFnZWFibGUuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vT3duZWQuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOyAgICAgICAgCgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8vIGFsbG93cyBleGVjdXRpb24gYnkgdGhlIG93bmVyIG9ubHkKICAgIG1vZGlmaWVyIG93bmVyT25seSB7CiAgICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqQGRldiBhbGxvd3MgdHJhbnNmZXJyaW5nIHRoZSBjb250cmFjdCBvd25lcnNoaXAuICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gb3duZXIpOwogICAgICAgIG93bmVyID0gX25ld093bmVyOwogICAgfQp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi4vY29tbW9uL093bmVkLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovLy9BIHRva2VuIHRoYXQgaGF2ZSBhbiBvd25lciBhbmQgYSBsaXN0IG9mIG1hbmFnZXJzIHRoYXQgY2FuIHBlcmZvcm0gc29tZSBvcGVyYXRpb25zCi8vL093bmVyIGlzIGFsd2F5cyBhIG1hbmFnZXIgdG9vCmNvbnRyYWN0IE1hbmFnZWFibGUgaXMgT3duZWQgewoKICAgIGV2ZW50IE1hbmFnZXJTZXQoYWRkcmVzcyBtYW5hZ2VyLCBib29sIHN0YXRlKTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBtYW5hZ2VyczsKCiAgICBmdW5jdGlvbiBNYW5hZ2VhYmxlKCkgT3duZWQoKSB7CiAgICAgICAgbWFuYWdlcnNbb3duZXJdID0gdHJ1ZTsKICAgIH0KCiAgICAvKipAZGV2IEFsbG93cyBleGVjdXRpb24gYnkgbWFuYWdlcnMgb25seSAqLwogICAgbW9kaWZpZXIgbWFuYWdlck9ubHkgewogICAgICAgIGFzc2VydChtYW5hZ2Vyc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG93bmVyT25seSB7CiAgICAgICAgc3VwZXIudHJhbnNmZXJPd25lcnNoaXAoX25ld093bmVyKTsKCiAgICAgICAgbWFuYWdlcnNbX25ld093bmVyXSA9IHRydWU7CiAgICAgICAgbWFuYWdlcnNbbXNnLnNlbmRlcl0gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNYW5hZ2VyKGFkZHJlc3MgbWFuYWdlciwgYm9vbCBzdGF0ZSkgb3duZXJPbmx5IHsKICAgICAgICBtYW5hZ2Vyc1ttYW5hZ2VyXSA9IHN0YXRlOwogICAgICAgIE1hbmFnZXJTZXQobWFuYWdlciwgc3RhdGUpOwogICAgfQp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi9jb21tb24vTWFuYWdlYWJsZS5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL1JldHVybmFibGVUb2tlbi5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKCgoKLy8vVG9rZW4gdGhhdCB3aGVuIHNlbnQgdG8gc3BlY2lmaWVkIGNvbnRyYWN0IChyZXR1cm5BZ2VudCkgaW52b2tlcyBhZGRpdGlvbmFsIGFjdGlvbnMKY29udHJhY3QgUmV0dXJuYWJsZVRva2VuIGlzIE1hbmFnZWFibGUsIEVSQzIwU3RhbmRhcmRUb2tlbiB7CgogICAgLyoqQGRldiBMaXN0IG9mIHJldHVybiBhZ2VudHMgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHJldHVybkFnZW50czsKCiAgICBmdW5jdGlvbiBSZXR1cm5hYmxlVG9rZW4oKSB7fSAgICAKICAgIAogICAgLyoqQGRldiBTZXRzIG5ldyByZXR1cm4gYWdlbnQgKi8KICAgIGZ1bmN0aW9uIHNldFJldHVybkFnZW50KFJldHVyblRva2VuQWdlbnQgYWdlbnQpIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXR1cm5BZ2VudHNbYWRkcmVzcyhhZ2VudCldID0gdHJ1ZTsKICAgIH0KCiAgICAvKipAZGV2IFJlbW92ZXMgcmV0dXJuIGFnZW50IGZyb20gbGlzdCAqLwogICAgZnVuY3Rpb24gcmVtb3ZlUmV0dXJuQWdlbnQoUmV0dXJuVG9rZW5BZ2VudCBhZ2VudCkgbWFuYWdlck9ubHkgewogICAgICAgIHJldHVybkFnZW50c1thZGRyZXNzKGFnZW50KV0gPSBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb1RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHN1cGVyLmRvVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBpZiAocmV0dXJuQWdlbnRzW190b10pIHsKICAgICAgICAgICAgUmV0dXJuVG9rZW5BZ2VudChfdG8pLnJldHVyblRva2VuKF9mcm9tLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAKICAgICAgICB9CiAgICB9Cn0vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBpbXBvcnQgIi4uL3Rva2VuL1JldHVybmFibGVUb2tlbi5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLy8vUmV0dXJuYWJsZSB0b2tlbnMgcmVjZWl2ZXIKY29udHJhY3QgUmV0dXJuVG9rZW5BZ2VudCBpcyBNYW5hZ2VhYmxlIHsKICAgIC8vUmV0dXJuYWJsZVRva2VuIHB1YmxpYyByZXR1cm5hYmxlVG9rZW47CgogICAgLyoqQGRldiBMaXN0IG9mIHJldHVybmFibGUgdG9rZW5zIGluIGZvcm1hdCB0b2tlbi0+ZmxhZyAgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIHJldHVybmFibGVUb2tlbnM7CgogICAgLyoqQGRldiBBbGxvd3Mgb25seSB0b2tlbiB0byBleGVjdXRlIG1ldGhvZCAqLwogICAgLy9tb2RpZmllciByZXR1cm5hYmxlVG9rZW5Pbmx5IHtyZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhyZXR1cm5hYmxlVG9rZW4pKTsgXzt9CiAgICBtb2RpZmllciByZXR1cm5hYmxlVG9rZW5Pbmx5IHtyZXF1aXJlKHJldHVybmFibGVUb2tlbnNbbXNnLnNlbmRlcl0pOyBfO30KCiAgICAvKipAZGV2IEV4ZWN1dGVzIHdoZW4gdG9rZW5zIGFyZSB0cmFuc2ZlcnJlZCB0byB0aGlzICovCiAgICBmdW5jdGlvbiByZXR1cm5Ub2tlbihhZGRyZXNzIGZyb20sIHVpbnQyNTYgYW1vdW50UmV0dXJuZWQpOwoKICAgIC8qKkBkZXYgU2V0cyB0b2tlbiB0aGF0IGNhbiBjYWxsIHJldHVyblRva2VuIG1ldGhvZCAqLwogICAgZnVuY3Rpb24gc2V0UmV0dXJuYWJsZVRva2VuKFJldHVybmFibGVUb2tlbiB0b2tlbikgbWFuYWdlck9ubHkgewogICAgICAgIHJldHVybmFibGVUb2tlbnNbYWRkcmVzcyh0b2tlbildID0gdHJ1ZTsKICAgIH0KCiAgICAvKipAZGV2IFJlbW92ZXMgdG9rZW4gdGhhdCBjYW4gY2FsbCByZXR1cm5Ub2tlbiBtZXRob2QgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZVJldHVybmFibGVUb2tlbihSZXR1cm5hYmxlVG9rZW4gdG9rZW4pIG1hbmFnZXJPbmx5IHsKICAgICAgICByZXR1cm5hYmxlVG9rZW5zW2FkZHJlc3ModG9rZW4pXSA9IGZhbHNlOwogICAgfQp9LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuLi90b2tlbi9SZXR1cm5Ub2tlbkFnZW50LnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICogaW1wb3J0ICIuL0lJbnZlc3RSZXN0cmljdGlvbnMuc29sIiA6IHN0YXJ0CiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKCgovKiogQGRldiBSZXN0cmljdGlvbnMgb24gaW52ZXN0bWVudCAqLwpjb250cmFjdCBJSW52ZXN0UmVzdHJpY3Rpb25zIGlzIE1hbmFnZWFibGUgewogICAgLyoqQGRldiBSZXR1cm5zIHRydWUgaWYgaW52ZXN0bWV0IGlzIGFsbG93ZWQgKi8KICAgIGZ1bmN0aW9uIGNhbkludmVzdChhZGRyZXNzIGludmVzdG9yLCB1aW50IGFtb3VudCwgdWludCB0b2tlbnNMZWZ0KSBjb25zdGFudCByZXR1cm5zIChib29sIHJlc3VsdCkgewogICAgICAgIGludmVzdG9yOyBhbW91bnQ7IHJlc3VsdDsgdG9rZW5zTGVmdDsKICAgIH0KCiAgICAvKipAZGV2IENhbGxlZCB3aGVuIGludmVzdG1lbnQgd2FzIG1hZGUgKi8KICAgIGZ1bmN0aW9uIGludmVzdEhhcHBlbmVkKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgYW1vdW50KSBtYW5hZ2VyT25seSB7fSAgICAKfS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9JSW52ZXN0UmVzdHJpY3Rpb25zLnNvbCIgOiBlbmQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9JQ3Jvd2RzYWxlRm9ybXVsYS5zb2wiIDogc3RhcnQKICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKipAZGV2IEFic3RyYWN0aW9uIG9mIGNyb3dkc2FsZSB0b2tlbiBjYWxjdWxhdGlvbiBmdW5jdGlvbiAqLwpjb250cmFjdCBJQ3Jvd2RzYWxlRm9ybXVsYSB7CgogICAgLyoqQGRldiBSZXR1cm5zIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBjYW4gYmUgYm91Z2h0IHdpdGggZ2l2ZW4gd2VpQW1vdW50ICovCiAgICBmdW5jdGlvbiBob3dNYW55VG9rZW5zRm9yRXRoZXIodWludDI1NiB3ZWlBbW91bnQpIGNvbnN0YW50IHJldHVybnModWludDI1NiB0b2tlbnMsIHVpbnQyNTYgZXhjZXNzKSB7CiAgICAgICAgd2VpQW1vdW50OyB0b2tlbnM7IGV4Y2VzczsKICAgIH0KCiAgICAvKipAZGV2IFJldHVybnMgaG93IG1hbnkgdG9rZW5zIGxlZnQgZm9yIHNhbGUgKi8KICAgIGZ1bmN0aW9uIHRva2Vuc0xlZnQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgX2xlZnQpIHsgX2xlZnQ7fSAgICAKfS8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqIGltcG9ydCAiLi9JQ3Jvd2RzYWxlRm9ybXVsYS5zb2wiIDogZW5kCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKLyoqQGRldiBDcm93ZHNhbGUgYmFzZSBjb250cmFjdCwgdXNlZCBmb3IgUFJFLVRHRSBhbmQgVEdFIHN0YWdlcwoqIFRva2VuIGhvbGRlciBzaG91bGQgYWxzbyBiZSB0aGUgb3duZXIgb2YgdGhpcyBjb250cmFjdCAqLwpjb250cmFjdCBCQ1NDcm93ZHNhbGUgaXMgSUNyb3dkc2FsZUZvcm11bGEsIE1hbmFnZWFibGUsIFNhZmVNYXRoIHsKCiAgICBlbnVtIFN0YXRlIHtVbmtub3duLCBCZWZvcmVTdGFydCwgQWN0aXZlLCBGaW5pc2hlZFN1Y2Nlc3MsIEZpbmlzaGVkRmFpbHVyZX0KICAgIAogICAgSVRva2VuUG9vbCBwdWJsaWMgdG9rZW5Qb29sOwogICAgSUludmVzdFJlc3RyaWN0aW9ucyBwdWJsaWMgcmVzdHJpY3Rpb25zOyAvL3Jlc3RyaWN0aW9ucyBvbiBpbnZlc3RtZW50CiAgICBhZGRyZXNzIHB1YmxpYyBiZW5lZmljaWFyeTsgLy9hZGRyZXNzIG9mIGNvbnRyYWN0IHRvIGNvbGxlY3QgZXRoZXIKICAgIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsgLy91bml0IHRpbWVzdGFtcCBvZiBzdGFydCB0aW1lCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOyAvL3VuaXggdGltZXN0YW1wIG9mIGVuZCBkYXRlCiAgICB1aW50MjU2IHB1YmxpYyBtaW5pbXVtR29hbEluV2VpOyAvL1RPRE8gb3IgaW4gdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNGb3JPbmVFdGhlcjsgLy9ob3cgbWFueSB0b2tlbnMgY2FuIHlvdSBidXkgZm9yIDEgZXRoZXIgICAKICAgIHVpbnQyNTYgcmVhbEFtb3VudEZvck9uZUV0aGVyOyAvL2hvdyBtYW55IHRva2VucyBjYW4geW91IGJ1eSBmb3IgMSBldGhlciAqIDEwKipkZWNpbWFscyAgIAogICAgdWludDI1NiBib251c1BjdDsgICAvL2FkZGl0aW9uYWwgcGVyY2VudCBvZiB0b2tlbnMgICAgCiAgICBib29sIHB1YmxpYyB3aXRoZHJldzsgLy90cnVlIGlmIGJlbmVmaWNpYXJ5IGFscmVhZHkgd2l0aGRyZXcKCiAgICB1aW50MjU2IHB1YmxpYyB3ZWlDb2xsZWN0ZWQ7CiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkOwoKICAgIGJvb2wgcHVibGljIGZhaWx1cmU7IC8vdHJ1ZSBpZiBzb21lIGVycm9yIG9jY3VycmVkIGR1cmluZyBjcm93ZHNhbGUKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBpbnZlc3RlZEZyb207IC8vaG93IG1hbnkgd2VpIHNwZWNpZmljIGFkZHJlc3MgaW52ZXN0ZWQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2Vuc1NvbGRUbzsgLy9ob3cgbWFueSB0b2tlbnMgc29sZCB0byBzcGVjaWZpYyBhZGRyZWVzcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgb3ZlcnBheXM7ICAgICAvL292ZXJwYXlzIGZvciBzZW5kIHZhbHVlIGV4Y2Vzc2VzCgogICAgLy8gQSBuZXcgaW52ZXN0bWVudCB3YXMgbWFkZQogICAgZXZlbnQgSW52ZXN0ZWQoYWRkcmVzcyBpbnZlc3RvciwgdWludCB3ZWlBbW91bnQsIHVpbnQgdG9rZW5BbW91bnQpOwogICAgLy8gUmVmdW5kIHdhcyBwcm9jZXNzZWQgZm9yIGEgY29udHJpYnV0b3IKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CiAgICAvLyBPdmVycGF5IHJlZnVuZCB3YXMgcHJvY2Vzc2VkIGZvciBhIGNvbnRyaWJ1dG9yCiAgICBldmVudCBPdmVycGF5UmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IsIHVpbnQgd2VpQW1vdW50KTsKCiAgICAvKipAZGV2IENyb3dkc2FsZSBjb25zdHJ1Y3RvciwgY2FuIHNwZWNpZnkgc3RhcnRUaW1lIGFzIDAgdG8gc3RhcnQgY3Jvd2RzYWxlIGltbWVkaWF0ZWx5IAogICAgX3Rva2Vuc0Zvck9uZUV0aGVyIC0gZG9lc24ndCBkZXBlbmQgb24gdG9rZW4gZGVjaW1hbHMgICAqLyAKICAgIGZ1bmN0aW9uIEJDU0Nyb3dkc2FsZSggICAgICAgIAogICAgICAgIElUb2tlblBvb2wgX3Rva2VuUG9vbCwKICAgICAgICBJSW52ZXN0UmVzdHJpY3Rpb25zIF9yZXN0cmljdGlvbnMsCiAgICAgICAgYWRkcmVzcyBfYmVuZWZpY2lhcnksIAogICAgICAgIHVpbnQyNTYgX3N0YXJ0VGltZSwgCiAgICAgICAgdWludDI1NiBfZHVyYXRpb25JbkhvdXJzLCAKICAgICAgICB1aW50MjU2IF9nb2FsSW5XZWksCiAgICAgICAgdWludDI1NiBfdG9rZW5zRm9yT25lRXRoZXIsCiAgICAgICAgdWludDI1NiBfYm9udXNQY3QpIAogICAgewogICAgICAgIHJlcXVpcmUoX2JlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShhZGRyZXNzKF90b2tlblBvb2wpICE9IDB4MCk7CiAgICAgICAgcmVxdWlyZShfZHVyYXRpb25JbkhvdXJzID4gMCk7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zRm9yT25lRXRoZXIgPiAwKTsgCiAgICAgICAgCiAgICAgICAgdG9rZW5Qb29sID0gX3Rva2VuUG9vbDsKICAgICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICByZXN0cmljdGlvbnMgPSBfcmVzdHJpY3Rpb25zOwogICAgICAgIAogICAgICAgIGlmIChfc3RhcnRUaW1lID09IDApIHsKICAgICAgICAgICAgc3RhcnRUaW1lID0gbm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgfQogICAgICAgIGVuZFRpbWUgPSAoX2R1cmF0aW9uSW5Ib3VycyAqIDEgaG91cnMpICsgc3RhcnRUaW1lOyAgICAgICAgCiAgICAgICAgCiAgICAgICAgdG9rZW5zRm9yT25lRXRoZXIgPSBfdG9rZW5zRm9yT25lRXRoZXI7CiAgICAgICAgbWluaW11bUdvYWxJbldlaSA9IF9nb2FsSW5XZWk7CiAgICAgICAgYm9udXNQY3QgPSBfYm9udXNQY3Q7CgogICAgICAgIHdlaUNvbGxlY3RlZCA9IDA7CiAgICAgICAgdG9rZW5zU29sZCA9IDA7CiAgICAgICAgZmFpbHVyZSA9IGZhbHNlOwogICAgICAgIHdpdGhkcmV3ID0gZmFsc2U7CgogICAgICAgIHJlYWxBbW91bnRGb3JPbmVFdGhlciA9IHRva2VuUG9vbC50b2tlbigpLmdldFJlYWxUb2tlbkFtb3VudCh0b2tlbnNGb3JPbmVFdGhlcik7CiAgICB9CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpbnZlc3QoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnZlc3QoKSBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKGNhbkludmVzdChtc2cuc2VuZGVyLCBtc2cudmFsdWUpKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IGV4Y2VzczsKICAgICAgICB1aW50MjU2IHdlaVBhaWQgPSBtc2cudmFsdWU7CiAgICAgICAgdWludDI1NiB0b2tlbnNUb0J1eTsKICAgICAgICAodG9rZW5zVG9CdXksIGV4Y2VzcykgPSBob3dNYW55VG9rZW5zRm9yRXRoZXIod2VpUGFpZCk7CgogICAgICAgIHJlcXVpcmUodG9rZW5zVG9CdXkgPD0gdG9rZW5zTGVmdCgpICYmIHRva2Vuc1RvQnV5ID4gMCk7CgogICAgICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgICAgICAgIG92ZXJwYXlzW21zZy5zZW5kZXJdID0gc2FmZUFkZChvdmVycGF5c1ttc2cuc2VuZGVyXSwgZXhjZXNzKTsKICAgICAgICAgICAgd2VpUGFpZCA9IHNhZmVTdWIod2VpUGFpZCwgZXhjZXNzKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaW52ZXN0ZWRGcm9tW21zZy5zZW5kZXJdID0gc2FmZUFkZChpbnZlc3RlZEZyb21bbXNnLnNlbmRlcl0sIHdlaVBhaWQpOyAgICAgIAogICAgICAgIHRva2Vuc1NvbGRUb1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zU29sZFRvW21zZy5zZW5kZXJdLCB0b2tlbnNUb0J1eSk7CiAgICAgICAgCiAgICAgICAgdG9rZW5zU29sZCA9IHNhZmVBZGQodG9rZW5zU29sZCwgdG9rZW5zVG9CdXkpOwogICAgICAgIHdlaUNvbGxlY3RlZCA9IHNhZmVBZGQod2VpQ29sbGVjdGVkLCB3ZWlQYWlkKTsKCiAgICAgICAgaWYoYWRkcmVzcyhyZXN0cmljdGlvbnMpICE9IDB4MCkgewogICAgICAgICAgICByZXN0cmljdGlvbnMuaW52ZXN0SGFwcGVuZWQobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmVxdWlyZSh0b2tlblBvb2wudG9rZW4oKS50cmFuc2ZlckZyb20odG9rZW5Qb29sLCBtc2cuc2VuZGVyLCB0b2tlbnNUb0J1eSkpOwoKICAgICAgICBJbnZlc3RlZChtc2cuc2VuZGVyLCB3ZWlQYWlkLCB0b2tlbnNUb0J1eSk7CiAgICB9CgogICAgLyoqQGRldiBSZXR1cm5zIHRydWUgaWYgaXQgaXMgcG9zc2libGUgdG8gaW52ZXN0ICovCiAgICBmdW5jdGlvbiBjYW5JbnZlc3QoYWRkcmVzcyBpbnZlc3RvciwgdWludDI1NiBhbW91bnQpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiBnZXRTdGF0ZSgpID09IFN0YXRlLkFjdGl2ZSAmJgogICAgICAgICAgICAgICAgICAgIChhZGRyZXNzKHJlc3RyaWN0aW9ucykgPT0gMHgwIHx8IAogICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0aW9ucy5jYW5JbnZlc3QoaW52ZXN0b3IsIGFtb3VudCwgdG9rZW5zTGVmdCgpKSk7CiAgICB9CgogICAgLyoqQGRldiBJQ3Jvd2RzYWxlRm9ybXVsYSBvdmVycmlkZSAqLwogICAgZnVuY3Rpb24gaG93TWFueVRva2Vuc0ZvckV0aGVyKHVpbnQyNTYgd2VpQW1vdW50KSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgdG9rZW5zLCB1aW50MjU2IGV4Y2VzcykgeyAgICAgICAgCiAgICAgICAgdWludDI1NiBicGN0ID0gZ2V0Q3VycmVudEJvbnVzUGN0KCk7ICAgICAgICAKICAgICAgICB1aW50MjU2IG1heFRva2VucyA9ICh0b2tlbnNMZWZ0KCkgKiAxMDApIC8gKDEwMCArIGJwY3QpOwoKICAgICAgICB0b2tlbnMgPSB3ZWlBbW91bnQgKiByZWFsQW1vdW50Rm9yT25lRXRoZXIgLyAxIGV0aGVyOwogICAgICAgIGlmICh0b2tlbnMgPiBtYXhUb2tlbnMpIHsKICAgICAgICAgICAgdG9rZW5zID0gbWF4VG9rZW5zOwogICAgICAgIH0KCiAgICAgICAgZXhjZXNzID0gd2VpQW1vdW50IC0gdG9rZW5zICogMSBldGhlciAvIHJlYWxBbW91bnRGb3JPbmVFdGhlcjsKCiAgICAgICAgdG9rZW5zID0gKHRva2VucyAqIDEwMCArIHRva2VucyAqIGJwY3QpIC8gMTAwOwogICAgfQoKICAgIC8qKkBkZXYgUmV0dXJucyBjdXJyZW50IGJvbnVzIHBlcmNlbnQgWzAtMTAwXSAqLwogICAgZnVuY3Rpb24gZ2V0Q3VycmVudEJvbnVzUGN0KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBib251c1BjdDsKICAgIH0KICAgIAogICAgLyoqQGRldiBSZXR1cm5zIGhvdyBtYW55IHRva2VucyBsZWZ0IGZvciBzYWxlICovCiAgICBmdW5jdGlvbiB0b2tlbnNMZWZ0KCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7ICAgICAgICAKICAgICAgICByZXR1cm4gdG9rZW5Qb29sLmdldFRva2VuQW1vdW50KCk7CiAgICB9CgogICAgLyoqQGRldiBSZXR1cm5zIGZ1bmRzIHRoYXQgc2hvdWxkIGJlIHNlbnQgdG8gYmVuZWZpY2lhcnkgKi8KICAgIGZ1bmN0aW9uIGFtb3VudFRvQmVuZWZpY2lhcnkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHdlaUNvbGxlY3RlZDsKICAgIH0gCgogICAgLyoqQGRldiBSZXR1cm5zIGNyb3dkc2FsZSBjdXJyZW50IHN0YXRlICovCiAgICBmdW5jdGlvbiBnZXRTdGF0ZSgpIGNvbnN0YW50IHJldHVybnMgKFN0YXRlKSB7CiAgICAgICAgaWYgKGZhaWx1cmUpIHsKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkZpbmlzaGVkRmFpbHVyZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKG5vdyA8IHN0YXJ0VGltZSkgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuQmVmb3JlU3RhcnQ7CiAgICAgICAgfSBlbHNlIGlmIChub3cgPCBlbmRUaW1lICYmIHRva2Vuc0xlZnQoKSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkFjdGl2ZTsKICAgICAgICB9IGVsc2UgaWYgKHdlaUNvbGxlY3RlZCA+PSBtaW5pbXVtR29hbEluV2VpIHx8IHRva2Vuc0xlZnQoKSA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5GaW5pc2hlZFN1Y2Nlc3M7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkZpbmlzaGVkRmFpbHVyZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqQGRldiBBbGxvd3MgaW52ZXN0b3JzIHRvIHdpdGhkcmF3IGZ1bmRzIGFuZCBvdmVycGF5cyBpbiBjYXNlIG9mIGNyb3dkc2FsZSBmYWlsdXJlICovCiAgICBmdW5jdGlvbiByZWZ1bmQoKSB7CiAgICAgICAgcmVxdWlyZShnZXRTdGF0ZSgpID09IFN0YXRlLkZpbmlzaGVkRmFpbHVyZSk7CgogICAgICAgIHVpbnQgYW1vdW50ID0gaW52ZXN0ZWRGcm9tW21zZy5zZW5kZXJdOyAgICAgICAgCgogICAgICAgIGlmIChhbW91bnQgPiAwKSB7CiAgICAgICAgICAgIGludmVzdGVkRnJvbVttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgIHdlaUNvbGxlY3RlZCA9IHNhZmVTdWIod2VpQ29sbGVjdGVkLCBhbW91bnQpOyAgICAgICAgICAgIAogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBSZWZ1bmQobXNnLnNlbmRlciwgYW1vdW50KTsgICAgICAgICAgICAKICAgICAgICB9CiAgICB9ICAgIAoKICAgIC8qKkBkZXYgQWxsb3dzIGludmVzdG9yIHRvIHdpdGhkcmF3IG92ZXJwYXkgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3T3ZlcnBheSgpIHsKICAgICAgICB1aW50IGFtb3VudCA9IG92ZXJwYXlzW21zZy5zZW5kZXJdOwogICAgICAgIG92ZXJwYXlzW21zZy5zZW5kZXJdID0gMDsgICAgICAgIAoKICAgICAgICBpZiAoYW1vdW50ID4gMCkgewogICAgICAgICAgICBpZiAobXNnLnNlbmRlci5zZW5kKGFtb3VudCkpIHsKICAgICAgICAgICAgICAgIE92ZXJwYXlSZWZ1bmQobXNnLnNlbmRlciwgYW1vdW50KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG92ZXJwYXlzW21zZy5zZW5kZXJdID0gYW1vdW50OyAvL3Jlc3RvcmUgZnVuZHMgaW4gY2FzZSBvZiBmYWlsZWQgc2VuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKkBkZXYgVHJhbnNmZXJzIGFsbCBjb2xsZWN0ZWQgZnVuZHMgdG8gYmVuZWZpY2lhcnkqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJUb0JlbmVmaWNpYXJ5KCkgewogICAgICAgIHJlcXVpcmUoZ2V0U3RhdGUoKSA9PSBTdGF0ZS5GaW5pc2hlZFN1Y2Nlc3MgJiYgIXdpdGhkcmV3KTsKICAgICAgICAKICAgICAgICB3aXRoZHJldyA9IHRydWU7CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBhbW91bnRUb0JlbmVmaWNpYXJ5KCk7CgogICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgUmVmdW5kKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgfQoKICAgIC8qKkBkZXYgTWFrZXMgY3Jvd2RzYWxlIGZhaWxlZC9vaywgZm9yIGVtZXJnZW5jeSByZWFzb25zICovCiAgICBmdW5jdGlvbiBtYWtlRmFpbGVkKGJvb2wgc3RhdGUpIG1hbmFnZXJPbmx5IHsKICAgICAgICBmYWlsdXJlID0gc3RhdGU7CiAgICB9CgogICAgLyoqQGRldiBTZXRzIG5ldyBiZW5lZmljaWFyeSAqLwogICAgZnVuY3Rpb24gY2hhbmdlQmVuZWZpY2lhcnkoYWRkcmVzcyBuZXdCZW5lZmljaWFyeSkgbWFuYWdlck9ubHkgewogICAgICAgIGJlbmVmaWNpYXJ5ID0gbmV3QmVuZWZpY2lhcnk7CiAgICB9Cn0='.
	

]
