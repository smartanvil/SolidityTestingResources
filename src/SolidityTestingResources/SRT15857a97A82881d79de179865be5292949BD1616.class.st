Class {
	#name : #SRT15857a97A82881d79de179865be5292949BD1616,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT15857a97A82881d79de179865be5292949BD1616 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBjb3B5cmlnaHQgPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9ImM0YTdhYmFhYjBhNWE3YjA4NGE2YmRiMGExYjBhY2ExYjZlYWE3YWJhOSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4KCmNvbnRyYWN0IEJhc2ljQWNjZXNzQ29udHJvbCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3NbXSBwdWJsaWMgbW9kZXJhdG9yczsKCiAgICBmdW5jdGlvbiBCYXNpY0FjY2Vzc0NvbnRyb2woKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5TW9kZXJhdG9ycygpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICBib29sIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgIGZvciAodWludCBpbmRleCA9IDA7IGluZGV4IDwgbW9kZXJhdG9ycy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGlmIChtb2RlcmF0b3JzW2luZGV4XSA9PSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlcXVpcmUoZm91bmQpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIENoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoX25ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEtpbGwoKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBzZWxmZGVzdHJ1Y3Qob3duZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIEFkZE1vZGVyYXRvcihhZGRyZXNzIF9uZXdNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChfbmV3TW9kZXJhdG9yICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgZm9yICh1aW50IGluZGV4ID0gMDsgaW5kZXggPCBtb2RlcmF0b3JzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgICAgaWYgKG1vZGVyYXRvcnNbaW5kZXhdID09IF9uZXdNb2RlcmF0b3IpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbW9kZXJhdG9ycy5wdXNoKF9uZXdNb2RlcmF0b3IpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gUmVtb3ZlTW9kZXJhdG9yKGFkZHJlc3MgX29sZE1vZGVyYXRvcikgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgdWludCBmb3VuZEluZGV4ID0gMDsKICAgICAgICBmb3IgKDsgZm91bmRJbmRleCA8IG1vZGVyYXRvcnMubGVuZ3RoOyBmb3VuZEluZGV4KyspIHsKICAgICAgICAgICAgaWYgKG1vZGVyYXRvcnNbZm91bmRJbmRleF0gPT0gX29sZE1vZGVyYXRvcikgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGZvdW5kSW5kZXggPCBtb2RlcmF0b3JzLmxlbmd0aCkgewogICAgICAgICAgICBtb2RlcmF0b3JzW2ZvdW5kSW5kZXhdID0gbW9kZXJhdG9yc1ttb2RlcmF0b3JzLmxlbmd0aC0xXTsKICAgICAgICAgICAgZGVsZXRlIG1vZGVyYXRvcnNbbW9kZXJhdG9ycy5sZW5ndGgtMV07CiAgICAgICAgICAgIG1vZGVyYXRvcnMubGVuZ3RoLS07CiAgICAgICAgfQogICAgfQp9CgppbnRlcmZhY2UgVG9rZW5SZWNpcGllbnQgeyAKICAgIGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYzsgCn0KCmludGVyZmFjZSBDcm9zc0ZvcmtEaXN0cmlidXRpb24gewogICAgZnVuY3Rpb24gZ2V0RGlzdHJpYnV0ZWRBbW91bnQodWludDY0IF9yZXF1ZXN0SWQsIHN0cmluZyBfYnRjQWRkcmVzcywgYWRkcmVzcyBfcmVjZWl2ZXIpIHB1YmxpYzsKfQoKaW50ZXJmYWNlIENyb3NzRm9ya0NhbGxiYWNrIHsKICAgIGZ1bmN0aW9uIGNhbGxiYWNrQ3Jvc3NGb3JrKHVpbnQ2NCBfcmVxdWVzdElkLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzMzIgX3JlZmVyQ29kZUhhc2gpIHB1YmxpYzsKfQoKY29udHJhY3QgVG9rZW5FUkMyMCB7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOwogICAgICAgIHVpbnQgcHJldmlvdXNCYWxhbmNlcyA9IGJhbGFuY2VPZltfZnJvbV0gKyBiYWxhbmNlT2ZbX3RvXTsKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICBhc3NlcnQoYmFsYW5jZU9mW19mcm9tXSArIGJhbGFuY2VPZltfdG9dID09IHByZXZpb3VzQmFsYW5jZXMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsgCiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZUFuZENhbGwoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBUb2tlblJlY2lwaWVudCBzcGVuZGVyID0gVG9rZW5SZWNpcGllbnQoX3NwZW5kZXIpOwogICAgICAgIGlmIChhcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpKSB7CiAgICAgICAgICAgIHNwZW5kZXIucmVjZWl2ZUFwcHJvdmFsKG1zZy5zZW5kZXIsIF92YWx1ZSwgdGhpcywgX2V4dHJhRGF0YSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIHRvdGFsU3VwcGx5IC09IF92YWx1ZTsKICAgICAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfZnJvbV0gPj0gX3ZhbHVlKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICBhbGxvd2FuY2VbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICB0b3RhbFN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgQnVybihfZnJvbSwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKY29udHJhY3QgQlRIVG9rZW4gaXMgQmFzaWNBY2Nlc3NDb250cm9sLCBUb2tlbkVSQzIwLCBDcm9zc0ZvcmtDYWxsYmFjayB7CiAgICAvLyBtZXRhZGF0YQogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkJ5dGV0aGVyIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkJUSCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjEuMCI7CiAgICAKICAgIC8vIGNyb3NzIGZvcmsgZGF0YQogICAgZW51bSBGb3JrUmVzdWx0Q29kZSB7IAogICAgICAgIFNVQ0NFU1MsCiAgICAgICAgVFJJR0dFUkVELAogICAgICAgIFJFQ0VJVkVELAogICAgICAgIFBFTkRJTkcsCiAgICAgICAgRkFJTEVELAogICAgICAgIElEX01JU01BVENILAogICAgICAgIE5PVF9FTk9VR0hfQkFMQU5DRSwKICAgICAgICBOT1RfUkVDRUlWRUQKICAgIH0KICAgIGVudW0gQ2xhaW1SZWZlclJlc3VsdENvZGUgewogICAgICAgIFNVQ0NFU1MsCiAgICAgICAgTk9UX0VOT1VHSF9CQUxBTkNFCiAgICB9CiAgICBzdHJ1Y3QgQ3Jvc3NGb3JrRGF0YSB7CiAgICAgICAgc3RyaW5nIGJ0Y0FkZHJlc3M7CiAgICAgICAgYWRkcmVzcyByZWNlaXZlcjsKICAgICAgICB1aW50MjU2IGFtb3VudDsKICAgICAgICBieXRlczMyIHJlZmVyQ29kZUhhc2g7CiAgICAgICAgdWludCBjcmVhdGVUaW1lOwogICAgfQogICAgdWludDY0IHB1YmxpYyBjcm9zc0ZvcmtDb3VudCA9IDA7CiAgICB1aW50IHB1YmxpYyByZWZlckJlbmVmaXRSYXRlID0gMTA7IC8vIDEwIGJ0YyAtPiAxIGJ0aAogICAgYm9vbCBwdWJsaWMgY3Jvc3NGb3JraW5nID0gZmFsc2U7CiAgICBtYXBwaW5nICh1aW50NjQgPT4gQ3Jvc3NGb3JrRGF0YSkgY3Jvc3NGb3JrTWFwcGluZzsKICAgIG1hcHBpbmcgKHN0cmluZyA9PiB1aW50NjQpIGNyb3NzRm9ya0lkczsKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gdWludDI1NikgcmVmZXJCZW5lZml0czsgLy8gcmVmZXJDb2RlSGFzaCAtPiBidGggYW1vdW50CiAgICBhZGRyZXNzIHB1YmxpYyBjcm9zc0ZvcmtEaXN0cmlidXRpb24gPSAweDA7IC8vIGNyb3NzZm9yayBjb250cmFjdAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgc2F0b3NoaV9idGhfZGVjaW1hbHMgPSAxMCAqKiAxMDsKICAgIAogICAgZXZlbnQgTG9nUmV2ZXJ0Q3Jvc3NGb3JrKGJ5dGVzMzIgaW5kZXhlZCBidGNBZGRyZXNzSGFzaCwgYWRkcmVzcyBpbmRleGVkIHJlY2VpdmVyLCB1aW50NjQgaW5kZXhlZCByZXF1ZXN0SWQsIHVpbnQyNTYgYW1vdW50LCBGb3JrUmVzdWx0Q29kZSByZXN1bHQpOwogICAgZXZlbnQgTG9nVHJpZ2dlckNyb3NzRm9yayhieXRlczMyIGluZGV4ZWQgYnRjQWRkcmVzc0hhc2gsIHVpbnQ2NCBpbmRleGVkIHJlcXVlc3RJZCwgRm9ya1Jlc3VsdENvZGUgcmVzdWx0KTsKICAgIGV2ZW50IExvZ0Nyb3NzRm9yayh1aW50NjQgaW5kZXhlZCByZXF1ZXN0SWQsIGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQyNTYgYW1vdW50LCBGb3JrUmVzdWx0Q29kZSByZXN1bHQpOwogICAgZXZlbnQgTG9nQ2xhaW1SZWZlckJlbmVmaXQoYnl0ZXMzMiBpbmRleGVkIHJlZmVyQ29kZUhhc2gsIGFkZHJlc3MgcmVjZWl2ZXIsIHVpbnQyNTYgYW1vdW50LCBDbGFpbVJlZmVyUmVzdWx0Q29kZSByZXN1bHQpOwogICAgCiAgICAvLyBkZXBvc2l0IGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGNyb3NzRm9ya0Z1bmREZXBvc2l0OyAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIGNyb3NzIGZvcmsKICAgIGFkZHJlc3MgcHVibGljIGJ0aEZ1bmREZXBvc2l0OyAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIHVzZXIgZ3Jvd3RoIHBvb2wgJiBtYXJrZXRpbmcKICAgIGFkZHJlc3MgcHVibGljIGRldmVsb3BlckZ1bmREZXBvc2l0OyAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIGRldmVsb3BlciBmdW5kCiAgICAKICAgIC8vIGZ1bmQgZGlzdHJpYnV0aW9uCiAgICB1aW50MjU2IHB1YmxpYyBjcm9zc0ZvcmtGdW5kID0gMTcgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLzE3bSByZXNlcnZlZCBmb3IgQml0Q29pbiBDcm9zcy1Gb3JrCiAgICB1aW50MjU2IHB1YmxpYyBtYXJrZXRpbmdGdW5kID0gMiAgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLzJtIHJlc2VydmVkIGZvciBtYXJrZXRpbmcKICAgIHVpbnQyNTYgcHVibGljIHVzZXJQb29sRnVuZCAgPSAxICAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7IC8vMW0gZm9yIHVzZXIgZ3Jvd3RoIHBvb2wKICAgIHVpbnQyNTYgcHVibGljIGRldmVsb3BlckZ1bmQgPSAxICAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7IC8vMW0gcmVzZXJ2ZWQgZm9yIGRldmVsb3BlcnMKICAgIAogICAgLy8gZm9yIGZ1dHVyZSBmZWF0dXJlCiAgICB1aW50MjU2IHB1YmxpYyBzZWxsUHJpY2U7CiAgICB1aW50MjU2IHB1YmxpYyBidXlQcmljZTsKICAgIGJvb2wgcHVibGljIHRyYWRpbmcgPSBmYWxzZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGZyb3plbkFjY291bnQ7CiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogICAgCiAgICAvLyBtb2RpZmllcgogICAgbW9kaWZpZXIgaXNDcm9zc0ZvcmtpbmcgewogICAgICAgIHJlcXVpcmUoY3Jvc3NGb3JraW5nID09IHRydWUgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgcmVxdWlyZShjcm9zc0ZvcmtEaXN0cmlidXRpb24gIT0gMHgwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBpc1RyYWRpbmcgewogICAgICAgIHJlcXVpcmUodHJhZGluZyA9PSB0cnVlIHx8IG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9IAoKICAgIC8vIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBCVEhUb2tlbihhZGRyZXNzIF9jcm9zc0ZvcmtEaXN0cmlidXRpb24sIGFkZHJlc3MgX2Nyb3NzRm9ya0Z1bmREZXBvc2l0LCBhZGRyZXNzIF9idGhGdW5kRGVwb3NpdCwgYWRkcmVzcyBfZGV2ZWxvcGVyRnVuZERlcG9zaXQpIHB1YmxpYyB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBjcm9zc0ZvcmtGdW5kICsgbWFya2V0aW5nRnVuZCArIHVzZXJQb29sRnVuZCArIGRldmVsb3BlckZ1bmQ7CiAgICAgICAgY3Jvc3NGb3JrRGlzdHJpYnV0aW9uID0gX2Nyb3NzRm9ya0Rpc3RyaWJ1dGlvbjsKICAgICAgICBjcm9zc0ZvcmtGdW5kRGVwb3NpdCA9IF9jcm9zc0ZvcmtGdW5kRGVwb3NpdDsKICAgICAgICBidGhGdW5kRGVwb3NpdCA9IF9idGhGdW5kRGVwb3NpdDsKICAgICAgICBkZXZlbG9wZXJGdW5kRGVwb3NpdCA9IF9kZXZlbG9wZXJGdW5kRGVwb3NpdDsKICAgICAgICAKICAgICAgICBiYWxhbmNlT2ZbY3Jvc3NGb3JrRnVuZERlcG9zaXRdICs9IGNyb3NzRm9ya0Z1bmQ7CiAgICAgICAgYmFsYW5jZU9mW2J0aEZ1bmREZXBvc2l0XSArPSBtYXJrZXRpbmdGdW5kICsgdXNlclBvb2xGdW5kOwogICAgICAgIGJhbGFuY2VPZltkZXZlbG9wZXJGdW5kRGVwb3NpdF0gKz0gZGV2ZWxvcGVyRnVuZDsKICAgIH0KCiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHB1YmxpYyB7fQogICAgCiAgICAvLyBvbmx5IGFkbWluCiAgICBmdW5jdGlvbiBzZXRDcm9zc0ZvcmtEaXN0cmlidXRpb24oYWRkcmVzcyBfY3Jvc3NGb3JrRGlzdHJpYnV0aW9uKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBjcm9zc0ZvcmtEaXN0cmlidXRpb24gPSBfY3Jvc3NGb3JrRGlzdHJpYnV0aW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldERlcG9zaXRBZGRyZXNzKGFkZHJlc3MgX2Nyb3NzRm9ya0Z1bmQsIGFkZHJlc3MgX2J0aEZ1bmQsIGFkZHJlc3MgX2RldmVsb3BlckZ1bmQpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGNyb3NzRm9ya0Z1bmREZXBvc2l0ID0gX2Nyb3NzRm9ya0Z1bmQ7CiAgICAgICAgYnRoRnVuZERlcG9zaXQgPSBfYnRoRnVuZDsKICAgICAgICBkZXZlbG9wZXJGdW5kRGVwb3NpdCA9IF9kZXZlbG9wZXJGdW5kOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlcyh1aW50MjU2IF9uZXdTZWxsUHJpY2UsIHVpbnQyNTYgX25ld0J1eVByaWNlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBzZWxsUHJpY2UgPSBfbmV3U2VsbFByaWNlOwogICAgICAgIGJ1eVByaWNlID0gX25ld0J1eVByaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFJlZmVyQmVuZWZpdFJhdGUodWludCBfcmF0ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVmZXJCZW5lZml0UmF0ZSA9IF9yYXRlOwogICAgfQogICAgCiAgICAvLyBvbmx5IG1vZGVyYXRvcnMKICAgIGZ1bmN0aW9uIHRvZ2dsZUNyb3NzRm9ya2luZygpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyB7CiAgICAgICAgY3Jvc3NGb3JraW5nID0gIWNyb3NzRm9ya2luZzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG9nZ2xlVHJhZGluZygpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyB7CiAgICAgICAgdHJhZGluZyA9ICF0cmFkaW5nOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjbGFpbVJlZmVyQmVuZWZpdChzdHJpbmcgX3JlZmVyQ29kZSwgYWRkcmVzcyBfcmVjZWl2ZXIpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyB7CiAgICAgICAgYnl0ZXMzMiByZWZlckNvZGVIYXNoID0ga2VjY2FrMjU2KF9yZWZlckNvZGUpOwogICAgICAgIHVpbnQyNTYgdG90YWxBbW91bnQgPSByZWZlckJlbmVmaXRzW3JlZmVyQ29kZUhhc2hdOwogICAgICAgIGlmICh0b3RhbEFtb3VudD09MCkgewogICAgICAgICAgICBMb2dDbGFpbVJlZmVyQmVuZWZpdChyZWZlckNvZGVIYXNoLCBfcmVjZWl2ZXIsIDAsIENsYWltUmVmZXJSZXN1bHRDb2RlLlNVQ0NFU1MpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChiYWxhbmNlT2ZbYnRoRnVuZERlcG9zaXRdIDwgdG90YWxBbW91bnQpIHsKICAgICAgICAgICAgTG9nQ2xhaW1SZWZlckJlbmVmaXQocmVmZXJDb2RlSGFzaCwgX3JlY2VpdmVyLCAwLCBDbGFpbVJlZmVyUmVzdWx0Q29kZS5OT1RfRU5PVUdIX0JBTEFOQ0UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJlZmVyQmVuZWZpdHNbcmVmZXJDb2RlSGFzaF0gPSAwOwogICAgICAgIGJhbGFuY2VPZltidGhGdW5kRGVwb3NpdF0gLT0gdG90YWxBbW91bnQ7CiAgICAgICAgYmFsYW5jZU9mW19yZWNlaXZlcl0gKz0gdG90YWxBbW91bnQ7CiAgICAgICAgTG9nQ2xhaW1SZWZlckJlbmVmaXQocmVmZXJDb2RlSGFzaCwgX3JlY2VpdmVyLCB0b3RhbEFtb3VudCwgQ2xhaW1SZWZlclJlc3VsdENvZGUuU1VDQ0VTUyk7CiAgICB9CgogICAgLy8gaW4gY2FzZSB0aGVyZSBpcyBhbiBlcnJvcgogICAgZnVuY3Rpb24gcmV2ZXJ0Q3Jvc3NGb3JrKHN0cmluZyBfYnRjQWRkcmVzcykgb25seU1vZGVyYXRvcnMgcHVibGljIHsKICAgICAgICBieXRlczMyIGJ0Y0FkZHJlc3NIYXNoID0ga2VjY2FrMjU2KF9idGNBZGRyZXNzKTsKICAgICAgICB1aW50NjQgcmVxdWVzdElkID0gY3Jvc3NGb3JrSWRzW19idGNBZGRyZXNzXTsKICAgICAgICBpZiAocmVxdWVzdElkID09IDApIHsKICAgICAgICAgICAgTG9nUmV2ZXJ0Q3Jvc3NGb3JrKGJ0Y0FkZHJlc3NIYXNoLCAweDAsIDAsIDAsIEZvcmtSZXN1bHRDb2RlLk5PVF9SRUNFSVZFRCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgQ3Jvc3NGb3JrRGF0YSBzdG9yYWdlIGNyb3NzRm9ya0RhdGEgPSBjcm9zc0ZvcmtNYXBwaW5nW3JlcXVlc3RJZF07CiAgICAgICAgdWludDI1NiBhbW91bnQgPSBjcm9zc0ZvcmtEYXRhLmFtb3VudDsgICAgICAgIAogICAgICAgIGFkZHJlc3MgcmVjZWl2ZXIgPSBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyOwogICAgICAgIGlmIChiYWxhbmNlT2ZbcmVjZWl2ZXJdIDwgY3Jvc3NGb3JrRGF0YS5hbW91bnQpIHsKICAgICAgICAgICAgTG9nUmV2ZXJ0Q3Jvc3NGb3JrKGJ0Y0FkZHJlc3NIYXNoLCByZWNlaXZlciwgcmVxdWVzdElkLCBhbW91bnQsIEZvcmtSZXN1bHRDb2RlLk5PVF9FTk9VR0hfQkFMQU5DRSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gcmV2ZXJ0CiAgICAgICAgYmFsYW5jZU9mW2Nyb3NzRm9ya0RhdGEucmVjZWl2ZXJdIC09IGNyb3NzRm9ya0RhdGEuYW1vdW50OwogICAgICAgIGJhbGFuY2VPZltjcm9zc0ZvcmtGdW5kRGVwb3NpdF0gKz0gY3Jvc3NGb3JrRGF0YS5hbW91bnQ7CiAgICAgICAgY3Jvc3NGb3JrSWRzW19idGNBZGRyZXNzXSA9IDA7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5idGNBZGRyZXNzID0gIiI7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciA9IDB4MDsKICAgICAgICBjcm9zc0ZvcmtEYXRhLmFtb3VudCA9IDA7CiAgICAgICAgY3Jvc3NGb3JrRGF0YS5jcmVhdGVUaW1lID0gMDsKICAgICAgICAKICAgICAgICAvLyByZXZlcnQgcmVmZXIgY2xhaW1hYmxlIGFtb3VudCBpZiBwb3NzaWJsZQogICAgICAgIGlmIChyZWZlckJlbmVmaXRzW2Nyb3NzRm9ya0RhdGEucmVmZXJDb2RlSGFzaF0gPiAwKSB7CiAgICAgICAgICAgIHVpbnQyNTYgZGVkdWN0QW1vdW50ID0gY3Jvc3NGb3JrRGF0YS5hbW91bnQ7CiAgICAgICAgICAgIGlmIChyZWZlckJlbmVmaXRzW2Nyb3NzRm9ya0RhdGEucmVmZXJDb2RlSGFzaF0gPCBkZWR1Y3RBbW91bnQpIHsKICAgICAgICAgICAgICAgIGRlZHVjdEFtb3VudCA9IHJlZmVyQmVuZWZpdHNbY3Jvc3NGb3JrRGF0YS5yZWZlckNvZGVIYXNoXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZWZlckJlbmVmaXRzW2Nyb3NzRm9ya0RhdGEucmVmZXJDb2RlSGFzaF0gLT0gZGVkdWN0QW1vdW50OwogICAgICAgIH0KICAgICAgICAKICAgICAgICBMb2dSZXZlcnRDcm9zc0ZvcmsoYnRjQWRkcmVzc0hhc2gsIHJlY2VpdmVyLCByZXF1ZXN0SWQsIGFtb3VudCwgRm9ya1Jlc3VsdENvZGUuU1VDQ0VTUyk7CiAgICB9CgogICAgLy8gcHVibGljCiAgICBmdW5jdGlvbiBnZXRDcm9zc0ZvcmtJZChzdHJpbmcgX2J0Y0FkZHJlc3MpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ2NCkgewogICAgICAgIHJldHVybiBjcm9zc0ZvcmtJZHNbX2J0Y0FkZHJlc3NdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDcm9zc0ZvcmtEYXRhKHVpbnQ2NCBfaWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHN0cmluZywgYWRkcmVzcywgdWludDI1NiwgdWludCkgewogICAgICAgIENyb3NzRm9ya0RhdGEgc3RvcmFnZSBjcm9zc0ZvcmtEYXRhID0gY3Jvc3NGb3JrTWFwcGluZ1tfaWRdOwogICAgICAgIHJldHVybiAoY3Jvc3NGb3JrRGF0YS5idGNBZGRyZXNzLCBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyLCBjcm9zc0ZvcmtEYXRhLmFtb3VudCwgY3Jvc3NGb3JrRGF0YS5jcmVhdGVUaW1lKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0UmVmZXJCZW5lZml0KHN0cmluZyBfcmVmZXJDb2RlKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIHJlZmVyQmVuZWZpdHNba2VjY2FrMjU2KF9yZWZlckNvZGUpXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FsbGJhY2tDcm9zc0ZvcmsodWludDY0IF9yZXF1ZXN0SWQsIHVpbnQyNTYgX2Ftb3VudCwgYnl0ZXMzMiBfcmVmZXJDb2RlSGFzaCkgcHVibGljIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBjcm9zc0ZvcmtEaXN0cmlidXRpb24gfHwgX2Ftb3VudCA9PSAwKSB7CiAgICAgICAgICAgIExvZ0Nyb3NzRm9yayhfcmVxdWVzdElkLCAweDAsIDAsIEZvcmtSZXN1bHRDb2RlLkZBSUxFRCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgQ3Jvc3NGb3JrRGF0YSBzdG9yYWdlIGNyb3NzRm9ya0RhdGEgPSBjcm9zc0ZvcmtNYXBwaW5nW19yZXF1ZXN0SWRdOwogICAgICAgIGlmIChjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyID09IDB4MCkgewogICAgICAgICAgICBMb2dDcm9zc0ZvcmsoX3JlcXVlc3RJZCwgY3Jvc3NGb3JrRGF0YS5yZWNlaXZlciwgMCwgRm9ya1Jlc3VsdENvZGUuSURfTUlTTUFUQ0gpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChjcm9zc0ZvcmtJZHNbY3Jvc3NGb3JrRGF0YS5idGNBZGRyZXNzXSAhPSAwKSB7CiAgICAgICAgICAgIExvZ0Nyb3NzRm9yayhfcmVxdWVzdElkLCBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyLCBjcm9zc0ZvcmtEYXRhLmFtb3VudCwgRm9ya1Jlc3VsdENvZGUuUkVDRUlWRUQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNyb3NzRm9ya0lkc1tjcm9zc0ZvcmtEYXRhLmJ0Y0FkZHJlc3NdID0gX3JlcXVlc3RJZDsKICAgICAgICBjcm9zc0ZvcmtEYXRhLmFtb3VudCA9IF9hbW91bnQqc2F0b3NoaV9idGhfZGVjaW1hbHM7CiAgICAgICAgCiAgICAgICAgLy8gYWRkIGZ1bmQgZm9yIGFkZHJlc3MKICAgICAgICBpZiAoYmFsYW5jZU9mW2Nyb3NzRm9ya0Z1bmREZXBvc2l0XSA8IGNyb3NzRm9ya0RhdGEuYW1vdW50KSB7CiAgICAgICAgICAgIExvZ0Nyb3NzRm9yayhfcmVxdWVzdElkLCBjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyLCBjcm9zc0ZvcmtEYXRhLmFtb3VudCwgRm9ya1Jlc3VsdENvZGUuTk9UX0VOT1VHSF9CQUxBTkNFKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBiYWxhbmNlT2ZbY3Jvc3NGb3JrRnVuZERlcG9zaXRdIC09IGNyb3NzRm9ya0RhdGEuYW1vdW50OwogICAgICAgIGJhbGFuY2VPZltjcm9zc0ZvcmtEYXRhLnJlY2VpdmVyXSArPSBjcm9zc0ZvcmtEYXRhLmFtb3VudDsKICAgICAgICBpZiAocmVmZXJCZW5lZml0UmF0ZSA+IDApIHsKICAgICAgICAgICAgY3Jvc3NGb3JrRGF0YS5yZWZlckNvZGVIYXNoID0gX3JlZmVyQ29kZUhhc2g7CiAgICAgICAgICAgIHJlZmVyQmVuZWZpdHNbX3JlZmVyQ29kZUhhc2hdICs9IGNyb3NzRm9ya0RhdGEuYW1vdW50IC8gcmVmZXJCZW5lZml0UmF0ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgTG9nQ3Jvc3NGb3JrKF9yZXF1ZXN0SWQsIGNyb3NzRm9ya0RhdGEucmVjZWl2ZXIsIGNyb3NzRm9ya0RhdGEuYW1vdW50LCBGb3JrUmVzdWx0Q29kZS5TVUNDRVNTKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJpZ2dlckNyb3NzRm9yayhzdHJpbmcgX2J0Y0FkZHJlc3MpIGlzQ3Jvc3NGb3JraW5nIHB1YmxpYyByZXR1cm5zKEZvcmtSZXN1bHRDb2RlKSB7CiAgICAgICAgYnl0ZXMzMiBidGNBZGRyZXNzSGFzaCA9IGtlY2NhazI1NihfYnRjQWRkcmVzcyk7CiAgICAgICAgaWYgKGNyb3NzRm9ya0lkc1tfYnRjQWRkcmVzc10gPiAwKSB7CiAgICAgICAgICAgIExvZ1RyaWdnZXJDcm9zc0ZvcmsoYnRjQWRkcmVzc0hhc2gsIGNyb3NzRm9ya0lkc1tfYnRjQWRkcmVzc10sIEZvcmtSZXN1bHRDb2RlLlJFQ0VJVkVEKTsKICAgICAgICAgICAgcmV0dXJuIEZvcmtSZXN1bHRDb2RlLlJFQ0VJVkVEOwogICAgICAgIH0KCiAgICAgICAgY3Jvc3NGb3JrQ291bnQgKz0gMTsKICAgICAgICBDcm9zc0ZvcmtEYXRhIHN0b3JhZ2UgY3Jvc3NGb3JrRGF0YSA9IGNyb3NzRm9ya01hcHBpbmdbY3Jvc3NGb3JrQ291bnRdOwogICAgICAgIGNyb3NzRm9ya0RhdGEuYnRjQWRkcmVzcyA9IF9idGNBZGRyZXNzOwogICAgICAgIGNyb3NzRm9ya0RhdGEucmVjZWl2ZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGNyb3NzRm9ya0RhdGEuYW1vdW50ID0gMDsKICAgICAgICBjcm9zc0ZvcmtEYXRhLmNyZWF0ZVRpbWUgPSBub3c7CiAgICAgICAgQ3Jvc3NGb3JrRGlzdHJpYnV0aW9uIGNyb3NzZm9yayA9IENyb3NzRm9ya0Rpc3RyaWJ1dGlvbihjcm9zc0ZvcmtEaXN0cmlidXRpb24pOwogICAgICAgIGNyb3NzZm9yay5nZXREaXN0cmlidXRlZEFtb3VudChjcm9zc0ZvcmtDb3VudCwgX2J0Y0FkZHJlc3MsIG1zZy5zZW5kZXIpOwogICAgICAgIExvZ1RyaWdnZXJDcm9zc0ZvcmsoYnRjQWRkcmVzc0hhc2gsIGNyb3NzRm9ya0lkc1tfYnRjQWRkcmVzc10sIEZvcmtSZXN1bHRDb2RlLlRSSUdHRVJFRCk7CiAgICAgICAgcmV0dXJuIEZvcmtSZXN1bHRDb2RlLlRSSUdHRVJFRDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUgKF90byAhPSAweDApOwogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VPZltfZnJvbV0gPiBfdmFsdWUpOwogICAgICAgIHJlcXVpcmUgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOwogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbX2Zyb21dKTsKICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W190b10pOwogICAgICAgIGJhbGFuY2VPZltfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VPZltfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmcmVlemVBY2NvdW50KGFkZHJlc3MgX3RhcmdldCwgYm9vbCBfZnJlZXplKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBmcm96ZW5BY2NvdW50W190YXJnZXRdID0gX2ZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyhfdGFyZ2V0LCBfZnJlZXplKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnV5KCkgcGF5YWJsZSBpc1RyYWRpbmcgcHVibGljIHsKICAgICAgICB1aW50IGFtb3VudCA9IG1zZy52YWx1ZSAvIGJ1eVByaWNlOwogICAgICAgIF90cmFuc2Zlcih0aGlzLCBtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGwodWludDI1NiBhbW91bnQpIGlzVHJhZGluZyBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID49IGFtb3VudCAqIHNlbGxQcmljZSk7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCk7CiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnQgKiBzZWxsUHJpY2UpOwogICAgfQogICAgCiAgICAKfQ=='.
	

]
