Class {
	#name : #SRT0b037f989ae55f747b5134bdf708973460ae4661,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0b037f989ae55f747b5134bdf708973460ae4661 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIENyb3dkc2FsZQogKiBAZGV2IENyb3dkc2FsZSBpcyBhIGJhc2UgY29udHJhY3QgZm9yIG1hbmFnaW5nIGEgdG9rZW4gY3Jvd2RzYWxlLgogKiBDcm93ZHNhbGVzIGhhdmUgYSBzdGFydCBhbmQgZW5kIHRpbWVzdGFtcHMsIHdoZXJlIGludmVzdG9ycyBjYW4gbWFrZQogKiB0b2tlbiBwdXJjaGFzZXMgYW5kIHRoZSBjcm93ZHNhbGUgd2lsbCBhc3NpZ24gdGhlbSB0b2tlbnMgYmFzZWQKICogb24gYSB0b2tlbiBwZXIgRVRIIHJhdGUuIEZ1bmRzIGNvbGxlY3RlZCBhcmUgZm9yd2FyZGVkIHRvIGEgd2FsbGV0CiAqIGFzIHRoZXkgYXJyaXZlLgogKi8KIAogCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHRva2VuQmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUodG9rZW5CYWxhbmNlc1ttc2cuc2VuZGVyXT49X3ZhbHVlKTsKICAgIHRva2VuQmFsYW5jZXNbbXNnLnNlbmRlcl0gPSB0b2tlbkJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgdG9rZW5CYWxhbmNlc1tfdG9dID0gdG9rZW5CYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiB0b2tlbkJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKY29udHJhY3QgRFJJVlJOZXR3b3JrVG9rZW4gaXMgQmFzaWNUb2tlbixPd25hYmxlIHsKCiAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogICAKICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkRSSVZSIE5ldHdvcmsiOwogICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJEVlIiOwogICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFkgPSA3NTAwMDAwMDA7CiAgLyoqCiAgICogQGRldiBDb250cnVjdG9yIHRoYXQgZ2l2ZXMgbXNnLnNlbmRlciBhbGwgb2YgZXhpc3RpbmcgdG9rZW5zLgogICAqLwogICAgZnVuY3Rpb24gRFJJVlJOZXR3b3JrVG9rZW4oYWRkcmVzcyB3YWxsZXQpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHRvdGFsU3VwcGx5ID0gSU5JVElBTF9TVVBQTFkgKiAxMCAqKiAxODsKICAgICAgICB0b2tlbkJhbGFuY2VzW3dhbGxldF0gPSB0b3RhbFN1cHBseTsgICAvL1NpbmNlIHdlIGRpdmlkZWQgdGhlIHRva2VuIGludG8gMTBeMTggcGFydHMKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3Mgd2FsbGV0LCBhZGRyZXNzIGJ1eWVyLCB1aW50MjU2IHRva2VuQW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgcmVxdWlyZSh0b2tlbkJhbGFuY2VzW3dhbGxldF0gPj0gdG9rZW5BbW91bnQpOyAgICAgICAgICAgICAgIC8vIGNoZWNrcyBpZiBpdCBoYXMgZW5vdWdoIHRvIHNlbGwKICAgICAgdG9rZW5CYWxhbmNlc1tidXllcl0gPSB0b2tlbkJhbGFuY2VzW2J1eWVyXS5hZGQodG9rZW5BbW91bnQpOyAgICAgICAgICAgICAgICAgIC8vIGFkZHMgdGhlIGFtb3VudCB0byBidXllcidzIGJhbGFuY2UKICAgICAgdG9rZW5CYWxhbmNlc1t3YWxsZXRdID0gdG9rZW5CYWxhbmNlc1t3YWxsZXRdLnN1Yih0b2tlbkFtb3VudCk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VidHJhY3RzIGFtb3VudCBmcm9tIHNlbGxlcidzIGJhbGFuY2UKICAgICAgVHJhbnNmZXIod2FsbGV0LCBidXllciwgdG9rZW5BbW91bnQpOyAKICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIodG9rZW5BbW91bnQpOwogICAgfQogICAgZnVuY3Rpb24gc2hvd015VG9rZW5CYWxhbmNlKGFkZHJlc3MgYWRkcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludCB0b2tlbkJhbGFuY2UpIHsKICAgICAgICB0b2tlbkJhbGFuY2UgPSB0b2tlbkJhbGFuY2VzW2FkZHJdOwogICAgfQp9CmNvbnRyYWN0IERyaXZyQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKIAogIC8vIFRoZSB0b2tlbiBiZWluZyBzb2xkCiAgRFJJVlJOZXR3b3JrVG9rZW4gcHVibGljIHRva2VuOwoKICAvLyBzdGFydCBhbmQgZW5kIHRpbWVzdGFtcHMgd2hlcmUgaW52ZXN0bWVudHMgYXJlIGFsbG93ZWQgKGJvdGggaW5jbHVzaXZlKQogIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZTsKICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lOwoKICAvLyBhZGRyZXNzIHdoZXJlIGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICAvLyBhZGRyZXNzIHdoZXJlIHRva2VucyBhcmUgZGVwb3NpdGVkIGFuZCBmcm9tIHdoZXJlIHdlIHNlbmQgdG9rZW5zIHRvIGJ1eWVycwogIGFkZHJlc3MgcHVibGljIHdhbGxldDsKCiAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkKICB1aW50MjU2IHB1YmxpYyByYXRlUGVyV2VpID0gMjAwMDA7CgogIC8vIGFtb3VudCBvZiByYWlzZWQgbW9uZXkgaW4gd2VpCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwogIHVpbnQyNTYgcHVibGljIGR1cmF0aW9uID0gNzUgZGF5czsgLy8yIHdlZWtzIGFuZCAyIG1vbnRocyBhcmUgNzUgZGF5cwogIHVpbnQyNTYgVE9LRU5TX1NPTEQ7CiAgdWludDI1NiBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVJbnZlc3RtZW50UGhhc2UgPSAxNzI1MDAwMDAgKiAxMCAqKiAxODsKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZUluUHJlSUNPUGhhc2UgPSAzOTI1MDAwMDAgKiAxMCAqKiAxODsKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZUluSUNPUGhhc2UgPSA2NTUwMDAwMDAgKiAxMCAqKiAxODsKICB1aW50MjU2IG1heFRva2Vuc1RvU2FsZSA9IDY1NTAwMDAwMCAqIDEwICoqIDE4OwogIAogIAogIC8qKgogICAqIGV2ZW50IGZvciB0b2tlbiBwdXJjaGFzZSBsb2dnaW5nCiAgICogQHBhcmFtIHB1cmNoYXNlciB3aG8gcGFpZCBmb3IgdGhlIHRva2VucwogICAqIEBwYXJhbSBiZW5lZmljaWFyeSB3aG8gZ290IHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gdmFsdWUgd2VpcyBwYWlkIGZvciBwdXJjaGFzZQogICAqIEBwYXJhbSBhbW91bnQgYW1vdW50IG9mIHRva2VucyBwdXJjaGFzZWQKICAgKi8KICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IERlYnVnKHN0cmluZyBtZXNzYWdlKTsKCiAgZnVuY3Rpb24gRHJpdnJDcm93ZHNhbGUodWludDI1NiBfc3RhcnRUaW1lLCBhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyAKICB7CiAgICByZXF1aXJlKF9zdGFydFRpbWUgPj0gbm93KTsKICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7ICAgCiAgICBlbmRUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247CiAgICAKICAgIHJlcXVpcmUoZW5kVGltZSA+PSBzdGFydFRpbWUpOwogICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CgogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHRva2VuID0gY3JlYXRlVG9rZW5Db250cmFjdCh3YWxsZXQpOwogIH0KICAKICAvLyBjcmVhdGVzIHRoZSB0b2tlbiB0byBiZSBzb2xkLgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoYWRkcmVzcyB3YWxsKSBpbnRlcm5hbCByZXR1cm5zIChEUklWUk5ldHdvcmtUb2tlbikgewogICAgcmV0dXJuIG5ldyBEUklWUk5ldHdvcmtUb2tlbih3YWxsKTsKICB9CgogIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICBidXlUb2tlbnMobXNnLnNlbmRlcik7CiAgfQoKICAgIGZ1bmN0aW9uIGRldGVybWluZUJvbnVzKHVpbnQgdG9rZW5zKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgYm9udXMpIAogICAgewogICAgICAgIHVpbnQyNTYgdGltZUVsYXBzZWQgPSBub3cgLSBzdGFydFRpbWU7CiAgICAgICAgdWludDI1NiB0aW1lRWxhcHNlZEluRGF5cyA9IHRpbWVFbGFwc2VkLmRpdigxIGRheXMpOwogICAgICAgIGlmICh0aW1lRWxhcHNlZEluRGF5cyA8MTUpCiAgICAgICAgewogICAgICAgICAgICBpZiAoVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVJbnZlc3RtZW50UGhhc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vMTUlIGJvbnVzCiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoMTUpOyAvLzE1JSBib251cwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xEICsgdG9rZW5zICsgYm9udXMgPD0gbWF4VG9rZW5zVG9TYWxlSW5Qcml2YXRlSW52ZXN0bWVudFBoYXNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChUT0tFTlNfU09MRCA+PSBtYXhUb2tlbnNUb1NhbGVJblByaXZhdGVJbnZlc3RtZW50UGhhc2UgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJblByZUlDT1BoYXNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoMTApOyAvLzEwJSBib251cwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xEICsgdG9rZW5zICsgYm9udXMgPD0gbWF4VG9rZW5zVG9TYWxlSW5QcmVJQ09QaGFzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoVE9LRU5TX1NPTEQgPj0gbWF4VG9rZW5zVG9TYWxlSW5QcmVJQ09QaGFzZSAmJiBUT0tFTlNfU09MRCA8IG1heFRva2Vuc1RvU2FsZUluSUNPUGhhc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gdG9rZW5zLm11bCg1KTsgLy81JSBib251cwogICAgICAgICAgICAgICAgYm9udXMgPSBib251cy5kaXYoMTAwKTsKICAgICAgICAgICAgICAgIHJlcXVpcmUgKFRPS0VOU19TT0xEICsgdG9rZW5zICsgYm9udXMgPD0gbWF4VG9rZW5zVG9TYWxlSW5JQ09QaGFzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHRpbWVFbGFwc2VkSW5EYXlzID49IDE1ICYmIHRpbWVFbGFwc2VkSW5EYXlzPDQzKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKFRPS0VOU19TT0xEIDwgbWF4VG9rZW5zVG9TYWxlSW5QcmVJQ09QaGFzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYm9udXMgPSB0b2tlbnMubXVsKDEwKTsgLy8xMCUgYm9udXMKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRCArIHRva2VucyArIGJvbnVzIDw9IG1heFRva2Vuc1RvU2FsZUluUHJlSUNPUGhhc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKFRPS0VOU19TT0xEID49IG1heFRva2Vuc1RvU2FsZUluUHJlSUNPUGhhc2UgJiYgVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklDT1BoYXNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoNSk7IC8vNSUgYm9udXMKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRCArIHRva2VucyArIGJvbnVzIDw9IG1heFRva2Vuc1RvU2FsZUluSUNPUGhhc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh0aW1lRWxhcHNlZEluRGF5cyA+PSA0MyAmJiB0aW1lRWxhcHNlZEluRGF5czw9NzUpCiAgICAgICAgewogICAgICAgICAgICBpZiAoVE9LRU5TX1NPTEQgPCBtYXhUb2tlbnNUb1NhbGVJbklDT1BoYXNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBib251cyA9IHRva2Vucy5tdWwoNSk7IC8vNSUgYm9udXMKICAgICAgICAgICAgICAgIGJvbnVzID0gYm9udXMuZGl2KDEwMCk7CiAgICAgICAgICAgICAgICByZXF1aXJlIChUT0tFTlNfU09MRCArIHRva2VucyArIGJvbnVzIDw9IG1heFRva2Vuc1RvU2FsZUluSUNPUGhhc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJvbnVzID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIAogICAgICAgIHsKICAgICAgICAgICAgYm9udXMgPSAwOwogICAgICAgIH0KICAgIH0KICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICAvLyBNaW5pbXVtIHB1cmNoYXNlIGNhbiBiZSBvZiAxIEVUSAogIAogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSB7CiAgICAKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwICYmIHZhbGlkUHVyY2hhc2UoKSAmJiBUT0tFTlNfU09MRDxtYXhUb2tlbnNUb1NhbGUpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gMSAqIDEwICoqIDE3KTsKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgCiAgICAvLyBjYWxjdWxhdGUgdG9rZW4gYW1vdW50IHRvIGJlIGNyZWF0ZWQKICAgIAogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHJhdGVQZXJXZWkpOwogICAgdWludDI1NiBib251cyA9IGRldGVybWluZUJvbnVzKHRva2Vucyk7CiAgICB0b2tlbnMgPSB0b2tlbnMuYWRkKGJvbnVzKTsKICAgIHJlcXVpcmUoVE9LRU5TX1NPTEQrdG9rZW5zPD1tYXhUb2tlbnNUb1NhbGUpOwogICAgCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgIHRva2VuLm1pbnQod2FsbGV0LCBiZW5lZmljaWFyeSwgdG9rZW5zKTsgCiAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CiAgICBUT0tFTlNfU09MRCA9IFRPS0VOU19TT0xELmFkZCh0b2tlbnMpOwogICAgZm9yd2FyZEZ1bmRzKCk7CiAgfQoKICAvLyBzZW5kIGV0aGVyIHRvIHRoZSBmdW5kIGNvbGxlY3Rpb24gd2FsbGV0CiAgLy8gb3ZlcnJpZGUgdG8gY3JlYXRlIGN1c3RvbSBmdW5kIGZvcndhcmRpbmcgbWVjaGFuaXNtcwogIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgIHdhbGxldC50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KCiAgLy8gQHJldHVybiB0cnVlIGlmIHRoZSB0cmFuc2FjdGlvbiBjYW4gYnV5IHRva2VucwogIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBib29sIHdpdGhpblBlcmlvZCA9IG5vdyA+PSBzdGFydFRpbWUgJiYgbm93IDw9IGVuZFRpbWU7CiAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IG1zZy52YWx1ZSAhPSAwOwogICAgcmV0dXJuIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2U7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBub3cgPiBlbmRUaW1lOwogIH0KICAKICAgIGZ1bmN0aW9uIHNldFByaWNlUmF0ZSh1aW50MjU2IG5ld1ByaWNlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gd2FsbGV0KTsKICAgICAgICByYXRlUGVyV2VpID0gbmV3UHJpY2U7CiAgICB9Cn0='.
	

]
