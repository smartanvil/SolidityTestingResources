Class {
	#name : #SRTa6ba0aa61ccd254fd92d548dfe87d06533649c12,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa6ba0aa61ccd254fd92d548dfe87d06533649c12 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgICovCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vIFJldHVybiB0cnVlIGlmIHNlbmRlciBpcyBvd25lciBvciBzdXBlci1vd25lciBvZiB0aGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIGlzT3duZXIoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kIGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICAqCiAgICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCiAgICAvKioKICAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKY29udHJhY3QgQ1RFU2FsZSBpcyBPd25hYmxlLCBTdGFuZGFyZFRva2VuIHsKCgogICAgdWludDggcHVibGljIGNvbnN0YW50IFRPS0VOX0RFQ0lNQUxTID0gMTg7ICAvLyBkZWNpbWFscwogICAgdWludDggcHVibGljIGNvbnN0YW50IFBSRV9TQUxFX1BFUkNFTlQgPSAyMDsgLy8gMjAlCgogICAgLy8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4KICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJDYXJlZXIgVHJ1c3QgRWNvc3lzdGVtIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkNURSI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSBUT0tFTl9ERUNJTUFMUzsgLy8gMTggZGVjaW1hbHMgaXMgdGhlIHN0cm9uZ2x5IHN1Z2dlc3RlZCBkZWZhdWx0LCBhdm9pZCBjaGFuZ2luZyBpdAoKCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDUwMDAwMDAwMDAgKiAoMTAgKiogdWludDI1NihUT0tFTl9ERUNJTUFMUykpOyAvLyBGaXZlIGJpbGxpb24KICAgIHVpbnQyNTYgcHVibGljIHByZVNhbGVTdXBwbHk7IC8vIFBSRV9TQUxFX1BFUkNFTlQgLyAyMCAqIHRvdGFsU3VwcGx5CiAgICB1aW50MjU2IHB1YmxpYyBzb2xkU3VwcGx5ID0gMDsgLy8gY3VycmVudCBzdXBwbHkgdG9rZW5zIGZvciBzZWxsCiAgICB1aW50MjU2IHB1YmxpYyBzZWxsU3VwcGx5ID0gMDsKICAgIHVpbnQyNTYgcHVibGljIGJ1eVN1cHBseSA9IDA7CiAgICBib29sIHB1YmxpYyBzdG9wU2VsbCA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgc3RvcEJ1eSA9IGZhbHNlOwoKICAgIC8qCiAgICAJU2VsbC9CdXkgcHJpY2VzIGluIHdlaQogICAgCTEgRVRIID0gMTBeMTggb2Ygd2VpCiAgICAqLwogICAgdWludDI1NiBwdWJsaWMgYnV5RXhjaGFuZ2VSYXRlID0gODAwMDsgICAvLyA4MDAwIENURSB0b2tlbnMgcGVyIDEgRVRIcwogICAgdWludDI1NiBwdWJsaWMgc2VsbEV4Y2hhbmdlUmF0ZSA9IDQwMDAwOyAgLy8gMSBFVEggbmVlZCA0MDAwMCBDVEUgdG9rZW4KICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OyAgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBFVEggZm9yIENURSBUZWFtLgoKCiAgICBib29sIHB1YmxpYyBhbGxvd1RyYW5zZmVycyA9IHRydWU7IC8vIGlmIHRydWUgdGhlbiBhbGxvdyBjb2luIHRyYW5zZmVycwoKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBmcm96ZW5BY2NvdW50OwoKICAgIGJvb2wgcHVibGljIGVuYWJsZUludGVybmFsTG9jayA9IHRydWU7IC8vIGlmIGZhbHNlIHRoZW4gYWxsb3cgY29pbiB0cmFuc2ZlcnMgYnkgaW50ZXJuYWwgc2VsbCBsb2NrCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBpbnRlcm5hbExvY2tBY2NvdW50OwoKCgogICAgLyogVGhpcyBnZW5lcmF0ZXMgYSBwdWJsaWMgZXZlbnQgb24gdGhlIGJsb2NrY2hhaW4gdGhhdCB3aWxsIG5vdGlmeSBjbGllbnRzICovCiAgICBldmVudCBGcm96ZW5GdW5kcyhhZGRyZXNzIHRhcmdldCwgYm9vbCBmcm96ZW4pOwogICAgZXZlbnQgSW5jcmVhc2VQcmVTYWxlU3VwcGx5KHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IERlY3JlYXNlUHJlU2FsZVN1cHBseSh1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBJbmNyZWFzZVNvbGRTYWxlU3VwcGx5KHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IERlY3JlYXNlU29sZFNhbGVTdXBwbHkodWludDI1NiBfdmFsdWUpOwoKCiAgICAvKiBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uIENURVNhbGUoKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7ICAgICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgICAgIHByZVNhbGVTdXBwbHkgPSB0b3RhbFN1cHBseSAqIFBSRV9TQUxFX1BFUkNFTlQgLyAxMDA7ICAgICAgLy8gcHJlU2FsZVN1cHBseQoKICAgICAgICBldGhGdW5kRGVwb3NpdCA9IG1zZy5zZW5kZXI7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVwb3NpdCBldGgKICAgICAgICBhbGxvd1RyYW5zZmVycyA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIF9pc1VzZXJJbnRlcm5hbExvY2soKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gKGVuYWJsZUludGVybmFsTG9jayAmJiBpbnRlcm5hbExvY2tBY2NvdW50W21zZy5zZW5kZXJdKTsKICAgIH0KCiAgICAvLy8gQGRldiBpbmNyZWFzZSB0aGUgdG9rZW4ncyBzdXBwbHkKICAgIGZ1bmN0aW9uIGluY3JlYXNlUHJlU2FsZVN1cHBseSAodWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUgKF92YWx1ZSArIHByZVNhbGVTdXBwbHkgPCB0b3RhbFN1cHBseSk7CiAgICAgICAgcHJlU2FsZVN1cHBseSArPSBfdmFsdWU7CiAgICAgICAgSW5jcmVhc2VQcmVTYWxlU3VwcGx5KF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgZGVjcmVhc2UgdGhlIHRva2VuJ3Mgc3VwcGx5CiAgICBmdW5jdGlvbiBkZWNyZWFzZVByZVNhbGVTdXBwbHkgKHVpbnQyNTYgX3ZhbHVlKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlIChwcmVTYWxlU3VwcGx5IC0gX3ZhbHVlID4gMCk7CiAgICAgICAgcHJlU2FsZVN1cHBseSAtPSBfdmFsdWU7CiAgICAgICAgRGVjcmVhc2VQcmVTYWxlU3VwcGx5KF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgaW5jcmVhc2UgdGhlIHRva2VuJ3Mgc3VwcGx5CiAgICBmdW5jdGlvbiBpbmNyZWFzZVNvbGRTYWxlU3VwcGx5ICh1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoX3ZhbHVlICsgc29sZFN1cHBseSA8IHRvdGFsU3VwcGx5KTsKICAgICAgICBzb2xkU3VwcGx5ICs9IF92YWx1ZTsKICAgICAgICBJbmNyZWFzZVNvbGRTYWxlU3VwcGx5KF92YWx1ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgZGVjcmVhc2UgdGhlIHRva2VuJ3Mgc3VwcGx5CiAgICBmdW5jdGlvbiBkZWNyZWFzZVNvbGRTYWxlU3VwcGx5ICh1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZSAoc29sZFN1cHBseSAtIF92YWx1ZSA+IDApOwogICAgICAgIHNvbGRTdXBwbHkgLT0gX3ZhbHVlOwogICAgICAgIERlY3JlYXNlU29sZFNhbGVTdXBwbHkoX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBDcmVhdGUgYG1pbnRlZEFtb3VudGAgdG9rZW5zIGFuZCBzZW5kIGl0IHRvIGB0YXJnZXRgCiAgICAvLy8gQHBhcmFtIHRhcmdldCBBZGRyZXNzIHRvIHJlY2VpdmUgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBtaW50ZWRBbW91bnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgaXQgd2lsbCByZWNlaXZlCiAgICBmdW5jdGlvbiBtaW50VG9rZW4oYWRkcmVzcyB0YXJnZXQsIHVpbnQyNTYgbWludGVkQW1vdW50KSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBiYWxhbmNlc1t0YXJnZXRdICs9IG1pbnRlZEFtb3VudDsKICAgICAgICB0b3RhbFN1cHBseSArPSBtaW50ZWRBbW91bnQ7CiAgICAgICAgVHJhbnNmZXIoMCwgdGhpcywgbWludGVkQW1vdW50KTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCB0YXJnZXQsIG1pbnRlZEFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVzdHJveVRva2VuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IGFtb3VudCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgYmFsYW5jZXNbdGFyZ2V0XSAtPSBhbW91bnQ7CiAgICAgICAgdG90YWxTdXBwbHkgLT0gYW1vdW50OwogICAgICAgIFRyYW5zZmVyKHRhcmdldCwgdGhpcywgYW1vdW50KTsKICAgICAgICBUcmFuc2Zlcih0aGlzLCAwLCBhbW91bnQpOwogICAgfQoKCiAgICAvLy8gQG5vdGljZSBgZnJlZXplPyBQcmV2ZW50IHwgQWxsb3dgIGB0YXJnZXRgIGZyb20gc2VuZGluZyAmIHJlY2VpdmluZyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gdGFyZ2V0IEFkZHJlc3MgdG8gYmUgZnJvemVuCiAgICAvLy8gQHBhcmFtIGZyZWV6ZSBlaXRoZXIgdG8gZnJlZXplIGl0IG9yIG5vdAogICAgZnVuY3Rpb24gZnJlZXplQWNjb3VudChhZGRyZXNzIHRhcmdldCwgYm9vbCBmcmVlemUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGZyb3plbkFjY291bnRbdGFyZ2V0XSA9IGZyZWV6ZTsKICAgICAgICBGcm96ZW5GdW5kcyh0YXJnZXQsIGZyZWV6ZSk7CiAgICB9CgogICAgLy8vIEBkZXYgc2V0IEV0aEZ1bmREZXBvc2l0CiAgICBmdW5jdGlvbiBzZXRFdGhGdW5kRGVwb3NpdChhZGRyZXNzIF9ldGhGdW5kRGVwb3NpdCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfZXRoRnVuZERlcG9zaXQgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgZXRoRnVuZERlcG9zaXQgPSBfZXRoRnVuZERlcG9zaXQ7CiAgICB9CgogICAgLy8vIEBkZXYgc2VuZHMgRVRIIHRvIENURSB0ZWFtCiAgICBmdW5jdGlvbiB0cmFuc2ZlckVUSCgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZXRoRnVuZERlcG9zaXQgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgIT0gMCk7CiAgICAgICAgcmVxdWlyZShldGhGdW5kRGVwb3NpdC5zZW5kKHRoaXMuYmFsYW5jZSkpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIEFsbG93IHVzZXJzIHRvIGJ1eSB0b2tlbnMgZm9yIGBfYnV5RXhjaGFuZ2VSYXRlYCBldGggYW5kIHNlbGwgdG9rZW5zIGZvciBgX3NlbGxFeGNoYW5nZVJhdGVgIGV0aAogICAgLy8vIEBwYXJhbSBfc2VsbEV4Y2hhbmdlUmF0ZSB0aGUgdXNlcnMgY2FuIHNlbGwgdG8gdGhlIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9idXlFeGNoYW5nZVJhdGUgdXNlcnMgY2FuIGJ1eSBmcm9tIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VSYXRlKHVpbnQyNTYgX3NlbGxFeGNoYW5nZVJhdGUsIHVpbnQyNTYgX2J1eUV4Y2hhbmdlUmF0ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgc2VsbEV4Y2hhbmdlUmF0ZSA9IF9zZWxsRXhjaGFuZ2VSYXRlOwogICAgICAgIGJ1eUV4Y2hhbmdlUmF0ZSA9IF9idXlFeGNoYW5nZVJhdGU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0RXhjaGFuZ2VTdGF0dXMoYm9vbCBfc3RvcFNlbGwsIGJvb2wgX3N0b3BCdXkpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHN0b3BTZWxsID0gX3N0b3BTZWxsOwogICAgICAgIHN0b3BCdXkgPSBfc3RvcEJ1eTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRBbGxvd1RyYW5zZmVycyhib29sIF9hbGxvd1RyYW5zZmVycykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgYWxsb3dUcmFuc2ZlcnMgPSBfYWxsb3dUcmFuc2ZlcnM7CiAgICB9CgogICAgLy8gQWRtaW4gZnVuY3Rpb24gZm9yIHRyYW5zZmVyIGNvaW5zCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb21BZG1pbihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRFbmFibGVJbnRlcm5hbExvY2soYm9vbCBfaXNFbmFibGUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGVuYWJsZUludGVybmFsTG9jayA9IF9pc0VuYWJsZTsKICAgIH0KCiAgICBmdW5jdGlvbiBsb2NrSW50ZXJuYWxBY2NvdW50KGFkZHJlc3MgdGFyZ2V0LCBib29sIGxvY2spIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUodGFyZ2V0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIGludGVybmFsTG9ja0FjY291bnRbdGFyZ2V0XSA9IGxvY2s7CiAgICB9CgogICAgLy8gc2VsbCB0b2tlbiwgc29sZFN1cHBseSwgbG9ja0FjY291bnQKICAgIGZ1bmN0aW9uIGludGVybmFsU2VsbFRva2VuRnJvbUFkbWluKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYm9vbCBfbG9jaykgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbb3duZXJdKTsKCiAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBzb2xkU3VwcGx5ICs9IF92YWx1ZTsKICAgICAgICBzZWxsU3VwcGx5ICs9IF92YWx1ZTsKCiAgICAgICAgVHJhbnNmZXIob3duZXIsIF90bywgX3ZhbHVlKTsKCiAgICAgICAgaW50ZXJuYWxMb2NrQWNjb3VudFtfdG9dID0gX2xvY2s7ICAgICAvLyBsb2NrIGludGVybmFsU2VsbCBsb2NrCgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCiAgICAvKiAgICAgICAgICAgICAgICAgICAgICAgIEJBU0UgICAgICAgICAgICAgICAgICAgICAqLwogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvLyBAZGV2IG92ZXJyaWRlCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmICghaXNPd25lcigpKSB7CiAgICAgICAgICAgIHJlcXVpcmUgKGFsbG93VHJhbnNmZXJzKTsKICAgICAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfZnJvbV0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlbmRlciBpcyBmcm96ZW4KICAgICAgICAgICAgcmVxdWlyZSghZnJvemVuQWNjb3VudFtfdG9dKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlY2lwaWVudCBpcyBmcm96ZW4KICAgICAgICAgICAgcmVxdWlyZSghX2lzVXNlckludGVybmFsTG9jaygpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlY2lwaWVudCBpcyBpbnRlcm5hbFNlbGxMb2NrCiAgICAgICAgfQogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvLyBAZGV2IG92ZXJyaWRlCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKCFpc093bmVyKCkpIHsKICAgICAgICAgICAgcmVxdWlyZSAoYWxsb3dUcmFuc2ZlcnMpOwogICAgICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W21zZy5zZW5kZXJdKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VuZGVyIGlzIGZyb3plbgogICAgICAgICAgICByZXF1aXJlKCFmcm96ZW5BY2NvdW50W190b10pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVjaXBpZW50IGlzIGZyb3plbgogICAgICAgICAgICByZXF1aXJlKCFfaXNVc2VySW50ZXJuYWxMb2NrKCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVjaXBpZW50IGlzIGludGVybmFsU2VsbExvY2sKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCgogICAgLy8vIEBkZXYgc2VuZCBldGhlciB0byBjb250cmFjdAogICAgZnVuY3Rpb24gcGF5KCkgcGF5YWJsZSBwdWJsaWMge30KCgogICAgLy8vIEBub3RpY2UgQnV5IHRva2VucyBmcm9tIGNvbnRyYWN0IGJ5IHNlbmRpbmcgZXRoZXIKICAgIGZ1bmN0aW9uIGJ1eSgpIHBheWFibGUgcHVibGljIHsKICAgICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZS5tdWwoYnV5RXhjaGFuZ2VSYXRlKTsKCiAgICAgICAgcmVxdWlyZSghc3RvcEJ1eSk7CiAgICAgICAgcmVxdWlyZShhbW91bnQgPD0gYmFsYW5jZXNbb3duZXJdKTsKCiAgICAgICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5zdWIoYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChhbW91bnQpOwoKICAgICAgICBzb2xkU3VwcGx5ICs9IGFtb3VudDsKICAgICAgICBidXlTdXBwbHkgKz0gYW1vdW50OwoKICAgICAgICBUcmFuc2Zlcihvd25lciwgbXNnLnNlbmRlciwgYW1vdW50KTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBTZWxsIGBhbW91bnRgIHRva2VucyB0byBjb250cmFjdAogICAgLy8vIEBwYXJhbSBhbW91bnQgYW1vdW50IG9mIHRva2VucyB0byBiZSBzb2xkCiAgICBmdW5jdGlvbiBzZWxsKHVpbnQyNTYgYW1vdW50KSBwdWJsaWMgewogICAgICAgIHVpbnQyNTYgZXRoQW1vdW50ID0gYW1vdW50LmRpdihzZWxsRXhjaGFuZ2VSYXRlKTsKICAgICAgICByZXF1aXJlKCFzdG9wU2VsbCk7CiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gZXRoQW1vdW50KTsgICAgICAvLyBjaGVja3MgaWYgdGhlIGNvbnRyYWN0IGhhcyBlbm91Z2ggZXRoZXIgdG8gYnV5CiAgICAgICAgcmVxdWlyZShldGhBbW91bnQgPj0gMSk7ICAgICAgLy8gY2hlY2tzIGlmIHRoZSBjb250cmFjdCBoYXMgZW5vdWdoIGV0aGVyIHRvIGJ1eQoKICAgICAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IGFtb3VudCk7ICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbb3duZXJdICsgYW1vdW50ID4gYmFsYW5jZXNbb3duZXJdKTsgICAgICAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIHJlcXVpcmUoIWZyb3plbkFjY291bnRbbXNnLnNlbmRlcl0pOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlbmRlciBpcyBmcm96ZW4KICAgICAgICByZXF1aXJlKCFfaXNVc2VySW50ZXJuYWxMb2NrKCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVjaXBpZW50IGlzIGludGVybmFsU2VsbExvY2sKCiAgICAgICAgLy8gU2FmZU1hdGguYWRkIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihhbW91bnQpOwoKICAgICAgICBzb2xkU3VwcGx5IC09IGFtb3VudDsKICAgICAgICBzZWxsU3VwcGx5ICs9IGFtb3VudDsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgb3duZXIsIGFtb3VudCk7CgogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoQW1vdW50KTsgICAgICAgICAgLy8gc2VuZHMgZXRoZXIgdG8gdGhlIHNlbGxlci4gSXQncyBpbXBvcnRhbnQgdG8gZG8gdGhpcyBsYXN0IHRvIGF2b2lkIHJlY3Vyc2lvbiBhdHRhY2tzCiAgICB9Cn0='.
	

]
