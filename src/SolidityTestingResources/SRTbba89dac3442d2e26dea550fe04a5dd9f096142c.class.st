Class {
	#name : #SRTbba89dac3442d2e26dea550fe04a5dd9f096142c,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTbba89dac3442d2e26dea550fe04a5dd9f096142c >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNpZXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBQYXVzZUluZnJhc3RydWN0dXJlIGlzIE93bmFibGUgewogICAgZXZlbnQgdHJpZ2dlclVucGF1c2VFdmVudCgpOwogICAgZXZlbnQgdHJpZ2dlclBhdXNlRXZlbnQoKTsKCiAgICBib29sIHB1YmxpYyBwYXVzZWQ7CgogICAgLyoqCiAgICAgKiBjb25zdHJ1Y3RvciBhc3NpZ25zIGluaXRpYWwgcGF1c2VkIHN0YXRlCiAgICAgKiBAcGFyYW0gX3BhdXNlZCBzZWxlY3RzIHRoZSBpbml0aWFsIHBhdXNlIHN0YXRlLgogICAgICovCiAgICBmdW5jdGlvbiBQYXVzZUluZnJhc3RydWN0dXJlKGJvb2wgX3BhdXNlZCl7CiAgICAgICAgcGF1c2VkID0gX3BhdXNlZDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgbW9kaWZpZXIgdG8gYWxsb3cgYWN0aW9ucyBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IElTIHBhdXNlZAogICAgICovCiAgICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgICAgIGlmIChwYXVzZWQpIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICAgKi8KICAgIG1vZGlmaWVyIHdoZW5QYXVzZWQgewogICAgICAgIHJlcXVpcmUgKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KfQoKCmNvbnRyYWN0IFN0YXJ0YWJsZSBpcyBQYXVzZUluZnJhc3RydWN0dXJlIHsKICBmdW5jdGlvbiBTdGFydGFibGUgKCkgUGF1c2VJbmZyYXN0cnVjdHVyZSh0cnVlKXsKICB9CgogIC8vIGNhbGxlZCBieSB0aGUgb3duZXIgdG8gc3RhcnQKICBmdW5jdGlvbiBzdGFydCgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgdHJpZ2dlclVucGF1c2VFdmVudCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBTdGFydGFibGVNaW50YWJsZVRva2VuIGlzIFN0YXJ0YWJsZSwgTWludGFibGVUb2tlbiB7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpewogICAgICAgIHJldHVybiBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9Cgpjb250cmFjdCBTZXJhdGlvQ29pbiBpcyBTdGFydGFibGVNaW50YWJsZVRva2VuIHsKICAgIC8vIE5hbWUgb2YgdGhlIHRva2VuCiAgICBzdHJpbmcgY29uc3RhbnQgcHVibGljIG5hbWUgPSAiU2VyYXRpb0NvaW4iOwogICAgLy8gVG9rZW4gYWJicmV2aWF0aW9uCiAgICBzdHJpbmcgY29uc3RhbnQgcHVibGljIHN5bWJvbCA9ICJTRVIiOwogICAgLy8gRGVjaW1hbCBwbGFjZXMKICAgIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyBkZWNpbWFscyA9IDc7CiAgICAvLyBaZXJvcyBhZnRlciB0aGUgcG9pbnQKICAgIHVpbnQzMiBjb25zdGFudCBwdWJsaWMgREVDSU1BTF9aRVJPUyA9IDEwMDAwMDAwOwp9CgovKioKICoKICogQHRpdGxlIFNlcmF0aW8gU3Rha2UKICoKICogVE9ETyBXaGl0ZXBhcGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9zZXJhdGlvL3doaXRlcGFwZXIvYmxvYi9tYXN0ZXIvU2VyYXRpbyUyMEVudGVycHJpc2UlMjBQbGF0Zm9ybSUyMCgyOSUyME1hcmNoJTIwMjAxNyklMjAlNUJ2LiUyMDQuMDMlNUQucGRmCiAqCiAqLwpjb250cmFjdCBTZXJhdGlvSUNPIGlzIE93bmFibGV7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKCiAgICAvLyBsb2dnZWQgZXZlbnRzOgogICAgLy8gRnVuZHMgaGFzIGFycml2ZWQgaW50byB0aGUgd2FsbGV0IChyZWNvcmQgaG93IG11Y2gpLgogICAgZXZlbnQgRGVwb3NpdEFjY2VwdGVkRXZlbnQoYWRkcmVzcyBfZnJvbSwgdWludCB2YWx1ZSk7CgogICAgLy8gTWluaW11bSBpbnZlc3RtZW50IElDTyBwaGFzZSBvbmUKICAgIHVpbnQxNiBjb25zdGFudCBwdWJsaWMgTUlOX0lOVkVTVE1FTlRfSUNPX1BIQVNFX09ORV9QT1VORFMgPSA1MDAwOwogICAgLy8gTWluaW11bSBpbnZlc3RtZW50IElDTyBwaGFzZSB0d28KICAgIHVpbnQxNiBjb25zdGFudCBwdWJsaWMgTUlOX0lOVkVTVE1FTlRfSUNPX1BIQVNFX1RXT19QT1VORFMgPSAxMDAwOwogICAgLy8gSW52ZXN0bWVudCBjYXAgSUNPIHBoYXNlIG9uZQogICAgdWludDMyIGNvbnN0YW50IHB1YmxpYyBJTlZFU1RNRU5UX0NBUF9JQ09fUEhBU0VfT05FX1BPVU5EUyA9IDEwMDAwMDA7CiAgICAvLyBJbnZlc3RtZW50IGNhcCBJQ08gcGhhc2UgdHdvCiAgICB1aW50MzIgcHVibGljIGludmVzdG1lbnRDYXBJY29QaGFzZVR3b1BvdW5kcyA9IDQwMDAwMDAwMDA7CiAgICAvLyBCYXNlIHRva2UgcHJpY2UgaW4gcG91bmQgcGVuY2VzCiAgICB1aW50OCBjb25zdGFudCBCQVNFX1RPS0VOX1BSSUNFX0lOX1BPVU5EX1BFTkNFUyA9IDIwOwoKICAgIGJvb2wgaW52ZXN0bWVudENhcFByZUljb1JlYWNoZWQgPSBmYWxzZTsKCiAgICAvLyBUb3RhbCB2YWx1ZSBpbiB3ZWkKICAgIHVpbnQgdG90YWxWYWx1ZTsKCiAgICB1aW50IHB1YmxpYyB0aW1lU3RhbXBPZkNyb3dkU2FsZVN0YXJ0OwogICAgdWludCBwdWJsaWMgdGltZVN0YW1wT2ZDcm93ZFNhbGVFbmQ7CgogICAgLy8gQWRkcmVzcyBvZiBtdWx0aXNpZyB3YWxsZXQgaG9sZGluZyBldGhlciBmcm9tIHNhbGUKICAgIGFkZHJlc3Mgd2FsbGV0OwoKICAgIHN0cnVjdCBJY29QaGFzZU9uZUNvbmZpZ3sKICAgIHVpbnQgc3RhcnRpbmdUaW1lOwogICAgdWludDggdG9rZW5QcmljZUluUG91bmRQZW5jZXM7CiAgICB9CgogICAgSWNvUGhhc2VPbmVDb25maWdbXSBJY29QaGFzZU9uZUFycmF5OwoKICAgIHVpbnQzMiBwdWJsaWMgZXRoZXJQcmljZUluUG91bmRQZW5jZXMgPSAzMDAwMDsKCiAgICBTZXJhdGlvQ29pbiBwdWJsaWMgc2VyYXRpb0NvaW47CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvciBvZiB0aGUgY29udHJhY3QuCiAgICAgKgogICAgICogUGFzc2VzIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgaG9sZGluZyB0aGUgdmFsdWUuCiAgICAgKiBTZXJhdGlvQ29pbiBjb250cmFjdCBpdHNlbGYgZG9lcyBub3QgaG9sZCBhbnkgdmFsdWUKICAgICAqCiAgICAgKiBAcGFyYW0gbXVsdGlzaWcgYWRkcmVzcyBvZiBNdWx0aVNpZyB3YWxsZXQgd2hpY2ggd2lsbCBob2xkIHRoZSB2YWx1ZQogICAgICovCiAgICBmdW5jdGlvbiBTZXJhdGlvSUNPKGFkZHJlc3MgbXVsdGlzaWcsIHVpbnQgX3RpbWVTdGFtcE9mQ3Jvd2RTYWxlU3RhcnQsIFNlcmF0aW9Db2luIHNlcmF0aW9uQ29pbkFkZHJlc3MpewogICAgICAgIHNlcmF0aW9Db2luID0gU2VyYXRpb0NvaW4oc2VyYXRpb25Db2luQWRkcmVzcyk7CgogICAgICAgIHRpbWVTdGFtcE9mQ3Jvd2RTYWxlU3RhcnQgPSBfdGltZVN0YW1wT2ZDcm93ZFNhbGVTdGFydDsKICAgICAgICB0aW1lU3RhbXBPZkNyb3dkU2FsZUVuZCA9IHRpbWVTdGFtcE9mQ3Jvd2RTYWxlU3RhcnQgKyA0NyBkYXlzOwoKICAgICAgICB3YWxsZXQgPSBtdWx0aXNpZzsKCiAgICAgICAgSWNvUGhhc2VPbmVBcnJheS5wdXNoKEljb1BoYXNlT25lQ29uZmlnKHtzdGFydGluZ1RpbWU6IHRpbWVTdGFtcE9mQ3Jvd2RTYWxlU3RhcnQgKyAgMCBkYXlzLCAgdG9rZW5QcmljZUluUG91bmRQZW5jZXM6ICAxMH0pKTsgLy8gZnJvbSAgMXN0IGRheSB0byAgM3JkIGRheSAtPiA1MCUgZGlzY291bnQKICAgICAgICBJY29QaGFzZU9uZUFycmF5LnB1c2goSWNvUGhhc2VPbmVDb25maWcoe3N0YXJ0aW5nVGltZTogdGltZVN0YW1wT2ZDcm93ZFNhbGVTdGFydCArICAzIGRheXMsICB0b2tlblByaWNlSW5Qb3VuZFBlbmNlczogIDEyfSkpOyAvLyBmcm9tICA0dGggZGF5IHRvICA2dGggZGF5IC0+IDQwJSBkaXNjb3VudAogICAgICAgIEljb1BoYXNlT25lQXJyYXkucHVzaChJY29QaGFzZU9uZUNvbmZpZyh7c3RhcnRpbmdUaW1lOiB0aW1lU3RhbXBPZkNyb3dkU2FsZVN0YXJ0ICsgIDYgZGF5cywgIHRva2VuUHJpY2VJblBvdW5kUGVuY2VzOiAgMTR9KSk7IC8vIGZyb20gIDd0aCBkYXkgdG8gIDl0aCBkYXkgLT4gMzAlIGRpc2NvdW50CiAgICAgICAgSWNvUGhhc2VPbmVBcnJheS5wdXNoKEljb1BoYXNlT25lQ29uZmlnKHtzdGFydGluZ1RpbWU6IHRpbWVTdGFtcE9mQ3Jvd2RTYWxlU3RhcnQgKyAgOSBkYXlzLCAgdG9rZW5QcmljZUluUG91bmRQZW5jZXM6ICAxNn0pKTsgLy8gZnJvbSAxMHRoIGRheSB0byAxMnRoIGRheSAtPiAyMCUgZGlzY291bnQKICAgICAgICBJY29QaGFzZU9uZUFycmF5LnB1c2goSWNvUGhhc2VPbmVDb25maWcoe3N0YXJ0aW5nVGltZTogdGltZVN0YW1wT2ZDcm93ZFNhbGVTdGFydCArIDEyIGRheXMsICB0b2tlblByaWNlSW5Qb3VuZFBlbmNlczogIDE4fSkpOyAvLyBmcm9tIDEzdGggZGF5IHRvIDE2dGggZGF5IC0+IDEwJSBkaXNjb3VudAogICAgfQoKICAgIGZ1bmN0aW9uIGdldEljb1BoYXNlT25lVGhyZWVEYXlJbmRleCh1aW50IHRpbWUpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpewogICAgICAgIGZvciAodWludCBpID0gMTsgaSA8PSBJY29QaGFzZU9uZUFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHVpbnQgaW5kZXhUb0V2YWx1YXRlID0gSWNvUGhhc2VPbmVBcnJheS5sZW5ndGgtaTsKICAgICAgICAgICAgaWYgKHRpbWUgPj0gSWNvUGhhc2VPbmVBcnJheVtpbmRleFRvRXZhbHVhdGVdLnN0YXJ0aW5nVGltZSkKICAgICAgICAgICAgICAgIHJldHVybiBpbmRleFRvRXZhbHVhdGU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldEljb1BoYXNlT25lVG9rZW5QcmljZUluUG91bmRQZW5jZXModWludCB0aW1lKSBjb25zdGFudCByZXR1cm5zICh1aW50OCl7CiAgICAgICAgSWNvUGhhc2VPbmVDb25maWcgc3RvcmFnZSB0b2RheXNDb25maWcgPSBJY29QaGFzZU9uZUFycmF5W2dldEljb1BoYXNlT25lVGhyZWVEYXlJbmRleCh0aW1lKV07CiAgICAgICAgcmV0dXJuIHRvZGF5c0NvbmZpZy50b2tlblByaWNlSW5Qb3VuZFBlbmNlczsKICAgIH0KCiAgICBmdW5jdGlvbiBoYXNJY29QaGFzZU9uZUVuZGVkICh1aW50IHRpbWUpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewogICAgICAgIHJldHVybiB0aW1lID49IChJY29QaGFzZU9uZUFycmF5W0ljb1BoYXNlT25lQXJyYXkubGVuZ3RoLTFdLnN0YXJ0aW5nVGltZSArIDQgZGF5cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBGYWxsYmFjayBmdW5jdGlvbjogY2FsbGVkIG9uIGV0aGVyIHNlbnQuCiAgICAgKgogICAgICogSXQgY2FsbHMgdG8gY3JlYXRlU0VSIGZ1bmN0aW9uIHdpdGggbXNnLnNlbmRlcgogICAgICogYXMgYSB2YWx1ZSBmb3IgaG9sZGVyIGFyZ3VtZW50CiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgaGFzQ3Jvd2RTYWxlU3RhcnRlZCBoYXNDcm93ZFNhbGVOb3RZZXRFbmRlZCB7CiAgICAgICAgLy8gY2hlY2sgaWYgaW52ZXN0bWVudCBpcyBtb3JlIHRoYW4gMAogICAgICAgIGlmIChtc2cudmFsdWUgPiAwKXsKICAgICAgICAgICAgbWludFNlclRva2Vucyhtc2cuc2VuZGVyLCBtc2cudmFsdWUsIG5vdyk7CiAgICAgICAgICAgIHJlcXVpcmUgKHdhbGxldC5zZW5kKG1zZy52YWx1ZSkpOwogICAgICAgICAgICBEZXBvc2l0QWNjZXB0ZWRFdmVudChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICBtb2RpZmllciBoYXNDcm93ZFNhbGVTdGFydGVkKCkgewogICAgICAgIHJlcXVpcmUgKG5vdyA+PSB0aW1lU3RhbXBPZkNyb3dkU2FsZVN0YXJ0KTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGhhc0Nyb3dkU2FsZUVuZGVkKCkgewogICAgICAgIHJlcXVpcmUgKG5vdyA+PSB0aW1lU3RhbXBPZkNyb3dkU2FsZUVuZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBoYXNDcm93ZFNhbGVOb3RZZXRFbmRlZCgpIHsKICAgICAgICByZXF1aXJlIChub3cgPCB0aW1lU3RhbXBPZkNyb3dkU2FsZUVuZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVFdGhlcnModWludCBwb3VuZFBlbmNlcykgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICAgICAgcmV0dXJuIHBvdW5kUGVuY2VzLm11bCgxIGV0aGVyKS5kaXYoZXRoZXJQcmljZUluUG91bmRQZW5jZXMpKzE7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlUG91bmRzVGltZXNFdGhlcih1aW50IGV0aGVyc0Ftb3VudCkgY29uc3RhbnQgcmV0dXJucyAodWludCl7CiAgICAgICAgcmV0dXJuIGV0aGVyc0Ftb3VudC5tdWwoZXRoZXJQcmljZUluUG91bmRQZW5jZXMpLmRpdigxMDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEV0aGVyUHJpY2VJblBvdW5kUGVuY2VzKHVpbnQzMiBfZXRoZXJQcmljZUluUG91bmRQZW5jZXMpIG9ubHlPd25lcnsKICAgICAgICBldGhlclByaWNlSW5Qb3VuZFBlbmNlcyA9IF9ldGhlclByaWNlSW5Qb3VuZFBlbmNlczsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRJbnZlc3RtZW50Q2FwSWNvUGhhc2VUd29Qb3VuZHModWludDMyIF9pbnZlc3RtZW50Q2FwSWNvUGhhc2VUd29Qb3VuZHMpIG9ubHlPd25lcnsKICAgICAgICBpbnZlc3RtZW50Q2FwSWNvUGhhc2VUd29Qb3VuZHMgPSBfaW52ZXN0bWVudENhcEljb1BoYXNlVHdvUG91bmRzOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVNlcmF0aW9TdGFrZSgpIGhhc0Nyb3dkU2FsZUVuZGVkIG9ubHlPd25lcnsKICAgICAgICB1aW50IFNlcmF0aW9Ub2tlbnMgPSBzZXJhdGlvQ29pbi50b3RhbFN1cHBseSgpLm11bCgzKTsKICAgICAgICBzZXJhdGlvQ29pbi5taW50KHdhbGxldCwgU2VyYXRpb1Rva2Vucyk7CiAgICAgICAgc2VyYXRpb0NvaW4uZmluaXNoTWludGluZygpOwogICAgfQoKICAgIGZ1bmN0aW9uIFN3aXRjaFRva2VuVHJhbnNhY3Rpb25zT24oKSBoYXNDcm93ZFNhbGVFbmRlZCBvbmx5T3duZXJ7CiAgICAgICAgc2VyYXRpb0NvaW4uc3RhcnQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZXMgU0VSIHRva2Vucy4KICAgICAqCiAgICAgKiBSdW5zIHNhbml0eSBjaGVja3MgaW5jbHVkaW5nIHNhZmV0eSBjYXAKICAgICAqIFRoZW4gY2FsY3VsYXRlcyBjdXJyZW50IHByaWNlIGJ5IGdldFByaWNlKCkgZnVuY3Rpb24sIGNyZWF0ZXMgU0VSIHRva2VucwogICAgICogRmluYWxseSBzZW5kcyBhIHZhbHVlIG9mIHRyYW5zYWN0aW9uIHRvIHRoZSB3YWxsZXQKICAgICAqCiAgICAgKiBOb3RlOiBkdWUgdG8gbGFjayBvZiBmbG9hdGluZyBwb2ludCB0eXBlcyBpbiBTb2xpZGl0eSwKICAgICAqIGNvbnRyYWN0IGFzc3VtZXMgdGhhdCBsYXN0IDMgZGlnaXRzIGluIHRva2VucyBhbW91bnQgYXJlIHN0b29kIGFmdGVyIHRoZSBwb2ludC4KICAgICAqIEl0IG1lYW5zIHRoYXQgaWYgc3RvcmVkIFNFUiBiYWxhbmNlIGlzIDEwMDAwMCwgdGhlbiBpdHMgcmVhbCB2YWx1ZSBpcyAxMDAgU0VSCiAgICAgKgogICAgICogQHBhcmFtIHNlbmRlciBldGhlciBzZW5kZXIKICAgICAqIEBwYXJhbSB2YWx1ZSBhbW91bnQgb2YgZXRoZXJzIHNlbnQKICAgICAqLwogICAgZnVuY3Rpb24gbWludFNlclRva2VucyhhZGRyZXNzIHNlbmRlciwgdWludCB2YWx1ZSwgdWludCB0aW1lU3RhbXBPZkludmVzdG1lbnQpIHByaXZhdGUgewogICAgICAgIHVpbnQgaW52ZXN0bWVudENhcEluUG91bmRzOwogICAgICAgIHVpbnQgbWluaW11bUludmVzdG1lbnRJblBvdW5kczsKICAgICAgICB1aW50OCB0b2tlblByaWNlSW5Qb3VuZFBlbmNlczsKCiAgICAgICAgdWludCBpbnZlc3RtZW50SW5Qb3VuZHNUaW1lc0V0aGVyID0gY2FsY3VsYXRlUG91bmRzVGltZXNFdGhlcih2YWx1ZSk7CiAgICAgICAgaWYgKGhhc0ljb1BoYXNlT25lRW5kZWQodGltZVN0YW1wT2ZJbnZlc3RtZW50KSB8fCBpbnZlc3RtZW50Q2FwUHJlSWNvUmVhY2hlZCl7CiAgICAgICAgICAgIC8vIElDTyBQaGFzZSBUd28KICAgICAgICAgICAgaW52ZXN0bWVudENhcEluUG91bmRzID0gaW52ZXN0bWVudENhcEljb1BoYXNlVHdvUG91bmRzOwogICAgICAgICAgICBtaW5pbXVtSW52ZXN0bWVudEluUG91bmRzID0gTUlOX0lOVkVTVE1FTlRfSUNPX1BIQVNFX1RXT19QT1VORFM7CiAgICAgICAgICAgIHRva2VuUHJpY2VJblBvdW5kUGVuY2VzID0gQkFTRV9UT0tFTl9QUklDRV9JTl9QT1VORF9QRU5DRVM7CiAgICAgICAgICAgIHJlcXVpcmUoaW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlciA+PSBtaW5pbXVtSW52ZXN0bWVudEluUG91bmRzLm11bCgxIGV0aGVyKSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIC8vIElDTyBQaGFzZSBPbmUKICAgICAgICAgICAgaW52ZXN0bWVudENhcEluUG91bmRzID0gSU5WRVNUTUVOVF9DQVBfSUNPX1BIQVNFX09ORV9QT1VORFM7CiAgICAgICAgICAgIG1pbmltdW1JbnZlc3RtZW50SW5Qb3VuZHMgPSBNSU5fSU5WRVNUTUVOVF9JQ09fUEhBU0VfT05FX1BPVU5EUzsKICAgICAgICAgICAgdG9rZW5QcmljZUluUG91bmRQZW5jZXMgPSBnZXRJY29QaGFzZU9uZVRva2VuUHJpY2VJblBvdW5kUGVuY2VzKHRpbWVTdGFtcE9mSW52ZXN0bWVudCk7CiAgICAgICAgICAgIHJlcXVpcmUoaW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlciA+PSBtaW5pbXVtSW52ZXN0bWVudEluUG91bmRzLm11bCgxIGV0aGVyKSk7CgogICAgICAgICAgICB1aW50IHRvdGFsSW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlciA9IGNhbGN1bGF0ZVBvdW5kc1RpbWVzRXRoZXIoZ2V0VG90YWxWYWx1ZSgpLmFkZCh2YWx1ZSkpOwogICAgICAgICAgICB1aW50IGludmVzdG1lbnRDYXBJblBvdW5kc1RpbWVzRXRoZXIgPSBpbnZlc3RtZW50Q2FwSW5Qb3VuZHMubXVsKDEgZXRoZXIpOwogICAgICAgICAgICBpZih0b3RhbEludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXIgPiBpbnZlc3RtZW50Q2FwSW5Qb3VuZHNUaW1lc0V0aGVyKXsKICAgICAgICAgICAgICAgIC8vIFdpdGggdGhpcyBpbnZlc3RtZW50LCB0aGUgaW52ZXN0bWVudCBjYXAgaXMgcmVhY2hlZAogICAgICAgICAgICAgICAgaW52ZXN0bWVudENhcFByZUljb1JlYWNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgLy8gcmV0YXJnZXQgaW52ZXN0bWVudCBvdmVyIHBoYXNlIG9uZSBjYXAgdG8gcGhhc2UgdHdvLgogICAgICAgICAgICAgICAgdWludCByZXRhcmdldGVkSW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlciA9IHRvdGFsSW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlci5zdWIoaW52ZXN0bWVudENhcEluUG91bmRzVGltZXNFdGhlcik7CiAgICAgICAgICAgICAgICB1aW50IGludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXJUb0Z1bGZpbENhcCA9IGludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXIuc3ViKHJldGFyZ2V0ZWRJbnZlc3RtZW50SW5Qb3VuZHNUaW1lc0V0aGVyKTsKICAgICAgICAgICAgICAgIC8vIG1pbnQgZGlmZmVyZW5jZSB1bnRpbCBjYXAgaXMgcmVhY2hlZC4KICAgICAgICAgICAgICAgIG1pbnRIZWxwZXIoc2VuZGVyLCBpbnZlc3RtZW50SW5Qb3VuZHNUaW1lc0V0aGVyVG9GdWxmaWxDYXAsIHRva2VuUHJpY2VJblBvdW5kUGVuY2VzKTsKICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBwYXJhbWV0ZXJzIGZvciBtaW50aW5nIHJldGFyZ2V0ZWQgaW52ZXN0bWVudC4KICAgICAgICAgICAgICAgIGludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXIgPSByZXRhcmdldGVkSW52ZXN0bWVudEluUG91bmRzVGltZXNFdGhlcjsKICAgICAgICAgICAgICAgIHRva2VuUHJpY2VJblBvdW5kUGVuY2VzID0gQkFTRV9UT0tFTl9QUklDRV9JTl9QT1VORF9QRU5DRVM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG1pbnRIZWxwZXIoc2VuZGVyLCBpbnZlc3RtZW50SW5Qb3VuZHNUaW1lc0V0aGVyLCB0b2tlblByaWNlSW5Qb3VuZFBlbmNlcyk7CiAgICAgICAgdG90YWxWYWx1ZSA9IHRvdGFsVmFsdWUuYWRkKHZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW50SGVscGVyKGFkZHJlc3Mgc2VuZGVyLCB1aW50IGludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXIsIHVpbnQ4IHRva2VuUHJpY2VJblBvdW5kUGVuY2VzKSBwcml2YXRlIHsKICAgICAgICB1aW50IHRva2VucyA9IGludmVzdG1lbnRJblBvdW5kc1RpbWVzRXRoZXIKICAgICAgICAubXVsKDEwMCkuZGl2KHRva2VuUHJpY2VJblBvdW5kUGVuY2VzKQogICAgICAgIC5tdWwodWludChzZXJhdGlvQ29pbi5ERUNJTUFMX1pFUk9TKCkpKQogICAgICAgIC5kaXYoMSBldGhlcik7CgogICAgICAgIHNlcmF0aW9Db2luLm1pbnQoc2VuZGVyLCB0b2tlbnMpOwogICAgfQogICAgZnVuY3Rpb24gbWFudWFsbHlNaW50VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgdmFsdWUsIHVpbnQgdGltZVN0YW1wT2ZJbnZlc3RtZW50KSBvbmx5T3duZXJ7CiAgICAgICAgbWludFNlclRva2VucyhiZW5lZmljaWFyeSwgdmFsdWUsIHRpbWVTdGFtcE9mSW52ZXN0bWVudCk7CiAgICB9CiAgICBmdW5jdGlvbiByYXdNYW51YWxseU1pbnRUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludCB0b2tlbnMpIG9ubHlPd25lcnsKICAgICAgICBzZXJhdGlvQ29pbi5taW50KGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgfQoKICAgIC8qKgogICAgICogRGVub3RlcyBjb21wbGV0ZSBwcmljZSBzdHJ1Y3R1cmUgZHVyaW5nIHRoZSBzYWxlLgogICAgICoKICAgICAqIEByZXR1cm4gU0VSIGFtb3VudCBwZXIgMSBFVEggZm9yIHRoZSBjdXJyZW50IG1vbWVudCBpbiB0aW1lCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFByaWNlKHVpbnQgdGltZSkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQ4IHRva2VuUHJpY2VJblBvdW5kUGVuY2VzOwogICAgICAgIGlmIChoYXNJY29QaGFzZU9uZUVuZGVkKHRpbWUpKXsKICAgICAgICAgICAgdG9rZW5QcmljZUluUG91bmRQZW5jZXMgPSBCQVNFX1RPS0VOX1BSSUNFX0lOX1BPVU5EX1BFTkNFUzsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdG9rZW5QcmljZUluUG91bmRQZW5jZXMgPSBnZXRJY29QaGFzZU9uZVRva2VuUHJpY2VJblBvdW5kUGVuY2VzKHRpbWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdG9rZW5QcmljZUluUG91bmRQZW5jZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRvdGFsIHN0b3JlZCBTRVIgYW1vdW50LgogICAgICoKICAgICAqIENvbnRyYWN0IGFzc3VtZXMgdGhhdCBsYXN0IDUgZGlnaXRzIG9mIHRoaXMgdmFsdWUgYXJlIGJlaGluZCB0aGUgZGVjaW1hbCBwbGFjZS4gaS5lLiAxMDAwMDAxIGlzIDEwLjAwMDAxCiAgICAgKiBUaHVzLCByZXN1bHQgb2YgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgZGl2aWRlZCBieSAxMDAwMDAgdG8gZ2V0IFNFUiB2YWx1ZQogICAgICoKICAgICAqIEByZXR1cm4gcmVzdWx0IHN0b3JlZCBTRVIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBzZXJhdGlvQ29pbi50b3RhbFN1cHBseSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0b3RhbCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKiBAcmV0dXJuIHJlc3VsdCB0b3RhbCB2YWx1ZSBpbiB3ZWkKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0VG90YWxWYWx1ZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdG90YWxWYWx1ZTsKICAgIH0KfQ=='.
	

]
