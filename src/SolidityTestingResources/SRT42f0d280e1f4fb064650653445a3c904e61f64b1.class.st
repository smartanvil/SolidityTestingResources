Class {
	#name : #SRT42f0d280e1f4fb064650653445a3c904e61f64b1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT42f0d280e1f4fb064650653445a3c904e61f64b1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7Cgpjb250cmFjdCBNYXRoIAp7CiAgICAvKgogICAgc3RhbmRhcmQgdWludDI1NiBmdW5jdGlvbnMKICAgICAqLwoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCArIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAtIHkpIDw9IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgYXNzZXJ0KCh6ID0geCAqIHkpID49IHgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgeiA9IHggLyB5OwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgcmV0dXJuIHggPD0geSA/IHggOiB5OwogICAgfQogICAgZnVuY3Rpb24gbWF4KHVpbnQyNTYgeCwgdWludDI1NiB5KSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2IHopIHsKICAgICAgICByZXR1cm4geCA+PSB5ID8geCA6IHk7CiAgICB9Cn0KCmNvbnRyYWN0IEdyYXNzIGlzIE1hdGgKewogIHVpbnQyNTYgcHVibGljIGF2YWlsYWJsZVRva2VuczsKICB1aW50MjU2IGN1cnJlbnRUb2tlblByaWNlSW5Eb2xsYXI7CgogIHVpbnQyNTYgcHVibGljIGxhc3RVcGRhdGVFdGhlclByaWNlOwogIHVpbnQyNTYgcHVibGljIGV0aGVyUHJpY2VJbkRvbGxhckluOwogIHVpbnQyNTYgcHVibGljIGV0aGVyUHJpY2VJbkRvbGxhck91dDsKCiAgZnVuY3Rpb24gZ2V0Q3VycmVudFRva2VuUHJpY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICB7CiAgICAgIHVpbnQyNTYgdG9kYXkgPSBnZXRUb2RheSgpOwogICAgICByZXR1cm4gKHRva2VuUHJpY2VIaXN0b3J5W3RvZGF5XSA9PSAwKT9jdXJyZW50VG9rZW5QcmljZUluRG9sbGFyOnRva2VuUHJpY2VIaXN0b3J5W3RvZGF5XTsKICB9CgogIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBwdWJsaWMgdG9rZW5QcmljZUhpc3Rvcnk7CiAgc3RydWN0IEV4dHJhVG9rZW5zSW5mbwogIHsKICAgIHVpbnQyNTYgdGltZXN0YW1wOwogICAgdWludDI1NiBleHRyYVRva2VuczsKICAgIHN0cmluZyAgcHJvb2ZMaW5rOwogICAgdWludDI1NiB2aWRlb0ZpbGVIYXNoOwogIH0KCiAgRXh0cmFUb2tlbnNJbmZvW10gcHVibGljIGV4dHJhVG9rZW5zOwoKICBzdHJ1Y3QgVG9rZW5JbmZvIAogIHsgICAgCiAgICB1aW50MjU2IGFtb3VudDsKICAgIGJvb2wgaXNSZXR1cm5lZEluUG9vbDsgICAgCiAgfQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsgCgogIC8vIGFkZHJlc3MgPT4gZGF5ID0+IGFtb3VudCAgCiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiBUb2tlbkluZm8pKSB0aW1lVGFibGU7CiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSkgYm9udXNlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYWxhbmNlczsgIAogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICBzdHJpbmcgcHVibGljIG5hbWU7CiAgdWludDggcHVibGljIGRlY2ltYWxzOwogIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogIAogIGJvb2wgaXNDYW5CdXkgPSB0cnVlOwoKICBtb2RpZmllciBjYW5CdXkoKQogIHsKICAgICAgYXNzZXJ0KGlzQ2FuQnV5KTsKICAgICAgXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZVN0YXRlKGJvb2wgYk5ld1N0YXRlKSBwdWJsaWMgb25seUFkbWluCiAgewogICAgICBpc0NhbkJ1eSA9IGJOZXdTdGF0ZTsKICB9CiAgCiAgYWRkcmVzcyBvd25lcjsKICBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkgYWRtaW5zOwogIG1vZGlmaWVyIG9ubHlBZG1pbigpCiAgewogICAgICBhc3NlcnQoYWRtaW5zW21zZy5zZW5kZXJdID09IHRydWUgfHwgbXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKQogIHsKICAgICAgYXNzZXJ0KG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICBfOwogIH0KICBmdW5jdGlvbiBhZGRBZG1pbihhZGRyZXNzIGFkZHIpIHB1YmxpYyBvbmx5T3duZXIKICB7CiAgICAgIGFkbWluc1thZGRyXSA9IHRydWU7CiAgfQogIGZ1bmN0aW9uIHJlbW92ZUFkbWluKGFkZHJlc3MgYWRkcikgcHVibGljIG9ubHlPd25lcgogIHsKICAgICAgYWRtaW5zW2FkZHJdID0gZmFsc2U7CiAgfQogICAgCiAgZnVuY3Rpb24gR3Jhc3MoKSBwdWJsaWMKICB7ICAgCiAgICAvLyBzdGFydFRpbWUgPSBibG9jay50aW1lc3RhbXA7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZG1pbnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgdG90YWxTdXBwbHkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgIAogICAgbmFtZSA9ICdHUkFTUyBUb2tlbic7ICAgICAgICAgICAgICAgICAgIAogICAgZGVjaW1hbHMgPSAxODsgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgc3ltYm9sID0gJ0dSQVNTJzsKICAgIGF2YWlsYWJsZVRva2VucyA9IDgwMCAqIDEwKioxODsKICAgIGN1cnJlbnRUb2tlblByaWNlSW5Eb2xsYXIgPSAzNSAqIDEwMDsgLy8gMzUuMDAkIChwcmljZSBtYXkgY2hhbmdlKSAKCiAgICBldGhlclByaWNlSW5Eb2xsYXJJbiA9IDUzMCAqIDEwMDsgIC8vIDU1MC4wMCAkICAocHJpY2UgbWF5IGNoYW5nZSkKICAgIGV0aGVyUHJpY2VJbkRvbGxhck91dCA9IDUzMCAqIDEwMDsgLy8gNTUwLjAwICQgIChwcmljZSBtYXkgY2hhbmdlKQogICAgbGFzdFVwZGF0ZUV0aGVyUHJpY2UgPSBibG9jay50aW1lc3RhbXA7CiAgfQoKICBmdW5jdGlvbiBpbmNyZWFzZU1heEF2YWlsYWJsZVRva2Vucyh1aW50MjU2IGFtb3VudCwgc3RyaW5nIGxpbmssIHVpbnQyNTYgdmlkZW9GaWxlSGFzaCkgb25seUFkbWluIHB1YmxpYwogIHsKICAgIGV4dHJhVG9rZW5zLnB1c2goRXh0cmFUb2tlbnNJbmZvKGJsb2NrLnRpbWVzdGFtcCwgYW1vdW50LCBsaW5rLCB2aWRlb0ZpbGVIYXNoKSk7CiAgICBhdmFpbGFibGVUb2tlbnMgPSBhZGQoYXZhaWxhYmxlVG9rZW5zLCBhbW91bnQpOwogIH0KICAKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZUV0aGVyUHJpY2UgKHVpbnQyNTYgbmV3UHJpY2VJbiwgdWludDI1NiBuZXdQcmljZU91dCkgb25seUFkbWluIHB1YmxpYyAKICB7ICAgCiAgICBldGhlclByaWNlSW5Eb2xsYXJJbiA9IG5ld1ByaWNlSW47CiAgICBldGhlclByaWNlSW5Eb2xsYXJPdXQgPSBuZXdQcmljZU91dDsKICAgIGxhc3RVcGRhdGVFdGhlclByaWNlID0gYmxvY2sudGltZXN0YW1wOwogIH0KCiAgbW9kaWZpZXIgaXNFdGhlclByaWNlVXBkYXRlZCgpIAogIHsKICAgICAgcmVxdWlyZShub3cgLSBsYXN0VXBkYXRlRXRoZXJQcmljZSA8IDI0IGhvdXJzKTsKICAgICAgXzsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZVRva2VuUHJpY2UgKHVpbnQyNTYgbmV3UHJpY2UpIG9ubHlBZG1pbiBwdWJsaWMgCiAgeyAgIAogICAgY3VycmVudFRva2VuUHJpY2VJbkRvbGxhciA9IG5ld1ByaWNlOyAgIAogIH0KICAKICBmdW5jdGlvbiBnZXRUb2RheSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQogIHsKICAgICAgcmV0dXJuIGJsb2NrLnRpbWVzdGFtcCAvIDI0IGhvdXJzOwogIH0KCiAgZnVuY3Rpb24oKSBpc0V0aGVyUHJpY2VVcGRhdGVkIGNhbkJ1eSBwYXlhYmxlIHB1YmxpYwogIHsKICAgICAgYnV5SW50ZXJuYWwobXNnLnNlbmRlcik7CiAgfQoKICBmdW5jdGlvbiBidXlGb3IoYWRkcmVzcyBhZGRyKSBpc0V0aGVyUHJpY2VVcGRhdGVkIGNhbkJ1eSBwYXlhYmxlIHB1YmxpYwogIHsKICAgICAgYnV5SW50ZXJuYWwoYWRkcik7CiAgICAgIC8vIAogICAgICBpZiAoYWRkci5iYWxhbmNlID09IDApIGFkZHIudHJhbnNmZXIoMSBmaW5uZXkpOwogIH0KCiAgZnVuY3Rpb24gYnV5KCkgaXNFdGhlclByaWNlVXBkYXRlZCBjYW5CdXkgcGF5YWJsZSBwdWJsaWMKICB7CiAgICBidXlJbnRlcm5hbChtc2cuc2VuZGVyKTsKICB9CiAgCiAgZnVuY3Rpb24gZ2V0UGFydG5lckJhbGFuY2UgKGFkZHJlc3MgYWRkcikgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KSAgCiAgewogICAgcmV0dXJuIHBhcnRuZXJzW2FkZHJdOwogIH0KCiAgZnVuY3Rpb24gcGFydG5lcldpdGhkcmF3ICgpIHB1YmxpYyAKICB7CiAgICBhc3NlcnQgKHBhcnRuZXJzW21zZy5zZW5kZXJdID4gMCk7CiAgICB1aW50MjU2IGV0aFRvV2lkdGhkcmF3ID0gcGFydG5lcnNbbXNnLnNlbmRlcl07CiAgICBwYXJ0bmVyc1ttc2cuc2VuZGVyXSA9IDA7CiAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFRvV2lkdGhkcmF3KTsKICB9ICAKICAKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcGFydG5lcnM7CiAgLy8gcmVmZmVyYWwgPT4gcGFydG5lcgogIG1hcHBpbmcoYWRkcmVzcyA9PiBhZGRyZXNzKSByZWZlcnJhbHM7CgogIGZ1bmN0aW9uIHRha2VFdGhlcihhZGRyZXNzIGRlc3QsIHVpbnQyNTYgYW1vdW50KSBvbmx5QWRtaW4gcHVibGljCiAgewogICAgICBkZXN0LnRyYW5zZmVyKGFtb3VudCk7CiAgfQogIAogIGZ1bmN0aW9uIGFkZEV0aGVyKCkgcGF5YWJsZSBvbmx5QWRtaW4gcHVibGljCiAgewogIH0KCiAgZnVuY3Rpb24gYnV5V2l0aFByb21vKGFkZHJlc3MgcGFydG5lcikgaXNFdGhlclByaWNlVXBkYXRlZCBjYW5CdXkgcGF5YWJsZSBwdWJsaWMKICB7CiAgICAgIGlmIChyZWZlcnJhbHNbbXNnLnNlbmRlcl0gPT0gMCAmJiBwYXJ0bmVyICE9IG1zZy5zZW5kZXIpCiAgICAgIHsKICAgICAgICByZWZlcnJhbHNbbXNnLnNlbmRlcl0gPSBwYXJ0bmVyOwogICAgICB9CgogICAgICBidXlJbnRlcm5hbChtc2cuc2VuZGVyKTsKICB9CiAgCiAgZnVuY3Rpb24gYnV5SW50ZXJuYWwoYWRkcmVzcyBhZGRyKSBpbnRlcm5hbAogIHsKICAgIGlmIChyZWZlcnJhbHNbYWRkcl0gIT0gMCkKICAgIHsKICAgICAgICBwYXJ0bmVyc1tyZWZlcnJhbHNbYWRkcl1dICs9IG1zZy52YWx1ZSAvIDEwMDsgLy8gMSUgdG8gcGFydG5lcgogICAgfSAgCiAgICAgIAogICAgLy8g0L/RgNC+0LLQtdGA0LrQsCBsYXN0VXBkYXRlRXRoZXJQcmljZQogICAgdWludDI1NiB0b2RheSA9IGdldFRvZGF5KCk7CiAgICBpZiAodG9rZW5QcmljZUhpc3RvcnlbdG9kYXldID09IDApIHRva2VuUHJpY2VIaXN0b3J5W3RvZGF5XSA9IGN1cnJlbnRUb2tlblByaWNlSW5Eb2xsYXI7CgogICAgLy8gdGltZVRhYmxlCiAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZSAqIGV0aGVyUHJpY2VJbkRvbGxhckluIC8gdG9rZW5QcmljZUhpc3RvcnlbdG9kYXldIDsKICAgIGlmIChhbW91bnQgPiBhdmFpbGFibGVUb2tlbnMpCiAgICB7CiAgICAgICBhZGRyLnRyYW5zZmVyKChhbW91bnQgLSBhdmFpbGFibGVUb2tlbnMpICogdG9rZW5QcmljZUhpc3RvcnlbdG9kYXldIC8gZXRoZXJQcmljZUluRG9sbGFySW4pOwogICAgICAgYW1vdW50ID0gYXZhaWxhYmxlVG9rZW5zOwogICAgfQogICAgICAKICAgIGFzc2VydChhbW91bnQgPiAwKTsKICAgICAgCiAgICBhdmFpbGFibGVUb2tlbnMgPSBzdWIoYXZhaWxhYmxlVG9rZW5zLCBhbW91bnQpOwoKICAgIC8vIGlzIG5ldyBkYXkgPwogICAgaWYgKHRpbWVUYWJsZVthZGRyXVt0b2RheV0uYW1vdW50ID09IDApCiAgICB7CiAgICAgIHRpbWVUYWJsZVthZGRyXVt0b2RheV0gPSBUb2tlbkluZm8oYW1vdW50LCBmYWxzZSk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgIHRpbWVUYWJsZVthZGRyXVt0b2RheV0uYW1vdW50ICs9IGFtb3VudDsKICAgIH0KCiAgICAvLyAgICAgICAgICAgICAgICAgIDwgMzAuMDMuMjAxOAogICAgaWYgKGJsb2NrLnRpbWVzdGFtcCA8IDE1MjIzNTcyMDAgJiYgYm9udXNlc1thZGRyXVt0b2RheV0gPT0gMCkKICAgIHsKICAgICAgYm9udXNlc1thZGRyXVt0b2RheV0gPSAxOwogICAgfQoKICAgIGJhbGFuY2VzW2FkZHJdID0gYWRkKGJhbGFuY2VzW2FkZHJdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBhZGQodG90YWxTdXBwbHksIGFtb3VudCk7CiAgICBlbWl0IFRyYW5zZmVyKDAsIGFkZHIsIGFtb3VudCk7CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVQcm9maXQgKHVpbnQyNTYgZGF5KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyhpbnQyNTYpIAogIHsKICAgIHVpbnQyNTYgdG9kYXkgPSBnZXRUb2RheSgpOwogICAgYXNzZXJ0KHRvZGF5ID49IGRheSk7CiAgICB1aW50MjU2IGRheXNMZWZ0ID0gdG9kYXkgLSBkYXk7CiAgICBpbnQyNTYgZXh0cmFQcm9maXQgPSAwOwoKICAgIC8vIGlzIHJlZmVycmFsID8KICAgIGlmIChyZWZlcnJhbHNbbXNnLnNlbmRlcl0gIT0gMCkgZXh0cmFQcm9maXQrKzsKICAgIC8vIHBhcnRpY2lwYW50IHVudGlsIE1hcmNoIDMwCiAgICBpZiAoYm9udXNlc1ttc2cuc2VuZGVyXVtkYXldID4gMCkgZXh0cmFQcm9maXQrKzsKCiAgICBpZiAoZGF5c0xlZnQgPD0gNykgcmV0dXJuIC0xMDsKICAgIGlmIChkYXlzTGVmdCA8PSAxNCkgcmV0dXJuIC01OwogICAgaWYgKGRheXNMZWZ0IDw9IDIxKSByZXR1cm4gMSArIGV4dHJhUHJvZml0OwogICAgaWYgKGRheXNMZWZ0IDw9IDI4KSByZXR1cm4gMyArIGV4dHJhUHJvZml0OwogICAgaWYgKGRheXNMZWZ0IDw9IDYwKSByZXR1cm4gNSArIGV4dHJhUHJvZml0OwogICAgaWYgKGRheXNMZWZ0IDw9IDkwKSByZXR1cm4gMTIgKyBleHRyYVByb2ZpdDsKICAgIHJldHVybiAxOCArIGV4dHJhUHJvZml0OyAgCiAgfQogIAogIGZ1bmN0aW9uIGdldFRva2Vuc1BlckRheSh1aW50MjU2IF9kYXkpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpCiAgewogICAgICByZXR1cm4gdGltZVRhYmxlW21zZy5zZW5kZXJdW19kYXldLmFtb3VudDsKICB9CgogIC8vIHJldHVybnMgYW1vdW50LCBldGhlciAgCiAgZnVuY3Rpb24gZ2V0UHJvZml0Rm9yRGF5KHVpbnQyNTYgZGF5LCB1aW50MjU2IGFtb3VudCkgaXNFdGhlclByaWNlVXBkYXRlZCBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2LCB1aW50MjU2KQogIHsgICAgICAKICAgIGFzc2VydCAoZGF5IDw9IGdldFRvZGF5KCkpOwogICAgCiAgICB1aW50MjU2IHRva2VuUHJpY2UgPSB0b2tlblByaWNlSGlzdG9yeVtkYXldOwogICAgaWYgKHRpbWVUYWJsZVttc2cuc2VuZGVyXVtkYXldLmFtb3VudCA8IGFtb3VudCkgYW1vdW50ID0gdGltZVRhYmxlW21zZy5zZW5kZXJdW2RheV0uYW1vdW50OyAgICAKCiAgICBhc3NlcnQgKGFtb3VudCA+IDApOwogICAgICAgICAgCiAgICByZXR1cm4gKGFtb3VudCwgYW1vdW50ICogdG9rZW5QcmljZSAqIHVpbnQyNTYoMTAwICsgY2FsY3VsYXRlUHJvZml0KGRheSkpIC8gMTAwIC8gZXRoZXJQcmljZUluRG9sbGFyT3V0KTsKICB9CgogIGZ1bmN0aW9uIHJldHVyblRva2Vuc0luUG9vbCAoYWRkcmVzc1tdIGFkZHIsIHVpbnQyNTZbXSBfZGF5cykgcHVibGljCiAgewogICAgYXNzZXJ0IChhZGRyLmxlbmd0aCA9PSBfZGF5cy5sZW5ndGgpOwogICAgCiAgICBUb2tlbkluZm8gc3RvcmFnZSBpbmZvOyAKICAgIGZvcih1aW50MjU2IGkgPSAwOyBpIDwgYWRkci5sZW5ndGg7aSsrKQogICAgewogICAgICBhc3NlcnQoX2RheXNbaV0gKyA5MiA8IGdldFRvZGF5KCkgJiYgaW5mby5hbW91bnQgPiAwKTsKICAgICAgaW5mbyA9IHRpbWVUYWJsZVthZGRyW2ldXVtfZGF5c1tpXV07CiAgICAgIGluZm8uaXNSZXR1cm5lZEluUG9vbCA9IHRydWU7CiAgICAgIGF2YWlsYWJsZVRva2VucyA9IGFkZChhdmFpbGFibGVUb2tlbnMsIGluZm8uYW1vdW50KTsgICAgICAKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdldEluZm8oYWRkcmVzcyBhZGRyLCB1aW50MjU2IHN0YXJ0LCB1aW50MjU2IGVuZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTZbMzBdIF9kYXlzLCB1aW50MjU2WzMwXSBfYW1vdW50cywgaW50MjU2WzMwXSBfcHJvZml0cywgdWludDI1NlszMF0gX2V0aGVyQW1vdW50cykKICB7CiAgICAgIGlmIChhZGRyID09IDApIGFkZHIgPSBtc2cuc2VuZGVyOwoKICAgICAgdWludDI1NiBqID0gMDsKICAgICAgZm9yKHVpbnQyNTYgaURheSA9IHN0YXJ0OyBpRGF5IDwgZW5kOyBpRGF5KyspCiAgICAgIHsKICAgICAgICBpZiAodGltZVRhYmxlW2FkZHJdW2lEYXldLmFtb3VudCA+IDApCiAgICAgICAgewogICAgICAgICAgX2RheXNbal0gPSBpRGF5OwogICAgICAgICAgX3Byb2ZpdHNbal0gPSBjYWxjdWxhdGVQcm9maXQoaURheSk7CiAgICAgICAgICBfYW1vdW50c1tqXSA9IHRpbWVUYWJsZVthZGRyXVtpRGF5XS5hbW91bnQ7CiAgICAgICAgICAoX2Ftb3VudHNbal0sIF9ldGhlckFtb3VudHNbal0pID0gZ2V0UHJvZml0Rm9yRGF5KGlEYXksIF9hbW91bnRzW2pdKTsKICAgICAgICAgIGorKzsKICAgICAgICAgIGlmIChqID09IDMwKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gcmV0dXJuVG9rZW5zRm9yRGF5KHVpbnQyNTYgZGF5LCB1aW50MjU2IHVzZXJUb2tlbnNBbW91bnQpIHB1YmxpYyAKICB7CiAgICB1aW50MjU2IHRva2Vuc0Ftb3VudDsKICAgIHVpbnQyNTYgZXRoZXJBbW91bnQ7CiAgICAodG9rZW5zQW1vdW50LCBldGhlckFtb3VudCkgPSBnZXRQcm9maXRGb3JEYXkoZGF5LCB1c2VyVG9rZW5zQW1vdW50KTsKCiAgICByZXF1aXJlKGRheSA+IDApOwogICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSB0b2tlbnNBbW91bnQpOwogICAgCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgdG9rZW5zQW1vdW50KTsKICAgIHRvdGFsU3VwcGx5ID0gc3ViKHRvdGFsU3VwcGx5LCB0b2tlbnNBbW91bnQpOwogICAgdGltZVRhYmxlW21zZy5zZW5kZXJdW2RheV0uYW1vdW50ID0gc3ViKHRpbWVUYWJsZVttc2cuc2VuZGVyXVtkYXldLmFtb3VudCwgdG9rZW5zQW1vdW50KTsKICAgIAogICAgaWYgKCF0aW1lVGFibGVbbXNnLnNlbmRlcl1bZGF5XS5pc1JldHVybmVkSW5Qb29sKQogICAgewogICAgICBhdmFpbGFibGVUb2tlbnMgPSBhZGQoYXZhaWxhYmxlVG9rZW5zLCB0b2tlbnNBbW91bnQpOyAgICAgIAogICAgfQoKICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoZXRoZXJBbW91bnQpOwogICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCAwLCB0b2tlbnNBbW91bnQpOwogIH0KICAKfQ=='.
	

]
