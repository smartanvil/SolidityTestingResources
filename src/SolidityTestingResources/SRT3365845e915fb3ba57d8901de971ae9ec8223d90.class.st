Class {
	#name : #SRT3365845e915fb3ba57d8901de971ae9ec8223d90,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3365845e915fb3ba57d8901de971ae9ec8223d90 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjsKCi8vIFRoZSBiZWxvdyB0d28gaW50ZXJmYWNlcyAoS2l0dHlDb3JlIGFuZCBTYWxlQ2xvY2tBdWN0aW9uKSBhcmUgZnJvbSBDcnlwdG8gS2l0dGllcy4gVGhpcyBjb250cmFjdCB3aWxsIGhhdmUgdG8gY2FsbCB0aGUgQ3J5cHRvIEtpdHRpZXMgY29udHJhY3RzIHRvIGZpbmQgdGhlIG93bmVyIG9mIGEgS2l0dHksIHRoZSBwcm9wZXJ0aWVzIG9mIGEgS2l0dHkgYW5kIGEgS2l0dGllcyBwcmljZS4KaW50ZXJmYWNlIEtpdHR5Q29yZSB7CgogICAgZnVuY3Rpb24gb3duZXJPZiAodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKTsKICAgIAogICAgZnVuY3Rpb24gZ2V0S2l0dHkgKHVpbnQyNTYgX2lkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wgaXNHZXN0YXRpbmcsIGJvb2wgaXNSZWFkeSwgdWludDI1NiBjb29sZG93bkluZGV4LCB1aW50MjU2IG5leHRBY3Rpb25BdCwgdWludDI1NiBzaXJpbmdXaXRoSWQsIHVpbnQyNTYgYmlydGhUaW1lLCB1aW50MjU2IG1hdHJvbklkLCB1aW50MjU2IHNpcmVJZCwgdWludDI1NiBnZW5lcmF0aW9uLCB1aW50MjU2IGdlbmVzKTsKICAgIAp9CgppbnRlcmZhY2UgU2FsZUNsb2NrQXVjdGlvbiB7CiAgICAKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcmljZSAodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIAogICAgZnVuY3Rpb24gZ2V0QXVjdGlvbih1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3Mgc2VsbGVyLCB1aW50MjU2IHN0YXJ0aW5nUHJpY2UsIHVpbnQyNTYgZW5kaW5nUHJpY2UsIHVpbnQyNTYgZHVyYXRpb24sIHVpbnQyNTYgc3RhcnRlZEF0KTsKICAgIAp9CgovLyBFUkM3MjEgdG9rZW4gc3RhbmRhcmQgaXMgdXNlZCBmb3Igbm9uLWZ1bmdpYmxlIGFzc2V0cywgbGlrZSBTcHJpdGVzIChub24tZnVuZ2libGUgYmVjYXVzZSB0aGV5IGNhbid0IGJlIHNwbGl0IGludG8gcGllY2VzIGFuZCBkb24ndCBoYXZlIGVxdWFsIHZhbHVlKS4gVGVjaG5pY2FsbHkgdGhpcyBjb250cmFjdCB3aWxsIGFsc28gYmUgRVJDMjAgY29tcGxpYW50Lgpjb250cmFjdCBFUkM3MjEgewogICAgLy8gUmVxdWlyZWQgbWV0aG9kcwogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIG93bmVyKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbDsKICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSB2aWV3IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdG9rZW5JZCk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKCiAgICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nKTsKICAgIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyk7CiAgICAKICAgIC8vIGZ1bmN0aW9uIHRva2Vuc09mT3duZXIoYWRkcmVzcyBfb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NltdIHRva2VuSWRzKTsKICAgIC8vIGZ1bmN0aW9uIHRva2VuTWV0YWRhdGEodWludDI1NiBfdG9rZW5JZCwgc3RyaW5nIF9wcmVmZXJyZWRUcmFuc3BvcnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBpbmZvVXJsKTsKCiAgICAvLyBFUkMtMTY1IENvbXBhdGliaWxpdHkgKGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNjUpCiAgICBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQgX2ludGVyZmFjZUlEKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBDcnlwdG9TcHJpdGVzIGlzIEVSQzcyMSB7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgCiAgICBhZGRyZXNzIEtpdHR5Q29yZUFkZHJlc3MgPSAweDA2MDEyYzhjZjk3QkVhRDVkZUFlMjM3MDcwRjk1ODdmOEU3QTI2NmQ7CgogICAgYWRkcmVzcyBTYWxlQ2xvY2tBdWN0aW9uQWRkcmVzcyA9IDB4YjE2OTBDMDhFMjEzYTM1RWQ5YkFiN0IzMThERTE0NDIwRkI1N2Q4QzsKCiAgICAvLyAxLjUlIG9mIFNwcml0ZSBzYWxlcyB0byBnbyB0byBIZWlmZXIgSW50ZXJuYXRpb25hbDogaHR0cHM6Ly93d3cuaGVpZmVyLm9yZy93aGF0LXlvdS1jYW4tZG8vZ2l2ZS9kaWdpdGFsLWN1cnJlbmN5Lmh0bWwgKG5vdCBhZmZpbGlhdGVkIHdpdGggdGhpcyBnYW1lKQogICAgYWRkcmVzcyBjaGFyaXR5QWRkcmVzcyA9IDB4YjMwY2IzYjNFMDNBNTA4RGIyQTBhM2UwN0JBMTI5N2I0N2JiMGZiMTsKICAgIAogICAgdWludCBwdWJsaWMgZXRoZXJGb3JPd25lcjsKICAgIHVpbnQgcHVibGljIGV0aGVyRm9yQ2hhcml0eTsKICAgIAogICAgdWludCBwdWJsaWMgb3duZXJDdXQgPSAxNTsgLy8gMS41JSAoMTUvMTAwMCAtIHNlZSB0aGUgYnV5U3ByaXRlKCkgZnVuY3Rpb24pIG9mIFNwcml0ZSBzYWxlcyBnbyB0byBvd25lciBvZiB0aGlzIGNvbnRyYWN0CiAgICB1aW50IHB1YmxpYyBjaGFyaXR5Q3V0ID0gMTU7IC8vIDEuNSUgb2YgU3ByaXRlIHNhbGVzIGFsc28gZ28gdG8gYW4gZXN0YWJsaXNoZWQgY2hhcml0eSAoSGVpZmVyIEludGVybmF0aW9uYWwpCiAgICAKICAgIHVpbnQgcHVibGljIGZlYXR1cmVQcmljZSA9IDEwKioxNjsgLy8gMC4wMSBFdGhlciB0byBmZWF0dXJlIGEgc3ByaXRlCiAgICAKICAgIC8vIFdpdGggdGhlIGJlbG93IHRoZSBkZWZhdWx0IHByaWNlIG9mIGEgU3ByaXRlIG9mIGEga2l0dHkgd291bGQgYmUgb25seSAxMCUgb2YgdGhlIGtpdHRpZXMgcHJpY2UuIElmIGZvciBleGFtcGxlIHByaWNlTXVsdGlwbGllciA9IDE1IGFuZCBwcmljZURpdmlkZXIgPSAxMCwgdGhlbiB0aGUgZGVmYXVsdCBwcmljZSBvZiBhIHNwcml0ZSB3b3VsZCBiZSAxLjUgdGltZXMgdGhlIHByaWNlIG9mIGl0cyBraXR0eS4gU2luY2UgU29saWRpdHkgZG9lc24ndCBhbGxvdyBkZWNpbWFscywgdHdvIG51bWJlcnMgYXJlIG5lZWRlZCBmb3IgIGZsZXhpYmlsaXR5IGluIHNldHRpbmcgdGhlIGRlZmF1bHQgcHJpY2UgYSBzcHJpdGUgd291bGQgYmUgaW4gcmVsYXRpb24gdG8gdGhlIHByaWNlIG9mIGl0cyBraXR0ZW4sIGluIGNhc2UgdGhhdCdzIG5lZWRlZCBsYXRlciAob3duZXIgb2YgdGhpcyBjb250cmFjdCBjYW4gY2hhbmdlIHRoZSBkZWZhdWx0IHByaWNlIG9mIFNwcml0ZXMgYW55dGltZSkuIAogICAgLy8gVGhlIGRlZmF1bHQgcHJpY2Ugb2YgYSBTcHJpdGUgbWF5IGVhc2lseSBpbmNyZWFzZSBsYXRlciB0byBiZSBtb3JlIHRoYW4gMTAlCiAgICB1aW50IHB1YmxpYyBwcmljZU11bHRpcGxpZXIgPSAxOwogICAgdWludCBwdWJsaWMgcHJpY2VEaXZpZGVyID0gMTA7CiAgICAKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBDcnlwdG9TcHJpdGVzKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIAogICAgdWludFtdIHB1YmxpYyBmZWF0dXJlZFNwcml0ZXM7CiAgICAKICAgIHVpbnRbXSBwdWJsaWMgYWxsUHVyY2hhc2VkU3ByaXRlczsKICAgIAogICAgdWludCBwdWJsaWMgdG90YWxGZWF0dXJlczsKICAgIHVpbnQgcHVibGljIHRvdGFsQnV5czsKICAgIAogICAgc3RydWN0IEJyb3VnaHRTcHJpdGVzIHsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIHVpbnQgc3ByaXRlSW1hZ2VJRDsKICAgICAgICBib29sIGZvclNhbGU7CiAgICAgICAgdWludCBwcmljZTsKICAgICAgICB1aW50IHRpbWVzVHJhZGVkOwogICAgICAgIGJvb2wgZmVhdHVyZWQ7CiAgICB9CiAgICAKICAgIG1hcHBpbmcgKHVpbnQgPT4gQnJvdWdodFNwcml0ZXMpIHB1YmxpYyBicm91Z2h0U3ByaXRlczsKICAgIAogICAgLy8gVGhpcyBtYXkgaW5jbHVkZSBTcHJpdGVzIHRoZSB1c2VyIHByZXZpb3VzbHkgb3duZWQgYnV0IGRvZXNuJ3QgYW55bW9yZQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50W10pIHB1YmxpYyBzcHJpdGVPd25pbmdIaXN0b3J5OwogICAgCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBudW1iZXJPZlNwcml0ZXNPd25lZEJ5VXNlcjsKICAgIAogICAgLy8gRmlyc3QgYWRkcmVzcyBpcyB0aGUgYWRkcmVzcyBvZiBhIFNwcml0ZSBvd25lciwgc2Vjb25kIGFkZHJlc3MgaXMgYW4gYWRkcmVzcyBoYXZpbmcgYXBwcm92YWwgdG8gbW92ZSBhIHRva2VuIGJlbG9uZ2luZyB0byB0aGUgZmlyc3QgYWRkcmVzcywgdWludFtdIGlzIHRoZSBhcnJheSBvZiBTcHJpdGVzIGJlbG9uZ2luZyB0byB0aGUgZmlyc3QgYWRkcmVzcyB0aGF0IHRoZSBzZWNvbmQgYWRkcmVzcyBoYXMgYXBwcm92YWwgdG8gdHJhbnNmZXIKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50W10pKSBwdWJsaWMgYWxsb3dlZDsKICAgIAogICAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkMxNjUgPSBieXRlczQoa2VjY2FrMjU2KCdzdXBwb3J0c0ludGVyZmFjZShieXRlczQpJykpOwogICAgCiAgICBieXRlczQgY29uc3RhbnQgSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMSA9CiAgICAgICAgYnl0ZXM0KGtlY2NhazI1NigndG90YWxTdXBwbHkoKScpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1NignYmFsYW5jZU9mKGFkZHJlc3MpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCdvd25lck9mKHVpbnQyNTYpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCdhcHByb3ZlKGFkZHJlc3MsdWludDI1NiknKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RyYW5zZmVyKGFkZHJlc3MsdWludDI1NiknKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NiknKSk7CgogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRqdXN0RGVmYXVsdFNwcml0ZVByaWNlICh1aW50IF9wcmljZU11bHRpcGxpZXIsIHVpbnQgX3ByaWNlRGl2aWRlcikgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlIChfcHJpY2VNdWx0aXBsaWVyID4gMCk7CiAgICAgICAgcmVxdWlyZSAoX3ByaWNlRGl2aWRlciA+IDApOwogICAgICAgIHByaWNlTXVsdGlwbGllciA9IF9wcmljZU11bHRpcGxpZXI7CiAgICAgICAgcHJpY2VEaXZpZGVyID0gX3ByaWNlRGl2aWRlcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRqdXN0Q3V0ICh1aW50IF9vd25lckN1dCwgdWludCBfY2hhcml0eUN1dCkgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlIChfb3duZXJDdXQgKyBfY2hhcml0eUN1dCA8IDUxKTsgLy8gS2VlcCB0aGlzIGNvbnRyYWN0IGhvbmVzdCBieSBhbGxvd2luZyB0aGUgbWF4aW11bSBjb21iaW5lZCBjdXQgdG8gYmUgbm8gbW9yZSB0aGFuIDUlICg1MC8xMDAwKSBvZiBzYWxlcwogICAgICAgIG93bmVyQ3V0ID0gX293bmVyQ3V0OwogICAgICAgIGNoYXJpdHlDdXQgPSBfY2hhcml0eUN1dDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRqdXN0RmVhdHVyZVByaWNlICh1aW50IF9mZWF0dXJlUHJpY2UpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSAoX2ZlYXR1cmVQcmljZSA+IDApOwogICAgICAgIGZlYXR1cmVQcmljZSA9IF9mZWF0dXJlUHJpY2U7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgb25seU93bmVyIHsKICAgICAgICBvd25lci50cmFuc2ZlcihldGhlckZvck93bmVyKTsKICAgICAgICBjaGFyaXR5QWRkcmVzcy50cmFuc2ZlcihldGhlckZvckNoYXJpdHkpOwogICAgICAgIGV0aGVyRm9yT3duZXIgPSAwOwogICAgICAgIGV0aGVyRm9yQ2hhcml0eSA9IDA7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZlYXR1cmVTcHJpdGUgKHVpbnQgc3ByaXRlSWQpIHBheWFibGUgewogICAgICAgIC8vIERvIG5vdCBuZWVkIHRvIHJlcXVpcmUgdXNlciB0byBiZSB0aGUgb3duZXIgb2YgYSBTcHJpdGUgdG8gZmVhdHVyZSBpdAogICAgICAgIC8vIHJlcXVpcmUgKG1zZy5zZW5kZXIgPT0gYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLm93bmVyKTsKICAgICAgICByZXF1aXJlIChtc2cudmFsdWUgPT0gZmVhdHVyZVByaWNlKTsKICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0uZmVhdHVyZWQgPSB0cnVlOwoKICAgICAgICBpZiAoYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnRpbWVzVHJhZGVkID09IDApIHsKICAgICAgICAgICAgYWRkcmVzcyBraXR0eU93bmVyID0gS2l0dHlDb3JlKEtpdHR5Q29yZUFkZHJlc3MpLm93bmVyT2Yoc3ByaXRlSWQpOwogICAgICAgICAgICB1aW50IHByaWNlSWZBbnkgPSBTYWxlQ2xvY2tBdWN0aW9uKFNhbGVDbG9ja0F1Y3Rpb25BZGRyZXNzKS5nZXRDdXJyZW50UHJpY2Uoc3ByaXRlSWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gV2hlbiBmZWF0dXJpbmcgYSBTcHJpdGUgdGhhdCBoYXNuJ3QgYmVlbiB0cmFkZWQgYmVmb3JlLCBpZiB0aGUgb3JpZ2luYWwgS2l0dHkgaXMgZm9yIHNhbGUsIHVwZGF0ZSB0aGlzIFNwcml0ZSB3aXRoIGEgcHJpY2UgYW5kIHNldCBmb3JTYWxlID0gdHJ1ZSAtIGFzIGxvbmcgYXMgbXNnLnNlbmRlciBpcyB0aGUgb3duZXIgb2YgdGhlIEtpdHR5LiBPdGhlcndpc2UgaXQgY291bGQgYmUgdGhhdCB0aGUgb3duZXIgb2YgdGhlIEtpdHR5IHJlbW92ZWQgdGhlIFNwcml0ZSBmb3Igc2FsZSBhbmQgYSBkaWZmZXJlbnQgdXNlciBjb3VsZCBmZWF0dXJlIHRoZSBTcHJpdGUgYW5kIGhhdmUgaXQgbGlzdGVkIGZvciBzYWxlCiAgICAgICAgICAgIGlmIChwcmljZUlmQW55ID4gMCAmJiBtc2cuc2VuZGVyID09IGtpdHR5T3duZXIpIHsKICAgICAgICAgICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSA9IHByaWNlSWZBbnkgKiBwcmljZU11bHRpcGxpZXIgLyBwcmljZURpdmlkZXI7CiAgICAgICAgICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0uZm9yU2FsZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5vd25lciA9IGtpdHR5T3duZXI7CiAgICAgICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5zcHJpdGVJbWFnZUlEID0gdWludChibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSUzNjAgKyAxOwogICAgICAgICAgICAKICAgICAgICAgICAgbnVtYmVyT2ZTcHJpdGVzT3duZWRCeVVzZXJba2l0dHlPd25lcl0rKzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdG90YWxGZWF0dXJlcysrOwogICAgICAgIGV0aGVyRm9yT3duZXIgKz0gbXNnLnZhbHVlOwogICAgICAgIGZlYXR1cmVkU3ByaXRlcy5wdXNoKHNwcml0ZUlkKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FsY3VsYXRlUHJpY2UgKHVpbnQga2l0dHlJZCkgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgCiAgICAgICAgdWludCBwcmljZUlmQW55ID0gU2FsZUNsb2NrQXVjdGlvbihTYWxlQ2xvY2tBdWN0aW9uQWRkcmVzcykuZ2V0Q3VycmVudFByaWNlKGtpdHR5SWQpOwogICAgICAgIAogICAgICAgIHZhciBfb3duZXJDdXQgPSAoKHByaWNlSWZBbnkgLyAxMDAwKSAqIG93bmVyQ3V0KSAqIHByaWNlTXVsdGlwbGllciAvIHByaWNlRGl2aWRlcjsKICAgICAgICB2YXIgX2NoYXJpdHlDdXQgPSAoKHByaWNlSWZBbnkgLyAxMDAwKSAqIGNoYXJpdHlDdXQpICogcHJpY2VNdWx0aXBsaWVyIC8gcHJpY2VEaXZpZGVyOwogICAgICAgIAogICAgICAgIHJldHVybiAocHJpY2VJZkFueSAqIHByaWNlTXVsdGlwbGllciAvIHByaWNlRGl2aWRlcikgKyBfb3duZXJDdXQgKyBfY2hhcml0eUN1dDsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYnV5U3ByaXRlICh1aW50IHNwcml0ZUlkKSBwYXlhYmxlIHsKICAgICAgICAKICAgICAgICB1aW50IF9vd25lckN1dDsKICAgICAgICB1aW50IF9jaGFyaXR5Q3V0OwogICAgICAgIAogICAgICAgIGlmIChicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0uZm9yU2FsZSA9PSB0cnVlKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBCdXlpbmcgYSBzcHJpdGUgdGhhdCBoYXMgYmVlbiBwdXJjaGFzZWQgb3IgZmVhdHVyZWQgYmVmb3JlLCBmcm9tIGEgcGxheWVyIG9mIHRoaXMgZ2FtZSB3aG8gaGFzIGxpc3RlZCBpdCBmb3Igc2FsZQogICAgICAgICAgICAKICAgICAgICAgICAgX293bmVyQ3V0ID0gKChicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ucHJpY2UgLyAxMDAwKSAqIG93bmVyQ3V0KTsKICAgICAgICAgICAgX2NoYXJpdHlDdXQgPSAoKGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSAvIDEwMDApICogY2hhcml0eUN1dCk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXF1aXJlIChtc2cudmFsdWUgPT0gYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnByaWNlICsgX293bmVyQ3V0ICsgX2NoYXJpdHlDdXQpOwogICAgICAgICAgICAKICAgICAgICAgICAgYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLm93bmVyLnRyYW5zZmVyKGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBudW1iZXJPZlNwcml0ZXNPd25lZEJ5VXNlclticm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ub3duZXJdLS07CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnRpbWVzVHJhZGVkID09IDApIHsKICAgICAgICAgICAgICAgIC8vIEZlYXR1cmVkIHNwcml0ZSB0aGF0IGlzIGJlaW5nIHB1cmNoYXNlZCBmb3IgdGhlIGZpcnN0IHRpbWUKICAgICAgICAgICAgICAgIGFsbFB1cmNoYXNlZFNwcml0ZXMucHVzaChzcHJpdGVJZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIFRyYW5zZmVyIChtc2cuc2VuZGVyLCBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ub3duZXIsIHNwcml0ZUlkKTsKICAgICAgICAgICAgCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEJ1eWluZyBhIHNwcml0ZSB0aGF0IGhhcyBuZXZlciBiZWVuIGJyb3VnaHQgYmVmb3JlLCBmcm9tIGEga2l0dGVuIGN1cnJlbnRseSBsaXN0ZWQgZm9yIHNhbGUgaW4gdGhlIENyeXB0b0tpdHRpZXMgY29udHJhY3QuIFRoZSBzYWxlIHByaWNlIHdpbGwgZ28gdG8gdGhlIG93bmVyIG9mIHRoZSBraXR0ZW4gaW4gdGhlIENyeXB0b0tpdHRpZXMgY29udHJhY3QgKHdobyB2ZXJ5IHBvc3NpYmx5IHdvdWxkIGhhdmUgbmV2ZXIgZXZlbiBoZWFyZCBvZiB0aGlzIGdhbWUpCiAgICAgICAgICAgIAogICAgICAgICAgICByZXF1aXJlIChicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0udGltZXNUcmFkZWQgPT0gMCk7CiAgICAgICAgICAgIHJlcXVpcmUgKGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSA9PSAwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEhlcmUgd2UgYXJlIGxvb2tpbmcgdXAgdGhlIHByaWNlIG9mIHRoZSBTcHJpdGUncyBjb3JyZXNwb25kaW5nIEtpdHR5CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IHByaWNlSWZBbnkgPSBTYWxlQ2xvY2tBdWN0aW9uKFNhbGVDbG9ja0F1Y3Rpb25BZGRyZXNzKS5nZXRDdXJyZW50UHJpY2Uoc3ByaXRlSWQpOwogICAgICAgICAgICByZXF1aXJlIChwcmljZUlmQW55ID4gMCk7IC8vIElmIHRoZSBraXR0ZW4gaW4gdGhlIENyeXB0b0tpdHRpZXMgY29udHJhY3QgaXNuJ3QgZm9yIHNhbGUsIGEgU3ByaXRlIGZvciBpdCB3b24ndCBiZSBmb3Igc2FsZSBlaXRoZXIKICAgICAgICAgICAgCiAgICAgICAgICAgIF9vd25lckN1dCA9ICgocHJpY2VJZkFueSAvIDEwMDApICogb3duZXJDdXQpICogcHJpY2VNdWx0aXBsaWVyIC8gcHJpY2VEaXZpZGVyOwogICAgICAgICAgICBfY2hhcml0eUN1dCA9ICgocHJpY2VJZkFueSAvIDEwMDApICogY2hhcml0eUN1dCkgKiBwcmljZU11bHRpcGxpZXIgLyBwcmljZURpdmlkZXI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDcnlwdG8gS2l0dHkgcHJpY2VzIGRlY3JlYXNlIGV2ZXJ5IGZldyBzZWNvbmRzIGJ5IGEgZnJhY3Rpb25hbCBhbW91bnQsIHNvIHVzZSA+PQogICAgICAgICAgICAKICAgICAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IChwcmljZUlmQW55ICogcHJpY2VNdWx0aXBsaWVyIC8gcHJpY2VEaXZpZGVyKSArIF9vd25lckN1dCArIF9jaGFyaXR5Q3V0KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGFkZHJlc3Mga2l0dHlPd25lciA9IEtpdHR5Q29yZShLaXR0eUNvcmVBZGRyZXNzKS5vd25lck9mKHNwcml0ZUlkKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGtpdHR5T3duZXIudHJhbnNmZXIocHJpY2VJZkFueSAqIHByaWNlTXVsdGlwbGllciAvIHByaWNlRGl2aWRlcik7CiAgICAgICAgICAgIAogICAgICAgICAgICBhbGxQdXJjaGFzZWRTcHJpdGVzLnB1c2goc3ByaXRlSWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnNwcml0ZUltYWdlSUQgPSB1aW50KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXItMSkpJTM2MCArIDE7IC8vIFJhbmRvbSBudW1iZXIgdG8gZGV0ZXJtaW5lIHdoYXQgaW1hZ2UvY2hhcmFjdGVyIHRoZSBzcHJpdGUgd2lsbCBiZQogICAgICAgICAgICAKICAgICAgICAgICAgVHJhbnNmZXIgKGtpdHR5T3duZXIsIG1zZy5zZW5kZXIsIHNwcml0ZUlkKTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRvdGFsQnV5cysrOwogICAgICAgIAogICAgICAgIHNwcml0ZU93bmluZ0hpc3RvcnlbbXNnLnNlbmRlcl0ucHVzaChzcHJpdGVJZCk7CiAgICAgICAgbnVtYmVyT2ZTcHJpdGVzT3duZWRCeVVzZXJbbXNnLnNlbmRlcl0rKzsKICAgICAgICAKICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5mb3JTYWxlID0gZmFsc2U7CiAgICAgICAgYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnRpbWVzVHJhZGVkKys7CiAgICAgICAgYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLmZlYXR1cmVkID0gZmFsc2U7CiAgICAgICAgICAgIAogICAgICAgIGV0aGVyRm9yT3duZXIgKz0gX293bmVyQ3V0OwogICAgICAgIGV0aGVyRm9yQ2hhcml0eSArPSBfY2hhcml0eUN1dDsKICAgICAgICAKICAgIH0KICAgIAogICAgLy8gQWxzbyB1c2VkIHRvIGFkanVzdCBwcmljZSBpZiBhbHJlYWR5IGZvciBzYWxlCiAgICBmdW5jdGlvbiBsaXN0U3ByaXRlRm9yU2FsZSAodWludCBzcHJpdGVJZCwgdWludCBwcmljZSkgewogICAgICAgIHJlcXVpcmUgKHByaWNlID4gMCk7CiAgICAgICAgaWYgKGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5vd25lciAhPSBtc2cuc2VuZGVyKSB7CiAgICAgICAgICAgIHJlcXVpcmUgKGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS50aW1lc1RyYWRlZCA9PSAwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB0aGUgb3duZXIgb2YgYSBDcnlwdG8gS2l0dHksIHdobyBjYW4gY29udHJvbCB0aGUgcHJpY2Ugb2YgdGhlaXIgdW5icm91Z2h0IFNwcml0ZQogICAgICAgICAgICBhZGRyZXNzIGtpdHR5T3duZXIgPSBLaXR0eUNvcmUoS2l0dHlDb3JlQWRkcmVzcykub3duZXJPZihzcHJpdGVJZCk7CiAgICAgICAgICAgIHJlcXVpcmUgKGtpdHR5T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgICAgIAogICAgICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ub3duZXIgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0uc3ByaXRlSW1hZ2VJRCA9IHVpbnQoYmxvY2suYmxvY2toYXNoKGJsb2NrLm51bWJlci0xKSklMzYwICsgMTsgCiAgICAgICAgfQogICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5mb3JTYWxlID0gdHJ1ZTsKICAgICAgICBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ucHJpY2UgPSBwcmljZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVtb3ZlU3ByaXRlRnJvbVNhbGUgKHVpbnQgc3ByaXRlSWQpIHsKICAgICAgICBpZiAoYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLm93bmVyICE9IG1zZy5zZW5kZXIpIHsKICAgICAgICAgICAgcmVxdWlyZSAoYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnRpbWVzVHJhZGVkID09IDApOwogICAgICAgICAgICBhZGRyZXNzIGtpdHR5T3duZXIgPSBLaXR0eUNvcmUoS2l0dHlDb3JlQWRkcmVzcykub3duZXJPZihzcHJpdGVJZCk7CiAgICAgICAgICAgIHJlcXVpcmUgKGtpdHR5T3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSA9IDE7IC8vIFdoZW4gYSB1c2VyIGJ1eXMgYSBTcHJpdGUgSWQgdGhhdCBpc24ndCBmb3Igc2FsZSBpbiB0aGUgYnV5U3ByaXRlKCkgZnVuY3Rpb24gKGllLiB3b3VsZCBiZSBhIFNwcml0ZSB0aGF0J3MgbmV2ZXIgYmVlbiBicm91Z2h0IGJlZm9yZSwgZm9yIGEgQ3J5cHRvIEtpdHR5IHRoYXQncyBmb3Igc2FsZSksIG9uZSBvZiB0aGUgcmVxdWlyZW1lbnRzIGlzIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5wcmljZSA9PSAwLCB3aGljaCB3aWxsIGJlIHRoZSBjYXNlIGJ5IGRlZmF1bHQuIEJ5IG1ha2luZyB0aGUgcHJpY2UgPSAxIHRoaXMgd2lsbCB0aHJvdyBhbmQgdGhlIFNwcml0ZSB3b24ndCBiZSBhYmxlIHRvIGJlIGJyb3VnaHQKICAgICAgICB9IAogICAgICAgIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5mb3JTYWxlID0gZmFsc2U7CiAgICB9CiAgICAKICAgIC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSBpbiBjYXNlIGEgZGlmZmVyZW50IGNvbnRyYWN0IHdhbnRzIHRvIHB1bGwgdGhpcyBkYXRhLCB3aGljaCByZXF1aXJlcyBhIGZ1bmN0aW9uIHJldHVybmluZyBpdCAoZXZlbiBpZiB0aGUgdmFyaWFibGVzIGFyZSBwdWJsaWMpIHNpbmNlIHNvbGlkaXR5IGNvbnRyYWN0cyBjYW4ndCBkaXJlY3RseSBwdWxsIHN0b3JhZ2Ugb2YgYW5vdGhlciBjb250cmFjdAogICAgCiAgICBmdW5jdGlvbiBmZWF0dXJlZFNwcml0ZXNMZW5ndGgoKSB2aWV3IGV4dGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gZmVhdHVyZWRTcHJpdGVzLmxlbmd0aDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXNlcnNTcHJpdGVPd25pbmdIaXN0b3J5IChhZGRyZXNzIHVzZXIpIHZpZXcgZXh0ZXJuYWwgcmV0dXJucyAodWludFtdKSB7CiAgICAgICAgcmV0dXJuIHNwcml0ZU93bmluZ0hpc3RvcnlbdXNlcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvb2t1cFNwcml0ZSAodWludCBzcHJpdGVJZCkgdmlldyBleHRlcm5hbCByZXR1cm5zIChhZGRyZXNzLCB1aW50LCBib29sLCB1aW50LCB1aW50LCBib29sKSB7CiAgICAgICAgcmV0dXJuIChicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0ub3duZXIsIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5zcHJpdGVJbWFnZUlELCBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0uZm9yU2FsZSwgYnJvdWdodFNwcml0ZXNbc3ByaXRlSWRdLnByaWNlLCBicm91Z2h0U3ByaXRlc1tzcHJpdGVJZF0udGltZXNUcmFkZWQsIGJyb3VnaHRTcHJpdGVzW3Nwcml0ZUlkXS5mZWF0dXJlZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvb2t1cEZlYXR1cmVkU3ByaXRlcyAodWludCBzcHJpdGVJZCkgdmlldyBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGZlYXR1cmVkU3ByaXRlc1tzcHJpdGVJZF07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvb2t1cEFsbFNwcml0ZXMgKHVpbnQgc3ByaXRlSWQpIHZpZXcgZXh0ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBhbGxQdXJjaGFzZWRTcHJpdGVzW3Nwcml0ZUlkXTsKICAgIH0KICAgIAogICAgLy8gV2lsbCBjYWxsIFNhbGVDbG9ja0F1Y3Rpb24gdG8gZ2V0IHRoZSBvd25lciBvZiBhIGtpdHRlbiBhbmQgY2hlY2sgaXRzIHByaWNlIChpZiBpdCdzIGZvciBzYWxlKS4gV2UncmUgY2FsbGluZyB0aGUgZ2V0QXVjdGlvbigpIGZ1bmN0aW9uIGluIHRoZSBTYWxlQ2xvY2tBdWN0aW9uIHRvIGdldCB0aGUga2l0dHkgb3duZXIgKHRoYXQgZnVuY3Rpb24gcmV0dXJucyA1IHZhcmlhYmxlcywgd2Ugb25seSB3YW50IHRoZSBvd25lcikuIG93bmVyT2YoKSBpbiB0aGUgS2l0dHlDb3JlIGNvbnRyYWN0IHdvbid0IHJldHVybiB0aGUga2l0dHkgb3duZXIgaWYgdGhlIGtpdHR5IGlzIGZvciBzYWxlLCBhbmQgdGhpcyBwcm9iYWJseSB3b24ndCBiZSB1c2VkIChpbmNsdWRpbmcgaXQgaW4gY2FzZSBpdCdzIG5lZWRlZCB0byBsb29rdXAgYW4gb3duZXIgb2YgYSBraXR0eSBub3QgZm9yIHNhbGUgbGF0ZXIgZm9yIGFueSByZWFzb24pCiAgICAKICAgIGZ1bmN0aW9uIGxvb2t1cEtpdHR5ICh1aW50IGtpdHR5SWQpIHZpZXcgcmV0dXJucyAoYWRkcmVzcywgdWludCwgYWRkcmVzcykgewogICAgICAgIAogICAgICAgIHZhciAoa2l0dHlPd25lciwsLCwpID0gU2FsZUNsb2NrQXVjdGlvbihTYWxlQ2xvY2tBdWN0aW9uQWRkcmVzcykuZ2V0QXVjdGlvbihraXR0eUlkKTsKCiAgICAgICAgdWludCBwcmljZUlmQW55ID0gU2FsZUNsb2NrQXVjdGlvbihTYWxlQ2xvY2tBdWN0aW9uQWRkcmVzcykuZ2V0Q3VycmVudFByaWNlKGtpdHR5SWQpOwogICAgICAgIAogICAgICAgIGFkZHJlc3Mga2l0dHlPd25lck5vdEZvclNhbGUgPSBLaXR0eUNvcmUoS2l0dHlDb3JlQWRkcmVzcykub3duZXJPZihraXR0eUlkKTsKCiAgICAgICAgcmV0dXJuIChraXR0eU93bmVyLCBwcmljZUlmQW55LCBraXR0eU93bmVyTm90Rm9yU2FsZSk7CgogICAgfQogICAgCiAgICAvLyBUaGUgYmVsb3cgdHdvIGZ1bmN0aW9ucyB3aWxsIHB1bGwgYWxsIGluZm8gb2YgYSBraXR0ZW4uIFNwbGl0IGludG8gdHdvIGZ1bmN0aW9ucyBvdGhlcndpc2Ugc3RhY2sgdG9vIGRlZXAgZXJyb3JzLiBUaGVzZSBtYXkgbm90IGV2ZW4gYmUgbmVlZGVkLCBtYXkganVzdCBiZSB1c2VkIHNvIHRoZSB3ZWJzaXRlIGNhbiBkaXNwbGF5IGFsbCBpbmZvIG9mIGEga2l0dGVuIHdoZW4gc29tZW9uZSBsb29rcyBpdCB1cC4KICAgIAogICAgZnVuY3Rpb24gbG9va3VwS2l0dHlEZXRhaWxzMSAodWludCBraXR0eUlkKSB2aWV3IHJldHVybnMgKGJvb2wsIGJvb2wsIHVpbnQsIHVpbnQsIHVpbnQpIHsKICAgICAgICAKICAgICAgICB2YXIgKGlzR2VzdGF0aW5nLCBpc1JlYWR5LCBjb29sZG93bkluZGV4LCBuZXh0QWN0aW9uQXQsIHNpcmluZ1dpdGhJZCwsLCwsKSA9IEtpdHR5Q29yZShLaXR0eUNvcmVBZGRyZXNzKS5nZXRLaXR0eShraXR0eUlkKTsKICAgICAgICAKICAgICAgICByZXR1cm4gKGlzR2VzdGF0aW5nLCBpc1JlYWR5LCBjb29sZG93bkluZGV4LCBuZXh0QWN0aW9uQXQsIHNpcmluZ1dpdGhJZCk7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvb2t1cEtpdHR5RGV0YWlsczIgKHVpbnQga2l0dHlJZCkgdmlldyByZXR1cm5zICh1aW50LCB1aW50LCB1aW50LCB1aW50LCB1aW50KSB7CiAgICAgICAgCiAgICAgICAgdmFyKCwsLCwsYmlydGhUaW1lLCBtYXRyb25JZCwgc2lyZUlkLCBnZW5lcmF0aW9uLCBnZW5lcykgPSBLaXR0eUNvcmUoS2l0dHlDb3JlQWRkcmVzcykuZ2V0S2l0dHkoa2l0dHlJZCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIChiaXJ0aFRpbWUsIG1hdHJvbklkLCBzaXJlSWQsIGdlbmVyYXRpb24sIGdlbmVzKTsKICAgICAgICAKICAgIH0KICAgIAogICAgLy8gRVJDLTcyMSByZXF1aXJlZCBmdW5jdGlvbnMgYmVsb3cKICAgIAogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gJ0NyeXB0byBTcHJpdGVzJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ0NSUyc7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAwOyAvLyBTcHJpdGVzIGFyZSBub24tZnVuZ2libGUsIGllLiBjYW4ndCBiZSBkaXZpZGVkIGludG8gcGllY2VzCiAgICAKICAgIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nKSB7CiAgICAgICAgcmV0dXJuIHN5bWJvbDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGFsbFB1cmNoYXNlZFNwcml0ZXMubGVuZ3RoOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YgKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG51bWJlck9mU3ByaXRlc093bmVkQnlVc2VyW19vd25lcl07CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG93bmVyT2YgKHVpbnQgX3Rva2VuSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyl7CiAgICAgICAgcmV0dXJuIGJyb3VnaHRTcHJpdGVzW190b2tlbklkXS5vd25lcjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZSAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlIChicm91Z2h0U3ByaXRlc1tfdG9rZW5JZF0ub3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgYWxsb3dlZCBbbXNnLnNlbmRlcl1bX3RvXS5wdXNoKF90b2tlbklkKTsKICAgICAgICBBcHByb3ZhbCAobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyIChhZGRyZXNzIF90bywgdWludCBfdG9rZW5JZCkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUgKGJyb3VnaHRTcHJpdGVzW190b2tlbklkXS5vd25lciA9PSBtc2cuc2VuZGVyKTsKICAgICAgICBicm91Z2h0U3ByaXRlc1tfdG9rZW5JZF0ub3duZXIgPSBfdG87CiAgICAgICAgbnVtYmVyT2ZTcHJpdGVzT3duZWRCeVVzZXJbbXNnLnNlbmRlcl0tLTsKICAgICAgICBudW1iZXJPZlNwcml0ZXNPd25lZEJ5VXNlcltfdG9dKys7CiAgICAgICAgc3ByaXRlT3duaW5nSGlzdG9yeVtfdG9dLnB1c2goX3Rva2VuSWQpOwogICAgICAgIFRyYW5zZmVyIChtc2cuc2VuZGVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20gKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBleHRlcm5hbCB7CiAgICAgICAgLy8gVGhpcyBhcnJheSBzaG91bGRuJ3QgYmUgYmlnIGF0IGFsbCAoaWYgaXQncyBldmVuIG1vcmUgdGhhbiAxIGl0ZW0pIHVubGVzcyBzb21lb25lIG93bnMgYSBodWdlIG51bWJlciBvZiBTcHJpdGVzIGFuZCBoYXMgY2FsbGVkIGFwcHJvdmUoKSBvbiBlYWNoIG9mIHRoZWlyIFNwcml0ZXMgdG8gYWxsb3cgYSBjZXJ0YWluIGFkZHJlc3MgdG8gdHJhbnNmZXIgZWFjaCBvbmUgb2YgdGhlbQogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXVtpXSA9PSBfdG9rZW5JZCkgewogICAgICAgICAgICAgICAgcmVxdWlyZSAoYnJvdWdodFNwcml0ZXNbX3Rva2VuSWRdLm93bmVyID09IF9mcm9tKTsKICAgICAgICAgICAgICAgIG51bWJlck9mU3ByaXRlc093bmVkQnlVc2VyW2Jyb3VnaHRTcHJpdGVzW190b2tlbklkXS5vd25lcl0tLTsKICAgICAgICAgICAgICAgIG51bWJlck9mU3ByaXRlc093bmVkQnlVc2VyW190b10rKzsKICAgICAgICAgICAgICAgIHNwcml0ZU93bmluZ0hpc3RvcnlbX3RvXS5wdXNoKF90b2tlbklkKTsKICAgICAgICAgICAgICAgIGJyb3VnaHRTcHJpdGVzW190b2tlbklkXS5vd25lciA9IF90bzsKICAgICAgICAgICAgICAgIFRyYW5zZmVyIChicm91Z2h0U3ByaXRlc1tfdG9rZW5JZF0ub3duZXIsIF90bywgX3Rva2VuSWQpOwogICAgICAgICAgICB9IAogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlIChhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl0ubGVuZ3RoOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZSAoYnl0ZXM0IF9pbnRlcmZhY2VJRCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CgogICAgICAgIHJldHVybiAoKF9pbnRlcmZhY2VJRCA9PSBJbnRlcmZhY2VTaWduYXR1cmVfRVJDMTY1KSB8fCAoX2ludGVyZmFjZUlEID09IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjEpKTsKICAgIH0KICAgIAp9'.
	

]
