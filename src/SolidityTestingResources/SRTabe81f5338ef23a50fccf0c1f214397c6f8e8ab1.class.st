Class {
	#name : #SRTabe81f5338ef23a50fccf0c1f214397c6f8e8ab1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTabe81f5338ef23a50fccf0c1f214397c6f8e8ab1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZUV4dGVuZGVkIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZUV4dGVuZGVkKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgYWRtaW4gPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lciBvciBhZG1pbi4KICAgKi8KICBtb2RpZmllciBvbmx5QWRtaW4oKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBhZG1pbik7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQogIH0KCiAgLyoqCiAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byBjaGFuZ2UgYWRtaW4gb2YgdGhlIGNvbnRyYWN0CiAgKiBAcGFyYW0gbmV3QWRtaW4gVGhlIG5ldyBhZG1pbiBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBjaGFuZ2VBZG1pbihhZGRyZXNzIG5ld0FkbWluKSBvbmx5T3duZXIgewogICAgaWYgKG5ld0FkbWluICE9IGFkZHJlc3MoMCkpIHsKICAgICAgYWRtaW4gPSBuZXdBZG1pbjsKICAgIH0KICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBpQ2hhbXBpb24gewogICAgdWludDI1NiBwdWJsaWMgY3VycmVudEdhbWVCbG9ja051bWJlcjsKCiAgICBmdW5jdGlvbiBidXlUaWNrZXQoYWRkcmVzcykgcmV0dXJucyAodWludDI1NiwgdWludDI1Nikge30KICAgIGZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHJldHVybnMgKGJvb2wpIHt9CiAgICBmdW5jdGlvbiBmaW5pc2hDdXJyZW50R2FtZSgpIHJldHVybnMgKGFkZHJlc3MpIHt9CiAgICBmdW5jdGlvbiBzZXRHYW1lUHJpemUodWludDI1NiwgdWludDI1Nikge30KfQoKY29udHJhY3QgT3R0b2xvdHRvIGlzIE93bmFibGVFeHRlbmRlZCB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50ODsKICAgIAogICAgZXZlbnQgU3RhcnRlZEdhbWUodWludDI1NiBpbmRleGVkIF9nYW1lLCB1aW50MjU2IF9uZXh0R2FtZSk7CiAgICBldmVudCBHYW1lUHJvZ3Jlc3ModWludDI1NiBpbmRleGVkIF9nYW1lLCB1aW50MjU2IF9wcm9jZXNzZWQsIHVpbnQyNTYgX3RvUHJvY2Vzcyk7CiAgICBldmVudCBUaWNrZXQodWludDI1NiBpbmRleGVkIF9nYW1lLCBhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIGJ5dGVzMyBiZXQpOwogICAgZXZlbnQgV2luKGFkZHJlc3MgaW5kZXhlZCBfYWRkcmVzcywgdWludDI1NiBpbmRleGVkIF9nYW1lLCB1aW50MjU2IF9tYXRjaGVzLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RpbWUpOwogICAgZXZlbnQgSmFja3BvdChhZGRyZXNzIGluZGV4ZWQgX2FkZHJlc3MsIHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgdWludDI1NiBfYW1vdW50LCB1aW50MjU2IF90aW1lKTsKICAgIGV2ZW50IFJhaXNlZEJ5UGFydG5lcihhZGRyZXNzIGluZGV4ZWQgX3BhcnRuZXIsIHVpbnQyNTYgX2dhbWUsIHVpbnQyNTYgX2Ftb3VudCwgdWludDI1NiBfdGltZSk7CiAgICBldmVudCBDaGFtcGlvbkdhbWVTdGFydGVkKHVpbnQyNTYgaW5kZXhlZCBfZ2FtZSwgdWludDI1NiBfdGltZSk7CiAgICBldmVudCBDaGFtcGlvbkdhbWVGaW5pc2hlZCh1aW50MjU2IGluZGV4ZWQgX2dhbWUsIGFkZHJlc3MgaW5kZXhlZCBfd2lubmVyLCB1aW50MjU2IF9hbW91bnQsIHVpbnQyNTYgX3RpbWUpOwoKICAgIHN0cnVjdCBXaW5uZXIgewogICAgICAgIGFkZHJlc3MgcGxheWVyOwogICAgICAgIGJ5dGVzMyAgYmV0OwogICAgICAgIHVpbnQ4ICAgbWF0Y2hlczsKICAgIH0KICAgIAogICAgc3RydWN0IEJldCB7CiAgICAgICAgYWRkcmVzcyBwbGF5ZXI7CiAgICAgICAgYnl0ZXMzICBiZXQ7CiAgICB9CgogICAgc3RydWN0IFRpY2tldEJldCB7CiAgICAgICAgYnl0ZXMzICBiZXQ7CiAgICAgICAgYm9vbCAgICBpc1BheWVkOwogICAgfQoKICAgIGlDaGFtcGlvbiBwdWJsaWMgY2hhbXBpb247CgogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiBUaWNrZXRCZXRbXSkpIHRpY2tldHM7CiAgICBtYXBwaW5nKHVpbnQyNTYgPT4gQmV0W10pIGdhbWVCZXRzOwogICAgbWFwcGluZyh1aW50MjU2ID0+IFdpbm5lcltdKSB3aW5uZXJzOwogICAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIHdlaVJhaXNlZDsKICAgIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBnYW1lU3RhcnRCbG9jazsKICAgIG1hcHBpbmcodWludDI1NiA9PiB1aW50MzJbN10pIGdhbWVTdGF0czsKICAgIG1hcHBpbmcodWludDI1NiA9PiBib29sKSBnYW1lQ2FsY3VsYXRlZDsKICAgIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzczsKICAgIG1hcHBpbmcodWludDggPT4gdWludDgpIHBlcmNlbnRzOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGFkZHJlc3MpIHBhcnRuZXI7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gYWRkcmVzc1tdKSBwYXJ0bmVyczsKCiAgICB1aW50MjU2W10gcHVibGljIGFsbEdhbWVzOwoKICAgIHVpbnQyNTYgcHVibGljIGphY2twb3Q7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIGdhbWVOZXh0OwogICAgdWludDI1NiBwdWJsaWMgZ2FtZVBsYXllZDsgIAogICAgdWludDggICBwdWJsaWMgZ2FtZUR1cmF0aW9uID0gNjsKCiAgICBib29sIHB1YmxpYyBnYW1lUGxheWVkU3RhdHVzID0gZmFsc2U7CiAgICAKICAgIHVpbnQyNTYgcHVibGljIHRpY2tldFByaWNlID0gMC4wMDEgZXRoZXI7CiAgICB1aW50MjU2IHB1YmxpYyBuZXdQcmljZSA9IDAgZXRoZXI7CiAgICAKICAgIGZ1bmN0aW9uIE90dG9sb3R0bygpIHt9CiAgICAKICAgIGZ1bmN0aW9uIGluaXQoYWRkcmVzcyBfY2hhbXBpb24pIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShnYW1lTmV4dCA9PSAwKTsKICAgICAgICBnYW1lTmV4dCA9IGJsb2NrLm51bWJlcjsKICAgICAgICAKICAgICAgICBwZXJjZW50c1sxXSA9IDU7CiAgICAgICAgcGVyY2VudHNbMl0gPSA4OwogICAgICAgIHBlcmNlbnRzWzNdID0gMTI7CiAgICAgICAgcGVyY2VudHNbNF0gPSAxNTsKICAgICAgICBwZXJjZW50c1s1XSA9IDI1OwogICAgICAgIHBlcmNlbnRzWzZdID0gMzU7CgogICAgICAgIGNoYW1waW9uID0gaUNoYW1waW9uKF9jaGFtcGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGFzdEdhbWVzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NlsxMF0gbGFzdEdhbWVzKSB7CiAgICAgICAgdWludDI1NiBqID0gMDsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IGFsbEdhbWVzLmxlbmd0aCAtIDExOyBpIDwgYWxsR2FtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGFzdEdhbWVzW2pdID0gYWxsR2FtZXNbaV07CiAgICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIHJldHVybiBsYXN0R2FtZXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0R2FtZVByaXplKHVpbnQyNTYgX2dhbWUpCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gd2VpUmFpc2VkW19nYW1lXTsgICAgICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0R2FtZVN0YXJ0QmxvY2sodWludDI1NiBfZ2FtZSkgCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZ2FtZVN0YXJ0QmxvY2tbX2dhbWVdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRHYW1lQ2FsY3VsYXRpb25Qcm9ncmVzcyh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGxheWVyc0NvdW50KHVpbnQyNTYgX2dhbWUpCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZ2FtZUJldHNbX2dhbWVdLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRHYW1lQ2FsY3VsYXRlZFN0YXRzKHVpbnQyNTYgX2dhbWUpCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKHVpbnQzMls3XSkgewogICAgICAgIHJldHVybiBnYW1lU3RhdHNbX2dhbWVdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFBhcnRuZXIoYWRkcmVzcyBfcGxheWVyKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIHBhcnRuZXJbX3BsYXllcl07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGFydG5lcnMoYWRkcmVzcyBfcGxheWVyKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICAgICAgcmV0dXJuIHBhcnRuZXJzW19wbGF5ZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJldChhZGRyZXNzIF9wbGF5ZXIsIHVpbnQyNTYgX2dhbWUpIAogICAgICAgIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzM1tdKSB7CiAgICAgICAgYnl0ZXMzW10gbWVtb3J5IGJldHMgPSBuZXcgYnl0ZXMzW10odGlja2V0c1tfcGxheWVyXVtfZ2FtZV0ubGVuZ3RoKTsKICAgICAgICBmb3IgKHVpbnQzMiBpID0gMDsgaSA8IHRpY2tldHNbX3BsYXllcl1bX2dhbWVdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJldHNbaV0gPSB0aWNrZXRzW19wbGF5ZXJdW19nYW1lXVtpXS5iZXQ7CiAgICAgICAgfSAgICAgICAgCiAgICAgICAgcmV0dXJuIGJldHM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0V2lubmVycyh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzc1tdKSB7CiAgICAgICAgYWRkcmVzc1tdIG1lbW9yeSBfd2lubmVycyA9IG5ldyBhZGRyZXNzW10od2lubmVyc1tfZ2FtZV0ubGVuZ3RoKTsKICAgICAgICBmb3IgKHVpbnQzMiBpID0gMDsgaSA8IHdpbm5lcnNbX2dhbWVdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF93aW5uZXJzW2ldID0gd2lubmVyc1tfZ2FtZV1baV0ucGxheWVyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3dpbm5lcnM7CiAgICB9CgogICAgZnVuY3Rpb24gYmV0c0FyZVBheWVkKGFkZHJlc3MgX3BsYXllciwgdWludDI1NiBfZ2FtZSkgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQyNTYgc3RhcnRCbG9jayA9IGdldEdhbWVTdGFydEJsb2NrKF9nYW1lKTsKICAgICAgICBmb3IgKHVpbnQxNiBpID0gMDsgaSA8IHRpY2tldHNbX3BsYXllcl1bX2dhbWVdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0aWNrZXRzW19wbGF5ZXJdW19nYW1lXVtpXS5pc1BheWVkID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB1aW50OCBtYXRjaGVzID0gZ2V0TWF0Y2hlcyhzdGFydEJsb2NrLCB0aWNrZXRzW19wbGF5ZXJdW19nYW1lXVtpXS5iZXQpOwogICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEdhbWVCbG9ja3ModWludDI1NiBfZ2FtZSkgCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMoYnl0ZXMzMltdKSB7CiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrID0gZ2V0R2FtZVN0YXJ0QmxvY2soX2dhbWUpOwogICAgICAgIGJ5dGVzMzJbXSBtZW1vcnkgYmxvY2tzID0gbmV3IGJ5dGVzMzJbXSg2KTsKICAgICAgICB1aW50OCBudW0gPSAwOwogICAgICAgIGZvciAoc3RhcnRCbG9jazsgc3RhcnRCbG9jayArIG51bSA8PSBzdGFydEJsb2NrICsgZ2FtZUR1cmF0aW9uIC0gMTsgbnVtKyspIHsKICAgICAgICAgICAgYmxvY2tzW251bV0gPSBibG9jay5ibG9ja2hhc2goc3RhcnRCbG9jayArIG51bSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBibG9ja3M7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRvQnl0ZXModWludDggbjEsIHVpbnQ4IG4yLCB1aW50OCBuMywgdWludDggbjQsIHVpbnQ4IG41LCB1aW50OCBuNikgCiAgICAgICAgICAgIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMykgewogICAgICAgIHJldHVybiBieXRlczMoMTYqKjUqbjErMTYqKjQqbjIrMTYqKjMqbjMrMTYqKjIqbjQrMTYqKjEqbjUrbjYpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBtb2RpZnlCZXQoYnl0ZXMzMiBfYmV0LCB1aW50MjU2IF9zdGVwKSAKICAgICAgICAgICAgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBfYmV0ID4+ICgyMzIgKyAoX3N0ZXAgKiA0IC0gNCkpIDw8IDI1MiA+PiAyNTI7CiAgICB9CgogICAgZnVuY3Rpb24gbW9kaWZ5QmxvY2sodWludDI1NiBfYmxvY2tOdW1iZXIpIAogICAgICAgICAgICBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChieXRlczMyKSB7CiAgICAgICAgcmV0dXJuIGJsb2NrLmJsb2NraGFzaChfYmxvY2tOdW1iZXIpIDw8IDI1MiA+PiAyNTI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGVxdWFsTnVtYmVyKGJ5dGVzMzIgX2JldCwgdWludDI1NiBfZ2FtZSwgdWludDI1NiBfZW5kQmxvY2spIAogICAgICAgICAgICBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludDI1NiBzdGVwID0gX2VuZEJsb2NrIC0gX2dhbWU7CiAgICAgICAgaWYgKG1vZGlmeUJsb2NrKF9nYW1lKSBeIG1vZGlmeUJldChfYmV0LCBzdGVwKSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG1ha2VCZXQodWludDggbjEsIHVpbnQ4IG4yLCB1aW50OCBuMywgdWludDggbjQsIHVpbnQ4IG41LCB1aW50OCBuNiwgYWRkcmVzcyBfcGFydG5lcikgCiAgICAgICAgICAgIHBheWFibGUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID09IHRpY2tldFByaWNlKTsKICAgICAgICAgICAgICAgIAogICAgICAgIGJ5dGVzMyB1QmV0ID0gdG9CeXRlcyhuMSwgbjIsIG4zLCBuNCwgbjUsIG42KTsKICAgICAgICBCZXQgbWVtb3J5IHBCZXQgPSBCZXQoe3BsYXllcjogbXNnLnNlbmRlciwgYmV0OiB1QmV0fSk7CiAgICAgICAgVGlja2V0QmV0IG1lbW9yeSB0QmV0ID0gVGlja2V0QmV0KHtiZXQ6IHVCZXQsIGlzUGF5ZWQ6IGZhbHNlfSk7CgogICAgICAgIHRpY2tldHNbbXNnLnNlbmRlcl1bZ2FtZU5leHRdLnB1c2godEJldCk7CiAgICAgICAgZ2FtZUJldHNbZ2FtZU5leHRdLnB1c2gocEJldCk7CiAgICAgICAgCiAgICAgICAgd2VpUmFpc2VkW2dhbWVOZXh0XSArPSB0aWNrZXRQcmljZTsKICAgICAgICAKICAgICAgICBUaWNrZXQoZ2FtZU5leHQsIG1zZy5zZW5kZXIsIHVCZXQpOwoKICAgICAgICBjaGFtcGlvbi5idXlUaWNrZXQobXNnLnNlbmRlcik7CgogICAgICAgIGlmIChfcGFydG5lciAhPSAweDAgJiYgcGFydG5lclttc2cuc2VuZGVyXSA9PSAweDApIHsKICAgICAgICAgICAgYWRkUGFydG5lcihfcGFydG5lciwgbXNnLnNlbmRlcik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydEdhbWUoKSBvbmx5QWRtaW4gcmV0dXJucyAoYm9vbCkgewogICAgICAgIGdhbWVQbGF5ZWQgPSBnYW1lTmV4dDsKICAgICAgICBnYW1lTmV4dCA9IGJsb2NrLm51bWJlcjsKICAgICAgICBnYW1lUGxheWVkU3RhdHVzID0gdHJ1ZTsKCiAgICAgICAgZ2FtZVN0YXJ0QmxvY2tbZ2FtZVBsYXllZF0gPSBnYW1lTmV4dCArIGdhbWVEdXJhdGlvbjsKCgogICAgICAgIGphY2twb3QgKz0gd2VpUmFpc2VkW2dhbWVQbGF5ZWRdLm11bChwZXJjZW50c1s2XSkuZGl2KDEwMCk7CiAgICAgICAgU3RhcnRlZEdhbWUoZ2FtZVBsYXllZCwgZ2FtZU5leHQpOwogICAgICAgIAogICAgICAgIGlmIChuZXdQcmljZSAhPSAwKSB7CiAgICAgICAgICAgIHRpY2tldFByaWNlID0gbmV3UHJpY2U7CiAgICAgICAgICAgIG5ld1ByaWNlID0gMDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hdGNoZXModWludDI1NiBfZ2FtZSwgYnl0ZXMzIF9iZXQpIAogICAgICAgICAgICBjb25zdGFudCByZXR1cm5zICh1aW50OCkgewogICAgICAgIGJ5dGVzMzIgYmV0ID0gYnl0ZXMzMihfYmV0KTsKICAgICAgICB1aW50MjU2IGVuZEJsb2NrID0gX2dhbWUgKyBnYW1lRHVyYXRpb247CiAgICAgICAgdWludDggbWF0Y2hlcyA9IDA7CiAgICAgICAgZm9yICg7IGVuZEJsb2NrID4gX2dhbWU7IF9nYW1lKyspIHsKICAgICAgICAgICAgaWYgKGVxdWFsTnVtYmVyKGJldCwgX2dhbWUsIGVuZEJsb2NrKSkgewogICAgICAgICAgICAgICAgbWF0Y2hlcysrOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgfQogICAgICAgIAogICAgZnVuY3Rpb24gZ2V0QWxsTWF0Y2hlcyh1aW50MjU2IF9nYW1lKSAKICAgICAgICAgICAgY29uc3RhbnQgcmV0dXJucyAodWludDI1NltdKSB7CiAgICAgICAgdWludDI1NiBzdGFydEJsb2NrID0gZ2V0R2FtZVN0YXJ0QmxvY2soX2dhbWUpOwogICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgbWF0Y2hlcyA9IG5ldyB1aW50MjU2W10oNyk7CiAgICAgICAgZm9yICh1aW50MzIgaSA9IDA7IGkgPCBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgQmV0IG1lbW9yeSBiZXQgPSBnYW1lQmV0c1tfZ2FtZV1baV07CiAgICAgICAgICAgIHVpbnQ4IG1hdGNoZWQgPSBnZXRNYXRjaGVzKHN0YXJ0QmxvY2ssIGJldC5iZXQpOwogICAgICAgICAgICBpZiAobWF0Y2hlZCA9PSAwKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAobWF0Y2hlZCA9PSAxKSA/IG1hdGNoZXNbMV0gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSAyKSA/IG1hdGNoZXNbMl0gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSAzKSA/IG1hdGNoZXNbM10gKz0gMSA6IAogICAgICAgICAgICAobWF0Y2hlZCA9PSA0KSA/IG1hdGNoZXNbNF0gKz0gMSA6CiAgICAgICAgICAgIChtYXRjaGVkID09IDUpID8gbWF0Y2hlc1s1XSArPSAxIDoKICAgICAgICAgICAgKG1hdGNoZWQgPT0gNikgPyBtYXRjaGVzWzZdICs9IDEgOiBtYXRjaGVzWzZdICs9IDA7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgfQoKICAgIGZ1bmN0aW9uIGdhbWVJc092ZXIodWludDI1NiBfZ2FtZSkgCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoZ2FtZVN0YXJ0QmxvY2tbX2dhbWVdID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChnYW1lU3RhcnRCbG9ja1tfZ2FtZV0gKyBnYW1lRHVyYXRpb24gLSAxKSA8IGJsb2NrLm51bWJlcjsgICAKICAgIH0KCiAgICBmdW5jdGlvbiBnYW1lSXNDYWxjdWxhdGVkKHVpbnQyNTYgX2dhbWUpCiAgICAgICAgICAgIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZ2FtZUNhbGN1bGF0ZWRbX2dhbWVdOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUdhbWVUb0NhbGN1bGF0ZWQodWludDI1NiBfZ2FtZSkgaW50ZXJuYWwgewogICAgICAgIGFsbEdhbWVzLnB1c2goX2dhbWUpOwogICAgICAgIGdhbWVDYWxjdWxhdGVkW19nYW1lXSA9IHRydWU7CiAgICAgICAgZ2FtZVBsYXllZFN0YXR1cyA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHByb2Nlc3NHYW1lKHVpbnQyNTYgX2dhbWUsIHVpbnQyNTYgY2FsY3VsYXRpb25TdGVwKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShnYW1lUGxheWVkU3RhdHVzID09IHRydWUpOwogICAgICAgIHJlcXVpcmUoZ2FtZUlzT3ZlcihfZ2FtZSkpOwoKICAgICAgICBpZiAoZ2FtZUlzQ2FsY3VsYXRlZChfZ2FtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKCiAgICAgICAgaWYgKGdhbWVDYWxjdWxhdGlvblByb2dyZXNzW19nYW1lXSA9PSBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHVwZGF0ZUdhbWVUb0NhbGN1bGF0ZWQoX2dhbWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IAoKICAgICAgICB1aW50MjU2IHN0ZXBzID0gY2FsY3VsYXRpb25TdGVwOwogICAgICAgIGlmIChnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0gKyBzdGVwcyA+IGdhbWVCZXRzW19nYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgc3RlcHMgLT0gZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdICsgc3RlcHMgLSBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoOwogICAgICAgIH0KICAgIAogICAgICAgIHVpbnQzMltdIG1lbW9yeSBtYXRjaGVzID0gbmV3IHVpbnQzMltdKDcpOwogICAgICAgIHVpbnQyNTYgdG8gPSBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0gKyBzdGVwczsKICAgICAgICB1aW50MjU2IHN0YXJ0QmxvY2sgPSBnZXRHYW1lU3RhcnRCbG9jayhfZ2FtZSk7CiAgICAgICAgZm9yICg7IGdhbWVDYWxjdWxhdGlvblByb2dyZXNzW19nYW1lXSA8IHRvOyBnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV0rKykgewogICAgICAgICAgICBCZXQgbWVtb3J5IGJldCA9IGdhbWVCZXRzW19nYW1lXVtnYW1lQ2FsY3VsYXRpb25Qcm9ncmVzc1tfZ2FtZV1dOwogICAgICAgICAgICB1aW50OCBtYXRjaGVkID0gZ2V0TWF0Y2hlcyhzdGFydEJsb2NrLCBiZXQuYmV0KTsKICAgICAgICAgICAgaWYgKG1hdGNoZWQgPT0gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKG1hdGNoZWQgPT0gMSkgPyBtYXRjaGVzWzFdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gMikgPyBtYXRjaGVzWzJdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gMykgPyBtYXRjaGVzWzNdICs9IDEgOiAKICAgICAgICAgICAgKG1hdGNoZWQgPT0gNCkgPyBtYXRjaGVzWzRdICs9IDEgOgogICAgICAgICAgICAobWF0Y2hlZCA9PSA1KSA/IG1hdGNoZXNbNV0gKz0gMSA6CiAgICAgICAgICAgIChtYXRjaGVkID09IDYpID8gbWF0Y2hlc1s2XSArPSAxIDogZ2FtZVN0YXRzW19nYW1lXVs2XTsKICAgICAgICB9CgogICAgICAgIGZvciAodWludDggaSA9IDE7IGkgPD0gNjsgaSsrKSB7CiAgICAgICAgICAgIGdhbWVTdGF0c1tfZ2FtZV1baV0gKz0gbWF0Y2hlc1tpXTsKICAgICAgICB9CgogICAgICAgIEdhbWVQcm9ncmVzcyhfZ2FtZSwgZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdLCBnYW1lQmV0c1tfZ2FtZV0ubGVuZ3RoKTsKICAgICAgICBpZiAoZ2FtZUNhbGN1bGF0aW9uUHJvZ3Jlc3NbX2dhbWVdID09IGdhbWVCZXRzW19nYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgdXBkYXRlR2FtZVRvQ2FsY3VsYXRlZChfZ2FtZSk7CiAgICAgICAgICAgIGRpc3RyaWJ1dGVSYWlzZWRXZWlUb0phY2twb3QoX2dhbWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXN0cmlidXRlUmFpc2VkV2VpVG9KYWNrcG90KHVpbnQyNTYgX2dhbWUpIGludGVybmFsIHsKICAgICAgICBmb3IgKHVpbnQ4IGkgPSAxOyBpIDw9IDU7IGkgKyspIHsKICAgICAgICAgICAgaWYgKGdhbWVTdGF0c1tfZ2FtZV1baV0gPT0gMCkgewogICAgICAgICAgICAgICAgamFja3BvdCArPSB3ZWlSYWlzZWRbX2dhbWVdLm11bChwZXJjZW50c1tpXSkuZGl2KDEwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlVGlja2V0UHJpY2UodWludDI1NiBfbmV3UHJpY2UpIG9ubHlBZG1pbiB7CiAgICAgICAgbmV3UHJpY2UgPSBfbmV3UHJpY2UgKiAxMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpc3RyaWJ1dGVGdW5kcyh1aW50MjU2IHdlaVdpbiwgdWludDI1NiBfZ2FtZSwgdWludDggbWF0Y2hlZCwgYWRkcmVzcyBfcGxheWVyKSAKICAgICAgICAgICAgaW50ZXJuYWwgewogICAgICAgIHVpbnQyNTYgdG9Pd25lciA9IHdlaVdpbi5kaXYoNSk7CiAgICAgICAgdWludDI1NiB0b1BhcnRuZXIgPSAwOwoKICAgICAgICBpZiAocGFydG5lcltfcGxheWVyXSAhPSAweDApIHsKICAgICAgICAgICAgdG9QYXJ0bmVyID0gdG9Pd25lci5tdWwoNSkuZGl2KDEwMCk7CiAgICAgICAgICAgIHBhcnRuZXJbX3BsYXllcl0udHJhbnNmZXIodG9QYXJ0bmVyKTsKICAgICAgICAgICAgUmFpc2VkQnlQYXJ0bmVyKF9wbGF5ZXIsIF9nYW1lLCB0b1BhcnRuZXIsIG5vdyk7CiAgICAgICAgfQoKICAgICAgICBfcGxheWVyLnRyYW5zZmVyKHdlaVdpbiAtIHRvT3duZXIpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKHRvT3duZXIgLSB0b1BhcnRuZXIpOwoKICAgICAgICBXaW4oX3BsYXllciwgX2dhbWUsIG1hdGNoZWQsIHdlaVdpbiwgbm93KTsKICAgICAgICBpZiAobWF0Y2hlZCA9PSA2KSB7CiAgICAgICAgICAgIEphY2twb3QoX3BsYXllciwgX2dhbWUsIHdlaVdpbiwgbm93KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJpemUoYWRkcmVzcyBfcGxheWVyLCB1aW50MjU2IF9nYW1lLCBieXRlczMgX2JldCwgdWludDE2IF9pbmRleCkgCiAgICAgICAgICAgIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBUaWNrZXRCZXQgbWVtb3J5IHRpY2tldCA9IHRpY2tldHNbX3BsYXllcl1bX2dhbWVdW19pbmRleF07CgogICAgICAgIGlmICh0aWNrZXQuaXNQYXllZCB8fCB0aWNrZXQuYmV0ICE9IF9iZXQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB1aW50MjU2IHN0YXJ0QmxvY2sgPSBnZXRHYW1lU3RhcnRCbG9jayhfZ2FtZSk7CiAgICAgICAgdWludDggbWF0Y2hlZCA9IGdldE1hdGNoZXMoc3RhcnRCbG9jaywgdGlja2V0LmJldCk7CiAgICAgICAgaWYgKG1hdGNoZWQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB1aW50MjU2IHdlaVdpbiA9IDA7CiAgICAgICAgaWYgKG1hdGNoZWQgIT0gNikgewogICAgICAgICAgICB1aW50MjU2IHdlaUJ5TWF0Y2ggPSB3ZWlSYWlzZWRbZ2FtZVBsYXllZF0ubXVsKHBlcmNlbnRzW21hdGNoZWRdKS5kaXYoMTAwKTsKICAgICAgICAgICAgd2VpV2luID0gd2VpQnlNYXRjaC5kaXYoZ2FtZVN0YXRzW19nYW1lXVttYXRjaGVkXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgd2VpV2luID0gamFja3BvdC5kaXYoZ2FtZVN0YXRzW19nYW1lXVttYXRjaGVkXSk7CiAgICAgICAgICAgIGphY2twb3QgLT0gd2VpV2luOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBkaXN0cmlidXRlRnVuZHMod2VpV2luLCBfZ2FtZSwgbWF0Y2hlZCwgX3BsYXllcik7CgogICAgICAgIHRpY2tldC5pc1BheWVkID0gdHJ1ZTsKICAgICAgICB0aWNrZXRzW19wbGF5ZXJdW19nYW1lXVtfaW5kZXhdID0gdGlja2V0OwoKICAgICAgICB3aW5uZXJzW2dhbWVQbGF5ZWRdLnB1c2goV2lubmVyKHsKICAgICAgICAgICAgcGxheWVyOiBfcGxheWVyLAogICAgICAgICAgICBiZXQ6IHRpY2tldC5iZXQsCiAgICAgICAgICAgIG1hdGNoZXM6IG1hdGNoZWQKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFBhcnRuZXIoYWRkcmVzcyBfcGFydG5lciwgYWRkcmVzcyBfcGxheWVyKSAKICAgICAgICAgICAgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChwYXJ0bmVyW19wbGF5ZXJdICE9IDB4MCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBwYXJ0bmVyW19wbGF5ZXJdID0gX3BhcnRuZXI7CiAgICAgICAgcGFydG5lcnNbX3BhcnRuZXJdLnB1c2goX3BsYXllcik7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0Q2hhbXBpb25HYW1lKCkgb25seUFkbWluIHsKICAgICAgICBjaGFtcGlvbi5zdGFydEdhbWUoKTsKCiAgICAgICAgdWludDI1NiBjdXJyZW50R2FtZSA9IGNoYW1waW9uLmN1cnJlbnRHYW1lQmxvY2tOdW1iZXIoKTsKICAgICAgICBDaGFtcGlvbkdhbWVTdGFydGVkKGN1cnJlbnRHYW1lLCBub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmlzaENoYW1waW9uR2FtZSgpIG9ubHlBZG1pbiB7CiAgICAgICAgdWludDI1NiBjdXJyZW50R2FtZSA9IGNoYW1waW9uLmN1cnJlbnRHYW1lQmxvY2tOdW1iZXIoKTsKICAgICAgICAKICAgICAgICBhZGRyZXNzIHdpbm5lciA9IGNoYW1waW9uLmZpbmlzaEN1cnJlbnRHYW1lKCk7CiAgICAgICAgcmVxdWlyZSh3aW5uZXIgIT0gMHgwKTsKCiAgICAgICAgY2hhbXBpb24uc2V0R2FtZVByaXplKGN1cnJlbnRHYW1lLCBqYWNrcG90KTsKCiAgICAgICAgd2lubmVyLnRyYW5zZmVyKGphY2twb3QgLSBqYWNrcG90LmRpdig1KSk7CiAgICAgICAgb3duZXIudHJhbnNmZXIoamFja3BvdC5kaXYoNSkpOwoKICAgICAgICBDaGFtcGlvbkdhbWVGaW5pc2hlZChjdXJyZW50R2FtZSwgd2lubmVyLCBqYWNrcG90LCBub3cpOwoKICAgICAgICBqYWNrcG90ID0gMDsKICAgIH0KfQ=='.
	

]
