Class {
	#name : #SRTea1f346faf023f974eb5adaf088bbcdf02d761f4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTea1f346faf023f974eb5adaf088bbcdf02d761f4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgovKioKICogQHRpdGxlIFN0YWxsZWQgRVJDMjAgdG9rZW4KICovCmNvbnRyYWN0IFRJWFN0YWxsZWRUb2tlbiB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQ7IC8vIHN3aXRjaGVkIHRvIHRydWUgaW4gb3BlcmF0aW9uYWwgc3RhdGUKICBhZGRyZXNzIHB1YmxpYyBldGhGdW5kRGVwb3NpdDsgLy8gZGVwb3NpdCBhZGRyZXNzIGZvciBFVEggZm9yIEJsb2NrdGl4CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7Cn0KCgovKioKICogQHRpdGxlIEJsb2NrdGl4IFRva2VuIEdlbmVyYXRpb24gRXZlbnQgY29udHJhY3QKICoKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEJBVDogaHR0cHM6Ly9naXRodWIuY29tL2JyYXZlLWludGwvYmFzaWMtYXR0ZW50aW9uLXRva2VuLWNyb3dkc2FsZS9ibG9iL21hc3Rlci9jb250cmFjdHMvQkFUb2tlbi5zb2wKICovCmNvbnRyYWN0IFRJWFRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGNvbnZlcnRlZDsgLy8gQ29udmVydGluZyBmcm9tIG9sZCB0b2tlbiBjb250cmFjdAoKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJCbG9ja3RpeCBUb2tlbiI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJUSVgiOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICIxLjAuMSI7CgogICAgLy8gY3Jvd2RzYWxlIHBhcmFtZXRlcnMKICAgIGJvb2wgcHVibGljIGlzRmluYWxpemVkOyAgICAgICAgICAgICAgICAgICAgICAvLyBzd2l0Y2hlZCB0byB0cnVlIGluIG9wZXJhdGlvbmFsIHN0YXRlCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWUgPSAxNTAxMjcxOTk5OyAgICAgICAgLy8gY3Jvd2RzYWxlIHN0YXJ0IHRpbWUgKGluIHNlY29uZHMpIC0gdGhpcyB3aWxsIGJlIHNldCBvbmNlIHRoZSBjb252ZXJzaW9uIGlzIGRvbmUKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGVuZFRpbWUgPSAxNTAxMjcxOTk5OyAvLyBjcm93ZHNhbGUgZW5kIHRpbWUgKGluIHNlY29uZHMpCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCB0b2tlbkdlbmVyYXRpb25DYXAgPSAgNjIuNSAqICgxMCoqNikgKiAxMCoqZGVjaW1hbHM7IC8vIDYyLjVtIFRJWAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgdG9rZW5FeGNoYW5nZVJhdGUgPSAxMDQxOwoKICAgIC8vIGFkZHJlc3NlcwogICAgYWRkcmVzcyBwdWJsaWMgdGl4R2VuZXJhdGlvbkNvbnRyYWN0OyAvLyBjb250cmFjdCBhZGRyZXNzIGZvciBUSVggdjEgRnVuZGluZwogICAgYWRkcmVzcyBwdWJsaWMgZXRoRnVuZERlcG9zaXQ7ICAgICAgICAvLyBkZXBvc2l0IGFkZHJlc3MgZm9yIEVUSCBmb3IgQmxvY2t0aXgKCiAgICAvKioKICAgICogQGRldiBtb2RpZmllciB0byBhbGxvdyBhY3Rpb25zIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgSVMgZmluYWxpemVkCiAgICAqLwogICAgbW9kaWZpZXIgd2hlbkZpbmFsaXplZCgpIHsKICAgICAgICBpZiAoIWlzRmluYWxpemVkKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgZmluYWxpemVkCiAgICAqLwogICAgbW9kaWZpZXIgd2hlbk5vdEZpbmFsaXplZCgpIHsKICAgICAgICBpZiAoaXNGaW5hbGl6ZWQpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLy8gZW5zdXJlcyB0aGF0IHRoZSBjdXJyZW50IHRpbWUgaXMgYmV0d2VlbiBfc3RhcnRUaW1lIChpbmNsdXNpdmUpIGFuZCBfZW5kVGltZSAoZXhjbHVzaXZlKQogICAgbW9kaWZpZXIgYmV0d2Vlbih1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUpIHsKICAgICAgICBhc3NlcnQobm93ID49IF9zdGFydFRpbWUgJiYgbm93IDwgX2VuZFRpbWUpOwogICAgICAgIF87CiAgICB9CgogICAgLy8gdmVyaWZpZXMgdGhhdCBhbiBhbW91bnQgaXMgZ3JlYXRlciB0aGFuIHplcm8KICAgIG1vZGlmaWVyIHZhbGlkQW1vdW50KCkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyB2YWxpZGF0ZXMgYW4gYWRkcmVzcyAtIGN1cnJlbnRseSBvbmx5IGNoZWNrcyB0aGF0IGl0IGlzbid0IG51bGwKICAgIG1vZGlmaWVyIHZhbGlkQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICAgICAgcmVxdWlyZShfYWRkcmVzcyAhPSAweDApOwogICAgICAgIF87CiAgICB9CgogICAgLy8gZXZlbnRzCiAgICBldmVudCBDcmVhdGVUSVgoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwoKICAgIC8qKgogICAgKiBAZGV2IENvbnRydWN0b3IgdGhhdCBhc3NpZ25zIGFsbCBwcmVzYWxlIHRva2VucyBhbmQgc3RhcnRzIHRoZSBzYWxlCiAgICAqLwogICAgZnVuY3Rpb24gVElYVG9rZW4oYWRkcmVzcyBfdGl4R2VuZXJhdGlvbkNvbnRyYWN0KQogICAgewogICAgICAgIGlzRmluYWxpemVkID0gZmFsc2U7IC8vIEluaXRpYWxpemUgcHJlc2FsZQogICAgICAgIHRpeEdlbmVyYXRpb25Db250cmFjdCA9IF90aXhHZW5lcmF0aW9uQ29udHJhY3Q7CiAgICAgICAgZXRoRnVuZERlcG9zaXQgPSBUSVhTdGFsbGVkVG9rZW4odGl4R2VuZXJhdGlvbkNvbnRyYWN0KS5ldGhGdW5kRGVwb3NpdCgpOwogICAgfQoKCiAgICAvKioKICAgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAqCiAgICAqIGNhbiBvbmx5IGJlIGNhbGxlZCBkdXJpbmcgb25jZSB0aGUgdGhlIGZ1bmRpbmcgcGVyaW9kIGhhcyBiZWVuIGZpbmFsaXplZAogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgd2hlbkZpbmFsaXplZCB7CiAgICAgICAgc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAgKgogICAgKiBjYW4gb25seSBiZSBjYWxsZWQgZHVyaW5nIG9uY2UgdGhlIHRoZSBmdW5kaW5nIHBlcmlvZCBoYXMgYmVlbiBmaW5hbGl6ZWQKICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSB3aGVuRmluYWxpemVkIHsKICAgICAgICBzdXBlci50cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQWNjZXB0cyBFVEggYW5kIGdlbmVyYXRlcyBUSVggdG9rZW5zCiAgICAgKgogICAgICogY2FuIG9ubHkgYmUgY2FsbGVkIGR1cmluZyB0aGUgY3Jvd2RzYWxlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW5zKCkKICAgICAgICBwdWJsaWMKICAgICAgICBwYXlhYmxlCiAgICAgICAgd2hlbk5vdEZpbmFsaXplZAogICAgICAgIGJldHdlZW4oc3RhcnRUaW1lLCBlbmRUaW1lKQogICAgICAgIHZhbGlkQW1vdW50CiAgICB7CiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID09IHRva2VuR2VuZXJhdGlvbkNhcCkKICAgICAgICAgICAgdGhyb3c7CgogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gU2FmZU1hdGgubXVsKG1zZy52YWx1ZSwgdG9rZW5FeGNoYW5nZVJhdGUpOyAvLyBjaGVjayB0aGF0IHdlJ3JlIG5vdCBvdmVyIHRvdGFscwogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IFNhZmVNYXRoLmFkZCh0b3RhbFN1cHBseSwgdG9rZW5zKTsKICAgICAgICB1aW50MjU2IGRpZmY7CgogICAgICAgIC8vIHJldHVybiBpZiBzb21ldGhpbmcgZ29lcyB3cm9uZwogICAgICAgIGlmICh0b2tlbkdlbmVyYXRpb25DYXAgPCBjaGVja2VkU3VwcGx5KQogICAgICAgIHsKICAgICAgICAgICAgZGlmZiA9IFNhZmVNYXRoLnN1YihjaGVja2VkU3VwcGx5LCB0b2tlbkdlbmVyYXRpb25DYXApOwogICAgICAgICAgICBpZiAoZGlmZiA+IDEwKioxMikKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICBjaGVja2VkU3VwcGx5ID0gU2FmZU1hdGguc3ViKGNoZWNrZWRTdXBwbHksIGRpZmYpOwogICAgICAgICAgICB0b2tlbnMgPSBTYWZlTWF0aC5zdWIodG9rZW5zLCBkaWZmKTsKICAgICAgICB9CgogICAgICAgIHRvdGFsU3VwcGx5ID0gY2hlY2tlZFN1cHBseTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0b2tlbnM7CiAgICAgICAgQ3JlYXRlVElYKG1zZy5zZW5kZXIsIHRva2Vucyk7IC8vIGxvZ3MgdG9rZW4gY3JlYXRpb24KICAgIH0KCiAgICBmdW5jdGlvbiBoYXNDb252ZXJ0ZWQoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgIHJldHVybiBjb252ZXJ0ZWRbd2hvXTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb252ZXJ0KGFkZHJlc3MgX293bmVyKQogICAgICAgIGV4dGVybmFsCiAgICB7CiAgICAgICAgVElYU3RhbGxlZFRva2VuIHRpeFN0YWxsZWQgPSBUSVhTdGFsbGVkVG9rZW4odGl4R2VuZXJhdGlvbkNvbnRyYWN0KTsKICAgICAgICBpZiAodGl4U3RhbGxlZC5pc0ZpbmFsaXplZCgpKSB0aHJvdzsgLy8gV2UgY2FuJ3QgY29udmVydCB0b2tlbnMgYWZ0ZXIgdGhlIGNvbnRyYWN0IGlzIGZpbmFsaXplZAogICAgICAgIGlmIChjb252ZXJ0ZWRbX293bmVyXSkgdGhyb3c7IC8vIFRocm93IGlmIHRoZXkgaGF2ZSBhbHJlYWR5IGNvbnZlcnRlZAogICAgICAgIHVpbnQyNTYgYmFsYW5jZU9mID0gdGl4U3RhbGxlZC5iYWxhbmNlT2YoX293bmVyKTsKICAgICAgICBpZiAoYmFsYW5jZU9mIDw9IDApIHRocm93OyAvLyBUaHJvdyBpZiB0aGV5IGRvbid0IGhhdmUgYW4gZXhpc3RpbmcgYmFsYW5jZQogICAgICAgIGNvbnZlcnRlZFtfb3duZXJdID0gdHJ1ZTsKICAgICAgICB0b3RhbFN1cHBseSArPSBiYWxhbmNlT2Y7CiAgICAgICAgYmFsYW5jZXNbX293bmVyXSArPSBiYWxhbmNlT2Y7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX293bmVyLCBiYWxhbmNlT2YpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbnRpbnVlR2VuZXJhdGlvbigpCiAgICAgICAgZXh0ZXJuYWwKICAgIHsKICAgICAgICBUSVhTdGFsbGVkVG9rZW4gdGl4U3RhbGxlZCA9IFRJWFN0YWxsZWRUb2tlbih0aXhHZW5lcmF0aW9uQ29udHJhY3QpOwogICAgICAgIC8vIEFsbG93IHRoZSBzYWxlIHRvIGNvbnRpbnVlCiAgICAgICAgaWYgKHRvdGFsU3VwcGx5ID09IHRpeFN0YWxsZWQudG90YWxTdXBwbHkoKSAmJiB0aXhTdGFsbGVkLmlzRmluYWxpemVkKCkpCiAgICAgICAgICBzdGFydFRpbWUgPSBub3c7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhyb3c7CiAgICB9CgogICAgLyoqCiAgICAqIEBkZXYgRW5kcyB0aGUgZnVuZGluZyBwZXJpb2QgYW5kIHNlbmRzIHRoZSBFVEggaG9tZQogICAgKi8KICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHdoZW5Ob3RGaW5hbGl6ZWQKICAgIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBldGhGdW5kRGVwb3NpdCkgdGhyb3c7IC8vIGxvY2tzIGZpbmFsaXplIHRvIHRoZSB1bHRpbWF0ZSBFVEggb3duZXIKICAgICAgICBpZiAobm93IDw9IGVuZFRpbWUgJiYgdG90YWxTdXBwbHkgIT0gdG9rZW5HZW5lcmF0aW9uQ2FwKSB0aHJvdzsKICAgICAgICAvLyBtb3ZlIHRvIG9wZXJhdGlvbmFsCiAgICAgICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogICAgICAgIGlmKCFldGhGdW5kRGVwb3NpdC5zZW5kKHRoaXMuYmFsYW5jZSkpIHRocm93OyAgLy8gc2VuZCB0aGUgZXRoIHRvIEJsb2NrdGl4CiAgICB9CgogICAgLy8gZmFsbGJhY2sKICAgIGZ1bmN0aW9uKCkKICAgICAgICBwYXlhYmxlCiAgICAgICAgd2hlbk5vdEZpbmFsaXplZAogICAgewogICAgICAgIGdlbmVyYXRlVG9rZW5zKCk7CiAgICB9Cn0='.
	

]
