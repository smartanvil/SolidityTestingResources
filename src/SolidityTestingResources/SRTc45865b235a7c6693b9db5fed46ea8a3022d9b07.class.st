Class {
	#name : #SRTc45865b235a7c6693b9db5fed46ea8a3022d9b07,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTc45865b235a7c6693b9db5fed46ea8a3022d9b07 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogSU93bmVyc2hpcAogKgogKiBQZXJtaW5lbnQgb3duZXJzaGlwCiAqCiAqICNjcmVhdGVkIDAxLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJT3duZXJzaGlwIHsKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIGN1cnJlbnQgb3duZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIGFkZHJlc3MgVGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKfQoKCi8qKgogKiBPd25lcnNoaXAKICoKICogUGVybWluZW50IG93bmVyc2hpcAogKgogKiAjY3JlYXRlZCAwMS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBPd25lcnNoaXAgaXMgSU93bmVyc2hpcCB7CgogICAgLy8gT3duZXIKICAgIGFkZHJlc3MgaW50ZXJuYWwgb3duZXI7CgoKICAgIC8qKgogICAgICogQWNjZXNzIGlzIHJlc3RyaWN0ZWQgdG8gdGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgbW9kaWZpZXIgb25seV9vd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogVGhlIHB1Ymxpc2hlciBpcyB0aGUgaW5pdGFsIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2FjY291bnQgPT0gb3duZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogR2V0cyB0aGUgY3VycmVudCBvd25lcgogICAgICoKICAgICAqIEByZXR1cm4gYWRkcmVzcyBUaGUgY3VycmVudCBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXI7CiAgICB9Cn0KCgovKioKICogRVJDMjAgY29tcGF0aWJsZSB0b2tlbiBpbnRlcmZhY2UKICoKICogLSBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAogKiAtIEltcGxlbWVudHMgc2hvcnQgYWRkcmVzcyBhdHRhY2sgZml4CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJVG9rZW4geyAKCiAgICAvKiogCiAgICAgKiBHZXQgdGhlIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMKICAgICAqIAogICAgICogQHJldHVybiBUaGUgdG90YWwgc3VwcGx5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCk7CgoKICAgIC8qKiAKICAgICAqIEdldCBiYWxhbmNlIG9mIGBfb3duZXJgIAogICAgICogCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAqIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKCgogICAgLyoqIAogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICogCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKiAKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICogCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAgKiAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgYW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgdGhhdCBgX3NwZW5kZXJgIGlzIGFsbG93ZWQgdG8gc3BlbmQgZnJvbSBgX293bmVyYAogICAgICogCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwp9CgoKLyoqCiAqIElUb2tlbk9ic2VydmVyCiAqCiAqIEFsbG93cyBhIHRva2VuIHNtYXJ0LWNvbnRyYWN0IHRvIG5vdGlmeSBvYnNlcnZlcnMgCiAqIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogKgogKiAjY3JlYXRlZCAwOS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwppbnRlcmZhY2UgSVRva2VuT2JzZXJ2ZXIgewoKCiAgICAvKioKICAgICAqIENhbGxlZCBieSB0aGUgb2JzZXJ2ZWQgdG9rZW4gc21hcnQtY29udHJhY3QgaW4gb3JkZXIgCiAgICAgKiB0byBub3RpZnkgdGhlIHRva2VuIG9ic2VydmVyIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyB0aGF0IHRoZSB0b2tlbnMgd2hlcmUgc2VuZCBmcm9tCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2FzIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5vdGlmeVRva2Vuc1JlY2VpdmVkKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBwdWJsaWM7Cn0KCgovKioKICogVG9rZW5PYnNlcnZlcgogKgogKiBBbGxvd3Mgb2JzZXJ2ZXJzIHRvIGJlIG5vdGlmaWVkIGJ5IGFuIG9ic2VydmVkIHRva2VuIHNtYXJ0LWNvbnRyYWN0CiAqIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogKgogKiAjY3JlYXRlZCAwOS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBUb2tlbk9ic2VydmVyIGlzIElUb2tlbk9ic2VydmVyIHsKCgogICAgLyoqCiAgICAgKiBDYWxsZWQgYnkgdGhlIG9ic2VydmVkIHRva2VuIHNtYXJ0LWNvbnRyYWN0IGluIG9yZGVyIAogICAgICogdG8gbm90aWZ5IHRoZSB0b2tlbiBvYnNlcnZlciB3aGVuIHRva2VucyBhcmUgcmVjZWl2ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCB0aGUgdG9rZW5zIHdoZXJlIHNlbmQgZnJvbQogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0aGF0IHdhcyByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBub3RpZnlUb2tlbnNSZWNlaXZlZChhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcHVibGljIHsKICAgICAgICBvblRva2Vuc1JlY2VpdmVkKG1zZy5zZW5kZXIsIF9mcm9tLCBfdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIEV2ZW50IGhhbmRsZXIKICAgICAqIAogICAgICogQ2FsbGVkIGJ5IGBfdG9rZW5gIHdoZW4gYSB0b2tlbiBhbW91bnQgaXMgcmVjZWl2ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuIFRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhY2NvdW50IG9yIGNvbnRyYWN0IHRoYXQgc2VuZCB0aGUgdHJhbnNhY3Rpb24KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIHZhbHVlIG9mIHRva2VucyB0aGF0IHdoZXJlIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9uVG9rZW5zUmVjZWl2ZWQoYWRkcmVzcyBfdG9rZW4sIGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBpbnRlcm5hbDsKfQoKCi8qKgogKiBJVG9rZW5SZXRyaWV2ZXIKICoKICogQWxsb3dzIHRva2VucyB0byBiZSByZXRyaWV2ZWQgZnJvbSBhIGNvbnRyYWN0CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJVG9rZW5SZXRyaWV2ZXIgewoKICAgIC8qKgogICAgICogRXh0cmFjdHMgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljOwp9CgoKLyoqCiAqIFRva2VuUmV0cmlldmVyCiAqCiAqIEFsbG93cyB0b2tlbnMgdG8gYmUgcmV0cmlldmVkIGZyb20gYSBjb250cmFjdAogKgogKiAjY3JlYXRlZCAxOC8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBUb2tlblJldHJpZXZlciBpcyBJVG9rZW5SZXRyaWV2ZXIgewoKICAgIC8qKgogICAgICogRXh0cmFjdHMgdG9rZW5zIGZyb20gdGhlIGNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbkNvbnRyYWN0IFRoZSBhZGRyZXNzIG9mIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4KICAgICAqLwogICAgZnVuY3Rpb24gcmV0cmlldmVUb2tlbnMoYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIHsKICAgICAgICBJVG9rZW4gdG9rZW5JbnN0YW5jZSA9IElUb2tlbihfdG9rZW5Db250cmFjdCk7CiAgICAgICAgdWludCB0b2tlbkJhbGFuY2UgPSB0b2tlbkluc3RhbmNlLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICBpZiAodG9rZW5CYWxhbmNlID4gMCkgewogICAgICAgICAgICB0b2tlbkluc3RhbmNlLnRyYW5zZmVyKG1zZy5zZW5kZXIsIHRva2VuQmFsYW5jZSk7CiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIElEY29ycENyb3dkc2FsZUFkYXB0ZXIKICoKICogSW50ZXJmYWNlIHRoYXQgYWxsb3dzIGNvbGxlY3RpdmUgY29udHJpYnV0aW9ucyBmcm9tIERDT1JQIG1lbWJlcnMKICogCiAqIERDT1JQIERBTyBWQyAmIFByb21vdGlvbiBodHRwczovL3d3dy5kY29ycC5pdAogKgogKiAjY3JlYXRlZCAxMC8xMS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwppbnRlcmZhY2UgSURjb3JwQ3Jvd2RzYWxlQWRhcHRlciB7CgogICAgLyoqCiAgICAgKiBSZWNlaXZlIEV0aCBhbmQgaXNzdWUgdG9rZW5zIHRvIHRoZSBzZW5kZXIKICAgICAqLwogICAgZnVuY3Rpb24gaXNFbmRlZCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIFJlY2VpdmUgZXRoZXIgYW5kIGlzc3VlIHRva2VucyB0byB0aGUgc2VuZGVyCiAgICAgKgogICAgICogQHJldHVybiBUaGUgYWNjZXB0ZWQgZXRoZXIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGUoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zICh1aW50KTsKCgogICAgLyoqCiAgICAgKiBSZWNlaXZlIGV0aGVyIGFuZCBpc3N1ZSB0b2tlbnMgdG8gYF9iZW5lZmljaWFyeWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhY2NvdW50IHRoYXQgcmVjZWl2ZXMgdGhlIHRva2VucwogICAgICogQHJldHVybiBUaGUgYWNjZXB0ZWQgZXRoZXIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGVGb3IoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQpOwoKCiAgICAvKioKICAgICAqIFdpdGhkcmF3IGFsbG9jYXRlZCB0b2tlbnMKICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbnMoKSBwdWJsaWM7CgoKICAgIC8qKgogICAgICogV2l0aGRyYXcgYWxsb2NhdGVkIGV0aGVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIHdpdGhkcmF3RXRoZXIoKSBwdWJsaWM7CgoKICAgIC8qKgogICAgICogUmVmdW5kIGluIHRoZSBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCBjcm93ZHNhbGUuIFRoZSAKICAgICAqIGNyb3dkc2FsZSBpcyBjb25zaWRlcmVkIHVuc3VjY2Vzc2Z1bCBpZiBtaW5BbW91bnQgd2FzIAogICAgICogbm90IHJhaXNlZCBiZWZvcmUgZW5kIG9mIHRoZSBjcm93ZHNhbGUKICAgICAqLwogICAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljOwp9CgoKLyoqCiAqIElEY29ycFBlcnNvbmFsQ3Jvd2RzYWxlUHJveHkKICoKICogI2NyZWF0ZWQgMjIvMTEvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KaW50ZXJmYWNlIElEY29ycFBlcnNvbmFsQ3Jvd2RzYWxlUHJveHkgewoKICAgIC8qKgogICAgICogUmVjZWl2ZSBldGhlciBhbmQgaXNzdWUgdG9rZW5zCiAgICAgKiAKICAgICAqIFRoaXMgZnVuY3Rpb24gcmVxdWlyZXMgdGhhdCBtc2cuc2VuZGVyIGlzIG5vdCBhIGNvbnRyYWN0LiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgaXQncyAKICAgICAqIG5vdCBwb3NzaWJsZSBmb3IgYSBjb250cmFjdCB0byBzcGVjaWZ5IGEgZ2FzIGFtb3VudCB3aGVuIGNhbGxpbmcgdGhlIChpbnRlcm5hbCkgc2VuZCgpIAogICAgICogZnVuY3Rpb24uIFNvbGlkaXR5IGltcG9zZXMgYSBtYXhpbXVtIGFtb3VudCBvZiBnYXMgKDIzMDAgZ2FzIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcpCiAgICAgKiAKICAgICAqIENvbnRyYWN0cyBjYW4gY2FsbCB0aGUgY29udHJpYnV0ZSgpIGZ1bmN0aW9uIGluc3RlYWQKICAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGU7Cn0KCgovKioKICogRGNvcnBQZXJzb25hbENyb3dkc2FsZVByb3h5CiAqCiAqIFByb3h5IHRoYXQgYWxsb3dzIGNvbGxlY3RpdmUgY29udHJpYnV0aW9ucyBmcm9tIERDT1JQIG1lbWJlcnMgdXNpbmcgCiAqIGEgdW5pcXVlIGFkZHJlc3MKICogCiAqIERDT1JQIERBTyBWQyAmIFByb21vdGlvbiBodHRwczovL3d3dy5kY29ycC5pdAogKgogKiAjY3JlYXRlZCAyMi8xMS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBEY29ycFBlcnNvbmFsQ3Jvd2RzYWxlUHJveHkgaXMgSURjb3JwUGVyc29uYWxDcm93ZHNhbGVQcm94eSB7CgogICAgYWRkcmVzcyBwdWJsaWMgbWVtYmVyOwogICAgSURjb3JwQ3Jvd2RzYWxlQWRhcHRlciBwdWJsaWMgdGFyZ2V0OwogICAgCgogICAgLyoqCiAgICAgKiBEZXBsb3kgcHJveHkKICAgICAqCiAgICAgKiBAcGFyYW0gX21lbWJlciBPd25lciBvZiB0aGUgcHJveHkKICAgICAqIEBwYXJhbSBfdGFyZ2V0IFRhcmdldCBjcm93ZHNhbGUKICAgICAqLwogICAgZnVuY3Rpb24gRGNvcnBQZXJzb25hbENyb3dkc2FsZVByb3h5KGFkZHJlc3MgX21lbWJlciwgYWRkcmVzcyBfdGFyZ2V0KSBwdWJsaWMgewogICAgICAgIHRhcmdldCA9IElEY29ycENyb3dkc2FsZUFkYXB0ZXIoX3RhcmdldCk7CiAgICAgICAgbWVtYmVyID0gX21lbWJlcjsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZWNlaXZlIGNvbnRyaWJ1dGlvbiBhbmQgZm9yd2FyZCB0byB0aGUgdGFyZ2V0IGNyb3dkc2FsZQogICAgICogCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJlcXVpcmVzIHRoYXQgbXNnLnNlbmRlciBpcyBub3QgYSBjb250cmFjdC4gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIGl0J3MgCiAgICAgKiBub3QgcG9zc2libGUgZm9yIGEgY29udHJhY3QgdG8gc3BlY2lmeSBhIGdhcyBhbW91bnQgd2hlbiBjYWxsaW5nIHRoZSAoaW50ZXJuYWwpIHNlbmQoKSAKICAgICAqIGZ1bmN0aW9uLiBTb2xpZGl0eSBpbXBvc2VzIGEgbWF4aW11bSBhbW91bnQgb2YgZ2FzICgyMzAwIGdhcyBhdCB0aGUgdGltZSBvZiB3cml0aW5nKQogICAgICovCiAgICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgdGFyZ2V0LmNvbnRyaWJ1dGVGb3IudmFsdWUobXNnLnZhbHVlKShtZW1iZXIpOwogICAgfQp9CgoKLyoqCiAqIElEY29ycENyb3dkc2FsZVByb3h5CiAqCiAqICNjcmVhdGVkIDIzLzExLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJRGNvcnBDcm93ZHNhbGVQcm94eSB7CgogICAgLyoqCiAgICAgKiBSZWNlaXZlIGV0aGVyIGFuZCBpc3N1ZSB0b2tlbnMgdG8gdGhlIHNlbmRlcgogICAgICogCiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJlcXVpcmVzIHRoYXQgbXNnLnNlbmRlciBpcyBub3QgYSBjb250cmFjdC4gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIGl0J3MgCiAgICAgKiBub3QgcG9zc2libGUgZm9yIGEgY29udHJhY3QgdG8gc3BlY2lmeSBhIGdhcyBhbW91bnQgd2hlbiBjYWxsaW5nIHRoZSAoaW50ZXJuYWwpIHNlbmQoKSAKICAgICAqIGZ1bmN0aW9uLiBTb2xpZGl0eSBpbXBvc2VzIGEgbWF4aW11bSBhbW91bnQgb2YgZ2FzICgyMzAwIGdhcyBhdCB0aGUgdGltZSBvZiB3cml0aW5nKQogICAgICogCiAgICAgKiBDb250cmFjdHMgY2FuIGNhbGwgdGhlIGNvbnRyaWJ1dGUoKSBmdW5jdGlvbiBpbnN0ZWFkCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlOwoKCiAgICAvKioKICAgICAqIFJlY2VpdmUgZXRoZXIgYW5kIGlzc3VlIHRva2VucyB0byB0aGUgc2VuZGVyCiAgICAgKgogICAgICogQHJldHVybiBUaGUgYWNjZXB0ZWQgZXRoZXIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGUoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zICh1aW50KTsKCgogICAgLyoqCiAgICAgKiBSZWNlaXZlIGV0aGVyIGFuZCBpc3N1ZSB0b2tlbnMgdG8gYF9iZW5lZmljaWFyeWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhY2NvdW50IHRoYXQgcmVjZWl2ZXMgdGhlIHRva2VucwogICAgICogQHJldHVybiBUaGUgYWNjZXB0ZWQgZXRoZXIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGVGb3IoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQpOwp9CgoKLyoqCiAqIERjb3JwQ3Jvd2RzYWxlUHJveHkKICoKICogUHJveHkgdGhhdCBhbGxvd3MgY29sbGVjdGl2ZSBjb250cmlidXRpb25zIGZyb20gRENPUlAgbWVtYmVycwogKiAKICogRENPUlAgREFPIFZDICYgUHJvbW90aW9uIGh0dHBzOi8vd3d3LmRjb3JwLml0CiAqCiAqICNjcmVhdGVkIDIyLzExLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IERjb3JwQ3Jvd2RzYWxlUHJveHkgaXMgSURjb3JwQ3Jvd2RzYWxlUHJveHksIE93bmVyc2hpcCwgVG9rZW5PYnNlcnZlciwgVG9rZW5SZXRyaWV2ZXIgewoKICAgIGVudW0gU3RhZ2VzIHsKICAgICAgICBEZXBsb3lpbmcsCiAgICAgICAgQXR0YWNoZWQsCiAgICAgICAgRGVwbG95ZWQKICAgIH0KCiAgICBzdHJ1Y3QgUmVjb3JkIHsKICAgICAgICB1aW50IHdlaWdodDsKICAgICAgICB1aW50IGNvbnRyaWJ1dGVkOwogICAgICAgIHVpbnQgd2l0aGRyYXduVG9rZW5zOwogICAgICAgIHVpbnQgaW5kZXg7CiAgICB9CgogICAgU3RhZ2VzIHB1YmxpYyBzdGFnZTsKICAgIGJvb2wgcHJpdmF0ZSB1cGRhdGluZzsKCiAgICAvLyBNZW1iZXIgcmVjb3JkcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBSZWNvcmQpIHByaXZhdGUgcmVjb3JkczsKICAgIGFkZHJlc3NbXSBwcml2YXRlIHJlY29yZEluZGV4OwoKICAgIHVpbnQgcHVibGljIHRvdGFsQ29udHJpYnV0ZWQ7CiAgICB1aW50IHB1YmxpYyB0b3RhbFRva2Vuc1JlY2VpdmVkOwogICAgdWludCBwdWJsaWMgdG90YWxUb2tlbnNXaXRoZHJhd247CiAgICB1aW50IHB1YmxpYyB0b3RhbFdlaWdodDsKCiAgICAvLyBXZWlnaHQgY2FsY3VsYXRpb24KICAgIHVpbnQgcHVibGljIGZhY3RvcldlaWdodDsKICAgIHVpbnQgcHVibGljIGZhY3RvckNvbnRyaWJ1dGVkOwoKICAgIC8vIFRhcmdldCBjcm93ZHNhbGUKICAgIElEY29ycENyb3dkc2FsZUFkYXB0ZXIgcHVibGljIGNyb3dkc2FsZTsKICAgIElUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgLy8gRGNvcnAgdG9rZW5zCiAgICBJVG9rZW4gcHVibGljIGRycHNUb2tlbjsKICAgIElUb2tlbiBwdWJsaWMgZHJwdVRva2VuOwoKCiAgICAvKioKICAgICAqIFRocm93IGlmIGF0IHN0YWdlIG90aGVyIHRoYW4gY3VycmVudCBzdGFnZQogICAgICogCiAgICAgKiBAcGFyYW0gX3N0YWdlIGV4cGVjdGVkIHN0YWdlIHRvIHRlc3QgZm9yCiAgICAgKi8KICAgIG1vZGlmaWVyIGF0X3N0YWdlKFN0YWdlcyBfc3RhZ2UpIHsKICAgICAgICByZXF1aXJlKHN0YWdlID09IF9zdGFnZSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBUaHJvdyBpZiBjcm93ZHNhbGUgbm90IGVuZGVkIHlldAogICAgICovCiAgICBtb2RpZmllciBvbmx5X3doZW5fZW5kZWQoKSB7CiAgICAgICAgcmVxdWlyZShjcm93ZHNhbGUuaXNFbmRlZCgpKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvKioKICAgICAqIFByZXZlbnQgcmVlbnRyeQogICAgICovCiAgICBtb2RpZmllciBvbmx5X3doZW5fbm90X3VwZGF0aW5nKCkgewogICAgICAgIHJlcXVpcmUoIXVwZGF0aW5nKTsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyBFdmVudHMKICAgIGV2ZW50IERjb3JwUHJveHlDcmVhdGVkKGFkZHJlc3MgcHJveHksIGFkZHJlc3MgYmVuZWZpY2lhcnkpOwoKCiAgICAvKioKICAgICAqIERlcGxveSB0aGUgcHJveHkKICAgICAqLwogICAgZnVuY3Rpb24gRGNvcnBDcm93ZHNhbGVQcm94eSgpIHB1YmxpYyB7CiAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRGVwbG95aW5nOwogICAgfQoKCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBwcm94eQogICAgICoKICAgICAqIFNoYXJlIGNhbGN1YXRpb24gaXMgYmFzZWQgb24gdGhlIGRycHUgYW5kIGRycHMgdG9rZW4gYmFsYW5jZXMgYW5kIHRoZSAKICAgICAqIGNvbnRyaWJ1dGVkIGFtb3VudCBvZiBldGhlci4gVGhlIHdlaWdodCBmYWN0b3IgYW5kIGNvbnRyaWJ1dGVkIGZhY3RvciAKICAgICAqIGRldGVybWluIHRoZSB3ZWlnaHQgb2YgZWFjaCBmYWN0b3IKICAgICAqCiAgICAgKiBAcGFyYW0gX2RycHNUb2tlbiAxLzIgdG9rZW5zIHVzZWQgZm9yIHdlaWdodCBjYWxjdWxhdGlvbgogICAgICogQHBhcmFtIF9kcnB1VG9rZW4gMi8yIHRva2VucyB1c2VkIGZvciB3ZWlnaHQgY2FsY3VsYXRpb24KICAgICAqIEBwYXJhbSBfZmFjdG9yV2VpZ2h0IFdlaWdodCBvZiB0aGUgdG9rZW4gYmFsYW5jZSBmYWN0b3IKICAgICAqIEBwYXJhbSBfZmFjdG9yQ29udHJpYnV0ZWQgV2VpZ2h0IG9mIHRoZSBjb250cmlidXRlZCBhbW91bnQgZmFjdG9yCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldHVwKGFkZHJlc3MgX2RycHNUb2tlbiwgYWRkcmVzcyBfZHJwdVRva2VuLCB1aW50IF9mYWN0b3JXZWlnaHQsIHVpbnQgX2ZhY3RvckNvbnRyaWJ1dGVkKSBwdWJsaWMgb25seV9vd25lciBhdF9zdGFnZShTdGFnZXMuRGVwbG95aW5nKSB7CiAgICAgICAgZHJwc1Rva2VuID0gSVRva2VuKF9kcnBzVG9rZW4pOwogICAgICAgIGRycHVUb2tlbiA9IElUb2tlbihfZHJwdVRva2VuKTsKICAgICAgICBmYWN0b3JXZWlnaHQgPSBfZmFjdG9yV2VpZ2h0OwogICAgICAgIGZhY3RvckNvbnRyaWJ1dGVkID0gX2ZhY3RvckNvbnRyaWJ1dGVkOwogICAgfQoKICAgIAogICAgLyoqCiAgICAgKiBBdHRhY2ggYSBjcm93ZHNhbGUgYW5kIGNvcnJlc3BvbmRpbmcgdG9rZW4gdG8gdGhlIHByb3h5LiBDb250cmlidXRpb25zIGFyZSAKICAgICAqIGZvcndhcmRlZCB0byBgX2Nyb3dkc2FsZWAgYW5kIHJld2FyZHMgYXJlIGRlbm90ZWQgaW4gdG9rZW5zIGxvY2F0ZWQgYXQgYF90b2tlbmAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Nyb3dkc2FsZSBUaGUgY3Jvd2RzYWxlIHRvIGZvcndhcmQgY29udHJpYnV0aW9ucyB0bwogICAgICogQHBhcmFtIF90b2tlbiBUaGUgcmV3YXJkIHRva2VuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGF0dGFjaENyb3dkc2FsZShhZGRyZXNzIF9jcm93ZHNhbGUsIGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seV9vd25lciBhdF9zdGFnZShTdGFnZXMuRGVwbG95aW5nKSB7CiAgICAgICAgc3RhZ2UgPSBTdGFnZXMuQXR0YWNoZWQ7CiAgICAgICAgY3Jvd2RzYWxlID0gSURjb3JwQ3Jvd2RzYWxlQWRhcHRlcihfY3Jvd2RzYWxlKTsKICAgICAgICB0b2tlbiA9IElUb2tlbihfdG9rZW4pOwogICAgfQoKCiAgICAvKioKICAgICAqIEFmdGVyIGNhbGxpbmcgdGhlIGRlcGxveSBmdW5jdGlvbiB0aGUgcHJveHkncwogICAgICogcnVsZXMgYmVjb21lIGltbXV0YWJsZSAKICAgICAqLwogICAgZnVuY3Rpb24gZGVwbG95KCkgcHVibGljIG9ubHlfb3duZXIgYXRfc3RhZ2UoU3RhZ2VzLkF0dGFjaGVkKSB7CiAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRGVwbG95ZWQ7CiAgICB9CgoKICAgIC8qKgogICAgICogRGVwbG95IGEgY29udHJhY3QgdGhhdCBzZXJ2ZXMgYXMgYSBwcm94eSB0byAKICAgICAqIHRoZSBjcm93ZHNhbGUKICAgICAqCiAgICAgKiBDb250cmlidXRpb25zIHRocm91Z2ggdGhpcyBhZGRyZXNzIHdpbGwgYmUgbWFkZSAKICAgICAqIGZvciBtc2cuc2VuZGVyCiAgICAgKgogICAgICogQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgZGVwb3NpdCBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZVBlcnNvbmFsRGVwb3NpdEFkZHJlc3MoKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIGFkZHJlc3MgcHJveHkgPSBuZXcgRGNvcnBQZXJzb25hbENyb3dkc2FsZVByb3h5KG1zZy5zZW5kZXIsIHRoaXMpOwogICAgICAgIERjb3JwUHJveHlDcmVhdGVkKHByb3h5LCBtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gcHJveHk7CiAgICB9CgoKICAgIC8qKgogICAgICogRGVwbG95IGEgY29udHJhY3QgdGhhdCBzZXJ2ZXMgYXMgYSBwcm94eSB0byAKICAgICAqIHRoZSBjcm93ZHNhbGUKICAgICAqCiAgICAgKiBDb250cmlidXRpb25zIHRocm91Z2ggdGhpcyBhZGRyZXNzIHdpbGwgYmUgbWFkZSAKICAgICAqIGZvciBgX2JlbmVmaWNpYXJ5YAogICAgICoKICAgICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVGhlIG93bmVyIG9mIHRoZSBwcm94eQogICAgICogQHJldHVybiBUaGUgYWRkcmVzcyBvZiB0aGUgZGVwb3NpdCBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNyZWF0ZVBlcnNvbmFsRGVwb3NpdEFkZHJlc3NGb3IoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgYWRkcmVzcyBwcm94eSA9IG5ldyBEY29ycFBlcnNvbmFsQ3Jvd2RzYWxlUHJveHkoX2JlbmVmaWNpYXJ5LCB0aGlzKTsKICAgICAgICBEY29ycFByb3h5Q3JlYXRlZChwcm94eSwgX2JlbmVmaWNpYXJ5KTsKICAgICAgICByZXR1cm4gcHJveHk7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGBfbWVtYmVyYCBoYXMgYSByZWNvcmQKICAgICAqCiAgICAgKiBAcGFyYW0gX21lbWJlciBUaGUgYWNjb3VudCB0aGF0IGhhcyBjb250cmlidXRlZAogICAgICogQHJldHVybiBUcnVlIGlmIHRoZXJlIGlzIGEgcmVjb3JkIHRoYXQgYmVsb25ncyB0byBgX21lbWJlcmAKICAgICAqLwogICAgZnVuY3Rpb24gaGFzUmVjb3JkKGFkZHJlc3MgX21lbWJlcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiByZWNvcmRzW19tZW1iZXJdLmluZGV4IDwgcmVjb3JkSW5kZXgubGVuZ3RoICYmIF9tZW1iZXIgPT0gcmVjb3JkSW5kZXhbcmVjb3Jkc1tfbWVtYmVyXS5pbmRleF07CiAgICB9CgoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgcmVjb3JkZWQgYW1vdW50IG9mIGV0aGVyIHRoYXQgaXMgY29udHJpYnV0ZWQgYnkgYF9tZW1iZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfbWVtYmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGNvbnRyaWJ1dGVkIGFtb3VudCB3aWxsIGJlIHJldHJpZXZlZAogICAgICogQHJldHVybiBUaGUgY29udHJpYnV0ZWQgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIGNvbnRyaWJ1dGVkQW1vdW50T2YoYWRkcmVzcyBfbWVtYmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJlY29yZHNbX21lbWJlcl0uY29udHJpYnV0ZWQ7CiAgICB9CgoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgYWxsb2NhdGVkIHRva2VuIGJhbGFuY2Ugb2YgYF9tZW1iZXJgCiAgICAgKiAKICAgICAqIEBwYXJhbSBfbWVtYmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGFsbG9jYXRlZCB0b2tlbiBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAgKiBAcmV0dXJuIFRoZSBhbGxvY2F0ZWQgdG9rZW4gYmFsYW5jZQogICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfbWVtYmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgUmVjb3JkIHN0b3JhZ2UgciA9IHJlY29yZHNbX21lbWJlcl07CiAgICAgICAgdWludCBiYWxhbmNlID0gMDsKICAgICAgICB1aW50IHNoYXJlID0gc2hhcmVPZihfbWVtYmVyKTsKICAgICAgICBpZiAoc2hhcmUgPiAwICYmIHIud2l0aGRyYXduVG9rZW5zIDwgc2hhcmUpIHsKICAgICAgICAgICAgYmFsYW5jZSA9IHNoYXJlIC0gci53aXRoZHJhd25Ub2tlbnM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYmFsYW5jZTsKICAgIH0KCgogICAgLyoqIAogICAgICogR2V0IHRoZSB0b3RhbCBzaGFyZSBvZiB0aGUgcmVjZWl2ZWQgdG9rZW5zIG9mIGBfbWVtYmVyYAogICAgICoKICAgICAqIFNoYXJlIGNhbGN1YXRpb24gaXMgYmFzZWQgb24gdGhlIGRycHUgYW5kIGRycHMgdG9rZW4gYmFsYW5jZXMgYW5kIHRoZSAKICAgICAqIGNvbnRyaWJ1dGVkIGFtb3VudCBvZiBldGhlci4gVGhlIHdlaWdodCBmYWN0b3IgYW5kIGNvbnRyaWJ1dGVkIGZhY3RvciAKICAgICAqIGRldGVybWluIHRoZSB3ZWlnaHQgb2YgZWFjaCBmYWN0b3IKICAgICAqIAogICAgICogQHBhcmFtIF9tZW1iZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgc2hhcmUgd2lsbCBiZSByZXRyaWV2ZWQKICAgICAqIEByZXR1cm4gVGhlIHRvdGFsIHNoYXJlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNoYXJlT2YoYWRkcmVzcyBfbWVtYmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgUmVjb3JkIHN0b3JhZ2UgciA9IHJlY29yZHNbX21lbWJlcl07CgogICAgICAgIC8vIEZhY3RvcmVkIHRvdGFscwogICAgICAgIHVpbnQgZmFjdG9yZWRUb3RhbFdlaWdodCA9IHRvdGFsV2VpZ2h0ICogZmFjdG9yV2VpZ2h0OwogICAgICAgIHVpbnQgZmFjdG9yZWRUb3RhbENvbnRyaWJ1dGVkID0gdG90YWxDb250cmlidXRlZCAqIGZhY3RvckNvbnRyaWJ1dGVkOwoKICAgICAgICAvLyBGYWN0b3JlZCBtZW1iZXIKICAgICAgICB1aW50IGZhY3RvcmVkV2VpZ2h0ID0gci53ZWlnaHQgKiBmYWN0b3JXZWlnaHQ7CiAgICAgICAgdWludCBmYWN0b3JlZENvbnRyaWJ1dGVkID0gci5jb250cmlidXRlZCAqIGZhY3RvckNvbnRyaWJ1dGVkOwoKICAgICAgICAvLyBDYWxjdWxhdGUgc2hhcmUgKG1lbWJlciAvIHRvdGFsICogdG9rZW5zKQogICAgICAgIHJldHVybiAoZmFjdG9yZWRXZWlnaHQgKyBmYWN0b3JlZENvbnRyaWJ1dGVkKSAqIHRvdGFsVG9rZW5zUmVjZWl2ZWQgLyAoZmFjdG9yZWRUb3RhbFdlaWdodCArIGZhY3RvcmVkVG90YWxDb250cmlidXRlZCk7CiAgICB9CgoKICAgIC8qKgogICAgICogUmVxdWVzdCB0b2tlbnMgZnJvbSB0aGUgdGFyZ2V0IGNyb3dkc2FsZSBieSBjYWxsaW5nIAogICAgICogaXQncyB3aXRoZHJhdyB0b2tlbiBmdW5jdGlvbgogICAgICovCiAgICBmdW5jdGlvbiByZXF1ZXN0VG9rZW5zRnJvbUNyb3dkc2FsZSgpIHB1YmxpYyBvbmx5X3doZW5fbm90X3VwZGF0aW5nIHsKICAgICAgICBjcm93ZHNhbGUud2l0aGRyYXdUb2tlbnMoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBVcGRhdGUgaW50ZXJuYWwgdG9rZW4gYmFsYW5jZQogICAgICogCiAgICAgKiBUb2tlbnMgdGhhdCBhcmUgcmVjZWl2ZWQgYXQgdGhlIHByb3hpZXMgYWRkcmVzcyBhcmUgCiAgICAgKiByZWNvcmRlZCBpbnRlcm5hbGx5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbGFuY2VzKCkgcHVibGljIG9ubHlfd2hlbl9ub3RfdXBkYXRpbmcgewogICAgICAgIHVwZGF0aW5nID0gdHJ1ZTsKCiAgICAgICAgdWludCByZWNvcmRlZEJhbGFuY2UgPSB0b3RhbFRva2Vuc1JlY2VpdmVkIC0gdG90YWxUb2tlbnNXaXRoZHJhd247CiAgICAgICAgdWludCBhY3R1YWxCYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSBiYWxhbmNlIGludHJuYWxseQogICAgICAgIGlmIChhY3R1YWxCYWxhbmNlID4gcmVjb3JkZWRCYWxhbmNlKSB7CiAgICAgICAgICAgIHRvdGFsVG9rZW5zUmVjZWl2ZWQgKz0gYWN0dWFsQmFsYW5jZSAtIHJlY29yZGVkQmFsYW5jZTsKICAgICAgICB9CgogICAgICAgIHVwZGF0aW5nID0gZmFsc2U7CiAgICB9CgoKICAgIC8qKgogICAgICogV2l0aGRyYXcgYWxsb2NhdGVkIHRva2VucwogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VucygpIHB1YmxpYyBvbmx5X3doZW5fZW5kZWQgb25seV93aGVuX25vdF91cGRhdGluZyB7CiAgICAgICAgYWRkcmVzcyBtZW1iZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHVpbnQgYmFsYW5jZSA9IGJhbGFuY2VPZihtZW1iZXIpOwoKICAgICAgICAvLyBSZWNvcmQgaW50ZXJuYWxseQogICAgICAgIHJlY29yZHNbbWVtYmVyXS53aXRoZHJhd25Ub2tlbnMgKz0gYmFsYW5jZTsKICAgICAgICB0b3RhbFRva2Vuc1dpdGhkcmF3biArPSBiYWxhbmNlOwoKICAgICAgICAvLyBUcmFuc2ZlciBzaGFyZQogICAgICAgIGlmICghdG9rZW4udHJhbnNmZXIobWVtYmVyLCBiYWxhbmNlKSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9CgoKICAgIC8qKgogICAgICogUmVjZWl2ZSBFdGggYW5kIGlzc3VlIHRva2VucyB0byB0aGUgc2VuZGVyCiAgICAgKiAKICAgICAqIFRoaXMgZnVuY3Rpb24gcmVxdWlyZXMgdGhhdCBtc2cuc2VuZGVyIGlzIG5vdCBhIGNvbnRyYWN0LiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgaXQncyAKICAgICAqIG5vdCBwb3NzaWJsZSBmb3IgYSBjb250cmFjdCB0byBzcGVjaWZ5IGEgZ2FzIGFtb3VudCB3aGVuIGNhbGxpbmcgdGhlIChpbnRlcm5hbCkgc2VuZCgpIAogICAgICogZnVuY3Rpb24uIFNvbGlkaXR5IGltcG9zZXMgYSBtYXhpbXVtIGFtb3VudCBvZiBnYXMgKDIzMDAgZ2FzIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcpCiAgICAgKiAKICAgICAqIENvbnRyYWN0cyBjYW4gY2FsbCB0aGUgY29udHJpYnV0ZSgpIGZ1bmN0aW9uIGluc3RlYWQKICAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB0eC5vcmlnaW4pOwogICAgICAgIF9oYW5kbGVUcmFuc2FjdGlvbihtc2cuc2VuZGVyKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZWNlaXZlIGV0aGVyIGFuZCBpc3N1ZSB0b2tlbnMgdG8gdGhlIHNlbmRlcgogICAgICoKICAgICAqIEByZXR1cm4gVGhlIGFjY2VwdGVkIGV0aGVyIGFtb3VudAogICAgICovCiAgICBmdW5jdGlvbiBjb250cmlidXRlKCkgcHVibGljIHBheWFibGUgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBfaGFuZGxlVHJhbnNhY3Rpb24obXNnLnNlbmRlcik7CiAgICB9CgoKICAgIC8qKgogICAgICogUmVjZWl2ZSBldGhlciBhbmQgaXNzdWUgdG9rZW5zIHRvIGBfYmVuZWZpY2lhcnlgCiAgICAgKgogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUaGUgYWNjb3VudCB0aGF0IHJlY2VpdmVzIHRoZSB0b2tlbnMKICAgICAqIEByZXR1cm4gVGhlIGFjY2VwdGVkIGV0aGVyIGFtb3VudAogICAgICovCiAgICBmdW5jdGlvbiBjb250cmlidXRlRm9yKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVUcmFuc2FjdGlvbihfYmVuZWZpY2lhcnkpOwogICAgfQoKCiAgICAvKioKICAgICAqIEZhaWxzYWZlIG1lY2hhbmlzbQogICAgICogCiAgICAgKiBBbGxvd3MgdGhlIG93bmVyIHRvIHJldHJpZXZlIHRva2VucyBmcm9tIHRoZSBjb250cmFjdCB0aGF0IAogICAgICogbWlnaHQgaGF2ZSBiZWVuIHNlbmQgdGhlcmUgYnkgYWNjaWRlbnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgcmVxdWlyZShfdG9rZW5Db250cmFjdCAhPSBhZGRyZXNzKHRva2VuKSk7CiAgICAgICAgc3VwZXIucmV0cmlldmVUb2tlbnMoX3Rva2VuQ29udHJhY3QpOwogICAgfQoKCiAgICAvKioKICAgICAqIEV2ZW50IGhhbmRsZXIgdGhhdCBwcm9jZXNzZXMgdGhlIHRva2VuIHJlY2VpdmVkIGV2ZW50CiAgICAgKiAKICAgICAqIENhbGxlZCBieSBgX3Rva2VuYCB3aGVuIGEgdG9rZW4gYW1vdW50IGlzIHJlY2VpdmVkIG9uIAogICAgICogdGhlIGFkZHJlc3Mgb2YgdGhpcyBwcm94eQogICAgICoKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgcmVjZWl2ZWQgdGhlIHRyYW5zYWN0aW9uCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFjY291bnQgb3IgY29udHJhY3QgdGhhdCBzZW5kIHRoZSB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgdmFsdWUgb2YgdG9rZW5zIHRoYXQgd2hlcmUgcmVjZWl2ZWQKICAgICAqLwogICAgZnVuY3Rpb24gb25Ub2tlbnNSZWNlaXZlZChhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKF90b2tlbiA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKF90b2tlbiA9PSBhZGRyZXNzKHRva2VuKSk7CiAgICAgICAgcmVxdWlyZShfZnJvbSA9PSBhZGRyZXNzKDApKTsKICAgICAgICAKICAgICAgICAvLyBSZWNvcmQgZGVwb3NpdAogICAgICAgIHRvdGFsVG9rZW5zUmVjZWl2ZWQgKz0gX3ZhbHVlOwogICAgfQoKCiAgICAvKioKICAgICAqIEhhbmRsZSBpbmNvbWluZyB0cmFuc2FjdGlvbnMKICAgICAqIAogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUb2tlbnMgYXJlIGlzc3VlZCB0byB0aGlzIGFjY291bnQKICAgICAqIEByZXR1cm4gQWNjZXB0ZWQgZXRoZXIgYW1vdW50CiAgICAgKi8KICAgIGZ1bmN0aW9uIF9oYW5kbGVUcmFuc2FjdGlvbihhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHJpdmF0ZSBvbmx5X3doZW5fbm90X3VwZGF0aW5nIGF0X3N0YWdlKFN0YWdlcy5EZXBsb3llZCkgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgd2VpZ2h0ID0gX2dldFdlaWdodChfYmVuZWZpY2lhcnkpOwogICAgICAgIHVpbnQgcmVjZWl2ZWQgPSBtc2cudmFsdWU7CgogICAgICAgIC8vIENvbnRyaWJ1dGUgZm9yIGJlbmVmaWNpYXJ5CiAgICAgICAgdWludCBhY2NlcHRlZEFtb3VudCA9IGNyb3dkc2FsZS5jb250cmlidXRlRm9yLnZhbHVlKHJlY2VpdmVkKShfYmVuZWZpY2lhcnkpOwoKICAgICAgICAvLyBSZWNvcmQgdHJhbnNhY3Rpb24KICAgICAgICBpZiAoIWhhc1JlY29yZChfYmVuZWZpY2lhcnkpKSB7CiAgICAgICAgICAgIHJlY29yZHNbX2JlbmVmaWNpYXJ5XSA9IFJlY29yZCgKICAgICAgICAgICAgICAgIHdlaWdodCwgYWNjZXB0ZWRBbW91bnQsIDAsIHJlY29yZEluZGV4LnB1c2goX2JlbmVmaWNpYXJ5KSAtIDEpOwogICAgICAgICAgICB0b3RhbFdlaWdodCArPSB3ZWlnaHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgUmVjb3JkIHN0b3JhZ2UgciA9IHJlY29yZHNbX2JlbmVmaWNpYXJ5XTsKICAgICAgICAgICAgci5jb250cmlidXRlZCArPSBhY2NlcHRlZEFtb3VudDsKICAgICAgICAgICAgaWYgKHdlaWdodCA8IHIud2VpZ2h0KSB7CiAgICAgICAgICAgICAgICAvLyBBZGp1c3Qgd2VpZ2h0CiAgICAgICAgICAgICAgICByLndlaWdodCA9IHdlaWdodDsKICAgICAgICAgICAgICAgIHRvdGFsV2VpZ2h0IC09IHIud2VpZ2h0IC0gd2VpZ2h0OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBSZWNvcmQgY29ucmlidXRpb24KICAgICAgICB0b3RhbENvbnRyaWJ1dGVkICs9IGFjY2VwdGVkQW1vdW50OwogICAgICAgIHJldHVybiBhY2NlcHRlZEFtb3VudDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgY29tYmluZWQgZHJwIGJhbGFuY2VzIGZyb20gdGhlIGRycHUgYW5kIGRycHMgdG9rZW5zCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRva2VuIG93bmVyCiAgICAgKiBAcmV0dXJuIFdlaWdodCwgZHJwIGJhbGFuY2UKICAgICAqLwogICAgZnVuY3Rpb24gX2dldFdlaWdodChhZGRyZXNzIF9hY2NvdW50KSBwcml2YXRlIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkcnBzVG9rZW4uYmFsYW5jZU9mKF9hY2NvdW50KSArIGRycHVUb2tlbi5iYWxhbmNlT2YoX2FjY291bnQpOwogICAgfQp9CgoKY29udHJhY3QgS0FUWERjb3JwTWVtYmVyUHJveHkgaXMgRGNvcnBDcm93ZHNhbGVQcm94eSB7CiAgICBmdW5jdGlvbiBLQVRYRGNvcnBNZW1iZXJQcm94eSgpIHB1YmxpYyBEY29ycENyb3dkc2FsZVByb3h5KCkge30KfQ=='.
	

]
