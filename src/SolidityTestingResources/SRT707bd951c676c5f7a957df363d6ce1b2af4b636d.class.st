Class {
	#name : #SRT707bd951c676c5f7a957df363d6ce1b2af4b636d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT707bd951c676c5f7a957df363d6ce1b2af4b636d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKY29udHJhY3QgRVJDMjAgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgCn0KCgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICAKCiAgICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIHVpbnQyNTYgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwogICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KfQoKCiAgICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgoKfQoKY29udHJhY3QgQU5PVG9rZW4gaXMgQmFzaWNUb2tlbiB7Cgp1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCnN0cmluZyBwdWJsaWMgbmFtZSA9ICJBbm9uaXVtIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOYW1lIG9mIHRoZSB0b2tlbgpzdHJpbmcgcHVibGljIHN5bWJvbCA9ICJBTk8iOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3ltYm9sIG9mIHRoZSB0b2tlbgp1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjaW1hbHMKdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAyMTAwMDAwMDAwMCAqIDEwKioxODsgICAgICAgICAgICAgIC8vIFRvdGFsIHN1cHBseSBvZiBTUEMgVG9rZW5zICAKCi8vVmFyaWFibGVzCnVpbnQyNTYgcHVibGljIHRva2Vuc0FsbG9jYXRlZFRvQ3Jvd2RGdW5kOyAgICAgICAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZSB0byB0cmFjayB0aGUgYWxsb2NhdGlvbnMgb2YgdGhlIHRva2VuIHRvIGNyb3dkZnVuZAp1aW50MjU2IHB1YmxpYyB0b3RhbEFsbG9jYXRlZFRva2VuczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyaWFibGUgdG8gdHJhY2sgdGhlIHN1cHBseSBpbiB0byB0aGUgbWFya2V0CgovL0FkZHJlc3MKYWRkcmVzcyBwdWJsaWMgY3Jvd2RGdW5kQWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZHJlc3Mgb2YgdGhlIGNyb3dkZnVuZAphZGRyZXNzIHB1YmxpYyBmb3VuZGVyTXVsdGlTaWdBZGRyZXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBvZiB0aGUgZm91bmRlcgoKLy9ldmVudHMKZXZlbnQgQ2hhbmdlRm91bmRlcnNXYWxsZXRBZGRyZXNzKHVpbnQyNTYgIF9ibG9ja1RpbWVTdGFtcCwgYWRkcmVzcyBpbmRleGVkIF9mb3VuZGVyc1dhbGxldEFkZHJlc3MpOwoKLy9tb2RpZmllcnMKCiAgbW9kaWZpZXIgb25seUNyb3dkRnVuZEFkZHJlc3MoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3Jvd2RGdW5kQWRkcmVzcyk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgbm9uWmVyb0FkZHJlc3MoYWRkcmVzcyBfdG8pIHsKICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUZvdW5kZXJzKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpOwogICAgXzsKICB9CgoKICAKICAgLy8gY3JlYXRpb24gb2YgdGhlIHRva2VuIGNvbnRyYWN0IAogICBmdW5jdGlvbiBBTk9Ub2tlbiAoYWRkcmVzcyBfY3Jvd2RGdW5kQWRkcmVzcykgcHVibGljIHsKICAgIGNyb3dkRnVuZEFkZHJlc3MgPSBfY3Jvd2RGdW5kQWRkcmVzczsKICAgIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MgPSBtc2cuc2VuZGVyOwoKICAgIHRva2Vuc0FsbG9jYXRlZFRvQ3Jvd2RGdW5kID0gdG90YWxTdXBwbHk7ICAgICAgICAgICAgICAgICAgIC8vIDEwMCAlIGFsbG9jYXRpb24gb2YgdG90YWxTdXBwbHkKCiAgICAvLyBBc3NpZ25lZCBiYWxhbmNlcyB0byByZXNwZWN0aXZlIHN0YWtlaG9sZGVycwogICAgYmFsYW5jZXNbY3Jvd2RGdW5kQWRkcmVzc10gPSB0b2tlbnNBbGxvY2F0ZWRUb0Nyb3dkRnVuZDsKICAKICB9CgovLyBmdW5jdGlvbiB0byBrZWVwIHRyYWNrIG9mIHRoZSB0b3RhbCB0b2tlbiBhbGxvY2F0aW9uCiAgZnVuY3Rpb24gY2hhbmdlU3VwcGx5KHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlDcm93ZEZ1bmRBZGRyZXNzIHsKICAgIHRvdGFsQWxsb2NhdGVkVG9rZW5zICs9IF9hbW91bnQ7CiAgfQoKLy8gZnVuY3Rpb24gdG8gY2hhbmdlIGZvdW5kZXIgbXVsdGlzaWcgd2FsbGV0IGFkZHJlc3MgICAgICAgICAgICAKICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyTXVsdGlTaWdBZGRyZXNzKGFkZHJlc3MgX25ld0ZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpIHB1YmxpYyBvbmx5Rm91bmRlcnMgbm9uWmVyb0FkZHJlc3MoX25ld0ZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpIHsKICAgIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MgPSBfbmV3Rm91bmRlck11bHRpU2lnQWRkcmVzczsKICAgIENoYW5nZUZvdW5kZXJzV2FsbGV0QWRkcmVzcyhub3csIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpOwogIH0KCiAgLyoqCiAgICBAZGV2IGBidXJuVG9rZW5gIHVzZWQgdG8gYnVybiB0aGUgcmVtaWFuaW5nIHRva2VuIGFmdGVyIHRoZSBlbmQgb2YgY3Jvd2RzYWxlCiAgICBpdCBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY3Jvd2RmdW5kIGFkZHJlc3Mgb25seSAKICAgKi8KCiAgZnVuY3Rpb24gYnVyblRva2VuKCkgcHVibGljIG9ubHlDcm93ZEZ1bmRBZGRyZXNzIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCmNvbnRyYWN0IEFOT0Nyb3dkc2FsZSB7Cgp1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCkFOT1Rva2VuIHRva2VuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG9rZW4gdmFyaWFibGUKCnVpbnQyNTYgcHVibGljIHN0YXJ0RGF0ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZGF0ZSBvZiB0aGUgY3Jvd2RzYWxlCnVpbnQyNTYgcHVibGljIGVuZERhdGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5kIGRhdGUgb2YgY3Jvd2RzYWxlCnVpbnQyNTYgcHJpdmF0ZSB3ZWVrTm8gPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsYWcgdmFyaWFibGUgdG8gdHJhY2sgdGhlIHdlZWsgbm8uCnVpbnQyNTYgcHVibGljIGFsbG9jYXRlZFRva2VuID0gMjEwMDAwMDAwMDAgKiAxMCAqKiAxODsgICAgICAgICAgLy8gVG90YWwgdG9rZW5zIGFsbG9jYXRlZCB0byBjcm93ZHNhbGUgCnVpbnQyNTYgcHJpdmF0ZSB0b2tlbkFsbG9jYXRlZEZvcldlZWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFyaWFibGUgdG8gdHJhY2sgdGhlIGFsbG9jYXRpb24gcGVyIHdlZWsKdWludDI1NiBwcml2YXRlIHRva2VuU29sZEZvcldlZWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUb2tlbiBzb2xkIHBlciB3ZWVrCnVpbnQyNTYgcHVibGljIGV0aFJhaXNlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHVibGljIHZhcmlhYmxlIHRvIHRyYWNrIHRoZSBhbW91bnQgb2YgRVRIIHJhaXNlZAp1aW50MzIgcHVibGljIHRva2VuUmF0ZSA9IDYwNzg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemF0aW9uIG9mIHRva2VuIHJhdGUgCnVpbnQzMiBwdWJsaWMgYXBwcmVjaWF0aW9uUmF0ZSA9IDEyMTY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJhdGUgb2YgdG9rZW4gd2lsbCBpbmNyZWFzZWQgYnkgdGhhdCBtdWNoIGFtb3VudApib29sIHByaXZhdGUgaXNUb2tlblNldCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsYWcgdmFyaWFibGUgdG8gdHJhY2sgdGhlIHRva2VuIGFkZHJlc3MKCmFkZHJlc3MgcHVibGljIGZvdW5kZXJBZGRyZXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm91bmRlciBhZGRyZXNzIHdoaWNoIHdpbGwgY29udHJvbCB0aGUgb3BlcmF0aW9ucyBvZiB0aGUgY3Jvd2RzYWxlCmFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5QWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyB3aGVyZSBFVEggZ2V0IHRyYXNmZXJyZWQgIAoKLyoqCiAgICBAbm90ZSBzdHJ1Y3R1cmUgZm9yIGtlZXBpbmcgdGhlIHdlZWtseSBkYXRhIHRvIHRyYWNrCiAgICB0aGUgd2VlayByYXRlIG9mIHRoZSBjcm93ZHNhbGUKICovCnN0cnVjdCB3ZWVrbHlEYXRhIHsKICAgIHVpbnQyNTYgc3RhcnRUaW1lOwogICAgdWludDI1NiBlbmRUaW1lOwogICAgdWludDMyIHdlZWtSYXRlOwp9CgovLyBtYXBwaW5nIGlzIHVzZWQgdG8gc3RvcmUgdGhlIHdlZWtseURhdGEgY29ycmVzcG9uZHMgdG8gaW50ZWdlcgptYXBwaW5nKHVpbnQyNTYgPT4gd2Vla2x5RGF0YSkgcHVibGljIHdlZWtseVJhdGU7CgovL0V2ZW50IApldmVudCBMb2dXZWVrUmF0ZSh1aW50MzIgX3dlZWtSYXRlLCB1aW50MjU2IF90aW1lc3RhbXApOwoKLy8gTW9kaWZpZXIgZm9yIHZhbGlkYXRpbmcgdGhlIHRpbWUgbGFwc2Ugc2hvdWxkIGJldHdlZW4gaW4gc3RhcnQgYW5kIGVuZCBkYXRlCm1vZGlmaWVyIGlzQmV0d2VlbigpIHsKICAgIHJlcXVpcmUobm93ID49IHN0YXJ0RGF0ZSAmJiBub3cgPD0gZW5kRGF0ZSk7CiAgICBfOwp9CgovLyBNb2RpZmllciBmb3IgdmFsaWRhdGluZyB0aGUgbXNnLnNlbmRlciBzaG91bGQgYmUgZm91bmRlciBhZGRyZXNzCm1vZGlmaWVyIG9ubHlGb3VuZGVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGZvdW5kZXJBZGRyZXNzKTsKICAgIF87Cn0KCi8vRXZlbnQgCmV2ZW50IFRva2VuQm91Z2h0KGFkZHJlc3MgaW5kZXhlZCBfaW52ZXN0b3IsIHVpbnQyNTYgX3Rva2VuUXVhbnRpdHkpOwoKLyoqCiAgICBAZGV2IEZhbGxiYWNrIGZ1bmN0aW9uCiAgICBtaW5pbXVtIDIsMDAsMDAwIGdhcyBzaG91bGQgYmUgdXNlZCBhdCB0aGUgdGltZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gCiAqLwoKZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwp9CgovKioKICAgIEBkZXYgUHJpdmF0ZSBmdW5jdGlvbiB0byBzZXQgdGhlIHdlZWtseSByYXRlIGl0IGNhbGxlZCBvbmx5IG9uY2UKICAgIGluIHRoZSBjb25zdHJ1Y3Rvci4KICAgIEByZXR1cm4gYm9vbAogKi8KCmZ1bmN0aW9uIHNldFdlZWtseVJhdGUoKSBwcml2YXRlIHJldHVybnMgKGJvb2wpIHsKICAgIGZvciAodWludDMyIGkgPSAwOyBpIDwgNDA7ICsraSkgewogICAgICAgIHVpbnQzMiB3ZWVrUmF0ZSA9IHRva2VuUmF0ZSArIGFwcHJlY2lhdGlvblJhdGUgKiBpOwogICAgICAgIHVpbnQyNTYgd2Vla1N0YXJ0VGltZSA9IG5vdyArIGkgKiAxIHdlZWtzOwogICAgICAgIHVpbnQyNTYgd2Vla0VuZFRpbWUgPSBub3cgKyAoaSsxKSAqIDEgd2Vla3M7CiAgICAgICAgd2Vla2x5UmF0ZVtpXSA9IHdlZWtseURhdGEod2Vla1N0YXJ0VGltZSwgd2Vla0VuZFRpbWUsIHdlZWtSYXRlKTsKICAgIH0KICAgIHJldHVybiB0cnVlOwp9CgovKioKICAgIEBkZXYgUHJpdmF0ZSBmdW5jdGlvbiB0byBnZXQgdGhlIHdlZWtseSByYXRlIAogICAgYXMgcGVyIHRoZSB3ZWVrIG5vLgogICAgQHJldHVybiB1aW50MzIKICovCgpmdW5jdGlvbiBnZXRXZWVrbHlSYXRlKCkgcHJpdmF0ZSByZXR1cm5zICh1aW50MzIpIHsKICAgaWYgKG5vdyA8PSB3ZWVrbHlSYXRlW3dlZWtOb10uZW5kVGltZSAmJiBub3cgPj0gd2Vla2x5UmF0ZVt3ZWVrTm9dLnN0YXJ0VGltZSkgewogICAgICAgcmV0dXJuIHdlZWtseVJhdGVbd2Vla05vXS53ZWVrUmF0ZTsKICAgfSBpZiAobm93IDw9IHdlZWtseVJhdGVbd2Vla05vICsgMV0uZW5kVGltZSAmJiBub3cgPj0gd2Vla2x5UmF0ZVt3ZWVrTm8gKyAxXS5zdGFydFRpbWUgKSB7CiAgICAgICAgd2Vla05vID0gd2Vla05vICsgMTsKICAgICAgICBzZXRXZWVrbHlBbGxvY2F0aW9uKCk7CiAgICAgICAgcmV0dXJuIHdlZWtseVJhdGVbd2Vla05vICsgMV0ud2Vla1JhdGU7CiAgIH0gZWxzZSB7CiAgICAgICB1aW50MjU2IGluY3JlYXNlZEJ5ID0gbm93IC0gc3RhcnREYXRlOwogICAgICAgdWludDI1NiB3ZWVrSW5jcmVhc2VkQnkgPSBpbmNyZWFzZWRCeS5kaXYoNjA0ODAwKTsgICAgLy8gNyBkYXlzIHNlY29uZHMgNyAqIDI0ICogNjAgKiA2MAogICAgICAgc2V0V2Vla2x5QWxsb2NhdGlvbigpOwogICAgICAgd2Vla05vID0gd2Vla05vLmFkZCh3ZWVrSW5jcmVhc2VkQnkpOwogICAgICAgTG9nV2Vla1JhdGUod2Vla2x5UmF0ZVt3ZWVrTm9dLndlZWtSYXRlLCBub3cpOwogICAgICAgcmV0dXJuIHdlZWtseVJhdGVbd2Vla05vXS53ZWVrUmF0ZTsKICAgfQp9CgovLyBmdW5jdGlvbiB0byB0cmFuc2ZlciB0aGUgZnVuZHMgdG8gZm91bmRlcnMgYWNjb3VudApmdW5jdGlvbiBmdW5kVHJhbnNmZXIodWludDI1NiB3ZWlBbW91bnQpIGludGVybmFsIHsKICAgICAgICBiZW5lZmljaWFyeUFkZHJlc3MudHJhbnNmZXIod2VpQW1vdW50KTsKICAgIH0KCi8qKgogICAgQGRldiBTaW1wbGUgZnVuY3Rpb24gdG8gdHJhY2sgdGhlIHRva2VuIGFsbG9jYXRpb24gZm9yIGEgd2VlawogKi8KZnVuY3Rpb24gc2V0V2Vla2x5QWxsb2NhdGlvbigpIHByaXZhdGUgewogICAgdG9rZW5BbGxvY2F0ZWRGb3JXZWVrID0gKHRva2VuQWxsb2NhdGVkRm9yV2VlayArICh0b2tlbkFsbG9jYXRlZEZvcldlZWsgLSB0b2tlblNvbGRGb3JXZWVrKSkuZGl2KDIpOwogICAgdG9rZW5Tb2xkRm9yV2VlayA9IDA7Cn0KCi8qKgogICAgQGRldiBBTk9Dcm93ZHNhbGUgY29uc3RydWN0b3IgdG8gc2V0IHRoZSBmb3VuZGVyIGFuZCBiZW5lZmljaWFyeQogICAgYXMgd2VsbCBhcyB0byBzZXQgc3RhcnQgJiBlbmQgZGF0ZS4KICAgIEBwYXJhbSBfZm91bmRlckFkZHJlc3MgYWRkcmVzcyB3aGljaCBvcGVyYXRlcyBhbGwgdGhlIGFkbWluIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIGNvbnRyYWN0CiAgICBAcGFyYW0gX2JlbmVmaWNpYXJ5QWRkcmVzcyBhZGRyZXNzIHdoZXJlIGFsbCBpbnZlc3RlZCBhbW91bnQgZ2V0IHRyYW5zZmVycmVkIAogKi8KCmZ1bmN0aW9uIEFOT0Nyb3dkc2FsZSAoYWRkcmVzcyBfZm91bmRlckFkZHJlc3MsIGFkZHJlc3MgX2JlbmVmaWNpYXJ5QWRkcmVzcykgcHVibGljIHsKICAgIHN0YXJ0RGF0ZSA9IG5vdzsKICAgIGVuZERhdGUgPSBub3cgKyA0MCB3ZWVrczsKICAgIGZvdW5kZXJBZGRyZXNzID0gX2ZvdW5kZXJBZGRyZXNzOwogICAgYmVuZWZpY2lhcnlBZGRyZXNzID0gX2JlbmVmaWNpYXJ5QWRkcmVzczsKICAgIHJlcXVpcmUoc2V0V2Vla2x5UmF0ZSgpKTsKICAgIHRva2VuQWxsb2NhdGVkRm9yV2VlayA9IGFsbG9jYXRlZFRva2VuLmRpdigyKTsKfQoKLyoqCiAgICBAZGV2IGBzZXRUb2tlbkFkZHJlc3NgIHVzZWQgdG8gYXNzaWduIHRoZSB0b2tlbiBhZGRyZXNzIGludG8gdGhlIHZhcmlhYmxlCiAgICBvbmx5IGJlIGNhbGxlZCBieSBmb3VuZGVyIGFuZCBjYWxsZWQgb25seSBvbmNlLgogICAgQHBhcmFtIF90b2tlbkFkZHJlc3MgYWRkcmVzcyBvZiB0aGUgdG9rZW4gd2hpY2ggd2lsbCBiZSBkaXN0cmlidXRlZCB1c2luZyB0aGlzIGNyb3dkc2FsZQogICAgQHJldHVybiBib29sCiAqLwoKZnVuY3Rpb24gc2V0VG9rZW5BZGRyZXNzIChhZGRyZXNzIF90b2tlbkFkZHJlc3MpIHB1YmxpYyBvbmx5Rm91bmRlciByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKGlzVG9rZW5TZXQgPT0gZmFsc2UpOwogICAgdG9rZW4gPSBBTk9Ub2tlbihfdG9rZW5BZGRyZXNzKTsKICAgIGlzVG9rZW5TZXQgPSAhaXNUb2tlblNldDsKICAgIHJldHVybiB0cnVlOwp9CgovKioKICAgIEBkZXYgYGJ1eVRva2Vuc2AgZnVuY3Rpb24gdXNlZCB0byBidXkgdGhlIHRva2VuCiAgICBAcGFyYW0gX2ludmVzdG9yIGFkZHJlc3Mgb2YgdGhlIGludmVzdG9yIHdoZXJlIFJPSSB3aWxsIHRyYW5zZmVycmVkCiAgICBAcmV0dXJuIGJvb2wKICovCgpmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfaW52ZXN0b3IpIApwdWJsaWMgCmlzQmV0d2VlbgpwYXlhYmxlCnJldHVybnMgKGJvb2wpIAp7CiAgIHJlcXVpcmUoaXNUb2tlblNldCA9PSB0cnVlKTsKICAgcmVxdWlyZShfaW52ZXN0b3IgIT0gYWRkcmVzcygwKSk7CiAgIHVpbnQyNTYgcmF0ZSA9IHVpbnQyNTYoZ2V0V2Vla2x5UmF0ZSgpKTsKICAgdWludDI1NiB0b2tlbkFtb3VudCA9IChtc2cudmFsdWUuZGl2KHJhdGUpKS5tdWwoMTAgKiogOCk7CiAgIHJlcXVpcmUodG9rZW5BbGxvY2F0ZWRGb3JXZWVrID49IHRva2VuU29sZEZvcldlZWsgKyB0b2tlbkFtb3VudCk7CiAgIGZ1bmRUcmFuc2Zlcihtc2cudmFsdWUpOwogICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKF9pbnZlc3RvciwgdG9rZW5BbW91bnQpKTsKICAgdG9rZW5Tb2xkRm9yV2VlayA9IHRva2VuU29sZEZvcldlZWsuYWRkKHRva2VuQW1vdW50KTsKICAgdG9rZW4uY2hhbmdlU3VwcGx5KHRva2VuQW1vdW50KTsKICAgZXRoUmFpc2VkID0gZXRoUmFpc2VkLmFkZChtc2cudmFsdWUpOwogICBUb2tlbkJvdWdodChfaW52ZXN0b3IsIHRva2VuQW1vdW50KTsKICAgcmV0dXJuIHRydWU7Cn0KCi8qKgogICAgQGRldiBgZ2V0V2Vla05vYCBwdWJsaWMgZnVuY3Rpb24gdG8gZ2V0IHRoZSBjdXJyZW50IHdlZWsgbm8KICovCgpmdW5jdGlvbiBnZXRXZWVrTm8oKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gd2Vla05vOwp9CgovKioKICAgIEBkZXYgYGVuZENyb3dkZnVuZGAgZnVuY3Rpb24gdXNlZCB0byBlbmQgdGhlIGNyb3dkZnVuZAogICAgY2FsbGVkIG9ubHkgYnkgdGhlIGZvdW5kZXIgYW5kIHJlbWlhaW5pbmcgdG9rZW5zIGdldCBidXJuZWQgCiAqLwoKZnVuY3Rpb24gZW5kQ3Jvd2RmdW5kKCkgcHVibGljIG9ubHlGb3VuZGVyIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoaXNUb2tlblNldCA9PSB0cnVlKTsKICAgIHJlcXVpcmUobm93ID4gZW5kRGF0ZSk7CiAgICByZXF1aXJlKHRva2VuLmJ1cm5Ub2tlbigpKTsKICAgIHJldHVybiB0cnVlOwp9Cgp9'.
	

]
