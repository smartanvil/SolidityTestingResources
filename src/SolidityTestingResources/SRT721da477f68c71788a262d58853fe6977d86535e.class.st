Class {
	#name : #SRT721da477f68c71788a262d58853fe6977d86535e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT721da477f68c71788a262d58853fe6977d86535e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBjb3B5cmlnaHQgPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSJlZjhjODA4MTliOGU4YzliYWZhYTliODc4YTlkOGE4MjgwODFjMThjODA4MiI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4KCmNvbnRyYWN0IFNhZmVNYXRoIHsKCiAgICAvKiBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsgKi8KICAgIC8qICAgaWYgKCFhc3NlcnRpb24pIHsgKi8KICAgIC8qICAgICB0aHJvdzsgKi8KICAgIC8qICAgfSAqLwogICAgLyogfSAgICAgIC8vIGFzc2VydCBubyBsb25nZXIgbmVlZGVkIG9uY2Ugc29saWRpdHkgaXMgb24gMC40LjEwICovCgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgYXNzZXJ0KHggPj0geSk7CiAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKfQoKY29udHJhY3QgQmFzaWNBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgLy8gYWRkcmVzc1tdIHB1YmxpYyBtb2RlcmF0b3JzOwogICAgdWludDE2IHB1YmxpYyB0b3RhbE1vZGVyYXRvcnMgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgbW9kZXJhdG9yczsKICAgIGJvb2wgcHVibGljIGlzTWFpbnRhaW5pbmcgPSB0cnVlOwoKICAgIGZ1bmN0aW9uIEJhc2ljQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNb2RlcmF0b3JzKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBtb2RlcmF0b3JzW21zZy5zZW5kZXJdID09IHRydWUpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNBY3RpdmUgewogICAgICAgIHJlcXVpcmUoIWlzTWFpbnRhaW5pbmcpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gQ2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChfbmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIEFkZE1vZGVyYXRvcihhZGRyZXNzIF9uZXdNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChtb2RlcmF0b3JzW19uZXdNb2RlcmF0b3JdID09IGZhbHNlKSB7CiAgICAgICAgICAgIG1vZGVyYXRvcnNbX25ld01vZGVyYXRvcl0gPSB0cnVlOwogICAgICAgICAgICB0b3RhbE1vZGVyYXRvcnMgKz0gMTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIFJlbW92ZU1vZGVyYXRvcihhZGRyZXNzIF9vbGRNb2RlcmF0b3IpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlmIChtb2RlcmF0b3JzW19vbGRNb2RlcmF0b3JdID09IHRydWUpIHsKICAgICAgICAgICAgbW9kZXJhdG9yc1tfb2xkTW9kZXJhdG9yXSA9IGZhbHNlOwogICAgICAgICAgICB0b3RhbE1vZGVyYXRvcnMgLT0gMTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gVXBkYXRlTWFpbnRhaW5pbmcoYm9vbCBfaXNNYWludGFpbmluZykgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgaXNNYWludGFpbmluZyA9IF9pc01haW50YWluaW5nOwogICAgfQp9Cgpjb250cmFjdCBFdGhlcmVtb25FbnVtIHsKCiAgICBlbnVtIFJlc3VsdENvZGUgewogICAgICAgIFNVQ0NFU1MsCiAgICAgICAgRVJST1JfQ0xBU1NfTk9UX0ZPVU5ELAogICAgICAgIEVSUk9SX0xPV19CQUxBTkNFLAogICAgICAgIEVSUk9SX1NFTkRfRkFJTCwKICAgICAgICBFUlJPUl9OT1RfVFJBSU5FUiwKICAgICAgICBFUlJPUl9OT1RfRU5PVUdIX01PTkVZLAogICAgICAgIEVSUk9SX0lOVkFMSURfQU1PVU5UCiAgICB9CiAgICAKICAgIGVudW0gQXJyYXlUeXBlIHsKICAgICAgICBDTEFTU19UWVBFLAogICAgICAgIFNUQVRfU1RFUCwKICAgICAgICBTVEFUX1NUQVJULAogICAgICAgIFNUQVRfQkFTRSwKICAgICAgICBPQkpfU0tJTEwKICAgIH0KICAgIAogICAgZW51bSBQcm9wZXJ0eVR5cGUgewogICAgICAgIEFOQ0VTVE9SLAogICAgICAgIFhGQUNUT1IKICAgIH0KfQoKY29udHJhY3QgRXRoZXJlbW9uRGF0YUJhc2UgaXMgRXRoZXJlbW9uRW51bSwgQmFzaWNBY2Nlc3NDb250cm9sLCBTYWZlTWF0aCB7CiAgICAKICAgIHVpbnQ2NCBwdWJsaWMgdG90YWxNb25zdGVyOwogICAgdWludDMyIHB1YmxpYyB0b3RhbENsYXNzOwogICAgCiAgICAvLyB3cml0ZQogICAgZnVuY3Rpb24gd2l0aGRyYXdFdGhlcihhZGRyZXNzIF9zZW5kVG8sIHVpbnQgX2Ftb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zKFJlc3VsdENvZGUpOwogICAgZnVuY3Rpb24gYWRkRWxlbWVudFRvQXJyYXlUeXBlKEFycmF5VHlwZSBfdHlwZSwgdWludDY0IF9pZCwgdWludDggX3ZhbHVlKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIHVwZGF0ZUluZGV4T2ZBcnJheVR5cGUoQXJyYXlUeXBlIF90eXBlLCB1aW50NjQgX2lkLCB1aW50IF9pbmRleCwgdWludDggX3ZhbHVlKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIHNldE1vbnN0ZXJDbGFzcyh1aW50MzIgX2NsYXNzSWQsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9yZXR1cm5QcmljZSwgYm9vbCBfY2F0Y2hhYmxlKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50MzIpOwogICAgZnVuY3Rpb24gYWRkTW9uc3Rlck9iaih1aW50MzIgX2NsYXNzSWQsIGFkZHJlc3MgX3RyYWluZXIsIHN0cmluZyBfbmFtZSkgb25seU1vZGVyYXRvcnMgcHVibGljIHJldHVybnModWludDY0KTsKICAgIGZ1bmN0aW9uIHNldE1vbnN0ZXJPYmoodWludDY0IF9vYmpJZCwgc3RyaW5nIF9uYW1lLCB1aW50MzIgX2V4cCwgdWludDMyIF9jcmVhdGVJbmRleCwgdWludDMyIF9sYXN0Q2xhaW1JbmRleCkgb25seU1vZGVyYXRvcnMgcHVibGljOwogICAgZnVuY3Rpb24gaW5jcmVhc2VNb25zdGVyRXhwKHVpbnQ2NCBfb2JqSWQsIHVpbnQzMiBhbW91bnQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGRlY3JlYXNlTW9uc3RlckV4cCh1aW50NjQgX29iaklkLCB1aW50MzIgYW1vdW50KSBvbmx5TW9kZXJhdG9ycyBwdWJsaWM7CiAgICBmdW5jdGlvbiByZW1vdmVNb25zdGVySWRNYXBwaW5nKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQ2NCBfbW9uc3RlcklkKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWM7CiAgICBmdW5jdGlvbiBhZGRNb25zdGVySWRNYXBwaW5nKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQ2NCBfbW9uc3RlcklkKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWM7CiAgICBmdW5jdGlvbiBjbGVhck1vbnN0ZXJSZXR1cm5CYWxhbmNlKHVpbnQ2NCBfbW9uc3RlcklkKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50MjU2IGFtb3VudCk7CiAgICBmdW5jdGlvbiBjb2xsZWN0QWxsUmV0dXJuQmFsYW5jZShhZGRyZXNzIF90cmFpbmVyKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyh1aW50MjU2IGFtb3VudCk7CiAgICBmdW5jdGlvbiB0cmFuc2Zlck1vbnN0ZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQ2NCBfbW9uc3RlcklkKSBvbmx5TW9kZXJhdG9ycyBwdWJsaWMgcmV0dXJucyhSZXN1bHRDb2RlKTsKICAgIGZ1bmN0aW9uIGFkZEV4dHJhQmFsYW5jZShhZGRyZXNzIF90cmFpbmVyLCB1aW50MjU2IF9hbW91bnQpIG9ubHlNb2RlcmF0b3JzIHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gZGVkdWN0RXh0cmFCYWxhbmNlKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQyNTYgX2Ftb3VudCkgb25seU1vZGVyYXRvcnMgcHVibGljIHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBzZXRFeHRyYUJhbGFuY2UoYWRkcmVzcyBfdHJhaW5lciwgdWludDI1NiBfYW1vdW50KSBvbmx5TW9kZXJhdG9ycyBwdWJsaWM7CiAgICAKICAgIC8vIHJlYWQKICAgIGZ1bmN0aW9uIGdldFNpemVBcnJheVR5cGUoQXJyYXlUeXBlIF90eXBlLCB1aW50NjQgX2lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRJbkFycmF5VHlwZShBcnJheVR5cGUgX3R5cGUsIHVpbnQ2NCBfaWQsIHVpbnQgX2luZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCk7CiAgICBmdW5jdGlvbiBnZXRNb25zdGVyQ2xhc3ModWludDMyIF9jbGFzc0lkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MzIgY2xhc3NJZCwgdWludDI1NiBwcmljZSwgdWludDI1NiByZXR1cm5QcmljZSwgdWludDMyIHRvdGFsLCBib29sIGNhdGNoYWJsZSk7CiAgICBmdW5jdGlvbiBnZXRNb25zdGVyT2JqKHVpbnQ2NCBfb2JqSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQ2NCBvYmpJZCwgdWludDMyIGNsYXNzSWQsIGFkZHJlc3MgdHJhaW5lciwgdWludDMyIGV4cCwgdWludDMyIGNyZWF0ZUluZGV4LCB1aW50MzIgbGFzdENsYWltSW5kZXgsIHVpbnQgY3JlYXRlVGltZSk7CiAgICBmdW5jdGlvbiBnZXRNb25zdGVyTmFtZSh1aW50NjQgX29iaklkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyhzdHJpbmcgbmFtZSk7CiAgICBmdW5jdGlvbiBnZXRFeHRyYUJhbGFuY2UoYWRkcmVzcyBfdHJhaW5lcikgY29uc3RhbnQgcHVibGljIHJldHVybnModWludDI1Nik7CiAgICBmdW5jdGlvbiBnZXRNb25zdGVyRGV4U2l6ZShhZGRyZXNzIF90cmFpbmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50KTsKICAgIGZ1bmN0aW9uIGdldE1vbnN0ZXJPYmpJZChhZGRyZXNzIF90cmFpbmVyLCB1aW50IGluZGV4KSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50NjQpOwogICAgZnVuY3Rpb24gZ2V0RXhwZWN0ZWRCYWxhbmNlKGFkZHJlc3MgX3RyYWluZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gZ2V0TW9uc3RlclJldHVybih1aW50NjQgX29iaklkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50MjU2IGN1cnJlbnQsIHVpbnQyNTYgdG90YWwpOwp9Cgpjb250cmFjdCBFUkMyMEludGVyZmFjZSB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHRva2VuT3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgdG9rZW5Pd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgdG9rZW5zKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKfQoKY29udHJhY3QgQmF0dGxlSW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIGNyZWF0ZUNhc3RsZVdpdGhUb2tlbihhZGRyZXNzIF90cmFpbmVyLCB1aW50MzIgX25vQnJpY2ssIHN0cmluZyBfbmFtZSwgdWludDY0IF9hMSwgdWludDY0IF9hMiwgdWludDY0IF9hMywgdWludDY0IF9zMSwgdWludDY0IF9zMiwgdWludDY0IF9zMykgZXh0ZXJuYWw7Cn0KCmNvbnRyYWN0IEV0aGVyZW1vblBheW1lbnQgaXMgRXRoZXJlbW9uRW51bSwgQmFzaWNBY2Nlc3NDb250cm9sLCBTYWZlTWF0aCB7CiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgU1RBVF9DT1VOVCA9IDY7CiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgU1RBVF9NQVggPSAzMjsKICAgIHVpbnQ4IGNvbnN0YW50IHB1YmxpYyBHRU4wX05PID0gMjQ7CiAgICAKICAgIHN0cnVjdCBNb25zdGVyQ2xhc3NBY2MgewogICAgICAgIHVpbnQzMiBjbGFzc0lkOwogICAgICAgIHVpbnQyNTYgcHJpY2U7CiAgICAgICAgdWludDI1NiByZXR1cm5QcmljZTsKICAgICAgICB1aW50MzIgdG90YWw7CiAgICAgICAgYm9vbCBjYXRjaGFibGU7CiAgICB9CgogICAgc3RydWN0IE1vbnN0ZXJPYmpBY2MgewogICAgICAgIHVpbnQ2NCBtb25zdGVySWQ7CiAgICAgICAgdWludDMyIGNsYXNzSWQ7CiAgICAgICAgYWRkcmVzcyB0cmFpbmVyOwogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIHVpbnQzMiBleHA7CiAgICAgICAgdWludDMyIGNyZWF0ZUluZGV4OwogICAgICAgIHVpbnQzMiBsYXN0Q2xhaW1JbmRleDsKICAgICAgICB1aW50IGNyZWF0ZVRpbWU7CiAgICB9CiAgICAKICAgIC8vIGxpbmtlZCBzbWFydCBjb250cmFjdAogICAgYWRkcmVzcyBwdWJsaWMgZGF0YUNvbnRyYWN0OwogICAgYWRkcmVzcyBwdWJsaWMgYmF0dGxlQ29udHJhY3Q7CiAgICBhZGRyZXNzIHB1YmxpYyB0b2tlbkNvbnRyYWN0OwogICAgCiAgICBhZGRyZXNzIHByaXZhdGUgbGFzdEh1bnRlciA9IGFkZHJlc3MoMHgwKTsKICAgIAogICAgLy8gY29uZmlnCiAgICB1aW50IHB1YmxpYyBicmlja1ByaWNlID0gMiAqIDEwICoqIDg7IC8vIDIgdG9rZW5zCiAgICB1aW50IHB1YmxpYyB0b2tlblByaWNlID0gMC4wMDQgZXRoZXIgLyAxMCAqKiA4OwogICAgdWludCBwdWJsaWMgbWF4RGV4U2l6ZSA9IDUwMDsKICAgIAogICAgLy8gZXZlbnQKICAgIGV2ZW50IEV2ZW50Q2F0Y2hNb25zdGVyKGFkZHJlc3MgaW5kZXhlZCB0cmFpbmVyLCB1aW50NjQgb2JqSWQpOwogICAgCiAgICAvLyBtb2RpZmllcgogICAgbW9kaWZpZXIgcmVxdWlyZURhdGFDb250cmFjdCB7CiAgICAgICAgcmVxdWlyZShkYXRhQ29udHJhY3QgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsgICAgICAgIAogICAgfQogICAgCiAgICBtb2RpZmllciByZXF1aXJlQmF0dGxlQ29udHJhY3QgewogICAgICAgIHJlcXVpcmUoYmF0dGxlQ29udHJhY3QgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciByZXF1aXJlVG9rZW5Db250cmFjdCB7CiAgICAgICAgcmVxdWlyZSh0b2tlbkNvbnRyYWN0ICE9IGFkZHJlc3MoMCkpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIEV0aGVyZW1vblBheW1lbnQoYWRkcmVzcyBfZGF0YUNvbnRyYWN0LCBhZGRyZXNzIF9iYXR0bGVDb250cmFjdCwgYWRkcmVzcyBfdG9rZW5Db250cmFjdCkgcHVibGljIHsKICAgICAgICBkYXRhQ29udHJhY3QgPSBfZGF0YUNvbnRyYWN0OwogICAgICAgIGJhdHRsZUNvbnRyYWN0ID0gX2JhdHRsZUNvbnRyYWN0OwogICAgICAgIHRva2VuQ29udHJhY3QgPSBfdG9rZW5Db250cmFjdDsKICAgIH0KICAgIAogICAgLy8gaGVscGVyCiAgICBmdW5jdGlvbiBnZXRSYW5kb20odWludDggbWF4UmFuLCB1aW50OCBpbmRleCwgYWRkcmVzcyBwcmlBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCkgewogICAgICAgIHVpbnQyNTYgZ2VuTnVtID0gdWludDI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSArIHVpbnQyNTYocHJpQWRkcmVzcyk7CiAgICAgICAgZm9yICh1aW50OCBpID0gMDsgaSA8IGluZGV4ICYmIGkgPCA2OyBpICsrKSB7CiAgICAgICAgICAgIGdlbk51bSAvPSAyNTY7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1aW50OChnZW5OdW0gJSBtYXhSYW4pOwogICAgfQogICAgCiAgICAvLyBhZG1pbgogICAgZnVuY3Rpb24gd2l0aGRyYXdUb2tlbihhZGRyZXNzIF9zZW5kVG8sIHVpbnQgX2Ftb3VudCkgb25seU1vZGVyYXRvcnMgcmVxdWlyZVRva2VuQ29udHJhY3QgZXh0ZXJuYWwgewogICAgICAgIEVSQzIwSW50ZXJmYWNlIHRva2VuID0gRVJDMjBJbnRlcmZhY2UodG9rZW5Db250cmFjdCk7CiAgICAgICAgaWYgKF9hbW91bnQgPiB0b2tlbi5iYWxhbmNlT2YoYWRkcmVzcyh0aGlzKSkpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIHRva2VuLnRyYW5zZmVyKF9zZW5kVG8sIF9hbW91bnQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRDb250cmFjdChhZGRyZXNzIF9kYXRhQ29udHJhY3QsIGFkZHJlc3MgX2JhdHRsZUNvbnRyYWN0LCBhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBvbmx5TW9kZXJhdG9ycyBleHRlcm5hbCB7CiAgICAgICAgZGF0YUNvbnRyYWN0ID0gX2RhdGFDb250cmFjdDsKICAgICAgICBiYXR0bGVDb250cmFjdCA9IF9iYXR0bGVDb250cmFjdDsKICAgICAgICB0b2tlbkNvbnRyYWN0ID0gX3Rva2VuQ29udHJhY3Q7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldENvbmZpZyh1aW50IF9icmlja1ByaWNlLCB1aW50IF90b2tlblByaWNlLCB1aW50IF9tYXhEZXhTaXplKSBvbmx5TW9kZXJhdG9ycyBleHRlcm5hbCB7CiAgICAgICAgYnJpY2tQcmljZSA9IF9icmlja1ByaWNlOwogICAgICAgIHRva2VuUHJpY2UgPSBfdG9rZW5QcmljZTsKICAgICAgICBtYXhEZXhTaXplID0gX21heERleFNpemU7CiAgICB9CiAgICAKICAgIC8vIGJhdHRsZQogICAgZnVuY3Rpb24gZ2l2ZUJhdHRsZUJvbnVzKGFkZHJlc3MgX3RyYWluZXIsIHVpbnQgX2Ftb3VudCkgaXNBY3RpdmUgcmVxdWlyZUJhdHRsZUNvbnRyYWN0IHJlcXVpcmVUb2tlbkNvbnRyYWN0IHB1YmxpYyB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYmF0dGxlQ29udHJhY3QpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIEVSQzIwSW50ZXJmYWNlIHRva2VuID0gRVJDMjBJbnRlcmZhY2UodG9rZW5Db250cmFjdCk7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoX3RyYWluZXIsIF9hbW91bnQpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVDYXN0bGUoYWRkcmVzcyBfdHJhaW5lciwgdWludCBfdG9rZW5zLCBzdHJpbmcgX25hbWUsIHVpbnQ2NCBfYTEsIHVpbnQ2NCBfYTIsIHVpbnQ2NCBfYTMsIHVpbnQ2NCBfczEsIHVpbnQ2NCBfczIsIHVpbnQ2NCBfczMpIGlzQWN0aXZlIHJlcXVpcmVCYXR0bGVDb250cmFjdCByZXF1aXJlVG9rZW5Db250cmFjdCBwdWJsaWMgcmV0dXJucyh1aW50KXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSB0b2tlbkNvbnRyYWN0KQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICBCYXR0bGVJbnRlcmZhY2UgYmF0dGxlID0gQmF0dGxlSW50ZXJmYWNlKGJhdHRsZUNvbnRyYWN0KTsKICAgICAgICBiYXR0bGUuY3JlYXRlQ2FzdGxlV2l0aFRva2VuKF90cmFpbmVyLCB1aW50MzIoX3Rva2Vucy9icmlja1ByaWNlKSwgX25hbWUsIF9hMSwgX2EyLCBfYTMsIF9zMSwgX3MyLCBfczMpOwogICAgICAgIHJldHVybiBfdG9rZW5zOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjYXRjaE1vbnN0ZXIoYWRkcmVzcyBfdHJhaW5lciwgdWludCBfdG9rZW5zLCB1aW50MzIgX2NsYXNzSWQsIHN0cmluZyBfbmFtZSkgaXNBY3RpdmUgcmVxdWlyZURhdGFDb250cmFjdCByZXF1aXJlVG9rZW5Db250cmFjdCBwdWJsaWMgcmV0dXJucyh1aW50KXsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSB0b2tlbkNvbnRyYWN0KQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICAKICAgICAgICBFdGhlcmVtb25EYXRhQmFzZSBkYXRhID0gRXRoZXJlbW9uRGF0YUJhc2UoZGF0YUNvbnRyYWN0KTsKICAgICAgICBNb25zdGVyQ2xhc3NBY2MgbWVtb3J5IGNsYXNzOwogICAgICAgIChjbGFzcy5jbGFzc0lkLCBjbGFzcy5wcmljZSwgY2xhc3MucmV0dXJuUHJpY2UsIGNsYXNzLnRvdGFsLCBjbGFzcy5jYXRjaGFibGUpID0gZGF0YS5nZXRNb25zdGVyQ2xhc3MoX2NsYXNzSWQpOwogICAgICAgIAogICAgICAgIGlmIChjbGFzcy5jbGFzc0lkID09IDAgfHwgY2xhc3MuY2F0Y2hhYmxlID09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBjYW4gbm90IGtlZXAgdG9vIG11Y2ggZXRoZXJlbW9uIAogICAgICAgIGlmIChkYXRhLmdldE1vbnN0ZXJEZXhTaXplKF90cmFpbmVyKSA+IG1heERleFNpemUpCiAgICAgICAgICAgIHJldmVydCgpOwoKICAgICAgICB1aW50IHJlcXVpcmVkVG9rZW4gPSBjbGFzcy5wcmljZS90b2tlblByaWNlOwogICAgICAgIGlmIChfdG9rZW5zIDwgcmVxdWlyZWRUb2tlbikKICAgICAgICAgICAgcmV2ZXJ0KCk7CgogICAgICAgIC8vIGFkZCBtb25zdGVyCiAgICAgICAgdWludDY0IG9iaklkID0gZGF0YS5hZGRNb25zdGVyT2JqKF9jbGFzc0lkLCBfdHJhaW5lciwgX25hbWUpOwogICAgICAgIC8vIGdlbmVyYXRlIGJhc2Ugc3RhdCBmb3IgdGhlIHByZXZpb3VzIG9uZQogICAgICAgIGZvciAodWludCBpPTA7IGkgPCBTVEFUX0NPVU5UOyBpKz0gMSkgewogICAgICAgICAgICB1aW50OCB2YWx1ZSA9IGdldFJhbmRvbShTVEFUX01BWCwgdWludDgoaSksIGxhc3RIdW50ZXIpICsgZGF0YS5nZXRFbGVtZW50SW5BcnJheVR5cGUoQXJyYXlUeXBlLlNUQVRfU1RBUlQsIHVpbnQ2NChfY2xhc3NJZCksIGkpOwogICAgICAgICAgICBkYXRhLmFkZEVsZW1lbnRUb0FycmF5VHlwZShBcnJheVR5cGUuU1RBVF9CQVNFLCBvYmpJZCwgdmFsdWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBsYXN0SHVudGVyID0gX3RyYWluZXI7CiAgICAgICAgRXZlbnRDYXRjaE1vbnN0ZXIoX3RyYWluZXIsIG9iaklkKTsKICAgICAgICByZXR1cm4gcmVxdWlyZWRUb2tlbjsKICAgIH0KICAgIAogICAgLyoKICAgIGZ1bmN0aW9uIHBheVNlcnZpY2UoYWRkcmVzcyBfdHJhaW5lciwgdWludCBfdG9rZW5zLCB1aW50MzIgX3R5cGUsIHN0cmluZyBfdGV4dCwgdWludDY0IF9wYXJhbTEsIHVpbnQ2NCBfcGFyYW0yLCB1aW50NjQgX3BhcmFtMykgcHVibGljIHJldHVybnModWludCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IHRva2VuQ29udHJhY3QpCiAgICAgICAgICAgIHJldmVydCgpOwogICAgfSovCn0='.
	

]
