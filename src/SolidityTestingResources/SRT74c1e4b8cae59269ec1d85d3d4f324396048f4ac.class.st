Class {
	#name : #SRT74c1e4b8cae59269ec1d85d3d4f324396048f4ac,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT74c1e4b8cae59269ec1d85d3d4f324396048f4ac >> base64 [
	^ 'LyoqCiAqIEF1dGhvcjogTmljayBKb2huc29uIChhcmFjaG5pZCBhdCBub3Rkb3QubmV0KQogKiBDb3B5cmlnaHQgMjAxNjsgbGljZW5zZWQgQ0MtQlktU0EuCiAqIAogKiBCZWVyQ29pbiBpcyBhIG5ldyBjcnlwdG9jdXJyZW5jeSBpbnRlbmRlZCB0byBlbmNhcHN1bGF0ZSBhbmQgcmVjb3JkIHRoZQogKiBjb25jZXB0IG9mICJJIG93ZSB5b3UgYSBiZWVyIi4gRGlkIHNvbWVvbmUgYW5zd2VyIGEgZGlmZmljdWx0IHF1ZXN0aW9uIHlvdQogKiBoYWQ/IFNlbmQgdGhlbSBhIEJlZXJDb2luLiBEaWQgdGhleSBoZWxwIHlvdSBjYXJyeSBzb21ldGhpbmcgaGVhdnk/IFNlbmQKICogdGhlbSBhIEJlZXJDb2luLiBTb21lb25lIGJ1eSB5b3UgYSBiZWVyPyBTZW5kIHRoZW0gYSBCZWVyQ29pbi4KICogCiAqIFVubGlrZSB0cmFkaXRpb25hbCBjdXJyZW5jeSwgYW55b25lIGNhbiBpc3N1ZSBCZWVyQ29pbiBzaW1wbHkgYnkgc2VuZGluZyBpdAogKiB0byBzb21lb25lIGVsc2UuIEEgcGVyc29uJ3MgQmVlckNvaW4gaXMgb25seSBhcyB2YWx1YWJsZSBhcyB0aGUgcmVjaXBpZW50J3MKICogYmVsaWVmIHRoYXQgdGhleSdyZSBnb29kIGZvciB0aGUgYmVlciwgc2hvdWxkIGl0IGV2ZXIgYmUgcmVkZWVtZWQ7IGEgYmVlcgogKiBvd2VkIHRvIHlvdSBieSBWaXRhbGlrIEJ1dGVyaW4gaXMgcHJvYmFibHkgd29ydGggbW9yZSB0aGFuIGEgYmVlciBvd2VkIHRvIHlvdQogKiBieSB0aGUgREFPIGhhY2tlciAoYnV0IHlvdXIgb3BpbmlvbnMgbWF5IGRpZmZlciBvbiB0aGF0IHBvaW50KS4KICogCiAqIEJlZXJDb2luIGlzIGltcGxlbWVudGVkIGFzIGFuIEVSQzIwIGNvbXBhdGlibGUgdG9rZW4sIHdpdGggYSBmZXcgZXh0ZW5zaW9ucy4KICogUmVndWxhciBFUkMyMCB0cmFuc2ZlcnMgd2lsbCBjcmVhdGUgb3IgcmVzb2x2ZSBvYmxpZ2F0aW9ucyBiZXR3ZWVuIHRoZSB0d28KICogcGFydGllczsgdGhleSB3aWxsIG5ldmVyIHRyYW5zZmVyIHRoaXJkLXBhcnR5IEJlZXJDb2lucy4gQWRkaXRpb25hbCBtZXRob2RzCiAqIGFyZSBwcm92aWRlZCB0byBhbGxvdyB5b3UgdHJhbnNmZXIgYmVlcnMgc29tZW9uZSBvd2VzIHlvdSB0byBhIHRoaXJkIHBhcnR5OwogKiBpZiBTYXRvc2hpIE5ha2Ftb3RvIG93ZXMgeW91IGEgYmVlciwgeW91IGNhbiB0cmFuc2ZlciB0aGF0IG9ibGlnYXRpb24gdG8geW91cgogKiBmcmllbmQgd2hvIGp1c3QgYm91Z2h0IHlvdSBvbmUgZG93biBhdCB0aGUgcHViLiBNZXRob2RzIGFyZSBhbHNvIHByb3ZpZGVkIGZvcgogKiBkZXRlcm1pbmluZyB0aGUgdG90YWwgbnVtYmVyIG9mIGJlZXJzIGEgcGVyc29uIG93ZXMsIHRvIGhlbHAgZGV0ZXJtaW5lIGlmCiAqIHRoZXkncmUgZ29vZCBmb3IgaXQsIGFuZCBmb3IgZ2V0dGluZyBhIGxpc3Qgb2YgYWNjb3VudHMgdGhhdCBvd2Ugc29tZW9uZSBhCiAqIGJlZXIuCiAqIAogKiBCZWVyQ29pbiBtYXkgY29uZnVzZSBzb21lIHdhbGxldHMsIHN1Y2ggYXMgTWlzdCwgdGhhdCBleHBlY3QgeW91IGNhbiBvbmx5CiAqIHNlbmQgY3VycmVuY3kgdXAgdG8geW91ciBjdXJyZW50IHRvdGFsIGJhbGFuY2U7IHNpbmNlIEJlZXJDb2luIG9wZXJhdGVzIGFzCiAqIGluZGl2aWR1YWwgSU9VcywgdGhhdCByZXN0cmljdGlvbiBkb2Vzbid0IGFwcGx5LiBBcyBhIHJlc3VsdCwgeW91IHdpbGwKICogc29tZXRpbWVzIG5lZWQgdG8gY2FsbCB0aGUgJ3RyYW5zZmVyJyBmdW5jdGlvbiBvbiB0aGUgY29udHJhY3QgaXRzZWxmCiAqIGluc3RlYWQgb2YgdXNpbmcgdGhlIHdhbGxldCdzIGJ1aWx0IGluIHRva2VuIHN1cHBvcnQuCiAqIAogKiBJZiBhbnlvbmUgZmluZHMgYSBidWcgaW4gdGhlIGNvbnRyYWN0LCBJJ2xsIGJ1eSB5b3UgYSBiZWVyLiBJZiB5b3UgZmluZCBhIGJ1ZwogKiB5b3UgY2FuIGV4cGxvaXQgdG8gYWRqdXN0IGJhbGFuY2VzIHdpdGhvdXQgdXNlcnMnIGNvbnNlbnQsIEknbGwgYnV5IHlvdSB0d28KICogKG9yIG1vcmUpLgogKiAKICogSWYgeW91IGZlZWwgb2JsaWdlZCB0byBtZSBmb3IgY3JlYXRpbmcgdGhpcywgc2VuZCBtZSBhID8gYXQKICogMHg1ZkM4QTYxZTA5N2MxMThjRTQzRDIwMGIzYzRkY2Y3MjZDZjc4M2E5LiBEb24ndCBkbyBpdCB1bmxlc3MgeW91IG1lYW4gaXQ7CiAqIGlmIHdlIG1lZXQgSSdsbCBzdXJlbHkgcmVkZWVtIGl0LgogKi8KY29udHJhY3QgQmVlckNvaW4gewogICAgdXNpbmcgSXRtYXAgZm9yIEl0bWFwLkFkZHJlc3NVaW50TWFwOwogICAgCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwoKICAgIHN0cnVjdCBVc2VyQWNjb3VudCB7CiAgICAgICAgYm9vbCBleGlzdHM7CiAgICAgICAgSXRtYXAuQWRkcmVzc1VpbnRNYXAgZGVidG9yczsgLy8gUGVvcGxlIHdobyBvd2UgeW91IGEgYmVlcgogICAgICAgIG1hcHBpbmcoYWRkcmVzcz0+dWludCkgYWxsb3dhbmNlczsKICAgICAgICB1aW50IG1heENyZWRpdDsgLy8gTW9zdCBiZWVycyBhbnkgaW5kaXZpZHVhbCBtYXkgb3dlIHlvdQogICAgICAgIHVpbnQgYmVlcnNPd2VkOyAvLyBCZWVycyBvd2VkIGJ5IHRoaXMgcGVyc29uCiAgICAgICAgdWludCBiZWVyc093aW5nOyAvLyBCZWVycyBvd2VkIHRvIHRoaXMgcGVyc29uCiAgICB9CiAgICB1aW50IGJlZXJzT3dpbmc7CiAgICB1aW50IGRlZmF1bHRNYXhDcmVkaXQ7CiAgICAKICAgIGZ1bmN0aW9uKCkgewogICAgICAgIHRocm93OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBCZWVyQ29pbih1aW50IF9kZWZhdWx0TWF4Q3JlZGl0KSB7CiAgICAgICAgZGVmYXVsdE1heENyZWRpdCA9IF9kZWZhdWx0TWF4Q3JlZGl0OwogICAgfQogICAgCiAgICBtYXBwaW5nKGFkZHJlc3M9PlVzZXJBY2NvdW50KSBhY2NvdW50czsKCiAgICBmdW5jdGlvbiBtYXhpbXVtQ3JlZGl0KGFkZHJlc3Mgb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZihhY2NvdW50c1tvd25lcl0uZXhpc3RzKSB7CiAgICAgICAgICAgIHJldHVybiBhY2NvdW50c1tvd25lcl0ubWF4Q3JlZGl0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0TWF4Q3JlZGl0OwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNYXhpbXVtQ3JlZGl0KHVpbnQgY3JlZGl0KSB7CiAgICAgICAgLy82NDBrIG91Z2h0IHRvIGJlIGVub3VnaCBmb3IgYW55b25lCiAgICAgICAgaWYoY3JlZGl0ID4gNjU1MzYwKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlmKCFhY2NvdW50c1ttc2cuc2VuZGVyXS5leGlzdHMpCiAgICAgICAgICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmV4aXN0cyA9IHRydWU7CiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0ubWF4Q3JlZGl0ID0gY3JlZGl0OwogICAgfQogICAgCiAgICBmdW5jdGlvbiBudW1EZWJ0b3JzKGFkZHJlc3Mgb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbb3duZXJdLmRlYnRvcnMuc2l6ZSgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkZWJ0b3IoYWRkcmVzcyBvd25lciwgdWludCBpZHgpIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbb3duZXJdLmRlYnRvcnMuaW5kZXgoaWR4KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVidG9ycyhhZGRyZXNzIG93bmVyKSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzW10pIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbb3duZXJdLmRlYnRvcnMua2V5czsKICAgIH0KCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KSB7CiAgICAgICAgcmV0dXJuIGJlZXJzT3dpbmc7ICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIG93bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbb3duZXJdLmJlZXJzT3dpbmc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIG93bmVyLCBhZGRyZXNzIGRlYnRvcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW293bmVyXS5kZWJ0b3JzLmdldChkZWJ0b3IpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0b3RhbERlYnQoYWRkcmVzcyBvd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW293bmVyXS5iZWVyc093ZWQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJldHVybiBkb1RyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihhY2NvdW50c1tmcm9tXS5hbGxvd2FuY2VzW21zZy5zZW5kZXJdID49IHZhbHVlICYmIGRvVHJhbnNmZXIoZnJvbSwgdG8sIHZhbHVlKSkgewogICAgICAgICAgICBhY2NvdW50c1tmcm9tXS5hbGxvd2FuY2VzW21zZy5zZW5kZXJdIC09IHZhbHVlOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkb1RyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmKGZyb20gPT0gdG8pCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgCiAgICAgICAgaWYoIWFjY291bnRzW3RvXS5leGlzdHMpIHsKICAgICAgICAgICAgYWNjb3VudHNbdG9dLmV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgIGFjY291bnRzW3RvXS5tYXhDcmVkaXQgPSBkZWZhdWx0TWF4Q3JlZGl0OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBEb24ndCBhbGxvdyB0cmFuc2ZlcnMgdGhhdCB3b3VsZCBleGNlZWQgdGhlIHJlY2lwaWVudCdzIGNyZWRpdCBsaW1pdC4KICAgICAgICBpZih2YWx1ZSA+IGFjY291bnRzW3RvXS5tYXhDcmVkaXQgKyBhY2NvdW50c1tmcm9tXS5kZWJ0b3JzLmdldCh0bykpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAKICAgICAgICBUcmFuc2Zlcihmcm9tLCB0bywgdmFsdWUpOwoKICAgICAgICB2YWx1ZSAtPSByZWR1Y2VEZWJ0KHRvLCBmcm9tLCB2YWx1ZSk7CiAgICAgICAgY3JlYXRlRGVidChmcm9tLCB0bywgdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gVHJhbnNmZXJzIGJlZXJzIG93ZWQgdG8geW91IGJ5IGBkZWJ0b3JgIHRvIGB0b2AuCiAgICBmdW5jdGlvbiB0cmFuc2Zlck90aGVyKGFkZHJlc3MgdG8sIGFkZHJlc3MgZGVidG9yLCB1aW50IHZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGRvVHJhbnNmZXJPdGhlcihtc2cuc2VuZGVyLCB0bywgZGVidG9yLCB2YWx1ZSk7CiAgICB9CgogICAgLy8gQWxsb3dzIGEgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgZGVidCBvd2VkIHRvIHlvdSBieSBgZGVidG9yYCB0byBgdG9gLiAgICAKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3RoZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgYWRkcmVzcyBkZWJ0b3IsIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihhY2NvdW50c1tmcm9tXS5hbGxvd2FuY2VzW21zZy5zZW5kZXJdID49IHZhbHVlICYmIGRvVHJhbnNmZXJPdGhlcihmcm9tLCB0bywgZGVidG9yLCB2YWx1ZSkpIHsKICAgICAgICAgICAgYWNjb3VudHNbZnJvbV0uYWxsb3dhbmNlc1ttc2cuc2VuZGVyXSAtPSB2YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZG9UcmFuc2Zlck90aGVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgYWRkcmVzcyBkZWJ0b3IsIHVpbnQgdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihmcm9tID09IHRvIHx8IHRvID09IGRlYnRvcikKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAKICAgICAgICBpZighYWNjb3VudHNbdG9dLmV4aXN0cykgewogICAgICAgICAgICBhY2NvdW50c1t0b10uZXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgYWNjb3VudHNbdG9dLm1heENyZWRpdCA9IGRlZmF1bHRNYXhDcmVkaXQ7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKHRyYW5zZmVyRGVidChmcm9tLCB0bywgZGVidG9yLCB2YWx1ZSkpIHsKICAgICAgICAgICAgVHJhbnNmZXIoZnJvbSwgdG8sIHZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gQ3JlYXRlcyBkZWJ0IG93ZWQgYnkgYGRlYnRvcmAgdG8gYGNyZWRpdG9yYCBvZiBhbW91bnQgYHZhbHVlYC4KICAgIC8vIFJldHVybnMgZmFsc2Ugd2l0aG91dCBtYWtpbmcgY2hhbmdlcyBpZiB0aGlzIHdvdWxkIGV4Y2VlZCBgY3JlZGl0b3JgJ3MKICAgIC8vIGNyZWRpdCBsaW1pdC4KICAgIGZ1bmN0aW9uIGNyZWF0ZURlYnQoYWRkcmVzcyBkZWJ0b3IsIGFkZHJlc3MgY3JlZGl0b3IsIHVpbnQgdmFsdWUpIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZih2YWx1ZSA9PSAwKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAKICAgICAgICBpZih2YWx1ZSA+IGFjY291bnRzW2NyZWRpdG9yXS5tYXhDcmVkaXQpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgYWNjb3VudHNbY3JlZGl0b3JdLmRlYnRvcnMuc2V0KAogICAgICAgICAgICBkZWJ0b3IsIGFjY291bnRzW2NyZWRpdG9yXS5kZWJ0b3JzLmdldChkZWJ0b3IpICsgdmFsdWUpOwogICAgICAgIGFjY291bnRzW2RlYnRvcl0uYmVlcnNPd2VkICs9IHZhbHVlOwogICAgICAgIGFjY291bnRzW2NyZWRpdG9yXS5iZWVyc093aW5nICs9IHZhbHVlOwogICAgICAgIGJlZXJzT3dpbmcgKz0gdmFsdWU7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIFJlZHVjZXMgZGVidCBvd2VkIGJ5IGBkZWJ0b3JgIHRvIGBjcmVkaXRvcmAgYnkgYHZhbHVlYCBvciB0aGUgdG90YWwgYW1vdW50LAogICAgLy8gd2hpY2hldmVyIGlzIGxlc3MuIFJldHVybnMgdGhlIGFtb3VudCBvZiBkZWJ0IGVyYXNlZC4KICAgIGZ1bmN0aW9uIHJlZHVjZURlYnQoYWRkcmVzcyBkZWJ0b3IsIGFkZHJlc3MgY3JlZGl0b3IsIHVpbnQgdmFsdWUpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB2YXIgb3dlZCA9IGFjY291bnRzW2NyZWRpdG9yXS5kZWJ0b3JzLmdldChkZWJ0b3IpOwogICAgICAgIGlmKHZhbHVlID49IG93ZWQpIHsKICAgICAgICAgICAgdmFsdWUgPSBvd2VkOwogICAgICAgICAgICAKICAgICAgICAgICAgYWNjb3VudHNbY3JlZGl0b3JdLmRlYnRvcnMucmVtb3ZlKGRlYnRvcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWNjb3VudHNbY3JlZGl0b3JdLmRlYnRvcnMuc2V0KGRlYnRvciwgb3dlZCAtIHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYWNjb3VudHNbZGVidG9yXS5iZWVyc093ZWQgLT0gdmFsdWU7CiAgICAgICAgYWNjb3VudHNbY3JlZGl0b3JdLmJlZXJzT3dpbmcgLT0gdmFsdWU7CiAgICAgICAgYmVlcnNPd2luZyAtPSB2YWx1ZTsKICAgICAgICAKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAKICAgIC8vIFRyYW5zZmVycyBkZWJ0IG93ZWQgYnkgYGRlYnRvcmAgZnJvbSBgb2xkQ3JlZGl0b3JgIHRvIGBuZXdDcmVkaXRvcmAuCiAgICAvLyBSZXR1cm5zIGZhbHNlIHdpdGhvdXQgbWFraW5nIGFueSBjaGFuZ2VzIGlmIGB2YWx1ZWAgZXhjZWVkcyB0aGUgYW1vdW50CiAgICAvLyBvd2VkIG9yIGlmIHRoZSB0cmFuc2ZlciB3b3VsZCBleGNlZWQgYG5ld0NyZWRpdG9yYCdzIGNyZWRpdCBsaW1pdC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRGVidChhZGRyZXNzIG9sZENyZWRpdG9yLCBhZGRyZXNzIG5ld0NyZWRpdG9yLCBhZGRyZXNzIGRlYnRvciwgdWludCB2YWx1ZSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHZhciBvd2VkT2xkID0gYWNjb3VudHNbb2xkQ3JlZGl0b3JdLmRlYnRvcnMuZ2V0KGRlYnRvcik7CiAgICAgICAgaWYob3dlZE9sZCA8IHZhbHVlKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgCiAgICAgICAgdmFyIG93ZWROZXcgPSBhY2NvdW50c1tuZXdDcmVkaXRvcl0uZGVidG9ycy5nZXQoZGVidG9yKTsKICAgICAgICBpZih2YWx1ZSArIG93ZWROZXcgPiBhY2NvdW50c1tuZXdDcmVkaXRvcl0ubWF4Q3JlZGl0KQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgaWYob3dlZE9sZCA9PSB2YWx1ZSkgewogICAgICAgICAgICBhY2NvdW50c1tvbGRDcmVkaXRvcl0uZGVidG9ycy5yZW1vdmUoZGVidG9yKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhY2NvdW50c1tvbGRDcmVkaXRvcl0uZGVidG9ycy5zZXQoZGVidG9yLCBvd2VkT2xkIC0gdmFsdWUpOwogICAgICAgIH0KICAgICAgICBhY2NvdW50c1tvbGRDcmVkaXRvcl0uYmVlcnNPd2luZyAtPSB2YWx1ZTsKICAgICAgICAKICAgICAgICBhY2NvdW50c1tuZXdDcmVkaXRvcl0uZGVidG9ycy5zZXQoZGVidG9yLCBvd2VkTmV3ICsgdmFsdWUpOwogICAgICAgIGFjY291bnRzW25ld0NyZWRpdG9yXS5iZWVyc093aW5nICs9IHZhbHVlOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uYWxsb3dhbmNlc1tzcGVuZGVyXSA9IHZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIHZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhY2NvdW50c1tvd25lcl0uYWxsb3dhbmNlc1tzcGVuZGVyXTsKICAgIH0KfQoKCmxpYnJhcnkgSXRtYXAgewogICAgc3RydWN0IEFkZHJlc3NVaW50TWFwRW50cnkgewogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgdWludCBpZHg7CiAgICB9CiAgICAKICAgIHN0cnVjdCBBZGRyZXNzVWludE1hcCB7CiAgICAgICAgbWFwcGluZyhhZGRyZXNzPT5BZGRyZXNzVWludE1hcEVudHJ5KSBlbnRyaWVzOwogICAgICAgIGFkZHJlc3NbXSBrZXlzOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXQoQWRkcmVzc1VpbnRNYXAgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIGssIHVpbnQgdikgaW50ZXJuYWwgewogICAgICAgIHZhciBlbnRyeSA9IHNlbGYuZW50cmllc1trXTsKICAgICAgICBpZihlbnRyeS5pZHggPT0gMCkgewogICAgICAgICAgICBlbnRyeS5pZHggPSBzZWxmLmtleXMubGVuZ3RoICsgMTsKICAgICAgICAgICAgc2VsZi5rZXlzLnB1c2goayk7CiAgICAgICAgfQogICAgICAgIGVudHJ5LnZhbHVlID0gdjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0KEFkZHJlc3NVaW50TWFwIHN0b3JhZ2Ugc2VsZiwgYWRkcmVzcyBrKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHNlbGYuZW50cmllc1trXS52YWx1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY29udGFpbnMoQWRkcmVzc1VpbnRNYXAgc3RvcmFnZSBzZWxmLCBhZGRyZXNzIGspIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5lbnRyaWVzW2tdLmlkeCA+IDA7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZShBZGRyZXNzVWludE1hcCBzdG9yYWdlIHNlbGYsIGFkZHJlc3MgaykgaW50ZXJuYWwgewogICAgICAgIHZhciBlbnRyeSA9IHNlbGYuZW50cmllc1trXTsKICAgICAgICBpZihlbnRyeS5pZHggPiAwKSB7CiAgICAgICAgICAgIHZhciBvdGhlcmtleSA9IHNlbGYua2V5c1tzZWxmLmtleXMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHNlbGYua2V5c1tlbnRyeS5pZHggLSAxXSA9IG90aGVya2V5OwogICAgICAgICAgICBzZWxmLmtleXMubGVuZ3RoIC09IDE7CiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmVudHJpZXNbb3RoZXJrZXldLmlkeCA9IGVudHJ5LmlkeDsKICAgICAgICAgICAgZW50cnkuaWR4ID0gMDsKICAgICAgICAgICAgZW50cnkudmFsdWUgPSAwOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2l6ZShBZGRyZXNzVWludE1hcCBzdG9yYWdlIHNlbGYpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gc2VsZi5rZXlzLmxlbmd0aDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaW5kZXgoQWRkcmVzc1VpbnRNYXAgc3RvcmFnZSBzZWxmLCB1aW50IGlkeCkgaW50ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiBzZWxmLmtleXNbaWR4XTsKICAgIH0KfQ=='.
	

]
