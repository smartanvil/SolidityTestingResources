Class {
	#name : #SRT438301bbb5941f2d6c6db74ee90474cad8692087,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT438301bbb5941f2d6c6db74ee90474cad8692087 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIE93bmFibGUKICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGggTGlicmFyeQogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkM3MjEgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9laXBzL2lzc3Vlcy83MjEKICovCmNvbnRyYWN0IEVSQzcyMSB7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF90b2tlbklkKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX2FwcHJvdmVkLCB1aW50MjU2IF90b2tlbklkKTsKCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKTsKICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiB0YWtlT3duZXJzaGlwKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKfQoKLyoqCiAqIEB0aXRsZSBFUkM3MjFUb2tlbgogKiBHZW5lcmljIGltcGxlbWVudGF0aW9uIGZvciB0aGUgcmVxdWlyZWQgZnVuY3Rpb25hbGl0eSBvZiB0aGUgRVJDNzIxIHN0YW5kYXJkCiAqLwpjb250cmFjdCBFUkM3MjFUb2tlbiBpcyBFUkM3MjEgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgdWludDI1NiBwcml2YXRlIHRvdGFsVG9rZW5zOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gb3duZXIKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5Pd25lcjsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGFwcHJvdmVkIGFkZHJlc3MKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgdG9rZW5BcHByb3ZhbHM7CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBsaXN0IG9mIG93bmVkIHRva2VuIElEcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSBwcml2YXRlIG93bmVkVG9rZW5zOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gaW5kZXggb2YgdGhlIG93bmVyIHRva2VucyBsaXN0CiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIHByaXZhdGUgb3duZWRUb2tlbnNJbmRleDsKCiAgLyoqCiAgKiBAZGV2IEd1YXJhbnRlZXMgbXNnLnNlbmRlciBpcyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byB2YWxpZGF0ZSBpdHMgb3duZXJzaGlwIGJlbG9uZ3MgdG8gbXNnLnNlbmRlcgogICovCiAgbW9kaWZpZXIgb25seU93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBtc2cuc2VuZGVyKTsKICAgIF87CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBzdG9yZWQgYnkgdGhlIGNvbnRyYWN0CiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFRva2VuczsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSBiYWxhbmNlIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBvd25lZFRva2Vuc1tfb3duZXJdLmxlbmd0aDsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBsaXN0IG9mIHRva2VucyBvd25lZCBieSBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBxdWVyeSB0aGUgdG9rZW5zIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTZbXSByZXByZXNlbnRpbmcgdGhlIGxpc3Qgb2YgdG9rZW5zIG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gdG9rZW5zT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSkgewogICAgcmV0dXJuIG93bmVkVG9rZW5zW19vd25lcl07CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgb3duZXIgb2YgdGhlIHNwZWNpZmllZCB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBvd25lciBvZgogICogQHJldHVybiBvd25lciBhZGRyZXNzIGN1cnJlbnRseSBtYXJrZWQgYXMgdGhlIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICovCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICBhZGRyZXNzIG93bmVyID0gdG9rZW5Pd25lcltfdG9rZW5JZF07CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgcmV0dXJuIG93bmVyOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXRzIHRoZSBhcHByb3ZlZCBhZGRyZXNzIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBhZGRyZXNzIGN1cnJlbnRseSBhcHByb3ZlZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVycyB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQgdG8gYW5vdGhlciBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgQXBwcm92ZXMgYW5vdGhlciBhZGRyZXNzIHRvIGNsYWltIGZvciB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90byBhZGRyZXNzIHRvIGJlIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBhcHByb3ZlZAogICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBhZGRyZXNzIG93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICBpZiAoYXBwcm92ZWRGb3IoX3Rva2VuSWQpICE9IDAgfHwgX3RvICE9IDApIHsKICAgICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gX3RvOwogICAgICBBcHByb3ZhbChvd25lciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgQ2xhaW1zIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIGJlaW5nIGNsYWltZWQgYnkgdGhlIG1zZy5zZW5kZXIKICAqLwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNBcHByb3ZlZEZvcihtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgY2xlYXJBcHByb3ZhbEFuZFRyYW5zZmVyKG93bmVyT2YoX3Rva2VuSWQpLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgTWludCB0b2tlbiBmdW5jdGlvbgogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgb3duIHRoZSBtaW50ZWQgdG9rZW4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBtaW50ZWQgYnkgdGhlIG1zZy5zZW5kZXIKICAqLwogIGZ1bmN0aW9uIF9taW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIGFkZFRva2VuKF90bywgX3Rva2VuSWQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBCdXJucyBhIHNwZWNpZmljIHRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gYmVpbmcgYnVybmVkIGJ5IHRoZSBtc2cuc2VuZGVyCiAgKi8KICBmdW5jdGlvbiBfYnVybih1aW50MjU2IF90b2tlbklkKSBvbmx5T3duZXJPZihfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgaWYgKGFwcHJvdmVkRm9yKF90b2tlbklkKSAhPSAwKSB7CiAgICAgIGNsZWFyQXBwcm92YWwobXNnLnNlbmRlciwgX3Rva2VuSWQpOwogICAgfQogICAgcmVtb3ZlVG9rZW4obXNnLnNlbmRlciwgX3Rva2VuSWQpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRlbGxzIHdoZXRoZXIgdGhlIG1zZy5zZW5kZXIgaXMgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRCBvciBub3QKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBwcml2YXRlIHNvIGl0IGNhbiBiZSBleHRlbmRlZCBpbiBmdXJ0aGVyIGltcGxlbWVudGF0aW9ucyBsaWtlIHRoZSBvcGVyYXRhYmxlIEVSQzcyMQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0aGUgb3duZXIgdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBhcHByb3ZhbCBvZgogICAqIEByZXR1cm4gYm9vbCB3aGV0aGVyIHRoZSBtc2cuc2VuZGVyIGlzIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQgb3Igbm90CiAgICovCiAgZnVuY3Rpb24gaXNBcHByb3ZlZEZvcihhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gYXBwcm92ZWRGb3IoX3Rva2VuSWQpID09IF9vd25lcjsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBjbGVhciBjdXJyZW50IGFwcHJvdmFsIGFuZCB0cmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0aGUgdG9rZW4gdG8KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICovCiAgZnVuY3Rpb24gY2xlYXJBcHByb3ZhbEFuZFRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IG93bmVyT2YoX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX2Zyb20pOwoKICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKICAgIHJlbW92ZVRva2VuKF9mcm9tLCBfdG9rZW5JZCk7CiAgICBhZGRUb2tlbihfdG8sIF90b2tlbklkKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBjbGVhciBjdXJyZW50IGFwcHJvdmFsIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICovCiAgZnVuY3Rpb24gY2xlYXJBcHByb3ZhbChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9vd25lcik7CiAgICB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF0gPSAwOwogICAgQXBwcm92YWwoX293bmVyLCAwLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gYWRkIGEgdG9rZW4gSUQgdG8gdGhlIGxpc3Qgb2YgYSBnaXZlbiBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgcmVwcmVzZW50aW5nIHRoZSBuZXcgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgYWRkZWQgdG8gdGhlIHRva2VucyBsaXN0IG9mIHRoZSBnaXZlbiBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBhZGRUb2tlbihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKHRva2VuT3duZXJbX3Rva2VuSWRdID09IGFkZHJlc3MoMCkpOwogICAgdG9rZW5Pd25lcltfdG9rZW5JZF0gPSBfdG87CiAgICB1aW50MjU2IGxlbmd0aCA9IGJhbGFuY2VPZihfdG8pOwogICAgb3duZWRUb2tlbnNbX3RvXS5wdXNoKF90b2tlbklkKTsKICAgIG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gbGVuZ3RoOwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5hZGQoMSk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gcmVtb3ZlIGEgdG9rZW4gSUQgZnJvbSB0aGUgbGlzdCBvZiBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgcHJldmlvdXMgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gcmVtb3ZlVG9rZW4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKCiAgICB1aW50MjU2IHRva2VuSW5kZXggPSBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXTsKICAgIHVpbnQyNTYgbGFzdFRva2VuSW5kZXggPSBiYWxhbmNlT2YoX2Zyb20pLnN1YigxKTsKICAgIHVpbnQyNTYgbGFzdFRva2VuID0gb3duZWRUb2tlbnNbX2Zyb21dW2xhc3RUb2tlbkluZGV4XTsKCiAgICB0b2tlbk93bmVyW190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bdG9rZW5JbmRleF0gPSBsYXN0VG9rZW47CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bbGFzdFRva2VuSW5kZXhdID0gMDsKICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgaGFuZGxlIHNpbmdsZS1lbGVtZW50IGFycmF5cy4gSW4gdGhhdCBjYXNlLCBib3RoIHRva2VuSW5kZXggYW5kIGxhc3RUb2tlbkluZGV4IGFyZSBnb2luZyB0bwogICAgLy8gYmUgemVyby4gVGhlbiB3ZSBjYW4gbWFrZSBzdXJlIHRoYXQgd2Ugd2lsbCByZW1vdmUgX3Rva2VuSWQgZnJvbSB0aGUgb3duZWRUb2tlbnMgbGlzdCBzaW5jZSB3ZSBhcmUgZmlyc3Qgc3dhcHBpbmcKICAgIC8vIHRoZSBsYXN0VG9rZW4gdG8gdGhlIGZpcnN0IHBvc2l0aW9uLCBhbmQgdGhlbiBkcm9wcGluZyB0aGUgZWxlbWVudCBwbGFjZWQgaW4gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlIGxpc3QKCiAgICBvd25lZFRva2Vuc1tfZnJvbV0ubGVuZ3RoLS07CiAgICBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc0luZGV4W2xhc3RUb2tlbl0gPSB0b2tlbkluZGV4OwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5zdWIoMSk7CiAgfQp9CgovKioKICogQHRpdGxlIENyeXB0b1RoaW5nV2l0aERlc2NlbmRhbnRzCiAqLwpjb250cmFjdCBDcnlwdG9UaGluZ1dpdGhEZXNjZW5kYW50cyBpcyBPd25hYmxlLCBFUkM3MjFUb2tlbiB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIHN0cnVjdCBUaGluZyB7CiAgICB1aW50MjU2IGlkOwogICAgdWludDI1NiBwYXJlbnRJZDsKICAgIHVpbnQyNTYgcHVyY2hhc2VQcmljZTsKICAgIHVpbnQyNTYgZ3Jvd3RoUmF0ZTsKICAgIHVpbnQyNTYgZGl2aWRlbmRSYXRlOwogICAgdWludDI1NiBkaXZpZGVuZHNQYWlkOwogICAgdWludDI1NiBsYXN0QWN0aW9uOwogICAgYnl0ZXMzMiBkaXNwbGF5TmFtZTsKICB9CgogIHVpbnQyNTYgcHVibGljIGdhbWVDb3N0ID0gMTAgZXRoZXI7CiAgdWludDI1NiBwdWJsaWMgZmxvb3JQcmljZSA9IDEwIGZpbm5leTsKICB1aW50MjU2IHB1YmxpYyBzdGFuZGFyZEdyb3d0aFJhdGUgPSAxNTA7CiAgdWludDI1NiBwdWJsaWMgbnVtVGhpbmdzOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gVGhpbmcpIHB1YmxpYyB0aGluZ3M7CiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2W10pIHB1YmxpYyBkZXNjZW5kYW50c09mVGhpbmc7CgogIHN0cmluZyBjb25zdGFudCBwdWJsaWMgTkFNRSA9ICdTdGFyIENhcmQnOwogIHN0cmluZyBjb25zdGFudCBwdWJsaWMgU1lNQk9MID0gJ0NBUkQnOwoKICBldmVudCBEaXZpZGVuZFBhaWQoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE92ZXJwYXltZW50UmVmdW5kZWQodWludDI1NiBhbW91bnRFeHBlY3RlZCwgdWludDI1NiBleGNlc3NGdW5kcyk7CiAgZXZlbnQgVGhpbmdCb3JuKHVpbnQyNTYgaW5kZXhlZCB0aGluZ0lkLCB1aW50MjU2IGluaXRpYWxQcmljZSk7CiAgZXZlbnQgVGhpbmdEZXN0cm95ZWQodWludDI1NiBpbmRleGVkIHRoaW5nSWQpOwogIGV2ZW50IFRoaW5nU29sZCgKICAgIHVpbnQyNTYgaW5kZXhlZCB0aGluZ0lkLAogICAgdWludDI1NiBvbGRQcmljZSwKICAgIHVpbnQyNTYgbmV3UHJpY2UsCiAgICBhZGRyZXNzIG9sZE93bmVyLAogICAgYWRkcmVzcyBuZXdPd25lcgogICk7CgogIGZ1bmN0aW9uICgpIHBheWFibGUgcHVibGljIHsKICAgIC8vIHNvbWVvbmUgc2VudCBhIGdpZnQhIHlheSEKICAgIG93bmVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIE5BTUU7CiAgfQoKICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gU1lNQk9MOwogIH0KCiAgZnVuY3Rpb24gYWRkVGhpbmcoCiAgICB1aW50MjU2IF9wYXJlbnRJZCwKICAgIHVpbnQyNTYgX3B1cmNoYXNlUHJpY2UsCiAgICB1aW50MjU2IF9ncm93dGhSYXRlLAogICAgdWludDI1NiBfZGl2aWRlbmRSYXRlLAogICAgYnl0ZXMzMiBfZGlzcGxheU5hbWUKICApIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAodWludDI1NiB0aGluZ0lkKSB7CiAgICB0aGluZ0lkID0gKytudW1UaGluZ3M7CiAgICB0aGluZ3NbdGhpbmdJZF0gPSBUaGluZyh7CiAgICAgIGlkOiB0aGluZ0lkLAogICAgICBwYXJlbnRJZDogX3BhcmVudElkLAogICAgICBwdXJjaGFzZVByaWNlOiBfcHVyY2hhc2VQcmljZSA9PSAwID8gZmxvb3JQcmljZSA6IF9wdXJjaGFzZVByaWNlLAogICAgICBncm93dGhSYXRlOiBfZ3Jvd3RoUmF0ZSA9PSAwID8gc3RhbmRhcmRHcm93dGhSYXRlIDogX2dyb3d0aFJhdGUsCiAgICAgIGRpdmlkZW5kUmF0ZTogX2RpdmlkZW5kUmF0ZSwKICAgICAgZGl2aWRlbmRzUGFpZDogMCwKICAgICAgbGFzdEFjdGlvbjogYmxvY2sudGltZXN0YW1wLAogICAgICBkaXNwbGF5TmFtZTogX2Rpc3BsYXlOYW1lCiAgICB9KTsKCiAgICBpZiAoX3BhcmVudElkICE9IDApIGRlc2NlbmRhbnRzT2ZUaGluZ1tfcGFyZW50SWRdLnB1c2godGhpbmdJZCk7CgogICAgX21pbnQobXNnLnNlbmRlciwgdGhpbmdJZCk7CiAgICBUaGluZ0Jvcm4odGhpbmdJZCwgdGhpbmdzW3RoaW5nSWRdLnB1cmNoYXNlUHJpY2UpOwogIH0KCiAgZnVuY3Rpb24gcHVyY2hhc2UodWludDI1NiBfdGhpbmdJZCkgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShfdGhpbmdJZCAhPSAwICYmIF90aGluZ0lkIDw9IG51bVRoaW5ncyk7CgogICAgYWRkcmVzcyBwcmV2aW91c093bmVyID0gb3duZXJPZihfdGhpbmdJZCk7CiAgICByZXF1aXJlKHByZXZpb3VzT3duZXIgIT0gbXNnLnNlbmRlcik7CgogICAgVGhpbmcgc3RvcmFnZSB0aGluZyA9IHRoaW5nc1tfdGhpbmdJZF07CiAgICB1aW50MjU2W10gc3RvcmFnZSBkZXNjZW5kYW50cyA9IGRlc2NlbmRhbnRzT2ZUaGluZ1tfdGhpbmdJZF07CgogICAgdWludDI1NiBjdXJyZW50UHJpY2UgPSBnZXRDdXJyZW50UHJpY2UoX3RoaW5nSWQpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gY3VycmVudFByaWNlKTsKICAgIGlmIChtc2cudmFsdWUgPiBjdXJyZW50UHJpY2UpIHsKICAgICAgT3ZlcnBheW1lbnRSZWZ1bmRlZChjdXJyZW50UHJpY2UsIG1zZy52YWx1ZS5zdWIoY3VycmVudFByaWNlKSk7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlLnN1YihjdXJyZW50UHJpY2UpKTsKICAgIH0KCiAgICBpZiAodGhpbmcuZGl2aWRlbmRSYXRlICE9IDAgJiYgKHRoaW5nLnBhcmVudElkICE9IDAgfHwgZGVzY2VuZGFudHMubGVuZ3RoID4gMCkpIHsKICAgICAgdWludDI1NiBudW1EaXZpZGVuZHMgPSB0aGluZy5wYXJlbnRJZCA9PSAwID8gZGVzY2VuZGFudHMubGVuZ3RoIDogZGVzY2VuZGFudHMubGVuZ3RoLmFkZCgxKTsKICAgICAgdWludDI1NiBkaXZpZGVuZFBlclJlY2lwaWVudCA9IGdldERpdmlkZW5kUGF5b3V0KAogICAgICAgIGN1cnJlbnRQcmljZSwKICAgICAgICB0aGluZy5kaXZpZGVuZFJhdGUsCiAgICAgICAgbnVtRGl2aWRlbmRzCiAgICAgICk7CgogICAgICBhZGRyZXNzIGRpdmlkZW5kUmVjaXBpZW50ID0gYWRkcmVzcyh0aGlzKTsKICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbnVtRGl2aWRlbmRzOyBpKyspIHsKICAgICAgICBkaXZpZGVuZFJlY2lwaWVudCA9IG93bmVyT2YoCiAgICAgICAgICBpID09IGRlc2NlbmRhbnRzLmxlbmd0aCA/IHRoaW5nLnBhcmVudElkIDogZGVzY2VuZGFudHNbaV0KICAgICAgICApOwogICAgICAgIGRpdmlkZW5kUmVjaXBpZW50LnRyYW5zZmVyKGRpdmlkZW5kUGVyUmVjaXBpZW50KTsKICAgICAgICBEaXZpZGVuZFBhaWQoZGl2aWRlbmRSZWNpcGllbnQsIGRpdmlkZW5kUGVyUmVjaXBpZW50KTsKICAgICAgfQoKICAgICAgdGhpbmcuZGl2aWRlbmRzUGFpZCA9IHRoaW5nLmRpdmlkZW5kc1BhaWQuYWRkKGRpdmlkZW5kUGVyUmVjaXBpZW50Lm11bChudW1EaXZpZGVuZHMpKTsKICAgIH0KCiAgICB1aW50MjU2IHByZXZpb3VzSG9sZGVyU2hhcmUgPSBjdXJyZW50UHJpY2Uuc3ViKAogICAgICBkaXZpZGVuZFBlclJlY2lwaWVudC5tdWwobnVtRGl2aWRlbmRzKQogICAgKTsKCiAgICB1aW50MjU2IGZlZSA9IHByZXZpb3VzSG9sZGVyU2hhcmUuZGl2KDIwKTsKICAgIG93bmVyLnRyYW5zZmVyKGZlZSk7CgogICAgcHJldmlvdXNPd25lci50cmFuc2ZlcihwcmV2aW91c0hvbGRlclNoYXJlLnN1YihmZWUpKTsKICAgIHRoaW5nLnB1cmNoYXNlUHJpY2UgPSB0aGluZy5wdXJjaGFzZVByaWNlLm11bCh0aGluZy5ncm93dGhSYXRlKS5kaXYoMTAwKTsKICAgIHRoaW5nLmxhc3RBY3Rpb24gPSBibG9jay50aW1lc3RhbXA7CgogICAgY2xlYXJBcHByb3ZhbEFuZFRyYW5zZmVyKHByZXZpb3VzT3duZXIsIG1zZy5zZW5kZXIsIF90aGluZ0lkKTsKICAgIFRoaW5nU29sZChfdGhpbmdJZCwgY3VycmVudFByaWNlLCB0aGluZy5wdXJjaGFzZVByaWNlLCBwcmV2aW91c093bmVyLCBtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHB1cmNoYXNlR2FtZSgpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBvd25lcik7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSBnYW1lQ29zdCk7CiAgICBvd25lci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gc2V0R2FtZUNvc3QodWludDI1NiBuZXdDb3N0KSBwdWJsaWMgb25seU93bmVyIHsKICAgIGdhbWVDb3N0ID0gbmV3Q29zdDsKICB9CgogIGZ1bmN0aW9uIGdldERlc2NlbmRhbnRzT2ZUaGluZyh1aW50MjU2IF90aGluZ0lkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2W10pIHsKICAgIHJldHVybiBkZXNjZW5kYW50c09mVGhpbmdbX3RoaW5nSWRdOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKAogICAgdWludDI1NiBfdGhpbmdJZAogICkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBjdXJyZW50UHJpY2UpIHsKICAgIHJlcXVpcmUoX3RoaW5nSWQgIT0gMCAmJiBfdGhpbmdJZCA8PSBudW1UaGluZ3MpOwogICAgVGhpbmcgc3RvcmFnZSB0aGluZyA9IHRoaW5nc1tfdGhpbmdJZF07CiAgICBjdXJyZW50UHJpY2UgPSBnZXRQdXJjaGFzZVByaWNlKHRoaW5nLnB1cmNoYXNlUHJpY2UsIHRoaW5nLmdyb3d0aFJhdGUpOwogIH0KCiAgZnVuY3Rpb24gZ2V0UHVyY2hhc2VQcmljZSgKICAgIHVpbnQyNTYgX2N1cnJlbnRQcmljZSwKICAgIHVpbnQyNTYgX3ByaWNlSW5jcmVhc2UKICApIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NiBjdXJyZW50UHJpY2UpIHsKICAgIGN1cnJlbnRQcmljZSA9IF9jdXJyZW50UHJpY2UubXVsKF9wcmljZUluY3JlYXNlKS5kaXYoMTAwKTsKICB9CgogIGZ1bmN0aW9uIGdldERpdmlkZW5kUGF5b3V0KAogICAgdWludDI1NiBfcHVyY2hhc2VQcmljZSwKICAgIHVpbnQyNTYgX2RpdmlkZW5kUmF0ZSwKICAgIHVpbnQyNTYgX251bURpdmlkZW5kcwogICkgcHVibGljIHB1cmUgcmV0dXJucyAodWludDI1NiBkaXZpZGVuZCkgewogICAgZGl2aWRlbmQgPSBfcHVyY2hhc2VQcmljZS5tdWwoCiAgICAgIF9kaXZpZGVuZFJhdGUKICAgICkuZGl2KAogICAgICAxMDAKICAgICkuc3ViKAogICAgICBfcHVyY2hhc2VQcmljZQogICAgKS5kaXYoCiAgICAgIF9udW1EaXZpZGVuZHMKICAgICk7CiAgfQp9'.
	

]
