Class {
	#name : #SRTaede31213c15d2273c1871e716fc8e762d176564,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaede31213c15d2273c1871e716fc8e762d176564 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7Ci8vICoqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gW0Fzc2lzdGl2ZSBSZWFsaXR5IEFSWCBFUkMyMCB0b2tlbiAmIGNyb3dkc2FsZSBjb250cmFjdCB3LzEwJSBkZXYgYWxsb2NdCi8vIFtodHRwczovL2Fyb25saW5lLmlvL2ljb2luZm9dCi8vIFt2My4yIGZpbmFsIHJlbGVhc2VkIDA1LzA5LzE3IGZpbmFsIG1hc3RlckFSWHNhbGUzMm1haW5uZXQuc29sXQovLyBbQWRhcHRlZCBmcm9tIEV0aGVyZXVtIHN0YW5kYXJkIGNyb3dkc2FsZSBjb250cmFjdF0KLy8gW0NvbnRhY3QgPGEgaHJlZj0iL2Nkbi1jZ2kvbC9lbWFpbC1wcm90ZWN0aW9uIiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjM1NDY0MTU0NTM1Mzc1NTQ0NzVhNWI1OTVjNWI1MDFiNWM1YSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvYT4gZm9yIGFueSBxdWVyaWVzXQovLyBbSm9pbiB1cyBpbiBjaGFuZ2luZyB0aGUgd29ybGRdCi8vIFthcm9ubGluZS5pb10KLy8gKiotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBFUkMgVG9rZW4gU3RhbmRhcmQgIzIwIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBTZWN1cml0eSByZXZpZXdzIGNvbXBsZXRlZCAwNS8wOS8xNyBbcGFzc2VkIE9LXQovLyBGdW5jdGlvbmFsIHJldmlld3MgY29tcGxldGVkIDA1LzA5LzE3IFtwYXNzZWQgT0tdCi8vIEZpbmFsIGNvZGUgcmV2aXNpb24gYW5kIHJlZ3Jlc3Npb24gdGVzdCBjeWNsZSBjb21wbGV0ZSAwNS8wOS8xNyBbcGFzc2VkXQovLyBodHRwczovL2dpdGh1Yi5jb20vYXNzaXN0aXZlcmVhbGl0eS9pY28vYmxvYi9tYXN0ZXIvMy4yY3Jvd2RzYWxldGVzdHNBUlhtYWlubmV0LnR4dAovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnRyYWN0IG93bmVkIHsgLy8gc2VjdXJpdHkgcmV2aWV3ZWQgMDUvMDkvMTcKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwoKICAgIGZ1bmN0aW9uIG93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Cgpjb250cmFjdCBTYWZlTWF0aCB7IC8vIHNlY3VyaXR5IHJldmlld2VkIDA1LzA5LzE3CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBzYWZlQXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZURpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgc2FmZUFzc2VydChiID4gMCk7CiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIHNhZmVBc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgc2FmZUFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBzYWZlQXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVBc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsKICAgIGlmICghYXNzZXJ0aW9uKSByZXZlcnQoKTsKICB9Cn0KCmNvbnRyYWN0IEVSQzIwSW50ZXJmYWNlIGlzIG93bmVkLCBTYWZlTWF0aCB7IC8vIHNlY3VyaXR5IHJldmlld2VkIDA1LzA5LzE3CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5Ub3RhbFN1cHBseSk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBfc2VuZGVyLCB1aW50MjU2IF9ldGgsIHVpbnQyNTYgX0FSWCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9yZWZ1bmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBBUlhDcm93ZHNhbGUgaXMgRVJDMjBJbnRlcmZhY2UgeyAvLyBzZWN1cml0eSByZXZpZXdlZCAwNS8wOS8xNwogICAgLy8gZGVwbG95bWVudCB2YXJpYWJsZXMgZm9yIGR5bmFtaWMgc3VwcGx5IHRva2VuCiAgICBzdHJpbmcgIHB1YmxpYyBjb25zdGFudCBzdGFuZGFyZCAgICAgICAgICAgICAgPSAiQVJYIjsKICAgIHN0cmluZyAgcHVibGljIGNvbnN0YW50IG5hbWUgICAgICAgICAgICAgICAgICA9ICJBUlgiOwogICAgc3RyaW5nICBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgICAgICAgICAgICAgID0gIkFSWCI7CiAgICB1aW50OCAgIHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyAgICAgICAgICAgICAgPSAxODsKICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5ICAgICAgICAgICAgICAgICAgICAgICAgICA9IDA7CgogICAgLy8gbXVsdGktc2lnIGFkZHJlc3NlcyBhbmQgcHJpY2UgdmFyaWFibGUKICAgIGFkZHJlc3MgcHVibGljIGFkbWluID0gb3duZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkbWluIGFkZHJlc3MKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5TXVsdGlTaWc7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlbmVmaWNpYXJ5TXVsdGlTaWcgKGZvdW5kZXIgZ3JvdXApIG11bHRpLXNpZyB3YWxsZXQgYWNjb3VudAogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRhdGlvbkZ1bmRNdWx0aXNpZzsgICAgICAgICAgICAgICAgICAgICAgLy8gZm91bmRhdGlvbkZ1bmRNdWx0aXNpZyBtdWx0aS1zaWcgd2FsbGV0IGFkZHJlc3MgLSBBc3Npc3RpdmUgUmVhbGl0eSBmb3VuZGF0aW9uIGZ1bmQKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc1BlckV0aFByaWNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaWNlVmFyIGUuZy4gMiwwMDAgdG9rZW5zIHBlciBFdGgKCiAgICAvLyB1aW50MjU2IHZhbHVlcyBmb3IgbWluLG1heCxjYXBzLHRyYWNraW5nCiAgICB1aW50MjU2IHB1YmxpYyBhbW91bnRSYWlzZWRJbldlaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3RhbCBhbW91bnQgcmFpc2VkIGluIFdlaSBlLmcuIDIxIDAwMCAwMDAgMDAwIDAwMCAwMDAgMDAwID0gMjEgRXRoCiAgICB1aW50MjU2IHB1YmxpYyBmdW5kaW5nTWF4SW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmdW5kaW5nIG1heCBpbiBXZWkgZS5nLiAyMSAwMDAgMDAwIDAwMCAwMDAgMDAwIDAwMCA9IDIxIEV0aAogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ01pbkluV2VpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnVuZGluZyBtaW4gaW4gV2VpIGUuZy4gMTEgMDAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgPSAxMSBFdGgKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdNYXhJbkV0aDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZ1bmRpbmcgbWF4IGluIEV0aCAoYXBwcm94KSBlLmcuIDIxIEV0aAogICAgdWludDI1NiBwdWJsaWMgZnVuZGluZ01pbkluRXRoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnVuZGluZyBtaW4gaW4gRXRoIChhcHByb3gpIGUuZy4gMTEgRXRoCiAgICB1aW50MjU2IHB1YmxpYyByZW1haW5pbmdDYXBJbldlaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbW91bnQgb2YgY2FwIHJlbWFpbmluZyB0byByYWlzZSBpbiBXZWkgZS5nLiAxIDIwMCAwMDAgMDAwIDAwMCAwMDAgMDAwID0gMS4yIEV0aCByZW1haW5pbmcKICAgIHVpbnQyNTYgcHVibGljIHJlbWFpbmluZ0NhcEluRXRoOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFtb3VudCBvZiBjYXAgcmVtYWluaW5nIHRvIHJhaXNlIGluIEV0aCAoYXBwcm94KSBlLmcuIDEKICAgIHVpbnQyNTYgcHVibGljIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpOyAgICAgICAgICAgICAgIC8vIDEwJSBhZGRpdGlvbmFsIHRva2VucyBnZW5lcmF0ZWQgYW5kIHNlbnQgdG8gZm91bmRhdGlvbkZ1bmRNdWx0aXNpZy9Bc3Npc3RpdmUgUmVhbGl0eSBmb3VuZGF0aW9uLCAxOCBkZWNpbWFscwoKICAgIC8vIGxvb3AgY29udHJvbCwgSUNPIHN0YXJ0dXAgYW5kIGxpbWl0ZXJzCiAgICBzdHJpbmcgIHB1YmxpYyBDdXJyZW50U3RhdHVzICAgICAgICAgICAgICAgICAgPSAiIjsgICAgICAgICAvLyBjdXJyZW50IGNyb3dkc2FsZSBzdGF0dXMKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyb3dkc2FsZSBzdGFydCBibG9jayMKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyb3dkc2FsZSBlbmQgYmxvY2sjCiAgICBib29sICAgIHB1YmxpYyBpc0Nyb3dkU2FsZUZpbmlzaGVkICAgICAgICAgICAgPSBmYWxzZTsgICAgICAvLyBib29sZWFuIGZvciBjcm93ZHNhbGUgY29tcGxldGVkIG9yIG5vdAogICAgYm9vbCAgICBwdWJsaWMgaXNDcm93ZFNhbGVTZXR1cCAgICAgICAgICAgICAgID0gZmFsc2U7ICAgICAgLy8gYm9vbGVhbiBmb3IgY3Jvd2RzYWxlIHNldHVwCiAgICBib29sICAgIHB1YmxpYyBoYWx0ZWQgICAgICAgICAgICAgICAgICAgICAgICAgPSBmYWxzZTsgICAgICAvLyBib29sZWFuIGZvciBoYWx0ZWQgb3Igbm90CiAgICBib29sICAgIHB1YmxpYyBmb3VuZGVyVG9rZW5zQXZhaWxhYmxlICAgICAgICAgPSBmYWxzZTsgICAgICAvLyB2YXJpYWJsZSB0byBzZXQgZmFsc2UgYWZ0ZXIgZ2VuZXJhdGluZyBmb3VuZGVyVG9rZW5zCgogICAgLy8gYmFsYW5jZSBtYXBwaW5nIGFuZCB0cmFuc2ZlciBhbGxvd2FuY2UgYXJyYXkKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgZXZlbnQgQnV5KGFkZHJlc3MgaW5kZXhlZCBfc2VuZGVyLCB1aW50MjU2IF9ldGgsIHVpbnQyNTYgX0FSWCk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBSZWZ1bmQoYWRkcmVzcyBpbmRleGVkIF9yZWZ1bmRlciwgdWludDI1NiBfdmFsdWUpOwoKICAgIC8vIGRlZmF1bHQgZnVuY3Rpb24sIG1hcCBhZG1pbgogICAgZnVuY3Rpb24gQVJYQ3Jvd2RzYWxlKCkgb25seU93bmVyIHsKICAgICAgYWRtaW4gPSBtc2cuc2VuZGVyOwogICAgICBDdXJyZW50U3RhdHVzID0gIkNyb3dkc2FsZSBkZXBsb3llZCB0byBjaGFpbiI7CiAgICB9CgogICAgLy8gdG90YWwgbnVtYmVyIG9mIHRva2VucyBpc3N1ZWQgc28gZmFyLCBub3JtYWxpc2VkCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG9rZW5Ub3RhbFN1cHBseSkgewogICAgICAgIHRva2VuVG90YWxTdXBwbHkgPSBzYWZlRGl2KF90b3RhbFN1cHBseSwxIGV0aGVyKTsKICAgIH0KCiAgICAvLyBnZXQgdGhlIGFjY291bnQgYmFsYW5jZQogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICAvLyByZXR1cm5zIGFwcHJveGltYXRlIGNyb3dkc2FsZSBtYXggZnVuZGluZyBpbiBFdGgKICAgIGZ1bmN0aW9uIGZ1bmRpbmdNYXhJbkV0aCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgZnVuZGluZ01heGltdW1JbkV0aCkgewogICAgICBmdW5kaW5nTWF4aW11bUluRXRoID0gc2FmZURpdihmdW5kaW5nTWF4SW5XZWksMSBldGhlcik7CiAgICB9CgogICAgLy8gcmV0dXJucyBhcHByb3hpbWF0ZSBjcm93ZHNhbGUgbWluIGZ1bmRpbmcgaW4gRXRoCiAgICBmdW5jdGlvbiBmdW5kaW5nTWluSW5FdGgoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGZ1bmRpbmdNaW5pbXVtSW5FdGgpIHsKICAgICAgZnVuZGluZ01pbmltdW1JbkV0aCA9IHNhZmVEaXYoZnVuZGluZ01pbkluV2VpLDEgZXRoZXIpOwogICAgfQoKICAgIC8vIHJldHVybnMgYXBwcm94aW1hdGUgY3Jvd2RzYWxlIHByb2dyZXNzIChmdW5kcyByYWlzZWQpIGluIEV0aAogICAgZnVuY3Rpb24gYW1vdW50UmFpc2VkSW5FdGgoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGFtb3VudFJhaXNlZFNvRmFySW5FdGgpIHsKICAgICAgYW1vdW50UmFpc2VkU29GYXJJbkV0aCA9IHNhZmVEaXYoYW1vdW50UmFpc2VkSW5XZWksMSBldGhlcik7CiAgICB9CgogICAgLy8gcmV0dXJucyBhcHByb3hpbWF0ZSBjcm93ZHNhbGUgcmVtYWluaW5nIGNhcCAoaGFyZGNhcCkgaW4gRXRoCiAgICBmdW5jdGlvbiByZW1haW5pbmdDYXBJbkV0aCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nSGFyZENhcEluRXRoKSB7CiAgICAgIHJlbWFpbmluZ0hhcmRDYXBJbkV0aCA9IHNhZmVEaXYocmVtYWluaW5nQ2FwSW5XZWksMSBldGhlcik7CiAgICB9CgogICAgLy8gRVJDMjAgdG9rZW4gdHJhbnNmZXIgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoIShfdG8gPT0gMHgwKSk7CiAgICAgICAgaWYgKChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfYW1vdW50KQogICAgICAgICYmIChfYW1vdW50ID4gMCkKICAgICAgICAmJiAoKHNhZmVBZGQoYmFsYW5jZXNbX3RvXSxfYW1vdW50KSA+IGJhbGFuY2VzW190b10pKSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF9hbW91bnQpOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dLCBfYW1vdW50KTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBFUkMyMCB0b2tlbiB0cmFuc2ZlckZyb20gZnVuY3Rpb24KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZSghKF90byA9PSAweDApKTsKICAgICAgICBpZiAoKGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50KQogICAgICAgICYmIChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50KQogICAgICAgICYmIChfYW1vdW50ID4gMCkKICAgICAgICAmJiAoc2FmZUFkZChiYWxhbmNlc1tfdG9dLF9hbW91bnQpID4gYmFsYW5jZXNbX3RvXSkpIHsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0sIF9hbW91bnQpOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoKGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKSxfYW1vdW50KTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX2Ftb3VudCk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9hbW91bnQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEVSQzIwIGFsbG93IF9zcGVuZGVyIHRvIHdpdGhkcmF3LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIEVSQzIwIHJldHVybiBhbGxvd2FuY2UgZm9yIGdpdmVuIG93bmVyIHNwZW5kZXIgcGFpcgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8vIHNldHVwIHRoZSBDcm93ZFNhbGUgcGFyYW1ldGVycwogICAgZnVuY3Rpb24gU2V0dXBDcm93ZHNhbGUodWludDI1NiBfZnVuZGluZ1N0YXJ0QmxvY2ssIHVpbnQyNTYgX2Z1bmRpbmdFbmRCbG9jaykgb25seU93bmVyIHJldHVybnMgKGJ5dGVzMzIgcmVzcG9uc2UpIHsKICAgICAgICBpZiAoKG1zZy5zZW5kZXIgPT0gYWRtaW4pCiAgICAgICAgJiYgKCEoaXNDcm93ZFNhbGVTZXR1cCkpCiAgICAgICAgJiYgKCEoYmVuZWZpY2lhcnlNdWx0aVNpZyA+IDApKQogICAgICAgICYmICghKGZ1bmRpbmdNYXhJbldlaSA+IDApKSkgewogICAgICAgICAgICAvLyBtYWlubmV0IHZhbHVlcwogICAgICAgICAgICBiZW5lZmljaWFyeU11bHRpU2lnID0gMHhkOTMzMzNmOGNiNzY1Mzk3QTVEMGQwZTBiYTUzQTI4OTlCNDg1MTFmOwogICAgICAgICAgICBmb3VuZGF0aW9uRnVuZE11bHRpc2lnID0gMHg3MEEwYkUxYTVkOEE5RjM5YWZFRDUzNkVjN2I1NWQ4NzA2NzM3MWFBOwoKICAgICAgICAgICAgLy8gbWFpbm5ldCBmdW5kaW5nIHRhcmdldHMgd2l0aCAxOCBkZWNpbWFscwogICAgICAgICAgICBmdW5kaW5nTWF4SW5XZWkgPSA3MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsgLy83MCAwMDAgMDAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgPSA3MCwwMDAgRXRoIChoYXJkIGNhcCkgLSBjcm93ZHNhbGUgbm8gbG9uZ2VyIGFjY2VwdHMgRXRoIGFmdGVyIHRoaXMgdmFsdWUKICAgICAgICAgICAgZnVuZGluZ01pbkluV2VpID0gNzAwMDAwMDAwMDAwMDAwMDAwMDAwMDsgICAvLzcgMDAwIDAwMCAwMDAgMDAwIDAwMCAwMDAgMDAwID0gIDcsMDAwIEV0aCAoc29mdCBjYXApIC0gY3Jvd2RzYWxlIGlzIGNvbnNpZGVyZWQgc3VjY2VzcyBhZnRlciB0aGlzIHZhbHVlCgogICAgICAgICAgICAvLyB2YWx1ZSBvZiBBUlggdG9rZW4gZm9yIG1haW5uZXQuIGlmIGhhcmRjYXAgaXMgcmVhY2hlZCwgdGhpcyByZXN1bHRzIGluIDI4MCwwMDAsMDAwIEFSWCB0b2tlbnMgaW4gZ2VuZXJhbCBzdXBwbHkgKCsyOCwwMDAsMDAwIGluIHRoZSBmb3VuZGF0aW9uRnVuZE11bHRpc2lnIGZvciBhIHRvdGFsIHN1cHBseSBvZiAzMDgsMDAwLDAwMCkKICAgICAgICAgICAgdG9rZW5zUGVyRXRoUHJpY2UgPSA0MDAwOyAvLyA0LDAwMCB0b2tlbnMgcGVyIEV0aAoKICAgICAgICAgICAgLy8gdXBkYXRlIHZhbHVlcwogICAgICAgICAgICBmdW5kaW5nTWF4SW5FdGggPSBzYWZlRGl2KGZ1bmRpbmdNYXhJbldlaSwxIGV0aGVyKTsgLy9hcHByb3hpbWF0ZSB0byAxIEV0aCBkdWUgdG8gcmVzb2x1dGlvbiwgcHJvdmlkZWQgZm9yIGVhc2Uvdmlld2luZyBvbmx5CiAgICAgICAgICAgIGZ1bmRpbmdNaW5JbkV0aCA9IHNhZmVEaXYoZnVuZGluZ01pbkluV2VpLDEgZXRoZXIpOyAvL2FwcHJveGltYXRlIHRvIDEgRXRoIGR1ZSB0byByZXNvbHV0aW9uLCBwcm92aWRlZCBmb3IgZWFzZS92aWV3aW5nIG9ubHkKICAgICAgICAgICAgcmVtYWluaW5nQ2FwSW5XZWkgPSBmdW5kaW5nTWF4SW5XZWk7CiAgICAgICAgICAgIHJlbWFpbmluZ0NhcEluRXRoID0gc2FmZURpdihyZW1haW5pbmdDYXBJbldlaSwxIGV0aGVyKTsgLy9hcHByb3hpbWF0ZSB0byAxIEV0aCBkdWUgdG8gcmVzb2x1dGlvbiwgcHJvdmlkZWQgZm9yIGVhc2Uvdmlld2luZyBvbmx5CiAgICAgICAgICAgIGZ1bmRpbmdTdGFydEJsb2NrID0gX2Z1bmRpbmdTdGFydEJsb2NrOwogICAgICAgICAgICBmdW5kaW5nRW5kQmxvY2sgPSBfZnVuZGluZ0VuZEJsb2NrOwoKICAgICAgICAgICAgLy8gY29uZmlndXJlIGNyb3dkc2FsZQogICAgICAgICAgICBpc0Nyb3dkU2FsZVNldHVwID0gdHJ1ZTsKICAgICAgICAgICAgQ3VycmVudFN0YXR1cyA9ICJDcm93ZHNhbGUgaXMgc2V0dXAiOwogICAgICAgICAgICByZXR1cm4gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgICAgfSBlbHNlIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB7CiAgICAgICAgICAgIHJldHVybiAibm90IGF1dGhvcml6ZWQiOwogICAgICAgIH0gZWxzZSAgewogICAgICAgICAgICByZXR1cm4gImNhbXBhaWduIGNhbm5vdCBiZSBjaGFuZ2VkIjsKICAgICAgICB9CiAgICB9CgogICAgLy8gZGVmYXVsdCBwYXlhYmxlIGZ1bmN0aW9uIHdoZW4gc2VuZGluZyBldGhlciB0byB0aGlzIGNvbnRyYWN0CiAgICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgICAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPT0gMCk7CiAgICAgIEJ1eVRva2VucygpOwogICAgfQoKICAgIGZ1bmN0aW9uIEJ1eVRva2VucygpIHBheWFibGUgewogICAgICAvLyAwLiBjb25kaXRpb25zIChsZW5ndGgsIGNyb3dkc2FsZSBzZXR1cCwgemVybyBjaGVjaywgZXhjZWVkIGZ1bmRpbmcgY29udHJpYiBjaGVjaywgY29udHJhY3QgdmFsaWQgY2hlY2ssIHdpdGhpbiBmdW5kaW5nIGJsb2NrIHJhbmdlIGNoZWNrLCBiYWxhbmNlIG92ZXJmbG93IGNoZWNrIGV0YykKICAgICAgcmVxdWlyZSgoIShtc2cudmFsdWUgPT0gMCkpCiAgICAgICYmICghKGhhbHRlZCkpCiAgICAgICYmIChpc0Nyb3dkU2FsZVNldHVwKQogICAgICAmJiAoISgoc2FmZUFkZChhbW91bnRSYWlzZWRJbldlaSxtc2cudmFsdWUpKSA+IGZ1bmRpbmdNYXhJbldlaSkpCiAgICAgICYmIChibG9jay5udW1iZXIgPj0gZnVuZGluZ1N0YXJ0QmxvY2spCiAgICAgICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrKQogICAgICAmJiAoIShpc0Nyb3dkU2FsZUZpbmlzaGVkKSkpOwoKICAgICAgLy8gMS4gdmFycwogICAgICBhZGRyZXNzIHJlY2lwaWVudCA9IG1zZy5zZW5kZXI7IC8vIHRvIHNpbXBsaWZ5IHJlZnVuZGluZwogICAgICB1aW50MjU2IGFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgdWludDI1NiByZXdhcmRUcmFuc2ZlckFtb3VudCA9IDA7CgogICAgICAvLyAyLiBlZmZlY3RzCiAgICAgIGFtb3VudFJhaXNlZEluV2VpID0gc2FmZUFkZChhbW91bnRSYWlzZWRJbldlaSxhbW91bnQpOwogICAgICByZW1haW5pbmdDYXBJbldlaSA9IHNhZmVTdWIoZnVuZGluZ01heEluV2VpLGFtb3VudFJhaXNlZEluV2VpKTsKICAgICAgcmV3YXJkVHJhbnNmZXJBbW91bnQgPSBzYWZlTXVsKGFtb3VudCx0b2tlbnNQZXJFdGhQcmljZSk7CgogICAgICAvLyAzLiBpbnRlcmFjdGlvbgogICAgICBiYWxhbmNlc1tyZWNpcGllbnRdID0gc2FmZUFkZChiYWxhbmNlc1tyZWNpcGllbnRdLCByZXdhcmRUcmFuc2ZlckFtb3VudCk7CiAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCByZXdhcmRUcmFuc2ZlckFtb3VudCk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIHJlY2lwaWVudCwgcmV3YXJkVHJhbnNmZXJBbW91bnQpOwogICAgICBCdXkocmVjaXBpZW50LCBhbW91bnQsIHJld2FyZFRyYW5zZmVyQW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBBbGxvY2F0ZUZvdW5kZXJUb2tlbnMoKSBvbmx5T3duZXIgewogICAgICByZXF1aXJlKGlzQ3Jvd2RTYWxlRmluaXNoZWQgJiYgZm91bmRlclRva2Vuc0F2YWlsYWJsZSAmJiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPT0gMCkpOwoKICAgICAgLy8gY2FsY3VsYXRlIGFkZGl0aW9uYWwgMTAlIHRva2VucyB0byBhbGxvY2F0ZSBmb3IgZm91bmRhdGlvbiBkZXZlbG9wZXIgZGlzdHJpYnV0aW9ucwogICAgICBmb3VuZGF0aW9uRnVuZFRva2VuQ291bnRJbldlaSA9IHNhZmVNdWwoKHNhZmVEaXYoYW1vdW50UmFpc2VkSW5XZWksMTApKSwgdG9rZW5zUGVyRXRoUHJpY2UpOwoKICAgICAgLy8gZ2VuZXJhdGUgYW5kIHNlbmQgZm91bmRhdGlvbiBkZXZlbG9wZXIgdG9rZW4gZGlzdHJpYnV0aW9ucwogICAgICBiYWxhbmNlc1tmb3VuZGF0aW9uRnVuZE11bHRpc2lnXSA9IHNhZmVBZGQoYmFsYW5jZXNbZm91bmRhdGlvbkZ1bmRNdWx0aXNpZ10sIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKCiAgICAgIF90b3RhbFN1cHBseSA9IHNhZmVBZGQoX3RvdGFsU3VwcGx5LCBmb3VuZGF0aW9uRnVuZFRva2VuQ291bnRJbldlaSk7CiAgICAgIFRyYW5zZmVyKHRoaXMsIGZvdW5kYXRpb25GdW5kTXVsdGlzaWcsIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKICAgICAgQnV5KGZvdW5kYXRpb25GdW5kTXVsdGlzaWcsIDAsIGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpKTsKICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJlbmVmaWNpYXJ5TXVsdGlTaWdXaXRoZHJhdyh1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciB7CiAgICAgIHJlcXVpcmUoaXNDcm93ZFNhbGVGaW5pc2hlZCAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSk7CiAgICAgIGJlbmVmaWNpYXJ5TXVsdGlTaWcudHJhbnNmZXIoX2Ftb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tHb2FsUmVhY2hlZCgpIG9ubHlPd25lciByZXR1cm5zIChieXRlczMyIHJlc3BvbnNlKSB7IC8vIHJldHVybiBjcm93ZGZ1bmQgc3RhdHVzIHRvIG93bmVyIGZvciBlYWNoIHJlc3VsdCBjYXNlLCB1cGRhdGUgcHVibGljIGNvbnN0YW50CiAgICAgIHJlcXVpcmUgKCEoaGFsdGVkKSAmJiBpc0Nyb3dkU2FsZVNldHVwKTsKCiAgICAgIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWluSW5XZWkpICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrICYmIGJsb2NrLm51bWJlciA+PSBmdW5kaW5nU3RhcnRCbG9jaykpIHsgLy8gSUNPIGluIHByb2dyZXNzLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkluIHByb2dyZXNzIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgcmV0dXJuICJJbiBwcm9ncmVzcyAoRXRoIDwgU29mdGNhcCkiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGJsb2NrLm51bWJlciA8IGZ1bmRpbmdTdGFydEJsb2NrKSkgeyAvLyBJQ08gaGFzIG5vdCBzdGFydGVkCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkNyb3dkc2FsZSBpcyBzZXR1cCI7CiAgICAgICAgcmV0dXJuICJDcm93ZHNhbGUgaXMgc2V0dXAiOwogICAgICB9IGVsc2UgaWYgKChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykpIHsgLy8gSUNPIGVuZGVkLCB1bmRlciBzb2Z0Y2FwCiAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgIGlzQ3Jvd2RTYWxlRmluaXNoZWQgPSB0cnVlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiVW5zdWNjZXNzZnVsIChFdGggPCBTb2Z0Y2FwKSI7CiAgICAgICAgcmV0dXJuICJVbnN1Y2Nlc3NmdWwgKEV0aCA8IFNvZnRjYXApIjsKICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01heEluV2VpKSkgeyAvLyBJQ08gZW5kZWQsIGF0IGhhcmRjYXAhCiAgICAgICAgaWYgKGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpID09IDApIHsKICAgICAgICAgIGZvdW5kZXJUb2tlbnNBdmFpbGFibGUgPSB0cnVlOwogICAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBIYXJkY2FwKSEiOwogICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gSGFyZGNhcCkhIjsKICAgICAgICB9IGVsc2UgaWYgKGZvdW5kYXRpb25GdW5kVG9rZW5Db3VudEluV2VpID4gMCkgewogICAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICBDdXJyZW50U3RhdHVzID0gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBIYXJkY2FwKSEiOwogICAgICAgICAgcmV0dXJuICJTdWNjZXNzZnVsIChFdGggPj0gSGFyZGNhcCkhIjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoKGFtb3VudFJhaXNlZEluV2VpID49IGZ1bmRpbmdNaW5JbldlaSkgJiYgKGFtb3VudFJhaXNlZEluV2VpIDwgZnVuZGluZ01heEluV2VpKSAmJiAoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrKSkgeyAvLyBJQ08gZW5kZWQsIG92ZXIgc29mdGNhcCEKICAgICAgICBpZiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPT0gMCkgewogICAgICAgICAgZm91bmRlclRva2Vuc0F2YWlsYWJsZSA9IHRydWU7CiAgICAgICAgICBpc0Nyb3dkU2FsZUZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIH0gZWxzZSBpZiAoZm91bmRhdGlvbkZ1bmRUb2tlbkNvdW50SW5XZWkgPiAwKSB7CiAgICAgICAgICBmb3VuZGVyVG9rZW5zQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgICBpc0Nyb3dkU2FsZUZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiU3VjY2Vzc2Z1bCAoRXRoID49IFNvZnRjYXApISI7CiAgICAgICAgICByZXR1cm4gIlN1Y2Nlc3NmdWwgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICgoYW1vdW50UmFpc2VkSW5XZWkgPj0gZnVuZGluZ01pbkluV2VpKSAmJiAoYW1vdW50UmFpc2VkSW5XZWkgPCBmdW5kaW5nTWF4SW5XZWkpICYmIChibG9jay5udW1iZXIgPD0gZnVuZGluZ0VuZEJsb2NrKSkgeyAvLyBJQ08gaW4gcHJvZ3Jlc3MsIG92ZXIgc29mdGNhcCEKICAgICAgICBmb3VuZGVyVG9rZW5zQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgaXNDcm93ZFNhbGVGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgIEN1cnJlbnRTdGF0dXMgPSAiSW4gcHJvZ3Jlc3MgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICAgIHJldHVybiAiSW4gcHJvZ3Jlc3MgKEV0aCA+PSBTb2Z0Y2FwKSEiOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKCkgeyAvLyBhbnkgY29udHJpYnV0b3IgY2FuIGNhbGwgdGhpcyB0byBoYXZlIHRoZWlyIEV0aCByZXR1cm5lZCwgaWYgbm90IGhhbHRlZCwgc29mdCBjYXAgbm90IHJlYWNoZWQgYW5kIGRlYWRsaW5lIGV4cGlyZXMKICAgICAgcmVxdWlyZSAoIShoYWx0ZWQpCiAgICAgICYmIChhbW91bnRSYWlzZWRJbldlaSA8IGZ1bmRpbmdNaW5JbldlaSkKICAgICAgJiYgKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jaykKICAgICAgJiYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCkpOwoKICAgICAgdWludDI1NiBBUlhiYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgX3RvdGFsU3VwcGx5ID0gc2FmZVN1YihfdG90YWxTdXBwbHksIEFSWGJhbGFuY2UpOwogICAgICB1aW50MjU2IGV0aFZhbHVlID0gc2FmZURpdihBUlhiYWxhbmNlLCB0b2tlbnNQZXJFdGhQcmljZSk7CiAgICAgIGFtb3VudFJhaXNlZEluV2VpID0gc2FmZVN1YihhbW91bnRSYWlzZWRJbldlaSwgZXRoVmFsdWUpOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGV0aFZhbHVlKTsKICAgICAgQnVybihtc2cuc2VuZGVyLCBBUlhiYWxhbmNlKTsKICAgICAgUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBoYWx0KCkgb25seU93bmVyIHsgLy8gaGFsdCB0aGUgY3Jvd2RzYWxlCiAgICAgICAgaGFsdGVkID0gdHJ1ZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIkhhbHRlZCI7CiAgICB9CgogICAgZnVuY3Rpb24gdW5oYWx0KCkgb25seU93bmVyIHsgLy8gcmVzdW1lIHRoZSBjcm93ZHNhbGUKICAgICAgICBoYWx0ZWQgPSBmYWxzZTsKICAgICAgICBDdXJyZW50U3RhdHVzID0gIlVuaGFsdGVkIjsKICAgICAgICBjaGVja0dvYWxSZWFjaGVkKCk7CiAgICB9Cn0='.
	

]
