Class {
	#name : #SRT9da47a2b34f9707bc931fa31f0003a149f4aa92e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9da47a2b34f9707bc931fa31f0003a149f4aa92e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTIwLXRva2VuLXN0YW5kYXJkLm1kCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgRVJDMjBJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgdG9rZW5Pd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyB0b2tlbk93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHRva2VucykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludCB0b2tlbnMpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50IHRva2Vucyk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgdG9rZW5Pd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQgdG9rZW5zKTsKfQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIEVSQyBUb2tlbiBTdGFuZGFyZCAjMjIzIEludGVyZmFjZQovLyBodHRwczovL2dpdGh1Yi5jb20vRGV4YXJhbi9FUkMyMjMtdG9rZW4tc3RhbmRhcmQvdG9rZW4vRVJDMjIzL0VSQzIyM19pbnRlcmZhY2Uuc29sCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY29udHJhY3QgRVJDMjIzSW50ZXJmYWNlIHsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpOwp9CmNvbnRyYWN0IEVMVFRva2VuVHlwZSB7CiAgICB1aW50IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBiYWxhbmNlczsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgdGltZXZhdWx0OwogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSkgYWxsb3dlZDsKICAgIAogICAgLy8gVG9rZW4gcmVsZWFzZSBzd2l0Y2gKICAgIGJvb2wgcHVibGljIHJlbGVhc2VkOwogICAgCiAgICAvLyBUaGUgZGF0ZSBiZWZvcmUgdGhlIHJlbGVhc2UgbXVzdCBiZSBmaW5hbGl6ZWQgb3IgdXBncmFkZSBwYXRoIHdpbGwgYmUgZm9yY2VkCiAgICB1aW50IHB1YmxpYyByZWxlYXNlRmluYWxpemF0aW9uRGF0ZTsKfQpjb250cmFjdCBDb250cmFjdFJlY2VpdmVyIHsKICAgIHN0cnVjdCBUS04gewogICAgICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgYnl0ZXMgZGF0YTsKICAgICAgICBieXRlczQgc2lnOwogICAgfQoKICAgIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcHVyZSB7CiAgICAgICAgVEtOIG1lbW9yeSB0a247CiAgICAgICAgdGtuLnNlbmRlciA9IF9mcm9tOwogICAgICAgIHRrbi52YWx1ZSA9IF92YWx1ZTsKICAgICAgICB0a24uZGF0YSA9IF9kYXRhOwogICAgICAgIHVpbnQzMiB1ID0gdWludDMyKF9kYXRhWzNdKSArICh1aW50MzIoX2RhdGFbMl0pIDw8IDgpICsgKHVpbnQzMihfZGF0YVsxXSkgPDwgMTYpICsgKHVpbnQzMihfZGF0YVswXSkgPDwgMjQpOwogICAgICAgIHRrbi5zaWcgPSBieXRlczQodSk7CgogICAgICAgIC8qIHRrbiB2YXJpYWJsZSBpcyBhbmFsb2d1ZSBvZiBtc2cgdmFyaWFibGUgb2YgRXRoZXIgdHJhbnNhY3Rpb24KICAgICAgICAqICB0a24uc2VuZGVyIGlzIHBlcnNvbiB3aG8gaW5pdGlhdGVkIHRoaXMgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLnNlbmRlcikKICAgICAgICAqICB0a24udmFsdWUgdGhlIG51bWJlciBvZiB0b2tlbnMgdGhhdCB3ZXJlIHNlbnQgICAoYW5hbG9ndWUgb2YgbXNnLnZhbHVlKQogICAgICAgICogIHRrbi5kYXRhIGlzIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gICAoYW5hbG9ndWUgb2YgbXNnLmRhdGEpCiAgICAgICAgKiAgdGtuLnNpZyBpcyA0IGJ5dGVzIHNpZ25hdHVyZSBvZiBmdW5jdGlvbgogICAgICAgICogIGlmIGRhdGEgb2YgdG9rZW4gdHJhbnNhY3Rpb24gaXMgYSBmdW5jdGlvbiBleGVjdXRpb24KICAgICAgICAqLwogICAgfQp9Ci8qKgogKiBAdGl0bGUgT3duZWQKICogQGRldiBUbyB2ZXJpZnkgb3duZXJzaGlwCiAqLwpjb250cmFjdCBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBvd25lZCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cn0KLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KCmxpYnJhcnkgU2FmZU1hdGggewogICAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICB1aW50IGMgPSBhICogYjsKICAgICAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludCBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIGFzc2VydChiIDw9IGEpOwogICAgICAgIHJldHVybiBhIC0gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYyA9IGEgKyBiOwogICAgICAgIGFzc2VydChjID49IGEpOwogICAgICAgIHJldHVybiBjOwogICAgfQp9CmNvbnRyYWN0IEVSQzIwVG9rZW4gaXMgRVJDMjBJbnRlcmZhY2UsIEVSQzIyM0ludGVyZmFjZSwgRUxUVG9rZW5UeXBlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgICAgICByZXR1cm4gdHJhbnNmZXIoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgIH0KCiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgdXNlciBvciBhbm90aGVyIGNvbnRyYWN0IHdhbnRzIHRvIHRyYW5zZmVyIGZ1bmRzIC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKCiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSwgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSwgZmFsc2UpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgICAqCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAgICogQHJldHVybiBBIHVpbnQgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludCByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBwcml2YXRlIHZpZXcgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgICAgIHVpbnQgbGVuZ3RoOwogICAgICAgIGFzc2VtYmx5CiAgICAgICAgewogICAgICAgIC8vcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgICAgICAgICAgbGVuZ3RoIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICAgIH0KICAgICAgICByZXR1cm4gKGxlbmd0aCA+IDApOwogICAgfQogICAgCgogICAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgICBmdW5jdGlvbiB0cmFuc2ZlclRvQWRkcmVzcyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhLCBib29sIHdpdGhBbGxvd2FuY2UpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdHJhbnNmZXJJZlJlcXVpcmVtZW50c01ldChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgd2l0aEFsbG93YW5jZSk7CiAgICAgICAgZW1pdCBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvL2Z1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gdHJhbnNhY3Rpb24gdGFyZ2V0IGlzIGEgY29udHJhY3QKICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9Db250cmFjdChhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhLCBib29sIHdpdGhBbGxvd2FuY2UpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdHJhbnNmZXJJZlJlcXVpcmVtZW50c01ldChtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgd2l0aEFsbG93YW5jZSk7CiAgICAgICAgQ29udHJhY3RSZWNlaXZlciByZWNlaXZlciA9IENvbnRyYWN0UmVjZWl2ZXIoX3RvKTsKICAgICAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIGVtaXQgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja1RyYW5zZmVyUmVxdWlyZW1lbnRzKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcHJpdmF0ZSB2aWV3IHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKHJlbGVhc2VkID09IHRydWUpOwogICAgICAgIHJlcXVpcmUobm93ID4gcmVsZWFzZUZpbmFsaXphdGlvbkRhdGUpOwogICAgICAgIGlmICh0aW1ldmF1bHRbbXNnLnNlbmRlcl0gIT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUobm93ID4gdGltZXZhdWx0W21zZy5zZW5kZXJdKTsKICAgICAgICB9CiAgICAgICAgaWYgKGJhbGFuY2VPZihfZnJvbSkgPCBfdmFsdWUpIHJldmVydCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVySWZSZXF1aXJlbWVudHNNZXQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBib29sIHdpdGhBbGxvd2FuY2VzKSBwcml2YXRlIHsKICAgICAgICBjaGVja1RyYW5zZmVyUmVxdWlyZW1lbnRzKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYgKCB3aXRoQWxsb3dhbmNlcykKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUgKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CiAgICAgICAgfQogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgICAgICBpZiAoaXNDb250cmFjdCh0bykpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9Db250cmFjdCh0bywgdmFsdWUsIGVtcHR5LCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyh0bywgdmFsdWUsIGVtcHR5LCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgYWxsb3dlZFtmcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbZnJvbV1bbXNnLnNlbmRlcl0uc3ViKHZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQp9CmNvbnRyYWN0IFRpbWVWYXVsdEludGVyZmFjZSBpcyBFUkMyMEludGVyZmFjZSwgRVJDMjIzSW50ZXJmYWNlIHsKICAgIGZ1bmN0aW9uIHRpbWVWYXVsdChhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gZ2V0Tm93KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJCeU93bmVyKGFkZHJlc3MgdG8sIHVpbnQgX3ZhbHVlLCB1aW50IHRpbWV2YXVsdCkgcHVibGljIHJldHVybnMgKGJvb2wpOwp9CmNvbnRyYWN0IFRpbWVWYXVsdFRva2VuIGlzIG93bmVkLCBFUkMyMFRva2VuLCBUaW1lVmF1bHRJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gdHJhbnNmZXJCeU93bmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIHVpbnQgZWFybGllc3RSZVRyYW5zZmVyVGltZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdHJhbnNmZXIodG8sIHZhbHVlKTsKICAgICAgICB0aW1ldmF1bHRbdG9dID0gZWFybGllc3RSZVRyYW5zZmVyVGltZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0aW1lVmF1bHQoYWRkcmVzcyBvd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgZWFybGllc3RUcmFuc2ZlclRpbWUpIHsKICAgICAgICByZXR1cm4gdGltZXZhdWx0W293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROb3coKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCBibG9ja2NoYWluVGltZU5vdykgewogICAgICAgIHJldHVybiBub3c7CiAgICB9Cgp9CmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVGltZVZhdWx0VG9rZW4gewogICAgLyoqCiAgICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgp9CmNvbnRyYWN0IFN0YW5kYXJkVG9rZW5FeHQgaXMgU3RhbmRhcmRUb2tlbiB7CiAgICAKICAgIC8qIEludGVyZmFjZSBkZWNsYXJhdGlvbiAqLwogICAgZnVuY3Rpb24gaXNUb2tlbigpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wgd2VBcmUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQpjb250cmFjdCBWZXJzaW9uZWRUb2tlbiBpcyBvd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyB1cGdyYWRhYmxlQ29udHJhY3RBZGRyZXNzOwoKICAgIGZ1bmN0aW9uIFZlcnNpb25lZFRva2VuKGFkZHJlc3MgaW5pdGlhbFZlcnNpb24pIHB1YmxpYyB7CiAgICAgICAgdXBncmFkYWJsZUNvbnRyYWN0QWRkcmVzcyA9IGluaXRpYWxWZXJzaW9uOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZShhZGRyZXNzIG5ld1ZlcnNpb24pIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHVwZ3JhZGFibGVDb250cmFjdEFkZHJlc3MgPSBuZXdWZXJzaW9uOwogICAgfQoKICAgIGZ1bmN0aW9uKCkgcHVibGljIHsKICAgICAgICBhZGRyZXNzIHVwZ3JhZGFibGVDb250cmFjdE1lbSA9IHVwZ3JhZGFibGVDb250cmFjdEFkZHJlc3M7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGZ1bmN0aW9uQ2FsbCA9IG1zZy5kYXRhOwoKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgLy8gTG9hZCB0aGUgZmlyc3QgMzIgYnl0ZXMgb2YgdGhlIGZ1bmN0aW9uQ2FsbCBieXRlcyBhcnJheSB3aGljaCByZXByZXNlbnRzIHRoZSBzaXplIG9mIHRoZSBieXRlcyBhcnJheQogICAgICAgICAgICBsZXQgZnVuY3Rpb25DYWxsU2l6ZSA6PSBtbG9hZChmdW5jdGlvbkNhbGwpCgogICAgICAgIC8vIENhbGN1bGF0ZSBmdW5jdGlvbkNhbGxEYXRhQWRkcmVzcyB3aGljaCBzdGFydHMgYXQgdGhlIHNlY29uZCAzMiBieXRlIGJsb2NrIGluIHRoZSBmdW5jdGlvbkNhbGwgYnl0ZXMgYXJyYXkKICAgICAgICAgICAgbGV0IGZ1bmN0aW9uQ2FsbERhdGFBZGRyZXNzIDo9IGFkZChmdW5jdGlvbkNhbGwsIDB4MjApCgogICAgICAgIC8vIGRlbGVnYXRlY2FsbChnYXNBbGxvd2VkLCBjYWxsQWRkcmVzcywgaW5NZW1BZGRyZXNzLCBpblNpemVCeXRlcywgb3V0TWVtQWRkcmVzcywgb3V0U2l6ZUJ5dGVzKSByZXR1cm5zL3B1c2hlcyB0byBzdGFjayAoMSBvbiBzdWNjZXNzLCAwIG9uIGZhaWx1cmUpCiAgICAgICAgICAgIGxldCBmdW5jdGlvbkNhbGxSZXN1bHQgOj0gZGVsZWdhdGVjYWxsKGdhcywgdXBncmFkYWJsZUNvbnRyYWN0TWVtLCBmdW5jdGlvbkNhbGxEYXRhQWRkcmVzcywgZnVuY3Rpb25DYWxsU2l6ZSwgMCwgMCkKCiAgICAgICAgICAgIGxldCBmcmVlTWVtQWRkcmVzcyA6PSBtbG9hZCgweDQwKQoKICAgICAgICAgICAgc3dpdGNoIGZ1bmN0aW9uQ2FsbFJlc3VsdAogICAgICAgICAgICBjYXNlIDAgewogICAgICAgICAgICAvLyByZXZlcnQoZnJvbU1lbUFkZHJlc3MsIHNpemVJbkJ5dGVzKSBlbmRzIGV4ZWN1dGlvbiBhbmQgcmV0dXJucyB2YWx1ZQogICAgICAgICAgICAgICAgcmV2ZXJ0KGZyZWVNZW1BZGRyZXNzLCAwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRlZmF1bHQgewogICAgICAgICAgICAvLyByZXR1cm5kYXRhY29weSh0b01lbUFkZHJlc3MsIGZyb21NZW1BZGRyZXNzLCBzaXplSW5CeXRlcykKICAgICAgICAgICAgICAgIHJldHVybmRhdGFjb3B5KGZyZWVNZW1BZGRyZXNzLCAweDAsIHJldHVybmRhdGFzaXplKQogICAgICAgICAgICAvLyByZXR1cm4oZnJvbU1lbUFkZHJlc3MsIHNpemVJbkJ5dGVzKQogICAgICAgICAgICAgICAgcmV0dXJuIChmcmVlTWVtQWRkcmVzcywgcmV0dXJuZGF0YXNpemUpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KY29udHJhY3QgRUxUVG9rZW4gaXMgVmVyc2lvbmVkVG9rZW4sIEVMVFRva2VuVHlwZSB7CiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIAogICAgZnVuY3Rpb24gRUxUVG9rZW4oYWRkcmVzcyBfb3duZXIsIHN0cmluZyBfbmFtZSwgc3RyaW5nIF9zeW1ib2wsIHVpbnQgX3RvdGFsU3VwcGx5LCB1aW50IF9kZWNpbWFscywgdWludCBfcmVsZWFzZUZpbmFsaXphdGlvbkRhdGUsIGFkZHJlc3MgX2luaXRpYWxWZXJzaW9uKSBWZXJzaW9uZWRUb2tlbihfaW5pdGlhbFZlcnNpb24pIHB1YmxpYyB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CgogICAgICAgIC8vIEFsbG9jYXRlIGluaXRpYWwgYmFsYW5jZSB0byB0aGUgb3duZXIKICAgICAgICBiYWxhbmNlc1tfb3duZXJdID0gX3RvdGFsU3VwcGx5OwoKICAgICAgICByZWxlYXNlRmluYWxpemF0aW9uRGF0ZSA9IF9yZWxlYXNlRmluYWxpemF0aW9uRGF0ZTsKICAgICAgICByZWxlYXNlZCA9IGZhbHNlOwogICAgfQp9CmNvbnRyYWN0IEVMVFRva2VuSW1wbCBpcyBTdGFuZGFyZFRva2VuRXh0IHsKICAgIC8qKiBOYW1lIGFuZCBzeW1ib2wgd2VyZSB1cGRhdGVkLiAqLwogICAgZXZlbnQgVXBkYXRlZFRva2VuSW5mb3JtYXRpb24oc3RyaW5nIG5ld05hbWUsIHN0cmluZyBuZXdTeW1ib2wpOwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgCiAgICBmdW5jdGlvbiBFTFRUb2tlbkltcGwoKSBwdWJsaWMgewogICAgfQoKICAgIC8qKgogICAgICogT25lIHdheSBmdW5jdGlvbiB0byBwZXJmb3JtIHRoZSBmaW5hbCB0b2tlbiByZWxlYXNlLgogICAgICovCiAgICBmdW5jdGlvbiByZWxlYXNlVG9rZW5UcmFuc2Zlcihib29sIF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgcmVsZWFzZWQgPSBfdmFsdWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0cmVsZWFzZUZpbmFsaXphdGlvbkRhdGUodWludCBfdmFsdWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIHJlbGVhc2VGaW5hbGl6YXRpb25EYXRlID0gX3ZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogT3duZXIgY2FuIHVwZGF0ZSB0b2tlbiBpbmZvcm1hdGlvbiBoZXJlLgogICAgICoKICAgICAqIEl0IGlzIG9mdGVuIHVzZWZ1bCB0byBjb25jZWFsIHRoZSBhY3R1YWwgdG9rZW4gYXNzb2NpYXRpb24sIHVudGlsCiAgICAgKiB0aGUgdG9rZW4gb3BlcmF0aW9ucywgbGlrZSBjZW50cmFsIGlzc3VhbmNlIG9yIHJlaXNzdWFuY2UgaGF2ZSBiZWVuIGNvbXBsZXRlZC4KICAgICAqIEluIHRoaXMgY2FzZSB0aGUgaW5pdGlhbCB0b2tlbiBjYW4gYmUgc3VwcGxpZWQgd2l0aCBlbXB0eSBuYW1lIGFuZCBzeW1ib2wgaW5mb3JtYXRpb24uCiAgICAgKgogICAgICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgdGhlIHRva2VuIG93bmVyIHRvIHJlbmFtZSB0aGUgdG9rZW4gYWZ0ZXIgdGhlIG9wZXJhdGlvbnMKICAgICAqIGhhdmUgYmVlbiBjb21wbGV0ZWQgYW5kIHRoZW4gcG9pbnQgdGhlIGF1ZGllbmNlIHRvIHVzZSB0aGUgdG9rZW4gY29udHJhY3QuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNldFRva2VuSW5mb3JtYXRpb24oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgZW1pdCBVcGRhdGVkVG9rZW5JbmZvcm1hdGlvbihuYW1lLCBzeW1ib2wpOwogICAgfQp9'.
	

]
