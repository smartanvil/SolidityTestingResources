Class {
	#name : #SRT03abf8b032feebef9f3ad74459d4a951f8cc84ba,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT03abf8b032feebef9f3ad74459d4a951f8cc84ba >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsgICAgICAKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLiAKICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CiAgCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwgCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBNaW50YWJsZSB0b2tlbgogKiBAZGV2IFNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aXRoIG1pbnRhYmxlIHRva2VuIGNyZWF0aW9uCiAqIEBkZXYgSXNzdWU6ICogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9pc3N1ZXMvMTIwCiAqIEJhc2VkIG9uIGNvZGUgYnkgVG9rZW5NYXJrZXROZXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ub2tlbk1hcmtldE5ldC9pY28vYmxvYi9tYXN0ZXIvY29udHJhY3RzL01pbnRhYmxlVG9rZW4uc29sCiAqLwoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gbWludCB0b2tlbnMKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIG1pbnQuCiAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgKi8KICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBjYW5NaW50IHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CgoKLyoqCiAqIEB0aXRsZSBDcm93ZHNhbGUKICogQGRldiBDcm93ZHNhbGUgaXMgYSBiYXNlIGNvbnRyYWN0IGZvciBtYW5hZ2luZyBhIHRva2VuIGNyb3dkc2FsZS4KICogQ3Jvd2RzYWxlcyBoYXZlIGEgc3RhcnQgYW5kIGVuZCBibG9ja3MsIHdoZXJlIGludmVzdG9ycyBjYW4gbWFrZQogKiB0b2tlbiBwdXJjaGFzZXMgYW5kIHRoZSBjcm93ZHNhbGUgd2lsbCBhc3NpZ24gdGhlbSB0b2tlbnMgYmFzZWQKICogb24gYSB0b2tlbiBwZXIgRVRIIHJhdGUuIEZ1bmRzIGNvbGxlY3RlZCBhcmUgZm9yd2FyZGVkIHRvIGEgd2FsbGV0CiAqIGFzIHRoZXkgYXJyaXZlLgogKi8KY29udHJhY3QgQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogIE1pbnRhYmxlVG9rZW4gcHVibGljIHRva2VuOwoKICAvLyBzdGFydCBhbmQgZW5kIGJsb2NrcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsKICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsKCiAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKCiAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkKICB1aW50MjU2IHB1YmxpYyByYXRlOwoKCiAgLyoqCiAgICogZXZlbnQgZm9yIHRva2VuIHB1cmNoYXNlIGxvZ2dpbmcKICAgKiBAcGFyYW0gcHVyY2hhc2VyIHdobyBwYWlkIGZvciB0aGUgdG9rZW5zCiAgICogQHBhcmFtIGJlbmVmaWNpYXJ5IHdobyBnb3QgdGhlIHRva2VucwogICAqIEBwYXJhbSB2YWx1ZSB3ZWlzIHBhaWQgZm9yIHB1cmNoYXNlCiAgICogQHBhcmFtIGFtb3VudCBhbW91bnQgb2YgdG9rZW5zIHB1cmNoYXNlZAogICAqLwogIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIHB1cmNoYXNlciwgYWRkcmVzcyBpbmRleGVkIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGFtb3VudCk7CgoKICBmdW5jdGlvbiBDcm93ZHNhbGUodWludDI1NiBfc3RhcnRCbG9jaywgdWludDI1NiBfZW5kQmxvY2ssIGFkZHJlc3MgX3dhbGxldCkgewogICAgcmVxdWlyZShfc3RhcnRCbG9jayA+PSBibG9jay5udW1iZXIpOwogICAgcmVxdWlyZShfZW5kQmxvY2sgPj0gX3N0YXJ0QmxvY2spOwogICAgcmVxdWlyZShfd2FsbGV0ICE9IDB4MCk7CgogICAgdG9rZW4gPSBjcmVhdGVUb2tlbkNvbnRyYWN0KCk7CiAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgfQoKICAvLyBjcmVhdGVzIHRoZSB0b2tlbiB0byBiZSBzb2xkLgogIC8vIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGhhdmUgY3Jvd2RzYWxlIG9mIGEgc3BlY2lmaWMgbWludGFibGUgdG9rZW4uCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW5Db250cmFjdCgpIGludGVybmFsIHJldHVybnMgKE1pbnRhYmxlVG9rZW4pIHsKICAgIHJldHVybiBuZXcgTWludGFibGVUb2tlbigpOwogIH0KCgogIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgoKICAvLyBsb3cgbGV2ZWwgdG9rZW4gcHVyY2hhc2UgZnVuY3Rpb24KICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSAweDApOwogICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKCkpOwoKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwoKICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHJhdGUpOwoKICAgIC8vIHVwZGF0ZSBzdGF0ZQogICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwoKICAgIHRva2VuLm1pbnQoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CgogICAgZm9yd2FyZEZ1bmRzKCk7CiAgfQoKCiAgLy8gc2VuZCBldGhlciB0byB0aGUgZnVuZCBjb2xsZWN0aW9uIHdhbGxldAogIC8vIG92ZXJyaWRlIHRvIGNyZWF0ZSBjdXN0b20gZnVuZCBmb3J3YXJkaW5nIG1lY2hhbmlzbXMKICBmdW5jdGlvbiBmb3J3YXJkRnVuZHMoKSBpbnRlcm5hbCB7CiAgICB3YWxsZXQudHJhbnNmZXIobXNnLnZhbHVlKTsKICB9CgogIC8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gY2FuIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCB3aXRoaW5QZXJpb2QgPSBibG9jay5udW1iZXIgPj0gc3RhcnRCbG9jayAmJiBibG9jay5udW1iZXIgPD0gZW5kQmxvY2s7CiAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IG1zZy52YWx1ZSAhPSAwOwogICAgcmV0dXJuIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2U7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiBibG9jay5udW1iZXIgPiBlbmRCbG9jazsKICB9CgoKfQoKCi8qKgogKiBAdGl0bGUgQ2FwcGVkQ3Jvd2RzYWxlCiAqIEBkZXYgRXh0ZW5zaW9uIG9mIENyb3dzZGFsZSB3aXRoIGEgbWF4IGFtb3VudCBvZiBmdW5kcyByYWlzZWQKICovCmNvbnRyYWN0IENhcHBlZENyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHB1YmxpYyBjYXA7CgogIGZ1bmN0aW9uIENhcHBlZENyb3dkc2FsZSh1aW50MjU2IF9jYXApIHsKICAgIHJlcXVpcmUoX2NhcCA+IDApOwogICAgY2FwID0gX2NhcDsKICB9CgogIC8vIG92ZXJyaWRpbmcgQ3Jvd2RzYWxlI3ZhbGlkUHVyY2hhc2UgdG8gYWRkIGV4dHJhIGNhcCBsb2dpYwogIC8vIEByZXR1cm4gdHJ1ZSBpZiBpbnZlc3RvcnMgY2FuIGJ1eSBhdCB0aGUgbW9tZW50CiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgd2l0aGluQ2FwID0gd2VpUmFpc2VkLmFkZChtc2cudmFsdWUpIDw9IGNhcDsKICAgIHJldHVybiBzdXBlci52YWxpZFB1cmNoYXNlKCkgJiYgd2l0aGluQ2FwOwogIH0KCiAgLy8gb3ZlcnJpZGluZyBDcm93ZHNhbGUjaGFzRW5kZWQgdG8gYWRkIGNhcCBsb2dpYwogIC8vIEByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBjYXBSZWFjaGVkID0gd2VpUmFpc2VkID49IGNhcDsKICAgIHJldHVybiBzdXBlci5oYXNFbmRlZCgpIHx8IGNhcFJlYWNoZWQ7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBGaW5hbGl6YWJsZUNyb3dkc2FsZQogKiBAZGV2IEV4dGVuc2lvbiBvZiBDcm93c2RhbGUgd2hlcmUgYW4gb3duZXIgY2FuIGRvIGV4dHJhIHdvcmsKICogYWZ0ZXIgZmluaXNoaW5nLiAKICovCmNvbnRyYWN0IEZpbmFsaXphYmxlQ3Jvd2RzYWxlIGlzIENyb3dkc2FsZSwgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIGJvb2wgcHVibGljIGlzRmluYWxpemVkID0gZmFsc2U7CgogIGV2ZW50IEZpbmFsaXplZCgpOwoKICAvKioKICAgKiBAZGV2IE11c3QgYmUgY2FsbGVkIGFmdGVyIGNyb3dkc2FsZSBlbmRzLCB0byBkbyBzb21lIGV4dHJhIGZpbmFsaXphdGlvbgogICAqIHdvcmsuIENhbGxzIHRoZSBjb250cmFjdCdzIGZpbmFsaXphdGlvbiBmdW5jdGlvbi4KICAgKi8KICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwoKICAgIGZpbmFsaXphdGlvbigpOwogICAgRmluYWxpemVkKCk7CiAgICAKICAgIGlzRmluYWxpemVkID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQ2FuIGJlIG92ZXJyaWRlbiB0byBhZGQgZmluYWxpemF0aW9uIGxvZ2ljLiBUaGUgb3ZlcnJpZGluZyBmdW5jdGlvbgogICAqIHNob3VsZCBjYWxsIHN1cGVyLmZpbmFsaXphdGlvbigpIHRvIGVuc3VyZSB0aGUgY2hhaW4gb2YgZmluYWxpemF0aW9uIGlzCiAgICogZXhlY3V0ZWQgZW50aXJlbHkuCiAgICovCiAgZnVuY3Rpb24gZmluYWxpemF0aW9uKCkgaW50ZXJuYWwgewogIH0KfQoKCi8qKgogKiBAdGl0bGUgUmVmdW5kVmF1bHQKICogQGRldiBUaGlzIGNvbnRyYWN0IGlzIHVzZWQgZm9yIHN0b3JpbmcgZnVuZHMgd2hpbGUgYSBjcm93ZHNhbGUKICogaXMgaW4gcHJvZ3Jlc3MuIFN1cHBvcnRzIHJlZnVuZGluZyB0aGUgbW9uZXkgaWYgY3Jvd2RzYWxlIGZhaWxzLAogKiBhbmQgZm9yd2FyZGluZyBpdCBpZiBjcm93ZHNhbGUgaXMgc3VjY2Vzc2Z1bC4KICovCmNvbnRyYWN0IFJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGRlcG9zaXRlZDsKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgU3RhdGUgcHVibGljIHN0YXRlOwoKICBldmVudCBDbG9zZWQoKTsKICBldmVudCBSZWZ1bmRzRW5hYmxlZCgpOwogIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB3ZWlBbW91bnQpOwoKICBmdW5jdGlvbiBSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHsKICAgIHJlcXVpcmUoX3dhbGxldCAhPSAweDApOwogICAgd2FsbGV0ID0gX3dhbGxldDsKICAgIHN0YXRlID0gU3RhdGUuQWN0aXZlOwogIH0KCiAgZnVuY3Rpb24gZGVwb3NpdChhZGRyZXNzIGludmVzdG9yKSBvbmx5T3duZXIgcGF5YWJsZSB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuQWN0aXZlKTsKICAgIHN0YXRlID0gU3RhdGUuQ2xvc2VkOwogICAgQ2xvc2VkKCk7CiAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIGZ1bmN0aW9uIGVuYWJsZVJlZnVuZHMoKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTdGF0ZS5BY3RpdmUpOwogICAgc3RhdGUgPSBTdGF0ZS5SZWZ1bmRpbmc7CiAgICBSZWZ1bmRzRW5hYmxlZCgpOwogIH0KCiAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgaW52ZXN0b3IpIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUmVmdW5kaW5nKTsKICAgIHVpbnQyNTYgZGVwb3NpdGVkVmFsdWUgPSBkZXBvc2l0ZWRbaW52ZXN0b3JdOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IDA7CiAgICBpbnZlc3Rvci50cmFuc2ZlcihkZXBvc2l0ZWRWYWx1ZSk7CiAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgUmVmdW5kYWJsZUNyb3dkc2FsZQogKiBAZGV2IEV4dGVuc2lvbiBvZiBDcm93ZHNhbGUgY29udHJhY3QgdGhhdCBhZGRzIGEgZnVuZGluZyBnb2FsLCBhbmQKICogdGhlIHBvc3NpYmlsaXR5IG9mIHVzZXJzIGdldHRpbmcgYSByZWZ1bmQgaWYgZ29hbCBpcyBub3QgbWV0LgogKiBVc2VzIGEgUmVmdW5kVmF1bHQgYXMgdGhlIGNyb3dkc2FsZSdzIHZhdWx0LgogKi8KY29udHJhY3QgUmVmdW5kYWJsZUNyb3dkc2FsZSBpcyBGaW5hbGl6YWJsZUNyb3dkc2FsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIC8vIG1pbmltdW0gYW1vdW50IG9mIGZ1bmRzIHRvIGJlIHJhaXNlZCBpbiB3ZWlzCiAgdWludDI1NiBwdWJsaWMgZ29hbDsKCiAgLy8gcmVmdW5kIHZhdWx0IHVzZWQgdG8gaG9sZCBmdW5kcyB3aGlsZSBjcm93ZHNhbGUgaXMgcnVubmluZwogIFJlZnVuZFZhdWx0IHB1YmxpYyB2YXVsdDsKCiAgZnVuY3Rpb24gUmVmdW5kYWJsZUNyb3dkc2FsZSh1aW50MjU2IF9nb2FsKSB7CiAgICByZXF1aXJlKF9nb2FsID4gMCk7CiAgICB2YXVsdCA9IG5ldyBSZWZ1bmRWYXVsdCh3YWxsZXQpOwogICAgZ29hbCA9IF9nb2FsOwogIH0KCiAgLy8gV2UncmUgb3ZlcnJpZGluZyB0aGUgZnVuZCBmb3J3YXJkaW5nIGZyb20gQ3Jvd2RzYWxlLgogIC8vIEluIGFkZGl0aW9uIHRvIHNlbmRpbmcgdGhlIGZ1bmRzLCB3ZSB3YW50IHRvIGNhbGwKICAvLyB0aGUgUmVmdW5kVmF1bHQgZGVwb3NpdCBmdW5jdGlvbgogIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgIHZhdWx0LmRlcG9zaXQudmFsdWUobXNnLnZhbHVlKShtc2cuc2VuZGVyKTsKICB9CgogIC8vIGlmIGNyb3dkc2FsZSBpcyB1bnN1Y2Nlc3NmdWwsIGludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kcyBoZXJlCiAgZnVuY3Rpb24gY2xhaW1SZWZ1bmQoKSB7CiAgICByZXF1aXJlKGlzRmluYWxpemVkKTsKICAgIHJlcXVpcmUoIWdvYWxSZWFjaGVkKCkpOwoKICAgIHZhdWx0LnJlZnVuZChtc2cuc2VuZGVyKTsKICB9CgogIC8vIHZhdWx0IGZpbmFsaXphdGlvbiB0YXNrLCBjYWxsZWQgd2hlbiBvd25lciBjYWxscyBmaW5hbGl6ZSgpCiAgZnVuY3Rpb24gZmluYWxpemF0aW9uKCkgaW50ZXJuYWwgewogICAgaWYgKGdvYWxSZWFjaGVkKCkpIHsKICAgICAgdmF1bHQuY2xvc2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhdWx0LmVuYWJsZVJlZnVuZHMoKTsKICAgIH0KCiAgICBzdXBlci5maW5hbGl6YXRpb24oKTsKICB9CgogIGZ1bmN0aW9uIGdvYWxSZWFjaGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gZ29hbDsKICB9Cgp9Cgpjb250cmFjdCBHbG9iQ29pblRva2VuIGlzIE1pbnRhYmxlVG9rZW4gewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJHbG9iQ29pbiBDcnlwdG8gUGxhdGZvcm0iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkdDUCI7CiAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogIG1vZGlmaWVyIG9ubHlNaW50aW5nRmluaXNoZWQoKSB7CiAgICByZXF1aXJlKG1pbnRpbmdGaW5pc2hlZCA9PSB0cnVlKTsKICAgIF87CiAgfQogIC8vLyBAZGV2IFNhbWUgRVJDMjAgYmVoYXZpb3IsIGJ1dCByZXF1aXJlIHRoZSB0b2tlbiB0byBiZSB1bmxvY2tlZAogIC8vLyBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5TWludGluZ0ZpbmlzaGVkIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvLy8gQGRldiBTYW1lIEVSQzIwIGJlaGF2aW9yLCBidXQgcmVxdWlyZSB0aGUgdG9rZW4gdG8gYmUgdW5sb2NrZWQKICAvLy8gQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogIC8vLyBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5TWludGluZ0ZpbmlzaGVkIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICB9CgogIC8vLyBAZGV2IFNhbWUgRVJDMjAgYmVoYXZpb3IsIGJ1dCByZXF1aXJlIHRoZSB0b2tlbiB0byBiZSB1bmxvY2tlZAogIC8vLyBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tLgogIC8vLyBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8uCiAgLy8vIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZC4KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgb25seU1pbnRpbmdGaW5pc2hlZCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgfQoKfQoKY29udHJhY3QgR2xvYmNvaW5Ub2tlblNhbGUgaXMgQ2FwcGVkQ3Jvd2RzYWxlLCBSZWZ1bmRhYmxlQ3Jvd2RzYWxlIHsKCiAgLy9TdGFydCBvZiB0aGUgQWN0dWFsIGNyb3dkc2FsZS4gU3RhcmJsb2NrIGlzIHRoZSBzdGFydCBvZiB0aGUgcHJlc2FsZS4KICB1aW50MjU2IHB1YmxpYyBzdGFydFNhbGU7CiAgdWludDI1NiBwdWJsaWMgZW5kUHJlc2FsZTsKCiAgLy8gUHJlc2FsZSBSYXRlIHBlciB3ZWkgfjMwJSBib251cyBvdmVyIHJhdGUxCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUFJFU0FMRVJBVEUgPSAxNzAwMDsKCiAgLy8gbmV3IHJhdGVzCiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUkFURTEgPSAxMzAwMDsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBSQVRFMiA9IDEyMDAwOwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFJBVEUzID0gMTEwMDA7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgUkFURTQgPSAxMDAwMDsKCgogIC8vIENhcCBwZXIgdGllciBmb3IgYm9udXMgaW4gd2VpLgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRJRVIxID0gIDMwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVElFUjIgPSAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUSUVSMyA9ICA3NTAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKICAvL1ByZXNhbGUKICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWRQcmVTYWxlOwogIHVpbnQyNTYgcHVibGljIHByZXNhbGVDYXA7CgogIGZ1bmN0aW9uIEdsb2Jjb2luVG9rZW5TYWxlKHVpbnQyNTYgX3N0YXJ0QmxvY2ssIHVpbnQyNTYgX2VuZFByZXNhbGUsIHVpbnQyNTYgX3N0YXJ0U2FsZSwgdWludDI1NiBfZW5kQmxvY2ssIHVpbnQyNTYgX2dvYWwsdWludDI1NiBfcHJlc2FsZUNhcCwgdWludDI1NiBfY2FwLCBhZGRyZXNzIF93YWxsZXQpIHB1YmxpYwogIENhcHBlZENyb3dkc2FsZShfY2FwKSBGaW5hbGl6YWJsZUNyb3dkc2FsZSgpIFJlZnVuZGFibGVDcm93ZHNhbGUoX2dvYWwpIENyb3dkc2FsZShfc3RhcnRCbG9jaywgX2VuZEJsb2NrLCBfd2FsbGV0KSB7CiAgICByZXF1aXJlKF9nb2FsIDw9IF9jYXApOwogICAgcmVxdWlyZShfc3RhcnRTYWxlID4gX3N0YXJ0QmxvY2spOwogICAgcmVxdWlyZShfZW5kQmxvY2sgPiBfc3RhcnRTYWxlKTsKICAgIHJlcXVpcmUoX3ByZXNhbGVDYXAgPiAwKTsKICAgIHJlcXVpcmUoX3ByZXNhbGVDYXAgPD0gX2NhcCk7CgogICAgc3RhcnRTYWxlID0gX3N0YXJ0U2FsZTsKICAgIGVuZFByZXNhbGUgPSBfZW5kUHJlc2FsZTsKICAgIHByZXNhbGVDYXAgPSBfcHJlc2FsZUNhcDsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChNaW50YWJsZVRva2VuKSB7CiAgICByZXR1cm4gbmV3IEdsb2JDb2luVG9rZW4oKTsKICB9CgogIC8vd2hpdGUgbGlzdGVkIGFkZHJlc3MKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZUxpc3RlZEFkZHJlc3M7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVMaXN0ZWRBZGRyZXNzUHJlc2FsZTsKCiAgbW9kaWZpZXIgb25seVByZXNhbGVXaGl0ZWxpc3RlZCgpIHsKICAgIHJlcXVpcmUoIGlzV2hpdGVsaXN0ZWRQcmVzYWxlKG1zZy5zZW5kZXIpICkgOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlXaGl0ZWxpc3RlZCgpIHsKICAgIHJlcXVpcmUoIGlzV2hpdGVsaXN0ZWQobXNnLnNlbmRlcikgfHwgaXNXaGl0ZWxpc3RlZFByZXNhbGUobXNnLnNlbmRlcikgKSA7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBBZGQgYSBsaXN0IG9mIGFkZHJlc3MgdG8gYmUgd2hpdGVsaXN0ZWQgZm9yIHRoZSBjcm93ZHNhbGUgb25seS4KICAgKiBAcGFyYW0gX3VzZXJzICwgdGhlIGxpc3Qgb2YgdXNlciBBZGRyZXNzLiBUZXN0ZWQgZm9yIG91dCBvZiBnYXMgdW50aWwgMjAwIGFkZHJlc3Nlcy4KICAgKi8KICBmdW5jdGlvbiB3aGl0ZWxpc3RBZGRyZXNzZXMoIGFkZHJlc3NbXSBfdXNlcnMpIG9ubHlPd25lciB7CiAgICBmb3IoIHVpbnQgaSA9IDAgOyBpIDwgX3VzZXJzLmxlbmd0aCA7IGkrKyApIHsKICAgICAgd2hpdGVMaXN0ZWRBZGRyZXNzW191c2Vyc1tpXV0gPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdW53aGl0ZWxpc3RBZGRyZXNzKCBhZGRyZXNzIF91c2Vycykgb25seU93bmVyIHsKICAgIHdoaXRlTGlzdGVkQWRkcmVzc1tfdXNlcnNdID0gZmFsc2U7CiAgfQoKICAvKioKICAgKiBAZGV2IEFkZCBhIGxpc3Qgb2YgYWRkcmVzcyB0byBiZSB3aGl0ZWxpc3RlZCBmb3IgdGhlIFByZXNhbGUgQW5kIHNhbGUuCiAgICogQHBhcmFtIF91c2VycyAsIHRoZSBsaXN0IG9mIHVzZXIgQWRkcmVzcy4gVGVzdGVkIGZvciBvdXQgb2YgZ2FzIHVudGlsIDIwMCBhZGRyZXNzZXMuCiAgICovCiAgZnVuY3Rpb24gd2hpdGVsaXN0QWRkcmVzc2VzUHJlc2FsZSggYWRkcmVzc1tdIF91c2Vycykgb25seU93bmVyIHsKICAgIGZvciggdWludCBpID0gMCA7IGkgPCBfdXNlcnMubGVuZ3RoIDsgaSsrICkgewogICAgICB3aGl0ZUxpc3RlZEFkZHJlc3NQcmVzYWxlW191c2Vyc1tpXV0gPSB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdW53aGl0ZWxpc3RBZGRyZXNzUHJlc2FsZSggYWRkcmVzcyBfdXNlcnMpIG9ubHlPd25lciB7CiAgICB3aGl0ZUxpc3RlZEFkZHJlc3NQcmVzYWxlW191c2Vyc10gPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGlzV2hpdGVsaXN0ZWQoYWRkcmVzcyBfdXNlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3aGl0ZUxpc3RlZEFkZHJlc3NbX3VzZXJdOwogIH0KCiAgZnVuY3Rpb24gaXNXaGl0ZWxpc3RlZFByZXNhbGUoYWRkcmVzcyBfdXNlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3aGl0ZUxpc3RlZEFkZHJlc3NQcmVzYWxlW191c2VyXTsKICB9CgogIGZ1bmN0aW9uICgpIHBheWFibGUgewogICAgaWYgKHZhbGlkUHVyY2hhc2VQcmVzYWxlKCkpewogICAgICBidXlUb2tlbnNQcmVzYWxlKG1zZy5zZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgb25seVdoaXRlbGlzdGVkIHsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgIHJlcXVpcmUodmFsaWRQdXJjaGFzZSgpKTsKCiAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgIHVpbnQyNTYgdG9rZW5zID0gY2FsY3VsYXRlVG9rZW5BbW91bnQod2VpQW1vdW50KTsKICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKCiAgICB0b2tlbi5taW50KGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCB0b2tlbnMpOwogICAgZm9yd2FyZEZ1bmRzKCk7CiAgfQoKICBmdW5jdGlvbiBidXlUb2tlbnNQcmVzYWxlKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHBheWFibGUgb25seVByZXNhbGVXaGl0ZWxpc3RlZCB7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2VQcmVzYWxlKCkpOwoKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKFBSRVNBTEVSQVRFKTsKICAgIHdlaVJhaXNlZFByZVNhbGUgPSB3ZWlSYWlzZWRQcmVTYWxlLmFkZCh3ZWlBbW91bnQpOwoKICAgIHRva2VuLm1pbnQoYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGJlbmVmaWNpYXJ5LCB3ZWlBbW91bnQsIHRva2Vucyk7CiAgICBmb3J3YXJkRnVuZHMoKTsKICB9CgogIC8vIGNhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHRva2VuIHRoZSB1c2VyIGlzIGdldHRpbmcgLSBjYW4gb3ZlcmxhcCBvbiBtdWx0aXBsZSB0aWVycy4KICBmdW5jdGlvbiBjYWxjdWxhdGVUb2tlbkFtb3VudCh1aW50MjU2IHdlaUFtb3VudCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1Nil7CiAgICB1aW50MjU2IGFtb3VudFRvQnV5ID0gd2VpQW1vdW50OwogICAgdWludDI1NiBhbW91bnRUb2tlbkJvdWdodDsKICAgIHVpbnQyNTYgY3VycmVudFdlaVJhaXNlZCA9IHdlaVJhaXNlZDsKICAgICBpZiAoY3VycmVudFdlaVJhaXNlZCA8IFRJRVIxICYmIGFtb3VudFRvQnV5ID4gMCkgewogICAgICAgdmFyIChhbW91bnRCb3VnaHRJblRpZXIsIGFtb3VudExlZnRUb2J1eSkgPSBjYWxjdWxhdGVBbW91bnRQZXJUaWVyKGFtb3VudFRvQnV5LFRJRVIxLFJBVEUxLGN1cnJlbnRXZWlSYWlzZWQpOwogICAgICAgYW1vdW50VG9rZW5Cb3VnaHQgPSBhbW91bnRUb2tlbkJvdWdodC5hZGQoYW1vdW50Qm91Z2h0SW5UaWVyKTsKICAgICAgIGN1cnJlbnRXZWlSYWlzZWQgPSBjdXJyZW50V2VpUmFpc2VkLmFkZChhbW91bnRUb0J1eS5zdWIoYW1vdW50TGVmdFRvYnV5KSk7CiAgICAgICBhbW91bnRUb0J1eSA9IGFtb3VudExlZnRUb2J1eTsKICAgICB9CiAgICAgaWYgKGN1cnJlbnRXZWlSYWlzZWQgPCBUSUVSMiAmJiBhbW91bnRUb0J1eSA+IDApIHsKICAgICAgKGFtb3VudEJvdWdodEluVGllciwgYW1vdW50TGVmdFRvYnV5KSA9IGNhbGN1bGF0ZUFtb3VudFBlclRpZXIoYW1vdW50VG9CdXksVElFUjIsUkFURTIsY3VycmVudFdlaVJhaXNlZCk7CiAgICAgIGFtb3VudFRva2VuQm91Z2h0ID0gYW1vdW50VG9rZW5Cb3VnaHQuYWRkKGFtb3VudEJvdWdodEluVGllcik7CiAgICAgIGN1cnJlbnRXZWlSYWlzZWQgPSBjdXJyZW50V2VpUmFpc2VkLmFkZChhbW91bnRUb0J1eS5zdWIoYW1vdW50TGVmdFRvYnV5KSk7CiAgICAgIGFtb3VudFRvQnV5ID0gYW1vdW50TGVmdFRvYnV5OwogICAgIH0KICAgICBpZiAoY3VycmVudFdlaVJhaXNlZCA8IFRJRVIzICYmIGFtb3VudFRvQnV5ID4gMCkgewogICAgICAoYW1vdW50Qm91Z2h0SW5UaWVyLCBhbW91bnRMZWZ0VG9idXkpID0gY2FsY3VsYXRlQW1vdW50UGVyVGllcihhbW91bnRUb0J1eSxUSUVSMyxSQVRFMyxjdXJyZW50V2VpUmFpc2VkKTsKICAgICAgYW1vdW50VG9rZW5Cb3VnaHQgPSBhbW91bnRUb2tlbkJvdWdodC5hZGQoYW1vdW50Qm91Z2h0SW5UaWVyKTsKICAgICAgY3VycmVudFdlaVJhaXNlZCA9IGN1cnJlbnRXZWlSYWlzZWQuYWRkKGFtb3VudFRvQnV5LnN1YihhbW91bnRMZWZ0VG9idXkpKTsKICAgICAgYW1vdW50VG9CdXkgPSBhbW91bnRMZWZ0VG9idXk7CiAgICAgfQogICAgaWYgKCBjdXJyZW50V2VpUmFpc2VkIDwgY2FwICYmIGFtb3VudFRvQnV5ID4gMCkgewogICAgICAoYW1vdW50Qm91Z2h0SW5UaWVyLCBhbW91bnRMZWZ0VG9idXkpID0gY2FsY3VsYXRlQW1vdW50UGVyVGllcihhbW91bnRUb0J1eSxjYXAsUkFURTQsY3VycmVudFdlaVJhaXNlZCk7CiAgICAgIGFtb3VudFRva2VuQm91Z2h0ID0gYW1vdW50VG9rZW5Cb3VnaHQuYWRkKGFtb3VudEJvdWdodEluVGllcik7CiAgICAgIGN1cnJlbnRXZWlSYWlzZWQgPSBjdXJyZW50V2VpUmFpc2VkLmFkZChhbW91bnRUb0J1eS5zdWIoYW1vdW50TGVmdFRvYnV5KSk7CiAgICAgIGFtb3VudFRvQnV5ID0gYW1vdW50TGVmdFRvYnV5OwogICAgfQogICAgcmV0dXJuIGFtb3VudFRva2VuQm91Z2h0OwogIH0KCiAgLy8gY2FsY3VsYXRlIHRoZSBhbW91bnQgb2YgdG9rZW4gd2l0aGluIGEgdGllci4KICBmdW5jdGlvbiBjYWxjdWxhdGVBbW91bnRQZXJUaWVyKHVpbnQyNTYgYW1vdW50VG9CdXksdWludDI1NiB0aWVyLHVpbnQyNTYgcmF0ZSx1aW50MjU2IGN1cnJlbnRXZWlSYWlzZWQpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYsdWludDI1NikgewogICAgdWludDI1NiBhbW91bnRBdmFpbGFibGUgPSB0aWVyLnN1YihjdXJyZW50V2VpUmFpc2VkKTsKICAgIGlmICggYW1vdW50VG9CdXkgPiBhbW91bnRBdmFpbGFibGUgKSB7CiAgICAgIHVpbnQyNTYgYW1vdW50Qm91Z2h0SW5UaWVyID0gYW1vdW50QXZhaWxhYmxlLm11bChyYXRlKTsKICAgICAgYW1vdW50VG9CdXkgPSBhbW91bnRUb0J1eS5zdWIoYW1vdW50QXZhaWxhYmxlKTsKICAgICAgcmV0dXJuIChhbW91bnRCb3VnaHRJblRpZXIsYW1vdW50VG9CdXkpOwogICAgfSBlbHNlIHsKICAgICAgYW1vdW50Qm91Z2h0SW5UaWVyID0gYW1vdW50VG9CdXkubXVsKHJhdGUpOwogICAgICByZXR1cm4gKGFtb3VudEJvdWdodEluVGllciwwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGZpbmFsaXphdGlvbigpIGludGVybmFsIHsKICAgIGlmIChnb2FsUmVhY2hlZCgpKSB7CiAgICAgIC8vR2xvYmNvaW4gZ2V0cyA2MCUgb2YgdGhlIGFtb3VudCBvZiB0aGUgdG90YWwgdG9rZW4gc3VwcGx5CiAgICAgIHVpbnQyNTYgdG90YWxTdXBwbHkgPSB0b2tlbi50b3RhbFN1cHBseSgpOwogICAgICAvLyB0b3RhbCBzdXBwbHkKICAgICAgdG9rZW4ubWludCh3YWxsZXQsIHRvdGFsU3VwcGx5KTsKICAgICAgLy8gNTAlIG9mIHRva2VucyBnZW5lcmF0ZWQgZHVyaW5nIGNyb3dkc2FsZSB0byBtYWtlIGl0IDYwJSBmb3IgR0MKICAgICAgdG9rZW4ubWludCh3YWxsZXQsIHRvdGFsU3VwcGx5LmRpdigyKSk7CiAgICAgIHRva2VuLmZpbmlzaE1pbnRpbmcoKTsKICAgIH0KICAgIHN1cGVyLmZpbmFsaXphdGlvbigpOwogIH0KCiAgLy8gT3ZlcnJpZGUgb2YgdGhlIHZhbGlkUHVyY2hhc2UgZnVuY3Rpb24gc28gdGhhdCB0aGUgbmV3IHNhbGUgcGVyaW9kZSBzdGFydCBhdCBTdGFydFNhbGUgaW5zdGVhZCBvZiBTdGFydGJsb2NrLgogIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICBib29sIHdpdGhpblBlcmlvZCA9IGJsb2NrLm51bWJlciA+PSBzdGFydFNhbGUgJiYgYmxvY2subnVtYmVyIDw9IGVuZEJsb2NrOwogICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgIHVpbnQyNTYgdG90YWxXZWlSYWlzZWQgPSB3ZWlSYWlzZWRQcmVTYWxlLmFkZCh3ZWlSYWlzZWQpOwogICAgYm9vbCB3aXRoaW5DYXAgPSB0b3RhbFdlaVJhaXNlZC5hZGQobXNnLnZhbHVlKSA8PSBjYXA7CiAgICByZXR1cm4gd2l0aGluQ2FwICYmIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2U7CiAgfQoKICAvLyBTYWxlIHBlcmlvZCBzdGFydCBhdCBTdGFydEJsb2NrIHVudGlsIHRoZSBzYWxlIFN0YXJ0ICggc3RhcnRTYWxlICkKICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlUHJlc2FsZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgd2l0aGluUGVyaW9kID0gKGJsb2NrLm51bWJlciA+PSBzdGFydEJsb2NrKSAmJiAoYmxvY2subnVtYmVyIDw9IGVuZFByZXNhbGUpOwogICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgIGJvb2wgd2l0aGluQ2FwID0gd2VpUmFpc2VkUHJlU2FsZS5hZGQobXNnLnZhbHVlKSA8PSBwcmVzYWxlQ2FwOwogICAgcmV0dXJuIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2UgJiYgd2l0aGluQ2FwOwogIH0KCiAgLy8gT3ZlcnJpZGUgb2YgdGhlIGdvYWxSZWFjaGVkIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGdvYWwgdGFrZSBpbnRvIGFjY291bnQgdGhlIHRva2VuIHJhaXNlZCBkdXJpbmcgdGhlIFByZXNhbGUuCiAgZnVuY3Rpb24gZ29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgdWludDI1NiB0b3RhbFdlaVJhaXNlZCA9IHdlaVJhaXNlZFByZVNhbGUuYWRkKHdlaVJhaXNlZCk7CiAgICByZXR1cm4gdG90YWxXZWlSYWlzZWQgPj0gZ29hbCB8fCBzdXBlci5nb2FsUmVhY2hlZCgpOwogIH0KCn0='.
	

]
