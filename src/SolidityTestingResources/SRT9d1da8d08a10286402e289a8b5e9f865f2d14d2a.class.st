Class {
	#name : #SRT9d1da8d08a10286402e289a8b5e9f865f2d14d2a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT9d1da8d08a10286402e289a8b5e9f865f2d14d2a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KCiAgICBmdW5jdGlvbiB0b1VJTlQxMTIodWludDI1NiBhKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQxMTIpIHsKICAgIGFzc2VydCh1aW50MTEyKGEpID09IGEpOwogICAgcmV0dXJuIHVpbnQxMTIoYSk7CiAgfQoKICBmdW5jdGlvbiB0b1VJTlQxMjAodWludDI1NiBhKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQxMjApIHsKICAgIGFzc2VydCh1aW50MTIwKGEpID09IGEpOwogICAgcmV0dXJuIHVpbnQxMjAoYSk7CiAgfQoKICBmdW5jdGlvbiB0b1VJTlQxMjgodWludDI1NiBhKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQxMjgpIHsKICAgIGFzc2VydCh1aW50MTI4KGEpID09IGEpOwogICAgcmV0dXJuIHVpbnQxMjgoYSk7CiAgfQoKICBmdW5jdGlvbiBwZXJjZW50KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSAoYiphLzEwMCkgOwogICAgYXNzZXJ0KGMgPD0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IE93bmVkIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIHsKICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBzdHJ1Y3QgQWNjb3VudCB7CiAgICAgIHVpbnQyNTYgYmFsYW5jZXM7CiAgICAgIHVpbnQyNTYgcmF3VG9rZW5zOwogICAgICB1aW50MzIgbGFzdE1pbnRlZFRpbWVzdGFtcDsKICAgIH0KCiAgICAvLyBCYWxhbmNlcyBmb3IgZWFjaCBhY2NvdW50CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQWNjb3VudCkgYWNjb3VudHM7CgoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFjY291bnRzW21zZy5zZW5kZXJdLmJhbGFuY2VzKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5iYWxhbmNlcyA9IGFjY291bnRzW21zZy5zZW5kZXJdLmJhbGFuY2VzLnN1YihfdmFsdWUpOwogICAgYWNjb3VudHNbX3RvXS5iYWxhbmNlcyA9IGFjY291bnRzW190b10uYmFsYW5jZXMuYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGFjY291bnRzW19vd25lcl0uYmFsYW5jZXM7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhY2NvdW50c1tfZnJvbV0uYmFsYW5jZXMpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGFjY291bnRzW19mcm9tXS5iYWxhbmNlcyA9IGFjY291bnRzW19mcm9tXS5iYWxhbmNlcy5zdWIoX3ZhbHVlKTsKICAgIGFjY291bnRzW190b10uYmFsYW5jZXMgPSBhY2NvdW50c1tfdG9dLmJhbGFuY2VzLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKY29udHJhY3QgSW5mb2Nhc2ggaXMgU3RhbmRhcmRUb2tlbiwgT3duZWQgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lICAgID0gIkluZm9jYXNoIjsgIAogICAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gODsgICAgICAgICAgICAgICAKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICA9ICJJQ0MiOwogICAgYm9vbCBwdWJsaWMgY2FuQ2xhaW1Ub2tlbiA9IGZhbHNlOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgbWF4U3VwcGx5ICA9IDg2MDAwMDAwKjEwKip1aW50MjU2KGRlY2ltYWxzKTsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRhdGVJbml0PTE1MTQwNzM2MDAgIDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRhdGVJQ089ZGF0ZUluaXQgKyAzMCBkYXlzOwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGF0ZUlUPWRhdGVJQ08gKyAzNjUgZGF5czsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRhdGVNYXJrZXRpbmc9ZGF0ZUlUICsgMzY1IGRheXM7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkYXRlRWNvPWRhdGVNYXJrZXRpbmcgKyAzNjUgZGF5czsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IGRhdGVNYW5hZ2VyPWRhdGVFY28gKyAzNjUgZGF5czsgCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkYXRlQWRtaW49ZGF0ZU1hbmFnZXIgKyAzNjUgZGF5czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgIAogICAgZW51bSBTdGFnZSB7CiAgICAgICAgTm90Q3JlYXRlZCwKICAgICAgICBJQ08sCiAgICAgICAgSVQsCiAgICAgICAgTWFya2V0aW5nLAogICAgICAgIEVjbywKICAgICAgICBNZ210U3lzdGVtLAogICAgICAgIEFkbWluLAogICAgICAgIEZpbmFsaXplZAogICAgfQogICAgLy8gcGFja2VkIHRvIDI1NmJpdCB0byBzYXZlIGdhcyB1c2FnZS4KICAgIHN0cnVjdCBTdXBwbGllcyB7CiAgICAgICAgLy8gdWludDEyOCdzIG1heCB2YWx1ZSBpcyBhYm91dCAzZTM4LgogICAgICAgIC8vIGl0J3MgZW5vdWdoIHRvIHByZXNlbnQgYW1vdW50IG9mIHRva2VucwogICAgICAgIHVpbnQyNTYgdG90YWw7CiAgICAgICAgdWludDI1NiByYXdUb2tlbnM7CiAgICB9CgogICAgLy90aGUgc3RhZ2UgZm9yIHJlbGVhc2luZyBUb2tlbnMKICAgIHN0cnVjdCBTdGFnZVJlbGVhc2UgewogICAgICBTdGFnZSBzdGFnZTsKICAgICAgdWludDI1NiByYXdUb2tlbnM7CiAgICAgIHVpbnQyNTYgZGF0ZVJlbGVhc2U7CiAgICB9CgogICAgU3VwcGxpZXMgc3VwcGxpZXM7CiAgICBTdGFnZVJlbGVhc2UgcHVibGljICBzdGFnZUlDTz1TdGFnZVJlbGVhc2UoU3RhZ2UuSUNPLCBtYXhTdXBwbHkucGVyY2VudCgzNSksIGRhdGVJQ08pOwogICAgU3RhZ2VSZWxlYXNlIHB1YmxpYyBzdGFnZUlUPVN0YWdlUmVsZWFzZShTdGFnZS5JVCwgbWF4U3VwcGx5LnBlcmNlbnQoMTgpLCBkYXRlSVQpOwogICAgU3RhZ2VSZWxlYXNlIHB1YmxpYyBzdGFnZU1hcmtldGluZz1TdGFnZVJlbGVhc2UoU3RhZ2UuTWFya2V0aW5nLCBtYXhTdXBwbHkucGVyY2VudCgxOCksIGRhdGVNYXJrZXRpbmcpOwogICAgU3RhZ2VSZWxlYXNlIHB1YmxpYyBzdGFnZUVjbz1TdGFnZVJlbGVhc2UoU3RhZ2UuRWNvLCBtYXhTdXBwbHkucGVyY2VudCgxOCksIGRhdGVFY28pOwogICAgU3RhZ2VSZWxlYXNlIHB1YmxpYyBzdGFnZU1nbXRTeXN0ZW09U3RhZ2VSZWxlYXNlKFN0YWdlLk1nbXRTeXN0ZW0sIG1heFN1cHBseS5wZXJjZW50KDkpLCBkYXRlTWFuYWdlcik7CiAgICBTdGFnZVJlbGVhc2UgcHVibGljIHN0YWdlQWRtaW49U3RhZ2VSZWxlYXNlKFN0YWdlLkFkbWluLCBtYXhTdXBwbHkucGVyY2VudCgyKSwgZGF0ZUFkbWluKTsKCiAgICAvLyBTZW5kIGJhY2sgZXRoZXIgCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHJldmVydCgpOwogICAgfQogICAgLy9nZXR0ZXIgdG90YWxTdXBwbHkKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWwpIHsKICAgICAgcmV0dXJuIHN1cHBsaWVzLnRvdGFsOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBtaW50VG9rZW4oYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX2Ftb3VudCwgYm9vbCBfaXNSYXcpIG9ubHlPd25lciBpbnRlcm5hbCB7CiAgICAgIHJlcXVpcmUoX2Ftb3VudC5hZGQoc3VwcGxpZXMudG90YWwpPD1tYXhTdXBwbHkpOwogICAgICBpZiAoX2lzUmF3KSB7CiAgICAgICAgYWNjb3VudHNbX293bmVyXS5yYXdUb2tlbnM9X2Ftb3VudC5hZGQoYWNjb3VudHNbX293bmVyXS5yYXdUb2tlbnMpOwogICAgICAgIHN1cHBsaWVzLnJhd1Rva2Vucz1fYW1vdW50LmFkZChzdXBwbGllcy5yYXdUb2tlbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIGFjY291bnRzW19vd25lcl0uYmFsYW5jZXM9X2Ftb3VudC5hZGQoYWNjb3VudHNbX293bmVyXS5iYWxhbmNlcyk7CiAgICAgIH0KICAgICAgc3VwcGxpZXMudG90YWw9X2Ftb3VudC5hZGQoc3VwcGxpZXMudG90YWwpOwogICAgICBUcmFuc2ZlcigwLCBfb3duZXIsIF9hbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyUmF3KGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWNjb3VudHNbbXNnLnNlbmRlcl0ucmF3VG9rZW5zKTsKICAgIAoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGFjY291bnRzW21zZy5zZW5kZXJdLnJhd1Rva2VucyA9IGFjY291bnRzW21zZy5zZW5kZXJdLnJhd1Rva2Vucy5zdWIoX3ZhbHVlKTsKICAgIGFjY291bnRzW190b10ucmF3VG9rZW5zID0gYWNjb3VudHNbX3RvXS5yYXdUb2tlbnMuYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHNldENsYWltVG9rZW4oYm9vbCBhcHByb3ZlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGNhbkNsYWltVG9rZW49dHJ1ZTsKICAgIHJldHVybiBjYW5DbGFpbVRva2VuOwogIH0KCiAgICBmdW5jdGlvbiBjbGFpbVRva2VuKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBhbW91bnQpIHsKICAgICAgcmVxdWlyZShhY2NvdW50c1tfb3duZXJdLnJhd1Rva2VucyE9MCk7CiAgICAgIHJlcXVpcmUoY2FuQ2xhaW1Ub2tlbik7CgogICAgICB1aW50MjU2IGFtb3VudFRva2VuID0gYWNjb3VudHNbX293bmVyXS5yYXdUb2tlbnM7CiAgICAgIGFjY291bnRzW19vd25lcl0ucmF3VG9rZW5zID0gMDsKICAgICAgYWNjb3VudHNbX293bmVyXS5iYWxhbmNlcyA9IGFtb3VudFRva2VuICsgYWNjb3VudHNbX293bmVyXS5iYWxhbmNlczsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mUmF3cyhhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICByZXR1cm4gYWNjb3VudHNbX293bmVyXS5yYXdUb2tlbnM7CiAgICB9CgogICAgZnVuY3Rpb24gYmxvY2tUaW1lKCkgY29uc3RhbnQgcmV0dXJucyAodWludDMyKSB7CiAgICAgICAgcmV0dXJuIHVpbnQzMihibG9jay50aW1lc3RhbXApOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0YWdlKCkgY29uc3RhbnQgcmV0dXJucyAoU3RhZ2UpIHsgCiAgICAgIGlmKGJsb2NrVGltZSgpPD1kYXRlSW5pdCkgewogICAgICAgIHJldHVybiBTdGFnZS5Ob3RDcmVhdGVkOwogICAgICB9CgogICAgICBpZihibG9ja1RpbWUoKTw9ZGF0ZUlDTykgewogICAgICAgIHJldHVybiBTdGFnZS5JQ087CiAgICAgIH0KICAgICAgICAKICAgICAgaWYoYmxvY2tUaW1lKCk8PWRhdGVJVCkgewogICAgICAgIHJldHVybiBTdGFnZS5JVDsKICAgICAgfQoKICAgICAgaWYoYmxvY2tUaW1lKCk8PWRhdGVNYXJrZXRpbmcpIHsKICAgICAgICByZXR1cm4gU3RhZ2UuTWFya2V0aW5nOwogICAgICB9CgogICAgICBpZihibG9ja1RpbWUoKTw9ZGF0ZUVjbykgewogICAgICAgIHJldHVybiBTdGFnZS5FY287CiAgICAgIH0KCiAgICAgIGlmKGJsb2NrVGltZSgpPD1kYXRlTWFuYWdlcikgewogICAgICAgIHJldHVybiBTdGFnZS5NZ210U3lzdGVtOwogICAgICB9CgogICAgICBpZihibG9ja1RpbWUoKTw9ZGF0ZUFkbWluKSB7CiAgICAgICAgcmV0dXJuIFN0YWdlLkFkbWluOwogICAgICB9CiAgICAgIAogICAgICByZXR1cm4gU3RhZ2UuRmluYWxpemVkOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbGVhc2VTdGFnZSAodWludDI1NiBhbW91bnQsIFN0YWdlUmVsZWFzZSBzdG9yYWdlIHN0YWdlUmVsZWFzZSwgYm9vbCBpc1JhdykgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICBpZihzdGFnZVJlbGVhc2UucmF3VG9rZW5zPjApIHsKICAgICAgICBpbnQyNTYgcmVtYWluPWludDI1NihzdGFnZVJlbGVhc2UucmF3VG9rZW5zIC0gYW1vdW50KTsKICAgICAgICBpZihyZW1haW48MCkKICAgICAgICAgIGFtb3VudD1zdGFnZVJlbGVhc2UucmF3VG9rZW5zOwogICAgICAgIHN0YWdlUmVsZWFzZS5yYXdUb2tlbnM9c3RhZ2VSZWxlYXNlLnJhd1Rva2Vucy5zdWIoYW1vdW50KTsKICAgICAgICBtaW50VG9rZW4ob3duZXIsIGFtb3VudCwgaXNSYXcpOwogICAgICAgIHJldHVybiBhbW91bnQ7CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVsZWFzZSh1aW50MjU2IGFtb3VudCwgYm9vbCBpc1Jhdykgb25seU93bmVyIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHVpbnQyNTYgYW1vdW50U3VtPTA7CgogICAgICBpZihzdGFnZSgpPT1TdGFnZS5Ob3RDcmVhdGVkKSB7CiAgICAgICAgdGhyb3c7CiAgICAgIH0KCiAgICAgIGlmKHN0YWdlKCk9PVN0YWdlLklDTykgewogICAgICAgIHJlbGVhc2VTdGFnZShhbW91bnQsIHN0YWdlSUNPLCBpc1Jhdyk7CiAgICAgICAgYW1vdW50U3VtPWFtb3VudFN1bS5hZGQoYW1vdW50KTsKICAgICAgICByZXR1cm4gYW1vdW50U3VtOwogICAgICB9CgogICAgICBpZihzdGFnZSgpPT1TdGFnZS5JVCkgewogICAgICAgIHJlbGVhc2VTdGFnZShhbW91bnQsIHN0YWdlSVQsIGlzUmF3KTsKICAgICAgICBhbW91bnRTdW09YW1vdW50U3VtLmFkZChhbW91bnQpOwogICAgICAgIHJldHVybiBhbW91bnRTdW07CiAgICAgIH0KCiAgICAgIGlmKHN0YWdlKCk9PVN0YWdlLk1hcmtldGluZykgewogICAgICAgIHJlbGVhc2VTdGFnZShhbW91bnQsIHN0YWdlTWFya2V0aW5nLCBpc1Jhdyk7CiAgICAgICAgYW1vdW50U3VtPWFtb3VudFN1bS5hZGQoYW1vdW50KTsKICAgICAgICByZXR1cm4gYW1vdW50U3VtOwogICAgICB9CgogICAgICBpZihzdGFnZSgpPT1TdGFnZS5FY28pIHsKICAgICAgICByZWxlYXNlU3RhZ2UoYW1vdW50LCBzdGFnZUVjbywgaXNSYXcpOwogICAgICAgIGFtb3VudFN1bT1hbW91bnRTdW0uYWRkKGFtb3VudCk7CiAgICAgICAgcmV0dXJuIGFtb3VudFN1bTsKICAgICAgfQoKICAgICAgaWYoc3RhZ2UoKT09U3RhZ2UuTWdtdFN5c3RlbSkgewogICAgICAgIHJlbGVhc2VTdGFnZShhbW91bnQsIHN0YWdlTWdtdFN5c3RlbSwgaXNSYXcpOwogICAgICAgIGFtb3VudFN1bT1hbW91bnRTdW0uYWRkKGFtb3VudCk7CiAgICAgICAgcmV0dXJuIGFtb3VudFN1bTsKICAgICAgfQogICAgICAKICAgICAgaWYoc3RhZ2UoKT09U3RhZ2UuQWRtaW4gKSB7CiAgICAgICAgcmVsZWFzZVN0YWdlKGFtb3VudCwgc3RhZ2VBZG1pbiwgaXNSYXcpOwogICAgICAgIGFtb3VudFN1bT1hbW91bnRTdW0uYWRkKGFtb3VudCk7CiAgICAgICAgcmV0dXJuIGFtb3VudFN1bTsKICAgICAgfQogICAgICAKICAgICAgaWYoc3RhZ2UoKT09U3RhZ2UuRmluYWxpemVkKSB7CiAgICAgICAgb3duZXI9MDsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgICByZXR1cm4gYW1vdW50U3VtOwogICAgfQp9'.
	

]
