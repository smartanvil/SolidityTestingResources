Class {
	#name : #SRTD88E4822687d0F9c73E296296Ed3eCd0a193dd46,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTD88E4822687d0F9c73E296296Ed3eCd0a193dd46 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyA9PT09IERJU0NMQUlNRVIgPT09PQovLwovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4KLy8gQUxUSE9VR0ggVEhJUyBTTUFSVCBDT05UUkFDVCBXQVMgQ1JFQVRFRCBXSVRIIEdSRUFUIENBUkUgQU5EIElOIFRIRSBIT1BFIE9GIEJFSU5HIFVTRUZVTCwgTk8gR1VBUkFOVEVFUyBPRiBGTEFXTEVTUyBPUEVSQVRJT04gQ0FOIEJFIEdJVkVOLgovLyBJTiBQQVJUSUNVTEFSIC0gU1VCVElMRSBCVUdTLCBIQUNLRVIgQVRUQUNLUyBPUiBNQUxGVU5DVElPTiBPRiBVTkRFUkxZSU5HIFRFQ0hOT0xPR1kgQ0FOIENBVVNFIFVOSU5URU5USU9OQUwgQkVIQVZJT1VSLgovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4KLy8gRE9OJ1QgVVNFIFRISVMgU01BUlQgQ09OVFJBQ1QgSUYgWU9VIEhBVkUgU1VCU1RBTlRJQUwgRE9VQlRTIE9SIElGIFlPVSBET04nVCBLTk9XIFdIQVQgWU9VIEFSRSBET0lORy4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQovLyBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsCi8vIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLAovLyBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgovLyA9PT09Ci8vCgovLy8gQGF1dGhvciBTYW50aW1lbnQgU2FnbAovLy8gQHRpdGxlICBDcm93ZHNhbGVNaW50ZXIKCmNvbnRyYWN0IEJhc2UgewoKICAgIGZ1bmN0aW9uIG1heCh1aW50IGEsIHVpbnQgYikgcmV0dXJucyAodWludCkgeyByZXR1cm4gYSA+PSBiID8gYSA6IGI7IH0KICAgIGZ1bmN0aW9uIG1pbih1aW50IGEsIHVpbnQgYikgcmV0dXJucyAodWludCkgeyByZXR1cm4gYSA8PSBiID8gYSA6IGI7IH0KCiAgICBtb2RpZmllciBvbmx5KGFkZHJlc3MgYWxsb3dlZCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGFsbG93ZWQpIHRocm93OwogICAgICAgIF87CiAgICB9CgoKICAgIC8vL0ByZXR1cm4gVHJ1ZSBpZiBgX2FkZHJgIGlzIGEgY29udHJhY3QKICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChfYWRkciA9PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgdWludCBzaXplOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChzaXplID4gMCk7CiAgICB9CgogICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgLy8gKiAgICAgICAgICByZWVudHJhbmN5IGhhbmRsaW5nICAgICAgICAgICAgICAgICAgKgogICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKICAgIC8vQGRldiBwcmVkZWZpbmVkIGxvY2tzICh1cCB0byB1aW50IGJpdCBsZW5ndGgsIGkuZS4gMjU2IHBvc3NpYmxlKQogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDAgPSAyICoqIDA7CiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMSA9IDIgKiogMTsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAyID0gMiAqKiAyOwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDMgPSAyICoqIDM7CiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwNCA9IDIgKiogNDsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA1ID0gMiAqKiA1OwoKICAgIC8vcHJldmVudHMgcmVlbnRyYW5jeSBhdHRhY3M6IHNwZWNpZmljIGxvY2tzCiAgICB1aW50IHByaXZhdGUgYml0bG9ja3MgPSAwOwogICAgbW9kaWZpZXIgbm9SZWVudHJhbmN5KHVpbnQgbSkgewogICAgICAgIHZhciBfbG9ja3MgPSBiaXRsb2NrczsKICAgICAgICBpZiAoX2xvY2tzICYgbSA+IDApIHRocm93OwogICAgICAgIGJpdGxvY2tzIHw9IG07CiAgICAgICAgXzsKICAgICAgICBiaXRsb2NrcyA9IF9sb2NrczsKICAgIH0KCiAgICBtb2RpZmllciBub0FueVJlZW50cmFuY3kgewogICAgICAgIHZhciBfbG9ja3MgPSBiaXRsb2NrczsKICAgICAgICBpZiAoX2xvY2tzID4gMCkgdGhyb3c7CiAgICAgICAgYml0bG9ja3MgPSB1aW50KC0xKTsKICAgICAgICBfOwogICAgICAgIGJpdGxvY2tzID0gX2xvY2tzOwogICAgfQoKICAgIC8vL0BkZXYgZW1wdHkgbWFya2luZyBtb2RpZmllciBzaWduYWxpbmcgdG8gdXNlciBvZiB0aGUgbWFya2VkIGZ1bmN0aW9uICwgdGhhdCBpdCBjYW4gY2F1c2UgYW4gcmVlbnRyYW50IGNhbGwuCiAgICAvLy8gICAgIGRldmVsb3BlciBzaG91bGQgbWFrZSB0aGUgY2FsbGVyIGZ1bmN0aW9uIHJlZW50cmFudC1zYWZlIGlmIGl0IHVzZSBhIHJlZW50cmFudCBmdW5jdGlvbi4KICAgIG1vZGlmaWVyIHJlZW50cmFudCB7IF87IH0KCn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gewogICAgLy90YXJnZXQgdG9rZW4gY29udHJhY3QgaXMgcmVzcG9uc2libGUgdG8gYWNjZXB0IG9ubHkgYXV0aG9yaXplZCBtaW50IGNhbGxzLgogICAgZnVuY3Rpb24gbWludCh1aW50IGFtb3VudCwgYWRkcmVzcyBhY2NvdW50KTsKCiAgICAvL3N0YXJ0IHRoZSB0b2tlbiBvbiBtaW50aW5nIGZpbmlzaGVkLAogICAgZnVuY3Rpb24gc3RhcnQoKTsKfQoKY29udHJhY3QgT3duZWQgaXMgQmFzZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHkob3duZXIpIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBvbmx5KG5ld093bmVyKSB7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7Cgp9Cgpjb250cmFjdCBCYWxhbmNlU3RvcmFnZSB7CiAgICBmdW5jdGlvbiBiYWxhbmNlcyhhZGRyZXNzIGFjY291bnQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQgYmFsYW5jZSk7Cn0KCmNvbnRyYWN0IEFkZHJlc3NMaXN0IHsKICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBNaW5NYXhXaGl0ZUxpc3QgewogICAgZnVuY3Rpb24gYWxsb3dlZChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IC8qZmlubmV5Ki8sIHVpbnQgLypmaW5uZXkqLyApOwp9Cgpjb250cmFjdCBQcmVzYWxlQm9udXNWb3RpbmcgewogICAgZnVuY3Rpb24gcmF3Vm90ZXMoYWRkcmVzcyBhZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByYXdWb3RlKTsKfQoKY29udHJhY3QgQ3Jvd2RzYWxlTWludGVyIGlzIE93bmVkIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IFZFUlNJT04gPSAiMC4yLjEtVEVTVC4xIjsKCiAgICAvKiA9PT09PT0gY29uZmlndXJhdGlvbiBTVEFSVCA9PT09PT0gKi8KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IENPTU1VTklUWV9TQUxFX1NUQVJUID0gMzk2ODE5MDsgLyogYXBwcm94LiAwMy4wNy4yMDE3IDE1OjM5ICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUklPUklUWV9TQUxFX1NUQVJUICA9IDM5NjgzMTA7IC8qIGFwcHJveC4gMzAuMDcuMjAxNyAxNjowMCAqLwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgUFVCTElDX1NBTEVfU1RBUlQgICAgPSAzOTY4NDMwOyAvKiBhcHByb3guIDMwLjA3LjIwMTcgMTY6MzAgKi8KICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFBVQkxJQ19TQUxFX0VORCAgICAgID0gMzk2ODU1MDsgLyogYXBwcm94LiAzMC4wNy4yMDE3IDE3OjAwICovCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBXSVRIRFJBV0FMX0VORCAgICAgICA9IDM5Njg2NzA7IC8qIGFwcHJveC4gMzAuMDcuMjAxNyAxNzoxMCAqLwoKICAgIGFkZHJlc3MgcHVibGljIFRFQU1fR1JPVVBfV0FMTEVUICAgICAgICAgICA9IDB4MDA4Y2RDOWI4OUFENjc3Q0VmN0YyQzA1NWVmQzk3ZDM2MDZhNTBCZDsKICAgIGFkZHJlc3MgcHVibGljIEFEVklTRVJTX0FORF9GUklFTkRTX1dBTExFVCA9IDB4MDBlQ2Y5MmZBMzY3ODY3OGExQjgyODk5ZGExMzA3YTAwODNiNjM3OTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBURUFNX0JPTlVTX1BFUl9DRU5UICAgICAgICAgICAgPSAxODsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IEFEVklTT1JTX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IDEwOwoKICAgIE1pbnRhYmxlVG9rZW4gICAgICBwdWJsaWMgVE9LRU4gICAgICAgICAgICAgICAgICAgID0gTWludGFibGVUb2tlbigweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKTsKCiAgICBBZGRyZXNzTGlzdCAgICAgICAgcHVibGljIFBSSU9SSVRZX0FERFJFU1NfTElTVCAgICA9IEFkZHJlc3NMaXN0KDB4NDYzNjM1ZUZkMjI1NThjNjRFZmE2MjI3QTQ1NjQ5ZWVEYzBlNDg4OCk7CiAgICBNaW5NYXhXaGl0ZUxpc3QgICAgcHVibGljIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVCA9IE1pbk1heFdoaXRlTGlzdCgweDMzNzVEM2Q5ZGY4QzY3YjNEN0VCY0UyMjBjM0REYTRCRTAzZENFMzEpOwogICAgQmFsYW5jZVN0b3JhZ2UgICAgIHB1YmxpYyBQUkVTQUxFX0JBTEFOQ0VTICAgICAgICAgPSBCYWxhbmNlU3RvcmFnZSgweDRGZDk5N0VkN2MxMERiRDA0ZTk1ZDM3MzBjZDc3RDc5NTEzMDc2RjIpOwogICAgUHJlc2FsZUJvbnVzVm90aW5nIHB1YmxpYyBQUkVTQUxFX0JPTlVTX1ZPVElORyAgICAgPSBQcmVzYWxlQm9udXNWb3RpbmcoMHgyODNhOTdBZjg2NzE2NTE2OUFFQ2UwYjJFOTYzYjlmMEZDN0U1YjhjKTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUF9FVEggPSA1OwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFX0VUSCA9IDM7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIID0gNTsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZID0gNTAwOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgVE9LRU5fUEVSX0VUSCA9IDEwMDA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCA9IDU0OwoKICAgIC8vY29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIENyb3dkc2FsZU1pbnRlcigpIHsKICAgICAgICAvL2NoZWNrIGNvbmZpZ3VyYXRpb24gaWYgc29tZXRoaW5nIGluIHNldHVwIGlzIGxvb2tpbmcgd2VpcmQKICAgICAgICBpZiAoCiAgICAgICAgICAgIFRPS0VOX1BFUl9FVEggPT0gMAogICAgICAgICAgICB8fCBURUFNX0JPTlVTX1BFUl9DRU5UICsgQURWSVNPUlNfQU5EX1BBUlRORVJTX1BFUl9DRU5UID49MTAwCiAgICAgICAgICAgIHx8IE1JTl9BQ0NFUFRFRF9BTU9VTlRfRklOTkVZIDwgMQogICAgICAgICAgICB8fCBvd25lciA9PSAweDAKICAgICAgICAgICAgfHwgYWRkcmVzcyhDT01NVU5JVFlfQUxMT1dBTkNFX0xJU1QpID09IDB4MAogICAgICAgICAgICB8fCBhZGRyZXNzKFBSSU9SSVRZX0FERFJFU1NfTElTVCkgPT0gMHgwCiAgICAgICAgICAgIHx8IGFkZHJlc3MoUFJFU0FMRV9CT05VU19WT1RJTkcpID09IDB4MAogICAgICAgICAgICB8fCBhZGRyZXNzKFBSRVNBTEVfQkFMQU5DRVMpID09IDB4MAogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA9PSAwCiAgICAgICAgICAgIHx8IFBSSU9SSVRZX1NBTEVfU1RBUlQgPT0gMAogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9TVEFSVCA9PSAwCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX0VORCA9PSAwCiAgICAgICAgICAgIHx8IFdJVEhEUkFXQUxfRU5EID09IDAKICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID09IDAKICAgICAgICAgICAgfHwgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID09IDAKICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPT0gMAogICAgICAgICAgICB8fCBDT01NVU5JVFlfU0FMRV9TVEFSVCA8PSBibG9jay5udW1iZXIKICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1NBTEVfU1RBUlQgPj0gUFJJT1JJVFlfU0FMRV9TVEFSVAogICAgICAgICAgICB8fCBQUklPUklUWV9TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX1NUQVJUCiAgICAgICAgICAgIHx8IFBVQkxJQ19TQUxFX1NUQVJUID49IFBVQkxJQ19TQUxFX0VORAogICAgICAgICAgICB8fCBQVUJMSUNfU0FMRV9FTkQgPj0gV0lUSERSQVdBTF9FTkQKICAgICAgICAgICAgfHwgQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVAgPiBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUKICAgICAgICAgICAgfHwgTUlOX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFID4gTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFICkKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICAvKiA9PT09PT0gY29uZmlndXJhdGlvbiBFTkQgPT09PT09ICovCgogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgU1RBUlQ9PT09PT0gKi8KCiAgICBib29sIHB1YmxpYyBpc0Fib3J0ZWQgPSBmYWxzZTsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOwogICAgYm9vbCBwdWJsaWMgVE9LRU5fU1RBUlRFRCA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgdG90YWxfcmVjZWl2ZWRfYW1vdW50OwogICAgYWRkcmVzc1tdIHB1YmxpYyBpbnZlc3RvcnM7CgogICAgLy9kaXNwbGF5cyBudW1iZXIgb2YgdW5pcSBpbnZlc3RvcnMKICAgIGZ1bmN0aW9uIGludmVzdG9yc0NvdW50KCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50KSB7IHJldHVybiBpbnZlc3RvcnMubGVuZ3RoOyB9CgogICAgLy9kaXNwbGF5cyByZWNlaXZlZCBhbW91bnQgaW4gZXRoIHVwdG8gbm93CiAgICBmdW5jdGlvbiBUT1RBTF9SRUNFSVZFRF9FVEgoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7IHJldHVybiB0b3RhbF9yZWNlaXZlZF9hbW91bnQgLyAxIGV0aGVyOyB9CgogICAgLy9kaXNwbGF5cyBjdXJyZW50IGNvbnRyYWN0IHN0YXRlIGluIGh1bWFuIHJlYWRhYmxlIGZvcm0KICAgIGZ1bmN0aW9uIHN0YXRlKCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoc3RyaW5nKSB7IHJldHVybiBzdGF0ZU5hbWVzWyB1aW50KGN1cnJlbnRTdGF0ZSgpKSBdOyB9CgogICAgZnVuY3Rpb24gc2FuX3doaXRlbGlzdChhZGRyZXNzIGFkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQsIHVpbnQpIHsgcmV0dXJuIENPTU1VTklUWV9BTExPV0FOQ0VfTElTVC5hbGxvd2VkKGFkZHIpOyB9CiAgICBmdW5jdGlvbiBjZmlfd2hpdGVsaXN0KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgeyByZXR1cm4gUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKGFkZHIpOyB9CgogICAgLyogPT09PT09IHB1YmxpYyBzdGF0ZXMgRU5EID09PT09PSAqLwoKICAgIHN0cmluZ1tdIHByaXZhdGUgc3RhdGVOYW1lcyA9IFsiQkVGT1JFX1NUQVJUIiwgIkNPTU1VTklUWV9TQUxFIiwgIlBSSU9SSVRZX1NBTEUiLCAiUFJJT1JJVFlfU0FMRV9GSU5JU0hFRCIsICJQVUJMSUNfU0FMRSIsICJCT05VU19NSU5USU5HIiwgIldJVEhEUkFXQUxfUlVOTklORyIsICJSRUZVTkRfUlVOTklORyIsICJDTE9TRUQiIF07CiAgICBlbnVtIFN0YXRlIHsgQkVGT1JFX1NUQVJULCBDT01NVU5JVFlfU0FMRSwgUFJJT1JJVFlfU0FMRSwgUFJJT1JJVFlfU0FMRV9GSU5JU0hFRCwgUFVCTElDX1NBTEUsIEJPTlVTX01JTlRJTkcsIFdJVEhEUkFXQUxfUlVOTklORywgUkVGVU5EX1JVTk5JTkcsIENMT1NFRCB9CgogICAgdWludCBwcml2YXRlIGNvbnN0YW50IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQID0gQ09NTVVOSVRZX1BMVVNfUFJJT1JJVFlfU0FMRV9DQVBfRVRIICogMSBldGhlcjsKICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNSU5fVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsKICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgPSBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkVfRVRIICogMSBldGhlcjsKICAgIHVpbnQgcHJpdmF0ZSBjb25zdGFudCBNSU5fQUNDRVBURURfQU1PVU5UID0gTUlOX0FDQ0VQVEVEX0FNT1VOVF9GSU5ORVkgKiAxIGZpbm5leTsKICAgIGJvb2wgcHJpdmF0ZSBhbGxCb251c2VzQXJlTWludGVkID0gZmFsc2U7CgogICAgLy8KICAgIC8vID09PT09PT0gaW50ZXJmYWNlIG1ldGhvZHMgPT09PT09PQogICAgLy8KCiAgICAvL2FjY2VwdCBwYXltZW50cyBoZXJlCiAgICBmdW5jdGlvbiAoKQogICAgcGF5YWJsZQogICAgbm9BbnlSZWVudHJhbmN5CiAgICB7CiAgICAgICAgU3RhdGUgc3RhdGUgPSBjdXJyZW50U3RhdGUoKTsKICAgICAgICB1aW50IGFtb3VudF9hbGxvd2VkOwogICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5DT01NVU5JVFlfU0FMRSkgewogICAgICAgICAgICB2YXIgKG1pbl9maW5uZXksIG1heF9maW5uZXkpID0gQ09NTVVOSVRZX0FMTE9XQU5DRV9MSVNULmFsbG93ZWQobXNnLnNlbmRlcik7CiAgICAgICAgICAgIHZhciAobWluLCBtYXgpID0gKG1pbl9maW5uZXkgKiAxIGZpbm5leSwgbWF4X2Zpbm5leSAqIDEgZmlubmV5KTsKICAgICAgICAgICAgdmFyIHNlbmRlcl9iYWxhbmNlID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgICAgIGFzc2VydCAoc2VuZGVyX2JhbGFuY2UgPD0gbWF4KTsgLy9zYW5pdHkgY2hlY2s6IHNob3VsZCBiZSBhbHdheXMgdHJ1ZTsKICAgICAgICAgICAgYXNzZXJ0IChtc2cudmFsdWUgPj0gbWluKTsgICAgICAvL3JlamVjdCBwYXltZW50cyBsZXNzIHRoYW4gbWluaW11bQogICAgICAgICAgICBhbW91bnRfYWxsb3dlZCA9IG1heCAtIHNlbmRlcl9iYWxhbmNlOwogICAgICAgICAgICBfcmVjZWl2ZUZ1bmRzVXBUbyhhbW91bnRfYWxsb3dlZCk7CiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5QUklPUklUWV9TQUxFKSB7CiAgICAgICAgICAgIGFzc2VydCAoUFJJT1JJVFlfQUREUkVTU19MSVNULmNvbnRhaW5zKG1zZy5zZW5kZXIpKTsKICAgICAgICAgICAgYW1vdW50X2FsbG93ZWQgPSBDT01NVU5JVFlfUExVU19QUklPUklUWV9TQUxFX0NBUCAtIHRvdGFsX3JlY2VpdmVkX2Ftb3VudDsKICAgICAgICAgICAgX3JlY2VpdmVGdW5kc1VwVG8oYW1vdW50X2FsbG93ZWQpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuUFVCTElDX1NBTEUpIHsKICAgICAgICAgICAgYW1vdW50X2FsbG93ZWQgPSBNQVhfVE9UQUxfQU1PVU5UX1RPX1JFQ0VJVkUgLSB0b3RhbF9yZWNlaXZlZF9hbW91bnQ7CiAgICAgICAgICAgIF9yZWNlaXZlRnVuZHNVcFRvKGFtb3VudF9hbGxvd2VkKTsKICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFN0YXRlLlJFRlVORF9SVU5OSU5HKSB7CiAgICAgICAgICAgIC8vIGFueSBlbnRyaW5nIGNhbGwgaW4gUmVmdW5kIFBoYXNlIHdpbGwgY2F1c2UgZnVsbCByZWZ1bmQKICAgICAgICAgICAgX3NlbmRSZWZ1bmQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIHJlZnVuZCgpIGV4dGVybmFsCiAgICBpblN0YXRlKFN0YXRlLlJFRlVORF9SVU5OSU5HKQogICAgbm9BbnlSZWVudHJhbmN5CiAgICB7CiAgICAgICAgX3NlbmRSZWZ1bmQoKTsKICAgIH0KCgogICAgZnVuY3Rpb24gd2l0aGRyYXdGdW5kc0FuZFN0YXJ0VG9rZW4oKSBleHRlcm5hbAogICAgaW5TdGF0ZShTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcpCiAgICBub0FueVJlZW50cmFuY3kKICAgIG9ubHkob3duZXIpCiAgICB7CiAgICAgICAgLy8gdHJhbnNmZXIgZnVuZHMgdG8gb3duZXIKICAgICAgICBpZiAoIW93bmVyLnNlbmQodGhpcy5iYWxhbmNlKSkgdGhyb3c7CgogICAgICAgIC8vbm90aWZ5IHRva2VuIGNvbnRyYWN0IHRvIHN0YXJ0CiAgICAgICAgaWYgKFRPS0VOLmNhbGwoYnl0ZXM0KHNoYTMoInN0YXJ0KCkiKSkpKSB7CiAgICAgICAgICAgIFRPS0VOX1NUQVJURUQgPSB0cnVlOwogICAgICAgICAgICBUb2tlblN0YXJ0ZWQoVE9LRU4pOwogICAgICAgIH0KICAgIH0KCiAgICBldmVudCBUb2tlblN0YXJ0ZWQoYWRkcmVzcyB0b2tlbkFkZHIpOwoKICAgIC8vdGhlcmUgYXJlIGFyb3VuZCA0MCBhZGRyZXNzZXMgaW4gUFJFU0FMRV9BRERSRVNTRVMgbGlzdC4gRXZlcnl0aGluZyBmaXRzIGludG8gc2luZ2xlIFR4LgogICAgZnVuY3Rpb24gbWludEFsbEJvbnVzZXMoKSBleHRlcm5hbAogICAgaW5TdGF0ZShTdGF0ZS5CT05VU19NSU5USU5HKQogICAgbm9BbnlSZWVudHJhbmN5CiAgICB7CiAgICAgICAgYXNzZXJ0KCFhbGxCb251c2VzQXJlTWludGVkKTsKICAgICAgICBhbGxCb251c2VzQXJlTWludGVkID0gdHJ1ZTsKCiAgICAgICAgdWludCBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVCA9IFRFQU1fQk9OVVNfUEVSX0NFTlQgKyBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7CgogICAgICAgIHVpbnQgdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251cyA9IG1pbnRQcmVzYWxlQm9udXNlcygpOwogICAgICAgIHVpbnQgdG90YWxfY29sbGVjdGVkX2Ftb3VudCA9IHRvdGFsX3JlY2VpdmVkX2Ftb3VudCArIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7CiAgICAgICAgdWludCBleHRyYV9hbW91bnQgPSB0b3RhbF9jb2xsZWN0ZWRfYW1vdW50ICogVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQgLyAoMTAwIC0gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQpOwogICAgICAgIHVpbnQgZXh0cmFfdGVhbV9hbW91bnQgPSBleHRyYV9hbW91bnQgKiBURUFNX0JPTlVTX1BFUl9DRU5UIC8gVEVBTV9BTkRfUEFSVE5FUlNfUEVSX0NFTlQ7CiAgICAgICAgdWludCBleHRyYV9wYXJ0bmVyc19hbW91bnQgPSBleHRyYV9hbW91bnQgKiBBRFZJU09SU19BTkRfUEFSVE5FUlNfUEVSX0NFTlQgLyBURUFNX0FORF9QQVJUTkVSU19QRVJfQ0VOVDsKCiAgICAgICAgLy9iZWF1dGlmeSB0b3RhbCBzdXBwbHk6IHJvdW5kIGRvd24gdG8gZnVsbCBldGguCiAgICAgICAgdWludCB0b3RhbF90b19taW50ID0gdG90YWxfY29sbGVjdGVkX2Ftb3VudCArIGV4dHJhX2Ftb3VudDsKICAgICAgICB1aW50IHJvdW5kX3JlbWFpbmRlciA9IHRvdGFsX3RvX21pbnQgLSAodG90YWxfdG9fbWludCAvIDEgZXRoZXIgKiAxIGV0aGVyKTsKICAgICAgICBleHRyYV90ZWFtX2Ftb3VudCAtPSByb3VuZF9yZW1haW5kZXI7IC8vdGhpcyB3aWxsIHJlZHVjZSB0b3RhbF9zdXBwbHkgdG8gcm91bmRlZCB2YWx1ZQoKICAgICAgICAvL21pbnQgZ3JvdXAgYm9udXNlcwogICAgICAgIF9taW50KGV4dHJhX3RlYW1fYW1vdW50ICwgVEVBTV9HUk9VUF9XQUxMRVQpOwogICAgICAgIF9taW50KGV4dHJhX3BhcnRuZXJzX2Ftb3VudCwgQURWSVNFUlNfQU5EX0ZSSUVORFNfV0FMTEVUKTsKCiAgICB9CgogICAgZnVuY3Rpb24gbWludFByZXNhbGVCb251c2VzKCkgaW50ZXJuYWwgcmV0dXJucyh1aW50IGFtb3VudCkgewogICAgICAgIHVpbnQgdG90YWxfcHJlc2FsZV9hbW91bnRfd2l0aF9ib251cyA9IDA7CiAgICAgICAgLy9taW50IHByZXNhbGUgYm9udXNlcwogICAgICAgIGZvcih1aW50IGk9MDsgaSA8IFBSRVNBTEVfQUREUkVTU0VTLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYWRkciA9IFBSRVNBTEVfQUREUkVTU0VTW2ldOwogICAgICAgICAgICB2YXIgYW1vdW50X3dpdGhfYm9udXMgPSBwcmVzYWxlVG9rZW5BbW91bnQoYWRkcik7CiAgICAgICAgICAgIGlmIChhbW91bnRfd2l0aF9ib251cz4wKSB7CiAgICAgICAgICAgICAgICBfbWludChhbW91bnRfd2l0aF9ib251cywgYWRkcik7CiAgICAgICAgICAgICAgICB0b3RhbF9wcmVzYWxlX2Ftb3VudF93aXRoX2JvbnVzICs9IGFtb3VudF93aXRoX2JvbnVzOwogICAgICAgICAgICB9CiAgICAgICAgfS8vZm9yCiAgICAgICAgcmV0dXJuIHRvdGFsX3ByZXNhbGVfYW1vdW50X3dpdGhfYm9udXM7CiAgICB9CgogICAgZnVuY3Rpb24gcHJlc2FsZVRva2VuQW1vdW50KGFkZHJlc3MgYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnModWludCl7CiAgICAgICAgdWludCBwcmVzYWxlX2JhbGFuY2UgPSBQUkVTQUxFX0JBTEFOQ0VTLmJhbGFuY2VzKGFkZHIpOwogICAgICAgIGlmIChwcmVzYWxlX2JhbGFuY2UgPiAwKSB7CiAgICAgICAgICAgIC8vIHRoaXMgY2FsY3VsYXRpb24gaXMgYWJvdXQgd2FpdmVkIHByZS1zYWxlIGJvbnVzLgogICAgICAgICAgICAvLyByYXdWb3RlIGNvbnRhaW5zIGEgdmFsdWUgWzAuLjEgZXRoZXJdLgogICAgICAgICAgICAvLyAgICAgMCBldGhlciAgICAtIG1lYW5zICJkZWZhdWx0IHZhbHVlIiBvciAibm8gdm90ZSIgOiAxMDAlIGJvbnVzIHNhdmVkCiAgICAgICAgICAgIC8vICAgICAxIGV0aGVyICAgIC0gbWVhbnMgInZvdGUgMTAwJSIgOiAxMDAlIGJvbnVzIHNhdmVkCiAgICAgICAgICAgIC8vICAgIDw9MTAgZmlubmV5IC0gc3BlY2lhbCB2YWx1ZSAidm90ZSAwJSIgOiBubyBib251cyBhdCBhbGwgKDEwMCUgYm9udXMgd2FpdmVkKS4KICAgICAgICAgICAgLy8gIG90aGVyIHZhbHVlIC0gIlBSRV9TQUxFX0JPTlVTX1BFUl9DRU5UICogcmF3Vm90ZSAvIDEgZXRoZXIiIGlzIGFuIGVmZmVjdGl2ZSBib251cyBwZXIgY2VudCBmb3IgcGFydGljdWxhciBwcmVzYWxlIG1lbWJlci4KICAgICAgICAgICAgLy8KICAgICAgICAgICAgdmFyIHJhd1ZvdGUgPSBQUkVTQUxFX0JPTlVTX1ZPVElORy5yYXdWb3RlcyhhZGRyKTsKICAgICAgICAgICAgaWYgKHJhd1ZvdGUgPT0gMCkgICAgICAgICAgICAgIHJhd1ZvdGUgPSAxIGV0aGVyOyAvL3NwZWNpYWwgY2FzZSAibm8gdm90ZSIgKGRlZmF1bHQgdmFsdWUpID09PiAoMSBldGhlciBpcyAxMDAlKQogICAgICAgICAgICBlbHNlIGlmIChyYXdWb3RlIDw9IDEwIGZpbm5leSkgcmF3Vm90ZSA9IDA7ICAgICAgIC8vc3BlY2lhbCBjYXNlICIwJSIgKG5vIGJvbnVzKSAgICAgICAgICAgPT0+ICgwIGV0aGVyIGlzICAgMCUpCiAgICAgICAgICAgIGVsc2UgaWYgKHJhd1ZvdGUgPiAxIGV0aGVyKSAgICByYXdWb3RlID0gMSBldGhlcjsgLy9tYXggYm9udXMgaXMgMTAwJSAoc2hvdWxkIG5vdCBvY2N1cikKICAgICAgICAgICAgdmFyIHByZXNhbGVfYm9udXMgPSBwcmVzYWxlX2JhbGFuY2UgKiBQUkVfU0FMRV9CT05VU19QRVJfQ0VOVCAqIHJhd1ZvdGUgLyAxIGV0aGVyIC8gMTAwOwogICAgICAgICAgICByZXR1cm4gcHJlc2FsZV9iYWxhbmNlICsgcHJlc2FsZV9ib251czsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoVG9Ub2tlbihNaW50YWJsZVRva2VuIHRva2VuQWRkcikgZXh0ZXJuYWwKICAgIGluU3RhdGUoU3RhdGUuQkVGT1JFX1NUQVJUKQogICAgb25seShvd25lcikKICAgIHsKICAgICAgICBUT0tFTiA9IHRva2VuQWRkcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhYm9ydCgpIGV4dGVybmFsCiAgICBpblN0YXRlQmVmb3JlKFN0YXRlLlJFRlVORF9SVU5OSU5HKQogICAgb25seShvd25lcikKICAgIHsKICAgICAgICBpc0Fib3J0ZWQgPSB0cnVlOwogICAgfQoKICAgIC8vCiAgICAvLyA9PT09PT09IGltcGxlbWVudGF0aW9uIG1ldGhvZHMgPT09PT09PQogICAgLy8KCiAgICBmdW5jdGlvbiBfc2VuZFJlZnVuZCgpIHByaXZhdGUKICAgIHRva2VuSG9sZGVyc09ubHkKICAgIHsKICAgICAgICAvLyBsb2FkIGJhbGFuY2UgdG8gcmVmdW5kIHBsdXMgYW1vdW50IGN1cnJlbnRseSBzZW50CiAgICAgICAgdmFyIGFtb3VudF90b19yZWZ1bmQgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXSArIG1zZy52YWx1ZTsKICAgICAgICAvLyByZXNldCBiYWxhbmNlCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIC8vIHNlbmQgcmVmdW5kIGJhY2sgdG8gc2VuZGVyCiAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoYW1vdW50X3RvX3JlZnVuZCkpIHRocm93OwogICAgfQoKICAgIGZ1bmN0aW9uIF9yZWNlaXZlRnVuZHNVcFRvKHVpbnQgYW1vdW50KSBwcml2YXRlCiAgICBub3RUb29TbWFsbEFtb3VudE9ubHkKICAgIHsKICAgICAgICByZXF1aXJlIChhbW91bnQgPiAwKTsKICAgICAgICBpZiAobXNnLnZhbHVlID4gYW1vdW50KSB7CiAgICAgICAgICAgIC8vIGFjY2VwdCBhbW91bnQgb25seSBhbmQgcmV0dXJuIGNoYW5nZQogICAgICAgICAgICB2YXIgY2hhbmdlX3RvX3JldHVybiA9IG1zZy52YWx1ZSAtIGFtb3VudDsKICAgICAgICAgICAgaWYgKCFtc2cuc2VuZGVyLnNlbmQoY2hhbmdlX3RvX3JldHVybikpIHRocm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGFjY2VwdCBmdWxsIGFtb3VudAogICAgICAgICAgICBhbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgfQogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA9PSAwKSBpbnZlc3RvcnMucHVzaChtc2cuc2VuZGVyKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgdG90YWxfcmVjZWl2ZWRfYW1vdW50ICs9IGFtb3VudDsKICAgICAgICBfbWludChhbW91bnQsbXNnLnNlbmRlcik7CiAgICB9CgogICAgZnVuY3Rpb24gX21pbnQodWludCBhbW91bnQsIGFkZHJlc3MgYWNjb3VudCkgcHJpdmF0ZSB7CiAgICAgICAgTWludGFibGVUb2tlbihUT0tFTikubWludChhbW91bnQgKiBUT0tFTl9QRVJfRVRILCBhY2NvdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjdXJyZW50U3RhdGUoKSBwcml2YXRlIGNvbnN0YW50CiAgICByZXR1cm5zIChTdGF0ZSkKICAgIHsKICAgICAgICBpZiAoaXNBYm9ydGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2UgPiAwCiAgICAgICAgICAgICAgICAgICA/IFN0YXRlLlJFRlVORF9SVU5OSU5HCiAgICAgICAgICAgICAgICAgICA6IFN0YXRlLkNMT1NFRDsKICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IENPTU1VTklUWV9TQUxFX1NUQVJUIHx8IGFkZHJlc3MoVE9LRU4pID09IDB4MCkgewogICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkJFRk9SRV9TVEFSVDsKICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8IFBSSU9SSVRZX1NBTEVfU1RBUlQpIHsKICAgICAgICAgICAgcmV0dXJuIFN0YXRlLkNPTU1VTklUWV9TQUxFOwogICAgICAgIH0gZWxzZSBpZiAoYmxvY2subnVtYmVyIDwgUFVCTElDX1NBTEVfU1RBUlQpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsX3JlY2VpdmVkX2Ftb3VudCA8IENPTU1VTklUWV9QTFVTX1BSSU9SSVRZX1NBTEVfQ0FQCiAgICAgICAgICAgICAgICA/IFN0YXRlLlBSSU9SSVRZX1NBTEUKICAgICAgICAgICAgICAgIDogU3RhdGUuUFJJT1JJVFlfU0FMRV9GSU5JU0hFRDsKICAgICAgICB9IGVsc2UgaWYgKGJsb2NrLm51bWJlciA8PSBQVUJMSUNfU0FMRV9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50IDwgTUFYX1RPVEFMX0FNT1VOVF9UT19SRUNFSVZFKSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5QVUJMSUNfU0FMRTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYmFsYW5jZSA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5DTE9TRUQ7CiAgICAgICAgfSBlbHNlIGlmIChibG9jay5udW1iZXIgPD0gV0lUSERSQVdBTF9FTkQgJiYgdG90YWxfcmVjZWl2ZWRfYW1vdW50ID49IE1JTl9UT1RBTF9BTU9VTlRfVE9fUkVDRUlWRSkgewogICAgICAgICAgICByZXR1cm4gYWxsQm9udXNlc0FyZU1pbnRlZAogICAgICAgICAgICAgICAgPyBTdGF0ZS5XSVRIRFJBV0FMX1JVTk5JTkcKICAgICAgICAgICAgICAgIDogU3RhdGUuQk9OVVNfTUlOVElORzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gU3RhdGUuUkVGVU5EX1JVTk5JTkc7CiAgICAgICAgfQogICAgfQoKICAgIC8vCiAgICAvLyA9PT09PT09PT09PT0gbW9kaWZpZXJzID09PT09PT09PT09PQogICAgLy8KCiAgICAvL2ZhaWxzIGlmIHN0YXRlIGRvc24ndCBtYXRjaAogICAgbW9kaWZpZXIgaW5TdGF0ZShTdGF0ZSBzdGF0ZSkgewogICAgICAgIGlmIChzdGF0ZSAhPSBjdXJyZW50U3RhdGUoKSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL2ZhaWxzIGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIG5vdCBiZWZvcmUgdGhhbiB0aGUgZ2l2ZW4gb25lLgogICAgbW9kaWZpZXIgaW5TdGF0ZUJlZm9yZShTdGF0ZSBzdGF0ZSkgewogICAgICAgIGlmIChjdXJyZW50U3RhdGUoKSA+PSBzdGF0ZSkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL2FjY2VwdHMgY2FsbHMgZnJvbSB0b2tlbiBob2xkZXJzIG9ubHkKICAgIG1vZGlmaWVyIHRva2VuSG9sZGVyc09ubHkoKXsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPT0gMCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCgogICAgLy8gZG9uYHQgYWNjZXB0IHRyYW5zYWN0aW9ucyB3aXRoIHZhbHVlIGxlc3MgdGhhbiBhbGxvd2VkIG1pbmltdW0KICAgIG1vZGlmaWVyIG5vdFRvb1NtYWxsQW1vdW50T25seSgpewogICAgICAgIGlmIChtc2cudmFsdWUgPCBNSU5fQUNDRVBURURfQU1PVU5UKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8vCiAgICAvLyA9PT09PT09PT09PT0gREFUQSA9PT09PT09PT09PT0KICAgIC8vCgogICAgYWRkcmVzc1tdIFBSRVNBTEVfQUREUkVTU0VTID0gWwogICAgICAgIDB4RjU1REZkMkIwMkNmMzI4MjY4MEM5NEJEMDFFOURhMDQ0MDQ0RTZBMiwKICAgICAgICAweDBENDBCNTM4Mjg5NDhiMzQwNjczNjc0QWU2NUVlN2Y1RDg0ODhlMzMsCiAgICAgICAgMHgwZWE2OTBkNDY2ZDZiYmQxOEYxMjRFMjA0RUE0ODZhNEJmOTM0Y2JBLAogICAgICAgIDB4NmQyNUI5ZjQwYjkyQ2NGMTU4MjUwNjI1QTE1MjU3NDYwMzQ2NTE5MiwKICAgICAgICAweDQ4MURhMEYxZTg5YzIwNjcxMkJDZUE0ZjdENkU2MGQ3YjQyZjZDNkMsCiAgICAgICAgMHg0MTZFRGE1RDZFZDI5Q0FjM2U2RDk3QzEwMmQ2MUJDNTc4QzVkQjg3LAogICAgICAgIDB4RDc4QWM2RkZjOTBFMDg0RjVmRDU2MzU2M0NjOWZEMzNlRTMwM2YxOCwKICAgICAgICAweGU2NzE0YWI1MjNhY0VjZjliODVkODgwNDkyQTJBY0RCZTQxODQ4OTIsCiAgICAgICAgMHgyODVBOWNBNWZFOWVlODU0NDU3MDE2YTdhNWQzQTNCQjk1NTM4MDkzLAogICAgICAgIDB4NjAwY2E2MzcyZjMxMkIwODEyMDVCMkMzZEE3MjUxN2E2MDNhMTVDYywKICAgICAgICAweDJiOGQ1QzkyMDlmQkQ1MDBGZDgxN0Q5NjA4MzBBQzY3MThiODgxMTIsCiAgICAgICAgMHg0QjE1RGQyM0U1ZjkwNjJlNEZCM2E5QjdERUNGNjUzQzAyMTVlNTYwLAogICAgICAgIDB4RDY3NDQ5ZTZBQjIzYzFmNDZkZWE3N2QzZjVFNUQ0N0ZmMzNEYzlhOSwKICAgICAgICAweGQwQURhRDdlZDgxQWZEYTAzOTk2OTU2NkNlYjg0MjNFMGFiMTRkOTAsCiAgICAgICAgMHgyNDVmMjc3OTZhNDRkN0UzRDMwNjU0ZUQ2Mjg1MGZmMDlFRTg1NjU2LAogICAgICAgIDB4NjM5RDZlQzJjZWY0ZDZmNzEzMGI0MDEzMkIzQjZGNWI2NjdlNTEwNSwKICAgICAgICAweDVlOWE2OUI4NjU2OTE0OTY1ZDY5ZDhkYTQ5YzM3MDlGMGJGMkI1RWYsCiAgICAgICAgMHgwODMyYzNCODAxMzE5YjYyYUIxRDM1MzU2MTVkMWZlOWFGYzMzOTdBLAogICAgICAgIDB4ZjZEZDYzMTI3OTM3NzIwNTgxOEMzYTY3MjVFZUVGQjlEMEY2YjlGMywKICAgICAgICAweDQ3Njk2MDU0ZTcxZTRjM2Y4OTkxMTk2MDFhMjU1YTcwNjVDMzA4N0IsCiAgICAgICAgMHhmMTA3YkU2YzY4MzNmNjFBMjRjNjRENjNjOEE3ZmNENzg0QWJmZjA2LAogICAgICAgIDB4MDU2ZjA3MkJkMjI0MDMxNWI3MDhEQkNiRERFODBkNDAwZjAzOTRhMSwKICAgICAgICAweDllNUJhZUMyNDREOGNDRDQ5NDc3MDM3RTI4ZWQ3MDU4NEVlQUQ5NTYsCiAgICAgICAgMHg0MEEwYjJjMUI0RTMwRjI3ZTIxREY5NGU3MzQ2NzE4NTZiNDg1OTY2LAogICAgICAgIDB4ODRmMDYyMEE1NDdhNEQxNEE3OTg3NzcwYzRGNUMyNWQ0ODhkNjMzNSwKICAgICAgICAweDAzNkFjMTFjMTYxQzA5ZDk0Y0EzOUY3QjI0QzFiQzgyMDQ2YzMzMkIsCiAgICAgICAgMHgyOTEyQTE4QzkwMmRFNmY5NTMyMUQ2ZDYzMDVEN0I4MEVlYzRDMDU1LAogICAgICAgIDB4RTFBZDMwOTcxYjgzYzE3RTJBMjRjMDMzNENCNDVmODA4QWJFQmM4NywKICAgICAgICAweDA3ZjM1YjdGRTczNWM0OUZENTA1MUQ1YTBDMmU3NGM5MTc3ZkVhNmQsCiAgICAgICAgMHgxMTY2OUNjZTZBRjNjZTFFZjM3Nzc3MjFmQ0MwZWVmMGVFNTdFYWJhLAogICAgICAgIDB4QkRiYUY2NDM0ZDQwRDYzNTVCMWU4MGU0MENjNEFCOUM2OEQ5NjExNiwKICAgICAgICAweDE3MTI1YjU5YWM1MWNFZTAyOUU0YkQ3OEQ3ZjU5NDdEMWVBNDlCQjIsCiAgICAgICAgMHhBMzgyQTNBNjVjM0Y4ZWUyYjcyNkEyNTM1QjNjMzRBODlEOTA5NEQ0LAogICAgICAgIDB4QUI3OGM4NzgxZkI2NEJlZDM3QjI3NEM1RUU3NTllRTMzNDY1ZjFmMywKICAgICAgICAweEU3NEYyMDYyNjEyRTNjQUU4YTkzRTI0YjJmMEQzYTIxMzMzNzM4ODQsCiAgICAgICAgMHg1MDUxMjA5NTdBOTgwNjgyN0Y4RjExMUExMjM1NjFFODJDNDBiQzc4LAogICAgICAgIDB4MDBBNDY5MjJCMUM1NEFlNmI1ODE4QzQ5Qjk3RTAzRUI0QkIzNTJlMSwKICAgICAgICAweEU3NmZFNTJhMjUxQzhGM2E1ZGNENjU3RTQ3QTZDOEQxNkZkZjRiRkEKICAgIF07Cgp9Ly8gQ3Jvd2RzYWxlTWludGVy'.
	

]
