Class {
	#name : #SRT29d680a0f573864198a8707998fbc4bc1c99d1ea,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT29d680a0f573864198a8707998fbc4bc1c99d1ea >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjEwOwoKY29udHJhY3QgVG9rZW4gewogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCBhbW91bnQpIHJldHVybnMoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IGFtb3VudCkgcmV0dXJucyhib29sKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIGFkZHIpIGNvbnN0YW50IHJldHVybnModWludCk7Cn0KCmNvbnRyYWN0IE93bmVkIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgLyoqCiAgICAgKiBFdmVudHMKICAgICAqLwogICAgZXZlbnQgQ2hhbmdlZE93bmVyKGFkZHJlc3MgaW5kZXhlZCBuZXdfb3duZXIpOwoKICAgIC8qKgogICAgICogRnVuY3Rpb25hbGl0eQogICAgICovCgogICAgZnVuY3Rpb24gT3duZWQoKSB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciBleHRlcm5hbCB7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgZXh0ZXJuYWwgewogICAgICAgIGlmIChtc2cuc2VuZGVyID09IG5ld093bmVyKSB7CiAgICAgICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICAgICAgICAgIG5ld093bmVyID0gMHgwOwogICAgICAgICAgICBDaGFuZ2VkT3duZXIob3duZXIpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgSU93bmVkIHsKICAgIGZ1bmN0aW9uIG93bmVyKCkgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpOwp9CgovKioKICogU2F2aW5ncyBpcyBhIGNvbnRyYWN0IHRoYXQgcmVsZWFzZXMgVG9rZW5zIG9uIGEgcHJlZGVmaW5lZAogKiBzY2hlZHVsZSwgYW5kIGFsbG9jYXRlcyBib251cyB0b2tlbnMgdXBvbiB3aXRoZHJhd2FsIG9uIGEKICogcHJvcG9ydGlvbmFsIGJhc2lzLCBkZXRlcm1pbmVkIGJ5IHRoZSByYXRpbyBvZiBkZXBvc2l0ZWQgdG9rZW5zCiAqIHRvIHRvdGFsIG93bmVkIHRva2Vucy4KICoKICogVGhlIGRpc3RyaWJ1dGlvbiBzY2hlZHVsZSBjb25zaXN0cyBvZiBhIG1vbnRobHkgd2l0aGRyYXdhbCBzY2hlZHVsZQogKiByZXNwb25zaWJsZSBmb3IgZGlzdHJpYnV0aW9uIDc1JSBvZiB0aGUgdG90YWwgc2F2aW5ncywgYW5kIGEKICogb25lLW9mZiB3aXRoZHJhd2FsIGV2ZW50IGF2YWlsYWJsZSBiZWZvcmUgb3IgYXQgdGhlIHN0YXJ0IG9mIHRoZQogKiB3aXRoZHJhd2FsIHNjaGVkdWxlLCBkaXN0cmlidXRpbmcgMjUlIG9mIHRoZSB0b3RhbCBzYXZpbmdzLgogKgogKiBUbyBiZSBleGFjdCwgdXBvbiBjb250cmFjdCBkZXBsb3ltZW50IHRoZXJlIG1heSBiZSBhIHBlcmlvZCBvZiB0aW1lIGluIHdoaWNoCiAqIG9ubHkgdGhlIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudCBpcyBhdmFpbGFibGUsIGRlZmluZSB0aGlzIHBlcmlvZCBvZiB0aW1lIGFzOgogKiBbdGltZXN0YW1wKHN0YXJ0KSwgdGltZXN0YW1wKHN0YXJ0QmxvY2tUaW1lc3RhbXApKSwKICoKICogVGhlbiB0aGUgcGVyaW9kaWMgd2l0aGRyYXdhbCByYW5nZSBpcyBkZWZpbmVkIGFzOgogKiBbdGltZXN0YW1wKHN0YXJ0QmxvY2tUaW1lc3RhbXApLCAraW5mKQogKgogKiBETyBOT1QgU0VORCBUT0tFTlMgVE8gVEhJUyBDT05UUkFDVC4gVXNlIHRoZSBkZXBvc2l0KCkgb3IgZGVwb3NpdFRvKCkgbWV0aG9kLgogKiBBcyBhbiBleGNlcHRpb24sIHRva2VucyB0cmFuc2ZlcnJlZCB0byB0aGlzIGNvbnRyYWN0IGJlZm9yZSBsb2NraW5nIGFyZSB0aGUKICogYm9udXMgdG9rZW5zIHRoYXQgYXJlIGRpc3RyaWJ1dGVkLgogKi8KY29udHJhY3QgU2F2aW5ncyBpcyBPd25lZCB7CiAgICAvKioKICAgICAqIFBlcmlvZHMgaXMgdGhlIHRvdGFsIG1vbnRobHkgd2l0aGRyYXdhYmxlIGFtb3VudCwgbm90IGNvdW50aW5nIHRoZQogICAgICogc3BlY2lhbCB3aXRoZHJhd2FsLgogICAgICovCiAgICB1aW50IHB1YmxpYyBwZXJpb2RzOwoKICAgIC8qKgogICAgICogdDBzcGVjaWFsIGlzIGFuIGFkZGl0aW9uYWwgbXVsdGlwbGllciB0aGF0IGRldGVybWluZXMgd2hhdAogICAgICogZnJhY3Rpb24gb2YgdGhlIHRvdGFsIGRpc3RyaWJ1dGlvbiBpcyBkaXN0cmlidXRlZCBpbiB0aGUKICAgICAqIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudC4gSXQgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoCiAgICAgKiBhIHBlcmlvZGljIG11bHRpcGxpZXIgKHApIHRvIGRldGVybWluZSB0aGUgdG90YWwgc2F2aW5ncyB3aXRoZHJhd2FibGUKICAgICAqIHRvIHRoZSB1c2VyIGF0IHRoYXQgcG9pbnQgaW4gdGltZS4KICAgICAqCiAgICAgKiBUaGUgdmFsdWUgaXMgbm90IHNldCwgaXQgaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiBwZXJpb2RzCiAgICAgKi8KICAgIHVpbnQgcHVibGljIHQwc3BlY2lhbDsKCiAgICB1aW50IGNvbnN0YW50IHB1YmxpYyBpbnRlcnZhbFNlY3MgPSAzMCBkYXlzOwogICAgdWludCBjb25zdGFudCBwdWJsaWMgcHJlY2lzaW9uID0gMTAgKiogMTg7CgoKICAgIC8qKgogICAgICogRXZlbnRzCiAgICAgKi8KICAgIGV2ZW50IFdpdGhkcmF3cyhhZGRyZXNzIGluZGV4ZWQgd2hvLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBEZXBvc2l0KGFkZHJlc3MgaW5kZXhlZCB3aG8sIHVpbnQgYW1vdW50KTsKCiAgICBib29sIHB1YmxpYyBpbml0ZWQ7CiAgICBib29sIHB1YmxpYyBsb2NrZWQ7CiAgICB1aW50IHB1YmxpYyBzdGFydEJsb2NrVGltZXN0YW1wID0gMDsKCiAgICBUb2tlbiBwdWJsaWMgdG9rZW47CgogICAgLy8gZmFjZSB2YWx1ZSBkZXBvc2l0ZWQgYnkgYW4gYWRkcmVzcyBiZWZvcmUgbG9ja2luZwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgZGVwb3NpdGVkOwoKICAgIC8vIHRvdGFsIGZhY2UgdmFsdWUgZGVwb3NpdGVkOyBzdW0gb2YgZGVwb3NpdGVkCiAgICB1aW50IHB1YmxpYyB0b3RhbGZ2OwoKICAgIC8vIHRoZSB0b3RhbCByZW1haW5pbmcgdmFsdWUKICAgIHVpbnQgcHVibGljIHJlbWFpbmRlcjsKCiAgICAvKioKICAgICAqIFRvdGFsIHRva2VucyBvd25lZCBieSB0aGUgY29udHJhY3QgYWZ0ZXIgbG9ja2luZywgYW5kIHBvc3NpYmx5CiAgICAgKiB1cGRhdGVkIGJ5IHRoZSBmb3VuZGF0aW9uIGFmdGVyIHN1YnNlcXVlbnQgc2FsZXMuCiAgICAgKi8KICAgIHVpbnQgcHVibGljIHRvdGFsOwoKICAgIC8vIHRoZSB0b3RhbCB2YWx1ZSB3aXRoZHJhd24KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHdpdGhkcmF3bjsKCiAgICBib29sIHB1YmxpYyBudWxsaWZpZWQ7CgogICAgbW9kaWZpZXIgaXNQYXJ0aWNpcGFudCgpIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBtc2cuc2VuZGVyID09IDB4NDc3OGJFOTJEZDVjNTEwMzViZjgwRmNhNTY0YmE1RTdGYWQ1RkI2ZCB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IDB4ODU2NzQ2MmI4RTgzMDM2MzdGMDAwNEIyRTY2NDk5MzMxNGU1OEJENyB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IDB4MGUyNEQ4RmNkZjBjMzE5ZEYwMzk5OENjNTNGNEZCQTAzNUQ5YTRmOSB8fAogICAgICAgICAgICBtc2cuc2VuZGVyID09IDB4YjQ5M2M5QzBDMGFCZmQ5ODQ3YmFCNTMyMzE3NzRmMTNCRjg4MmVFOQogICAgICAgICk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBub3ROdWxsaWZpZWQoKSB7IHJlcXVpcmUoIW51bGxpZmllZCk7IF87IH0KCiAgICBtb2RpZmllciBwcmVMb2NrKCkgeyByZXF1aXJlKCFsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCA9PSAwKTsgXzsgfQoKICAgIC8qKgogICAgICogTG9jayBjYWxsZWQsIGRlcG9zaXRzIG5vIGxvbmdlciBhdmFpbGFibGUuCiAgICAgKi8KICAgIG1vZGlmaWVyIHBvc3RMb2NrKCkgeyByZXF1aXJlKGxvY2tlZCk7IF87IH0KCiAgICAvKioKICAgICAqIFByZXN0YXJ0LCBzdGF0ZSBpcyBhZnRlciBsb2NrLCBiZWZvcmUgc3RhcnQKICAgICAqLwogICAgbW9kaWZpZXIgcHJlU3RhcnQoKSB7IHJlcXVpcmUobG9ja2VkICYmIHN0YXJ0QmxvY2tUaW1lc3RhbXAgPT0gMCk7IF87IH0KCiAgICAvKioKICAgICAqIFN0YXJ0IGNhbGxlZCwgdGhlIHNhdmluZ3MgY29udHJhY3QgaXMgbm93IGZpbmFsaXplZCwgYW5kIHdpdGhkcmF3YWxzCiAgICAgKiBhcmUgbm93IHBlcm1pdHRlZC4KICAgICAqLwogICAgbW9kaWZpZXIgcG9zdFN0YXJ0KCkgeyByZXF1aXJlKGxvY2tlZCAmJiBzdGFydEJsb2NrVGltZXN0YW1wICE9IDApOyBfOyB9CgogICAgLyoqCiAgICAgKiBVbmluaXRpYWxpemVkIHN0YXRlLCBiZWZvcmUgaW5pdCBpcyBjYWxsZWQuIE1haW5seSB1c2VkIGFzIGEgZ3VhcmQgdG8KICAgICAqIGZpbmFsaXplIHBlcmlvZHMgYW5kIHQwc3BlY2lhbC4KICAgICAqLwogICAgbW9kaWZpZXIgbm90SW5pdGlhbGl6ZWQoKSB7IHJlcXVpcmUoIWluaXRlZCk7IF87IH0KCiAgICAvKioKICAgICAqIFBvc3QgaW5pdGlhbGl6YXRpb24gc3RhdGUsIG1haW5seSB1c2VkIHRvIGd1YXJhbnRlZSB0aGF0CiAgICAgKiBwZXJpb2RzIGFuZCB0MHNwZWNpYWwgaGF2ZSBiZWVuIHNldCBwcm9wZXJseSBiZWZvcmUgc3RhcnRpbmcKICAgICAqIHRoZSB3aXRoZHJhd2FsIHByb2Nlc3MuCiAgICAgKi8KICAgIG1vZGlmaWVyIGluaXRpYWxpemVkKCkgeyByZXF1aXJlKGluaXRlZCk7IF87IH0KCiAgICAvKioKICAgICAqIFJldmVydCB1bmRlciBhbGwgY29uZGl0aW9ucyBmb3IgZmFsbGJhY2ssIGNoZWFwZXIgbWlzdGFrZXMKICAgICAqIGluIHRoZSBmdXR1cmU/CiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgewogICAgICAgIHJldmVydCgpOwogICAgfQoKICAgIC8qKgogICAgICogTnVsbGlmeSBmdW5jdGlvbmFsaXR5IGlzIGludGVuZGVkIHRvIGRpc2FibGUgdGhlIGNvbnRyYWN0LgogICAgICovCiAgICBmdW5jdGlvbiBudWxsaWZ5KCkgb25seU93bmVyIHsKICAgICAgICBudWxsaWZpZWQgPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogSW5pdGlhbGl6YXRpb24gZnVuY3Rpb24sIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgY29udHJhY3QgZGVwbG95bWVudC4gVGhlCiAgICAgKiBhZGRpdGlvbiBvZiB0aGlzIGZ1bmN0aW9uIGFsbG93cyBjb250cmFjdCBjb21waWxhdGlvbiB0byBiZSBzaW1wbGlmaWVkCiAgICAgKiB0byBvbmUgY29udHJhY3QsIGluc3RlYWQgb2YgdHdvLgogICAgICoKICAgICAqIHBlcmlvZHMgYW5kIHQwc3BlY2lhbCBhcmUgZmluYWxpemVkLCBhbmQgZWZmZWN0aXZlbHkgaW52YXJpYW50LCBhZnRlcgogICAgICogaW5pdCBpcyBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lLgogICAgICovCiAgICBmdW5jdGlvbiBpbml0KHVpbnQgX3BlcmlvZHMsIHVpbnQgX3Qwc3BlY2lhbCkgb25seU93bmVyIG5vdEluaXRpYWxpemVkIHsKICAgICAgICByZXF1aXJlKF9wZXJpb2RzICE9IDApOwogICAgICAgIHBlcmlvZHMgPSBfcGVyaW9kczsKICAgICAgICB0MHNwZWNpYWwgPSBfdDBzcGVjaWFsOwogICAgfQoKICAgIGZ1bmN0aW9uIGZpbmFsaXplSW5pdCgpIG9ubHlPd25lciBub3RJbml0aWFsaXplZCB7CiAgICAgICAgaW5pdGVkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIHRvaykgb25seU93bmVyIHsKICAgICAgICB0b2tlbiA9IFRva2VuKHRvayk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb2NrIGlzIGNhbGxlZCBieSB0aGUgb3duZXIgdG8gbG9jayB0aGUgc2F2aW5ncyBjb250cmFjdAogICAgICogc28gdGhhdCBubyBtb3JlIGRlcG9zaXRzIG1heSBiZSBtYWRlLgogICAgICovCiAgICBmdW5jdGlvbiBsb2NrKCkgb25seU93bmVyIHsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogU3RhcnRzIHRoZSBkaXN0cmlidXRpb24gb2Ygc2F2aW5ncywgaXQgc2hvdWxkIGJlIGNhbGxlZAogICAgICogYWZ0ZXIgbG9jaygpLCBvbmNlIGFsbCBvZiB0aGUgYm9udXMgdG9rZW5zIGFyZSBzZW5kIHRvIHRoaXMgY29udHJhY3QsCiAgICAgKiBhbmQgbXVsdGlNaW50IGhhcyBiZWVuIGNhbGxlZC4KICAgICAqLwogICAgZnVuY3Rpb24gc3RhcnQodWludCBfc3RhcnRCbG9ja1RpbWVzdGFtcCkgb25seU93bmVyIGluaXRpYWxpemVkIHByZVN0YXJ0IHsKICAgICAgICBzdGFydEJsb2NrVGltZXN0YW1wID0gX3N0YXJ0QmxvY2tUaW1lc3RhbXA7CiAgICAgICAgdWludDI1NiB0b2tlbkJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgdG90YWwgPSB0b2tlbkJhbGFuY2U7CiAgICAgICAgcmVtYWluZGVyID0gdG9rZW5CYWxhbmNlOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgd2l0aGRyYXdhbCBpcyBsaXZlLCB1c2VmdWwgZm9yIGNoZWNraW5nIHdoZXRoZXIKICAgICAqIHRoZSBzYXZpbmdzIGNvbnRyYWN0IGlzICJsaXZlIiwgd2l0aGRyYXdhbCBlbmFibGVkLCBzdGFydGVkLgogICAgICovCiAgICBmdW5jdGlvbiBpc1N0YXJ0ZWQoKSBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgICByZXR1cm4gbG9ja2VkICYmIHN0YXJ0QmxvY2tUaW1lc3RhbXAgIT0gMDsKICAgIH0KCiAgICAvLyBpZiBzb21lb25lIGFjY2lkZW50YWxseSB0cmFuc2ZlcnMgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QsCiAgICAvLyB0aGUgb3duZXIgY2FuIHJldHVybiB0aGVtIGFzIGxvbmcgYXMgZGlzdHJpYnV0aW9uIGhhc24ndCBzdGFydGVkCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIHJlZnVuZCB1c2VycyB3aG8gYWNjaWRlbnRhbHkgdHJhbnNmZXJyZWQgdG9rZW5zIHRvIHRoaXMKICAgICAqIGNvbnRyYWN0LCBvbmx5IGF2YWlsYWJsZSBiZWZvcmUgY29udHJhY3QgaXMgbG9ja2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlZnVuZFRva2VucyhhZGRyZXNzIGFkZHIsIHVpbnQgYW1vdW50KSBvbmx5T3duZXIgcHJlTG9jayB7CiAgICAgICAgdG9rZW4udHJhbnNmZXIoYWRkciwgYW1vdW50KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIHRvdGFsIGJhbGFuY2UsIHRvIGJlIGNhbGxlZCBpbiBjYXNlIG9mIHN1YnNlcXVlbnQgc2FsZXMuIFVwZGF0ZXMKICAgICAqIHRoZSB0b3RhbCByZWNvcmRlZCBiYWxhbmNlIG9mIHRoZSBjb250cmFjdCBieSB0aGUgZGlmZmVyZW5jZSBpbiBleHBlY3RlZAogICAgICogcmVtYWluZGVyIGFuZCB0aGUgY3VycmVudCBiYWxhbmNlLiBUaGlzIG1lYW5zIGFueSBwb3NpdGl2ZSBkaWZmZXJlbmNlIHdpbGwKICAgICAqIGJlICJyZWNvcmRlZCIgaW50byB0aGUgY29udHJhY3QsIGFuZCBkaXN0cmlidXRlZCB3aXRoaW4gdGhlIHJlbWFpbmluZwogICAgICogbW9udGhzIG9mIHRoZSBUUlMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHVwZGF0ZVRvdGFsKCkgb25seU93bmVyIHBvc3RMb2NrIHsKICAgICAgICB1aW50IGN1cnJlbnQgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmVxdWlyZShjdXJyZW50ID49IHJlbWFpbmRlcik7IC8vIGZvciBzYW5pdHkKCiAgICAgICAgdWludCBkaWZmZXJlbmNlID0gKGN1cnJlbnQgLSByZW1haW5kZXIpOwogICAgICAgIHRvdGFsICs9IGRpZmZlcmVuY2U7CiAgICAgICAgcmVtYWluZGVyID0gY3VycmVudDsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIG1vbnRobHkgcGVyaW9kLCBzdGFydGluZyBhZnRlciB0aGUgc3RhcnRCbG9ja1RpbWVzdGFtcCwKICAgICAqIHBlcmlvZEF0IHdpbGwgcmV0dXJuIDAgZm9yIGFsbCB0aW1lc3RhbXBzIGJlZm9yZSBzdGFydEJsb2NrVGltZXN0YW1wLgogICAgICoKICAgICAqIFRoZXJlZm9yZSBwZXJpb2QgMCBpcyB0aGUgcmFuZ2Ugb2YgdGltZSBpbiB3aGljaCB3ZSBoYXZlIGNhbGxlZCBzdGFydCgpLAogICAgICogYnV0IGhhdmUgbm90IHlldCBwYXNzZWQgc3RhcnRCbG9ja1RpbWVzdGFtcC4gUGVyaW9kIDEgaXMgdGhlCiAgICAgKiBmaXJzdCBtb250aGx5IHBlcmlvZCwgYW5kIHNvLWZvcnRoIGFsbCB0aGUgd2F5IHVudGlsIHRoZSBsYXN0CiAgICAgKiBwZXJpb2QgPT0gcGVyaW9kcy4KICAgICAqCiAgICAgKiBOT1RFOiBub3QgZ3VhcmRlZCBzaW5jZSBubyBzdGF0ZSBtb2RpZmljYXRpb25zIGFyZSBtYWRlLiBIb3dldmVyLAogICAgICogaXQgd2lsbCByZXR1cm4gaW52YWxpZCBkYXRhIGJlZm9yZSB0aGUgcG9zdFN0YXJ0IHN0YXRlLiBJdCBpcwogICAgICogdXAgdG8gdGhlIHVzZXIgdG8gbWFudWFsbHkgY2hlY2sgdGhhdCB0aGUgY29udHJhY3QgaXMgaW4KICAgICAqIHBvc3RTdGFydCBzdGF0ZS4KICAgICAqLwogICAgZnVuY3Rpb24gcGVyaW9kQXQodWludCBfYmxvY2tUaW1lc3RhbXApIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIC8qKgogICAgICAgICAqIExvd2VyIGJvdW5kLCBjb25zaWRlciBwZXJpb2QgMCB0byBiZSB0aGUgdGltZSBiZXR3ZWVuCiAgICAgICAgICogc3RhcnQoKSBhbmQgc3RhcnRCbG9ja1RpbWVzdGFtcAogICAgICAgICAqLwogICAgICAgIGlmIChzdGFydEJsb2NrVGltZXN0YW1wID4gX2Jsb2NrVGltZXN0YW1wKQogICAgICAgICAgICByZXR1cm4gMDsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBhcHByb3ByaWF0ZSBwZXJpb2QsIGFuZCBzZXQgYW4gdXBwZXIgYm91bmQgb2YKICAgICAgICAgKiBwZXJpb2RzIC0gMS4KICAgICAgICAgKi8KICAgICAgICB1aW50IHAgPSAoKF9ibG9ja1RpbWVzdGFtcCAtIHN0YXJ0QmxvY2tUaW1lc3RhbXApIC8gaW50ZXJ2YWxTZWNzKSArIDE7CiAgICAgICAgaWYgKHAgPiBwZXJpb2RzKQogICAgICAgICAgICBwID0gcGVyaW9kczsKICAgICAgICByZXR1cm4gcDsKICAgIH0KCiAgICAvLyB3aGF0IHdpdGhkcmF3YWwgcGVyaW9kIGFyZSB3ZSBpbj8KICAgIC8vIHJldHVybnMgdGhlIHBlcmlvZCBudW1iZXIgZnJvbSBbMCwgcGVyaW9kcykKICAgIGZ1bmN0aW9uIHBlcmlvZCgpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBwZXJpb2RBdChibG9jay50aW1lc3RhbXApOwogICAgfQoKICAgIC8vIGRlcG9zaXQgeW91ciB0b2tlbnMgdG8gYmUgc2F2ZWQKICAgIC8vCiAgICAvLyB0aGUgZGVzcG9zaXRvciBtdXN0IGhhdmUgYXBwcm92ZSgpJ2QgdGhlIHRva2VucwogICAgLy8gdG8gYmUgdHJhbnNmZXJyZWQgYnkgdGhpcyBjb250cmFjdAogICAgZnVuY3Rpb24gZGVwb3NpdCh1aW50IHRva2Vucykgbm90TnVsbGlmaWVkIHsKICAgICAgICBkZXBvc2l0VG8obXNnLnNlbmRlciwgdG9rZW5zKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZGVwb3NpdFRvKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgdG9rZW5zKSBpc1BhcnRpY2lwYW50IHByZUxvY2sgbm90TnVsbGlmaWVkIHsKICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB0b2tlbnMpKTsKICAgICAgICBkZXBvc2l0ZWRbYmVuZWZpY2lhcnldICs9IHRva2VuczsKICAgICAgICB0b3RhbGZ2ICs9IHRva2VuczsKICAgICAgICBEZXBvc2l0KGJlbmVmaWNpYXJ5LCB0b2tlbnMpOwogICAgfQoKICAgIC8vIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBvd25lcjogZGVwb3NpdCBvbiBiZWhhbGYgb2YgbWFueQogICAgZnVuY3Rpb24gYnVsa0RlcG9zaXRUbyh1aW50MjU2W10gYml0cykgb25seU93bmVyIHsKICAgICAgICB1aW50MjU2IGxvbWFzayA9ICgxIDw8IDk2KSAtIDE7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxiaXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYSA9IGFkZHJlc3MoYml0c1tpXT4+OTYpOwogICAgICAgICAgICB1aW50IHZhbCA9IGJpdHNbaV0mbG9tYXNrOwogICAgICAgICAgICBkZXBvc2l0VG8oYSwgdmFsKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gd2l0aGRyYXcgd2l0aGRyYXdzIHRva2VucyB0byB0aGUgc2VuZGVyCiAgICAvLyB3aXRoZHJhdyBjYW4gYmUgY2FsbGVkIGF0IG1vc3Qgb25jZSBwZXIgcmVkZW1wdGlvbiBwZXJpb2QKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KCkgbm90TnVsbGlmaWVkIHJldHVybnMoYm9vbCkgewogICAgICAgIHJldHVybiB3aXRoZHJhd1RvKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgZnJhY3Rpb24gb2YgdG90YWwgKG9uZS1vZmYgKyBtb250aGx5KSB3aXRoZHJhd2FibGUKICAgICAqIGdpdmVuIHRoZSBjdXJyZW50IHRpbWVzdGFtcC4gTm8gZ3VhcmRzIGR1ZSB0byBmdW5jdGlvbiBiZWluZyBjb25zdGFudC4KICAgICAqIFdpbGwgb3V0cHV0IGludmFsaWQgZGF0YSB1bnRpbCB0aGUgcG9zdFN0YXJ0IHN0YXRlLiBJdCBpcyB1cCB0byB0aGUgdXNlcgogICAgICogdG8gbWFudWFsbHkgY29uZmlybSBjb250cmFjdCBpcyBpbiBwb3N0U3RhcnQgc3RhdGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGF2YWlsYWJsZUZvcldpdGhkcmF3YWxBdCh1aW50MjU2IGJsb2NrVGltZXN0YW1wKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSB0b3RhbCB3aXRoZHJhd2FibGUsIGdpdmluZyBhIG51bWVyYXRvciB3aXRoIHJhbmdlOgogICAgICAgICAqIFswLjI1ICogMTAgKiogMTgsIDEgKiAxMCAqKiAxOF0KICAgICAgICAgKi8KICAgICAgICByZXR1cm4gKCh0MHNwZWNpYWwgKyBwZXJpb2RBdChibG9ja1RpbWVzdGFtcCkpICogcHJlY2lzaW9uKSAvICh0MHNwZWNpYWwgKyBwZXJpb2RzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEJ1c2luZXNzIGxvZ2ljIG9mIF93aXRoZHJhd1RvLCB0aGUgY29kZSBpcyBzZXBhcmF0ZWQgdGhpcyB3YXkgbWFpbmx5IGZvcgogICAgICogdGVzdGluZy4gV2UgY2FuIGluamVjdCBhbmQgdGVzdCBwYXJhbWV0ZXJzIGZyZWVseSB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHRoZQogICAgICogYmxvY2tjaGFpbiBtb2RlbC4KICAgICAqCiAgICAgKiBOT1RFOiBTaW5jZSBmdW5jdGlvbiBpcyBjb25zdGFudCwgbm8gZ3VhcmRzIGFyZSBhcHBsaWVkLiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2l2ZQogICAgICogaW52YWxpZCBvdXRwdXRzIHVubGVzcyBpbiBwb3N0U3RhcnQgc3RhdGUuIEl0IGlzIHVwIHRvIHVzZXIgdG8gbWFudWFsbHkgY2hlY2sKICAgICAqIHRoYXQgdGhlIGNvcnJlY3Qgc3RhdGUgaXMgZ2l2ZW4gKGlzU3RhcnQoKSA9PSB0cnVlKQogICAgICovCiAgICBmdW5jdGlvbiBfd2l0aGRyYXdUbyh1aW50IF9kZXBvc2l0LCB1aW50IF93aXRoZHJhd24sIHVpbnQgX2Jsb2NrVGltZXN0YW1wLCB1aW50IF90b3RhbCkgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQyNTYgZnJhY3Rpb24gPSBhdmFpbGFibGVGb3JXaXRoZHJhd2FsQXQoX2Jsb2NrVGltZXN0YW1wKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlcmUgYXJlIGNvbmNlcm5zIHRoYXQgdGhlIG11bHRpcGxpY2F0aW9uIGNvdWxkIHBvc3NpYmx5CiAgICAgICAgICogb3ZlcmZsb3csIGhvd2V2ZXIgdGhpcyBzaG91bGQgbm90IGJlIHRoZSBjYXNlIGlmIHdlIGNhbGN1bGF0ZQogICAgICAgICAqIHRoZSB1cHBlciBib3VuZCBiYXNlZCBvbiBvdXIga25vd24gcGFyYW1ldGVyczoKICAgICAgICAgKgogICAgICAgICAqIExldHMgYXNzdW1lIHRoZSBtaW50ZWQgdG9rZW4gYW1vdW50IHRvIGJlIDUwMCBtaWxsaW9uIChyZWFzb25hYmxlKSwKICAgICAgICAgKiBnaXZlbiBhIHByZWNpc2lvbiBvZiA4IGRlY2ltYWwgcGxhY2VzLCB3ZSBnZXQ6CiAgICAgICAgICogZGVwb3NpdGVkW2FkZHJdID0gNSAqICgxMCAqKiA4KSAqICgxMCAqKiA4KSA9IDUgKiAoMTAgKiogMTYpCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgbWF4IGZvciBmcmFjdGlvbiA9IDEwICoqIDE4LCBhbmQgdGhlIG1heCBmb3IgdG90YWwgaXMKICAgICAgICAgKiBhbHNvIDUgKiAoMTAgKiogMTYpLgogICAgICAgICAqCiAgICAgICAgICogVGhlcmVmb3JlOgogICAgICAgICAqIGRlcG9zaXRlZFthZGRyXSAqIGZyYWN0aW9uICogdG90YWwgPSAyLjUgKiAoMTAgKiogNTEpCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgbWF4aW11bSBmb3IgYSB1aW50MjU2IGlzID0gMS4xNSAqICgxMCAqKiA3NykKICAgICAgICAgKi8KICAgICAgICB1aW50MjU2IHdpdGhkcmF3YWJsZSA9ICgoX2RlcG9zaXQgKiBmcmFjdGlvbiAqIF90b3RhbCkgLyB0b3RhbGZ2KSAvIHByZWNpc2lvbjsKCiAgICAgICAgLy8gY2hlY2sgdGhhdCB3ZSBjYW4gd2l0aGRyYXcgc29tZXRoaW5nCiAgICAgICAgaWYgKHdpdGhkcmF3YWJsZSA+IF93aXRoZHJhd24pIHsKICAgICAgICAgICAgcmV0dXJuIHdpdGhkcmF3YWJsZSAtIF93aXRoZHJhd247CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIC8qKgogICAgICogUHVibGljIGZhY2luZyB3aXRoZHJhd1RvLCBpbmplY3RzIGJ1c2luZXNzIGxvZ2ljIHdpdGgKICAgICAqIHRoZSBjb3JyZWN0IG1vZGVsLgogICAgICovCiAgICBmdW5jdGlvbiB3aXRoZHJhd1RvKGFkZHJlc3MgYWRkcikgcG9zdFN0YXJ0IG5vdE51bGxpZmllZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludCBfZCA9IGRlcG9zaXRlZFthZGRyXTsKICAgICAgICB1aW50IF93ID0gd2l0aGRyYXduW2FkZHJdOwoKICAgICAgICB1aW50IGRpZmYgPSBfd2l0aGRyYXdUbyhfZCwgX3csIGJsb2NrLnRpbWVzdGFtcCwgdG90YWwpOwoKICAgICAgICAvLyBubyB3aXRoZHJhd2FsIGNvdWxkIGJlIG1hZGUKICAgICAgICBpZiAoZGlmZiA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGNoZWNrIHRoYXQgd2UgY2Fubm90IHdpdGhkcmF3IG1vcmUgdGhhbiBtYXgKICAgICAgICByZXF1aXJlKChkaWZmICsgX3cpIDw9ICgoX2QgKiB0b3RhbCkgLyB0b3RhbGZ2KSk7CgogICAgICAgIC8vIHRyYW5zZmVyIGFuZCBpbmNyZW1lbnQKICAgICAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyKGFkZHIsIGRpZmYpKTsKCiAgICAgICAgd2l0aGRyYXduW2FkZHJdICs9IGRpZmY7CiAgICAgICAgcmVtYWluZGVyIC09IGRpZmY7CiAgICAgICAgV2l0aGRyYXdzKGFkZHIsIGRpZmYpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIGZvcmNlIHdpdGhkcmF3YWwgdG8gbWFueSBhZGRyZXNzZXMKICAgIGZ1bmN0aW9uIGJ1bGtXaXRoZHJhdyhhZGRyZXNzW10gYWRkcnMpIG5vdE51bGxpZmllZCB7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxhZGRycy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgd2l0aGRyYXdUbyhhZGRyc1tpXSk7CiAgICB9CgogICAgLy8gQ29kZSBvZmYgdGhlIGNoYWluIGluZm9ybXMgdGhpcyBjb250cmFjdCBhYm91dAogICAgLy8gdG9rZW5zIHRoYXQgd2VyZSBtaW50ZWQgdG8gaXQgb24gYmVoYWxmIG9mIGEgZGVwb3NpdG9yLgogICAgLy8KICAgIC8vIE5vdGU6IHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgaGVyZSBpcyBrbm93biB0byBOZXcgQWxjaGVteSdzCiAgICAvLyB0b29saW5nLCB3aGljaCBpcyB3aHkgaXQgaXMgYXJndWFibHkgbWlzbmFtZWQuCiAgICB1aW50IHB1YmxpYyBtaW50aW5nTm9uY2U7CiAgICBmdW5jdGlvbiBtdWx0aU1pbnQodWludCBub25jZSwgdWludDI1NltdIGJpdHMpIG9ubHlPd25lciBwcmVMb2NrIHsKCiAgICAgICAgaWYgKG5vbmNlICE9IG1pbnRpbmdOb25jZSkgcmV0dXJuOwogICAgICAgIG1pbnRpbmdOb25jZSArPSAxOwogICAgICAgIHVpbnQyNTYgbG9tYXNrID0gKDEgPDwgOTYpIC0gMTsKICAgICAgICB1aW50IHN1bSA9IDA7CiAgICAgICAgZm9yICh1aW50IGk9MDsgaTxiaXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGFkZHJlc3MgYSA9IGFkZHJlc3MoYml0c1tpXT4+OTYpOwogICAgICAgICAgICB1aW50IHZhbHVlID0gYml0c1tpXSZsb21hc2s7CiAgICAgICAgICAgIGRlcG9zaXRlZFthXSArPSB2YWx1ZTsKICAgICAgICAgICAgc3VtICs9IHZhbHVlOwogICAgICAgICAgICBEZXBvc2l0KGEsIHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdG90YWxmdiArPSBzdW07CiAgICB9Cn0='.
	

]
