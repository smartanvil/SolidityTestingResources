Class {
	#name : #SRT93f28d717011771aaa0e462bd7ee5c43c98819f2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT93f28d717011771aaa0e462bd7ee5c43c98819f2 >> base64 [
	^ 'LyogQSBjb250cmFjdCB0byBzdG9yZSBnb29kcyB3aXRoIGVzY3Jvd2VkIGZ1bmRzLiAqLwoKLyogRGVwbG95bWVudDoKQ29udHJhY3Q6Ck93bmVyOiBzZWxsZXIKTGFzdCBhZGRyZXNzOiBkeW5hbWljCkFCSTogW3siY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiZXNjcm93cyIsIm91dHB1dHMiOlt7Im5hbWUiOiJidXllciIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoibG9ja2VkRnVuZHMiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6ImZyb3plbkZ1bmRzIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJmcm96ZW5UaW1lIiwidHlwZSI6InVpbnQ2NCJ9LHsibmFtZSI6ImNvdW50IiwidHlwZSI6InVpbnQxNiJ9LHsibmFtZSI6ImJ1eWVyTm8iLCJ0eXBlIjoiYm9vbCJ9LHsibmFtZSI6InNlbGxlck5vIiwidHlwZSI6ImJvb2wifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiY291bnQiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQxNiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfZGF0YUluZm8iLCJ0eXBlIjoic3RyaW5nIn0seyJuYW1lIjoiX3ZlcnNpb24iLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6ImNhbmNlbCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InNlbGxlciIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoiYWRkcmVzcyJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJmcmVlemVQZXJpb2QiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2xvY2tJZCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX2RhdGFJbmZvIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Il92ZXJzaW9uIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfY291bnQiLCJ0eXBlIjoidWludDE2In1dLCJuYW1lIjoiYnV5Iiwib3V0cHV0cyI6W10sInBheWFibGUiOnRydWUsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJzdGF0dXMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQxNiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJyZXdhcmRQcm9taWxsZSIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOlt7Im5hbWUiOiJfbG9ja0lkIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJnZXRNb25leSIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9sb2NrSWQiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9kYXRhSW5mbyIsInR5cGUiOiJzdHJpbmcifSx7Im5hbWUiOiJfdmVyc2lvbiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoibm8iLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoia2lsbCIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9sb2NrSWQiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9kYXRhSW5mbyIsInR5cGUiOiJzdHJpbmcifSx7Im5hbWUiOiJfdmVyc2lvbiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoicmVqZWN0Iiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2xvY2tJZCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX2RhdGFJbmZvIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Il92ZXJzaW9uIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJhY2NlcHQiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJ0b3RhbEVzY3Jvd3MiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2xvY2tJZCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX3dobyIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX3BheW1lbnQiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9kYXRhSW5mbyIsInR5cGUiOiJzdHJpbmcifSx7Im5hbWUiOiJfdmVyc2lvbiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiYXJiWWVzIiwib3V0cHV0cyI6W10sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiZmVlRnVuZHMiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50IjpmYWxzZSwiaW5wdXRzIjpbeyJuYW1lIjoiX2xvY2tJZCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX2RhdGFJbmZvIiwidHlwZSI6InN0cmluZyJ9LHsibmFtZSI6Il92ZXJzaW9uIiwidHlwZSI6InVpbnQyNTYifV0sIm5hbWUiOiJ5ZXMiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJuYW1lIjoiYnV5ZXJzIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJib29sIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImF2YWlsYWJsZUNvdW50Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoicHJpY2UiLCJvdXRwdXRzIjpbeyJuYW1lIjoiIiwidHlwZSI6InVpbnQyNTYifV0sInBheWFibGUiOmZhbHNlLCJ0eXBlIjoiZnVuY3Rpb24ifSx7ImNvbnN0YW50Ijp0cnVlLCJpbnB1dHMiOltdLCJuYW1lIjoiY29udGVudENvdW50Iiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImxvZ3NDb3VudCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDI1NiJ9XSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoidW5idXkiLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOmZhbHNlLCJpbnB1dHMiOltdLCJuYW1lIjoiZ2V0RmVlcyIsIm91dHB1dHMiOltdLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6ImZlZVByb21pbGxlIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJ1aW50MjU2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6dHJ1ZSwiaW5wdXRzIjpbXSwibmFtZSI6InBlbmRpbmdDb3VudCIsIm91dHB1dHMiOlt7Im5hbWUiOiIiLCJ0eXBlIjoidWludDE2In1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJjb25zdGFudCI6ZmFsc2UsImlucHV0cyI6W3sibmFtZSI6Il9kYXRhSW5mbyIsInR5cGUiOiJzdHJpbmcifSx7Im5hbWUiOiJfdmVyc2lvbiIsInR5cGUiOiJ1aW50MjU2In1dLCJuYW1lIjoiYWRkRGVzY3JpcHRpb24iLCJvdXRwdXRzIjpbXSwicGF5YWJsZSI6ZmFsc2UsInR5cGUiOiJmdW5jdGlvbiJ9LHsiY29uc3RhbnQiOnRydWUsImlucHV0cyI6W10sIm5hbWUiOiJhcmJpdGVyIiwib3V0cHV0cyI6W3sibmFtZSI6IiIsInR5cGUiOiJhZGRyZXNzIn1dLCJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZ1bmN0aW9uIn0seyJpbnB1dHMiOlt7Im5hbWUiOiJfYXJiaXRlciIsInR5cGUiOiJhZGRyZXNzIn0seyJuYW1lIjoiX2ZyZWV6ZVBlcmlvZCIsInR5cGUiOiJ1aW50MjU2In0seyJuYW1lIjoiX2ZlZVByb21pbGxlIiwidHlwZSI6InVpbnQyNTYifSx7Im5hbWUiOiJfcmV3YXJkUHJvbWlsbGUiLCJ0eXBlIjoidWludDI1NiJ9LHsibmFtZSI6Il9jb3VudCIsInR5cGUiOiJ1aW50MTYifSx7Im5hbWUiOiJfcHJpY2UiLCJ0eXBlIjoidWludDI1NiJ9XSwidHlwZSI6ImNvbnN0cnVjdG9yIn0seyJwYXlhYmxlIjpmYWxzZSwidHlwZSI6ImZhbGxiYWNrIn0seyJhbm9ueW1vdXMiOmZhbHNlLCJpbnB1dHMiOlt7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoibWVzc2FnZSIsInR5cGUiOiJzdHJpbmcifV0sIm5hbWUiOiJMb2dEZWJ1ZyIsInR5cGUiOiJldmVudCJ9LHsiYW5vbnltb3VzIjpmYWxzZSwiaW5wdXRzIjpbeyJpbmRleGVkIjp0cnVlLCJuYW1lIjoibG9ja0lkIiwidHlwZSI6InVpbnQyNTYifSx7ImluZGV4ZWQiOmZhbHNlLCJuYW1lIjoiZGF0YUluZm8iLCJ0eXBlIjoic3RyaW5nIn0seyJpbmRleGVkIjp0cnVlLCJuYW1lIjoidmVyc2lvbiIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6ImV2ZW50VHlwZSIsInR5cGUiOiJ1aW50MTYifSx7ImluZGV4ZWQiOnRydWUsIm5hbWUiOiJzZW5kZXIiLCJ0eXBlIjoiYWRkcmVzcyJ9LHsiaW5kZXhlZCI6ZmFsc2UsIm5hbWUiOiJjb3VudCIsInR5cGUiOiJ1aW50MjU2In0seyJpbmRleGVkIjpmYWxzZSwibmFtZSI6InBheW1lbnQiLCJ0eXBlIjoidWludDI1NiJ9XSwibmFtZSI6IkxvZ0V2ZW50IiwidHlwZSI6ImV2ZW50In1dCk9wdGltaXplZDogeWVzClNvbGlkaXR5IHZlcnNpb246IHYwLjQuNAoqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmNvbnRyYWN0IEVzY3Jvd0dvb2RzIHsKCiAgICBzdHJ1Y3QgRXNjcm93SW5mbyB7CgogICAgICAgIGFkZHJlc3MgYnV5ZXI7CiAgICAgICAgdWludCBsb2NrZWRGdW5kczsKICAgICAgICB1aW50IGZyb3plbkZ1bmRzOwogICAgICAgIHVpbnQ2NCBmcm96ZW5UaW1lOwogICAgICAgIHVpbnQxNiBjb3VudDsKICAgICAgICBib29sIGJ1eWVyTm87CiAgICAgICAgYm9vbCBzZWxsZXJObzsKICAgIH0KCiAgICAvL2VudW0gR29vZHNTdGF0dXMKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBOb25lID0gMDsKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBBdmFpbGFibGUgPSAxOwogICAgdWludDE2IGNvbnN0YW50IGludGVybmFsIENhbmNlbGVkID0gMjsKCiAgICAvL2VudW0gRXZlbnRUeXBlcwogICAgdWludDE2IGNvbnN0YW50IGludGVybmFsIEJ1eSA9IDE7CiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgQWNjZXB0ID0gMjsKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBSZWplY3QgPSAzOwogICAgdWludDE2IGNvbnN0YW50IGludGVybmFsIENhbmNlbCA9IDQ7CiAgICB1aW50MTYgY29uc3RhbnQgaW50ZXJuYWwgRGVzY3JpcHRpb24gPSAxMDsKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBVbmxvY2sgPSAxMTsKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBGcmVlemUgPSAxMjsKICAgIHVpbnQxNiBjb25zdGFudCBpbnRlcm5hbCBSZXNvbHZlZCA9IDEzOwoKICAgIC8vZGF0YQoKICAgIHVpbnQgY29uc3RhbnQgYXJiaXRyYXRpb25QZXJpb2QgPSAzMCBkYXlzOwogICAgdWludCBjb25zdGFudCBzYWZlR2FzID0gMjUwMDA7CgogICAgLy9zZWxsZXIvb3duZXIgb2YgdGhlIGdvb2RzCiAgICBhZGRyZXNzIHB1YmxpYyBzZWxsZXI7CgogICAgLy9ldmVudCBjb3VudGVycwogICAgdWludCBwdWJsaWMgY29udGVudENvdW50ID0gMDsKICAgIHVpbnQgcHVibGljIGxvZ3NDb3VudCA9IDA7CgogICAgLy9lc2Nyb3cgcmVsYXRlZAoKICAgIGFkZHJlc3MgcHVibGljIGFyYml0ZXI7CgogICAgdWludCBwdWJsaWMgZnJlZXplUGVyaW9kOwogICAgLy9lYWNoIGxvY2sgZmVlIGluIHByb21pbGxlcy4KICAgIHVpbnQgcHVibGljIGZlZVByb21pbGxlOwogICAgLy9yZXdhcmQgaW4gcHJvbWlsbGVzLiBwcm9taWxsZSA9IHBlcmNlbnQgKiAxMCwgZWcgMSw1JSByZXdhcmQgPSAxNSByZXdhcmRQcm9taWxsZQogICAgdWludCBwdWJsaWMgcmV3YXJkUHJvbWlsbGU7CgogICAgdWludCBwdWJsaWMgZmVlRnVuZHM7CiAgICB1aW50IHB1YmxpYyB0b3RhbEVzY3Jvd3M7CgogICAgbWFwcGluZyAodWludCA9PiBFc2Nyb3dJbmZvKSBwdWJsaWMgZXNjcm93czsKCiAgICAvL2dvb2RzIHJlbGF0ZWQKCiAgICAvL3N0YXR1cyBvZiB0aGUgZ29vZHM6IHNlZSBHb29kc1N0YXR1cyBlbnVtCiAgICB1aW50MTYgcHVibGljIHN0YXR1czsKICAgIC8vaG93IG1hbnkgZm9yIHNhbGUKICAgIHVpbnQxNiBwdWJsaWMgY291bnQ7CgogICAgdWludDE2IHB1YmxpYyBhdmFpbGFibGVDb3VudDsKICAgIHVpbnQxNiBwdWJsaWMgcGVuZGluZ0NvdW50OwoKICAgIC8vcHJpY2UgcGVyIGl0ZW0KICAgIHVpbnQgcHVibGljIHByaWNlOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGJ1eWVyczsKCiAgICBib29sIHByaXZhdGUgYXRvbWljTG9jazsKCiAgICAvL2V2ZW50cwoKICAgIGV2ZW50IExvZ0RlYnVnKHN0cmluZyBtZXNzYWdlKTsKICAgIGV2ZW50IExvZ0V2ZW50KHVpbnQgaW5kZXhlZCBsb2NrSWQsIHN0cmluZyBkYXRhSW5mbywgdWludCBpbmRleGVkIHZlcnNpb24sIHVpbnQxNiBldmVudFR5cGUsIGFkZHJlc3MgaW5kZXhlZCBzZW5kZXIsIHVpbnQgY291bnQsIHVpbnQgcGF5bWVudCk7CgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBzZWxsZXIpCiAgICAgICAgICB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlBcmJpdGVyIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBhcmJpdGVyKQogICAgICAgICAgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCiAgICAvL21vZHVsZXMKCiAgICBmdW5jdGlvbiBFc2Nyb3dHb29kcyhhZGRyZXNzIF9hcmJpdGVyLCB1aW50IF9mcmVlemVQZXJpb2QsIHVpbnQgX2ZlZVByb21pbGxlLCB1aW50IF9yZXdhcmRQcm9taWxsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MTYgX2NvdW50LCB1aW50IF9wcmljZSkgewoKICAgICAgICBzZWxsZXIgPSBtc2cuc2VuZGVyOwoKICAgICAgICAvLyBhbGwgdmFyaWFibGVzIGFyZSBhbHdheXMgaW5pdGlhbGl6ZWQgdG8gMCwgc2F2ZSBnYXMKCiAgICAgICAgLy9lc2Nyb3cgcmVsYXRlZAoKICAgICAgICBhcmJpdGVyID0gX2FyYml0ZXI7CiAgICAgICAgZnJlZXplUGVyaW9kID0gX2ZyZWV6ZVBlcmlvZDsKICAgICAgICBmZWVQcm9taWxsZSA9IF9mZWVQcm9taWxsZTsKICAgICAgICByZXdhcmRQcm9taWxsZSA9IF9yZXdhcmRQcm9taWxsZTsKCiAgICAgICAgLy9nb29kcyByZWxhdGVkCgogICAgICAgIHN0YXR1cyA9IEF2YWlsYWJsZTsKICAgICAgICBjb3VudCA9IF9jb3VudDsKICAgICAgICBwcmljZSA9IF9wcmljZTsKCiAgICAgICAgYXZhaWxhYmxlQ291bnQgPSBjb3VudDsKICAgIH0KCiAgICAvL2hlbHBlcnMgZm9yIGV2ZW50cyB3aXRoIGNvdW50ZXIKICAgIGZ1bmN0aW9uIGxvZ0RlYnVnKHN0cmluZyBtZXNzYWdlKSBpbnRlcm5hbCB7CiAgICAgICAgbG9nc0NvdW50Kys7CiAgICAgICAgTG9nRGVidWcobWVzc2FnZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbG9nRXZlbnQodWludCBsb2NrSWQsIHN0cmluZyBkYXRhSW5mbywgdWludCB2ZXJzaW9uLCB1aW50MTYgZXZlbnRUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3Mgc2VuZGVyLCB1aW50IGNvdW50LCB1aW50IHBheW1lbnQpIGludGVybmFsIHsKICAgICAgICBjb250ZW50Q291bnQrKzsKICAgICAgICBMb2dFdmVudChsb2NrSWQsIGRhdGFJbmZvLCB2ZXJzaW9uLCBldmVudFR5cGUsIHNlbmRlciwgY291bnQsIHBheW1lbnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGtpbGwoKSBvbmx5T3duZXIgewoKICAgICAgICAvL2RvIG5vdCBhbGxvdyBraWxsaW5nIGNvbnRyYWN0IHdpdGggYWN0aXZlIGVzY3Jvd3MKICAgICAgICBpZih0b3RhbEVzY3Jvd3MgPiAwKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCJ0b3RhbEVzY3Jvd3MgPiAwIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy9kbyBub3QgYWxsb3cga2lsbGluZyBjb250cmFjdCB3aXRoIHVuY2xhaW1lZCBlc2Nyb3cgZmVlcwogICAgICAgIGlmKGZlZUZ1bmRzID4gMCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiZmVlRnVuZHMgPiAwIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3VpY2lkZShtc2cuc2VuZGVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlU2VuZChhZGRyZXNzIGFkZHIsIHVpbnQgdmFsdWUpIGludGVybmFsIHsKCiAgICAgICAgaWYoYXRvbWljTG9jaykgdGhyb3c7CiAgICAgICAgYXRvbWljTG9jayA9IHRydWU7CiAgICAgICAgaWYgKCEoYWRkci5jYWxsLmdhcyhzYWZlR2FzKS52YWx1ZSh2YWx1ZSkoKSkpIHsKICAgICAgICAgICAgYXRvbWljTG9jayA9IGZhbHNlOwogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgYXRvbWljTG9jayA9IGZhbHNlOwogICAgfQoKICAgIC8vZXNjcm93IEFQSQoKICAgIC8vdm90ZSBZRVMgLSBpbW1lZGlhdGVseSBzZW5kcyBmdW5kcyB0byB0aGUgcGVlcgogICAgZnVuY3Rpb24geWVzKHVpbnQgX2xvY2tJZCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgewoKICAgICAgICBFc2Nyb3dJbmZvIGluZm8gPSBlc2Nyb3dzW19sb2NrSWRdOwoKICAgICAgICBpZihpbmZvLmxvY2tlZEZ1bmRzID09IDApIHsKICAgICAgICAgICAgbG9nRGVidWcoImluZm8ubG9ja2VkRnVuZHMgPT0gMCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmKG1zZy5zZW5kZXIgIT0gaW5mby5idXllciAmJiBtc2cuc2VuZGVyICE9IHNlbGxlcikgewogICAgICAgICAgICBsb2dEZWJ1ZygibXNnLnNlbmRlciAhPSBpbmZvLmJ1eWVyICYmIG1zZy5zZW5kZXIgIT0gc2VsbGVyIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVpbnQgcGF5bWVudCA9IGluZm8ubG9ja2VkRnVuZHM7CiAgICAgICAgaWYocGF5bWVudCA+IHRoaXMuYmFsYW5jZSkgewogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUgLSBmdW5kcyBjYW5ub3QgYmUgdW5sb2NrZWQgaW4gdGhpcyBjYXNlCiAgICAgICAgICAgIGxvZ0RlYnVnKCJwYXltZW50ID4gdGhpcy5iYWxhbmNlIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gaW5mby5idXllcikgewoKICAgICAgICAgICAgLy9zZW5kIGZ1bmRzIHRvIHNlbGxlcgogICAgICAgICAgICBzYWZlU2VuZChzZWxsZXIsIHBheW1lbnQpOwogICAgICAgIH0gZWxzZSBpZihtc2cuc2VuZGVyID09IHNlbGxlcikgewoKICAgICAgICAgICAgLy9zZW5kIGZ1bmRzIHRvIGJ1eWVyCiAgICAgICAgICAgIHNhZmVTZW5kKGluZm8uYnV5ZXIsIHBheW1lbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vSEFDSzogc2hvdWxkIG5vdCBnZXQgaGVyZQogICAgICAgICAgICBsb2dEZWJ1ZygidW5rbm93biBtc2cuc2VuZGVyIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vcmVtb3ZlIHJlY29yZCBmcm9tIGVzY3Jvd3MKICAgICAgICBpZih0b3RhbEVzY3Jvd3MgPiAwKSB0b3RhbEVzY3Jvd3MgLT0gMTsKICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsKCiAgICAgICAgbG9nRXZlbnQoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgVW5sb2NrLCBtc2cuc2VuZGVyLCBpbmZvLmNvdW50LCBwYXltZW50KTsKICAgIH0KCiAgICAvL3ZvdGUgTk8gLSBmcmVlemUgZnVuZHMgZm9yIGFyYml0cmF0aW9uCiAgICBmdW5jdGlvbiBubyh1aW50IF9sb2NrSWQsIHN0cmluZyBfZGF0YUluZm8sIHVpbnQgX3ZlcnNpb24pIHsKCiAgICAgICAgRXNjcm93SW5mbyBpbmZvID0gZXNjcm93c1tfbG9ja0lkXTsKCiAgICAgICAgaWYoaW5mby5sb2NrZWRGdW5kcyA9PSAwKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCJpbmZvLmxvY2tlZEZ1bmRzID09IDAiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZihtc2cuc2VuZGVyICE9IGluZm8uYnV5ZXIgJiYgbXNnLnNlbmRlciAhPSBzZWxsZXIpIHsKICAgICAgICAgICAgbG9nRGVidWcoIm1zZy5zZW5kZXIgIT0gaW5mby5idXllciAmJiBtc2cuc2VuZGVyICE9IHNlbGxlciIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvL2ZyZWV6ZSBmdW5kcwogICAgICAgIC8vb25seSBhbGxvdyBvbmUgdGltZSBmcmVlemUKICAgICAgICBpZihpbmZvLmZyb3plbkZ1bmRzID09IDApIHsKICAgICAgICAgICAgaW5mby5mcm96ZW5GdW5kcyA9IGluZm8ubG9ja2VkRnVuZHM7CiAgICAgICAgICAgIGluZm8uZnJvemVuVGltZSA9IHVpbnQ2NChub3cpOwogICAgICAgIH0KCiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBpbmZvLmJ1eWVyKSB7CiAgICAgICAgICAgIGluZm8uYnV5ZXJObyA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYobXNnLnNlbmRlciA9PSBzZWxsZXIpIHsKICAgICAgICAgICAgaW5mby5zZWxsZXJObyA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9IQUNLOiBzaG91bGQgbm90IGdldCBoZXJlCiAgICAgICAgICAgIGxvZ0RlYnVnKCJ1bmtub3duIG1zZy5zZW5kZXIiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbG9nRXZlbnQoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgRnJlZXplLCBtc2cuc2VuZGVyLCBpbmZvLmNvdW50LCBpbmZvLmxvY2tlZEZ1bmRzKTsKICAgIH0KCiAgICAvL2FyYml0ZXIncyBkZWNpc2lvbiBvbiB0aGUgY2FzZS4KICAgIC8vYXJiaXRlciBjYW4gb25seSBkZWNpZGUgd2hlbiBib3RoIGJ1eWVyIGFuZCBzZWxsZXIgdm90ZWQgTk8KICAgIC8vYXJiaXRlciBkZWNpZGVzIG9uIGhpcyBvd24gcmV3YXJkIGJ1dCBub3QgYmlnZ2VyIHRoYW4gYW5ub3VuY2VkIHBlcmNlbnRhZ2UgKHJld2FyZFByb21pbGxlKQogICAgZnVuY3Rpb24gYXJiWWVzKHVpbnQgX2xvY2tJZCwgYWRkcmVzcyBfd2hvLCB1aW50IF9wYXltZW50LCBzdHJpbmcgX2RhdGFJbmZvLCB1aW50IF92ZXJzaW9uKSBvbmx5QXJiaXRlciB7CgogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07CgogICAgICAgIGlmKGluZm8ubG9ja2VkRnVuZHMgPT0gMCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5sb2NrZWRGdW5kcyA9PSAwIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYoaW5mby5mcm96ZW5GdW5kcyA9PSAwKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCJpbmZvLmZyb3plbkZ1bmRzID09IDAiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYoX3dobyAhPSBzZWxsZXIgJiYgX3dobyAhPSBpbmZvLmJ1eWVyKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCJfd2hvICE9IHNlbGxlciAmJiBfd2hvICE9IGluZm8uYnV5ZXIiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvL3JlcXVpcmVzIGJvdGggTk8gdG8gYXJiaXRyYXRpb24KICAgICAgICBpZighaW5mby5idXllck5vIHx8ICFpbmZvLnNlbGxlck5vKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCIhaW5mby5idXllck5vIHx8ICFpbmZvLnNlbGxlck5vIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKF9wYXltZW50ID4gaW5mby5sb2NrZWRGdW5kcykgewogICAgICAgICAgICBsb2dEZWJ1ZygiX3BheW1lbnQgPiBpbmZvLmxvY2tlZEZ1bmRzIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYoX3BheW1lbnQgPiB0aGlzLmJhbGFuY2UpIHsKICAgICAgICAgICAgLy9IQUNLOiBzaG91bGQgbm90IGdldCBoZXJlIC0gZnVuZHMgY2Fubm90IGJlIHVubG9ja2VkIGluIHRoaXMgY2FzZQogICAgICAgICAgICBsb2dEZWJ1ZygiX3BheW1lbnQgPiB0aGlzLmJhbGFuY2UiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy9saW1pdCBwYXltZW50CiAgICAgICAgdWludCByZXdhcmQgPSAoaW5mby5sb2NrZWRGdW5kcyAqIHJld2FyZFByb21pbGxlKSAvIDEwMDA7CiAgICAgICAgaWYocmV3YXJkID4gKGluZm8ubG9ja2VkRnVuZHMgLSBfcGF5bWVudCkpIHsKICAgICAgICAgICAgbG9nRGVidWcoInJld2FyZCA+IChpbmZvLmxvY2tlZEZ1bmRzIC0gX3BheW1lbnQpIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vc2VuZCBmdW5kcyB0byB0aGUgd2lubmVyCiAgICAgICAgc2FmZVNlbmQoX3dobywgX3BheW1lbnQpOwoKICAgICAgICAvL3NlbmQgdGhlIHJlc3QgYXMgcmV3YXJkCiAgICAgICAgaW5mby5sb2NrZWRGdW5kcyAtPSBfcGF5bWVudDsKICAgICAgICBmZWVGdW5kcyArPSBpbmZvLmxvY2tlZEZ1bmRzOwogICAgICAgIGluZm8ubG9ja2VkRnVuZHMgPSAwOwoKICAgICAgICBsb2dFdmVudChfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uLCBSZXNvbHZlZCwgbXNnLnNlbmRlciwgaW5mby5jb3VudCwgX3BheW1lbnQpOwogICAgfQoKICAgIC8vYWxsb3cgYXJiaXRlciB0byBnZXQgaGlzIGNvbGxlY3RlZCBmZWVzCiAgICBmdW5jdGlvbiBnZXRGZWVzKCkgb25seUFyYml0ZXIgewoKICAgICAgICBpZihmZWVGdW5kcyA+IHRoaXMuYmFsYW5jZSkgewogICAgICAgICAgICAvL0hBQ0s6IHNob3VsZCBub3QgZ2V0IGhlcmUgLSBmdW5kcyBjYW5ub3QgYmUgdW5sb2NrZWQgaW4gdGhpcyBjYXNlCiAgICAgICAgICAgIGxvZ0RlYnVnKCJmZWVGdW5kcyA+IHRoaXMuYmFsYW5jZSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHNhZmVTZW5kKGFyYml0ZXIsIGZlZUZ1bmRzKTsKCiAgICAgICAgZmVlRnVuZHMgPSAwOwogICAgfQoKICAgIC8vYWxsb3cgYnV5ZXIgb3Igc2VsbGVyIHRvIHRha2UgdGltZW91dGVkIGZ1bmRzLgogICAgLy9idXllciBjYW4gZ2V0IGZ1bmRzIGlmIHNlbGxlciBpcyBzaWxlbnQgYW5kIHNlbGxlciBjYW4gZ2V0IGZ1bmRzIGlmIGJ1eWVyIGlzIHNpbGVudCAoYWZ0ZXIgZnJlZXplUGVyaW9kKQogICAgLy9idXllciBjYW4gZ2V0IGJhY2sgZnVuZHMgdW5kZXIgYXJiaXRyYXRpb24gaWYgYXJiaXRlciBpcyBzaWxlbnQgKGFmdGVyIGFyYml0cmF0aW9uUGVyaW9kKQogICAgZnVuY3Rpb24gZ2V0TW9uZXkodWludCBfbG9ja0lkKSB7CgogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07CgogICAgICAgIGlmKGluZm8ubG9ja2VkRnVuZHMgPT0gMCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5sb2NrZWRGdW5kcyA9PSAwIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy9IQUNLOiB0aGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSBzaW5jZSBmcm96ZW5UaW1lID09IDAgYXQgZXNjcm93IGNyZWF0aW9uCiAgICAgICAgaWYoaW5mby5mcm96ZW5GdW5kcyA9PSAwKSB7CiAgICAgICAgICAgIGxvZ0RlYnVnKCJpbmZvLmZyb3plbkZ1bmRzID09IDAiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy90aW1vdXQgZm9yIHZvdGluZyBub3Qgb3ZlciB5ZXQKICAgICAgICBpZihub3cgPCAoaW5mby5mcm96ZW5UaW1lICsgZnJlZXplUGVyaW9kKSkgewogICAgICAgICAgICBsb2dEZWJ1Zygibm93IDwgKGluZm8uZnJvemVuVGltZSArIGZyZWV6ZVBlcmlvZCkiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdWludCBwYXltZW50ID0gaW5mby5sb2NrZWRGdW5kczsKICAgICAgICBpZihwYXltZW50ID4gdGhpcy5iYWxhbmNlKSB7CiAgICAgICAgICAgIC8vSEFDSzogc2hvdWxkIG5vdCBnZXQgaGVyZSAtIGZ1bmRzIGNhbm5vdCBiZSB1bmxvY2tlZCBpbiB0aGlzIGNhc2UKICAgICAgICAgICAgbG9nRGVidWcoInBheW1lbnQgPiB0aGlzLmJhbGFuY2UiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy9ib3RoIGhhcyB2b3RlZCAtIG1vbmV5IGlzIHVuZGVyIGFyYml0cmF0aW9uCiAgICAgICAgaWYoaW5mby5idXllck5vICYmIGluZm8uc2VsbGVyTm8pIHsKCiAgICAgICAgICAgIC8vYXJiaXRyYXRpb24gdGltZW91dCBpcyBub3Qgb3ZlciB5ZXQKICAgICAgICAgICAgaWYobm93IDwgKGluZm8uZnJvemVuVGltZSArIGZyZWV6ZVBlcmlvZCArIGFyYml0cmF0aW9uUGVyaW9kKSkgewogICAgICAgICAgICAgICAgbG9nRGVidWcoIm5vdyA8IChpbmZvLmZyb3plblRpbWUgKyBmcmVlemVQZXJpb2QgKyBhcmJpdHJhdGlvblBlcmlvZCkiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9hcmJpdGVyIHdhcyBzaWxlbnQgc28gcmVkZWVtIHRoZSBmdW5kcyB0byB0aGUgYnV5ZXIKICAgICAgICAgICAgc2FmZVNlbmQoaW5mby5idXllciwgcGF5bWVudCk7CgogICAgICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYoaW5mby5idXllck5vKSB7CgogICAgICAgICAgICBzYWZlU2VuZChpbmZvLmJ1eWVyLCBwYXltZW50KTsKCiAgICAgICAgICAgIGluZm8ubG9ja2VkRnVuZHMgPSAwOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmKGluZm8uc2VsbGVyTm8pIHsKCiAgICAgICAgICAgIHNhZmVTZW5kKHNlbGxlciwgcGF5bWVudCk7CgogICAgICAgICAgICBpbmZvLmxvY2tlZEZ1bmRzID0gMDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KCiAgICAvL2dvb2RzIEFQSQoKICAgIC8vYWRkIG5ldyBkZXNjcmlwdGlvbiB0byB0aGUgZ29vZHMKICAgIGZ1bmN0aW9uIGFkZERlc2NyaXB0aW9uKHN0cmluZyBfZGF0YUluZm8sIHVpbnQgX3ZlcnNpb24pIG9ubHlPd25lciB7CgogICAgICAgIC8vQWNjZXB0IG9yZGVyIHRvIGV2ZW50IGxvZwogICAgICAgIGxvZ0V2ZW50KDAsIF9kYXRhSW5mbywgX3ZlcnNpb24sIERlc2NyaXB0aW9uLCBtc2cuc2VuZGVyLCAwLCAwKTsKICAgIH0KCiAgICAvL2J1eSB3aXRoIGVzY3Jvdy4gaWQgLSBlc2Nyb3cgaW5mbyBpZAogICAgZnVuY3Rpb24gYnV5KHVpbnQgX2xvY2tJZCwgc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbiwgdWludDE2IF9jb3VudCkgcGF5YWJsZSB7CgogICAgICAgIC8vcmVqZWN0IG1vbmV5IHRyYW5zZmVycyBmb3IgYmFkIGl0ZW0gc3RhdHVzCgogICAgICAgIGlmKHN0YXR1cyAhPSBBdmFpbGFibGUpIHRocm93OwogICAgICAgIGlmKG1zZy52YWx1ZSA8IChwcmljZSAqIF9jb3VudCkpIHRocm93OwogICAgICAgIGlmKF9jb3VudCA+IGF2YWlsYWJsZUNvdW50KSB0aHJvdzsKICAgICAgICBpZihfY291bnQgPT0gMCkgdGhyb3c7CiAgICAgICAgaWYoZmVlUHJvbWlsbGUgPiAxMDAwKSB0aHJvdzsKICAgICAgICBpZihyZXdhcmRQcm9taWxsZSA+IDEwMDApIHRocm93OwogICAgICAgIGlmKChmZWVQcm9taWxsZSArIHJld2FyZFByb21pbGxlKSA+IDEwMDApIHRocm93OwoKICAgICAgICAvL2NyZWF0ZSBkZWZhdWx0IEVzY3Jvd0luZm8gc3RydWN0IG9yIGFjY2VzcyBleGlzdGluZwogICAgICAgIEVzY3Jvd0luZm8gaW5mbyA9IGVzY3Jvd3NbX2xvY2tJZF07CgogICAgICAgIC8vbG9jayBvbmx5IG9uY2UgZm9yIGEgZ2l2ZW4gaWQKICAgICAgICBpZihpbmZvLmxvY2tlZEZ1bmRzID4gMCkgdGhyb3c7CgogICAgICAgIC8vbG9jayBmdW5kcwoKICAgICAgICB1aW50IGZlZSA9IChtc2cudmFsdWUgKiBmZWVQcm9taWxsZSkgLyAxMDAwOwogICAgICAgIC8vbGltaXQgZmVlcwogICAgICAgIGlmKGZlZSA+IG1zZy52YWx1ZSkgdGhyb3c7CgogICAgICAgIHVpbnQgZnVuZHMgPSAobXNnLnZhbHVlIC0gZmVlKTsKICAgICAgICBmZWVGdW5kcyArPSBmZWU7CiAgICAgICAgdG90YWxFc2Nyb3dzICs9IDE7CgogICAgICAgIGluZm8uYnV5ZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGluZm8ubG9ja2VkRnVuZHMgPSBmdW5kczsKICAgICAgICBpbmZvLmZyb3plbkZ1bmRzID0gMDsKICAgICAgICBpbmZvLmJ1eWVyTm8gPSBmYWxzZTsKICAgICAgICBpbmZvLnNlbGxlck5vID0gZmFsc2U7CiAgICAgICAgaW5mby5jb3VudCA9IF9jb3VudDsKCiAgICAgICAgcGVuZGluZ0NvdW50ICs9IF9jb3VudDsKICAgICAgICBidXllcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwoKICAgICAgICAvL0J1eSBvcmRlciB0byBldmVudCBsb2cKICAgICAgICBsb2dFdmVudChfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uLCBCdXksIG1zZy5zZW5kZXIsIF9jb3VudCwgbXNnLnZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHQodWludCBfbG9ja0lkLCBzdHJpbmcgX2RhdGFJbmZvLCB1aW50IF92ZXJzaW9uKSBvbmx5T3duZXIgewoKICAgICAgICBFc2Nyb3dJbmZvIGluZm8gPSBlc2Nyb3dzW19sb2NrSWRdOwogICAgICAgIAogICAgICAgIGlmKGluZm8uY291bnQgPiBhdmFpbGFibGVDb3VudCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5jb3VudCA+IGF2YWlsYWJsZUNvdW50Iik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYoaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBwZW5kaW5nQ291bnQgLT0gaW5mby5jb3VudDsKICAgICAgICBhdmFpbGFibGVDb3VudCAtPSBpbmZvLmNvdW50OwoKICAgICAgICAvL0FjY2VwdCBvcmRlciB0byBldmVudCBsb2cKICAgICAgICBsb2dFdmVudChfbG9ja0lkLCBfZGF0YUluZm8sIF92ZXJzaW9uLCBBY2NlcHQsIG1zZy5zZW5kZXIsIGluZm8uY291bnQsIGluZm8ubG9ja2VkRnVuZHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlamVjdCh1aW50IF9sb2NrSWQsIHN0cmluZyBfZGF0YUluZm8sIHVpbnQgX3ZlcnNpb24pIG9ubHlPd25lciB7CiAgICAgICAgCiAgICAgICAgRXNjcm93SW5mbyBpbmZvID0gZXNjcm93c1tfbG9ja0lkXTsKCiAgICAgICAgaWYoaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCkgewogICAgICAgICAgICBsb2dEZWJ1ZygiaW5mby5jb3VudCA+IHBlbmRpbmdDb3VudCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBwZW5kaW5nQ291bnQgLT0gaW5mby5jb3VudDsKCiAgICAgICAgLy9zZW5kIG1vbmV5IGJhY2sKICAgICAgICB5ZXMoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbik7CgogICAgICAgIC8vUmVqZWN0IG9yZGVyIHRvIGV2ZW50IGxvZwogICAgICAgIC8vSEFDSzogInllcyIgY2FsbCBhYm92ZSBtYXkgZmFpbCBhbmQgdGhpcyBldmVudCB3aWxsIGJlIG5vbi1yZWxldmFudC4gRG8gbm90IHJlbHkgb24gaXQuCiAgICAgICAgbG9nRXZlbnQoX2xvY2tJZCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgUmVqZWN0LCBtc2cuc2VuZGVyLCBpbmZvLmNvdW50LCBpbmZvLmxvY2tlZEZ1bmRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYW5jZWwoc3RyaW5nIF9kYXRhSW5mbywgdWludCBfdmVyc2lvbikgb25seU93bmVyIHsKCiAgICAgICAgLy9DYW5jZWxlZCBzdGF0dXMKICAgICAgICBzdGF0dXMgPSBDYW5jZWxlZDsKCiAgICAgICAgLy9DYW5jZWwgb3JkZXIgdG8gZXZlbnQgbG9nCiAgICAgICAgbG9nRXZlbnQoMCwgX2RhdGFJbmZvLCBfdmVyc2lvbiwgQ2FuY2VsLCBtc2cuc2VuZGVyLCBhdmFpbGFibGVDb3VudCwgMCk7CiAgICB9CgogICAgLy9yZW1vdmUgYnV5ZXIgZnJvbSB0aGUgd2F0Y2hsaXN0CiAgICBmdW5jdGlvbiB1bmJ1eSgpIHsKCiAgICAgICAgYnV5ZXJzW21zZy5zZW5kZXJdID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93OwogICAgfQp9'.
	

]
