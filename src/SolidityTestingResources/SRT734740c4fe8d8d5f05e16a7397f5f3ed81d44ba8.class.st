Class {
	#name : #SRT734740c4fe8d8d5f05e16a7397f5f3ed81d44ba8,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT734740c4fe8d8d5f05e16a7397f5f3ed81d44ba8 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgZnVuY3Rpb24gbXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgLyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCmNvbnRyYWN0IE93bmFibGUgewogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8pOwoKICAgIC8qKgogICAgICogVGhlIGFkZHJlc3Mgd2hjaWggZGVwbG95cyB0aGlzIGNvbnRyY2F0IGlzIGF1dG9tYXRpY2FsbHkgYXNzZ2luZWQgb3duZXJzaGlwLgogICAgICogKi8KICAgIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEZ1bmN0aW9ucyB3aXRoIHRoaXMgbW9kaWZpZXIgY2FuIG9ubHkgYmUgZXhlY3V0ZWQgYnkgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdC4gCiAgICAgKiAqLwogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2ZlcnMgb3duZXJzaGlwIHByb3ZpZGVkIHRoYXQgYSB2YWxpZCBhZGRyZXNzIGlzIGdpdmVuLiBUaGlzIGZ1bmN0aW9uIGNhbiAKICAgICAqIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QuIAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfbmV3T3duZXIgIT0gMHgwKTsKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgX25ld093bmVyKTsKICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgIH0KCn0KCgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludCB2YWx1ZSk7Cn0KCgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSBwdWJsaWM7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludCB2YWx1ZSk7Cn0KCgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMsIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICBpZiAobXNnLmRhdGEubGVuZ3RoIDwgc2l6ZSArIDQpIHsKICAgICAgIHJldmVydCgpOwogICAgIH0KICAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgQmFzaWNUb2tlbiwgRVJDMjAgewoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dhbmNlczsKCiAgICAvKioKICAgICAqIFRyYW5zZmVycyB0b2tlbnMgZnJvbSB0aGUgYWNjb3VudCBvZiB0aGUgb3duZXIgYnkgYW4gYXBwcm92ZWQgc3BlbmRlci4gCiAgICAgKiBUaGUgc3BlbmRlciBjYW5ub3Qgc3BlbmQgbW9yZSB0aGFuIHRoZSBhcHByb3ZlZCBhbW91bnQuIAogICAgICogCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVycyBhY2NvdW50LgogICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gdHJhbnNmZXIuCiAgICAgKiAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICAgICAgcmVxdWlyZShhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfYW1vdW50ICYmIGJhbGFuY2VzW19mcm9tXSA+PSBfYW1vdW50KTsKICAgICAgICBhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93YW5jZXNbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBhbm90aGVyIGFjY291bnQgdG8gc3BlbmQgYSBnaXZlbiBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiB0aGUgCiAgICAgKiBvd25lcidzIGFjY291bnQuIElmIHRoZSBvd25lciBoYXMgcHJldmlvdXNseSBhbGxvd2VkIGEgc3BlbmRlciB0byBzcGVuZAogICAgICogdG9rZW5zIG9uIGhpcyBvciBoZXIgYmVoYWxmIGFuZCB3b3VsZCBsaWtlIHRvIGNoYW5nZSB0aGUgYXBwcm92YWwgYW1vdW50LAogICAgICogaGUgb3Igc2hlIHdpbGwgZmlyc3QgaGF2ZSB0byBzZXQgdGhlIGFsbG93YW5jZSBiYWNrIHRvIDAgYW5kIHRoZW4gdXBkYXRlCiAgICAgKiB0aGUgYWxsb3dhbmNlLgogICAgICogCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHNwZW5kZXJzIGFjY291bnQuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0aGUgc3BlbmRlciBpcyBhbGxvd2VkIHRvIHNwZW5kLgogICAgICogKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoKF9hbW91bnQgPT0gMCkgfHwgKGFsbG93YW5jZXNbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKICAgICAgICBhbGxvd2FuY2VzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF9hbW91bnQ7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF9hbW91bnQpOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGFwcHJvdmVkIGFsbG93YW5jZSBmcm9tIGFuIG93bmVycyBhY2NvdW50IHRvIGEgc3BlbmRlcnMgYWNjb3VudC4KICAgICAqIAogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgb3duZXJzIGFjY291bnQuCiAgICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHNwZW5kZXJzIGFjY291bnQuCiAgICAgKiovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFsbG93YW5jZXNbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cgp9CgoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIE1pbnRzIGEgZ2l2ZW4gYW1vdW50IG9mIHRva2VucyB0byB0aGUgcHJvdmlkZWQgYWRkcmVzcy4gVGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIGNvbnRyYWN0J3MKICAgKiBvd25lciwgd2hpY2ggaW4gdGhpcyBjYXNlIGlzIHRoZSBJQ08gY29udHJhY3QgaXRzZWxmLiBGcm9tIHRoZXJlLCB0aGUgZm91bmRlcnMgb2YgdGhlIElDTyBjb250cmFjdCB3aWxsIGJlCiAgICogYWJsZSB0byBpbnZva2UgdGhpcyBmdW5jdGlvbi4gCiAgICoKICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgdG9rZW5zLgogICAqIEBwYXJhbSBfYW1vdW50IFRoZSB0b3RhbCBhbW91bnQgb2YgRVRDTCB0b2tlbnMgdG8gYmUgbWludGVkLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciBjYW5NaW50IG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBUZXJtaW5hdGVzIHRoZSBtaW50aW5nIHBlcmlvZCBwZXJtYW5lbnRseS4gVGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdC4KICAgKi8KICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgcHVibGljIG9ubHlPd25lciByZXR1cm5zIChib29sKSB7CiAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgTWludEZpbmlzaGVkKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgoKY29udHJhY3QgRXRoZXJjbG91ZCBpcyBNaW50YWJsZVRva2VuIHsKICAgIAogICAgdWludDggcHVibGljIGRlY2ltYWxzOwogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CgogICAgZnVuY3Rpb24gRXRoZXJjbG91ZCgpIHB1YmxpYyB7CiAgICAgICB0b3RhbFN1cHBseSA9IDA7CiAgICAgICBkZWNpbWFscyA9IDE4OwogICAgICAgbmFtZSA9ICJFdGhlcmNsb3VkIjsKICAgICAgIHN5bWJvbCA9ICJFVENMIjsKICAgIH0KfQoKCmNvbnRyYWN0IElDTyBpcyBPd25hYmxlIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBFdGhlcmNsb3VkIHB1YmxpYyBFVENMOwoKICAgIGJvb2wgICAgICAgcHVibGljIHN1Y2Nlc3M7CiAgICB1aW50MjU2ICAgIHB1YmxpYyByYXRlOwogICAgdWludDI1NiAgICBwdWJsaWMgcmF0ZVdpdGhCb251czsKICAgIHVpbnQyNTYgICAgcHVibGljIGJvdW50aWVzSXNzdWVkOwogICAgdWludDI1NiAgICBwdWJsaWMgdG9rZW5zU29sZDsKICAgIHVpbnQyNTYgICAgcHVibGljIHRva2Vuc0ZvclNhbGU7CiAgICB1aW50MjU2ICAgIHB1YmxpYyB0b2tlbnNGb3JCb3VudHk7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBtYXhUb2tlbnM7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50MjU2ICAgIHB1YmxpYyBlbmRUaW1lOwogICAgdWludDI1NiAgICBwdWJsaWMgc29mdENhcDsKICAgIHVpbnQyNTYgICAgcHVibGljIGhhcmRDYXA7CiAgICB1aW50MjU2WzNdIHB1YmxpYyBib251c1N0YWdlczsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludmVzdG1lbnRzOwoKICAgIGV2ZW50IFRva2Vuc1B1cmNoYXNlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IFJlZnVuZElzc3VlZChhZGRyZXNzIGluZGV4ZWQgYnksIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IEZ1bmRzV2l0aGRyYXduKGFkZHJlc3MgaW5kZXhlZCBieSwgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgQm91bnR5SXNzdWVkKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgSWNvU3VjY2VzcygpOwogICAgZXZlbnQgQ2FwUmVhY2hlZCgpOwoKICAgIGZ1bmN0aW9uIElDTygpIHB1YmxpYyB7CiAgICAgICAgRVRDTCA9IG5ldyBFdGhlcmNsb3VkKCk7CiAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgIHJhdGUgPSAxMjg4OyAKICAgICAgICByYXRlV2l0aEJvbnVzID0gMTY3NDsKICAgICAgICBib3VudGllc0lzc3VlZCA9IDA7CiAgICAgICAgdG9rZW5zU29sZCA9IDA7CiAgICAgICAgdG9rZW5zRm9yU2FsZSA9IDc4ZTI0OyAgICAgICAgICAgICAgLy83OCBtaWxsaW9uIEVUQ0wgZm9yIHNhbGUKICAgICAgICB0b2tlbnNGb3JCb3VudHkgPSAyZTI0OyAgICAgICAgICAgICAvLzIgbWlsbGlvbiBFVENMIGZvciBib3VudHkKICAgICAgICBtYXhUb2tlbnMgPSAxMDBlMjQ7ICAgICAgICAgICAgICAgICAvLzEwMCBtaWxsaW9uIEVUQ0wKICAgICAgICBzdGFydFRpbWUgPSBub3cuYWRkKDE1IGRheXMpOyAgICAgICAvL0lDTyBzdGFydHMgMTUgZGF5cyBhZnRlciBkZXBsb3ltZW50CiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZS5hZGQoMzAgZGF5cyk7ICAgLy8zMCBkYXlzIGVuZCB0aW1lCiAgICAgICAgc29mdENhcCA9IDYyMTI1MzA2NzQzNzAyMDVlNjsgICAgICAgLy82MjEyLjUzMDY3NDM3MDIwNSBFVEgKICAgICAgICBoYXJkQ2FwID0gNDY1OTQ5ODAwNTc3NzY1MzVlNjsgICAgICAvLzQ2NTk0Ljk4MDA1Nzc3NjUzNSBFVEgKCiAgICAgICAgYm9udXNTdGFnZXNbMF0gPSBzdGFydFRpbWUuYWRkKDcgZGF5cyk7CgogICAgICAgIGZvciAodWludCBpID0gMTsgaSA8IGJvbnVzU3RhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJvbnVzU3RhZ2VzW2ldID0gYm9udXNTdGFnZXNbaSAtIDFdLmFkZCg3IGRheXMpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFdoZW4gRVRIIGlzIHNlbnQgdG8gdGhlIGNvbnRyYWN0LCB0aGUgZmFsbGJhY2sgZnVuY3Rpb24gY2FsbHMgdGhlIGJ1eSB0b2tlbnMgZnVuY3Rpb24uCiAgICAgKi8KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBpbnZlc3RvcnMgdG8gYnV5IEVUQ0wgdG9rZW5zIGJ5IHNlbmRpbmcgRVRIIGFuZCBhdXRvbWF0aWNhbGx5IHJlY2VpdmluZyB0b2tlbnMKICAgICAqIHRvIHRoZSBwcm92aWRlZCBhZGRyZXNzLgogICAgICoKICAgICAqIEBwYXJhbSBfYmVuZWZpY2lhcnkgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCByZWNlaXZlIHRoZSB0b2tlbnMuIAogICAgICovCiAgICBmdW5jdGlvbiBidXlUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAweDAgJiYgdmFsaWRQdXJjaGFzZSgpICYmIHRoaXMuYmFsYW5jZS5zdWIobXNnLnZhbHVlKSA8IGhhcmRDYXApOwogICAgICAgIGlmICh0aGlzLmJhbGFuY2UgPj0gc29mdENhcCAmJiAhc3VjY2VzcykgewogICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgSWNvU3VjY2VzcygpOwogICAgICAgIH0KICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICBpZiAodGhpcy5iYWxhbmNlID4gaGFyZENhcCkgewogICAgICAgICAgICBDYXBSZWFjaGVkKCk7CiAgICAgICAgICAgIHVpbnQyNTYgdG9SZWZ1bmQgPSB0aGlzLmJhbGFuY2Uuc3ViKGhhcmRDYXApOwogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKHRvUmVmdW5kKTsKICAgICAgICAgICAgd2VpQW1vdW50ID0gd2VpQW1vdW50LnN1Yih0b1JlZnVuZCk7CiAgICAgICAgfQogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gd2VpQW1vdW50Lm11bChnZXRDdXJyZW50UmF0ZVdpdGhCb251cygpKTsKICAgICAgICBpZiAodG9rZW5zU29sZC5hZGQodG9rZW5zKSA+IHRva2Vuc0ZvclNhbGUpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIEVUQ0wubWludChfYmVuZWZpY2lhcnksIHRva2Vucyk7CiAgICAgICAgdG9rZW5zU29sZCA9IHRva2Vuc1NvbGQuYWRkKHRva2Vucyk7CiAgICAgICAgaW52ZXN0bWVudHNbX2JlbmVmaWNpYXJ5XSA9IGludmVzdG1lbnRzW19iZW5lZmljaWFyeV0uYWRkKHdlaUFtb3VudCk7CiAgICAgICAgVG9rZW5zUHVyY2hhc2VkKF9iZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgcmF0ZSB3aXRoIGJvbnVzIHBlcmNlbnRhZ2Ugb2YgdGhlIHRva2Vucy4gCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRSYXRlV2l0aEJvbnVzKCkgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJhdGVXaXRoQm9udXMgPSAocmF0ZS5tdWwoZ2V0Qm9udXNQZXJjZW50YWdlKCkpLmRpdigxMDApKS5hZGQocmF0ZSk7CiAgICAgICAgcmV0dXJuIHJhdGVXaXRoQm9udXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGJvbnVzIHBlcmNlbnRhZ2UuIAogICAgICovCiAgICBmdW5jdGlvbiBnZXRCb251c1BlcmNlbnRhZ2UoKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgYm9udXNQZXJjZW50YWdlKSB7CiAgICAgICAgdWludDI1NiB0aW1lU3RhbXAgPSBub3c7CiAgICAgICAgaWYgKHRpbWVTdGFtcCA+IGJvbnVzU3RhZ2VzWzJdKSB7CiAgICAgICAgICAgIGJvbnVzUGVyY2VudGFnZSA9IDA7IAogICAgICAgIH0KICAgICAgICBpZiAodGltZVN0YW1wIDw9IGJvbnVzU3RhZ2VzWzJdKSB7CiAgICAgICAgICAgIGJvbnVzUGVyY2VudGFnZSA9IDU7CiAgICAgICAgfQogICAgICAgIGlmICh0aW1lU3RhbXAgPD0gYm9udXNTdGFnZXNbMV0pIHsKICAgICAgICAgICAgYm9udXNQZXJjZW50YWdlID0gMTU7CiAgICAgICAgfQogICAgICAgIGlmICh0aW1lU3RhbXAgPD0gYm9udXNTdGFnZXNbMF0pIHsKICAgICAgICAgICAgYm9udXNQZXJjZW50YWdlID0gMzA7CiAgICAgICAgfSAKICAgICAgICByZXR1cm4gYm9udXNQZXJjZW50YWdlOwogICAgfQoKICAgIC8qKgogICAgICogTWludHMgYSBnaXZlbiBhbW91bnQgb2YgbmV3IHRva2VucyB0byB0aGUgcHJvdmlkZWQgYWRkcmVzcy4gVGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZQogICAgICogY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QuCiAgICAgKgogICAgICogQHBhcmFtIF9iZW5lZmljaWFyeSBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHJlY2VpdmUgdGhlIHRva2Vucy4KICAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIG1pbnRlZC4KICAgICAqLwogICAgZnVuY3Rpb24gaXNzdWVUb2tlbnMoYWRkcmVzcyBfYmVuZWZpY2lhcnksIHVpbnQyNTYgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gMHgwICYmIF9hbW91bnQgPiAwICYmIHRva2Vuc1NvbGQuYWRkKF9hbW91bnQpIDw9IHRva2Vuc0ZvclNhbGUpOyAKICAgICAgICBFVENMLm1pbnQoX2JlbmVmaWNpYXJ5LCBfYW1vdW50KTsKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQoX2Ftb3VudCk7CiAgICAgICAgVG9rZW5zUHVyY2hhc2VkKF9iZW5lZmljaWFyeSwgX2Ftb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgYSBwdXJjaGFzZSBpcyB2YWxpZC4gSWYgbm90LCB0aGVuIHRoZSBidXkgdG9rZW5zIGZ1bmN0aW9uIHdpbGwgCiAgICAgKiBub3QgZXhlY3V0ZS4KICAgICAqLwogICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBib29sIHdpdGhpblBlcmlvZCA9IG5vdyA+PSBzdGFydFRpbWUgJiYgbm93IDw9IGVuZFRpbWU7CiAgICAgICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgICAgICByZXR1cm4gd2l0aGluUGVyaW9kICYmIG5vblplcm9QdXJjaGFzZTsKICAgIH0KCiAgICAvKioKICAgICAqIEFsbG93cyBpbnZlc3RvcnMgdG8gY2xhaW0gcmVmdW5kIGluIHRoZSBjYXNlIHRoYXQgdGhlIHNvZnQgY2FwIGhhcyBub3QgYmVlbiByZWFjaGVkIGFuZAogICAgICogdGhlIGR1cmF0aW9uIG9mIHRoZSBJQ08gaGFzIHBhc3NlZC4gCiAgICAgKgogICAgICogQHBhcmFtIF9hZGRyIFRoZSBhZGRyZXNzIHRvIGJlIHJlZnVuZGVkLiBJZiBubyBhZGRyZXNzIGlzIHByb3ZpZGVkLCB0aGUgX2FkZHIgd2lsbCBkZWZhdWx0CiAgICAgKiB0byB0aGUgbWVzc2FnZSBzZW5kZXIuIAogICAgICovCiAgICBmdW5jdGlvbiBnZXRSZWZ1bmQoYWRkcmVzcyBfYWRkcikgcHVibGljIHsKICAgICAgICBpZiAoX2FkZHIgPT0gMHgwKSB7CiAgICAgICAgICAgIF9hZGRyID0gbXNnLnNlbmRlcjsKICAgICAgICB9CiAgICAgICAgcmVxdWlyZSghaXNTdWNjZXNzKCkgJiYgaGFzRW5kZWQoKSAmJiBpbnZlc3RtZW50c1tfYWRkcl0gPiAwKTsKICAgICAgICB1aW50MjU2IHRvUmVmdW5kID0gaW52ZXN0bWVudHNbX2FkZHJdOwogICAgICAgIGludmVzdG1lbnRzW19hZGRyXSA9IDA7CiAgICAgICAgX2FkZHIudHJhbnNmZXIodG9SZWZ1bmQpOwogICAgICAgIFJlZnVuZElzc3VlZChfYWRkciwgdG9SZWZ1bmQpOwogICAgfQoKICAgIC8qKgogICAgICogTWludHMgbmV3IHRva2VucyBmb3IgdGhlIGJvdW50eSBjYW1wYWlnbi4gVGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgYnkgdGhlIG93bmVyIAogICAgICogb2YgdGhlIGNvbnRyYWN0LiAKICAgICAqCiAgICAgKiBAcGFyYW0gX2JlbmVmaWNpYXJ5IFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgcmVjZWl2ZSB0aGUgdG9rZW5zLiAKICAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2lsbCBiZSBtaW50ZWQuIAogICAgICovCiAgICBmdW5jdGlvbiBpc3N1ZUJvdW50eShhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludDI1NiBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGJvdW50aWVzSXNzdWVkLmFkZChfYW1vdW50KSA8PSB0b2tlbnNGb3JCb3VudHkgJiYgX2JlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICAgICAgRVRDTC5taW50KF9iZW5lZmljaWFyeSwgX2Ftb3VudCk7CiAgICAgICAgYm91bnRpZXNJc3N1ZWQgPSBib3VudGllc0lzc3VlZC5hZGQoX2Ftb3VudCk7CiAgICAgICAgQm91bnR5SXNzdWVkKF9iZW5lZmljaWFyeSwgX2Ftb3VudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaXRoZHJhd3MgdGhlIHRvdGFsIGFtb3VudCBvZiBFVEggcmFpc2VkIHRvIHRoZSBvd25lcnMgYWRkcmVzcy4gVGhpcyBmdW5jdGlvbiBjYW4gb25seSBiZQogICAgICogY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QgZ2l2ZW4gdGhhdCB0aGUgSUNPIGlzIGEgc3VjY2VzcyBhbmQgdGhlIGR1cmF0aW9uIGhhcyAKICAgICAqIHBhc3NlZC4KICAgICAqLwogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICB1aW50MjU2IGluQ2lyY3VsYXRpb24gPSB0b2tlbnNTb2xkLmFkZChib3VudGllc0lzc3VlZCk7CiAgICAgICAgRVRDTC5taW50KG93bmVyLCBpbkNpcmN1bGF0aW9uLm11bCgyNSkuZGl2KDEwMCkpOwogICAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIElDTyBpcyBhIHN1Y2Nlc3MsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwogICAgZnVuY3Rpb24gaXNTdWNjZXNzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VjY2VzczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZHVyYXRpb24gb2YgdGhlIElDTyBoYXMgcGFzc2VkLCBmYWxzZSBvdGhlcndpc2UuIAogICAgICovCiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIG5vdyA+IGVuZFRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlbmQgdGltZSBvZiB0aGUgSUNPLgogICAgICovCiAgICBmdW5jdGlvbiBlbmRUaW1lKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gZW5kVGltZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHRvdGFsIGludmVzdG1lbnQgb2YgYSBnaXZlbiBFVEggYWRkcmVzcy4gCiAgICAgKgogICAgICogQHBhcmFtIF9hZGRyIFRoZSBhZGRyZXNzIGJlaW5nIHF1ZXJpZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGludmVzdG1lbnRPZihhZGRyZXNzIF9hZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBpbnZlc3RtZW50c1tfYWRkcl07CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5pc2hlcyB0aGUgbWludGluZyBwZXJpb2QuIFRoaXMgZnVuY3Rpb24gY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSBvd25lciBvZiB0aGUgCiAgICAgKiBjb250cmFjdCBnaXZlbiB0aGF0IHRoZSBkdXJhdGlvbiBvZiB0aGUgSUNPIGhhcyBlbmRlZC4gCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwogICAgICAgIEVUQ0wuZmluaXNoTWludGluZygpOwogICAgfQp9'.
	

]
