Class {
	#name : #SRTd742b68487bfa2f7847f0aac39f047951ef39058,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTd742b68487bfa2f7847f0aac39f047951ef39058 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7CgovLyBjb3B5cmlnaHQgPHNwYW4gY2xhc3M9Il9fY2ZfZW1haWxfXyIgZGF0YS1jZmVtYWlsPSI4M2UwZWNlZGY3ZTJlMGY3YzNjNmY3ZWJlNmYxZTZlZWVjZWRhZGUwZWNlZSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4KCmNvbnRyYWN0IFNhZmVNYXRoIHsKCiAgICAvKiBmdW5jdGlvbiBhc3NlcnQoYm9vbCBhc3NlcnRpb24pIGludGVybmFsIHsgKi8KICAgIC8qICAgaWYgKCFhc3NlcnRpb24pIHsgKi8KICAgIC8qICAgICB0aHJvdzsgKi8KICAgIC8qICAgfSAqLwogICAgLyogfSAgICAgIC8vIGFzc2VydCBubyBsb25nZXIgbmVlZGVkIG9uY2Ugc29saWRpdHkgaXMgb24gMC40LjEwICovCgogICAgZnVuY3Rpb24gc2FmZUFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgIGFzc2VydCgoeiA+PSB4KSAmJiAoeiA+PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgYXNzZXJ0KHggPj0geSk7CiAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQoKfQoKY29udHJhY3QgQmFzaWNBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgLy8gYWRkcmVzc1tdIHB1YmxpYyBtb2RlcmF0b3JzOwogICAgdWludDE2IHB1YmxpYyB0b3RhbE1vZGVyYXRvcnMgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgbW9kZXJhdG9yczsKICAgIGJvb2wgcHVibGljIGlzTWFpbnRhaW5pbmcgPSB0cnVlOwoKICAgIGZ1bmN0aW9uIEJhc2ljQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlNb2RlcmF0b3JzKCkgewogICAgICAgIHJlcXVpcmUobW9kZXJhdG9yc1ttc2cuc2VuZGVyXSA9PSB0cnVlKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzQWN0aXZlIHsKICAgICAgICByZXF1aXJlKCFpc01haW50YWluaW5nKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIENoYW5nZU93bmVyKGFkZHJlc3MgX25ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAoX25ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICAgICAgfQogICAgfQoKCiAgICBmdW5jdGlvbiBBZGRNb2RlcmF0b3IoYWRkcmVzcyBfbmV3TW9kZXJhdG9yKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAobW9kZXJhdG9yc1tfbmV3TW9kZXJhdG9yXSA9PSBmYWxzZSkgewogICAgICAgICAgICBtb2RlcmF0b3JzW19uZXdNb2RlcmF0b3JdID0gdHJ1ZTsKICAgICAgICAgICAgdG90YWxNb2RlcmF0b3JzICs9IDE7CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBSZW1vdmVNb2RlcmF0b3IoYWRkcmVzcyBfb2xkTW9kZXJhdG9yKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICBpZiAobW9kZXJhdG9yc1tfb2xkTW9kZXJhdG9yXSA9PSB0cnVlKSB7CiAgICAgICAgICAgIG1vZGVyYXRvcnNbX29sZE1vZGVyYXRvcl0gPSBmYWxzZTsKICAgICAgICAgICAgdG90YWxNb2RlcmF0b3JzIC09IDE7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIFVwZGF0ZU1haW50YWluaW5nKGJvb2wgX2lzTWFpbnRhaW5pbmcpIG9ubHlPd25lciBwdWJsaWMgewogICAgICAgIGlzTWFpbnRhaW5pbmcgPSBfaXNNYWludGFpbmluZzsKICAgIH0KfQoKY29udHJhY3QgRXRoZXJlbW9uRW51bSB7CgogICAgZW51bSBSZXN1bHRDb2RlIHsKICAgICAgICBTVUNDRVNTLAogICAgICAgIEVSUk9SX0NMQVNTX05PVF9GT1VORCwKICAgICAgICBFUlJPUl9MT1dfQkFMQU5DRSwKICAgICAgICBFUlJPUl9TRU5EX0ZBSUwsCiAgICAgICAgRVJST1JfTk9UX1RSQUlORVIsCiAgICAgICAgRVJST1JfTk9UX0VOT1VHSF9NT05FWSwKICAgICAgICBFUlJPUl9JTlZBTElEX0FNT1VOVAogICAgfQogICAgCiAgICBlbnVtIEFycmF5VHlwZSB7CiAgICAgICAgQ0xBU1NfVFlQRSwKICAgICAgICBTVEFUX1NURVAsCiAgICAgICAgU1RBVF9TVEFSVCwKICAgICAgICBTVEFUX0JBU0UsCiAgICAgICAgT0JKX1NLSUxMCiAgICB9Cn0KCgpjb250cmFjdCBFdGhlcmVtb25DYXN0bGVCYXR0bGUgaXMgRXRoZXJlbW9uRW51bSwgQmFzaWNBY2Nlc3NDb250cm9sLCBTYWZlTWF0aCB7CiAgICB1aW50OCBjb25zdGFudCBwdWJsaWMgTk9fQkFUVExFX0xPRyA9IDQ7CiAgICAKICAgIHN0cnVjdCBDYXN0bGVEYXRhIHsKICAgICAgICB1aW50IGluZGV4OyAvLyBpbiBhY3RpdmUgY2FzdGxlIGlmID4gMAogICAgICAgIHN0cmluZyBuYW1lOwogICAgICAgIGFkZHJlc3Mgb3duZXI7CiAgICAgICAgdWludDMyIHRvdGFsV2luOwogICAgICAgIHVpbnQzMiB0b3RhbExvc2U7CiAgICAgICAgdWludDY0WzZdIG1vbnN0ZXJzOyAvLyAzIGF0dGFja2VycywgMyBzdXBwb3J0ZXJzCiAgICAgICAgdWludDY0WzRdIGJhdHRsZUxpc3Q7CiAgICAgICAgdWludDMyIGJyaWNrTnVtYmVyOwogICAgICAgIHVpbnQgY3JlYXRlVGltZTsKICAgIH0KICAgIAogICAgc3RydWN0IEJhdHRsZURhdGFMb2cgewogICAgICAgIHVpbnQzMiBjYXN0bGVJZDsKICAgICAgICBhZGRyZXNzIGF0dGFja2VyOwogICAgICAgIHVpbnQzMlszXSBjYXN0bGVFeHBzOyAvLyAzIGF0dGFja2VycwogICAgICAgIHVpbnQ2NFs2XSBhdHRhY2tlck9iaklkczsKICAgICAgICB1aW50MzJbM10gYXR0YWNrZXJFeHBzOwogICAgICAgIHVpbnQ4WzNdIHJhbmRvbXM7CiAgICAgICAgdWludDggcmVzdWx0OwogICAgfQogICAgCiAgICBzdHJ1Y3QgVHJhaW5lckJhdHRsZUxvZyB7CiAgICAgICAgdWludDMyIGxhc3RDYXN0bGU7CiAgICAgICAgdWludDMyIHRvdGFsV2luOwogICAgICAgIHVpbnQzMiB0b3RhbExvc2U7CiAgICAgICAgdWludDY0WzRdIGJhdHRsZUxpc3Q7CiAgICAgICAgdWludDMyIHRvdGFsQnJpY2s7CiAgICB9CiAgICAKICAgIG1hcHBpbmcodWludDY0ID0+IEJhdHRsZURhdGFMb2cpIGJhdHRsZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDMyKSB0cmFpbmVyQ2FzdGxlOwogICAgbWFwcGluZyhhZGRyZXNzID0+IFRyYWluZXJCYXR0bGVMb2cpIHRyYW5uZXJCYXR0bGVMb2c7CiAgICBtYXBwaW5nKHVpbnQzMiA9PiBDYXN0bGVEYXRhKSBjYXN0bGVEYXRhOwogICAgdWludDMyW10gYWN0aXZlQ2FzdGxlTGlzdDsKCiAgICB1aW50MzIgcHVibGljIHRvdGFsQ2FzdGxlID0gMDsKICAgIHVpbnQ2NCBwdWJsaWMgdG90YWxCYXR0bGUgPSAwOwogICAgCiAgICAvLyBvbmx5IG1vZGVyYXRvcnMKICAgIC8qCiAgICBUTyBBVk9JRCBBTlkgQlVHUywgV0UgQUxMT1cgTU9ERVJBVE9SUyBUTyBIQVZFIFBFUk1JU1NJT04gVE8gQUxMIFRIRVNFIEZVTkNUSU9OUyBBTkQgVVBEQVRFIFRIRU0gSU4gRUFSTFkgQkVUQSBTVEFHRS4KICAgIEFGVEVSIFRIRSBTWVNURU0gSVMgU1RBQkxFLCBXRSBXSUxMIFJFTU9WRSBPV05FUiBPRiBUSElTIFNNQVJUIENPTlRSQUNUIEFORCBPTkxZIEtFRVAgT05FIE1PREVSQVRPUiBXSElDSCBJUyBFVEhFUkVNT04gQkFUVExFIENPTlRSQUNULgogICAgSEVOQ0UsIFRIRSBERUNFTlRSQUxJWkVEIEFUVFJJQlVUSU9OIElTIEdVQVJBTlRFRUQuCiAgICAqLwogICAgCiAgICBmdW5jdGlvbiBhZGRDYXN0bGUoYWRkcmVzcyBfdHJhaW5lciwgc3RyaW5nIF9uYW1lLCB1aW50NjQgX2ExLCB1aW50NjQgX2EyLCB1aW50NjQgX2EzLCB1aW50NjQgX3MxLCB1aW50NjQgX3MyLCB1aW50NjQgX3MzLCB1aW50MzIgX2JyaWNrTnVtYmVyKSBvbmx5TW9kZXJhdG9ycyBleHRlcm5hbCByZXR1cm5zKHVpbnQzMiBjdXJyZW50Q2FzdGxlSWQpewogICAgICAgIGN1cnJlbnRDYXN0bGVJZCA9IHRyYWluZXJDYXN0bGVbX3RyYWluZXJdOwogICAgICAgIGlmIChjdXJyZW50Q2FzdGxlSWQgPiAwKQogICAgICAgICAgICByZXR1cm4gY3VycmVudENhc3RsZUlkOwoKICAgICAgICB0b3RhbENhc3RsZSArPSAxOwogICAgICAgIGN1cnJlbnRDYXN0bGVJZCA9IHRvdGFsQ2FzdGxlOwogICAgICAgIENhc3RsZURhdGEgc3RvcmFnZSBjYXN0bGUgPSBjYXN0bGVEYXRhW2N1cnJlbnRDYXN0bGVJZF07CiAgICAgICAgY2FzdGxlLm5hbWUgPSBfbmFtZTsKICAgICAgICBjYXN0bGUub3duZXIgPSBfdHJhaW5lcjsKICAgICAgICBjYXN0bGUubW9uc3RlcnNbMF0gPSBfYTE7CiAgICAgICAgY2FzdGxlLm1vbnN0ZXJzWzFdID0gX2EyOwogICAgICAgIGNhc3RsZS5tb25zdGVyc1syXSA9IF9hMzsKICAgICAgICBjYXN0bGUubW9uc3RlcnNbM10gPSBfczE7CiAgICAgICAgY2FzdGxlLm1vbnN0ZXJzWzRdID0gX3MyOwogICAgICAgIGNhc3RsZS5tb25zdGVyc1s1XSA9IF9zMzsKICAgICAgICBjYXN0bGUuYnJpY2tOdW1iZXIgPSBfYnJpY2tOdW1iZXI7CiAgICAgICAgY2FzdGxlLmNyZWF0ZVRpbWUgPSBub3c7CiAgICAgICAgCiAgICAgICAgY2FzdGxlLmluZGV4ID0gKythY3RpdmVDYXN0bGVMaXN0Lmxlbmd0aDsKICAgICAgICBhY3RpdmVDYXN0bGVMaXN0W2Nhc3RsZS5pbmRleC0xXSA9IGN1cnJlbnRDYXN0bGVJZDsKICAgICAgICAvLyBtYXJrIHNlbmRlcgogICAgICAgIHRyYWluZXJDYXN0bGVbX3RyYWluZXJdID0gY3VycmVudENhc3RsZUlkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW5hbWVDYXN0bGUodWludDMyIF9jYXN0bGVJZCwgc3RyaW5nIF9uYW1lKSBvbmx5TW9kZXJhdG9ycyBleHRlcm5hbCB7CiAgICAgICAgQ2FzdGxlRGF0YSBzdG9yYWdlIGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICBjYXN0bGUubmFtZSA9IF9uYW1lOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZW1vdmVDYXN0bGVGcm9tQWN0aXZlKHVpbnQzMiBfY2FzdGxlSWQpIG9ubHlNb2RlcmF0b3JzIGV4dGVybmFsIHsKICAgICAgICBDYXN0bGVEYXRhIHN0b3JhZ2UgY2FzdGxlID0gY2FzdGxlRGF0YVtfY2FzdGxlSWRdOwogICAgICAgIGlmIChjYXN0bGUuaW5kZXggPT0gMCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIAogICAgICAgIHRyYWluZXJDYXN0bGVbY2FzdGxlLm93bmVyXSA9IDA7CiAgICAgICAgaWYgKGNhc3RsZS5pbmRleCA8PSBhY3RpdmVDYXN0bGVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICAvLyBNb3ZlIGFuIGV4aXN0aW5nIGVsZW1lbnQgaW50byB0aGUgdmFjYXRlZCBrZXkgc2xvdC4KICAgICAgICAgICAgY2FzdGxlRGF0YVthY3RpdmVDYXN0bGVMaXN0W2FjdGl2ZUNhc3RsZUxpc3QubGVuZ3RoLTFdXS5pbmRleCA9IGNhc3RsZS5pbmRleDsKICAgICAgICAgICAgYWN0aXZlQ2FzdGxlTGlzdFtjYXN0bGUuaW5kZXgtMV0gPSBhY3RpdmVDYXN0bGVMaXN0W2FjdGl2ZUNhc3RsZUxpc3QubGVuZ3RoLTFdOwogICAgICAgICAgICBhY3RpdmVDYXN0bGVMaXN0Lmxlbmd0aCAtPSAxOwogICAgICAgICAgICBjYXN0bGUuaW5kZXggPSAwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0cmFubmVyQmF0dGxlTG9nW2Nhc3RsZS5vd25lcl0ubGFzdENhc3RsZSA9IF9jYXN0bGVJZDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQmF0dGxlTG9nKHVpbnQzMiBfY2FzdGxlSWQsIGFkZHJlc3MgX2F0dGFja2VyLCAKICAgICAgICB1aW50OCBfcmFuMSwgdWludDggX3JhbjIsIHVpbnQ4IF9yYW4zLCB1aW50OCBfcmVzdWx0LCB1aW50MzIgX2Nhc3RsZUV4cDEsIHVpbnQzMiBfY2FzdGxlRXhwMiwgdWludDMyIF9jYXN0bGVFeHAzKSBvbmx5TW9kZXJhdG9ycyBleHRlcm5hbCByZXR1cm5zKHVpbnQ2NCkgewogICAgICAgIHRvdGFsQmF0dGxlICs9IDE7CiAgICAgICAgQmF0dGxlRGF0YUxvZyBzdG9yYWdlIGJhdHRsZUxvZyA9IGJhdHRsZXNbdG90YWxCYXR0bGVdOwogICAgICAgIGJhdHRsZUxvZy5jYXN0bGVJZCA9IF9jYXN0bGVJZDsKICAgICAgICBiYXR0bGVMb2cuYXR0YWNrZXIgPSBfYXR0YWNrZXI7CiAgICAgICAgYmF0dGxlTG9nLnJhbmRvbXNbMF0gPSBfcmFuMTsKICAgICAgICBiYXR0bGVMb2cucmFuZG9tc1sxXSA9IF9yYW4yOwogICAgICAgIGJhdHRsZUxvZy5yYW5kb21zWzJdID0gX3JhbjM7CiAgICAgICAgYmF0dGxlTG9nLnJlc3VsdCA9IF9yZXN1bHQ7CiAgICAgICAgYmF0dGxlTG9nLmNhc3RsZUV4cHNbMF0gPSBfY2FzdGxlRXhwMTsKICAgICAgICBiYXR0bGVMb2cuY2FzdGxlRXhwc1sxXSA9IF9jYXN0bGVFeHAyOwogICAgICAgIGJhdHRsZUxvZy5jYXN0bGVFeHBzWzJdID0gX2Nhc3RsZUV4cDM7CiAgICAgICAgCiAgICAgICAgLy8gCiAgICAgICAgQ2FzdGxlRGF0YSBzdG9yYWdlIGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICBUcmFpbmVyQmF0dGxlTG9nIHN0b3JhZ2UgdHJhaW5lckxvZyA9IHRyYW5uZXJCYXR0bGVMb2dbX2F0dGFja2VyXTsKICAgICAgICAvKgogICAgICAgIENBU1RMRV9XSU4gPSAwIAogICAgICAgIENBU1RMRV9MT1NFID0gMSAKICAgICAgICBDQVNUTEVfREVTVFJPWUVEPSAyCiAgICAgICAgKi8KICAgICAgICBpZiAoX3Jlc3VsdCA9PSAwKSB7IC8vIHdpbgogICAgICAgICAgICBjYXN0bGUudG90YWxXaW4gKz0gMTsKICAgICAgICAgICAgdHJhaW5lckxvZy50b3RhbExvc2UgKz0gMTsgICAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhc3RsZS50b3RhbExvc2UgKz0gMTsKICAgICAgICAgICAgdHJhaW5lckxvZy50b3RhbFdpbiArPSAxOwogICAgICAgICAgICBpZiAoX3Jlc3VsdCA9PSAyKSB7IC8vIGRlc3Ryb3kKICAgICAgICAgICAgICAgIHRyYWluZXJMb2cudG90YWxCcmljayArPSBjYXN0bGUuYnJpY2tOdW1iZXIgLyAyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjYXN0bGUuYmF0dGxlTGlzdFsoY2FzdGxlLnRvdGFsTG9zZSArIGNhc3RsZS50b3RhbFdpbiAtIDEpJU5PX0JBVFRMRV9MT0ddID0gdG90YWxCYXR0bGU7CiAgICAgICAgdHJhaW5lckxvZy5iYXR0bGVMaXN0Wyh0cmFpbmVyTG9nLnRvdGFsV2luICsgdHJhaW5lckxvZy50b3RhbExvc2UgLSAxKSVOT19CQVRUTEVfTE9HXSA9IHRvdGFsQmF0dGxlOwogICAgICAgIAogICAgICAgIHJldHVybiB0b3RhbEJhdHRsZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRkQmF0dGxlTG9nTW9uc3RlckluZm8odWludDY0IF9iYXR0bGVJZCwgdWludDY0IF9hMSwgdWludDY0IF9hMiwgdWludDY0IF9hMywgdWludDY0IF9zMSwgdWludDY0IF9zMiwgdWludDY0IF9zMywgdWludDMyIF9leHAxLCB1aW50MzIgX2V4cDIsIHVpbnQzMiBfZXhwMykgb25seU1vZGVyYXRvcnMgZXh0ZXJuYWwgewogICAgICAgIEJhdHRsZURhdGFMb2cgc3RvcmFnZSBiYXR0bGVMb2cgPSBiYXR0bGVzW19iYXR0bGVJZF07CiAgICAgICAgYmF0dGxlTG9nLmF0dGFja2VyT2JqSWRzWzBdID0gX2ExOwogICAgICAgIGJhdHRsZUxvZy5hdHRhY2tlck9iaklkc1sxXSA9IF9hMjsKICAgICAgICBiYXR0bGVMb2cuYXR0YWNrZXJPYmpJZHNbMl0gPSBfYTM7CiAgICAgICAgYmF0dGxlTG9nLmF0dGFja2VyT2JqSWRzWzNdID0gX3MxOwogICAgICAgIGJhdHRsZUxvZy5hdHRhY2tlck9iaklkc1s0XSA9IF9zMjsKICAgICAgICBiYXR0bGVMb2cuYXR0YWNrZXJPYmpJZHNbNV0gPSBfczM7CiAgICAgICAgCiAgICAgICAgYmF0dGxlTG9nLmF0dGFja2VyRXhwc1swXSA9IF9leHAxOwogICAgICAgIGJhdHRsZUxvZy5hdHRhY2tlckV4cHNbMV0gPSBfZXhwMjsKICAgICAgICBiYXR0bGVMb2cuYXR0YWNrZXJFeHBzWzJdID0gX2V4cDM7CiAgICB9CiAgICAKICAgIAogICAgLy8gcmVhZCBhY2Nlc3MgCiAgICBmdW5jdGlvbiBpc0Nhc3RsZUFjdGl2ZSh1aW50MzIgX2Nhc3RsZUlkKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zKGJvb2wpewogICAgICAgIENhc3RsZURhdGEgc3RvcmFnZSBjYXN0bGUgPSBjYXN0bGVEYXRhW19jYXN0bGVJZF07CiAgICAgICAgcmV0dXJuIChjYXN0bGUuaW5kZXggPiAwKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY291bnRBY3RpdmVDYXN0bGUoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gYWN0aXZlQ2FzdGxlTGlzdC5sZW5ndGg7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUNhc3RsZUlkKHVpbnQgaW5kZXgpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDMyKSB7CiAgICAgICAgcmV0dXJuIGFjdGl2ZUNhc3RsZUxpc3RbaW5kZXhdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDYXN0bGVCYXNpY0luZm8oYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDMyLCB1aW50LCB1aW50MzIpIHsKICAgICAgICB1aW50MzIgY3VycmVudENhc3RsZUlkID0gdHJhaW5lckNhc3RsZVtfb3duZXJdOwogICAgICAgIGlmIChjdXJyZW50Q2FzdGxlSWQgPT0gMCkKICAgICAgICAgICAgcmV0dXJuICgwLCAwLCAwKTsKICAgICAgICBDYXN0bGVEYXRhIG1lbW9yeSBjYXN0bGUgPSBjYXN0bGVEYXRhW2N1cnJlbnRDYXN0bGVJZF07CiAgICAgICAgcmV0dXJuIChjdXJyZW50Q2FzdGxlSWQsIGNhc3RsZS5pbmRleCwgY2FzdGxlLmJyaWNrTnVtYmVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0Q2FzdGxlQmFzaWNJbmZvQnlJZCh1aW50MzIgX2Nhc3RsZUlkKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zKHVpbnQsIGFkZHJlc3MsIHVpbnQzMikgewogICAgICAgIENhc3RsZURhdGEgbWVtb3J5IGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICByZXR1cm4gKGNhc3RsZS5pbmRleCwgY2FzdGxlLm93bmVyLCBjYXN0bGUuYnJpY2tOdW1iZXIpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDYXN0bGVPYmpJbmZvKHVpbnQzMiBfY2FzdGxlSWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDY0LCB1aW50NjQsIHVpbnQ2NCwgdWludDY0LCB1aW50NjQsIHVpbnQ2NCkgewogICAgICAgIENhc3RsZURhdGEgbWVtb3J5IGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICByZXR1cm4gKGNhc3RsZS5tb25zdGVyc1swXSwgY2FzdGxlLm1vbnN0ZXJzWzFdLCBjYXN0bGUubW9uc3RlcnNbMl0sIGNhc3RsZS5tb25zdGVyc1szXSwgY2FzdGxlLm1vbnN0ZXJzWzRdLCBjYXN0bGUubW9uc3RlcnNbNV0pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDYXN0bGVXaW5Mb3NlKHVpbnQzMiBfY2FzdGxlSWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDMyLCB1aW50MzIsIHVpbnQzMikgewogICAgICAgIENhc3RsZURhdGEgbWVtb3J5IGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICByZXR1cm4gKGNhc3RsZS50b3RhbFdpbiwgY2FzdGxlLnRvdGFsTG9zZSwgY2FzdGxlLmJyaWNrTnVtYmVyKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0Q2FzdGxlU3RhdHModWludDMyIF9jYXN0bGVJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyhzdHJpbmcsIGFkZHJlc3MsIHVpbnQzMiwgdWludDMyLCB1aW50MzIsIHVpbnQpIHsKICAgICAgICBDYXN0bGVEYXRhIG1lbW9yeSBjYXN0bGUgPSBjYXN0bGVEYXRhW19jYXN0bGVJZF07CiAgICAgICAgcmV0dXJuIChjYXN0bGUubmFtZSwgY2FzdGxlLm93bmVyLCBjYXN0bGUuYnJpY2tOdW1iZXIsIGNhc3RsZS50b3RhbFdpbiwgY2FzdGxlLnRvdGFsTG9zZSwgY2FzdGxlLmNyZWF0ZVRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJhdHRsZURhdGFMb2codWludDY0IF9iYXR0bGVJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50MzIsIGFkZHJlc3MsIHVpbnQ4LCB1aW50OCwgdWludDgsIHVpbnQ4LCB1aW50MzIsIHVpbnQzMiwgdWludDMyKSB7CiAgICAgICAgQmF0dGxlRGF0YUxvZyBtZW1vcnkgYmF0dGxlTG9nID0gYmF0dGxlc1tfYmF0dGxlSWRdOwogICAgICAgIHJldHVybiAoYmF0dGxlTG9nLmNhc3RsZUlkLCBiYXR0bGVMb2cuYXR0YWNrZXIsIGJhdHRsZUxvZy5yZXN1bHQsIGJhdHRsZUxvZy5yYW5kb21zWzBdLCBiYXR0bGVMb2cucmFuZG9tc1sxXSwgCiAgICAgICAgICAgIGJhdHRsZUxvZy5yYW5kb21zWzJdLCBiYXR0bGVMb2cuY2FzdGxlRXhwc1swXSwgYmF0dGxlTG9nLmNhc3RsZUV4cHNbMV0sIGJhdHRsZUxvZy5jYXN0bGVFeHBzWzJdKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0QmF0dGxlQXR0YWNrZXJMb2codWludDY0IF9iYXR0bGVJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50NjQsIHVpbnQ2NCwgdWludDY0LCB1aW50NjQsIHVpbnQ2NCwgdWludDY0LCB1aW50MzIsIHVpbnQzMiwgdWludDMyKSB7CiAgICAgICAgQmF0dGxlRGF0YUxvZyBtZW1vcnkgYmF0dGxlTG9nID0gYmF0dGxlc1tfYmF0dGxlSWRdOwogICAgICAgIHJldHVybiAoYmF0dGxlTG9nLmF0dGFja2VyT2JqSWRzWzBdLCBiYXR0bGVMb2cuYXR0YWNrZXJPYmpJZHNbMV0sIGJhdHRsZUxvZy5hdHRhY2tlck9iaklkc1syXSwgYmF0dGxlTG9nLmF0dGFja2VyT2JqSWRzWzNdLCBiYXR0bGVMb2cuYXR0YWNrZXJPYmpJZHNbNF0sIAogICAgICAgICAgICBiYXR0bGVMb2cuYXR0YWNrZXJPYmpJZHNbNV0sIGJhdHRsZUxvZy5hdHRhY2tlckV4cHNbMF0sIGJhdHRsZUxvZy5hdHRhY2tlckV4cHNbMV0sIGJhdHRsZUxvZy5hdHRhY2tlckV4cHNbMl0pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRDYXN0bGVCYXR0bGVMaXN0KHVpbnQzMiBfY2FzdGxlSWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnModWludDY0LCB1aW50NjQsIHVpbnQ2NCwgdWludDY0KSB7CiAgICAgICAgQ2FzdGxlRGF0YSBzdG9yYWdlIGNhc3RsZSA9IGNhc3RsZURhdGFbX2Nhc3RsZUlkXTsKICAgICAgICByZXR1cm4gKGNhc3RsZS5iYXR0bGVMaXN0WzBdLCBjYXN0bGUuYmF0dGxlTGlzdFsxXSwgY2FzdGxlLmJhdHRsZUxpc3RbMl0sIGNhc3RsZS5iYXR0bGVMaXN0WzNdKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0VHJhaW5lckJhdHRsZUluZm8oYWRkcmVzcyBfdHJhaW5lcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyh1aW50MzIsIHVpbnQzMiwgdWludDMyLCB1aW50MzIsIHVpbnQ2NCwgdWludDY0LCB1aW50NjQsIHVpbnQ2NCkgewogICAgICAgIFRyYWluZXJCYXR0bGVMb2cgbWVtb3J5IHRyYWluZXJMb2cgPSB0cmFubmVyQmF0dGxlTG9nW190cmFpbmVyXTsKICAgICAgICByZXR1cm4gKHRyYWluZXJMb2cudG90YWxXaW4sIHRyYWluZXJMb2cudG90YWxMb3NlLCB0cmFpbmVyTG9nLmxhc3RDYXN0bGUsIHRyYWluZXJMb2cudG90YWxCcmljaywgdHJhaW5lckxvZy5iYXR0bGVMaXN0WzBdLCB0cmFpbmVyTG9nLmJhdHRsZUxpc3RbMV0sIHRyYWluZXJMb2cuYmF0dGxlTGlzdFsyXSwgCiAgICAgICAgICAgIHRyYWluZXJMb2cuYmF0dGxlTGlzdFszXSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRyYWluZXJCcmljayhhZGRyZXNzIF90cmFpbmVyKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zKHVpbnQzMikgewogICAgICAgIHJldHVybiB0cmFubmVyQmF0dGxlTG9nW190cmFpbmVyXS50b3RhbEJyaWNrOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpc09uQ2FzdGxlKHVpbnQzMiBfY2FzdGxlSWQsIHVpbnQ2NCBfb2JqSWQpIGNvbnN0YW50IGV4dGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIENhc3RsZURhdGEgc3RvcmFnZSBjYXN0bGUgPSBjYXN0bGVEYXRhW19jYXN0bGVJZF07CiAgICAgICAgaWYgKGNhc3RsZS5pbmRleCA+IDApIHsKICAgICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgY2FzdGxlLm1vbnN0ZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgaWYgKGNhc3RsZS5tb25zdGVyc1tpXSA9PSBfb2JqSWQpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9'.
	

]
