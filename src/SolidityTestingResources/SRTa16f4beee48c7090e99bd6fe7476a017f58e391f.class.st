Class {
	#name : #SRTa16f4beee48c7090e99bd6fe7476a017f58e391f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa16f4beee48c7090e99bd6fe7476a017f58e391f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICAgICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAgICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgLyoqIAogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuIAogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG93bmVyKSB7CiAgICAgIHRocm93OwogICAgfQogICAgXzsKIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLiAKICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgICBvd25lciA9IG5ld093bmVyOwogIH0KIAp9CiAgCmNvbnRyYWN0IEVSQzIwIHsKCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwoKfQoKY29udHJhY3QgQ1RDVG9rZW4gaXMgT3duYWJsZSwgRVJDMjAgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIC8vIFRva2VuIHByb3BlcnRpZXMKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJDaGFpblRyYWRlIENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiQ1RDIjsKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMTg7CgogICAgdWludDI1NiBwdWJsaWMgaW5pdGlhbFByaWNlID0gMTAwMDsKICAgIHVpbnQyNTYgcHVibGljIF90b3RhbFN1cHBseSA9IDIyNTAwMDAwMGUxODsKICAgIHVpbnQyNTYgcHVibGljIF9pY29TdXBwbHkgPSAyMDAwMDAwMDBlMTg7CgogICAgLy8gQmFsYW5jZXMgZm9yIGVhY2ggYWNjb3VudAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIAogICAgCiAgICAvL0JhbGFuY2VzIGZvciB3YWl0aW5nIEtZQyBhcHByb3ZpbmcKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXNXYWl0aW5nS1lDOwoKICAgIC8vIE93bmVyIG9mIGFjY291bnQgYXBwcm92ZXMgdGhlIHRyYW5zZmVyIG9mIGFuIGFtb3VudCB0byBhbm90aGVyIGFjY291bnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgCiAgICAvLyBzdGFydCBhbmQgZW5kIHRpbWVzdGFtcHMgd2hlcmUgaW52ZXN0bWVudHMgYXJlIGFsbG93ZWQgKGJvdGggaW5jbHVzaXZlKQogICAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lID0gMTUwNzMzNDQwMDsgCiAgICB1aW50MjU2IHB1YmxpYyBlbmRUaW1lID0gMTUxNDc2NDc5OTsgCgogICAgLy8gV2FsbGV0IEFkZHJlc3Mgb2YgVG9rZW4KICAgIGFkZHJlc3MgcHVibGljIG11bHRpc2lnOwoKICAgIC8vIGhvdyBtYW55IHRva2VuIHVuaXRzIGEgYnV5ZXIgZ2V0cyBwZXIgd2VpCiAgICB1aW50MjU2IHB1YmxpYyBSQVRFOwoKICAgIHVpbnQyNTYgcHVibGljIG1pbkNvbnRyaWJBbW91bnQgPSAwLjAxIGV0aGVyOwogICAgdWludDI1NiBwdWJsaWMga3ljTGV2ZWwgPSAxNSBldGhlcjsKICAgIHVpbnQyNTYgbWluQ2FwQm9udXMgPSAyMDAgZXRoZXI7CgogICAgdWludDI1NiBwdWJsaWMgaGFyZENhcCA9IDIwMDAwMDAwMGUxODsKICAgIAogICAgLy9udW1iZXIgb2YgdG90YWwgdG9rZW5zIHNvbGQgCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbE51bWJlclRva2VuU29sZD0wOwoKICAgIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKICAgIGJvb2wgcHVibGljIHRyYWRhYmxlID0gdHJ1ZTsKCiAgICBib29sIHB1YmxpYyBhY3RpdmUgPSB0cnVlOwoKICAgIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwogICAgZXZlbnQgU3RhcnRUcmFkYWJsZSgpOwogICAgZXZlbnQgUGF1c2VUcmFkYWJsZSgpOwogICAgZXZlbnQgSGFsdFRva2VuQWxsT3BlcmF0aW9uKCk7CiAgICBldmVudCBSZXN1bWVUb2tlbkFsbE9wZXJhdGlvbigpOwogICAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCgogICAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgICAgICByZXF1aXJlKCFtaW50aW5nRmluaXNoZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgY2FuVHJhZGFibGUoKSB7CiAgICAgICAgcmVxdWlyZSh0cmFkYWJsZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc0FjdGl2ZSgpIHsKICAgICAgICByZXF1aXJlKGFjdGl2ZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgc2FsZUlzT3BlbigpewogICAgICAgIHJlcXVpcmUoc3RhcnRUaW1lIDw9IGdldE5vdygpICYmIGdldE5vdygpIDw9ZW5kVGltZSk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgLy8gQG5vdGljZSBDVENUb2tlbiBDb250cmFjdAogICAgLy8gQHJldHVybiB0aGUgdHJhbnNhY3Rpb24gYWRkcmVzcwogICAgZnVuY3Rpb24gQ1RDVG9rZW4oYWRkcmVzcyBfbXVsdGlzaWcpIHsKICAgICAgICByZXF1aXJlKF9tdWx0aXNpZyAhPSAweDApOwogICAgICAgIG11bHRpc2lnID0gX211bHRpc2lnOwogICAgICAgIFJBVEUgPSBpbml0aWFsUHJpY2U7CgogICAgICAgIGJhbGFuY2VzW211bHRpc2lnXSA9IF90b3RhbFN1cHBseTsKCiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8vIFBheWFibGUgbWV0aG9kCiAgICAvLyBAbm90aWNlIEFueW9uZSBjYW4gYnV5IHRoZSB0b2tlbnMgb24gdG9rZW5zYWxlIGJ5IHBheWluZyBldGhlcgogICAgZnVuY3Rpb24gKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgICAgCiAgICAgICAgaWYgKCF2YWxpZFB1cmNoYXNlKCkpewogICAgICAgICAgICByZWZ1bmRGdW5kcyhtc2cuc2VuZGVyKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdG9rZW5zYWxlKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIEBub3RpY2UgdG9rZW5zYWxlCiAgICAvLyBAcGFyYW0gcmVjaXBpZW50IFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vIEByZXR1cm4gdGhlIHRyYW5zYWN0aW9uIGFkZHJlc3MgYW5kIHNlbmQgdGhlIGV2ZW50IGFzIFRyYW5zZmVyCiAgICAgICAgZnVuY3Rpb24gdG9rZW5zYWxlKGFkZHJlc3MgcmVjaXBpZW50KSBjYW5NaW50IGlzQWN0aXZlIHNhbGVJc09wZW4gcGF5YWJsZSB7CiAgICAgICAgcmVxdWlyZShyZWNpcGllbnQgIT0gMHgwKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICB1aW50MjU2IG5iVG9rZW5zID0gd2VpQW1vdW50Lm11bChSQVRFKS5kaXYoMSBldGhlcik7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgcmVxdWlyZShfaWNvU3VwcGx5ID49IG5iVG9rZW5zKTsKICAgICAgICAKICAgICAgICBib29sIHBlcmNlbnRhZ2VCb251c0FwcGxpY2FibGUgPSB3ZWlBbW91bnQgPj0gbWluQ2FwQm9udXM7CiAgICAgICAgaWYgKHBlcmNlbnRhZ2VCb251c0FwcGxpY2FibGUpIHsKICAgICAgICAgICAgbmJUb2tlbnMgPSBuYlRva2Vucy5tdWwoMTEpLmRpdigxMCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRvdGFsTnVtYmVyVG9rZW5Tb2xkPXRvdGFsTnVtYmVyVG9rZW5Tb2xkLmFkZChuYlRva2Vucyk7CgogICAgICAgIF9pY29TdXBwbHkgPSBfaWNvU3VwcGx5LnN1YihuYlRva2Vucyk7CgogICAgICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgcmVjaXBpZW50LCB3ZWlBbW91bnQsIG5iVG9rZW5zKTsKCiAgICAgICAgIGlmKHdlaUFtb3VudDwga3ljTGV2ZWwpIHsKICAgICAgICAgICAgdXBkYXRlQmFsYW5jZXMocmVjaXBpZW50LCBuYlRva2Vucyk7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhbGFuY2VzV2FpdGluZ0tZQ1tyZWNpcGllbnRdID0gYmFsYW5jZXNXYWl0aW5nS1lDW3JlY2lwaWVudF0uYWRkKG5iVG9rZW5zKTsgCiAgICAgICAgIH0KICAgICAgICAgZm9yd2FyZEZ1bmRzKCk7ICAKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlQmFsYW5jZXMoYWRkcmVzcyByZWNlaXZlciwgdWludDI1NiB0b2tlbnMpIGludGVybmFsIHsKICAgICAgICBiYWxhbmNlc1ttdWx0aXNpZ10gPSBiYWxhbmNlc1ttdWx0aXNpZ10uc3ViKHRva2Vucyk7CiAgICAgICAgYmFsYW5jZXNbcmVjZWl2ZXJdID0gYmFsYW5jZXNbcmVjZWl2ZXJdLmFkZCh0b2tlbnMpOwogICAgfQogICAgCiAgICAvL3JlZnVuZCBiYWNrIGlmIG5vdCBLWUMgYXBwcm92ZWQKICAgICBmdW5jdGlvbiByZWZ1bmRGdW5kcyhhZGRyZXNzIG9yaWdpbikgaW50ZXJuYWwgewogICAgICAgIG9yaWdpbi50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGZ1bmQgY29sbGVjdGlvbiB3YWxsZXQKICAgIC8vIG92ZXJyaWRlIHRvIGNyZWF0ZSBjdXN0b20gZnVuZCBmb3J3YXJkaW5nIG1lY2hhbmlzbXMKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgICAgICBtdWx0aXNpZy50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIC8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gY2FuIGJ1eSB0b2tlbnMKICAgIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYm9vbCB3aXRoaW5QZXJpb2QgPSBnZXROb3coKSA+PSBzdGFydFRpbWUgJiYgZ2V0Tm93KCkgPD0gZW5kVGltZTsKICAgICAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IG1zZy52YWx1ZSAhPSAwOwogICAgICAgIGJvb2wgbWluQ29udHJpYnV0aW9uID0gbWluQ29udHJpYkFtb3VudCA8PSBtc2cudmFsdWU7CiAgICAgICAgYm9vbCBub3RSZWFjaGVkSGFyZENhcCA9IGhhcmRDYXAgPj0gdG90YWxOdW1iZXJUb2tlblNvbGQ7CiAgICAgICAgcmV0dXJuIHdpdGhpblBlcmlvZCAmJiBub25aZXJvUHVyY2hhc2UgJiYgbWluQ29udHJpYnV0aW9uICYmIG5vdFJlYWNoZWRIYXJkQ2FwOwogICAgfQoKICAgIC8vIEByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgY3VycmVudCBsb3QgZXZlbnQgaGFzIGVuZGVkCiAgICBmdW5jdGlvbiBoYXNFbmRlZCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGdldE5vdygpID4gZW5kVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROb3coKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBub3c7CiAgICB9CgogICAgLy8gU2V0L2NoYW5nZSBNdWx0aS1zaWduYXR1cmUgd2FsbGV0IGFkZHJlc3MKICAgIGZ1bmN0aW9uIGNoYW5nZU11bHRpU2lnbmF0dXJlV2FsbGV0IChhZGRyZXNzIF9tdWx0aXNpZykgb25seU93bmVyIGlzQWN0aXZlIHsKICAgICAgICBtdWx0aXNpZyA9IF9tdWx0aXNpZzsKICAgIH0KCiAgICAvLyBDaGFuZ2UgRVRIL1Rva2VuIGV4Y2hhbmdlIHJhdGUKICAgIGZ1bmN0aW9uIGNoYW5nZVRva2VuUmF0ZSh1aW50IF90b2tlblByaWNlKSBvbmx5T3duZXIgaXNBY3RpdmUgewogICAgICAgIFJBVEUgPSBfdG9rZW5QcmljZTsKICAgIH0KCiAgICAvLyBTZXQgRmluaXNoIE1pbnRpbmcuCiAgICBmdW5jdGlvbiBmaW5pc2hNaW50aW5nKCkgb25seU93bmVyIGlzQWN0aXZlIHsKICAgICAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgICAgIE1pbnRGaW5pc2hlZCgpOwogICAgfQoKICAgIC8vIFN0YXJ0IG9yIHBhdXNlIHRyYWRhYmxlIHRvIFRyYW5zZmVyIHRva2VuCiAgICBmdW5jdGlvbiBzdGFydFRyYWRhYmxlKGJvb2wgX3RyYWRhYmxlKSBvbmx5T3duZXIgaXNBY3RpdmUgewogICAgICAgIHRyYWRhYmxlID0gX3RyYWRhYmxlOwogICAgICAgIGlmICh0cmFkYWJsZSkKICAgICAgICAgICAgU3RhcnRUcmFkYWJsZSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgUGF1c2VUcmFkYWJsZSgpOwogICAgfQoKICAgIC8vVXBkYXRlSUNPRGF0ZVRpbWUodWludDI1NiBfc3RhcnRUaW1lLCkKICAgIGZ1bmN0aW9uIHVwZGF0ZUlDT0RhdGUodWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgIH0KICAgIAogICAgLy9DaGFuZ2Ugc3RhcnRUaW1lIHRvIHN0YXJ0IElDTyBtYW51YWxseQogICAgZnVuY3Rpb24gY2hhbmdlU3RhcnRUaW1lKHVpbnQyNTYgX3N0YXJ0VGltZSkgb25seU93bmVyIHsKICAgICAgICBzdGFydFRpbWUgPSBfc3RhcnRUaW1lOwogICAgfQoKICAgIC8vQ2hhbmdlIGVuZFRpbWUgdG8gZW5kIElDTyBtYW51YWxseQogICAgZnVuY3Rpb24gY2hhbmdlRW5kVGltZSh1aW50MjU2IF9lbmRUaW1lKSBvbmx5T3duZXIgewogICAgICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgIH0KCiAgICAvLyBAcmV0dXJuIHRvdGFsIHRva2VucyBzdXBwbGllZAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIF90b3RhbFN1cHBseTsKICAgIH0KICAgIAogICAgLy8gQHJldHVybiB0b3RhbCB0b2tlbnMgc3VwcGxpZWQKICAgIGZ1bmN0aW9uIHRvdGFsTnVtYmVyVG9rZW5Tb2xkKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiB0b3RhbE51bWJlclRva2VuU29sZDsKICAgIH0KCgogICAgLy9DaGFuZ2UgdG90YWwgc3VwcGx5CiAgICBmdW5jdGlvbiBjaGFuZ2VUb3RhbFN1cHBseSh1aW50MjU2IHRvdGFsU3VwcGx5KSBvbmx5T3duZXIgewogICAgICAgIF90b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5OwogICAgfQoKCiAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50PwogICAgLy8gQHBhcmFtIHdobyBUaGUgYWRkcmVzcyBvZiB0aGUgcGFydGljdWxhciBhY2NvdW50CiAgICAvLyBAcmV0dXJuIHRoZSBiYWxhbmFjZSB0aGUgcGFydGljdWxhciBhY2NvdW50CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbd2hvXTsKICAgIH0KCiAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50PwogICAgLy8gQHBhcmFtIHdobyBUaGUgYWRkcmVzcyBvZiB0aGUgcGFydGljdWxhciBhY2NvdW50CiAgICAvLyBAcmV0dXJuIHRoZSBiYWxhbmNlIG9mIEtZQyB3YWl0aW5nIHRvIGJlIGFwcHJvdmVkCiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZLeUNUb0JlQXBwcm92ZWQoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNXYWl0aW5nS1lDW3dob107CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiBhcHByb3ZlQmFsYW5jZXNXYWl0aW5nS1lDKGFkZHJlc3NbXSBsaXN0QWRkcmVzc2VzKSBvbmx5T3duZXIgewogICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBsaXN0QWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICBhZGRyZXNzIGNsaWVudCA9IGxpc3RBZGRyZXNzZXNbaV07CiAgICAgICAgICAgICBiYWxhbmNlc1ttdWx0aXNpZ10gPSBiYWxhbmNlc1ttdWx0aXNpZ10uc3ViKGJhbGFuY2VzV2FpdGluZ0tZQ1tjbGllbnRdKTsKICAgICAgICAgICAgIGJhbGFuY2VzW2NsaWVudF0gPSBiYWxhbmNlc1tjbGllbnRdLmFkZChiYWxhbmNlc1dhaXRpbmdLWUNbY2xpZW50XSk7CiAgICAgICAgICAgICB0b3RhbE51bWJlclRva2VuU29sZD10b3RhbE51bWJlclRva2VuU29sZC5hZGQoYmFsYW5jZXNXYWl0aW5nS1lDW2NsaWVudF0pOwogICAgICAgICAgICAgX2ljb1N1cHBseSA9IF9pY29TdXBwbHkuc3ViKGJhbGFuY2VzV2FpdGluZ0tZQ1tjbGllbnRdKTsKICAgICAgICAgICAgIGJhbGFuY2VzV2FpdGluZ0tZQ1tjbGllbnRdID0gMDsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQm9udXNGb3JPbmVIb2xkZXIoYWRkcmVzcyBob2xkZXIsIHVpbnQyNTYgYm9udXNUb2tlbikgb25seU93bmVyewogICAgICAgICByZXF1aXJlKGhvbGRlciAhPSAweDApOyAKICAgICAgICAgYmFsYW5jZXNbbXVsdGlzaWddID0gYmFsYW5jZXNbbXVsdGlzaWddLnN1Yihib251c1Rva2VuKTsKICAgICAgICAgYmFsYW5jZXNbaG9sZGVyXSA9IGJhbGFuY2VzW2hvbGRlcl0uYWRkKGJvbnVzVG9rZW4pOwogICAgICAgICB0b3RhbE51bWJlclRva2VuU29sZD10b3RhbE51bWJlclRva2VuU29sZC5hZGQoYm9udXNUb2tlbik7CiAgICAgICAgIF9pY29TdXBwbHkgPSBfaWNvU3VwcGx5LnN1Yihib251c1Rva2VuKTsKICAgIH0KCiAgICAKICAgIGZ1bmN0aW9uIGFkZEJvbnVzRm9yTXVsdGlwbGVIb2xkZXJzKGFkZHJlc3NbXSBsaXN0QWRkcmVzc2VzLCB1aW50MjU2W10gYm9udXMpIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShsaXN0QWRkcmVzc2VzLmxlbmd0aCA9PSBib251cy5sZW5ndGgpOyAKICAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgbGlzdEFkZHJlc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgcmVxdWlyZShsaXN0QWRkcmVzc2VzW2ldICE9IDB4MCk7IAogICAgICAgICAgICAgICAgYmFsYW5jZXNbbGlzdEFkZHJlc3Nlc1tpXV0gPSBiYWxhbmNlc1tsaXN0QWRkcmVzc2VzW2ldXS5hZGQoYm9udXNbaV0pOwogICAgICAgICAgICAgICAgYmFsYW5jZXNbbXVsdGlzaWddID0gYmFsYW5jZXNbbXVsdGlzaWddLnN1Yihib251c1tpXSk7CiAgICAgICAgICAgICAgICB0b3RhbE51bWJlclRva2VuU29sZD10b3RhbE51bWJlclRva2VuU29sZC5hZGQoYm9udXNbaV0pOwogICAgICAgICAgICAgICAgX2ljb1N1cHBseSA9IF9pY29TdXBwbHkuc3ViKGJvbnVzW2ldKTsKICAgICAgICAgfQogICAgfQogICAgCiAgIAogICAgCiAgICBmdW5jdGlvbiBtb2RpZnlDdXJyZW50SGFyZENhcCh1aW50MjU2IF9oYXJkQ2FwKSBvbmx5T3duZXIgaXNBY3RpdmUgewogICAgICAgIGhhcmRDYXAgPSBfaGFyZENhcDsKICAgIH0KCiAgICAvLyBAbm90aWNlIHNlbmQgYHZhbHVlYCB0b2tlbiB0byBgdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgICAvLyBAcGFyYW0gdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8gQHBhcmFtIHZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vIEByZXR1cm4gdGhlIHRyYW5zYWN0aW9uIGFkZHJlc3MgYW5kIHNlbmQgdGhlIGV2ZW50IGFzIFRyYW5zZmVyCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBjYW5UcmFkYWJsZSBpc0FjdGl2ZSB7CiAgICAgICAgcmVxdWlyZSAoCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHZhbHVlICYmIHZhbHVlID4gMAogICAgICAgICk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIodmFsdWUpOwogICAgICAgIGJhbGFuY2VzW3RvXSA9IGJhbGFuY2VzW3RvXS5hZGQodmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSk7CiAgICB9CgogICAgLy8gQG5vdGljZSBzZW5kIGB2YWx1ZWAgdG9rZW4gdG8gYHRvYCBmcm9tIGBmcm9tYAogICAgLy8gQHBhcmFtIGZyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8gQHBhcmFtIHRvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vIEBwYXJhbSB2YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLyBAcmV0dXJuIHRoZSB0cmFuc2FjdGlvbiBhZGRyZXNzIGFuZCBzZW5kIHRoZSBldmVudCBhcyBUcmFuc2ZlcgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgY2FuVHJhZGFibGUgaXNBY3RpdmUgewogICAgICAgIHJlcXVpcmUgKAogICAgICAgICAgICBhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdID49IHZhbHVlICYmIGJhbGFuY2VzW2Zyb21dID49IHZhbHVlICYmIHZhbHVlID4gMAogICAgICAgICk7CiAgICAgICAgYmFsYW5jZXNbZnJvbV0gPSBiYWxhbmNlc1tmcm9tXS5zdWIodmFsdWUpOwogICAgICAgIGJhbGFuY2VzW3RvXSA9IGJhbGFuY2VzW3RvXS5hZGQodmFsdWUpOwogICAgICAgIGFsbG93ZWRbZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdLnN1Yih2YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoZnJvbSwgdG8sIHZhbHVlKTsKICAgIH0KCiAgICAvLyBBbGxvdyBzcGVuZGVyIHRvIHdpdGhkcmF3IGZyb20geW91ciBhY2NvdW50LCBtdWx0aXBsZSB0aW1lcywgdXAgdG8gdGhlIHZhbHVlIGFtb3VudC4KICAgIC8vIElmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIGl0IG92ZXJ3cml0ZXMgdGhlIGN1cnJlbnQgYWxsb3dhbmNlIHdpdGggdmFsdWUuCiAgICAvLyBAcGFyYW0gc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgc2VuZGVyCiAgICAvLyBAcGFyYW0gdmFsdWUgVGhlIGFtb3VudCB0byBiZSBhcHByb3ZlZAogICAgLy8gQHJldHVybiB0aGUgdHJhbnNhY3Rpb24gYWRkcmVzcyBhbmQgc2VuZCB0aGUgZXZlbnQgYXMgQXBwcm92YWwKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBpc0FjdGl2ZSB7CiAgICAgICAgcmVxdWlyZSAoCiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID49IHZhbHVlICYmIHZhbHVlID4gMAogICAgICAgICk7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IHZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIHZhbHVlKTsKICAgIH0KCiAgICAvLyBDaGVjayB0aGUgYWxsb3dlZCB2YWx1ZSBmb3IgdGhlIHNwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSBvd25lcgogICAgLy8gQHBhcmFtIG93bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBvd25lcgogICAgLy8gQHBhcmFtIHNwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHNwZW5kZXIKICAgIC8vIEByZXR1cm4gdGhlIGFtb3VudCB3aGljaCBzcGVuZGVyIGlzIHN0aWxsIGFsbG93ZWQgdG8gd2l0aGRyYXcgZnJvbSBvd25lcgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW3NwZW5kZXJdOwogICAgfQoKICAgIC8vIEdldCBjdXJyZW50IHByaWNlIG9mIGEgVG9rZW4KICAgIC8vIEByZXR1cm4gdGhlIHByaWNlIG9yIHRva2VuIHZhbHVlIGZvciBhIGV0aGVyCiAgICBmdW5jdGlvbiBnZXRSYXRlKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZXN1bHQpIHsKICAgICAgcmV0dXJuIFJBVEU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldFRva2VuRGV0YWlsKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHN0cmluZywgc3RyaW5nLCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2LCB1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIChuYW1lLCBzeW1ib2wsIHN0YXJ0VGltZSwgZW5kVGltZSwgX3RvdGFsU3VwcGx5LCBfaWNvU3VwcGx5LCB0b3RhbE51bWJlclRva2VuU29sZCk7CiAgICB9Cn0='.
	

]
