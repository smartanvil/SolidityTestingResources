Class {
	#name : #SRTb8d9b579c32b88714dfe69c05d87bb3165892b04,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb8d9b579c32b88714dfe69c05d87bb3165892b04 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTY7Cgpjb250cmFjdCBCYWNoZWxvckJ1Y2tzIHsKICAgIHN0cmluZyBwdWJsaWMgc3RhbmRhcmQgPSAnQkJVQ0sgMS4wJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICdCYWNoZWxvckJ1Y2tzJzsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gJ0JCVUNLJzsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFscyA9IDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDA7CiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsUHJpY2UgPSAxIGV0aGVyIC8gMTAwMDsKICAgIHVpbnQyNTYgcHVibGljIHByaWNlSW5jcmVhc2VQZXJQdXJjaGFzZSA9IDEgZXRoZXIgLyAxMDAwMDA7CiAgICB1aW50MjU2IHB1YmxpYyBjdXJyZW50UHJpY2UgPSBpbml0aWFsUHJpY2U7CiAgICAKICAgIGFkZHJlc3MgcHVibGljIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIHVpbnQyNTYgcHVibGljIGNyZWF0aW9uVGltZSA9IG5vdzsKICAgIAogICAgc3RydWN0IENvbXBvbmVudCB7CiAgICAgICAgc3RyaW5nIG5hbWU7CiAgICAgICAgdWludDE2IGluZGV4OwogICAgICAgIGludDI1NiBjdXJyZW50U3VwcG9ydDsKICAgICAgICB1aW50MjU2IHN1cHBvcnRlZDsKICAgICAgICB1aW50MjU2IHVuZGVybWluZWQ7CiAgICB9CiAgICAKICAgIHN0cnVjdCBBZGRPbiB7CiAgICAgICAgc3RyaW5nIG5hbWU7CiAgICAgICAgdWludDE2IGluZGV4OwogICAgICAgIHVpbnQyNTYgc3VwcG9ydDsKICAgICAgICB1aW50MjU2IHRocmVzaG9sZDsKICAgICAgICBib29sIGNvbXBsZXRlZDsKICAgICAgICBhZGRyZXNzIHdpbm5lcjsKICAgIH0KICAgIAogICAgc3RydWN0IFdpbGRjYXJkIHsKICAgICAgICBzdHJpbmcgbmFtZTsKICAgICAgICB1aW50MTYgaW5kZXg7CiAgICAgICAgdWludDI1NiBjb3N0OwogICAgICAgIHVpbnQxNiBhdmFpbGFibGU7CiAgICB9CiAgICAKICAgIC8qIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgYmFsYW5jZXMgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKICAgIAogICAgdWludDE2IHB1YmxpYyBjb21wb25lbnRDb3VudCA9IDA7CiAgICBtYXBwaW5nICh1aW50MTYgPT4gQ29tcG9uZW50KSBwdWJsaWMgY29tcG9uZW50czsKICAgIAogICAgdWludDE2IHB1YmxpYyBhZGRPbkNvdW50ID0gMDsKICAgIG1hcHBpbmcgKHVpbnQxNiA9PiBBZGRPbikgcHVibGljIGFkZE9uczsKICAgIAogICAgdWludDE2IHB1YmxpYyB3aWxkY2FyZENvdW50ID0gMDsKICAgIG1hcHBpbmcgKHVpbnQxNiA9PiBXaWxkY2FyZCkgcHVibGljIHdpbGRjYXJkczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAodWludDE2ID0+IHVpbnQxNikpIHB1YmxpYyB3aWxkY2FyZHNIZWxkOwoKICAgIC8qIEdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgb2YgdHJhbnNmZXJzICovCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIAogICAgLyogR2VuZXJhdGVzIGEgcHVibGljIGV2ZW50IG9uIHRoZSBibG9ja2NoYWluIHRoYXQgd2lsbCBub3RpZnkgY2xpZW50cyBvZiBwdXJjaGFzZXMgKi8KICAgIGV2ZW50IFB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvKiBOb3RpZmllcyBjbGllbnRzIGFib3V0IHN1cHBvcnQgZm9yIGEgY29tcG9uZW50ICovCiAgICBldmVudCBTdXBwb3J0Q29tcG9uZW50KHVpbnQyNTYgY29tcG9uZW50SWR4LCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIC8qIE5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdW5kZXJtaW5lIGZvciBhIGNvbXBvbmVudCAqLwogICAgZXZlbnQgVW5kZXJtaW5lQ29tcG9uZW50KHVpbnQyNTYgY29tcG9uZW50SWR4LCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIC8qIE5vdGlmaWVzIGNsaWVudHMgYWJvdXQgc3VwcG9ydCBmb3IgYW4gYWRkT24gKi8KICAgIGV2ZW50IFN1cHBvcnRBZGRPbih1aW50MjU2IGFkZE9uSWR4LCBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIC8qIE5vdGlmaWVzIGNsaWVudHMgYWJvdXQgY29tcGxldGlvbiBmb3IgYW4gYWRkT24gKi8KICAgIGV2ZW50IENvbXBsZXRlQWRkT24odWludDI1NiBhZGRPbklkeCwgYWRkcmVzcyBpbmRleGVkIHdpbm5lcik7CgogICAgLyogTm90aWZpZXMgY2xpZW50cyBhYm91dCB3aWxkY2FyZCBjb21wbGV0aW9uICovCiAgICBldmVudCBDb21wbGV0ZVdpbGRjYXJkKHVpbnQyNTYgd2lsZGNhcmRJZHgsIGFkZHJlc3MgaW5kZXhlZCBjYWxsZXIpOwoKICAgIG1vZGlmaWVyIG9ubHlCeU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgbmV2ZXJCeU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gbWUgKi8KICAgIGZ1bmN0aW9uIEJhY2hlbG9yQnVja3MoKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IHRvdGFsU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgLy8gR2l2ZSB0aGUgY3JlYXRvciBhbGwgaW5pdGlhbCB0b2tlbnMKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KHN0cmluZyBjb21wb25lbnROYW1lKSBwdWJsaWMgb25seUJ5T3duZXIoKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoY29tcG9uZW50Q291bnQgPiA2NTUzNCkgcmV2ZXJ0KCk7CiAgICAgICAgdmFyIGNvbXBvbmVudCA9IGNvbXBvbmVudHNbY29tcG9uZW50Q291bnRdOwogICAgICAgIGNvbXBvbmVudC5uYW1lID0gY29tcG9uZW50TmFtZTsKICAgICAgICBjb21wb25lbnQuaW5kZXggPSBjb21wb25lbnRDb3VudDsKICAgICAgICBjb21wb25lbnQuY3VycmVudFN1cHBvcnQgPSAwOwogICAgICAgIGNvbXBvbmVudC5zdXBwb3J0ZWQgPSAwOwogICAgICAgIGNvbXBvbmVudC51bmRlcm1pbmVkID0gMDsKICAgICAgICBjb21wb25lbnRDb3VudCArPSAxOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjcmVhdGVBZGRPbihzdHJpbmcgYWRkT25OYW1lLCB1aW50MjU2IHRocmVzaG9sZCkgcHVibGljIG9ubHlCeU93bmVyKCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGFkZE9uQ291bnQgPiA2NTUzNCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKHRocmVzaG9sZCA9PSAwKSByZXZlcnQoKTsKICAgICAgICB2YXIgYWRkT24gPSBhZGRPbnNbYWRkT25Db3VudF07CiAgICAgICAgYWRkT24ubmFtZSA9IGFkZE9uTmFtZTsKICAgICAgICBhZGRPbi5pbmRleCA9IGFkZE9uQ291bnQ7CiAgICAgICAgYWRkT24uc3VwcG9ydCA9IDA7CiAgICAgICAgYWRkT24udGhyZXNob2xkID0gdGhyZXNob2xkOwogICAgICAgIGFkZE9uLmNvbXBsZXRlZCA9IGZhbHNlOwogICAgICAgIGFkZE9uLndpbm5lciA9IGFkZHJlc3MoMHgwKTsKICAgICAgICBhZGRPbkNvdW50ICs9IDE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNyZWF0ZVdpbGRjYXJkKHN0cmluZyB3aWxkY2FyZE5hbWUsIHVpbnQyNTYgY29zdCwgdWludDE2IG51bWJlcikgcHVibGljIG9ubHlCeU93bmVyKCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKHdpbGRjYXJkQ291bnQgPiA2NTUzNCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKG51bWJlciA9PSAwKSByZXZlcnQoKTsKICAgICAgICBpZiAoY29zdCA9PSAwKSByZXZlcnQoKTsKICAgICAgICB2YXIgd2lsZGNhcmQgPSB3aWxkY2FyZHNbd2lsZGNhcmRDb3VudF07CiAgICAgICAgd2lsZGNhcmQubmFtZSA9IHdpbGRjYXJkTmFtZTsKICAgICAgICB3aWxkY2FyZC5pbmRleCA9IHdpbGRjYXJkQ291bnQ7CiAgICAgICAgd2lsZGNhcmQuYXZhaWxhYmxlID0gbnVtYmVyOwogICAgICAgIHdpbGRjYXJkLmNvc3QgPSBjb3N0OwogICAgICAgIHdpbGRjYXJkQ291bnQgKz0gMTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2l2ZU1lU29tZUJCVUNLcygpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChtc2cudmFsdWUgPCBjdXJyZW50UHJpY2UpIHJldmVydCgpOwogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gKG1zZy52YWx1ZSAvIGN1cnJlbnRQcmljZSk7CiAgICAgICAgaWYgKGJhbGFuY2VPZltvd25lcl0gPCBhbW91bnQpIHJldmVydCgpOwogICAgICAgIGJhbGFuY2VPZltvd25lcl0gLT0gYW1vdW50OwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSArPSBhbW91bnQ7CiAgICAgICAgaWYgKChjdXJyZW50UHJpY2UgKyBwcmljZUluY3JlYXNlUGVyUHVyY2hhc2UpIDwgY3VycmVudFByaWNlKSByZXR1cm4gdHJ1ZTsgLy8gTWF4aW11bSBwcmljZSByZWFjaGVkCiAgICAgICAgY3VycmVudFByaWNlICs9IHByaWNlSW5jcmVhc2VQZXJQdXJjaGFzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24oKSBwdWJsaWMgcGF5YWJsZSB7IH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhhbmtzIGZvciB0aGUgZG9uYXRpb24hCiAgICAKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2UoKSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VPZlttc2cuc2VuZGVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3dlZXBUb093bmVyKCkgcHVibGljIG9ubHlCeU93bmVyKCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgb3duZXIudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLyogU2VuZCBjb2lucyAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIGlmIChfdG8gPT0gMHgwKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcwogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldmVydCgpOyAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgaWYgKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlIDwgYmFsYW5jZU9mW190b10pIHJldmVydCgpOyAvLyBDaGVjayBmb3Igb3ZlcmZsb3dzCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOyAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgYW55b25lIGxpc3RlbmluZyB0aGF0IHRoaXMgdHJhbnNmZXIgdG9vayBwbGFjZQogICAgfQoKICAgIC8qIEFsbG93IGFub3RoZXIgY29udHJhY3QgdG8gc3BlbmQgc29tZSB0b2tlbnMgb24gbXkgYmVoYWxmICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gIT0gMCkpIHJldmVydCgpOwogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKF90byA9PSAweDApIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmFuc2ZlciB0byAweDAgYWRkcmVzcwogICAgICAgIGlmIChiYWxhbmNlT2ZbX2Zyb21dIDwgX3ZhbHVlKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmIChiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA8IGJhbGFuY2VPZltfdG9dKSByZXZlcnQoKTsgIC8vIENoZWNrIGZvciBvdmVyZmxvd3MKICAgICAgICBpZiAoX3ZhbHVlID4gYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSkgcmV2ZXJ0KCk7ICAgICAvLyBDaGVjayBhbGxvd2FuY2UKICAgICAgICBiYWxhbmNlT2ZbX2Zyb21dIC09IF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSArPSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoJLyogQWRkIHN1cHBvcnQgYSBjb21wb25lbnQgKi8KICAgIGZ1bmN0aW9uIHN1cHBvcnRDb21wb25lbnQodWludDE2IGNvbXBvbmVudF9pZHgsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBuZXZlckJ5T3duZXIoKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAodmFsdWUgPT0gMCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgYWRkIDAgc3VwcG9ydAogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCB2YWx1ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoY29tcG9uZW50X2lkeCA+PSBjb21wb25lbnRDb3VudCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNvbXBvbmVudCBpbmRleCBpcyB2YWxpZAogICAgICAgIHZhciBjb21wb25lbnQgPSBjb21wb25lbnRzW2NvbXBvbmVudF9pZHhdOwogICAgICAgIGlmICgoY29tcG9uZW50LnN1cHBvcnRlZCArIHZhbHVlKSA8IGNvbXBvbmVudC5zdXBwb3J0ZWQpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgLy8gV2lsbCBhZGRpbmcgc3VwcG9ydCB3cmFwIHRoZSBzdXBwb3J0ZWQgY291bnRlcgogICAgICAgIGlmICgoY29tcG9uZW50LmN1cnJlbnRTdXBwb3J0ICsgaW50MjU2KHZhbHVlKSkgPCBjb21wb25lbnQuY3VycmVudFN1cHBvcnQpIHJldmVydCgpOyAgLy8gV2lsbCBhZGRpbmcgdGhpcyBtdWNoIHN1cHBvcnQgd3JhcCB0aGUgY29tcG9uZW50IHN1cHBvcnQKICAgICAgICBiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gLT0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgY29tcG9uZW50LmN1cnJlbnRTdXBwb3J0ICs9IGludDI1Nih2YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBzdXBwb3J0IHRvIHRoZSBjb21wb25lbnQKICAgICAgICBjb21wb25lbnQuc3VwcG9ydGVkICs9IHZhbHVlOwogICAgICAgIHRvdGFsU3VwcGx5IC09IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdmFsdWUgZnJvbSB0aGUgdG90YWxTdXBwbHkKICAgICAgICBTdXBwb3J0Q29tcG9uZW50KGNvbXBvbmVudF9pZHgsIG1zZy5zZW5kZXIsIHZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogIC8qIFVuZGVybWluZSBzdXBwb3J0IGZvciBhIGNvbXBvbmVudCAqLwogICAgZnVuY3Rpb24gdW5kZXJtaW5lQ29tcG9uZW50KHVpbnQxNiBjb21wb25lbnRfaWR4LCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgbmV2ZXJCeU93bmVyKCkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKHZhbHVlID09IDApIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbid0IHN1YnRyYWN0IDAgc3VwcG9ydAogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCB2YWx1ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoY29tcG9uZW50X2lkeCA+PSBjb21wb25lbnRDb3VudCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNvbXBvbmVudCBpbmRleCBpcyB2YWxpZAogICAgICAgIHZhciBjb21wb25lbnQgPSBjb21wb25lbnRzW2NvbXBvbmVudF9pZHhdOwogICAgICAgIGlmICgoY29tcG9uZW50LmN1cnJlbnRTdXBwb3J0IC0gaW50MjU2KHZhbHVlKSkgPiBjb21wb25lbnQuY3VycmVudFN1cHBvcnQpIHJldmVydCgpOyAgLy8gV2lsbCBzdWJ0cmFjdGluZyB0aGlzIG11Y2ggc3VwcG9ydCB3cmFwIHRoZSBjb21wb25lbnQgc3VwcG9ydAogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBjb21wb25lbnQuY3VycmVudFN1cHBvcnQgLT0gaW50MjU2KHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3Qgc3VwcG9ydCBmcm9tIHRoZSBjb21wb25lbnQKICAgICAgICBjb21wb25lbnQudW5kZXJtaW5lZCArPSB2YWx1ZTsKICAgICAgICB0b3RhbFN1cHBseSAtPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHZhbHVlIGZyb20gdGhlIHRvdGFsU3VwcGx5CiAgICAgICAgVW5kZXJtaW5lQ29tcG9uZW50KGNvbXBvbmVudF9pZHgsIG1zZy5zZW5kZXIsIHZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgkvKiBHZXQgY3VycmVudCBjb21wb25lbnQgc3VwcG9ydCAqLwogICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50U3VwcG9ydCh1aW50MTYgY29tcG9uZW50X2lkeCkgdmlldyBwdWJsaWMgcmV0dXJucyAoaW50MjU2KSB7CiAgICAgICAgaWYgKGNvbXBvbmVudF9pZHggPj0gY29tcG9uZW50Q291bnQpIHJldHVybiAwOwogICAgICAgIHJldHVybiBjb21wb25lbnRzW2NvbXBvbmVudF9pZHhdLmN1cnJlbnRTdXBwb3J0OwogICAgfQogICAgCiAgICAvKiBBZGQgc3VwcG9ydCBhbiBhZGRPbiAqLwogICAgZnVuY3Rpb24gc3VwcG9ydEFkZE9uKHVpbnQxNiBhZGRPbl9pZHgsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBuZXZlckJ5T3duZXIoKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAodmFsdWUgPT0gMCkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgYWRkIDAgc3VwcG9ydAogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPCB2YWx1ZSkgcmV2ZXJ0KCk7ICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICBpZiAoYWRkT25faWR4ID49IGFkZE9uQ291bnQpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGFkZG9uIGluZGV4IGlzIHZhbGlkCiAgICAgICAgdmFyIGFkZE9uID0gYWRkT25zW2FkZE9uX2lkeF07CiAgICAgICAgaWYgKGFkZE9uLmNvbXBsZXRlZCkgcmV2ZXJ0KCk7CiAgICAgICAgaWYgKChhZGRPbi5zdXBwb3J0ICsgdmFsdWUpIDwgYWRkT24uc3VwcG9ydCkgcmV2ZXJ0KCk7ICAgICAgICAgIC8vIFdpbGwgYWRkaW5nIHN1cHBvcnQgd3JhcCB0aGUgc3VwcG9ydCBjb3VudGVyCiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGZyb20gdGhlIHNlbmRlcgogICAgICAgIGFkZE9uLnN1cHBvcnQgKz0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgc3VwcG9ydCB0byB0aGUgY29tcG9uZW50CiAgICAgICAgdG90YWxTdXBwbHkgLT0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB2YWx1ZSBmcm9tIHRoZSB0b3RhbFN1cHBseQogICAgICAgIFN1cHBvcnRBZGRPbihhZGRPbl9pZHgsIG1zZy5zZW5kZXIsIHZhbHVlKTsKICAgICAgICBpZiAoYWRkT24uc3VwcG9ydCA8IGFkZE9uLnRocmVzaG9sZCkgcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAvLyBUaHJlc2hvbGQgaXMgbm90IHlldCBtZXQKICAgICAgICBhZGRPbi5jb21wbGV0ZWQgPSB0cnVlOwogICAgICAgIGFkZE9uLndpbm5lciA9IG1zZy5zZW5kZXI7CiAgICAgICAgQ29tcGxldGVBZGRPbihhZGRPbl9pZHgsIGFkZE9uLndpbm5lcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8qIEdldCBjdXJyZW50IGFkZE9uIHN1cHBvcnQgKi8KICAgIGZ1bmN0aW9uIGdldEFkZE9uU3VwcG9ydCh1aW50MTYgYWRkT25faWR4KSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgaWYgKGFkZE9uX2lkeCA+PSBhZGRPbkNvdW50KSByZXR1cm4gMDsKICAgICAgICByZXR1cm4gYWRkT25zW2FkZE9uX2lkeF0uc3VwcG9ydDsKICAgIH0KICAgIAogICAgLyogR2V0IGN1cnJlbnQgYWRkT24gc3VwcG9ydCAqLwogICAgZnVuY3Rpb24gZ2V0QWRkT25OZWVkZWQodWludDE2IGFkZE9uX2lkeCkgdmlldyBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGlmIChhZGRPbl9pZHggPj0gYWRkT25Db3VudCkgcmV0dXJuIDA7CiAgICAgICAgdmFyIGFkZE9uID0gYWRkT25zW2FkZE9uX2lkeF07CiAgICAgICAgaWYgKGFkZE9uLmNvbXBsZXRlZCkgcmV0dXJuIDA7CiAgICAgICAgcmV0dXJuIGFkZE9uLnRocmVzaG9sZCAtIGFkZE9uLnN1cHBvcnQ7CiAgICB9CiAgICAKICAgIC8qIEdldCBjdXJyZW50IGFkZE9uIHN1cHBvcnQgKi8KICAgIGZ1bmN0aW9uIGdldEFkZE9uQ29tcGxldGUodWludDE2IGFkZE9uX2lkeCkgdmlldyBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChhZGRPbl9pZHggPj0gYWRkT25Db3VudCkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBhZGRPbnNbYWRkT25faWR4XS5jb21wbGV0ZWQ7CiAgICB9CiAgICAKICAgIC8qIGFjcXVpcmUgYSB3aWxkY2FyZCAqLwogICAgZnVuY3Rpb24gYWNxdWlyZVdpbGRjYXJkKHVpbnQxNiB3aWxkY2FyZF9pZHgpIHB1YmxpYyBuZXZlckJ5T3duZXIoKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAod2lsZGNhcmRfaWR4ID49IHdpbGRjYXJkQ291bnQpIHJldmVydCgpOyAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHdpbGRjYXJkIGluZGV4IGlzIHZhbGlkCiAgICAgICAgdmFyIHdpbGRjYXJkID0gd2lsZGNhcmRzW3dpbGRjYXJkX2lkeF07CiAgICAgICAgaWYgKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA8IHdpbGRjYXJkLmNvc3QpIHJldmVydCgpOyAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzZW5kZXIgaGFzIGVub3VnaAogICAgICAgIGlmICh3aWxkY2FyZC5hdmFpbGFibGUgPCAxKSByZXZlcnQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmUgdGhlcmUgd2lsZGNhcmRzIHN0aWxsIGF2YWlsYWJsZQogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSB3aWxkY2FyZC5jb3N0OyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICB3aWxkY2FyZC5hdmFpbGFibGUgLT0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgMSB3aWxkY2FyZCBmcm9tIHRoZSBkZWNrCiAgICAgICAgdG90YWxTdXBwbHkgLT0gd2lsZGNhcmQuY29zdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB2YWx1ZSBmcm9tIHRoZSB0b3RhbFN1cHBseQogICAgICAgIHdpbGRjYXJkc0hlbGRbbXNnLnNlbmRlcl1bd2lsZGNhcmRfaWR4XSArPSAxOwogICAgICAgIENvbXBsZXRlV2lsZGNhcmQod2lsZGNhcmRfaWR4LCBtc2cuc2VuZGVyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLyogR2V0IHJlbWFpbmluZyB3aWxkY2FyZHMgKi8KICAgIGZ1bmN0aW9uIGdldFdpbGRjYXJkc1JlbWFpbmluZyh1aW50MTYgd2lsZGNhcmRfaWR4KSB2aWV3IHB1YmxpYyByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICBpZiAod2lsZGNhcmRfaWR4ID49IHdpbGRjYXJkQ291bnQpIHJldHVybiAwOwogICAgICAgIHJldHVybiB3aWxkY2FyZHNbd2lsZGNhcmRfaWR4XS5hdmFpbGFibGU7CiAgICB9Cn0='.
	

]
