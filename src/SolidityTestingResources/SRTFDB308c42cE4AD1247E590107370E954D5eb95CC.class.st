Class {
	#name : #SRTFDB308c42cE4AD1247E590107370E954D5eb95CC,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTFDB308c42cE4AD1247E590107370E954D5eb95CC >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCArIHk7CiAgICAgICAgYXNzZXJ0KCh6ID49IHgpICYmICh6ID49IHkpKTsKICAgICAgICByZXR1cm4gejsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiB4LCB1aW50MjU2IHkpIHB1cmUgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgICAgIGFzc2VydCh4ID49IHkpOwogICAgICAgIHVpbnQyNTYgeiA9IHggLSB5OwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiB6ID0geCAqIHk7CiAgICAgICAgYXNzZXJ0KCh4ID09IDApIHx8ICh6IC8geCA9PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9Cn0KLyoKICogSGFsdGFibGUKICoKICogQWJzdHJhY3QgY29udHJhY3QgdGhhdCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuCiAqIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4gRGlmZmVycyBmcm9tIFBhdXNhYmxlIGJ5IGNhdXNpbmcgYSB0aHJvdyB3aGVuIGluIGhhbHQgbW9kZS4KICoKICoKICogT3JpZ2luYWxseSBlbnZpc2lvbmVkIGluIEZpcnN0Qmxvb2QgSUNPIGNvbnRyYWN0LgogKi8KY29udHJhY3QgSGFsdGFibGUgaXMgT3duYWJsZSB7CiAgYm9vbCBwdWJsaWMgaGFsdGVkOwoKICBtb2RpZmllciBzdG9wSW5FbWVyZ2VuY3kgewogICAgcmVxdWlyZSAoIWhhbHRlZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUluRW1lcmdlbmN5IHsKICAgIHJlcXVpcmUgKGhhbHRlZCk7CiAgICBfOwogIH0KCiAgLy8gY2FsbGVkIGJ5IHRoZSBvd25lciBvbiBlbWVyZ2VuY3ksIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICBmdW5jdGlvbiBoYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGhhbHRlZCA9IHRydWU7CiAgfQoKICAvLyBjYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVuZCBvZiBlbWVyZ2VuY3ksIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgZnVuY3Rpb24gdW5oYWx0KCkgZXh0ZXJuYWwgb25seU93bmVyIG9ubHlJbkVtZXJnZW5jeSB7CiAgICBoYWx0ZWQgPSBmYWxzZTsKICB9Cgp9CgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4gCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgV1dXVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICAvKi8gUHVibGljIHZhcmlhYmxlcyBvZiB0aGUgdG9rZW4gLyovCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiV293YW5kZXIgV1dXIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIldXVyI7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSA4OwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHkgPSAxMDAgKiAwLjEgZmlubmV5OwoKICAgIC8qLyBJbml0aWFsaXplcyBjb250cmFjdCB3aXRoIGluaXRpYWwgc3VwcGx5IHRva2VucyB0byB0aGUgY3JlYXRvciBvZiB0aGUgY29udHJhY3QgLyovCiAgICBmdW5jdGlvbiBXV1dUb2tlbigpIHB1YmxpYwogICAgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gdG90YWxTdXBwbHk7ICAgICAgICAgICAgICAvLyBHaXZlIHRoZSBjcmVhdG9yIGFsbCBpbml0aWFsIHRva2VucwogICAgfQp9CgoKY29udHJhY3QgV293YW5kZXJJQ09Qcml2YXRlQ3Jvd2RTYWxlIGlzIEhhbHRhYmxlewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiV293YW5kZXIgUHJpdmF0ZSBTYWxlIElUTyI7CgogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnk7CiAgICB1aW50IHB1YmxpYyBzdGFydFRpbWU7CiAgICB1aW50IHB1YmxpYyBkdXJhdGlvbjsKICAgIHVpbnQgcHVibGljIHRva2Vuc0NvbnRyYWN0QmFsYW5jZTsKICAgIHVpbnQgcHVibGljIHByaWNlOyAKICAgIHVpbnQgcHVibGljIGRpc2NvdW50UHJpY2U7IAogICAgV1dXVG9rZW4gcHVibGljIHRva2VuUmV3YXJkOwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZUxpc3Q7CgogICAgZXZlbnQgRnVuZFRyYW5zZmVyKGFkZHJlc3MgYmFja2VyLCB1aW50IGFtb3VudCwgYm9vbCBpc0NvbnRyaWJ1dGlvbik7CiAgICAKICAgIGJvb2wgcHVibGljIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgdWludCBwdWJsaWMgdG9rZW5Pd25lck51bWJlciA9IDA7CiAgICAvL3VpbnQgcHVibGljIGNvbnN0YW50IHRva2VuT3duZXJOdW1iZXJNYXggPSAxMjA7CiAgICB1aW50IHB1YmxpYyBjb25zdGFudCB0b2tlbk93bmVyTnVtYmVyTWF4ID0gMzsgIC8vIFRPRE8gcmVtb3ZlCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBtaW5QdXJjaGFzZSA9IDAuMDEgKiAxIGV0aGVyOwogICAgdWludCBwdWJsaWMgY29uc3RhbnQgZGlzY291bnRWYWx1ZSA9IDEuMCAqIDEgZXRoZXI7CgogICAgLyogIGF0IGluaXRpYWxpemF0aW9uLCBzZXR1cCB0aGUgb3duZXIgKi8KICAgIGZ1bmN0aW9uIFdvd2FuZGVySUNPUHJpdmF0ZUNyb3dkU2FsZSgKICAgICAgICBhZGRyZXNzIGFkZHJlc3NPZlRva2VuVXNlZEFzUmV3YXJkLAoJCWFkZHJlc3MgYWRkcmVzc09mQmVuZWZpY2lhcnkKICAgICkgcHVibGljCiAgICB7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBhZGRyZXNzT2ZCZW5lZmljaWFyeTsKICAgICAgICAvL3N0YXJ0VGltZSA9IDE1MTYwMjEyMDA7CiAgICAgICAgc3RhcnRUaW1lID0gMTUxNjAyMTIwMCAtIDM2MDAgKiAyNDsgLy8gVE9ETyByZW1vdmUKICAgICAgICBkdXJhdGlvbiA9IDc0NCBob3VyczsKCQl0b2tlbnNDb250cmFjdEJhbGFuY2UgPSAgNSAqIDAuMSBmaW5uZXk7CiAgICAgICAgcHJpY2UgPSAwLjAwMDAwMDAwMDAwNSAqIDEgZXRoZXI7CiAgICAgICAgZGlzY291bnRQcmljZSA9IDAuMDAwMDAwMDAwMDA1ICogMSBldGhlciAqIDAuOTsKICAgICAgICB0b2tlblJld2FyZCA9IFdXV1Rva2VuKGFkZHJlc3NPZlRva2VuVXNlZEFzUmV3YXJkKTsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5QWZ0ZXJTdGFydCgpIHsKICAgICAgICByZXF1aXJlIChub3cgPj0gc3RhcnRUaW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlCZWZvcmVFbmQoKSB7CiAgICAgICAgcmVxdWlyZSAobm93IDw9IHN0YXJ0VGltZSArIGR1cmF0aW9uKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qIFRoZSBmdW5jdGlvbiB3aXRob3V0IG5hbWUgaXMgdGhlIGRlZmF1bHQgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55b25lIHNlbmRzIGZ1bmRzIHRvIGEgY29udHJhY3QgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgc3RvcEluRW1lcmdlbmN5IG9ubHlBZnRlclN0YXJ0IG9ubHlCZWZvcmVFbmQgcHVibGljCiAgICB7CiAgICAgICAgcmVxdWlyZSAobXNnLnZhbHVlID49IG1pblB1cmNoYXNlKTsKICAgICAgICByZXF1aXJlIChjcm93ZHNhbGVDbG9zZWQgPT0gZmFsc2UpOwogICAgICAgIHJlcXVpcmUgKHRva2Vuc0NvbnRyYWN0QmFsYW5jZSA+IDApOwogICAgICAgIHJlcXVpcmUgKHdoaXRlTGlzdFttc2cuc2VuZGVyXSA9PSB0cnVlKTsKCQkKCQl1aW50IGN1cnJlbnRQcmljZSA9IHByaWNlOwoJCQogICAgICAgIGlmIChiYWxhbmNlT2ZbbXNnLnNlbmRlcl0gPT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmUgKHRva2VuT3duZXJOdW1iZXIgPCB0b2tlbk93bmVyTnVtYmVyTWF4KTsKICAgICAgICAgICAgdG9rZW5Pd25lck51bWJlcisrOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1zZy52YWx1ZSA+PSBkaXNjb3VudFZhbHVlKQogICAgICAgIHsKICAgICAgICAgICAgY3VycmVudFByaWNlID0gZGlzY291bnRQcmljZTsKICAgICAgICB9CQkKCQkKCQl1aW50IGFtb3VudFNlbmRUb2tlbnMgPSBtc2cudmFsdWUgLyBjdXJyZW50UHJpY2U7CgkJCgkJaWYgKGFtb3VudFNlbmRUb2tlbnMgPiB0b2tlbnNDb250cmFjdEJhbGFuY2UpCgkJewoJCQl1aW50IHJlZnVuZCA9IG1zZy52YWx1ZSAtICh0b2tlbnNDb250cmFjdEJhbGFuY2UgKiBjdXJyZW50UHJpY2UpOwoJCQlhbW91bnRTZW5kVG9rZW5zID0gdG9rZW5zQ29udHJhY3RCYWxhbmNlOwoJCQltc2cuc2VuZGVyLnRyYW5zZmVyKHJlZnVuZCk7CgkJCUZ1bmRUcmFuc2Zlcihtc2cuc2VuZGVyLCByZWZ1bmQsIHRydWUpOwoJCQliYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gKG1zZy52YWx1ZSAtIHJlZnVuZCk7CgkJfQoJCWVsc2UgCgkJewoJCQliYWxhbmNlT2ZbbXNnLnNlbmRlcl0gKz0gbXNnLnZhbHVlOwoJCX0KCQkKCQl0b2tlblJld2FyZC50cmFuc2Zlcihtc2cuc2VuZGVyLCBhbW91bnRTZW5kVG9rZW5zKTsKCQlGdW5kVHJhbnNmZXIobXNnLnNlbmRlciwgYW1vdW50U2VuZFRva2VucywgdHJ1ZSk7CgkJCgkJdG9rZW5zQ29udHJhY3RCYWxhbmNlIC09IGFtb3VudFNlbmRUb2tlbnM7CgogICAgfQoKICAgIGZ1bmN0aW9uIGpvaW5XaGl0ZUxpc3QgKGFkZHJlc3MgX2FkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgICBpZiAoX2FkZHJlc3MgIT0gYWRkcmVzcygwKSkgCiAgICAgICAgewogICAgICAgICAgICB3aGl0ZUxpc3RbX2FkZHJlc3NdID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CgkKICAgIGZ1bmN0aW9uIGZpbmFsaXplU2FsZSAoKSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICByZXF1aXJlIChjcm93ZHNhbGVDbG9zZWQgPT0gZmFsc2UpOwogICAgICAgY3Jvd2RzYWxlQ2xvc2VkID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW9wZW5TYWxlICgpIHB1YmxpYyBvbmx5T3duZXIKICAgIHsKICAgICAgIGNyb3dkc2FsZUNsb3NlZCA9IGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByaWNlICh1aW50IF9wcmljZSkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIGlmIChfcHJpY2UgIT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIHByaWNlID0gX3ByaWNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXREaXNjb3VudCAodWludCBfZGlzY291bnRQcmljZSkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIGlmIChfZGlzY291bnRQcmljZSAhPSAwKQogICAgICAgIHsKICAgICAgICAgICAgZGlzY291bnRQcmljZSA9IF9kaXNjb3VudFByaWNlOwogICAgICAgIH0KICAgIH0KCQogICAgZnVuY3Rpb24gZnVuZFdpdGhkcmF3YWwgKHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lcgogICAgewogICAgICAgIGJlbmVmaWNpYXJ5LnRyYW5zZmVyKF9hbW91bnQpOwogICAgfQogICAKICAgIGZ1bmN0aW9uIHRva2VuV2l0aGRyYXdhbCAodWludCBfYW1vdW50KSBwdWJsaWMgb25seU93bmVyCiAgICB7CiAgICAgICAgdG9rZW5SZXdhcmQudHJhbnNmZXIoYmVuZWZpY2lhcnksIF9hbW91bnQpOwogICAgfQoJCiAgICBmdW5jdGlvbiBjaGFuZ2VCZW5lZmljaWFyeShhZGRyZXNzIF9uZXdCZW5lZmljaWFyeSkgcHVibGljIG9ubHlPd25lciAKCXsKICAgICAgICBpZiAoX25ld0JlbmVmaWNpYXJ5ICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgYmVuZWZpY2lhcnkgPSBfbmV3QmVuZWZpY2lhcnk7CiAgICAgICAgfQoJfQkKfQ=='.
	

]
