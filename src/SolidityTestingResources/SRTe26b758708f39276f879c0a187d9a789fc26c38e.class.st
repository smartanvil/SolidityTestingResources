Class {
	#name : #SRTe26b758708f39276f879c0a187d9a789fc26c38e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe26b758708f39276f879c0a187d9a789fc26c38e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIEVSQzcyMSBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL2VpcHMvaXNzdWVzLzcyMQogKi8KY29udHJhY3QgRVJDNzIxIHsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljOwp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CiAgCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIEVSQzcyMVRva2VuCiAqIEdlbmVyaWMgaW1wbGVtZW50YXRpb24gZm9yIHRoZSByZXF1aXJlZCBmdW5jdGlvbmFsaXR5IG9mIHRoZSBFUkM3MjEgc3RhbmRhcmQKICovCmNvbnRyYWN0IEVzdGF0ZXNUb2tlbiBpcyBFUkM3MjEsIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyBUb3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgdWludDI1NiBwcml2YXRlIHRvdGFsVG9rZW5zOwogIHVpbnQyNTZbXSBwcml2YXRlIGxpc3RlZEVzdGF0ZXM7CiAgdWludDI1NiBwdWJsaWMgZGV2T3dlZDsKICB1aW50MjU2IHB1YmxpYyBwb29sVG90YWw7CiAgdWludDI1NiBwdWJsaWMgbGFzdFB1cmNoYXNlOwoKICAvLyBFc3RhdGUgRGF0YQogIG1hcHBpbmcgKHVpbnQyNTYgPT4gRXN0YXRlKSBwdWJsaWMgZXN0YXRlRGF0YTsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIG93bmVyCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIHRva2VuT3duZXI7CgogIC8vIE1hcHBpbmcgZnJvbSB0b2tlbiBJRCB0byBhcHByb3ZlZCBhZGRyZXNzCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBwcml2YXRlIHRva2VuQXBwcm92YWxzOwoKICAvLyBNYXBwaW5nIGZyb20gb3duZXIgdG8gbGlzdCBvZiBvd25lZCB0b2tlbiBJRHMKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTZbXSkgcHJpdmF0ZSBvd25lZFRva2VuczsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGluZGV4IG9mIHRoZSBvd25lciB0b2tlbnMgbGlzdAogIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIG93bmVkVG9rZW5zSW5kZXg7CgogIC8vIEJhbGFuY2VzIGZyb20gJSBwYXlvdXRzLgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHJpdmF0ZSBwYXlvdXRCYWxhbmNlczsgCgogIC8vIEV2ZW50cwogIGV2ZW50IEVzdGF0ZVB1cmNoYXNlZCh1aW50MjU2IGluZGV4ZWQgX3Rva2VuSWQsIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQyNTYgX3B1cmNoYXNlUHJpY2UpOwoKICAvLyBQdXJjaGFzaW5nIENhcHMgZm9yIERldGVybWluaW5nIE5leHQgUG9vbCBDdXQKICB1aW50MjU2IHByaXZhdGUgZmlyc3RDYXAgID0gMC41IGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBzZWNvbmRDYXAgPSAxLjAgZXRoZXI7CiAgdWludDI1NiBwcml2YXRlIHRoaXJkQ2FwICA9IDMuMCBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgZmluYWxDYXAgID0gNS4wIGV0aGVyOwoKICAvLyBTdHJ1Y3QgdG8gc3RvcmUgRXN0YXRlIERhdGEKICBzdHJ1Y3QgRXN0YXRlIHsKICAgICAgdWludDI1NiBzdGFydGluZ1ByaWNlOyAvLyBQcmljZSB0aGUgaXRlbSBzdGFydGVkIGF0LgogICAgICB1aW50MjU2IHByaWNlOyAgICAgICAgIC8vIEN1cnJlbnQgcHJpY2Ugb2YgdGhlIGl0ZW0uCiAgICAgIHVpbnQyNTYgbGFzdFByaWNlOyAgICAgLy8gbGFzdFByaWNlIHRoaXMgd2FzIHNvbGQgZm9yLCB1c2VkIGZvciBhZGRpbmcgdG8gcG9vbC4KICAgICAgdWludDI1NiBwYXlvdXQ7ICAgICAgICAvLyBUaGUgcGVyY2VudCBvZiB0aGUgcG9vbCByZXdhcmRlZC4KICAgICAgdWludDI1NiB3aXRoZHJhd247ICAgICAvLyBUaGUgYW1vdW50IG9mIEV0aCB0aGlzIGVzdGF0ZSBoYXMgd2l0aGRyYXduIGZyb20gdGhlIHBvb2wuCiAgICAgIGFkZHJlc3Mgb3duZXI7ICAgICAgICAgLy8gQ3VycmVudCBvd25lciBvZiB0aGUgaXRlbS4KICB9CgogIC8qKgogICogQGRldiBjcmVhdGVMaXN0aW5nIEFkZHMgbmV3IEVSQzcyMSBUb2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgbmV3IHRva2VuCiAgKiBAcGFyYW0gX3N0YXJ0aW5nUHJpY2UgdWludDI1NiBzdGFydGluZyBwcmljZSBpbiB3ZWkKICAqIEBwYXJhbSBfcGF5b3V0UGVyY2VudGFnZSB1aW50MjU2IHBheW91dCBwZXJjZW50YWdlIChkaXZpc2libGUgYnkgMTApCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3Mgb2YgbmV3IG93bmVyCiAgKi8KICBmdW5jdGlvbiBjcmVhdGVMaXN0aW5nKHVpbnQyNTYgX3Rva2VuSWQsIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsIHVpbnQyNTYgX3BheW91dFBlcmNlbnRhZ2UsIGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIoKSBwdWJsaWMgewoKICAgIC8vIG1ha2Ugc3VyZSBwcmljZSA+IDAKICAgIHJlcXVpcmUoX3N0YXJ0aW5nUHJpY2UgPiAwKTsKICAgIC8vIG1ha2Ugc3VyZSB0b2tlbiBoYXNuJ3QgYmVlbiB1c2VkIHlldAogICAgcmVxdWlyZShlc3RhdGVEYXRhW190b2tlbklkXS5wcmljZSA9PSAwKTsKICAgIAogICAgLy8gY3JlYXRlIG5ldyB0b2tlbgogICAgRXN0YXRlIHN0b3JhZ2UgbmV3RXN0YXRlID0gZXN0YXRlRGF0YVtfdG9rZW5JZF07CgogICAgbmV3RXN0YXRlLm93bmVyID0gX293bmVyOwogICAgbmV3RXN0YXRlLnByaWNlID0gZ2V0TmV4dFByaWNlKF9zdGFydGluZ1ByaWNlKTsKICAgIG5ld0VzdGF0ZS5sYXN0UHJpY2UgPSBfc3RhcnRpbmdQcmljZTsKICAgIG5ld0VzdGF0ZS5wYXlvdXQgPSBfcGF5b3V0UGVyY2VudGFnZTsKICAgIG5ld0VzdGF0ZS5zdGFydGluZ1ByaWNlID0gX3N0YXJ0aW5nUHJpY2U7CgogICAgLy8gc3RvcmUgZXN0YXRlIGluIHN0b3JhZ2UKICAgIGxpc3RlZEVzdGF0ZXMucHVzaChfdG9rZW5JZCk7CiAgICAKICAgIC8vIG1pbnQgbmV3IHRva2VuCiAgICBfbWludChfb3duZXIsIF90b2tlbklkKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZU11bHRpcGxlICh1aW50MjU2W10gX2l0ZW1JZHMsIHVpbnQyNTZbXSBfcHJpY2VzLCB1aW50MjU2W10gX3BheW91dHMsIGFkZHJlc3NbXSBfb3duZXJzKSBvbmx5T3duZXIoKSBleHRlcm5hbCB7CiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfaXRlbUlkcy5sZW5ndGg7IGkrKykgewogICAgICBjcmVhdGVMaXN0aW5nKF9pdGVtSWRzW2ldLCBfcHJpY2VzW2ldLCBfcGF5b3V0c1tpXSwgX293bmVyc1tpXSk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgRGV0ZXJtaW5lcyBuZXh0IHByaWNlIG9mIHRva2VuCiAgKiBAcGFyYW0gX3ByaWNlIHVpbnQyNTYgSUQgb2YgY3VycmVudCBwcmljZQogICovCiAgZnVuY3Rpb24gZ2V0TmV4dFByaWNlICh1aW50MjU2IF9wcmljZSkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKHVpbnQyNTYgX25leHRQcmljZSkgewogICAgaWYgKF9wcmljZSA8IGZpcnN0Q2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDIwMCkuZGl2KDk1KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgc2Vjb25kQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEzNSkuZGl2KDk2KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgdGhpcmRDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoOTcpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBmaW5hbENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTcpLmRpdig5Nyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTUpLmRpdig5OCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVQb29sQ3V0ICh1aW50MjU2IF9wcmljZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcG9vbEN1dCkgewogICAgaWYgKF9wcmljZSA8IGZpcnN0Q2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEwKS5kaXYoMTAwKTsgLy8gNSUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgc2Vjb25kQ2FwKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDkpLmRpdigxMDApOyAvLyA0JQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCB0aGlyZENhcCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg4KS5kaXYoMTAwKTsgLy8gMyUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgZmluYWxDYXApIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNykuZGl2KDEwMCk7IC8vIDMlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg1KS5kaXYoMTAwKTsgLy8gMiUKICAgIH0KICB9CgogIC8qKgogICogQGRldiBQdXJjaGFzZSBlc3RhdGUgZnJvbSBwcmV2aW91cyBvd25lcgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgb2YgdG9rZW4KICAqLwogIGZ1bmN0aW9uIHB1cmNoYXNlRXN0YXRlKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyAKICAgIHBheWFibGUKICAgIGlzTm90Q29udHJhY3QobXNnLnNlbmRlcikKICB7CgogICAgLy8gZ2V0IGRhdGEgZnJvbSBzdG9yYWdlCiAgICBFc3RhdGUgc3RvcmFnZSBlc3RhdGUgPSBlc3RhdGVEYXRhW190b2tlbklkXTsKICAgIHVpbnQyNTYgcHJpY2UgPSBlc3RhdGUucHJpY2U7CiAgICBhZGRyZXNzIG9sZE93bmVyID0gZXN0YXRlLm93bmVyOwogICAgYWRkcmVzcyBuZXdPd25lciA9IG1zZy5zZW5kZXI7CiAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwoKICAgIC8vIHJldmVydCBjaGVja3MKICAgIHJlcXVpcmUocHJpY2UgPiAwKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgIHJlcXVpcmUob2xkT3duZXIgIT0gbXNnLnNlbmRlcik7CgogICAgLy8gQ2FsY3VsYXRlIHBvb2wgY3V0IGZvciB0YXhlcy4KICAgIHVpbnQyNTYgcHJvZml0ID0gcHJpY2Uuc3ViKGVzdGF0ZS5sYXN0UHJpY2UpOwogICAgdWludDI1NiBwb29sQ3V0ID0gY2FsY3VsYXRlUG9vbEN1dChwcm9maXQpOwogICAgcG9vbFRvdGFsICs9IHBvb2xDdXQ7CiAgICAKICAgIC8vIDMlIGdvZXMgdG8gZGV2ZWxvcGVycwogICAgdWludDI1NiBkZXZDdXQgPSBwcmljZS5tdWwoMykuZGl2KDEwMCk7CiAgICBkZXZPd2VkID0gZGV2T3dlZC5hZGQoZGV2Q3V0KTsKCiAgICB0cmFuc2ZlckVzdGF0ZShvbGRPd25lciwgbmV3T3duZXIsIF90b2tlbklkKTsKCiAgICAvLyBzZXQgbmV3IHByaWNlcwogICAgZXN0YXRlLmxhc3RQcmljZSA9IHByaWNlOwogICAgZXN0YXRlLnByaWNlID0gZ2V0TmV4dFByaWNlKHByaWNlKTsKCiAgICAvLyByYWlzZSBldmVudAogICAgRXN0YXRlUHVyY2hhc2VkKF90b2tlbklkLCBuZXdPd25lciwgcHJpY2UpOwoKICAgIC8vIFRyYW5zZmVyIHBheW1lbnQgdG8gb2xkIG93bmVyIG1pbnVzIHRoZSBkZXZlbG9wZXIncyBhbmQgcG9vbCdzIGN1dC4KICAgIG9sZE93bmVyLnRyYW5zZmVyKHByaWNlLnN1YihkZXZDdXQuYWRkKHBvb2xDdXQpKSk7CgogICAgLy8gU2VuZCByZWZ1bmQgdG8gb3duZXIgaWYgbmVlZGVkCiAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICBuZXdPd25lci50cmFuc2ZlcihleGNlc3MpOwogICAgfQogICAgCiAgICAvLyBzZXQgbGFzdCBwdXJjaGFzZSBwcmljZSB0byBzdG9yYWdlCiAgICBsYXN0UHVyY2hhc2UgPSBub3c7CgogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVyIEVzdGF0ZSBmcm9tIFByZXZpb3VzIE93bmVyIHRvIE5ldyBPd25lcgogICogQHBhcmFtIF9mcm9tIHByZXZpb3VzIG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gbmV3IG93bmVyIGFkZHJlc3MKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRva2VuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckVzdGF0ZShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewoKICAgIC8vIGNoZWNrIHRva2VuIGV4aXN0cwogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfdG9rZW5JZCkpOwoKICAgIC8vIG1ha2Ugc3VyZSBwcmV2aW91cyBvd25lciBpcyBjb3JyZWN0CiAgICByZXF1aXJlKGVzdGF0ZURhdGFbX3Rva2VuSWRdLm93bmVyID09IF9mcm9tKTsKCiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwoKICAgIC8vIHBheSBhbnkgdW5wYWlkIHBheW91dHMgdG8gcHJldmlvdXMgb3duZXIgb2YgZXN0YXRlCiAgICB1cGRhdGVTaW5nbGVQYXlvdXQoX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyBjbGVhciBhcHByb3ZhbHMgbGlua2VkIHRvIHRoaXMgdG9rZW4KICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyByZW1vdmUgdG9rZW4gZnJvbSBwcmV2aW91cyBvd25lcgogICAgcmVtb3ZlVG9rZW4oX2Zyb20sIF90b2tlbklkKTsKCiAgICAvLyB1cGRhdGUgb3duZXIgYW5kIGFkZCB0b2tlbiB0byBuZXcgb3duZXIKICAgIGVzdGF0ZURhdGFbX3Rva2VuSWRdLm93bmVyID0gX3RvOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CgogICAvL3JhaXNlIGV2ZW50CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgV2l0aGRyYXcgZGV2J3MgY3V0CiAgKi8KICBmdW5jdGlvbiB3aXRoZHJhdygpIG9ubHlPd25lciBwdWJsaWMgewogICAgb3duZXIudHJhbnNmZXIoZGV2T3dlZCk7CiAgICBkZXZPd2VkID0gMDsKICB9CgogIC8qKgogICogQGRldiBVcGRhdGVzIHRoZSBwYXlvdXQgZm9yIHRoZSBlc3RhdGVzIHRoZSBvd25lciBoYXMKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0b2tlbiBvd25lcgogICovCiAgZnVuY3Rpb24gdXBkYXRlUGF5b3V0KGFkZHJlc3MgX293bmVyKSBwdWJsaWMgewogICAgdWludDI1NltdIG1lbW9yeSBlc3RhdGVzID0gb3duZWRUb2tlbnNbX293bmVyXTsKICAgIHVpbnQyNTYgb3dlZDsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGVzdGF0ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB1aW50MjU2IHRvdGFsRXN0YXRlT3dlZCA9IHBvb2xUb3RhbCAqIGVzdGF0ZURhdGFbZXN0YXRlc1tpXV0ucGF5b3V0IC8gMTAwMDA7CiAgICAgICAgdWludDI1NiBlc3RhdGVPd2VkID0gdG90YWxFc3RhdGVPd2VkLnN1Yihlc3RhdGVEYXRhW2VzdGF0ZXNbaV1dLndpdGhkcmF3bik7CiAgICAgICAgb3dlZCArPSBlc3RhdGVPd2VkOwogICAgICAgIAogICAgICAgIGVzdGF0ZURhdGFbZXN0YXRlc1tpXV0ud2l0aGRyYXduICs9IGVzdGF0ZU93ZWQ7CiAgICB9CiAgICBwYXlvdXRCYWxhbmNlc1tfb3duZXJdICs9IG93ZWQ7CiAgfQoKICAvKioKICAgKiBAZGV2IFVwZGF0ZSBhIHNpbmdsZSBlc3RhdGUgcGF5b3V0IGZvciB0cmFuc2ZlcnMuCiAgICogQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRoZSBvd25lciBvZiB0aGUgZXN0YXRlLgogICAqIEBwYXJhbSBfaXRlbUlkIFVuaXF1ZSBJZCBvZiB0aGUgdG9rZW4uCiAgKiovCiAgZnVuY3Rpb24gdXBkYXRlU2luZ2xlUGF5b3V0KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pdGVtSWQpIGludGVybmFsIHsKICAgIHVpbnQyNTYgdG90YWxFc3RhdGVPd2VkID0gcG9vbFRvdGFsICogZXN0YXRlRGF0YVtfaXRlbUlkXS5wYXlvdXQgLyAxMDAwMDsKICAgIHVpbnQyNTYgZXN0YXRlT3dlZCA9IHRvdGFsRXN0YXRlT3dlZC5zdWIoZXN0YXRlRGF0YVtfaXRlbUlkXS53aXRoZHJhd24pOwogICAgICAgIAogICAgZXN0YXRlRGF0YVtfaXRlbUlkXS53aXRoZHJhd24gKz0gZXN0YXRlT3dlZDsKICAgIHBheW91dEJhbGFuY2VzW19vd25lcl0gKz0gZXN0YXRlT3dlZDsKICB9CgogIC8qKgogICogQGRldiBPd25lciBjYW4gd2l0aGRyYXcgdGhlaXIgYWNjdW11bGF0ZWQgcGF5b3V0cwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG9mIHRva2VuIG93bmVyCiAgKi8KICBmdW5jdGlvbiB3aXRoZHJhd1JlbnQoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB7CiAgICAgIHVwZGF0ZVBheW91dChfb3duZXIpOwogICAgICB1aW50MjU2IHBheW91dCA9IHBheW91dEJhbGFuY2VzW19vd25lcl07CiAgICAgIHBheW91dEJhbGFuY2VzW19vd25lcl0gPSAwOwogICAgICBfb3duZXIudHJhbnNmZXIocGF5b3V0KTsKICB9CgogIGZ1bmN0aW9uIGdldFJlbnRPd2VkKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IG93ZWQpIHsKICAgIHVwZGF0ZVBheW91dChfb3duZXIpOwogICAgcmV0dXJuIHBheW91dEJhbGFuY2VzW19vd25lcl07CiAgfQoKICAvKioKICAqIEBkZXYgUmV0dXJuIGFsbCBlc3RhdGUgZGF0YQogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgb2YgdG9rZW4KICAqLwogIGZ1bmN0aW9uIGdldEVzdGF0ZURhdGEgKHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsIHZpZXcgCiAgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIsIHVpbnQyNTYgX3N0YXJ0aW5nUHJpY2UsIHVpbnQyNTYgX3ByaWNlLCB1aW50MjU2IF9uZXh0UHJpY2UsIHVpbnQyNTYgX3BheW91dCkgCiAgewogICAgRXN0YXRlIG1lbW9yeSBlc3RhdGUgPSBlc3RhdGVEYXRhW190b2tlbklkXTsKICAgIHJldHVybiAoZXN0YXRlLm93bmVyLCBlc3RhdGUuc3RhcnRpbmdQcmljZSwgZXN0YXRlLnByaWNlLCBnZXROZXh0UHJpY2UoZXN0YXRlLnByaWNlKSwgZXN0YXRlLnBheW91dCk7CiAgfQoKICAvKioKICAqIEBkZXYgRGV0ZXJtaW5lcyBpZiB0b2tlbiBleGlzdHMgYnkgY2hlY2tpbmcgaXQncyBwcmljZQogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdG9rZW4KICAqLwogIGZ1bmN0aW9uIHRva2VuRXhpc3RzICh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9leGlzdHMpIHsKICAgIHJldHVybiBlc3RhdGVEYXRhW190b2tlbklkXS5wcmljZSA+IDA7CiAgfQoKICAvKioKICAqIEBkZXYgR3VhcmFudGVlcyBtc2cuc2VuZGVyIGlzIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHZhbGlkYXRlIGl0cyBvd25lcnNoaXAgYmVsb25ncyB0byBtc2cuc2VuZGVyCiAgKi8KICBtb2RpZmllciBvbmx5T3duZXJPZih1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IG1zZy5zZW5kZXIpOwogICAgXzsKICB9CgogIC8qKgogICogQGRldiBHdWFyYW50ZWVzIG1zZy5zZW5kZXIgaXMgbm90IGEgY29udHJhY3QKICAqIEBwYXJhbSBfYnV5ZXIgYWRkcmVzcyBvZiBwZXJzb24gYnV5aW5nIGVzdGF0ZQogICovCiAgbW9kaWZpZXIgaXNOb3RDb250cmFjdChhZGRyZXNzIF9idXllcikgewogICAgdWludCBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKF9idXllcikgfQogICAgcmVxdWlyZShzaXplID09IDApOwogICAgXzsKICB9CgoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBzdG9yZWQgYnkgdGhlIGNvbnRyYWN0CiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgKi8KICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiB0b3RhbFRva2VuczsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSBiYWxhbmNlIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBvd25lZFRva2Vuc1tfb3duZXJdLmxlbmd0aDsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBsaXN0IG9mIHRva2VucyBvd25lZCBieSBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyB0byBxdWVyeSB0aGUgdG9rZW5zIG9mCiAgKiBAcmV0dXJuIHVpbnQyNTZbXSByZXByZXNlbnRpbmcgdGhlIGxpc3Qgb2YgdG9rZW5zIG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gdG9rZW5zT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSkgewogICAgcmV0dXJuIG93bmVkVG9rZW5zW19vd25lcl07CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgb3duZXIgb2YgdGhlIHNwZWNpZmllZCB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBvd25lciBvZgogICogQHJldHVybiBvd25lciBhZGRyZXNzIGN1cnJlbnRseSBtYXJrZWQgYXMgdGhlIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICovCiAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICBhZGRyZXNzIG93bmVyID0gdG9rZW5Pd25lcltfdG9rZW5JZF07CiAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCkpOwogICAgcmV0dXJuIG93bmVyOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXRzIHRoZSBhcHByb3ZlZCBhZGRyZXNzIHRvIHRha2Ugb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHJldHVybiBhZGRyZXNzIGN1cnJlbnRseSBhcHByb3ZlZCB0byB0YWtlIG93bmVyc2hpcCBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICByZXR1cm4gdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdOwogIH0KCiAgLyoqCiAgKiBAZGV2IFRyYW5zZmVycyB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQgdG8gYW5vdGhlciBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgQXBwcm92ZXMgYW5vdGhlciBhZGRyZXNzIHRvIGNsYWltIGZvciB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90byBhZGRyZXNzIHRvIGJlIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBhcHByb3ZlZAogICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlPd25lck9mKF90b2tlbklkKSB7CiAgICBhZGRyZXNzIG93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICBpZiAoYXBwcm92ZWRGb3IoX3Rva2VuSWQpICE9IDAgfHwgX3RvICE9IDApIHsKICAgICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gX3RvOwogICAgICBBcHByb3ZhbChvd25lciwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CiAgfQoKICAvKioKICAqIEBkZXYgQ2xhaW1zIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIGJlaW5nIGNsYWltZWQgYnkgdGhlIG1zZy5zZW5kZXIKICAqLwogIGZ1bmN0aW9uIHRha2VPd25lcnNoaXAodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHsKICAgIHJlcXVpcmUoaXNBcHByb3ZlZEZvcihtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgY2xlYXJBcHByb3ZhbEFuZFRyYW5zZmVyKG93bmVyT2YoX3Rva2VuSWQpLCBtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRlbGxzIHdoZXRoZXIgdGhlIG1zZy5zZW5kZXIgaXMgYXBwcm92ZWQgZm9yIHRoZSBnaXZlbiB0b2tlbiBJRCBvciBub3QKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBwcml2YXRlIHNvIGl0IGNhbiBiZSBleHRlbmRlZCBpbiBmdXJ0aGVyIGltcGxlbWVudGF0aW9ucyBsaWtlIHRoZSBvcGVyYXRhYmxlIEVSQzcyMQogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvZiB0aGUgb3duZXIgdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5IHRoZSBhcHByb3ZhbCBvZgogICAqIEByZXR1cm4gYm9vbCB3aGV0aGVyIHRoZSBtc2cuc2VuZGVyIGlzIGFwcHJvdmVkIGZvciB0aGUgZ2l2ZW4gdG9rZW4gSUQgb3Igbm90CiAgICovCiAgZnVuY3Rpb24gaXNBcHByb3ZlZEZvcihhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gYXBwcm92ZWRGb3IoX3Rva2VuSWQpID09IF9vd25lcjsKICB9CiAgCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsZWFyIGN1cnJlbnQgYXBwcm92YWwgYW5kIHRyYW5zZmVyIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF9mcm9tIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICogQHBhcmFtIF90byBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRoZSB0b2tlbiB0bwogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiBjbGVhckFwcHJvdmFsQW5kVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIGlzTm90Q29udHJhY3QoX3RvKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IG93bmVyT2YoX3Rva2VuSWQpKTsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX2Zyb20pOwoKICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKICAgIHVwZGF0ZVNpbmdsZVBheW91dChfZnJvbSwgX3Rva2VuSWQpOwogICAgcmVtb3ZlVG9rZW4oX2Zyb20sIF90b2tlbklkKTsKICAgIGFkZFRva2VuKF90bywgX3Rva2VuSWQpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsZWFyIGN1cnJlbnQgYXBwcm92YWwgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiBjbGVhckFwcHJvdmFsKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBwcml2YXRlIHsKICAgIHJlcXVpcmUob3duZXJPZihfdG9rZW5JZCkgPT0gX293bmVyKTsKICAgIHRva2VuQXBwcm92YWxzW190b2tlbklkXSA9IDA7CiAgICBBcHByb3ZhbChfb3duZXIsIDAsIF90b2tlbklkKTsKICB9CgoKICAgIC8qKgogICogQGRldiBNaW50IHRva2VuIGZ1bmN0aW9uCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBvd24gdGhlIG1pbnRlZCB0b2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIG1pbnRlZCBieSB0aGUgbXNnLnNlbmRlcgogICovCiAgZnVuY3Rpb24gX21pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgYWRkVG9rZW4oX3RvLCBfdG9rZW5JZCk7CiAgICBUcmFuc2ZlcigweDAsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGFkZCBhIHRva2VuIElEIHRvIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF90byBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgbmV3IG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIGFkZGVkIHRvIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYWRkVG9rZW4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHByaXZhdGUgewogICAgcmVxdWlyZSh0b2tlbk93bmVyW190b2tlbklkXSA9PSBhZGRyZXNzKDApKTsKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgZXN0YXRlRGF0YVtfdG9rZW5JZF0ub3duZXIgPSBfdG87CiAgICB1aW50MjU2IGxlbmd0aCA9IGJhbGFuY2VPZihfdG8pOwogICAgb3duZWRUb2tlbnNbX3RvXS5wdXNoKF90b2tlbklkKTsKICAgIG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gbGVuZ3RoOwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5hZGQoMSk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gcmVtb3ZlIGEgdG9rZW4gSUQgZnJvbSB0aGUgbGlzdCBvZiBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgcHJldmlvdXMgb3duZXIgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gcmVtb3ZlVG9rZW4oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdG9rZW5JZCkgcHJpdmF0ZSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IF9mcm9tKTsKCiAgICB1aW50MjU2IHRva2VuSW5kZXggPSBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXTsKICAgIHVpbnQyNTYgbGFzdFRva2VuSW5kZXggPSBiYWxhbmNlT2YoX2Zyb20pLnN1YigxKTsKICAgIHVpbnQyNTYgbGFzdFRva2VuID0gb3duZWRUb2tlbnNbX2Zyb21dW2xhc3RUb2tlbkluZGV4XTsKCiAgICB0b2tlbk93bmVyW190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bdG9rZW5JbmRleF0gPSBsYXN0VG9rZW47CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bbGFzdFRva2VuSW5kZXhdID0gMDsKICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgaGFuZGxlIHNpbmdsZS1lbGVtZW50IGFycmF5cy4gSW4gdGhhdCBjYXNlLCBib3RoIHRva2VuSW5kZXggYW5kIGxhc3RUb2tlbkluZGV4IGFyZSBnb2luZyB0bwogICAgLy8gYmUgemVyby4gVGhlbiB3ZSBjYW4gbWFrZSBzdXJlIHRoYXQgd2Ugd2lsbCByZW1vdmUgX3Rva2VuSWQgZnJvbSB0aGUgb3duZWRUb2tlbnMgbGlzdCBzaW5jZSB3ZSBhcmUgZmlyc3Qgc3dhcHBpbmcKICAgIC8vIHRoZSBsYXN0VG9rZW4gdG8gdGhlIGZpcnN0IHBvc2l0aW9uLCBhbmQgdGhlbiBkcm9wcGluZyB0aGUgZWxlbWVudCBwbGFjZWQgaW4gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlIGxpc3QKCiAgICBvd25lZFRva2Vuc1tfZnJvbV0ubGVuZ3RoLS07CiAgICBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc0luZGV4W2xhc3RUb2tlbl0gPSB0b2tlbkluZGV4OwogICAgdG90YWxUb2tlbnMgPSB0b3RhbFRva2Vucy5zdWIoMSk7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICByZXR1cm4gIkV0aGVyRXN0YXRlcy5pbyBFc3RhdGUiOwogIH0KCiAgZnVuY3Rpb24gc3ltYm9sKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpIHsKICAgIHJldHVybiAiRUUiOwogIH0KCn0='.
	

]
