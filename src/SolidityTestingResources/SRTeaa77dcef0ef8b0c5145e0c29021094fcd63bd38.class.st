Class {
	#name : #SRTeaa77dcef0ef8b0c5145e0c29021094fcd63bd38,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTeaa77dcef0ef8b0c5145e0c29021094fcd63bd38 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5ID49MC40LjEwOwoKY29udHJhY3QgT3duZWQgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICAvKioKICAgICAqIEV2ZW50cwogICAgICovCiAgICBldmVudCBDaGFuZ2VkT3duZXIoYWRkcmVzcyBpbmRleGVkIG5ld19vd25lcik7CgogICAgLyoqCiAgICAgKiBGdW5jdGlvbmFsaXR5CiAgICAgKi8KCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIF9uZXdPd25lcikgb25seU93bmVyIGV4dGVybmFsIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBleHRlcm5hbCB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICAgICAgbmV3T3duZXIgPSAweDA7CiAgICAgICAgICAgIENoYW5nZWRPd25lcihvd25lcik7CiAgICAgICAgfQogICAgfQp9Cgpjb250cmFjdCBJT3duZWQgewogICAgZnVuY3Rpb24gb3duZXIoKSByZXR1cm5zIChhZGRyZXNzKTsKICAgIGZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MpOwogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCk7Cn0KCmNvbnRyYWN0IFRva2VuIHsKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQgYW1vdW50KSByZXR1cm5zKGJvb2wpOwoJZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCBhbW91bnQpIHJldHVybnMoYm9vbCk7CglmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBhZGRyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOwp9CgoKLyoqCiAqIFNhdmluZ3MgaXMgYSBjb250cmFjdCB0aGF0IHJlbGVhc2VzIFRva2VucyBvbiBhIHByZWRlZmluZWQKICogc2NoZWR1bGUsIGFuZCBhbGxvY2F0ZXMgYm9udXMgdG9rZW5zIHVwb24gd2l0aGRyYXdhbCBvbiBhCiAqIHByb3BvcnRpb25hbCBiYXNpcywgZGV0ZXJtaW5lZCBieSB0aGUgcmF0aW8gb2YgZGVwb3NpdGVkIHRva2VucwogKiB0byB0b3RhbCBvd25lZCB0b2tlbnMuCiAqCiAqIFRoZSBkaXN0cmlidXRpb24gc2NoZWR1bGUgY29uc2lzdHMgb2YgYSBtb250aGx5IHdpdGhkcmF3YWwgc2NoZWR1bGUKICogcmVzcG9uc2libGUgZm9yIGRpc3RyaWJ1dGlvbiA3NSUgb2YgdGhlIHRvdGFsIHNhdmluZ3MsIGFuZCBhCiAqIG9uZS1vZmYgd2l0aGRyYXdhbCBldmVudCBhdmFpbGFibGUgYmVmb3JlIG9yIGF0IHRoZSBzdGFydCBvZiB0aGUKICogd2l0aGRyYXdhbCBzY2hlZHVsZSwgZGlzdHJpYnV0aW5nIDI1JSBvZiB0aGUgdG90YWwgc2F2aW5ncy4KICoKICogVG8gYmUgZXhhY3QsIHVwb24gY29udHJhY3QgZGVwbG95bWVudCB0aGVyZSBtYXkgYmUgYSBwZXJpb2Qgb2YgdGltZSBpbiB3aGljaAogKiBvbmx5IHRoZSBvbmUtb2ZmIHdpdGhkcmF3YWwgZXZlbnQgaXMgYXZhaWxhYmxlLCBkZWZpbmUgdGhpcyBwZXJpb2Qgb2YgdGltZSBhczoKICogW3RpbWVzdGFtcChzdGFydCksIHRpbWVzdGFtcChzdGFydEJsb2NrVGltZXN0YW1wKSksCiAqCiAqIFRoZW4gdGhlIHBlcmlvZGljIHdpdGhkcmF3YWwgcmFuZ2UgaXMgZGVmaW5lZCBhczoKICogW3RpbWVzdGFtcChzdGFydEJsb2NrVGltZXN0YW1wKSwgK2luZikKICoKICogRE8gTk9UIFNFTkQgVE9LRU5TIFRPIFRISVMgQ09OVFJBQ1QuIFVzZSB0aGUgZGVwb3NpdCgpIG9yIGRlcG9zaXRUbygpIG1ldGhvZC4KICogQXMgYW4gZXhjZXB0aW9uLCB0b2tlbnMgdHJhbnNmZXJyZWQgdG8gdGhpcyBjb250cmFjdCBiZWZvcmUgbG9ja2luZyBhcmUgdGhlCiAqIGJvbnVzIHRva2VucyB0aGF0IGFyZSBkaXN0cmlidXRlZC4KICovCmNvbnRyYWN0IFNhdmluZ3MgaXMgT3duZWQgewoJLyoqCgkgKiBQZXJpb2RzIGlzIHRoZSB0b3RhbCBtb250aGx5IHdpdGhkcmF3YWJsZSBhbW91bnQsIG5vdCBjb3VudGluZyB0aGUKCSAqIHNwZWNpYWwgd2l0aGRyYXdhbC4KCSAqLwoJdWludCBwdWJsaWMgcGVyaW9kczsKCgkvKioKCSAqIHQwc3BlY2lhbCBpcyBhbiBhZGRpdGlvbmFsIG11bHRpcGxpZXIgdGhhdCBkZXRlcm1pbmVzIHdoYXQKCSAqIGZyYWN0aW9uIG9mIHRoZSB0b3RhbCBkaXN0cmlidXRpb24gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlCgkgKiBvbmUtb2ZmIHdpdGhkcmF3YWwgZXZlbnQuIEl0IGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aAoJICogYSBwZXJpb2RpYyBtdWx0aXBsaWVyIChwKSB0byBkZXRlcm1pbmUgdGhlIHRvdGFsIHNhdmluZ3Mgd2l0aGRyYXdhYmxlCgkgKiB0byB0aGUgdXNlciBhdCB0aGF0IHBvaW50IGluIHRpbWUuCgkgKgoJICogVGhlIHZhbHVlIGlzIG5vdCBzZXQsIGl0IGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gcGVyaW9kcwoJICovCgl1aW50IHB1YmxpYyB0MHNwZWNpYWw7CgoJdWludCBjb25zdGFudCBwdWJsaWMgaW50ZXJ2YWxTZWNzID0gMzAgZGF5czsKCXVpbnQgY29uc3RhbnQgcHVibGljIHByZWNpc2lvbiA9IDEwICoqIDE4OwoKCgkvKioKCSAqIEV2ZW50cwoJICovCglldmVudCBXaXRoZHJhd3MoYWRkcmVzcyBpbmRleGVkIHdobywgdWludCBhbW91bnQpOwoJZXZlbnQgRGVwb3NpdChhZGRyZXNzIGluZGV4ZWQgd2hvLCB1aW50IGFtb3VudCk7CgoJYm9vbCBwdWJsaWMgaW5pdGVkOwoJYm9vbCBwdWJsaWMgbG9ja2VkOwoJdWludCBwdWJsaWMgc3RhcnRCbG9ja1RpbWVzdGFtcCA9IDA7CgoJVG9rZW4gcHVibGljIHRva2VuOwoKCS8vIGZhY2UgdmFsdWUgZGVwb3NpdGVkIGJ5IGFuIGFkZHJlc3MgYmVmb3JlIGxvY2tpbmcKCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGRlcG9zaXRlZDsKCgkvLyB0b3RhbCBmYWNlIHZhbHVlIGRlcG9zaXRlZDsgc3VtIG9mIGRlcG9zaXRlZAoJdWludCBwdWJsaWMgdG90YWxmdjsKCgkvLyB0aGUgdG90YWwgcmVtYWluaW5nIHZhbHVlCgl1aW50IHB1YmxpYyByZW1haW5kZXI7CgoJLyoqCgkgKiBUb3RhbCB0b2tlbnMgb3duZWQgYnkgdGhlIGNvbnRyYWN0IGFmdGVyIGxvY2tpbmcsIGFuZCBwb3NzaWJseQoJICogdXBkYXRlZCBieSB0aGUgZm91bmRhdGlvbiBhZnRlciBzdWJzZXF1ZW50IHNhbGVzLgoJICovCgl1aW50IHB1YmxpYyB0b3RhbDsKCgkvLyB0aGUgdG90YWwgdmFsdWUgd2l0aGRyYXduCgltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB3aXRoZHJhd247CgoJYm9vbCBwdWJsaWMgbnVsbGlmaWVkOwoKCW1vZGlmaWVyIG5vdE51bGxpZmllZCgpIHsgcmVxdWlyZSghbnVsbGlmaWVkKTsgXzsgfQoKCW1vZGlmaWVyIHByZUxvY2soKSB7IHJlcXVpcmUoIWxvY2tlZCAmJiBzdGFydEJsb2NrVGltZXN0YW1wID09IDApOyBfOyB9CgoJLyoqCgkgKiBMb2NrIGNhbGxlZCwgZGVwb3NpdHMgbm8gbG9uZ2VyIGF2YWlsYWJsZS4KCSAqLwoJbW9kaWZpZXIgcG9zdExvY2soKSB7IHJlcXVpcmUobG9ja2VkKTsgXzsgfQoKCS8qKgoJICogUHJlc3RhcnQsIHN0YXRlIGlzIGFmdGVyIGxvY2ssIGJlZm9yZSBzdGFydAoJICovCgltb2RpZmllciBwcmVTdGFydCgpIHsgcmVxdWlyZShsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCA9PSAwKTsgXzsgfQoKCS8qKgoJICogU3RhcnQgY2FsbGVkLCB0aGUgc2F2aW5ncyBjb250cmFjdCBpcyBub3cgZmluYWxpemVkLCBhbmQgd2l0aGRyYXdhbHMKCSAqIGFyZSBub3cgcGVybWl0dGVkLgoJICovCgltb2RpZmllciBwb3N0U3RhcnQoKSB7IHJlcXVpcmUobG9ja2VkICYmIHN0YXJ0QmxvY2tUaW1lc3RhbXAgIT0gMCk7IF87IH0KCgkvKioKCSAqIFVuaW5pdGlhbGl6ZWQgc3RhdGUsIGJlZm9yZSBpbml0IGlzIGNhbGxlZC4gTWFpbmx5IHVzZWQgYXMgYSBndWFyZCB0bwoJICogZmluYWxpemUgcGVyaW9kcyBhbmQgdDBzcGVjaWFsLgoJICovCgltb2RpZmllciBub3RJbml0aWFsaXplZCgpIHsgcmVxdWlyZSghaW5pdGVkKTsgXzsgfQoKCS8qKgoJICogUG9zdCBpbml0aWFsaXphdGlvbiBzdGF0ZSwgbWFpbmx5IHVzZWQgdG8gZ3VhcmFudGVlIHRoYXQKCSAqIHBlcmlvZHMgYW5kIHQwc3BlY2lhbCBoYXZlIGJlZW4gc2V0IHByb3Blcmx5IGJlZm9yZSBzdGFydGluZwoJICogdGhlIHdpdGhkcmF3YWwgcHJvY2Vzcy4KCSAqLwoJbW9kaWZpZXIgaW5pdGlhbGl6ZWQoKSB7IHJlcXVpcmUoaW5pdGVkKTsgXzsgfQoKCS8qKgoJICogUmV2ZXJ0IHVuZGVyIGFsbCBjb25kaXRpb25zIGZvciBmYWxsYmFjaywgY2hlYXBlciBtaXN0YWtlcwoJICogaW4gdGhlIGZ1dHVyZT8KCSAqLwoJZnVuY3Rpb24oKSB7CgkJcmV2ZXJ0KCk7Cgl9CgoJLyoqCgkgKiBOdWxsaWZ5IGZ1bmN0aW9uYWxpdHkgaXMgaW50ZW5kZWQgdG8gZGlzYWJsZSB0aGUgY29udHJhY3QuCgkgKi8KCWZ1bmN0aW9uIG51bGxpZnkoKSBvbmx5T3duZXIgewoJCW51bGxpZmllZCA9IHRydWU7Cgl9CgoJLyoqCgkgKiBJbml0aWFsaXphdGlvbiBmdW5jdGlvbiwgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBjb250cmFjdCBkZXBsb3ltZW50LiBUaGUKCSAqIGFkZGl0aW9uIG9mIHRoaXMgZnVuY3Rpb24gYWxsb3dzIGNvbnRyYWN0IGNvbXBpbGF0aW9uIHRvIGJlIHNpbXBsaWZpZWQKCSAqIHRvIG9uZSBjb250cmFjdCwgaW5zdGVhZCBvZiB0d28uCgkgKgoJICogcGVyaW9kcyBhbmQgdDBzcGVjaWFsIGFyZSBmaW5hbGl6ZWQsIGFuZCBlZmZlY3RpdmVseSBpbnZhcmlhbnQsIGFmdGVyCgkgKiBpbml0IGlzIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUuCgkgKi8KCWZ1bmN0aW9uIGluaXQodWludCBfcGVyaW9kcywgdWludCBfdDBzcGVjaWFsKSBvbmx5T3duZXIgbm90SW5pdGlhbGl6ZWQgewoJCXJlcXVpcmUoX3BlcmlvZHMgIT0gMCk7CgkJcGVyaW9kcyA9IF9wZXJpb2RzOwoJCXQwc3BlY2lhbCA9IF90MHNwZWNpYWw7Cgl9CgoJZnVuY3Rpb24gZmluYWxpemVJbml0KCkgb25seU93bmVyIG5vdEluaXRpYWxpemVkIHsKCQlpbml0ZWQgPSB0cnVlOwoJfQoKCWZ1bmN0aW9uIHNldFRva2VuKGFkZHJlc3MgdG9rKSBvbmx5T3duZXIgewoJCXRva2VuID0gVG9rZW4odG9rKTsKCX0KCgkvKioKCSAqIExvY2sgaXMgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBsb2NrIHRoZSBzYXZpbmdzIGNvbnRyYWN0CgkgKiBzbyB0aGF0IG5vIG1vcmUgZGVwb3NpdHMgbWF5IGJlIG1hZGUuCgkgKi8KCWZ1bmN0aW9uIGxvY2soKSBvbmx5T3duZXIgewoJCWxvY2tlZCA9IHRydWU7Cgl9CgoJLyoqCgkgKiBTdGFydHMgdGhlIGRpc3RyaWJ1dGlvbiBvZiBzYXZpbmdzLCBpdCBzaG91bGQgYmUgY2FsbGVkCgkgKiBhZnRlciBsb2NrKCksIG9uY2UgYWxsIG9mIHRoZSBib251cyB0b2tlbnMgYXJlIHNlbmQgdG8gdGhpcyBjb250cmFjdCwKCSAqIGFuZCBtdWx0aU1pbnQgaGFzIGJlZW4gY2FsbGVkLgoJICovCglmdW5jdGlvbiBzdGFydCh1aW50IF9zdGFydEJsb2NrVGltZXN0YW1wKSBvbmx5T3duZXIgaW5pdGlhbGl6ZWQgcHJlU3RhcnQgewoJCXN0YXJ0QmxvY2tUaW1lc3RhbXAgPSBfc3RhcnRCbG9ja1RpbWVzdGFtcDsKCQl1aW50MjU2IHRva2VuQmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKCQl0b3RhbCA9IHRva2VuQmFsYW5jZTsKCQlyZW1haW5kZXIgPSB0b2tlbkJhbGFuY2U7Cgl9CgoJLyoqCgkgKiBDaGVjayB3aXRoZHJhd2FsIGlzIGxpdmUsIHVzZWZ1bCBmb3IgY2hlY2tpbmcgd2hldGhlcgoJICogdGhlIHNhdmluZ3MgY29udHJhY3QgaXMgImxpdmUiLCB3aXRoZHJhd2FsIGVuYWJsZWQsIHN0YXJ0ZWQuCgkgKi8KCWZ1bmN0aW9uIGlzU3RhcnRlZCgpIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewoJCXJldHVybiBsb2NrZWQgJiYgc3RhcnRCbG9ja1RpbWVzdGFtcCAhPSAwOwoJfQoKCS8vIGlmIHNvbWVvbmUgYWNjaWRlbnRhbGx5IHRyYW5zZmVycyB0b2tlbnMgdG8gdGhpcyBjb250cmFjdCwKCS8vIHRoZSBvd25lciBjYW4gcmV0dXJuIHRoZW0gYXMgbG9uZyBhcyBkaXN0cmlidXRpb24gaGFzbid0IHN0YXJ0ZWQKCgkvKioKCSAqIFVzZWQgdG8gcmVmdW5kIHVzZXJzIHdobyBhY2NpZGVudGFseSB0cmFuc2ZlcnJlZCB0b2tlbnMgdG8gdGhpcwoJICogY29udHJhY3QsIG9ubHkgYXZhaWxhYmxlIGJlZm9yZSBjb250cmFjdCBpcyBsb2NrZWQKCSAqLwoJZnVuY3Rpb24gcmVmdW5kVG9rZW5zKGFkZHJlc3MgYWRkciwgdWludCBhbW91bnQpIG9ubHlPd25lciBwcmVMb2NrIHsKCQl0b2tlbi50cmFuc2ZlcihhZGRyLCBhbW91bnQpOwoJfQoKCgkvKioKCSAqIFVwZGF0ZSB0aGUgdG90YWwgYmFsYW5jZSwgdG8gYmUgY2FsbGVkIGluIGNhc2Ugb2Ygc3Vic2VxdWVudCBzYWxlcy4gVXBkYXRlcwoJICogdGhlIHRvdGFsIHJlY29yZGVkIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0IGJ5IHRoZSBkaWZmZXJlbmNlIGluIGV4cGVjdGVkCgkgKiByZW1haW5kZXIgYW5kIHRoZSBjdXJyZW50IGJhbGFuY2UuIFRoaXMgbWVhbnMgYW55IHBvc2l0aXZlIGRpZmZlcmVuY2Ugd2lsbAoJICogYmUgInJlY29yZGVkIiBpbnRvIHRoZSBjb250cmFjdCwgYW5kIGRpc3RyaWJ1dGVkIHdpdGhpbiB0aGUgcmVtYWluaW5nCgkgKiBtb250aHMgb2YgdGhlIFRSUy4KCSAqLwoJZnVuY3Rpb24gdXBkYXRlVG90YWwoKSBvbmx5T3duZXIgcG9zdExvY2sgewoJCXVpbnQgY3VycmVudCA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKCQlyZXF1aXJlKGN1cnJlbnQgPj0gcmVtYWluZGVyKTsgLy8gZm9yIHNhbml0eQoKCQl1aW50IGRpZmZlcmVuY2UgPSAoY3VycmVudCAtIHJlbWFpbmRlcik7CgkJdG90YWwgKz0gZGlmZmVyZW5jZTsKCQlyZW1haW5kZXIgPSBjdXJyZW50OwoJfQoKCS8qKgoJICogQ2FsY3VsYXRlcyB0aGUgbW9udGhseSBwZXJpb2QsIHN0YXJ0aW5nIGFmdGVyIHRoZSBzdGFydEJsb2NrVGltZXN0YW1wLAoJICogcGVyaW9kQXQgd2lsbCByZXR1cm4gMCBmb3IgYWxsIHRpbWVzdGFtcHMgYmVmb3JlIHN0YXJ0QmxvY2tUaW1lc3RhbXAuCgkgKgoJICogVGhlcmVmb3JlIHBlcmlvZCAwIGlzIHRoZSByYW5nZSBvZiB0aW1lIGluIHdoaWNoIHdlIGhhdmUgY2FsbGVkIHN0YXJ0KCksCgkgKiBidXQgaGF2ZSBub3QgeWV0IHBhc3NlZCBzdGFydEJsb2NrVGltZXN0YW1wLiBQZXJpb2QgMSBpcyB0aGUKCSAqIGZpcnN0IG1vbnRobHkgcGVyaW9kLCBhbmQgc28tZm9ydGggYWxsIHRoZSB3YXkgdW50aWwgdGhlIGxhc3QKCSAqIHBlcmlvZCA9PSBwZXJpb2RzLgoJICoKCSAqIE5PVEU6IG5vdCBndWFyZGVkIHNpbmNlIG5vIHN0YXRlIG1vZGlmaWNhdGlvbnMgYXJlIG1hZGUuIEhvd2V2ZXIsCgkgKiBpdCB3aWxsIHJldHVybiBpbnZhbGlkIGRhdGEgYmVmb3JlIHRoZSBwb3N0U3RhcnQgc3RhdGUuIEl0IGlzCgkgKiB1cCB0byB0aGUgdXNlciB0byBtYW51YWxseSBjaGVjayB0aGF0IHRoZSBjb250cmFjdCBpcyBpbgoJICogcG9zdFN0YXJ0IHN0YXRlLgoJICovCglmdW5jdGlvbiBwZXJpb2RBdCh1aW50IF9ibG9ja1RpbWVzdGFtcCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CgkJLyoqCgkJICogTG93ZXIgYm91bmQsIGNvbnNpZGVyIHBlcmlvZCAwIHRvIGJlIHRoZSB0aW1lIGJldHdlZW4KCQkgKiBzdGFydCgpIGFuZCBzdGFydEJsb2NrVGltZXN0YW1wCgkJICovCgkJaWYgKHN0YXJ0QmxvY2tUaW1lc3RhbXAgPiBfYmxvY2tUaW1lc3RhbXApCgkJCXJldHVybiAwOwoKCQkvKioKCQkgKiBDYWxjdWxhdGUgdGhlIGFwcHJvcHJpYXRlIHBlcmlvZCwgYW5kIHNldCBhbiB1cHBlciBib3VuZCBvZgoJCSAqIHBlcmlvZHMgLSAxLgoJCSAqLwoJCXVpbnQgcCA9ICgoX2Jsb2NrVGltZXN0YW1wIC0gc3RhcnRCbG9ja1RpbWVzdGFtcCkgLyBpbnRlcnZhbFNlY3MpICsgMTsKCQlpZiAocCA+IHBlcmlvZHMpCgkJCXAgPSBwZXJpb2RzOwoJCXJldHVybiBwOwoJfQoKCS8vIHdoYXQgd2l0aGRyYXdhbCBwZXJpb2QgYXJlIHdlIGluPwoJLy8gcmV0dXJucyB0aGUgcGVyaW9kIG51bWJlciBmcm9tIFswLCBwZXJpb2RzKQoJZnVuY3Rpb24gcGVyaW9kKCkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CgkJcmV0dXJuIHBlcmlvZEF0KGJsb2NrLnRpbWVzdGFtcCk7Cgl9CgoJLy8gZGVwb3NpdCB5b3VyIHRva2VucyB0byBiZSBzYXZlZAoJLy8KCS8vIHRoZSBkZXNwb3NpdG9yIG11c3QgaGF2ZSBhcHByb3ZlKCknZCB0aGUgdG9rZW5zCgkvLyB0byBiZSB0cmFuc2ZlcnJlZCBieSB0aGlzIGNvbnRyYWN0CglmdW5jdGlvbiBkZXBvc2l0KHVpbnQgdG9rZW5zKSBvbmx5T3duZXIgbm90TnVsbGlmaWVkIHsKCQlkZXBvc2l0VG8obXNnLnNlbmRlciwgdG9rZW5zKTsKCX0KCgoJZnVuY3Rpb24gZGVwb3NpdFRvKGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQgdG9rZW5zKSBvbmx5T3duZXIgcHJlTG9jayBub3ROdWxsaWZpZWQgewoJCXJlcXVpcmUodG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIHRva2VucykpOwoJICAgIGRlcG9zaXRlZFtiZW5lZmljaWFyeV0gKz0gdG9rZW5zOwoJCXRvdGFsZnYgKz0gdG9rZW5zOwoJCURlcG9zaXQoYmVuZWZpY2lhcnksIHRva2Vucyk7Cgl9CgoJLy8gY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIG93bmVyOiBkZXBvc2l0IG9uIGJlaGFsZiBvZiBtYW55CglmdW5jdGlvbiBidWxrRGVwb3NpdFRvKHVpbnQyNTZbXSBiaXRzKSBvbmx5T3duZXIgewoJCXVpbnQyNTYgbG9tYXNrID0gKDEgPDwgOTYpIC0gMTsKCQlmb3IgKHVpbnQgaT0wOyBpPGJpdHMubGVuZ3RoOyBpKyspIHsKCQkJYWRkcmVzcyBhID0gYWRkcmVzcyhiaXRzW2ldPj45Nik7CgkJCXVpbnQgdmFsID0gYml0c1tpXSZsb21hc2s7CgkJCWRlcG9zaXRUbyhhLCB2YWwpOwoJCX0KCX0KCgkvLyB3aXRoZHJhdyB3aXRoZHJhd3MgdG9rZW5zIHRvIHRoZSBzZW5kZXIKCS8vIHdpdGhkcmF3IGNhbiBiZSBjYWxsZWQgYXQgbW9zdCBvbmNlIHBlciByZWRlbXB0aW9uIHBlcmlvZAoJZnVuY3Rpb24gd2l0aGRyYXcoKSBub3ROdWxsaWZpZWQgcmV0dXJucyhib29sKSB7CgkJcmV0dXJuIHdpdGhkcmF3VG8obXNnLnNlbmRlcik7Cgl9CgoJLyoqCgkgKiBDYWxjdWxhdGVzIHRoZSBmcmFjdGlvbiBvZiB0b3RhbCAob25lLW9mZiArIG1vbnRobHkpIHdpdGhkcmF3YWJsZQoJICogZ2l2ZW4gdGhlIGN1cnJlbnQgdGltZXN0YW1wLiBObyBndWFyZHMgZHVlIHRvIGZ1bmN0aW9uIGJlaW5nIGNvbnN0YW50LgoJICogV2lsbCBvdXRwdXQgaW52YWxpZCBkYXRhIHVudGlsIHRoZSBwb3N0U3RhcnQgc3RhdGUuIEl0IGlzIHVwIHRvIHRoZSB1c2VyCgkgKiB0byBtYW51YWxseSBjb25maXJtIGNvbnRyYWN0IGlzIGluIHBvc3RTdGFydCBzdGF0ZS4KCSAqLwoJZnVuY3Rpb24gYXZhaWxhYmxlRm9yV2l0aGRyYXdhbEF0KHVpbnQyNTYgYmxvY2tUaW1lc3RhbXApIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKCQkvKioKCQkgKiBDYWxjdWxhdGUgdGhlIHRvdGFsIHdpdGhkcmF3YWJsZSwgZ2l2aW5nIGEgbnVtZXJhdG9yIHdpdGggcmFuZ2U6CgkJICogWzAuMjUgKiAxMCAqKiAxOCwgMSAqIDEwICoqIDE4XQoJCSAqLwoJCXJldHVybiAoKHQwc3BlY2lhbCArIHBlcmlvZEF0KGJsb2NrVGltZXN0YW1wKSkgKiBwcmVjaXNpb24pIC8gKHQwc3BlY2lhbCArIHBlcmlvZHMpOwoJfQoKCS8qKgoJICogQnVzaW5lc3MgbG9naWMgb2YgX3dpdGhkcmF3VG8sIHRoZSBjb2RlIGlzIHNlcGFyYXRlZCB0aGlzIHdheSBtYWlubHkgZm9yCgkgKiB0ZXN0aW5nLiBXZSBjYW4gaW5qZWN0IGFuZCB0ZXN0IHBhcmFtZXRlcnMgZnJlZWx5IHdpdGhvdXQgd29ycnlpbmcgYWJvdXQgdGhlCgkgKiBibG9ja2NoYWluIG1vZGVsLgoJICoKCSAqIE5PVEU6IFNpbmNlIGZ1bmN0aW9uIGlzIGNvbnN0YW50LCBubyBndWFyZHMgYXJlIGFwcGxpZWQuIFRoaXMgZnVuY3Rpb24gd2lsbCBnaXZlCgkgKiBpbnZhbGlkIG91dHB1dHMgdW5sZXNzIGluIHBvc3RTdGFydCBzdGF0ZS4gSXQgaXMgdXAgdG8gdXNlciB0byBtYW51YWxseSBjaGVjawoJICogdGhhdCB0aGUgY29ycmVjdCBzdGF0ZSBpcyBnaXZlbiAoaXNTdGFydCgpID09IHRydWUpCgkgKi8KCWZ1bmN0aW9uIF93aXRoZHJhd1RvKHVpbnQgX2RlcG9zaXQsIHVpbnQgX3dpdGhkcmF3biwgdWludCBfYmxvY2tUaW1lc3RhbXAsIHVpbnQgX3RvdGFsKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CgkJdWludDI1NiBmcmFjdGlvbiA9IGF2YWlsYWJsZUZvcldpdGhkcmF3YWxBdChfYmxvY2tUaW1lc3RhbXApOwoKCQkvKioKCQkgKiBUaGVyZSBhcmUgY29uY2VybnMgdGhhdCB0aGUgbXVsdGlwbGljYXRpb24gY291bGQgcG9zc2libHkKCQkgKiBvdmVyZmxvdywgaG93ZXZlciB0aGlzIHNob3VsZCBub3QgYmUgdGhlIGNhc2UgaWYgd2UgY2FsY3VsYXRlCgkJICogdGhlIHVwcGVyIGJvdW5kIGJhc2VkIG9uIG91ciBrbm93biBwYXJhbWV0ZXJzOgoJCSAqCgkJICogTGV0cyBhc3N1bWUgdGhlIG1pbnRlZCB0b2tlbiBhbW91bnQgdG8gYmUgNTAwIG1pbGxpb24gKHJlYXNvbmFibGUpLAoJCSAqIGdpdmVuIGEgcHJlY2lzaW9uIG9mIDggZGVjaW1hbCBwbGFjZXMsIHdlIGdldDoKCQkgKiBkZXBvc2l0ZWRbYWRkcl0gPSA1ICogKDEwICoqIDgpICogKDEwICoqIDgpID0gNSAqICgxMCAqKiAxNikKCQkgKgoJCSAqIFRoZSBtYXggZm9yIGZyYWN0aW9uID0gMTAgKiogMTgsIGFuZCB0aGUgbWF4IGZvciB0b3RhbCBpcwoJCSAqIGFsc28gNSAqICgxMCAqKiAxNikuCgkJICoKCQkgKiBUaGVyZWZvcmU6CgkJICogZGVwb3NpdGVkW2FkZHJdICogZnJhY3Rpb24gKiB0b3RhbCA9IDIuNSAqICgxMCAqKiA1MSkKCQkgKgoJCSAqIFRoZSBtYXhpbXVtIGZvciBhIHVpbnQyNTYgaXMgPSAxLjE1ICogKDEwICoqIDc3KQoJCSAqLwoJCXVpbnQyNTYgd2l0aGRyYXdhYmxlID0gKChfZGVwb3NpdCAqIGZyYWN0aW9uICogX3RvdGFsKSAvIHRvdGFsZnYpIC8gcHJlY2lzaW9uOwoKCQkvLyBjaGVjayB0aGF0IHdlIGNhbiB3aXRoZHJhdyBzb21ldGhpbmcKCQlpZiAod2l0aGRyYXdhYmxlID4gX3dpdGhkcmF3bikgewoJCQlyZXR1cm4gd2l0aGRyYXdhYmxlIC0gX3dpdGhkcmF3bjsKCQl9CgkJcmV0dXJuIDA7Cgl9CgoJLyoqCgkgKiBQdWJsaWMgZmFjaW5nIHdpdGhkcmF3VG8sIGluamVjdHMgYnVzaW5lc3MgbG9naWMgd2l0aAoJICogdGhlIGNvcnJlY3QgbW9kZWwuCgkgKi8KCWZ1bmN0aW9uIHdpdGhkcmF3VG8oYWRkcmVzcyBhZGRyKSBwb3N0U3RhcnQgbm90TnVsbGlmaWVkIHJldHVybnMgKGJvb2wpIHsKCQl1aW50IF9kID0gZGVwb3NpdGVkW2FkZHJdOwoJCXVpbnQgX3cgPSB3aXRoZHJhd25bYWRkcl07CgoJCXVpbnQgZGlmZiA9IF93aXRoZHJhd1RvKF9kLCBfdywgYmxvY2sudGltZXN0YW1wLCB0b3RhbCk7CgoJCS8vIG5vIHdpdGhkcmF3YWwgY291bGQgYmUgbWFkZQoJCWlmIChkaWZmID09IDApIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJLy8gY2hlY2sgdGhhdCB3ZSBjYW5ub3Qgd2l0aGRyYXcgbW9yZSB0aGFuIG1heAoJCXJlcXVpcmUoKGRpZmYgKyBfdykgPD0gKChfZCAqIHRvdGFsKSAvIHRvdGFsZnYpKTsKCgkJLy8gdHJhbnNmZXIgYW5kIGluY3JlbWVudAoJCXJlcXVpcmUodG9rZW4udHJhbnNmZXIoYWRkciwgZGlmZikpOwoKCQl3aXRoZHJhd25bYWRkcl0gKz0gZGlmZjsKCQlyZW1haW5kZXIgLT0gZGlmZjsKCQlXaXRoZHJhd3MoYWRkciwgZGlmZik7CgkJcmV0dXJuIHRydWU7Cgl9CgoJLy8gZm9yY2Ugd2l0aGRyYXdhbCB0byBtYW55IGFkZHJlc3NlcwoJZnVuY3Rpb24gYnVsa1dpdGhkcmF3KGFkZHJlc3NbXSBhZGRycykgbm90TnVsbGlmaWVkIHsKCQlmb3IgKHVpbnQgaT0wOyBpPGFkZHJzLmxlbmd0aDsgaSsrKQoJCQl3aXRoZHJhd1RvKGFkZHJzW2ldKTsKCX0KCgkvLyBDb2RlIG9mZiB0aGUgY2hhaW4gaW5mb3JtcyB0aGlzIGNvbnRyYWN0IGFib3V0CgkvLyB0b2tlbnMgdGhhdCB3ZXJlIG1pbnRlZCB0byBpdCBvbiBiZWhhbGYgb2YgYSBkZXBvc2l0b3IuCgkvLwoJLy8gTm90ZTogdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBoZXJlIGlzIGtub3duIHRvIE5ldyBBbGNoZW15J3MKCS8vIHRvb2xpbmcsIHdoaWNoIGlzIHdoeSBpdCBpcyBhcmd1YWJseSBtaXNuYW1lZC4KCXVpbnQgcHVibGljIG1pbnRpbmdOb25jZTsKCWZ1bmN0aW9uIG11bHRpTWludCh1aW50IG5vbmNlLCB1aW50MjU2W10gYml0cykgb25seU93bmVyIHByZUxvY2sgewoKCQlpZiAobm9uY2UgIT0gbWludGluZ05vbmNlKSByZXR1cm47CgkJbWludGluZ05vbmNlICs9IDE7CgkJdWludDI1NiBsb21hc2sgPSAoMSA8PCA5NikgLSAxOwoJCXVpbnQgc3VtID0gMDsKCQlmb3IgKHVpbnQgaT0wOyBpPGJpdHMubGVuZ3RoOyBpKyspIHsKCQkJYWRkcmVzcyBhID0gYWRkcmVzcyhiaXRzW2ldPj45Nik7CgkJCXVpbnQgdmFsdWUgPSBiaXRzW2ldJmxvbWFzazsKCQkJZGVwb3NpdGVkW2FdICs9IHZhbHVlOwoJCQlzdW0gKz0gdmFsdWU7CgkJCURlcG9zaXQoYSwgdmFsdWUpOwoJCX0KCQl0b3RhbGZ2ICs9IHN1bTsKCX0KfQ=='.
	

]
