Class {
	#name : #SRT0498b182c3e6e05bd6c81f7da8290034a9fabe79,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0498b182c3e6e05bd6c81f7da8290034a9fabe79 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBVdGlscyB7CgogICAgLyoqCiAgICBAZGV2IEhlbHBlciBmdW5jdGlvbiwgZGV0ZXJtaW5lcyBpZiBhIGdpdmVuIGFkZHJlc3MgaXMgYW4gYWNjb3VudCBvciBhIGNvbnRyYWN0LgogICAgQHJldHVybiBUcnVlIGlmIGFkZHJlc3MgaXMgYSBjb250cmFjdCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHVpbnQgc2l6ZTsKCiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChfYWRkciA9PSAwKSA/IGZhbHNlIDogc2l6ZSA+IDA7CiAgICB9Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgQ2xhaW1hYmxlCiAqIEBkZXYgRXh0ZW5zaW9uIGZvciB0aGUgT3duYWJsZSBjb250cmFjdCwgd2hlcmUgdGhlIG93bmVyc2hpcCBuZWVkcyB0byBiZSBjbGFpbWVkLgogKiBUaGlzIGFsbG93cyB0aGUgbmV3IG93bmVyIHRvIGFjY2VwdCB0aGUgdHJhbnNmZXIuCiAqLwpjb250cmFjdCBDbGFpbWFibGUgaXMgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgcGVuZGluZ093bmVyOwoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgcGVuZGluZ093bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlQZW5kaW5nT3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcGVuZGluZ093bmVyKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byBzZXQgdGhlIHBlbmRpbmdPd25lciBhZGRyZXNzLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIHBlbmRpbmdPd25lciA9IG5ld093bmVyOwogIH0KCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIHBlbmRpbmdPd25lciBhZGRyZXNzIHRvIGZpbmFsaXplIHRoZSB0cmFuc2Zlci4KICAgKi8KICBmdW5jdGlvbiBjbGFpbU93bmVyc2hpcCgpIG9ubHlQZW5kaW5nT3duZXIgewogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIHBlbmRpbmdPd25lcik7CiAgICBvd25lciA9IHBlbmRpbmdPd25lcjsKICAgIHBlbmRpbmdPd25lciA9IDB4MDsKICB9Cn0KCi8qKgpAdGl0bGUgQnVybmFibGUKQGRldiBCdXJuYWJsZSBjdXN0b20gaW50ZXJmYWNlLCBzaG91bGQgYWxsb3cgZXh0ZXJuYWwgY29udHJhY3RzIHRvIGJ1cm4gdG9rZW5zIG9uIGNlcnRhaW4gY29uZGl0aW9ucy4KICovCmNvbnRyYWN0IEJ1cm5hYmxlIHsKCiAgICBldmVudCBCdXJuKGFkZHJlc3Mgd2hvLCB1aW50MjU2IGFtb3VudCk7CgogICAgbW9kaWZpZXIgb25seUJ1cm5lcnMgewogICAgICAgIHJlcXVpcmUoaXNCdXJuZXIobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICB9CiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgdGFyZ2V0LCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgb25seUJ1cm5lcnMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBzZXRCdXJuZXIoYWRkcmVzcyB3aG8sIGJvb2wgYXV0aCkgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBpc0J1cm5lcihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7Cn0KCi8qKgpAdGl0bGUgTG9ja2FibGUKQGRldiBMb2NrYWJsZSBjdXN0b20gaW50ZXJmYWNlLCBzaG91bGQgYWxsb3cgZXh0ZXJuYWwgY29udHJhY3RzIHRvIGxvY2sgYWNjb3VudHMgb24gY2VydGFpbiBjb25kaXRpb25zLgogKi8KY29udHJhY3QgTG9ja2FibGUgewoKICAgIHVpbnQyNTYgcHVibGljIGxvY2tFeHBpcmF0aW9uOwoKICAgIC8qKgogICAgQGRldiBDb25zdHJ1Y3RvcgogICAgQHBhcmFtIF9sb2NrRXhwaXJhdGlvbiBsb2NrIGV4cGlyYXRpb24gZGF0ZXRpbWUgaW4gVU5JWCB0aW1lCiAgICAgKi8KICAgIGZ1bmN0aW9uIExvY2thYmxlKHVpbnQyNTYgX2xvY2tFeHBpcmF0aW9uKSB7CiAgICAgICAgbG9ja0V4cGlyYXRpb24gPSBfbG9ja0V4cGlyYXRpb247CiAgICB9CgogICAgZnVuY3Rpb24gaXNMb2NrZWQoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9CgovKioKQHRpdGxlIEVSQzIwIGludGVyZmFjZQpAZGV2IFN0YW5kYXJkIEVSQzIwIEludGVyZmFjZS4KKi8KY29udHJhY3QgRVJDMjAgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKQHRpdGxlIExXRlRva2VuCkBkZXYgRVJDMjAgc3RhbmRhcmQuCkBkZXYgRXh0cmEgZmVhdHVyZXM6IEJ1cm5hYmxlIGFuZCBMb2NrYWJsZSB1bmRlciBjZXJ0YWluIGNvbmRpdGlvbnMuCkBkZXYgY29udHJhY3Qgb3duZXIgaXMgc2V0IHRvIG1zZy5zZW5kZXIsIGxvY2tFeHBpcmF0aW9uIGZvciBkZXZzIHNldCB0bzogMTUzNTc2MDAwMCB8fCBTYXR1cmRheSwgMDEtU2VwLTE4IDAwOjAwOjAwIFVUQwogKi8KY29udHJhY3QgTFdGVG9rZW4gaXMgRVJDMjAsIEJ1cm5hYmxlLCBMb2NrYWJsZSgxNTM1NzYwMDAwKSwgQ2xhaW1hYmxlIHsKdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8gU25hcHNob3Qgb2YgQWNjb3VudCBiYWxhbmNlIGF0IHNwZWNpZmljIGJsb2NrCiAgICBzdHJ1Y3QgU25hcHNob3QgewogICAgICAgIHVpbnQyNTYgYmxvY2s7CiAgICAgICAgdWludDI1NiBiYWxhbmNlOwogICAgfQoKICAgIHN0cnVjdCBBY2NvdW50IHsKICAgICAgICB1aW50MjU2IGJhbGFuY2U7CiAgICAgICAgU25hcHNob3RbXSBoaXN0b3J5OyAvLyBoaXN0b3J5IG9mIHNuYXBzaG90cwogICAgICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBhbGxvd2VkOwogICAgICAgIGJvb2wgaXNTZXQ7CiAgICB9CgogICAgYWRkcmVzc1tdIGFjY291bnRzTGlzdDsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQWNjb3VudCkgYWNjb3VudHM7CgogICAgYm9vbCBwdWJsaWMgbWFpbnRlbmFuY2U7CgogICAgLy8gQlVSTiBTRVRUSU5HUwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGJ1cm5lcnM7IC8vIGNvbnRyYWN0cyBhdXRob3JpemVkIHRvIGJsb2NrIHRva2VucwogICAgYm9vbCBwdWJsaWMgYnVybkFsbG93ZWQ7CgogICAgLy8gTE9DSyBTRVRUSU5HUwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGxvY2tlZDsgLy9sb2NrZWQgdXNlcnMgYWRkcmVzc2VzCgogICAgLy8gQ09TTUVUSUMgVEhJTkdTCiAgICBzdHJpbmcgcHVibGljIG5hbWUgPSAiTFdGIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIkxXRiI7CiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAicmVsZWFzZS0xLjEiOwoKICAgIHVpbnQyNTYgcHVibGljIGRlY2ltYWxzID0gMjsKCiAgICAvKioKICAgIEBkZXYgVGhyb3dzIGlmIHRva2VuIGlzIHVuZGVyIG1haW50ZW5hbmNlLgogICAgICovCiAgICBtb2RpZmllciBkaXNhYmxlZEluTWFpbnRlbmFuY2UoKSB7CiAgICAgICAgaWYgKG1haW50ZW5hbmNlKQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgQGRldiBUaHJvd3MgaWYgdG9rZW4gaXMgbm90IHVuZGVyIG1haW50ZW5hbmNlLgogICAgICovCiAgICBtb2RpZmllciBvbmx5VW5kZXJNYWludGVuYW5jZSgpIHsKICAgICAgICBpZiAoIW1haW50ZW5hbmNlKQogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgQGRldiBSZWdpc3RlcnMgdGhlIHJlY2lwaWVudCBhY2NvdW50IHdoZW4gdG9rZW5zIGFyZSBzZW50IHRvIGFuIHVucmVnaXN0ZXJlZCBhY2NvdW50LgogICAgQHBhcmFtIF9yZWNpcGllbnQgdGhlIHJlY2lwaWVudCBvZiB0aGUgdHJhbnNmZXIKICAgICAqLwogICAgbW9kaWZpZXIgdHJhY2tOZXdVc2VycyAoYWRkcmVzcyBfcmVjaXBpZW50KSB7CiAgICAgICAgaWYgKCFhY2NvdW50c1tfcmVjaXBpZW50XS5pc1NldCkgewogICAgICAgICAgICBhY2NvdW50c1tfcmVjaXBpZW50XS5pc1NldCA9IHRydWU7CiAgICAgICAgICAgIGFjY291bnRzTGlzdC5wdXNoKF9yZWNpcGllbnQpOwogICAgICAgIH0KICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgQGRldiBUaGUgY29uc3RydWN0b3Igc2V0cyB0aGUgaW5pdGlhbCBiYWxhbmNlIHRvIDMwIG1pbGxpb24gdG9rZW5zLgogICAgQGRldiAyNyBtaWxsaW9uIGFzc2lnbmVkIHRvIHRoZSBjb250cmFjdCBvd25lci4KICAgIEBkZXYgMyBtaWxsaW9uIHJlc2VydmVkIGFuZCBsb2NrZWQuIChleGNlcHQgYm91bnR5KQogICAgQGRldiBIb2xkZXJzIGhpc3RvcnkgaXMgdXBkYXRlZCBmb3IgZGF0YSBpbnRlZ3JpdHkuCiAgICBAZGV2IEJ1cm4gZnVuY3Rpb25hbGl0eSBhcmUgZW5hYmxlZCBieSBkZWZhdWx0LgogICAgICovCiAgICBmdW5jdGlvbiBMV0ZUb2tlbigpIHsKICAgICAgICB0b3RhbFN1cHBseSA9IDMwICogKDEwKio2KSAqICgxMCoqZGVjaW1hbHMpOwoKICAgICAgICBidXJuQWxsb3dlZCA9IHRydWU7CiAgICAgICAgbWFpbnRlbmFuY2UgPSBmYWxzZTsKCiAgICAgICAgcmVxdWlyZShfc2V0dXAoMHg5MjdEYzlGMTUyMENBMjIzNzYzOEQwRDNjNjkxMGMxNEQ5YTI4NUE4LCAyNzAwMDAwMDAwLCBmYWxzZSkpOwoKICAgICAgICByZXF1aXJlKF9zZXR1cCgweDdBRTcxNTVmRjI4MEQ1ZGE1MjNDRERlMzg1NWIyMTJBODM4MUY5RTgsIDMwMDAwMDAwLCBmYWxzZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4Nzk2ZDUwN0E4MEIxM2M0NTVjMkMxRDEyMWVERTRiY2NjYTU5MjI0QywgMjYzMDAwMDAwLCB0cnVlKSk7CgogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4RDc3ZDYyMEVDOTc3NDI5NWFkODI2M2NCYzU0OTc4OUVFMzlDMEJDMCwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4NTc0QjM1ZUM1NjUwQkUwYUMyMTdhZjlBRkNmZTFjN2EzRmYwQmVjRCwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4N2M1YTYxZjM0NTEzOTY1QUE4RUMwOTAwMTE3MjFhMGIwQTlkNEQzYSwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4MGNEQmIwM0REMkU4MjI2QTZjM2E1NDA4MUU5Mzc1MEI0Zjg1REI5MiwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4MDNiNmNGNEE2OWZGMzA2QjNkZjlCOUNlREI2RGM0RUQ4ODAzY0JBNywgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4ZTJmN0ExMjE4RTVkNGEzNjJEMWJlZThkMmVkYTJjZDI4NWFBRTg3QSwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgICAgIHJlcXVpcmUoX3NldHVwKDB4QWNjZURFMmVGRDI3NjU1MjA5NTJCN0NiNzA0MDZBNDNGQzE3ZTRmYiwgMTAwMDAwMCwgdHJ1ZSkpOwogICAgfQoKICAgIC8qKgogICAgQHJldHVybiBhY2NvdW50c0xpc3QgbGVuZ3RoCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFjY291bnRzTGlzdExlbmd0aCgpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNMaXN0Lmxlbmd0aDsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgR2V0cyB0aGUgYWRkcmVzcyBvZiBhbnkgYWNjb3VudCBpbiAnYWNjb3VudExpc3QnLgogICAgQHBhcmFtIF9pbmRleCBUaGUgaW5kZXggdG8gcXVlcnkgdGhlIGFkZHJlc3Mgb2YKICAgIEByZXR1cm4gQW4gYWRkcmVzcyBwb2ludGluZyB0byBhIHJlZ2lzdGVyZWQgYWNjb3VudAogICAgKi8KICAgIGZ1bmN0aW9uIGdldEFjY291bnRBZGRyZXNzKHVpbnQyNTYgX2luZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzTGlzdFtfaW5kZXhdOwogICAgfQoKICAgIC8qKgogICAgQGRldiBDaGVja3MgaWYgYW4gYWNjb3VudHMgaXMgcmVnaXN0ZXJlZC4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byBjaGVjawogICAgQHJldHVybiBBIGJvb2wgc2V0IHRydWUgaWYgdGhlIGFjY291bnQgaXMgcmVnaXN0ZXJlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzU2V0KGFkZHJlc3MgX2FkZHJlc3MpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYWNjb3VudHNbX2FkZHJlc3NdLmlzU2V0OwogICAgfQoKICAgIC8qKgogICAgQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBhdCB0aGUgZmlyc3QgYmxvY2sgbWlub3Igb3IgZXF1YWwgdGhlIHNwZWNpZmllZCBibG9jawogICAgQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YKICAgIEBwYXJhbSBfYmxvY2sgVGhlIGJsb2NrCiAgICBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzIGF0IHRoZSBzcGVjaWZpZWQgYmxvY2suCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZUF0KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9ibG9jaykgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgdWludDI1NiBpID0gYWNjb3VudHNbX293bmVyXS5oaXN0b3J5Lmxlbmd0aDsKICAgICAgICBkbyB7CiAgICAgICAgICAgIGktLTsKICAgICAgICB9IHdoaWxlIChpID4gMCAmJiBhY2NvdW50c1tfb3duZXJdLmhpc3RvcnlbaV0uYmxvY2sgPiBfYmxvY2spOwogICAgICAgIHVpbnQyNTYgbWF0Y2hpbmdCbG9jayA9IGFjY291bnRzW19vd25lcl0uaGlzdG9yeVtpXS5ibG9jazsKICAgICAgICB1aW50MjU2IG1hdGNoaW5nQmFsYW5jZSA9IGFjY291bnRzW19vd25lcl0uaGlzdG9yeVtpXS5iYWxhbmNlOwogICAgICAgIHJldHVybiAoaSA9PSAwICYmIG1hdGNoaW5nQmxvY2sgPiBfYmxvY2spID8gMCA6IG1hdGNoaW5nQmFsYW5jZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgQXV0aG9yaXplZCBjb250cmFjdHMgY2FuIGJ1cm4gdG9rZW5zLgogICAgQHBhcmFtIF9hbW91bnQgUXVhbnRpdHkgb2YgdG9rZW5zIHRvIGJ1cm4KICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQyNTYgX2Ftb3VudCkgb25seUJ1cm5lcnMgZGlzYWJsZWRJbk1haW50ZW5hbmNlIGV4dGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGJ1cm5BbGxvd2VkKTsKCiAgICAgICAgdmFyIF9iYWxhbmNlID0gYWNjb3VudHNbX2FkZHJlc3NdLmJhbGFuY2U7CiAgICAgICAgYWNjb3VudHNbX2FkZHJlc3NdLmJhbGFuY2UgPSBfYmFsYW5jZS5zdWIoX2Ftb3VudCk7CgogICAgICAgIC8vIHVwZGF0ZSBoaXN0b3J5IHdpdGggcmVjZW50IGJ1cm4KICAgICAgICByZXF1aXJlKF91cGRhdGVIaXN0b3J5KF9hZGRyZXNzKSk7CgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF9hbW91bnQpOwogICAgICAgIEJ1cm4oX2FkZHJlc3MsX2Ftb3VudCk7CiAgICAgICAgVHJhbnNmZXIoX2FkZHJlc3MsIDB4MCwgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IFNlbmQgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBmcm9tIHNlbmRlciBhZGRyZXNzIHRvICdfcmVjaXBpZW50Jy4KICAgIEBwYXJhbSBfcmVjaXBpZW50IGFkZHJlc3MgcmVjZWl2aW5nIHRva2VucwogICAgQHBhcmFtIF9hbW91bnQgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF9yZWNpcGllbnQsIHVpbnQyNTYgX2Ftb3VudCkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoIWlzTG9ja2VkKG1zZy5zZW5kZXIpKTsKICAgICAgICByZXR1cm4gX3RyYW5zZmVyKG1zZy5zZW5kZXIsX3JlY2lwaWVudCxfYW1vdW50KTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAgQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICBAcGFyYW0gX2Ftb3VudCB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAgQHJldHVybiBBIGJvb2wgc2V0IHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc0xvY2tlZChfZnJvbSkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICB2YXIgX2FsbG93YW5jZSA9IGFjY291bnRzW19mcm9tXS5hbGxvd2VkW21zZy5zZW5kZXJdOwoKICAgICAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF9hbW91bnQpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gcmVxdWlyZSAoX2Ftb3VudCA8PSBfYWxsb3dhbmNlKTsKICAgICAgICBhY2NvdW50c1tfZnJvbV0uYWxsb3dlZFttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF9hbW91bnQpOwogICAgICAgIHJldHVybiBfdHJhbnNmZXIoX2Zyb20sIF90bywgX2Ftb3VudCk7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICAqLwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vICBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAgICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24KICAgICAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFjY291bnRzW21zZy5zZW5kZXJdLmFsbG93ZWRbX3NwZW5kZXJdID09IDApKTsKCiAgICAgICAgYWNjb3VudHNbbXNnLnNlbmRlcl0uYWxsb3dlZFtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAgICAgICBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICAgICB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMKICAgIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgdmFsdWUgd2hpY2ggd2lsbCBiZSBhZGRlZCBmcm9tIHRoZSBhbGxvd2VkIGJhbGFuY2UKICAgICovCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQyNTYgX2FsbG93YW5jZSA9IGFjY291bnRzW21zZy5zZW5kZXJdLmFsbG93ZWRbX3NwZW5kZXJdOwogICAgICAgIGFjY291bnRzW21zZy5zZW5kZXJdLmFsbG93ZWRbX3NwZW5kZXJdID0gX2FsbG93YW5jZS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhY2NvdW50c1ttc2cuc2VuZGVyXS5hbGxvd2VkW19zcGVuZGVyXSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAgICAgICBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAgICAgICB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMKICAgIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSB2YWx1ZSB3aGljaCB3aWxsIGJlIHN1YnRyYWN0ZWQgZnJvbSB0aGUgYWxsb3dlZCBiYWxhbmNlCiAgICBAcmV0dXJuIEEgYm9vbCBzZXQgdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UKICAgICovCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsIChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHVpbnQgb2xkVmFsdWUgPSBhY2NvdW50c1ttc2cuc2VuZGVyXS5hbGxvd2VkW19zcGVuZGVyXTsKICAgICAgICBhY2NvdW50c1ttc2cuc2VuZGVyXS5hbGxvd2VkW19zcGVuZGVyXSA9IChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpID8gMCA6IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWNjb3VudHNbbXNnLnNlbmRlcl0uYWxsb3dlZFtfc3BlbmRlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgQGRldiBTZXRzIGEgY29udHJhY3QgYXV0aG9yaXphdGlvbiB0byBidXJuIHRva2Vucy4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byBhdXRob3JpemUvZGVhdXRob3JpemUKICAgIEBwYXJhbSBfYXV0aCBUcnVlIGZvciBhdXRob3JpemF0aW9uLCBmYWxzZSBvdGhlcndpc2UKICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiBzZXRCdXJuZXIoYWRkcmVzcyBfYWRkcmVzcywgYm9vbCBfYXV0aCkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGJ1cm5BbGxvd2VkKTsKICAgICAgICBhc3NlcnQoVXRpbHMuaXNDb250cmFjdChfYWRkcmVzcykpOwogICAgICAgIGJ1cm5lcnNbX2FkZHJlc3NdID0gX2F1dGg7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgY29udHJhY3QgY2FuIGJ1cm4gdG9rZW5zLgogICAgQHBhcmFtIF9hZGRyZXNzIFRoZSBhZGRyZXNzIHRvIGNoZWNrCiAgICBAcmV0dXJuIEEgYm9vbCBzZXQgdHJ1ZSBpZiBhdXRob3JpemVkLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgZnVuY3Rpb24gaXNCdXJuZXIoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBidXJuQWxsb3dlZCA/IGJ1cm5lcnNbX2FkZHJlc3NdIDogZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IENoZWNrcyBpZiB0aGUgdG9rZW4gb3duZWQgYnkgdGhlIHByb3ZpZGVkIGFkZHJlc3MgYXJlIGxvY2tlZC4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byBjaGVjawogICAgQHJldHVybiBBIGJvb2wgc2V0IHRydWUgaWYgbG9ja2VkLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgZnVuY3Rpb24gaXNMb2NrZWQoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBub3cgPj0gbG9ja0V4cGlyYXRpb24gPyBmYWxzZSA6IGxvY2tlZFtfYWRkcmVzc107CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEZ1bmN0aW9uIHBlcm1hbmVudGx5IGRpc2FibGluZyAnYnVybigpJyBhbmQgJ3NldEJ1cm5lcigpJy4KICAgIEBkZXYgQWxyZWFkeSBidXJuZWQgdG9rZW5zIGFyZSBub3QgcmVjb3ZlcmFibGUuCiAgICBAZGV2IEVmZmVjdHMgb2YgdGhpcyB0cmFuc2FjdGlvbiBhcmUgaXJyZXZlcnNpYmxlLgogICAgQHJldHVybiBBIGJvb2wgc2V0IHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm5GZWF0dXJlRGVhY3RpdmF0aW9uKCkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGJ1cm5BbGxvd2VkKTsKICAgICAgICBidXJuQWxsb3dlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICAgQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBhY2NvdW50c1tfb3duZXJdLmJhbGFuY2U7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnRzW19vd25lcl0uYWxsb3dlZFtfc3BlbmRlcl07CiAgICB9CgogICAgLyoqCiAgICBAZGV2IFNldHMgdGhlIG1haW50ZW5hbmNlIG1vZGUuIER1cmluZyBtYWludGVuYW5jZSBvcGVyYXRpb25zIG1vZGlmeWluZyBiYWxhbmNlcyBhcmUgZnJvemVuLgogICAgQHBhcmFtIF9zdGF0ZSB0cnVlIGlmIG1haW50ZW5hbmNlIGlzIG9uLCBmYWxzZSBvdGhlcndpc2UKICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiBzZXRNYWludGVuYW5jZShib29sIF9zdGF0ZSkgb25seU93bmVyIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBtYWludGVuYW5jZSA9IF9zdGF0ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgTWFpbnRlbmFuY2UgZnVuY3Rpb24sIGlmIGFjY291bnRzTGlzdCBncm93cyB0b28gbG9uZyBiYWNrIGVuZCBjYW4gc2FmZWx5IGNsZWFuIHVudXNlZCBhY2NvdW50cwogICAgICAgIGFuZCBwdXNoIHRoZSByZW5ld2VkIGxpc3QgaW50byB0aGUgY29udHJhY3QuCiAgICBAZGV2IEFjY291bnRzIHJlbW92ZWQgZnJvbSB0aGUgbGlzdCBtdXN0IGJlIGRlYWN0aXZhdGVkIHdpdGggbWFpbnRlbmFuY2VEZWFjdGl2YXRlVXNlcihfdXNlcikKICAgIEBwYXJhbSBfYWNjb3VudHNMaXN0IEEgbGlzdCBjb250YWluaW5nIHRoZSBhY2NvdW50cycgYWRkcmVzc2VzCiAgICBAcmV0dXJuIEEgYm9vbCBzZXQgdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgZnVuY3Rpb24gbWFpbnRlbmFuY2VTZXRBY2NvdW50c0xpc3QoYWRkcmVzc1tdIF9hY2NvdW50c0xpc3QpIG9ubHlPd25lciBvbmx5VW5kZXJNYWludGVuYW5jZSByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWNjb3VudHNMaXN0ID0gX2FjY291bnRzTGlzdDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgTWFpbnRlbmFuY2UgZnVuY3Rpb24gcmVzZXJ2ZWQgdG8gYmFjayBlbmQsIHJlbW92ZXMgYW4gYWNjb3VudCBmcm9tIHRoZSBsaXN0LgogICAgQHJldHVybiBBIGJvb2wgc2V0IHRydWUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1haW50ZW5hbmNlRGVhY3RpdmF0ZVVzZXIoYWRkcmVzcyBfdXNlcikgb25seU93bmVyIG9ubHlVbmRlck1haW50ZW5hbmNlIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhY2NvdW50c1tfdXNlcl0uaXNTZXQgPSBmYWxzZTsKICAgICAgICBkZWxldGUgYWNjb3VudHNbX3VzZXJdLmhpc3Rvcnk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICBAZGV2IEF1eGlsaWFyeSBtZXRob2QgdXNlZCBpbiBjb25zdHJ1Y3RvciB0byByZXNlcnZlIHNvbWUgdG9rZW5zIGFuZCBsb2NrIHRoZW0gaW4gc29tZSBjYXNlcy4KICAgIEBwYXJhbSBfYWRkcmVzcyBUaGUgYWRkcmVzcyB0byBhc3NpZ24gdG9rZW5zCiAgICBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucwogICAgQHBhcmFtIF9sb2NrIFRydWUgdG8gbG9jayB1bnRpbCAnbG9ja0V4cGlyYXRpb24nLCBmYWxzZSB0byBub3QKICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiBfc2V0dXAoYWRkcmVzcyBfYWRkcmVzcywgdWludDI1NiBfYW1vdW50LCBib29sIF9sb2NrKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgbG9ja2VkW19hZGRyZXNzXSA9IF9sb2NrOwogICAgICAgIGFjY291bnRzW19hZGRyZXNzXS5iYWxhbmNlID0gX2Ftb3VudDsKICAgICAgICBhY2NvdW50c1tfYWRkcmVzc10uaXNTZXQgPSB0cnVlOwogICAgICAgIHJlcXVpcmUoX3VwZGF0ZUhpc3RvcnkoX2FkZHJlc3MpKTsKICAgICAgICBhY2NvdW50c0xpc3QucHVzaChfYWRkcmVzcyk7CiAgICAgICAgVHJhbnNmZXIodGhpcywgX2FkZHJlc3MsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgQGRldiBGdW5jdGlvbiBpbXBsZW1lbnRpbmcgdGhlIHNoYXJlZCBsb2dpYyBvZiAndHJhbnNmZXIoKScgYW5kICd0cmFuc2ZlckZyb20oKScKICAgIEBwYXJhbSBfZnJvbSBhZGRyZXNzIHNlbmRpbmcgdG9rZW5zCiAgICBAcGFyYW0gX3JlY2lwaWVudCBhZGRyZXNzIHJlY2VpdmluZyB0b2tlbnMKICAgIEBwYXJhbSBfYW1vdW50IHRva2VucyB0byBzZW5kCiAgICBAcmV0dXJuIEEgYm9vbCBzZXQgdHJ1ZSBpZiBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3JlY2lwaWVudCwgdWludDI1NiBfYW1vdW50KSBpbnRlcm5hbCBkaXNhYmxlZEluTWFpbnRlbmFuY2UgdHJhY2tOZXdVc2VycyhfcmVjaXBpZW50KSByZXR1cm5zIChib29sKSB7CgogICAgICAgIGFjY291bnRzW19mcm9tXS5iYWxhbmNlID0gYmFsYW5jZU9mKF9mcm9tKS5zdWIoX2Ftb3VudCk7CiAgICAgICAgYWNjb3VudHNbX3JlY2lwaWVudF0uYmFsYW5jZSA9IGJhbGFuY2VPZihfcmVjaXBpZW50KS5hZGQoX2Ftb3VudCk7CgogICAgICAgIC8vIHNhdmUgdGhpcyB0cmFuc2FjdGlvbiBpbiBib3RoIGFjY291bnRzIGhpc3RvcnkKICAgICAgICByZXF1aXJlKF91cGRhdGVIaXN0b3J5KF9mcm9tKSk7CiAgICAgICAgcmVxdWlyZShfdXBkYXRlSGlzdG9yeShfcmVjaXBpZW50KSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfcmVjaXBpZW50LCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgIEBkZXYgVXBkYXRlcyB0aGUgdXNlciBoaXN0b3J5IHdpdGggdGhlIGxhdGVzdCBiYWxhbmNlLgogICAgQHBhcmFtIF9hZGRyZXNzIFRoZSBBY2NvdW50J3MgYWRkcmVzcyB0byB1cGRhdGUKICAgIEByZXR1cm4gQSBib29sIHNldCB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBmdW5jdGlvbiBfdXBkYXRlSGlzdG9yeShhZGRyZXNzIF9hZGRyZXNzKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWNjb3VudHNbX2FkZHJlc3NdLmhpc3RvcnkucHVzaChTbmFwc2hvdChibG9jay5udW1iZXIsIGJhbGFuY2VPZihfYWRkcmVzcykpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCn0='.
	

]
