Class {
	#name : #SRTba54a9aa2a711883aa5fc87ae9e7127ba405dac9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTba54a9aa2a711883aa5fc87ae9e7127ba405dac9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgewogICAgaWYgKG5ld093bmVyICE9IGFkZHJlc3MoMCkpIHsKICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgIH0KICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBwYXVzZWQKICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IG1vZGlmaWVyIHRvIGFsbG93IGFjdGlvbnMgb25seSB3aGVuIHRoZSBjb250cmFjdCBJUyBOT1QgcGF1c2VkCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9Cgpjb250cmFjdCBJTWludGFibGVUb2tlbiB7CiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBQcmljaW5nU3RyYXRlZ3kgewoKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIHVpbnQgcHVibGljIHJhdGUwOwogICAgdWludCBwdWJsaWMgcmF0ZTE7CiAgICB1aW50IHB1YmxpYyByYXRlMjsKCiAgICB1aW50IHB1YmxpYyB0aHJlc2hvbGQxOwogICAgdWludCBwdWJsaWMgdGhyZXNob2xkMjsKCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtV2VpQW1vdW50OwoKICAgIGZ1bmN0aW9uIFByaWNpbmdTdHJhdGVneSgKICAgICAgICB1aW50IF9yYXRlMCwKICAgICAgICB1aW50IF9yYXRlMSwKICAgICAgICB1aW50IF9yYXRlMiwKICAgICAgICB1aW50IF9taW5pbXVtV2VpQW1vdW50LAogICAgICAgIHVpbnQgX3RocmVzaG9sZDEsCiAgICAgICAgdWludCBfdGhyZXNob2xkMgogICAgKSB7CiAgICAgICAgcmVxdWlyZShfcmF0ZTAgPiAwKTsKICAgICAgICByZXF1aXJlKF9yYXRlMSA+IDApOwogICAgICAgIHJlcXVpcmUoX3JhdGUyID4gMCk7CiAgICAgICAgcmVxdWlyZShfbWluaW11bVdlaUFtb3VudCA+IDApOwogICAgICAgIHJlcXVpcmUoX3RocmVzaG9sZDEgPiAwKTsKICAgICAgICByZXF1aXJlKF90aHJlc2hvbGQyID4gMCk7CgogICAgICAgIHJhdGUwID0gX3JhdGUwOwogICAgICAgIHJhdGUxID0gX3JhdGUxOwogICAgICAgIHJhdGUyID0gX3JhdGUyOwogICAgICAgIG1pbmltdW1XZWlBbW91bnQgPSBfbWluaW11bVdlaUFtb3VudDsKICAgICAgICB0aHJlc2hvbGQxID0gX3RocmVzaG9sZDE7CiAgICAgICAgdGhyZXNob2xkMiA9IF90aHJlc2hvbGQyOwogICAgfQoKICAgIC8qKiBJbnRlcmZhY2UgZGVjbGFyYXRpb24uICovCiAgICBmdW5jdGlvbiBpc1ByaWNpbmdTdHJhdGVneSgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqIENhbGN1bGF0ZSB0aGUgY3VycmVudCBwcmljZSBmb3IgYnV5IGluIGFtb3VudC4gKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRva2VuQW1vdW50KHVpbnQgd2VpQW1vdW50KSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCB0b2tlbkFtb3VudCkgewogICAgICAgIHVpbnQgYm9udXNSYXRlID0gMDsKCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSBtaW5pbXVtV2VpQW1vdW50KSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSB0aHJlc2hvbGQxKSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdlaUFtb3VudCA+PSB0aHJlc2hvbGQyKSB7CiAgICAgICAgICAgIGJvbnVzUmF0ZSA9IHJhdGUyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHdlaUFtb3VudC5tdWwoYm9udXNSYXRlKTsKICAgIH0KfQoKCgpjb250cmFjdCBSZXNlcnZhdGlvbiBpcyBQYXVzYWJsZSB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQ7CgogICAgLyogTWF4IGludmVzdG1lbnQgY291bnQgd2hlbiB3ZSBhcmUgc3RpbGwgYWxsb3dlZCB0byBjaGFuZ2UgdGhlIG11bHRpc2lnIGFkZHJlc3MgKi8KICAgIHVpbnQgcHVibGljIE1BWF9JTlZFU1RNRU5UU19CRUZPUkVfTVVMVElTSUdfQ0hBTkdFID0gNTAwOwoKICAgIC8qIFRoZSB0b2tlbiB3ZSBhcmUgc2VsbGluZyAqLwogICAgSU1pbnRhYmxlVG9rZW4gcHVibGljIHRva2VuOwoKICAgIC8qIEhvdyB3ZSBhcmUgZ29pbmcgdG8gcHJpY2Ugb3VyIG9mZmVyaW5nICovCiAgICBQcmljaW5nU3RyYXRlZ3kgcHVibGljIHByaWNpbmdTdHJhdGVneTsKCiAgICAvKiB0b2tlbnMgd2lsbCBiZSB0cmFuc2ZlcmVkIGZyb20gdGhpcyBhZGRyZXNzICovCiAgICBhZGRyZXNzIHB1YmxpYyBtdWx0aXNpZ1dhbGxldDsKCiAgICAvKiBpZiB0aGUgZnVuZGluZyBnb2FsIGlzIG5vdCByZWFjaGVkLCBpbnZlc3RvcnMgbWF5IHdpdGhkcmF3IHRoZWlyIGZ1bmRzICovCiAgICB1aW50IHB1YmxpYyBtaW5pbXVtRnVuZGluZ0dvYWw7CgogICAgLyogdGhlIFVOSVggdGltZXN0YW1wIHN0YXJ0IGRhdGUgb2YgdGhlIHJlc2VydmF0aW9uICovCiAgICB1aW50IHB1YmxpYyBzdGFydHNBdDsKCiAgICAvKiB0aGUgVU5JWCB0aW1lc3RhbXAgZW5kIGRhdGUgb2YgdGhlIHJlc2VydmF0aW9uICovCiAgICB1aW50IHB1YmxpYyBlbmRzQXQ7CgogICAgLyogTWF4aW11bSBhbW91bnQgb2YgdG9rZW5zIHRoaXMgcmVzZXJ2YXRpb24gY2FuIHNlbGwuICovCiAgICB1aW50IHB1YmxpYyB0b2tlbnNIYXJkQ2FwOwoKICAgIC8qIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFscmVhZHkgc29sZCB0aHJvdWdoIHRoaXMgY29udHJhY3QqLwogICAgdWludCBwdWJsaWMgdG9rZW5zU29sZCA9IDA7CgogICAgLyogSG93IG1hbnkgd2VpIG9mIGZ1bmRpbmcgd2UgaGF2ZSByYWlzZWQgKi8KICAgIHVpbnQgcHVibGljIHdlaVJhaXNlZCA9IDA7CgogICAgLyogSG93IG1hbnkgZGlzdGluY3QgYWRkcmVzc2VzIGhhdmUgaW52ZXN0ZWQgKi8KICAgIHVpbnQgcHVibGljIGludmVzdG9yQ291bnQgPSAwOwoKICAgIC8qIEhvdyBtdWNoIHdlaSB3ZSBoYXZlIHJldHVybmVkIGJhY2sgdG8gdGhlIGNvbnRyYWN0IGFmdGVyIGEgZmFpbGVkIGNyb3dkZnVuZC4gKi8KICAgIHVpbnQgcHVibGljIGxvYWRlZFJlZnVuZCA9IDA7CgogICAgLyogSG93IG11Y2ggd2VpIHdlIGhhdmUgZ2l2ZW4gYmFjayB0byBpbnZlc3RvcnMuKi8KICAgIHVpbnQgcHVibGljIHdlaVJlZnVuZGVkID0gMDsKCiAgICAvKiogSG93IG11Y2ggRVRIIGVhY2ggYWRkcmVzcyBoYXMgaW52ZXN0ZWQgdG8gdGhpcyByZXNlcnZhdGlvbiAqLwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgaW52ZXN0ZWRBbW91bnRPZjsKCiAgICAvKiogSG93IG11Y2ggdG9rZW5zIHRoaXMgcmVzZXJ2YXRpb24gaGFzIGNyZWRpdGVkIGZvciBlYWNoIGludmVzdG9yIGFkZHJlc3MgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIHRva2VuQW1vdW50T2Y7CgogICAgLyoqIEFkZHJlc3NlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGludmVzdCBldmVuIGJlZm9yZSBJQ08gb2ZmaWNhbCBvcGVucy4gT25seSBmb3IgdGVzdGluZyBwdXJwdXNlcy4gKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGVhcmx5UGFydGljaXBhbnRXaGl0ZWxpc3Q7CgogICAgLyoqIFN0YXRlIG1hY2hpbmUKICAgICoKICAgICogLSBQcmVwYXJpbmc6IEFsbCBjb250cmFjdCBpbml0aWFsaXphdGlvbiBjYWxscyBhbmQgdmFyaWFibGVzIGhhdmUgbm90IGJlZW4gc2V0IHlldAogICAgKiAtIFByZWZ1bmRpbmc6IFdlIGhhdmUgbm90IHBhc3NlZCBzdGFydCB0aW1lIHlldAogICAgKiAtIEZ1bmRpbmc6IEFjdGl2ZSByZXNlcnZhdGlvbgogICAgKiAtIFN1Y2Nlc3M6IE1pbmltdW0gZnVuZGluZyBnb2FsIHJlYWNoZWQKICAgICogLSBGYWlsdXJlOiBNaW5pbXVtIGZ1bmRpbmcgZ29hbCBub3QgcmVhY2hlZCBiZWZvcmUgZW5kaW5nIHRpbWUKICAgICogLSBSZWZ1bmRpbmc6IFJlZnVuZHMgYXJlIGxvYWRlZCBvbiB0aGUgY29udHJhY3QgZm9yIHJlY2xhaW0uCiAgICAqLwogICAgZW51bSBTdGF0ZXtVbmtub3duLCBQcmVwYXJpbmcsIFByZUZ1bmRpbmcsIEZ1bmRpbmcsIFN1Y2Nlc3MsIEZhaWx1cmUsIFJlZnVuZGluZ30KCiAgICAvLyBBIG5ldyBpbnZlc3RtZW50IHdhcyBtYWRlCiAgICBldmVudCBJbnZlc3RlZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCwgdWludCB0b2tlbkFtb3VudCk7CgogICAgLy8gUmVmdW5kIHdhcyBwcm9jZXNzZWQgZm9yIGEgY29udHJpYnV0b3IKICAgIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50IHdlaUFtb3VudCk7CgogICAgLy8gQWRkcmVzcyBlYXJseSBwYXJ0aWNpcGF0aW9uIHdoaXRlbGlzdCBzdGF0dXMgY2hhbmdlZAogICAgZXZlbnQgV2hpdGVsaXN0ZWQoYWRkcmVzcyBhZGRyLCBib29sIHN0YXR1cyk7CgogICAgLy8gUmVzZXJ2YXRpb24gZW5kIHRpbWUgaGFzIGJlZW4gY2hhbmdlZAogICAgZXZlbnQgRW5kc0F0Q2hhbmdlZCh1aW50IGVuZHNBdCk7CgogICAgZnVuY3Rpb24gUmVzZXJ2YXRpb24oCiAgICAgICAgYWRkcmVzcyBfdG9rZW4sIAogICAgICAgIGFkZHJlc3MgX3ByaWNpbmdTdHJhdGVneSwgCiAgICAgICAgYWRkcmVzcyBfbXVsdGlzaWdXYWxsZXQsIAogICAgICAgIHVpbnQgX3N0YXJ0LCAKICAgICAgICB1aW50IF9lbmQsIAogICAgICAgIHVpbnQgX3Rva2Vuc0hhcmRDYXAsCiAgICAgICAgdWludCBfbWluaW11bUZ1bmRpbmdHb2FsCiAgICApIHsKICAgICAgICByZXF1aXJlKF90b2tlbiAhPSAwKTsKICAgICAgICByZXF1aXJlKF9wcmljaW5nU3RyYXRlZ3kgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfbXVsdGlzaWdXYWxsZXQgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfc3RhcnQgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfZW5kICE9IDApOwogICAgICAgIHJlcXVpcmUoX3N0YXJ0IDwgX2VuZCk7CiAgICAgICAgcmVxdWlyZShfdG9rZW5zSGFyZENhcCAhPSAwKTsKCiAgICAgICAgdG9rZW4gPSBJTWludGFibGVUb2tlbihfdG9rZW4pOwogICAgICAgIHNldFByaWNpbmdTdHJhdGVneShfcHJpY2luZ1N0cmF0ZWd5KTsKICAgICAgICBtdWx0aXNpZ1dhbGxldCA9IF9tdWx0aXNpZ1dhbGxldDsKICAgICAgICBzdGFydHNBdCA9IF9zdGFydDsKICAgICAgICBlbmRzQXQgPSBfZW5kOwogICAgICAgIHRva2Vuc0hhcmRDYXAgPSBfdG9rZW5zSGFyZENhcDsKICAgICAgICBtaW5pbXVtRnVuZGluZ0dvYWwgPSBfbWluaW11bUZ1bmRpbmdHb2FsOwogICAgfQoKICAgIC8qKgogICAgKiBCdXkgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKICAgICAgICBpbnZlc3QobXNnLnNlbmRlcik7CiAgICB9CgogICAgLyoqCiAgICAqIE1ha2UgYW4gaW52ZXN0bWVudC4KICAgICoKICAgICogUmVzZXJ2YXRpb24gbXVzdCBiZSBydW5uaW5nIGZvciBvbmUgdG8gaW52ZXN0LgogICAgKiBXZSBtdXN0IGhhdmUgbm90IHByZXNzZWQgdGhlIGVtZXJnZW5jeSBicmFrZS4KICAgICoKICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSBFdGhlcmV1bSBhZGRyZXNzIHdobyByZWNlaXZlcyB0aGUgdG9rZW5zCiAgICAqLwogICAgZnVuY3Rpb24gaW52ZXN0KGFkZHJlc3MgcmVjZWl2ZXIpIHdoZW5Ob3RQYXVzZWQgcGF5YWJsZSB7CgogICAgICAgIC8vIERldGVybWluZSBpZiBpdCdzIGEgZ29vZCB0aW1lIHRvIGFjY2VwdCBpbnZlc3RtZW50IGZyb20gdGhpcyBwYXJ0aWNpcGFudAogICAgICAgIGlmIChnZXRTdGF0ZSgpID09IFN0YXRlLlByZUZ1bmRpbmcpIHsKICAgICAgICAgICAgLy8gQXJlIHdlIHdoaXRlbGlzdGVkIGZvciBlYXJseSBkZXBvc2l0CiAgICAgICAgICAgIHJlcXVpcmUoZWFybHlQYXJ0aWNpcGFudFdoaXRlbGlzdFtyZWNlaXZlcl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUoZ2V0U3RhdGUoKSA9PSBTdGF0ZS5GdW5kaW5nKTsKICAgICAgICB9CgogICAgICAgIHVpbnQgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwoKICAgICAgICAvLyBBY2NvdW50IHJlc2VydmF0aW9uIHNhbGVzIHNlcGFyYXRlbHksIHNvIHRoYXQgdGhleSBkbyBub3QgY291bnQgYWdhaW5zdCBwcmljaW5nIHRyYW5jaGVzCiAgICAgICAgdWludCB0b2tlbkFtb3VudCA9IHByaWNpbmdTdHJhdGVneS5jYWxjdWxhdGVUb2tlbkFtb3VudCh3ZWlBbW91bnQpOwoKICAgICAgICAvLyBEdXN0IHRyYW5zYWN0aW9uCiAgICAgICAgcmVxdWlyZSh0b2tlbkFtb3VudCA+IDApOwoKICAgICAgICBpZiAoaW52ZXN0ZWRBbW91bnRPZltyZWNlaXZlcl0gPT0gMCkgewogICAgICAgICAgICAvLyBBIG5ldyBpbnZlc3RvcgogICAgICAgICAgICBpbnZlc3RvckNvdW50Kys7CiAgICAgICAgfQoKICAgICAgICAvLyBVcGRhdGUgaW52ZXN0b3IKICAgICAgICBpbnZlc3RlZEFtb3VudE9mW3JlY2VpdmVyXSA9IGludmVzdGVkQW1vdW50T2ZbcmVjZWl2ZXJdLmFkZCh3ZWlBbW91bnQpOwogICAgICAgIHRva2VuQW1vdW50T2ZbcmVjZWl2ZXJdID0gdG9rZW5BbW91bnRPZltyZWNlaXZlcl0uYWRkKHRva2VuQW1vdW50KTsKCiAgICAgICAgLy8gVXBkYXRlIHRvdGFscwogICAgICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQodG9rZW5BbW91bnQpOwoKICAgICAgICAvLyBDaGVjayB0aGF0IHdlIGRpZCBub3QgYnVzdCB0aGUgY2FwCiAgICAgICAgcmVxdWlyZSghaXNCcmVha2luZ0NhcCh0b2tlbnNTb2xkKSk7CgogICAgICAgIHRva2VuLm1pbnQocmVjZWl2ZXIsIHRva2VuQW1vdW50KTsKCiAgICAgICAgLy8gUG9ja2V0IHRoZSBtb25leQogICAgICAgIG11bHRpc2lnV2FsbGV0LnRyYW5zZmVyKHdlaUFtb3VudCk7CgogICAgICAgIC8vIFRlbGwgdXMgaW52ZXN0IHdhcyBzdWNjZXNzCiAgICAgICAgSW52ZXN0ZWQocmVjZWl2ZXIsIHdlaUFtb3VudCwgdG9rZW5BbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgKiBBbGxvdyBhZGRyZXNzZXMgdG8gZG8gZWFybHkgcGFydGljaXBhdGlvbi4KICAgICoKICAgICovCiAgICBmdW5jdGlvbiBzZXRFYXJseVBhcmljaXBhbnRXaGl0ZWxpc3QoYWRkcmVzcyBhZGRyLCBib29sIHN0YXR1cykgb25seU93bmVyIHsKICAgICAgICBlYXJseVBhcnRpY2lwYW50V2hpdGVsaXN0W2FkZHJdID0gc3RhdHVzOwogICAgICAgIFdoaXRlbGlzdGVkKGFkZHIsIHN0YXR1cyk7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbG93IHJlc2VydmF0aW9uIG93bmVyIHRvIGNsb3NlIGVhcmx5IG9yIGV4dGVuZCB0aGUgcmVzZXJ2YXRpb24uCiAgICAqCiAgICAqIFRoaXMgaXMgdXNlZnVsIGUuZy4gZm9yIGEgbWFudWFsIHNvZnQgY2FwIGltcGxlbWVudGF0aW9uOgogICAgKiAtIGFmdGVyIFggYW1vdW50IGlzIHJlYWNoZWQgZGV0ZXJtaW5lIG1hbnVhbCBjbG9zaW5nCiAgICAqCiAgICAqIFRoaXMgbWF5IHB1dCB0aGUgcmVzZXJ2YXRpb24gdG8gYW4gaW52YWxpZCBzdGF0ZSwKICAgICogYnV0IHdlIHRydXN0IG93bmVycyBrbm93IHdoYXQgdGhleSBhcmUgZG9pbmcuCiAgICAqCiAgICAqLwogICAgZnVuY3Rpb24gc2V0RW5kc0F0KHVpbnQgdGltZSkgb25seU93bmVyIHsKCiAgICAgICAgcmVxdWlyZShub3cgPD0gdGltZSk7CgogICAgICAgIGVuZHNBdCA9IHRpbWU7CiAgICAgICAgRW5kc0F0Q2hhbmdlZChlbmRzQXQpOwogICAgfQoKICAgIC8qKgogICAgKiBBbGxvdyB0byAocmUpc2V0IHByaWNpbmcgc3RyYXRlZ3kuCiAgICAqCiAgICAqIERlc2lnbiBjaG9pY2U6IG5vIHN0YXRlIHJlc3RyaWN0aW9ucyBvbiB0aGUgc2V0LCBzbyB0aGF0IHdlIGNhbiBmaXggZmF0IGZpbmdlciBtaXN0YWtlcy4KICAgICovCiAgICBmdW5jdGlvbiBzZXRQcmljaW5nU3RyYXRlZ3koYWRkcmVzcyBfcHJpY2luZ1N0cmF0ZWd5KSBvbmx5T3duZXIgewogICAgICAgIHByaWNpbmdTdHJhdGVneSA9IFByaWNpbmdTdHJhdGVneShfcHJpY2luZ1N0cmF0ZWd5KTsKCiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgc2V0dGluZyBiYWQgYWdlbnQKICAgICAgICByZXF1aXJlKHByaWNpbmdTdHJhdGVneS5pc1ByaWNpbmdTdHJhdGVneSgpKTsKICAgIH0KCiAgICAvKioKICAgICogQWxsb3cgdG8gY2hhbmdlIHRoZSB0ZWFtIG11bHRpc2lnIGFkZHJlc3MgaW4gdGhlIGNhc2Ugb2YgZW1lcmdlbmN5LgogICAgKgogICAgKiBUaGlzIGFsbG93cyB0byBzYXZlIGEgZGVwbG95ZWQgcmVzZXJ2YXRpb24gd2FsbGV0IGluIHRoZSBjYXNlIHRoZSByZXNlcnZhdGlvbiBoYXMgbm90IHlldCBiZWd1bgogICAgKiAod2UgaGF2ZSBkb25lIG9ubHkgZmV3IHRlc3QgdHJhbnNhY3Rpb25zKS4gQWZ0ZXIgdGhlIHJlc2VydmF0aW9uIGlzIGdvaW5nCiAgICAqIHRoZW4gbXVsdGlzaWcgYWRkcmVzcyBzdGF5cyBsb2NrZWQgZm9yIHRoZSBzYWZldHkgcmVhc29ucy4KICAgICovCiAgICBmdW5jdGlvbiBzZXRNdWx0aXNpZyhhZGRyZXNzIGFkZHIpIHB1YmxpYyBvbmx5T3duZXIgewoKICAgICAgICByZXF1aXJlKGludmVzdG9yQ291bnQgPD0gTUFYX0lOVkVTVE1FTlRTX0JFRk9SRV9NVUxUSVNJR19DSEFOR0UpOwoKICAgICAgICBtdWx0aXNpZ1dhbGxldCA9IGFkZHI7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbG93IGxvYWQgcmVmdW5kcyBiYWNrIG9uIHRoZSBjb250cmFjdCBmb3IgdGhlIHJlZnVuZGluZy4KICAgICoKICAgICogVGhlIHRlYW0gY2FuIHRyYW5zZmVyIHRoZSBmdW5kcyBiYWNrIG9uIHRoZSBzbWFydCBjb250cmFjdCBpbiB0aGUgY2FzZSB0aGUgbWluaW11bSBnb2FsIHdhcyBub3QgcmVhY2hlZC4uCiAgICAqLwogICAgZnVuY3Rpb24gbG9hZFJlZnVuZCgpIHB1YmxpYyBwYXlhYmxlIGluU3RhdGUoU3RhdGUuRmFpbHVyZSkgewogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIGxvYWRlZFJlZnVuZCA9IGxvYWRlZFJlZnVuZC5hZGQobXNnLnZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICogSW52ZXN0b3JzIGNhbiBjbGFpbSByZWZ1bmQuCiAgICAqCiAgICAqIE5vdGUgdGhhdCBhbnkgcmVmdW5kcyBmcm9tIHByb3h5IGJ1eWVycyBzaG91bGQgYmUgaGFuZGxlZCBzZXBhcmF0ZWx5LAogICAgKiBhbmQgbm90IHRocm91Z2ggdGhpcyBjb250cmFjdC4KICAgICovCiAgICBmdW5jdGlvbiByZWZ1bmQoKSBwdWJsaWMgaW5TdGF0ZShTdGF0ZS5SZWZ1bmRpbmcpIHsKICAgICAgICB1aW50MjU2IHdlaVZhbHVlID0gaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlKHdlaVZhbHVlID4gMCk7CgogICAgICAgIGludmVzdGVkQW1vdW50T2ZbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIHdlaVJlZnVuZGVkID0gd2VpUmVmdW5kZWQuYWRkKHdlaVZhbHVlKTsKICAgICAgICBSZWZ1bmQobXNnLnNlbmRlciwgd2VpVmFsdWUpOwogICAgICAgIAogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2VpVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgKiBDcm93ZGZ1bmQgc3RhdGUgbWFjaGluZSBtYW5hZ2VtZW50LgogICAgKgogICAgKiBXZSBtYWtlIGl0IGEgZnVuY3Rpb24gYW5kIGRvIG5vdCBhc3NpZ24gdGhlIHJlc3VsdCB0byBhIHZhcmlhYmxlLCBzbyB0aGVyZSBpcyBubyBjaGFuY2Ugb2YgdGhlIHZhcmlhYmxlIGJlaW5nIHN0YWxlLgogICAgKi8KICAgIGZ1bmN0aW9uIGdldFN0YXRlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKFN0YXRlKSB7CiAgICAgICAgaWYgKGFkZHJlc3MocHJpY2luZ1N0cmF0ZWd5KSA9PSAwKQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUHJlcGFyaW5nOwogICAgICAgIGVsc2UgaWYgKGJsb2NrLnRpbWVzdGFtcCA8IHN0YXJ0c0F0KQogICAgICAgICAgICByZXR1cm4gU3RhdGUuUHJlRnVuZGluZzsKICAgICAgICBlbHNlIGlmIChibG9jay50aW1lc3RhbXAgPD0gZW5kc0F0ICYmICFpc1Jlc2VydmF0aW9uRnVsbCgpKQogICAgICAgICAgICByZXR1cm4gU3RhdGUuRnVuZGluZzsKICAgICAgICBlbHNlIGlmIChpc01pbmltdW1Hb2FsUmVhY2hlZCgpKQogICAgICAgICAgICByZXR1cm4gU3RhdGUuU3VjY2VzczsKICAgICAgICBlbHNlIGlmICghaXNNaW5pbXVtR29hbFJlYWNoZWQoKSAmJiB3ZWlSYWlzZWQgPiAwICYmIGxvYWRlZFJlZnVuZCA+PSB3ZWlSYWlzZWQpCiAgICAgICAgICAgIHJldHVybiBTdGF0ZS5SZWZ1bmRpbmc7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gU3RhdGUuRmFpbHVyZTsKICAgIH0KCiAgICAvKioKICAgICogQHJldHVybiB0cnVlIGlmIHRoZSByZXNlcnZhdGlvbiBoYXMgcmFpc2VkIGVub3VnaCBtb25leSB0byBiZSBhIHN1Y2Nlc3NmdWwuCiAgICAqLwogICAgZnVuY3Rpb24gaXNNaW5pbXVtR29hbFJlYWNoZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCByZWFjaGVkKSB7CiAgICAgICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBtaW5pbXVtRnVuZGluZ0dvYWw7CiAgICB9CgogICAgLyoqCiAgICAqIENhbGxlZCBmcm9tIGludmVzdCgpIHRvIGNvbmZpcm0gaWYgdGhlIGN1cnJldCBpbnZlc3RtZW50IGRvZXMgbm90IGJyZWFrIG91ciBjYXAgcnVsZS4KICAgICovCiAgICBmdW5jdGlvbiBpc0JyZWFraW5nQ2FwKHVpbnQgdG9rZW5zU29sZFRvdGFsKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRva2Vuc1NvbGRUb3RhbCA+IHRva2Vuc0hhcmRDYXA7CiAgICB9CgogICAgZnVuY3Rpb24gaXNSZXNlcnZhdGlvbkZ1bGwoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0b2tlbnNTb2xkID49IHRva2Vuc0hhcmRDYXA7CiAgICB9CgogICAgLy8KICAgIC8vIE1vZGlmaWVycwogICAgLy8KCiAgICAvKiogTW9kaWZpZWQgYWxsb3dpbmcgZXhlY3V0aW9uIG9ubHkgaWYgdGhlIHJlc2VydmF0aW9uIGlzIGN1cnJlbnRseSBydW5uaW5nLiAgKi8KICAgIG1vZGlmaWVyIGluU3RhdGUoU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXF1aXJlKGdldFN0YXRlKCkgPT0gc3RhdGUpOwogICAgICAgIF87CiAgICB9Cn0='.
	

]
