Class {
	#name : #SRT3bf3b11023650d21140ba10c68a8a4dd0a372d3f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3bf3b11023650d21140ba10c68a8a4dd0a372d3f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTM7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKfQoKLyoqCgkgKiBAdGl0bGUgRVJDMjBCYXNpYwoJICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCgkgKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKCSAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKCSAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CgkgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CgkgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpOwoJICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgICogQGRldiBGaXggZm9yIHRoZSBFUkMyMCBzaG9ydCBhZGRyZXNzIGF0dGFjay4KICAgKi8KICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludDI1NiBzaXplKSB7CiAgICAgcmVxdWlyZSghKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSk7CiAgICAgXzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtYW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJ0IHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIHJlcXVpcmUoISgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGFuIGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKfQoKY29udHJhY3QgUGl4aXUgaXMgU3RhbmRhcmRUb2tlbiB7CgogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSA2OwogICAgYm9vbCBwdWJsaWMgaXNQYXlhYmxlID0gdHJ1ZTsKICAgIGJvb2wgcHVibGljIGlzV2l0aGRyYXdhYmxlID0gdHJ1ZTsKICAgIGJvb2wgcHVibGljIGlzUmVxdWlyZURhdGEgPSBmYWxzZTsKCQogICAgc3RydWN0IGV4Y2hhbmdlUmF0ZSB7CiAgICAgICAgCiAgICAgICAgdWludCB0aW1lMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHVpbnQgdGltZTI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHVpbnQgdmFsdWU7CiAgICAgICAgCiAgICB9CiAgICAKICAgIHN0cnVjdCBNZW1iZXIgewogICAgICAgICAKICAgICAgICBib29sIGlzRXhpc3RzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgYm9vbCBpc0RpdmlkZW5kOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGJvb2wgaXNXaXRoZHJhdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgdWludDI1NiBkaXZpZGVuZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHVpbnQyNTYgd2l0aGRyYXc7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGV4Y2hhbmdlUmF0ZVtdIHB1YmxpYyBleGNoYW5nZVJhdGVBcnJheTsgIAoKCW1hcHBpbmcgKGFkZHJlc3MgPT4gTWVtYmVyKSBwdWJsaWMgbWVtYmVyczsgCiAgICBhZGRyZXNzW10gcHVibGljIGFkbWluQXJyYXk7ICAgCiAgICBhZGRyZXNzW10gcHVibGljIG1lbWJlckFycmF5OwogICAgCgkgCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlbkV4Y2hhbmdlUmF0ZUluV2VpID0gMzAwKjEwKio2OwoJCgkvKgogICAgKuiZm+aTrOW4s+iZnyAgIOWFsTIw56K8CiAgICAqMS00IOWbuuWumiAweEZGRkZGRkZGIAogICAgKjUtOCDnubPosrvmnJ/pmZAKICAgICo5LTExIOa1geawtOiZnyDllYblrrbku6PnorwgMHgwMDAwMDAtMHhGRkZGRkYKICAgICoxMi0xNSDllYblrrboh6roqIIgNOeivD045L2NIDAtRgogICAgKjE2LTE4IOmHkemhjQogICAgKjE5IDoweDMwICs0Yml05YCZ6KOc6Zu2CiAgICAqIOeVtiBCWVRFMTkgPSAwMCAgMTItMTgg54K65ZWG5a626Ieq6KiCCiAgICAqMjAg5qqi5p+l56K8IAogICAgKi8KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHNob3BTdG9yZUlkOyAKICAgIG1hcHBpbmcgKHVpbnQgPT4gYWRkcmVzcykgcHVibGljIHNob3BTdG9yZUFkZHJlc3M7IAogICAgdWludDI1NiBwdWJsaWMgc2hvcFN0b3JlUHJpY2UgPSAxKjEwKio2OwogICAgdWludDI1NiBwdWJsaWMgc2hvcFN0b3JlTmV4dElkID0gMDsKICAgIGFkZHJlc3MgcHVibGljIEFwcGx5X1N0b3JlX0lkX0ZlZTsKCXVpbnQyNTYgcHVibGljIHRvdGFsX3Rva2Vud2VpID0gMDsgCgl1aW50MjU2IHB1YmxpYyBtaW5fcGF5X3dlaSA9IDA7Cgl1aW50MjU2IHB1YmxpYyB0b3RhbF9kZXZpZGVuZCA9IDA7IAoJdWludDI1NiBwdWJsaWMgdG90YWxfd2l0aGRyYXcgPSAwOyAKICAgIHVpbnQyNTYgcHVibGljIHdpdGhkcmF3X2Ftb3VudCA9IDA7IAogICAgdWludDI1NiBwdWJsaWMgZGl2aWRlbmRfYW1vdW50ID0gMDsgCiAgICAKICAgIGV2ZW50IFBheWRhdGEoYWRkcmVzcyBpbmRleGVkIHBheWVyLCB1aW50MjU2IHZhbHVlLCBieXRlcyBkYXRhLCB1aW50MjU2IHRoaXNUb2tlbldlaSk7CiAgICAKICAgIGZ1bmN0aW9uIFBpeGl1KCkgewogICAgICAgIHRvdGFsU3VwcGx5ID0gMjEwMDAwMDAwMDAwMDA7IAogICAgICAgIGFkbWluQXJyYXkucHVzaChtc2cuc2VuZGVyKTsKICAgICAgICBhZG1pbl9zZXRfQXBwbHlfU3RvcmVfSWRfRmVlKG1zZy5zZW5kZXIpOwogICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0X29yZGVyQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzLHVpbnQgX2V4cGlyZV9kYXksdWludCBfdXNlcmRhdGEsdWludCBfcGl4aXUsIHVpbnQgX3dlaSkgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyl7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBzdG9yZWlkID0gc2hvcFN0b3JlSWRbX2FkZHJlc3NdOwogICAgICAgIHVpbnQxNjAgcmVzdWx0ID0gdWludDE1MigweGZmZmZmZmZmPDwxMjApICsgdWludDEyMCgoX2V4cGlyZV9kYXkgKiA4NjQwMCArIG5vdyk8PDg4KSArIHVpbnQ4OChzdG9yZWlkPDw2NCk7IAogICAgICAgIHVpbnQgX3plcm8gPSAwOwogICAgICAgIHVpbnQyNTYgX2Ftb3VudDIgPSBfcGl4aXUgKiAxMCAqKiA2ICsgX3dlaTsKICAgICAgICB1aW50MjU2IF9hbW91bnQgPSBfYW1vdW50MjsKICAgICAgICB3aGlsZShfYW1vdW50MiAlIDEwID09IDApewogICAgICAgICAgICAKICAgICAgICAgICAgX2Ftb3VudDIgLz0gMTA7CiAgICAgICAgICAgIF96ZXJvKys7CiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBfdXNlcmRhdGEgPSBfdXNlcmRhdGE8PDI0OwogICAgICAgIF91c2VyZGF0YSArPSBfYW1vdW50OwogICAgICAgIAogICAgICAgIHJlc3VsdCArPSB1aW50NjQoX3VzZXJkYXRhPDw4KTsKICAgICAgICByZXN1bHQgKz0gdWludDgoMHgzMCtfemVybyk7CiAgICAgICAgdWludDggY3JjID0gdWludDgoc2hhMjU2KHVpbnQxNTIocmVzdWx0KSApKTsKICAgICAgICByZXR1cm4gYWRkcmVzcygocmVzdWx0IDw8IDgpICsgY3JjKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gaXNMZWFkaW5nNEZGKGFkZHJlc3MgX3NlbmRlciApIHByaXZhdGUgIHJldHVybnMoYm9vbCl7CiAgICAgICAgdWludDMyIGZmND0gdWludDMyKHVpbnQyNTYoX3NlbmRlcikgPj4gMTI4KTsKICAgICAgICByZXR1cm4gKGZmNCA9PSAweGZmZmZmZmZmKTsKICAgIH0KICAgIAogICAgbW9kaWZpZXIgb25seUFkbWluKCkgewogICAgICAgIAogICAgICAgIGJvb2wgb2sgPSBhZG1pbl9jaGVjayhtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKG9rKTsKICAgICAgICBfOwogICAgICAgIAogICAgfQogICAgCiAgICBtb2RpZmllciBhZG1pbkV4aXN0cyhhZGRyZXNzIGFkbWluKSB7CgogICAgICAgIGJvb2wgb2sgPSBmYWxzZTsKICAgICAgICBpZihhZG1pbiAhPSBtc2cuc2VuZGVyKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9rID0gYWRtaW5fY2hlY2soYWRtaW4pOwogICAgICAgIAogICAgICAgIH0KICAgICAgICByZXF1aXJlKG9rKTsKICAgICAgICBfOyAKICAgICAgICAKICAgIH0KICAgIAogICAgbW9kaWZpZXIgYWRtaW5Eb2VzTm90RXhpc3QoYWRkcmVzcyBhZG1pbikgewoKICAgICAgICBib29sIG9rID0gYWRtaW5fY2hlY2soYWRtaW4pOwogICAgICAgIHJlcXVpcmUoIW9rKTsKICAgICAgICBfOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9jaGVjayhhZGRyZXNzIGFkbWluKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMoYm9vbCl7CiAgICAgICAgCiAgICAgICAgYm9vbCBvayA9IGZhbHNlOwogICAgICAgIAogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IGFkbWluQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFkbWluID09IGFkbWluQXJyYXlbaV0pIHsKICAgICAgICAgICAgICAgIG9rID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBvazsKICAgICAgICAKICAgIH0KICAgIAogICAgbW9kaWZpZXIgbWVtYmVyRXhpc3RzKGFkZHJlc3MgbWVtYmVyKSB7CgogICAgICAgIGJvb2wgb2sgPSBmYWxzZTsKICAgICAgICBpZiAobWVtYmVyc1ttZW1iZXJdLmlzRXhpc3RzID09IHRydWUpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9rID0gdHJ1ZTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIHJlcXVpcmUob2spOwogICAgICAgIF87CiAgICAgICAgCiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGlzTWVtYmVyKCkgewoKICAgICAgICBib29sIG9rID0gZmFsc2U7CiAgICAgICAgaWYgKG1lbWJlcnNbbXNnLnNlbmRlcl0uaXNFeGlzdHMgPT0gdHJ1ZSkgeyAgICAgICAgICAgIAogICAgICAgICAgICBvayA9IHRydWU7ICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIHJlcXVpcmUob2spOwogICAgICAgIF87CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX2RpdmlkZW5kKGludCBfRXRoLCBpbnQgX1dlaSkgb25seUFkbWluIHsKICAgICAgICAKICAgICAgICBpbnQgeFdlaSA9IF9FdGggKiAxMCAqKiAxOCArIF9XZWk7CgkJYm9vbCBpc19hZGQgPSB0cnVlOwoKICAgICAgICBpZih4V2VpID4gMCl7CiAgICAgICAgICAgIAogICAgICAgICAgICBkaXZpZGVuZF9hbW91bnQgKz0gdWludDI1Nih4V2VpKTsKICAgICAgICAgICAgCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIAogICAgICAgICAgICB4V2VpICo9IC0xOwogICAgICAgICAgICBpc19hZGQgPSBmYWxzZTsKICAgICAgICAgICAgZGl2aWRlbmRfYW1vdW50IC09IHVpbnQyNTYoeFdlaSAqIC0xKTsKICAgICAgICAgICAgCiAgICAgICAgfSAKICAgICAgICAKICAgICAgICB1aW50MjU2IGxlbiA9IG1lbWJlckFycmF5Lmxlbmd0aDsJCiAgICAgICAgdWludCBpID0gMDsKICAgICAgICBhZGRyZXNzIF9tZW1iZXI7CiAgICAgICAgCgkJdWludCB0b3RhbF9iYWxhbmNlX2RpdmlkZW5lZD0wOwogICAgICAgIGZvciggaSA9IDA7IGkgPCBsZW47IGkrKyl7ICAgICAgICAgICAgCiAgICAgICAgICAgIF9tZW1iZXIgPSBtZW1iZXJBcnJheVtpXTsKCQkJaWYobWVtYmVyc1tfbWVtYmVyXS5pc0RpdmlkZW5kKXsKCQkJCXRvdGFsX2JhbGFuY2VfZGl2aWRlbmVkICs9IGJhbGFuY2VzW19tZW1iZXJdOyAKCQkJfSAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgZm9yKCBpID0gMDsgaSA8IGxlbjsgaSsrKXsgICAgICAgICAgICAKICAgICAgICAgICAgX21lbWJlciA9IG1lbWJlckFycmF5W2ldOwoJCQlpZihtZW1iZXJzW19tZW1iZXJdLmlzRGl2aWRlbmQpewoJCQkJdWludDI1NiB0aGlzV2VpID0gYmFsYW5jZXNbX21lbWJlcl0gKiB1aW50MjU2KHhXZWkpIC8gdG90YWxfYmFsYW5jZV9kaXZpZGVuZWQ7CgkJCQlpZihpc19hZGQpewoJCQkJICAgIG1lbWJlcnNbX21lbWJlcl0uZGl2aWRlbmQgKz0gdGhpc1dlaTsgCgkJCQkgICAgdG90YWxfZGV2aWRlbmQgKz0gdGhpc1dlaTsKCQkJCX1lbHNlewoJCQkJICAgIG1lbWJlcnNbX21lbWJlcl0uZGl2aWRlbmQgLT0gdGhpc1dlaTsgCgkJCQkgICAgdG90YWxfZGV2aWRlbmQgLT0gdGhpc1dlaTsKCQkJCX0KCQkJfSAgICAgICAgICAgIAogICAgICAgIH0KICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9zZXRfZXhjaGFuZ2VfcmF0ZSh1aW50W10gZXhjaGFuZ2VSYXRlcykgb25seUFkbWluewogICAgICAgICAKICAgICAgICB1aW50IGxlbiA9IGV4Y2hhbmdlUmF0ZXMubGVuZ3RoOwogICAgICAgIGV4Y2hhbmdlUmF0ZUFycmF5Lmxlbmd0aCA9IDA7CiAgICAgICAgCiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMyl7CiAgICAgICAgICAgIAogICAgICAgICAgICB1aW50IHRpbWUxID0gZXhjaGFuZ2VSYXRlc1tpXTsKICAgICAgICAgICAgdWludCB0aW1lMiA9IGV4Y2hhbmdlUmF0ZXNbaSArIDFdOwogICAgICAgICAgICB1aW50IHZhbHVlID0gZXhjaGFuZ2VSYXRlc1tpICsgMl0qMTAwMDsKICAgICAgICAgICAgZXhjaGFuZ2VSYXRlQXJyYXkucHVzaChleGNoYW5nZVJhdGUodGltZTEsIHRpbWUyLCB2YWx1ZSkpOyAgICAgIAogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX3NldF9BcHBseV9TdG9yZV9JZF9GZWUoYWRkcmVzcyBfYWRkcmVzcykgb25seUFkbWluewogICAgICAgIAogICAgICAgIEFwcGx5X1N0b3JlX0lkX0ZlZSA9IF9hZGRyZXNzOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9zZXRfRXhjaGFuZ2VSYXRlSW5XZWkodWludDI1NiBleGNoYW5nZVJhdGVzKSBvbmx5QWRtaW57CiAgICAgICAgCiAgICAgICAgdG9rZW5FeGNoYW5nZVJhdGVJbldlaSA9IGV4Y2hhbmdlUmF0ZXM7CiAgICAgICAgCiAgICB9CgoJZnVuY3Rpb24gZ2V0X2V4Y2hhbmdlX3dlaSgpIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CgoJCXVpbnQgbGVuID0gZXhjaGFuZ2VSYXRlQXJyYXkubGVuZ3RoOyAgCgkJdWludCBub3dUaW1lID0gYmxvY2sudGltZXN0YW1wOwogICAgICAgIGZvcih1aW50IGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpewogICAgICAgICAgICAKCQkJZXhjaGFuZ2VSYXRlIG1lbW9yeSByYXRlID0gZXhjaGFuZ2VSYXRlQXJyYXlbaV07CiAgICAgICAgICAgIHVpbnQgdGltZTEgPSByYXRlLnRpbWUxOwogICAgICAgICAgICB1aW50IHRpbWUyID0gcmF0ZS50aW1lMjsKICAgICAgICAgICAgdWludCB2YWx1ZSA9IHJhdGUudmFsdWU7CgkJCWlmIChub3dUaW1lPj0gdGltZTEgJiYgbm93VGltZTw9dGltZTIpIHsKCQkJCXRva2VuRXhjaGFuZ2VSYXRlSW5XZWkgPSB2YWx1ZTsKCQkJCXJldHVybiB2YWx1ZTsKCQkJfQogICAgICAgICAgICAKICAgICAgICB9CgkJcmV0dXJuIHRva2VuRXhjaGFuZ2VSYXRlSW5XZWk7Cgl9CgkKCWZ1bmN0aW9uIGFkbWluX3NldF9taW5fcGF5KHVpbnQyNTYgX21pbl9wYXkpIG9ubHlBZG1pbnsKCSAgICAKCSAgICByZXF1aXJlKF9taW5fcGF5ID49IDApOwoJICAgIG1pbl9wYXlfd2VpID0gX21pbl9wYXk7CgkgICAgCgl9CiAgICAKICAgIGZ1bmN0aW9uIGdldF9hZG1pbl9saXN0KCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10gX2FkbWluQXJyYXkpewogICAgICAgIAogICAgICAgIF9hZG1pbkFycmF5ID0gYWRtaW5BcnJheTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fYWRkKGFkZHJlc3MgYWRtaW4pIG9ubHlBZG1pbiBhZG1pbkRvZXNOb3RFeGlzdChhZG1pbil7CiAgICAgICAgCiAgICAgICAgYWRtaW5BcnJheS5wdXNoKGFkbWluKTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fZGVsKGFkZHJlc3MgYWRtaW4pIG9ubHlBZG1pbiBhZG1pbkV4aXN0cyhhZG1pbil7CiAgICAgICAgCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYWRtaW5BcnJheS5sZW5ndGggLSAxOyBpKyspCiAgICAgICAgICAgIGlmIChhZG1pbkFycmF5W2ldID09IGFkbWluKSB7CiAgICAgICAgICAgICAgICBhZG1pbkFycmF5W2ldID0gYWRtaW5BcnJheVthZG1pbkFycmF5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgYWRtaW5BcnJheS5sZW5ndGggLT0gMTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fc2V0X3Nob3BTdG9yZVByaWNlKHVpbnQyNTYgX3Nob3BTdG9yZVByaWNlKSBvbmx5QWRtaW57CiAgICAgICAgCiAgICAgICAgc2hvcFN0b3JlUHJpY2UgPSBfc2hvcFN0b3JlUHJpY2U7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX3NldF9pc1JlcXVpcmVEYXRhKGJvb2wgX3JlcXVpcmVEYXRhKSBvbmx5QWRtaW57CiAgICAKICAgICAgICBpc1JlcXVpcmVEYXRhID0gX3JlcXVpcmVEYXRhOwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBhZG1pbl9zZXRfcGF5YWJsZShib29sIF9wYXlhYmxlKSBvbmx5QWRtaW57CiAgICAKICAgICAgICBpc1BheWFibGUgPSBfcGF5YWJsZTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fc2V0X3dpdGhkcmF3YWJsZShib29sIF93aXRoZHJhd2FibGUpIG9ubHlBZG1pbnsKICAgICAgICAKICAgICAgICBpc1dpdGhkcmF3YWJsZSA9IF93aXRoZHJhd2FibGU7CiAgICAgICAgCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFkbWluX3NldF9kaXZpZGVuZChhZGRyZXNzIF9tZW1iZXIsIGJvb2wgX2RpdmlkZW5kKSBvbmx5QWRtaW4gbWVtYmVyRXhpc3RzKF9tZW1iZXIpewogICAgICAgIAogICAgICAgIG1lbWJlcnNbX21lbWJlcl0uaXNEaXZpZGVuZCA9IF9kaXZpZGVuZDsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fc2V0X3dpdGhkcmF3KGFkZHJlc3MgX21lbWJlciwgYm9vbCBfd2l0aGRyYXcpIG9ubHlBZG1pbiBtZW1iZXJFeGlzdHMoX21lbWJlcil7CiAgICAgICAgCiAgICAgICAgbWVtYmVyc1tfbWVtYmVyXS5pc1dpdGhkcmF3ID0gX3dpdGhkcmF3OwogICAgICAgIAogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRfdG90YWxfaW5mbygpIGNvbnN0YW50IHJldHVybnModWludDI1NiBfdG90YWxfZGV2aWRlbmQsIHVpbnQyNTYgX3RvdGFsX3JlbWFpbiwgdWludDI1NiBfdG90YWxfd2l0aGRyYXcpewoKICAgICAgICBfdG90YWxfcmVtYWluID0gdG90YWxfZGV2aWRlbmQgLSB0b3RhbF93aXRoZHJhdzsKICAgICAgICBfdG90YWxfZGV2aWRlbmQgPSB0b3RhbF9kZXZpZGVuZDsKICAgICAgICBfdG90YWxfd2l0aGRyYXcgPSB0b3RhbF93aXRoZHJhdzsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0X2luZm8oYWRkcmVzcyBfbWVtYmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlLCB1aW50MjU2IF9kZXZpZGVuZCwgdWludDI1NiBfcmVtYWluLCB1aW50MjU2IF93aXRoZHJhdyl7CiAgICAgICAgCiAgICAgICAgX2RldmlkZW5kID0gbWVtYmVyc1tfbWVtYmVyXS5kaXZpZGVuZDsKICAgICAgICBfd2l0aGRyYXcgPSBtZW1iZXJzW19tZW1iZXJdLndpdGhkcmF3OwogICAgICAgIF9yZW1haW4gPSBfZGV2aWRlbmQgLSBfd2l0aGRyYXc7CiAgICAgICAgX2JhbGFuY2UgPSBiYWxhbmNlc1tfbWVtYmVyXTsKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBpc01lbWJlciB7CiAgICAgICAgCiAgICAgICAgdWludDI1NiBfcmVtYWluID0gbWVtYmVyc1ttc2cuc2VuZGVyXS5kaXZpZGVuZCAtIG1lbWJlcnNbbXNnLnNlbmRlcl0ud2l0aGRyYXc7CiAgICAgICAgcmVxdWlyZShfcmVtYWluID4gMCk7CiAgICAgICAgcmVxdWlyZShpc1dpdGhkcmF3YWJsZSk7CiAgICAgICAgcmVxdWlyZShtZW1iZXJzW21zZy5zZW5kZXJdLmlzV2l0aGRyYXcpOwogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIoX3JlbWFpbik7CiAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS53aXRoZHJhdyArPSBfcmVtYWluOyAKICAgICAgICB0b3RhbF93aXRoZHJhdyArPSBfcmVtYWluOyAgICAgICAgICAKCiAgICB9CgogICAgZnVuY3Rpb24gYWRtaW5fd2l0aGRyYXcodWludCB4V2VpKXsKCiAgICAgICAgdWludDI1NiBfd2l0aGRyYXcgPSB4V2VpOwoJCXJlcXVpcmUoIG1zZy5zZW5kZXIgPT0gQXBwbHlfU3RvcmVfSWRfRmVlICk7CgoJCXJlcXVpcmUodGhpcy5iYWxhbmNlID4gX3dpdGhkcmF3KTsKCQltc2cuc2VuZGVyLnRyYW5zZmVyKF93aXRoZHJhdyk7CgogICAgICAgIHdpdGhkcmF3X2Ftb3VudCArPSBfd2l0aGRyYXc7ICAKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fd2l0aGRyYXdfYWxsKGFkZHJlc3MgX0FwcGx5U3RvcmVJZEZlZSkgb25seUFkbWluIHsKICAgICAgICAKCQlyZXF1aXJlKCBfQXBwbHlTdG9yZUlkRmVlID09IEFwcGx5X1N0b3JlX0lkX0ZlZSApOyAKCgkJX0FwcGx5U3RvcmVJZEZlZS50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwoKCQl0b3RhbF9kZXZpZGVuZCA9IDA7IC8vbWVtYmVyCgkJdG90YWxfd2l0aGRyYXcgPSAwOyAvL21lbWJlcgoJCXdpdGhkcmF3X2Ftb3VudCA9IDA7IC8vZGVwb3NpdAoJCWRpdmlkZW5kX2Ftb3VudCA9IDA7IC8vYWRtaW4gICAKICAgICAgICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWRtaW5fdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5QWRtaW4gb25seVBheWxvYWRTaXplKDIgKiAzMikgICAgIHsKICAgICAgICAKICAgICAgICByZXF1aXJlKF90byAhPSBBcHBseV9TdG9yZV9JZF9GZWUpOwogICAgICAgIHJlcXVpcmUodG90YWxfdG9rZW53ZWkgPD0gdG90YWxTdXBwbHkgLSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIAogICAgICAgIHRvdGFsX3Rva2Vud2VpICs9IF92YWx1ZTsKICAgIAogICAgICAgIGlmIChtZW1iZXJzW190b10uaXNFeGlzdHMgIT0gdHJ1ZSkgeyAgCiAgICAgICAgICAgIG1lbWJlcnNbX3RvXS5pc0V4aXN0cyA9IHRydWU7CiAgICAgICAgICAgIG1lbWJlcnNbX3RvXS5pc0RpdmlkZW5kID0gdHJ1ZTsKICAgICAgICAgICAgbWVtYmVyc1tfdG9dLmlzV2l0aGRyYXcgPSB0cnVlOyAKICAgICAgICAgICAgbWVtYmVyQXJyYXkucHVzaChfdG8pOyAgCiAgICAgICAgfQogICAgICAgIAogICAgfQogCglmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpICAgICB7CgkgICAgCgkJcmVxdWlyZShfdG8gIT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShpc1BheWFibGUpOwoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CgkJCgkJaWYoX3RvID09IEFwcGx5X1N0b3JlX0lkX0ZlZSl7CgkJICAgIAoJCSAgICByZXF1aXJlKF92YWx1ZSA9PSBzaG9wU3RvcmVQcmljZSk7CgkJICAgIHNob3BTdG9yZU5leHRJZCsrOwoJCSAgICBzaG9wU3RvcmVJZFttc2cuc2VuZGVyXSA9IHNob3BTdG9yZU5leHRJZDsKCQkgICAgc2hvcFN0b3JlQWRkcmVzc1tzaG9wU3RvcmVOZXh0SWRdID0gbXNnLnNlbmRlcjsKCQkKCQl9IGVsc2UgeyAKCQkgICAgCgkJICAgIGlmKGlzTGVhZGluZzRGRihfdG8pKXsKCQkgICAgCiAgICAJCSAgICB1aW50MjU2IHRvMjU2ID0gdWludDI1NihfdG8pOwogICAgICAgICAgICAgICAgdWludDMyIGV4cGlyZSA9IHVpbnQzMih0bzI1Nj4+OTYpOwogICAgICAgICAgICAgICAgdWludDMyIHN0b3JlaWQgPSB1aW50MjQodG8yNTY+PjcyKTsKICAgICAgICAgICAgICAgIHVpbnQ4IGJ5dGUxOV8xID0gdWludDgodWludDgodG8yNTY+PjgpPj40KTsKICAgICAgICAgICAgICAgIHVpbnQ4IGJ5dGUxOV8yID0gdWludDgodWludDgodG8yNTY+PjgpPDw0KTsKICAgICAgICAgICAgICAgIGJ5dGUxOV8yID0gYnl0ZTE5XzI+PjQ7CiAgICAgICAgICAgICAgICB1aW50MjQgYnl0ZTE2MTggPSB1aW50MjQodG8yNTY+PjE2KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVxdWlyZSh1aW50MzIobm93KTxleHBpcmUgfHwgZXhwaXJlPT0wKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVxdWlyZSh1aW50OChzaGEyNTYodWludDE1Mih0bzI1Nj4+OCkpKT09dWludDgodG8yNTYpKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgX3RvID0gc2hvcFN0b3JlQWRkcmVzc1t1aW50KHN0b3JlaWQpXTsKICAgICAgICAgICAgICAgIHJlcXVpcmUodWludChfdG8pPjApOwogICAgCiAgICAgICAgICAgICAgICBpZihieXRlMTlfMSA9PSAzKXsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBieXRlMTlfMjsgaSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZTE2MTggKj0gMTA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoYnl0ZTE2MTggPT0gX3ZhbHVlKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQogICAgCQkKICAgIAkJfQoJCSAgICAKICAgIAkJYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAJCWlmIChtZW1iZXJzW190b10uaXNFeGlzdHMgIT0gdHJ1ZSkgewkJCiAgICAJCQltZW1iZXJzW190b10uaXNFeGlzdHMgPSB0cnVlOwogICAgCQkJbWVtYmVyc1tfdG9dLmlzRGl2aWRlbmQgPSB0cnVlOwogICAgCQkJbWVtYmVyc1tfdG9dLmlzV2l0aGRyYXcgPSB0cnVlOyAKICAgIAkJCW1lbWJlckFycmF5LnB1c2goX3RvKTsJCQogICAgCQl9ICAKCiAgICAgICAgfQoKCQlUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7Cgl9CgkKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpICAgICB7CgkJcmVxdWlyZShfdG8gIT0gQXBwbHlfU3RvcmVfSWRfRmVlKTsKCQlyZXF1aXJlKF9mcm9tICE9IEFwcGx5X1N0b3JlX0lkX0ZlZSk7CiAgICAgICAgcmVxdWlyZShpc1BheWFibGUpOwoJCXZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07IAoJCXJlcXVpcmUoX2FsbG93YW5jZSA+PSBfdmFsdWUpOwoKCQliYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCQliYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CgkJYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwoJCQoJCWlmIChtZW1iZXJzW190b10uaXNFeGlzdHMgIT0gdHJ1ZSkgewkJCgkJCW1lbWJlcnNbX3RvXS5pc0V4aXN0cyA9IHRydWU7CgkJCW1lbWJlcnNbX3RvXS5pc0RpdmlkZW5kID0gdHJ1ZTsKCQkJbWVtYmVyc1tfdG9dLmlzV2l0aGRyYXcgPSB0cnVlOyAKCQkJbWVtYmVyQXJyYXkucHVzaChfdG8pOwkJCgkJfSAgCgoJCVRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7Cgl9CgogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgCiAgICAgICAgcGF5KCk7CiAgICAgICAgCiAgICB9CiAgCiAgICBmdW5jdGlvbiBwYXkoKSBwdWJsaWMgcGF5YWJsZSAgcmV0dXJucyAoYm9vbCkgewogICAgICAgIAogICAgICAgIHJlcXVpcmUoIWlzTGVhZGluZzRGRihtc2cuc2VuZGVyKSk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPiBtaW5fcGF5X3dlaSk7CiAgICAgICAgcmVxdWlyZShpc1BheWFibGUpOwogICAgICAgIAogICAgICAgIGlmKG1zZy5zZW5kZXIgPT0gQXBwbHlfU3RvcmVfSWRfRmVlKXsKCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihpc1JlcXVpcmVEYXRhKXsKICAgICAgICAgICAgICAgIHJlcXVpcmUodWludDMyKG1zZy5kYXRhWzBdKSA9PSB1aW50MzIoMHhGRkZGRkZGRikpOyAgIAogICAgICAgICAgICB9CiAgICAgICAgCiAgICAJCXVpbnQyNTYgZXhjaGFuZ2VXZWkgPSBnZXRfZXhjaGFuZ2Vfd2VpKCk7CiAgICAJCXVpbnQyNTYgdGhpc1Rva2VuV2VpID0gZXhjaGFuZ2VXZWkgKiBtc2cudmFsdWUgLyAxMCoqMTggOwogICAgCQkKICAgIAkJcmVxdWlyZSh0b3RhbF90b2tlbndlaSA8PSB0b3RhbFN1cHBseSAtIHRoaXNUb2tlbldlaSk7CiAgICAgICAgCiAgICAgICAgICAgIGlmIChtZW1iZXJzW21zZy5zZW5kZXJdLmlzRXhpc3RzICE9IHRydWUpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgICBtZW1iZXJzW21zZy5zZW5kZXJdLmlzRGl2aWRlbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgbWVtYmVyc1ttc2cuc2VuZGVyXS5pc1dpdGhkcmF3ID0gdHJ1ZTsgCiAgICAgICAgICAgICAgICBtZW1iZXJBcnJheS5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gIAogICAgCQliYWxhbmNlc1ttc2cuc2VuZGVyXSArPSB0aGlzVG9rZW5XZWk7CiAgICAJCXRvdGFsX3Rva2Vud2VpICs9IHRoaXNUb2tlbldlaTsKICAgIAkJCiAgICAJCVBheWRhdGEobXNnLnNlbmRlciwgbXNnLnZhbHVlLCBtc2cuZGF0YSwgdGhpc1Rva2VuV2VpKTsKICAgIAkJVHJhbnNmZXIodGhpcywgbXNnLnNlbmRlciwgdGhpc1Rva2VuV2VpKTsKCQkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAKICAgIH0KICAgICAgICAgICAgCiAgICBmdW5jdGlvbiBnZXRfdGhpc19iYWxhbmNlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKICAgICAgCiAgICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgICAgCiAgICB9CiAgICAKfQ=='.
	

]
