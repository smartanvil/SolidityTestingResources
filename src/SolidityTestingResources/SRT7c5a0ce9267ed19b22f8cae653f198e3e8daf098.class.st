Class {
	#name : #SRT7c5a0ce9267ed19b22f8cae653f198e3e8daf098,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7c5a0ce9267ed19b22f8cae653f198e3e8daf098 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovLyA9PT09IERJU0NMQUlNRVIgPT09PQovLwovLyBFVEhFUkVVTSBJUyBTVElMTCBBTiBFWFBFUkVNRU5UQUwgVEVDSE5PTE9HWS4KLy8gQUxUSE9VR0ggVEhJUyBTTUFSVCBDT05UUkFDVCBXQVMgQ1JFQVRFRCBXSVRIIEdSRUFUIENBUkUgQU5EIElOIFRIRSBIT1BFIE9GIEJFSU5HIFVTRUZVTCwgTk8gR1VBUkFOVEVFUyBPRiBGTEFXTEVTUyBPUEVSQVRJT04gQ0FOIEJFIEdJVkVOLgovLyBJTiBQQVJUSUNVTEFSIC0gU1VCVElMRSBCVUdTLCBIQUNLRVIgQVRUQUNLUyBPUiBNQUxGVU5DVElPTiBPRiBVTkRFUkxZSU5HIFRFQ0hOT0xPR1kgQ0FOIENBVVNFIFVOSU5URU5USU9OQUwgQkVIQVZJT1VSLgovLyBZT1UgQVJFIFNUUk9OR0xZIEVOQ09VUkFHRUQgVE8gU1RVRFkgVEhJUyBTTUFSVCBDT05UUkFDVCBDQVJFRlVMTFkgSU4gT1JERVIgVE8gVU5ERVJTVEFORCBQT1NTSUJMRSBFREdFIENBU0VTIEFORCBSSVNLUy4KLy8gRE9OJ1QgVVNFIFRISVMgU01BUlQgQ09OVFJBQ1QgSUYgWU9VIEhBVkUgU1VCU1RBTlRJQUwgRE9VQlRTIE9SIElGIFlPVSBET04nVCBLTk9XIFdIQVQgWU9VIEFSRSBET0lORy4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQovLyBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsCi8vIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsCi8vIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLAovLyBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgovLyA9PT09Ci8vCgovLy8gQGF1dGhvciBTYW50aW1lbnQgTExDCi8vLyBAdGl0bGUgIFNBTiAtIHNhbnRpbWVudCB0b2tlbgoKY29udHJhY3QgQmFzZSB7CgogICAgZnVuY3Rpb24gbWF4KHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhID49IGIgPyBhIDogYjsgfQogICAgZnVuY3Rpb24gbWluKHVpbnQgYSwgdWludCBiKSByZXR1cm5zICh1aW50KSB7IHJldHVybiBhIDw9IGIgPyBhIDogYjsgfQoKICAgIG1vZGlmaWVyIG9ubHkoYWRkcmVzcyBhbGxvd2VkKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gYWxsb3dlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCgogICAgLy8vQHJldHVybiBUcnVlIGlmIGBfYWRkcmAgaXMgYSBjb250cmFjdAogICAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIF9hZGRyKSBjb25zdGFudCBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKF9hZGRyID09IDApIHJldHVybiBmYWxzZTsKICAgICAgICB1aW50IHNpemU7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBzaXplIDo9IGV4dGNvZGVzaXplKF9hZGRyKQogICAgICAgIH0KICAgICAgICByZXR1cm4gKHNpemUgPiAwKTsKICAgIH0KCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICAvLyAqICAgICAgICAgIHJlZW50cmFuY3kgaGFuZGxpbmcgICAgICAgICAgICAgICAgICAqCiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogICAgLy9AZGV2IHByZWRlZmluZWQgbG9ja3MgKHVwIHRvIHVpbnQgYml0IGxlbmd0aCwgaS5lLiAyNTYgcG9zc2libGUpCiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMCA9IDIgKiogMDsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDAxID0gMiAqKiAxOwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDIgPSAyICoqIDI7CiAgICB1aW50IGNvbnN0YW50IGludGVybmFsIEwwMyA9IDIgKiogMzsKICAgIHVpbnQgY29uc3RhbnQgaW50ZXJuYWwgTDA0ID0gMiAqKiA0OwogICAgdWludCBjb25zdGFudCBpbnRlcm5hbCBMMDUgPSAyICoqIDU7CgogICAgLy9wcmV2ZW50cyByZWVudHJhbmN5IGF0dGFjczogc3BlY2lmaWMgbG9ja3MKICAgIHVpbnQgcHJpdmF0ZSBiaXRsb2NrcyA9IDA7CiAgICBtb2RpZmllciBub1JlZW50cmFuY3kodWludCBtKSB7CiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOwogICAgICAgIGlmIChfbG9ja3MgJiBtID4gMCkgdGhyb3c7CiAgICAgICAgYml0bG9ja3MgfD0gbTsKICAgICAgICBfOwogICAgICAgIGJpdGxvY2tzID0gX2xvY2tzOwogICAgfQoKICAgIG1vZGlmaWVyIG5vQW55UmVlbnRyYW5jeSB7CiAgICAgICAgdmFyIF9sb2NrcyA9IGJpdGxvY2tzOwogICAgICAgIGlmIChfbG9ja3MgPiAwKSB0aHJvdzsKICAgICAgICBiaXRsb2NrcyA9IHVpbnQoLTEpOwogICAgICAgIF87CiAgICAgICAgYml0bG9ja3MgPSBfbG9ja3M7CiAgICB9CgogICAgLy8vQGRldiBlbXB0eSBtYXJraW5nIG1vZGlmaWVyIHNpZ25hbGluZyB0byB1c2VyIG9mIHRoZSBtYXJrZWQgZnVuY3Rpb24gLCB0aGF0IGl0IGNhbiBjYXVzZSBhbiByZWVudHJhbnQgY2FsbC4KICAgIC8vLyAgICAgZGV2ZWxvcGVyIHNob3VsZCBtYWtlIHRoZSBjYWxsZXIgZnVuY3Rpb24gcmVlbnRyYW50LXNhZmUgaWYgaXQgdXNlIGEgcmVlbnRyYW50IGZ1bmN0aW9uLgogICAgbW9kaWZpZXIgcmVlbnRyYW50IHsgXzsgfQoKfQoKY29udHJhY3QgT3duZWQgaXMgQmFzZSB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lcjsKCiAgICBmdW5jdGlvbiBPd25lZCgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHkob3duZXIpIHsKICAgICAgICBuZXdPd25lciA9IF9uZXdPd25lcjsKICAgIH0KCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBvbmx5KG5ld093bmVyKSB7CiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQoKICAgIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90byk7Cgp9CgoKY29udHJhY3QgRVJDMjAgaXMgT3duZWQgewoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc1N0YXJ0ZWRPbmx5IHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc1N0YXJ0ZWRPbmx5IHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIGlzU3RhcnRlZE9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBib29sICAgIHB1YmxpYyBpc1N0YXJ0ZWQgPSBmYWxzZTsKCiAgICBtb2RpZmllciBvbmx5SG9sZGVyKGFkZHJlc3MgaG9sZGVyKSB7CiAgICAgICAgaWYgKGJhbGFuY2VPZihob2xkZXIpID09IDApIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNTdGFydGVkT25seSgpIHsKICAgICAgICBpZiAoIWlzU3RhcnRlZCkgdGhyb3c7CiAgICAgICAgXzsKICAgIH0KCn0KCgpjb250cmFjdCBTdWJzY3JpcHRpb25Nb2R1bGUgewogICAgZnVuY3Rpb24gYXR0YWNoVG9rZW4oYWRkcmVzcyBhZGRyKSBwdWJsaWMgOwp9Cgpjb250cmFjdCBTQU4gaXMgT3duZWQsIEVSQzIwIHsKCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgICAgID0gIlNBTnRpbWVudCBuZXR3b3JrIHRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sICAgPSAiU0FOIjsKICAgIHVpbnQ4ICBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgICBhZGRyZXNzIENST1dEU0FMRV9NSU5URVIgPSAweERhMkNmODEwYzU3MTgxMzUyNDc2Mjg2ODlEODRGOTRjNjFCNDFkNkE7CiAgICBhZGRyZXNzIHB1YmxpYyBTVUJTQ1JJUFRJT05fTU9EVUxFID0gMHgwMDAwMDAwMDsKICAgIGFkZHJlc3MgcHVibGljIGJlbmVmaWNpYXJ5OwoKICAgIHVpbnQgcHVibGljIFBMQVRGT1JNX0ZFRV9QRVJfMTAwMDAgPSAxOyAvLzAuMDElCiAgICB1aW50IHB1YmxpYyB0b3RhbE9uRGVwb3NpdDsKICAgIHVpbnQgcHVibGljIHRvdGFsSW5DaXJjdWxhdGlvbjsKCiAgICAvLy9AZGV2IGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBTQU4oKSB7CiAgICAgICAgYmVuZWZpY2lhcnkgPSBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBEb24ndCBhY2NlcHQgZXRoZXJzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdzsKICAgIH0KCiAgICAvLz09PT09PT09IFNFQ1RJT04gQ29uZmlndXJhdGlvbjogT3duZXIgb25seSA9PT09PT09PQogICAgLy8KICAgIC8vL0Bub3RpY2Ugc2V0IGJlbmVmaWNpYXJ5IC0gdGhlIGFjY291bnQgcmVjZWl2aW5nIHBsYXRmb3JtIGZlZXMuCiAgICBmdW5jdGlvbiBzZXRCZW5lZmljaWFyeShhZGRyZXNzIG5ld0JlbmVmaWNpYXJ5KQogICAgZXh0ZXJuYWwKICAgIG9ubHkob3duZXIpIHsKICAgICAgICBiZW5lZmljaWFyeSA9IG5ld0JlbmVmaWNpYXJ5OwogICAgfQoKCiAgICAvLy9Abm90aWNlIGF0dGFjaCBtb2R1bGUgbWFuYWdpbmcgc3Vic2NyaXB0aW9ucy4gaWYgc3ViTW9kdWxlPT0weDAsIHRoZW4gZGlzYWJsZXMgc3Vic2NyaXB0aW9uIGZ1bmN0aW9uYWxpdHkgZm9yIHRoaXMgdG9rZW4uCiAgICAvLy8gZGV0YWNoZWQgbW9kdWxlIGNhbiB1c3VhbGx5IG1hbmFnZSBzdWJzY3JpcHRpb25zLCBidXQgYWxsIG9wZXJhdGlvbnMgY2hhbmdpbmcgdG9rZW4gYmFsYW5jZXMgYXJlIGRpc2FibGVkLgogICAgZnVuY3Rpb24gYXR0YWNoU3Vic2NyaXB0aW9uTW9kdWxlKFN1YnNjcmlwdGlvbk1vZHVsZSBzdWJNb2R1bGUpCiAgICBub0FueVJlZW50cmFuY3kKICAgIGV4dGVybmFsCiAgICBvbmx5KG93bmVyKSB7CiAgICAgICAgU1VCU0NSSVBUSU9OX01PRFVMRSA9IHN1Yk1vZHVsZTsKICAgICAgICBpZiAoYWRkcmVzcyhzdWJNb2R1bGUpID4gMCkgc3ViTW9kdWxlLmF0dGFjaFRva2VuKHRoaXMpOwogICAgfQoKICAgIC8vL0Bub3RpY2Ugc2V0IHBsYXRmb3JtIGZlZSBkZW5vbWluYXRlZCBpbiAxLzEwMDAwIG9mIFNBTiB0b2tlbi4gVGh1cyAiMSIgbWVhbnMgMC4wMSUgb2YgU0FOIHRva2VuLgogICAgZnVuY3Rpb24gc2V0UGxhdGZvcm1GZWVQZXIxMDAwMCh1aW50IG5ld0ZlZSkKICAgIGV4dGVybmFsCiAgICBvbmx5KG93bmVyKSB7CiAgICAgICAgcmVxdWlyZSAobmV3RmVlIDw9IDEwMDAwKTsgLy9mb3JtYWxseSBtYXhpbXVtIGZlZSBpcyAxMDAlIChjb21wbGV0ZWx5IGluc2FuZSBidXQgdGVjaG5pY2FsbHkgcG9zc2libGUpCiAgICAgICAgUExBVEZPUk1fRkVFX1BFUl8xMDAwMCA9IG5ld0ZlZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydFRva2VuKCkKICAgIGlzTm90U3RhcnRlZE9ubHkKICAgIG9ubHkob3duZXIpIHsKICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gPSB0b3RhbFN1cHBseTsKICAgICAgICBpc1N0YXJ0ZWQgPSB0cnVlOwogICAgfQoKICAgIC8vPT09PT09PT0gSW50ZXJmYWNlIFhSYXRlUHJvdmlkZXI6IGEgdHJpdmlhbCBleGNoYW5nZSByYXRlIHByb3ZpZGVyLiBSYXRlIGlzIDE6MSBhbmQgU0FOIHN5bWJvbCBhcyB0aGUgY29kZQogICAgLy8KICAgIC8vL0BkZXYgdXNlZCBhcyBhIGRlZmF1bHQgWFJhdGVQcm92aWRlciAoaWQ9PTApIGJ5IHN1YnNjcmlwdGlvbiBtb2R1bGUuCiAgICAvLy9Abm90aWNlIHJldHVybnMgYWx3YXlzIDEgYmVjYXVzZSBleGNoYW5nZSByYXRlIG9mIHRoZSB0b2tlbiB0byBpdHNlbGYgaXMgYWx3YXlzIDEuCiAgICBmdW5jdGlvbiBnZXRSYXRlKCkgcmV0dXJucyh1aW50MzIgLHVpbnQzMikgeyByZXR1cm4gKDEsMSk7ICB9CiAgICBmdW5jdGlvbiBnZXRDb2RlKCkgcHVibGljIHJldHVybnMoc3RyaW5nKSAgeyByZXR1cm4gc3ltYm9sOyB9CgoKICAgIC8vPT09PSBJbnRlcmZhY2UgRVJDMjBNb2R1bGVTdXBwb3J0OiBTdWJzY3JpcHRpb24sIERlcG9zaXQgYW5kIFBheW1lbnQgU3VwcG9ydCA9PT09PQogICAgLy8vCiAgICAvLy9AZGV2IHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byBvcGVyYXRlIG9uIHRva2VuIGJhbGFuY2VzLgogICAgLy8vQHBhcmFtIG1zZ19zZW5kZXIgc2hvdWxkIGJlIGFuIG9yaWdpbmFsIG1zZy5zZW5kZXIgcHJvdmlkZWQgdG8gc3Vic2NyaXB0aW9uIG1vZHVsZS4KICAgIGZ1bmN0aW9uIF9mdWxmaWxsUHJlYXBwcm92ZWRQYXltZW50KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYWRkcmVzcyBtc2dfc2VuZGVyKQogICAgcHVibGljCiAgICBvbmx5VHJ1c3RlZAogICAgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICBzdWNjZXNzID0gX2Zyb20gIT0gbXNnX3NlbmRlciAmJiBhbGxvd2VkW19mcm9tXVttc2dfc2VuZGVyXSA+PSBfdmFsdWU7CiAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAgIFBheW1lbnQoX2Zyb20sIF90bywgX3ZhbHVlLCBfZmVlKF92YWx1ZSksIG1zZ19zZW5kZXIsIFBheW1lbnRTdGF0dXMuQVBQUk9WQUxfRVJST1IsIDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBfZnVsZmlsbFBheW1lbnQoX2Zyb20sIF90bywgX3ZhbHVlLCAwLCBtc2dfc2VuZGVyKTsKICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGFsbG93ZWRbX2Zyb21dW21zZ19zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gc3VjY2VzczsKICAgIH0KCiAgICAvLy9AZGV2IHVzZWQgYnkgc3Vic2NyaXB0aW9uIG1vZHVsZSB0byBvcGVyYXRlIG9uIHRva2VuIGJhbGFuY2VzLgogICAgLy8vQHBhcmFtIG1zZ19zZW5kZXIgc2hvdWxkIGJlIGFuIG9yaWdpbmFsIG1zZy5zZW5kZXIgcHJvdmlkZWQgdG8gc3Vic2NyaXB0aW9uIG1vZHVsZS4KICAgIGZ1bmN0aW9uIF9mdWxmaWxsUGF5bWVudChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHVpbnQgc3ViSWQsIGFkZHJlc3MgbXNnX3NlbmRlcikKICAgIHB1YmxpYwogICAgb25seVRydXN0ZWQKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIHZhciBmZWUgPSBfZmVlKF92YWx1ZSk7CiAgICAgICAgYXNzZXJ0IChmZWUgPD0gX3ZhbHVlKTsgLy9pbnRlcm5hbCBzYW5pdHkgY2hlY2sKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZSAtIGZlZTsKICAgICAgICAgICAgYmFsYW5jZXNbYmVuZWZpY2lhcnldICs9IGZlZTsKICAgICAgICAgICAgUGF5bWVudChfZnJvbSwgX3RvLCBfdmFsdWUsIGZlZSwgbXNnX3NlbmRlciwgUGF5bWVudFN0YXR1cy5PSywgc3ViSWQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBQYXltZW50KF9mcm9tLCBfdG8sIF92YWx1ZSwgZmVlLCBtc2dfc2VuZGVyLCBQYXltZW50U3RhdHVzLkJBTEFOQ0VfRVJST1IsIHN1YklkKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfZmVlKHVpbnQgX3ZhbHVlKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50IGZlZSkgewogICAgICAgIHJldHVybiBfdmFsdWUgKiBQTEFURk9STV9GRUVfUEVSXzEwMDAwIC8gMTAwMDA7CiAgICB9CgogICAgLy8vQG5vdGljZSB1c2VkIGJ5IHN1YnNjcmlwdGlvbiBtb2R1bGUgdG8gcmUtY3JlYXRlIHRva2VuIGZyb20gcmV0dXJuaW5nIGRlcG9zaXQuCiAgICAvLy9AZGV2IGEgc3Vic2NyaXB0aW9uIG1vZHVsZSBpcyByZXNwb25zaWJsZSB0byBjb3JyZWN0IGRlcG9zaXQgbWFuYWdlbWVudC4KICAgIGZ1bmN0aW9uIF9taW50RnJvbURlcG9zaXQoYWRkcmVzcyBvd25lciwgdWludCBhbW91bnQpCiAgICBwdWJsaWMKICAgIG9ubHlUcnVzdGVkIHsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gKz0gYW1vdW50OwogICAgICAgIHRvdGFsT25EZXBvc2l0IC09IGFtb3VudDsKICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gKz0gYW1vdW50OwogICAgfQoKICAgIC8vL0Bub3RpY2UgdXNlZCBieSBzdWJzY3JpcHRpb24gbW9kdWxlIHRvIGJ1cm4gdG9rZW4gd2hpbGUgY3JlYXRpbmcgYSBuZXcgZGVwb3NpdC4KICAgIC8vL0BkZXYgYSBzdWJzY3JpcHRpb24gbW9kdWxlIGlzIHJlc3BvbnNpYmxlIHRvIGNyZWF0ZSBhbmQgbWFpbnRhaW4gdGhlIGRlcG9zaXQgcmVjb3JkLgogICAgZnVuY3Rpb24gX2J1cm5Gb3JEZXBvc2l0KGFkZHJlc3Mgb3duZXIsIHVpbnQgYW1vdW50KQogICAgcHVibGljCiAgICBvbmx5VHJ1c3RlZAogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW293bmVyXSA+PSBhbW91bnQpIHsKICAgICAgICAgICAgYmFsYW5jZXNbb3duZXJdIC09IGFtb3VudDsKICAgICAgICAgICAgdG90YWxPbkRlcG9zaXQgKz0gYW1vdW50OwogICAgICAgICAgICB0b3RhbEluQ2lyY3VsYXRpb24gLT0gYW1vdW50OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICAKICAgIC8vPT09PT09PT09IENyb3dkc2FsZSBPbmx5ID09PT09PT09PT09PT09PQogICAgLy8vQG5vdGljZSBtaW50IG5ldyB0b2tlbiBmb3IgZ2l2ZW4gYWNjb3VudCBpbiBjcm93ZHNhbGUgc3RhZ2UKICAgIC8vL0BkZXYgYWxsb3dlZCBvbmx5IGlmIHRva2VuIG5vdCBzdGFydGVkIHlldCBhbmQgb25seSBmb3IgcmVnaXN0ZXJlZCBtaW50ZXIuCiAgICAvLy9AZGV2IHRva2VucyBhcmUgYmVjb21lIGluIGNpcmN1bGF0aW9uIGFmdGVyIHRva2VuIHN0YXJ0LgogICAgZnVuY3Rpb24gbWludCh1aW50IGFtb3VudCwgYWRkcmVzcyBhY2NvdW50KQogICAgb25seUNyb3dkc2FsZU1pbnRlcgogICAgaXNOb3RTdGFydGVkT25seQogICAgewogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsKICAgICAgICBiYWxhbmNlc1thY2NvdW50XSs9YW1vdW50OwogICAgfQoKICAgIC8vL0Bub3RpY2Ugc3RhcnQgbm9ybWFsIG9wZXJhdGlvbiBvZiB0aGUgdG9rZW4uIE5vIG1pbnRpbmcgaXMgcG9zc2libGUgYWZ0ZXIgdGhpcyBwb2ludC4KICAgIGZ1bmN0aW9uIHN0YXJ0KCkKICAgIG9ubHlDcm93ZHNhbGVNaW50ZXIKICAgIGlzTm90U3RhcnRlZE9ubHkgewogICAgICAgIHRvdGFsSW5DaXJjdWxhdGlvbiA9IHRvdGFsU3VwcGx5OwogICAgICAgIGlzU3RhcnRlZCA9IHRydWU7CiAgICB9CgogICAgLy89PT09PT09PT0gU0VDVElPTjogTW9kaWZpZXIgPT09PT09PT09PT09PT09CgogICAgbW9kaWZpZXIgb25seUNyb3dkc2FsZU1pbnRlcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBDUk9XRFNBTEVfTUlOVEVSKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlUcnVzdGVkKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IFNVQlNDUklQVElPTl9NT0RVTEUpIHRocm93OwogICAgICAgIF87CiAgICB9CgogICAgLy8vQGRldiB0b2tlbiBub3Qgc3RhcnRlZCBtZWFucyBtaW50aW5nIGlzIHBvc3NpYmxlLCBidXQgdXN1YWwgdG9rZW4gb3BlcmF0aW9ucyBhcmUgbm90LgogICAgbW9kaWZpZXIgaXNOb3RTdGFydGVkT25seSgpIHsKICAgICAgICBpZiAoaXNTdGFydGVkKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIGVudW0gUGF5bWVudFN0YXR1cyB7T0ssIEJBTEFOQ0VfRVJST1IsIEFQUFJPVkFMX0VSUk9SfQogICAgLy8vQG5vdGljZSBldmVudCBpc3N1ZWQgb24gYW55IGZlZSBiYXNlZCBwYXltZW50IChtYWRlIG9mIGZhaWxlZCkuCiAgICAvLy9AcGFyYW0gc3ViSWQgLSByZWxhdGVkIHN1YnNjcmlwdGlvbiBJZCBpZiBhbnksIG9yIHplcm8gb3RoZXJ3aXNlLgogICAgZXZlbnQgUGF5bWVudChhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIHVpbnQgX2ZlZSwgYWRkcmVzcyBjYWxsZXIsIFBheW1lbnRTdGF0dXMgc3RhdHVzLCB1aW50IHN1YklkKTsKCn0vL2NvbnRyYWN0IFNBTg=='.
	

]
