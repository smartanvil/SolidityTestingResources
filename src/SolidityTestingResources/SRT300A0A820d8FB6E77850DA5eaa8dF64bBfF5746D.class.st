Class {
	#name : #SRT300A0A820d8FB6E77850DA5eaa8dF64bBfF5746D,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT300A0A820d8FB6E77850DA5eaa8dF64bBfF5746D >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCi8vIEJPT01SIENvaW4gY29udHJhY3QKLy8gRm9yIExpYkxvYiwgWmFjaCBTcG9vciwgYnkgTWljaGFlbCBIYW5uYQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cn0KCi8qKgogKiBAdGl0bGUgUGF1c2FibGUKICogQGRldiBCYXNlIGNvbnRyYWN0IHdoaWNoIGFsbG93cyBjaGlsZHJlbiB0byBpbXBsZW1lbnQgYW4gZW1lcmdlbmN5IHN0b3AgbWVjaGFuaXNtLgogKi8KY29udHJhY3QgUGF1c2FibGUgaXMgT3duYWJsZSB7CiAgZXZlbnQgUGF1c2UoKTsKICBldmVudCBVbnBhdXNlKCk7CgogIGJvb2wgcHVibGljIHBhdXNlZCA9IGZhbHNlOwoKCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBub3QgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5Ob3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIHdoZW5QYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHBhdXNlLCB0cmlnZ2VycyBzdG9wcGVkIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gcGF1c2UoKSBvbmx5T3duZXIgd2hlbk5vdFBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gdHJ1ZTsKICAgIFBhdXNlKCk7CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gdW5wYXVzZSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgKi8KICBmdW5jdGlvbiB1bnBhdXNlKCkgb25seU93bmVyIHdoZW5QYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IGZhbHNlOwogICAgVW5wYXVzZSgpOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLgogKi8KY29udHJhY3QgQmFzaWNUb2tlbiBpcyBFUkMyMEJhc2ljIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGJhbGFuY2VzOwoKICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAvLyBTYWZlTWF0aC5zdWIgd2lsbCB0aHJvdyBpZiB0aGVyZSBpcyBub3QgZW5vdWdoIGJhbGFuY2UuCiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAqIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdG8gcXVlcnkgdGhlIHRoZSBiYWxhbmNlIG9mLgogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbX2Zyb21dKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgKgogICAqIEJld2FyZSB0aGF0IGNoYW5naW5nIGFuIGFsbG93YW5jZSB3aXRoIHRoaXMgbWV0aG9kIGJyaW5ncyB0aGUgcmlzayB0aGF0IHNvbWVvbmUgbWF5IHVzZSBib3RoIHRoZSBvbGQKICAgKiBhbmQgdGhlIG5ldyBhbGxvd2FuY2UgYnkgdW5mb3J0dW5hdGUgdHJhbnNhY3Rpb24gb3JkZXJpbmcuIE9uZSBwb3NzaWJsZSBzb2x1dGlvbiB0byBtaXRpZ2F0ZSB0aGlzCiAgICogcmFjZSBjb25kaXRpb24gaXMgdG8gZmlyc3QgcmVkdWNlIHRoZSBzcGVuZGVyJ3MgYWxsb3dhbmNlIHRvIDAgYW5kIHNldCB0aGUgZGVzaXJlZCB2YWx1ZSBhZnRlcndhcmRzOgogICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlIHRva2VuCiAqCiAqIEBkZXYgU3RhbmRhcmRUb2tlbiBtb2RpZmllZCB3aXRoIHBhdXNhYmxlIHRyYW5zZmVycy4KICoqLwpjb250cmFjdCBQYXVzYWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFBhdXNhYmxlIHsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHN1cGVyLmFwcHJvdmUoX3NwZW5kZXIsIF92YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgcmV0dXJuIHN1cGVyLmluY3JlYXNlQXBwcm92YWwoX3NwZW5kZXIsIF9hZGRlZFZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJldHVybiBzdXBlci5kZWNyZWFzZUFwcHJvdmFsKF9zcGVuZGVyLCBfc3VidHJhY3RlZFZhbHVlKTsKICB9Cn0KCi8qKgogKiBAdGl0bGUgUmVmdW5kVmF1bHQKICogQGRldiBUaGlzIGNvbnRyYWN0IGlzIHVzZWQgZm9yIHN0b3JpbmcgZnVuZHMgd2hpbGUgYSBjcm93ZHNhbGUKICogaXMgaW4gcHJvZ3Jlc3MuIFN1cHBvcnRzIHJlZnVuZGluZyB0aGUgbW9uZXkgaWYgY3Jvd2RzYWxlIGZhaWxzLAogKiBhbmQgZm9yd2FyZGluZyBpdCBpZiBjcm93ZHNhbGUgaXMgc3VjY2Vzc2Z1bC4KICovCmNvbnRyYWN0IFJlZnVuZFZhdWx0IGlzIE93bmFibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBlbnVtIFN0YXRlIHsgQWN0aXZlLCBSZWZ1bmRpbmcsIENsb3NlZCB9CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGRlcG9zaXRlZDsKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CiAgU3RhdGUgcHVibGljIHN0YXRlOwoKICBldmVudCBDbG9zZWQoKTsKICBldmVudCBSZWZ1bmRzRW5hYmxlZCgpOwogIGV2ZW50IFJlZnVuZGVkKGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB3ZWlBbW91bnQpOwoKICBmdW5jdGlvbiBSZWZ1bmRWYXVsdChhZGRyZXNzIF93YWxsZXQpIHB1YmxpYyB7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gYWRkcmVzcygwKSk7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogICAgc3RhdGUgPSBTdGF0ZS5BY3RpdmU7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0KGFkZHJlc3MgaW52ZXN0b3IpIG9ubHlPd25lciBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBkZXBvc2l0ZWRbaW52ZXN0b3JdID0gZGVwb3NpdGVkW2ludmVzdG9yXS5hZGQobXNnLnZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGNsb3NlKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLkNsb3NlZDsKICAgIENsb3NlZCgpOwogICAgd2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiBlbmFibGVSZWZ1bmRzKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICByZXF1aXJlKHN0YXRlID09IFN0YXRlLkFjdGl2ZSk7CiAgICBzdGF0ZSA9IFN0YXRlLlJlZnVuZGluZzsKICAgIFJlZnVuZHNFbmFibGVkKCk7CiAgfQoKICBmdW5jdGlvbiByZWZ1bmQoYWRkcmVzcyBpbnZlc3RvcikgcHVibGljIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU3RhdGUuUmVmdW5kaW5nKTsKICAgIHVpbnQyNTYgZGVwb3NpdGVkVmFsdWUgPSBkZXBvc2l0ZWRbaW52ZXN0b3JdOwogICAgZGVwb3NpdGVkW2ludmVzdG9yXSA9IDA7CiAgICBpbnZlc3Rvci50cmFuc2ZlcihkZXBvc2l0ZWRWYWx1ZSk7CiAgICBSZWZ1bmRlZChpbnZlc3RvciwgZGVwb3NpdGVkVmFsdWUpOwogIH0KfQoKLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgovLyAqICAgQm9vbXJDb2luQ3Jvd2RzYWxlCi8vICogICBJbmZvOgovLyAgICAgLSBTYWxlIHdpbGwgYmUgZm9yIDMwJSAoMTUwTSBvZiA1MDApIG9mIHRvdGFsIHRva2VucwovLyAgICAgLSBGdW5kaW5nIGR1cmluZyBwcmVzYWxlIGRldGVybWluZXMgcHJpY2UKLy8gICAgIC0gVGltZXMgYXJlIGluIFVUQyAoc2Vjb25kcyBzaW5jZSBKYW4gMSAxOTcwKQovLwovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCmNvbnRyYWN0IEJvb21yQ29pbkNyb3dkc2FsZSBpcyBPd25hYmxlewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIC8vICBTZXR0aW5ncwogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogIC8vIG1pbmltdW0gYW1vdW50IG9mIGZ1bmRzIHRvIGJlIHJhaXNlZCBpbiB3ZWlzCiAgdWludDI1NiBwcml2YXRlIG1pbkdvYWwgPSAwOwoKICAvLyBtYXhpbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgaW4gd2VpcwogIHVpbnQyNTYgcHJpdmF0ZSBtYXhHb2FsID0gMDsKCiAgLy8gVG9rZW5zIGZvciBwcmVzYWxlCiAgdWludDI1NiBwcml2YXRlIHRva2VuTGltaXRQcmVzYWxlICAgID0gIDA7CgogIC8vIFRva2VucyBmb3IgY3Jvd2RzYWxlCiAgdWludDI1NiBwcml2YXRlIHRva2VuTGltaXRDcm93ZHNhbGUgID0gMDsKCiAgLy8gUHJlc2FsZSBkaXNjb3VudCBmb3IgZWFjaCBwaGFzZQogIHVpbnQyNTYgcHJpdmF0ZSBwcmVzYWxlRGlzY291bnQgICAgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVEaXNjb3VudDEgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVEaXNjb3VudDIgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVEaXNjb3VudDMgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVEaXNjb3VudDQgPSAwOwoKICAvLyBkdXJhdGlvbnMgZm9yIGVhY2ggcGhhc2UKICB1aW50MjU2IHByaXZhdGUgIHByZXNhbGVEdXJhdGlvbiAgICA9IDA7Ly82MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKICB1aW50MjU2IHByaXZhdGUgIGNyb3dkc2FsZUR1cmF0aW9uMSA9IDA7Ly82MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKICB1aW50MjU2IHByaXZhdGUgIGNyb3dkc2FsZUR1cmF0aW9uMiA9IDA7Ly82MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKICB1aW50MjU2IHByaXZhdGUgIGNyb3dkc2FsZUR1cmF0aW9uMyA9IDA7Ly82MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKICB1aW50MjU2IHByaXZhdGUgIGNyb3dkc2FsZUR1cmF0aW9uNCA9IDA7Ly82MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAvLyAgSW5mbwogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogIC8vIFRva2VucyBTb2xkCiAgdWludDI1NiBwcml2YXRlIHRva2VuUHJlc2FsZVRvdGFsU29sZCAgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSB0b2tlbkNyb3dkc2FsZVRvdGFsU29sZCAgPSAwOwoKICAvLyBCYWNrZXJzCiAgdWludDI1NiBwcml2YXRlIHRvdGFsQmFja2VycyAgPSAwOwoKICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogIHVpbnQyNTYgcHJpdmF0ZSB3ZWlSYWlzZWQgPSAwOwoKICAvLyBwcmljZXMgZm9yIGVhY2ggcGhhc2UKICB1aW50MjU2IHByaXZhdGUgcHJlc2FsZVRva2VuUHJpY2UgICAgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBiYXNlVG9rZW5QcmljZSA9IDA7CiAgdWludDI1NiBwcml2YXRlIGNyb3dkc2FsZVRva2VuUHJpY2UxID0gMDsKICB1aW50MjU2IHByaXZhdGUgY3Jvd2RzYWxlVG9rZW5QcmljZTIgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVUb2tlblByaWNlMyA9IDA7CiAgdWludDI1NiBwcml2YXRlIGNyb3dkc2FsZVRva2VuUHJpY2U0ID0gMDsKCiAgLy8gQ291bnQgb2YgdG9rZW4gZGlzdHJpYnV0aW9ucyBieSBwaGFzZQogIHVpbnQyNTYgcHJpdmF0ZSBwcmVzYWxlVG9rZW5TZW50ICAgICA9IDA7CiAgdWludDI1NiBwcml2YXRlIGNyb3dkc2FsZVRva2VuU29sZDEgID0gMDsKICB1aW50MjU2IHByaXZhdGUgY3Jvd2RzYWxlVG9rZW5Tb2xkMiAgPSAwOwogIHVpbnQyNTYgcHJpdmF0ZSBjcm93ZHNhbGVUb2tlblNvbGQzICA9IDA7CiAgdWludDI1NiBwcml2YXRlIGNyb3dkc2FsZVRva2VuU29sZDQgID0gMDsKCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAvLyAgVmFycwogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogIC8vIEZpbmFsaXphdGlvbiBGbGFnCiAgYm9vbCBwcml2YXRlIGZpbmFsaXplZCA9IGZhbHNlOwoKICAvLyBIYWx0ZWQgRmxhZwogIGJvb2wgcHJpdmF0ZSBoYWx0ZWQgPSBmYWxzZTsKCiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwoKICAvLyBUaGUgdG9rZW4gYmVpbmcgc29sZAogIFBhdXNhYmxlVG9rZW4gcHVibGljIGJvb21yVG9rZW47CgogIC8vIEFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAogIGFkZHJlc3MgcHJpdmF0ZSB3YWxsZXQ7CgogIC8vIHJlZnVuZCB2YXVsdCB1c2VkIHRvIGhvbGQgZnVuZHMgd2hpbGUgY3Jvd2RzYWxlIGlzIHJ1bm5pbmcKICBSZWZ1bmRWYXVsdCBwcml2YXRlIHZhdWx0OwoKICAvLyB0cmFja2luZyBmb3IgZGVwb3NpdHMKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBkZXBvc2l0czsKCiAgLy8gdHJhY2tpbmcgZm9yIHB1cmNoYXNlcnMKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBwdXJjaGFzZXM7CgogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgLy8gIEV2ZW50cwogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgogIC8vIExvZyBldmVudCBmb3IgY3Jvd2RzYWxlIHB1cmNoYXNlCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgUHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgQmVuZWZpY2lhcnksIHVpbnQyNTYgVmFsdWVJbldlaSwgdWludDI1NiBUb2tlbkFtb3VudCk7CgogIC8vIExvZyBldmVudCBmb3IgcHJlc2FsZSBwdXJjaGFzZQogIGV2ZW50IFByZXNhbGVQdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgUHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgQmVuZWZpY2lhcnksIHVpbnQyNTYgVmFsdWVJbldlaSk7CgogIC8vIExvZyBldmVudCBmb3IgZGlzdHJpYnV0aW9uIG9mIHRva2VucyBmb3IgcHJlc2FsZSBwdXJjaGFzZXJzCiAgZXZlbnQgUHJlc2FsZURpc3RyaWJ1dGlvbihhZGRyZXNzIGluZGV4ZWQgUHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgQmVuZWZpY2lhcnksIHVpbnQyNTYgVG9rZW5BbW91bnQpOwoKICAvLyBGaW5hbGl6YXRpb24KICBldmVudCBGaW5hbGl6ZWQoKTsKCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAvLyAgQ29uc3RydWN0b3IKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIGZ1bmN0aW9uIEJvb21yQ29pbkNyb3dkc2FsZSgpIHB1YmxpY3sKCiAgfQoKICBmdW5jdGlvbiBTdGFydENyb3dkc2FsZShhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfd2FsbGV0LCB1aW50MjU2IF9zdGFydFRpbWUpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICByZXF1aXJlKF9zdGFydFRpbWUgPj0gbm93KTsKICAgIHJlcXVpcmUoX3Rva2VuICE9IDB4MCk7CiAgICByZXF1aXJlKF93YWxsZXQgIT0gMHgwKTsKCiAgICAvLyBTZXQgdGhlIHN0YXJ0IHRpbWUKICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CgogICAgLy8gQXNzaWduIHRoZSB0b2tlbgogICAgYm9vbXJUb2tlbiA9IFBhdXNhYmxlVG9rZW4oX3Rva2VuKTsKCiAgICAvLyBXYWxsZXQgZm9yIGZ1bmRzCiAgICB3YWxsZXQgPSBfd2FsbGV0OwoKICAgIC8vIFJlZnVuZCB2YXVsdAogICAgdmF1bHQgPSBuZXcgUmVmdW5kVmF1bHQod2FsbGV0KTsKCiAgICAvLyBtaW5pbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgaW4gd2VpcwogICAgbWluR29hbCA9IDUwMDAgKiAxMCoqMTg7IC8vIEFwcHJveCAzLjVNIERvbGxhcnMKICAgIC8vbWluR29hbCA9IDEgKiAxMCoqMTg7IC8vIHRlc3RpbmcKCiAgICAvLyBtYXhpbXVtIGFtb3VudCBvZiBmdW5kcyB0byBiZSByYWlzZWQgaW4gd2VpcwogICAgbWF4R29hbCA9IDI4NjAwICogMTAqKjE4OyAvLyBBcHByb3ggMjBNIERvbGxhcnMKICAgIC8vbWF4R29hbCA9IDE2ICogMTAqKjE4OyAvLyB0ZWVzdGluZwoKICAgIC8vIFRva2VucyBmb3IgcHJlc2FsZQogICAgdG9rZW5MaW1pdFByZXNhbGUgICAgPSAgMzAwMDAwMDAgKiAxMCoqMTg7CiAgICAvL3VpbnQyNTYgdG9rZW5MaW1pdFByZXNhbGUgICAgPSAgNSAqIDEwKioxODsgIC8vIGZvciB0ZXN0aW5nCgogICAgLy8gVG9rZW5zIGZvciBjcm93ZHNhbGUKICAgIHRva2VuTGltaXRDcm93ZHNhbGUgID0gMTIwMDAwMDAwICogMTAqKjE4OwogICAgLy91aW50MjU2IHRva2VuTGltaXRDcm93ZHNhbGUgID0gNSAqIDEwKioxODsKCiAgICAvLyBQcmVzYWxlIGRpc2NvdW50IGZvciBlYWNoIHBoYXNlCiAgICBwcmVzYWxlRGlzY291bnQgICAgPSAyNSAqIDEwKioxNjsgIC8vIDI1JQogICAgY3Jvd2RzYWxlRGlzY291bnQxID0gMTUgKiAxMCoqMTY7ICAvLyAxNSUKICAgIGNyb3dkc2FsZURpc2NvdW50MiA9IDEwICogMTAqKjE2OyAgLy8gMTAlCiAgICBjcm93ZHNhbGVEaXNjb3VudDMgPSAgNSAqIDEwKioxNjsgIC8vICA1JQogICAgY3Jvd2RzYWxlRGlzY291bnQ0ID0gICAgICAgICAgIDA7ICAvLyAgMCUKCiAgICAvLyBkdXJhdGlvbnMgZm9yIGVhY2ggcGhhc2UKICAgIHByZXNhbGVEdXJhdGlvbiAgICA9IDYwNDgwMDsgLy8gT25lIFdlZWsgaW4gc2Vjb25kcwogICAgY3Jvd2RzYWxlRHVyYXRpb24xID0gNjA0ODAwOyAvLyBPbmUgV2VlayBpbiBzZWNvbmRzCiAgICBjcm93ZHNhbGVEdXJhdGlvbjIgPSA2MDQ4MDA7IC8vIE9uZSBXZWVrIGluIHNlY29uZHMKICAgIGNyb3dkc2FsZUR1cmF0aW9uMyA9IDYwNDgwMDsgLy8gT25lIFdlZWsgaW4gc2Vjb25kcwogICAgY3Jvd2RzYWxlRHVyYXRpb240ID0gNjA0ODAwOyAvLyBPbmUgV2VlayBpbiBzZWNvbmRzCgogIH0KCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAvLyAgUnVudGltZSBzdGF0ZSBjaGVja3MKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgoKICBmdW5jdGlvbiBjdXJyZW50U3RhdGVBY3RpdmUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoIGJvb2wgcHJlc2FsZVdhaXRQaGFzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgcHJlc2FsZVBoYXNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBjcm93ZHNhbGVQaGFzZTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIGNyb3dkc2FsZVBoYXNlMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgY3Jvd2RzYWxlUGhhc2UzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBjcm93ZHNhbGVQaGFzZTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIGJ1eWFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIGRpc3RyaWJ1dGFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHJlYWNoZWRNaW5pbXVtRXRoZXJHb2FsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCByZWFjaGVkTWF4aW11bUV0aGVyR29hbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgY29tcGxldGVkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBmaW5hbGl6ZWRBbmRDbG9zZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHN0b3BwZWQpewoKICAgIHJldHVybiAoICBpc1ByZXNhbGVXYWl0UGhhc2UoKSwKICAgICAgICAgICAgICBpc1ByZXNhbGVQaGFzZSgpLAogICAgICAgICAgICAgIGlzQ3Jvd2RzYWxlUGhhc2UxKCksCiAgICAgICAgICAgICAgaXNDcm93ZHNhbGVQaGFzZTIoKSwKICAgICAgICAgICAgICBpc0Nyb3dkc2FsZVBoYXNlMygpLAogICAgICAgICAgICAgIGlzQ3Jvd2RzYWxlUGhhc2U0KCksCiAgICAgICAgICAgICAgaXNCdXlhYmxlKCksCiAgICAgICAgICAgICAgaXNEaXN0cmlidXRhYmxlKCksCiAgICAgICAgICAgICAgbWluR29hbFJlYWNoZWQoKSwKICAgICAgICAgICAgICBtYXhHb2FsUmVhY2hlZCgpLAogICAgICAgICAgICAgIGlzQ29tcGxldGVkKCksCiAgICAgICAgICAgICAgZmluYWxpemVkLAogICAgICAgICAgICAgIGhhbHRlZCk7CiAgfQoKICBmdW5jdGlvbiBjdXJyZW50U3RhdGVTYWxlcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IFByZXNhbGVUb2tlblByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgQmFzZVRva2VuUHJpY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBDcm93ZHNhbGVUb2tlblByaWNlMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IENyb3dkc2FsZVRva2VuUHJpY2UyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgQ3Jvd2RzYWxlVG9rZW5QcmljZTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBDcm93ZHNhbGVUb2tlblByaWNlNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IFRva2VuUHJlc2FsZVRvdGFsU29sZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IFRva2VuQ3Jvd2RzYWxlVG90YWxTb2xkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgVG90YWxCYWNrZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgV2VpUmFpc2VkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgV2FsbGV0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgR29hbEluV2VpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgUmVtYWluaW5nVG9rZW5zKXsKCiAgICByZXR1cm4gKCAgcHJlc2FsZVRva2VuUHJpY2UsCiAgICAgICAgICAgICAgYmFzZVRva2VuUHJpY2UsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5QcmljZTEsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5QcmljZTIsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5QcmljZTMsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5QcmljZTQsCiAgICAgICAgICAgICAgdG9rZW5QcmVzYWxlVG90YWxTb2xkLAogICAgICAgICAgICAgIHRva2VuQ3Jvd2RzYWxlVG90YWxTb2xkLAogICAgICAgICAgICAgIHRvdGFsQmFja2VycywKICAgICAgICAgICAgICB3ZWlSYWlzZWQsCiAgICAgICAgICAgICAgd2FsbGV0LAogICAgICAgICAgICAgIG1pbkdvYWwsCiAgICAgICAgICAgICAgZ2V0Q29udHJhY3RUb2tlbkJhbGFuY2UoKSk7CgogIH0KCiAgZnVuY3Rpb24gY3VycmVudFRva2VuRGlzdHJpYnV0aW9uKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgUHJlc2FsZVBoYXNlVG9rZW5zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IENyb3dkc2FsZVBoYXNlMVRva2VucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBDcm93ZHNhbGVQaGFzZTJUb2tlbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgQ3Jvd2RzYWxlUGhhc2UzVG9rZW5zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IENyb3dkc2FsZVBoYXNlNFRva2Vucyl7CgogICAgcmV0dXJuICggIHByZXNhbGVUb2tlblNlbnQsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5Tb2xkMSwKICAgICAgICAgICAgICBjcm93ZHNhbGVUb2tlblNvbGQyLAogICAgICAgICAgICAgIGNyb3dkc2FsZVRva2VuU29sZDMsCiAgICAgICAgICAgICAgY3Jvd2RzYWxlVG9rZW5Tb2xkNCk7CgogIH0KCiAgZnVuY3Rpb24gaXNQcmVzYWxlV2FpdFBoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gc3RhcnRUaW1lID49IG5vdzsKICB9CgogIGZ1bmN0aW9uIGlzUHJlc2FsZVBoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gc3RhcnRUaW1lIDwgbm93ICYmIChzdGFydFRpbWUgKyBwcmVzYWxlRHVyYXRpb24pID49IG5vdyAmJiAhbWF4R29hbFJlYWNoZWQoKTsKICB9CgogIGZ1bmN0aW9uIGlzQ3Jvd2RzYWxlUGhhc2UxKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gKHN0YXJ0VGltZSArIHByZXNhbGVEdXJhdGlvbikgPCBub3cgJiYgKHN0YXJ0VGltZSArIHByZXNhbGVEdXJhdGlvbiArIGNyb3dkc2FsZUR1cmF0aW9uMSkgPj0gbm93ICYmICFtYXhHb2FsUmVhY2hlZCgpOwogIH0KCiAgZnVuY3Rpb24gaXNDcm93ZHNhbGVQaGFzZTIoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKXsKICAgIHJldHVybiAoc3RhcnRUaW1lICsgcHJlc2FsZUR1cmF0aW9uICsgY3Jvd2RzYWxlRHVyYXRpb24xKSA8IG5vdyAmJiAoc3RhcnRUaW1lICsgcHJlc2FsZUR1cmF0aW9uICsgY3Jvd2RzYWxlRHVyYXRpb24xICsgY3Jvd2RzYWxlRHVyYXRpb24yKSA+PSBub3cgJiYgIW1heEdvYWxSZWFjaGVkKCk7CiAgfQoKICBmdW5jdGlvbiBpc0Nyb3dkc2FsZVBoYXNlMygpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewogICAgcmV0dXJuIChzdGFydFRpbWUgKyBwcmVzYWxlRHVyYXRpb24gKyBjcm93ZHNhbGVEdXJhdGlvbjEgKyBjcm93ZHNhbGVEdXJhdGlvbjIpIDwgbm93ICYmIChzdGFydFRpbWUgKyBwcmVzYWxlRHVyYXRpb24gKyBjcm93ZHNhbGVEdXJhdGlvbjEgKyBjcm93ZHNhbGVEdXJhdGlvbjIgKyBjcm93ZHNhbGVEdXJhdGlvbjMpID49IG5vdyAmJiAhbWF4R29hbFJlYWNoZWQoKTsKICB9CgogIGZ1bmN0aW9uIGlzQ3Jvd2RzYWxlUGhhc2U0KCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gKHN0YXJ0VGltZSArIHByZXNhbGVEdXJhdGlvbiArIGNyb3dkc2FsZUR1cmF0aW9uMSArIGNyb3dkc2FsZUR1cmF0aW9uMiArIGNyb3dkc2FsZUR1cmF0aW9uMykgPCBub3cgJiYgKHN0YXJ0VGltZSArIHByZXNhbGVEdXJhdGlvbiArIGNyb3dkc2FsZUR1cmF0aW9uMSArIGNyb3dkc2FsZUR1cmF0aW9uMiArIGNyb3dkc2FsZUR1cmF0aW9uMyArIGNyb3dkc2FsZUR1cmF0aW9uNCkgPj0gbm93ICYmICFtYXhHb2FsUmVhY2hlZCgpOwogIH0KCiAgZnVuY3Rpb24gaXNDb21wbGV0ZWQoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKXsKICAgIHJldHVybiAoc3RhcnRUaW1lICsgcHJlc2FsZUR1cmF0aW9uICsgY3Jvd2RzYWxlRHVyYXRpb24xICsgY3Jvd2RzYWxlRHVyYXRpb24yICsgY3Jvd2RzYWxlRHVyYXRpb24zICsgY3Jvd2RzYWxlRHVyYXRpb240KSA8IG5vdyB8fCBtYXhHb2FsUmVhY2hlZCgpOwogIH0KCiAgZnVuY3Rpb24gaXNEaXN0cmlidXRhYmxlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCl7CiAgICByZXR1cm4gKHN0YXJ0VGltZSArIHByZXNhbGVEdXJhdGlvbikgPCBub3c7CiAgfQoKICBmdW5jdGlvbiBpc0J1eWFibGUoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKXsKICAgIHJldHVybiBpc0Rpc3RyaWJ1dGFibGUoKSAmJiAhaXNDb21wbGV0ZWQoKTsKICB9CgogIC8vIFRlc3QgaWYgd2UgcmVhY2hlZCB0aGUgZ29hbHMKICBmdW5jdGlvbiBtaW5Hb2FsUmVhY2hlZCgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gbWluR29hbDsKICB9CgogIGZ1bmN0aW9uIG1heEdvYWxSZWFjaGVkKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIHdlaVJhaXNlZCA+PSBtYXhHb2FsOwogIH0KCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAvLyAgQ29udHJhY3QncyB0b2tlbiBiYWxhbmNlCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBmdW5jdGlvbiBnZXRDb250cmFjdFRva2VuQmFsYW5jZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBib29tclRva2VuLmJhbGFuY2VPZih0aGlzKTsKICB9CgogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgLy8gIEVtZXJnZW5jeSBmdW5jdGlvbnMKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIGZ1bmN0aW9uIGhhbHQoKSBwdWJsaWMgb25seU93bmVyewogICAgaGFsdGVkID0gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHVuSGFsdCgpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICBoYWx0ZWQgPSBmYWxzZTsKICB9CgogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgLy8gIFVwZGF0ZSBhbGwgdGhlIHByaWNlcwogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgZnVuY3Rpb24gdXBkYXRlUHJpY2VzKCkgaW50ZXJuYWwgewoKICAgIHByZXNhbGVUb2tlblByaWNlID0gd2VpUmFpc2VkLm11bCgxIGV0aGVyKS5kaXYodG9rZW5MaW1pdFByZXNhbGUpOwogICAgYmFzZVRva2VuUHJpY2UgPSAocHJlc2FsZVRva2VuUHJpY2UgKiAoMSBldGhlcikpIC8gKCgxIGV0aGVyKSAtIHByZXNhbGVEaXNjb3VudCk7CiAgICBjcm93ZHNhbGVUb2tlblByaWNlMSA9IGJhc2VUb2tlblByaWNlIC0gKChiYXNlVG9rZW5QcmljZSAqIGNyb3dkc2FsZURpc2NvdW50MSkvKDEgZXRoZXIpKTsKICAgIGNyb3dkc2FsZVRva2VuUHJpY2UyID0gYmFzZVRva2VuUHJpY2UgLSAoKGJhc2VUb2tlblByaWNlICogY3Jvd2RzYWxlRGlzY291bnQyKS8oMSBldGhlcikpOwogICAgY3Jvd2RzYWxlVG9rZW5QcmljZTMgPSBiYXNlVG9rZW5QcmljZSAtICgoYmFzZVRva2VuUHJpY2UgKiBjcm93ZHNhbGVEaXNjb3VudDMpLygxIGV0aGVyKSk7CiAgICBjcm93ZHNhbGVUb2tlblByaWNlNCA9IGJhc2VUb2tlblByaWNlIC0gKChiYXNlVG9rZW5QcmljZSAqIGNyb3dkc2FsZURpc2NvdW50NCkvKDEgZXRoZXIpKTsKICB9CgogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgLy8gIERlZmF1bHQgcHJlc2FsZSBhbmQgdG9rZW4gcHVyY2hhc2UKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlewogICAgaWYobXNnLnZhbHVlID09IDAgJiYgaXNEaXN0cmlidXRhYmxlKCkpCiAgICB7CiAgICAgIGRpc3RyaWJ1dGVQcmVzYWxlKG1zZy5zZW5kZXIpOwogICAgfWVsc2V7CiAgICAgIHJlcXVpcmUoIWlzUHJlc2FsZVdhaXRQaGFzZSgpICYmICFpc0NvbXBsZXRlZCgpKTsKCiAgICAgIC8vIFNlbGVjdCBwdXJjaGFzZSBhY3Rpb24KICAgICAgaWYgKGlzUHJlc2FsZVBoYXNlKCkpewoKICAgICAgICAvLyBQcmVzYWxlIGRlcG9zaXQKICAgICAgICBkZXBvc2l0UHJlc2FsZShtc2cuc2VuZGVyKTsKCiAgICAgIH1lbHNlewogICAgICAgIC8vIEJ1eSB0aGUgdG9rZW5zCiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIC8vICBMb3cgbGV2ZWwgZGVwb3NpdAogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgZnVuY3Rpb24gZGVwb3NpdFByZXNhbGUoYWRkcmVzcyBiZW5lZmljaWFyeSkgcHVibGljIHBheWFibGV7CiAgICBpbnRlcm5hbERlcG9zaXRQcmVzYWxlKGJlbmVmaWNpYXJ5LCBtc2cudmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJuYWxEZXBvc2l0UHJlc2FsZShhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGRlcG9zaXQpIGludGVybmFsewogICAgcmVxdWlyZSghaGFsdGVkKTsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKICAgIHJlcXVpcmUoZGVwb3NpdCAhPSAwKTsKICAgIHJlcXVpcmUoaXNQcmVzYWxlUGhhc2UoKSk7CiAgICByZXF1aXJlKCFtYXhHb2FsUmVhY2hlZCgpKTsKCiAgICAvLyBBbW91bnQgaW52ZXN0ZWQKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gZGVwb3NpdDsKCiAgICAvLyBJZiByZWFsIGRlcG9zaXQgZnJvbSBwZXJzb24gdGhlbiBmb3J3YXJkIGZ1bmRzCiAgICAvLyBvdGhlcndpc2UgaXQgd2FzIGZyb20gdGhlIG1hbnVhbCByb3V0aW5lIGZvciBleHRlcm5hbAogICAgLy8gZGVwb3NpdHMgdGhhdCB3ZXJlIG1hZGUgaW4gZmlhdCBpbnN0ZWFkIG9mIGV0aGVyCiAgICBpZiAobXNnLnZhbHVlID4gMCkKICAgIHsKICAgICAgLy8gU2VuZCBmdW5kcyB0byBtYWluIHdhbGxldAogICAgICBmb3J3YXJkRnVuZHMoKTsKICAgIH0KCiAgICAvLyBUb3RhbCBpbm52ZXN0ZWQgc28gZmFyCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgLy8gTWFyayB0aGUgZGVwb3NpdHMsIGFkZCBpZiB0aGV5IGRlcG9zaXQgbW9yZSB0aGFuIG9uY2UKICAgIGRlcG9zaXRzW2JlbmVmaWNpYXJ5XSArPSB3ZWlBbW91bnQ7CiAgICB0b3RhbEJhY2tlcnMrKzsKCiAgICAvLyBEZXRlcm1pbmUgdGhlIGN1cnJlbnQgcHJpY2UKICAgIHVwZGF0ZVByaWNlcygpOwoKICAgIC8vIGVtaXQgZXZlbnQgZm9yIGxvZ2dpbmcKICAgIFByZXNhbGVQdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50KTsKICB9CgogIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgLy8gIFRva2VuIGRpc3RyaWJ1dGlvbiBmb3IgcHJlc2FsZSBwdXJjaGFzZXJzCiAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBmdW5jdGlvbiBkaXN0cmlidXRlUHJlc2FsZShhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWN7CiAgICByZXF1aXJlKCFoYWx0ZWQpOwogICAgcmVxdWlyZShpc0Rpc3RyaWJ1dGFibGUoKSk7CiAgICByZXF1aXJlKGRlcG9zaXRzW2JlbmVmaWNpYXJ5XSA+IDApOwogICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSAweDApOwoKICAgIC8vIEFtb3VudCBpbnZlc3Rlc2QKICAgIHVpbnQyNTYgd2VpRGVwb3NpdCA9IGRlcG9zaXRzW2JlbmVmaWNpYXJ5XTsKCiAgICAvLyBwcmV2ZW50IHJlLWVudHJhbmN5CiAgICBkZXBvc2l0c1tiZW5lZmljaWFyeV0gPSAwOwoKICAgIC8vIHRva2VucyBvdXQKICAgIHVpbnQyNTYgdG9rZW5zT3V0ID0gd2VpRGVwb3NpdC5tdWwoMSBldGhlcikuZGl2KHByZXNhbGVUb2tlblByaWNlKTsKCiAgICAvL3RyYWNrVG9rZW5zKHRva2Vuc091dCwgaW5kZXgpOwogICAgdG9rZW5QcmVzYWxlVG90YWxTb2xkICs9IHRva2Vuc091dDsKICAgIC8vcHJlc2FsZVRva2VuU2VudCArPSB0b2tlbnNPdXQ7CgogICAgLy8gdHJhbnNmZXIgdG9rZW5zCiAgICBib29tclRva2VuLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCB0b2tlbnNPdXQpOwoKICAgIC8vIGVtaXQgZXZlbnQgZm9yIGxvZ2dpbmcKICAgIFByZXNhbGVEaXN0cmlidXRpb24obXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHRva2Vuc091dCk7CiAgfQoKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIC8vICBMb3cgbGV2ZWwgcHVyY2hhc2UKICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZXsKICAgIGludGVybmFsQnV5VG9rZW5zKGJlbmVmaWNpYXJ5LCBtc2cudmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJuYWxCdXlUb2tlbnMoYWRkcmVzcyBiZW5lZmljaWFyeSwgdWludDI1NiBkZXBvc2l0KSBpbnRlcm5hbHsKICAgIHJlcXVpcmUoIWhhbHRlZCk7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICByZXF1aXJlKGRlcG9zaXQgIT0gMCk7CiAgICByZXF1aXJlKGlzQ3Jvd2RzYWxlUGhhc2UxKCkgfHwgaXNDcm93ZHNhbGVQaGFzZTIoKSB8fCBpc0Nyb3dkc2FsZVBoYXNlMygpIHx8IGlzQ3Jvd2RzYWxlUGhhc2U0KCkpOwogICAgcmVxdWlyZSghbWF4R29hbFJlYWNoZWQoKSk7CgogICAgdWludDI1NiBwcmljZSA9IDA7CgogICAgaWYgKGlzQ3Jvd2RzYWxlUGhhc2UxKCkpewogICAgICBwcmljZSA9IGNyb3dkc2FsZVRva2VuUHJpY2UxOwogICAgfWVsc2UgaWYgKGlzQ3Jvd2RzYWxlUGhhc2UyKCkpewogICAgICBwcmljZSA9IGNyb3dkc2FsZVRva2VuUHJpY2UyOwogICAgfWVsc2UgaWYgKGlzQ3Jvd2RzYWxlUGhhc2UzKCkpewogICAgICBwcmljZSA9IGNyb3dkc2FsZVRva2VuUHJpY2UzOwogICAgfWVsc2UgaWYgKGlzQ3Jvd2RzYWxlUGhhc2U0KCkpewogICAgICBwcmljZSA9IGNyb3dkc2FsZVRva2VuUHJpY2U0OwogICAgfWVsc2V7CiAgICAgIHByaWNlID0gYmFzZVRva2VuUHJpY2U7CiAgICB9CgogICAgLy8gQW1vdW50IG9mIGV0aGVyIHNlbnQKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gZGVwb3NpdDsKCiAgICAvLyBjYWxjdWxhdGUgcmV3YXJkCiAgICB1aW50MjU2IHRva2Vuc091dCA9IHdlaUFtb3VudC5tdWwoMSBldGhlcikuZGl2KHByaWNlKTsKCiAgICAvLyBtYWtlIHN1cmUgd2UgYXJlIG5vdCBvdmVyIHNvbGQKICAgIHJlcXVpcmUodG9rZW5zT3V0ICsgdG9rZW5Dcm93ZHNhbGVUb3RhbFNvbGQgPCB0b2tlbkxpbWl0Q3Jvd2RzYWxlKTsKCiAgICAvLyBJZiByZWFsIGRlcG9zaXQgZnJvbSBwZXJzb24gdGhlbiBmb3J3YXJkIGZ1bmRzCiAgICAvLyBvdGhlcndpc2UgaXQgd2FzIGZyb20gdGhlIG1hbnVhbCByb3V0aW5lIGZvciBleHRlcm5hbAogICAgLy8gZGVwb3NpdHMgdGhhdCB3ZXJlIG1hZGUgaW4gZmlhdCBpbnN0ZWFkIG9mIGV0aGVyCiAgICBpZiAobXNnLnZhbHVlID4gMCkKICAgIHsKICAgICAgLy8gU2VuZCBmdW5kcyB0byBtYWluIHdhbGxldAogICAgICBmb3J3YXJkRnVuZHMoKTsKICAgIH0KCiAgICAvLyBVcGRhdGUgcmFpc2VkCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgLy8gVHJhY2sgcHVyY2hhc2VzCiAgICBwdXJjaGFzZXNbYmVuZWZpY2lhcnldICs9IHdlaVJhaXNlZDsKCiAgICAvLyB0cmFjayBpc3N1ZWQKICAgIHRva2VuQ3Jvd2RzYWxlVG90YWxTb2xkICs9IHRva2Vuc091dDsKCiAgICBpZiAoaXNDcm93ZHNhbGVQaGFzZTEoKSl7CiAgICAgIGNyb3dkc2FsZVRva2VuU29sZDEgKz0gdG9rZW5zT3V0OwogICAgfWVsc2UgaWYgKGlzQ3Jvd2RzYWxlUGhhc2UyKCkpewogICAgICBjcm93ZHNhbGVUb2tlblNvbGQyICs9IHRva2Vuc091dDsKICAgIH1lbHNlIGlmIChpc0Nyb3dkc2FsZVBoYXNlMygpKXsKICAgICAgY3Jvd2RzYWxlVG9rZW5Tb2xkMyArPSB0b2tlbnNPdXQ7CiAgICB9ZWxzZSBpZiAoaXNDcm93ZHNhbGVQaGFzZTQoKSl7CiAgICAgIGNyb3dkc2FsZVRva2VuU29sZDQgKz0gdG9rZW5zT3V0OwogICAgfQoKICAgIC8vIFNlbmQgdG8gYnV5ZXJzCiAgICBib29tclRva2VuLnRyYW5zZmVyKGJlbmVmaWNpYXJ5LCB0b2tlbnNPdXQpOwoKICAgIC8vIEVtaXQgZXZlbnQgZm9yIGxvZ2dpbmcKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zT3V0KTsKCiAgICAvLyBUcmFjayB0aGUgYmFja2VycwogICAgdG90YWxCYWNrZXJzKys7CiAgfQoKICAvLyBGb3IgZGVwb3NpdHMgdGhhdCBkbyBub3QgY29tZSB0aHJ1IHRoZSBjb250cmFjdAogIGZ1bmN0aW9uIGV4dGVybmFsRGVwb3NpdChhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IGFtb3VudCkgcHVibGljIG9ubHlPd25lcnsKICAgICAgcmVxdWlyZSghaXNQcmVzYWxlV2FpdFBoYXNlKCkgJiYgIWlzQ29tcGxldGVkKCkpOwoKICAgICAgLy8gU2VsZWN0IHB1cmNoYXNlIGFjdGlvbgogICAgICBpZiAoaXNQcmVzYWxlUGhhc2UoKSl7CgogICAgICAgIC8vIFByZXNhbGUgZGVwb3NpdAogICAgICAgIGludGVybmFsRGVwb3NpdFByZXNhbGUoYmVuZWZpY2lhcnksIGFtb3VudCk7CgogICAgICB9ZWxzZXsKICAgICAgICAvLyBCdXkgdGhlIHRva2VucwogICAgICAgIGludGVybmFsQnV5VG9rZW5zKGJlbmVmaWNpYXJ5LCBhbW91bnQpOwogICAgICB9CiAgfQoKICAvLyBzZW5kIGV0aGVyIHRvIHRoZSBmdW5kIGNvbGxlY3Rpb24gd2FsbGV0CiAgLy8gb3ZlcnJpZGUgdG8gY3JlYXRlIGN1c3RvbSBmdW5kIGZvcndhcmRpbmcgbWVjaGFuaXNtcwogIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgIC8vd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICB2YXVsdC5kZXBvc2l0LnZhbHVlKG1zZy52YWx1ZSkobXNnLnNlbmRlcik7CiAgfQoKICAgIC8vIGlmIGNyb3dkc2FsZSBpcyB1bnN1Y2Nlc3NmdWwsIGludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kcyBoZXJlCiAgZnVuY3Rpb24gY2xhaW1SZWZ1bmQoKSBwdWJsaWN7CiAgICByZXF1aXJlKCFoYWx0ZWQpOwogICAgcmVxdWlyZShmaW5hbGl6ZWQpOwogICAgcmVxdWlyZSghbWluR29hbFJlYWNoZWQoKSk7CgogICAgdmF1bHQucmVmdW5kKG1zZy5zZW5kZXIpOwogIH0KCiAgLy8gU2hvdWxkIGJlIGNhbGxlZCBhZnRlciBjcm93ZHNhbGUgZW5kcywgdG8gZG8KICAvLyBzb21lIGV4dHJhIGZpbmFsaXphdGlvbiB3b3JrCiAgZnVuY3Rpb24gZmluYWxpemUoKSBwdWJsaWMgb25seU93bmVyewogICAgcmVxdWlyZSghZmluYWxpemVkKTsKICAgIHJlcXVpcmUoaXNDb21wbGV0ZWQoKSk7CgogICAgaWYgKG1pbkdvYWxSZWFjaGVkKCkpIHsKICAgICAgdmF1bHQuY2xvc2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhdWx0LmVuYWJsZVJlZnVuZHMoKTsKICAgIH0KCiAgICBmaW5hbGl6ZWQgPSB0cnVlOwogICAgRmluYWxpemVkKCk7CiAgfQp9'.
	

]
