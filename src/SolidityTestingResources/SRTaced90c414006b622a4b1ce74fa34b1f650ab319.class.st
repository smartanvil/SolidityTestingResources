Class {
	#name : #SRTaced90c414006b622a4b1ce74fa34b1f650ab319,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTaced90c414006b622a4b1ce74fa34b1f650ab319 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMDsKCmxpYnJhcnkgVG9rZW5FdmVudExpYiB7CiAgICAvKgogICAgICogV2hlbiB1bmRlcmx5aW5nIHNvbGlkaXR5IGlzc3VlIGlzIGZpeGVkIHRoaXMgbGlicmFyeSB3aWxsIG5vdCBiZSBuZWVkZWQuCiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vc29saWRpdHkvaXNzdWVzLzEyMTUKICAgICAqLwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLAogICAgICAgICAgICAgICAgICAgYWRkcmVzcyBpbmRleGVkIF90byk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLAogICAgICAgICAgICAgICAgICAgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyKTsKCiAgICBmdW5jdGlvbiBfVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGludGVybmFsIHsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfQXBwcm92YWwoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGludGVybmFsIHsKICAgICAgICBBcHByb3ZhbChfb3duZXIsIF9zcGVuZGVyKTsKICAgIH0KfQoKY29udHJhY3QgVG9rZW5JbnRlcmZhY2UgewogICAgLyoKICAgICAqICBFdmVudHMKICAgICAqLwogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgX293bmVyKTsKICAgIGV2ZW50IERlc3Ryb3koYWRkcmVzcyBfb3duZXIpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IE1pbnRlckFkZGVkKGFkZHJlc3Mgd2hvKTsKICAgIGV2ZW50IE1pbnRlclJlbW92ZWQoYWRkcmVzcyB3aG8pOwoKICAgIC8qCiAgICAgKiAgTWludGluZwogICAgICovCiAgICAvLy8gQGRldiBNaW50cyBhIG5ldyB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX293bmVyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAZGV2IERlc3Ryb3kgYSB0b2tlbgogICAgLy8vIEBwYXJhbSBfb3duZXIgQnl0ZXMzMiBpZCBvZiB0aGUgb3duZXIgb2YgdGhlIHRva2VuCiAgICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgX293bmVyKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAZGV2IEFkZCBhIG5ldyBtaW50ZXIKICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCBjYW4gbm93IG1pbnQgdG9rZW5zLgogICAgZnVuY3Rpb24gYWRkTWludGVyKGFkZHJlc3Mgd2hvKSByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQGRldiBSZW1vdmUgYSBtaW50ZXIKICAgIC8vLyBAcGFyYW0gd2hvIEFkZHJlc3MgdGhlIGFkZHJlc3MgdGhhdCB3aWxsIG5vIGxvbmdlciBiZSBhIG1pbnRlci4KICAgIGZ1bmN0aW9uIHJlbW92ZU1pbnRlcihhZGRyZXNzIHdobykgcmV0dXJucyAoYm9vbCk7CgogICAgLyoKICAgICAqICBSZWFkIGFuZCB3cml0ZSBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc3VwcGx5KTsKCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0aGUgdG9rZW4gdG8gdHJhbnNmZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBkZXYgU2V0cyBhcHByb3ZhbCBzcGVuZGVyIHRvIHRyYW5zZmVyIG93bmVyc2hpcCBvZiB0b2tlbi4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHNwZW5kZXIuLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgQnl0ZXMzMiBpZCBvZiB0b2tlbiB0aGF0IGNhbiBiZSBzcGVuZC4KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLyoKICAgICAqIFJlYWQgc3RvcmFnZSBmdW5jdGlvbnMKICAgICAqLwogICAgLy8vIEBkZXYgUmV0dXJucyBpZCBvZiB0b2tlbiBvd25lZCBieSBnaXZlbiBhZGRyZXNzIChlbmNvZGVkIGFzIGFuIGludGVnZXIpLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSB0b2tlbiBpZCB0aGF0IG1heSB0cmFuc2ZlciBmcm9tIF9vd25lciBhY2NvdW50IGJ5IF9zcGVuZGVyLi4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIC8qCiAgICAgKiAgRXh0cmEgbm9uIEVSQzIwIGZ1bmN0aW9ucwogICAgICovCiAgICAvLy8gQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIGFkZHJlc3Mgb3ducyBhIHRva2VuLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyB0byBjaGVjay4KICAgIGZ1bmN0aW9uIGlzVG9rZW5Pd25lcihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAoYm9vbCk7Cn0KCmNvbnRyYWN0IEluZGl2aWR1YWxpdHlUb2tlbkludGVyZmFjZSB7CiAgICAvKgogICAgICogUmVhZCBzdG9yYWdlIGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgUmV0dXJucyBpZCBvZiB0b2tlbiBvd25lZCBieSBnaXZlbiBhZGRyZXNzIChlbmNvZGVkIGFzIGFuIGludGVnZXIpLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQGRldiBSZXR1cm5zIHRoZSB0b2tlbiBpZCB0aGF0IG1heSB0cmFuc2ZlciBmcm9tIF9vd25lciBhY2NvdW50IGJ5IF9zcGVuZGVyLi4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2YgdG9rZW4gc3BlbmRlci4KICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIC8qCiAgICAgKiAgV3JpdGUgc3RvcmFnZSBmdW5jdGlvbnMKICAgICAqLwoKICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIgdG9rZW4gdG8gZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bykgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2Ygc3BlbmRlci4uCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRva2VuIHRoYXQgY2FuIGJlIHNwZW5kLgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8qCiAgICAgKiAgRXh0cmEgbm9uIEVSQzIwIGZ1bmN0aW9ucwogICAgICovCgogICAgLy8vIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBhZGRyZXNzIG93bnMgYSB0b2tlbi4KICAgIC8vLyBAcGFyYW0gX293bmVyIEFkZHJlc3MgdG8gY2hlY2suCiAgICBmdW5jdGlvbiBpc1Rva2VuT3duZXIoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpOwp9CgoKY29udHJhY3QgSW5kaXZpZHVhbGl0eVRva2VuIGlzIFRva2VuSW50ZXJmYWNlLCBJbmRpdmlkdWFsaXR5VG9rZW5JbnRlcmZhY2UgewogICAgZnVuY3Rpb24gSW5kaXZpZHVhbGl0eVRva2VuKCkgewogICAgICAgIG1pbnRlcnNbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIE1pbnRlckFkZGVkKG1zZy5zZW5kZXIpOwogICAgfQoKICAgIG1vZGlmaWVyIG1pbnRlck9ubHkgewogICAgICAgIGlmKCFtaW50ZXJzW21zZy5zZW5kZXJdKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8vIGFkZHJlc3MgPT4gY2FubWludAogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBtaW50ZXJzOwogICAgCiAgICAvLyBvd25lciA9PiBiYWxhbmNlCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIGJhbGFuY2VzOwoKICAgIC8vIG93bmVyID0+IHNwZW5kZXIgPT4gYmFsYW5jZQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpKSBhcHByb3ZhbHM7CgogICAgdWludCBudW1Ub2tlbnM7CgogICAgLy8vIEBkZXYgTWludHMgYSBuZXcgdG9rZW4uCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bykgbWludGVyT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgdG9rZW4gb3duZXIgZG9lc24ndCBhbHJlYWR5IG93biBhIHRva2VuLgogICAgICAgIGlmIChiYWxhbmNlc1tfdG9dICE9IDB4MCkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gMTsKCiAgICAgICAgLy8gbG9nIHRoZSBtaW50aW5nIG9mIHRoaXMgdG9rZW4uCiAgICAgICAgTWludChfdG8pOwogICAgICAgIFRyYW5zZmVyKDB4MCwgX3RvLCAxKTsKICAgICAgICBUb2tlbkV2ZW50TGliLl9UcmFuc2ZlcigweDAsIF90byk7CgogICAgICAgIC8vIGluY3JlYXNlIHRoZSBzdXBwbHkuCiAgICAgICAgbnVtVG9rZW5zICs9IDE7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBAZGV2IE1pbnQgbWFueSBuZXcgdG9rZW5zCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3NbXSBfdG8pIG1pbnRlck9ubHkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBfdG8ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYoYmFsYW5jZXNbX3RvW2ldXSAhPSAweDApIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvW2ldXSA9IDE7CiAgICAgICAgICAgIE1pbnQoX3RvW2ldKTsKICAgICAgICAgICAgVHJhbnNmZXIoMHgwLCBfdG9baV0sIDEpOwogICAgICAgICAgICBUb2tlbkV2ZW50TGliLl9UcmFuc2ZlcigweDAsIF90b1tpXSk7CiAgICAgICAgfQogICAgICAgIG51bVRva2VucyArPSBfdG8ubGVuZ3RoOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IERlc3Ryb3kgYSB0b2tlbgogICAgLy8vIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBvd25lciBvZiB0aGUgdG9rZW4gdG8gZGVzdHJveQogICAgZnVuY3Rpb24gZGVzdHJveShhZGRyZXNzIF9vd25lcikgbWludGVyT25seSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZihiYWxhbmNlc1tfb3duZXJdICE9IDEpIHRocm93OwogICAgICAgIAogICAgICAgIGJhbGFuY2VzW19vd25lcl0gPSAwOwogICAgICAgIG51bVRva2VucyAtPSAxOwogICAgICAgIERlc3Ryb3koX293bmVyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBZGQgYSBuZXcgbWludGVyCiAgICAvLy8gQHBhcmFtIHdobyBBZGRyZXNzIHRoZSBhZGRyZXNzIHRoYXQgY2FuIG5vdyBtaW50IHRva2Vucy4KICAgIGZ1bmN0aW9uIGFkZE1pbnRlcihhZGRyZXNzIHdobykgbWludGVyT25seSByZXR1cm5zIChib29sKSB7CiAgICAgICAgbWludGVyc1t3aG9dID0gdHJ1ZTsKICAgICAgICBNaW50ZXJBZGRlZCh3aG8pOwogICAgfQoKICAgIC8vLyBAZGV2IFJlbW92ZSBhIG1pbnRlcgogICAgLy8vIEBwYXJhbSB3aG8gQWRkcmVzcyB0aGUgYWRkcmVzcyB0aGF0IHdpbGwgbm8gbG9uZ2VyIGJlIGEgbWludGVyLgogICAgZnVuY3Rpb24gcmVtb3ZlTWludGVyKGFkZHJlc3Mgd2hvKSBtaW50ZXJPbmx5IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBtaW50ZXJzW3dob10gPSBmYWxzZTsKICAgICAgICBNaW50ZXJSZW1vdmVkKHdobyk7CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJuIHRoZSBudW1iZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgc3VwcGx5KSB7CiAgICAgICAgcmV0dXJuIG51bVRva2VuczsKICAgIH0KCiAgICAvLy8gQGRldiBSZXR1cm5zIGlkIG9mIHRva2VuIG93bmVkIGJ5IGdpdmVuIGFkZHJlc3MgKGVuY29kZWQgYXMgYW4gaW50ZWdlcikuCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICBpZiAoX293bmVyID09IDB4MCkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgdG9rZW4gaWQgdGhhdCBtYXkgdHJhbnNmZXIgZnJvbSBfb3duZXIgYWNjb3VudCBieSBfc3BlbmRlci4uCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIHRva2VuIHNwZW5kZXIuCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsCiAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYXBwcm92YWxzW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIC8vLyBAZGV2IFRyYW5zZmVycyBzZW5kZXIgdG9rZW4gdG8gZ2l2ZW4gYWRkcmVzcy4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBCeXRlczMyIGlkIG9mIHRoZSB0b2tlbiB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLAogICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoX3ZhbHVlICE9IDEpIHsKICAgICAgICAgICAgLy8gMSBpcyB0aGUgb25seSB2YWx1ZSB0aGF0IG1ha2VzIGFueSBzZW5zZSBoZXJlLgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChfdG8gPT0gMHgwKSB7CiAgICAgICAgICAgIC8vIGNhbm5vdCB0cmFuc2ZlciB0byB0aGUgbnVsbCBhZGRyZXNzLgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA9PSAweDApIHsKICAgICAgICAgICAgLy8gbXNnLnNlbmRlciBpcyBub3QgYSB0b2tlbiBvd25lcgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1tfdG9dICE9IDB4MCkgewogICAgICAgICAgICAvLyBjYW5ub3QgdHJhbnNmZXIgdG8gYW4gYWRkcmVzcyB0aGF0IGFscmVhZHkgb3ducyBhIHRva2VuLgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IDE7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCAxKTsKICAgICAgICBUb2tlbkV2ZW50TGliLl9UcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8pOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgc2VuZGVyIHRva2VuIHRvIGdpdmVuIGFkZHJlc3MuIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3Mgb2YgbmV3IHRva2VuIG93bmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXIoX3RvLCAxKTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3Mgb2YgdG9rZW4gb3duZXIuCiAgICAvLy8gQHBhcmFtIF90byBBZGRyZXNzIG9mIG5ldyB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdGhlIHRva2VuIHRvIHRyYW5zZmVyLgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoX3ZhbHVlICE9IDEpIHsKICAgICAgICAgICAgLy8gQ2Fubm90IHRyYW5zZmVyIGFueXRoaW5nIG90aGVyIHRoYW4gMSB0b2tlbi4KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAoX3RvID09IDB4MCkgewogICAgICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgdG8gdGhlIG51bGwgYWRkcmVzcwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1tfZnJvbV0gPT0gMHgwKSB7CiAgICAgICAgICAgIC8vIENhbm5vdCB0cmFuc2ZlciBpZiBfZnJvbSBpcyBub3QgYSB0b2tlbiBvd25lcgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1tfdG9dICE9IDB4MCkgewogICAgICAgICAgICAvLyBDYW5ub3QgdHJhbnNmZXIgdG8gYW4gZXhpc3RpbmcgdG9rZW4gb3duZXIKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAoYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9PSAwKSB7CiAgICAgICAgICAgIC8vIFRoZSBhcHByb3ZlZCB0b2tlbiBkb2Vzbid0IG1hdGNoIHRoZSB0b2tlbiBiZWluZyB0cmFuc2ZlcnJlZC4KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8gbnVsbCBvdXQgdGhlIGFwcHJvdmFsCiAgICAgICAgYXBwcm92YWxzW19mcm9tXVttc2cuc2VuZGVyXSA9IDB4MDsKCiAgICAgICAgLy8gcmVtb3ZlIHRoZSB0b2tlbiBmcm9tIHRoZSBzZW5kZXIuCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gMDsKCiAgICAgICAgLy8gYXNzaWduIHRoZSB0b2tlbiB0byB0aGUgbmV3IG93bmVyCiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IDE7CgogICAgICAgIC8vIGxvZyB0aGUgdHJhbnNmZXIKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCAxKTsKICAgICAgICBUb2tlbkV2ZW50TGliLl9UcmFuc2ZlcihfZnJvbSwgX3RvKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgQWxsb3dzIGFsbG93ZWQgdGhpcmQgcGFydHkgdG8gdHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfZnJvbSBBZGRyZXNzIG9mIHRva2VuIG93bmVyLgogICAgLy8vIEBwYXJhbSBfdG8gQWRkcmVzcyBvZiBuZXcgdG9rZW4gb3duZXIuCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIDEpOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHMgYXBwcm92YWwgc3BlbmRlciB0byB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdG9rZW4uIFJldHVybnMgc3VjY2Vzcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiBzcGVuZGVyLi4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIEJ5dGVzMzIgaWQgb2YgdG9rZW4gdGhhdCBjYW4gYmUgc3BlbmQuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsCiAgICAgICAgICAgICAgICAgICAgIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKF92YWx1ZSAhPSAxKSB7CiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIGFueSB2YWx1ZSBvdGhlciB0aGFuIDEKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAoX3NwZW5kZXIgPT0gMHgwKSB7CiAgICAgICAgICAgIC8vIGNhbm5vdCBhcHByb3ZlIHRoZSBudWxsIGFkZHJlc3MgYXMgYSBzcGVuZGVyLgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA9PSAweDApIHsKICAgICAgICAgICAgLy8gY2Fubm90IGFwcHJvdmUgaWYgbm90IGEgdG9rZW4gb3duZXIuCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGFwcHJvdmFsc1ttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAxOwoKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgMSk7CiAgICAgICAgVG9rZW5FdmVudExpYi5fQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBTZXRzIGFwcHJvdmFsIHNwZW5kZXIgdG8gdHJhbnNmZXIgb3duZXJzaGlwIG9mIHRva2VuLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIEFkZHJlc3Mgb2Ygc3BlbmRlci4uCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gYXBwcm92ZShfc3BlbmRlciwgMSk7CiAgICB9CgogICAgLyoKICAgICAqICBFeHRyYSBub24gRVJDMjAgZnVuY3Rpb25zCiAgICAgKi8KICAgIC8vLyBAZGV2IFJldHVybnMgd2hldGhlciB0aGUgYWRkcmVzcyBvd25zIGEgdG9rZW4uCiAgICAvLy8gQHBhcmFtIF9vd25lciBBZGRyZXNzIHRvIGNoZWNrLgogICAgZnVuY3Rpb24gaXNUb2tlbk93bmVyKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl0gIT0gMDsKICAgIH0KfQ=='.
	

]
