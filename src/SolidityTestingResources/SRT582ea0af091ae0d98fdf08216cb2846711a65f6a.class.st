Class {
	#name : #SRT582ea0af091ae0d98fdf08216cb2846711a65f6a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT582ea0af091ae0d98fdf08216cb2846711a65f6a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMApjb250cmFjdCBFUkMyMCB7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgdG90YWxTdXBwbHkpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgcmVtYWluaW5nKTsKICAgIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcmV0dXJucyh1aW50IGRpZ2l0cyk7CiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludCBfdmFsdWUpOwp9CgovLy8gQHRpdGxlIEt5YmVyIFJlc2VydmUgY29udHJhY3QKLy8vIEBhdXRob3IgWWFyb24gVmVsbmVyCgpjb250cmFjdCBLeWJlclJlc2VydmUgewogICAgYWRkcmVzcyBwdWJsaWMgcmVzZXJ2ZU93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMga3liZXJOZXR3b3JrOwogICAgRVJDMjAgY29uc3RhbnQgcHVibGljIEVUSF9UT0tFTl9BRERSRVNTID0gRVJDMjAoMHgwMGVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWUpOwogICAgdWludCAgY29uc3RhbnQgUFJFQ0lTSU9OID0gKDEwKioxOCk7CiAgICBib29sIHB1YmxpYyB0cmFkZUVuYWJsZWQ7CgogICAgc3RydWN0IENvbnZlcnNpb25SYXRlIHsKICAgICAgICB1aW50IHJhdGU7CiAgICAgICAgdWludCBleHBpcmF0aW9uQmxvY2s7CiAgICB9CgogICAgbWFwcGluZyhieXRlczMyPT5Db252ZXJzaW9uUmF0ZSkgcGFpckNvbnZlcnNpb25SYXRlOwoKICAgIC8vLyBAZGV2IGMndG9yLgogICAgLy8vIEBwYXJhbSBfa3liZXJOZXR3b3JrIFRoZSBhZGRyZXNzIG9mIGt5YmVyIG5ldHdvcmsKICAgIC8vLyBAcGFyYW0gX3Jlc2VydmVPd25lciBBZGRyZXNzIG9mIHRoZSByZXNlcnZlIG93bmVyCiAgICBmdW5jdGlvbiBLeWJlclJlc2VydmUoIGFkZHJlc3MgX2t5YmVyTmV0d29yaywgYWRkcmVzcyBfcmVzZXJ2ZU93bmVyICkgewogICAgICAgIGt5YmVyTmV0d29yayA9IF9reWJlck5ldHdvcms7CiAgICAgICAgcmVzZXJ2ZU93bmVyID0gX3Jlc2VydmVPd25lcjsKICAgICAgICB0cmFkZUVuYWJsZWQgPSB0cnVlOwogICAgfQoKCiAgICAvLy8gQGRldiBjaGVjayBpZiBhIHBhaXIgaXMgbGlzdGVkIGZvciB0cmFkaW5nLgogICAgLy8vIEBwYXJhbSBzb3VyY2UgU291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3QgRGVzdGluYXRpb24gdG9rZW4KICAgIC8vLyBAcGFyYW0gYmxvY2tOdW1iZXIgQ3VycmVudCBibG9jayBudW1iZXIKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIHBhaXIgaXMgbGlzdGVkCiAgICBmdW5jdGlvbiBpc1BhaXJMaXN0ZWQoIEVSQzIwIHNvdXJjZSwgRVJDMjAgZGVzdCwgdWludCBibG9ja051bWJlciApIGludGVybmFsIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICAgIENvbnZlcnNpb25SYXRlIG1lbW9yeSByYXRlSW5mbyA9IHBhaXJDb252ZXJzaW9uUmF0ZVtzaGEzKHNvdXJjZSxkZXN0KV07CiAgICAgICAgaWYoIHJhdGVJbmZvLnJhdGUgPT0gMCApIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gcmF0ZUluZm8uZXhwaXJhdGlvbkJsb2NrID49IGJsb2NrTnVtYmVyOwogICAgfQoKICAgIC8vLyBAZGV2IGdldCBjdXJyZW50IGNvbnZlcnNpb24gcmF0ZQogICAgLy8vIEBwYXJhbSBzb3VyY2UgU291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3QgRGVzdGluYXRpb24gdG9rZW4KICAgIC8vLyBAcGFyYW0gYmxvY2tOdW1iZXIgQ3VycmVudCBibG9jayBudW1iZXIKICAgIC8vLyBAcmV0dXJuIGNvbnZlcnNpb24gcmF0ZSB3aXRoIFBSRUNJU0lPTiBwcmVjaXNpb24KCiAgICBmdW5jdGlvbiBnZXRDb252ZXJzaW9uUmF0ZSggRVJDMjAgc291cmNlLCBFUkMyMCBkZXN0LCB1aW50IGJsb2NrTnVtYmVyICkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgICAgQ29udmVyc2lvblJhdGUgbWVtb3J5IHJhdGVJbmZvID0gcGFpckNvbnZlcnNpb25SYXRlW3NoYTMoc291cmNlLGRlc3QpXTsKICAgICAgICBpZiggcmF0ZUluZm8ucmF0ZSA9PSAwICkgcmV0dXJuIDA7CiAgICAgICAgaWYoIHJhdGVJbmZvLmV4cGlyYXRpb25CbG9jayA8IGJsb2NrTnVtYmVyICkgcmV0dXJuIDA7CiAgICAgICAgcmV0dXJuIHJhdGVJbmZvLnJhdGUgKiAoMTAgKiogZ2V0RGVjaW1hbHMoZGVzdCkpIC8gKDEwKipnZXREZWNpbWFscyhzb3VyY2UpKTsKICAgIH0KCiAgICBldmVudCBFcnJvclJlcG9ydCggYWRkcmVzcyBpbmRleGVkIG9yaWdpbiwgdWludCBlcnJvciwgdWludCBlcnJvckluZm8gKTsKICAgIGV2ZW50IERvVHJhZGUoIGFkZHJlc3MgaW5kZXhlZCBvcmlnaW4sIGFkZHJlc3Mgc291cmNlLCB1aW50IHNvdXJjZUFtb3VudCwgYWRkcmVzcyBkZXN0VG9rZW4sIHVpbnQgZGVzdEFtb3VudCwgYWRkcmVzcyBkZXN0QWRkcmVzcyApOwoKICAgIGZ1bmN0aW9uIGdldERlY2ltYWxzKCBFUkMyMCB0b2tlbiApIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgICBpZiggdG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MgKSByZXR1cm4gMTg7CiAgICAgIHJldHVybiB0b2tlbi5kZWNpbWFscygpOwogICAgfQoKICAgIC8vLyBAZGV2IGRvIGEgdHJhZGUKICAgIC8vLyBAcGFyYW0gc291cmNlVG9rZW4gU291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIHNvdXJjZUFtb3VudCBBbW91bnQgb2Ygc291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3RUb2tlbiBEZXN0aW5hdGlvbiB0b2tlbgogICAgLy8vIEBwYXJhbSBkZXN0QWRkcmVzcyBEZXN0aW5hdGlvbiBhZGRyZXNzIHRvIHNlbmQgdG9rZW5zIHRvCiAgICAvLy8gQHBhcmFtIHZhbGlkYXRlIElmIHRydWUsIGFkZGl0aW9uYWwgdmFsaWRhdGlvbnMgYXJlIGFwcGxpY2FibGUKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIHRyYWRlIGlzIHN1Y2Nlc2Z1bAogICAgZnVuY3Rpb24gZG9UcmFkZSggRVJDMjAgc291cmNlVG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICB1aW50IHNvdXJjZUFtb3VudCwKICAgICAgICAgICAgICAgICAgICAgIEVSQzIwIGRlc3RUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgZGVzdEFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICBib29sIHZhbGlkYXRlICkgaW50ZXJuYWwgcmV0dXJucyhib29sKSB7CgogICAgICAgIC8vIGNhbiBza2lwIHZhbGlkYXRpb24gaWYgZG9uZSBhdCBreWJlciBuZXR3b3JrIGxldmVsCiAgICAgICAgaWYoIHZhbGlkYXRlICkgewogICAgICAgICAgICBpZiggISBpc1BhaXJMaXN0ZWQoIHNvdXJjZVRva2VuLCBkZXN0VG9rZW4sIGJsb2NrLm51bWJlciApICkgewogICAgICAgICAgICAgICAgLy8gcGFpciBpcyBub3QgbGlzdGVkCiAgICAgICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgwMDAwMDAwMSwgMCApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiggc291cmNlVG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MgKSB7CiAgICAgICAgICAgICAgICBpZiggbXNnLnZhbHVlICE9IHNvdXJjZUFtb3VudCApIHsKICAgICAgICAgICAgICAgICAgICAvLyBtc2cudmFsdWUgIT0gc291cmNlQW1tb3VudAogICAgICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDAyLCBtc2cudmFsdWUgKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiggbXNnLnZhbHVlID4gMCApIHsKICAgICAgICAgICAgICAgIC8vIG1zZy52YWx1ZSBtdXN0IGJlIDAKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDAzLCBtc2cudmFsdWUgKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKCBzb3VyY2VUb2tlbi5hbGxvd2FuY2UobXNnLnNlbmRlciwgdGhpcyApIDwgc291cmNlQW1vdW50ICkgewogICAgICAgICAgICAgICAgLy8gYWxsb3dhbmNlIGlzIG5vdCBlbm91Z2gKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDA0LCBzb3VyY2VUb2tlbi5hbGxvd2FuY2UobXNnLnNlbmRlciwgdGhpcyApICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVpbnQgY29udmVyc2lvblJhdGUgPSBnZXRDb252ZXJzaW9uUmF0ZSggc291cmNlVG9rZW4sIGRlc3RUb2tlbiwgYmxvY2subnVtYmVyICk7CiAgICAgICAgLy8gVE9ETyAtIHNhZmUgbXVsdGlwbGljYXRpb24KICAgICAgICB1aW50IGRlc3RBbW91bnQgPSAoY29udmVyc2lvblJhdGUgKiBzb3VyY2VBbW91bnQpIC8gUFJFQ0lTSU9OOwoKICAgICAgICAvLyBzYW5pdHkgY2hlY2sKICAgICAgICBpZiggZGVzdEFtb3VudCA9PSAwICkgewogICAgICAgICAgICAvLyB1bmV4cGVjdGVkIGVycm9yOiBkZXN0IGFtb3VudCBpcyAwCiAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDA1LCAwICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGNoZWNrIGZvciBzdWZmaWNpZW50IGJhbGFuY2UKICAgICAgICBpZiggZGVzdFRva2VuID09IEVUSF9UT0tFTl9BRERSRVNTICkgewogICAgICAgICAgICBpZiggdGhpcy5iYWxhbmNlIDwgZGVzdEFtb3VudCApIHsKICAgICAgICAgICAgICAgIC8vIGluc3VmZmljaWVudCBldGhlciBiYWxhbmNlCiAgICAgICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgwMDAwMDAwNiwgZGVzdEFtb3VudCApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiggZGVzdFRva2VuLmJhbGFuY2VPZih0aGlzKSA8IGRlc3RBbW91bnQgKSB7CiAgICAgICAgICAgICAgICAvLyBpbnN1ZmZpY2llbnQgdG9rZW4gYmFsYW5jZQogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDcsIHVpbnQoZGVzdFRva2VuKSApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBjb2xsZWN0IHNvdXJjZSB0b2tlbnMKICAgICAgICBpZiggc291cmNlVG9rZW4gIT0gRVRIX1RPS0VOX0FERFJFU1MgKSB7CiAgICAgICAgICAgIGlmKCAhIHNvdXJjZVRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLHRoaXMsc291cmNlQW1vdW50KSApIHsKICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIGZyb20gc291cmNlIHRva2VuIGZhaWxlZAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDgsIHVpbnQoc291cmNlVG9rZW4pICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHNlbmQgZGVzdCB0b2tlbnMKICAgICAgICBpZiggZGVzdFRva2VuID09IEVUSF9UT0tFTl9BRERSRVNTICkgewogICAgICAgICAgICBpZiggISBkZXN0QWRkcmVzcy5zZW5kKGRlc3RBbW91bnQpICkgewogICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgZXRoZXIgdG8gZGVzdCBmYWlsZWQKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDA5LCB1aW50KGRlc3RBZGRyZXNzKSApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiggISBkZXN0VG9rZW4udHJhbnNmZXIoZGVzdEFkZHJlc3MsIGRlc3RBbW91bnQpICkgewogICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdG9rZW4gdG8gZGVzdCBmYWlsZWQKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDBhLCB1aW50KGRlc3RBZGRyZXNzKSApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBEb1RyYWRlKCB0eC5vcmlnaW4sIHNvdXJjZVRva2VuLCBzb3VyY2VBbW91bnQsIGRlc3RUb2tlbiwgZGVzdEFtb3VudCwgZGVzdEFkZHJlc3MgKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBkZXYgdHJhZGUKICAgIC8vLyBAcGFyYW0gc291cmNlVG9rZW4gU291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIHNvdXJjZUFtb3VudCBBbW91bnQgb2Ygc291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3RUb2tlbiBEZXN0aW5hdGlvbiB0b2tlbgogICAgLy8vIEBwYXJhbSBkZXN0QWRkcmVzcyBEZXN0aW5hdGlvbiBhZGRyZXNzIHRvIHNlbmQgdG9rZW5zIHRvCiAgICAvLy8gQHBhcmFtIHZhbGlkYXRlIElmIHRydWUsIGFkZGl0aW9uYWwgdmFsaWRhdGlvbnMgYXJlIGFwcGxpY2FibGUKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIHRyYWRlIGlzIHN1Y2Nlc2Z1bAogICAgZnVuY3Rpb24gdHJhZGUoIEVSQzIwIHNvdXJjZVRva2VuLAogICAgICAgICAgICAgICAgICAgIHVpbnQgc291cmNlQW1vdW50LAogICAgICAgICAgICAgICAgICAgIEVSQzIwIGRlc3RUb2tlbiwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIGRlc3RBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIGJvb2wgdmFsaWRhdGUgKSBwYXlhYmxlIHJldHVybnMoYm9vbCkgewoKICAgICAgICBpZiggISB0cmFkZUVuYWJsZWQgKSB7CiAgICAgICAgICAgIC8vIHRyYWRlIGlzIG5vdCBlbmFibGVkCiAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODEwMDAwMDAwLCAwICk7CiAgICAgICAgICAgIGlmKCBtc2cudmFsdWUgPiAwICkgewogICAgICAgICAgICAgICAgaWYoICEgbXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkgKSB0aHJvdzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiggbXNnLnNlbmRlciAhPSBreWJlck5ldHdvcmsgKSB7CiAgICAgICAgICAgIC8vIHNlbmRlciBtdXN0IGJlIGt5YmVyIG5ldHdvcmsKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MTAwMDAwMDEsIHVpbnQobXNnLnNlbmRlcikgKTsKICAgICAgICAgICAgaWYoIG1zZy52YWx1ZSA+IDAgKSB7CiAgICAgICAgICAgICAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSApIHRocm93OwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiggISBkb1RyYWRlKCBzb3VyY2VUb2tlbiwgc291cmNlQW1vdW50LCBkZXN0VG9rZW4sIGRlc3RBZGRyZXNzLCB2YWxpZGF0ZSApICkgewogICAgICAgICAgICAvLyBkbyB0cmFkZSBmYWlsZWQKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MTAwMDAwMDIsIDAgKTsKICAgICAgICAgICAgaWYoIG1zZy52YWx1ZSA+IDAgKSB7CiAgICAgICAgICAgICAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSApIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDAsIDAgKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBldmVudCBTZXRSYXRlKCBFUkMyMCBzb3VyY2UsIEVSQzIwIGRlc3QsIHVpbnQgcmF0ZSwgdWludCBleHBpcnlCbG9jayApOwoKICAgIC8vLyBAbm90aWNlIGNhbiBiZSBjYWxsZWQgb25seSBieSBvd25lcgogICAgLy8vIEBkZXYgc2V0IHJhdGUgb2YgcGFpciBvZiB0b2tlbnMKICAgIC8vLyBAcGFyYW0gc291cmNlcyBhbiBhcnJheSBjb250YWluIHNvdXJjZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gZGVzdHMgYW4gYXJyYXkgY29udGFpbiBkZXN0IHRva2VucwogICAgLy8vIEBwYXJhbSBjb252ZXJzaW9uUmF0ZXMgYW4gYXJyYXkgd2l0aCByYXRlcwogICAgLy8vIEBwYXJhbSBleHBpcnlCbG9ja3MgYXJyYXkgb2YgZXhwaXJhdGlvbiBibG9ja3MKICAgIC8vLyBAcGFyYW0gdmFsaWRhdGUgSWYgdHJ1ZSwgYWRkaXRpb25hbCB2YWxpZGF0aW9ucyBhcmUgYXBwbGljYWJsZQogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgdHJhZGUgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiBzZXRSYXRlKCBFUkMyMFtdIHNvdXJjZXMsIEVSQzIwW10gZGVzdHMsIHVpbnRbXSBjb252ZXJzaW9uUmF0ZXMsIHVpbnRbXSBleHBpcnlCbG9ja3MsIGJvb2wgdmFsaWRhdGUgKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBpZiggbXNnLnNlbmRlciAhPSByZXNlcnZlT3duZXIgKSB7CiAgICAgICAgICAgIC8vIHNlbmRlciBtdXN0IGJlIHJlc2VydmUgb3duZXIKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MjAwMDAwMDAsIHVpbnQobXNnLnNlbmRlcikgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoIHZhbGlkYXRlICkgewogICAgICAgICAgICBpZiggKCBzb3VyY2VzLmxlbmd0aCAhPSBkZXN0cy5sZW5ndGggKSB8fAogICAgICAgICAgICAgICAgKCBzb3VyY2VzLmxlbmd0aCAhPSBjb252ZXJzaW9uUmF0ZXMubGVuZ3RoICkgfHwKICAgICAgICAgICAgICAgICggc291cmNlcy5sZW5ndGggIT0gZXhwaXJ5QmxvY2tzLmxlbmd0aCApICkgewogICAgICAgICAgICAgICAgLy8gYXJyYXlzIGxlbmd0aCBhcmUgbm90IGlkZW50aWNhbAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MjAwMDAwMDEsIDAgKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yKCB1aW50IGkgPSAwIDsgaSA8IHNvdXJjZXMubGVuZ3RoIDsgaSsrICkgewogICAgICAgICAgICBTZXRSYXRlKCBzb3VyY2VzW2ldLCBkZXN0c1tpXSwgY29udmVyc2lvblJhdGVzW2ldLCBleHBpcnlCbG9ja3NbaV0gKTsKICAgICAgICAgICAgcGFpckNvbnZlcnNpb25SYXRlW3NoYTMoc291cmNlc1tpXSxkZXN0c1tpXSldID0gQ29udmVyc2lvblJhdGUoIGNvbnZlcnNpb25SYXRlc1tpXSwgZXhwaXJ5QmxvY2tzW2ldICk7CiAgICAgICAgfQoKICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAwLCAwICk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZXZlbnQgRW5hYmxlVHJhZGUoIGJvb2wgZW5hYmxlICk7CgogICAgLy8vIEBub3RpY2UgY2FuIGJlIGNhbGxlZCBvbmx5IGJ5IG93bmVyCiAgICAvLy8gQGRldiBlbmFibGUgb2YgZGlzYWJsZSB0cmFkZQogICAgLy8vIEBwYXJhbSBlbmFibGUgaWYgdHJ1ZSB0cmFkZSBpcyBlbmFibGVkLCBvdGhlcndpc2UgZGlzYWJsZWQKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIHRyYWRlIGlzIHN1Y2Nlc2Z1bAogICAgZnVuY3Rpb24gZW5hYmxlVHJhZGUoIGJvb2wgZW5hYmxlICkgcmV0dXJucyhib29sKXsKICAgICAgICBpZiggbXNnLnNlbmRlciAhPSByZXNlcnZlT3duZXIgKSB7CiAgICAgICAgICAgIC8vIHNlbmRlciBtdXN0IGJlIHJlc2VydmUgb3duZXIKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MzAwMDAwMDAsIHVpbnQobXNnLnNlbmRlcikgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdHJhZGVFbmFibGVkID0gZW5hYmxlOwogICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDAsIDAgKTsKICAgICAgICBFbmFibGVUcmFkZSggZW5hYmxlICk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGV2ZW50IERlcG9zaXRUb2tlbiggRVJDMjAgdG9rZW4sIHVpbnQgYW1vdW50ICk7CiAgICBmdW5jdGlvbigpIHBheWFibGUgewogICAgICAgIERlcG9zaXRUb2tlbiggRVRIX1RPS0VOX0FERFJFU1MsIG1zZy52YWx1ZSApOwogICAgfQoKICAgIC8vLyBAbm90aWNlIGV0aGVyIGNvdWxkIGFsc28gYmUgZGVwb3NpdGVkIHdpdGhvdXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uCiAgICAvLy8gQGRldiBhbiBhdXhpbGFyeSBmdW5jdGlvbiB0aGF0IGFsbG93cyBldGhlciBkZXBvc2l0cwogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgZGVwb3NpdCBpcyBzdWNjZXNmdWwKICAgIGZ1bmN0aW9uIGRlcG9zaXRFdGhlciggKSBwYXlhYmxlIHJldHVybnMoYm9vbCkgewogICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDAsIDAgKTsKCiAgICAgICAgRGVwb3NpdFRva2VuKCBFVEhfVE9LRU5fQUREUkVTUywgbXNnLnZhbHVlICk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vIEBub3RpY2UgdG9rZW5zIGNvdWxkIGFsc28gYmUgZGVwb3NpdGVkIHdpdGhvdXQgY2FsbGluZyB0aGlzIGZ1bmN0aW9uCiAgICAvLy8gQGRldiBhbiBhdXhpbGFyeSBmdW5jdGlvbiB0aGF0IGFsbG93cyB0b2tlbiBkZXBvc2l0cwogICAgLy8vIEBwYXJhbSB0b2tlbiBUb2tlbiBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIGFtb3VudCBBbW91bnQgb2YgdG9rZW5zIHRvIGRlcG9zaXQKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIGRlcG9zaXQgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oIEVSQzIwIHRva2VuLCB1aW50IGFtb3VudCApIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKCB0b2tlbi5hbGxvd2FuY2UoIG1zZy5zZW5kZXIsIHRoaXMgKSA8IGFtb3VudCApIHsKICAgICAgICAgICAgLy8gYWxsb3dlbmNlIGlzIHNtYWxsZXIgdGhlbiBhbW91bnQKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4NTAwMDAwMDEsIHRva2VuLmFsbG93YW5jZSggbXNnLnNlbmRlciwgdGhpcyApICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKCAhIHRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCBhbW91bnQgKSApIHsKICAgICAgICAgICAgLy8gdHJhbnNmZXIgZnJvbSBmYWlsZWQKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4NTAwMDAwMDIsIHVpbnQodG9rZW4pICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIERlcG9zaXRUb2tlbiggdG9rZW4sIGFtb3VudCApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCiAgICBldmVudCBXaXRoZHJhdyggRVJDMjAgdG9rZW4sIHVpbnQgYW1vdW50LCBhZGRyZXNzIGRlc3RpbmF0aW9uICk7CgogICAgLy8vIEBub3RpY2UgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IG93bmVyLgogICAgLy8vIEBkZXYgd2l0aGRhdyB0b2tlbnMgb3IgZXRoZXIgZnJvbSBjb250cmFjdAogICAgLy8vIEBwYXJhbSB0b2tlbiBUb2tlbiBhZGRyZXNzCiAgICAvLy8gQHBhcmFtIGFtb3VudCBBbW91bnQgb2YgdG9rZW5zIHRvIGRlcG9zaXQKICAgIC8vLyBAcGFyYW0gZGVzdGluYXRpb24gYWRkcmVzcyB0aGF0IGdldCB3aXRoZHJld2VkIGZ1bmRzCiAgICAvLy8gQHJldHVybiB0cnVlIGlmZiB3aXRoZHJhd2FsIGlzIHN1Y2Nlc2Z1bAogICAgZnVuY3Rpb24gd2l0aGRyYXcoIEVSQzIwIHRva2VuLCB1aW50IGFtb3VudCwgYWRkcmVzcyBkZXN0aW5hdGlvbiApIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKCBtc2cuc2VuZGVyICE9IHJlc2VydmVPd25lciApIHsKICAgICAgICAgICAgLy8gc2VuZGVyIG11c3QgYmUgcmVzZXJ2ZSBvd25lcgogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDg2MDAwMDAwMCwgdWludChtc2cuc2VuZGVyKSApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiggdG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MgKSB7CiAgICAgICAgICAgIGlmKCAhIGRlc3RpbmF0aW9uLnNlbmQoYW1vdW50KSApIHRocm93OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKCAhIHRva2VuLnRyYW5zZmVyKGRlc3RpbmF0aW9uLGFtb3VudCkgKSB7CiAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRvIHJlc2VydmUgb3duZXIgZmFpbGVkCiAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODYwMDAwMDAxLCB1aW50KHRva2VuKSApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAwLCAwICk7CiAgICAgICAgV2l0aGRyYXcoIHRva2VuLCBhbW91bnQsIGRlc3RpbmF0aW9uICk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoIGFkZHJlc3MgbmV3T3duZXIgKSB7CiAgICAgIGlmKCBtc2cuc2VuZGVyICE9IHJlc2VydmVPd25lciApIHRocm93OwogICAgICByZXNlcnZlT3duZXIgPSBuZXdPd25lcjsKICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLy8gc3RhdHVzIGZ1bmN0aW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgdXNlIHRva2VuIGFkZHJlc3MgRVRIX1RPS0VOX0FERFJFU1MgZm9yIGV0aGVyCiAgICAvLy8gQGRldiBpbmZvcm1hdGlvbiBvbiBjb252ZXJzaW9uIHJhdGUgZnJvbSBzb3VyY2UgdG8gZGVzdAogICAgLy8vIEBwYXJhbSBzb3VyY2UgU291cmNlIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3QgICBEZXN0aW5hdG9pbiB0b2tlbgogICAgLy8vIEByZXR1cm4gKGNvbnZlcnNpb24gcmF0ZSxleHBlcmF0aW9uIGJsb2NrLGRlc3QgdG9rZW4gYmFsYW5jZSBvZiByZXNlcnZlKQogICAgZnVuY3Rpb24gZ2V0UGFpckluZm8oIEVSQzIwIHNvdXJjZSwgRVJDMjAgZGVzdCApIGNvbnN0YW50IHJldHVybnModWludCByYXRlLCB1aW50IGV4cEJsb2NrLCB1aW50IGJhbGFuY2UpIHsKICAgICAgICBDb252ZXJzaW9uUmF0ZSBtZW1vcnkgcmF0ZUluZm8gPSBwYWlyQ29udmVyc2lvblJhdGVbc2hhMyhzb3VyY2UsZGVzdCldOwogICAgICAgIGJhbGFuY2UgPSAwOwogICAgICAgIGlmKCBkZXN0ID09IEVUSF9UT0tFTl9BRERSRVNTICkgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgICAgICBlbHNlIGJhbGFuY2UgPSBkZXN0LmJhbGFuY2VPZih0aGlzKTsKCiAgICAgICAgZXhwQmxvY2sgPSByYXRlSW5mby5leHBpcmF0aW9uQmxvY2s7CiAgICAgICAgcmF0ZSA9IHJhdGVJbmZvLnJhdGU7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYSBkZWJ1ZyBmdW5jdGlvbgogICAgLy8vIEBkZXYgZ2V0IHRoZSBiYWxhbmNlIG9mIHRoZSByZXNlcnZlCiAgICAvLy8gQHBhcmFtIHRva2VuIFRoZSB0b2tlbiB0eXBlCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZSggRVJDMjAgdG9rZW4gKSBjb25zdGFudCByZXR1cm5zKHVpbnQpewogICAgICAgIGlmKCB0b2tlbiA9PSBFVEhfVE9LRU5fQUREUkVTUyApIHJldHVybiB0aGlzLmJhbGFuY2U7CiAgICAgICAgZWxzZSByZXR1cm4gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgfQp9'.
	

]
