Class {
	#name : #SRT7dd8d4c556d2005c5bafc3d5449a99fb46279e6b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7dd8d4c556d2005c5bafc3d5449a99fb46279e6b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IFNtYXJ0Um91bGV0dGVUb2tlbiB7CgkvL1Rva2VucyBkYXRhCglzdHJpbmcgcHVibGljIHN0YW5kYXJkID0gJ0VSQzIwJzsKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDggcHVibGljIGRlY2ltYWxzOwoKCXN0cnVjdCBob2xkZXJEYXRhIHsKCQl1aW50MjU2IHRva2Vuc19jb3VudDsKCQlib29sIGluaXQ7Cgl9CgoJc3RydWN0IHRlbXBIb2xkZXJEYXRhIHsKCQl1aW50MjU2IHRva2Vuc19jb3VudDsKCQl1aW50MjU2IHN0YXJ0X2RhdGU7CgkJdWludDI1NiBlbmRfZGF0ZTsKCX0KCglhZGRyZXNzW10gbGlzdEFkZHJIb2xkZXJzOwoKCW1hcHBpbmcoIGFkZHJlc3MgPT4gaG9sZGVyRGF0YSApIF9iYWxhbmNlczsKCW1hcHBpbmcoIGFkZHJlc3MgPT4gdGVtcEhvbGRlckRhdGEgKSBfdGVtcF9iYWxhbmNlOwoJbWFwcGluZyggYWRkcmVzcyA9PiBtYXBwaW5nKCBhZGRyZXNzID0+IHVpbnQyNTYgKSApIF9hcHByb3ZhbHM7CgoJYm9vbCBzdG9wX29wZXJhdGlvbjsKCQoJdWludDI1NiBfc3VwcGx5OwoJdWludDI1NiBfaW5pdF9jb3VudF90b2tlbnM7Cgl1aW50MjU2IHB1YmxpYyBjb3N0T2ZPbmVUb2tlbjsgLy90aGUgY29zdCBvZiBvbmUgdG9rZW4gaW4gd2VpCgkKCWFkZHJlc3Mgd2FsbGV0X0lDTzsKCWJvb2wgZW5hYmxlSUNPOwoJdWludDI1NiBtaW5fdmFsdWVfYnV5VG9rZW47IC8vaW4gd2VpCgl1aW50MjU2IG1heF92YWx1ZV9idXlUb2tlbjsgLy9pbiB3ZWkKCglhZGRyZXNzIGZvbmRfd2FsbGV0OwoJYWRkcmVzcyBkZXZlbG9wZXJfd2FsbGV0OwoKCWFkZHJlc3MgZGl2aWRlbnRfY29udHJhY3QgPSBhZGRyZXNzKDB4MCk7CgkKCWV2ZW50IFRva2VuQnV5KGFkZHJlc3MgYnV5ZXIsIHVpbnQyNTYgYW1vdW50T2ZUb2tlbnMpOwoKICAgIC8vQ29udHJhY3QgZGF0YQoJYWRkcmVzcyBkZXZlbG9wZXI7CglhZGRyZXNzIG1hbmFnZXI7CgoJc3RydWN0IGdhbWVzRGF0YSB7CgkJYm9vbCBpbml0OwoJfQoKCW1hcHBpbmcoIGFkZHJlc3MgPT4gZ2FtZXNEYXRhKSBsaXN0R2FtZXM7CglhZGRyZXNzW10gYWRkckdhbWVzOwoKCglmdW5jdGlvbiBTbWFydFJvdWxldHRlVG9rZW4oKQoJewoJCV9zdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDA7CgkJX2luaXRfY291bnRfdG9rZW5zID0gMTAwMDAwMDAwMDAwMDAwMDAwOwoKCQlkZXZlbG9wZXJfd2FsbGV0ID0gYWRkcmVzcygweDg1MjFFMWY5MjIwQTI1MWRFMGFiNzhmNmEyRTg3NTRDYTlFNzUyNDIpOwoJCV9iYWxhbmNlc1tkZXZlbG9wZXJfd2FsbGV0XSA9IGhvbGRlckRhdGEoKF9zdXBwbHkqMjApLzEwMCwgdHJ1ZSk7CgkJCgkJd2FsbGV0X0lDTyA9IGFkZHJlc3MoMHgyZGZmODdmODg5MmQ2NWY3YTk3YjEyODdlNzk1NDA1MDk4YWU3YjdmKTsKCQlfYmFsYW5jZXNbd2FsbGV0X0lDT10gPSBob2xkZXJEYXRhKChfc3VwcGx5KjYwKS8xMDAsIHRydWUpOwoJCQoJCWZvbmRfd2FsbGV0ID0gYWRkcmVzcygweDM1MDFERDJCNTE1RURDMTkyMGY5MDA3NzgyRGE1YWMwMTg5MjI1MDIpOwoJCV9iYWxhbmNlc1tmb25kX3dhbGxldF0gPSBob2xkZXJEYXRhKChfc3VwcGx5KjIwKS8xMDAsIHRydWUpOwoJCQoJCWxpc3RBZGRySG9sZGVycy5wdXNoKGRldmVsb3Blcl93YWxsZXQpOwoJCWxpc3RBZGRySG9sZGVycy5wdXNoKHdhbGxldF9JQ08pOwoJCWxpc3RBZGRySG9sZGVycy5wdXNoKGZvbmRfd2FsbGV0KTsKICAgICAgICAKICAgICAgICBuYW1lID0gJ1JvdWxldHRlIFRva2VuJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHN5bWJvbCA9ICdSTFQnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICBkZWNpbWFscyA9IDEwOwogICAgICAgIGNvc3RPZk9uZVRva2VuID0gMTUwMDAwMDAwMDAwMDAwMDsKCgkJZGV2ZWxvcGVyID0gbXNnLnNlbmRlcjsKCQltYW5hZ2VyID0gbXNnLnNlbmRlcjsJCQoJCQoJCWVuYWJsZUlDTyA9IGZhbHNlOwoJCW1pbl92YWx1ZV9idXlUb2tlbiA9IDEwMDAwMDAwMDAwMDAwMDAwMDA7CgkJbWF4X3ZhbHVlX2J1eVRva2VuID0gNTAwMDAwMDAwMDAwMDAwMDAwMDAwOwoKCQlzdG9wX29wZXJhdGlvbiA9IGZhbHNlOwoJfQoKCW1vZGlmaWVyIGlzRGV2ZWxvcGVyKCl7CgkJaWYgKG1zZy5zZW5kZXIhPWRldmVsb3BlcikgdGhyb3c7CgkJXzsKCX0KCgltb2RpZmllciBpc01hbmFnZXIoKXsKCQlpZiAobXNnLnNlbmRlciE9bWFuYWdlciAmJiBtc2cuc2VuZGVyIT1kZXZlbG9wZXIpIHRocm93OwoJCV87Cgl9CgoJbW9kaWZpZXIgaXNBY2Nlc3NTdG9wT3BlcmF0aW9uKCl7CgkJaWYgKG1zZy5zZW5kZXIhPW1hbmFnZXIgJiYgbXNnLnNlbmRlciE9ZGV2ZWxvcGVyICYmIChtc2cuc2VuZGVyIT1kaXZpZGVudF9jb250cmFjdCB8fCBkaXZpZGVudF9jb250cmFjdD09YWRkcmVzcygweDApKSkgdGhyb3c7CgkJXzsKCX0KCglmdW5jdGlvbiBjaGFuZ2VEZXZlbG9wZXIoYWRkcmVzcyBuZXdfZGV2ZWxvcGVyKQoJaXNEZXZlbG9wZXIKCXsKCQlpZihuZXdfZGV2ZWxvcGVyID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7CgkJZGV2ZWxvcGVyID0gbmV3X2RldmVsb3BlcjsKCX0KCglmdW5jdGlvbiBjaGFuZ2VNYW5hZ2VyKGFkZHJlc3MgbmV3X21hbmFnZXIpCglpc0RldmVsb3BlcgoJewoJCWlmKG5ld19tYW5hZ2VyID09IGFkZHJlc3MoMHgwKSkgdGhyb3c7CgkJbWFuYWdlciA9IG5ld19tYW5hZ2VyOwoJfQoKCWZ1bmN0aW9uIGNoYW5nZURpdmlkZW50Q29udHJhY3QoYWRkcmVzcyBuZXdfY29udHJhY3QpIGlzTWFuYWdlcgoJewoJCWlmKGRpdmlkZW50X2NvbnRyYWN0IT1hZGRyZXNzKDB4MCkpIHRocm93OwoJCWlmKGRpdmlkZW50X2NvbnRyYWN0PT1hZGRyZXNzKDB4MCkpIHRocm93OwoJCWRpdmlkZW50X2NvbnRyYWN0ID0gbmV3X2NvbnRyYWN0OwoJfQoKCWZ1bmN0aW9uIG5ld0Nvc3RUb2tlbih1aW50MjU2IG5ld19jb3N0KQoJaXNNYW5hZ2VyCgl7CgkJaWYobmV3X2Nvc3QgPT0gMCkgdGhyb3c7CgkJY29zdE9mT25lVG9rZW4gPSBuZXdfY29zdDsKCX0KCglmdW5jdGlvbiBnZXRvc3RUb2tlbigpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnModWludDI1NikKCXsKCQlyZXR1cm4gY29zdE9mT25lVG9rZW47Cgl9CgoJZnVuY3Rpb24gYWRkTmV3R2FtZShhZGRyZXNzIG5ld19nYW1lKQoJaXNNYW5hZ2VyCgl7CgkJaWYobmV3X2dhbWUgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKCQlsaXN0R2FtZXNbbmV3X2dhbWVdID0gZ2FtZXNEYXRhKHRydWUpOwoJCWFkZHJHYW1lcy5wdXNoKG5ld19nYW1lKTsKCX0KCglmdW5jdGlvbiBkZWxldGVHYW1lKGFkZHJlc3MgZ2FtZSkKCWlzTWFuYWdlcgoJewoJCWlmKGdhbWUgPT0gYWRkcmVzcygweDApKSB0aHJvdzsKCQlpZihsaXN0R2FtZXNbZ2FtZV0uaW5pdCl7CgkJCWxpc3RHYW1lc1tnYW1lXS5pbml0ID0gZmFsc2U7CgkJfQoJfQoKCWZ1bmN0aW9uIGtpbGwoKSBpc0RldmVsb3BlciB7CgkJLyp1aW50MjU2IHRva2VuX3ByaWNlID0gdGhpcy5iYWxhbmNlL19zdXBwbHk7CgkJZm9yKHVpbnQyNTYgaSA9IDA7IGkgPCBsaXN0QWRkckhvbGRlcnMubGVuZ3RoOyBpKyspewoJCQlpZihfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQ+MCl7CgkJCQlpZihsaXN0QWRkckhvbGRlcnNbaV0uc2VuZCh0b2tlbl9wcmljZSpfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQpPT1mYWxzZSl7IHRocm93OyB9CgkJCQllbHNlewoJCQkJCV9iYWxhbmNlc1tsaXN0QWRkckhvbGRlcnNbaV1dLnRva2Vuc19jb3VudCA9IDA7CgkJCQl9CgkJCX0KCQl9Ki8KCQlzdWljaWRlKGRldmVsb3Blcik7Cgl9CgoJZnVuY3Rpb24gZ2V0TGlzdEdhbWVzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10pewoJCXJldHVybiBhZGRyR2FtZXM7Cgl9CgoJZnVuY3Rpb24gYWRkVXNlclRvTGlzdChhZGRyZXNzIHVzZXIpIGludGVybmFsIHsKCQlpZighX2JhbGFuY2VzW3VzZXJdLmluaXQpewoJCQlsaXN0QWRkckhvbGRlcnMucHVzaCh1c2VyKTsKCQl9Cgl9CgoJZnVuY3Rpb24gZ2FtZUxpc3RPZiggYWRkcmVzcyB3aG8gKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sIHZhbHVlKSB7CgkJZ2FtZXNEYXRhIGdhbWVfZGF0YSA9IGxpc3RHYW1lc1t3aG9dOwoJCXJldHVybiBnYW1lX2RhdGEuaW5pdDsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gVG9rZW5zIEZ1bmN0aW9ucwoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gc3RvcE9wZXJhdGlvbigpIGlzQWNjZXNzU3RvcE9wZXJhdGlvbiB7CgkJc3RvcF9vcGVyYXRpb24gPSB0cnVlOwoJfQoKCWZ1bmN0aW9uIHN0YXJ0T3BlcmF0aW9uKCkgaXNBY2Nlc3NTdG9wT3BlcmF0aW9uIHsKCQlzdG9wX29wZXJhdGlvbiA9IGZhbHNlOwoJfQoKCWZ1bmN0aW9uIHN0YXR1c09wZXJhdGlvbigpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewoJCXJldHVybiBzdG9wX29wZXJhdGlvbjsKCX0KCglmdW5jdGlvbiBydW5JQ08oKSBpc01hbmFnZXIgewoJCWVuYWJsZUlDTyA9IHRydWU7Cgl9CgoJZnVuY3Rpb24gc3RvcElDTygpIGlzTWFuYWdlciB7CgkJZW5hYmxlSUNPID0gZmFsc2U7Cgl9CgoJZnVuY3Rpb24gaW5mb0lDTygpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpewoJCXJldHVybiBlbmFibGVJQ087Cgl9CgoJZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHN1cHBseSkgewoJCXJldHVybiBfc3VwcGx5OwoJfQoKCWZ1bmN0aW9uIGluaXRDb3VudFRva2VucygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgaW5pdF9jb3VudCkgewoJCXJldHVybiBfaW5pdF9jb3VudF90b2tlbnM7Cgl9CgoJZnVuY3Rpb24gYmFsYW5jZU9mKCBhZGRyZXNzIHdobyApIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdmFsdWUpIHsKCQkvL2hvbGRlckRhdGEgZGF0YV9ob2xkZXIgPSBfYmFsYW5jZXNbd2hvXTsKCQlyZXR1cm4gX2JhbGFuY2VzW3dob10udG9rZW5zX2NvdW50OwoJfQoKCWZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX2FsbG93YW5jZSkgewoJCXJldHVybiBfYXBwcm92YWxzW293bmVyXVtzcGVuZGVyXTsKCX0KCgkvLyBvdmVyZmxvdyBjaGVjawoJZnVuY3Rpb24gc2FmZVRvQWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CgkJcmV0dXJuIChhICsgYiA+PSBhICYmIGEgKyBiID49IGIpOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyKCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIG9rKSB7CgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93OwoKCQlpZiggX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudCA8IHZhbHVlICkgewoJCSAgICB0aHJvdzsKCQl9CgkJaWYoICFzYWZlVG9BZGQoX2JhbGFuY2VzW3RvXS50b2tlbnNfY291bnQsIHZhbHVlKSApIHsKCQkgICAgdGhyb3c7CgkJfQoKCQlfYmFsYW5jZXNbbXNnLnNlbmRlcl0udG9rZW5zX2NvdW50IC09IHZhbHVlOwoJCWlmKF9iYWxhbmNlc1t0b10uaW5pdCl7CgkJCV9iYWxhbmNlc1t0b10udG9rZW5zX2NvdW50ICs9IHZhbHVlOwoJCX0KCQllbHNlewoJCQlhZGRVc2VyVG9MaXN0KHRvKTsKCQkJX2JhbGFuY2VzW3RvXSA9IGhvbGRlckRhdGEodmFsdWUsIHRydWUpOwoJCX0KCgkJVHJhbnNmZXIoIG1zZy5zZW5kZXIsIHRvLCB2YWx1ZSApOwoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIHRyYW5zZmVyRnJvbSggYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIG9rKSB7CgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93OwoKCQlpZiggX2JhbGFuY2VzW2Zyb21dLnRva2Vuc19jb3VudCA8IHZhbHVlICkgewoJCSAgICB0aHJvdzsKCQl9CgkJCgkJaWYoIF9hcHByb3ZhbHNbZnJvbV1bbXNnLnNlbmRlcl0gPCB2YWx1ZSApIHsKCQkgICAgdGhyb3c7CgkJfQoJCWlmKCAhc2FmZVRvQWRkKF9iYWxhbmNlc1t0b10udG9rZW5zX2NvdW50LCB2YWx1ZSkgKSB7CgkJICAgIHRocm93OwoJCX0KCQkvLyB0cmFuc2ZlciBhbmQgcmV0dXJuIHRydWUKCQlfYXBwcm92YWxzW2Zyb21dW21zZy5zZW5kZXJdIC09IHZhbHVlOwoJCV9iYWxhbmNlc1tmcm9tXS50b2tlbnNfY291bnQgLT0gdmFsdWU7CgkJaWYoX2JhbGFuY2VzW3RvXS5pbml0KXsKCQkJX2JhbGFuY2VzW3RvXS50b2tlbnNfY291bnQgKz0gdmFsdWU7CgkJfQoJCWVsc2V7CgkJCWFkZFVzZXJUb0xpc3QodG8pOwoJCQlfYmFsYW5jZXNbdG9dID0gaG9sZGVyRGF0YSh2YWx1ZSwgdHJ1ZSk7CgkJfQkJCgkJCgkJVHJhbnNmZXIoIGZyb20sIHRvLCB2YWx1ZSApOwoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sIG9rKSB7CgkJaWYoc3RvcF9vcGVyYXRpb24pIHRocm93OwoKCQlfYXBwcm92YWxzW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gdmFsdWU7CgkJQXBwcm92YWwoIG1zZy5zZW5kZXIsIHNwZW5kZXIsIHZhbHVlICk7CgkJcmV0dXJuIHRydWU7Cgl9CgoJZXZlbnQgRW1pc3Npb24oYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlLCB1aW50MjU2IGJldCwgdWludDI1NiBjb2VmLCB1aW50MjU2IGRlY2ltYWxzLCB1aW50MjU2IGNvc3RfdG9rZW4pOwoKCWZ1bmN0aW9uIGVtaXNzaW9uKGFkZHJlc3MgcGxheWVyLCBhZGRyZXNzIHBhcnRuZXIsIHVpbnQyNTYgdmFsdWVfYmV0LCB1aW50MTYgY29lZl9wbGF5ZXIsIHVpbnQxNiBjb2VmX3BhcnRuZXIpIGV4dGVybmFsIHJldHVybnModWludDI1NikgewoJCWlmKHN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCgkJaWYobGlzdEdhbWVzW21zZy5zZW5kZXJdLmluaXQgPT0gZmFsc2UpIHRocm93OwoJCWlmKHBsYXllciA9PSBhZGRyZXNzKDB4MCkpIHRocm93OwoJCWlmKHZhbHVlX2JldCA9PSAwKSB0aHJvdzsKCgkJdWludDI1NiBkZWNpbWFsc190b2tlbiA9IDEwKip1aW50MjU2KGRlY2ltYWxzKTsKCgkJdWludDI1NiBwbGF5ZXJfdG9rZW4gPSAoKHZhbHVlX2JldCpjb2VmX3BsYXllcipkZWNpbWFsc190b2tlbikvMTAwMDApL2Nvc3RPZk9uZVRva2VuOwoJCWlmKF9iYWxhbmNlc1twbGF5ZXJdLmluaXQpewoJCQlfYmFsYW5jZXNbcGxheWVyXS50b2tlbnNfY291bnQgKz0gcGxheWVyX3Rva2VuOwoJCX0KCQllbHNlewoJCQlhZGRVc2VyVG9MaXN0KHBsYXllcik7CgkJCV9iYWxhbmNlc1twbGF5ZXJdID0gaG9sZGVyRGF0YShwbGF5ZXJfdG9rZW4sIHRydWUpOwoJCX0KCQlFbWlzc2lvbihwbGF5ZXIsIHBsYXllcl90b2tlbiwgdmFsdWVfYmV0LCBjb2VmX3BsYXllciwgZGVjaW1hbHNfdG9rZW4sIGNvc3RPZk9uZVRva2VuKTsKCgkJdWludDI1NiBwYXJ0bmVyX3Rva2VuID0gMDsKCQlpZihwYXJ0bmVyICE9IGFkZHJlc3MoMHgwKSl7CgkJCXBhcnRuZXJfdG9rZW4gPSAoKHZhbHVlX2JldCpjb2VmX3BhcnRuZXIqZGVjaW1hbHNfdG9rZW4pLzEwMDAwKS9jb3N0T2ZPbmVUb2tlbjsKCQkJaWYoX2JhbGFuY2VzW3BhcnRuZXJdLmluaXQpewoJCQkJX2JhbGFuY2VzW3BhcnRuZXJdLnRva2Vuc19jb3VudCArPSBwYXJ0bmVyX3Rva2VuOwoJCQl9CgkJCWVsc2V7CgkJCQlhZGRVc2VyVG9MaXN0KHBhcnRuZXIpOwoJCQkJX2JhbGFuY2VzW3BhcnRuZXJdID0gaG9sZGVyRGF0YShwYXJ0bmVyX3Rva2VuLCB0cnVlKTsKCQkJfQoJCQlFbWlzc2lvbihwYXJ0bmVyLCBwYXJ0bmVyX3Rva2VuLCB2YWx1ZV9iZXQsIGNvZWZfcGFydG5lciwgZGVjaW1hbHNfdG9rZW4sIGNvc3RPZk9uZVRva2VuKTsKCQl9CgoJCV9zdXBwbHkgKz0gKHBsYXllcl90b2tlbitwYXJ0bmVyX3Rva2VuKTsKCgkJcmV0dXJuIHBsYXllcl90b2tlbjsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gVGVtcG9yYXJ5IFRva2VucwoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWFkZHJlc3NbXSBsaXN0QWRkclRlbXBIb2xkZXJzOwoJZXZlbnQgVGVtcFRva2Vuc1NlbmQoYWRkcmVzcyBpbmRleGVkIHJlY2lwaWVudCwgdWludDI1NiBjb3VudCwgdWludDI1NiBzdGFydCwgdWludDI1NiBlbmQpOwoKCWZ1bmN0aW9uIHNlbmRUZW1wVG9rZW5zKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGNvdW50LCB1aW50MjU2IHBlcmlvZCkgaXNNYW5hZ2VyIHsKCQlpZighc3RvcF9vcGVyYXRpb24pIHRocm93OwoKCQlpZihjb3VudD09MCB8fCBwZXJpb2Q9PTApIHRocm93OwoJCQoJCXVpbnQyNTYgZGVjaW1hbHNfdG9rZW4gPSAxMCoqdWludDI1NihkZWNpbWFscyk7CgkJY291bnQgPSBjb3VudCpkZWNpbWFsc190b2tlbjsKCgkJaWYoX2JhbGFuY2VzW2ZvbmRfd2FsbGV0XS50b2tlbnNfY291bnQgPCBjb3VudCkgdGhyb3c7CgkJaWYoX3RlbXBfYmFsYW5jZVtyZWNpcGllbnRdLnRva2Vuc19jb3VudCA+IDApIHRocm93OwoKCQlfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0gPSB0ZW1wSG9sZGVyRGF0YShjb3VudCwgbm93LCBub3cgKyBwZXJpb2QpOwoJCWxpc3RBZGRyVGVtcEhvbGRlcnMucHVzaChyZWNpcGllbnQpOwoJCV9iYWxhbmNlc1tmb25kX3dhbGxldF0udG9rZW5zX2NvdW50IC09IGNvdW50OwoJCVRlbXBUb2tlbnNTZW5kKHJlY2lwaWVudCwgY291bnQsIF90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XS5zdGFydF9kYXRlLCBfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0uZW5kX2RhdGUpOwoJfQoKCWZ1bmN0aW9uIHRlbXBUb2tlbnNCYWxhbmNlT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCS8vdGVtcEhvbGRlckRhdGEgZGF0YV9ob2xkZXIgPSBfX3RlbXBfYmFsYW5jZVt3aG9dOwoJCWlmKF90ZW1wX2JhbGFuY2Vbd2hvXS5lbmRfZGF0ZSA8IG5vdykgcmV0dXJuIDA7CgkJZWxzZSByZXR1cm4gX3RlbXBfYmFsYW5jZVt3aG9dLnRva2Vuc19jb3VudDsKCX0KCglmdW5jdGlvbiB0ZW1wVG9rZW5zUGVyaW9kT2YoIGFkZHJlc3Mgd2hvICkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewoJCWlmKF90ZW1wX2JhbGFuY2Vbd2hvXS5lbmRfZGF0ZSA8IG5vdykgcmV0dXJuIDA7CgkJZWxzZSByZXR1cm4gX3RlbXBfYmFsYW5jZVt3aG9dLmVuZF9kYXRlOwoJfQoKCWZ1bmN0aW9uIHJldHVyblRlbXBUb2tlbnMoYWRkcmVzcyByZWNpcGllbnQpIGlzTWFuYWdlciB7CgkJaWYoIXN0b3Bfb3BlcmF0aW9uKSB0aHJvdzsKCQkKCQlpZihfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0udG9rZW5zX2NvdW50ID09IDApIHRocm93OwoKCQlfYmFsYW5jZXNbZm9uZF93YWxsZXRdLnRva2Vuc19jb3VudCArPSBfdGVtcF9iYWxhbmNlW3JlY2lwaWVudF0udG9rZW5zX2NvdW50OwoJCV90ZW1wX2JhbGFuY2VbcmVjaXBpZW50XSA9IHRlbXBIb2xkZXJEYXRhKDAsIDAsIDApOwkJCgl9CgoJZnVuY3Rpb24gZ2V0TGlzdFRlbXBIb2xkZXJzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10pewoJCXJldHVybiBsaXN0QWRkclRlbXBIb2xkZXJzOwoJfQoKCWZ1bmN0aW9uIGdldENvdW50VGVtcEhvbGRlcnMoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpewoJCXJldHVybiBsaXN0QWRkclRlbXBIb2xkZXJzLmxlbmd0aDsKCX0KCglmdW5jdGlvbiBnZXRJdGVtVGVtcEhvbGRlcnModWludDI1NiBpbmRleCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzKXsKCQlpZihpbmRleCA+PSBsaXN0QWRkclRlbXBIb2xkZXJzLmxlbmd0aCkgcmV0dXJuIGFkZHJlc3MoMHgwKTsKCQllbHNlIHJldHVybiBsaXN0QWRkclRlbXBIb2xkZXJzW2luZGV4XTsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gSW52ZXN0IEZ1bmN0aW9ucwoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8qZXZlbnQgU3VjY2Vzc1Byb2ZpdFNlbmQoYWRkcmVzcyBpbmRleGVkIGhvbGRlciwgdWludCB2YWx1ZSk7CglldmVudCBGYWlsUHJvZml0U2VuZChhZGRyZXNzIGluZGV4ZWQgaG9sZGVyLCB1aW50IHZhbHVlKTsqLwoKCWZ1bmN0aW9uKCkgcGF5YWJsZQoJewkKCQlpZighc3RvcF9vcGVyYXRpb24pIHRocm93OwoJCWlmKG1zZy5zZW5kZXIgPT0gZGV2ZWxvcGVyKSB0aHJvdzsKCQlpZihtc2cuc2VuZGVyID09IG1hbmFnZXIpIHRocm93OwoJCWlmKG1zZy5zZW5kZXIgPT0gZGV2ZWxvcGVyX3dhbGxldCkgdGhyb3c7CgkJaWYobXNnLnNlbmRlciA9PSB3YWxsZXRfSUNPKSB0aHJvdzsKCQlpZihtc2cuc2VuZGVyID09IGZvbmRfd2FsbGV0KSB0aHJvdzsKCgkJLyppZihsaXN0R2FtZXNbbXNnLnNlbmRlcl0uaW5pdCl7CgkJCXVpbnQyNTYgcHJvZml0X29uZV90b2tlbiA9IChtc2cudmFsdWUrdGhpcy5iYWxhbmNlKS9fc3VwcGx5OwoJCQlmb3IodWludDI1NiBpID0gMDsgaSA8IGxpc3RBZGRySG9sZGVycy5sZW5ndGg7IGkrKyl7CgkJCQlpZihfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQ+MCl7CgkJCQkJaWYobGlzdEFkZHJIb2xkZXJzW2ldLnNlbmQocHJvZml0X29uZV90b2tlbipfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQpKXsKCQkJCQkJU3VjY2Vzc1Byb2ZpdFNlbmQobGlzdEFkZHJIb2xkZXJzW2ldLCBwcm9maXRfb25lX3Rva2VuKl9iYWxhbmNlc1tsaXN0QWRkckhvbGRlcnNbaV1dLnRva2Vuc19jb3VudCk7CgkJCQkJfQoJCQkJCWVsc2V7CgkJCQkJCUZhaWxQcm9maXRTZW5kKGxpc3RBZGRySG9sZGVyc1tpXSwgcHJvZml0X29uZV90b2tlbipfYmFsYW5jZXNbbGlzdEFkZHJIb2xkZXJzW2ldXS50b2tlbnNfY291bnQpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0qLwoJCWlmKGxpc3RHYW1lc1ttc2cuc2VuZGVyXS5pbml0KSB0aHJvdzsKCgkJaWYoZW5hYmxlSUNPID09IGZhbHNlKSB0aHJvdzsKCQkJCgkJaWYobXNnLnZhbHVlIDwgbWluX3ZhbHVlX2J1eVRva2VuKSB0aHJvdzsKCQkKCQl1aW50MjU2IHZhbHVlX3NlbmQgPSBtc2cudmFsdWU7CgkJaWYodmFsdWVfc2VuZCA+IG1heF92YWx1ZV9idXlUb2tlbil7CgkJCXZhbHVlX3NlbmQgPSBtYXhfdmFsdWVfYnV5VG9rZW47CgkJCWlmKG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUtbWF4X3ZhbHVlX2J1eVRva2VuKT09ZmFsc2UpIHRocm93OwoJCX0KCgkJdWludDI1NiBkZWNpbWFsc190b2tlbiA9IDEwKip1aW50MjU2KGRlY2ltYWxzKTsKCQkKCQl1aW50MjU2IGNvdW50X3Rva2VucyA9ICh2YWx1ZV9zZW5kKmRlY2ltYWxzX3Rva2VuKS9jb3N0T2ZPbmVUb2tlbjsKCQkKCQlpZihjb3VudF90b2tlbnMgPl9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgKXsKCQkJY291bnRfdG9rZW5zID0gX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudDsKCQl9CgkJaWYodmFsdWVfc2VuZCA+IChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKXsJCQkJCgkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7CgkJCXZhbHVlX3NlbmQgPSB2YWx1ZV9zZW5kIC0gKChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKTsKCQl9CgoJCWlmKCFfYmFsYW5jZXNbbXNnLnNlbmRlcl0uaW5pdCl7CgkJCWFkZFVzZXJUb0xpc3QobXNnLnNlbmRlcik7CgkJCV9iYWxhbmNlc1t3YWxsZXRfSUNPXS50b2tlbnNfY291bnQgLT0gY291bnRfdG9rZW5zOwkJCQoJCQlfYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBob2xkZXJEYXRhKGNvdW50X3Rva2VucywgdHJ1ZSk7CgkJfQoJCWVsc2V7CgkJCWlmKCgoX2JhbGFuY2VzW21zZy5zZW5kZXJdLnRva2Vuc19jb3VudCpjb3N0T2ZPbmVUb2tlbikvZGVjaW1hbHNfdG9rZW4pKygoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbik+bWF4X3ZhbHVlX2J1eVRva2VuKSB7CgkJCQljb3VudF90b2tlbnMgPSAoKG1heF92YWx1ZV9idXlUb2tlbipkZWNpbWFsc190b2tlbikvY29zdE9mT25lVG9rZW4pLV9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQ7CQkJCQkKCQkJCWlmKG1zZy5zZW5kZXIuc2VuZCh2YWx1ZV9zZW5kLSgoY291bnRfdG9rZW5zKmNvc3RPZk9uZVRva2VuKS9kZWNpbWFsc190b2tlbikpPT1mYWxzZSkgdGhyb3c7CgkJCQl2YWx1ZV9zZW5kID0gKChjb3VudF90b2tlbnMqY29zdE9mT25lVG9rZW4pL2RlY2ltYWxzX3Rva2VuKTsKCQkJfQoKCQkJX2JhbGFuY2VzW3dhbGxldF9JQ09dLnRva2Vuc19jb3VudCAtPSBjb3VudF90b2tlbnM7CgkJCV9iYWxhbmNlc1ttc2cuc2VuZGVyXS50b2tlbnNfY291bnQgKz0gY291bnRfdG9rZW5zOwoJCX0KCgkJaWYodmFsdWVfc2VuZD4wKXsKCQkJaWYod2FsbGV0X0lDTy5zZW5kKHZhbHVlX3NlbmQpPT1mYWxzZSkgdGhyb3c7CgkJfQoKCQlpZihjb3VudF90b2tlbnM+MCl7CgkJCVRva2VuQnV5KG1zZy5zZW5kZXIsIGNvdW50X3Rva2Vucyk7CgkJfQoKCQlpZihfYmFsYW5jZXNbd2FsbGV0X0lDT10udG9rZW5zX2NvdW50ID09IDApewoJCQllbmFibGVJQ08gPSBmYWxzZTsKCQl9Cgl9CgoJZnVuY3Rpb24gZ2V0TGlzdEFkZHJlc3NIb2xkZXJzKCkgY29uc3RhbnQgcmV0dXJucyhhZGRyZXNzW10pewoJCXJldHVybiBsaXN0QWRkckhvbGRlcnM7Cgl9CgoJZnVuY3Rpb24gZ2V0Q291bnRIb2xkZXJzKCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKCQlyZXR1cm4gbGlzdEFkZHJIb2xkZXJzLmxlbmd0aDsKCX0KCglmdW5jdGlvbiBnZXRJdGVtSG9sZGVycyh1aW50MjU2IGluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewoJCWlmKGluZGV4ID49IGxpc3RBZGRySG9sZGVycy5sZW5ndGgpIHJldHVybiBhZGRyZXNzKDB4MCk7CgkJZWxzZSByZXR1cm4gbGlzdEFkZHJIb2xkZXJzW2luZGV4XTsKCX0KfQ=='.
	

]
