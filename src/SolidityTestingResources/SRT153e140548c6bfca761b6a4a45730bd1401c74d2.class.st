Class {
	#name : #SRT153e140548c6bfca761b6a4a45730bd1401c74d2,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT153e140548c6bfca761b6a4a45730bd1401c74d2 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKbGlicmFyeSBTYWZlTWF0aCB7CiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCgoKY29udHJhY3QgT3duYWJsZSB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9Cgp9CgoKCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCgpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgVElQYm90UmVndWxhdGlvbiB7CiAgICB1aW50MjU2IHB1YmxpYyBzdGFrZVN0YXJ0VGltZTsKICAgIHVpbnQyNTYgcHVibGljIHN0YWtlTWluQWdlOwogICAgdWludDI1NiBwdWJsaWMgc3Rha2VNYXhBZ2U7CiAgICBmdW5jdGlvbiBtaW50KCkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gY29pbkFnZSgpIHB1YmxpYyBwYXlhYmxlIHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYW5udWFsSW50ZXJlc3QoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIF9hZGRyZXNzLCB1aW50IF9yZXdhcmQpOwp9CgoKY29udHJhY3QgVElQVG9rZW4gaXMgRVJDMjAsVElQYm90UmVndWxhdGlvbixPd25hYmxlIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHN0cmluZyBwdWJsaWMgbmFtZSA9ICJUSVBib3QiOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiVElQIjsKICAgIHVpbnQgcHVibGljIGRlY2ltYWxzID0gMTg7CgogICAgdWludCBwdWJsaWMgY2hhaW5TdGFydFRpbWU7IC8vY2hhaW4gc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgY2hhaW5TdGFydEJsb2NrTnVtYmVyOyAvL2NoYWluIHN0YXJ0IGJsb2NrIG51bWJlcgogICAgdWludCBwdWJsaWMgc3Rha2VTdGFydFRpbWU7IC8vc3Rha2Ugc3RhcnQgdGltZQogICAgdWludCBwdWJsaWMgc3Rha2VNaW5BZ2UgPSAzIGRheXM7IC8vIG1pbmltdW0gYWdlIGZvciBjb2luIGFnZTogM0QKICAgIHVpbnQgcHVibGljIHN0YWtlTWF4QWdlID0gOTAgZGF5czsgLy8gc3Rha2UgYWdlIG9mIGZ1bGwgd2VpZ2h0OiA5MEQKICAgIHVpbnQgcHVibGljIG1heE1pbnRQcm9vZk9mU3Rha2UgPSAxMCoqMTc7IC8vIGRlZmF1bHQgMTAlIGFubnVhbCBpbnRlcmVzdAoKICAgIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogICAgdWludCBwdWJsaWMgbWF4VG90YWxTdXBwbHk7CiAgICB1aW50IHB1YmxpYyB0b3RhbEluaXRpYWxTdXBwbHk7CgogICAgc3RydWN0IHRyYW5zZmVySW5TdHJ1Y3R7CiAgICB1aW50MjU2IGFtb3VudDsKICAgIHVpbnQ2NCB0aW1lOwogICAgfQoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHRyYW5zZmVySW5TdHJ1Y3RbXSkgdHJhbnNmZXJJbnM7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvKioKICAgICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlQYXlsb2FkU2l6ZSh1aW50IHNpemUpIHsKICAgICAgICByZXF1aXJlKG1zZy5kYXRhLmxlbmd0aCA+PSBzaXplICsgNCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBjYW5USVBNaW50KCkgewogICAgICAgIHJlcXVpcmUodG90YWxTdXBwbHkgPCBtYXhUb3RhbFN1cHBseSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBUSVBUb2tlbigpIHB1YmxpYyB7CiAgICAgICAgbWF4VG90YWxTdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsgLy8gMTAgVHJpbGxpb24uCiAgICAgICAgdG90YWxJbml0aWFsU3VwcGx5ID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOyAvLyAxMDAgQmlsbGlvbi4KCiAgICAgICAgY2hhaW5TdGFydFRpbWUgPSBub3c7CiAgICAgICAgY2hhaW5TdGFydEJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHRvdGFsSW5pdGlhbFN1cHBseTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsSW5pdGlhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyBvbmx5UGF5bG9hZFNpemUoMiAqIDMyKSByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYobXNnLnNlbmRlciA9PSBfdG8pIHJldHVybiBtaW50KCk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIHVpbnQ2NCBfbm93ID0gdWludDY0KG5vdyk7CiAgICAgICAgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQyNTYoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKICAgICAgICB0cmFuc2Zlckluc1tfdG9dLnB1c2godHJhbnNmZXJJblN0cnVjdCh1aW50MjU2KF92YWx1ZSksX25vdykpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gcmVxdWlyZSAoX3ZhbHVlIDw9IF9hbGxvd2FuY2UpOwoKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2Zyb21dLmxlbmd0aCA+IDApIGRlbGV0ZSB0cmFuc2Zlckluc1tfZnJvbV07CiAgICAgICAgdWludDY0IF9ub3cgPSB1aW50NjQobm93KTsKICAgICAgICB0cmFuc2Zlckluc1tfZnJvbV0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQyNTYoYmFsYW5jZXNbX2Zyb21dKSxfbm93KSk7CiAgICAgICAgdHJhbnNmZXJJbnNbX3RvXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDI1NihfdmFsdWUpLF9ub3cpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoKF92YWx1ZSA9PSAwKSB8fCAoYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPT0gMCkpOwoKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gbWludCgpIHB1YmxpYyBjYW5USVBNaW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA8PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdWludCByZXdhcmQgPSBnZXRQcm9vZk9mU3Rha2VSZXdhcmQobXNnLnNlbmRlcik7CiAgICAgICAgaWYocmV3YXJkIDw9IDApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQocmV3YXJkKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLmFkZChyZXdhcmQpOwogICAgICAgIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDI1NihiYWxhbmNlc1ttc2cuc2VuZGVyXSksdWludDY0KG5vdykpKTsKCiAgICAgICAgTWludChtc2cuc2VuZGVyLCByZXdhcmQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEJsb2NrTnVtYmVyKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCBibG9ja051bWJlcikgewogICAgICAgIGJsb2NrTnVtYmVyID0gYmxvY2subnVtYmVyLnN1YihjaGFpblN0YXJ0QmxvY2tOdW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvaW5BZ2UoKSBwdWJsaWMgcGF5YWJsZSByZXR1cm5zICh1aW50IG15Q29pbkFnZSkgewogICAgICAgIG15Q29pbkFnZSA9IGdldENvaW5BZ2UobXNnLnNlbmRlcixub3cpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFubnVhbEludGVyZXN0KCkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50IGludGVyZXN0KSB7CiAgICAgICAgdWludCBfbm93ID0gbm93OwogICAgICAgIGludGVyZXN0ID0gbWF4TWludFByb29mT2ZTdGFrZTsKICAgICAgICBpZigoX25vdy5zdWIoc3Rha2VTdGFydFRpbWUpKS5kaXYoMSB5ZWFycykgPT0gMCkgewogICAgICAgICAgICBpbnRlcmVzdCA9ICg3NzAgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9IGVsc2UgaWYoKF9ub3cuc3ViKHN0YWtlU3RhcnRUaW1lKSkuZGl2KDEgeWVhcnMpID09IDEpewogICAgICAgICAgICBpbnRlcmVzdCA9ICg0MzUgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UHJvb2ZPZlN0YWtlUmV3YXJkKGFkZHJlc3MgX2FkZHJlc3MpIGludGVybmFsIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJlcXVpcmUoIChub3cgPj0gc3Rha2VTdGFydFRpbWUpICYmIChzdGFrZVN0YXJ0VGltZSA+IDApICk7CgogICAgICAgIHVpbnQgX25vdyA9IG5vdzsKICAgICAgICB1aW50IF9jb2luQWdlID0gZ2V0Q29pbkFnZShfYWRkcmVzcywgX25vdyk7CiAgICAgICAgaWYoX2NvaW5BZ2UgPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIHVpbnQgaW50ZXJlc3QgPSBtYXhNaW50UHJvb2ZPZlN0YWtlOwogICAgICAgIC8vIER1ZSB0byB0aGUgaGlnaCBpbnRlcmVzdCByYXRlIGZvciB0aGUgZmlyc3QgdHdvIHllYXJzLCBjb21wb3VuZGluZyBzaG91bGQgYmUgdGFrZW4gaW50byBhY2NvdW50LgogICAgICAgIC8vIEVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZSA9ICgxICsgKG5vbWluYWwgcmF0ZSAvIG51bWJlciBvZiBjb21wb3VuZGluZyBwZXJpb2RzKSkgXiAobnVtYmVyIG9mIGNvbXBvdW5kaW5nIHBlcmlvZHMpIC0gMQogICAgICAgIGlmKChfbm93LnN1YihzdGFrZVN0YXJ0VGltZSkpLmRpdigxIHllYXJzKSA9PSAwKSB7CiAgICAgICAgICAgIC8vIDFzdCB5ZWFyIGVmZmVjdGl2ZSBhbm51YWwgaW50ZXJlc3QgcmF0ZSBpcyAxMDAlIHdoZW4gd2Ugc2VsZWN0IHRoZSBzdGFrZU1heEFnZSAoOTAgZGF5cykgYXMgdGhlIGNvbXBvdW5kaW5nIHBlcmlvZC4KICAgICAgICAgICAgaW50ZXJlc3QgPSAoNzcwICogbWF4TWludFByb29mT2ZTdGFrZSkuZGl2KDEwMCk7CiAgICAgICAgfSBlbHNlIGlmKChfbm93LnN1YihzdGFrZVN0YXJ0VGltZSkpLmRpdigxIHllYXJzKSA9PSAxKXsKICAgICAgICAgICAgLy8gMm5kIHllYXIgZWZmZWN0aXZlIGFubnVhbCBpbnRlcmVzdCByYXRlIGlzIDUwJQogICAgICAgICAgICBpbnRlcmVzdCA9ICg0MzUgKiBtYXhNaW50UHJvb2ZPZlN0YWtlKS5kaXYoMTAwKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoX2NvaW5BZ2UgKiBpbnRlcmVzdCkuZGl2KDM2NSAqICgxMCoqZGVjaW1hbHMpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRDb2luQWdlKGFkZHJlc3MgX2FkZHJlc3MsIHVpbnQgX25vdykgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50IF9jb2luQWdlKSB7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aCA8PSAwKSByZXR1cm4gMDsKCiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdHJhbnNmZXJJbnNbX2FkZHJlc3NdLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgaWYoIF9ub3cgPCB1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS50aW1lKS5hZGQoc3Rha2VNaW5BZ2UpICkgY29udGludWU7CgogICAgICAgICAgICB1aW50IG5Db2luU2Vjb25kcyA9IF9ub3cuc3ViKHVpbnQodHJhbnNmZXJJbnNbX2FkZHJlc3NdW2ldLnRpbWUpKTsKICAgICAgICAgICAgaWYoIG5Db2luU2Vjb25kcyA+IHN0YWtlTWF4QWdlICkgbkNvaW5TZWNvbmRzID0gc3Rha2VNYXhBZ2U7CgogICAgICAgICAgICBfY29pbkFnZSA9IF9jb2luQWdlLmFkZCh1aW50KHRyYW5zZmVySW5zW19hZGRyZXNzXVtpXS5hbW91bnQpICogbkNvaW5TZWNvbmRzLmRpdigxIGRheXMpKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJTZXRTdGFrZVN0YXJ0VGltZSh1aW50IHRpbWVzdGFtcCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZSgoc3Rha2VTdGFydFRpbWUgPD0gMCkgJiYgKHRpbWVzdGFtcCA+PSBjaGFpblN0YXJ0VGltZSkpOwogICAgICAgIHN0YWtlU3RhcnRUaW1lID0gdGltZXN0YW1wOwogICAgfQoKICAgIGZ1bmN0aW9uIG93bmVyQnVyblRva2VuKHVpbnQgX3ZhbHVlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGRlbGV0ZSB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXTsKICAgICAgICB0cmFuc2Zlckluc1ttc2cuc2VuZGVyXS5wdXNoKHRyYW5zZmVySW5TdHJ1Y3QodWludDI1NihiYWxhbmNlc1ttc2cuc2VuZGVyXSksdWludDY0KG5vdykpKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICB0b3RhbEluaXRpYWxTdXBwbHkgPSB0b3RhbEluaXRpYWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgbWF4VG90YWxTdXBwbHkgPSBtYXhUb3RhbFN1cHBseS5zdWIoX3ZhbHVlKjEwKTsKCiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgCiAgICBmdW5jdGlvbiBiYXRjaFRyYW5zZmVyKGFkZHJlc3NbXSBfcmVjaXBpZW50cywgdWludFtdIF92YWx1ZXMpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoIF9yZWNpcGllbnRzLmxlbmd0aCA+IDAgJiYgX3JlY2lwaWVudHMubGVuZ3RoID09IF92YWx1ZXMubGVuZ3RoKTsKCiAgICAgICAgdWludCB0b3RhbCA9IDA7CiAgICAgICAgZm9yKHVpbnQgaSA9IDA7IGkgPCBfdmFsdWVzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgdG90YWwgPSB0b3RhbC5hZGQoX3ZhbHVlc1tpXSk7CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUodG90YWwgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgICAgICB1aW50NjQgX25vdyA9IHVpbnQ2NChub3cpOwogICAgICAgIGZvcih1aW50IGogPSAwOyBqIDwgX3JlY2lwaWVudHMubGVuZ3RoOyBqKyspewogICAgICAgICAgICBiYWxhbmNlc1tfcmVjaXBpZW50c1tqXV0gPSBiYWxhbmNlc1tfcmVjaXBpZW50c1tqXV0uYWRkKF92YWx1ZXNbal0pOwogICAgICAgICAgICB0cmFuc2Zlckluc1tfcmVjaXBpZW50c1tqXV0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQyNTYoX3ZhbHVlc1tqXSksX25vdykpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfcmVjaXBpZW50c1tqXSwgX3ZhbHVlc1tqXSk7CiAgICAgICAgfQoKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1Yih0b3RhbCk7CiAgICAgICAgaWYodHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ubGVuZ3RoID4gMCkgZGVsZXRlIHRyYW5zZmVySW5zW21zZy5zZW5kZXJdOwogICAgICAgIGlmKGJhbGFuY2VzW21zZy5zZW5kZXJdID4gMCkgdHJhbnNmZXJJbnNbbXNnLnNlbmRlcl0ucHVzaCh0cmFuc2ZlckluU3RydWN0KHVpbnQyNTYoYmFsYW5jZXNbbXNnLnNlbmRlcl0pLF9ub3cpKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0='.
	

]
