Class {
	#name : #SRTb12c6f3dc4a63ed5c070e68d9641390bb3895ab6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb12c6f3dc4a63ed5c070e68d9641390bb3895ab6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludCB0b3RhbFN1cHBseSk7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpOwogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zKHVpbnQgZGlnaXRzKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludCBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50IF92YWx1ZSk7Cn0KCi8vLyBAdGl0bGUgS3liZXIgUmVzZXJ2ZSBjb250cmFjdAovLy8gQGF1dGhvciBZYXJvbiBWZWxuZXIKCmNvbnRyYWN0IEt5YmVyUmVzZXJ2ZSB7CiAgICBhZGRyZXNzIHB1YmxpYyByZXNlcnZlT3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBreWJlck5ldHdvcms7CiAgICBFUkMyMCBjb25zdGFudCBwdWJsaWMgRVRIX1RPS0VOX0FERFJFU1MgPSBFUkMyMCgweDAwZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZSk7CiAgICB1aW50ICBjb25zdGFudCBQUkVDSVNJT04gPSAoMTAqKjE4KTsKICAgIGJvb2wgcHVibGljIHRyYWRlRW5hYmxlZDsKCiAgICBzdHJ1Y3QgQ29udmVyc2lvblJhdGUgewogICAgICAgIHVpbnQgcmF0ZTsKICAgICAgICB1aW50IGV4cGlyYXRpb25CbG9jazsKICAgIH0KCiAgICBtYXBwaW5nKGJ5dGVzMzI9PkNvbnZlcnNpb25SYXRlKSBwYWlyQ29udmVyc2lvblJhdGU7CgogICAgLy8vIEBkZXYgYyd0b3IuCiAgICAvLy8gQHBhcmFtIF9reWJlck5ldHdvcmsgVGhlIGFkZHJlc3Mgb2Yga3liZXIgbmV0d29yawogICAgLy8vIEBwYXJhbSBfcmVzZXJ2ZU93bmVyIEFkZHJlc3Mgb2YgdGhlIHJlc2VydmUgb3duZXIKICAgIGZ1bmN0aW9uIEt5YmVyUmVzZXJ2ZSggYWRkcmVzcyBfa3liZXJOZXR3b3JrLCBhZGRyZXNzIF9yZXNlcnZlT3duZXIgKSB7CiAgICAgICAga3liZXJOZXR3b3JrID0gX2t5YmVyTmV0d29yazsKICAgICAgICByZXNlcnZlT3duZXIgPSBfcmVzZXJ2ZU93bmVyOwogICAgICAgIHRyYWRlRW5hYmxlZCA9IHRydWU7CiAgICB9CgoKICAgIC8vLyBAZGV2IGNoZWNrIGlmIGEgcGFpciBpcyBsaXN0ZWQgZm9yIHRyYWRpbmcuCiAgICAvLy8gQHBhcmFtIHNvdXJjZSBTb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVzdCBEZXN0aW5hdGlvbiB0b2tlbgogICAgLy8vIEBwYXJhbSBibG9ja051bWJlciBDdXJyZW50IGJsb2NrIG51bWJlcgogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgcGFpciBpcyBsaXN0ZWQKICAgIGZ1bmN0aW9uIGlzUGFpckxpc3RlZCggRVJDMjAgc291cmNlLCBFUkMyMCBkZXN0LCB1aW50IGJsb2NrTnVtYmVyICkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgQ29udmVyc2lvblJhdGUgbWVtb3J5IHJhdGVJbmZvID0gcGFpckNvbnZlcnNpb25SYXRlW3NoYTMoc291cmNlLGRlc3QpXTsKICAgICAgICBpZiggcmF0ZUluZm8ucmF0ZSA9PSAwICkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiByYXRlSW5mby5leHBpcmF0aW9uQmxvY2sgPj0gYmxvY2tOdW1iZXI7CiAgICB9CgogICAgLy8vIEBkZXYgZ2V0IGN1cnJlbnQgY29udmVyc2lvbiByYXRlCiAgICAvLy8gQHBhcmFtIHNvdXJjZSBTb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVzdCBEZXN0aW5hdGlvbiB0b2tlbgogICAgLy8vIEBwYXJhbSBibG9ja051bWJlciBDdXJyZW50IGJsb2NrIG51bWJlcgogICAgLy8vIEByZXR1cm4gY29udmVyc2lvbiByYXRlIHdpdGggUFJFQ0lTSU9OIHByZWNpc2lvbgoKICAgIGZ1bmN0aW9uIGdldENvbnZlcnNpb25SYXRlKCBFUkMyMCBzb3VyY2UsIEVSQzIwIGRlc3QsIHVpbnQgYmxvY2tOdW1iZXIgKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICBDb252ZXJzaW9uUmF0ZSBtZW1vcnkgcmF0ZUluZm8gPSBwYWlyQ29udmVyc2lvblJhdGVbc2hhMyhzb3VyY2UsZGVzdCldOwogICAgICAgIGlmKCByYXRlSW5mby5yYXRlID09IDAgKSByZXR1cm4gMDsKICAgICAgICBpZiggcmF0ZUluZm8uZXhwaXJhdGlvbkJsb2NrIDwgYmxvY2tOdW1iZXIgKSByZXR1cm4gMDsKICAgICAgICByZXR1cm4gcmF0ZUluZm8ucmF0ZSAqICgxMCAqKiBnZXREZWNpbWFscyhkZXN0KSkgLyAoMTAqKmdldERlY2ltYWxzKHNvdXJjZSkpOwogICAgfQoKICAgIGV2ZW50IEVycm9yUmVwb3J0KCBhZGRyZXNzIGluZGV4ZWQgb3JpZ2luLCB1aW50IGVycm9yLCB1aW50IGVycm9ySW5mbyApOwogICAgZXZlbnQgRG9UcmFkZSggYWRkcmVzcyBpbmRleGVkIG9yaWdpbiwgYWRkcmVzcyBzb3VyY2UsIHVpbnQgc291cmNlQW1vdW50LCBhZGRyZXNzIGRlc3RUb2tlbiwgdWludCBkZXN0QW1vdW50LCBhZGRyZXNzIGRlc3RBZGRyZXNzICk7CgogICAgZnVuY3Rpb24gZ2V0RGVjaW1hbHMoIEVSQzIwIHRva2VuICkgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgIGlmKCB0b2tlbiA9PSBFVEhfVE9LRU5fQUREUkVTUyApIHJldHVybiAxODsKICAgICAgcmV0dXJuIHRva2VuLmRlY2ltYWxzKCk7CiAgICB9CgogICAgLy8vIEBkZXYgZG8gYSB0cmFkZQogICAgLy8vIEBwYXJhbSBzb3VyY2VUb2tlbiBTb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gc291cmNlQW1vdW50IEFtb3VudCBvZiBzb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVzdFRva2VuIERlc3RpbmF0aW9uIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3RBZGRyZXNzIERlc3RpbmF0aW9uIGFkZHJlc3MgdG8gc2VuZCB0b2tlbnMgdG8KICAgIC8vLyBAcGFyYW0gdmFsaWRhdGUgSWYgdHJ1ZSwgYWRkaXRpb25hbCB2YWxpZGF0aW9ucyBhcmUgYXBwbGljYWJsZQogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgdHJhZGUgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiBkb1RyYWRlKCBFUkMyMCBzb3VyY2VUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgIHVpbnQgc291cmNlQW1vdW50LAogICAgICAgICAgICAgICAgICAgICAgRVJDMjAgZGVzdFRva2VuLAogICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyBkZXN0QWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgIGJvb2wgdmFsaWRhdGUgKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wpIHsKCiAgICAgICAgLy8gY2FuIHNraXAgdmFsaWRhdGlvbiBpZiBkb25lIGF0IGt5YmVyIG5ldHdvcmsgbGV2ZWwKICAgICAgICBpZiggdmFsaWRhdGUgKSB7CiAgICAgICAgICAgIGlmKCAhIGlzUGFpckxpc3RlZCggc291cmNlVG9rZW4sIGRlc3RUb2tlbiwgYmxvY2subnVtYmVyICkgKSB7CiAgICAgICAgICAgICAgICAvLyBwYWlyIGlzIG5vdCBsaXN0ZWQKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDAxLCAwICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCBzb3VyY2VUb2tlbiA9PSBFVEhfVE9LRU5fQUREUkVTUyApIHsKICAgICAgICAgICAgICAgIGlmKCBtc2cudmFsdWUgIT0gc291cmNlQW1vdW50ICkgewogICAgICAgICAgICAgICAgICAgIC8vIG1zZy52YWx1ZSAhPSBzb3VyY2VBbW1vdW50CiAgICAgICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDIsIG1zZy52YWx1ZSApOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKCBtc2cudmFsdWUgPiAwICkgewogICAgICAgICAgICAgICAgLy8gbXNnLnZhbHVlIG11c3QgYmUgMAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDMsIG1zZy52YWx1ZSApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYoIHNvdXJjZVRva2VuLmFsbG93YW5jZShtc2cuc2VuZGVyLCB0aGlzICkgPCBzb3VyY2VBbW91bnQgKSB7CiAgICAgICAgICAgICAgICAvLyBhbGxvd2FuY2UgaXMgbm90IGVub3VnaAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDQsIHNvdXJjZVRva2VuLmFsbG93YW5jZShtc2cuc2VuZGVyLCB0aGlzICkgKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdWludCBjb252ZXJzaW9uUmF0ZSA9IGdldENvbnZlcnNpb25SYXRlKCBzb3VyY2VUb2tlbiwgZGVzdFRva2VuLCBibG9jay5udW1iZXIgKTsKICAgICAgICAvLyBUT0RPIC0gc2FmZSBtdWx0aXBsaWNhdGlvbgogICAgICAgIHVpbnQgZGVzdEFtb3VudCA9IChjb252ZXJzaW9uUmF0ZSAqIHNvdXJjZUFtb3VudCkgLyBQUkVDSVNJT047CgogICAgICAgIC8vIHNhbml0eSBjaGVjawogICAgICAgIGlmKCBkZXN0QW1vdW50ID09IDAgKSB7CiAgICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgZXJyb3I6IGRlc3QgYW1vdW50IGlzIDAKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDUsIDAgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2hlY2sgZm9yIHN1ZmZpY2llbnQgYmFsYW5jZQogICAgICAgIGlmKCBkZXN0VG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MgKSB7CiAgICAgICAgICAgIGlmKCB0aGlzLmJhbGFuY2UgPCBkZXN0QW1vdW50ICkgewogICAgICAgICAgICAgICAgLy8gaW5zdWZmaWNpZW50IGV0aGVyIGJhbGFuY2UKICAgICAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODAwMDAwMDA2LCBkZXN0QW1vdW50ICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmKCBkZXN0VG9rZW4uYmFsYW5jZU9mKHRoaXMpIDwgZGVzdEFtb3VudCApIHsKICAgICAgICAgICAgICAgIC8vIGluc3VmZmljaWVudCB0b2tlbiBiYWxhbmNlCiAgICAgICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgwMDAwMDAwNywgdWludChkZXN0VG9rZW4pICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGNvbGxlY3Qgc291cmNlIHRva2VucwogICAgICAgIGlmKCBzb3VyY2VUb2tlbiAhPSBFVEhfVE9LRU5fQUREUkVTUyApIHsKICAgICAgICAgICAgaWYoICEgc291cmNlVG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsdGhpcyxzb3VyY2VBbW91bnQpICkgewogICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgZnJvbSBzb3VyY2UgdG9rZW4gZmFpbGVkCiAgICAgICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgwMDAwMDAwOCwgdWludChzb3VyY2VUb2tlbikgKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gc2VuZCBkZXN0IHRva2VucwogICAgICAgIGlmKCBkZXN0VG9rZW4gPT0gRVRIX1RPS0VOX0FERFJFU1MgKSB7CiAgICAgICAgICAgIGlmKCAhIGRlc3RBZGRyZXNzLnNlbmQoZGVzdEFtb3VudCkgKSB7CiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciBldGhlciB0byBkZXN0IGZhaWxlZAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMDksIHVpbnQoZGVzdEFkZHJlc3MpICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmKCAhIGRlc3RUb2tlbi50cmFuc2ZlcihkZXN0QWRkcmVzcywgZGVzdEFtb3VudCkgKSB7CiAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciB0b2tlbiB0byBkZXN0IGZhaWxlZAogICAgICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MDAwMDAwMGEsIHVpbnQoZGVzdEFkZHJlc3MpICk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIERvVHJhZGUoIHR4Lm9yaWdpbiwgc291cmNlVG9rZW4sIHNvdXJjZUFtb3VudCwgZGVzdFRva2VuLCBkZXN0QW1vdW50LCBkZXN0QWRkcmVzcyApOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiB0cmFkZQogICAgLy8vIEBwYXJhbSBzb3VyY2VUb2tlbiBTb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gc291cmNlQW1vdW50IEFtb3VudCBvZiBzb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVzdFRva2VuIERlc3RpbmF0aW9uIHRva2VuCiAgICAvLy8gQHBhcmFtIGRlc3RBZGRyZXNzIERlc3RpbmF0aW9uIGFkZHJlc3MgdG8gc2VuZCB0b2tlbnMgdG8KICAgIC8vLyBAcGFyYW0gdmFsaWRhdGUgSWYgdHJ1ZSwgYWRkaXRpb25hbCB2YWxpZGF0aW9ucyBhcmUgYXBwbGljYWJsZQogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgdHJhZGUgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiB0cmFkZSggRVJDMjAgc291cmNlVG9rZW4sCiAgICAgICAgICAgICAgICAgICAgdWludCBzb3VyY2VBbW91bnQsCiAgICAgICAgICAgICAgICAgICAgRVJDMjAgZGVzdFRva2VuLAogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgZGVzdEFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgYm9vbCB2YWxpZGF0ZSApIHBheWFibGUgcmV0dXJucyhib29sKSB7CgogICAgICAgIGlmKCAhIHRyYWRlRW5hYmxlZCApIHsKICAgICAgICAgICAgLy8gdHJhZGUgaXMgbm90IGVuYWJsZWQKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4MTAwMDAwMDAsIDAgKTsKICAgICAgICAgICAgaWYoIG1zZy52YWx1ZSA+IDAgKSB7CiAgICAgICAgICAgICAgICBpZiggISBtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSApIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKCBtc2cuc2VuZGVyICE9IGt5YmVyTmV0d29yayApIHsKICAgICAgICAgICAgLy8gc2VuZGVyIG11c3QgYmUga3liZXIgbmV0d29yawogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgxMDAwMDAwMSwgdWludChtc2cuc2VuZGVyKSApOwogICAgICAgICAgICBpZiggbXNnLnZhbHVlID4gMCApIHsKICAgICAgICAgICAgICAgIGlmKCAhIG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUpICkgdGhyb3c7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKCAhIGRvVHJhZGUoIHNvdXJjZVRva2VuLCBzb3VyY2VBbW91bnQsIGRlc3RUb2tlbiwgZGVzdEFkZHJlc3MsIHZhbGlkYXRlICkgKSB7CiAgICAgICAgICAgIC8vIGRvIHRyYWRlIGZhaWxlZAogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgxMDAwMDAwMiwgMCApOwogICAgICAgICAgICBpZiggbXNnLnZhbHVlID4gMCApIHsKICAgICAgICAgICAgICAgIGlmKCAhIG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUpICkgdGhyb3c7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMCwgMCApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGV2ZW50IFNldFJhdGUoIEVSQzIwIHNvdXJjZSwgRVJDMjAgZGVzdCwgdWludCByYXRlLCB1aW50IGV4cGlyeUJsb2NrICk7CgogICAgLy8vIEBub3RpY2UgY2FuIGJlIGNhbGxlZCBvbmx5IGJ5IG93bmVyCiAgICAvLy8gQGRldiBzZXQgcmF0ZSBvZiBwYWlyIG9mIHRva2VucwogICAgLy8vIEBwYXJhbSBzb3VyY2VzIGFuIGFycmF5IGNvbnRhaW4gc291cmNlIHRva2VucwogICAgLy8vIEBwYXJhbSBkZXN0cyBhbiBhcnJheSBjb250YWluIGRlc3QgdG9rZW5zCiAgICAvLy8gQHBhcmFtIGNvbnZlcnNpb25SYXRlcyBhbiBhcnJheSB3aXRoIHJhdGVzCiAgICAvLy8gQHBhcmFtIGV4cGlyeUJsb2NrcyBhcnJheSBvZiBleHBpcmF0aW9uIGJsb2NrcwogICAgLy8vIEBwYXJhbSB2YWxpZGF0ZSBJZiB0cnVlLCBhZGRpdGlvbmFsIHZhbGlkYXRpb25zIGFyZSBhcHBsaWNhYmxlCiAgICAvLy8gQHJldHVybiB0cnVlIGlmZiB0cmFkZSBpcyBzdWNjZXNmdWwKICAgIGZ1bmN0aW9uIHNldFJhdGUoIEVSQzIwW10gc291cmNlcywgRVJDMjBbXSBkZXN0cywgdWludFtdIGNvbnZlcnNpb25SYXRlcywgdWludFtdIGV4cGlyeUJsb2NrcywgYm9vbCB2YWxpZGF0ZSApIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmKCBtc2cuc2VuZGVyICE9IHJlc2VydmVPd25lciApIHsKICAgICAgICAgICAgLy8gc2VuZGVyIG11c3QgYmUgcmVzZXJ2ZSBvd25lcgogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgyMDAwMDAwMCwgdWludChtc2cuc2VuZGVyKSApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiggdmFsaWRhdGUgKSB7CiAgICAgICAgICAgIGlmKCAoIHNvdXJjZXMubGVuZ3RoICE9IGRlc3RzLmxlbmd0aCApIHx8CiAgICAgICAgICAgICAgICAoIHNvdXJjZXMubGVuZ3RoICE9IGNvbnZlcnNpb25SYXRlcy5sZW5ndGggKSB8fAogICAgICAgICAgICAgICAgKCBzb3VyY2VzLmxlbmd0aCAhPSBleHBpcnlCbG9ja3MubGVuZ3RoICkgKSB7CiAgICAgICAgICAgICAgICAvLyBhcnJheXMgbGVuZ3RoIGFyZSBub3QgaWRlbnRpY2FsCiAgICAgICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgyMDAwMDAwMSwgMCApOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IoIHVpbnQgaSA9IDAgOyBpIDwgc291cmNlcy5sZW5ndGggOyBpKysgKSB7CiAgICAgICAgICAgIFNldFJhdGUoIHNvdXJjZXNbaV0sIGRlc3RzW2ldLCBjb252ZXJzaW9uUmF0ZXNbaV0sIGV4cGlyeUJsb2Nrc1tpXSApOwogICAgICAgICAgICBwYWlyQ29udmVyc2lvblJhdGVbc2hhMyhzb3VyY2VzW2ldLGRlc3RzW2ldKV0gPSBDb252ZXJzaW9uUmF0ZSggY29udmVyc2lvblJhdGVzW2ldLCBleHBpcnlCbG9ja3NbaV0gKTsKICAgICAgICB9CgogICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDAsIDAgKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBldmVudCBFbmFibGVUcmFkZSggYm9vbCBlbmFibGUgKTsKCiAgICAvLy8gQG5vdGljZSBjYW4gYmUgY2FsbGVkIG9ubHkgYnkgb3duZXIKICAgIC8vLyBAZGV2IGVuYWJsZSBvZiBkaXNhYmxlIHRyYWRlCiAgICAvLy8gQHBhcmFtIGVuYWJsZSBpZiB0cnVlIHRyYWRlIGlzIGVuYWJsZWQsIG90aGVyd2lzZSBkaXNhYmxlZAogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgdHJhZGUgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiBlbmFibGVUcmFkZSggYm9vbCBlbmFibGUgKSByZXR1cm5zKGJvb2wpewogICAgICAgIGlmKCBtc2cuc2VuZGVyICE9IHJlc2VydmVPd25lciApIHsKICAgICAgICAgICAgLy8gc2VuZGVyIG11c3QgYmUgcmVzZXJ2ZSBvd25lcgogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDgzMDAwMDAwMCwgdWludChtc2cuc2VuZGVyKSApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0cmFkZUVuYWJsZWQgPSBlbmFibGU7CiAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMCwgMCApOwogICAgICAgIEVuYWJsZVRyYWRlKCBlbmFibGUgKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZXZlbnQgRGVwb3NpdFRva2VuKCBFUkMyMCB0b2tlbiwgdWludCBhbW91bnQgKTsKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgRGVwb3NpdFRva2VuKCBFVEhfVE9LRU5fQUREUkVTUywgbXNnLnZhbHVlICk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgZXRoZXIgY291bGQgYWxzbyBiZSBkZXBvc2l0ZWQgd2l0aG91dCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24KICAgIC8vLyBAZGV2IGFuIGF1eGlsYXJ5IGZ1bmN0aW9uIHRoYXQgYWxsb3dzIGV0aGVyIGRlcG9zaXRzCiAgICAvLy8gQHJldHVybiB0cnVlIGlmZiBkZXBvc2l0IGlzIHN1Y2Nlc2Z1bAogICAgZnVuY3Rpb24gZGVwb3NpdEV0aGVyKCApIHBheWFibGUgcmV0dXJucyhib29sKSB7CiAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMCwgMCApOwoKICAgICAgICBEZXBvc2l0VG9rZW4oIEVUSF9UT0tFTl9BRERSRVNTLCBtc2cudmFsdWUgKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSB0b2tlbnMgY291bGQgYWxzbyBiZSBkZXBvc2l0ZWQgd2l0aG91dCBjYWxsaW5nIHRoaXMgZnVuY3Rpb24KICAgIC8vLyBAZGV2IGFuIGF1eGlsYXJ5IGZ1bmN0aW9uIHRoYXQgYWxsb3dzIHRva2VuIGRlcG9zaXRzCiAgICAvLy8gQHBhcmFtIHRva2VuIFRva2VuIGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gYW1vdW50IEFtb3VudCBvZiB0b2tlbnMgdG8gZGVwb3NpdAogICAgLy8vIEByZXR1cm4gdHJ1ZSBpZmYgZGVwb3NpdCBpcyBzdWNjZXNmdWwKICAgIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbiggRVJDMjAgdG9rZW4sIHVpbnQgYW1vdW50ICkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYoIHRva2VuLmFsbG93YW5jZSggbXNnLnNlbmRlciwgdGhpcyApIDwgYW1vdW50ICkgewogICAgICAgICAgICAvLyBhbGxvd2VuY2UgaXMgc21hbGxlciB0aGVuIGFtb3VudAogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDg1MDAwMDAwMSwgdG9rZW4uYWxsb3dhbmNlKCBtc2cuc2VuZGVyLCB0aGlzICkgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYoICEgdG9rZW4udHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCApICkgewogICAgICAgICAgICAvLyB0cmFuc2ZlciBmcm9tIGZhaWxlZAogICAgICAgICAgICBFcnJvclJlcG9ydCggdHgub3JpZ2luLCAweDg1MDAwMDAwMiwgdWludCh0b2tlbikgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgRGVwb3NpdFRva2VuKCB0b2tlbiwgYW1vdW50ICk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIGV2ZW50IFdpdGhkcmF3KCBFUkMyMCB0b2tlbiwgdWludCBhbW91bnQsIGFkZHJlc3MgZGVzdGluYXRpb24gKTsKCiAgICAvLy8gQG5vdGljZSBjYW4gb25seSBiZSBjYWxsZWQgYnkgb3duZXIuCiAgICAvLy8gQGRldiB3aXRoZGF3IHRva2VucyBvciBldGhlciBmcm9tIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIHRva2VuIFRva2VuIGFkZHJlc3MKICAgIC8vLyBAcGFyYW0gYW1vdW50IEFtb3VudCBvZiB0b2tlbnMgdG8gZGVwb3NpdAogICAgLy8vIEBwYXJhbSBkZXN0aW5hdGlvbiBhZGRyZXNzIHRoYXQgZ2V0IHdpdGhkcmV3ZWQgZnVuZHMKICAgIC8vLyBAcmV0dXJuIHRydWUgaWZmIHdpdGhkcmF3YWwgaXMgc3VjY2VzZnVsCiAgICBmdW5jdGlvbiB3aXRoZHJhdyggRVJDMjAgdG9rZW4sIHVpbnQgYW1vdW50LCBhZGRyZXNzIGRlc3RpbmF0aW9uICkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYoIG1zZy5zZW5kZXIgIT0gcmVzZXJ2ZU93bmVyICkgewogICAgICAgICAgICAvLyBzZW5kZXIgbXVzdCBiZSByZXNlcnZlIG93bmVyCiAgICAgICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDB4ODYwMDAwMDAwLCB1aW50KG1zZy5zZW5kZXIpICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmKCB0b2tlbiA9PSBFVEhfVE9LRU5fQUREUkVTUyApIHsKICAgICAgICAgICAgaWYoICEgZGVzdGluYXRpb24uc2VuZChhbW91bnQpICkgdGhyb3c7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoICEgdG9rZW4udHJhbnNmZXIoZGVzdGluYXRpb24sYW1vdW50KSApIHsKICAgICAgICAgICAgLy8gdHJhbnNmZXIgdG8gcmVzZXJ2ZSBvd25lciBmYWlsZWQKICAgICAgICAgICAgRXJyb3JSZXBvcnQoIHR4Lm9yaWdpbiwgMHg4NjAwMDAwMDEsIHVpbnQodG9rZW4pICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIEVycm9yUmVwb3J0KCB0eC5vcmlnaW4sIDAsIDAgKTsKICAgICAgICBXaXRoZHJhdyggdG9rZW4sIGFtb3VudCwgZGVzdGluYXRpb24gKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lciggYWRkcmVzcyBuZXdPd25lciApIHsKICAgICAgaWYoIG1zZy5zZW5kZXIgIT0gcmVzZXJ2ZU93bmVyICkgdGhyb3c7CiAgICAgIHJlc2VydmVPd25lciA9IG5ld093bmVyOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vLyBzdGF0dXMgZnVuY3Rpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSB1c2UgdG9rZW4gYWRkcmVzcyBFVEhfVE9LRU5fQUREUkVTUyBmb3IgZXRoZXIKICAgIC8vLyBAZGV2IGluZm9ybWF0aW9uIG9uIGNvbnZlcnNpb24gcmF0ZSBmcm9tIHNvdXJjZSB0byBkZXN0CiAgICAvLy8gQHBhcmFtIHNvdXJjZSBTb3VyY2UgdG9rZW4KICAgIC8vLyBAcGFyYW0gZGVzdCAgIERlc3RpbmF0b2luIHRva2VuCiAgICAvLy8gQHJldHVybiAoY29udmVyc2lvbiByYXRlLGV4cGVyYXRpb24gYmxvY2ssZGVzdCB0b2tlbiBiYWxhbmNlIG9mIHJlc2VydmUpCiAgICBmdW5jdGlvbiBnZXRQYWlySW5mbyggRVJDMjAgc291cmNlLCBFUkMyMCBkZXN0ICkgY29uc3RhbnQgcmV0dXJucyh1aW50IHJhdGUsIHVpbnQgZXhwQmxvY2ssIHVpbnQgYmFsYW5jZSkgewogICAgICAgIENvbnZlcnNpb25SYXRlIG1lbW9yeSByYXRlSW5mbyA9IHBhaXJDb252ZXJzaW9uUmF0ZVtzaGEzKHNvdXJjZSxkZXN0KV07CiAgICAgICAgYmFsYW5jZSA9IDA7CiAgICAgICAgaWYoIGRlc3QgPT0gRVRIX1RPS0VOX0FERFJFU1MgKSBiYWxhbmNlID0gdGhpcy5iYWxhbmNlOwogICAgICAgIGVsc2UgYmFsYW5jZSA9IGRlc3QuYmFsYW5jZU9mKHRoaXMpOwoKICAgICAgICBleHBCbG9jayA9IHJhdGVJbmZvLmV4cGlyYXRpb25CbG9jazsKICAgICAgICByYXRlID0gcmF0ZUluZm8ucmF0ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBhIGRlYnVnIGZ1bmN0aW9uCiAgICAvLy8gQGRldiBnZXQgdGhlIGJhbGFuY2Ugb2YgdGhlIHJlc2VydmUKICAgIC8vLyBAcGFyYW0gdG9rZW4gVGhlIHRva2VuIHR5cGUKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBnZXRCYWxhbmNlKCBFUkMyMCB0b2tlbiApIGNvbnN0YW50IHJldHVybnModWludCl7CiAgICAgICAgaWYoIHRva2VuID09IEVUSF9UT0tFTl9BRERSRVNTICkgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICAgICAgICBlbHNlIHJldHVybiB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICB9Cn0KCgpjb250cmFjdCBXcmFwcGVyIHsKICBmdW5jdGlvbiBnZXRCYWxhbmNlcyggYWRkcmVzcyByZXNlcnZlLCBFUkMyMFtdIHRva2VucyApIGNvbnN0YW50IHJldHVybnModWludFtdKXsKICAgIHVpbnRbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnRbXSh0b2tlbnMubGVuZ3RoKTsKICAgIGZvciggdWludCBpID0gMCA7IGkgPCB0b2tlbnMubGVuZ3RoIDsgaSsrICkgewogICAgICB1aW50IGJhbGFuY2UgPSAwOwogICAgICBpZiggdG9rZW5zW2ldID09IEVSQzIwKDB4MDBlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlKSApIHsKICAgICAgICBiYWxhbmNlID0gcmVzZXJ2ZS5iYWxhbmNlOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGJhbGFuY2UgPSB0b2tlbnNbaV0uYmFsYW5jZU9mKHJlc2VydmUpOwogICAgICB9CgogICAgICByZXN1bHRbaV0gPSBiYWxhbmNlOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBnZXRQcmljZXMoIEt5YmVyUmVzZXJ2ZSByZXNlcnZlLCBFUkMyMFtdIHNvdXJjZXMsIEVSQzIwW10gZGVzdHMgKQogICAgY29uc3RhbnQgcmV0dXJucyh1aW50W10sIHVpbnRbXSwgdWludFtdKSB7CiAgICAgIHJlcXVpcmUoIHNvdXJjZXMubGVuZ3RoID09IGRlc3RzLmxlbmd0aCApOwogICAgICB1aW50W10gbWVtb3J5IHJhdGVzID0gbmV3IHVpbnRbXShzb3VyY2VzLmxlbmd0aCk7CiAgICAgIHVpbnRbXSBtZW1vcnkgZXhwQmxvY2tzID0gbmV3IHVpbnRbXShzb3VyY2VzLmxlbmd0aCk7CiAgICAgIHVpbnRbXSBtZW1vcnkgYmFsYW5jZXMgPSBuZXcgdWludFtdKHNvdXJjZXMubGVuZ3RoKTsKICAgICAgZm9yKCB1aW50IGkgPSAwIDsgaSA8IHNvdXJjZXMubGVuZ3RoIDsgaSsrICkgewogICAgICAgIHVpbnQgcmF0ZTsgdWludCBleHBCbG9jazsgdWludCBiYWxhbmNlOwogICAgICAgIChyYXRlLGV4cEJsb2NrLGJhbGFuY2UpID0gcmVzZXJ2ZS5nZXRQYWlySW5mbyggc291cmNlc1tpXSwgZGVzdHNbaV0gKTsKICAgICAgICByYXRlc1tpXSA9IHJhdGU7CiAgICAgICAgZXhwQmxvY2tzW2ldID0gZXhwQmxvY2s7CiAgICAgICAgYmFsYW5jZXNbaV0gPSBiYWxhbmNlOwogICAgICB9CgogICAgICByZXR1cm4gKHJhdGVzLGV4cEJsb2NrcyxiYWxhbmNlcyk7CiAgICB9Cn0='.
	

]
