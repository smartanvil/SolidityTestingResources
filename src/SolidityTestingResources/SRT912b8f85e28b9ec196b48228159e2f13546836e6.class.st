Class {
	#name : #SRT912b8f85e28b9ec196b48228159e2f13546836e6,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT912b8f85e28b9ec196b48228159e2f13546836e6 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgoKCgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgoKY29udHJhY3QgRHJhaW5hYmxlIGlzIE93bmFibGUgewoJZnVuY3Rpb24gd2l0aGRyYXdUb2tlbihhZGRyZXNzIHRva2VuYWRkcikgCgkJb25seU93bmVyCgkJcHVibGljCgl7CgkJRVJDMjAgdG9rZW4gPSBFUkMyMCh0b2tlbmFkZHIpOwoJCXVpbnQgYmFsID0gdG9rZW4uYmFsYW5jZU9mKGFkZHJlc3ModGhpcykpOwoJCXRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJhbCk7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXdFdGhlcigpIAoJCW9ubHlPd25lcgoJCXB1YmxpYwoJewoJICAgIHJlcXVpcmUobXNnLnNlbmRlci5zZW5kKHRoaXMuYmFsYW5jZSkpOwoJfQp9Cgpjb250cmFjdCBBRFhFeGNoYW5nZUludGVyZmFjZSB7CgkvLyBldmVudHMKCWV2ZW50IExvZ0JpZEFjY2VwdGVkKGJ5dGVzMzIgYmlkSWQsIGFkZHJlc3MgYWR2ZXJ0aXNlciwgYnl0ZXMzMiBhZHVuaXQsIGFkZHJlc3MgcHVibGlzaGVyLCBieXRlczMyIGFkc2xvdCwgdWludCBhY2NlcHRlZFRpbWUpOwoJZXZlbnQgTG9nQmlkQ2FuY2VsZWQoYnl0ZXMzMiBiaWRJZCk7CglldmVudCBMb2dCaWRFeHBpcmVkKGJ5dGVzMzIgYmlkSWQpOwoJZXZlbnQgTG9nQmlkQ29uZmlybWVkKGJ5dGVzMzIgYmlkSWQsIGFkZHJlc3MgYWR2ZXJ0aXNlck9yUHVibGlzaGVyLCBieXRlczMyIHJlcG9ydCk7CglldmVudCBMb2dCaWRDb21wbGV0ZWQoYnl0ZXMzMiBiaWRJZCwgYnl0ZXMzMiBhZHZSZXBvcnQsIGJ5dGVzMzIgcHViUmVwb3J0KTsKCglldmVudCBMb2dEZXBvc2l0KGFkZHJlc3MgX3VzZXIsIHVpbnQgX2FtbnQpOwoJZXZlbnQgTG9nV2l0aGRyYXdhbChhZGRyZXNzIF91c2VyLCB1aW50IF9hbW50KTsKCglmdW5jdGlvbiBhY2NlcHRCaWQoYWRkcmVzcyBfYWR2ZXJ0aXNlciwgYnl0ZXMzMiBfYWR1bml0LCB1aW50IF9vcGVuZWQsIHVpbnQgX3RhcmdldCwgdWludCBfcmV3YXJkQW1vdW50LCB1aW50IF90aW1lb3V0LCBieXRlczMyIF9hZHNsb3QsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50OCBzaWdNb2RlKSBwdWJsaWM7CglmdW5jdGlvbiBjYW5jZWxCaWQoYnl0ZXMzMiBfYWR1bml0LCB1aW50IF9vcGVuZWQsIHVpbnQgX3RhcmdldCwgdWludCBfcmV3YXJkQW1vdW50LCB1aW50IF90aW1lb3V0LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgdWludDggc2lnTW9kZSkgcHVibGljOwoJZnVuY3Rpb24gZ2l2ZXVwQmlkKGJ5dGVzMzIgX2JpZElkKSBwdWJsaWM7CglmdW5jdGlvbiByZWZ1bmRCaWQoYnl0ZXMzMiBfYmlkSWQpIHB1YmxpYzsKCWZ1bmN0aW9uIHZlcmlmeUJpZChieXRlczMyIF9iaWRJZCwgYnl0ZXMzMiBfcmVwb3J0KSBwdWJsaWM7CgoJZnVuY3Rpb24gZGVwb3NpdCh1aW50IF9hbW91bnQpIHB1YmxpYzsKCWZ1bmN0aW9uIHdpdGhkcmF3KHVpbnQgX2Ftb3VudCkgcHVibGljOwoKCS8vIGNvbnN0YW50cyAKCWZ1bmN0aW9uIGdldEJpZChieXRlczMyIF9iaWRJZCkgCgkJY29uc3RhbnQgZXh0ZXJuYWwgCgkJcmV0dXJucyAoCgkJCXVpbnQsIHVpbnQsIHVpbnQsIHVpbnQsIHVpbnQsIAoJCQkvLyBhZHZlcnRpc2VyIChhZHZlcnRpc2VyLCBhZCB1bml0LCBjb25maXJhdGlvbikKCQkJYWRkcmVzcywgYnl0ZXMzMiwgYnl0ZXMzMiwKCQkJLy8gcHVibGlzaGVyIChwdWJsaXNoZXIsIGFkIHNsb3QsIGNvbmZpcm1hdGlvbikKCQkJYWRkcmVzcywgYnl0ZXMzMiwgYnl0ZXMzMgoJCSk7CgoJZnVuY3Rpb24gZ2V0QmFsYW5jZShhZGRyZXNzIF91c2VyKQoJCWNvbnN0YW50CgkJZXh0ZXJuYWwKCQlyZXR1cm5zICh1aW50LCB1aW50KTsKCglmdW5jdGlvbiBnZXRCaWRJRChhZGRyZXNzIF9hZHZlcnRpc2VyLCBieXRlczMyIF9hZHVuaXQsIHVpbnQgX29wZW5lZCwgdWludCBfdGFyZ2V0LCB1aW50IF9hbW91bnQsIHVpbnQgX3RpbWVvdXQpCgkJY29uc3RhbnQKCQlwdWJsaWMKCQlyZXR1cm5zIChieXRlczMyKTsKfQoKCmNvbnRyYWN0IEFEWEV4Y2hhbmdlIGlzIEFEWEV4Y2hhbmdlSW50ZXJmYWNlLCBEcmFpbmFibGUgewoJc3RyaW5nIHB1YmxpYyBuYW1lID0gIkFkRXggRXhjaGFuZ2UiOwoKCUVSQzIwIHB1YmxpYyB0b2tlbjsKCgl1aW50IHB1YmxpYyBtYXhUaW1lb3V0ID0gMzY1IGRheXM7CgogCW1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgYmFsYW5jZXM7CgogCS8vIGVzY3Jvd2VkIG9uIGJpZHMKIAltYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIG9uQmlkczsgCgogCS8vIGJpZCBpbmZvCgltYXBwaW5nIChieXRlczMyID0+IEJpZCkgYmlkczsKCW1hcHBpbmcgKGJ5dGVzMzIgPT4gQmlkU3RhdGUpIGJpZFN0YXRlczsKCgoJZW51bSBCaWRTdGF0ZSB7IAoJCURvZXNOb3RFeGlzdCwgLy8gZGVmYXVsdCBzdGF0ZQoKCQkvLyBUaGVyZSBpcyBubyAnT3Blbicgc3RhdGUgLSB0aGUgT3BlbiBzdGF0ZSBpcyBqdXN0IGEgc2lnbmVkIG1lc3NhZ2UgdGhhdCB5b3UncmUgd2lsbGluZyB0byBwbGFjZSBzdWNoIGEgYmlkCgkJQWNjZXB0ZWQsIC8vIGluIHByb2dyZXNzCgoJCS8vIHRoZSBmb2xsb3dpbmcgc3RhdGVzIE1VU1QgdW5sb2NrIHRoZSBBRFggYW1vdW50IChyZXR1cm4gdG8gYWR2ZXJ0aXNlcikKCQkvLyBmYWlsIHN0YXRlcwoJCUNhbmNlbGVkLAoJCUV4cGlyZWQsCgoJCS8vIHN1Y2Nlc3Mgc3RhdGVzCgkJQ29tcGxldGVkCgl9CgoJc3RydWN0IEJpZCB7CgkJLy8gTGlua3Mgb24gYWR2ZXJ0aXNlciBzaWRlCgkJYWRkcmVzcyBhZHZlcnRpc2VyOwoJCWJ5dGVzMzIgYWRVbml0OwoKCQkvLyBMaW5rcyBvbiBwdWJsaXNoZXIgc2lkZQoJCWFkZHJlc3MgcHVibGlzaGVyOwoJCWJ5dGVzMzIgYWRTbG90OwoKCQkvLyB3aGVuIHdhcyBpdCBhY2NlcHRlZCBieSBhIHB1Ymxpc2hlcgoJCXVpbnQgYWNjZXB0ZWRUaW1lOwoKCQkvLyBUb2tlbiByZXdhcmQgYW1vdW50CgkJdWludCBhbW91bnQ7CgoJCS8vIFJlcXVpcmVtZW50cwoJCXVpbnQgdGFyZ2V0OyAvLyBob3cgbWFueSBpbXByZXNzaW9ucy9jbGlja3MvY29udmVyc2lvbnMgaGF2ZSB0byBiZSBkb25lCgkJdWludCB0aW1lb3V0OyAvLyB0aGUgdGltZSB0byBleGVjdXRlCgoJCS8vIENvbmZpcm1hdGlvbnMgZnJvbSBib3RoIHNpZGVzOyBhbnkgdmFsdWUgb3RoZXIgdGhhbiAwIGlzIHZjb25zaWRlcmVkIGFzIGNvbmZpcm0sIGJ1dCB0aGlzIHNob3VsZCB1c3VhbGx5IGJlIGFuIElQRlMgaGFzaCB0byBhIGZpbmFsIHJlcG9ydAoJCWJ5dGVzMzIgcHVibGlzaGVyQ29uZmlybWF0aW9uOwoJCWJ5dGVzMzIgYWR2ZXJ0aXNlckNvbmZpcm1hdGlvbjsKCX0KCgkvLyBTY2hlbWEgaGFzaCAKCS8vIGtlY2NhazI1NihfYWR2ZXJ0aXNlciwgX2FkdW5pdCwgX29wZW5lZCwgX3RhcmdldCwgX2Ftb3VudCwgX3RpbWVvdXQsIHRoaXMpCglieXRlczMyIGNvbnN0YW50IHB1YmxpYyBTQ0hFTUFfSEFTSCA9IGtlY2NhazI1NigKCQkiYWRkcmVzcyBBZHZlcnRpc2VyIiwKCQkiYnl0ZXMzMiBBZCBVbml0IElEIiwKCQkidWludCBPcGVuZWQiLAoJCSJ1aW50IFRhcmdldCIsCgkJInVpbnQgQW1vdW50IiwKCQkidWludCBUaW1lb3V0IiwKCQkiYWRkcmVzcyBFeGNoYW5nZSIKCSk7CgoJLy8KCS8vIE1PRElGSUVSUwoJLy8KCW1vZGlmaWVyIG9ubHlCaWRBZHZlcnRpc2VyKGJ5dGVzMzIgX2JpZElkKSB7CgkJcmVxdWlyZShtc2cuc2VuZGVyID09IGJpZHNbX2JpZElkXS5hZHZlcnRpc2VyKTsKCQlfOwoJfQoKCW1vZGlmaWVyIG9ubHlCaWRQdWJsaXNoZXIoYnl0ZXMzMiBfYmlkSWQpIHsKCQlyZXF1aXJlKG1zZy5zZW5kZXIgPT0gYmlkc1tfYmlkSWRdLnB1Ymxpc2hlcik7CgkJXzsKCX0KCgltb2RpZmllciBvbmx5QmlkU3RhdGUoYnl0ZXMzMiBfYmlkSWQsIEJpZFN0YXRlIF9zdGF0ZSkgewoJCXJlcXVpcmUoYmlkU3RhdGVzW19iaWRJZF0gPT0gX3N0YXRlKTsKCQlfOwoJfQoKCS8vIEZ1bmN0aW9ucwoKCWZ1bmN0aW9uIEFEWEV4Y2hhbmdlKGFkZHJlc3MgX3Rva2VuKQoJCXB1YmxpYwoJewoJCXRva2VuID0gRVJDMjAoX3Rva2VuKTsKCX0KCgkvLwoJLy8gQmlkIGFjdGlvbnMKCS8vIAoKCS8vIHRoZSBiaWQgaXMgYWNjZXB0ZWQgYnkgdGhlIHB1Ymxpc2hlcgoJZnVuY3Rpb24gYWNjZXB0QmlkKGFkZHJlc3MgX2FkdmVydGlzZXIsIGJ5dGVzMzIgX2FkdW5pdCwgdWludCBfb3BlbmVkLCB1aW50IF90YXJnZXQsIHVpbnQgX2Ftb3VudCwgdWludCBfdGltZW91dCwgYnl0ZXMzMiBfYWRzbG90LCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcywgdWludDggc2lnTW9kZSkKCQlwdWJsaWMKCXsKCQlyZXF1aXJlKF9hbW91bnQgPiAwKTsKCgkJLy8gSXQgY2FuIGJlIHByb3ZlbiB0aGF0IG9uQmlkcyB3aWxsIG5ldmVyIGV4Y2VlZCBiYWxhbmNlcyB3aGljaCBtZWFucyB0aGlzIGNhbid0IHVuZGVyZmxvdwoJCS8vIFNhZmVNYXRoIGNhbid0IGJlIHVzZWQgaGVyZSBiZWNhdXNlIG9mIHRoZSBzdGFjayBkZXB0aAoJCXJlcXVpcmUoX2Ftb3VudCA8PSAoYmFsYW5jZXNbX2FkdmVydGlzZXJdIC0gb25CaWRzW19hZHZlcnRpc2VyXSkpOwoKCQkvLyBfb3BlbmVkIGFjdHMgYXMgYSBub25jZSBoZXJlCgkJYnl0ZXMzMiBiaWRJZCA9IGdldEJpZElEKF9hZHZlcnRpc2VyLCBfYWR1bml0LCBfb3BlbmVkLCBfdGFyZ2V0LCBfYW1vdW50LCBfdGltZW91dCk7CgoJCXJlcXVpcmUoYmlkU3RhdGVzW2JpZElkXSA9PSBCaWRTdGF0ZS5Eb2VzTm90RXhpc3QpOwoKCQlyZXF1aXJlKGRpZFNpZ24oX2FkdmVydGlzZXIsIGJpZElkLCB2LCByLCBzLCBzaWdNb2RlKSk7CgkJCgkJLy8gYWR2ZXJ0aWVyIGFuZCBwdWJsaXNoZXIgY2Fubm90IGJlIHRoZSBzYW1lCgkJcmVxdWlyZShfYWR2ZXJ0aXNlciAhPSBtc2cuc2VuZGVyKTsKCgkJQmlkIHN0b3JhZ2UgYmlkID0gYmlkc1tiaWRJZF07CgoJCWJpZC50YXJnZXQgPSBfdGFyZ2V0OwoJCWJpZC5hbW91bnQgPSBfYW1vdW50OwoKCQkvLyBpdCBpcyBwcmV0dHkgbXVjaCBtYW5kYXRvcnkgZm9yIGEgYmlkIHRvIGhhdmUgYSB0aW1lb3V0LCBlbHNlIHRva2VucyBjYW4gYmUgc3R1Y2sgZm9yZXZlcgoJCWJpZC50aW1lb3V0ID0gX3RpbWVvdXQgPiAwID8gX3RpbWVvdXQgOiBtYXhUaW1lb3V0OwoJCXJlcXVpcmUoYmlkLnRpbWVvdXQgPD0gbWF4VGltZW91dCk7CgoJCWJpZC5hZHZlcnRpc2VyID0gX2FkdmVydGlzZXI7CgkJYmlkLmFkVW5pdCA9IF9hZHVuaXQ7CgoJCWJpZC5wdWJsaXNoZXIgPSBtc2cuc2VuZGVyOwoJCWJpZC5hZFNsb3QgPSBfYWRzbG90OwoKCQliaWQuYWNjZXB0ZWRUaW1lID0gbm93OwoKCQliaWRTdGF0ZXNbYmlkSWRdID0gQmlkU3RhdGUuQWNjZXB0ZWQ7CgoJCW9uQmlkc1tfYWR2ZXJ0aXNlcl0gKz0gX2Ftb3VudDsKCgkJLy8gc3RhdGljIGFuYWx5c2lzPwoJCS8vIHJlcXVpcmUob25CaWRzW19hZHZlcnRpc2VyXSA8PSBiYWxhbmNlc1thZHZlcnRpc2VyXSk7CgoJCUxvZ0JpZEFjY2VwdGVkKGJpZElkLCBfYWR2ZXJ0aXNlciwgX2FkdW5pdCwgbXNnLnNlbmRlciwgX2Fkc2xvdCwgYmlkLmFjY2VwdGVkVGltZSk7Cgl9CgoJLy8gVGhlIGJpZCBpcyBjYW5jZWxlZCBieSB0aGUgYWR2ZXJ0aXNlcgoJZnVuY3Rpb24gY2FuY2VsQmlkKGJ5dGVzMzIgX2FkdW5pdCwgdWludCBfb3BlbmVkLCB1aW50IF90YXJnZXQsIHVpbnQgX2Ftb3VudCwgdWludCBfdGltZW91dCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQ4IHNpZ01vZGUpCgkJcHVibGljCgl7CgkJLy8gX29wZW5lZCBhY3RzIGFzIGEgbm9uY2UgaGVyZQoJCWJ5dGVzMzIgYmlkSWQgPSBnZXRCaWRJRChtc2cuc2VuZGVyLCBfYWR1bml0LCBfb3BlbmVkLCBfdGFyZ2V0LCBfYW1vdW50LCBfdGltZW91dCk7CgoJCXJlcXVpcmUoYmlkU3RhdGVzW2JpZElkXSA9PSBCaWRTdGF0ZS5Eb2VzTm90RXhpc3QpOwoKCQlyZXF1aXJlKGRpZFNpZ24obXNnLnNlbmRlciwgYmlkSWQsIHYsIHIsIHMsIHNpZ01vZGUpKTsKCgkJYmlkU3RhdGVzW2JpZElkXSA9IEJpZFN0YXRlLkNhbmNlbGVkOwoKCQlMb2dCaWRDYW5jZWxlZChiaWRJZCk7Cgl9CgoJLy8gVGhlIGJpZCBpcyBjYW5jZWxlZCBieSB0aGUgcHVibGlzaGVyCglmdW5jdGlvbiBnaXZldXBCaWQoYnl0ZXMzMiBfYmlkSWQpCgkJcHVibGljCgkJb25seUJpZFB1Ymxpc2hlcihfYmlkSWQpCgkJb25seUJpZFN0YXRlKF9iaWRJZCwgQmlkU3RhdGUuQWNjZXB0ZWQpCgl7CgkJQmlkIHN0b3JhZ2UgYmlkID0gYmlkc1tfYmlkSWRdOwoKCQliaWRTdGF0ZXNbX2JpZElkXSA9IEJpZFN0YXRlLkNhbmNlbGVkOwoKCQlvbkJpZHNbYmlkLmFkdmVydGlzZXJdIC09IGJpZC5hbW91bnQ7CgkKCQlMb2dCaWRDYW5jZWxlZChfYmlkSWQpOwoJfQoKCgkvLyBUaGlzIGNhbiBiZSBkb25lIGlmIGEgYmlkIGlzIGFjY2VwdGVkLCBidXQgZXhwaXJlZAoJLy8gVGhpcyBpcyBlc3NlbnRpYWxseSB0aGUgcHJvdGVjdGlvbiBmcm9tIG5ldmVyIHNldHRsaW5nIG9uIHZlcmlmaWNhdGlvbiwgb3IgZnJvbSBwdWJsaXNoZXIgbm90IGV4ZWN1dGluZyB0aGUgYmlkIHdpdGhpbiBhIHJlYXNvbmFibGUgdGltZQoJZnVuY3Rpb24gcmVmdW5kQmlkKGJ5dGVzMzIgX2JpZElkKQoJCXB1YmxpYwoJCW9ubHlCaWRBZHZlcnRpc2VyKF9iaWRJZCkKCQlvbmx5QmlkU3RhdGUoX2JpZElkLCBCaWRTdGF0ZS5BY2NlcHRlZCkKCXsKCQlCaWQgc3RvcmFnZSBiaWQgPSBiaWRzW19iaWRJZF07CgogCQkvLyByZXF1aXJlIHRoYXQgd2UncmUgcGFzdCB0aGUgcG9pbnQgb2YgZXhwaXJ5CgkJcmVxdWlyZShub3cgPiBTYWZlTWF0aC5hZGQoYmlkLmFjY2VwdGVkVGltZSwgYmlkLnRpbWVvdXQpKTsKCgkJYmlkU3RhdGVzW19iaWRJZF0gPSBCaWRTdGF0ZS5FeHBpcmVkOwoKCQlvbkJpZHNbYmlkLmFkdmVydGlzZXJdIC09IGJpZC5hbW91bnQ7CgoJCUxvZ0JpZEV4cGlyZWQoX2JpZElkKTsKCX0KCgoJLy8gYm90aCBwdWJsaXNoZXIgYW5kIGFkdmVydGlzZXIgaGF2ZSB0byBjYWxsIHRoaXMgZm9yIGEgYmlkIHRvIGJlIGNvbnNpZGVyZWQgdmVyaWZpZWQKCWZ1bmN0aW9uIHZlcmlmeUJpZChieXRlczMyIF9iaWRJZCwgYnl0ZXMzMiBfcmVwb3J0KQoJCXB1YmxpYwoJCW9ubHlCaWRTdGF0ZShfYmlkSWQsIEJpZFN0YXRlLkFjY2VwdGVkKQoJewoJCUJpZCBzdG9yYWdlIGJpZCA9IGJpZHNbX2JpZElkXTsKCgkJcmVxdWlyZShfcmVwb3J0ICE9IDApOwoJCXJlcXVpcmUoYmlkLnB1Ymxpc2hlciA9PSBtc2cuc2VuZGVyIHx8IGJpZC5hZHZlcnRpc2VyID09IG1zZy5zZW5kZXIpOwoKCQlpZiAoYmlkLnB1Ymxpc2hlciA9PSBtc2cuc2VuZGVyKSB7CgkJCXJlcXVpcmUoYmlkLnB1Ymxpc2hlckNvbmZpcm1hdGlvbiA9PSAwKTsKCQkJYmlkLnB1Ymxpc2hlckNvbmZpcm1hdGlvbiA9IF9yZXBvcnQ7CgkJfQoKCQlpZiAoYmlkLmFkdmVydGlzZXIgPT0gbXNnLnNlbmRlcikgewoJCQlyZXF1aXJlKGJpZC5hZHZlcnRpc2VyQ29uZmlybWF0aW9uID09IDApOwoJCQliaWQuYWR2ZXJ0aXNlckNvbmZpcm1hdGlvbiA9IF9yZXBvcnQ7CgkJfQoKCQlMb2dCaWRDb25maXJtZWQoX2JpZElkLCBtc2cuc2VuZGVyLCBfcmVwb3J0KTsKCgkJaWYgKGJpZC5hZHZlcnRpc2VyQ29uZmlybWF0aW9uICE9IDAgJiYgYmlkLnB1Ymxpc2hlckNvbmZpcm1hdGlvbiAhPSAwKSB7CgkJCWJpZFN0YXRlc1tfYmlkSWRdID0gQmlkU3RhdGUuQ29tcGxldGVkOwoKCQkJb25CaWRzW2JpZC5hZHZlcnRpc2VyXSA9IFNhZmVNYXRoLnN1YihvbkJpZHNbYmlkLmFkdmVydGlzZXJdLCBiaWQuYW1vdW50KTsKCQkJYmFsYW5jZXNbYmlkLmFkdmVydGlzZXJdID0gU2FmZU1hdGguc3ViKGJhbGFuY2VzW2JpZC5hZHZlcnRpc2VyXSwgYmlkLmFtb3VudCk7CgkJCWJhbGFuY2VzW2JpZC5wdWJsaXNoZXJdID0gU2FmZU1hdGguYWRkKGJhbGFuY2VzW2JpZC5wdWJsaXNoZXJdLCBiaWQuYW1vdW50KTsKCgkJCUxvZ0JpZENvbXBsZXRlZChfYmlkSWQsIGJpZC5hZHZlcnRpc2VyQ29uZmlybWF0aW9uLCBiaWQucHVibGlzaGVyQ29uZmlybWF0aW9uKTsKCQl9Cgl9CgoJLy8gRGVwb3NpdCBhbmQgd2l0aGRyYXcKCWZ1bmN0aW9uIGRlcG9zaXQodWludCBfYW1vdW50KQoJCXB1YmxpYwoJewoJCWJhbGFuY2VzW21zZy5zZW5kZXJdID0gU2FmZU1hdGguYWRkKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfYW1vdW50KTsKCQlyZXF1aXJlKHRva2VuLnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCBhZGRyZXNzKHRoaXMpLCBfYW1vdW50KSk7CgoJCUxvZ0RlcG9zaXQobXNnLnNlbmRlciwgX2Ftb3VudCk7Cgl9CgoJZnVuY3Rpb24gd2l0aGRyYXcodWludCBfYW1vdW50KQoJCXB1YmxpYwoJewoJCXVpbnQgYXZhaWxhYmxlID0gU2FmZU1hdGguc3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBvbkJpZHNbbXNnLnNlbmRlcl0pOwoJCXJlcXVpcmUoX2Ftb3VudCA8PSBhdmFpbGFibGUpOwoKCQliYWxhbmNlc1ttc2cuc2VuZGVyXSA9IFNhZmVNYXRoLnN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX2Ftb3VudCk7CgkJcmVxdWlyZSh0b2tlbi50cmFuc2Zlcihtc2cuc2VuZGVyLCBfYW1vdW50KSk7CgoJCUxvZ1dpdGhkcmF3YWwobXNnLnNlbmRlciwgX2Ftb3VudCk7Cgl9CgoJZnVuY3Rpb24gZGlkU2lnbihhZGRyZXNzIGFkZHIsIGJ5dGVzMzIgaGFzaCwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQ4IG1vZGUpCgkJcHVibGljCgkJcHVyZQoJCXJldHVybnMgKGJvb2wpCgl7CgkJYnl0ZXMzMiBtZXNzYWdlID0gaGFzaDsKCQkKCQlpZiAobW9kZSA9PSAxKSB7CgkJCS8vIEdldGggbW9kZQoJCQltZXNzYWdlID0ga2VjY2FrMjU2KCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpOwoJCX0gZWxzZSBpZiAobW9kZSA9PSAyKSB7CgkJCS8vIFRyZXpvciBtb2RlCgkJCW1lc3NhZ2UgPSBrZWNjYWsyNTYoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcblx4MjAiLCBoYXNoKTsKCQl9CgoJCXJldHVybiBlY3JlY292ZXIobWVzc2FnZSwgdiwgciwgcykgPT0gYWRkcjsKCX0KCgkvLwoJLy8gUHVibGljIGNvbnN0YW50IGZ1bmN0aW9ucwoJLy8KCWZ1bmN0aW9uIGdldEJpZChieXRlczMyIF9iaWRJZCkgCgkJY29uc3RhbnQKCQlleHRlcm5hbAoJCXJldHVybnMgKAoJCQl1aW50LCB1aW50LCB1aW50LCB1aW50LCB1aW50LCAKCQkJLy8gYWR2ZXJ0aXNlciAoYWR2ZXJ0aXNlciwgYWQgdW5pdCwgY29uZmlyYXRpb24pCgkJCWFkZHJlc3MsIGJ5dGVzMzIsIGJ5dGVzMzIsCgkJCS8vIHB1Ymxpc2hlciAocHVibGlzaGVyLCBhZCBzbG90LCBjb25maXJtYXRpb24pCgkJCWFkZHJlc3MsIGJ5dGVzMzIsIGJ5dGVzMzIKCQkpCgl7CgkJQmlkIHN0b3JhZ2UgYmlkID0gYmlkc1tfYmlkSWRdOwoJCXJldHVybiAoCgkJCXVpbnQoYmlkU3RhdGVzW19iaWRJZF0pLCBiaWQudGFyZ2V0LCBiaWQudGltZW91dCwgYmlkLmFtb3VudCwgYmlkLmFjY2VwdGVkVGltZSwKCQkJYmlkLmFkdmVydGlzZXIsIGJpZC5hZFVuaXQsIGJpZC5hZHZlcnRpc2VyQ29uZmlybWF0aW9uLAoJCQliaWQucHVibGlzaGVyLCBiaWQuYWRTbG90LCBiaWQucHVibGlzaGVyQ29uZmlybWF0aW9uCgkJKTsKCX0KCglmdW5jdGlvbiBnZXRCYWxhbmNlKGFkZHJlc3MgX3VzZXIpCgkJY29uc3RhbnQKCQlleHRlcm5hbAoJCXJldHVybnMgKHVpbnQsIHVpbnQpCgl7CgkJcmV0dXJuIChiYWxhbmNlc1tfdXNlcl0sIG9uQmlkc1tfdXNlcl0pOwoJfQoKCWZ1bmN0aW9uIGdldEJpZElEKGFkZHJlc3MgX2FkdmVydGlzZXIsIGJ5dGVzMzIgX2FkdW5pdCwgdWludCBfb3BlbmVkLCB1aW50IF90YXJnZXQsIHVpbnQgX2Ftb3VudCwgdWludCBfdGltZW91dCkKCQljb25zdGFudAoJCXB1YmxpYwoJCXJldHVybnMgKGJ5dGVzMzIpCgl7CgkJcmV0dXJuIGtlY2NhazI1NigKCQkJU0NIRU1BX0hBU0gsCgkJCWtlY2NhazI1NihfYWR2ZXJ0aXNlciwgX2FkdW5pdCwgX29wZW5lZCwgX3RhcmdldCwgX2Ftb3VudCwgX3RpbWVvdXQsIHRoaXMpCgkJKTsKCX0KfQ=='.
	

]
