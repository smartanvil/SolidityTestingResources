Class {
	#name : #SRT7019823fbea7613d98b4ed43473e50a9f6392590,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7019823fbea7613d98b4ed43473e50a9f6392590 >> base64 [
	^ 'LyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbglBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlCiAqIEBjb3B5cmlnaHQgKGMpIDIwMTcgZXRoZXJpc2MgR21iSAogKiBAYXV0aG9yIENocmlzdG9waCBNdXNzZW5icm9jawogKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwoKCmNvbnRyYWN0IEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZSB7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5SWQodWludDggX3Blcm0sIGJ5dGVzMzIgX2lkKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5SWQodWludDggX3Blcm0sIGJ5dGVzMzIgX2lkLCBib29sIF9hY2Nlc3MpIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBzZXRQZXJtaXNzaW9uQnlBZGRyZXNzKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0UGVybWlzc2lvbkJ5QWRkcmVzcyh1aW50OCBfcGVybSwgYWRkcmVzcyBfYWRkciwgYm9vbCBfYWNjZXNzKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gY2hlY2tQZXJtaXNzaW9uKHVpbnQ4IF9wZXJtLCBhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9GbGlnaHREZWxheUNvbnN0YW50cy5zb2wKCi8qKgogKiBGbGlnaHREZWxheSB3aXRoIE9yYWNsaXplZCBVbmRlcndyaXRpbmcgYW5kIFBheW91dAogKgogKiBAZGVzY3JpcHRpb24JRXZlbnRzIGFuZCBDb25zdGFudHMKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrCiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKY29udHJhY3QgRmxpZ2h0RGVsYXlDb25zdGFudHMgewoKICAgIC8qCiAgICAqIEdlbmVyYWwgZXZlbnRzCiAgICAqLwoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgZXZlbnQgTG9nVWludChzdHJpbmcgX21lc3NhZ2UsIHVpbnQgX3VpbnQpOwovLyAgICAgICAgZXZlbnQgTG9nVWludEV0aChzdHJpbmcgX21lc3NhZ2UsIHVpbnQgZXRoVWludCk7Ci8vICAgICAgICBldmVudCBMb2dVaW50VGltZShzdHJpbmcgX21lc3NhZ2UsIHVpbnQgdGltZVVpbnQpOwovLyAgICAgICAgZXZlbnQgTG9nSW50KHN0cmluZyBfbWVzc2FnZSwgaW50IF9pbnQpOwovLyAgICAgICAgZXZlbnQgTG9nQWRkcmVzcyhzdHJpbmcgX21lc3NhZ2UsIGFkZHJlc3MgX2FkZHJlc3MpOwovLyAgICAgICAgZXZlbnQgTG9nQnl0ZXMzMihzdHJpbmcgX21lc3NhZ2UsIGJ5dGVzMzIgaGV4Qnl0ZXMzMik7Ci8vICAgICAgICBldmVudCBMb2dCeXRlcyhzdHJpbmcgX21lc3NhZ2UsIGJ5dGVzIGhleEJ5dGVzKTsKLy8gICAgICAgIGV2ZW50IExvZ0J5dGVzMzJTdHIoc3RyaW5nIF9tZXNzYWdlLCBieXRlczMyIHN0ckJ5dGVzMzIpOwovLyAgICAgICAgZXZlbnQgTG9nU3RyaW5nKHN0cmluZyBfbWVzc2FnZSwgc3RyaW5nIF9zdHJpbmcpOwovLyAgICAgICAgZXZlbnQgTG9nQm9vbChzdHJpbmcgX21lc3NhZ2UsIGJvb2wgX2Jvb2wpOwovLyAgICAgICAgZXZlbnQgTG9nKGFkZHJlc3MpOwovLyA8LS0gdGVzdC1tb2RlCgogICAgZXZlbnQgTG9nUG9saWN5QXBwbGllZCgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBhZGRyZXNzIF9jdXN0b21lciwKICAgICAgICBieXRlczMyIHN0ckNhcnJpZXJGbGlnaHROdW1iZXIsCiAgICAgICAgdWludCBldGhQcmVtaXVtCiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5QWNjZXB0ZWQoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgdWludCBfc3RhdGlzdGljczAsCiAgICAgICAgdWludCBfc3RhdGlzdGljczEsCiAgICAgICAgdWludCBfc3RhdGlzdGljczIsCiAgICAgICAgdWludCBfc3RhdGlzdGljczMsCiAgICAgICAgdWludCBfc3RhdGlzdGljczQsCiAgICAgICAgdWludCBfc3RhdGlzdGljczUKICAgICk7CiAgICBldmVudCBMb2dQb2xpY3lQYWlkT3V0KAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIHVpbnQgZXRoQW1vdW50CiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5RXhwaXJlZCgKICAgICAgICB1aW50IF9wb2xpY3lJZAogICAgKTsKICAgIGV2ZW50IExvZ1BvbGljeURlY2xpbmVkKAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgc3RyUmVhc29uCiAgICApOwogICAgZXZlbnQgTG9nUG9saWN5TWFudWFsUGF5b3V0KAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIGJ5dGVzMzIgc3RyUmVhc29uCiAgICApOwogICAgZXZlbnQgTG9nU2VuZEZ1bmRzKAogICAgICAgIGFkZHJlc3MgX3JlY2lwaWVudCwKICAgICAgICB1aW50OCBfZnJvbSwKICAgICAgICB1aW50IGV0aEFtb3VudAogICAgKTsKICAgIGV2ZW50IExvZ1JlY2VpdmVGdW5kcygKICAgICAgICBhZGRyZXNzIF9zZW5kZXIsCiAgICAgICAgdWludDggX3RvLAogICAgICAgIHVpbnQgZXRoQW1vdW50CiAgICApOwogICAgZXZlbnQgTG9nU2VuZEZhaWwoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBzdHJSZWFzb24KICAgICk7CiAgICBldmVudCBMb2dPcmFjbGl6ZUNhbGwoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgYnl0ZXMzMiBoZXhRdWVyeUlkLAogICAgICAgIHN0cmluZyBfb3JhY2xpemVVcmwsCiAgICAgICAgdWludDI1NiBfb3JhY2xpemVUaW1lCiAgICApOwogICAgZXZlbnQgTG9nT3JhY2xpemVDYWxsYmFjaygKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBieXRlczMyIGhleFF1ZXJ5SWQsCiAgICAgICAgc3RyaW5nIF9yZXN1bHQsCiAgICAgICAgYnl0ZXMgaGV4UHJvb2YKICAgICk7CiAgICBldmVudCBMb2dTZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICB1aW50OCBfcG9saWN5U3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKTsKICAgIGV2ZW50IExvZ0V4dGVybmFsKAogICAgICAgIHVpbnQyNTYgX3BvbGljeUlkLAogICAgICAgIGFkZHJlc3MgX2FkZHJlc3MsCiAgICAgICAgYnl0ZXMzMiBfZXh0ZXJuYWxJZAogICAgKTsKCiAgICAvKgogICAgKiBHZW5lcmFsIGNvbnN0YW50cwogICAgKi8KCiAgICAvLyBtaW5pbXVtIG9ic2VydmF0aW9ucyBmb3IgdmFsaWQgcHJlZGljdGlvbgogICAgdWludCBjb25zdGFudCBNSU5fT0JTRVJWQVRJT05TID0gMTA7CiAgICAvLyBtaW5pbXVtIHByZW1pdW0gdG8gY292ZXIgY29zdHMKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU0gPSA1MCBmaW5uZXk7CiAgICAvLyBtYXhpbXVtIHByZW1pdW0KICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU0gPSAxIGV0aGVyOwogICAgLy8gbWF4aW11bSBwYXlvdXQKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVCA9IDExMDAgZmlubmV5OwoKICAgIHVpbnQgY29uc3RhbnQgTUlOX1BSRU1JVU1fRVVSID0gMTUwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QUkVNSVVNX0VVUiA9IDI5MDAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BBWU9VVF9FVVIgPSAzMDAwMCB3ZWk7CgogICAgdWludCBjb25zdGFudCBNSU5fUFJFTUlVTV9VU0QgPSAxNzAwIHdlaTsKICAgIHVpbnQgY29uc3RhbnQgTUFYX1BSRU1JVU1fVVNEID0gMzQwMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUEFZT1VUX1VTRCA9IDM1MDAwIHdlaTsKCiAgICB1aW50IGNvbnN0YW50IE1JTl9QUkVNSVVNX0dCUCA9IDEzMDAgd2VpOwogICAgdWludCBjb25zdGFudCBNQVhfUFJFTUlVTV9HQlAgPSAyNTAwMCB3ZWk7CiAgICB1aW50IGNvbnN0YW50IE1BWF9QQVlPVVRfR0JQID0gMjcwIHdlaTsKCiAgICAvLyBtYXhpbXVtIGN1bXVsYXRlZCB3ZWlnaHRlZCBwcmVtaXVtIHBlciByaXNrCiAgICB1aW50IGNvbnN0YW50IE1BWF9DVU1VTEFURURfV0VJR0hURURfUFJFTUlVTSA9IDYwIGV0aGVyOwogICAgLy8gMSBwZXJjZW50IGZvciBEQU8sIDEgcGVyY2VudCBmb3IgbWFpbnRhaW5lcgogICAgdWludDggY29uc3RhbnQgUkVXQVJEX1BFUkNFTlQgPSAyOwogICAgLy8gcmVzZXJ2ZSBmb3IgdGFpbCByaXNrcwogICAgdWludDggY29uc3RhbnQgUkVTRVJWRV9QRVJDRU5UID0gMTsKICAgIC8vIHRoZSB3ZWlnaHQgcGF0dGVybjsgaW4gZnV0dXJlIHZlcnNpb25zIHRoaXMgbWF5IGJlY29tZSBwYXJ0IG9mIHRoZSBwb2xpY3kgc3RydWN0LgogICAgLy8gY3VycmVudGx5IGNhbid0IGJlIGNvbnN0YW50IGJlY2F1c2Ugb2YgY29tcGlsZXIgcmVzdHJpY3Rpb25zCiAgICAvLyBXRUlHSFRfUEFUVEVSTlswXSBpcyBub3QgdXNlZCwganVzdCB0byBiZSBjb25zaXN0ZW50CiAgICB1aW50OFs2XSBXRUlHSFRfUEFUVEVSTiA9IFsKICAgICAgICAwLAogICAgICAgIDEwLAogICAgICAgIDIwLAogICAgICAgIDMwLAogICAgICAgIDUwLAogICAgICAgIDUwCiAgICBdOwoKLy8gLS0+IHByb2QtbW9kZQogICAgLy8gREVGSU5JVElPTlMgRk9SIFJPUFNURU4gQU5EIE1BSU5ORVQKICAgIC8vIG1pbmltdW0gdGltZSBiZWZvcmUgZGVwYXJ0dXJlIGZvciBhcHBseWluZwogICAgdWludCBjb25zdGFudCBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFCT0gMjQgaG91cnM7IC8vIGZvciBwcm9kdWN0aW9uCiAgICAvLyBjaGVjayBmb3IgZGVsYXkgYWZ0ZXIgLi4gbWludXRlcyBhZnRlciBzY2hlZHVsZWQgYXJyaXZhbAogICAgdWludCBjb25zdGFudCBDSEVDS19QQVlPVVRfT0ZGU0VUID0gMTUgbWludXRlczsgLy8gZm9yIHByb2R1Y3Rpb24KLy8gPC0tIHByb2QtbW9kZQoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgLy8gREVGSU5JVElPTlMgRk9SIExPQ0FMIFRFU1RORVQKLy8gICAgICAgIC8vIG1pbmltdW0gdGltZSBiZWZvcmUgZGVwYXJ0dXJlIGZvciBhcHBseWluZwovLyAgICAgICAgdWludCBjb25zdGFudCBNSU5fVElNRV9CRUZPUkVfREVQQVJUVVJFID0gMSBzZWNvbmRzOyAvLyBmb3IgdGVzdGluZwovLyAgICAgICAgLy8gY2hlY2sgZm9yIGRlbGF5IGFmdGVyIC4uIG1pbnV0ZXMgYWZ0ZXIgc2NoZWR1bGVkIGFycml2YWwKLy8gICAgICAgIHVpbnQgY29uc3RhbnQgQ0hFQ0tfUEFZT1VUX09GRlNFVCA9IDEgc2Vjb25kczsgLy8gZm9yIHRlc3RpbmcKLy8gPC0tIHRlc3QtbW9kZQoKICAgIC8vIG1heGltdW0gZHVyYXRpb24gb2YgZmxpZ2h0CiAgICB1aW50IGNvbnN0YW50IE1BWF9GTElHSFRfRFVSQVRJT04gPSAyIGRheXM7CiAgICAvLyBEZWFkbGluZSBmb3IgYWNjZXB0YW5jZSBvZiBwb2xpY2llczogMzEuMTIuMjAzMCAoVGVzdG5ldCkKICAgIHVpbnQgY29uc3RhbnQgQ09OVFJBQ1RfREVBRF9MSU5FID0gMTkyMjM5NjM5OTsKCiAgICAvLyBnYXMgQ29uc3RhbnRzIGZvciBvcmFjbGl6ZQogICAgdWludCBjb25zdGFudCBPUkFDTElaRV9HQVMgPSA3MDAwMDA7CiAgICB1aW50IGNvbnN0YW50IE9SQUNMSVpFX0dBU1BSSUNFID0gNDAwMDAwMDAwMDsKCgogICAgLyoKICAgICogVVJMcyBhbmQgcXVlcnkgc3RyaW5ncyBmb3Igb3JhY2xpemUKICAgICovCgovLyAtLT4gcHJvZC1tb2RlCiAgICAvLyBERUZJTklUSU9OUyBGT1IgUk9QU1RFTiBBTkQgTUFJTk5FVAogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQogICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS5mbGlnaHRzdGF0cy5jb20vZmxleC9yYXRpbmdzL3Jlc3QvdjEvanNvbi9mbGlnaHQvIjsKICAgIHN0cmluZyBjb25zdGFudCBPUkFDTElaRV9SQVRJTkdTX1FVRVJZID0KICAgICAgICAiPyR7W2RlY3J5cHRdIEJBcjZaOVFvbE0yUFFpbUYvcE5DNnpYbGRPdloycXF1T1NLbS9xSmtKV25TR2dBZVJ3MjF3QkduQmJYaWFtci9JU0M1U2xjSkI2d0VQS3RoZGM2RitJcHFNL2lYYXZLc2FsUlVyR051QnNHZmFNWHI4ZlJRdzZnTHpxazBlY09GTmVDYTQ4L3lxQnZDL2thcytqVEtIaVl4QTN3VEpyVlpDcTc2WTAzbFpJMnh4TGFvbmlSa30pLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnLCdkZXBhcnR1cmVBaXJwb3J0RnNDb2RlJ10iOwogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19CQVNFX1VSTCA9CiAgICAgICAgLy8gZmxpZ2h0IHN0YXR1cyBhcGkgaXMgdjIsIHNlZSBodHRwczovL2RldmVsb3Blci5mbGlnaHRzdGF0cy5jb20vYXBpLWRvY3MvZmxpZ2h0c3RhdHVzL3YyL2ZsaWdodAogICAgICAgICJbVVJMXSBqc29uKGh0dHBzOi8vYXBpLmZsaWdodHN0YXRzLmNvbS9mbGV4L2ZsaWdodHN0YXR1cy9yZXN0L3YyL2pzb24vZmxpZ2h0L3N0YXR1cy8iOwogICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19RVUVSWSA9CiAgICAgICAgLy8gcGF0dGVybjoKICAgICAgICAiPyR7W2RlY3J5cHRdIEJKeHB3UmFIdWpZVFQ5OHFJNXNsUUpwbGovVmJmVjd2WWtNT3AvTXI1RC81K2drZ0pRS1piMGdWU0NhNmFLeDJXb2dvL2NHN3lhV0lOUjZ2bnVZemNjUUU1eVZKU3I3UlFpbFJhd3huQXRaWHQ2SkI3MFlwWDR4bGZ2cGlwaXQ0UitPbVFUdXJKR0d3YjhQZ25yNEx2b3R5ZENqdXA2d3YyQmsvejNVZEdBN1NsK0ZVNWErMH0mdXRjPXRydWUpLmZsaWdodFN0YXR1c2VzWzBdWydzdGF0dXMnLCdkZWxheXMnLCdvcGVyYXRpb25hbFRpbWVzJ10iOwovLyA8LS0gcHJvZC1tb2RlCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAvLyBERUZJTklUSU9OUyBGT1IgTE9DQUwgVEVTVE5FVAovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfQkFTRV9VUkwgPQovLyAgICAgICAgICAgIC8vIHJhdGluZ3MgYXBpIGlzIHYxLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuZmxpZ2h0c3RhdHMuY29tL2FwaS1kb2NzL3JhdGluZ3MvdjEKLy8gICAgICAgICAgICAiW1VSTF0ganNvbihodHRwczovL2FwaS10ZXN0LmV0aGVyaXNjLmNvbS9mbGV4L3JhdGluZ3MvcmVzdC92MS9qc29uL2ZsaWdodC8iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1JBVElOR1NfUVVFUlkgPQovLyAgICAgICAgICAgIC8vIGZvciB0ZXN0cnBjOgovLyAgICAgICAgICAgICIpLnJhdGluZ3NbMF1bJ29ic2VydmF0aW9ucycsJ2xhdGUxNScsJ2xhdGUzMCcsJ2xhdGU0NScsJ2NhbmNlbGxlZCcsJ2RpdmVydGVkJywnYXJyaXZhbEFpcnBvcnRGc0NvZGUnLCdkZXBhcnR1cmVBaXJwb3J0RnNDb2RlJ10iOwovLyAgICAgICAgc3RyaW5nIGNvbnN0YW50IE9SQUNMSVpFX1NUQVRVU19CQVNFX1VSTCA9Ci8vICAgICAgICAgICAgLy8gZmxpZ2h0IHN0YXR1cyBhcGkgaXMgdjIsIHNlZSBodHRwczovL2RldmVsb3Blci5mbGlnaHRzdGF0cy5jb20vYXBpLWRvY3MvZmxpZ2h0c3RhdHVzL3YyL2ZsaWdodAovLyAgICAgICAgICAgICJbVVJMXSBqc29uKGh0dHBzOi8vYXBpLXRlc3QuZXRoZXJpc2MuY29tL2ZsZXgvZmxpZ2h0c3RhdHVzL3Jlc3QvdjIvanNvbi9mbGlnaHQvc3RhdHVzLyI7Ci8vICAgICAgICBzdHJpbmcgY29uc3RhbnQgT1JBQ0xJWkVfU1RBVFVTX1FVRVJZID0KLy8gICAgICAgICAgICAvLyBmb3IgdGVzdHJwYzoKLy8gICAgICAgICAgICAiP3V0Yz10cnVlKS5mbGlnaHRTdGF0dXNlc1swXVsnc3RhdHVzJywnZGVsYXlzJywnb3BlcmF0aW9uYWxUaW1lcyddIjsKLy8gPC0tIHRlc3QtbW9kZQp9CgovLyBGaWxlOiBjb250cmFjdHMvRmxpZ2h0RGVsYXlDb250cm9sbGVySW50ZXJmYWNlLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBDb250cmFjdCBpbnRlcmZhY2UKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrLCBTdGVwaGFuIEthcnBpc2NoZWsKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgewoKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIHJldHVybnMgKGJvb2wgX2lzT3duZXIpOwoKICAgIGZ1bmN0aW9uIHNlbGZSZWdpc3RlcihieXRlczMyIF9pZCkgcHVibGljIHJldHVybnMgKGJvb2wgcmVzdWx0KTsKCiAgICBmdW5jdGlvbiBnZXRDb250cmFjdChieXRlczMyIF9pZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2FkZHIpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBEYXRhYmFzZSBtb2RlbAogKiBAY29weXJpZ2h0IChjKSAyMDE3IGV0aGVyaXNjIEdtYkgKICogQGF1dGhvciBDaHJpc3RvcGggTXVzc2VuYnJvY2ssIFN0ZXBoYW4gS2FycGlzY2hlawogKi8KCnByYWdtYSBzb2xpZGl0eSBeMC40LjExOwoKCmNvbnRyYWN0IEZsaWdodERlbGF5RGF0YWJhc2VNb2RlbCB7CgogICAgLy8gTGVkZ2VyIGFjY291bnRzLgogICAgZW51bSBBY2MgewogICAgICAgIFByZW1pdW0sICAgICAgLy8gMAogICAgICAgIFJpc2tGdW5kLCAgICAgLy8gMQogICAgICAgIFBheW91dCwgICAgICAgLy8gMgogICAgICAgIEJhbGFuY2UsICAgICAgLy8gMwogICAgICAgIFJld2FyZCwgICAgICAgLy8gNAogICAgICAgIE9yYWNsaXplQ29zdHMgLy8gNQogICAgfQoKICAgIC8vIHBvbGljeSBTdGF0dXMgQ29kZXMgYW5kIG1lYW5pbmc6CiAgICAvLwogICAgLy8gMDAgPSBBcHBsaWVkOgkgIHRoZSBjdXN0b21lciBoYXMgcGF5ZWQgYSBwcmVtaXVtLCBidXQgdGhlIG9yYWNsZSBoYXMKICAgIC8vCQkJCQkgICAgICAgIG5vdCB5ZXQgY2hlY2tlZCBhbmQgY29uZmlybWVkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGN1c3RvbWVyIGNhbiBzdGlsbCByZXZva2UgdGhlIHBvbGljeS4KICAgIC8vIDAxID0gQWNjZXB0ZWQ6CSAgdGhlIG9yYWNsZSBoYXMgY2hlY2tlZCBhbmQgY29uZmlybWVkLgogICAgLy8JCQkJCSAgICAgICAgVGhlIGN1c3RvbWVyIGNhbiBzdGlsbCByZXZva2UgdGhlIHBvbGljeS4KICAgIC8vIDAyID0gUmV2b2tlZDoJICBUaGUgY3VzdG9tZXIgaGFzIHJldm9rZWQgdGhlIHBvbGljeS4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBwcmVtaXVtIG1pbnVzIGNhbmNlbGxhdGlvbiBmZWUgaXMgcGF5ZWQgYmFjayB0byB0aGUKICAgIC8vCQkJCQkgICAgICAgIGN1c3RvbWVyIGJ5IHRoZSBvcmFjbGUuCiAgICAvLyAwMyA9IFBhaWRPdXQ6CSAgVGhlIGZsaWdodCBoYXMgZW5kZWQgd2l0aCBkZWxheS4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBvcmFjbGUgaGFzIGNoZWNrZWQgYW5kIHBheWVkIG91dC4KICAgIC8vIDA0ID0gRXhwaXJlZDoJICBUaGUgZmxpZ2h0IGhhcyBlbmRldCB3aXRoIDwxNW1pbi4gZGVsYXkuCiAgICAvLwkJCQkJICAgICAgICBObyBwYXlvdXQuCiAgICAvLyAwNSA9IERlY2xpbmVkOgkgIFRoZSBhcHBsaWNhdGlvbiB3YXMgaW52YWxpZC4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBwcmVtaXVtIG1pbnVzIGNhbmNlbGxhdGlvbiBmZWUgaXMgcGF5ZWQgYmFjayB0byB0aGUKICAgIC8vCQkJCQkgICAgICAgIGN1c3RvbWVyIGJ5IHRoZSBvcmFjbGUuCiAgICAvLyAwNiA9IFNlbmRGYWlsZWQ6CUR1cmluZyBSZXZva2UsIERlY2xpbmUgb3IgUGF5b3V0LCBzZW5kaW5nIGV0aGVyIGZhaWxlZAogICAgLy8JCQkJCSAgICAgICAgZm9yIHVua25vd24gcmVhc29ucy4KICAgIC8vCQkJCQkgICAgICAgIFRoZSBmdW5kcyByZW1haW4gaW4gdGhlIGNvbnRyYWN0cyBSaXNrRnVuZC4KCgogICAgLy8gICAgICAgICAgICAgICAgICAgMDAgICAgICAgMDEgICAgICAgIDAyICAgICAgIDAzICAgICAgICAwNCAgICAgIDA1ICAgICAgICAgICAwNgogICAgZW51bSBwb2xpY3lTdGF0ZSB7IEFwcGxpZWQsIEFjY2VwdGVkLCBSZXZva2VkLCBQYWlkT3V0LCBFeHBpcmVkLCBEZWNsaW5lZCwgU2VuZEZhaWxlZCB9CgogICAgLy8gb3JhY2xpemUgY2FsbGJhY2sgdHlwZXM6CiAgICBlbnVtIG9yYWNsaXplU3RhdGUgeyBGb3JVbmRlcndyaXRpbmcsIEZvclBheW91dCB9CgogICAgLy8gICAgICAgICAgICAgICAwMCAgIDAxICAgMDIgICAwMwogICAgZW51bSBDdXJyZW5jeSB7IEVUSCwgRVVSLCBVU0QsIEdCUCB9CgogICAgLy8gdGhlIHBvbGljeSBzdHJ1Y3R1cmU6IHRoaXMgc3RydWN0dXJlIGtlZXBzIHRyYWNrIG9mIHRoZSBpbmRpdmlkdWFsIHBhcmFtZXRlcnMgb2YgYSBwb2xpY3kuCiAgICAvLyB0eXBpY2FsbHkgY3VzdG9tZXIgYWRkcmVzcywgcHJlbWl1bSBhbmQgc29tZSBzdGF0dXMgaW5mb3JtYXRpb24uCiAgICBzdHJ1Y3QgUG9saWN5IHsKICAgICAgICAvLyAwIC0gdGhlIGN1c3RvbWVyCiAgICAgICAgYWRkcmVzcyBjdXN0b21lcjsKCiAgICAgICAgLy8gMSAtIHByZW1pdW0KICAgICAgICB1aW50IHByZW1pdW07CiAgICAgICAgLy8gcmlzayBzcGVjaWZpYyBwYXJhbWV0ZXJzOgogICAgICAgIC8vIDIgLSBwb2ludGVyIHRvIHRoZSByaXNrIGluIHRoZSByaXNrcyBtYXBwaW5nCiAgICAgICAgYnl0ZXMzMiByaXNrSWQ7CiAgICAgICAgLy8gY3VzdG9tIHBheW91dCBwYXR0ZXJuCiAgICAgICAgLy8gaW4gZnV0dXJlIHZlcnNpb25zLCBjdXN0b21lciB3aWxsIGJlIGFibGUgdG8gdGFtcGVyIHdpdGggdGhpcyBhcnJheS4KICAgICAgICAvLyB0byBrZWVwIHRoaW5ncyBzaW1wbGUsIHdlIGhhdmUgZGVjaWRlZCB0byBoYXJkLWNvZGUgdGhlIGFycmF5IGZvciBhbGwgcG9saWNpZXMuCiAgICAgICAgLy8gdWludDhbNV0gcGF0dGVybjsKICAgICAgICAvLyAzIC0gcHJvYmFiaWxpdHkgd2VpZ2h0LiB0aGlzIGlzIHRoZSBjZW50cmFsIHBhcmFtZXRlcgogICAgICAgIHVpbnQgd2VpZ2h0OwogICAgICAgIC8vIDQgLSBjYWxjdWxhdGVkIFBheW91dAogICAgICAgIHVpbnQgY2FsY3VsYXRlZFBheW91dDsKICAgICAgICAvLyA1IC0gYWN0dWFsIFBheW91dAogICAgICAgIHVpbnQgYWN0dWFsUGF5b3V0OwoKICAgICAgICAvLyBzdGF0dXMgZmllbGRzOgogICAgICAgIC8vIDYgLSB0aGUgc3RhdGUgb2YgdGhlIHBvbGljeQogICAgICAgIHBvbGljeVN0YXRlIHN0YXRlOwogICAgICAgIC8vIDcgLSB0aW1lIG9mIGxhc3Qgc3RhdGUgY2hhbmdlCiAgICAgICAgdWludCBzdGF0ZVRpbWU7CiAgICAgICAgLy8gOCAtIHN0YXRlIGNoYW5nZSBtZXNzYWdlL3JlYXNvbgogICAgICAgIGJ5dGVzMzIgc3RhdGVNZXNzYWdlOwogICAgICAgIC8vIDkgLSBUTFNOb3RhcnkgUHJvb2YKICAgICAgICBieXRlcyBwcm9vZjsKICAgICAgICAvLyAxMCAtIEN1cnJlbmN5CiAgICAgICAgQ3VycmVuY3kgY3VycmVuY3k7CiAgICAgICAgLy8gMTAgLSBFeHRlcm5hbCBjdXN0b21lciBpZAogICAgICAgIGJ5dGVzMzIgY3VzdG9tZXJFeHRlcm5hbElkOwogICAgfQoKICAgIC8vIHRoZSByaXNrIHN0cnVjdHVyZTsgdGhpcyBzdHJ1Y3R1cmUga2VlcHMgdHJhY2sgb2YgdGhlIHJpc2stCiAgICAvLyBzcGVjaWZpYyBwYXJhbWV0ZXJzLgogICAgLy8gc2V2ZXJhbCBwb2xpY2llcyBjYW4gc2hhcmUgdGhlIHNhbWUgcmlzayBzdHJ1Y3R1cmUgKHR5cGljYWxseQogICAgLy8gc29tZSBwZW9wbGUgZmx5aW5nIHdpdGggdGhlIHNhbWUgcGxhbmUpCiAgICBzdHJ1Y3QgUmlzayB7CiAgICAgICAgLy8gMCAtIEFpcmxpbmUgQ29kZSArIEZsaWdodE51bWJlcgogICAgICAgIGJ5dGVzMzIgY2FycmllckZsaWdodE51bWJlcjsKICAgICAgICAvLyAxIC0gc2NoZWR1bGVkIGRlcGFydHVyZSBhbmQgYXJyaXZhbCB0aW1lIGluIHRoZSBmb3JtYXQgL2RlcC9ZWVlZL01NL0RECiAgICAgICAgYnl0ZXMzMiBkZXBhcnR1cmVZZWFyTW9udGhEYXk7CiAgICAgICAgLy8gMiAtIHRoZSBpbml0YWwgYXJyaXZhbCB0aW1lCiAgICAgICAgdWludCBhcnJpdmFsVGltZTsKICAgICAgICAvLyAzIC0gdGhlIGZpbmFsIGRlbGF5IGluIG1pbnV0ZXMKICAgICAgICB1aW50IGRlbGF5SW5NaW51dGVzOwogICAgICAgIC8vIDQgLSB0aGUgZGV0ZXJtaW5lZCBkZWxheSBjYXRlZ29yeSAoMC01KQogICAgICAgIHVpbnQ4IGRlbGF5OwogICAgICAgIC8vIDUgLSB3ZSBsaW1pdCB0aGUgY3VtdWxhdGVkIHdlaWdodGVkIHByZW1pdW0gdG8gYXZvaWQgY2x1c3RlciByaXNrcwogICAgICAgIHVpbnQgY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtOwogICAgICAgIC8vIDYgLSBtYXggY3VtdWxhdGVkIFBheW91dCBmb3IgdGhpcyByaXNrCiAgICAgICAgdWludCBwcmVtaXVtTXVsdGlwbGllcjsKICAgIH0KCiAgICAvLyB0aGUgb3JhY2xpemUgY2FsbGJhY2sgc3RydWN0dXJlOiB3ZSB1c2Ugc2V2ZXJhbCBvcmFjbGl6ZSBjYWxscy4KICAgIC8vIGFsbCBvcmFjbGl6ZSBjYWxscyB3aWxsIHJlc3VsdCBpbiBhIGNvbW1vbiBjYWxsYmFjayB0byBfX2NhbGxiYWNrKC4uLikuCiAgICAvLyB0byBrZWVwIHRyYWNrIG9mIHRoZSBkaWZmZXJlbnQgcXVlcnlzIHdlIGhhdmUgdG8gaW50cm9kdWNlIHRoaXMgc3RydWN0LgogICAgc3RydWN0IE9yYWNsaXplQ2FsbGJhY2sgewogICAgICAgIC8vIGZvciB3aGljaCBwb2xpY3kgaGF2ZSB3ZSBjYWxsZWQ/CiAgICAgICAgdWludCBwb2xpY3lJZDsKICAgICAgICAvLyBmb3Igd2hpY2ggcHVycG9zZSBkaWQgd2UgY2FsbD8ge0ZvclVuZGVyd3JpdGUgfCBGb3JQYXlvdXR9CiAgICAgICAgb3JhY2xpemVTdGF0ZSBvU3RhdGU7CiAgICAgICAgLy8gdGltZQogICAgICAgIHVpbnQgb3JhY2xpemVUaW1lOwogICAgfQoKICAgIHN0cnVjdCBDdXN0b21lciB7CiAgICAgICAgYnl0ZXMzMiBjdXN0b21lckV4dGVybmFsSWQ7CiAgICAgICAgYm9vbCBpZGVudGl0eUNvbmZpcm1lZDsKICAgIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0ZsaWdodERlbGF5Q29udHJvbGxlZENvbnRyYWN0LnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBDb250cm9sbGVkIGNvbnRyYWN0IEludGVyZmFjZQogKiBAY29weXJpZ2h0IChjKSAyMDE3IGV0aGVyaXNjIEdtYkgKICogQGF1dGhvciBDaHJpc3RvcGggTXVzc2VuYnJvY2sKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgoKCgpjb250cmFjdCBGbGlnaHREZWxheUNvbnRyb2xsZWRDb250cmFjdCBpcyBGbGlnaHREZWxheURhdGFiYXNlTW9kZWwgewoKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CiAgICBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UgRkRfQ0k7CgogICAgbW9kaWZpZXIgb25seUNvbnRyb2xsZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyb2xsZXIpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJvbGxlcihhZGRyZXNzIF9jb250cm9sbGVyKSBpbnRlcm5hbCByZXR1cm5zIChib29sIF9yZXN1bHQpIHsKICAgICAgICBjb250cm9sbGVyID0gX2NvbnRyb2xsZXI7CiAgICAgICAgRkRfQ0kgPSBGbGlnaHREZWxheUNvbnRyb2xsZXJJbnRlcmZhY2UoX2NvbnRyb2xsZXIpOwogICAgICAgIF9yZXN1bHQgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlc3RydWN0KCkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBzZWxmZGVzdHJ1Y3QoY29udHJvbGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJhY3RzKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHt9CgogICAgZnVuY3Rpb24gZ2V0Q29udHJhY3QoYnl0ZXMzMiBfaWQpIGludGVybmFsIHJldHVybnMgKGFkZHJlc3MgX2FkZHIpIHsKICAgICAgICBfYWRkciA9IEZEX0NJLmdldENvbnRyYWN0KF9pZCk7CiAgICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9GbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlLnNvbAoKLyoqCiAqIEZsaWdodERlbGF5IHdpdGggT3JhY2xpemVkIFVuZGVyd3JpdGluZyBhbmQgUGF5b3V0CiAqCiAqIEBkZXNjcmlwdGlvbiBEYXRhYmFzZSBjb250cmFjdCBpbnRlcmZhY2UKICogQGNvcHlyaWdodCAoYykgMjAxNyBldGhlcmlzYyBHbWJICiAqIEBhdXRob3IgQ2hyaXN0b3BoIE11c3NlbmJyb2NrLCBTdGVwaGFuIEthcnBpc2NoZWsKICovCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMTsKCgoKCmNvbnRyYWN0IEZsaWdodERlbGF5RGF0YWJhc2VJbnRlcmZhY2UgaXMgRmxpZ2h0RGVsYXlEYXRhYmFzZU1vZGVsIHsKCiAgICB1aW50IHB1YmxpYyBNSU5fREVQQVJUVVJFX0xJTTsKCiAgICB1aW50IHB1YmxpYyBNQVhfREVQQVJUVVJFX0xJTTsKCiAgICBieXRlczMyW10gcHVibGljIHZhbGlkT3JpZ2luczsKCiAgICBieXRlczMyW10gcHVibGljIHZhbGlkRGVzdGluYXRpb25zOwoKICAgIGZ1bmN0aW9uIGNvdW50T3JpZ2lucygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9sZW5ndGgpOwoKICAgIGZ1bmN0aW9uIGdldE9yaWdpbkJ5SW5kZXgodWludDI1NiBfaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIgX29yaWdpbik7CgogICAgZnVuY3Rpb24gY291bnREZXN0aW5hdGlvbnMoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBfbGVuZ3RoKTsKCiAgICBmdW5jdGlvbiBnZXREZXN0aW5hdGlvbkJ5SW5kZXgodWludDI1NiBfaSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIgX2Rlc3RpbmF0aW9uKTsKCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbCgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBnZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfYWxsb3dlZCkgOwoKICAgIGZ1bmN0aW9uIHNldExlZGdlcih1aW50OCBfaW5kZXgsIGludCBfdmFsdWUpIHB1YmxpYzsKCiAgICBmdW5jdGlvbiBnZXRMZWRnZXIodWludDggX2luZGV4KSBwdWJsaWMgcmV0dXJucyAoaW50IF92YWx1ZSkgOwoKICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVyUHJlbWl1bSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtKSA7CgogICAgZnVuY3Rpb24gZ2V0UG9saWN5RGF0YSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCB1aW50IF93ZWlnaHQpIDsKCiAgICBmdW5jdGlvbiBnZXRQb2xpY3lTdGF0ZSh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKHBvbGljeVN0YXRlIF9zdGF0ZSkgOwoKICAgIGZ1bmN0aW9uIGdldFJpc2tJZCh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX3Jpc2tJZCk7CgogICAgZnVuY3Rpb24gY3JlYXRlUG9saWN5KGFkZHJlc3MgX2N1c3RvbWVyLCB1aW50IF9wcmVtaXVtLCBDdXJyZW5jeSBfY3VycmVuY3ksIGJ5dGVzMzIgX2N1c3RvbWVyRXh0ZXJuYWxJZCwgYnl0ZXMzMiBfcmlza0lkKSBwdWJsaWMgcmV0dXJucyAodWludCBfcG9saWN5SWQpIDsKCiAgICBmdW5jdGlvbiBzZXRTdGF0ZSgKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBwb2xpY3lTdGF0ZSBfc3RhdGUsCiAgICAgICAgdWludCBfc3RhdGVUaW1lLAogICAgICAgIGJ5dGVzMzIgX3N0YXRlTWVzc2FnZQogICAgKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gc2V0V2VpZ2h0KHVpbnQgX3BvbGljeUlkLCB1aW50IF93ZWlnaHQsIGJ5dGVzIF9wcm9vZikgcHVibGljOwoKICAgIGZ1bmN0aW9uIHNldFBheW91dHModWludCBfcG9saWN5SWQsIHVpbnQgX2NhbGN1bGF0ZWRQYXlvdXQsIHVpbnQgX2FjdHVhbFBheW91dCkgcHVibGljOwoKICAgIGZ1bmN0aW9uIHNldERlbGF5KHVpbnQgX3BvbGljeUlkLCB1aW50OCBfZGVsYXksIHVpbnQgX2RlbGF5SW5NaW51dGVzKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gZ2V0Umlza1BhcmFtZXRlcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHB1YmxpYyByZXR1cm5zIChieXRlczMyIF9jYXJyaWVyRmxpZ2h0TnVtYmVyLCBieXRlczMyIF9kZXBhcnR1cmVZZWFyTW9udGhEYXksIHVpbnQgX2Fycml2YWxUaW1lKSA7CgogICAgZnVuY3Rpb24gZ2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0sIHVpbnQgX3ByZW1pdW1NdWx0aXBsaWVyKTsKCiAgICBmdW5jdGlvbiBjcmVhdGVVcGRhdGVSaXNrKGJ5dGVzMzIgX2NhcnJpZXJGbGlnaHROdW1iZXIsIGJ5dGVzMzIgX2RlcGFydHVyZVllYXJNb250aERheSwgdWludCBfYXJyaXZhbFRpbWUpCiAgICAgICAgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX3Jpc2tJZCk7CgogICAgZnVuY3Rpb24gc2V0UHJlbWl1bUZhY3RvcnMoYnl0ZXMzMiBfcmlza0lkLCB1aW50IF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0sIHVpbnQgX3ByZW1pdW1NdWx0aXBsaWVyKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVDYWxsYmFjayhieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCwgdWludCBfb3JhY2xpemVUaW1lKSA7CgogICAgZnVuY3Rpb24gZ2V0T3JhY2xpemVQb2xpY3lJZChieXRlczMyIF9xdWVyeUlkKQogICAgICAgIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCkgOwoKICAgIGZ1bmN0aW9uIGNyZWF0ZU9yYWNsaXplQ2FsbGJhY2soCiAgICAgICAgYnl0ZXMzMiBfcXVlcnlJZCwKICAgICAgICB1aW50IF9wb2xpY3lJZCwKICAgICAgICBvcmFjbGl6ZVN0YXRlIF9vcmFjbGl6ZVN0YXRlLAogICAgICAgIHVpbnQgX29yYWNsaXplVGltZQogICAgKSBwdWJsaWM7CgogICAgZnVuY3Rpb24gY2hlY2tUaW1lKGJ5dGVzMzIgX3F1ZXJ5SWQsIGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfb2Zmc2V0KQogICAgICAgIHB1YmxpYyByZXR1cm5zIChib29sIF9yZXN1bHQpIDsKfQoKLy8gRmlsZTogY29udHJhY3RzL0ZsaWdodERlbGF5RGF0YWJhc2Uuc29sCgovKioKICogRmxpZ2h0RGVsYXkgd2l0aCBPcmFjbGl6ZWQgVW5kZXJ3cml0aW5nIGFuZCBQYXlvdXQKICoKICogQGRlc2NyaXB0aW9uIERhdGFiYXNlIGNvbnRyYWN0CiAqIEBjb3B5cmlnaHQgKGMpIDIwMTcgZXRoZXJpc2MgR21iSAogKiBAYXV0aG9yIENocmlzdG9waCBNdXNzZW5icm9jaywgU3RlcGhhbiBLYXJwaXNjaGVrCiAqLwoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKCgoKCgpjb250cmFjdCBGbGlnaHREZWxheURhdGFiYXNlIGlzIEZsaWdodERlbGF5Q29udHJvbGxlZENvbnRyYWN0LCBGbGlnaHREZWxheURhdGFiYXNlSW50ZXJmYWNlLCBGbGlnaHREZWxheUNvbnN0YW50cyB7CgogICAgdWludCBwdWJsaWMgTUlOX0RFUEFSVFVSRV9MSU07CgogICAgdWludCBwdWJsaWMgTUFYX0RFUEFSVFVSRV9MSU07CgogICAgYnl0ZXMzMltdIHB1YmxpYyB2YWxpZE9yaWdpbnM7CiAgICBieXRlczMyW10gcHVibGljIHZhbGlkRGVzdGluYXRpb25zOwoKICAgIC8vIFRhYmxlIG9mIHBvbGljaWVzCiAgICBQb2xpY3lbXSBwdWJsaWMgcG9saWNpZXM7CgogICAgbWFwcGluZyAoYnl0ZXMzMiA9PiB1aW50W10pIHB1YmxpYyBleHRDdXN0b21lclBvbGljaWVzOwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gQ3VzdG9tZXIpIHB1YmxpYyBjdXN0b21lcnM7CgogICAgLy8gTG9va3VwIHBvbGljeUlkcyBmcm9tIGN1c3RvbWVyIGFkZHJlc3NlcwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50W10pIHB1YmxpYyBjdXN0b21lclBvbGljaWVzOwoKICAgIC8vIExvb2t1cCBwb2xpY3kgSWRzIGZyb20gcXVlcnlJZHMKICAgIG1hcHBpbmcgKGJ5dGVzMzIgPT4gT3JhY2xpemVDYWxsYmFjaykgcHVibGljIG9yYWNsaXplQ2FsbGJhY2tzOwoKICAgIC8vIExvb2t1cCByaXNrcyBmcm9tIHJpc2sgSURzCiAgICBtYXBwaW5nIChieXRlczMyID0+IFJpc2spIHB1YmxpYyByaXNrczsKCiAgICAvLyBMb29rdXAgQWNjZXNzQ29udHJvbAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQ4ID0+IGJvb2wpKSkgcHVibGljIGFjY2Vzc0NvbnRyb2w7CgogICAgLy8gTG9va3VwIGFjY291bnRzIG9mIGludGVybmFsIGxlZGdlcgogICAgaW50WzZdIHB1YmxpYyBsZWRnZXI7CgogICAgRmxpZ2h0RGVsYXlBY2Nlc3NDb250cm9sbGVySW50ZXJmYWNlIEZEX0FDOwoKICAgIGZ1bmN0aW9uIEZsaWdodERlbGF5RGF0YWJhc2UgKGFkZHJlc3MgX2NvbnRyb2xsZXIpIHB1YmxpYyB7CiAgICAgICAgc2V0Q29udHJvbGxlcihfY29udHJvbGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29udHJhY3RzKCkgcHVibGljIG9ubHlDb250cm9sbGVyIHsKICAgICAgICBGRF9BQyA9IEZsaWdodERlbGF5QWNjZXNzQ29udHJvbGxlckludGVyZmFjZShnZXRDb250cmFjdCgiRkQuQWNjZXNzQ29udHJvbGxlciIpKTsKCiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5SWQoMTAxLCAiRkQuTmV3UG9saWN5Iik7CiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5SWQoMTAxLCAiRkQuVW5kZXJ3cml0ZSIpOwoKICAgICAgICBGRF9BQy5zZXRQZXJtaXNzaW9uQnlJZCgxMDEsICJGRC5QYXlvdXQiKTsKICAgICAgICBGRF9BQy5zZXRQZXJtaXNzaW9uQnlJZCgxMDEsICJGRC5MZWRnZXIiKTsKCiAgICAgICAgRkRfQUMuc2V0UGVybWlzc2lvbkJ5SWQoMTAyLCAiRkQuT3duZXIiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRNaW5EZXBhcnR1cmVMaW0odWludCBfdGltZXN0YW1wKSByZXR1cm5zIChib29sIF9zdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAyLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIE1JTl9ERVBBUlRVUkVfTElNID0gX3RpbWVzdGFtcDsKICAgICAgICBfc3VjY2VzcyA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TWF4RGVwYXJ0dXJlTGltKHVpbnQgX3RpbWVzdGFtcCkgcmV0dXJucyAoYm9vbCBfc3VjY2VzcykgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMiwgbXNnLnNlbmRlcikpOwoKICAgICAgICBNQVhfREVQQVJUVVJFX0xJTSA9IF90aW1lc3RhbXA7CiAgICAgICAgX3N1Y2Nlc3MgPSB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE9yaWdpbihieXRlczMyIF9vcmlnaW4pIHJldHVybnMgKHVpbnQyNTYgX2luZGV4KSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAyLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIHZhbGlkT3JpZ2lucy5wdXNoKF9vcmlnaW4pOwogICAgICAgIF9pbmRleCA9IHZhbGlkT3JpZ2lucy5sZW5ndGggLSAxOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZU9yaWdpbkJ5SW5kZXgodWludDI1NiBfaW5kZXgpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDIsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgaWYgKHZhbGlkT3JpZ2lucy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnl0ZXMzMiBsYXN0RWxlbWVudCA9IHZhbGlkT3JpZ2luc1t2YWxpZE9yaWdpbnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHZhbGlkT3JpZ2luc1tfaW5kZXhdID0gbGFzdEVsZW1lbnQ7CiAgICAgICAgICAgIHZhbGlkT3JpZ2lucy5sZW5ndGgtLTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvdW50T3JpZ2lucygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9sZW5ndGgpIHsKICAgICAgICBfbGVuZ3RoID0gdmFsaWRPcmlnaW5zLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPcmlnaW5CeUluZGV4KHVpbnQyNTYgX2kpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChieXRlczMyIF9vcmlnaW4pIHsKICAgICAgICBfb3JpZ2luID0gdmFsaWRPcmlnaW5zW19pXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGREZXN0aW5hdGlvbihieXRlczMyIF9vcmlnaW4pIHJldHVybnMgKHVpbnQyNTYgX2luZGV4KSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAyLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIHZhbGlkRGVzdGluYXRpb25zLnB1c2goX29yaWdpbik7CiAgICAgICAgX2luZGV4ID0gdmFsaWREZXN0aW5hdGlvbnMubGVuZ3RoIC0gMTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVEZXN0aW5hdGlvbkJ5SW5kZXgodWludDI1NiBfaW5kZXgpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDIsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgaWYgKHZhbGlkRGVzdGluYXRpb25zLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBieXRlczMyIGxhc3RFbGVtZW50ID0gdmFsaWREZXN0aW5hdGlvbnNbdmFsaWREZXN0aW5hdGlvbnMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIHZhbGlkRGVzdGluYXRpb25zW19pbmRleF0gPSBsYXN0RWxlbWVudDsKICAgICAgICAgICAgdmFsaWREZXN0aW5hdGlvbnMubGVuZ3RoLS07CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjb3VudERlc3RpbmF0aW9ucygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9sZW5ndGgpIHsKICAgICAgICBfbGVuZ3RoID0gdmFsaWREZXN0aW5hdGlvbnMubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERlc3RpbmF0aW9uQnlJbmRleCh1aW50MjU2IF9pKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYnl0ZXMzMiBfZGVzdGluYXRpb24pIHsKICAgICAgICBfZGVzdGluYXRpb24gPSB2YWxpZERlc3RpbmF0aW9uc1tfaV07CiAgICB9CgoKICAgIC8vIEdldHRlciBhbmQgU2V0dGVyIGZvciBBY2Nlc3NDb250cm9sCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sICgKICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCiAgICAgICAgdWludDggX3Blcm0sCiAgICAgICAgYm9vbCBfYWNjZXNzCiAgICApIHB1YmxpYyB7CiAgICAgICAgLy8gb25lIGFuZCBvbmx5IGhhcmRjb2RlZCBhY2Nlc3NDb250cm9sCiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IEZEX0NJLmdldENvbnRyYWN0KCJGRC5BY2Nlc3NDb250cm9sbGVyIikpOwogICAgICAgIGFjY2Vzc0NvbnRyb2xbX2NvbnRyYWN0XVtfY2FsbGVyXVtfcGVybV0gPSBfYWNjZXNzOwogICAgfQoKLy8gLS0+IHRlc3QtbW9kZQovLyAgICAgICAgZnVuY3Rpb24gc2V0QWNjZXNzQ29udHJvbFRlc3RPbmx5ICgKLy8gICAgICAgICAgICBhZGRyZXNzIF9jb250cmFjdCwKLy8gICAgICAgICAgICBhZGRyZXNzIF9jYWxsZXIsCi8vICAgICAgICAgICAgdWludDggX3Blcm0sCi8vICAgICAgICAgICAgYm9vbCBfYWNjZXNzCi8vICAgICAgICApIHB1YmxpYyB7Ci8vICAgICAgICAgICAgYWNjZXNzQ29udHJvbFtfY29udHJhY3RdW19jYWxsZXJdW19wZXJtXSA9IF9hY2Nlc3M7Ci8vICAgICAgICB9Ci8vIDwtLSB0ZXN0LW1vZGUKCiAgICBmdW5jdGlvbiBzZXRBY2Nlc3NDb250cm9sKGFkZHJlc3MgX2NvbnRyYWN0LCBhZGRyZXNzIF9jYWxsZXIsIHVpbnQ4IF9wZXJtKSBwdWJsaWMgewogICAgICAgIHNldEFjY2Vzc0NvbnRyb2woCiAgICAgICAgICAgIF9jb250cmFjdCwKICAgICAgICAgICAgX2NhbGxlciwKICAgICAgICAgICAgX3Blcm0sCiAgICAgICAgICAgIHRydWUKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFjY2Vzc0NvbnRyb2woYWRkcmVzcyBfY29udHJhY3QsIGFkZHJlc3MgX2NhbGxlciwgdWludDggX3Blcm0pIHB1YmxpYyByZXR1cm5zIChib29sIF9hbGxvd2VkKSB7CiAgICAgICAgX2FsbG93ZWQgPSBhY2Nlc3NDb250cm9sW19jb250cmFjdF1bX2NhbGxlcl1bX3Blcm1dOwogICAgfQoKICAgIC8vIEdldHRlciBhbmQgU2V0dGVyIGZvciBsZWRnZXIKICAgIGZ1bmN0aW9uIHNldExlZGdlcih1aW50OCBfaW5kZXgsIGludCBfdmFsdWUpIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIGludCBwcmV2aW91cyA9IGxlZGdlcltfaW5kZXhdOwogICAgICAgIGxlZGdlcltfaW5kZXhdICs9IF92YWx1ZTsKCi8vIC0tPiBkZWJ1Zy1tb2RlCi8vICAgICAgICAgICAgTG9nSW50KCJwcmV2aW91cyIsIHByZXZpb3VzKTsKLy8gICAgICAgICAgICBMb2dJbnQoImxlZGdlcltfaW5kZXhdIiwgbGVkZ2VyW19pbmRleF0pOwovLyAgICAgICAgICAgIExvZ0ludCgiX3ZhbHVlIiwgX3ZhbHVlKTsKLy8gPC0tIGRlYnVnLW1vZGUKCiAgICAgICAgLy8gY2hlY2sgZm9yIGludCBvdmVyZmxvdwogICAgICAgIGlmIChfdmFsdWUgPCAwKSB7CiAgICAgICAgICAgIGFzc2VydChsZWRnZXJbX2luZGV4XSA8IHByZXZpb3VzKTsKICAgICAgICB9IGVsc2UgaWYgKF92YWx1ZSA+IDApIHsKICAgICAgICAgICAgYXNzZXJ0KGxlZGdlcltfaW5kZXhdID4gcHJldmlvdXMpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMZWRnZXIodWludDggX2luZGV4KSBwdWJsaWMgcmV0dXJucyAoaW50IF92YWx1ZSkgewogICAgICAgIF92YWx1ZSA9IGxlZGdlcltfaW5kZXhdOwogICAgfQoKICAgIC8vIEdldHRlciBhbmQgU2V0dGVyIGZvciBwb2xpY2llcwogICAgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJQcmVtaXVtKHVpbnQgX3BvbGljeUlkKSBwdWJsaWMgcmV0dXJucyAoYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0pIHsKICAgICAgICBQb2xpY3kgc3RvcmFnZSBwID0gcG9saWNpZXNbX3BvbGljeUlkXTsKICAgICAgICBfY3VzdG9tZXIgPSBwLmN1c3RvbWVyOwogICAgICAgIF9wcmVtaXVtID0gcC5wcmVtaXVtOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFBvbGljeURhdGEodWludCBfcG9saWN5SWQpIHB1YmxpYyByZXR1cm5zIChhZGRyZXNzIF9jdXN0b21lciwgdWludCBfd2VpZ2h0LCB1aW50IF9wcmVtaXVtKSB7CiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CiAgICAgICAgX2N1c3RvbWVyID0gcC5jdXN0b21lcjsKICAgICAgICBfd2VpZ2h0ID0gcC53ZWlnaHQ7CiAgICAgICAgX3ByZW1pdW0gPSBwLnByZW1pdW07CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UG9saWN5U3RhdGUodWludCBfcG9saWN5SWQpIHB1YmxpYyByZXR1cm5zIChwb2xpY3lTdGF0ZSBfc3RhdGUpIHsKICAgICAgICBQb2xpY3kgc3RvcmFnZSBwID0gcG9saWNpZXNbX3BvbGljeUlkXTsKICAgICAgICBfc3RhdGUgPSBwLnN0YXRlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJpc2tJZCh1aW50IF9wb2xpY3lJZCkgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX3Jpc2tJZCkgewogICAgICAgIFBvbGljeSBzdG9yYWdlIHAgPSBwb2xpY2llc1tfcG9saWN5SWRdOwogICAgICAgIF9yaXNrSWQgPSBwLnJpc2tJZDsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVQb2xpY3koYWRkcmVzcyBfY3VzdG9tZXIsIHVpbnQgX3ByZW1pdW0sIEN1cnJlbmN5IF9jdXJyZW5jeSwgYnl0ZXMzMiBfY3VzdG9tZXJFeHRlcm5hbElkLCBieXRlczMyIF9yaXNrSWQpIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCkgewogICAgICAgIHJlcXVpcmUoRkRfQUMuY2hlY2tQZXJtaXNzaW9uKDEwMSwgbXNnLnNlbmRlcikpOwoKICAgICAgICBfcG9saWN5SWQgPSBwb2xpY2llcy5sZW5ndGgrKzsKCiAgICAgICAgLy90b2RvOiBjaGVjayBmb3Igb3Zld2Zsb3dzCgovLyAtLT4gdGVzdC1tb2RlCi8vICAgICAgICAgICAgTG9nVWludCgiX3BvbGljeUlkIiwgX3BvbGljeUlkKTsKLy8gPC0tIHRlc3QtbW9kZQoKICAgICAgICBjdXN0b21lclBvbGljaWVzW19jdXN0b21lcl0ucHVzaChfcG9saWN5SWQpOwogICAgICAgIGV4dEN1c3RvbWVyUG9saWNpZXNbX2N1c3RvbWVyRXh0ZXJuYWxJZF0ucHVzaChfcG9saWN5SWQpOwoKICAgICAgICBQb2xpY3kgc3RvcmFnZSBwID0gcG9saWNpZXNbX3BvbGljeUlkXTsKCiAgICAgICAgcC5jdXN0b21lciA9IF9jdXN0b21lcjsKICAgICAgICBwLmN1cnJlbmN5ID0gX2N1cnJlbmN5OwogICAgICAgIHAuY3VzdG9tZXJFeHRlcm5hbElkID0gX2N1c3RvbWVyRXh0ZXJuYWxJZDsKICAgICAgICBwLnByZW1pdW0gPSBfcHJlbWl1bTsKICAgICAgICBwLnJpc2tJZCA9IF9yaXNrSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U3RhdGUoCiAgICAgICAgdWludCBfcG9saWN5SWQsCiAgICAgICAgcG9saWN5U3RhdGUgX3N0YXRlLAogICAgICAgIHVpbnQgX3N0YXRlVGltZSwKICAgICAgICBieXRlczMyIF9zdGF0ZU1lc3NhZ2UKICAgICkgcHVibGljIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgTG9nU2V0U3RhdGUoCiAgICAgICAgICAgIF9wb2xpY3lJZCwKICAgICAgICAgICAgdWludDgoX3N0YXRlKSwKICAgICAgICAgICAgX3N0YXRlVGltZSwKICAgICAgICAgICAgX3N0YXRlTWVzc2FnZQogICAgICAgICk7CgogICAgICAgIFBvbGljeSBzdG9yYWdlIHAgPSBwb2xpY2llc1tfcG9saWN5SWRdOwoKICAgICAgICBwLnN0YXRlID0gX3N0YXRlOwogICAgICAgIHAuc3RhdGVUaW1lID0gX3N0YXRlVGltZTsKICAgICAgICBwLnN0YXRlTWVzc2FnZSA9IF9zdGF0ZU1lc3NhZ2U7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0V2VpZ2h0KHVpbnQgX3BvbGljeUlkLCB1aW50IF93ZWlnaHQsIGJ5dGVzIF9wcm9vZikgcHVibGljIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CgogICAgICAgIHAud2VpZ2h0ID0gX3dlaWdodDsKICAgICAgICBwLnByb29mID0gX3Byb29mOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFBheW91dHModWludCBfcG9saWN5SWQsIHVpbnQgX2NhbGN1bGF0ZWRQYXlvdXQsIHVpbnQgX2FjdHVhbFBheW91dCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgUG9saWN5IHN0b3JhZ2UgcCA9IHBvbGljaWVzW19wb2xpY3lJZF07CgogICAgICAgIHAuY2FsY3VsYXRlZFBheW91dCA9IF9jYWxjdWxhdGVkUGF5b3V0OwogICAgICAgIHAuYWN0dWFsUGF5b3V0ID0gX2FjdHVhbFBheW91dDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXREZWxheSh1aW50IF9wb2xpY3lJZCwgdWludDggX2RlbGF5LCB1aW50IF9kZWxheUluTWludXRlcykgcHVibGljIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgUmlzayBzdG9yYWdlIHIgPSByaXNrc1twb2xpY2llc1tfcG9saWN5SWRdLnJpc2tJZF07CgogICAgICAgIHIuZGVsYXkgPSBfZGVsYXk7CiAgICAgICAgci5kZWxheUluTWludXRlcyA9IF9kZWxheUluTWludXRlczsKICAgIH0KCiAgICAvLyBHZXR0ZXIgYW5kIFNldHRlciBmb3Igcmlza3MKICAgIGZ1bmN0aW9uIGdldFJpc2tQYXJhbWV0ZXJzKGJ5dGVzMzIgX3Jpc2tJZCkgcHVibGljIHJldHVybnMgKGJ5dGVzMzIgX2NhcnJpZXJGbGlnaHROdW1iZXIsIGJ5dGVzMzIgX2RlcGFydHVyZVllYXJNb250aERheSwgdWludCBfYXJyaXZhbFRpbWUpIHsKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwogICAgICAgIF9jYXJyaWVyRmxpZ2h0TnVtYmVyID0gci5jYXJyaWVyRmxpZ2h0TnVtYmVyOwogICAgICAgIF9kZXBhcnR1cmVZZWFyTW9udGhEYXkgPSByLmRlcGFydHVyZVllYXJNb250aERheTsKICAgICAgICBfYXJyaXZhbFRpbWUgPSByLmFycml2YWxUaW1lOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZW1pdW1GYWN0b3JzKGJ5dGVzMzIgX3Jpc2tJZCkgcHVibGljIHJldHVybnMgKHVpbnQgX2N1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSwgdWludCBfcHJlbWl1bU11bHRpcGxpZXIpIHsKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwogICAgICAgIF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW0gPSByLmN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bTsKICAgICAgICBfcHJlbWl1bU11bHRpcGxpZXIgPSByLnByZW1pdW1NdWx0aXBsaWVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZVJpc2soYnl0ZXMzMiBfY2FycmllckZsaWdodE51bWJlciwgYnl0ZXMzMiBfZGVwYXJ0dXJlWWVhck1vbnRoRGF5LCB1aW50IF9hcnJpdmFsVGltZSkgcmV0dXJucyAoYnl0ZXMzMiBfcmlza0lkKSB7CiAgICAgICAgcmVxdWlyZShGRF9BQy5jaGVja1Blcm1pc3Npb24oMTAxLCBtc2cuc2VuZGVyKSk7CgogICAgICAgIF9yaXNrSWQgPSBzaGEzKAogICAgICAgICAgICBfY2FycmllckZsaWdodE51bWJlciwKICAgICAgICAgICAgX2RlcGFydHVyZVllYXJNb250aERheSwKICAgICAgICAgICAgX2Fycml2YWxUaW1lCiAgICAgICAgKTsKCi8vIC0tPiB0ZXN0LW1vZGUKLy8gICAgICAgICAgICBMb2dCeXRlczMyKCJyaXNrSWQiLCBfcmlza0lkKTsKLy8gPC0tIHRlc3QtbW9kZQoKICAgICAgICBSaXNrIHN0b3JhZ2UgciA9IHJpc2tzW19yaXNrSWRdOwoKICAgICAgICBpZiAoci5wcmVtaXVtTXVsdGlwbGllciA9PSAwKSB7CiAgICAgICAgICAgIHIuY2FycmllckZsaWdodE51bWJlciA9IF9jYXJyaWVyRmxpZ2h0TnVtYmVyOwogICAgICAgICAgICByLmRlcGFydHVyZVllYXJNb250aERheSA9IF9kZXBhcnR1cmVZZWFyTW9udGhEYXk7CiAgICAgICAgICAgIHIuYXJyaXZhbFRpbWUgPSBfYXJyaXZhbFRpbWU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFByZW1pdW1GYWN0b3JzKGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfY3VtdWxhdGVkV2VpZ2h0ZWRQcmVtaXVtLCB1aW50IF9wcmVtaXVtTXVsdGlwbGllcikgcHVibGljIHsKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgUmlzayBzdG9yYWdlIHIgPSByaXNrc1tfcmlza0lkXTsKICAgICAgICByLmN1bXVsYXRlZFdlaWdodGVkUHJlbWl1bSA9IF9jdW11bGF0ZWRXZWlnaHRlZFByZW1pdW07CiAgICAgICAgci5wcmVtaXVtTXVsdGlwbGllciA9IF9wcmVtaXVtTXVsdGlwbGllcjsKICAgIH0KCiAgICAvLyBHZXR0ZXIgYW5kIFNldHRlciBmb3Igb3JhY2xpemVDYWxsYmFja3MKICAgIGZ1bmN0aW9uIGdldE9yYWNsaXplQ2FsbGJhY2soYnl0ZXMzMiBfcXVlcnlJZCkgcHVibGljIHJldHVybnMgKHVpbnQgX3BvbGljeUlkLCB1aW50IF9vcmFjbGl6ZVRpbWUpIHsKICAgICAgICBPcmFjbGl6ZUNhbGxiYWNrIHN0b3JhZ2UgbyA9IG9yYWNsaXplQ2FsbGJhY2tzW19xdWVyeUlkXTsKICAgICAgICBfcG9saWN5SWQgPSBvLnBvbGljeUlkOwogICAgICAgIF9vcmFjbGl6ZVRpbWUgPSBvLm9yYWNsaXplVGltZTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRPcmFjbGl6ZVBvbGljeUlkKGJ5dGVzMzIgX3F1ZXJ5SWQpIHB1YmxpYyByZXR1cm5zICh1aW50IF9wb2xpY3lJZCkgewogICAgICAgIE9yYWNsaXplQ2FsbGJhY2sgc3RvcmFnZSBvID0gb3JhY2xpemVDYWxsYmFja3NbX3F1ZXJ5SWRdOwogICAgICAgIF9wb2xpY3lJZCA9IG8ucG9saWN5SWQ7CiAgICB9CgogICAgZnVuY3Rpb24gY3JlYXRlT3JhY2xpemVDYWxsYmFjaygKICAgICAgICBieXRlczMyIF9xdWVyeUlkLAogICAgICAgIHVpbnQgX3BvbGljeUlkLAogICAgICAgIG9yYWNsaXplU3RhdGUgX29yYWNsaXplU3RhdGUsCiAgICAgICAgdWludCBfb3JhY2xpemVUaW1lKSBwdWJsaWMgewoKICAgICAgICByZXF1aXJlKEZEX0FDLmNoZWNrUGVybWlzc2lvbigxMDEsIG1zZy5zZW5kZXIpKTsKCiAgICAgICAgb3JhY2xpemVDYWxsYmFja3NbX3F1ZXJ5SWRdID0gT3JhY2xpemVDYWxsYmFjayhfcG9saWN5SWQsIF9vcmFjbGl6ZVN0YXRlLCBfb3JhY2xpemVUaW1lKTsKICAgIH0KCiAgICAvLyBtaXhlZAogICAgZnVuY3Rpb24gY2hlY2tUaW1lKGJ5dGVzMzIgX3F1ZXJ5SWQsIGJ5dGVzMzIgX3Jpc2tJZCwgdWludCBfb2Zmc2V0KSBwdWJsaWMgcmV0dXJucyAoYm9vbCBfcmVzdWx0KSB7CiAgICAgICAgT3JhY2xpemVDYWxsYmFjayBzdG9yYWdlIG8gPSBvcmFjbGl6ZUNhbGxiYWNrc1tfcXVlcnlJZF07CiAgICAgICAgUmlzayBzdG9yYWdlIHIgPSByaXNrc1tfcmlza0lkXTsKCiAgICAgICAgX3Jlc3VsdCA9IG8ub3JhY2xpemVUaW1lID4gci5hcnJpdmFsVGltZSArIF9vZmZzZXQ7CiAgICB9Cn0='.
	

]
