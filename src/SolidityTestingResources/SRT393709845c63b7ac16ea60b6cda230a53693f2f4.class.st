Class {
	#name : #SRT393709845c63b7ac16ea60b6cda230a53693f2f4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT393709845c63b7ac16ea60b6cda230a53693f2f4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIGlmIChhID09IDApIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CgogICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgICBvd25lciA9IG5ld093bmVyOwogICAgfQp9Cgpjb250cmFjdCBBdXRob3JpemFibGUgewogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGF1dGhvcml6ZXJzOwoKICAgIG1vZGlmaWVyIG9ubHlBdXRob3JpemVkIHsKICAgICAgcmVxdWlyZShpc0F1dGhvcml6ZWQobXNnLnNlbmRlcikpOwogICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIEF1dGhvcml6YWJsZSgpIHB1YmxpYyB7CiAgICAgIGF1dGhvcml6ZXJzW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gaXNBdXRob3JpemVkKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKGJvb2wpIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKCiAgICAgIGJvb2wgcmVzdWx0ID0gYm9vbChhdXRob3JpemVyc1tfYWRkcl0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZEF1dGhvcml6ZWQoYWRkcmVzcyBfYWRkcikgZXh0ZXJuYWwgb25seUF1dGhvcml6ZWQgewogICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkpOwoKICAgICAgYXV0aG9yaXplcnNbX2FkZHJdID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxBdXRob3JpemVkKGFkZHJlc3MgX2FkZHIpIGV4dGVybmFsIG9ubHlBdXRob3JpemVkIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShfYWRkciAhPSBtc2cuc2VuZGVyKTsKCiAgICAgIC8vYXV0aG9yaXplcnNbX2FkZHJdID0gZmFsc2U7CiAgICAgIGRlbGV0ZSBhdXRob3JpemVyc1tfYWRkcl07CiAgICB9Cn0KCmludGVyZmFjZSB0b2tlblJlY2lwaWVudCB7IGZ1bmN0aW9uIHJlY2VpdmVBcHByb3ZhbChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYWRkcmVzcyBfdG9rZW4sIGJ5dGVzIF9leHRyYURhdGEpIGV4dGVybmFsOyB9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgdWludDI1NiB0b3RhbFN1cHBseV87CgogICAgLy9tb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBzaXplKSB7CiAgICAvLyAgcmVxdWlyZShtc2cuZGF0YS5sZW5ndGggPCBzaXplICsgNCk7CiAgICAvLyAgXzsKICAgIC8vfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICByZXR1cm4gdG90YWxTdXBwbHlfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgLy9yZXF1ZXJlcyBpbiBGcm96ZW5Ub2tlbgogICAgICAvL3JlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAvL3JlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGludGVybmFsIGFsbG93ZWQ7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgLy9yZXF1aXJlcyBpbiBGcm96ZW5Ub2tlbgogICAgICAvL3JlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAvL3JlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICAgIC8vcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICB9CiAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZXh0cmFEYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdG9rZW5SZWNpcGllbnQgc3BlbmRlciA9IHRva2VuUmVjaXBpZW50KF9zcGVuZGVyKTsKICAgICAgICBpZiAoYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKSkgewogICAgICAgICAgICBzcGVuZGVyLnJlY2VpdmVBcHByb3ZhbChtc2cuc2VuZGVyLCBfdmFsdWUsIHRoaXMsIF9leHRyYURhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IEZyb3plblRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGZyb3plbnM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgZnJvemVuVG9rZW5zOwoKICAgIGV2ZW50IEZyb3plbkFkZHJlc3MoYWRkcmVzcyBhZGRyKTsKICAgIGV2ZW50IFVuRnJvemVuQWRkcmVzcyhhZGRyZXNzIGFkZHIpOwogICAgZXZlbnQgRnJvemVuVG9rZW5FdmVudChhZGRyZXNzIGFkZHIsIHVpbnQyNTYgYW1vdW50KTsKICAgIGV2ZW50IFVuRnJvemVuVG9rZW5FdmVudChhZGRyZXNzIGFkZHIsIHVpbnQyNTYgYW1vdW50KTsKCiAgICBtb2RpZmllciBpc05vdEZyb3plbigpIHsKICAgICAgcmVxdWlyZShmcm96ZW5zW21zZy5zZW5kZXJdID09IGZhbHNlKTsKICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBmcm96ZW5BZGRyZXNzKGFkZHJlc3MgX2FkZHIpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkpOwoKICAgICAgZnJvemVuc1tfYWRkcl0gPSB0cnVlOwogICAgICBGcm96ZW5BZGRyZXNzKF9hZGRyKTsKICAgICAgcmV0dXJuIGZyb3plbnNbX2FkZHJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuRnJvemVuQWRkcmVzcyhhZGRyZXNzIF9hZGRyKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKCiAgICAgIGRlbGV0ZSBmcm96ZW5zW19hZGRyXTsKICAgICAgLy9mcm96ZW5zW19hZGRyXSA9IGZhbHNlOwogICAgICBVbkZyb3plbkFkZHJlc3MoX2FkZHIpOwogICAgICByZXR1cm4gZnJvemVuc1tfYWRkcl07CiAgICB9CgogICAgZnVuY3Rpb24gaXNGcm96ZW5CeUFkZHJlc3MoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMoYm9vbCkgewogICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkpOwoKICAgICAgYm9vbCByZXN1bHQgPSBib29sKGZyb3plbnNbX2FkZHJdKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlRnJvemVuVG9rZW5zKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKCiAgICAgIHVpbnQyNTYgcmVzdWx0ID0gdWludDI1Nihmcm96ZW5Ub2tlbnNbX2FkZHJdKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlQXZhaWxhYmxlVG9rZW5zKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKCiAgICAgIHVpbnQyNTYgZnJvemVuID0gdWludDI1Nihmcm96ZW5Ub2tlbnNbX2FkZHJdKTsKICAgICAgdWludDI1NiBiYWxhbmNlID0gdWludDI1NihiYWxhbmNlc1tfYWRkcl0pOwogICAgICByZXF1aXJlKGJhbGFuY2UgPj0gZnJvemVuKTsKCiAgICAgIHVpbnQyNTYgcmVzdWx0ID0gYmFsYW5jZS5zdWIoZnJvemVuKTsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgZnVuY3Rpb24gZnJvemVuVG9rZW4oYWRkcmVzcyBfYWRkciwgdWludDI1NiBfYW1vdW50KSBvbmx5T3duZXIgcHVibGljIHJldHVybnMoYm9vbCkgewogICAgICByZXF1aXJlKF9hZGRyICE9IGFkZHJlc3MoMCkpOwogICAgICByZXF1aXJlKF9hbW91bnQgPiAwKTsKCiAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHVpbnQyNTYoYmFsYW5jZXNbX2FkZHJdKTsKICAgICAgcmVxdWlyZShiYWxhbmNlID49IF9hbW91bnQpOwoKICAgICAgZnJvemVuVG9rZW5zW19hZGRyXSA9IGZyb3plblRva2Vuc1tfYWRkcl0uYWRkKF9hbW91bnQpOwogICAgICBGcm96ZW5Ub2tlbkV2ZW50KF9hZGRyLCBfYW1vdW50KTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKCiAgICBmdW5jdGlvbiB1bkZyb3plblRva2VuKGFkZHJlc3MgX2FkZHIsIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgcmVxdWlyZShfYWRkciAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgIHJlcXVpcmUoZnJvemVuVG9rZW5zW19hZGRyXSA+PSBfYW1vdW50KTsKCiAgICAgIGZyb3plblRva2Vuc1tfYWRkcl0gPSBmcm96ZW5Ub2tlbnNbX2FkZHJdLnN1YihfYW1vdW50KTsKICAgICAgVW5Gcm96ZW5Ub2tlbkV2ZW50KF9hZGRyLCBfYW1vdW50KTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc05vdEZyb3plbigpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICB1aW50MjU2IGJhbGFuY2UgPSBiYWxhbmNlc1ttc2cuc2VuZGVyXTsKICAgICAgdWludDI1NiBmcm96ZW4gPSBmcm96ZW5Ub2tlbnNbbXNnLnNlbmRlcl07CiAgICAgIHVpbnQyNTYgYXZhaWxhYmxlQmFsYW5jZSA9IGJhbGFuY2Uuc3ViKGZyb3plbik7CiAgICAgIHJlcXVpcmUoYXZhaWxhYmxlQmFsYW5jZSA+PSBfdmFsdWUpOwoKICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBpc05vdEZyb3plbigpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgICB1aW50MjU2IGJhbGFuY2UgPSBiYWxhbmNlc1tfZnJvbV07CiAgICAgIHVpbnQyNTYgZnJvemVuID0gZnJvemVuVG9rZW5zW19mcm9tXTsKICAgICAgdWludDI1NiBhdmFpbGFibGVCYWxhbmNlID0gYmFsYW5jZS5zdWIoZnJvemVuKTsKICAgICAgcmVxdWlyZShhdmFpbGFibGVCYWxhbmNlID49IF92YWx1ZSk7CgogICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tICxfdG8sIF92YWx1ZSk7CiAgICB9Cn0KCmNvbnRyYWN0IE1hbGxjb2luVG9rZW4gaXMgRnJvemVuVG9rZW4sIEF1dGhvcml6YWJsZSB7CiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJNYWxsY29pbiBUb2tlbiI7CiAgICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk1MQyI7CiAgICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgICB1aW50MjU2IHB1YmxpYyBNQVhfVE9LRU5fU1VQUExZID0gMjUwMDAwMDAwICogMSBldGhlcjsKCiAgICAgIGV2ZW50IENyZWF0ZVRva2VuKGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgICBldmVudCBDcmVhdGVUb2tlbkJ5QXRlcyhhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50LCBzdHJpbmcgZGF0YSk7CgogICAgICBtb2RpZmllciBvbmx5T3duZXJPckF1dGhvcml6ZWQgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBpc0F1dGhvcml6ZWQobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lck9yQXV0aG9yaXplZCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX2Ftb3VudCA+IDApOwogICAgICAgIHJlcXVpcmUoTUFYX1RPS0VOX1NVUFBMWSA+PSB0b3RhbFN1cHBseV8gKyBfYW1vdW50KTsKCiAgICAgICAgdG90YWxTdXBwbHlfID0gdG90YWxTdXBwbHlfLmFkZChfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX2Ftb3VudCk7CgogICAgICAgIC8vIEtZQwogICAgICAgIGZyb3plbnNbX3RvXSA9IHRydWU7CiAgICAgICAgRnJvemVuQWRkcmVzcyhfdG8pOwoKICAgICAgICBDcmVhdGVUb2tlbihfdG8sIF9hbW91bnQpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQnlBdGVzKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQsIHN0cmluZyBfZGF0YSkgb25seU93bmVyT3JBdXRob3JpemVkIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgcmVxdWlyZShieXRlcyhfZGF0YSkubGVuZ3RoID4gMCk7CiAgICAgICAgcmVxdWlyZShNQVhfVE9LRU5fU1VQUExZID49IHRvdGFsU3VwcGx5XyArIF9hbW91bnQpOwoKICAgICAgICB0b3RhbFN1cHBseV8gPSB0b3RhbFN1cHBseV8uYWRkKF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAgICAgLy8gS1lDCiAgICAgICAgZnJvemVuc1tfdG9dID0gdHJ1ZTsKICAgICAgICBGcm96ZW5BZGRyZXNzKF90byk7CgogICAgICAgIENyZWF0ZVRva2VuQnlBdGVzKF90bywgX2Ftb3VudCwgX2RhdGEpOwogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KfSAKCmNvbnRyYWN0IE1hbGxjb2luQ3Jvd2RTYWxlIGlzIE93bmFibGUsIEF1dGhvcml6YWJsZSB7CiAgICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgICAgTWFsbGNvaW5Ub2tlbiBwdWJsaWMgdG9rZW47CiAgICAgIGFkZHJlc3MgcHVibGljIHdhbGxldDsgCgogICAgICB1aW50MjU2IHB1YmxpYyBQUkVfSUNPX1NUQVJUX1RJTUUgPSAxNTE5Mjk3MjAwOyAvLyBUaHVyc2RheSwgMjIgRmVicnVhcnkgMjAxOCwgMTE6MDA6MDAgR01UCiAgICAgIHVpbnQyNTYgcHVibGljIFBSRV9JQ09fRU5EX1RJTUUgPSAxNTIwNTUwMDAwOyAvLyBUaHVyc2RheSwgOCBNYXJjaCAyMDE4LCAyMzowMDowMCBHTVQKICAgICAgdWludDI1NiBwdWJsaWMgUFJFX0lDT19CT05VU19USU1FXzEgPSAgMTUxOTU1NjQwMDsgLy8gU3VuZGF5LCAyNSBGZWJydWFyeSAyMDE4LCAxMTowMDowMCBHTVQKICAgICAgdWludDI1NiBwdWJsaWMgUFJFX0lDT19CT05VU19USU1FXzIgPSAgMTUxOTk4ODQwMDsgLy8gRnJpZGF5LCAyIE1hcmNoIDIwMTgsIDExOjAwOjAwIEdNVAogICAgICB1aW50MjU2IHB1YmxpYyBQUkVfSUNPX0JPTlVTX1RJTUVfMyA9ICAxNTIwMzM0MDAwOyAvLyBUdWVzZGF5LCA2IE1hcmNoIDIwMTgsIDExOjAwOjAwIEdNVAogICAgICB1aW50MjU2IHB1YmxpYyBQUkVfSUNPX1JBVEUgPSAzMDAwICogMSBldGhlcjsgLy8gMSBFdGhlciA9IDMwMDAgTUxDCiAgICAgIHVpbnQyNTYgcHVibGljIFBSRV9JQ09fQk9OVVNfUkFURSA9IDc1ICogMSBldGhlcjsgLy8gNzUgTUxDID0gMi41JQogICAgICB1aW50MjU2IHB1YmxpYyBwcmVJY29Ub2tlblNhbGVzOwoKICAgICAgdWludDI1NiBwdWJsaWMgSUNPX1NUQVJUX1RJTUUgPSAxNTIxNzE2NDAwOyAvLyBUaHVyc2RheSwgMjIgTWFyY2ggMjAxOCwgMTE6MDA6MDAgR01UCiAgICAgIHVpbnQyNTYgcHVibGljIElDT19FTkRfVElNRSA9IDE1MjM1NzQwMDA7IC8vIFRodXJzZGF5LCAxMiBBcHJpbCAyMDE4LCAyMzowMDowMCBHTVQKICAgICAgdWludDI1NiBwdWJsaWMgSUNPX0JPTlVTX1RJTUVfMSA9IDE1MjE5NzU2MDA7IC8vIFN1bmRheSwgMjUgTWFyY2ggMjAxOCwgMTE6MDA6MDAgR01UCiAgICAgIHVpbnQyNTYgcHVibGljIElDT19CT05VU19USU1FXzIgPSAxNTIyODM5NjAwOyAvLyBXZWRuZXNkYXksIDQgQXByaWwgMjAxOCwgMTE6MDA6MDAgR01UCiAgICAgIHVpbnQyNTYgcHVibGljIElDT19CT05VU19USU1FXzMgPSAxNTIzMzU4MDAwOyAvLyBUdWVzZGF5LCAxMCBBcHJpbCAyMDE4LCAxMTowMDowMCBHTVQKICAgICAgdWludDI1NiBwdWJsaWMgSUNPX1JBVEUgPSAyMDAwICogMSBldGhlcjsgLy8gMSBFdGhlciA9IDIwMDAgTUxDCiAgICAgIHVpbnQyNTYgcHVibGljIElDT19CT05VU19SQVRFID0gNTAgKiAxIGV0aGVyOyAvLyA1MCBNTEMgPSAyLjUlCiAgICAgIHVpbnQyNTYgcHVibGljIGljb1Rva2VuU2FsZXM7CgogICAgICB1aW50MjU2IHB1YmxpYyBTRUNSRVRfQk9OVVNfRkFDVE9SID0gMDsKCiAgICAgIGJvb2wgcHVibGljIGNyb3dkU2FsZVN0b3AgPSBmYWxzZTsKCiAgICAgIHVpbnQyNTYgcHVibGljIE1BWF9UT0tFTl9TVVBQTFkgPSAyNTAwMDAwMDAgKiAxIGV0aGVyOwogICAgICB1aW50MjU2IHB1YmxpYyBNQVhfQ1JPV0RfU0FMRV9UT0tFTlMgPSAxODUwMDAwMDAgKiAxIGV0aGVyOwogICAgICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQ7CiAgICAgIHVpbnQyNTYgcHVibGljIHRva2VuU2FsZXM7CiAgICAgIHVpbnQyNTYgcHVibGljIGJvdW50eVRva2VuRnVuZDsKICAgICAgdWludDI1NiBwdWJsaWMgcmVzZXJ2ZVRva2VuRnVuZDsKICAgICAgdWludDI1NiBwdWJsaWMgdGVhbVRva2VuRnVuZDsKCgogICAgICBldmVudCBUb2tlblB1cmNoYXNlKGFkZHJlc3MgaW5kZXhlZCBwdXJjaGFzZXIsIGFkZHJlc3MgaW5kZXhlZCBiZW5lZmljaWFyeSwgdWludDI1NiB2YWx1ZSwgdWludDI1NiBhbW91bnQpOwogICAgICBldmVudCBDaGFuZ2VDcm93ZFNhbGVEYXRlKHVpbnQ4IHBlcmlvZCwgdWludDI1NiB1bml4dGltZSk7CgogICAgICBtb2RpZmllciBvbmx5T3duZXJPckF1dGhvcml6ZWQgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lciB8fCBpc0F1dGhvcml6ZWQobXNnLnNlbmRlcikpOwogICAgICAgIF87CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIE1hbGxjb2luQ3Jvd2RTYWxlKCkgcHVibGljIHsKICAgICAgICB3YWxsZXQgPSBvd25lcjsKICAgICAgICBwcmVJY29Ub2tlblNhbGVzID0gMDsKICAgICAgICBpY29Ub2tlblNhbGVzID0gMDsKICAgICAgICB3ZWlSYWlzZWQgPSAwOwogICAgICAgIHRva2VuU2FsZXMgPSAwOwoKICAgICAgICBib3VudHlUb2tlbkZ1bmQgPSAwOwogICAgICAgIHJlc2VydmVUb2tlbkZ1bmQgPSAwOwogICAgICAgIHRlYW1Ub2tlbkZ1bmQgPSAwOwogICAgICAKICAgICAgfQoKICAgZnVuY3Rpb24gKCkgZXh0ZXJuYWwgcGF5YWJsZSB7CiAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgcmVxdWlyZShiZW5lZmljaWFyeSAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZSh2YWxpZFB1cmNoYXNlKCkpOwoKICAgICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CiAgICAgIHVpbnQyNTYgX2J1eVRva2VucyA9IDA7CiAgICAgIHVpbnQyNTYgcmF0ZSA9IDA7CiAgICAgIGlmIChub3cgPj0gUFJFX0lDT19TVEFSVF9USU1FICYmIG5vdyA8PSBQUkVfSUNPX0VORF9USU1FKSB7CiAgICAgICAgcmF0ZSA9IFBSRV9JQ09fUkFURS5hZGQoZ2V0UHJlSWNvQm9udXNSYXRlKCkpOwogICAgICAgIF9idXlUb2tlbnMgPSByYXRlLm11bCh3ZWlBbW91bnQpLmRpdigxIGV0aGVyKTsKICAgICAgICBwcmVJY29Ub2tlblNhbGVzID0gcHJlSWNvVG9rZW5TYWxlcy5hZGQoX2J1eVRva2Vucyk7CiAgICAgIH0gZWxzZSBpZiAobm93ID49IElDT19TVEFSVF9USU1FICYmIG5vdyA8PSBJQ09fRU5EX1RJTUUpIHsKICAgICAgICByYXRlID0gSUNPX1JBVEUuYWRkKGdldEljb0JvbnVzUmF0ZSgpKTsKICAgICAgICBfYnV5VG9rZW5zID0gcmF0ZS5tdWwod2VpQW1vdW50KS5kaXYoMSBldGhlcik7CiAgICAgICAgaWNvVG9rZW5TYWxlcyA9IGljb1Rva2VuU2FsZXMuYWRkKF9idXlUb2tlbnMpOwogICAgICB9CgogICAgICByZXF1aXJlKE1BWF9DUk9XRF9TQUxFX1RPS0VOUyA+PSB0b2tlblNhbGVzLmFkZChfYnV5VG9rZW5zKSk7CgogICAgICB0b2tlblNhbGVzID0gdG9rZW5TYWxlcy5hZGQoX2J1eVRva2Vucyk7CiAgICAgIHdlaVJhaXNlZCA9IHdlaVJhaXNlZC5hZGQod2VpQW1vdW50KTsKICAgICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgIHRva2VuLmNyZWF0ZVRva2VuKGJlbmVmaWNpYXJ5LCBfYnV5VG9rZW5zKTsKICAgICAgVG9rZW5QdXJjaGFzZShtc2cuc2VuZGVyLCBiZW5lZmljaWFyeSwgd2VpQW1vdW50LCBfYnV5VG9rZW5zKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXlUb2tlbnNCeUF0ZXMoYWRkcmVzcyBhZGRyXywgdWludDI1NiBhbW91bnRfLCBzdHJpbmcgZGF0YV8pIG9ubHlPd25lck9yQXV0aG9yaXplZCAgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgcmVxdWlyZShhZGRyXyAhPSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShhbW91bnRfID4gMCk7CiAgICAgIHJlcXVpcmUoYnl0ZXMoZGF0YV8pLmxlbmd0aCA+IDApOwogICAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CgogICAgICB1aW50MjU2IF9idXlUb2tlbnMgPSAwOwogICAgICB1aW50MjU2IHJhdGUgPSAwOwogICAgICBpZiAobm93ID49IFBSRV9JQ09fU1RBUlRfVElNRSAmJiBub3cgPD0gUFJFX0lDT19FTkRfVElNRSkgewogICAgICAgIHJhdGUgPSBQUkVfSUNPX1JBVEUuYWRkKGdldFByZUljb0JvbnVzUmF0ZSgpKTsKICAgICAgICBfYnV5VG9rZW5zID0gcmF0ZS5tdWwoYW1vdW50XykuZGl2KDEKCmV0aGVyKTsKICAgICAgICBwcmVJY29Ub2tlblNhbGVzID0gcHJlSWNvVG9rZW5TYWxlcy5hZGQoX2J1eVRva2Vucyk7CiAgICAgIH0gZWxzZSBpZiAobm93ID49IElDT19TVEFSVF9USU1FICYmIG5vdyA8PSBJQ09fRU5EX1RJTUUpIHsKICAgICAgICByYXRlID0gSUNPX1JBVEUuYWRkKGdldEljb0JvbnVzUmF0ZSgpKTsKICAgICAgICBfYnV5VG9rZW5zID0gcmF0ZS5tdWwoYW1vdW50XykuZGl2KDEgZXRoZXIpOwogICAgICAgIGljb1Rva2VuU2FsZXMgPSBpY29Ub2tlblNhbGVzLmFkZChfYnV5VG9rZW5zKTsKICAgICAgfQoKICAgICAgcmVxdWlyZShNQVhfQ1JPV0RfU0FMRV9UT0tFTlMgPj0gdG9rZW5TYWxlcy5hZGQoX2J1eVRva2VucykpOwoKICAgICAgdG9rZW5TYWxlcyA9IHRva2VuU2FsZXMuYWRkKF9idXlUb2tlbnMpOwogICAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKGFtb3VudF8pOwogICAgICB0b2tlbi5jcmVhdGVUb2tlbkJ5QXRlcyhhZGRyXywgX2J1eVRva2VucywgZGF0YV8pOwogICAgICBUb2tlblB1cmNoYXNlKG1zZy5zZW5kZXIsIGFkZHJfLCBhbW91bnRfLCBfYnV5VG9rZW5zKTsKCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFByZUljb0JvbnVzUmF0ZSgpIHByaXZhdGUgdmlldyByZXR1cm5zICh1aW50MjU2IGJvbnVzKSB7CiAgICAgIGJvbnVzID0gMDsKICAgICAgdWludDI1NiBmYWN0b3JCb251cyA9IGdldEZhY3RvckJvbnVzKCk7CgogICAgICBpZiAoZmFjdG9yQm9udXMgPiAwKSB7CiAgICAgICAgaWYgKG5vdyA+PSBQUkVfSUNPX1NUQVJUX1RJTUUgJiYgbm93IDwgUFJFX0lDT19CT05VU19USU1FXzEpIHsgLy8gU3VuZGF5LCAyNSBGZWJydWFyeSAyMDE4LCAxMTowMDowMCBHTVQKICAgICAgICAgIGZhY3RvckJvbnVzID0gZmFjdG9yQm9udXMuYWRkKDcpOwogICAgICAgICAgYm9udXMgPSBQUkVfSUNPX0JPTlVTX1JBVEUubXVsKGZhY3RvckJvbnVzKTsgLy8gYWRkIDYwMC03NTAgTUxDCiAgICAgICAgfSBlbHNlIGlmIChub3cgPj0gUFJFX0lDT19CT05VU19USU1FXzEgJiYgbm93IDwgUFJFX0lDT19CT05VU19USU1FXzIpIHsgLy8gRnJpZGF5LCAyIE1hcmNoIDIwMTgsIDExOjAwOjAwIEdNVAogICAgICAgICAgZmFjdG9yQm9udXMgPSBmYWN0b3JCb251cy5hZGQoNSk7CiAgICAgICAgICBib251cyA9IFBSRV9JQ09fQk9OVVNfUkFURS5tdWwoZmFjdG9yQm9udXMpOyAvLyBhZGQgNDUwLTYwMCBNTEMKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+PSBQUkVfSUNPX0JPTlVTX1RJTUVfMiAmJiBub3cgPCBQUkVfSUNPX0JPTlVTX1RJTUVfMykgeyAvLyBUdWVzZGF5LCA2IE1hcmNoIDIwMTgsIDExOjAwOjAwIEdNVAogICAgICAgICAgZmFjdG9yQm9udXMgPSBmYWN0b3JCb251cy5hZGQoMSk7CiAgICAgICAgICBib251cyA9IFBSRV9JQ09fQk9OVVNfUkFURS5tdWwoZmFjdG9yQm9udXMpOyAvLyBhZGQgMTUwLTMwMCBNTEMKICAgICAgICB9IAogICAgICB9CgogICAgICByZXR1cm4gYm9udXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SWNvQm9udXNSYXRlKCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKHVpbnQyNTYgYm9udXMpIHsKICAgICAgYm9udXMgPSAwOwogICAgICB1aW50MjU2IGZhY3RvckJvbnVzID0gZ2V0RmFjdG9yQm9udXMoKTsKCiAgICAgIGlmIChmYWN0b3JCb251cyA+IDApIHsKICAgICAgICBpZiAobm93ID49IElDT19TVEFSVF9USU1FICYmIG5vdyA8IElDT19CT05VU19USU1FXzEpIHsgLy8gU3VuZGF5LCAyNSBNYXJjaCAyMDE4LCAxMTowMDowMCBHTVQKICAgICAgICAgIGZhY3RvckJvbnVzID0gZmFjdG9yQm9udXMuYWRkKDcpOwogICAgICAgICAgYm9udXMgPSBJQ09fQk9OVVNfUkFURS5tdWwoZmFjdG9yQm9udXMpOyAvLyBhZGQgNDAwLTUwMCBNTEMKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+PSBJQ09fQk9OVVNfVElNRV8xICYmIG5vdyA8IElDT19CT05VU19USU1FXzIpIHsgLy8gV2VkbmVzZGF5LCA0IEFwcmlsIDIwMTgsIDExOjAwOjAwIEdNVAogICAgICAgICAgZmFjdG9yQm9udXMgPSBmYWN0b3JCb251cy5hZGQoNSk7CiAgICAgICAgICBib251cyA9IElDT19CT05VU19SQVRFLm11bChmYWN0b3JCb251cyk7IC8vIGFkZCAzMDAtNDAwIE1MQwogICAgICAgIH0gZWxzZSBpZiAobm93ID49IElDT19CT05VU19USU1FXzIgJiYgbm93IDwgSUNPX0JPTlVTX1RJTUVfMykgeyAvLyBUdWVzZGF5LCAxMCBBcHJpbCAyMDE4LCAxMTowMDowMCBHTVQKICAgICAgICAgIGZhY3RvckJvbnVzID0gZmFjdG9yQm9udXMuYWRkKDEpOwogICAgICAgICAgYm9udXMgPSBJQ09fQk9OVVNfUkFURS5tdWwoZmFjdG9yQm9udXMpOyAvLyBhZGQgMTAwLTIwMCBNTEMKICAgICAgICB9IGVsc2UgaWYgKG5vdyA+PSBJQ09fQk9OVVNfVElNRV8zICYmIG5vdyA8IElDT19FTkRfVElNRSkgeyAvLyBTZWNyZXQgYm9udXMgZGF0ZXMKICAgICAgICAgIGZhY3RvckJvbnVzID0gZmFjdG9yQm9udXMuYWRkKFNFQ1JFVF9CT05VU19GQUNUT1IpOwogICAgICAgICAgYm9udXMgPSBJQ09fQk9OVVNfUkFURS5tdWwoZmFjdG9yQm9udXMpOyAvLyBhZGQgMTUwLTMwMCBNTEMKICAgICAgICB9IAogICAgICB9CgogICAgICByZXR1cm4gYm9udXM7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RmFjdG9yQm9udXMoKSBwcml2YXRlIHZpZXcgcmV0dXJucyAodWludDI1NiBmYWN0b3IpIHsKICAgICAgZmFjdG9yID0gMDsKICAgICAgaWYgKG1zZy52YWx1ZSA+PSA1IGV0aGVyICYmIG1zZy52YWx1ZSA8IDEwIGV0aGVyKSB7CiAgICAgICAgZmFjdG9yID0gMTsKICAgICAgfSBlbHNlIGlmIChtc2cudmFsdWUgPj0gMTAgZXRoZXIgJiYgbXNnLnZhbHVlIDwgMTAwIGV0aGVyKSB7CiAgICAgICAgZmFjdG9yID0gMjsKICAgICAgfSBlbHNlIGlmIChtc2cudmFsdWUgPj0gMTAwIGV0aGVyKSB7CiAgICAgICAgZmFjdG9yID0gMzsKICAgICAgfQogICAgICByZXR1cm4gZmFjdG9yOwogICAgfQoKICAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICBib29sIHdpdGhpblBlcmlvZCA9IGZhbHNlOwogICAgIGlmIChub3cgPj0gUFJFX0lDT19TVEFSVF9USU1FICYmIG5vdyA8PSBQUkVfSUNPX0VORF9USU1FICYmICFjcm93ZFNhbGVTdG9wKSB7CiAgICAgICAgd2l0aGluUGVyaW9kID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChub3cgPj0gSUNPX1NUQVJUX1RJTUUgJiYgbm93IDw9IElDT19FTkRfVElNRSAmJiAhY3Jvd2RTYWxlU3RvcCkgewogICAgICAgIHdpdGhpblBlcmlvZCA9IHRydWU7CiAgICAgIH0KICAgICBib29sIG5vblplcm9QdXJjaGFzZSA9IG1zZy52YWx1ZSA+IDA7CiAgICAgIAogICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlOwogICB9CgogICAgZnVuY3Rpb24gc3RvcENyb3dkU2FsZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICBjcm93ZFNhbGVTdG9wID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydENyb3dkU2FsZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICBjcm93ZFNhbGVTdG9wID0gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlQ3Jvd2RTYWxlRGF0ZXModWludDggX3BlcmlvZCwgdWludDI1NiBfdW5peFRpbWUpIG9ubHlPd25lciBwdWJsaWMgewogICAgICByZXF1aXJlKF9wZXJpb2QgPiAwICYmIF91bml4VGltZSA+IDApOwoKICAgICAgaWYgKF9wZXJpb2QgPT0gMSkgewogICAgICAgIFBSRV9JQ09fU1RBUlRfVElNRSA9IF91bml4VGltZTsKICAgICAgICBDaGFuZ2VDcm93ZFNhbGVEYXRlKF9wZXJpb2QsIF91bml4VGltZSk7CiAgICAgIH0gZWxzZSBpZiAoX3BlcmlvZCA9PSAyKSB7CiAgICAgICAgUFJFX0lDT19FTkRfVElNRSA9IF91bml4VGltZTsKICAgICAgICBDaGFuZ2VDcm93ZFNhbGVEYXRlKF9wZXJpb2QsIF91bml4VGltZSk7CiAgICAgIH0gZWxzZSBpZiAoX3BlcmlvZCA9PSAzKSB7CiAgICAgICAgUFJFX0lDT19CT05VU19USU1FXzEgPSBfdW5peFRpbWU7CiAgICAgICAgQ2hhbmdlQ3Jvd2RTYWxlRGF0ZShfcGVyaW9kLCBfdW5peFRpbWUpOwogICAgICB9IGVsc2UgaWYgKF9wZXJpb2QgPT0gNCkgewoKUFJFX0lDT19CT05VU19USU1FXzIgPSBfdW5peFRpbWU7CiAgICAgICAgQ2hhbmdlQ3Jvd2RTYWxlRGF0ZShfcGVyaW9kLCBfdW5peFRpbWUpOwogICAgICB9IGVsc2UgaWYgKF9wZXJpb2QgPT0gNSkgewogICAgICAgIFBSRV9JQ09fQk9OVVNfVElNRV8zID0gX3VuaXhUaW1lOwogICAgICAgIENoYW5nZUNyb3dkU2FsZURhdGUoX3BlcmlvZCwgX3VuaXhUaW1lKTsKICAgICAgfSBlbHNlIGlmIChfcGVyaW9kID09IDYpIHsKICAgICAgICBJQ09fU1RBUlRfVElNRSA9IF91bml4VGltZTsKICAgICAgICBDaGFuZ2VDcm93ZFNhbGVEYXRlKF9wZXJpb2QsIF91bml4VGltZSk7CiAgICAgIH0gZWxzZSBpZiAoX3BlcmlvZCA9PSA3KSB7CiAgICAgICAgSUNPX0VORF9USU1FID0gX3VuaXhUaW1lOwogICAgICAgIENoYW5nZUNyb3dkU2FsZURhdGUoX3BlcmlvZCwgX3VuaXhUaW1lKTsKICAgICAgfSBlbHNlIGlmIChfcGVyaW9kID09IDgpIHsKICAgICAgICBJQ09fQk9OVVNfVElNRV8xID0gX3VuaXhUaW1lOwogICAgICAgIENoYW5nZUNyb3dkU2FsZURhdGUoX3BlcmlvZCwgX3VuaXhUaW1lKTsKICAgICAgfSBlbHNlIGlmIChfcGVyaW9kID09IDkpIHsKICAgICAgICBJQ09fQk9OVVNfVElNRV8yID0gX3VuaXhUaW1lOwogICAgICAgIENoYW5nZUNyb3dkU2FsZURhdGUoX3BlcmlvZCwgX3VuaXhUaW1lKTsKICAgICAgfSBlbHNlIGlmIChfcGVyaW9kID09IDEwKSB7CiAgICAgICAgSUNPX0JPTlVTX1RJTUVfMyA9IF91bml4VGltZTsKICAgICAgICBDaGFuZ2VDcm93ZFNhbGVEYXRlKF9wZXJpb2QsIF91bml4VGltZSk7CiAgICAgIH0gCiAgICB9CgogICAgZnVuY3Rpb24gc2V0U2VjcmV0Qm9udXNGYWN0b3IodWludDI1NiBfZmFjdG9yKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgcmVxdWlyZShfZmFjdG9yID49IDApOwoKICAgICAgU0VDUkVUX0JPTlVTX0ZBQ1RPUiA9IF9mYWN0b3I7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoYW5nZU1hbGxjb2luVG9rZW5BZGRyZXNzKGFkZHJlc3MgX3Rva2VuKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgcmVxdWlyZShfdG9rZW4gIT0gYWRkcmVzcygwKSk7CgogICAgICB0b2tlbiA9IE1hbGxjb2luVG9rZW4oX3Rva2VuKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmaW5pc2hDcm93ZFNhbGUoKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgY3Jvd2RTYWxlU3RvcCA9IHRydWU7CiAgICAgIHRlYW1Ub2tlbkZ1bmQgPSB0b2tlblNhbGVzLmRpdigxMDApLm11bCgxMCk7IC8vIFRlYW0gZnVuZCAxMCUKICAgICAgYm91bnR5VG9rZW5GdW5kID0gdG9rZW5TYWxlcy5kaXYoMTAwKS5tdWwoNyk7IC8vIEJvdW50eSBmdW5kIDclOwogICAgICByZXNlcnZlVG9rZW5GdW5kID0gdG9rZW5TYWxlcy5kaXYoMTAwKS5tdWwoOSk7IC8vIFJlc2VydmUgZnVuZCA5JTsKCiAgICAgIHVpbnQyNTYgdG9rZW5zRnVuZCA9IHRlYW1Ub2tlbkZ1bmQuYWRkKGJvdW50eVRva2VuRnVuZCkuYWRkKHJlc2VydmVUb2tlbkZ1bmQpOwogICAgICB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgdG9rZW4uY3JlYXRlVG9rZW4od2FsbGV0LCB0b2tlbnNGdW5kKTsKCiAgICAgIHJldHVybiB0cnVlOwogICAgfQp9'.
	

]
