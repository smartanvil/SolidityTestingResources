Class {
	#name : #SRTe3cc697219a23cdc24df5a3b7f35497b8f3f153a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe3cc697219a23cdc24df5a3b7f35497b8f3f153a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogSU93bmVyc2hpcAogKgogKiBQZXJtaW5lbnQgb3duZXJzaGlwCiAqCiAqICNjcmVhdGVkIDAxLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJT3duZXJzaGlwIHsKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIEdldHMgdGhlIGN1cnJlbnQgb3duZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIGFkZHJlc3MgVGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBwdWJsaWMgdmlldyByZXR1cm5zIChhZGRyZXNzKTsKfQoKCi8qKgogKiBPd25lcnNoaXAKICoKICogUGVybWluZW50IG93bmVyc2hpcAogKgogKiAjY3JlYXRlZCAwMS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwpjb250cmFjdCBPd25lcnNoaXAgaXMgSU93bmVyc2hpcCB7CgogICAgLy8gT3duZXIKICAgIGFkZHJlc3MgaW50ZXJuYWwgb3duZXI7CgoKICAgIC8qKgogICAgICogQWNjZXNzIGlzIHJlc3RyaWN0ZWQgdG8gdGhlIGN1cnJlbnQgb3duZXIKICAgICAqLwogICAgbW9kaWZpZXIgb25seV9vd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgoKICAgIC8qKgogICAgICogVGhlIHB1Ymxpc2hlciBpcyB0aGUgaW5pdGFsIG93bmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIE93bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBgX2FjY291bnRgIGlzIHRoZSBjdXJyZW50IG93bmVyCiAgICAgKgogICAgICogQHBhcmFtIF9hY2NvdW50IFRoZSBhZGRyZXNzIHRvIHRlc3QgYWdhaW5zdAogICAgICovCiAgICBmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gX2FjY291bnQgPT0gb3duZXI7CiAgICB9CgoKICAgIC8qKgogICAgICogR2V0cyB0aGUgY3VycmVudCBvd25lcgogICAgICoKICAgICAqIEByZXR1cm4gYWRkcmVzcyBUaGUgY3VycmVudCBvd25lcgogICAgICovCiAgICBmdW5jdGlvbiBnZXRPd25lcigpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXI7CiAgICB9Cn0KCgovKioKICogSVRyYW5zZmVyYWJsZU93bmVyc2hpcAogKgogKiBFbmhhbmNlcyBvd25lcnNoaXAgYnkgYWxsb3dpbmcgdGhlIGN1cnJlbnQgb3duZXIgdG8gCiAqIHRyYW5zZmVyIG93bmVyc2hpcCB0byBhIG5ldyBvd25lcgogKgogKiAjY3JlYXRlZCAwMS8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwppbnRlcmZhY2UgSVRyYW5zZmVyYWJsZU93bmVyc2hpcCB7CiAgICAKCiAgICAvKioKICAgICAqIFRyYW5zZmVyIG93bmVyc2hpcCB0byBgX25ld093bmVyYAogICAgICoKICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgdGhhdCB3aWxsIGJlY29tZSB0aGUgbmV3IG93bmVyIAogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIF9uZXdPd25lcikgcHVibGljOwp9CgoKCi8qKgogKiBUcmFuc2ZlcmFibGVPd25lcnNoaXAKICoKICogRW5oYW5jZXMgb3duZXJzaGlwIGJ5IGFsbG93aW5nIHRoZSBjdXJyZW50IG93bmVyIHRvIAogKiB0cmFuc2ZlciBvd25lcnNoaXAgdG8gYSBuZXcgb3duZXIKICoKICogI2NyZWF0ZWQgMDEvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgVHJhbnNmZXJhYmxlT3duZXJzaGlwIGlzIElUcmFuc2ZlcmFibGVPd25lcnNoaXAsIE93bmVyc2hpcCB7CgoKICAgIC8qKgogICAgICogVHJhbnNmZXIgb3duZXJzaGlwIHRvIGBfbmV3T3duZXJgCiAgICAgKgogICAgICogQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0aGF0IHdpbGwgYmVjb21lIHRoZSBuZXcgb3duZXIgCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgb3duZXIgPSBfbmV3T3duZXI7CiAgICB9Cn0KCgovKioKICogSUF1dGhlbnRpY2F0b3IgCiAqCiAqIEF1dGhlbnRpY2F0b3IgaW50ZXJmYWNlCiAqCiAqICNjcmVhdGVkIDE1LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJQXV0aGVudGljYXRvciB7CiAgICAKCiAgICAvKioKICAgICAqIEF1dGhlbnRpY2F0ZSAKICAgICAqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYF9hY2NvdW50YCBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdAogICAgICoKICAgICAqIEBwYXJhbSBfYWNjb3VudCBUaGUgYWNjb3VudCB0byBhdXRoZW50aWNhdGUKICAgICAqIEByZXR1cm4gd2hldGhlciBgX2FjY291bnRgIGlzIHN1Y2Nlc3NmdWxseSBhdXRoZW50aWNhdGVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShhZGRyZXNzIF9hY2NvdW50KSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKfQoKCi8qKgogKiBJQXV0aGVudGljYXRpb25NYW5hZ2VyIAogKgogKiBBbGxvd3MgdGhlIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3MgdG8gYmUgZW5hYmxlZCBhbmQgZGlzYWJsZWQKICoKICogI2NyZWF0ZWQgMTUvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KaW50ZXJmYWNlIElBdXRoZW50aWNhdGlvbk1hbmFnZXIgewogICAgCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYXV0aGVudGljYXRpb24gaXMgZW5hYmxlZCBhbmQgZmFsc2UgCiAgICAgKiBvdGhlcndpc2UKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGNvbnZlcnRlciBpcyBjdXJyZW50bHkgYXV0aGVudGljYXRpbmcgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzQXV0aGVudGljYXRpbmcoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBFbmFibGUgYXV0aGVudGljYXRpb24KICAgICAqLwogICAgZnVuY3Rpb24gZW5hYmxlQXV0aGVudGljYXRpb24oKSBwdWJsaWM7CgoKICAgIC8qKgogICAgICogRGlzYWJsZSBhdXRoZW50aWNhdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlQXV0aGVudGljYXRpb24oKSBwdWJsaWM7Cn0KCgovKioKICogRVJDMjAgY29tcGF0aWJsZSB0b2tlbiBpbnRlcmZhY2UKICoKICogLSBJbXBsZW1lbnRzIEVSQyAyMCBUb2tlbiBzdGFuZGFyZAogKiAtIEltcGxlbWVudHMgc2hvcnQgYWRkcmVzcyBhdHRhY2sgZml4CiAqCiAqICNjcmVhdGVkIDI5LzA5LzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJVG9rZW4geyAKCiAgICAvKiogCiAgICAgKiBHZXQgdGhlIHRvdGFsIHN1cHBseSBvZiB0b2tlbnMKICAgICAqIAogICAgICogQHJldHVybiBUaGUgdG90YWwgc3VwcGx5CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCk7CgoKICAgIC8qKiAKICAgICAqIEdldCBiYWxhbmNlIG9mIGBfb3duZXJgIAogICAgICogCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgICAqIEByZXR1cm4gVGhlIGJhbGFuY2UKICAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKCgogICAgLyoqIAogICAgICogU2VuZCBgX3ZhbHVlYCB0b2tlbiB0byBgX3RvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgICogCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKiAKICAgICAqIFNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogICAgICogCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCgogICAgLyoqIAogICAgICogYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgICAgKiAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgYXBwcm92ZWQgZm9yIHRyYW5zZmVyCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKiAKICAgICAqIEdldCB0aGUgYW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgdGhhdCBgX3NwZW5kZXJgIGlzIGFsbG93ZWQgdG8gc3BlbmQgZnJvbSBgX293bmVyYAogICAgICogCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IG93bmluZyB0b2tlbnMKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgICAqIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogICAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwp9CgoKLyoqCiAqIElNYW5hZ2VkVG9rZW4KICoKICogQWRkcyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGJhc2ljIEVSQzIwIHRva2VuCiAqIC0gTG9ja2luZwogKiAtIElzc3VpbmcKICogLSBCdXJuaW5nIAogKgogKiAjY3JlYXRlZCAyOS8wOS8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwppbnRlcmZhY2UgSU1hbmFnZWRUb2tlbiB7IAoKICAgIC8qKiAKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKiAKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdG9rZW4gaXMgbG9ja2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzTG9ja2VkKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogTG9ja3MgdGhlIHRva2VuIHNvIHRoYXQgdGhlIHRyYW5zZmVyaW5nIG9mIHZhbHVlIGlzIGRpc2FibGVkIAogICAgICoKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdW5sb2NraW5nIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBsb2NrKCkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKCiAgICAvKioKICAgICAqIFVubG9ja3MgdGhlIHRva2VuIHNvIHRoYXQgdGhlIHRyYW5zZmVyaW5nIG9mIHZhbHVlIGlzIGVuYWJsZWQgCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB1bmxvY2tpbmcgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICAgKi8KICAgIGZ1bmN0aW9uIHVubG9jaygpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBJc3N1ZXMgYF92YWx1ZWAgbmV3IHRva2VucyB0byBgX3RvYAogICAgICoKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gd2hpY2ggdGhlIHRva2VucyB3aWxsIGJlIGlzc3VlZAogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIG5ldyB0b2tlbnMgdG8gaXNzdWUKICAgICAqIEByZXR1cm4gV2hldGhlciB0aGUgdG9rZW5zIHdoZXJlIHN1Y2Vzc2Z1bGx5IGlzc3VlZCBvciBub3QKICAgICAqLwogICAgZnVuY3Rpb24gaXNzdWUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8qKgogICAgICogQnVybnMgYF92YWx1ZWAgdG9rZW5zIG9mIGBfZnJvbWAKICAgICAqCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3MgdGhhdCBvd25zIHRoZSB0b2tlbnMgdG8gYmUgYnVybmVkCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGJ1cm5lZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbnMgd2hlcmUgc3VjZXNzZnVsbHkgYnVybmVkIG9yIG5vdCAKICAgICAqLwogICAgZnVuY3Rpb24gYnVybihhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwp9CgoKLyoqCiAqIElUb2tlblJldHJpZXZlcgogKgogKiBBbGxvd3MgdG9rZW5zIHRvIGJlIHJldHJpZXZlZCBmcm9tIGEgY29udHJhY3QKICoKICogI2NyZWF0ZWQgMjkvMDkvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KaW50ZXJmYWNlIElUb2tlblJldHJpZXZlciB7CgogICAgLyoqCiAgICAgKiBFeHRyYWN0cyB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWM7Cn0KCgovKioKICogVG9rZW5SZXRyaWV2ZXIKICoKICogQWxsb3dzIHRva2VucyB0byBiZSByZXRyaWV2ZWQgZnJvbSBhIGNvbnRyYWN0CiAqCiAqICNjcmVhdGVkIDE4LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFRva2VuUmV0cmlldmVyIGlzIElUb2tlblJldHJpZXZlciB7CgogICAgLyoqCiAgICAgKiBFeHRyYWN0cyB0b2tlbnMgZnJvbSB0aGUgY29udHJhY3QKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWMgewogICAgICAgIElUb2tlbiB0b2tlbkluc3RhbmNlID0gSVRva2VuKF90b2tlbkNvbnRyYWN0KTsKICAgICAgICB1aW50IHRva2VuQmFsYW5jZSA9IHRva2VuSW5zdGFuY2UuYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIGlmICh0b2tlbkJhbGFuY2UgPiAwKSB7CiAgICAgICAgICAgIHRva2VuSW5zdGFuY2UudHJhbnNmZXIobXNnLnNlbmRlciwgdG9rZW5CYWxhbmNlKTsKICAgICAgICB9CiAgICB9Cn0KCgovKioKICogSVRva2VuT2JzZXJ2ZXIKICoKICogQWxsb3dzIGEgdG9rZW4gc21hcnQtY29udHJhY3QgdG8gbm90aWZ5IG9ic2VydmVycyAKICogd2hlbiB0b2tlbnMgYXJlIHJlY2VpdmVkCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJVG9rZW5PYnNlcnZlciB7CgoKICAgIC8qKgogICAgICogQ2FsbGVkIGJ5IHRoZSBvYnNlcnZlZCB0b2tlbiBzbWFydC1jb250cmFjdCBpbiBvcmRlciAKICAgICAqIHRvIG5vdGlmeSB0aGUgdG9rZW4gb2JzZXJ2ZXIgd2hlbiB0b2tlbnMgYXJlIHJlY2VpdmVkCiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSBhZGRyZXNzIHRoYXQgdGhlIHRva2VucyB3aGVyZSBzZW5kIGZyb20KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCB3YXMgcmVjZWl2ZWQKICAgICAqLwogICAgZnVuY3Rpb24gbm90aWZ5VG9rZW5zUmVjZWl2ZWQoYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIHB1YmxpYzsKfQoKCi8qKgogKiBUb2tlbk9ic2VydmVyCiAqCiAqIEFsbG93cyBvYnNlcnZlcnMgdG8gYmUgbm90aWZpZWQgYnkgYW4gb2JzZXJ2ZWQgdG9rZW4gc21hcnQtY29udHJhY3QKICogd2hlbiB0b2tlbnMgYXJlIHJlY2VpdmVkCiAqCiAqICNjcmVhdGVkIDA5LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFRva2VuT2JzZXJ2ZXIgaXMgSVRva2VuT2JzZXJ2ZXIgewoKCiAgICAvKioKICAgICAqIENhbGxlZCBieSB0aGUgb2JzZXJ2ZWQgdG9rZW4gc21hcnQtY29udHJhY3QgaW4gb3JkZXIgCiAgICAgKiB0byBub3RpZnkgdGhlIHRva2VuIG9ic2VydmVyIHdoZW4gdG9rZW5zIGFyZSByZWNlaXZlZAogICAgICoKICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWRkcmVzcyB0aGF0IHRoZSB0b2tlbnMgd2hlcmUgc2VuZCBmcm9tCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgd2FzIHJlY2VpdmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIG5vdGlmeVRva2Vuc1JlY2VpdmVkKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIG9uVG9rZW5zUmVjZWl2ZWQobXNnLnNlbmRlciwgX2Zyb20sIF92YWx1ZSk7CiAgICB9CgoKICAgIC8qKgogICAgICogRXZlbnQgaGFuZGxlcgogICAgICogCiAgICAgKiBDYWxsZWQgYnkgYF90b2tlbmAgd2hlbiBhIHRva2VuIGFtb3VudCBpcyByZWNlaXZlZAogICAgICoKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIHRva2VuIGNvbnRyYWN0IHRoYXQgcmVjZWl2ZWQgdGhlIHRyYW5zYWN0aW9uCiAgICAgKiBAcGFyYW0gX2Zyb20gVGhlIGFjY291bnQgb3IgY29udHJhY3QgdGhhdCBzZW5kIHRoZSB0cmFuc2FjdGlvbgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgdmFsdWUgb2YgdG9rZW5zIHRoYXQgd2hlcmUgcmVjZWl2ZWQKICAgICAqLwogICAgZnVuY3Rpb24gb25Ub2tlbnNSZWNlaXZlZChhZGRyZXNzIF90b2tlbiwgYWRkcmVzcyBfZnJvbSwgdWludCBfdmFsdWUpIGludGVybmFsOwp9CgoKLyoqCiAqIElQYXVzYWJsZQogKgogKiBTaW1wbGUgaW50ZXJmYWNlIHRvIHBhdXNlIGFuZCByZXN1bWUgCiAqCiAqICNjcmVhdGVkIDExLzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmludGVyZmFjZSBJUGF1c2FibGUgewoKCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaW1wbGVtZW50aW5nIGNvbnRyYWN0IGlzIAogICAgICogY3VycmVudGx5IHBhdXNlZCBvciBub3QKICAgICAqCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIHBhdXNlZCBzdGF0ZSBpcyBhY3RpdmUKICAgICAqLwogICAgZnVuY3Rpb24gaXNQYXVzZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHN0YXRlIHRvIHBhdXNlZAogICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYzsKCgogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHN0YXRlIHRvIHJlc3VtZSwgdW5kbyB0aGUgZWZmZWN0cyAKICAgICAqIG9mIGNhbGxpbmcgcGF1c2UKICAgICAqLwogICAgZnVuY3Rpb24gcmVzdW1lKCkgcHVibGljOwp9CgoKLyoqCiAqIElUb2tlbkNoYW5nZXIKICoKICogQmFzaWMgdG9rZW4gY2hhbmdlciBwdWJsaWMgaW50ZXJmYWNlIAogKgogKiAjY3JlYXRlZCAwNi8xMC8yMDE3CiAqICNhdXRob3IgRnJhbmsgQm9ubmV0CiAqLwppbnRlcmZhY2UgSVRva2VuQ2hhbmdlciB7CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmICdfdG9rZW4nIGlzIG9uIG9mIHRoZSB0b2tlbnMgdGhhdCBhcmUgCiAgICAgKiBtYW5hZ2VkIGJ5IHRoaXMgdG9rZW4gY2hhbmdlcgogICAgICogCiAgICAgKiBAcGFyYW0gX3Rva2VuIFRoZSBhZGRyZXNzIGJlaW5nIHRlc3RlZAogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSAnX3Rva2VuJyBpcyBwYXJ0IG9mIHRoaXMgdG9rZW4gY2hhbmdlcgogICAgICovCiAgICBmdW5jdGlvbiBpc1Rva2VuKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKTsKCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBsZWZ0IHRva2VuCiAgICAgKgogICAgICogQHJldHVybiBMZWZ0IHRva2VuIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TGVmdFRva2VuKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyk7CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgcmlnaHQgdG9rZW4KICAgICAqCiAgICAgKiBAcmV0dXJuIFJpZ2h0IHRva2VuIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmlnaHRUb2tlbigpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpOwoKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGZlZSB0aGF0IGlzIHBhaWQgaW4gdG9rZW5zIHdoZW4gdXNpbmcgCiAgICAgKiB0aGUgdG9rZW4gY2hhbmdlcgogICAgICoKICAgICAqIEByZXR1cm4gVGhlIHBlcmNlbnRhZ2Ugb2YgdG9rZW5zIHRoYXQgaXMgY2hhcmdlZAogICAgICovCiAgICBmdW5jdGlvbiBnZXRGZWUoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKCiAgICAKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgcmF0ZSB0aGF0IGlzIHVzZWQgdG8gY2hhbmdlIGJldHdlZW4gdG9rZW5zCiAgICAgKgogICAgICogQHJldHVybiBUaGUgcmF0ZSB1c2VkIHdoZW4gY2hhbmdpbmcgdG9rZW5zCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjaXNpb24gb2YgdGhlIHJhdGUgYW5kIGZlZSBwYXJhbXMKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBhbW91bnQgb2YgZGVjaW1hbHMgdXNlZAogICAgICovCiAgICBmdW5jdGlvbiBnZXRQcmVjaXNpb24oKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KTsKCgogICAgLyoqCiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBmZWUgYmFzZWQgb24gYF92YWx1ZWAgb2YgdG9rZW5zCiAgICAgKgogICAgICogQHJldHVybiBUaGUgYWN0dWFsIGZlZQogICAgICovCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVGZWUodWludCBfdmFsdWUpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpOwp9CgoKLyoqCiAqIFRva2VuQ2hhbmdlcgogKgogKiBQcm92aWRlcyBhIGdlbmVyaWMgd2F5IHRvIGNvbnZlcnQgYmV0d2VlbiB0d28gdG9rZW5zIHVzaW5nIGEgZml4ZWQgCiAqIHJhdGlvIGFuZCBhbiBvcHRpb25hbCBmZWUuCiAqCiAqICNjcmVhdGVkIDA2LzEwLzIwMTcKICogI2F1dGhvciBGcmFuayBCb25uZXQKICovCmNvbnRyYWN0IFRva2VuQ2hhbmdlciBpcyBJVG9rZW5DaGFuZ2VyLCBJUGF1c2FibGUgewoKICAgIElNYW5hZ2VkVG9rZW4gcHJpdmF0ZSB0b2tlbkxlZnQ7IC8vIHRva2VuTGVmdCA9IHRva2VuUmlnaHQgKiByYXRlIC8gcHJlY2lzaW9uCiAgICBJTWFuYWdlZFRva2VuIHByaXZhdGUgdG9rZW5SaWdodDsgLy8gdG9rZW5SaWdodCA9IHRva2VuTGVmdCAvIHJhdGUgKiBwcmVjaXNpb24KCiAgICB1aW50IHByaXZhdGUgcmF0ZTsgLy8gUmF0aW8gYmV0d2VlbiB0b2tlbnMKICAgIHVpbnQgcHJpdmF0ZSBmZWU7IC8vIFBlcmNlbnRhZ2UgbG9zdCBpbiB0cmFuc2ZlcgogICAgdWludCBwcml2YXRlIHByZWNpc2lvbjsgLy8gUHJlY2lzaW9uIAogICAgYm9vbCBwcml2YXRlIHBhdXNlZDsgLy8gUGF1c2VkIHN0YXRlCiAgICBib29sIHByaXZhdGUgYnVybjsgLy8gV2hldGhlciB0aGUgY2hhbmdlciBzaG91bGQgYnVybiB0b2tlbnMKCgogICAgLyoqCiAgICAgKiBPbmx5IGlmICdfdG9rZW4nIGlzIHRoZSBsZWZ0IG9yIHJpZ2h0IHRva2VuIAogICAgICogdGhhdCBvZiB0aGUgdG9rZW4gY2hhbmdlcgogICAgICovCiAgICBtb2RpZmllciBpc190b2tlbihhZGRyZXNzIF90b2tlbikgewogICAgICAgIHJlcXVpcmUoX3Rva2VuID09IGFkZHJlc3ModG9rZW5MZWZ0KSB8fCBfdG9rZW4gPT0gYWRkcmVzcyh0b2tlblJpZ2h0KSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgdG9rZW4gY2hhbmdlcgogICAgICoKICAgICAqIEBwYXJhbSBfdG9rZW5MZWZ0IFJlZiB0byB0aGUgJ2xlZnQnIHRva2VuIHNtYXJ0LWNvbnRyYWN0CiAgICAgKiBAcGFyYW0gX3Rva2VuUmlnaHQgUmVmIHRvIHRoZSAncmlnaHQnIHRva2VuIHNtYXJ0LWNvbnRyYWN0CiAgICAgKiBAcGFyYW0gX3JhdGUgVGhlIHJhdGUgdXNlZCB3aGVuIGNoYW5naW5nIHRva2VucwogICAgICogQHBhcmFtIF9mZWUgVGhlIHBlcmNlbnRhZ2Ugb2YgdG9rZW5zIHRoYXQgaXMgY2hhcmdlZAogICAgICogQHBhcmFtIF9kZWNpbWFscyBUaGUgYW1vdW50IG9mIGRlY2ltYWxzIHVzZWQgZm9yIF9yYXRlIGFuZCBfZmVlCiAgICAgKiBAcGFyYW0gX3BhdXNlZCBXaGV0aGVyIHRoZSB0b2tlbiBjaGFuZ2VyIHN0YXJ0cyBpbiB0aGUgcGF1c2VkIHN0YXRlIG9yIG5vdAogICAgICogQHBhcmFtIF9idXJuIFdoZXRoZXIgdGhlIGNoYW5nZXIgc2hvdWxkIGJ1cm4gdG9rZW5zIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBUb2tlbkNoYW5nZXIoYWRkcmVzcyBfdG9rZW5MZWZ0LCBhZGRyZXNzIF90b2tlblJpZ2h0LCB1aW50IF9yYXRlLCB1aW50IF9mZWUsIHVpbnQgX2RlY2ltYWxzLCBib29sIF9wYXVzZWQsIGJvb2wgX2J1cm4pIHB1YmxpYyB7CiAgICAgICAgdG9rZW5MZWZ0ID0gSU1hbmFnZWRUb2tlbihfdG9rZW5MZWZ0KTsKICAgICAgICB0b2tlblJpZ2h0ID0gSU1hbmFnZWRUb2tlbihfdG9rZW5SaWdodCk7CiAgICAgICAgcmF0ZSA9IF9yYXRlOwogICAgICAgIGZlZSA9IF9mZWU7CiAgICAgICAgcHJlY2lzaW9uID0gX2RlY2ltYWxzID4gMCA/IDEwKipfZGVjaW1hbHMgOiAxOwogICAgICAgIHBhdXNlZCA9IF9wYXVzZWQ7CiAgICAgICAgYnVybiA9IF9idXJuOwogICAgfQoKICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgJ190b2tlbicgaXMgb24gb2YgdGhlIHRva2VucyB0aGF0IGFyZSAKICAgICAqIG1hbmFnZWQgYnkgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKiAKICAgICAqIEBwYXJhbSBfdG9rZW4gVGhlIGFkZHJlc3MgYmVpbmcgdGVzdGVkCiAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlICdfdG9rZW4nIGlzIHBhcnQgb2YgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzVG9rZW4oYWRkcmVzcyBfdG9rZW4pIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gX3Rva2VuID09IGFkZHJlc3ModG9rZW5MZWZ0KSB8fCBfdG9rZW4gPT0gYWRkcmVzcyh0b2tlblJpZ2h0KTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzIG9mIHRoZSBsZWZ0IHRva2VuCiAgICAgKgogICAgICogQHJldHVybiBMZWZ0IHRva2VuIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TGVmdFRva2VuKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJldHVybiB0b2tlbkxlZnQ7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyBvZiB0aGUgcmlnaHQgdG9rZW4KICAgICAqCiAgICAgKiBAcmV0dXJuIFJpZ2h0IHRva2VuIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmlnaHRUb2tlbigpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gdG9rZW5SaWdodDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBmZWUgdGhhdCBpcyBwYWlkIGluIHRva2VucyB3aGVuIHVzaW5nIAogICAgICogdGhlIHRva2VuIGNoYW5nZXIKICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBwZXJjZW50YWdlIG9mIHRva2VucyB0aGF0IGlzIGNoYXJnZWQKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0RmVlKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBmZWU7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgcmF0ZSB0aGF0IGlzIHVzZWQgdG8gY2hhbmdlIGJldHdlZW4gdG9rZW5zCiAgICAgKgogICAgICogQHJldHVybiBUaGUgcmF0ZSB1c2VkIHdoZW4gY2hhbmdpbmcgdG9rZW5zCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhdGU7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgcHJlY2lzaW9uIG9mIHRoZSByYXRlIGFuZCBmZWUgcGFyYW1zCiAgICAgKgogICAgICogQHJldHVybiBUaGUgYW1vdW50IG9mIGRlY2ltYWxzIHVzZWQKICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UHJlY2lzaW9uKCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBwcmVjaXNpb247CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSB0b2tlbiBjaGFuZ2VyIGlzIGN1cnJlbnRseSAKICAgICAqIHBhdXNlZCBvciBub3QuIFdoaWxlIGJlaW5nIGluIHRoZSBwYXVzZWQgc3RhdGUgCiAgICAgKiB0aGUgY29udHJhY3Qgc2hvdWxkIHJldmVydCB0aGUgdHJhbnNhY3Rpb24gaW5zdGVhZCAKICAgICAqIG9mIGNvbnZlcnRpbmcgdG9rZW5zCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSB0b2tlbiBjaGFuZ2VyIGlzIGluIHRoZSBwYXVzZWQgc3RhdGUKICAgICAqLwogICAgZnVuY3Rpb24gaXNQYXVzZWQoKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHBhdXNlZDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBQYXVzZSB0aGUgdG9rZW4gY2hhbmdlciBtYWtpbmcgdGhlIGNvbnRyYWN0IAogICAgICogcmV2ZXJ0IHRoZSB0cmFuc2FjdGlvbiBpbnN0ZWFkIG9mIGNvbnZlcnRpbmcgCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBhdXNlKCkgcHVibGljIHsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgfQoKCiAgICAvKioKICAgICAqIFJlc3VtZSB0aGUgdG9rZW4gY2hhbmdlciBtYWtpbmcgdGhlIGNvbnRyYWN0IAogICAgICogY29udmVydCB0b2tlbnMgaW5zdGVhZCBvZiByZXZlcnRpbmcgdGhlIHRyYW5zYWN0aW9uIAogICAgICovCiAgICBmdW5jdGlvbiByZXN1bWUoKSBwdWJsaWMgewogICAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgfQoKCiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgYW5kIHJldHVybnMgdGhlIGZlZSBiYXNlZCBvbiBgX3ZhbHVlYCBvZiB0b2tlbnMKICAgICAqCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgaXMgYmVpbmcgY29udmVydGVkCiAgICAgKiBAcmV0dXJuIFRoZSBhY3R1YWwgZmVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUZlZSh1aW50IF92YWx1ZSkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBmZWUgPT0gMCA/IDAgOiBfdmFsdWUgKiBmZWUgLyBwcmVjaXNpb247CiAgICB9CgoKICAgIC8qKgogICAgICogQ29udmVydHMgdG9rZW5zIGJ5IGJ1cm5pbmcgdGhlIHRva2VucyByZWNlaXZlZCBhdCB0aGUgdG9rZW4gc21hcnQtY29udGFjdCAKICAgICAqIGxvY2F0ZWQgYXQgYF9mcm9tYCBhbmQgYnkgaXNzdWluZyB0b2tlbnMgYXQgdGhlIG9wcG9zaXRlIHRva2VuIHNtYXJ0LWNvbnRyYWN0CiAgICAgKgogICAgICogQHBhcmFtIF9mcm9tIFRoZSB0b2tlbiBzbWFydC1jb250cmFjdCB0aGF0IHJlY2VpdmVkIHRoZSB0b2tlbnMKICAgICAqIEBwYXJhbSBfc2VuZGVyIFRoZSBhY2NvdW50IHRoYXQgc2VuZCB0aGUgdG9rZW5zICh0b2tlbiBvd25lcikKICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCB3aGVyZSByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBjb252ZXJ0KGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3NlbmRlciwgdWludCBfdmFsdWUpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKCFwYXVzZWQpOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIHVpbnQgYW1vdW50VG9Jc3N1ZTsKICAgICAgICBpZiAoX2Zyb20gPT0gYWRkcmVzcyh0b2tlbkxlZnQpKSB7CiAgICAgICAgICAgIGFtb3VudFRvSXNzdWUgPSBfdmFsdWUgKiByYXRlIC8gcHJlY2lzaW9uOwogICAgICAgICAgICB0b2tlblJpZ2h0Lmlzc3VlKF9zZW5kZXIsIGFtb3VudFRvSXNzdWUgLSBjYWxjdWxhdGVGZWUoYW1vdW50VG9Jc3N1ZSkpOwogICAgICAgICAgICBpZiAoYnVybikgewogICAgICAgICAgICAgICAgdG9rZW5MZWZ0LmJ1cm4odGhpcywgX3ZhbHVlKTsKICAgICAgICAgICAgfSAgIAogICAgICAgIH0gCiAgICAgICAgCiAgICAgICAgZWxzZSBpZiAoX2Zyb20gPT0gYWRkcmVzcyh0b2tlblJpZ2h0KSkgewogICAgICAgICAgICBhbW91bnRUb0lzc3VlID0gX3ZhbHVlICogcHJlY2lzaW9uIC8gcmF0ZTsKICAgICAgICAgICAgdG9rZW5MZWZ0Lmlzc3VlKF9zZW5kZXIsIGFtb3VudFRvSXNzdWUgLSBjYWxjdWxhdGVGZWUoYW1vdW50VG9Jc3N1ZSkpOwogICAgICAgICAgICBpZiAoYnVybikgewogICAgICAgICAgICAgICAgdG9rZW5SaWdodC5idXJuKHRoaXMsIF92YWx1ZSk7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQogICAgfQp9CgoKLyoqCiAqIEFUTSBUb2tlbiBDaGFuZ2VyCiAqCiAqIFRoaXMgY29udHJhY3Qgb2YgdGhpcyB0b2tlbiBjaGFuZ2VyIHdpbGwgYWxsb3cgYW55b25lIHdpdGggYSBjdXJyZW50IGJhbGFuY2Ugb2YgQVRNLCAKICogdG8gZGVwb3NpdCBpdCBhbmQgaW4gcmV0dXJuIHJlY2VpdmUgS0FUWCwgb3IgS0FUTS4KICoKICogS0FUTSBtYWludGFpbmluZyB0aGUgcHJpbWFyeSBzZWN1cml0eSBmdW5jdGlvbnMgb2YgdGhlIEtBVE0gdG9rZW4gYXMgCiAqIG91dGxpbmVkIHdpdGhpbiB0aGUgd2hpdGVwYXBlci4KICoKICogS0FUWCBhcyBpbmRpY2F0ZWQgYnkgaXRzIOKAmFjigJkgZGVzaWduYXRpb24gaXMgdGhlIHV0aWxpdHkgdG9rZW4gZm9yIHRob3NlIHdobyBhcmUgdW5kZXIgc3RyaWN0IAogKiBjb21wbGlhbmNlIHdpdGhpbiB0aGVpciBjb3VudHJ5IG9mIHJlc2lkZW5jZSwgYW5kIGRvZXMgbm90IGVudGl0bGUgaG9sZGVycyB0byBwcm9maXQgc2hhcmluZy4KICoKICogI2NyZWF0ZWQgMzAvMTAvMjAxNwogKiAjYXV0aG9yIEZyYW5rIEJvbm5ldAogKi8KY29udHJhY3QgS0FUTVRva2VuQ2hhbmdlciBpcyBUb2tlbkNoYW5nZXIsIFRva2VuT2JzZXJ2ZXIsIFRyYW5zZmVyYWJsZU93bmVyc2hpcCwgVG9rZW5SZXRyaWV2ZXIsIElBdXRoZW50aWNhdGlvbk1hbmFnZXIgewoKICAgIGVudW0gU3RhZ2VzIHsKICAgICAgICBEZXBsb3lpbmcsCiAgICAgICAgRGVwbG95ZWQKICAgIH0KCiAgICBTdGFnZXMgcHVibGljIHN0YWdlOwoKICAgIC8vIEF1dGhlbnRpY2F0aW9uCiAgICBJQXV0aGVudGljYXRvciBwcml2YXRlIGF1dGhlbnRpY2F0b3I7CiAgICBib29sIHByaXZhdGUgcmVxdWlyZUF1dGhlbnRpY2F0aW9uOwoKCiAgICAvKioKICAgICAqIFRocm93IGlmIGF0IHN0YWdlIG90aGVyIHRoYW4gY3VycmVudCBzdGFnZQogICAgICogCiAgICAgKiBAcGFyYW0gX3N0YWdlIGV4cGVjdGVkIHN0YWdlIHRvIHRlc3QgZm9yCiAgICAgKi8KICAgIG1vZGlmaWVyIGF0X3N0YWdlKFN0YWdlcyBfc3RhZ2UpIHsKICAgICAgICByZXF1aXJlKHN0YWdlID09IF9zdGFnZSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBUaHJvdyBpZiBub3QgYXV0aGVudGljYXRlZAogICAgICogCiAgICAgKiBAcGFyYW0gX2FjY291bnQgVGhlIGFjY291bnQgdGhhdCBpcyBhdXRoZW50aWNhdGVkCiAgICAgKi8KICAgIG1vZGlmaWVyIGF1dGhlbnRpY2F0ZShhZGRyZXNzIF9hY2NvdW50KSB7CiAgICAgICAgcmVxdWlyZSghcmVxdWlyZUF1dGhlbnRpY2F0aW9uIHx8IGF1dGhlbnRpY2F0b3IuYXV0aGVudGljYXRlKF9hY2NvdW50KSk7CiAgICAgICAgXzsKICAgIH0KCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgU2VjdXJpdHkgLSBVdGlsaXR5IHRva2VuIGNoYW5nZXIKICAgICAqCiAgICAgKiBAcGFyYW0gX3NlY3VyaXR5IFJlZiB0byB0aGUgU2VjdXJpdHkgdG9rZW4gc21hcnQtY29udHJhY3QKICAgICAqIEBwYXJhbSBfdXRpbGl0eSBSZWYgdG8gdGhlIFV0aWx0aXkgdG9rZW4gc21hcnQtY29udHJhY3QKICAgICAqLwogICAgZnVuY3Rpb24gS0FUTVRva2VuQ2hhbmdlcihhZGRyZXNzIF9zZWN1cml0eSwgYWRkcmVzcyBfdXRpbGl0eSkgcHVibGljCiAgICAgICAgVG9rZW5DaGFuZ2VyKF9zZWN1cml0eSwgX3V0aWxpdHksIDgwMDAsIDUwMCwgNCwgZmFsc2UsIHRydWUpIHsKICAgICAgICBzdGFnZSA9IFN0YWdlcy5EZXBsb3lpbmc7CiAgICB9CgoKICAgIC8qKgogICAgICogU2V0dXAgYXV0aGVudGljYXRpb24KICAgICAqCiAgICAgKiBAcGFyYW0gX2F1dGhlbnRpY2F0b3IgVGhlIGFkZHJlc3Mgb2YgdGhlIGF1dGhlbnRpY2F0b3IgKHdoaXRlbGlzdCkKICAgICAqIEBwYXJhbSBfcmVxdWlyZUF1dGhlbnRpY2F0aW9uIFdldGhlciB0aGUgY3Jvd2RhbGUgcmVxdWlyZXMgY29udHJpYnV0b3JzIHRvIGJlIGF1dGhlbnRpY2F0ZWQKICAgICAqLwogICAgZnVuY3Rpb24gc2V0dXBXaGl0ZWxpc3QoYWRkcmVzcyBfYXV0aGVudGljYXRvciwgYm9vbCBfcmVxdWlyZUF1dGhlbnRpY2F0aW9uKSBwdWJsaWMgb25seV9vd25lciBhdF9zdGFnZShTdGFnZXMuRGVwbG95aW5nKSB7CiAgICAgICAgYXV0aGVudGljYXRvciA9IElBdXRoZW50aWNhdG9yKF9hdXRoZW50aWNhdG9yKTsKICAgICAgICByZXF1aXJlQXV0aGVudGljYXRpb24gPSBfcmVxdWlyZUF1dGhlbnRpY2F0aW9uOwogICAgfQoKCiAgICAvKioKICAgICAqIEFmdGVyIGNhbGxpbmcgdGhlIGRlcGxveSBmdW5jdGlvbiB0aGUgY3Jvd2RzYWxlCiAgICAgKiBydWxlcyBiZWNvbWUgaW1tdXRhYmxlIAogICAgICovCiAgICBmdW5jdGlvbiBkZXBsb3koKSBwdWJsaWMgb25seV9vd25lciBhdF9zdGFnZShTdGFnZXMuRGVwbG95aW5nKSB7CiAgICAgICAgc3RhZ2UgPSBTdGFnZXMuRGVwbG95ZWQ7CiAgICB9CgoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQgYW5kIGZhbHNlIAogICAgICogb3RoZXJ3aXNlCiAgICAgKgogICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBjb252ZXJ0ZXIgaXMgY3VycmVudGx5IGF1dGhlbnRpY2F0aW5nIG9yIG5vdAogICAgICovCiAgICBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0aW5nKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiByZXF1aXJlQXV0aGVudGljYXRpb247CiAgICB9CgoKICAgIC8qKgogICAgICogRW5hYmxlIGF1dGhlbnRpY2F0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVuYWJsZUF1dGhlbnRpY2F0aW9uKCkgcHVibGljIG9ubHlfb3duZXIgewogICAgICAgIHJlcXVpcmVBdXRoZW50aWNhdGlvbiA9IHRydWU7CiAgICB9CgoKICAgIC8qKgogICAgICogRGlzYWJsZSBhdXRoZW50aWNhdGlvbgogICAgICovCiAgICBmdW5jdGlvbiBkaXNhYmxlQXV0aGVudGljYXRpb24oKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgcmVxdWlyZUF1dGhlbnRpY2F0aW9uID0gZmFsc2U7CiAgICB9CgoKICAgIC8qKgogICAgICogUGF1c2UgdGhlIHRva2VuIGNoYW5nZXIgbWFraW5nIHRoZSBjb250cmFjdCAKICAgICAqIHJldmVydCB0aGUgdHJhbnNhY3Rpb24gaW5zdGVhZCBvZiBjb252ZXJ0aW5nIAogICAgICovCiAgICBmdW5jdGlvbiBwYXVzZSgpIHB1YmxpYyBvbmx5X293bmVyIHsKICAgICAgICBzdXBlci5wYXVzZSgpOwogICAgfQoKCiAgICAvKioKICAgICAqIFJlc3VtZSB0aGUgdG9rZW4gY2hhbmdlciBtYWtpbmcgdGhlIGNvbnRyYWN0IAogICAgICogY29udmVydCB0b2tlbnMgaW5zdGVhZCBvZiByZXZlcnRpbmcgdGhlIHRyYW5zYWN0aW9uIAogICAgICovCiAgICBmdW5jdGlvbiByZXN1bWUoKSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgc3VwZXIucmVzdW1lKCk7CiAgICB9CgoKICAgIC8qKgogICAgICogRXZlbnQgaGFuZGxlciB0aGF0IGluaXRpYWxpemVzIHRoZSB0b2tlbiBjb252ZXJzaW9uCiAgICAgKiAKICAgICAqIENhbGxlZCBieSBgX3Rva2VuYCB3aGVuIGEgdG9rZW4gYW1vdW50IGlzIHJlY2VpdmVkIG9uIAogICAgICogdGhlIGFkZHJlc3Mgb2YgdGhpcyB0b2tlbiBjaGFuZ2VyCiAgICAgKgogICAgICogQHBhcmFtIF90b2tlbiBUaGUgdG9rZW4gY29udHJhY3QgdGhhdCByZWNlaXZlZCB0aGUgdHJhbnNhY3Rpb24KICAgICAqIEBwYXJhbSBfZnJvbSBUaGUgYWNjb3VudCBvciBjb250cmFjdCB0aGF0IHNlbmQgdGhlIHRyYW5zYWN0aW9uCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSB2YWx1ZSBvZiB0b2tlbnMgdGhhdCB3aGVyZSByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBvblRva2Vuc1JlY2VpdmVkKGFkZHJlc3MgX3Rva2VuLCBhZGRyZXNzIF9mcm9tLCB1aW50IF92YWx1ZSkgaW50ZXJuYWwgaXNfdG9rZW4oX3Rva2VuKSBhdXRoZW50aWNhdGUoX2Zyb20pIGF0X3N0YWdlKFN0YWdlcy5EZXBsb3llZCkgewogICAgICAgIHJlcXVpcmUoX3Rva2VuID09IG1zZy5zZW5kZXIpOwogICAgICAgIAogICAgICAgIC8vIENvbnZlcnQgdG9rZW5zCiAgICAgICAgY29udmVydChfdG9rZW4sIF9mcm9tLCBfdmFsdWUpOwogICAgfQoKCiAgICAvKioKICAgICAqIEZhaWxzYWZlIG1lY2hhbmlzbQogICAgICogCiAgICAgKiBBbGxvd3MgdGhlIG93bmVyIHRvIHJldHJpZXZlIHRva2VucyBmcm9tIHRoZSBjb250cmFjdCB0aGF0IAogICAgICogbWlnaHQgaGF2ZSBiZWVuIHNlbmQgdGhlcmUgYnkgYWNjaWRlbnQKICAgICAqCiAgICAgKiBAcGFyYW0gX3Rva2VuQ29udHJhY3QgVGhlIGFkZHJlc3Mgb2YgRVJDMjAgY29tcGF0aWJsZSB0b2tlbgogICAgICovCiAgICBmdW5jdGlvbiByZXRyaWV2ZVRva2VucyhhZGRyZXNzIF90b2tlbkNvbnRyYWN0KSBwdWJsaWMgb25seV9vd25lciB7CiAgICAgICAgc3VwZXIucmV0cmlldmVUb2tlbnMoX3Rva2VuQ29udHJhY3QpOwogICAgfQoKCiAgICAvKioKICAgICAqIFByZXZlbnRzIHRoZSBhY2NpZGVudGFsIHNlbmRpbmcgb2YgZXRoZXIKICAgICAqLwogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHJldmVydCgpOwogICAgfQp9'.
	

]
