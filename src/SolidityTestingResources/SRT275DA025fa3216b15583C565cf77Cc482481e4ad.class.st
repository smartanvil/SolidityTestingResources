Class {
	#name : #SRT275DA025fa3216b15583C565cf77Cc482481e4ad,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT275DA025fa3216b15583C565cf77Cc482481e4ad >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvb3duZXJzaGlwL3JiYWMvUm9sZXMuc29sCgovKioKICogQHRpdGxlIFJvbGVzCiAqIEBhdXRob3IgRnJhbmNpc2NvIEdpb3JkYW5vIChAZnJhbmdpbykKICogQGRldiBMaWJyYXJ5IGZvciBtYW5hZ2luZyBhZGRyZXNzZXMgYXNzaWduZWQgdG8gYSBSb2xlLgogKiAgICAgIFNlZSBSQkFDLnNvbCBmb3IgZXhhbXBsZSB1c2FnZS4KICovCmxpYnJhcnkgUm9sZXMgewogICAgc3RydWN0IFJvbGUgewogICAgICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgYmVhcmVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBnaXZlIGFuIGFkZHJlc3MgYWNjZXNzIHRvIHRoaXMgcm9sZQogICAgICovCiAgICBmdW5jdGlvbiBhZGQoUm9sZSBzdG9yYWdlIHJvbGUsIGFkZHJlc3MgYWRkcikKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIHJvbGUuYmVhcmVyW2FkZHJdID0gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgcmVtb3ZlIGFuIGFkZHJlc3MnIGFjY2VzcyB0byB0aGlzIHJvbGUKICAgICAqLwogICAgZnVuY3Rpb24gcmVtb3ZlKFJvbGUgc3RvcmFnZSByb2xlLCBhZGRyZXNzIGFkZHIpCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICByb2xlLmJlYXJlclthZGRyXSA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBjaGVjayBpZiBhbiBhZGRyZXNzIGhhcyB0aGlzIHJvbGUKICAgICAqIC8vIHJldmVydHMKICAgICAqLwogICAgZnVuY3Rpb24gY2hlY2soUm9sZSBzdG9yYWdlIHJvbGUsIGFkZHJlc3MgYWRkcikKICAgICAgICB2aWV3CiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICByZXF1aXJlKGhhcyhyb2xlLCBhZGRyKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IGNoZWNrIGlmIGFuIGFkZHJlc3MgaGFzIHRoaXMgcm9sZQogICAgICogQHJldHVybiBib29sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhcyhSb2xlIHN0b3JhZ2Ugcm9sZSwgYWRkcmVzcyBhZGRyKQogICAgICAgIHZpZXcKICAgICAgICBpbnRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuIHJvbGUuYmVhcmVyW2FkZHJdOwogICAgfQp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvb3duZXJzaGlwL3JiYWMvUkJBQy5zb2wKCi8qKgogKiBAdGl0bGUgUkJBQyAoUm9sZS1CYXNlZCBBY2Nlc3MgQ29udHJvbCkKICogQGF1dGhvciBNYXR0IENvbmRvbiAoQFNocnVncykKICogQGRldiBTdG9yZXMgYW5kIHByb3ZpZGVzIHNldHRlcnMgYW5kIGdldHRlcnMgZm9yIHJvbGVzIGFuZCBhZGRyZXNzZXMuCiAqICAgICAgU3VwcG9ydHMgdW5saW1pdGVkIG51bWJlcnMgb2Ygcm9sZXMgYW5kIGFkZHJlc3Nlcy4KICogICAgICBTZWUgLy9jb250cmFjdHMvZXhhbXBsZXMvUkJBQ0V4YW1wbGUuc29sIGZvciBhbiBleGFtcGxlIG9mIHVzYWdlLgogKiBUaGlzIFJCQUMgbWV0aG9kIHVzZXMgc3RyaW5ncyB0byBrZXkgcm9sZXMuIEl0IG1heSBiZSBiZW5lZmljaWFsCiAqICBmb3IgeW91IHRvIHdyaXRlIHlvdXIgb3duIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgaW50ZXJmYWNlIHVzaW5nIEVudW1zIG9yIHNpbWlsYXIuCiAqIEl0J3MgYWxzbyByZWNvbW1lbmRlZCB0aGF0IHlvdSBkZWZpbmUgY29uc3RhbnRzIGluIHRoZSBjb250cmFjdCwgbGlrZSBST0xFX0FETUlOIGJlbG93LAogKiAgdG8gYXZvaWQgdHlwb3MuCiAqLwpjb250cmFjdCBSQkFDIHsKICAgIHVzaW5nIFJvbGVzIGZvciBSb2xlcy5Sb2xlOwoKICAgIG1hcHBpbmcgKHN0cmluZyA9PiBSb2xlcy5Sb2xlKSBwcml2YXRlIHJvbGVzOwoKICAgIGV2ZW50IFJvbGVBZGRlZChhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSk7CiAgICBldmVudCBSb2xlUmVtb3ZlZChhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSk7CgogICAgLyoqCiAgICAgKiBBIGNvbnN0YW50IHJvbGUgbmFtZSBmb3IgaW5kaWNhdGluZyBhZG1pbnMuCiAgICAgKi8KICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgUk9MRV9BRE1JTiA9ICJhZG1pbiI7CgogICAgLyoqCiAgICAgKiBAZGV2IGNvbnN0cnVjdG9yLiBTZXRzIG1zZy5zZW5kZXIgYXMgYWRtaW4gYnkgZGVmYXVsdAogICAgICovCiAgICBmdW5jdGlvbiBSQkFDKCkKICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICBhZGRSb2xlKG1zZy5zZW5kZXIsIFJPTEVfQURNSU4pOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBhZGQgYSByb2xlIHRvIGFuIGFkZHJlc3MKICAgICAqIEBwYXJhbSBhZGRyIGFkZHJlc3MKICAgICAqIEBwYXJhbSByb2xlTmFtZSB0aGUgbmFtZSBvZiB0aGUgcm9sZQogICAgICovCiAgICBmdW5jdGlvbiBhZGRSb2xlKGFkZHJlc3MgYWRkciwgc3RyaW5nIHJvbGVOYW1lKQogICAgICAgIGludGVybmFsCiAgICB7CiAgICAgICAgcm9sZXNbcm9sZU5hbWVdLmFkZChhZGRyKTsKICAgICAgICBSb2xlQWRkZWQoYWRkciwgcm9sZU5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiByZW1vdmUgYSByb2xlIGZyb20gYW4gYWRkcmVzcwogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHJlbW92ZVJvbGUoYWRkcmVzcyBhZGRyLCBzdHJpbmcgcm9sZU5hbWUpCiAgICAgICAgaW50ZXJuYWwKICAgIHsKICAgICAgICByb2xlc1tyb2xlTmFtZV0ucmVtb3ZlKGFkZHIpOwogICAgICAgIFJvbGVSZW1vdmVkKGFkZHIsIHJvbGVOYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgcmV2ZXJ0cyBpZiBhZGRyIGRvZXMgbm90IGhhdmUgcm9sZQogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICAgKiAvLyByZXZlcnRzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNoZWNrUm9sZShhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSkKICAgICAgICB2aWV3CiAgICAgICAgcHVibGljCiAgICB7CiAgICAgICAgcm9sZXNbcm9sZU5hbWVdLmNoZWNrKGFkZHIpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBkZXRlcm1pbmUgaWYgYWRkciBoYXMgcm9sZQogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICAgKiBAcmV0dXJuIGJvb2wKICAgICAqLwogICAgZnVuY3Rpb24gaGFzUm9sZShhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSkKICAgICAgICB2aWV3CiAgICAgICAgcHVibGljCiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gcm9sZXNbcm9sZU5hbWVdLmhhcyhhZGRyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgYWRkIGEgcm9sZSB0byBhbiBhZGRyZXNzCiAgICAgKiBAcGFyYW0gYWRkciBhZGRyZXNzCiAgICAgKiBAcGFyYW0gcm9sZU5hbWUgdGhlIG5hbWUgb2YgdGhlIHJvbGUKICAgICAqLwogICAgZnVuY3Rpb24gYWRtaW5BZGRSb2xlKGFkZHJlc3MgYWRkciwgc3RyaW5nIHJvbGVOYW1lKQogICAgICAgIG9ubHlBZG1pbgogICAgICAgIHB1YmxpYwogICAgewogICAgICAgIGFkZFJvbGUoYWRkciwgcm9sZU5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiByZW1vdmUgYSByb2xlIGZyb20gYW4gYWRkcmVzcwogICAgICogQHBhcmFtIGFkZHIgYWRkcmVzcwogICAgICogQHBhcmFtIHJvbGVOYW1lIHRoZSBuYW1lIG9mIHRoZSByb2xlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFkbWluUmVtb3ZlUm9sZShhZGRyZXNzIGFkZHIsIHN0cmluZyByb2xlTmFtZSkKICAgICAgICBvbmx5QWRtaW4KICAgICAgICBwdWJsaWMKICAgIHsKICAgICAgICByZW1vdmVSb2xlKGFkZHIsIHJvbGVOYW1lKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBAZGV2IG1vZGlmaWVyIHRvIHNjb3BlIGFjY2VzcyB0byBhIHNpbmdsZSByb2xlICh1c2VzIG1zZy5zZW5kZXIgYXMgYWRkcikKICAgICAqIEBwYXJhbSByb2xlTmFtZSB0aGUgbmFtZSBvZiB0aGUgcm9sZQogICAgICogLy8gcmV2ZXJ0cwogICAgICovCiAgICBtb2RpZmllciBvbmx5Um9sZShzdHJpbmcgcm9sZU5hbWUpCiAgICB7CiAgICAgICAgY2hlY2tSb2xlKG1zZy5zZW5kZXIsIHJvbGVOYW1lKTsKICAgICAgICBfOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBtb2RpZmllciB0byBzY29wZSBhY2Nlc3MgdG8gYWRtaW5zCiAgICAgKiAvLyByZXZlcnRzCiAgICAgKi8KICAgIG1vZGlmaWVyIG9ubHlBZG1pbigpCiAgICB7CiAgICAgICAgY2hlY2tSb2xlKG1zZy5zZW5kZXIsIFJPTEVfQURNSU4pOwogICAgICAgIF87CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IG1vZGlmaWVyIHRvIHNjb3BlIGFjY2VzcyB0byBhIHNldCBvZiByb2xlcyAodXNlcyBtc2cuc2VuZGVyIGFzIGFkZHIpCiAgICAgKiBAcGFyYW0gcm9sZU5hbWVzIHRoZSBuYW1lcyBvZiB0aGUgcm9sZXMgdG8gc2NvcGUgYWNjZXNzIHRvCiAgICAgKiAvLyByZXZlcnRzCiAgICAgKgogICAgICogQFRPRE8gLSB3aGVuIHNvbGlkaXR5IHN1cHBvcnRzIGR5bmFtaWMgYXJyYXlzIGFzIGFyZ3VtZW50cyB0byBtb2RpZmllcnMsIHByb3ZpZGUgdGhpcwogICAgICogIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL3NvbGlkaXR5L2lzc3Vlcy8yNDY3CiAgICAgKi8KICAgIC8vIG1vZGlmaWVyIG9ubHlSb2xlcyhzdHJpbmdbXSByb2xlTmFtZXMpIHsKICAgIC8vICAgICBib29sIGhhc0FueVJvbGUgPSBmYWxzZTsKICAgIC8vICAgICBmb3IgKHVpbnQ4IGkgPSAwOyBpIDwgcm9sZU5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAvLyAgICAgICAgIGlmIChoYXNSb2xlKG1zZy5zZW5kZXIsIHJvbGVOYW1lc1tpXSkpIHsKICAgIC8vICAgICAgICAgICAgIGhhc0FueVJvbGUgPSB0cnVlOwogICAgLy8gICAgICAgICAgICAgYnJlYWs7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICB9CgogICAgLy8gICAgIHJlcXVpcmUoaGFzQW55Um9sZSk7CgogICAgLy8gICAgIF87CiAgICAvLyB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy9tYXRoL1NhZmVNYXRoLnNvbAoKLyoqCiAqIEB0aXRsZSBTYWZlTWF0aAogKiBAZGV2IE1hdGggb3BlcmF0aW9ucyB3aXRoIHNhZmV0eSBjaGVja3MgdGhhdCB0aHJvdyBvbiBlcnJvcgogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL3Rva2VuL0VSQzIwQmFzaWMuc29sCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvdG9rZW4vQmFzaWNUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL3Rva2VuL0J1cm5hYmxlVG9rZW4uc29sCgovKioKICogQHRpdGxlIEJ1cm5hYmxlIFRva2VuCiAqIEBkZXYgVG9rZW4gdGhhdCBjYW4gYmUgaXJyZXZlcnNpYmx5IGJ1cm5lZCAoZGVzdHJveWVkKS4KICovCmNvbnRyYWN0IEJ1cm5hYmxlVG9rZW4gaXMgQmFzaWNUb2tlbiB7CgogICAgZXZlbnQgQnVybihhZGRyZXNzIGluZGV4ZWQgYnVybmVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgdG9rZW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIGJ1cm5lZC4KICAgICAqLwogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CiAgICAgICAgLy8gbm8gbmVlZCB0byByZXF1aXJlIHZhbHVlIDw9IHRvdGFsU3VwcGx5LCBzaW5jZSB0aGF0IHdvdWxkIGltcGx5IHRoZQogICAgICAgIC8vIHNlbmRlcidzIGJhbGFuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b3RhbFN1cHBseSwgd2hpY2ggKnNob3VsZCogYmUgYW4gYXNzZXJ0aW9uIGZhaWx1cmUKCiAgICAgICAgYWRkcmVzcyBidXJuZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW2J1cm5lcl0gPSBiYWxhbmNlc1tidXJuZXJdLnN1YihfdmFsdWUpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihidXJuZXIsIF92YWx1ZSk7CiAgICB9Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9FUkMyMC5zb2wKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8vIEZpbGU6IHplcHBlbGluLXNvbGlkaXR5L2NvbnRyYWN0cy90b2tlbi9TdGFuZGFyZFRva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBTdGFuZGFyZCBFUkMyMCB0b2tlbgogKgogKiBAZGV2IEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNpYyBzdGFuZGFyZCB0b2tlbi4KICogQGRldiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICogQGRldiBCYXNlZCBvbiBjb2RlIGJ5IEZpcnN0Qmxvb2Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9GaXJzdGJsb29kaW8vdG9rZW4vYmxvYi9tYXN0ZXIvc21hcnRfY29udHJhY3QvRmlyc3RCbG9vZFRva2VuLnNvbAogKi8KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgaW50ZXJuYWwgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqCiAgICogQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQgc29tZW9uZSBtYXkgdXNlIGJvdGggdGhlIG9sZAogICAqIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZSB0cmFuc2FjdGlvbiBvcmRlcmluZy4gT25lIHBvc3NpYmxlIHNvbHV0aW9uIHRvIG1pdGlnYXRlIHRoaXMKICAgKiByYWNlIGNvbmRpdGlvbiBpcyB0byBmaXJzdCByZWR1Y2UgdGhlIHNwZW5kZXIncyBhbGxvd2FuY2UgdG8gMCBhbmQgc2V0IHRoZSBkZXNpcmVkIHZhbHVlIGFmdGVyd2FyZHM6CiAgICogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZ5aW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlsYWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIEBkZXYgSW5jcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfYWRkZWRWYWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBpbmNyZWFzZSB0aGUgYWxsb3dhbmNlIGJ5LgogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRGVjcmVhc2UgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhdCBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGRlY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3VidHJhY3RlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGRlY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9zdWJ0cmFjdGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9EVUJJLnNvbAoKY29udHJhY3QgRFVCSSBpcyBTdGFuZGFyZFRva2VuLCBCdXJuYWJsZVRva2VuLCBSQkFDIHsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiRGVjZW50cmFsaXplZCBVbml2ZXJzYWwgQmFzaWMgSW5jb21lIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJEVUJJIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICBzdHJpbmcgY29uc3RhbnQgcHVibGljIFJPTEVfTUlOVCA9ICJtaW50IjsKCiAgZXZlbnQgTWludExvZyhhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKCiAgZnVuY3Rpb24gRFVCSSgpIHB1YmxpYyB7CiAgICB0b3RhbFN1cHBseSA9IDA7CiAgfQoKICAvLyB1c2VkIGJ5IGNvbnRyYWN0cyB0byBtaW50IERVQkkgdG9rZW5zCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBleHRlcm5hbCBvbmx5Um9sZShST0xFX01JTlQpIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAvLyBsb2dzCiAgICBNaW50TG9nKF90bywgX2Ftb3VudCk7CiAgICBUcmFuc2ZlcigweDAsIF90bywgX2Ftb3VudCk7CiAgICAKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL1B1cnBvc2Uuc29sCgpjb250cmFjdCBQdXJwb3NlIGlzIFN0YW5kYXJkVG9rZW4sIEJ1cm5hYmxlVG9rZW4sIFJCQUMgewogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJQdXJwb3NlIjsKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJQUlBTIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKICBzdHJpbmcgY29uc3RhbnQgcHVibGljIFJPTEVfQlVSTiA9ICJidXJuIjsKICBzdHJpbmcgY29uc3RhbnQgcHVibGljIFJPTEVfVFJBTlNGRVIgPSAidHJhbnNmZXIiOwogIGFkZHJlc3MgcHVibGljIHN1cHBsaWVyOwoKICBmdW5jdGlvbiBQdXJwb3NlKGFkZHJlc3MgX3N1cHBsaWVyKSBwdWJsaWMgewogICAgc3VwcGxpZXIgPSBfc3VwcGxpZXI7CiAgICB0b3RhbFN1cHBseSA9IDEwMDAwMDAwMDAgZXRoZXI7CiAgICBiYWxhbmNlc1tzdXBwbGllcl0gPSB0b3RhbFN1cHBseTsKICB9CiAgCiAgLy8gdXNlZCBieSBidXJuZXIgY29udHJhY3QgdG8gYnVybiBhdGhlbmVzIHRva2VucwogIGZ1bmN0aW9uIHN1cHBseUJ1cm4odWludDI1NiBfdmFsdWUpIGV4dGVybmFsIG9ubHlSb2xlKFJPTEVfQlVSTikgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIGJhbGFuY2VzW3N1cHBsaWVyXSA9IGJhbGFuY2VzW3N1cHBsaWVyXS5zdWIoX3ZhbHVlKTsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CgogICAgLy8gbG9ncwogICAgQnVybihzdXBwbGllciwgX3ZhbHVlKTsKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIHVzZWQgYnkgaG9kbGVyIGNvbnRyYWN0IHRvIHRyYW5zZmVyIHVzZXJzIHRva2VucyB0byBpdAogIGZ1bmN0aW9uIGhvZGxlclRyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCBvbmx5Um9sZShST0xFX1RSQU5TRkVSKSByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF9mcm9tICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKCiAgICAvLyBob2RsZXIKICAgIGFkZHJlc3MgX2hvZGxlciA9IG1zZy5zZW5kZXI7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfaG9kbGVyXSA9IGJhbGFuY2VzW19ob2RsZXJdLmFkZChfdmFsdWUpOwoKICAgIC8vIGxvZ3MKICAgIFRyYW5zZmVyKF9mcm9tLCBfaG9kbGVyLCBfdmFsdWUpOwoKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL293bmVyc2hpcC9Pd25hYmxlLnNvbAoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSBwdWJsaWMgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgKi8KICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgoKICAvKioKICAgKiBAZGV2IEFsbG93cyB0aGUgY3VycmVudCBvd25lciB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld093bmVyLgogICAqIEBwYXJhbSBuZXdPd25lciBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBvd25lcnNoaXAgdG8uCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG5ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob3duZXIsIG5ld093bmVyKTsKICAgIG93bmVyID0gbmV3T3duZXI7CiAgfQoKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL3Rva2VuL1NhZmVFUkMyMC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZUVSQzIwCiAqIEBkZXYgV3JhcHBlcnMgYXJvdW5kIEVSQzIwIG9wZXJhdGlvbnMgdGhhdCB0aHJvdyBvbiBmYWlsdXJlLgogKiBUbyB1c2UgdGhpcyBsaWJyYXJ5IHlvdSBjYW4gYWRkIGEgYHVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjA7YCBzdGF0ZW1lbnQgdG8geW91ciBjb250cmFjdCwKICogd2hpY2ggYWxsb3dzIHlvdSB0byBjYWxsIHRoZSBzYWZlIG9wZXJhdGlvbnMgYXMgYHRva2VuLnNhZmVUcmFuc2ZlciguLi4pYCwgZXRjLgogKi8KbGlicmFyeSBTYWZlRVJDMjAgewogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlcihFUkMyMEJhc2ljIHRva2VuLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXIodG8sIHZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKEVSQzIwIHRva2VuLCBhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIGludGVybmFsIHsKICAgIGFzc2VydCh0b2tlbi50cmFuc2ZlckZyb20oZnJvbSwgdG8sIHZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiBzYWZlQXBwcm92ZShFUkMyMCB0b2tlbiwgYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQodG9rZW4uYXBwcm92ZShzcGVuZGVyLCB2YWx1ZSkpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0hvZGxlci5zb2wKCmNvbnRyYWN0IEhvZGxlciBpcyBPd25hYmxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICB1c2luZyBTYWZlRVJDMjAgZm9yIFB1cnBvc2U7CiAgdXNpbmcgU2FmZUVSQzIwIGZvciBEVUJJOwoKICBQdXJwb3NlIHB1YmxpYyBwdXJwb3NlOwogIERVQkkgcHVibGljIGR1Ymk7CgogIHN0cnVjdCBJdGVtIHsKICAgIHVpbnQyNTYgaWQ7CiAgICBhZGRyZXNzIGJlbmVmaWNpYXJ5OwogICAgdWludDI1NiB2YWx1ZTsKICAgIHVpbnQyNTYgcmVsZWFzZVRpbWU7CiAgICBib29sIGZ1bGZpbGxlZDsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQyNTYgPT4gSXRlbSkpIHByaXZhdGUgaXRlbXM7CgogIGZ1bmN0aW9uIEhvZGxlcihhZGRyZXNzIF9wdXJwb3NlLCBhZGRyZXNzIF9kdWJpKSBwdWJsaWMgewogICAgcmVxdWlyZShfcHVycG9zZSAhPSBhZGRyZXNzKDApKTsKCiAgICBwdXJwb3NlID0gUHVycG9zZShfcHVycG9zZSk7CiAgICBjaGFuZ2VEdWJpQWRkcmVzcyhfZHViaSk7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VEdWJpQWRkcmVzcyhhZGRyZXNzIF9kdWJpKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX2R1YmkgIT0gYWRkcmVzcygwKSk7CgogICAgZHViaSA9IERVQkkoX2R1YmkpOwogIH0KCiAgZnVuY3Rpb24gaG9kbCh1aW50MjU2IF9pZCwgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX21vbnRocykgZXh0ZXJuYWwgewogICAgcmVxdWlyZShfaWQgPiAwKTsKICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CiAgICAvLyBvbmx5IDMgdHlwZXMgYXJlIGFsbG93ZWQKICAgIHJlcXVpcmUoX21vbnRocyA9PSAzIHx8IF9tb250aHMgPT0gNiB8fCBfbW9udGhzID09IDEyKTsKCiAgICAvLyB1c2VyCiAgICBhZGRyZXNzIF91c2VyID0gbXNnLnNlbmRlcjsKCiAgICAvLyBnZXQgZHViaSBpdGVtCiAgICBJdGVtIHN0b3JhZ2UgaXRlbSA9IGl0ZW1zW191c2VyXVtfaWRdOwogICAgLy8gbWFrZSBzdXJlIGR1YmkgZG9lc250IGV4aXN0IGFscmVhZHkKICAgIHJlcXVpcmUoaXRlbS5pZCAhPSBfaWQpOwoKICAgIC8vIHR1cm4gbW9udGhzIHRvIHNlY29uZHMKICAgIHVpbnQyNTYgX3NlY29uZHMgPSBfbW9udGhzLm11bCgyNjI4MDAwKTsKICAgIC8vIGdldCByZWxlYXNlIHRpbWUKICAgIHVpbnQyNTYgX3JlbGVhc2VUaW1lID0gbm93LmFkZChfc2Vjb25kcyk7CiAgICByZXF1aXJlKF9yZWxlYXNlVGltZSA+IG5vdyk7CgogICAgLy8gY2hlY2sgaWYgdXNlciBoYXMgZW5vdWdoIGJhbGFuY2UKICAgIHVpbnQyNTYgYmFsYW5jZSA9IHB1cnBvc2UuYmFsYW5jZU9mKF91c2VyKTsKICAgIHJlcXVpcmUoYmFsYW5jZSA+PSBfdmFsdWUpOwoKICAgIC8vIGNhbGN1bGF0ZSBwZXJjZW50YWdlIHRvIG1pbnQgZm9yIHVzZXI6IDMgbW9udGhzID0gMSUgPT4gX21vbnRocyAvIDMgPSB4CiAgICB1aW50MjU2IHVzZXJQZXJjZW50YWdlID0gX21vbnRocy5kaXYoMyk7CiAgICAvLyBnZXQgZHViaSBhbW91bnQ6ID0+IChfdmFsdWUgKiB1c2VyUGVyY2VudGFnZSkgLyAxMDAKICAgIHVpbnQyNTYgdXNlckR1YmlBbW91bnQgPSBfdmFsdWUubXVsKHVzZXJQZXJjZW50YWdlKS5kaXYoMTAwKTsKCiAgICAvLyBjYWxjdWxhdGUgcGVyY2VudGFnZSAqIDEwMCB0byBtaW50IGZvciBvd25lcjogMyBtb250aHMgPSAwLjA1JSA9PiAoX21vbnRocyAqICgwLjA1ICogMTAwKSkgLyAzID0geCAqIDEwMAogICAgdWludDI1NiBvd25lclBlcmNlbnRhZ2UxMDAgPSBfbW9udGhzLm11bCg1KS5kaXYoMyk7CiAgICAvLyBnZXQgZHViaSBhbW91bnQ6ID0+IChfdmFsdWUgKiBvd25lclBlcmNlbnRhZ2UxMDApIC8gMTAwICogMTAwCiAgICB1aW50MjU2IG93bmVyRHViaUFtb3VudCA9IF92YWx1ZS5tdWwob3duZXJQZXJjZW50YWdlMTAwKS5kaXYoMTAwMDApOwoKICAgIC8vIHVwZGF0ZSBzdGF0ZQogICAgaXRlbXNbX3VzZXJdW19pZF0gPSBJdGVtKF9pZCwgX3VzZXIsIF92YWx1ZSwgX3JlbGVhc2VUaW1lLCBmYWxzZSk7CgogICAgLy8gdHJhbnNmZXIgdG9rZW5zIHRvIGhvZGxlcgogICAgYXNzZXJ0KHB1cnBvc2UuaG9kbGVyVHJhbnNmZXIoX3VzZXIsIF92YWx1ZSkpOwoKICAgIC8vIG1pbnQgdG9rZW5zIGZvciB1c2VyIGFuZCBvd25lcgogICAgYXNzZXJ0KGR1YmkubWludChfdXNlciwgdXNlckR1YmlBbW91bnQpKTsKICAgIGFzc2VydChkdWJpLm1pbnQob3duZXIsIG93bmVyRHViaUFtb3VudCkpOwogIH0KCiAgZnVuY3Rpb24gcmVsZWFzZSh1aW50MjU2IF9pZCkgZXh0ZXJuYWwgewogICAgcmVxdWlyZShfaWQgPiAwKTsKCiAgICAvLyB1c2VyCiAgICBhZGRyZXNzIF91c2VyID0gbXNnLnNlbmRlcjsKCiAgICAvLyBnZXQgaXRlbQogICAgSXRlbSBzdG9yYWdlIGl0ZW0gPSBpdGVtc1tfdXNlcl1bX2lkXTsKCiAgICAvLyBjaGVjayBpZiBpdCBleGlzdHMKICAgIHJlcXVpcmUoaXRlbS5pZCA9PSBfaWQpOwogICAgLy8gY2hlY2sgaWYgaXRzIG5vdCBhbHJlYWR5IGZ1bGZpbGxlZAogICAgcmVxdWlyZSghaXRlbS5mdWxmaWxsZWQpOwogICAgLy8gY2hlY2sgdGltZQogICAgcmVxdWlyZShub3cgPj0gaXRlbS5yZWxlYXNlVGltZSk7CgogICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgZW5vdWdoIHRva2VucwogICAgdWludDI1NiBiYWxhbmNlID0gcHVycG9zZS5iYWxhbmNlT2YodGhpcyk7CiAgICByZXF1aXJlKGJhbGFuY2UgPj0gaXRlbS52YWx1ZSk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICBpdGVtLmZ1bGZpbGxlZCA9IHRydWU7CgogICAgLy8gdHJhbnNmZXIgdG9rZW5zIHRvIGJlbmVmaWNpYXJ5CiAgICBwdXJwb3NlLnNhZmVUcmFuc2ZlcihpdGVtLmJlbmVmaWNpYXJ5LCBpdGVtLnZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIGdldEl0ZW0oYWRkcmVzcyBfdXNlciwgdWludDI1NiBfaWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYsIGFkZHJlc3MsIHVpbnQyNTYsIHVpbnQyNTYsIGJvb2wpIHsKICAgIEl0ZW0gc3RvcmFnZSBpdGVtID0gaXRlbXNbX3VzZXJdW19pZF07CgogICAgcmV0dXJuICgKICAgICAgaXRlbS5pZCwKICAgICAgaXRlbS5iZW5lZmljaWFyeSwKICAgICAgaXRlbS52YWx1ZSwKICAgICAgaXRlbS5yZWxlYXNlVGltZSwKICAgICAgaXRlbS5mdWxmaWxsZWQKICAgICk7CiAgfQp9CgovLyBGaWxlOiBjb250cmFjdHMvSG9kbEZvci5zb2wKCmNvbnRyYWN0IEhvZGxGb3IgaXMgT3duYWJsZSB7CiAgdXNpbmcgU2FmZUVSQzIwIGZvciBQdXJwb3NlOwogIHVzaW5nIFNhZmVFUkMyMCBmb3IgRFVCSTsKCiAgUHVycG9zZSBwdWJsaWMgcHVycG9zZTsKICBEVUJJIHB1YmxpYyBkdWJpOwogIEhvZGxlciBwdWJsaWMgaG9kbGVyOwoKICBzdHJ1Y3QgSXRlbSB7CiAgICB1aW50MjU2IGlkOwogICAgYWRkcmVzcyBjcmVhdG9yOwogICAgYWRkcmVzcyBiZW5lZmljaWFyeTsKICAgIGJvb2wgZnVsZmlsbGVkOwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcodWludDI1NiA9PiBJdGVtKSkgcHJpdmF0ZSBpdGVtczsKCiAgZnVuY3Rpb24gSG9kbEZvcihhZGRyZXNzIF9wdXJwb3NlLCBhZGRyZXNzIF9kdWJpLCBhZGRyZXNzIF9ob2RsZXIpIHB1YmxpYyB7CiAgICByZXF1aXJlKF9wdXJwb3NlICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfaG9kbGVyICE9IGFkZHJlc3MoMCkpOwoKICAgIHB1cnBvc2UgPSBQdXJwb3NlKF9wdXJwb3NlKTsKICAgIGNoYW5nZUR1YmlBZGRyZXNzKF9kdWJpKTsKICAgIGhvZGxlciA9IEhvZGxlcihfaG9kbGVyKTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUR1YmlBZGRyZXNzKGFkZHJlc3MgX2R1YmkpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShfZHViaSAhPSBhZGRyZXNzKDApKTsKCiAgICBkdWJpID0gRFVCSShfZHViaSk7CiAgfQoKICBmdW5jdGlvbiBob2RsKGFkZHJlc3MgX2JlbmVmaWNpYXJ5LCB1aW50MjU2IF9pZCwgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX21vbnRocykgZXh0ZXJuYWwgewogICAgcmVxdWlyZShfYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF9pZCA+IDApOwoKICAgIGFkZHJlc3MgX2NyZWF0b3IgPSBtc2cuc2VuZGVyOwoKICAgIC8vIGdldCBpdGVtCiAgICBJdGVtIHN0b3JhZ2UgaXRlbSA9IGl0ZW1zW19jcmVhdG9yXVtfaWRdOwogICAgLy8gbWFrZSBzdXJlIGl0ZW0gZG9lc250IGV4aXN0CiAgICByZXF1aXJlKGl0ZW0uaWQgIT0gX2lkKTsKCiAgICAvLyB1cGRhdGUgc3RhdGUKICAgIGl0ZW1zW19jcmVhdG9yXVtfaWRdID0gSXRlbShfaWQsIF9jcmVhdG9yLCBfYmVuZWZpY2lhcnksIGZhbHNlKTsKCiAgICAvLyBnZXQgdG9rZW5zIGZyb20gY3JlYXRvciB0byB0aGlzIGNvbnRyYWN0CiAgICBwdXJwb3NlLnNhZmVUcmFuc2ZlckZyb20oX2NyZWF0b3IsIHRoaXMsIF92YWx1ZSk7CiAgICAKICAgIC8vIGhvZGwgdG9rZW5zCiAgICBob2RsZXIuaG9kbChfaWQsIF92YWx1ZSwgX21vbnRocyk7CgogICAgLy8gc2VuZCBEVUJJIHRvIGJlbmVmaWNpYXJ5CiAgICB1aW50MjU2IGJhbGFuY2UgPSBkdWJpLmJhbGFuY2VPZih0aGlzKTsKICAgIGR1Ymkuc2FmZVRyYW5zZmVyKF9iZW5lZmljaWFyeSwgYmFsYW5jZSk7CiAgfQoKICBmdW5jdGlvbiByZWxlYXNlKGFkZHJlc3MgX2NyZWF0b3IsIHVpbnQyNTYgX2lkKSBleHRlcm5hbCB7CiAgICByZXF1aXJlKF9jcmVhdG9yICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfaWQgPiAwKTsKCiAgICBhZGRyZXNzIF9iZW5lZmljaWFyeSA9IG1zZy5zZW5kZXI7CgogICAgLy8gZ2V0IGl0ZW0KICAgIEl0ZW0gc3RvcmFnZSBpdGVtID0gaXRlbXNbX2NyZWF0b3JdW19pZF07CiAgICAvLyBjaGVjayBpZiBpdCBleGlzdHMKICAgIHJlcXVpcmUoaXRlbS5pZCA9PSBfaWQpOwogICAgLy8gY2hlY2sgaWYgaXRzIG5vdCBhbHJlYWR5IGZ1bGZpbGxlZAogICAgcmVxdWlyZSghaXRlbS5mdWxmaWxsZWQpOwogICAgLy8gY2hlY2sgaWYgYmVuZWZpY2lhcnkgaXMgc2FtZQogICAgcmVxdWlyZShpdGVtLmJlbmVmaWNpYXJ5ID09IF9iZW5lZmljaWFyeSk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICBpdGVtLmZ1bGZpbGxlZCA9IHRydWU7CgogICAgLy8gcmVsZWFzZSB0b2tlbnMgdG8gdGhpcyBjb250cmFjdAogICAgaG9kbGVyLnJlbGVhc2UoaXRlbS5pZCk7CgogICAgLy8gdHJhbnNmZXIgdG9rZW5zIGZyb20gdGhpcyBjb250cmFjdCB0byBiZW5lZmljaWFyeQogICAgdWludDI1NiBiYWxhbmNlID0gcHVycG9zZS5iYWxhbmNlT2YodGhpcyk7CiAgICBwdXJwb3NlLnNhZmVUcmFuc2ZlcihfYmVuZWZpY2lhcnksIGJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gZ2V0SXRlbShhZGRyZXNzIF9jcmVhdG9yLCB1aW50MjU2IF9pZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiwgYWRkcmVzcywgYWRkcmVzcywgYm9vbCkgewogICAgSXRlbSBzdG9yYWdlIGl0ZW0gPSBpdGVtc1tfY3JlYXRvcl1bX2lkXTsKCiAgICByZXR1cm4gKAogICAgICBpdGVtLmlkLAogICAgICBpdGVtLmNyZWF0b3IsCiAgICAgIGl0ZW0uYmVuZWZpY2lhcnksCiAgICAgIGl0ZW0uZnVsZmlsbGVkCiAgICApOwogIH0KfQ=='.
	

]
