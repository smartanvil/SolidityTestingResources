Class {
	#name : #SRT5FC677acf6f93A6ff9bAE139bA85aea0A246D24d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5FC677acf6f93A6ff9bAE139bA85aea0A246D24d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKCgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgRVJDMjAgewogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgCn0KCgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvKioKICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgKi8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAoKICAgIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICB1aW50MjU2IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9Cn0KCgogICAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgoKfQoKY29udHJhY3QgSFJBVG9rZW4gaXMgQmFzaWNUb2tlbiB7CgogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIkhFUkEiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9uYW1lIG9mIHRoZSB0b2tlbgogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2wgPSAiSFJBIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zeW1ib2wgb2YgdGhlIHRva2VuCiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RlY2ltYWxzCiAgICB1aW50MjU2IHB1YmxpYyBpbml0aWFsU3VwcGx5ID0gMzAwMDAwMDAgKiAxMCoqMTA7ICAgICAgICAgICAvL3RvdGFsIHN1cHBseSBvZiBUb2tlbnMKCiAgICAvL3ZhcmlhYmxlcwogICAgdWludDI1NiBwdWJsaWMgdG90YWxBbGxvY2F0ZWRUb2tlbnM7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyaWFibGUgdG8ga2VlcCB0cmFjayBvZiBmdW5kcyBhbGxvY2F0ZWQKICAgIHVpbnQyNTYgcHVibGljIHRva2Vuc0FsbG9jYXRlZFRvQ3Jvd2RGdW5kOyAgICAgICAgICAgICAgICAgICAvL2Z1bmRzIGFsbG9jYXRlZCB0byBjcm93ZGZ1bmQKCiAgICAvL2FkZHJlc3NlcwogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlck11bHRpU2lnQWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgLy9NdWx0aSBzaWduIGFkZHJlc3Mgb2YgZm91bmRlcgogICAgYWRkcmVzcyBwdWJsaWMgY3Jvd2RGdW5kQWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BZGRyZXNzIG9mIGNyb3dkZnVuZCBjb250cmFjdAoKICAgIC8vZXZlbnRzCiAgICBldmVudCBDaGFuZ2VGb3VuZGVyc1dhbGxldEFkZHJlc3ModWludDI1NiBfYmxvY2tUaW1lU3RhbXAsIGFkZHJlc3MgaW5kZXhlZCBfZm91bmRlcnNXYWxsZXRBZGRyZXNzKTsKICAgIAogICAgLy9tb2RpZmllcnNzCgogICAgbW9kaWZpZXIgbm9uWmVyb0FkZHJlc3MoYWRkcmVzcyBfdG8pewogICAgICAgIHJlcXVpcmUoX3RvICE9IDB4MCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Rm91bmRlcnMoKXsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZm91bmRlck11bHRpU2lnQWRkcmVzcyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5Q3Jvd2RmdW5kKCl7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNyb3dkRnVuZEFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgLy9jcmVhdGlvbiBvZiB0b2tlbiBjb250cmFjdAogICAgZnVuY3Rpb24gSFJBVG9rZW4oYWRkcmVzcyBfY3Jvd2RGdW5kQWRkcmVzcywgYWRkcmVzcyBfZm91bmRlck11bHRpU2lnQWRkcmVzcykgewogICAgICAgIGNyb3dkRnVuZEFkZHJlc3MgPSBfY3Jvd2RGdW5kQWRkcmVzczsKICAgICAgICBmb3VuZGVyTXVsdGlTaWdBZGRyZXNzID0gX2ZvdW5kZXJNdWx0aVNpZ0FkZHJlc3M7CgogICAgICAgIC8vIEFzc2lnbmVkIGJhbGFuY2VzIHRvIGNyb3dkZnVuZAogICAgICAgIGJhbGFuY2VzW2Nyb3dkRnVuZEFkZHJlc3NdID0gaW5pdGlhbFN1cHBseTsKICAgIH0KCiAgICAvL2Z1bmN0aW9uIHRvIGtlZXAgdHJhY2sgb2YgdGhlIHRvdGFsIHRva2VuIGFsbG9jYXRpb24KICAgIGZ1bmN0aW9uIGNoYW5nZVRvdGFsU3VwcGx5KHVpbnQyNTYgX2Ftb3VudCkgb25seUNyb3dkZnVuZCB7CiAgICAgICAgdG90YWxBbGxvY2F0ZWRUb2tlbnMgKz0gX2Ftb3VudDsKICAgIH0KCiAgICAvL2Z1bmN0aW9uIHRvIGNoYW5nZSBmb3VuZGVyIE11bHRpc2lnIHdhbGxldCBhZGRyZXNzCiAgICBmdW5jdGlvbiBjaGFuZ2VGb3VuZGVyTXVsdGlTaWdBZGRyZXNzKGFkZHJlc3MgX25ld0ZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MpIG9ubHlGb3VuZGVycyBub25aZXJvQWRkcmVzcyhfbmV3Rm91bmRlck11bHRpU2lnQWRkcmVzcykgewogICAgICAgIGZvdW5kZXJNdWx0aVNpZ0FkZHJlc3MgPSBfbmV3Rm91bmRlck11bHRpU2lnQWRkcmVzczsKICAgICAgICBDaGFuZ2VGb3VuZGVyc1dhbGxldEFkZHJlc3Mobm93LCBmb3VuZGVyTXVsdGlTaWdBZGRyZXNzKTsKICAgIH0KCn0KCmNvbnRyYWN0IEhSQUNyb3dkZnVuZCB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIEhSQVRva2VuIHB1YmxpYyB0b2tlbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUb2tlbiBjb250cmFjdCByZWZlcmVuY2UKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgZm91bmRlck11bFNpZ0FkZHJlc3M7ICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kZXJzIG11bHRpc2lnIGFkZHJlc3MKICAgIHVpbnQyNTYgcHVibGljIGV4Y2hhbmdlUmF0ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdG8gZmluZCB0b2tlbiB2YWx1ZSBhZ2FpbnN0IG9uZSBldGhlcgogICAgdWludDI1NiBwdWJsaWMgZXRoUmFpc2VkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdW50ZXIgdG8gdHJhY2sgdGhlIGFtb3VudCByYWlzZWQKICAgIGJvb2wgcHJpdmF0ZSB0b2tlbkRlcGxveWVkID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAvLyBGbGFnIHRvIHRyYWNrIHRoZSB0b2tlbiBkZXBsb3ltZW50IC0tIG9ubHkgY2FuIGJlIHNldCBvbmNlCiAgICB1aW50MjU2IHB1YmxpYyB0b2tlblNvbGQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnRlciB0byB0cmFjayB0aGUgYW1vdW50IG9mIHRva2VuIHNvbGQKICAgIHVpbnQyNTYgcHVibGljIG1hbnVhbFRyYW5zZmVyVG9rZW47ICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudGVyIHRvIHRyYWNrIHRoZSBhbW91bnQgb2YgbWFudWFsbHkgdHJhbmZlciB0b2tlbgogICAgdWludDI1NiBwdWJsaWMgdG9rZW5EaXN0cmlidXRlSW5EaXZpZGVuZDsgICAgICAgICAgICAgICAgIC8vIENvdW50ZXIgdG8gdHJhY2sgdGhlIGFtb3VudCBvZiB0b2tlbiBzaGFyZWQgdG8gaW52ZXN0b3JzCiAgICB1aW50OCBpbnRlcm5hbCBFWElTVFMgPSAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxhZyB0byB0cmFjayB0aGUgZXhpc3RpbmcgaW52ZXN0b3JzCiAgICB1aW50OCBpbnRlcm5hbCBORVcgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxhZyB0byB0cmFjayB0aGUgbm9uIGV4aXN0aW5nIGludmVzdG9ycwoKICAgIGFkZHJlc3NbXSBwdWJsaWMgaW52ZXN0b3JzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnZlc3RvcnMgYWRkcmVzcyAKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQ4KSBpbnRlcm5hbCBwcmV2aW91c0ludmVzdG9yOwogICAgLy9ldmVudHMKICAgIGV2ZW50IENoYW5nZUZvdW5kZXJNdWxTaWdBZGRyZXNzKGFkZHJlc3MgaW5kZXhlZCBfbmV3Rm91bmRlck11bFNpZ0FkZHJlc3MgLCB1aW50MjU2IF90aW1lc3RhbXApOwogICAgZXZlbnQgQ2hhbmdlUmF0ZU9mVG9rZW4odWludDI1NiBfdGltZXN0YW1wLCB1aW50MjU2IF9uZXdSYXRlKTsKICAgIGV2ZW50IFRva2VuUHVyY2hhc2UoYWRkcmVzcyBpbmRleGVkIF9iZW5lZmljaWFyeSwgdWludDI1NiBfdmFsdWUsIHVpbnQyNTYgX2Ftb3VudCk7CiAgICBldmVudCBBZG1pblRva2VuU2VudChhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBTZW5kRGl2aWRlbmQoYWRkcmVzcyBpbmRleGVkIF90byAsIHVpbnQyNTYgX3ZhbHVlLCB1aW50MjU2IF90aW1lc3RhbXApOwogICAgCiAgICAvL01vZGlmaWVycwogICAgbW9kaWZpZXIgb25seWZvdW5kZXIoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGZvdW5kZXJNdWxTaWdBZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vblplcm9BZGRyZXNzKGFkZHJlc3MgX3RvKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gMHgwKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlQdWJsaWMoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IGZvdW5kZXJNdWxTaWdBZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vblplcm9FdGgoKSB7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgIT0gMCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1Rva2VuRGVwbG95ZWQoKSB7CiAgICAgICAgcmVxdWlyZSh0b2tlbkRlcGxveWVkID09IHRydWUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIC8vIENvbnN0cnVjdG9yIHRvIGluaXRpYWxpemUgdGhlIGxvY2FsIHZhcmlhYmxlcyAKICAgIGZ1bmN0aW9uIEhSQUNyb3dkZnVuZChhZGRyZXNzIF9mb3VuZGVyTXVsU2lnQWRkcmVzcykgewogICAgICAgIGZvdW5kZXJNdWxTaWdBZGRyZXNzID0gX2ZvdW5kZXJNdWxTaWdBZGRyZXNzOwogICAgICAgIGV4Y2hhbmdlUmF0ZSA9IDMyMDsKICAgIH0KICAgCiAgIC8vIEF0dGFjaCB0aGUgdG9rZW4gY29udHJhY3QsIGNhbiBvbmx5IGJlIGRvbmUgb25jZSAgIAogICAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyBfdG9rZW5BZGRyZXNzKSBub25aZXJvQWRkcmVzcyhfdG9rZW5BZGRyZXNzKSBvbmx5Zm91bmRlciB7CiAgICAgICAgIHJlcXVpcmUodG9rZW5EZXBsb3llZCA9PSBmYWxzZSk7CiAgICAgICAgIHRva2VuID0gSFJBVG9rZW4oX3Rva2VuQWRkcmVzcyk7CiAgICAgICAgIHRva2VuRGVwbG95ZWQgPSB0cnVlOwogICAgfQogICAgCiAgICAvLyBGdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGV4Y2hhbmdlIHJhdGUKICAgIGZ1bmN0aW9uIGNoYW5nZUV4Y2hhbmdlUmF0ZSh1aW50MjU2IF9yYXRlKSBvbmx5Zm91bmRlciByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYoX3JhdGUgIT0gMCl7CiAgICAgICAgICAgIGV4Y2hhbmdlUmF0ZSA9IF9yYXRlOwogICAgICAgICAgICBDaGFuZ2VSYXRlT2ZUb2tlbihub3csX3JhdGUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgCiAgICAvLyBGdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGZvdW5kZXJzIG11bHRpc2lnIGFkZHJlc3MKICAgIGZ1bmN0aW9uIENoYW5nZUZvdW5kZXJXYWxsZXRBZGRyZXNzKGFkZHJlc3MgX25ld0FkZHJlc3MpIG9ubHlmb3VuZGVyIG5vblplcm9BZGRyZXNzKF9uZXdBZGRyZXNzKSB7CiAgICAgICAgIGZvdW5kZXJNdWxTaWdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgICAgICAgIENoYW5nZUZvdW5kZXJNdWxTaWdBZGRyZXNzKGZvdW5kZXJNdWxTaWdBZGRyZXNzLG5vdyk7CiAgICB9CgogICAgLy8gQnV5IHRva2VuIGZ1bmN0aW9uIAogICAgZnVuY3Rpb24gYnV5VG9rZW5zIChhZGRyZXNzIF9iZW5lZmljaWFyeSkKICAgIG9ubHlQdWJsaWMKICAgIG5vblplcm9BZGRyZXNzKF9iZW5lZmljaWFyeSkKICAgIG5vblplcm9FdGgKICAgIGlzVG9rZW5EZXBsb3llZAogICAgcGF5YWJsZQogICAgcHVibGljCiAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQyNTYgYW1vdW50ID0gKG1zZy52YWx1ZS5tdWwoZXhjaGFuZ2VSYXRlKSkuZGl2KDEwICoqIDgpOwogICAgICAgCiAgICAgICAgcmVxdWlyZShjaGVja0V4aXN0ZW5jZShfYmVuZWZpY2lhcnkpKTsKCiAgICAgICAgaWYgKHRva2VuLnRyYW5zZmVyKF9iZW5lZmljaWFyeSwgYW1vdW50KSkgewogICAgICAgICAgICBmdW5kVHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICAgICAgcHJldmlvdXNJbnZlc3RvcltfYmVuZWZpY2lhcnldID0gRVhJU1RTOwogICAgICAgICAgICBldGhSYWlzZWQgPSBldGhSYWlzZWQuYWRkKG1zZy52YWx1ZSk7CiAgICAgICAgICAgIHRva2VuU29sZCA9IHRva2VuU29sZC5hZGQoYW1vdW50KTsKICAgICAgICAgICAgdG9rZW4uY2hhbmdlVG90YWxTdXBwbHkoYW1vdW50KTsgCiAgICAgICAgICAgIFRva2VuUHVyY2hhc2UoX2JlbmVmaWNpYXJ5LCBtc2cudmFsdWUsIGFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gRnVuY3Rpb24gdG8gc2VuZCB0b2tlbiB0byB1c2VyIGFkZHJlc3MKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbiAoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgb25seWZvdW5kZXIgCiAgICBub25aZXJvQWRkcmVzcyhfdG8pIAogICAgaXNUb2tlbkRlcGxveWVkCiAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGlmIChfdmFsdWUgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICByZXF1aXJlKGNoZWNrRXhpc3RlbmNlKF90bykpOwogICAgICAgIAogICAgICAgIHVpbnQyNTYgX3Rva2VuQW1vdW50PSBfdmFsdWUgKiAxMCAqKiB1aW50MjU2KHRva2VuLmRlY2ltYWxzKCkpOwoKICAgICAgICBpZiAodG9rZW4udHJhbnNmZXIoX3RvLCBfdG9rZW5BbW91bnQpKSB7CiAgICAgICAgICAgIHByZXZpb3VzSW52ZXN0b3JbX3RvXSA9IEVYSVNUUzsKICAgICAgICAgICAgbWFudWFsVHJhbnNmZXJUb2tlbiA9IG1hbnVhbFRyYW5zZmVyVG9rZW4uYWRkKF90b2tlbkFtb3VudCk7CiAgICAgICAgICAgIHRva2VuLmNoYW5nZVRvdGFsU3VwcGx5KF90b2tlbkFtb3VudCk7IAogICAgICAgICAgICBBZG1pblRva2VuU2VudChfdG8sIF90b2tlbkFtb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAKICAgIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YgaW52ZXN0b3IKICAgIGZ1bmN0aW9uIGNoZWNrRXhpc3RlbmNlKGFkZHJlc3MgX2JlbmVmaWNpYXJ5KSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgIGlmICh0b2tlbi5iYWxhbmNlT2YoX2JlbmVmaWNpYXJ5KSA9PSAwICYmIHByZXZpb3VzSW52ZXN0b3JbX2JlbmVmaWNpYXJ5XSA9PSBORVcpIHsKICAgICAgICAgICAgaW52ZXN0b3JzLnB1c2goX2JlbmVmaWNpYXJ5KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIEZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBvZiB0b2tlbiBzaGFyZSB0byB0aGUgZXhpc3RpbmcgaW52ZXN0b3JzCiAgICBmdW5jdGlvbiBwcm92aWRlRGl2aWRlbmQodWludDI1NiBfZGl2aWRlbmQpIAogICAgb25seWZvdW5kZXIgCiAgICBpc1Rva2VuRGVwbG95ZWQKICAgIHsKICAgICAgICB1aW50MjU2IF9zdXBwbHkgPSB0b2tlbi50b3RhbEFsbG9jYXRlZFRva2VucygpOwogICAgICAgIHVpbnQyNTYgX2RpdmlkZW5kVmFsdWUgPSBfZGl2aWRlbmQubXVsKDEwICoqIHVpbnQyNTYodG9rZW4uZGVjaW1hbHMoKSkpOwogICAgICAgIGZvciAodWludDggaSA9IDAgOyBpIDwgaW52ZXN0b3JzLmxlbmd0aCA7IGkrKykgewogICAgICAgICAgICAKICAgICAgICAgICAgdWludDI1NiBfdmFsdWUgPSAoKHRva2VuLmJhbGFuY2VPZihpbnZlc3RvcnNbaV0pKS5tdWwoX2RpdmlkZW5kVmFsdWUpKS5kaXYoX3N1cHBseSk7CiAgICAgICAgICAgIGRpdmlkZW5kVHJhbnNmZXIoaW52ZXN0b3JzW2ldLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gRnVuY3Rpb24gdG8gc2VuZCB0aGUgY2FsY3VsYXRlZCB0b2tlbnMgYW1vdW50IHRvIHRoZSBpbnZlc3RvcgogICAgZnVuY3Rpb24gZGl2aWRlbmRUcmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHByaXZhdGUgewogICAgICAgIGlmICh0b2tlbi50cmFuc2ZlcihfdG8sX3ZhbHVlKSkgewogICAgICAgICAgICB0b2tlbi5jaGFuZ2VUb3RhbFN1cHBseShfdmFsdWUpOwogICAgICAgICAgICB0b2tlbkRpc3RyaWJ1dGVJbkRpdmlkZW5kID0gdG9rZW5EaXN0cmlidXRlSW5EaXZpZGVuZC5hZGQoX3ZhbHVlKTsKICAgICAgICAgICAgU2VuZERpdmlkZW5kKF90byxfdmFsdWUsbm93KTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIEZ1bmN0aW9uIHRvIHRyYW5zZmVyIHRoZSBmdW5kcyB0byBmb3VuZGVycyBhY2NvdW50CiAgICBmdW5jdGlvbiBmdW5kVHJhbnNmZXIodWludDI1NiBfZnVuZHMpIHByaXZhdGUgewogICAgICAgIGZvdW5kZXJNdWxTaWdBZGRyZXNzLnRyYW5zZmVyKF9mdW5kcyk7CiAgICB9CiAgICAKICAgIC8vIENyb3dkZnVuZCBlbnRyeQogICAgLy8gc2VuZCBldGhlciB0byB0aGUgY29udHJhY3QgYWRkcmVzcwogICAgZnVuY3Rpb24gKCkgcGF5YWJsZSB7CiAgICAgICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIpOwogICAgfQoKfQ=='.
	

]
