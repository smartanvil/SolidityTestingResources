Class {
	#name : #SRT07Ec6c3159c2336Ba36Ab41f73411f8fEe430470,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT07Ec6c3159c2336Ba36Ab41f73411f8fEe430470 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Ci8qVmlzaXQgIGh0dHA6Ly90aXRzY3J5cHRvLmNvbS8gIGZvciBtb3JlIGluZm9ybWF0aW9uICovCgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKCmNvbnRyYWN0IE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAgIC8qKiAKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfOwogICAgICAgIH0KICAgIH0KCn0KCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aAogICAgZm9yIHVpbnQyNTY7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgoJLyoqCgkgICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwoJICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCgkgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgoJICAqLwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICB9CgkKCS8qKgoJICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCgkgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAoJICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCgkgICovCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoJCgkvKioKCSAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCgkgICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KCSAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCgkgICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKCSAgICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSB7CiAgICAgICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAgICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAgICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgoJICAvKioKCSAgICogQGRldiBBcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KCSAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgoJICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgoJICAgKi8KICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHsKCiAgICAgICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgICAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgcmV2ZXJ0KCk7CgogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCgkgICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KCSAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCgkgICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZmluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpYmxlIGZvciB0aGUgc3BlbmRlci4KCSAgICovCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnModWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCn0KCmNvbnRyYWN0IE1pbnRhYmxlVG9rZW4gaXMgU3RhbmRhcmRUb2tlbiwgT3duYWJsZSB7CiAgICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgTWludEZpbmlzaGVkKCk7CiAgICBldmVudCBNaW50U3RhcnRlZCgpOwogICAgZXZlbnQgUmVmdW5kUmVxdWVzdCh1aW50MjU2IHN1bSxhZGRyZXNzIGFkcix1aW50MjU2IGJhbGFuY2UpOwogICAgZXZlbnQgQ29pbkJ1eSh1aW50MjU2IHN1bSxhZGRyZXNzIGFkcik7CiAgICAKCiAgICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgYm9vbCBwdWJsaWMgZ29hbFJlYWNoZWQgPSBmYWxzZTsKICAgIHVpbnQgcHVibGljIG1pbnRpbmdTdGFydFRpbWUgPSAwOwogICAgdWludCBwdWJsaWMgbWF4TWludGluZ1RpbWUgPSAzMCBkYXlzOwogICAgdWludCBwdWJsaWMgbWludGluZ0dvYWwgPSA1MDAgZXRoZXI7CgogICAgYWRkcmVzcyBwdWJsaWMgdGl0c1Rva2VuQXV0aG9yID0gMHgxODk4OTFkMDI0NDVEODdlNzBkNTE1ZkQyMTU5NDE2ZjAyM0IwMDg3OwoKCS8qKgoJICAgKiBAZGV2IEZlbGwgZnJlIHRvIGRvbmF0ZSBBdXRob3IgaWYgWW91IGxpa2Ugd2hhdCBpcyBwcmVzZW50ZWQgaGVyZQoJICAgKi8KICAgIGZ1bmN0aW9uIGRvbmF0ZUF1dGhvcigpIHBheWFibGUgewogICAgICAgIHRpdHNUb2tlbkF1dGhvci50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQoKICAgIGJvb2wgcHVibGljIGFscmVhZHlNaW50ZWRPbmNlID0gZmFsc2U7CgogICAgbW9kaWZpZXIgbWludGluZ0Nsb3NlZCgpIHsKICAgICAgICBpZiAobWludGluZ0ZpbmlzaGVkID09IGZhbHNlIHx8IGFscmVhZHlNaW50ZWRPbmNlID09IGZhbHNlKSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICBtb2RpZmllciBJc01pbnRpbmdHb2FsKCkgewogICAgICAgIGlmIChtaW50aW5nRmluaXNoZWQgPT0gZmFsc2UgfHwgYWxyZWFkeU1pbnRlZE9uY2UgPT0gZmFsc2UgfHwgZ29hbFJlYWNoZWQgPT0gZmFsc2UgKSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vdE1pbnRlZFlldCgpIHsKICAgICAgICBpZiAoYWxyZWFkeU1pbnRlZE9uY2UgPT0gdHJ1ZSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROb3coKSBwdWJsaWMgcmV0dXJucyh1aW50MjU2KXsKICAgICAgICByZXR1cm4gbm93OwogICAgfQogICAgCgkvKioKCSAgICogQGRldiBQcmVtaXVtIGZvciBidXlpbmcgVElUUyBhdCB0aGUgYmVnaW5pbmcgb2YgSUNPIAoJICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBubyBlcnJvcnMKCSAgICovCiAgICBmdW5jdGlvbiBmYXN0QnV5Qm9udXMoKSBwcml2YXRlIHJldHVybnModWludCkgewogICAgICAgIHVpbnQgcGVyaW9kID0gZ2V0Tm93KCkgLSBtaW50aW5nU3RhcnRUaW1lOwogICAgICAgIGlmIChwZXJpb2QgPCAxIGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDM1MDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAyIGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDMyMDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAzIGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDMwMDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCA3IGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDI2MDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAxMCBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAyNDAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMTIgZGF5cykgewogICAgICAgICAgICByZXR1cm4gMjIwMDsKICAgICAgICB9CiAgICAgICAgaWYgKHBlcmlvZCA8IDE0IGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDIwMDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAxNyBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAxODAwOwogICAgICAgIH0KICAgICAgICBpZiAocGVyaW9kIDwgMTkgZGF5cykgewogICAgICAgICAgICByZXR1cm4gMTYwMDsKICAgICAgICB9CiAgICAgICAgaWYgKHBlcmlvZCA8IDIxIGRheXMpIHsKICAgICAgICAgICAgcmV0dXJuIDE0MDA7CiAgICAgICAgfQogICAgICAgIGlmIChwZXJpb2QgPCAyMyBkYXlzKSB7CiAgICAgICAgICAgIHJldHVybiAxMjAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMTAwMDsKICAgIH0KCgkvKioKCSAgICogQGRldiBBbGxvd3MgdG8gYnV5IHNoYXJlcwoJICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBubyBlcnJvcnMKCSAgICovCiAgICBmdW5jdGlvbiBidXkoKSBwYXlhYmxlIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChtaW50aW5nRmluaXNoZWQpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICB1aW50IF9hbW91bnQgPSAwOwogICAgICAgIF9hbW91bnQgPSBtc2cudmFsdWUgKiBmYXN0QnV5Qm9udXMoKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgICAgICBDb2luQnV5KF9hbW91bnQsbXNnLnNlbmRlcik7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChfYW1vdW50IC8gODUgKiAxNSk7IC8vMTUlIHNoYXJlcyBvZiBvd25lcgogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQgLyA4NSAqIDE1KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgkvKioKCSAgICogQGRldiBPcGVucyBJQ08gKG9ubHkgb3duZXIpCgkgICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIG5vIGVycm9ycwoJICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0TWludGluZygpIG9ubHlPd25lciBub3RNaW50ZWRZZXQgcmV0dXJucyhib29sKSB7CiAgICAgICAgbWludGluZ1N0YXJ0VGltZSA9IGdldE5vdygpOwogICAgICAgIGFscmVhZHlNaW50ZWRPbmNlID0gdHJ1ZTsKICAgICAgICBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICBNaW50U3RhcnRlZCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IENsb3NlcyBJQ08gLSBhbnlvbmUgY2FuIGludm9rZSBpZiBpbnZva2VkIHRvIHNvb24sIHRha2VzIG5vIGFjdGlvbnMKCSAgICogQHJldHVybiBib29sIFRydWUgaWYgbm8gZXJyb3JzCgkgICAqLwogICAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIHJldHVybnMoYm9vbCkgewogICAgICAgIGlmIChtaW50aW5nRmluaXNoZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKGdldE5vdygpIC0gbWludGluZ1N0YXJ0VGltZSA+IG1heE1pbnRpbmdUaW1lKSB7CiAgICAgICAgICAgICAgICBtaW50aW5nRmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgTWludEZpbmlzaGVkKCk7CiAgICAgICAgICAgICAgICBnb2FsUmVhY2hlZCA9ICh0aGlzLmJhbGFuY2UgPiBtaW50aW5nR29hbCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXZlcnQoKTsKICAgIH0KCgkvKioKCSAgICogQGRldiBGdW5jdGlvbiByZWZ1bmRzIGNvbnRyaWJ1dG9ycyBpZiBJQ08gd2FzIHVuc3VjY2VzZnVsIAoJICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiBjb25kaXRpb25zIGZvciByZWZ1bmQgYXJlIG1ldCBmYWxzZSBvdGhlcndpc2UuCgkgICAqLwogICAgZnVuY3Rpb24gcmVmdW5kKCkgcmV0dXJucyhib29sKSB7CiAgICAgICAgaWYgKG1pbnRpbmdGaW5pc2hlZCA9PSB0cnVlICYmIGdvYWxSZWFjaGVkID09IGZhbHNlICYmIGFscmVhZHlNaW50ZWRPbmNlID09IHRydWUpIHsKICAgICAgICAgICAgdWludDI1NiB2YWx1ZU9mSW52ZXN0bWVudCA9ICB0aGlzLmJhbGFuY2UubXVsKGJhbGFuY2VzW21zZy5zZW5kZXJdKS5kaXYodG90YWxTdXBwbHkpOwogICAgICAgICAgICB0b3RhbFN1cHBseS5zdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgICAgICBSZWZ1bmRSZXF1ZXN0KHZhbHVlT2ZJbnZlc3RtZW50LG1zZy5zZW5kZXIsYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIodmFsdWVPZkludmVzdG1lbnQpOwoJCQlyZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAKfQoKY29udHJhY3QgVGl0c1Rva2VuIGlzIE1pbnRhYmxlVG9rZW4gewogICAgc3RyaW5nIHB1YmxpYyBuYW1lID0gIlRydXRoIEluIFRoZSBTb3VyY2Vjb2RlIjsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sID0gIlRJVFMiOwogICAgdWludCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHVpbnQgcHVibGljIHZvaXRpbmdTdGFydFRpbWU7CiAgICBhZGRyZXNzIHB1YmxpYyB2b3RlZEFkZHJlc3M7CiAgICB1aW50IHB1YmxpYyB2b3RlZFllcyA9IDE7CiAgICB1aW50IHB1YmxpYyB2b3RlZE5vID0gMDsKICAgIGV2ZW50IFZvdGVPblRyYW5zZmVyU3RhcnRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnlDb250cmFjdCk7CiAgICBldmVudCBSZWdpc3RlclRyYW5zZmVyQmVuZWZpY2lhcnlDb250cmFjdChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnlDb250cmFjdCk7CiAgICBldmVudCBWb3RpbmdFbmRlZChhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnlDb250cmFjdCwgYm9vbCByZXN1bHQpOwogICAgZXZlbnQgU2hhcmVIb2xkZXJWb3RlZChhZGRyZXNzIGFkcix1aW50MjU2IHZvdGVzLGJvb2wgaXNZZXNWb3RlKTsKCiAgICB1aW50IHB1YmxpYyBjb25zdGFudCBWT1RJTkdfUFJFUEFSRV9USU1FU1BBTiA9IDcgZGF5czsKICAgIHVpbnQgcHVibGljIGNvbnN0YW50IFZPVElOR19USU1FU1BBTiA9ICA3IGRheXM7CiAgICB1aW50IHB1YmxpYyBmYWlsZWRWb3RpbmdDb3VudCA9IDA7CiAgICBib29sIHB1YmxpYyBpc1ZvdGluZyA9IGZhbHNlOwogICAgYm9vbCBwdWJsaWMgaXNWb3RpbmdQcmVwYXJlID0gZmFsc2U7CgogICAgYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnlDb250cmFjdCA9IGFkZHJlc3MoMCk7CgogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyB2b3Rlc0F2YWlsYWJsZTsKICAgIGFkZHJlc3NbXSBwdWJsaWMgdm90ZXJzOwoKCS8qKgoJICAgKiBAZGV2IHZvdGluZyBsb25nIGVub3VnaHQgdG8gZ28gdG8gbmV4dCBwaGFzZSAKCSAgICovCiAgICBtb2RpZmllciB2b3RpbmdMb25nKCkgewogICAgICAgIGlmIChnZXROb3coKSAtIHZvaXRpbmdTdGFydFRpbWUgPCAgVk9USU5HX1RJTUVTUEFOKSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IHByZXBhcmF0aW9uIGZvciB2b3RpbmcgKGFwcGxpY2F0aW9uIGZvciB2b3RpbmcpIGxvbmcgZW5vdWdodCB0byBnbyB0byBuZXh0IHBoYXNlIAoJICAgKi8KICAgIG1vZGlmaWVyIHZvdGluZ1ByZXBhcmVMb25nKCkgewogICAgICAgIGlmIChnZXROb3coKSAtIHZvaXRpbmdTdGFydFRpbWUgPCBWT1RJTkdfUFJFUEFSRV9USU1FU1BBTikgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCgkvKioKCSAgICogQGRldiBWb3Rpbmcgc3RhcnRlZCBhbmQgaW4gcHJvZ3Jlc3MKCSAgICovCiAgICBtb2RpZmllciB2b3RpbmdJblByb2dyZXNzKCkgewogICAgICAgIGlmIChpc1ZvdGluZyA9PSBmYWxzZSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KICAgIG1vZGlmaWVyIHZvdGluZ05vdEluUHJvZ3Jlc3MoKSB7CiAgICAgICAgaWYgKGlzVm90aW5nID09IHRydWUpIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgVm90aW5nIHByZXBhcmF0aW9uIHN0YXJ0ZWQgYW5kIGluIHByb2dyZXNzCgkgICAqLwogICAgbW9kaWZpZXIgdm90aW5nUHJlcGFyZUluUHJvZ3Jlc3MoKSB7CiAgICAgICAgaWYgKGlzVm90aW5nUHJlcGFyZSA9PSBmYWxzZSkgcmV2ZXJ0KCk7CiAgICAgICAgXzsKICAgIH0KCgkvKioKCSAgICogQGRldiBWb3RlcnMgYWdyZWVkIG9uIHByb3Bvc2VkIGNvbnRyYWN0IGFuZCBFdGhlcmV1bSBpcyBiZWluZyBzZW5kIHRvIHRoYXQgY29udHJhY3QKCSAgICovCiAgICBmdW5jdGlvbiBzZW5kVG9CZW5lZmljaWFyeUNvbnRyYWN0KCkgIHsKICAgICAgICBpZiAoYmVuZWZpY2lhcnlDb250cmFjdCAhPSBhZGRyZXNzKDApKSB7CiAgICAgICAgICAgIGJlbmVmaWNpYXJ5Q29udHJhY3QudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICB9CgkJCgkvKioKCSAgICogQGRldiBjYW4gYmUgY2FsbGVkIGJ5IGFueW9uZSwgaWYgdGltZXNwYW4gd2l0aG91IGFjY2VwdGVkIHByb3Bvc2FsIGxvbmcgZW5vdWdodCAKCSAgICogZW5hYmxlcyByZWZ1bmQKCSAgICovCglmdW5jdGlvbiByZWdpc3RlclZvdGluZ1ByZXBhcmVGYWlsdXJlKCkgbWludGluZ0Nsb3NlZHsKCQlpZihnZXROb3coKS1taW50aW5nU3RhcnRUaW1lPigyK2ZhaWxlZFZvdGluZ0NvdW50KSptYXhNaW50aW5nVGltZSApewoJCQlmYWlsZWRWb3RpbmdDb3VudD1mYWlsZWRWb3RpbmdDb3VudCsxOwogICAgICAgICAgICBpZiAoZmFpbGVkVm90aW5nQ291bnQgPT0gMTApIHsKICAgICAgICAgICAgICAgIGdvYWxSZWFjaGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KCQl9Cgl9CgoJLyoqCgkgICAqIEBkZXYgb3BlbnMgcHJlcGFyYXRpb24gZm9yIG5ldyB2b3Rpbmcgb24gcHJvcG9zZWQgTG90dGVyeSBDb250cmFjdCBhZGRyZXNzCgkgICAqLwogICAgZnVuY3Rpb24gc3RhcnRWb3RpbmdQcmVwYXJlKGFkZHJlc3Mgdm90ZWRBZGRyZXNzQXJnKSBtaW50aW5nQ2xvc2VkIHZvdGluZ05vdEluUHJvZ3Jlc3MgSXNNaW50aW5nR29hbCBvbmx5T3duZXJ7CiAgICAgICAgaXNWb3RpbmcgPSBmYWxzZTsKICAgICAgICBpc1ZvdGluZ1ByZXBhcmUgPSB0cnVlOwogICAgICAgIFJlZ2lzdGVyVHJhbnNmZXJCZW5lZmljaWFyeUNvbnRyYWN0KHZvdGVkQWRkcmVzc0FyZyk7CiAgICAgICAgdm90ZWRBZGRyZXNzID0gdm90ZWRBZGRyZXNzQXJnOwogICAgICAgIHZvaXRpbmdTdGFydFRpbWUgPSBnZXROb3coKTsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB2b3RlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZGVsZXRlIHZvdGVyc1tpXTsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIHZvdGVyczsKICAgIH0KCgkvKioKCSAgICogQGRldiBwYXlhYmxlIHNvIGF0dGVuZGFuY2Ugb25seSBvZiBwZW9wbGUgd2hvIHJlYWxseSBjYXJlCgkgICAqIHJlZ2lzdGVycyBZb3UgYXMgYSB2b3RlcjsKCSAgICovCiAgICBmdW5jdGlvbiByZWdpc3RlckZvclZvdGluZygpIHBheWFibGUgdm90aW5nUHJlcGFyZUluUHJvZ3Jlc3MgewogICAgICAgIGlmIChtc2cudmFsdWUgPj0gMTAgZmlubmV5KSB7CiAgICAgICAgICAgIHZvdGVycy5wdXNoKG1zZy5zZW5kZXIpOwogICAgICAgIH0KCQllbHNlewoJCQlyZXZlcnQoKTsKCQl9CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgb3BlbnMgdm90aW5nIG9uIHByb3Bvc2VkIExvdHRlcnkgQ29udHJhY3QgYWRkcmVzcwoJICAgKi8KICAgIGZ1bmN0aW9uIHN0YXJ0Vm90aW5nKCkgdm90aW5nUHJlcGFyZUluUHJvZ3Jlc3Mgdm90aW5nUHJlcGFyZUxvbmcgewogICAgICAgIFZvdGVPblRyYW5zZmVyU3RhcnRlZCh2b3RlZEFkZHJlc3MpOwogICAgICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IHZvdGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhZGRyZXNzIHZvdGVyID0gdm90ZXJzW2ldOwogICAgICAgICAgICB1aW50MjU2IHZvdGVzID0gYmFsYW5jZU9mKHZvdGVyKTsKICAgICAgICAgICAgdm90ZXNBdmFpbGFibGVbdm90ZXJdPXZvdGVzOwogICAgICAgIH0KICAgICAgICBpc1ZvdGluZyA9IHRydWU7CiAgICAgICAgdm9pdGluZ1N0YXJ0VGltZSA9IGdldE5vdygpOwogICAgICAgIGlzVm90aW5nUHJlcGFyZSA9IGZhbHNlOwogICAgfQoKCS8qKgoJICAgKiBAZGV2IGNsb3NlcyB2b3Rpbmcgb24gcHJvcG9zZWQgTG90dGVyeSBDb250cmFjdCBhZGRyZXNzCgkgICAqIGNoZWNrcyBpZiBmYWlsZWQgLSBpZiBObyB2b3RlcyBpcyBtb3JlIGNvbW1vbiB0aGFuIHllcyBpbmNyZWFzZSBmYWlsZWQgdm90aW5nIGNvdW50IGFuZCBpZiBpdCByZWFjaGVzIDEwIAoJICAgKiByZWFjaCBvZiBnb2FsIGlzIGZhaWxpbmcgYW5kIGludmVzdG9ycyBjYW4gd2l0aGRyYXcgdGhlaXIgbW9uZXkKCSAgICovCiAgICBmdW5jdGlvbiBjbG9zZVZvcmluZygpIHZvdGluZ0luUHJvZ3Jlc3Mgdm90aW5nTG9uZyB7CiAgICAgICAgVm90aW5nRW5kZWQodm90ZWRBZGRyZXNzLCB2b3RlZFllcyA+IHZvdGVkTm8pOwogICAgICAgIGlzVm90aW5nID0gZmFsc2U7CiAgICAgICAgaXNWb3RpbmdQcmVwYXJlID0gZmFsc2U7CiAgICAgICAgaWYgKHZvdGVkWWVzID4gdm90ZWRObykgewogICAgICAgICAgICBiZW5lZmljaWFyeUNvbnRyYWN0ID0gdm90ZWRBZGRyZXNzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZhaWxlZFZvdGluZ0NvdW50ID0gZmFpbGVkVm90aW5nQ291bnQgKyAxOwogICAgICAgICAgICBpZiAoZmFpbGVkVm90aW5nQ291bnQgPT0gMTApIHsKICAgICAgICAgICAgICAgIGdvYWxSZWFjaGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgoJLyoqCgkgICAqIEBkZXYgdm90ZXMgb24gY29udHJhY3QgcHJvcG9zYWwKCSAgICovCiAgICBmdW5jdGlvbiB2b3RlKGJvb2wgaXNWb3RlWWVzKSB2b3RpbmdJblByb2dyZXNzewoKICAgICAgICAgICAgdWludDI1NiB2b3RlcyA9IHZvdGVzQXZhaWxhYmxlW21zZy5zZW5kZXJdOwogICAgICAgICAgICBTaGFyZUhvbGRlclZvdGVkKG1zZy5zZW5kZXIsdm90ZXMsaXNWb3RlWWVzKTsKICAgICAgICAgICAgaWYgKGlzVm90ZVllcykgewogICAgICAgICAgICAgICAgdm90ZXNBdmFpbGFibGVbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgICAgICAgICAgdm90ZWRZZXMgPSB2b3RlZFllcy5hZGQodm90ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgKGlzVm90ZVllcz09ZmFsc2UpIHsKICAgICAgICAgICAgICAgIHZvdGVzQXZhaWxhYmxlW21zZy5zZW5kZXJdID0gMDsKICAgICAgICAgICAgICAgIHZvdGVkTm8gPSB2b3RlZE5vLmFkZCh2b3Rlcyk7CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICByZXZlcnQoKTsgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIH0KfQ=='.
	

]
