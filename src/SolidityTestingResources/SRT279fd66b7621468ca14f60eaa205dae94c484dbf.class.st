Class {
	#name : #SRT279fd66b7621468ca14f60eaa205dae94c484dbf,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT279fd66b7621468ca14f60eaa205dae94c484dbf >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKiBAZGV2IEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlIChodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjApCiovCmNvbnRyYWN0IEVSQzIwIHsKICAgIC8vVXNlIG9yaWdpbmFsIEVSQzIwIHRvdGFsU3VwcGx5IGZ1bmN0aW9uIGluc3RlYWQgb2YgcHVibGljIHZhcmlhYmxlIHNpbmNlCiAgICAvL3dlIGFyZSBtYXBwaW5nIHRoZSBmdW5jdGlvbnMgZm9yIHVwZ3JhZGVhYmlsaXR5CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlCi8vIENvcHlyaWdodCAoYykgMjAxNyBDdXJ2ZWdyaWQgSW5jLgoKCi8vLyBAdGl0bGUgT2ZmbGluZVNlY3JldAovLy8gQGRldiBUaGUgT2ZmbGluZVNlY3JldCBjb250cmFjdCBwcm92aWRlIGZ1bmN0aW9uYWxpdHkgdG8gdmVyaWZ5IGFuZCBlbnN1cmUgYSBjYWxsZXIKLy8vIHByb3ZpZGVzIGEgdmFsaWQgc2VjcmV0IHRoYXQgd2FzIGV4Y2hhbmdlZCBvZmZsaW5lLiBJdCBvZmZlcnMgYW4gYWRkaXRpb25hbCBsZXZlbCBvZiB2ZXJpZmljYXRpb24KLy8vIGZvciBzZW5zaXRpdmUgY29udHJhY3Qgb3BlcmF0aW9ucy4KY29udHJhY3QgT2ZmbGluZVNlY3JldCB7CgogICAgLy8vIEBkZXYgTW9kaWZpZXIgdGhhdCByZXF1aXJlcyBhIHByb3ZpZGVkIHBsYWludGV4dCBtYXRjaCBhIHByZXZpb3VzbHkgc3RvcmVkIGhhc2gKICAgIG1vZGlmaWVyIHZhbGlkU2VjcmV0KGFkZHJlc3MgdG8sIHN0cmluZyBzZWNyZXQsIGJ5dGVzMzIgaGFzaGVkKSB7CiAgICAgICAgcmVxdWlyZShjaGVja1NlY3JldCh0bywgc2VjcmV0LCBoYXNoZWQpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAZGV2IEdlbmVyYXRlIGEgaGFzaCBmcm9tIHRoZSBwcm92aWRlZCBwbGFpbnRleHQuIEEgcHVyZSBmdW5jdGlvbiBzbyBjYW4gKHNob3VsZCkgYmUKICAgIC8vLyBydW4gb2ZmLWNoYWluLgogICAgLy8vIEBwYXJhbSB0byBhZGRyZXNzIFRoZSByZWNpcGllbnQgYWRkcmVzcywgYXMgYSBzYWx0LgogICAgLy8vIEBwYXJhbSBzZWNyZXQgc3RyaW5nIFRoZSBzZWNyZXQgdG8gaGFzaC4KICAgIGZ1bmN0aW9uIGdlbmVyYXRlSGFzaChhZGRyZXNzIHRvLCBzdHJpbmcgc2VjcmV0KSBwdWJsaWMgcHVyZSByZXR1cm5zKGJ5dGVzMzIgaGFzaGVkKSB7CiAgICAgICAgcmV0dXJuIGtlY2NhazI1Nih0bywgc2VjcmV0KTsKICAgIH0KCiAgICAvLy8gQGRldiBDaGVjayB3aGV0aGVyIGEgcHJvdmlkZWQgcGxhaW50ZXh0IHNlY3JldCBoYXNoZXMgdG8gYSBwcm92aWRlZCBoYXNoLiBBIHB1cmUgCiAgICAvLy8gZnVuY3Rpb24gc28gY2FuIChzaG91bGQpIGJlIHJ1biBvZmYtY2hhaW4uCiAgICAvLy8gQHBhcmFtIHRvIGFkZHJlc3MgVGhlIHJlY2lwaWVudCBhZGRyZXNzLCBhcyBhIHNhbHQuCiAgICAvLy8gQHBhcmFtIHNlY3JldCBzdHJpbmcgVGhlIHNlY3JldCB0byBoYXNoLgogICAgLy8vIEBwYXJhbSBoYXNoZWQgc3RyaW5nIFRoZSBoYXNoIHRvIGNoZWNrIHRoZSBzZWNyZXQgYWdhaW5zdC4KICAgIGZ1bmN0aW9uIGNoZWNrU2VjcmV0KGFkZHJlc3MgdG8sIHN0cmluZyBzZWNyZXQsIGJ5dGVzMzIgaGFzaGVkKSBwdWJsaWMgcHVyZSByZXR1cm5zKGJvb2wgdmFsaWQpIHsKICAgICAgICBpZiAoaGFzaGVkID09IGtlY2NhazI1Nih0bywgc2VjcmV0KSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQovLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UKLy8gQ29weXJpZ2h0IChjKSAyMDE3IEN1cnZlZ3JpZCBJbmMuCgoKCi8vLyBAdGl0bGUgT3duYWJsZQovLy8gQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbCBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcwovLy8gYW5kIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCmNvbnRyYWN0IE93bmFibGVXaXRoRm91bmRhdGlvbiBpcyBPZmZsaW5lU2VjcmV0IHsKICAgIGFkZHJlc3MgcHVibGljIG93bmVyOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXJDYW5kaWRhdGU7CiAgICBhZGRyZXNzIHB1YmxpYyBmb3VuZGF0aW9uOwogICAgYWRkcmVzcyBwdWJsaWMgbmV3Rm91bmRhdGlvbkNhbmRpZGF0ZTsKCiAgICBieXRlczMyIHB1YmxpYyBvd25lckhhc2hlZDsKICAgIGJ5dGVzMzIgcHVibGljIGZvdW5kYXRpb25IYXNoZWQ7CgogICAgZXZlbnQgT3duZXJzaGlwUmVxdWVzdGVkKGFkZHJlc3MgaW5kZXhlZCBieSwgYWRkcmVzcyBpbmRleGVkIHRvLCBieXRlczMyIGhhc2hlZCk7CiAgICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvKTsKICAgIGV2ZW50IEZvdW5kYXRpb25SZXF1ZXN0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCBhZGRyZXNzIGluZGV4ZWQgdG8sIGJ5dGVzMzIgaGFzaGVkKTsKICAgIGV2ZW50IEZvdW5kYXRpb25UcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvKTsKCiAgICAvLy8gQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICAvLy8gYWNjb3VudC4KICAgIGZ1bmN0aW9uIE93bmFibGVXaXRoRm91bmRhdGlvbihhZGRyZXNzIF9vd25lcikgcHVibGljIHsKICAgICAgICBmb3VuZGF0aW9uID0gbXNnLnNlbmRlcjsKICAgICAgICBvd25lciA9IF9vd25lcjsKICAgIH0KCiAgICAvLy8gQGRldiBSZXZlcnRzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBvd25lcikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyQ2FuZGlkYXRlKCkgewogICAgICAgIGlmIChtc2cuc2VuZGVyICE9IG5ld093bmVyQ2FuZGlkYXRlKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBSZXZlcnRzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBmb3VuZGF0aW9uLgogICAgbW9kaWZpZXIgb25seUZvdW5kYXRpb24oKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gZm91bmRhdGlvbikgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seUZvdW5kYXRpb25DYW5kaWRhdGUoKSB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgIT0gbmV3Rm91bmRhdGlvbkNhbmRpZGF0ZSkgewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CgogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgUHJvcG9zZXMgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lckNhbmRpZGF0ZS4KICAgIC8vLyBAcGFyYW0gX25ld093bmVyQ2FuZGlkYXRlIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgLy8vIEBwYXJhbSBfb3duZXJIYXNoZWQgc3RyaW5nIFRoZSBoYXNoZWQgc2VjcmV0IHRvIHVzZSBhcyBwcm90ZWN0aW9uLgogICAgZnVuY3Rpb24gcmVxdWVzdE93bmVyc2hpcFRyYW5zZmVyKAogICAgICAgIGFkZHJlc3MgX25ld093bmVyQ2FuZGlkYXRlLCAKICAgICAgICBieXRlczMyIF9vd25lckhhc2hlZCkgCiAgICAgICAgZXh0ZXJuYWwgCiAgICAgICAgb25seUZvdW5kYXRpb24KICAgIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lckNhbmRpZGF0ZSAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF9uZXdPd25lckNhbmRpZGF0ZSAhPSBvd25lcik7CgogICAgICAgIG5ld093bmVyQ2FuZGlkYXRlID0gX25ld093bmVyQ2FuZGlkYXRlOwogICAgICAgIG93bmVySGFzaGVkID0gX293bmVySGFzaGVkOwoKICAgICAgICBPd25lcnNoaXBSZXF1ZXN0ZWQobXNnLnNlbmRlciwgbmV3T3duZXJDYW5kaWRhdGUsIG93bmVySGFzaGVkKTsKICAgIH0KCiAgICAvLy8gQGRldiBBY2NlcHQgb3duZXJzaGlwIHRyYW5zZmVyLiBUaGlzIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYnkgdGhlIHByZXZpb3VzbHkgcHJvcG9zZWQgb3duZXIuCiAgICAvLy8gQHBhcmFtIF9vd25lclNlY3JldCBzdHJpbmcgVGhlIHNlY3JldCB0byBjaGVjayBhZ2FpbnN0IHRoZSBoYXNoLgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKAogICAgICAgIHN0cmluZyBfb3duZXJTZWNyZXQpIAogICAgICAgIGV4dGVybmFsIAogICAgICAgIG9ubHlPd25lckNhbmRpZGF0ZSAKICAgICAgICB2YWxpZFNlY3JldChuZXdPd25lckNhbmRpZGF0ZSwgX293bmVyU2VjcmV0LCBvd25lckhhc2hlZCkKICAgIHsKICAgICAgICBhZGRyZXNzIHByZXZpb3VzT3duZXIgPSBvd25lcjsKCiAgICAgICAgb3duZXIgPSBuZXdPd25lckNhbmRpZGF0ZTsKICAgICAgICBuZXdPd25lckNhbmRpZGF0ZSA9IGFkZHJlc3MoMCk7CgogICAgICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKHByZXZpb3VzT3duZXIsIG93bmVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBQcm9wb3NlcyB0byB0cmFuc2ZlciBjb250cm9sIG9mIHRoZSBjb250cmFjdCB0byBhIG5ld0ZvdW5kYXRpb25DYW5kaWRhdGUuCiAgICAvLy8gQHBhcmFtIF9uZXdGb3VuZGF0aW9uQ2FuZGlkYXRlIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3ZlcnNpZ2h0IHRvLgogICAgLy8vIEBwYXJhbSBfZm91bmRhdGlvbkhhc2hlZCBzdHJpbmcgVGhlIGhhc2hlZCBzZWNyZXQgdG8gdXNlIGFzIHByb3RlY3Rpb24uCiAgICBmdW5jdGlvbiByZXF1ZXN0Rm91bmRhdGlvblRyYW5zZmVyKAogICAgICAgIGFkZHJlc3MgX25ld0ZvdW5kYXRpb25DYW5kaWRhdGUsIAogICAgICAgIGJ5dGVzMzIgX2ZvdW5kYXRpb25IYXNoZWQpIAogICAgICAgIGV4dGVybmFsIAogICAgICAgIG9ubHlGb3VuZGF0aW9uIAogICAgewogICAgICAgIHJlcXVpcmUoX25ld0ZvdW5kYXRpb25DYW5kaWRhdGUgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfbmV3Rm91bmRhdGlvbkNhbmRpZGF0ZSAhPSBmb3VuZGF0aW9uKTsKCiAgICAgICAgbmV3Rm91bmRhdGlvbkNhbmRpZGF0ZSA9IF9uZXdGb3VuZGF0aW9uQ2FuZGlkYXRlOwogICAgICAgIGZvdW5kYXRpb25IYXNoZWQgPSBfZm91bmRhdGlvbkhhc2hlZDsKCiAgICAgICAgRm91bmRhdGlvblJlcXVlc3RlZChtc2cuc2VuZGVyLCBuZXdGb3VuZGF0aW9uQ2FuZGlkYXRlLCBmb3VuZGF0aW9uSGFzaGVkKTsKICAgIH0KCiAgICAvLy8gQGRldiBBY2NlcHQgZm91bmRhdGlvbiB0cmFuc2Zlci4gVGhpcyBtZXRob2QgbmVlZHMgdG8gYmUgY2FsbGVkIGJ5IHRoZSBwcmV2aW91c2x5IHByb3Bvc2VkIGZvdW5kYXRpb24uCiAgICAvLy8gQHBhcmFtIF9mb3VuZGF0aW9uU2VjcmV0IHN0cmluZyBUaGUgc2VjcmV0IHRvIGNoZWNrIGFnYWluc3QgdGhlIGhhc2guCiAgICBmdW5jdGlvbiBhY2NlcHRGb3VuZGF0aW9uKAogICAgICAgIHN0cmluZyBfZm91bmRhdGlvblNlY3JldCkgCiAgICAgICAgZXh0ZXJuYWwgCiAgICAgICAgb25seUZvdW5kYXRpb25DYW5kaWRhdGUgCiAgICAgICAgdmFsaWRTZWNyZXQobmV3Rm91bmRhdGlvbkNhbmRpZGF0ZSwgX2ZvdW5kYXRpb25TZWNyZXQsIGZvdW5kYXRpb25IYXNoZWQpCiAgICB7CiAgICAgICAgYWRkcmVzcyBwcmV2aW91c0ZvdW5kYXRpb24gPSBmb3VuZGF0aW9uOwoKICAgICAgICBmb3VuZGF0aW9uID0gbmV3Rm91bmRhdGlvbkNhbmRpZGF0ZTsKICAgICAgICBuZXdGb3VuZGF0aW9uQ2FuZGlkYXRlID0gYWRkcmVzcygwKTsKCiAgICAgICAgRm91bmRhdGlvblRyYW5zZmVycmVkKHByZXZpb3VzRm91bmRhdGlvbiwgZm91bmRhdGlvbik7CiAgICB9Cn0KCi8qIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwoqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXg2NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDY0KSB7CiAgICAgICAgcmV0dXJuIGEgPj0gYiA/IGEgOiBiOwogICAgfQoKICAgIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50NjQpIHsKICAgICAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICAgIH0KCiAgICBmdW5jdGlvbiBtaW4yNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogICAgfQp9Ci8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZQovLyBDb3B5cmlnaHQgKGMpIDIwMTcgQ3VydmVncmlkIEluYy4KCgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlV2l0aEZvdW5kYXRpb24gewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gUGF1c2FibGUoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBPd25hYmxlV2l0aEZvdW5kYXRpb24oX293bmVyKSB7CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgoKLy8vIEB0aXRsZSBCYXNpYyBFUkMyMCB0b2tlbiBjb250cmFjdCBpbXBsZW1lbnRhdGlvbi4KLyogQGRldiBLaW4ncyBCYXNpY1Rva2VuIGJhc2VkIG9uIE9wZW5aZXBwZWxpbidzIFN0YW5kYXJkVG9rZW4uCiovCgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vLyBAZGV2IEFwcHJvdmUgdGhlIHBhc3NlZCBhZGRyZXNzIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgICAgaWYgKChfdmFsdWUgIT0gMCkgJiYgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdICE9IDApKSB7CiAgICAgICAgICAgIHJldmVydCgpOwogICAgICAgIH0KCiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CgogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAgLy8vIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgIC8vLyBAcmV0dXJuIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KCgogICAgLy8vIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAgIC8vLyBAcmV0dXJuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgLy8vIEBkZXYgdHJhbnNmZXIgdG9rZW4gdG8gYSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLgogICAgLy8vIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20uCiAgICAvLy8gQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgdWludDI1NiBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQovLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UKLy8gQ29weXJpZ2h0IChjKSAyMDE3IEN1cnZlZ3JpZCBJbmMuCgoKCi8qKgogKiBAZGV2IEVSQyBUb2tlbiBTdGFuZGFyZCAjMjAgSW50ZXJmYWNlIChodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjApCiAqICAgICAgRDFDb2luIGlzIHRoZSBtYWluIGNvbnRyYWN0IGZvciB0aGUgRDEgcGxhdGZvcm0uCiAqLwpjb250cmFjdCBEMUNvaW4gaXMgQmFzaWNUb2tlbiwgUGF1c2FibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkQxIENvaW4iOwogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiRDEiOwoKICAgIC8vIFRob3VzYW5kcyBvZiBhIHRva2VuIHJlcHJlc2VudCB0aGUgbWluaW11bSB1c2FibGUgdW5pdCBvZiB0b2tlbiBiYXNlZCBvbgogICAgLy8gaXRzIGV4cGVjdGVkIHZhbHVlCiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAzOwoKICAgIGFkZHJlc3MgdGhlQ29pbiA9IGFkZHJlc3ModGhpcyk7CgogICAgLy8gSGFzaGVkIHNlY3JldHMgcmVxdWlyZWQgdG8gdW5sb2NrIGNvaW5zIHRyYW5zZmVycmVkIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlciBhZGRyZXNzCiAgICBzdHJ1Y3QgUHJvdGVjdGVkQmFsYW5jZVN0cnVjdCB7CiAgICAgICAgdWludDI1NiBiYWxhbmNlOwogICAgICAgIGJ5dGVzMzIgaGFzaGVkOwogICAgfQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IFByb3RlY3RlZEJhbGFuY2VTdHJ1Y3QpKSBwcm90ZWN0ZWRCYWxhbmNlczsKICAgIHVpbnQyNTYgcHVibGljIHByb3RlY3RlZFN1cHBseTsKCiAgICAvLyBjb25zdHJ1Y3RvciBwYXNzZXMgb3duZXIgKE1pbnQpIGRvd24gdG8gUGF1c2FibGUoKSA9PiBPd25hYmxlV2l0aEZvdW5kYXRpb24oKQogICAgZnVuY3Rpb24gRDFDb2luKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgUGF1c2FibGUoX293bmVyKSB7CiAgICB9CgogICAgZXZlbnQgTWludChhZGRyZXNzIGluZGV4ZWQgbWludGVyLCBhZGRyZXNzIGluZGV4ZWQgcmVjZWl2ZXIsIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgUHJvdGVjdGVkVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMzMiBoYXNoZWQpOwogICAgZXZlbnQgUHJvdGVjdGVkVW5sb2NrKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgUHJvdGVjdGVkUmVjbGFpbShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CgogICAgLy8vIEBkZXYgVHJhbnNmZXIgdG9rZW4gdG8gdGhpcyBjb250cmFjdCwgd2hpY2ggaXMgc2hvcnRoYW5kIGZvciB0aGUgb3duZXIgKE1pbnQpLiAKICAgIC8vLyBBdm9pZHMgcmFjZSBjb25kaXRpb25zIGluIGNhc2VzIHdoZXJlIHRoZSBvd25lciBoYXMgY2hhbmdlZCBqdXN0IGJlZm9yZSBhIAogICAgLy8vIHRyYW5zZmVyIGlzIGNhbGxlZC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyVG9NaW50KHVpbnQyNTYgX3ZhbHVlKSBleHRlcm5hbCB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXIodGhlQ29pbiwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBBcHByb3ZlIHRoaXMgY29udHJhY3QsIHByb3h5IGZvciBvd25lciAoTWludCksIHRvIHNwZW5kIHRoZSBzcGVjaWZpZWQgYW1vdW50IG9mIHRva2VucyAKICAgIC8vLyBvbiBiZWhhbGYgb2YgbXNnLnNlbmRlci4gQXZvaWRzIHJhY2UgY29uZGl0aW9ucyBpbiBjYXNlcyB3aGVyZSB0aGUgb3duZXIgaGFzIGNoYW5nZWQgCiAgICAvLy8ganVzdCBiZWZvcmUgYW4gYXBwcm92ZSBpcyBjYWxsZWQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgZnVuY3Rpb24gYXBwcm92ZVRvTWludCh1aW50MjU2IF92YWx1ZSkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGFwcHJvdmUodGhlQ29pbiwgX3ZhbHVlKTsKICAgIH0KCiAgICAvLy8gQGRldiBQcm90ZWN0ZWQgdHJhbnNmZXIgdG9rZW5zIHRvIHRoaXMgY29udHJhY3QsIHdoaWNoIGlzIHNob3J0aGFuZCBmb3IgdGhlIG93bmVyIChNaW50KS4gCiAgICAvLy8gQXZvaWRzIHJhY2UgY29uZGl0aW9ucyBpbiBjYXNlcyB3aGVyZSB0aGUgb3duZXIgaGFzIGNoYW5nZWQganVzdCBiZWZvcmUgYSAKICAgIC8vLyB0cmFuc2ZlciBpcyBjYWxsZWQuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAvLy8gQHBhcmFtIF9oYXNoZWQgc3RyaW5nIFRoZSBoYXNoZWQgc2VjcmV0IHRvIHVzZSBhcyBwcm90ZWN0aW9uLgogICAgZnVuY3Rpb24gcHJvdGVjdGVkVHJhbnNmZXJUb01pbnQodWludDI1NiBfdmFsdWUsIGJ5dGVzMzIgX2hhc2hlZCkgZXh0ZXJuYWwgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHByb3RlY3RlZFRyYW5zZmVyKHRoZUNvaW4sIF92YWx1ZSwgX2hhc2hlZCk7CiAgICB9CgogICAgLy8vIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gYW4gYWRkcmVzcyB0byB0aGlzIGNvbnRyYWN0LCBhIHByb3h5IGZvciB0aGUgb3duZXIgKE1pbnQpLgogICAgLy8vIFN1YmplY3QgdG8gcHJlLWFwcHJvdmFsIGZyb20gdGhlIGFkZHJlc3MuIEF2b2lkcyByYWNlIGNvbmRpdGlvbnMgaW4gY2FzZXMgd2hlcmUgdGhlIG93bmVyIGhhcyBjaGFuZ2VkIAogICAgLy8vIGp1c3QgYmVmb3JlIGFuIGFwcHJvdmUgaXMgY2FsbGVkLgogICAgLy8vIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20uCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkLgogICAgZnVuY3Rpb24gd2l0aGRyYXdCeU1pbnQoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyByZXRyaWV2ZSBhbGxvd2FuY2UKICAgICAgICB1aW50MjU2IF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVt0aGVDb2luXTsKCiAgICAgICAgLy8gYWRqdXN0IGJhbGFuY2VzCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW3RoZUNvaW5dID0gYmFsYW5jZXNbdGhlQ29pbl0uYWRkKF92YWx1ZSk7CgogICAgICAgIC8vIGFkanVzdCBhbGxvd2FuY2UKICAgICAgICBhbGxvd2VkW19mcm9tXVt0aGVDb2luXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCB0aGVDb2luLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBDcmVhdGVzIGEgc3BlY2lmaWMgYW1vdW50IG9mIHRva2VucyBhbmQgY3JlZGl0cyB0aGVtIHRvIHRoZSBNaW50LgogICAgLy8vIEBwYXJhbSBfYW1vdW50IHVpbnQyNTYgQW1vdW50IHRva2VucyB0byBtaW50LgogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IF9hbW91bnQpIGV4dGVybmFsIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHsKICAgICAgICByZXF1aXJlKF9hbW91bnQgPiAwKTsKCiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgYmFsYW5jZXNbdGhlQ29pbl0gPSBiYWxhbmNlc1t0aGVDb2luXS5hZGQoX2Ftb3VudCk7CgogICAgICAgIE1pbnQobXNnLnNlbmRlciwgdGhlQ29pbiwgX2Ftb3VudCk7CgogICAgICAgIC8vIG9wdGlvbmFsIGluIEVSQy0yMCBzdGFuZGFyZCwgYnV0IHJlcXVpcmVkIGJ5IEV0aGVyc2NhbgogICAgICAgIFRyYW5zZmVyKGFkZHJlc3MoMCksIHRoZUNvaW4sIF9hbW91bnQpOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHJpZXZlIHRoZSBwcm90ZWN0ZWQgYmFsYW5jZSBhbmQgaGFzaGVkIHBhc3NwaHJhc2UgZm9yIGEgcGVuZGluZyBwcm90ZWN0ZWQgdHJhbnNmZXIuCiAgICAvLy8gQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3MgdHJhbnNmZXJyZWQgZnJvbS4KICAgIC8vLyBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3MgdHJhbnNmZXJyZWQgdG8uCiAgICBmdW5jdGlvbiBwcm90ZWN0ZWRCYWxhbmNlKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlLCBieXRlczMyIGhhc2hlZCkgewogICAgICAgIHJldHVybihwcm90ZWN0ZWRCYWxhbmNlc1tfZnJvbV1bX3RvXS5iYWxhbmNlLCBwcm90ZWN0ZWRCYWxhbmNlc1tfZnJvbV1bX3RvXS5oYXNoZWQpOwogICAgfQoKICAgIC8vLyBAZGV2IFRyYW5zZmVyIHRva2VucyB0byBhIHNwZWNpZmllZCBhZGRyZXNzIHByb3RlY3RlZCBieSBhIHNlY3JldC4KICAgIC8vLyBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgdG8uCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgdG8gYmUgdHJhbnNmZXJyZWQuCiAgICAvLy8gQHBhcmFtIF9oYXNoZWQgc3RyaW5nIFRoZSBoYXNoZWQgc2VjcmV0IHRvIHVzZSBhcyBwcm90ZWN0aW9uLgogICAgZnVuY3Rpb24gcHJvdGVjdGVkVHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyIF9oYXNoZWQpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwoKICAgICAgICAvLyAidHJhbnNmZXJzIiB0byBhZGRyZXNzKDApIHNob3VsZCBvbmx5IGJlIGJ5IHRoZSBidXJuKCkgZnVuY3Rpb24KICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgLy8gZXhwbGljaXRseSBkaXNhbGxvdyB0cmFuZmVyIHRvIHRoZSBvd25lciwgYXMgaXQncyBhdXRvbWF0aWNhbGx5IHRyYW5zbGF0ZWQgaW50byB0aGUgY29pbgogICAgICAgIC8vIGluIHByb3RlY3RlZFVubG9jaygpIGFuZCBwcm90ZWN0ZWRSZWNsYWltKCkKICAgICAgICByZXF1aXJlKF90byAhPSBvd25lcik7CgogICAgICAgIGFkZHJlc3MgZnJvbSA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIHNwZWNpYWwgY2FzZTogbXNnLnNlbmRlciBpcyB0aGUgb3duZXIgKE1pbnQpCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgZnJvbSA9IHRoZUNvaW47CgogICAgICAgICAgICAvLyBlbnN1cmUgTWludCBpcyBhY3R1YWxseSBob2xkaW5nIHRoaXMgc3VwcGx5OyBub3QgcmVxdWlyZWQgYmVsb3cgYmVjYXVzZSBvZiByZXZlcnQgaW4gLnN1YigpCiAgICAgICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbdGhlQ29pbl0uc3ViKHByb3RlY3RlZFN1cHBseSkgPj0gX3ZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBvdGhlcndpc2UsIGFkanVzdCB0aGUgYmFsYW5jZXM6IHRyYW5zZmVyIHRoZSB0b2tlbnMgdG8gdGhlIE1pbnQgdG8gaGF2ZSB0aGVtIGhlbGQgaW4gZXNjcm93CiAgICAgICAgICAgIGJhbGFuY2VzW2Zyb21dID0gYmFsYW5jZXNbZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgICAgIGJhbGFuY2VzW3RoZUNvaW5dID0gYmFsYW5jZXNbdGhlQ29pbl0uYWRkKF92YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBwcm90ZWN0ZWQgYmFsYW5jZSBtdXN0IGJlIHplcm8gKHVubG9ja2VkIG9yIHJlY2xhaW1lZCBpbiBpdHMgZW50aXJldHkpCiAgICAgICAgLy8gYXZvaWQgYSBzaXR1YXRpb24gc2ltaWxhciB0bzogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgICAgICBpZiAocHJvdGVjdGVkQmFsYW5jZXNbZnJvbV1bX3RvXS5iYWxhbmNlICE9IDApIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICAvLyBkaXNhbGxvdyByZXVzaW5nIHRoZSBwcmV2aW91cyBzZWNyZXQKICAgICAgICAvLyAobm90IGludGVuZGVkIHRvIHByZXZlbnQgcmV1c2Ugb2YgYW4gTi14LCB4ID4gMSBzZWNyZXQpCiAgICAgICAgcmVxdWlyZShwcm90ZWN0ZWRCYWxhbmNlc1tmcm9tXVtfdG9dLmhhc2hlZCAhPSBfaGFzaGVkKTsKCiAgICAgICAgLy8gc2V0IHRoZSBwcm90ZWN0ZWQgYmFsYW5jZSBhbmQgaGFzaGVkIHZhbHVlCiAgICAgICAgcHJvdGVjdGVkQmFsYW5jZXNbZnJvbV1bX3RvXS5iYWxhbmNlID0gX3ZhbHVlOwogICAgICAgIHByb3RlY3RlZEJhbGFuY2VzW2Zyb21dW190b10uaGFzaGVkID0gX2hhc2hlZDsKCiAgICAgICAgLy8gYWRqdXN0IHRoZSBwcm90ZWN0ZWQgc3VwcGx5CiAgICAgICAgcHJvdGVjdGVkU3VwcGx5ID0gcHJvdGVjdGVkU3VwcGx5LmFkZChfdmFsdWUpOwoKICAgICAgICBQcm90ZWN0ZWRUcmFuc2Zlcihmcm9tLCBfdG8sIF92YWx1ZSwgX2hhc2hlZCk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFVubG9jayBwcm90ZWN0ZWQgdG9rZW5zIGZyb20gYW4gYWRkcmVzcy4KICAgIC8vLyBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciBmcm9tLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgdWludDI1NiBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgLy8vIEBwYXJhbSBfc2VjcmV0IHN0cmluZyBUaGUgc2VjcmV0IHBocmFzZSBwcm90ZWN0aW5nIHRoZSB0b2tlbnMuCiAgICBmdW5jdGlvbiBwcm90ZWN0ZWRVbmxvY2soYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfc2VjcmV0KSBleHRlcm5hbCB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBhZGRyZXNzIHRvID0gbXNnLnNlbmRlcjsKCiAgICAgICAgLy8gc3BlY2lhbCBjYXNlOiBtc2cuc2VuZGVyIGlzIHRoZSBvd25lciAoTWludCkKICAgICAgICBpZiAobXNnLnNlbmRlciA9PSBvd25lcikgewogICAgICAgICAgICB0byA9IHRoZUNvaW47CiAgICAgICAgfQoKICAgICAgICAvLyB2YWxpZGF0ZSBzZWNyZXQgYWdhaW5zdCBoYXNoCiAgICAgICAgcmVxdWlyZShjaGVja1NlY3JldCh0bywgX3NlY3JldCwgcHJvdGVjdGVkQmFsYW5jZXNbX2Zyb21dW3RvXS5oYXNoZWQpKTsKCiAgICAgICAgLy8gbXVzdCB0cmFuc2ZlciBhbGwgcHJvdGVjdGVkIHRva2VucyBhdCBvbmNlIGFzIHNlY3JldCB3aWxsIGhhdmUgYmVlbiBsZWFrZWQgb24gdGhlIGJsb2NrY2hhaW4KICAgICAgICByZXF1aXJlKHByb3RlY3RlZEJhbGFuY2VzW19mcm9tXVt0b10uYmFsYW5jZSA9PSBfdmFsdWUpOwoKICAgICAgICAvLyBhZGp1c3QgdGhlIGJhbGFuY2VzOiB0aGUgTWludCBpcyBob2xkaW5nIHRoZSB0b2tlbnMgaW4gZXNjcm93CiAgICAgICAgYmFsYW5jZXNbdGhlQ29pbl0gPSBiYWxhbmNlc1t0aGVDb2luXS5zdWIoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKF92YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gYWRqdXN0IHRoZSBwcm90ZWN0ZWQgYmFsYW5jZXMgYW5kIHByb3RlY3RlZCBzdXBwbHkKICAgICAgICBwcm90ZWN0ZWRCYWxhbmNlc1tfZnJvbV1bdG9dLmJhbGFuY2UgPSAwOwogICAgICAgIHByb3RlY3RlZFN1cHBseSA9IHByb3RlY3RlZFN1cHBseS5zdWIoX3ZhbHVlKTsKCiAgICAgICAgUHJvdGVjdGVkVW5sb2NrKF9mcm9tLCB0bywgX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgdG8sIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFJlY2xhaW0gcHJvdGVjdGVkIHRva2VucyBncmFudGVkIHRvIGEgc3BlY2lmaWVkIGFkZHJlc3MuCiAgICAvLy8gQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHRoZSB0b2tlbnMgd2VyZSBncmFudGVkIHRvLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgdWludDI1NiBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgZnVuY3Rpb24gcHJvdGVjdGVkUmVjbGFpbShhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGV4dGVybmFsIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFkZHJlc3MgZnJvbSA9IG1zZy5zZW5kZXI7CgogICAgICAgIC8vIHNwZWNpYWwgY2FzZTogbXNnLnNlbmRlciBpcyB0aGUgb3duZXIgKE1pbnQpCiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gb3duZXIpIHsKICAgICAgICAgICAgZnJvbSA9IHRoZUNvaW47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGp1c3QgdGhlIGJhbGFuY2VzOiB0cmFuc2ZlciB0aGUgdG9rZW5zIHRvIHRoZSBzZW5kZXIgZnJvbSB0aGUgTWludCwgd2hpY2ggd2FzIGhvbGRpbmcgdGhlbSBpbiBlc2Nyb3cKICAgICAgICAgICAgYmFsYW5jZXNbdGhlQ29pbl0gPSBiYWxhbmNlc1t0aGVDb2luXS5zdWIoX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbZnJvbV0gPSBiYWxhbmNlc1tmcm9tXS5hZGQoX3ZhbHVlKTsKICAgICAgICB9CgogICAgICAgIC8vIG11c3QgdHJhbnNmZXIgYWxsIHByb3RlY3RlZCB0b2tlbnMgYXQgb25jZQogICAgICAgIHJlcXVpcmUocHJvdGVjdGVkQmFsYW5jZXNbZnJvbV1bX3RvXS5iYWxhbmNlID09IF92YWx1ZSk7CiAgICAgICAgCiAgICAgICAgLy8gYWRqdXN0IHRoZSBwcm90ZWN0ZWQgYmFsYW5jZXMgYW5kIHByb3RlY3RlZCBzdXBwbHkKICAgICAgICBwcm90ZWN0ZWRCYWxhbmNlc1tmcm9tXVtfdG9dLmJhbGFuY2UgPSAwOwogICAgICAgIHByb3RlY3RlZFN1cHBseSA9IHByb3RlY3RlZFN1cHBseS5zdWIoX3ZhbHVlKTsKCiAgICAgICAgUHJvdGVjdGVkUmVjbGFpbShmcm9tLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IERlc3Ryb3lzIChyZW1vdmVzIGZyb20gc3VwcGx5KSBhIHNwZWNpZmljIGFtb3VudCBvZiB0b2tlbnMuCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgdWludDI1NiBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBidXJuZWQuCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX2Ftb3VudCkgZXh0ZXJuYWwgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgewogICAgICAgIC8vIFRoZSBNaW50IGlzIHRoZSBvd25lciBvZiB0aGlzIGNvbnRyYWN0LiBJbiB0aGlzIGltcGxlbWVudGF0aW9uLCB0aGUKICAgICAgICAvLyBhZGRyZXNzIG9mIHRoaXMgY29udHJhY3QgKHByb3h5IGZvciBvd25lcidzIGFjY291bnQpICBpcyB1c2VkIHRvIGNvbnRyb2wgCiAgICAgICAgLy8gdGhlIG1vbmV5IHN1cHBseS4gQXZvaWRzIHRoZSBwcm9ibGVtIG9mIGhhdmluZyB0byB0cmFuc2ZlciBiYWxhbmNlcyBvbiBvd25lciBjaGFuZ2UuCiAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW3RoZUNvaW5dLnN1Yihwcm90ZWN0ZWRTdXBwbHkpKTsgLy8gYWNjb3VudCBmb3IgcHJvdGVjdGVkIGJhbGFuY2VzCgogICAgICAgIC8vIGFkanVzdCB0aGUgYmFsYW5jZXMgYW5kIHN1cHBseQogICAgICAgIGJhbGFuY2VzW3RoZUNvaW5dID0gYmFsYW5jZXNbdGhlQ29pbl0uc3ViKF9hbW91bnQpOwogICAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF9hbW91bnQpOwoKICAgICAgICAvLyBub3QgcGFydCBvZiB0aGUgRVJDLTIwIHN0YW5kYXJkLCBidXQgcmVxdWlyZWQgYnkgRXRoZXJzY2FuCiAgICAgICAgVHJhbnNmZXIodGhlQ29pbiwgYWRkcmVzcygwKSwgX2Ftb3VudCk7CgogICAgICAgIEJ1cm4odGhlQ29pbiwgX2Ftb3VudCk7CiAgICB9CgogICAgLy8vIEBkZXYgRVJDMjAgYmVoYXZpb3VyIGJ1dCByZXZlcnQgaWYgcGF1c2VkCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAvLy8gQHBhcmFtIF92YWx1ZSB1aW50MjU2IFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzdXBlci5hcHByb3ZlKF9zcGVuZGVyLCBfdmFsdWUpOwogICAgfQoKICAgIC8vLyBAZGV2IEVSQzIwIGJlaGF2aW91ciBidXQgcmV2ZXJ0IGlmIHBhdXNlZAogICAgLy8vIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgIC8vLyBAcmV0dXJuIHVpbnQyNTYgc3BlY2lmeWluZyB0aGUgYW1vdW50IG9mIHRva2VucyBzdGlsbCBhdmFpbGFibGUgZm9yIHRoZSBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgICByZXR1cm4gc3VwZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IEVSQzIwIGJlaGF2aW91ciBidXQgcmV2ZXJ0IGlmIHBhdXNlZAogICAgLy8vIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHdoZW5Ob3RQYXVzZWQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIC8vICJ0cmFuc2ZlcnMiIHRvIGFkZHJlc3MoMCkgc2hvdWxkIG9ubHkgYmUgYnkgdGhlIGJ1cm4oKSBmdW5jdGlvbgogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIC8vLyBAZGV2IEVSQzIwIGJlaGF2aW91ciBidXQgcmV2ZXJ0IGlmIHBhdXNlZAogICAgLy8vIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20uCiAgICAvLy8gQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvLgogICAgLy8vIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZC4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvLyAidHJhbnNmZXJzIiB0byBhZGRyZXNzKDApIHNob3VsZCBvbmx5IGJlIGJ5IHRoZSBidXJuKCkgZnVuY3Rpb24KICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKCiAgICAgICAgLy8gc3BlY2lhbCBjYXNlOiBfZnJvbSBpcyB0aGUgTWludAogICAgICAgIC8vIG5vdGU6IHdpdGhpbiB0aGUgY3VycmVudCBEMSBDb2luIGRlc2lnbiwgc2hvdWxkIG5ldmVyIGVuY291bnRlciB0aGlzIGNhc2UKICAgICAgICBpZiAoX2Zyb20gPT0gdGhlQ29pbikgewogICAgICAgICAgICAvLyBlbnN1cmUgTWludCBpcyBub3QgZXhjZWVkaW5nIGl0cyBiYWxhbmNlIGxlc3MgcHJvdGVjdGVkIHN1cHBseQogICAgICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1t0aGVDb2luXS5zdWIocHJvdGVjdGVkU3VwcGx5KSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9Cn0='.
	

]
