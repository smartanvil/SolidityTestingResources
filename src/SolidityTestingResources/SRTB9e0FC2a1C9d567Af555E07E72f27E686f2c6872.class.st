Class {
	#name : #SRTB9e0FC2a1C9d567Af555E07E72f27E686f2c6872,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTB9e0FC2a1C9d567Af555E07E72f27E686f2c6872 >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCmNvbnRyYWN0IElFUkMyMFRva2VuIHsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7fQogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7fQogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcykge30KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHt9CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykge30KCiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KY29udHJhY3QgSXRva2VuUmVjaXBpZW50IHsKICBmdW5jdGlvbiByZWNlaXZlQXBwcm92YWwoYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdmFsdWUsIGFkZHJlc3MgX3Rva2VuLCBieXRlcyBfZXh0cmFEYXRhKTsKfQpjb250cmFjdCBJVG9rZW4gewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFN1cHBseSk7CiAgZnVuY3Rpb24gbWludFRva2VucyhhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSB7fQp9CmNvbnRyYWN0IElNaW50YWJsZVRva2VuIHsKICBmdW5jdGlvbiBtaW50VG9rZW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpe30KfQpjb250cmFjdCBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKICAgIGFkZHJlc3MgcHVibGljIG5ld093bmVyOwoKICAgIGZ1bmN0aW9uIE93bmVkKCkgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBtb2RpZmllciBvbmx5T3duZXIgewogICAgICAgIGFzc2VydChtc2cuc2VuZGVyID09IG93bmVyKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF9uZXdPd25lciAhPSBvd25lcik7CiAgICAgICAgbmV3T3duZXIgPSBfbmV3T3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0T3duZXJzaGlwKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpOwogICAgICAgIE93bmVyVXBkYXRlKG93bmVyLCBuZXdPd25lcik7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICBuZXdPd25lciA9IDB4MDsKICAgIH0KCiAgICBldmVudCBPd25lclVwZGF0ZShhZGRyZXNzIF9wcmV2T3duZXIsIGFkZHJlc3MgX25ld093bmVyKTsKfQpjb250cmFjdCBMb2NrYWJsZSBpcyBPd25lZHsKCiAgdWludDI1NiBwdWJsaWMgbG9ja2VkVW50aWxCbG9jazsKCiAgZXZlbnQgQ29udHJhY3RMb2NrZWQodWludDI1NiBfdW50aWxCbG9jaywgc3RyaW5nIF9yZWFzb24pOwoKICBtb2RpZmllciBsb2NrQWZmZWN0ZWQgewogICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGxvY2tlZFVudGlsQmxvY2spOwogICAgICBfOwogIH0KCiAgZnVuY3Rpb24gbG9ja0Zyb21TZWxmKHVpbnQyNTYgX3VudGlsQmxvY2ssIHN0cmluZyBfcmVhc29uKSBpbnRlcm5hbCB7CiAgICBsb2NrZWRVbnRpbEJsb2NrID0gX3VudGlsQmxvY2s7CiAgICBDb250cmFjdExvY2tlZChfdW50aWxCbG9jaywgX3JlYXNvbik7CiAgfQoKCiAgZnVuY3Rpb24gbG9ja1VudGlsKHVpbnQyNTYgX3VudGlsQmxvY2ssIHN0cmluZyBfcmVhc29uKSBvbmx5T3duZXIgewogICAgbG9ja2VkVW50aWxCbG9jayA9IF91bnRpbEJsb2NrOwogICAgQ29udHJhY3RMb2NrZWQoX3VudGlsQmxvY2ssIF9yZWFzb24pOwogIH0KfQpjb250cmFjdCBSZWVudHJuYWN5SGFuZGxpbmdDb250cmFjdHsKCiAgICBib29sIGxvY2tlZDsKCiAgICBtb2RpZmllciBub1JlZW50cmFuY3koKSB7CiAgICAgICAgcmVxdWlyZSghbG9ja2VkKTsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIF87CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICB9Cn0KCgoKCgoKCgoKCgoKCgpjb250cmFjdCBNdXNpY29ub21pQ3Jvd2RzYWxlIGlzIFJlZW50cm5hY3lIYW5kbGluZ0NvbnRyYWN0LCBPd25lZHsKCiAgc3RydWN0IENvbnRyaWJ1dG9yRGF0YXsKICAgIHVpbnQgcHJpb3JpdHlQYXNzQWxsb3dhbmNlOwogICAgdWludCBjb21tdW5pdHlBbGxvd2FuY2U7CiAgICBib29sIGlzQWN0aXZlOwogICAgdWludCBjb250cmlidXRpb25BbW91bnQ7CiAgICB1aW50IHRva2Vuc0lzc3VlZDsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBDb250cmlidXRvckRhdGEpIHB1YmxpYyBjb250cmlidXRvckxpc3Q7CiAgdWludCBuZXh0Q29udHJpYnV0b3JJbmRleDsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgY29udHJpYnV0b3JJbmRleGVzOwoKICBzdGF0ZSBwdWJsaWMgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5wZW5kaW5nU3RhcnQ7CiAgZW51bSBzdGF0ZSB7IHBlbmRpbmdTdGFydCwgcHJpb3JpdHlQYXNzLCBvcGVuZWRQcmlvcml0eVBhc3MsIGNyb3dkc2FsZSwgY3Jvd2RzYWxlRW5kZWQgfQoKICB1aW50IHB1YmxpYyBwcmVzYWxlU3RhcnRCbG9jayA9IDQyMTcyNDA7CiAgdWludCBwdWJsaWMgcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgPSA0MjIwNjMwOwogIHVpbnQgcHVibGljIGNyb3dkc2FsZVN0YXJ0QmxvY2sgPSA0MjI0MDMwOwogIHVpbnQgcHVibGljIGNyb3dkc2FsZUVuZGVkQmxvY2sgPSA0MzE5MTMwOwoKICBldmVudCBQcmVzYWxlU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBQcmVzYWxlVW5saW1pdGVkU3RhcnRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBDcm93ZHNhbGVTdGFydGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IENyb3dkc2FsZUVuZGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IEVycm9yU2VuZGluZ0VUSChhZGRyZXNzIHRvLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgTWluQ2FwUmVhY2hlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBNYXhDYXBSZWFjaGVkKHVpbnQgYmxvY2tOdW1iZXIpOwoKICBJVG9rZW4gdG9rZW4gPSBJVG9rZW4oMHgwKTsKICB1aW50IGV0aFRvTXVzaWNDb252ZXJzaW9uID0gMTQxNjsKCiAgdWludCBtaW5DYXAgPSA4ODI0MDAwMDAwMDAwMDAwMDAwMDAwOwogIHVpbnQgbWF4Q2FwID0gMTc2NDgwMDAwMDAwMDAwMDAwMDAwMDA7CiAgdWludCBldGhSYWlzZWQ7CgogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnQWRkcmVzczsKCiAgdWludCBuZXh0Q29udHJpYnV0b3JUb0NsYWltOwogIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSBoYXNDbGFpbWVkRXRoV2hlbkZhaWw7CgogIHVpbnQgbWF4VG9rZW5TdXBwbHkgPSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA7CiAgYm9vbCBvd25lckhhc0NsYWltZWRUb2tlbnM7CiAgdWludCBjb2ZvdW5kaXRSZXdhcmQgPSAyNzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOwogIGFkZHJlc3MgY29mb3VuZGl0QWRkcmVzcyA9IDB4OEMwREI2OTVkZTg3NmE0MmNFMmUxMzNjYTAwZmRGNTlBOTE2NjcwODsKICBib29sIGNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnM7CgogIC8vCiAgLy8gVW5uYW1lZCBmdW5jdGlvbiB0aGF0IHJ1bnMgd2hlbiBldGggaXMgc2VudCB0byB0aGUgY29udHJhY3QKICAvLwogIGZ1bmN0aW9uKCkgbm9SZWVudHJhbmN5IHBheWFibGV7CiAgICByZXF1aXJlKG1zZy52YWx1ZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJvdyBpZiB2YWx1ZSBpcyAwCgogICAgYm9vbCBzdGF0ZUNoYW5nZWQgPSBjaGVja0Nyb3dkc2FsZVN0YXRlKCk7ICAgICAgLy8gQ2hlY2sgYmxvY2tzIGFuZCBjYWxpYnJhdGUgY3Jvd2RzYWxlIHN0YXRlCgogICAgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnByaW9yaXR5UGFzcyl7CiAgICAgIGlmIChjb250cmlidXRvckxpc3RbbXNnLnNlbmRlcl0uaXNBY3RpdmUpeyAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBpcyBpbiBwcmlvcml0eVBhc3MKICAgICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgIC8vIFByb2Nlc3MgdHJhbnNhY3Rpb24gYW5kIGlzc3VlIHRva2VucwogICAgICB9ZWxzZXsKICAgICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgIC8vIFNldCBzdGF0ZSBhbmQgcmV0dXJuIGZ1bmRzIG9yIHRocm93CiAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYoY3Jvd2RzYWxlU3RhdGUgPT0gc3RhdGUub3BlbmVkUHJpb3JpdHlQYXNzKXsKICAgICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFttc2cuc2VuZGVyXS5pc0FjdGl2ZSl7ICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGlzIGluIHByaW9yaXR5UGFzcwogICAgICAgIHByb2Nlc3NUcmFuc2FjdGlvbihtc2cuc2VuZGVyLCBtc2cudmFsdWUpOyAgLy8gUHJvY2VzcyB0cmFuc2FjdGlvbiBhbmQgaXNzdWUgdG9rZW5zCiAgICAgIH1lbHNlewogICAgICAgIHJlZnVuZFRyYW5zYWN0aW9uKHN0YXRlQ2hhbmdlZCk7ICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgICAgfQogICAgfQogICAgZWxzZSBpZihjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5jcm93ZHNhbGUpewogICAgICBwcm9jZXNzVHJhbnNhY3Rpb24obXNnLnNlbmRlciwgbXNnLnZhbHVlKTsgICAgLy8gUHJvY2VzcyB0cmFuc2FjdGlvbiBhbmQgaXNzdWUgdG9rZW5zCiAgICB9CiAgICBlbHNlewogICAgICByZWZ1bmRUcmFuc2FjdGlvbihzdGF0ZUNoYW5nZWQpOyAgICAgICAgICAgICAgLy8gU2V0IHN0YXRlIGFuZCByZXR1cm4gZnVuZHMgb3IgdGhyb3cKICAgIH0KICB9CgogIC8vCiAgLy8gQ2hlY2sgY3Jvd2RzYWxlIHN0YXRlIGFuZCBjYWxpYnJhdGUgaXQKICAvLwogIGZ1bmN0aW9uIGNoZWNrQ3Jvd2RzYWxlU3RhdGUoKSBpbnRlcm5hbCByZXR1cm5zIChib29sKXsKICAgIGlmIChldGhSYWlzZWQgPT0gbWF4Q2FwICYmIGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLmNyb3dkc2FsZUVuZGVkKXsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNhcCBpcyByZWFjaGVkCiAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUuY3Jvd2RzYWxlRW5kZWQ7CiAgICAgIE1heENhcFJlYWNoZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIHRoZSBjcm93ZHNhbGUKICAgICAgQ3Jvd2RzYWxlRW5kZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgaWYgKGJsb2NrLm51bWJlciA+IHByZXNhbGVTdGFydEJsb2NrICYmIGJsb2NrLm51bWJlciA8PSBwcmVzYWxlVW5saW1pdGVkU3RhcnRCbG9jayl7ICAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gcHJlc2FsZSBwaGFzZQogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUucHJpb3JpdHlQYXNzKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGF0ZSBuZWVkcyB0byBiZSBjaGFuZ2VkCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5wcmlvcml0eVBhc3M7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBQcmVzYWxlU3RhcnRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfWVsc2UgaWYoYmxvY2subnVtYmVyID4gcHJlc2FsZVVubGltaXRlZFN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZVN0YXJ0QmxvY2speyAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gcHJlc2FsZSB1bmxpbWl0ZWQgcGhhc2UKICAgICAgaWYgKGNyb3dkc2FsZVN0YXRlICE9IHN0YXRlLm9wZW5lZFByaW9yaXR5UGFzcyl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3RhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZAogICAgICAgIGNyb3dkc2FsZVN0YXRlID0gc3RhdGUub3BlbmVkUHJpb3JpdHlQYXNzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbmV3IHN0YXRlCiAgICAgICAgUHJlc2FsZVVubGltaXRlZFN0YXJ0ZWQoYmxvY2subnVtYmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJhaXNlIGV2ZW50CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH1lbHNlIGlmKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZVN0YXJ0QmxvY2sgJiYgYmxvY2subnVtYmVyIDw9IGNyb3dkc2FsZUVuZGVkQmxvY2speyAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIGNyb3dkc2FsZSBzdGF0ZQogICAgICBpZiAoY3Jvd2RzYWxlU3RhdGUgIT0gc3RhdGUuY3Jvd2RzYWxlKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGF0ZSBuZWVkcyB0byBiZSBjaGFuZ2VkCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVTdGFydGVkKGJsb2NrLm51bWJlcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfWVsc2V7CiAgICAgIGlmIChjcm93ZHNhbGVTdGF0ZSAhPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZCAmJiBibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrKXsgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBpcyBvdmVyCiAgICAgICAgY3Jvd2RzYWxlU3RhdGUgPSBzdGF0ZS5jcm93ZHNhbGVFbmRlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBuZXcgc3RhdGUKICAgICAgICBDcm93ZHNhbGVFbmRlZChibG9jay5udW1iZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmFpc2UgZXZlbnQKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8KICAvLyBEZWNpZGUgaWYgdGhyb3cgb3Igb25seSByZXR1cm4gZXRoZXIKICAvLwogIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKGJvb2wgX3N0YXRlQ2hhbmdlZCkgaW50ZXJuYWx7CiAgICBpZiAoX3N0YXRlQ2hhbmdlZCl7CiAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgIH1lbHNlewogICAgICByZXZlcnQoKTsKICAgIH0KICB9CgogIC8vCiAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHVzZXIgY2FuIGNvbnRyaWJ1dGUKICAvLwogIGZ1bmN0aW9uIGNhbGN1bGF0ZU1heENvbnRyaWJ1dGlvbihhZGRyZXNzIF9jb250cmlidXRvcikgY29uc3RhbnQgcmV0dXJucyAodWludCBtYXhDb250cmlidXRpb24pewogICAgdWludCBtYXhDb250cmliOwogICAgaWYgKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLnByaW9yaXR5UGFzcyl7ICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHByaW9yaXR5IHBhc3MKICAgICAgbWF4Q29udHJpYiA9IGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnByaW9yaXR5UGFzc0FsbG93YW5jZSArIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbW11bml0eUFsbG93YW5jZSAtIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudDsKICAgICAgaWYgKG1heENvbnRyaWIgPiAobWF4Q2FwIC0gZXRoUmFpc2VkKSl7ICAgLy8gQ2hlY2sgaWYgbWF4IGNvbnRyaWJ1dGlvbiBpcyBtb3JlIHRoYXQgbWF4IGNhcAogICAgICAgIG1heENvbnRyaWIgPSBtYXhDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAvLyBBbHRlciBtYXggY2FwCiAgICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgIG1heENvbnRyaWIgPSBtYXhDYXAgLSBldGhSYWlzZWQ7ICAgICAgICAgIC8vIEFsdGVyIG1heCBjYXAKICAgIH0KICAgIHJldHVybiBtYXhDb250cmliOwogIH0KCiAgLy8KICAvLyBJc3N1ZSB0b2tlbnMgYW5kIHJldHVybiBpZiB0aGVyZSBpcyBvdmVyZmxvdwogIC8vCiAgZnVuY3Rpb24gcHJvY2Vzc1RyYW5zYWN0aW9uKGFkZHJlc3MgX2NvbnRyaWJ1dG9yLCB1aW50IF9hbW91bnQpIGludGVybmFsewogICAgdWludCBtYXhDb250cmlidXRpb24gPSBjYWxjdWxhdGVNYXhDb250cmlidXRpb24oX2NvbnRyaWJ1dG9yKTsgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBtYXggdXNlcnMgY29udHJpYnV0aW9uCiAgICB1aW50IGNvbnRyaWJ1dGlvbkFtb3VudCA9IF9hbW91bnQ7CiAgICB1aW50IHJldHVybkFtb3VudCA9IDA7CiAgICBpZiAobWF4Q29udHJpYnV0aW9uIDwgX2Ftb3VudCl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWF4IGNvbnRyaWJ1dGlvbiBpcyBsb3dlciB0aGFuIF9hbW91bnQgc2VudAogICAgICBjb250cmlidXRpb25BbW91bnQgPSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IHVzZXIgY29udGlidXRlcyBoaXMgbWF4aW11bSBhbG93ZWQgY29udHJpYnV0aW9uCiAgICAgIHJldHVybkFtb3VudCA9IF9hbW91bnQgLSBtYXhDb250cmlidXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhvd211Y2ggaGUgbXVzdCBnZXQgYmFjawogICAgfQoKICAgIGlmIChldGhSYWlzZWQgKyBjb250cmlidXRpb25BbW91bnQgPiBtaW5DYXAgJiYgbWluQ2FwIDwgZXRoUmFpc2VkKSBNaW5DYXBSZWFjaGVkKGJsb2NrLm51bWJlcik7CgogICAgaWYgKGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID09IGZhbHNlKXsgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNvbnRyaWJ1dGVkCiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmlzQWN0aXZlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGhpcyBhY3Rpdml0eSB0byB0cnVlCiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLmNvbnRyaWJ1dGlvbkFtb3VudCA9IGNvbnRyaWJ1dGlvbkFtb3VudDsgICAgLy8gU2V0IGhpcyBjb250cmlidXRpb24KICAgICAgY29udHJpYnV0b3JJbmRleGVzW25leHRDb250cmlidXRvckluZGV4XSA9IF9jb250cmlidXRvcjsgICAgICAgICAgICAgICAgICAvLyBTZXQgY29udHJpYnV0b3JzIGluZGV4CiAgICAgIG5leHRDb250cmlidXRvckluZGV4Kys7CiAgICB9CiAgICBlbHNlewogICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yXS5jb250cmlidXRpb25BbW91bnQgKz0gY29udHJpYnV0aW9uQW1vdW50OyAgIC8vIEFkZCBjb250cmlidXRpb24gYW1vdW50IHRvIGV4aXN0aW5nIGNvbnRyaWJ1dG9yCiAgICB9CiAgICBldGhSYWlzZWQgKz0gY29udHJpYnV0aW9uQW1vdW50OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRvIGV0aCByYWlzZWQKCiAgICB1aW50IHRva2VuQW1vdW50ID0gY29udHJpYnV0aW9uQW1vdW50ICogZXRoVG9NdXNpY0NvbnZlcnNpb247ICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhvdyBtdWNoIHRva2VucyBtdXN0IGNvbnRyaWJ1dG9yIGdldAogICAgdG9rZW4ubWludFRva2VucyhfY29udHJpYnV0b3IsIHRva2VuQW1vdW50KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzc3VlIG5ldyB0b2tlbnMKICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JdLnRva2Vuc0lzc3VlZCArPSB0b2tlbkFtb3VudDsgICAgICAgICAgICAgICAgICAvLyBsb2cgdG9rZW4gaXNzdWFuY2UKCiAgICBpZiAocmV0dXJuQW1vdW50ICE9IDApIF9jb250cmlidXRvci50cmFuc2ZlcihyZXR1cm5BbW91bnQpOyAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG92ZXJmbG93IG9mIGV0aGVyCiAgfQoKICAvLwogIC8vIFB1c2ggY29udHJpYnV0b3IgZGF0YSB0byB0aGUgY29udHJhY3QgYmVmb3JlIHRoZSBjcm93ZHNhbGUgc28gdGhhdCB0aGV5IGFyZSBlbGlnaWJsZSBmb3IgcHJpb3JpdCBwYXNzCiAgLy8KICBmdW5jdGlvbiBlZGl0Q29udHJpYnV0b3JzKGFkZHJlc3NbXSBfY29udHJpYnV0b3JBZGRyZXNzZXMsIHVpbnRbXSBfY29udHJpYnV0b3JQUEFsbG93YW5jZXMsIHVpbnRbXSBfY29udHJpYnV0b3JDb21tdW5pdHlBbGxvd2FuY2UpIG9ubHlPd25lcnsKICAgIC8vcmVxdWlyZShjcm93ZHNhbGVTdGF0ZSA9PSBzdGF0ZS5wZW5kaW5nU3RhcnQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBzdGFydGVkCiAgICByZXF1aXJlKF9jb250cmlidXRvckFkZHJlc3Nlcy5sZW5ndGggPT0gX2NvbnRyaWJ1dG9yUFBBbGxvd2FuY2VzLmxlbmd0aCAmJiBfY29udHJpYnV0b3JBZGRyZXNzZXMubGVuZ3RoID09IF9jb250cmlidXRvckNvbW11bml0eUFsbG93YW5jZS5sZW5ndGgpOyAvLyBDaGVjayBpZiBpbnB1dCBkYXRhIGlzIGNvcnJlY3QKCiAgICBmb3IodWludCBjbnQgPSAwOyBjbnQgPCBfY29udHJpYnV0b3JBZGRyZXNzZXMubGVuZ3RoOyBjbnQrKyl7CiAgICAgIGNvbnRyaWJ1dG9yTGlzdFtfY29udHJpYnV0b3JBZGRyZXNzZXNbY250XV0uaXNBY3RpdmUgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBY3RpdmF0ZSBjb250cmlidXRvcgogICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF1dLnByaW9yaXR5UGFzc0FsbG93YW5jZSA9IF9jb250cmlidXRvclBQQWxsb3dhbmNlc1tjbnRdOyAgLy8gU2V0IFBQIGFsbG93YW5jZQogICAgICBjb250cmlidXRvckxpc3RbX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF1dLmNvbW11bml0eUFsbG93YW5jZSA9IF9jb250cmlidXRvckNvbW11bml0eUFsbG93YW5jZVtjbnRdOy8vIFNldCBjb21tdW5pdHkgd2hpdGVsaXN0IGFsbG93YW5jZQogICAgICBjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9ySW5kZXhdID0gX2NvbnRyaWJ1dG9yQWRkcmVzc2VzW2NudF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHVzZXJzIGluZGV4CiAgICAgIG5leHRDb250cmlidXRvckluZGV4Kys7CiAgICB9CiAgfQoKICAvLwogIC8vIE1ldGhvZCBpcyBuZWVkZWQgZm9yIHJlY292ZXJpbmcgdG9rZW5zIGFjY2VkZW50YWx5IHNlbnQgdG8gdG9rZW4gYWRkcmVzcwogIC8vCiAgZnVuY3Rpb24gc2FsdmFnZVRva2Vuc0Zyb21Db250cmFjdChhZGRyZXNzIF90b2tlbkFkZHJlc3MsIGFkZHJlc3MgX3RvLCB1aW50IF9hbW91bnQpIG9ubHlPd25lcnsKICAgIElFUkMyMFRva2VuKF90b2tlbkFkZHJlc3MpLnRyYW5zZmVyKF90bywgX2Ftb3VudCk7CiAgfQoKICAvLwogIC8vIHdpdGhkcmF3RXRoIHdoZW4gbWluaW11bSBjYXAgaXMgcmVhY2hlZAogIC8vCiAgZnVuY3Rpb24gd2l0aGRyYXdFdGgoKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsKICAgIHJlcXVpcmUoZXRoUmFpc2VkID49IG1pbkNhcCk7CgogICAgbXVsdGlzaWdBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICAvLwogIC8vIFVzZXJzIGNhbiBjbGFpbSB0aGVpciBjb250cmlidXRpb24gaWYgbWluIGNhcCBpcyBub3QgcmFpc2VkCiAgLy8KICBmdW5jdGlvbiBjbGFpbUV0aElmRmFpbGVkKCl7CiAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGNyb3dkc2FsZUVuZGVkQmxvY2sgJiYgZXRoUmFpc2VkIDwgbWluQ2FwKTsgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBmYWlsZWQKICAgIHJlcXVpcmUoY29udHJpYnV0b3JMaXN0W21zZy5zZW5kZXJdLmNvbnRyaWJ1dGlvbkFtb3VudCA+IDApOyAgICAgICAgICAvLyBDaGVjayBpZiBjb250cmlidXRvciBoYXMgY29udHJpYnV0ZWQgdG8gY3Jvd2RzYWxlRW5kZWRCbG9jawogICAgcmVxdWlyZSghaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW21zZy5zZW5kZXJdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRyaWJ1dG9yIGhhcyBhbHJlYWR5IGNsYWltZWQgaGlzIGV0aAoKICAgIHVpbnQgZXRoQ29udHJpYnV0ZWQgPSBjb250cmlidXRvckxpc3RbbXNnLnNlbmRlcl0uY29udHJpYnV0aW9uQW1vdW50OyAvLyBHZXQgY29udHJpYnV0b3JzIGNvbnRyaWJ1dGlvbgogICAgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW21zZy5zZW5kZXJdID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGF0IGhlIGhhcyBjbGFpbWVkCiAgICBpZiAoIW1zZy5zZW5kZXIuc2VuZChldGhDb250cmlidXRlZCkpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmdW5kIGV0aAogICAgICBFcnJvclNlbmRpbmdFVEgobXNnLnNlbmRlciwgZXRoQ29udHJpYnV0ZWQpOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGlzc3VlIHJhaXNlIGV2ZW50IGZvciBtYW51YWwgcmVjb3ZlcnkKICAgIH0KICB9CgogIC8vCiAgLy8gT3duZXIgY2FuIGJhdGNoIHJldHVybiBjb250cmlidXRvcnMgY29udHJpYnV0aW9ucyhldGgpCiAgLy8KICBmdW5jdGlvbiBiYXRjaFJldHVybkV0aElmRmFpbGVkKHVpbnQgX251bWJlck9mUmV0dXJucykgb25seU93bmVyewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPiBjcm93ZHNhbGVFbmRlZEJsb2NrICYmIGV0aFJhaXNlZCA8IG1pbkNhcCk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZmFpbGVkCiAgICBhZGRyZXNzIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3M7CiAgICB1aW50IGNvbnRyaWJ1dGlvbjsKICAgIGZvciAodWludCBjbnQgPSAwOyBjbnQgPCBfbnVtYmVyT2ZSZXR1cm5zOyBjbnQrKyl7CiAgICAgIGN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3MgPSBjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9yVG9DbGFpbV07ICAgICAgICAgLy8gR2V0IG5leHQgdW5jbGFpbWVkIHBhcnRpY2lwYW50CiAgICAgIGlmIChjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzID09IDB4MCkgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHRoZSBwYXJ0aWNpcGFudHMgd2VyZSBjb21wZW5zYXRlZAogICAgICBpZiAoIWhhc0NsYWltZWRFdGhXaGVuRmFpbFtjdXJyZW50UGFydGljaXBhbnRBZGRyZXNzXSkgeyAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBhcnRpY2lwYW50IGhhcyBhbHJlYWR5IGNsYWltZWQKICAgICAgICBjb250cmlidXRpb24gPSBjb250cmlidXRvckxpc3RbY3VycmVudFBhcnRpY2lwYW50QWRkcmVzc10uY29udHJpYnV0aW9uQW1vdW50OyAvLyBHZXQgY29udHJpYnV0aW9uIG9mIHBhcnRpY2lwYW50CiAgICAgICAgaGFzQ2xhaW1lZEV0aFdoZW5GYWlsW2N1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3NdID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoYXQgaGUgaGFzIGNsYWltZWQKICAgICAgICBpZiAoIWN1cnJlbnRQYXJ0aWNpcGFudEFkZHJlc3Muc2VuZChjb250cmlidXRpb24pKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZ1bmQgZXRoCiAgICAgICAgICBFcnJvclNlbmRpbmdFVEgoY3VycmVudFBhcnRpY2lwYW50QWRkcmVzcywgY29udHJpYnV0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaXNzdWUgcmFpc2UgZXZlbnQgZm9yIG1hbnVhbCByZWNvdmVyeQogICAgICAgIH0KICAgICAgfQogICAgICBuZXh0Q29udHJpYnV0b3JUb0NsYWltICs9IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGVhdAogICAgfQogIH0KCiAgLy8KICAvLyBJZiB0aGVyZSB3ZXJlIGFueSBpc3N1ZS9hdHRhY2ggd2l0aCByZWZ1bmQgb3duZXIgY2FuIHdpdGhyYXcgZXRoIGF0IHRoZSBlbmQgZm9yIG1hbnVhbCByZWNvdmVyeQogIC8vCiAgZnVuY3Rpb24gd2l0aGRyYXdSZW1haW5pbmdCYWxhbmNlRm9yTWFudWFsUmVjb3ZlcnkoKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBldGggdG8gY2xhaW0KICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gY3Jvd2RzYWxlRW5kZWRCbG9jayk7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjcm93ZHNhbGUgaXMgb3ZlcgogICAgcmVxdWlyZShjb250cmlidXRvckluZGV4ZXNbbmV4dENvbnRyaWJ1dG9yVG9DbGFpbV0gPT0gMHgwKTsgIC8vIENoZWNrIGlmIGFsbCB0aGUgdXNlcnMgd2VyZSByZWZ1bmRlZAogICAgbXVsdGlzaWdBZGRyZXNzLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7ICAgICAgICAgICAgICAgICAgICAgIC8vIFdpdGhkcmF3IHRvIG11bHRpc2lnCiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgbXVsdGlzaWcgYWRkcmVzcyBmb3IgY3Jvd2RzYWxlCiAgLy8KICBmdW5jdGlvbiBzZXRNdWx0aXNpZ0FkZHJlc3MoYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgbXVsdGlzaWdBZGRyZXNzID0gX25ld0FkZHJlc3M7CiAgfQoKICAvLwogIC8vIE93bmVyIGNhbiBzZXQgdG9rZW4gYWRkcmVzcyB3aGVyZSBtaW50cyB3aWxsIGhhcHBlbgogIC8vCiAgZnVuY3Rpb24gc2V0VG9rZW4oYWRkcmVzcyBfbmV3QWRkcmVzcykgb25seU93bmVyewogICAgdG9rZW4gPSBJVG9rZW4oX25ld0FkZHJlc3MpOwogIH0KCiAgLy8KICAvLyBPd25lciBjYW4gY2xhaW0gdGVhbXMgdG9rZW5zIHdoZW4gY3Jvd2RzYWxlIGhhcyBzdWNjZXNzZnVsbHkgZW5kZWQKICAvLwogIGZ1bmN0aW9uIGNsYWltQ29yZVRlYW1zVG9rZW5zKGFkZHJlc3MgX3RvKSBvbmx5T3duZXJ7CiAgICByZXF1aXJlKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLmNyb3dkc2FsZUVuZGVkKTsgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNyb3dkc2FsZSBoYXMgZW5kZWQKICAgIHJlcXVpcmUoIW93bmVySGFzQ2xhaW1lZFRva2Vucyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb3duZXIgaGFzIGFsbHJlYWR5IGNsYWltZWQgdG9rZW5zCgogICAgdWludCBkZXZSZXdhcmQgPSBtYXhUb2tlblN1cHBseSAtIHRva2VuLnRvdGFsU3VwcGx5KCk7CiAgICBpZiAoIWNvZm91bmRpdEhhc0NsYWltZWRUb2tlbnMpIGRldlJld2FyZCAtPSBjb2ZvdW5kaXRSZXdhcmQ7IC8vIElmIGNvZm91bmRpdCBoYXMgY2xhaW1lZCB0b2tlbnMgaXRzIG9rIGlmIG5vdCBzZXQgYXNpZGUgY29mb3VuZGl0UmV3YXJkCiAgICB0b2tlbi5taW50VG9rZW5zKF90bywgZGV2UmV3YXJkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzc3VlIFRlYW1zIHRva2VucwogICAgb3duZXJIYXNDbGFpbWVkVG9rZW5zID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbG9jayBmdXJ0aGVyIG1pbnRzIGZyb20gdGhpcyBmdW5jdGlvbgogIH0KCiAgLy8KICAvLyBDb2ZvdW5kaXQgY2FuIGNsYWltIHRoZWlyIHRva2VucwogIC8vCiAgZnVuY3Rpb24gY2xhaW1Db2ZvdW5kaXRUb2tlbnMoKXsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb2ZvdW5kaXRBZGRyZXNzKTsgICAgICAgICAgICAvLyBDaGVjayBpZiBzZW5kZXIgaXMgY29mb3VuZGl0CiAgICByZXF1aXJlKGNyb3dkc2FsZVN0YXRlID09IHN0YXRlLmNyb3dkc2FsZUVuZGVkKTsgICAgLy8gQ2hlY2sgaWYgY3Jvd2RzYWxlIGhhcyBlbmRlZAogICAgcmVxdWlyZSghY29mb3VuZGl0SGFzQ2xhaW1lZFRva2Vucyk7ICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvZm91bmRpdCBoYXMgYWxscmVhZHkgY2xhaW1lZCB0b2tlbnMKCiAgICB0b2tlbi5taW50VG9rZW5zKGNvZm91bmRpdEFkZHJlc3MsIGNvZm91bmRpdFJld2FyZCk7Ly8gSXNzdWUgY29mb3VuZGl0IHRva2VucwogICAgY29mb3VuZGl0SGFzQ2xhaW1lZFRva2VucyA9IHRydWU7ICAgICAgICAgICAgICAgICAgIC8vIEJsb2NrIGZ1cnRoZXIgbWludHMgZnJvbSB0aGlzIGZ1bmN0aW9uCiAgfQoKICBmdW5jdGlvbiBnZXRUb2tlbkFkZHJlc3MoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpewogICAgcmV0dXJuIGFkZHJlc3ModG9rZW4pOwogIH0KfQ=='.
	

]
