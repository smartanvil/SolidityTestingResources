Class {
	#name : #SRT33201831496217a779bf6169038dd9232771f179,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT33201831496217a779bf6169038dd9232771f179 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTc7Cgpjb250cmFjdCBBY2Nlc3NDb250cm9sIHsKICAgIGFkZHJlc3MgcHVibGljIGNyZWF0b3JBZGRyZXNzOwogICAgdWludDE2IHB1YmxpYyB0b3RhbFNlcmFwaGltcyA9IDA7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBzZXJhcGhpbXM7CgogICAgYm9vbCBwdWJsaWMgaXNNYWludGVuYW5jZU1vZGUgPSB0cnVlOwogCiAgICBtb2RpZmllciBvbmx5Q1JFQVRPUigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gY3JlYXRvckFkZHJlc3MpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgb25seVNFUkFQSElNKCkgewogICAgICAgIHJlcXVpcmUoc2VyYXBoaW1zW21zZy5zZW5kZXJdID09IHRydWUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGlzQ29udHJhY3RBY3RpdmUgewogICAgICAgIHJlcXVpcmUoIWlzTWFpbnRlbmFuY2VNb2RlKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gQWNjZXNzQ29udHJvbCgpIHB1YmxpYyB7CiAgICAgICAgY3JlYXRvckFkZHJlc3MgPSBtc2cuc2VuZGVyOwogICAgfQogICAgCgogICAgZnVuY3Rpb24gYWRkU0VSQVBISU0oYWRkcmVzcyBfbmV3U2VyYXBoaW0pIG9ubHlDUkVBVE9SIHB1YmxpYyB7CiAgICAgICAgaWYgKHNlcmFwaGltc1tfbmV3U2VyYXBoaW1dID09IGZhbHNlKSB7CiAgICAgICAgICAgIHNlcmFwaGltc1tfbmV3U2VyYXBoaW1dID0gdHJ1ZTsKICAgICAgICAgICAgdG90YWxTZXJhcGhpbXMgKz0gMTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbW92ZVNFUkFQSElNKGFkZHJlc3MgX29sZFNlcmFwaGltKSBvbmx5Q1JFQVRPUiBwdWJsaWMgewogICAgICAgIGlmIChzZXJhcGhpbXNbX29sZFNlcmFwaGltXSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHNlcmFwaGltc1tfb2xkU2VyYXBoaW1dID0gZmFsc2U7CiAgICAgICAgICAgIHRvdGFsU2VyYXBoaW1zIC09IDE7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZU1haW50ZW5hbmNlTW9kZShib29sIF9pc01haW50YWluaW5nKSBvbmx5Q1JFQVRPUiBwdWJsaWMgewogICAgICAgIGlzTWFpbnRlbmFuY2VNb2RlID0gX2lzTWFpbnRhaW5pbmc7CiAgICB9CgogIAp9IAoKCmNvbnRyYWN0IElCYXR0bGVib2FyZERhdGEgaXMgQWNjZXNzQ29udHJvbCAgewoKICAKCiAgICAgIC8vIHdyaXRlIGZ1bmN0aW9ucwogIApmdW5jdGlvbiBjcmVhdGVCYXR0bGVib2FyZCh1aW50IHByaXplLCB1aW50OCByZXN0cmljdGlvbnMpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCByZXR1cm5zICh1aW50MTYpOwpmdW5jdGlvbiBraWxsTW9uc3Rlcih1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggbW9uc3RlcklkKSAgb25seVNFUkFQSElNIGV4dGVybmFsOwpmdW5jdGlvbiBjcmVhdGVOdWxsVGlsZSh1aW50MTYgX2JhdHRsZWJvYXJkSWQpIHByaXZhdGUgOwpmdW5jdGlvbiBjcmVhdGVUaWxlKHVpbnQxNiBfYmF0dGxlYm9hcmRJZCwgdWludDggX3RpbGVUeXBlLCB1aW50OCBfdmFsdWUsIHVpbnQ4IF9wb3NpdGlvbiwgdWludDMyIF9ocCwgdWludDE2IF9wZXRQb3dlciwgdWludDY0IF9hbmdlbElkLCB1aW50NjQgX3BldElkLCBhZGRyZXNzIF9vd25lciwgdWludDggX3RlYW0pIG9ubHlTRVJBUEhJTSBleHRlcm5hbCAgcmV0dXJucyAodWludDgpOwpmdW5jdGlvbiBraWxsVGlsZSh1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggdGlsZUlkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgOwpmdW5jdGlvbiBhZGRUZWFtdG9Cb2FyZCh1aW50MTYgYmF0dGxlYm9hcmRJZCwgYWRkcmVzcyBvd25lciwgdWludDggdGVhbSkgb25seVNFUkFQSElNIGV4dGVybmFsOwpmdW5jdGlvbiBzZXRUaWxlUG9zaXRpb24gKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQsIHVpbnQ4IF9wb3NpdGlvblRvKSBvbmx5U0VSQVBISU0gcHVibGljIDsKZnVuY3Rpb24gc2V0VGlsZUhwKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQsIHVpbnQzMiBfaHApIG9ubHlTRVJBUEhJTSBleHRlcm5hbCA7CmZ1bmN0aW9uIGFkZE1lZGFsQnVybmVkKHVpbnQxNiBiYXR0bGVib2FyZElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgOwpmdW5jdGlvbiBzZXRMYXN0TW92ZVRpbWUodWludDE2IGJhdHRsZWJvYXJkSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCA7CmZ1bmN0aW9uIGl0ZXJhdGVUdXJuKHVpbnQxNiBiYXR0bGVib2FyZElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgOwpmdW5jdGlvbiBraWxsQm9hcmQodWludDE2IGJhdHRsZWJvYXJkSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCA7CmZ1bmN0aW9uIGNsZWFyQW5nZWxzRnJvbUJvYXJkKHVpbnQxNiBiYXR0bGVib2FyZElkKSBwcml2YXRlOwovL1JlYWQgZnVuY3Rpb25zCiAgICAgCmZ1bmN0aW9uIGdldFRpbGVIcCh1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggdGlsZUlkKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50MzIpIDsKZnVuY3Rpb24gZ2V0TWVkYWxzQnVybmVkKHVpbnQxNiBiYXR0bGVib2FyZElkKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50OCkgOwpmdW5jdGlvbiBnZXRUZWFtKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIGV4dGVybmFsIHJldHVybnMgKHVpbnQ4KSA7CmZ1bmN0aW9uIGdldE1heEZyZWVUZWFtcygpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCk7CmZ1bmN0aW9uIGdldEJhcnJpZXJOdW0odWludDE2IGJhdHRsZWJvYXJkSWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCkgOwpmdW5jdGlvbiBnZXRUaWxlRnJvbUJhdHRsZWJvYXJkKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCB0aWxlVHlwZSwgdWludDggdmFsdWUsIHVpbnQ4IGlkLCB1aW50OCBwb3NpdGlvbiwgdWludDMyIGhwLCB1aW50MTYgcGV0UG93ZXIsIHVpbnQ2NCBhbmdlbElkLCB1aW50NjQgcGV0SWQsIGJvb2wgaXNMaXZlLCBhZGRyZXNzIG93bmVyKSAgIDsKZnVuY3Rpb24gZ2V0VGlsZUlEQnlPd25lcih1aW50MTYgYmF0dGxlYm9hcmRJZCwgYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50OCkgOwpmdW5jdGlvbiBnZXRQZXRieVRpbGVJZCggdWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRpbGVJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ2NCkgOwpmdW5jdGlvbiBnZXRPd25lciAodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRlYW0sICB1aW50OCBvd25lck51bWJlcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYWRkcmVzcyk7CmZ1bmN0aW9uIGdldFRpbGVJRGJ5UG9zaXRpb24odWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHBvc2l0aW9uKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIDsKZnVuY3Rpb24gZ2V0UG9zaXRpb25Gcm9tQmF0dGxlYm9hcmQodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IF9wb3NpdGlvbikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IHRpbGVUeXBlLCB1aW50OCB2YWx1ZSwgdWludDggaWQsIHVpbnQ4IHBvc2l0aW9uLCB1aW50MzIgaHAsIHVpbnQzMiBwZXRQb3dlciwgdWludDY0IGFuZ2VsSWQsIHVpbnQ2NCBwZXRJZCwgYm9vbCBpc0xpdmUpICA7CmZ1bmN0aW9uIGdldEJhdHRsZWJvYXJkKHVpbnQxNiBpZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IHR1cm4sIGJvb2wgaXNMaXZlLCB1aW50IHByaXplLCB1aW50OCBudW1UZWFtcywgdWludDggbnVtVGlsZXMsIHVpbnQ4IGNyZWF0ZWRCYXJyaWVycywgdWludDggcmVzdHJpY3Rpb25zLCB1aW50IGxhc3RNb3ZlVGltZSwgdWludDggbnVtVGVhbXMxLCB1aW50OCBudW1UZWFtczIsIHVpbnQ4IG1vbnN0ZXIxLCB1aW50OCBtb25zdGVyMikgOwpmdW5jdGlvbiBpc0JhdHRsZWJvYXJkTGl2ZSh1aW50MTYgYmF0dGxlYm9hcmRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKGJvb2wpOwpmdW5jdGlvbiBpc1RpbGVMaXZlKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIGNvbnN0YW50ICBleHRlcm5hbCByZXR1cm5zIChib29sKSA7CmZ1bmN0aW9uIGdldExhc3RNb3ZlVGltZSh1aW50MTYgYmF0dGxlYm9hcmRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIDsKZnVuY3Rpb24gZ2V0TnVtVGlsZXNGcm9tQm9hcmQgKHVpbnQxNiBfYmF0dGxlYm9hcmRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4KSA7IApmdW5jdGlvbiBhbmdlbE9uQmF0dGxlYm9hcmRzKHVpbnQ2NCBhbmdlbElEKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSA7CmZ1bmN0aW9uIGdldFR1cm4odWludDE2IGJhdHRsZWJvYXJkSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSA7CmZ1bmN0aW9uIGdldE51bVRlYW1zKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0ZWFtKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpOwpmdW5jdGlvbiBnZXRNb25zdGVycyh1aW50MTYgQmF0dGxlYm9hcmRJZCkgZXh0ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDggbW9uc3RlcjEsIHVpbnQ4IG1vbnN0ZXIyKSA7CmZ1bmN0aW9uIGdldFRvdGFsQmF0dGxlYm9hcmRzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQxNikgOwogIAogICAgICAgIAogCiAgIAp9Cgpjb250cmFjdCBCYXR0bGVib2FyZERhdGEgaXMgSUJhdHRsZWJvYXJkRGF0YSAgewoKICAgIC8qKiogREFUQSBUWVBFUyAqKiovCiAgICAgICAKICAKICAvL01vc3QgbWFpbiBwaWVjZXMgb24gdGhlIGJvYXJkIGFyZSB0aWxlcy4gICAKICAgICAgc3RydWN0IFRpbGUgewogICAgICAgIHVpbnQ4IHRpbGVUeXBlOwogICAgICAgIHVpbnQ4IHZhbHVlOyAvL3NwZWVkIGZvciBhbmdlbHMsIG90aGVyd2lzZSB2YWx1ZSBvZiBvdGhlciB0eXBlcy4gCiAgICAgICAgdWludDggaWQ7CiAgICAgICAgdWludDggcG9zaXRpb247CiAgICAgICAgdWludDMyIGhwOwogICAgICAgIHVpbnQxNiBwZXRQb3dlcjsKICAgICAgICB1aW50OCB0ZWFtOyAvL3doaWNoIHRlYW0gdGhleSBhcmUgb24uIAogICAgICAgIHVpbnQ2NCBhbmdlbElkOwogICAgICAgIHVpbnQ2NCBwZXRJZDsKICAgICAgICBib29sIGlzTGl2ZTsKICAgICAgICBhZGRyZXNzIG93bmVyOwogICAgICAgIAogICAgfQogICAgCiAgICAgIHN0cnVjdCBCYXR0bGVib2FyZCB7CiAgICAgICAgdWludDggdHVybjsgLy90dXJuIG51bWJlciAtIHR1cm4gMCBpcyB0aGUgZmlyc3QgcGxheWVyIHdobyBlbnRlcnMgdGhlIGJvYXJkLiAKICAgICAgICBhZGRyZXNzW10gcGxheWVyczsKICAgICAgICBib29sIGlzTGl2ZTsKICAgICAgICB1aW50IHByaXplOwogICAgICAgIHVpbnQxNiBpZDsKICAgICAgICB1aW50OCBudW1UZWFtczsgLy9udW1iZXIgb2YgYW5nZWwvcGV0IHRlYW1zIG9uIHRoZSBib2FyZCwgZGlmZmVyZW50IHRoYW4gVEVBTTEgdnMgVEVBTTIKICAgICAgICB1aW50OCBudW1UaWxlczsKICAgICAgICB1aW50OCBjcmVhdGVkQmFycmllcnM7CiAgICAgICAgdWludDggcmVzdHJpY3Rpb25zOyAvL251bWJlciBvZiB3aGljaCBhbmdlbHMgY2FuIGJlIGFkZGVkLiAKICAgICAgICB1aW50IGxhc3RNb3ZlVGltZTsKICAgICAgICBhZGRyZXNzW10gdGVhbTE7CiAgICAgICAgYWRkcmVzc1tdIHRlYW0yOyAvL2FkZHJlc3NlcyBvZiB0aGUgb3duZXJzIG9mIHRlYW1zIDEgYW5kIDIKICAgICAgICB1aW50OCBudW1UZWFtczE7CiAgICAgICAgdWludDggbnVtVGVhbXMyOwogICAgICAgIHVpbnQ4IG1vbnN0ZXIxOyAvL3RpbGUgbnVtYmVyIG9mIHRoZSBtb25zdGVyIGxvY2F0aW9ucy4gCiAgICAgICAgdWludDggbW9uc3RlcjI7CiAgICAgICAgdWludDggbWVkYWxzQnVybmVkOwogICAgfQoKICAgIC8vbWFpbiBzdG9yYWdlCiAgICBCYXR0bGVib2FyZCBbXSAgQmF0dGxlYm9hcmRzOwogICAgCiAgICB1aW50MTYgcHVibGljIHRvdGFsQmF0dGxlYm9hcmRzOwogICAgCiAgICB1aW50OCBtYXhGcmVlVGVhbXMgPSA2OwogICAgdWludDggbWF4UGFpZFRlYW1zID0gNDsKICAgIAogICAgLy9FYWNoIGFuZ2VsIGNhbiBvbmx5IGJlIG9uIG9uZSBib2FyZCBhdCBhIHRpbWUuIAogICAgbWFwcGluZyAodWludDY0ID0+IGJvb2wpIGFuZ2Vsc09uQmF0dGxlYm9hcmRzOyAKCiAgICAvL01hcCB0aGUgYmF0dGxlYm9hcmQgSUQgdG8gYW4gYXJyYXkgb2YgYWxsIHRpbGVzIG9uIHRoYXQgYm9hcmQuIAogICAgbWFwcGluZyAodWludDMyID0+IFRpbGVbXSkgVGlsZXNvbkJvYXJkOwogICAgCiAgICAvL2ZvciBlYWNoIGJhdHRsZWJvYXJkSWQodWludDE2KSB0aGVyZSBpcyBhIG51bWJlciB3aXRoIHRoZSB0aWxlSWQgb2YgdGhlIHRpbGUuIFRpbGVJZCAwIG1lYW5zIGJsYW5rLiAKICAgIG1hcHBpbmcgKHVpbnQxNiA9PiB1aW50OCBbNjRdKSBwb3NpdGlvbnNUaWxlczsKICAgIAogICAgCiAgICAKICAgICAgLy8gd3JpdGUgZnVuY3Rpb25zCiAgCiAgICAgICBmdW5jdGlvbiBjcmVhdGVCYXR0bGVib2FyZCh1aW50IHByaXplLCB1aW50OCByZXN0cmljdGlvbnMpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICAgICBCYXR0bGVib2FyZCBtZW1vcnkgYmF0dGxlYm9hcmQ7CiAgICAgICAgICAgYmF0dGxlYm9hcmQucmVzdHJpY3Rpb25zID0gcmVzdHJpY3Rpb25zOwogICAgICAgICAgIGJhdHRsZWJvYXJkLmlzTGl2ZSA9IGZhbHNlOyAvL3dpbGwgYmUgbGl2ZSBvbmNlIEFMTCB0ZWFtcyBhcmUgYWRkZWQuIAogICAgICAgICAgIGJhdHRsZWJvYXJkLnByaXplID0gcHJpemU7CiAgICAgICAgICAgYmF0dGxlYm9hcmQuaWQgPSB0b3RhbEJhdHRsZWJvYXJkczsKICAgICAgICAgICBiYXR0bGVib2FyZC5udW1UZWFtcyA9IDA7CiAgICAgICAgICAgYmF0dGxlYm9hcmQubGFzdE1vdmVUaW1lID0gbm93OwogICAgICAgICAgIHRvdGFsQmF0dGxlYm9hcmRzICs9IDE7CiAgICAgICAgICAgYmF0dGxlYm9hcmQubnVtVGlsZXMgPSAwOwogICAgICAgICAgLy9zZXQgdGhlIG1vbnN0ZXIgcG9zaXRpb25zCiAgICAgICAgICAgYmF0dGxlYm9hcmQubW9uc3RlcjEgPSBnZXRSYW5kb21OdW1iZXIoMzAsMTcsMSk7CiAgICAgICAgICAgYmF0dGxlYm9hcmQubW9uc3RlcjIgPSBnZXRSYW5kb21OdW1iZXIoNDgsMzEsMik7IAogICAgICAgICAgIEJhdHRsZWJvYXJkcy5wdXNoKGJhdHRsZWJvYXJkKTsKICAgICAgICAgIGNyZWF0ZU51bGxUaWxlKHRvdGFsQmF0dGxlYm9hcmRzLTEpOwogICAgICAgICAgIHJldHVybiAodG90YWxCYXR0bGVib2FyZHMgLSAxKTsKICAgICAgIH0KICAgICAgIAogICAgICAgICAKICAgICAgCiAgICAgIGZ1bmN0aW9uIGtpbGxNb25zdGVyKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCBtb25zdGVySWQpICBvbmx5U0VSQVBISU0gZXh0ZXJuYWx7CiAgICAgICAgICBpZiAobW9uc3RlcklkID09IDEpIHsKICAgICAgICAgICAgICBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ubW9uc3RlcjEgPSAwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKG1vbnN0ZXJJZCA9PTIpIHsKICAgICAgICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm1vbnN0ZXIyID0gMDsKICAgICAgICAgIH0KICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU51bGxUaWxlKHVpbnQxNiBfYmF0dGxlYm9hcmRJZCkgcHJpdmF0ZSAgICB7CiAgICAgIC8vV2UgbmVlZCB0byBjcmVhdGUgYSB0aWxlIHdpdGggSUQgMCB0aGF0IHdvbid0IGJlIG9uIHRoZSBib2FyZC4gVGhpcyBsZXRzIHVzIGtub3cgaWYgYW55IG90aGVyIHRpbGUgaXMgSUQgMCB0aGVuIHRoYXQgbWVhbnMgaXQncyBhIGJsYW5rIHRpbGUuIAogICAgICAgIGlmICgoX2JhdHRsZWJvYXJkSWQgPDApIHx8IChfYmF0dGxlYm9hcmRJZCA+IHRvdGFsQmF0dGxlYm9hcmRzKSkge3JldmVydCgpO30KICAgICAgICBUaWxlIG1lbW9yeSB0aWxlIDsKICAgICAgICB0aWxlLnRpbGVUeXBlID0gMDsgCiAgICAgICAgdGlsZS5pZCA9IDA7CiAgICAgICAgdGlsZS5pc0xpdmUgPSB0cnVlOwogICAgICAgIFRpbGVzb25Cb2FyZFtfYmF0dGxlYm9hcmRJZF0ucHVzaCh0aWxlKTsKICAgICAKICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBjcmVhdGVUaWxlKHVpbnQxNiBfYmF0dGxlYm9hcmRJZCwgdWludDggX3RpbGVUeXBlLCB1aW50OCBfdmFsdWUsIHVpbnQ4IF9wb3NpdGlvbiwgdWludDMyIF9ocCwgdWludDE2IF9wZXRQb3dlciwgdWludDY0IF9hbmdlbElkLCB1aW50NjQgX3BldElkLCBhZGRyZXNzIF9vd25lciwgdWludDggX3RlYW0pIG9ubHlTRVJBUEhJTSBleHRlcm5hbCAgcmV0dXJucyAodWludDgpICAgewogICAgICAvL21haW4gZnVuY3Rpb24gdG8gY3JlYXRlIGEgdGlsZSBhbmQgYWRkIGl0IHRvIHRoZSBib2FyZC4gCiAgICAgICAgaWYgKChfYmF0dGxlYm9hcmRJZCA8MCkgfHwgKF9iYXR0bGVib2FyZElkID4gdG90YWxCYXR0bGVib2FyZHMpKSB7cmV2ZXJ0KCk7fQogICAgICAgIGlmICgoYW5nZWxzT25CYXR0bGVib2FyZHNbX2FuZ2VsSWRdID09IHRydWUpICYmIChfYW5nZWxJZCAhPSAwKSkge3JldmVydCgpO30KICAgICAgICBhbmdlbHNPbkJhdHRsZWJvYXJkc1tfYW5nZWxJZF0gPSB0cnVlOwogICAgICAgIFRpbGUgbWVtb3J5IHRpbGUgOwogICAgICAgIHRpbGUudGlsZVR5cGUgPSBfdGlsZVR5cGU7IAogICAgICAgIHRpbGUudmFsdWUgPSBfdmFsdWU7CiAgICAgICAgdGlsZS5wb3NpdGlvbj0gX3Bvc2l0aW9uOwogICAgICAgIHRpbGUuaHAgPSBfaHA7CiAgICAgICAgQmF0dGxlYm9hcmRzW19iYXR0bGVib2FyZElkXS5udW1UaWxlcyArPTE7CiAgICAgICAgdGlsZS5pZCA9IEJhdHRsZWJvYXJkc1tfYmF0dGxlYm9hcmRJZF0ubnVtVGlsZXM7CiAgICAgICAgcG9zaXRpb25zVGlsZXNbX2JhdHRsZWJvYXJkSWRdW19wb3NpdGlvbisxXSA9IHRpbGUuaWQ7CiAgICAgICAgdGlsZS5wZXRQb3dlciA9IF9wZXRQb3dlcjsKICAgICAgICB0aWxlLmFuZ2VsSWQgPSBfYW5nZWxJZDsKICAgICAgICB0aWxlLnBldElkID0gX3BldElkOwogICAgICAgIHRpbGUub3duZXIgPSBfb3duZXI7CiAgICAgICAgdGlsZS50ZWFtID0gX3RlYW07CiAgICAgICAgdGlsZS5pc0xpdmUgPSB0cnVlOwogICAgICAgIFRpbGVzb25Cb2FyZFtfYmF0dGxlYm9hcmRJZF0ucHVzaCh0aWxlKTsKICAgICAgICByZXR1cm4gKEJhdHRsZWJvYXJkc1tfYmF0dGxlYm9hcmRJZF0ubnVtVGlsZXMpOwogICAgfQogICAgIAogICAgIGZ1bmN0aW9uIGtpbGxUaWxlKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgCiAgICAgIFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVt0aWxlSWRdLmlzTGl2ZT0gZmFsc2U7CiAgICAgIFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVt0aWxlSWRdLnRpbGVUeXBlPSAwOwogICAgICBmb3IgKHVpbnQgaSA9MDsgaTwgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnRlYW0xLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnRlYW0xW2ldID09IFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVt0aWxlSWRdLm93bmVyKSB7CiAgICAgICAgICAgICAvL3Nob3VsZCBiZSBzYWZlIGJlY2F1c2UgYSB0ZWFtIGNhbid0IGJlIGtpbGxlZCBpZiB0aGVyZSBhcmUgMCB0ZWFtcyB0byBraWxsLiAKICAgICAgICAgICAgIEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5udW1UZWFtczEgLT0gMTsgCiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yIChpID0wOyBpPCBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udGVhbTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udGVhbTJbaV0gPT0gVGlsZXNvbkJvYXJkW2JhdHRsZWJvYXJkSWRdW3RpbGVJZF0ub3duZXIpIHsKICAgICAgICAgICAgIC8vc2hvdWxkIGJlIHNhZmUgYmVjYXVzZSBhIHRlYW0gY2FuJ3QgYmUga2lsbGVkIGlmIHRoZXJlIGFyZSAwIHRlYW1zIHRvIGtpbGwuIAogICAgICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zMiAtPSAxOyAKICAgICAgICAgIH0KICAgICAgfQogICAgfQogICAgIAogICAgIGZ1bmN0aW9uIGFkZFRlYW10b0JvYXJkKHVpbnQxNiBiYXR0bGVib2FyZElkLCBhZGRyZXNzIG93bmVyLCB1aW50OCB0ZWFtKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgIAogICAgICAgIC8vQ2FuJ3QgYWRkIGEgdGVhbSBpZiB0aGUgYm9hcmQgaXMgbGl2ZSwgb3IgaWYgdGhlIGJvYXJkIGlzIGFscmVhZHkgZnVsbCBvZiB0ZWFtcy4gCiAgICAgICAgIGlmIChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0uaXNMaXZlID09IHRydWUpIHtyZXZlcnQoKTt9CiAgICAgICAgIGlmICgoQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnByaXplID09IDApICYmKEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5udW1UZWFtcyA9PSBtYXhGcmVlVGVhbXMpKSB7cmV2ZXJ0KCk7fQogICAgICAgICBpZiAoKEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5wcml6ZSAhPSAwKSAmJihCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ubnVtVGVhbXMgPT0gbWF4UGFpZFRlYW1zKSkge3JldmVydCgpO30KICAgICAgICAgCiAgICAgICAgIC8vb25seSBvbmUgdGVhbSBwZXIgYWRkcmVzcyBjYW4gYmUgb24gdGhlIGJvYXJkLiAKICAgICAgICAgZm9yICh1aW50IGkgPTA7IGk8QmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zOyBpKyspIHsKICAgICAgICAgICAgIGlmIChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ucGxheWVyc1tpXSA9PSBvd25lcikge3JldmVydCgpO30KICAgICAgICAgfQogICAgICAgICBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ubnVtVGVhbXMgKz0gMTsKICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnBsYXllcnMucHVzaChvd25lcik7CiAgICAgICAgIAogICAgICAgICBpZiAodGVhbSA9PSAxKSB7CiAgICAgICAgIEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5udW1UZWFtczEgKz0gMTsKICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnRlYW0xLnB1c2gob3duZXIpOwogICAgICAgICB9CiAgICAgICAgIGlmICh0ZWFtID09IDIpIHsKICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zMiArPSAxOwogICAgICAgICBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udGVhbTIucHVzaChvd25lcik7CiAgICAgICAgIAogICAgICAgICAvL2lmIHRoZSBib2FyZCBpcyBub3cgZnVsbCwgdGhlbiBnbyBhaGVhZCBhbmQgbWFrZSBpdCBsaXZlLiAKICAgICAgICAgaWYgKChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ubnVtVGVhbXMxID09IDMpICYmIChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ubnVtVGVhbXMyID09MykpIHtCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0uaXNMaXZlID0gdHJ1ZTt9CiAgICAgICAgaWYgKChCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ucHJpemUgIT0gMCkgJiYoQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zID09IG1heFBhaWRUZWFtcykpIHtCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0uaXNMaXZlID0gdHJ1ZTt9CiAgICAgICAgIH0KICAgICAgICAgIAogICAgIH0KICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNldFRpbGVQb3NpdGlvbiAodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRpbGVJZCwgdWludDggX3Bvc2l0aW9uVG8pIG9ubHlTRVJBUEhJTSBwdWJsaWMgIHsKICAgICAgICAgICAgVGlsZXNvbkJvYXJkW2JhdHRsZWJvYXJkSWRdW3RpbGVJZF0ucG9zaXRpb249IF9wb3NpdGlvblRvOwogICAgICAgICAgICBwb3NpdGlvbnNUaWxlc1tiYXR0bGVib2FyZElkXVtfcG9zaXRpb25UbysxXSA9IHRpbGVJZDsKICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNldFRpbGVIcCh1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggdGlsZUlkLCB1aW50MzIgX2hwKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgICAgICBUaWxlc29uQm9hcmRbYmF0dGxlYm9hcmRJZF1bdGlsZUlkXS5ocCA9IF9ocDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICBmdW5jdGlvbiBhZGRNZWRhbEJ1cm5lZCh1aW50MTYgYmF0dGxlYm9hcmRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsIHsKICAgICAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm1lZGFsc0J1cm5lZCArPSAxOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiB3aXRoZHJhd0V0aGVyKCkgIG9ubHlDUkVBVE9SIGV4dGVybmFsIHsKICAgLy9zaG91bGRuJ3QgaGF2ZSBhbnkgZXRoIGhlcmUgYnV0IGp1c3QgaW4gY2FzZS4gCiAgICBjcmVhdG9yQWRkcmVzcy50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwp9CgpmdW5jdGlvbiBzZXRMYXN0TW92ZVRpbWUodWludDE2IGJhdHRsZWJvYXJkSWQpIG9ubHlTRVJBUEhJTSBleHRlcm5hbCB7CiAgICAgICAgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLmxhc3RNb3ZlVGltZSA9IG5vdzsKICAgICAgICAKICAgICAgICAKICAgIH0KICAgIAogICAgICBmdW5jdGlvbiBpdGVyYXRlVHVybih1aW50MTYgYmF0dGxlYm9hcmRJZCkgb25seVNFUkFQSElNIGV4dGVybmFsIHsKICAgICAgICAgICAgaWYgKEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS50dXJuICA9PSAoQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnBsYXllcnMubGVuZ3RoLTEpKSB7CiAgICAgICAgICAgICAgICBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udHVybiA9IDA7CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2Uge0JhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS50dXJuICs9IDE7fQogICAgICAgIH0KICAgICAgICAKICAgICAgICAgZnVuY3Rpb24ga2lsbEJvYXJkKHVpbnQxNiBiYXR0bGVib2FyZElkKSBvbmx5U0VSQVBISU0gZXh0ZXJuYWwgewogICAgICAgICAgIEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5pc0xpdmUgPSBmYWxzZTsKICAgICAgICAgICBjbGVhckFuZ2Vsc0Zyb21Cb2FyZChiYXR0bGVib2FyZElkKTsKICAgICAgIH0KICAgIAogICAgCiAgICAgICAgZnVuY3Rpb24gY2xlYXJBbmdlbHNGcm9tQm9hcmQodWludDE2IGJhdHRsZWJvYXJkSWQpIHByaXZhdGUgewogICAgICAgICAvL0ZyZWUgdXAgYW5nZWxzIHRvIGJlIHVzZWQgb24gb3RoZXIgYm9hcmRzLiAKICAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRpbGVzOyBpKyspIHsKICAgICAgICAgICAgaWYgKFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVtpXS5hbmdlbElkICE9IDApIHsKICAgICAgICAgICAgICAgIGFuZ2Vsc09uQmF0dGxlYm9hcmRzW1RpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVtpXS5hbmdlbElkXSA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgfSAKICAKICAgIH0KCi8vUmVhZCBmdW5jdGlvbnMKICAgICAKICAgICAgICBmdW5jdGlvbiBnZXRUaWxlSHAodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRpbGVJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludDMyKSB7CiAgICAgICAgICAgIHJldHVybiBUaWxlc29uQm9hcmRbYmF0dGxlYm9hcmRJZF1bdGlsZUlkXS5ocDsKICAgICAgICB9CiAgICAgICAgCiAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdldE1lZGFsc0J1cm5lZCh1aW50MTYgYmF0dGxlYm9hcmRJZCkgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgcmV0dXJuIEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5tZWRhbHNCdXJuZWQ7CiAgICAgICAgfQogIAogCiBmdW5jdGlvbiBnZXRUZWFtKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIGV4dGVybmFsIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgVGlsZXNvbkJvYXJkW2JhdHRsZWJvYXJkSWRdW3RpbGVJZF0udGVhbTsKIH0KICAgICAgICAKCgpmdW5jdGlvbiBnZXRSYW5kb21OdW1iZXIodWludDE2IG1heFJhbmRvbSwgdWludDggbWluLCBhZGRyZXNzIHByaXZhdGVBZGRyZXNzKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyh1aW50OCkgewogICAgICAgIHVpbnQyNTYgZ2VuTnVtID0gdWludDI1NihibG9jay5ibG9ja2hhc2goYmxvY2subnVtYmVyLTEpKSArIHVpbnQyNTYocHJpdmF0ZUFkZHJlc3MpOwogICAgICAgIHJldHVybiB1aW50OChnZW5OdW0gJSAobWF4UmFuZG9tIC0gbWluICsgMSkrbWluKTsKICAgICAgICB9CgogICAgICAgCiAgICAgICBmdW5jdGlvbiBnZXRNYXhGcmVlVGVhbXMoKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgIHJldHVybiBtYXhGcmVlVGVhbXM7CiAgICAgICB9CiAgCiAgICAgICAgZnVuY3Rpb24gZ2V0QmFycmllck51bSh1aW50MTYgYmF0dGxlYm9hcmRJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgICAgIHJldHVybiBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0uY3JlYXRlZEJhcnJpZXJzOwogICAgICAgIH0KCiAgICAvLyBDYWxsIHRvIGdldCB0aGUgc3BlY2lmaWVkIHRpbGUgYXQgYSBjZXJ0YWluIHBvc2l0aW9uIG9mIGEgY2VydGFpbiBib2FyZC4gCiAgIGZ1bmN0aW9uIGdldFRpbGVGcm9tQmF0dGxlYm9hcmQodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRpbGVJZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IHRpbGVUeXBlLCB1aW50OCB2YWx1ZSwgdWludDggaWQsIHVpbnQ4IHBvc2l0aW9uLCB1aW50MzIgaHAsIHVpbnQxNiBwZXRQb3dlciwgdWludDY0IGFuZ2VsSWQsIHVpbnQ2NCBwZXRJZCwgYm9vbCBpc0xpdmUsIGFkZHJlc3Mgb3duZXIpICAgewogICAgICAKICAgICAgICBpZiAoKGJhdHRsZWJvYXJkSWQgPDApIHx8ICAoYmF0dGxlYm9hcmRJZCA+IHRvdGFsQmF0dGxlYm9hcmRzKSkge3JldmVydCgpO30KICAgICAgICBCYXR0bGVib2FyZCBtZW1vcnkgYmF0dGxlYm9hcmQgPSBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF07CiAgICAgICAgVGlsZSBtZW1vcnkgdGlsZTsKICAgICAgICBpZiAoKHRpbGVJZCA8MCkgfHwgKHRpbGVJZD4gYmF0dGxlYm9hcmQubnVtVGlsZXMpKSB7cmV2ZXJ0KCk7fQogICAgICAgIHRpbGUgPSBUaWxlc29uQm9hcmRbYmF0dGxlYm9hcmRJZF1bdGlsZUlkXTsKICAgICAgICB0aWxlVHlwZSA9IHRpbGUudGlsZVR5cGU7IAogICAgICAgIHZhbHVlID0gdGlsZS52YWx1ZTsKICAgICAgICBpZD0gdGlsZS5pZDsKICAgICAgICBwb3NpdGlvbiA9IHRpbGUucG9zaXRpb247CiAgICAgICAgaHAgPSB0aWxlLmhwOwogICAgICAgIHBldFBvd2VyID0gdGlsZS5wZXRQb3dlcjsKICAgICAgICBhbmdlbElkID0gdGlsZS5hbmdlbElkOwogICAgICAgIHBldElkID0gdGlsZS5wZXRJZDsKICAgICAgICBvd25lciA9IHRpbGUub3duZXI7CiAgICAgICAgaXNMaXZlID0gdGlsZS5pc0xpdmU7CiAgICAgICAgCiAgICB9CiAgICAKICAgIC8vRWFjaCBwbGF5ZXIgKGFkZHJlc3MpIGNhbiBvbmx5IGhhdmUgb25lIHRpbGUgb24gZWFjaCBib2FyZC4gCiAgICBmdW5jdGlvbiBnZXRUaWxlSURCeU93bmVyKHVpbnQxNiBiYXR0bGVib2FyZElkLCBhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgZm9yICh1aW50OCBpID0gMDsgaSA8IEJhdHRsZWJvYXJkc1tiYXR0bGVib2FyZElkXS5udW1UaWxlcysxOyBpKyspIHsKICAgICAgICAgICAgaWYgKFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVtpXS5vd25lciA9PSBfb3duZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBUaWxlc29uQm9hcmRbYmF0dGxlYm9hcmRJZF1baV0uaWQ7CiAgICAgICAgfQogICAgfQogICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICAKICAgIAogICAgCiAgICBmdW5jdGlvbiBnZXRQZXRieVRpbGVJZCggdWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRpbGVJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQ2NCkgewogICAgICAgcmV0dXJuIFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVt0aWxlSWRdLnBldElkOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRPd25lciAodWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHRlYW0sICB1aW50OCBvd25lck51bWJlcikgY29uc3RhbnQgZXh0ZXJuYWwgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIAogICAgICAgaWYgKHRlYW0gPT0gMCkge3JldHVybiBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ucGxheWVyc1tvd25lck51bWJlcl07fQogICAgICAgaWYgKHRlYW0gPT0gMSkge3JldHVybiBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udGVhbTFbb3duZXJOdW1iZXJdO30KICAgICAgIGlmICh0ZWFtID09IDIpIHtyZXR1cm4gQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLnRlYW0yW293bmVyTnVtYmVyXTt9CiAgICAgICAKICAgICAgIAogICAgfQogICAgCgogICAgCiAgICAgIGZ1bmN0aW9uIGdldFRpbGVJRGJ5UG9zaXRpb24odWludDE2IGJhdHRsZWJvYXJkSWQsIHVpbnQ4IHBvc2l0aW9uKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDgpIHsKICAgICAgICByZXR1cm4gcG9zaXRpb25zVGlsZXNbYmF0dGxlYm9hcmRJZF1bcG9zaXRpb24rMV07CiAgICB9CiAgICAvL0lmIHRpbGUgaXMgZW1wdHksIHRoaXMgcmV0dXJucyAwCiAgICAgCiAgICAgICAgLy8gQ2FsbCB0byBnZXQgdGhlIHNwZWNpZmllZCB0aWxlIGF0IGEgY2VydGFpbiBwb3NpdGlvbiBvZiBhIGNlcnRhaW4gYm9hcmQuIAogICBmdW5jdGlvbiBnZXRQb3NpdGlvbkZyb21CYXR0bGVib2FyZCh1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggX3Bvc2l0aW9uKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDggdGlsZVR5cGUsIHVpbnQ4IHZhbHVlLCB1aW50OCBpZCwgdWludDggcG9zaXRpb24sIHVpbnQzMiBocCwgdWludDMyIHBldFBvd2VyLCB1aW50NjQgYW5nZWxJZCwgdWludDY0IHBldElkLCBib29sIGlzTGl2ZSkgICB7CiAgICAgIAogICAgICAgIGlmICgoYmF0dGxlYm9hcmRJZCA8MCkgfHwgIChiYXR0bGVib2FyZElkID4gdG90YWxCYXR0bGVib2FyZHMpKSB7cmV2ZXJ0KCk7fQogICAgCiAgICAgICAgVGlsZSBtZW1vcnkgdGlsZTsKICAgICAgICB1aW50OCB0aWxlSWQgPSBwb3NpdGlvbnNUaWxlc1tiYXR0bGVib2FyZElkXVtfcG9zaXRpb24rMV07CiAgICAgICAgdGlsZSA9IFRpbGVzb25Cb2FyZFtiYXR0bGVib2FyZElkXVt0aWxlSWRdOwogICAgICAgIHRpbGVUeXBlID0gdGlsZS50aWxlVHlwZTsgCiAgICAgICAgdmFsdWUgPSB0aWxlLnZhbHVlOwogICAgICAgIGlkPSB0aWxlLmlkOwogICAgICAgIHBvc2l0aW9uID0gdGlsZS5wb3NpdGlvbjsKICAgICAgICBocCA9IHRpbGUuaHA7CiAgICAgICAgcGV0UG93ZXIgPSB0aWxlLnBldFBvd2VyOwogICAgICAgIGFuZ2VsSWQgPSB0aWxlLmFuZ2VsSWQ7CiAgICAgICAgcGV0SWQgPSB0aWxlLnBldElkOwogICAgICAgIGlzTGl2ZSA9IHRpbGUuaXNMaXZlOwogICAgICAgIAogICAgfSAKICAgICAKIAogICAgZnVuY3Rpb24gZ2V0QmF0dGxlYm9hcmQodWludDE2IGlkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDggdHVybiwgYm9vbCBpc0xpdmUsIHVpbnQgcHJpemUsIHVpbnQ4IG51bVRlYW1zLCB1aW50OCBudW1UaWxlcywgdWludDggY3JlYXRlZEJhcnJpZXJzLCB1aW50OCByZXN0cmljdGlvbnMsIHVpbnQgbGFzdE1vdmVUaW1lLCB1aW50OCBudW1UZWFtczEsIHVpbnQ4IG51bVRlYW1zMiwgdWludDggbW9uc3RlcjEsIHVpbnQ4IG1vbnN0ZXIyKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICBCYXR0bGVib2FyZCBtZW1vcnkgYmF0dGxlYm9hcmQgPSBCYXR0bGVib2FyZHNbaWRdOwogICAgCiAgICAgICAgdHVybiA9IGJhdHRsZWJvYXJkLnR1cm47CiAgICAgICAgaXNMaXZlID0gYmF0dGxlYm9hcmQuaXNMaXZlOwogICAgICAgIHByaXplID0gYmF0dGxlYm9hcmQucHJpemU7CiAgICAgICAgbnVtVGVhbXMgPSBiYXR0bGVib2FyZC5udW1UZWFtczsKICAgICAgICBudW1UaWxlcyA9IGJhdHRsZWJvYXJkLm51bVRpbGVzOwogICAgICAgIGNyZWF0ZWRCYXJyaWVycyA9IGJhdHRsZWJvYXJkLmNyZWF0ZWRCYXJyaWVyczsKICAgICAgICByZXN0cmljdGlvbnMgPSBiYXR0bGVib2FyZC5yZXN0cmljdGlvbnM7CiAgICAgICAgbGFzdE1vdmVUaW1lID0gYmF0dGxlYm9hcmQubGFzdE1vdmVUaW1lOwogICAgICAgIG51bVRlYW1zMSA9IGJhdHRsZWJvYXJkLm51bVRlYW1zMTsKICAgICAgICBudW1UZWFtczIgPSBiYXR0bGVib2FyZC5udW1UZWFtczI7CiAgICAgICAgbW9uc3RlcjEgPSBiYXR0bGVib2FyZC5tb25zdGVyMTsKICAgICAgICBtb25zdGVyMiA9IGJhdHRsZWJvYXJkLm1vbnN0ZXIyOwogICAgfQoKICAgIAogICAgCgogICAgIAogICAgIGZ1bmN0aW9uIGlzQmF0dGxlYm9hcmRMaXZlKHVpbnQxNiBiYXR0bGVib2FyZElkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgICByZXR1cm4gQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLmlzTGl2ZTsKICAgICB9CgoKICAgICBmdW5jdGlvbiBpc1RpbGVMaXZlKHVpbnQxNiBiYXR0bGVib2FyZElkLCB1aW50OCB0aWxlSWQpIGNvbnN0YW50ICBleHRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgCiAgICAgIHJldHVybiBUaWxlc29uQm9hcmRbYmF0dGxlYm9hcmRJZF1bdGlsZUlkXS5pc0xpdmU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldExhc3RNb3ZlVGltZSh1aW50MTYgYmF0dGxlYm9hcmRJZCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLmxhc3RNb3ZlVGltZTsKICAgIH0KICAgICAKICAKICAgICAgICBmdW5jdGlvbiBnZXROdW1UaWxlc0Zyb21Cb2FyZCAodWludDE2IF9iYXR0bGVib2FyZElkKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDgpIHsKICAgICAgICAgICAgcmV0dXJuIEJhdHRsZWJvYXJkc1tfYmF0dGxlYm9hcmRJZF0ubnVtVGlsZXM7CiAgICAgICAgfQogICAKICAgICAgICAKICAgICAgICAvL2VhY2ggYW5nZWwgY2FuIG9ubHkgYmUgb24gT05FIHNwb25zb3JlZCBiYXR0bGVib2FyZCBhdCBhIHRpbWUuIAogICAgICAgIGZ1bmN0aW9uIGFuZ2VsT25CYXR0bGVib2FyZHModWludDY0IGFuZ2VsSUQpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIGFuZ2Vsc09uQmF0dGxlYm9hcmRzW2FuZ2VsSURdOyAKICAgICAgICB9CiAgIAogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdldFR1cm4odWludDE2IGJhdHRsZWJvYXJkSWQpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzKSB7CiAgICAgICAgICAgIHJldHVybiBCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0ucGxheWVyc1tCYXR0bGVib2FyZHNbYmF0dGxlYm9hcmRJZF0udHVybl07CiAgICAgICAgfQogICAgICAgIAogICAgICAKICAgICAKICAgICBmdW5jdGlvbiBnZXROdW1UZWFtcyh1aW50MTYgYmF0dGxlYm9hcmRJZCwgdWludDggdGVhbSkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4KSB7CiAgICAgICAgIGlmICh0ZWFtID09IDEpIHtyZXR1cm4gQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zMTt9CiAgICAgICAgIGlmICh0ZWFtID09IDIpIHtyZXR1cm4gQmF0dGxlYm9hcmRzW2JhdHRsZWJvYXJkSWRdLm51bVRlYW1zMjt9CiAgICAgfQogICAgICAgIAogICAgICAKICAgIAogICAgZnVuY3Rpb24gZ2V0TW9uc3RlcnModWludDE2IEJhdHRsZWJvYXJkSWQpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IG1vbnN0ZXIxLCB1aW50OCBtb25zdGVyMikgewogICAgICAgIAogICAgICAgIG1vbnN0ZXIxID0gQmF0dGxlYm9hcmRzW0JhdHRsZWJvYXJkSWRdLm1vbnN0ZXIxOwogICAgICAgIG1vbnN0ZXIyID0gQmF0dGxlYm9hcmRzW0JhdHRsZWJvYXJkSWRdLm1vbnN0ZXIyOwogICAKICAgIH0KICAgIAogICAgCiAgICBmdW5jdGlvbiBzYWZlTXVsdCh1aW50IHgsIHVpbnQgeSkgcHVyZSBpbnRlcm5hbCByZXR1cm5zKHVpbnQpIHsKICAgICAgdWludCB6ID0geCAqIHk7CiAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgIHJldHVybiB6OwogICAgfQogICAgCiAgICAgZnVuY3Rpb24gU2FmZURpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogICAgLy8vIFJlYWQgYWNjZXNzCiAgICAgfQogICAKICAgCiAgICBmdW5jdGlvbiBnZXRUb3RhbEJhdHRsZWJvYXJkcygpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MTYpIHsKICAgICAgICByZXR1cm4gdG90YWxCYXR0bGVib2FyZHM7CiAgICB9CiAgICAgIAogIAogICAgICAgIAogICAKICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgCiAgICAgIAogICAgICAgIAogICAKfQ=='.
	

]
