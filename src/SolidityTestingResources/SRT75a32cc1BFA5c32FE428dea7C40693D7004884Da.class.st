Class {
	#name : #SRT75a32cc1BFA5c32FE428dea7C40693D7004884Da,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT75a32cc1BFA5c32FE428dea7C40693D7004884Da >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuODsKCmNvbnRyYWN0IFdpbk1hdHJpeAogewogICBmdW5jdGlvbiBnZXRDb2VmZih1aW50MTYgbikgZXh0ZXJuYWwgcmV0dXJucyAodWludDI1Nik7CiAgIGZ1bmN0aW9uIGdldEJldHNQcm9jZXNzZWQoKSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MTYpOwogfQoKY29udHJhY3QgU21hcnRSb3VsZXR0ZQp7CiAgICBhZGRyZXNzIGRldmVsb3BlcjsKICAgIGFkZHJlc3Mgb3BlcmF0b3I7CgogICAgLy8gV2FpdCBCbG9ja0RlbGF5IGJsb2NrcyBiZWZvcmUgc3BpbiB0aGUgd2hlZWwgCiAgICB1aW50OCBCbG9ja0RlbGF5OwoKICAgIC8vIE1heGltdW0gYmV0IHZhbHVlIGZvciBnYW1lCiAgICB1aW50MjU2IGN1cnJlbnRNYXhCZXQ7ICAgIAoKICAgIC8vIG1heGltdW0gZ2FtZXMgY291bnQgcGVyIGJsb2NrCiAgICB1aW50NjQgbWF4QmV0c1BlckJsb2NrOwogICAgdWludDY0IG5iQmV0c0N1cnJlbnRCbG9jazsKICAgIAogICAgLy8gRW5hYmxlXGRpc2FibGUgdG8gcGxhY2UgbmV3IGJldHMKICAgIGJvb2wgQ29udHJhY3RTdGF0ZTsKCiAgICAvLyB0YWJsZSB3aXRoIHdpbm5lciBjb2VmZmljaWVudHMKICAgIFdpbk1hdHJpeCB3aW5NYXRyaXg7CgogICAgdWludDE2IGNvbnN0YW50IG1heFR5cGVCZXRzID0gMTU3OwoKICAgIC8vCiAgICB1aW50MjU2IHByaXZhdGUgU21hcnRSb3VsZXR0ZUxpbWl0ID0gMTsKCiAgIC8vIGxhc3QgZ2FtZSBpbmRleCBmb3IgcGxheWVyICh1c2VkIGZvciBmYXN0IGFjY2VzcykKICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50NjQpIHByaXZhdGUgZ2FtYmxlSW5kZXg7ICAgCiAgIAogICAvLyAKICAgdWludDggZGVmYXVsdE1pbkNyZWRpdHNPbkJldDsgCiAgIC8vCiAgIG1hcHBpbmcgKHVpbnQ4ID0+IHVpbnQ4KSBwcml2YXRlIG1pbkNyZWRpdHNPbkJldDsKCiAgIHN0cnVjdCBHYW1ibGUKICAgewogICAgICAgIGFkZHJlc3MgcGxheWVyOwogICAgICAgIHVpbnQyNTYgYmxvY2tOdW1iZXI7CiAgICAgICAgdWludDI1NiBibG9ja1NwaW5uZWQ7CiAgICAgICAgdWludDggd2hlZWxSZXN1bHQ7CiAgICAgICAgdWludDI1NiBiZXRzOwogICAgICAgIGJ5dGVzMzIgdmFsdWVzOwogICAgICAgIGJ5dGVzMzIgdmFsdWVzMjsKICAgfQogICAgICAgCiAgIEdhbWJsZVtdIHByaXZhdGUgZ2FtYmxlczsKCiAgIGVudW0gQmV0VHlwZXN7bnVtYmVyMCwgbnVtYmVyMSxudW1iZXIyLG51bWJlcjMsbnVtYmVyNCxudW1iZXI1LG51bWJlcjYsbnVtYmVyNyxudW1iZXI4LG51bWJlcjksCiAgICAgbnVtYmVyMTAsbnVtYmVyMTEsbnVtYmVyMTIsbnVtYmVyMTMsbnVtYmVyMTQsbnVtYmVyMTUsbnVtYmVyMTYsbnVtYmVyMTcsbnVtYmVyMTgsbnVtYmVyMTksbnVtYmVyMjAsbnVtYmVyMjEsCiAgICAgbnVtYmVyMjIsbnVtYmVyMjMsbnVtYmVyMjQsbnVtYmVyMjUsbnVtYmVyMjYsbnVtYmVyMjcsbnVtYmVyMjgsbnVtYmVyMjksbnVtYmVyMzAsbnVtYmVyMzEsbnVtYmVyMzIsbnVtYmVyMzMsCiAgICAgbnVtYmVyMzQsbnVtYmVyMzUsbnVtYmVyMzYsIHJlZCwgYmxhY2ssIG9kZCwgZXZlbiwgZG96ZW4xLGRvemVuMixkb3plbjMsIGNvbHVtbjEsY29sdW1uMixjb2x1bW4zLCBsb3csaGlnaCwKICAgICBwYWlyXzAxLCBwYWlyXzAyLCBwYWlyXzAzLCBwYWlyXzEyLCBwYWlyXzIzLCBwYWlyXzM2LCBwYWlyXzI1LCBwYWlyXzE0LCBwYWlyXzQ1LCBwYWlyXzU2LCBwYWlyXzY5LCBwYWlyXzU4LCBwYWlyXzQ3LAogICAgIHBhaXJfNzgsIHBhaXJfODksIHBhaXJfOTEyLCBwYWlyXzgxMSwgcGFpcl83MTAsIHBhaXJfMTAxMSwgcGFpcl8xMTEyLCBwYWlyXzEyMTUsIHBhaXJfMTUxOCwgcGFpcl8xNjE3LCBwYWlyXzE3MTgsIHBhaXJfMTcyMCwKICAgICBwYWlyXzE2MTksIHBhaXJfMTkyMiwgcGFpcl8yMDIzLCBwYWlyXzIxMjQsIHBhaXJfMjIyMywgcGFpcl8yMzI0LCBwYWlyXzI1MjgsIHBhaXJfMjYyOSwgcGFpcl8yNzMwLCBwYWlyXzI4MjksIHBhaXJfMjkzMCwgcGFpcl8xMTE0LAogICAgIHBhaXJfMTAxMywgcGFpcl8xMzE0LCBwYWlyXzE0MTUsIHBhaXJfMTMxNiwgcGFpcl8xNDE3LCBwYWlyXzE4MjEsIHBhaXJfMTkyMCwgcGFpcl8yMDIxLCBwYWlyXzIyMjUsIHBhaXJfMjMyNiwgcGFpcl8yNDI3LCBwYWlyXzI1MjYsCiAgICAgcGFpcl8yNjI3LCBwYWlyXzI4MzEsIHBhaXJfMjkzMiwgcGFpcl8zMDMzLCBwYWlyXzMxMzIsIHBhaXJfMzIzMywgcGFpcl8zMTM0LCBwYWlyXzMyMzUsIHBhaXJfMzMzNiwgcGFpcl8zNDM1LCBwYWlyXzM1MzYsIGNvcm5lcl8wXzFfMl8zLAogICAgIGNvcm5lcl8xXzJfNV80LCBjb3JuZXJfMl8zXzZfNSwgY29ybmVyXzRfNV84XzcsIGNvcm5lcl81XzZfOV84LCBjb3JuZXJfN184XzExXzEwLCBjb3JuZXJfOF85XzEyXzExLCBjb3JuZXJfMTBfMTFfMTRfMTMsIGNvcm5lcl8xMV8xMl8xNV8xNCwKICAgICBjb3JuZXJfMTNfMTRfMTdfMTYsIGNvcm5lcl8xNF8xNV8xOF8xNywgY29ybmVyXzE2XzE3XzIwXzE5LCBjb3JuZXJfMTdfMThfMjFfMjAsIGNvcm5lcl8xOV8yMF8yM18yMiwgY29ybmVyXzIwXzIxXzI0XzIzLCBjb3JuZXJfMjJfMjNfMjZfMjUsCiAgICAgY29ybmVyXzIzXzI0XzI3XzI2LCBjb3JuZXJfMjVfMjZfMjlfMjgsIGNvcm5lcl8yNl8yN18zMF8yOSwgY29ybmVyXzI4XzI5XzMyXzMxLCBjb3JuZXJfMjlfMzBfMzNfMzIsIGNvcm5lcl8zMV8zMl8zNV8zNCwgY29ybmVyXzMyXzMzXzM2XzM1LAogICAgIHRocmVlXzBfMl8zLCB0aHJlZV8wXzFfMiwgdGhyZWVfMV8yXzMsIHRocmVlXzRfNV82LCB0aHJlZV83XzhfOSwgdGhyZWVfMTBfMTFfMTIsIHRocmVlXzEzXzE0XzE1LCB0aHJlZV8xNl8xN18xOCwgdGhyZWVfMTlfMjBfMjEsIHRocmVlXzIyXzIzXzI0LAogICAgIHRocmVlXzI1XzI2XzI3LCB0aHJlZV8yOF8yOV8zMCwgdGhyZWVfMzFfMzJfMzMsIHRocmVlXzM0XzM1XzM2LCBzaXhfMV8yXzNfNF81XzYsIHNpeF80XzVfNl83XzhfOSwgc2l4XzdfOF85XzEwXzExXzEyLCBzaXhfMTBfMTFfMTJfMTNfMTRfMTUsCiAgICAgc2l4XzEzXzE0XzE1XzE2XzE3XzE4LCBzaXhfMTZfMTdfMThfMTlfMjBfMjEsIHNpeF8xOV8yMF8yMV8yMl8yM18yNCwgc2l4XzIyXzIzXzI0XzI1XzI2XzI3LCBzaXhfMjVfMjZfMjdfMjhfMjlfMzAsIHNpeF8yOF8yOV8zMF8zMV8zMl8zMywKICAgICBzaXhfMzFfMzJfMzNfMzRfMzVfMzZ9CiAgIAoKICAgZnVuY3Rpb24gU21hcnRSb3VsZXR0ZSgpIGludGVybmFsCiAgIHsgICAgICAgIAogICAgICAgIGRldmVsb3BlciAgPSBtc2cuc2VuZGVyOwogICAgICAgIG9wZXJhdG9yICAgPSBtc2cuc2VuZGVyOwogICAgICAgIAogICAgICAgIHdpbk1hdHJpeCA9IFdpbk1hdHJpeCgweERBMTYyNTFCMjk3N0Y4NmNCOGQ0QzMzMThlOWM2RjkyRDdmQzFBOGYpOwogICAgICAgIGlmICh3aW5NYXRyaXguZ2V0QmV0c1Byb2Nlc3NlZCgpICE9IG1heFR5cGVCZXRzKSB0aHJvdzsKCiAgICAgICAgQmxvY2tEZWxheSA9IDE7ICAgICAgICAKICAgICAgICBtYXhCZXRzUGVyQmxvY2sgPSA1OwogICAgICAgIGRlZmF1bHRNaW5DcmVkaXRzT25CZXQgPSAxOyAgIAogICAgICAgIENvbnRyYWN0U3RhdGUgID0gdHJ1ZTsgIAogICB9CgogICBmdW5jdGlvbiB1cGRhdGVNYXhCZXQoKSBwcml2YXRlIG9ubHlEZXZlbG9wZXIgCiAgIHsgICAgICAKICAgICAgdWludDI1NiBuZXdNYXhCZXQgPSB0aGlzLmJhbGFuY2UvKDM1KlNtYXJ0Um91bGV0dGVMaW1pdCk7CgogICAgICAvLyByb3VuZHMgdG8gMiBkaWd0cwogICAgICBuZXdNYXhCZXQgPSBuZXdNYXhCZXQgLyAyNTYwMDAwMDAwMDAwMDAwMDAwICogMjU2MDAwMDAwMDAwMDAwMDAwMDsgIAogICAgICBpZiAobmV3TWF4QmV0ICE9IGN1cnJlbnRNYXhCZXQpIAogICAgICB7CiAgICAgICAgY3VycmVudE1heEJldCA9IG5ld01heEJldDsKICAgICAgICBTZXR0aW5nc0NoYW5nZWQoY3VycmVudE1heEJldCwgY3VycmVudE1heEJldCAvIDI1NiwgIGRlZmF1bHRNaW5DcmVkaXRzT25CZXQsIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5sb3cpXSwgbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmRvemVuMSldLCBCbG9ja0RlbGF5LCBDb250cmFjdFN0YXRlKTsKICAgICAgfQogICB9CgogICBmdW5jdGlvbiBjaGFuZ2VTZXR0aW5ncyh1aW50MjU2IE5ld1NtYXJ0Um91bGV0dGVMaW1pdCwgdWludDY0IE5ld01heEJldHNQZXJCbG9jaywgdWludDggTmV3QmxvY2tEZWxheSwgdWludDggTWluQ3JlZGl0c09uQmV0NTAsIHVpbnQ4IE1pbkNyZWRpdHNPbkJldDMzLCB1aW50OCBOZXdEZWZhdWx0TWluQ3JlZGl0c09uQmV0KSBvbmx5RGV2ZWxvcGVyCiAgIHsKICAgICBpZiAoTmV3U21hcnRSb3VsZXR0ZUxpbWl0ID4gMCkgU21hcnRSb3VsZXR0ZUxpbWl0ID0gTmV3U21hcnRSb3VsZXR0ZUxpbWl0OwoKICAgICBCbG9ja0RlbGF5ID0gTmV3QmxvY2tEZWxheTsgICAgIAoKICAgICBpZiAoTmV3TWF4QmV0c1BlckJsb2NrICE9IDApIG1heEJldHNQZXJCbG9jayA9IE5ld01heEJldHNQZXJCbG9jazsgICAgIAoKICAgICAgaWYgKE1pbkNyZWRpdHNPbkJldDUwID4gMCkKICAgICAgewogICAgICAgIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5sb3cpXSA9IE1pbkNyZWRpdHNPbkJldDUwOwogICAgICAgIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5oaWdoKV0gPSBNaW5DcmVkaXRzT25CZXQ1MDsKICAgICAgICBtaW5DcmVkaXRzT25CZXRbdWludDgoQmV0VHlwZXMucmVkKV0gPSBNaW5DcmVkaXRzT25CZXQ1MDsKICAgICAgICBtaW5DcmVkaXRzT25CZXRbdWludDgoQmV0VHlwZXMuYmxhY2spXSA9IE1pbkNyZWRpdHNPbkJldDUwOwogICAgICAgIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5vZGQpXSA9IE1pbkNyZWRpdHNPbkJldDUwOwogICAgICAgIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5ldmVuKV0gPSBNaW5DcmVkaXRzT25CZXQ1MDsKICAgICAgfSAgCgogICAgICBpZiAoTWluQ3JlZGl0c09uQmV0MzMgPiAwKQogICAgICB7CiAgICAgICAgbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmRvemVuMSldID0gTWluQ3JlZGl0c09uQmV0MzM7CiAgICAgICAgbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmRvemVuMildID0gTWluQ3JlZGl0c09uQmV0MzM7CiAgICAgICAgbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmRvemVuMyldID0gTWluQ3JlZGl0c09uQmV0MzM7CiAgICAgICAgbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmNvbHVtbjEpXSA9IE1pbkNyZWRpdHNPbkJldDMzOwogICAgICAgIG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5jb2x1bW4yKV0gPSBNaW5DcmVkaXRzT25CZXQzMzsKICAgICAgICBtaW5DcmVkaXRzT25CZXRbdWludDgoQmV0VHlwZXMuY29sdW1uMyldID0gTWluQ3JlZGl0c09uQmV0MzM7CiAgICAgIH0KCiAgICAgIGlmIChOZXdEZWZhdWx0TWluQ3JlZGl0c09uQmV0ID4gMCkgZGVmYXVsdE1pbkNyZWRpdHNPbkJldCA9IE5ld0RlZmF1bHRNaW5DcmVkaXRzT25CZXQ7CgogICAgIHVwZGF0ZU1heEJldCgpOwogICB9CiAgIAogICBmdW5jdGlvbiBkZWxldGVDb250cmFjdCgpIG9ubHlEZXZlbG9wZXIgIAogICB7CiAgICAgICAgc3VpY2lkZShtc2cuc2VuZGVyKTsKICAgfQoKICAgLy8gYml0IGZyb20gMCB0byAyNTUKICAgZnVuY3Rpb24gaXNCaXRTZXQodWludDI1NiBkYXRhLCB1aW50OCBiaXQpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAoYm9vbCByZXQpCiAgIHsKICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgcmV0IDo9IGlzemVybyhpc3plcm8oYW5kKGRhdGEsIGV4cCgyLGJpdCkpKSkKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgfQoKICAgLy8gdW5pcXVlIGNvbWJpbmF0aW9uIG9mIGJldCBhbmQgd2hlZWxSZXN1bHQsIHVzZWQgZm9yIGFjY2VzcyB0byBXaW5NYXRyaXgKICAgZnVuY3Rpb24gZ2V0SW5kZXgodWludDE2IGJldCwgdWludDE2IHdoZWVsUmVzdWx0KSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQxNikKICAgewogICAgICByZXR1cm4gKGJldCsxKSoyNTYgKyAod2hlZWxSZXN1bHQrMSk7CiAgIH0KCiAgIC8vIG4gZm9ybSAxIDw9IHRvIDw9IDMyCiAgIGZ1bmN0aW9uIGdldEJldFZhbHVlKGJ5dGVzMzIgdmFsdWVzLCB1aW50OCBuKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgIHsKICAgICAgICAvLyBiZXQgaW4gY3JlZGl0cyAoMS4uMjU2KSAKICAgICAgICB1aW50MjU2IGJldCA9IHVpbnQyNTYodmFsdWVzWzMyLW5dKSsxOwoKICAgICAgICAgLy8gY2hlY2sgbWluIGJldAogICAgICAgIHVpbnQ4IG1pbkNyZWRpdHMgPSBtaW5DcmVkaXRzT25CZXRbbl07CiAgICAgICAgaWYgKG1pbkNyZWRpdHMgPT0gMCkgbWluQ3JlZGl0cyA9IGRlZmF1bHRNaW5DcmVkaXRzT25CZXQ7CiAgICAgICAgaWYgKGJldCA8IG1pbkNyZWRpdHMpIHRocm93OwogICAgICAgIAogICAgICAgIC8vIGJldCBpbiB3ZWkKICAgICAgICBiZXQgPSBjdXJyZW50TWF4QmV0KmJldC8yNTY7CiAgICAgICAgaWYgKGJldCA+IGN1cnJlbnRNYXhCZXQpIHRocm93OyAgICAgICAgIAoKICAgICAgICByZXR1cm4gYmV0OyAgICAgICAgCiAgIH0KCiAgIGZ1bmN0aW9uIGdldEJldFZhbHVlQnlHYW1ibGUoR2FtYmxlIGdhbWJsZSwgdWludDggbikgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSAKICAgewogICAgICBpZiAobjw9MzIpIHJldHVybiBnZXRCZXRWYWx1ZShnYW1ibGUudmFsdWVzLCBuKTsKICAgICAgaWYgKG48PTY0KSByZXR1cm4gZ2V0QmV0VmFsdWUoZ2FtYmxlLnZhbHVlczIsIG4tMzIpOwogICAgICAvLyB0aGVyZSBhcmUgNjQgbWF4aW11bSB1bmlxdWUgYmV0cyAocG9zaXRpb25zKSBpbiBvbmUgZ2FtZQogICAgICB0aHJvdzsKICAgfQogIAogICBmdW5jdGlvbiB0b3RhbEdhbWVzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikKICAgewogICAgICAgcmV0dXJuIGdhbWJsZXMubGVuZ3RoOwogICB9CiAgIAogICBmdW5jdGlvbiBnZXRTZXR0aW5ncygpIGNvbnN0YW50IHJldHVybnModWludDI1NiBtYXhCZXQsIHVpbnQyNTYgb25lQ3JlZGl0LCB1aW50OCBNaW5CZXRJbkNyZWRpdHMsIHVpbnQ4IE1pbkJldEluQ3JlZGl0c181MCx1aW50OCBNaW5CZXRJbkNyZWRpdHNfMzMsIHVpbnQ4IGJsb2NrRGVsYXlCZWZvcmVTcGluLCBib29sIGNvbnRyYWN0U3RhdGUpCiAgICB7CiAgICAgICAgbWF4QmV0PWN1cnJlbnRNYXhCZXQ7CiAgICAgICAgb25lQ3JlZGl0PWN1cnJlbnRNYXhCZXQgLyAyNTY7IAogICAgICAgIGJsb2NrRGVsYXlCZWZvcmVTcGluPUJsb2NrRGVsYXk7ICAgICAgICAKICAgICAgICBNaW5CZXRJbkNyZWRpdHMgPSBkZWZhdWx0TWluQ3JlZGl0c09uQmV0OwogICAgICAgIE1pbkJldEluQ3JlZGl0c181MCA9IG1pbkNyZWRpdHNPbkJldFt1aW50OChCZXRUeXBlcy5sb3cpXTsgCiAgICAgICAgTWluQmV0SW5DcmVkaXRzXzMzID0gbWluQ3JlZGl0c09uQmV0W3VpbnQ4KEJldFR5cGVzLmNvbHVtbjEpXTsgCiAgICAgICAgY29udHJhY3RTdGF0ZSA9IENvbnRyYWN0U3RhdGU7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAKICAgIG1vZGlmaWVyIG9ubHlEZXZlbG9wZXIoKSAKICAgIHsKICAgICAgIGlmIChtc2cuc2VuZGVyICE9IGRldmVsb3BlcikgdGhyb3c7CiAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlEZXZlbG9wZXJPck9wZXJhdG9yKCkgCiAgICB7CiAgICAgICBpZiAobXNnLnNlbmRlciAhPSBkZXZlbG9wZXIgJiYgbXNnLnNlbmRlciAhPSBvcGVyYXRvcikgdGhyb3c7CiAgICAgICBfOwogICAgfQoKICAgZnVuY3Rpb24gZGlzYWJsZUJldHRpbmdfb25seV9EZXYoKQogICAgb25seURldmVsb3Blck9yT3BlcmF0b3IKICAgIHsKICAgICAgICBDb250cmFjdFN0YXRlPWZhbHNlOwogICAgfQoKCiAgICBmdW5jdGlvbiBjaGFuZ2VPcGVyYXRvcihhZGRyZXNzIG5ld09wZXJhdG9yKSBvbmx5RGV2ZWxvcGVyCiAgICB7CiAgICAgICBvcGVyYXRvciA9IG5ld09wZXJhdG9yOwogICAgfQoKICAgIGZ1bmN0aW9uIGVuYWJsZUJldHRpbmdfb25seV9EZXYoKQogICAgb25seURldmVsb3Blck9yT3BlcmF0b3IKICAgIHsKICAgICAgICBDb250cmFjdFN0YXRlPXRydWU7CgogICAgfQoKICAgIGV2ZW50IFBsYXllckJldChhZGRyZXNzIHBsYXllciwgdWludDI1NiBibG9jaywgdWludDI1NiBnYW1ibGVJZCk7CiAgICBldmVudCBFbmRHYW1lKGFkZHJlc3MgcGxheWVyLCB1aW50OCByZXN1bHQsIHVpbnQyNTYgZ2FtYmxlSWQpOwogICAgZXZlbnQgU2V0dGluZ3NDaGFuZ2VkKHVpbnQyNTYgbWF4QmV0LCB1aW50MjU2IG9uZUNyZWRpdCwgdWludDggRGVmYXVsdE1pbkJldEluQ3JlZGl0cywgdWludDggTWluQmV0SW5DcmVkaXRzNTAsIHVpbnQ4IE1pbkJldEluQ3JlZGl0czMzLCB1aW50OCBibG9ja0RlbGF5QmVmb3JlU3BpbiwgYm9vbCBjb250cmFjdFN0YXRlKTsKICAgIGV2ZW50IEVycm9yTG9nKGFkZHJlc3MgcGxheWVyLCBzdHJpbmcgbWVzc2FnZSk7CgogICBmdW5jdGlvbiB0b3RhbEJldFZhbHVlKEdhbWJsZSBnKSBwcml2YXRlIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpCiAgIHsgICAgICAgICAgICAgIAogICAgICAgdWludDI1NiB0b3RhbEJldHNWYWx1ZSA9IDA7IAogICAgICAgdWludDggblBsYXllckJldE5vID0gMDsKICAgICAgIGZvcih1aW50OCBpPTA7IGkgPCBtYXhUeXBlQmV0cztpKyspIAogICAgICAgIGlmIChpc0JpdFNldChnLmJldHMsIGkpKQogICAgICAgIHsKICAgICAgICAgIHRvdGFsQmV0c1ZhbHVlICs9IGdldEJldFZhbHVlQnlHYW1ibGUoZywgblBsYXllckJldE5vKzEpOwogICAgICAgICAgblBsYXllckJldE5vKys7CiAgICAgICAgfQoKICAgICAgIHJldHVybiB0b3RhbEJldHNWYWx1ZTsKICAgfQoKICAgZnVuY3Rpb24gdG90YWxCZXRDb3VudChHYW1ibGUgZykgcHJpdmF0ZSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KQogICB7ICAgICAgICAgICAgICAKICAgICAgIHVpbnQyNTYgdG90YWxCZXRzID0gMDsgCiAgICAgICBmb3IodWludDggaT0wOyBpIDwgbWF4VHlwZUJldHM7aSsrKSAKICAgICAgICBpZiAoaXNCaXRTZXQoZy5iZXRzLCBpKSkgdG90YWxCZXRzKys7ICAgICAgICAgIAogICAgICAgcmV0dXJuIHRvdGFsQmV0czsgICAKICAgfQoKICAgZnVuY3Rpb24gcGxhY2VCZXQodWludDI1NiBiZXRzLCBieXRlczMyIHZhbHVlczEsYnl0ZXMzMiB2YWx1ZXMyKSAgcGF5YWJsZQogICB7CiAgICAgICBpZiAoQ29udHJhY3RTdGF0ZSA9PSBmYWxzZSkKICAgICAgIHsKICAgICAgICAgRXJyb3JMb2cobXNnLnNlbmRlciwgIkNvbnRyYWN0RGlzYWJsZWQiKTsKICAgICAgICAgaWYgKG1zZy5zZW5kZXIuc2VuZChtc2cudmFsdWUpID09IGZhbHNlKSB0aHJvdzsKICAgICAgICAgcmV0dXJuOwogICAgICAgfSAKCiAgICAgICBpZiAobmJCZXRzQ3VycmVudEJsb2NrID49IG1heEJldHNQZXJCbG9jaykgCiAgICAgICB7CiAgICAgICAgIEVycm9yTG9nKG1zZy5zZW5kZXIsICJjaGVja05iQmV0c0N1cnJlbnRCbG9jayIpOwogICAgICAgICBpZiAobXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkgPT0gZmFsc2UpIHRocm93OwogICAgICAgICByZXR1cm47CiAgICAgICB9CgogICAgICAgaWYgKG1zZy52YWx1ZSA8IGN1cnJlbnRNYXhCZXQvMjU2IHx8IGJldHMgPT0gMCkKICAgICAgIHsKICAgICAgICAgIEVycm9yTG9nKG1zZy5zZW5kZXIsICJXcm9uZyBiZXQgdmFsdWUiKTsKICAgICAgICAgIGlmIChtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSA9PSBmYWxzZSkgdGhyb3c7CiAgICAgICAgICByZXR1cm47CiAgICAgICB9CgogICAgICAgaWYgKG1zZy52YWx1ZSA+IGN1cnJlbnRNYXhCZXQpCiAgICAgICB7CiAgICAgICAgICBFcnJvckxvZyhtc2cuc2VuZGVyLCAiTGltaXQgZm9yIHRhYmxlIik7CiAgICAgICAgICBpZiAobXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkgPT0gZmFsc2UpIHRocm93OwogICAgICAgICAgcmV0dXJuOwogICAgICAgfQoKICAgICAgIEdhbWJsZSBtZW1vcnkgZyA9IEdhbWJsZShtc2cuc2VuZGVyLCBibG9jay5udW1iZXIsIDAsIDM3LCBiZXRzLCB2YWx1ZXMxLHZhbHVlczIpOwoKICAgICAgIGlmICh0b3RhbEJldFZhbHVlKGcpICE9IG1zZy52YWx1ZSkKICAgICAgIHsKICAgICAgICAgIEVycm9yTG9nKG1zZy5zZW5kZXIsICJXcm9uZyBiZXQgdmFsdWUiKTsKICAgICAgICAgIGlmIChtc2cuc2VuZGVyLnNlbmQobXNnLnZhbHVlKSA9PSBmYWxzZSkgdGhyb3c7CiAgICAgICAgICByZXR1cm47CiAgICAgICB9ICAgICAgIAoKICAgICAgIHVpbnQ2NCBpbmRleCA9IGdhbWJsZUluZGV4W21zZy5zZW5kZXJdOwogICAgICAgaWYgKGluZGV4ICE9IDApCiAgICAgICB7CiAgICAgICAgICBpZiAoZ2FtYmxlc1tpbmRleC0xXS53aGVlbFJlc3VsdCA9PSAzNykgCiAgICAgICAgICB7CiAgICAgICAgICAgIEVycm9yTG9nKG1zZy5zZW5kZXIsICJwcmV2aW91cyBnYW1lIGlzIG5vdCBmaW5pc2hlZCIpOwogICAgICAgICAgICBpZiAobXNnLnNlbmRlci5zZW5kKG1zZy52YWx1ZSkgPT0gZmFsc2UpIHRocm93OwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICB9CgogICAgICAgaWYgKGdhbWJsZXMubGVuZ3RoICE9IDAgJiYgYmxvY2subnVtYmVyPT1nYW1ibGVzW2dhbWJsZXMubGVuZ3RoLTFdLmJsb2NrTnVtYmVyKSAKICAgICAgICBuYkJldHNDdXJyZW50QmxvY2srKzsKICAgICAgIGVsc2UgCiAgICAgICAgbmJCZXRzQ3VycmVudEJsb2NrID0gMDsKCiAgICAgICAvLyBnYW1ibGVJbmRleCBpcyBpbmRleCBvZiBnYW1ibGVzIGFycmF5ICsgMQogICAgICAgZ2FtYmxlSW5kZXhbbXNnLnNlbmRlcl0gPSB1aW50NjQoZ2FtYmxlcy5sZW5ndGggKyAxKTsKCiAgICAgICBnYW1ibGVzLnB1c2goZyk7CiAgICAgICAgICAgIAogICAgICAgUGxheWVyQmV0KG1zZy5zZW5kZXIsIGJsb2NrLm51bWJlciwgZ2FtYmxlcy5sZW5ndGggLSAxKTsKICAgfQoKICAgIGZ1bmN0aW9uIEludmVzdCgpIHBheWFibGUKICAgIHsKICAgICAgdXBkYXRlTWF4QmV0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gU3BpblRoZVdoZWVsKGFkZHJlc3MgcGxheWVyU3Bpbm5lZCkgCiAgICB7CiAgICAgICAgaWYgKHBsYXllclNwaW5uZWQ9PTApewogICAgICAgICAgIHBsYXllclNwaW5uZWQ9bXNnLnNlbmRlcjsKICAgICAgICB9CgogICAgICAgIHVpbnQ2NCBpbmRleCA9IGdhbWJsZUluZGV4W3BsYXllclNwaW5uZWRdOwogICAgICAgIGlmIChpbmRleCA9PSAwKSAKICAgICAgICB7CiAgICAgICAgICBFcnJvckxvZyhwbGF5ZXJTcGlubmVkLCAiTm8gZ2FtZXMgZm9yIHBsYXllciIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpbmRleC0tOyAgICAgICAgCgogICAgICAgIGlmIChnYW1ibGVzW2luZGV4XS53aGVlbFJlc3VsdCAhPSAzNykKICAgICAgICB7CiAgICAgICAgICBFcnJvckxvZyhwbGF5ZXJTcGlubmVkLCAiR2FtYmxlIGFscmVhZHkgc3Bpbm5lZCIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gCgogICAgICAgIHVpbnQyNTYgcGxheWVyYmxvY2sgPSBnYW1ibGVzW2luZGV4XS5ibG9ja051bWJlcjsKICAgICAgICAKICAgICAgICBpZiAoYmxvY2subnVtYmVyIDw9IHBsYXllcmJsb2NrICsgQmxvY2tEZWxheSkgCiAgICAgICAgewogICAgICAgICAgRXJyb3JMb2cobXNnLnNlbmRlciwgIldhaXQgZm9yIHBsYXllcmJsb2NrK2Jsb2NrRGVsYXkiKTsKICAgICAgICAgIHJldHVybjsgICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICBnYW1ibGVzW2luZGV4XS53aGVlbFJlc3VsdCA9IGdldFJhbmRvbU51bWJlcihnYW1ibGVzW2luZGV4XS5wbGF5ZXIsIHBsYXllcmJsb2NrKTsKICAgICAgICBnYW1ibGVzW2luZGV4XS5ibG9ja1NwaW5uZWQgPSBibG9jay5udW1iZXI7CiAgICAgICAgCiAgICAgICAgaWYgKGdhbWJsZXNbaW5kZXhdLnBsYXllci5zZW5kKGdldEdhbWVSZXN1bHQoaW5kZXgpKSA9PSBmYWxzZSkgdGhyb3c7CgogICAgICAgIEVuZEdhbWUoZ2FtYmxlc1tpbmRleF0ucGxheWVyLCBnYW1ibGVzW2luZGV4XS53aGVlbFJlc3VsdCwgaW5kZXgpOyAgICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UmFuZG9tTnVtYmVyKGFkZHJlc3MgcGxheWVyLCB1aW50MjU2IHBsYXllcmJsb2NrKSBwcml2YXRlIHJldHVybnModWludDggd2hlZWxSZXN1bHQpCiAgICB7CiAgICAgICAgLy8gYmxvY2suYmxvY2toYXNoIC0gaGFzaCBvZiB0aGUgZ2l2ZW4gYmxvY2sgLSBvbmx5IHdvcmtzIGZvciAyNTYgbW9zdCByZWNlbnQgYmxvY2tzIGV4Y2x1ZGluZyBjdXJyZW50CiAgICAgICAgYnl0ZXMzMiBibG9ja0hhc2ggPSBibG9jay5ibG9ja2hhc2gocGxheWVyYmxvY2srQmxvY2tEZWxheSk7IAogICAgICAgIAogICAgICAgIGlmIChibG9ja0hhc2g9PTApIAogICAgICAgIHsKICAgICAgICAgIEVycm9yTG9nKG1zZy5zZW5kZXIsICJDYW5ub3QgZ2VuZXJhdGUgcmFuZG9tIG51bWJlciIpOwogICAgICAgICAgd2hlZWxSZXN1bHQgPSAyMDA7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICBieXRlczMyIHNoYVBsYXllciA9IHNoYTMocGxheWVyLCBibG9ja0hhc2gpOwogICAgCiAgICAgICAgICB3aGVlbFJlc3VsdCA9IHVpbnQ4KHVpbnQyNTYoc2hhUGxheWVyKSUzNyk7CiAgICAgICAgfSAgICAKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjdWxhdGVSYW5kb21OdW1iZXJCeUJsb2NraGFzaCh1aW50MjU2IGJsb2NrSGFzaCwgYWRkcmVzcyBwbGF5ZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50OCB3aGVlbFJlc3VsdCkgCiAgICB7IAogICAgICAgICAgYnl0ZXMzMiBzaGFQbGF5ZXIgPSBzaGEzKHBsYXllciwgYmxvY2tIYXNoKTsKICAgIAogICAgICAgICAgd2hlZWxSZXN1bHQgPSB1aW50OCh1aW50MjU2KHNoYVBsYXllciklMzcpOwogICAgfQoKICAgIGZ1bmN0aW9uIGVtZXJnZW5jeUZpeEdhbWVSZXN1bHQodWludDY0IGdhbWJsZUlkLCB1aW50MjU2IGJsb2NrSGFzaCkgb25seURldmVsb3Blck9yT3BlcmF0b3IKICAgIHsKICAgICAgLy8gUHJvYmFibHkgdGhpcyBmdW5jdGlvbiB3aWxsIG5ldmVyIGJlIGNhbGxlZCwgYnV0CiAgICAgIC8vIGlmIGdhbWUgd2FzIG5vdCBzcGlubmVkIGluIDI1NiBibG9ja3MgdGhlbiBibG9jay5ibG9ja2hhc2ggd2lsbCByZXR1cm5zIGFsd2F5cyAwIGFuZCAKICAgICAgLy8gd2Ugc2hvdWxkIGZpeCB0aGlzIG1hbnVhbGx5ICh5b3UgY2FuIGNoZWNrIHJlc3VsdCB3aXRoIHB1YmxpYyBmdW5jdGlvbiBjYWxjdWxhdGVSYW5kb21OdW1iZXJCeUJsb2NraGFzaCkKICAgICAgR2FtYmxlIG1lbW9yeSBnYW1ibGUgPSBnYW1ibGVzW2dhbWJsZUlkXTsKICAgICAgaWYgKGdhbWJsZS53aGVlbFJlc3VsdCAhPSAyMDApIHRocm93OwoKICAgICAgZ2FtYmxlc1tnYW1ibGVJZF0ud2hlZWxSZXN1bHQgPSBjYWxjdWxhdGVSYW5kb21OdW1iZXJCeUJsb2NraGFzaChibG9ja0hhc2gsIGdhbWJsZS5wbGF5ZXIpOwogICAgICBnYW1ibGVzW2dhbWJsZUlkXS5ibG9ja1NwaW5uZWQgPSBibG9jay5udW1iZXI7CgogICAgICBpZiAoZ2FtYmxlLnBsYXllci5zZW5kKGdldEdhbWVSZXN1bHQoZ2FtYmxlSWQpKSA9PSBmYWxzZSkgdGhyb3c7CgogICAgICBFbmRHYW1lKGdhbWJsZS5wbGF5ZXIsIGdhbWJsZS53aGVlbFJlc3VsdCwgZ2FtYmxlSWQpOwogICAgfQoKICAgIC8vIAogICAgZnVuY3Rpb24gY2hlY2tHYW1lUmVzdWx0KGFkZHJlc3MgcGxheWVyU3Bpbm5lZCkgY29uc3RhbnQgcmV0dXJucyAodWludDY0IGdhbWJsZUlkLCBhZGRyZXNzIHBsYXllciwgdWludDI1NiBibG9ja051bWJlciwgdWludDI1NiBibG9ja1NwaW5uZWQsIHVpbnQyNTYgdG90YWxXaW4sIHVpbnQ4IHdoZWVsUmVzdWx0LCB1aW50MjU2IGJldHMsIHVpbnQyNTYgdmFsdWVzMSwgdWludDI1NiB2YWx1ZXMyLCB1aW50MjU2IG5Ub3RhbEJldFZhbHVlLCB1aW50MjU2IG5Ub3RhbEJldENvdW50KSAKICAgIHsKICAgICAgICBpZiAocGxheWVyU3Bpbm5lZD09MCl7CiAgICAgICAgICAgcGxheWVyU3Bpbm5lZD1tc2cuc2VuZGVyOwogICAgICAgIH0KCiAgICAgICAgdWludDY0IGluZGV4ID0gZ2FtYmxlSW5kZXhbcGxheWVyU3Bpbm5lZF07CiAgICAgICAgaWYgKGluZGV4ID09IDApIHRocm93OwogICAgICAgIGluZGV4LS07ICAgICAgICAKCiAgICAgICAgdWludDI1NiBwbGF5ZXJibG9jayA9IGdhbWJsZXNbaW5kZXhdLmJsb2NrTnVtYmVyOyAgICAgICAgCiAgICAgICAgaWYgKGJsb2NrLm51bWJlciA8PSBwbGF5ZXJibG9jayArIEJsb2NrRGVsYXkpIHRocm93OwogICAgICAgIAogICAgICAgIGdhbWJsZXNbaW5kZXhdLndoZWVsUmVzdWx0ID0gZ2V0UmFuZG9tTnVtYmVyKGdhbWJsZXNbaW5kZXhdLnBsYXllciwgcGxheWVyYmxvY2spOwogICAgICAgIGdhbWJsZXNbaW5kZXhdLmJsb2NrU3Bpbm5lZCA9IGJsb2NrLm51bWJlcjsKICAgICAgICAKICAgICAgICByZXR1cm4gZ2V0R2FtZShpbmRleCk7ICAgICAgCiAgICB9CgogICAgZnVuY3Rpb24gZ2V0R2FtZVJlc3VsdCh1aW50NjQgaW5kZXgpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiB0b3RhbFdpbikgCiAgICB7CiAgICAgICAgR2FtYmxlIG1lbW9yeSBnYW1lID0gZ2FtYmxlc1tpbmRleF07CiAgICAgICAgdG90YWxXaW4gPSAwOwogICAgICAgIHVpbnQ4IG5QbGF5ZXJCZXRObyA9IDA7CiAgICAgICAgZm9yKHVpbnQ4IGk9MDsgaTxtYXhUeXBlQmV0czsgaSsrKQogICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChpc0JpdFNldChnYW1lLmJldHMsIGkpKQogICAgICAgICAgICB7ICAgICAgICAgICAgICAKICAgICAgICAgICAgICB2YXIgd2luTXVsID0gd2luTWF0cml4LmdldENvZWZmKGdldEluZGV4KGksIGdhbWUud2hlZWxSZXN1bHQpKTsgLy8gZ2V0IHdpbiBjb2VmCiAgICAgICAgICAgICAgaWYgKHdpbk11bCA+IDApIHdpbk11bCsrOyAvLyArIHJldHVybiBwbGF5ZXIgYmV0CiAgICAgICAgICAgICAgdG90YWxXaW4gKz0gd2luTXVsICogZ2V0QmV0VmFsdWVCeUdhbWJsZShnYW1lLCBuUGxheWVyQmV0Tm8rMSk7CiAgICAgICAgICAgICAgblBsYXllckJldE5vKys7IAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0b3RhbFdpbiA9PSAwKSB0b3RhbFdpbiA9IDEgd2VpOyAvLyAxIHdlaSBpZiBsb3NlICAgICAgICAgICAgICAgICAgICAgIAogICAgfQoKICAgIGZ1bmN0aW9uIGdldEdhbWUodWludDY0IGluZGV4KSBjb25zdGFudCByZXR1cm5zICh1aW50NjQgZ2FtYmxlSWQsIGFkZHJlc3MgcGxheWVyLCB1aW50MjU2IGJsb2NrTnVtYmVyLCB1aW50MjU2IGJsb2NrU3Bpbm5lZCwgdWludDI1NiB0b3RhbFdpbiwgdWludDggd2hlZWxSZXN1bHQsIHVpbnQyNTYgYmV0cywgdWludDI1NiB2YWx1ZXMxLCB1aW50MjU2IHZhbHVlczIsIHVpbnQyNTYgblRvdGFsQmV0VmFsdWUsIHVpbnQyNTYgblRvdGFsQmV0Q291bnQpIAogICAgewogICAgICAgIGdhbWJsZUlkID0gaW5kZXg7CiAgICAgICAgcGxheWVyID0gZ2FtYmxlc1tpbmRleF0ucGxheWVyOwogICAgICAgIHRvdGFsV2luID0gZ2V0R2FtZVJlc3VsdChpbmRleCk7CiAgICAgICAgYmxvY2tOdW1iZXIgPSBnYW1ibGVzW2luZGV4XS5ibG9ja051bWJlcjsKICAgICAgICBibG9ja1NwaW5uZWQgPSBnYW1ibGVzW2luZGV4XS5ibG9ja1NwaW5uZWQ7CiAgICAgICAgd2hlZWxSZXN1bHQgPSBnYW1ibGVzW2luZGV4XS53aGVlbFJlc3VsdDsKICAgICAgICBuVG90YWxCZXRWYWx1ZSA9IHRvdGFsQmV0VmFsdWUoZ2FtYmxlc1tpbmRleF0pOwogICAgICAgIG5Ub3RhbEJldENvdW50ID0gdG90YWxCZXRDb3VudChnYW1ibGVzW2luZGV4XSk7CiAgICAgICAgYmV0cyA9IGdhbWJsZXNbaW5kZXhdLmJldHM7CiAgICAgICAgdmFsdWVzMSA9IHVpbnQyNTYoZ2FtYmxlc1tpbmRleF0udmFsdWVzKTsKICAgICAgICB2YWx1ZXMyID0gdWludDI1NihnYW1ibGVzW2luZGV4XS52YWx1ZXMyKTsgICAgICAgIAogICAgfQoKICAgZnVuY3Rpb24oKSAKICAgewogICAgICB0aHJvdzsKICAgfQogICAKCn0='.
	

]
