Class {
	#name : #SRT330bebabc9a2a4136e3d1cb38ca521f5a95aec2e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT330bebabc9a2a4136e3d1cb38ca521f5a95aec2e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IEFwcHJvdmVBbmRDYWxsUmVjZWl2ZXIgewogICAgZnVuY3Rpb24gcmVjZWl2ZUFwcHJvdmFsKAogICAgICAgIGFkZHJlc3MgX2Zyb20sIAogICAgICAgIHVpbnQyNTYgX2Ftb3VudCwgCiAgICAgICAgYWRkcmVzcyBfdG9rZW4sIAogICAgICAgIGJ5dGVzIF9kYXRhCiAgICApIHB1YmxpYzsKfQoKLy9ub3JtYWwgY29udHJhY3QuIGFscmVhZHkgY29tcGlsZWQgYXMgYmluCmNvbnRyYWN0IENvbnRyb2xsZWQgewogICAgLy8vIEBub3RpY2UgVGhlIGFkZHJlc3Mgb2YgdGhlIGNvbnRyb2xsZXIgaXMgdGhlIG9ubHkgYWRkcmVzcyB0aGF0IGNhbiBjYWxsCiAgICAvLy8gIGEgZnVuY3Rpb24gd2l0aCB0aGlzIG1vZGlmaWVyCiAgICBtb2RpZmllciBvbmx5Q29udHJvbGxlciB7IAogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsgCiAgICAgICAgXzsgCiAgICB9CgogICAgLy9ibG9jayBmb3IgY2hlY2svL2Jvb2wgcHJpdmF0ZSBpbml0aWFsZWQgPSBmYWxzZTsKICAgIGFkZHJlc3MgcHVibGljIGNvbnRyb2xsZXI7CgogICAgZnVuY3Rpb24gQ29udHJvbGxlZCgpIHB1YmxpYyB7CiAgICAgIC8vYmxvY2sgZm9yIGNoZWNrLy9yZXF1aXJlKCFpbml0aWFsZWQpOwogICAgICBjb250cm9sbGVyID0gbXNnLnNlbmRlcjsKICAgICAgLy9ibG9jayBmb3IgY2hlY2svL2luaXRpYWxlZCA9IHRydWU7CiAgICB9CgogICAgLy8vIEBub3RpY2UgQ2hhbmdlcyB0aGUgY29udHJvbGxlciBvZiB0aGUgY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX25ld0NvbnRyb2xsZXIgVGhlIG5ldyBjb250cm9sbGVyIG9mIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gY2hhbmdlQ29udHJvbGxlcihhZGRyZXNzIF9uZXdDb250cm9sbGVyKSBvbmx5Q29udHJvbGxlciBwdWJsaWMgewogICAgICAgIGNvbnRyb2xsZXIgPSBfbmV3Q29udHJvbGxlcjsKICAgIH0KfQoKLy9hYnN0cmFjdCBjb250cmFjdC4gdXNlZCBmb3IgaW50ZXJmYWNlCmNvbnRyYWN0IFRva2VuQ29udHJvbGxlciB7CiAgICAvLy8gQG5vdGljZSBDYWxsZWQgd2hlbiBgX293bmVyYCBzZW5kcyBldGhlciB0byB0aGUgTWluaU1lIFRva2VuIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHNlbnQgdGhlIGV0aGVyIHRvIGNyZWF0ZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIGV0aGVyIGlzIGFjY2VwdGVkLCBmYWxzZSBpZiBpdCB0aHJvd3MKICAgIGZ1bmN0aW9uIHByb3h5UGF5bWVudChhZGRyZXNzIF9vd25lcikgcGF5YWJsZSBwdWJsaWMgcmV0dXJucyhib29sKTsKCiAgICAvLy8gQG5vdGljZSBOb3RpZmllcyB0aGUgY29udHJvbGxlciBhYm91dCBhIHRva2VuIHRyYW5zZmVyIGFsbG93aW5nIHRoZQogICAgLy8vICBjb250cm9sbGVyIHRvIHJlYWN0IGlmIGRlc2lyZWQKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmZXIKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgdHJhbnNmZXIKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRoZSB0cmFuc2ZlcgogICAgLy8vIEByZXR1cm4gRmFsc2UgaWYgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgYXV0aG9yaXplIHRoZSB0cmFuc2ZlcgogICAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sKTsKCiAgICAvLy8gQG5vdGljZSBOb3RpZmllcyB0aGUgY29udHJvbGxlciBhYm91dCBhbiBhcHByb3ZhbCBhbGxvd2luZyB0aGUKICAgIC8vLyAgY29udHJvbGxlciB0byByZWFjdCBpZiBkZXNpcmVkCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IGNhbGxzIGBhcHByb3ZlKClgCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBzcGVuZGVyIGluIHRoZSBgYXBwcm92ZSgpYCBjYWxsCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBpbiB0aGUgYGFwcHJvdmUoKWAgY2FsbAogICAgLy8vIEByZXR1cm4gRmFsc2UgaWYgdGhlIGNvbnRyb2xsZXIgZG9lcyBub3QgYXV0aG9yaXplIHRoZSBhcHByb3ZhbAogICAgZnVuY3Rpb24gb25BcHByb3ZlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zKGJvb2wpOwp9Cgpjb250cmFjdCBFUkMyMFRva2VuIHsKICAgIC8qIFRoaXMgaXMgYSBzbGlnaHQgY2hhbmdlIHRvIHRoZSBFUkMyMCBiYXNlIHN0YW5kYXJkLgogICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKICAgICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICAgIFRoaXMgYXV0b21hdGljYWxseSBjcmVhdGVzIGEgZ2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgdG90YWxTdXBwbHkuCiAgICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgICBjdXJyZW50bHkgcmVjb2duaXNlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbWF0Y2hpbmcgYWJzdHJhY3QKICAgICAgZnVuY3Rpb24gYnkgdGhlIGNvbXBpbGVyLgogICAgKi8KICAgIC8vLyB0b3RhbCBhbW91bnQgb2YgdG9rZW5zCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIC8vZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBmcm9tIHdoaWNoIHRoZSBiYWxhbmNlIHdpbGwgYmUgcmV0cmlldmVkCiAgICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFsYW5jZU9mOwogICAgLy9mdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIGFsbG93YW5jZTsKICAgIC8vZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCmNvbnRyYWN0IFRva2VuSSBpcyBFUkMyMFRva2VuLCBDb250cm9sbGVkIHsKCiAgICBzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAgICAgICAgIC8vVGhlIFRva2VuJ3MgbmFtZTogZS5nLiBEaWdpeERBTyBUb2tlbnMKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgICAgICAgICAgICAgLy9OdW1iZXIgb2YgZGVjaW1hbHMgb2YgdGhlIHNtYWxsZXN0IHVuaXQKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOyAgICAgICAgICAgICAgLy9BbiBpZGVudGlmaWVyOiBlLmcuIFJFUAoKCiAgICAvLyBFUkMyMCBNZXRob2RzCgogICAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfc3BlbmRlcmAgdG8gc2VuZCBgX2Ftb3VudGAgdG9rZW5zIG9uCiAgICAvLy8gIGl0cyBiZWhhbGYsIGFuZCB0aGVuIGEgZnVuY3Rpb24gaXMgdHJpZ2dlcmVkIGluIHRoZSBjb250cmFjdCB0aGF0IGlzCiAgICAvLy8gIGJlaW5nIGFwcHJvdmVkLCBgX3NwZW5kZXJgLiBUaGlzIGFsbG93cyB1c2VycyB0byB1c2UgdGhlaXIgdG9rZW5zIHRvCiAgICAvLy8gIGludGVyYWN0IHdpdGggY29udHJhY3RzIGluIG9uZSBmdW5jdGlvbiBjYWxsIGluc3RlYWQgb2YgdHdvCiAgICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBjb250cmFjdCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIGZ1bmN0aW9uIGNhbGwgd2FzIHN1Y2Nlc3NmdWwKICAgIGZ1bmN0aW9uIGFwcHJvdmVBbmRDYWxsKAogICAgICAgIGFkZHJlc3MgX3NwZW5kZXIsCiAgICAgICAgdWludDI1NiBfYW1vdW50LAogICAgICAgIGJ5dGVzIF9leHRyYURhdGEKICAgICkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgoKICAgIC8vIEdlbmVyYXRlIGFuZCBkZXN0cm95IHRva2VucwoKICAgIC8vLyBAbm90aWNlIEdlbmVyYXRlcyBgX2Ftb3VudGAgdG9rZW5zIHRoYXQgYXJlIGFzc2lnbmVkIHRvIGBfb3duZXJgCiAgICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgYmUgYXNzaWduZWQgdGhlIG5ldyB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCBUaGUgcXVhbnRpdHkgb2YgdG9rZW5zIGdlbmVyYXRlZAogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdG9rZW5zIGFyZSBnZW5lcmF0ZWQgY29ycmVjdGx5CiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRva2VucyhhZGRyZXNzIF9vd25lciwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CgoKICAgIC8vLyBAbm90aWNlIEJ1cm5zIGBfYW1vdW50YCB0b2tlbnMgZnJvbSBgX293bmVyYAogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgdGhhdCB3aWxsIGxvc2UgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gYnVybgogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdG9rZW5zIGFyZSBidXJuZWQgY29ycmVjdGx5CiAgICBmdW5jdGlvbiBkZXN0cm95VG9rZW5zKGFkZHJlc3MgX293bmVyLCB1aW50IF9hbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKTsKCiAgICAvLy8gQG5vdGljZSBFbmFibGVzIHRva2VuIGhvbGRlcnMgdG8gdHJhbnNmZXIgdGhlaXIgdG9rZW5zIGZyZWVseSBpZiB0cnVlCiAgICAvLy8gQHBhcmFtIF90cmFuc2ZlcnNFbmFibGVkIFRydWUgaWYgdHJhbnNmZXJzIGFyZSBhbGxvd2VkIGluIHRoZSBjbG9uZQogICAgZnVuY3Rpb24gZW5hYmxlVHJhbnNmZXJzKGJvb2wgX3RyYW5zZmVyc0VuYWJsZWQpIHB1YmxpYzsKCgogICAgLy8gU2FmZXR5IE1ldGhvZHMKCiAgICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAgIC8vLyAgc2VudCB0b2tlbnMgdG8gdGhpcyBjb250cmFjdC4KICAgIC8vLyBAcGFyYW0gX3Rva2VuIFRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHlvdSB3YW50IHRvIHJlY292ZXIKICAgIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogICAgZnVuY3Rpb24gY2xhaW1Ub2tlbnMoYWRkcmVzcyBfdG9rZW4pIHB1YmxpYzsKCgogICAgLy8gRXZlbnRzCgogICAgZXZlbnQgQ2xhaW1lZFRva2VucyhhZGRyZXNzIGluZGV4ZWQgX3Rva2VuLCBhZGRyZXNzIGluZGV4ZWQgX2NvbnRyb2xsZXIsIHVpbnQgX2Ftb3VudCk7Cn0KCmNvbnRyYWN0IFRva2VuIGlzIFRva2VuSSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBzdHJpbmcgcHVibGljIHRlY2hQcm92aWRlciA9ICJXZVlpaSBUZWNoIjsKICAgIHN0cmluZyBwdWJsaWMgb2ZmaWNpYWxTaXRlID0gImh0dHA6Ly93d3cuYmVhdXR5YmxvYy5pbyI7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgc3RydWN0IEZyZWV6ZUluZm8gewogICAgICAgIGFkZHJlc3MgdXNlcjsKICAgICAgICB1aW50MjU2IGFtb3VudDsKICAgIH0KICAgIC8vS2V5MTogc3RlcCjli5/otYTpmLbmrrUpOyBLZXkyOiB1c2VyIHNlcXVlbmNlKOeUqOaIt+W6j+WIlykKICAgIG1hcHBpbmcgKHVpbnQ4ID0+IG1hcHBpbmcgKHVpbnQ4ID0+IEZyZWV6ZUluZm8pKSBwdWJsaWMgZnJlZXplT2Y7IC8v5omA5pyJ6ZSB5LuT77yMa2V5IOS9v+eUqOW6j+WPt+WQkeS4iuWinuWKoO+8jOaWueS+v+eoi+W6j+afpeivouOAggogICAgbWFwcGluZyAodWludDggPT4gdWludDgpIHB1YmxpYyBsYXN0RnJlZXplU2VxOyAvL+acgOWQjueahCBmcmVlemVPZiDplK7lgLzjgIJrZXk6IHN0ZXA7IHZhbHVlOiBzZXF1ZW5jZQogICAgbWFwcGluZyAodWludDggPT4gdWludDgpIGludGVybmFsIHVubG9ja1RpbWU7CgogICAgYm9vbCBwdWJsaWMgdHJhbnNmZXJzRW5hYmxlZDsKCiAgICAvKiBUaGlzIGdlbmVyYXRlcyBhIHB1YmxpYyBldmVudCBvbiB0aGUgYmxvY2tjaGFpbiB0aGF0IHdpbGwgbm90aWZ5IGNsaWVudHMgKi8KICAgIC8vZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7CgogICAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQgKi8KICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGZyb20sIHVpbnQyNTYgdmFsdWUpOwogICAgCiAgICAvKiBUaGlzIG5vdGlmaWVzIGNsaWVudHMgYWJvdXQgdGhlIGFtb3VudCBmcm96ZW4gKi8KICAgIGV2ZW50IEZyZWV6ZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CiAgICAKICAgIC8qIFRoaXMgbm90aWZpZXMgY2xpZW50cyBhYm91dCB0aGUgYW1vdW50IHVuZnJvemVuICovCiAgICBldmVudCBVbmZyZWV6ZShhZGRyZXNzIGluZGV4ZWQgZnJvbSwgdWludDI1NiB2YWx1ZSk7CgogICAgLyogSW5pdGlhbGl6ZXMgY29udHJhY3Qgd2l0aCBpbml0aWFsIHN1cHBseSB0b2tlbnMgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIGNvbnRyYWN0ICovCiAgICBmdW5jdGlvbiBUb2tlbigKICAgICAgICB1aW50MjU2IGluaXRpYWxTdXBwbHksCiAgICAgICAgc3RyaW5nIHRva2VuTmFtZSwKICAgICAgICB1aW50OCBkZWNpbWFsVW5pdHMsCiAgICAgICAgc3RyaW5nIHRva2VuU3ltYm9sLAogICAgICAgIGJvb2wgdHJhbnNmZXJzRW5hYmxlCiAgICAgICAgKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGluaXRpYWxTdXBwbHk7CiAgICAgICAgdG90YWxTdXBwbHkgPSBpbml0aWFsU3VwcGx5OwogICAgICAgIG5hbWUgPSB0b2tlbk5hbWU7CiAgICAgICAgc3ltYm9sID0gdG9rZW5TeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBkZWNpbWFsVW5pdHM7CiAgICAgICAgdHJhbnNmZXJzRW5hYmxlZCA9IHRyYW5zZmVyc0VuYWJsZTsKICAgICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBvd25lck9yQ29udHJvbGxlcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgbXNnLnNlbmRlciA9PSBjb250cm9sbGVyKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG93bmVyT3JVc2VyKGFkZHJlc3MgdXNlcil7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyIHx8IG1zZy5zZW5kZXIgPT0gdXNlcik7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciByZWFsVXNlcihhZGRyZXNzIHVzZXIpewogICAgICAgIGlmKHVzZXIgPT0gMHgwKXsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbW9yZVRoYW5aZXJvKHVpbnQyNTYgX3ZhbHVlKXsKICAgICAgICBpZiAoX3ZhbHVlIDw9IDApewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBtb3JlT3JFcXVhbFplcm8odWludDI1NiBfdmFsdWUpewogICAgICAgIGlmKF92YWx1ZSA8IDApewogICAgICAgICAgICByZXZlcnQoKTsKICAgICAgICB9CiAgICAgICAgXzsKICAgIH0KCiAgICAvLy8gQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYW4gYWRkcmVzcyBpcyBhIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF9hZGRyIFRoZSBhZGRyZXNzIGJlaW5nIHF1ZXJpZWQKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgYF9hZGRyYCBpcyBhIGNvbnRyYWN0CiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMoYm9vbCkgewogICAgICAgIHVpbnQgc2l6ZTsKICAgICAgICBpZiAoX2FkZHIgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNpemU+MDsKICAgIH0KCiAgICAvKiBTZW5kIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJlYWxVc2VyKF90bykgbW9yZVRoYW5aZXJvKF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICAvL2luZm9BZGRyKCdtc2cuc2VuZGVyJywgbXNnLnNlbmRlcik7CiAgICAgICAgLy9pbmZvQm9vbCgndHlwZU9mIG1zZy5zZW5kZXInLCBpc0NvbnRyYWN0KG1zZy5zZW5kZXIpKTsKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZlttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOyAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbmRlciBoYXMgZW5vdWdoCiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VPZltfdG9dKTsgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSA9IGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtIF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlT2ZbX3RvXSA9IGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHNhbWUgdG8gdGhlIHJlY2lwaWVudAogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGFueW9uZSBsaXN0ZW5pbmcgdGhhdCB0aGlzIHRyYW5zZmVyIHRvb2sgcGxhY2UKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiBBbGxvdyBhbm90aGVyIGNvbnRyYWN0IHRvIHNwZW5kIHNvbWUgdG9rZW5zIGluIHlvdXIgYmVoYWxmICovCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBtb3JlVGhhblplcm8oX3ZhbHVlKSBwdWJsaWMKICAgICAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzZW5kIGBfYW1vdW50YCB0b2tlbnMgb24KICAgICAqICBpdHMgYmVoYWxmLCBhbmQgdGhlbiBhIGZ1bmN0aW9uIGlzIHRyaWdnZXJlZCBpbiB0aGUgY29udHJhY3QgdGhhdCBpcwogICAgICogIGJlaW5nIGFwcHJvdmVkLCBgX3NwZW5kZXJgLiBUaGlzIGFsbG93cyB1c2VycyB0byB1c2UgdGhlaXIgdG9rZW5zIHRvCiAgICAgKiAgaW50ZXJhY3Qgd2l0aCBjb250cmFjdHMgaW4gb25lIGZ1bmN0aW9uIGNhbGwgaW5zdGVhZCBvZiB0d28KICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgY29udHJhY3QgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZnVuY3Rpb24gY2FsbCB3YXMgc3VjY2Vzc2Z1bAogICAgICovCiAgICBmdW5jdGlvbiBhcHByb3ZlQW5kQ2FsbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF9hbW91bnQsIGJ5dGVzIF9leHRyYURhdGEpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXF1aXJlKGFwcHJvdmUoX3NwZW5kZXIsIF9hbW91bnQpKTsKCiAgICAgICAgQXBwcm92ZUFuZENhbGxSZWNlaXZlcihfc3BlbmRlcikucmVjZWl2ZUFwcHJvdmFsKAogICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICBfYW1vdW50LAogICAgICAgICAgICB0aGlzLAogICAgICAgICAgICBfZXh0cmFEYXRhCiAgICAgICAgKTsKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyogQSBjb250cmFjdCBhdHRlbXB0cyB0byBnZXQgdGhlIGNvaW5zICovCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZWFsVXNlcihfZnJvbSkgcmVhbFVzZXIoX3RvKSBtb3JlVGhhblplcm8oX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX2Zyb21dID49IF92YWx1ZSk7ICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKICAgICAgICByZXF1aXJlKGJhbGFuY2VPZltfdG9dICsgX3ZhbHVlID4gYmFsYW5jZU9mW190b10pOyAgLy8gQ2hlY2sgZm9yIG92ZXJmbG93cwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0pOyAgICAgLy8gQ2hlY2sgYWxsb3dhbmNlCiAgICAgICAgYmFsYW5jZU9mW19mcm9tXSA9IGJhbGFuY2VPZltfZnJvbV0gLSBfdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZnJvbSB0aGUgc2VuZGVyCiAgICAgICAgYmFsYW5jZU9mW190b10gPSBiYWxhbmNlT2ZbX3RvXSArIF92YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2FtZSB0byB0aGUgcmVjaXBpZW50CiAgICAgICAgYWxsb3dhbmNlW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93YW5jZVtfZnJvbV1bbXNnLnNlbmRlcl0gKyBfdmFsdWU7CiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJNdWx0aShhZGRyZXNzW10gX3RvLCB1aW50MjU2W10gX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAodWludDI1NiBhbW91bnQpewogICAgICAgIHJlcXVpcmUoX3RvLmxlbmd0aCA9PSBfdmFsdWUubGVuZ3RoKTsKICAgICAgICB1aW50OCBsZW4gPSB1aW50OChfdG8ubGVuZ3RoKTsKICAgICAgICBmb3IodWludDggajsgajxsZW47IGorKyl7CiAgICAgICAgICAgIGFtb3VudCArPSBfdmFsdWVbal07CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW21zZy5zZW5kZXJdID49IGFtb3VudCk7CiAgICAgICAgZm9yKHVpbnQ4IGk7IGk8bGVuOyBpKyspewogICAgICAgICAgICBhZGRyZXNzIF90b0kgPSBfdG9baV07CiAgICAgICAgICAgIHVpbnQyNTYgX3ZhbHVlSSA9IF92YWx1ZVtpXTsKICAgICAgICAgICAgYmFsYW5jZU9mW190b0ldICs9IF92YWx1ZUk7CiAgICAgICAgICAgIGJhbGFuY2VPZlttc2cuc2VuZGVyXSAtPSBfdmFsdWVJOwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG9JLCBfdmFsdWVJKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8v5Y+q6IO96Ieq5bex5oiW6ICFIG93bmVyIOaJjeiDveWGu+e7k+i0puaItwogICAgZnVuY3Rpb24gZnJlZXplKGFkZHJlc3MgX3VzZXIsIHVpbnQyNTYgX3ZhbHVlLCB1aW50OCBfc3RlcCkgbW9yZVRoYW5aZXJvKF92YWx1ZSkgb25seUNvbnRyb2xsZXIgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vaW5mbzI1NigiYmFsYW5jZU9mW191c2VyXSIsIGJhbGFuY2VPZltfdXNlcl0pOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW191c2VyXSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VPZltfdXNlcl0gPSBiYWxhbmNlT2ZbX3VzZXJdIC0gX3ZhbHVlOwogICAgICAgIGZyZWV6ZU9mW19zdGVwXVtsYXN0RnJlZXplU2VxW19zdGVwXV0gPSBGcmVlemVJbmZvKHt1c2VyOl91c2VyLCBhbW91bnQ6X3ZhbHVlfSk7CiAgICAgICAgbGFzdEZyZWV6ZVNlcVtfc3RlcF0rKzsKICAgICAgICBGcmVlemUoX3VzZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZXZlbnQgaW5mb0Jvb2woc3RyaW5nIG5hbWUsIGJvb2wgdmFsdWUpOwogICAgZXZlbnQgaW5mb0FkZHIoc3RyaW5nIG5hbWUsIGFkZHJlc3MgYWRkcik7CiAgICBldmVudCBpbmZvKHN0cmluZyBuYW1lLCB1aW50OCB2YWx1ZSk7CiAgICBldmVudCBpbmZvMjU2KHN0cmluZyBuYW1lLCB1aW50MjU2IHZhbHVlKTsKICAgIAogICAgLy/kuLrnlKjmiLfop6PplIHotKbmiLfotYTph5EKICAgIGZ1bmN0aW9uIHVuRnJlZXplKHVpbnQ4IF9zdGVwKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wgdW5sb2NrT3ZlcikgewogICAgICAgIC8vX2VuZCA9IGxlbmd0aCBvZiBmcmVlemVPZltfc3RlcF0KICAgICAgICB1aW50OCBfZW5kID0gbGFzdEZyZWV6ZVNlcVtfc3RlcF07CiAgICAgICAgcmVxdWlyZShfZW5kID4gMCk7CiAgICAgICAgLy9pbmZvKCJfZW5kIiwgX2VuZCk7CiAgICAgICAgdW5sb2NrT3ZlciA9IChfZW5kIDw9IDk5KTsKICAgICAgICB1aW50OCBfc3RhcnQgPSAoX2VuZCA+IDk5KSA/IF9lbmQtMTAwIDogMDsKICAgICAgICAvL2luZm8oIl9zdGFydCIsIF9zdGFydCk7CiAgICAgICAgZm9yKDsgX2VuZD5fc3RhcnQ7IF9lbmQtLSl7CiAgICAgICAgICAgIEZyZWV6ZUluZm8gc3RvcmFnZSBmSW5mbyA9IGZyZWV6ZU9mW19zdGVwXVtfZW5kLTFdOwogICAgICAgICAgICB1aW50MjU2IF9hbW91bnQgPSBmSW5mby5hbW91bnQ7CiAgICAgICAgICAgIGJhbGFuY2VPZltmSW5mby51c2VyXSArPSBfYW1vdW50OwogICAgICAgICAgICBkZWxldGUgZnJlZXplT2ZbX3N0ZXBdW19lbmQtMV07CiAgICAgICAgICAgIGxhc3RGcmVlemVTZXFbX3N0ZXBdLS07CiAgICAgICAgICAgIFVuZnJlZXplKGZJbmZvLnVzZXIsIF9hbW91bnQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy9hY2NlcHQgZXRoZXIKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSBwdWJsaWMgewogICAgICAgIC8v5bGP6JS95o6n5Yi25pa555qE5ZCI57qm57G75Z6L5qOA5p+l77yM5Lul5YW85a655Y+R6KGM5pa55peg5o6n5Yi25ZCI57qm55qE5oOF5Ya144CCCiAgICAgICAgcmVxdWlyZShpc0NvbnRyYWN0KGNvbnRyb2xsZXIpKTsKICAgICAgICBib29sIHByb3h5UGF5bWVudCA9IFRva2VuQ29udHJvbGxlcihjb250cm9sbGVyKS5wcm94eVBheW1lbnQudmFsdWUobXNnLnZhbHVlKShtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHByb3h5UGF5bWVudCk7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gR2VuZXJhdGUgYW5kIGRlc3Ryb3kgdG9rZW5zCiAgICAvLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgR2VuZXJhdGVzIGBfYW1vdW50YCB0b2tlbnMgdGhhdCBhcmUgYXNzaWduZWQgdG8gYF9vd25lcmAKICAgIC8vLyBAcGFyYW0gX3VzZXIgVGhlIGFkZHJlc3MgdGhhdCB3aWxsIGJlIGFzc2lnbmVkIHRoZSBuZXcgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIHF1YW50aXR5IG9mIHRva2VucyBnZW5lcmF0ZWQKICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHRva2VucyBhcmUgZ2VuZXJhdGVkIGNvcnJlY3RseQogICAgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbnMoYWRkcmVzcyBfdXNlciwgdWludCBfYW1vdW50KSBvbmx5Q29udHJvbGxlciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoYmFsYW5jZU9mW293bmVyXSA+PSBfYW1vdW50KTsKICAgICAgICBiYWxhbmNlT2ZbX3VzZXJdICs9IF9hbW91bnQ7CiAgICAgICAgYmFsYW5jZU9mW293bmVyXSAtPSBfYW1vdW50OwogICAgICAgIFRyYW5zZmVyKDAsIF91c2VyLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBCdXJucyBgX2Ftb3VudGAgdG9rZW5zIGZyb20gYF9vd25lcmAKICAgIC8vLyBAcGFyYW0gX3VzZXIgVGhlIGFkZHJlc3MgdGhhdCB3aWxsIGxvc2UgdGhlIHRva2VucwogICAgLy8vIEBwYXJhbSBfYW1vdW50IFRoZSBxdWFudGl0eSBvZiB0b2tlbnMgdG8gYnVybgogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdG9rZW5zIGFyZSBidXJuZWQgY29ycmVjdGx5CiAgICBmdW5jdGlvbiBkZXN0cm95VG9rZW5zKGFkZHJlc3MgX3VzZXIsIHVpbnQgX2Ftb3VudCkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlT2ZbX3VzZXJdID49IF9hbW91bnQpOwogICAgICAgIGJhbGFuY2VPZltvd25lcl0gKz0gX2Ftb3VudDsKICAgICAgICBiYWxhbmNlT2ZbX3VzZXJdIC09IF9hbW91bnQ7CiAgICAgICAgVHJhbnNmZXIoX3VzZXIsIDAsIF9hbW91bnQpOwogICAgICAgIEJ1cm4oX3VzZXIsIF9hbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIEVuYWJsZSB0b2tlbnMgdHJhbnNmZXJzCiAgICAvLy8vLy8vLy8vLy8vLy8vCgogICAgLy8vIEBub3RpY2UgRW5hYmxlcyB0b2tlbiBob2xkZXJzIHRvIHRyYW5zZmVyIHRoZWlyIHRva2VucyBmcmVlbHkgaWYgdHJ1ZQogICAgLy8vIEBwYXJhbSBfdHJhbnNmZXJzRW5hYmxlZCBUcnVlIGlmIHRyYW5zZmVycyBhcmUgYWxsb3dlZCBpbiB0aGUgY2xvbmUKICAgIGZ1bmN0aW9uIGVuYWJsZVRyYW5zZmVycyhib29sIF90cmFuc2ZlcnNFbmFibGVkKSBvbmx5T3duZXIgcHVibGljIHsKICAgICAgICB0cmFuc2ZlcnNFbmFibGVkID0gX3RyYW5zZmVyc0VuYWJsZWQ7CiAgICB9CgogICAgLy8vLy8vLy8vLwogICAgLy8gU2FmZXR5IE1ldGhvZHMKICAgIC8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAgIC8vLyAgc2VudCB0b2tlbnMgdG8gdGhpcyBjb250cmFjdC4KICAgIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogICAgZnVuY3Rpb24gY2xhaW1Ub2tlbnMoYWRkcmVzcyBfdG9rZW4pIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgaWYgKF90b2tlbiA9PSAweDApIHsKICAgICAgICAgICAgY29udHJvbGxlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBUb2tlbiB0b2tlbiA9IFRva2VuKF90b2tlbik7CiAgICAgICAgdWludCBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHRva2VuLnRyYW5zZmVyKGNvbnRyb2xsZXIsIGJhbGFuY2UpOwogICAgICAgIENsYWltZWRUb2tlbnMoX3Rva2VuLCBjb250cm9sbGVyLCBiYWxhbmNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcihhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBiYWxhbmNlT2ZbbmV3T3duZXJdICs9IGJhbGFuY2VPZltvd25lcl07CiAgICAgICAgYmFsYW5jZU9mW293bmVyXSA9IDA7CiAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQpjb250cmFjdCBLb3JlYVNob3cgaXMgVG9rZW5Db250cm9sbGVyLCBDb250cm9sbGVkIHsKCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICB1aW50MjU2IHB1YmxpYyBzdGFydEZ1bmRpbmdUaW1lOwogICAgdWludDI1NiBwdWJsaWMgZW5kRnVuZGluZ1RpbWU7CiAgICAKICAgIHVpbnQyNTYgY29uc3RhbnQgcHVibGljIG1heGltdW1GdW5kaW5nID0gMTAwIGV0aGVyOwogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zUGVyRXRoZXIgPSAzMTAwMDsKICAgIHVpbnQyNTYgY29uc3RhbnQgb25lRGF5ID0gODY0MDA7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbENvbGxlY3RlZCA9IDA7CiAgICBib29sICAgIHB1YmxpYyBwYXVzZWQ7CiAgICBzdHJpbmcgIHB1YmxpYyB0ZWNoUHJvdmlkZXIgPSAiV2VZaWkgVGVjaCI7CiAgICBUb2tlbiAgIHB1YmxpYyB0b2tlbkNvbnRyYWN0OwogICAgYm9vbCAgICBwdWJsaWMgZmluYWxpemVkID0gZmFsc2U7CiAgICBib29sICAgIHB1YmxpYyBhbGxvd0NoYW5nZSA9IHRydWU7CiAgICBib29sICAgIHByaXZhdGUgdHJhbnNmZXJzRW5hYmxlZCA9IHRydWU7CiAgICBhZGRyZXNzIHByaXZhdGUgdmF1bHRBZGRyZXNzOwoKICAgIGJvb2wgcHJpdmF0ZSBpbml0aWFsZWQgPSBmYWxzZTsKCiAgICBldmVudCBQYXltZW50KGFkZHJlc3MgaW5kZXhlZCBfc2VuZGVyLCB1aW50MjU2IF9ldGhBbW91bnQsIHVpbnQyNTYgX3Rva2VuQW1vdW50KTsKCiAgICAvKioKICAgICAqIEBwYXJhbSBfc3RhcnRGdW5kaW5nVGltZSBUaGUgVU5JWCB0aW1lIHRoYXQgdGhlIFByZVRva2VuU2FsZSB3aWxsIGJlIGFibGUgdG8gc3RhcnQgcmVjZWl2aW5nIGZ1bmRzCiAgICAgKiBAcGFyYW0gX2VuZEZ1bmRpbmdUaW1lICAgVGhlIFVOSVggdGltZSB0aGF0IHRoZSBQcmVUb2tlblNhbGUgd2lsbCBzdG9wIGJlaW5nIGFibGUgdG8gcmVjZWl2ZSBmdW5kcwogICAgICogQHBhcmFtIF92YXVsdEFkZHJlc3MgICAgIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBzdG9yZSB0aGUgZG9uYXRlZCBmdW5kcwogICAgICogQHBhcmFtIF90b2tlbkFkZHJlc3MgICAgIEFkZHJlc3Mgb2YgdGhlIHRva2VuIGNvbnRyYWN0IHRoaXMgY29udHJhY3QgY29udHJvbHMKICAgICAqLwogICAgZnVuY3Rpb24gS29yZWFTaG93KAogICAgICAgIHVpbnQgX3N0YXJ0RnVuZGluZ1RpbWUsIAogICAgICAgIHVpbnQgX2VuZEZ1bmRpbmdUaW1lLCAKICAgICAgICBhZGRyZXNzIF92YXVsdEFkZHJlc3MsCiAgICAgICAgYWRkcmVzcyBfdG9rZW5BZGRyZXNzCiAgICApIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShfZW5kRnVuZGluZ1RpbWUgPiBub3cpOwogICAgICAgIHJlcXVpcmUoX2VuZEZ1bmRpbmdUaW1lID49IF9zdGFydEZ1bmRpbmdUaW1lKTsKICAgICAgICByZXF1aXJlKF92YXVsdEFkZHJlc3MgIT0gMCk7CiAgICAgICAgcmVxdWlyZShfdG9rZW5BZGRyZXNzICE9IDApOwogICAgICAgIHJlcXVpcmUoIWluaXRpYWxlZCk7CgogICAgICAgIHN0YXJ0RnVuZGluZ1RpbWUgPSBfc3RhcnRGdW5kaW5nVGltZTsKICAgICAgICBlbmRGdW5kaW5nVGltZSA9IF9lbmRGdW5kaW5nVGltZTsKICAgICAgICB2YXVsdEFkZHJlc3MgPSBfdmF1bHRBZGRyZXNzOwogICAgICAgIHRva2VuQ29udHJhY3QgPSBUb2tlbihfdG9rZW5BZGRyZXNzKTsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBpbml0aWFsZWQgPSB0cnVlOwogICAgfQoKCiAgICBmdW5jdGlvbiBzZXRUaW1lKHVpbnQgdGltZTEsIHVpbnQgdGltZTIpIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgcmVxdWlyZShlbmRGdW5kaW5nVGltZSA+IG5vdyAmJiBzdGFydEZ1bmRpbmdUaW1lIDwgZW5kRnVuZGluZ1RpbWUpOwogICAgICAgIHN0YXJ0RnVuZGluZ1RpbWUgPSB0aW1lMTsKICAgICAgICBlbmRGdW5kaW5nVGltZSA9IHRpbWUyOwogICAgfQoKCiAgICAvKioKICAgICAqIEBkZXYgVGhlIGZhbGxiYWNrIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIGV0aGVyIGlzIHNlbnQgdG8gdGhlIGNvbnRyYWN0LCBpdCBzaW1wbHkgY2FsbHMgYGRvUGF5bWVudCgpYCB3aXRoIHRoZSBhZGRyZXNzIHRoYXQgc2VudCB0aGUgZXRoZXIgYXMgdGhlIGBfb3duZXJgLiBQYXlhYmxlIGlzIGEgcmVxdWlyZWQgc29saWRpdHkgbW9kaWZpZXIgZm9yIGZ1bmN0aW9ucyB0byByZWNlaXZlIGV0aGVyLCB3aXRob3V0IHRoaXMgbW9kaWZpZXIgZnVuY3Rpb25zIHdpbGwgdGhyb3cgaWYgZXRoZXIgaXMgc2VudCB0byB0aGVtCiAgICAgKi8KICAgIGZ1bmN0aW9uICgpIHBheWFibGUgbm90UGF1c2VkIHB1YmxpYyB7CiAgICAgICAgZG9QYXltZW50KG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8qKgogICAgICogQG5vdGljZSBgcHJveHlQYXltZW50KClgIGFsbG93cyB0aGUgY2FsbGVyIHRvIHNlbmQgZXRoZXIgdG8gdGhlIFByZVRva2VuU2FsZSBhbmQgaGF2ZSB0aGUgdG9rZW5zIGNyZWF0ZWQgaW4gYW4gYWRkcmVzcyBvZiB0aGVpciBjaG9vc2luZwogICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgaG9sZCB0aGUgbmV3bHkgY3JlYXRlZCB0b2tlbnMKICAgICAqLwogICAgZnVuY3Rpb24gcHJveHlQYXltZW50KGFkZHJlc3MgX293bmVyKSBwYXlhYmxlIG5vdFBhdXNlZCBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gZG9QYXltZW50KF9vd25lcik7CiAgICB9CgogICAgLyoqCiAgICAqIEBub3RpY2UgTm90aWZpZXMgdGhlIGNvbnRyb2xsZXIgYWJvdXQgYSB0cmFuc2ZlciwgZm9yIHRoaXMgUHJlVG9rZW5TYWxlIGFsbCB0cmFuc2ZlcnMgYXJlIGFsbG93ZWQgYnkgZGVmYXVsdCBhbmQgbm8gZXh0cmEgbm90aWZpY2F0aW9ucyBhcmUgbmVlZGVkCiAgICAqIEBwYXJhbSBfZnJvbSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2ZlcgogICAgKiBAcGFyYW0gX3RvIFRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgdHJhbnNmZXIKICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0aGUgdHJhbnNmZXIKICAgICogQHJldHVybiBGYWxzZSBpZiB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBhdXRob3JpemUgdGhlIHRyYW5zZmVyCiAgICAqLwogICAgZnVuY3Rpb24gb25UcmFuc2ZlcihhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoIF9mcm9tID09IHZhdWx0QWRkcmVzcyB8fCB0cmFuc2ZlcnNFbmFibGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBfdG87CiAgICAgICAgX2Ftb3VudDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBAbm90aWNlIE5vdGlmaWVzIHRoZSBjb250cm9sbGVyIGFib3V0IGFuIGFwcHJvdmFsLCBmb3IgdGhpcyBQcmVUb2tlblNhbGUgYWxsCiAgICAgKiBhcHByb3ZhbHMgYXJlIGFsbG93ZWQgYnkgZGVmYXVsdCBhbmQgbm8gZXh0cmEgbm90aWZpY2F0aW9ucyBhcmUgbmVlZGVkCiAgICAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRoYXQgY2FsbHMgYGFwcHJvdmUoKWAKICAgICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgc3BlbmRlciBpbiB0aGUgYGFwcHJvdmUoKWAgY2FsbAogICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBpbiB0aGUgYGFwcHJvdmUoKWAgY2FsbAogICAgICogQHJldHVybiBGYWxzZSBpZiB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBhdXRob3JpemUgdGhlIGFwcHJvdmFsCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9uQXBwcm92ZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYW1vdW50KSBwdWJsaWMgcmV0dXJucyhib29sIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoIF9vd25lciA9PSB2YXVsdEFkZHJlc3MgKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBfc3BlbmRlcjsKICAgICAgICBfYW1vdW50OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBldmVudCBpbmZvKHN0cmluZyBuYW1lLCBzdHJpbmcgbXNnKTsKICAgIGV2ZW50IGluZm8yNTYoc3RyaW5nIG5hbWUsIHVpbnQyNTYgdmFsdWUpOwoKICAgIC8vLyBAZGV2IGBkb1BheW1lbnQoKWAgaXMgYW4gaW50ZXJuYWwgZnVuY3Rpb24gdGhhdCBzZW5kcyB0aGUgZXRoZXIgdGhhdCB0aGlzCiAgICAvLy8gIGNvbnRyYWN0IHJlY2VpdmVzIHRvIHRoZSBgdmF1bHRgIGFuZCBjcmVhdGVzIHRva2VucyBpbiB0aGUgYWRkcmVzcyBvZiB0aGUKICAgIC8vLyAgYF9vd25lcmAgYXNzdW1pbmcgdGhlIFByZVRva2VuU2FsZSBpcyBzdGlsbCBhY2NlcHRpbmcgZnVuZHMKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBob2xkIHRoZSBuZXdseSBjcmVhdGVkIHRva2VucwogICAgZnVuY3Rpb24gZG9QYXltZW50KGFkZHJlc3MgX293bmVyKSBpbnRlcm5hbCByZXR1cm5zKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vaW5mbygic3RlcCIsICJlbnRlciBkb1BheW1lbnQiKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAxIGV0aGVyICYmIG1zZy52YWx1ZSA8PTMgZXRoZXIpOwogICAgICAgIHJlcXVpcmUoZW5kRnVuZGluZ1RpbWUgPiBub3cpOwoKICAgICAgICAvLyBUcmFjayBob3cgbXVjaCB0aGUgUHJlVG9rZW5TYWxlIGhhcyBjb2xsZWN0ZWQKICAgICAgICByZXF1aXJlKHRvdGFsQ29sbGVjdGVkIDwgbWF4aW11bUZ1bmRpbmcpOwogICAgICAgIHRvdGFsQ29sbGVjdGVkID0gdG90YWxDb2xsZWN0ZWQuYWRkKG1zZy52YWx1ZSk7CgogICAgICAgIC8vU2VuZCB0aGUgZXRoZXIgdG8gdGhlIHZhdWx0CiAgICAgICAgcmVxdWlyZSh2YXVsdEFkZHJlc3Muc2VuZChtc2cudmFsdWUpKTsKICAgICAgICAKICAgICAgICB1aW50MjU2IHRva2VuVmFsdWUgPSB0b2tlbnNQZXJFdGhlci5tdWwobXNnLnZhbHVlKTsKICAgICAgICAvLyBDcmVhdGVzIGFuIGVxdWFsIGFtb3VudCBvZiB0b2tlbnMgYXMgZXRoZXIgc2VudC4gVGhlIG5ldyB0b2tlbnMgYXJlIGNyZWF0ZWQgaW4gdGhlIGBfb3duZXJgIGFkZHJlc3MKICAgICAgICByZXF1aXJlKHRva2VuQ29udHJhY3QuZ2VuZXJhdGVUb2tlbnMoX293bmVyLCB0b2tlblZhbHVlKSk7CiAgICAgICAgUGF5bWVudChfb3duZXIsIG1zZy52YWx1ZSwgdG9rZW5WYWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlVG9rZW5Db250cm9sbGVyKGFkZHJlc3MgX25ld0NvbnRyb2xsZXIpIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgdG9rZW5Db250cmFjdC5jaGFuZ2VDb250cm9sbGVyKF9uZXdDb250cm9sbGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIOS/ruaUueaJgOaOpyBUb2tlbiDlkIjnuqYKICAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlVG9rZW4oYWRkcmVzcyBfbmV3VG9rZW4pIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgdG9rZW5Db250cmFjdCA9IFRva2VuKF9uZXdUb2tlbik7CiAgICB9CgogICAgLyoqCiAgICAgKiDkv67mlLlUTkLlhZHmjaLmr5TnjocKICAgICAqLwogICAgZnVuY3Rpb24gY2hhbmdlVG9rZW5zUGVyRXRoZXIodWludDI1NiBfbmV3UmF0ZSkgb25seUNvbnRyb2xsZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKGFsbG93Q2hhbmdlKTsKICAgICAgICB0b2tlbnNQZXJFdGhlciA9IF9uZXdSYXRlOwogICAgfQoKICAgIC8qKgogICAgICog5YWB6K645pmu6YCa55So5oi36L2s6LSmCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFsbG93VHJhbnNmZXJzRW5hYmxlZChib29sIF9hbGxvdykgb25seUNvbnRyb2xsZXIgcHVibGljIHsKICAgICAgICB0cmFuc2ZlcnNFbmFibGVkID0gX2FsbG93OwogICAgfQoKICAgIC8vLyBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBhbiBhZGRyZXNzIGlzIGEgY29udHJhY3QKICAgIC8vLyBAcGFyYW0gX2FkZHIgVGhlIGFkZHJlc3MgYmVpbmcgcXVlcmllZAogICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiBgX2FkZHJgIGlzIGEgY29udHJhY3QKICAgIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGlmIChfYWRkciA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdWludDI1NiBzaXplOwogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgc2l6ZSA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChzaXplID4gMCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYGZpbmFsaXplU2FsZSgpYCBlbmRzIHRoZSBQcmVUb2tlblNhbGUuIEl0IHdpbGwgZ2VuZXJhdGUgdGhlIHBsYXRmb3JtIGFuZCB0ZWFtIHRva2VucwogICAgLy8vICBhbmQgc2V0IHRoZSBjb250cm9sbGVyIHRvIHRoZSByZWZlcnJhbCBmZWUgY29udHJhY3QuCiAgICAvLy8gQGRldiBgZmluYWxpemVTYWxlKClgIGNhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciB0aGUgZW5kIG9mIHRoZSBmdW5kaW5nIHBlcmlvZCBvciBpZiB0aGUgbWF4aW11bSBhbW91bnQgaXMgcmFpc2VkLgogICAgZnVuY3Rpb24gZmluYWxpemVTYWxlKCkgb25seUNvbnRyb2xsZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKG5vdyA+IGVuZEZ1bmRpbmdUaW1lIHx8IHRvdGFsQ29sbGVjdGVkID49IG1heGltdW1GdW5kaW5nKTsKICAgICAgICByZXF1aXJlKCFmaW5hbGl6ZWQpOwoKICAgICAgICAvLzIwMDAwIFROQi9FVEggYW5kIDkwIHBlcmNlbnQgZGlzY291bnQKICAgICAgICB1aW50MjU2IHRvdGFsVG9rZW5zID0gdG90YWxDb2xsZWN0ZWQgKiB0b2tlbnNQZXJFdGhlciAqIDEwKioxODsKICAgICAgICBpZiAoIXRva2VuQ29udHJhY3QuZ2VuZXJhdGVUb2tlbnModmF1bHRBZGRyZXNzLCB0b3RhbFRva2VucykpIHsKICAgICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgICAgfQoKICAgICAgICBmaW5hbGl6ZWQgPSB0cnVlOwogICAgICAgIGFsbG93Q2hhbmdlID0gZmFsc2U7CiAgICB9CgogICAgLy8vLy8vLy8vLwogICAgLy8gU2FmZXR5IE1ldGhvZHMKICAgIC8vLy8vLy8vLy8KCiAgICAvLy8gQG5vdGljZSBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBieSB0aGUgY29udHJvbGxlciB0byBleHRyYWN0IG1pc3Rha2VubHkKICAgIC8vLyAgc2VudCB0b2tlbnMgdG8gdGhpcyBjb250cmFjdC4KICAgIC8vLyBAcGFyYW0gX3Rva2VuIFRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBjb250cmFjdCB0aGF0IHlvdSB3YW50IHRvIHJlY292ZXIKICAgIC8vLyAgc2V0IHRvIDAgaW4gY2FzZSB5b3Ugd2FudCB0byBleHRyYWN0IGV0aGVyLgogICAgZnVuY3Rpb24gY2xhaW1Ub2tlbnMoYWRkcmVzcyBfdG9rZW4pIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgaWYgKF90b2tlbiA9PSAweDApIHsKICAgICAgICAgICAgY29udHJvbGxlci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBFUkMyMFRva2VuIHRva2VuID0gRVJDMjBUb2tlbihfdG9rZW4pOwogICAgICAgIHVpbnQgYmFsYW5jZSA9IHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICAgICAgICB0b2tlbi50cmFuc2Zlcihjb250cm9sbGVyLCBiYWxhbmNlKTsKICAgICAgICBDbGFpbWVkVG9rZW5zKF90b2tlbiwgY29udHJvbGxlciwgYmFsYW5jZSk7CiAgICB9CgogICAgZXZlbnQgQ2xhaW1lZFRva2VucyhhZGRyZXNzIGluZGV4ZWQgX3Rva2VuLCBhZGRyZXNzIGluZGV4ZWQgX2NvbnRyb2xsZXIsIHVpbnQgX2Ftb3VudCk7CgogICAgLy8vIEBub3RpY2UgUGF1c2VzIHRoZSBjb250cmlidXRpb24gaWYgdGhlcmUgaXMgYW55IGlzc3VlCiAgICBmdW5jdGlvbiBwYXVzZUNvbnRyaWJ1dGlvbigpIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBSZXN1bWVzIHRoZSBjb250cmlidXRpb24KICAgIGZ1bmN0aW9uIHJlc3VtZUNvbnRyaWJ1dGlvbigpIG9ubHlDb250cm9sbGVyIHB1YmxpYyB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICB9CgogICAgbW9kaWZpZXIgbm90UGF1c2VkKCkgewogICAgICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KfQ=='.
	

]
