Class {
	#name : #SRTb24e9e3dc822daa8ace9af9c9b2ff8ab8348bc93,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb24e9e3dc822daa8ace9af9c9b2ff8ab8348bc93 >> base64 [
	^ 'Ly9zb2wgV2FsbGV0Ci8vIE11bHRpLXNpZywgZGFpbHktbGltaXRlZCBhY2NvdW50IHByb3h5L3dhbGxldC4KLy8gQGF1dGhvcnM6Ci8vIEdhdiBXb29kIDw8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24iIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iM2Y1ODdmNWE0YjU3NWI1YTQ5MTE1YzUwNTIiPltlbWFpbCYjMTYwO3Byb3RlY3RlZF08L2E+PgovLyBpbmhlcml0YWJsZSAicHJvcGVydHkiIGNvbnRyYWN0IHRoYXQgZW5hYmxlcyBtZXRob2RzIHRvIGJlIHByb3RlY3RlZCBieSByZXF1aXJpbmcgdGhlIGFjcXVpZXNjZW5jZSBvZiBlaXRoZXIgYQovLyBzaW5nbGUsIG9yLCBjcnVjaWFsbHksIGVhY2ggb2YgYSBudW1iZXIgb2YsIGRlc2lnbmF0ZWQgb3duZXJzLgovLyB1c2FnZToKLy8gdXNlIG1vZGlmaWVycyBvbmx5b3duZXIgKGp1c3Qgb3duIG93bmVkKSBvciBvbmx5bWFueW93bmVycyhoYXNoKSwgd2hlcmVieSB0aGUgc2FtZSBoYXNoIG11c3QgYmUgcHJvdmlkZWQgYnkKLy8gc29tZSBudW1iZXIgKHNwZWNpZmllZCBpbiBjb25zdHJ1Y3Rvcikgb2YgdGhlIHNldCBvZiBvd25lcnMgKHNwZWNpZmllZCBpbiB0aGUgY29uc3RydWN0b3IsIG1vZGlmaWFibGUpIGJlZm9yZSB0aGUKLy8gaW50ZXJpb3IgaXMgZXhlY3V0ZWQuCgpwcmFnbWEgc29saWRpdHkgXjAuNC4xMzsKCmNvbnRyYWN0IG11bHRpb3duZWQgewoKCS8vIFRZUEVTCgoJLy8gc3RydWN0IGZvciB0aGUgc3RhdHVzIG9mIGEgcGVuZGluZyBvcGVyYXRpb24uCglzdHJ1Y3QgUGVuZGluZ1N0YXRlIHsKCQl1aW50IHlldE5lZWRlZDsKCQl1aW50IG93bmVyc0RvbmU7CgkJdWludCBpbmRleDsKCX0KCgkvLyBFVkVOVFMKCgkvLyB0aGlzIGNvbnRyYWN0IG9ubHkgaGFzIHNpeCB0eXBlcyBvZiBldmVudHM6IGl0IGNhbiBhY2NlcHQgYSBjb25maXJtYXRpb24sIGluIHdoaWNoIGNhc2UKCS8vIHdlIHJlY29yZCBvd25lciBhbmQgb3BlcmF0aW9uIChoYXNoKSBhbG9uZ3NpZGUgaXQuCglldmVudCBDb25maXJtYXRpb24oYWRkcmVzcyBvd25lciwgYnl0ZXMzMiBvcGVyYXRpb24pOwoJZXZlbnQgUmV2b2tlKGFkZHJlc3Mgb3duZXIsIGJ5dGVzMzIgb3BlcmF0aW9uKTsKCS8vIHNvbWUgb3RoZXJzIGFyZSBpbiB0aGUgY2FzZSBvZiBhbiBvd25lciBjaGFuZ2luZy4KCWV2ZW50IE93bmVyQ2hhbmdlZChhZGRyZXNzIG9sZE93bmVyLCBhZGRyZXNzIG5ld093bmVyKTsKCWV2ZW50IE93bmVyQWRkZWQoYWRkcmVzcyBuZXdPd25lcik7CglldmVudCBPd25lclJlbW92ZWQoYWRkcmVzcyBvbGRPd25lcik7CgkvLyB0aGUgbGFzdCBvbmUgaXMgZW1pdHRlZCBpZiB0aGUgcmVxdWlyZWQgc2lnbmF0dXJlcyBjaGFuZ2UKCWV2ZW50IFJlcXVpcmVtZW50Q2hhbmdlZCh1aW50IG5ld1JlcXVpcmVtZW50KTsKCgkvLyBNT0RJRklFUlMKCgkvLyBzaW1wbGUgc2luZ2xlLXNpZyBmdW5jdGlvbiBtb2RpZmllci4KCW1vZGlmaWVyIG9ubHlvd25lciB7CgkJaWYgKGlzT3duZXIobXNnLnNlbmRlcikpCgkJCV87Cgl9CgkvLyBtdWx0aS1zaWcgZnVuY3Rpb24gbW9kaWZpZXI6IHRoZSBvcGVyYXRpb24gbXVzdCBoYXZlIGFuIGludHJpbnNpYyBoYXNoIGluIG9yZGVyCgkvLyB0aGF0IGxhdGVyIGF0dGVtcHRzIGNhbiBiZSByZWFsaXNlZCBhcyB0aGUgc2FtZSB1bmRlcmx5aW5nIG9wZXJhdGlvbiBhbmQKCS8vIHRodXMgY291bnQgYXMgY29uZmlybWF0aW9ucy4KCW1vZGlmaWVyIG9ubHltYW55b3duZXJzKGJ5dGVzMzIgX29wZXJhdGlvbikgewoJCWlmIChjb25maXJtQW5kQ2hlY2soX29wZXJhdGlvbikpCgkJCV87Cgl9CgoJLy8gTUVUSE9EUwoKCS8vIGNvbnN0cnVjdG9yIGlzIGdpdmVuIG51bWJlciBvZiBzaWdzIHJlcXVpcmVkIHRvIGRvIHByb3RlY3RlZCAib25seW1hbnlvd25lcnMiIHRyYW5zYWN0aW9ucwoJLy8gYXMgd2VsbCBhcyB0aGUgc2VsZWN0aW9uIG9mIGFkZHJlc3NlcyBjYXBhYmxlIG9mIGNvbmZpcm1pbmcgdGhlbS4KCWZ1bmN0aW9uIG11bHRpb3duZWQoYWRkcmVzc1tdIF9vd25lcnMsIHVpbnQgX3JlcXVpcmVkKSB7CgkJcmVxdWlyZShfcmVxdWlyZWQgPiAwKTsKCQlyZXF1aXJlKF9vd25lcnMubGVuZ3RoID49IF9yZXF1aXJlZCk7CgkJbV9udW1Pd25lcnMgPSBfb3duZXJzLmxlbmd0aDsKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgKytpKSB7CgkJCW1fb3duZXJzWzEgKyBpXSA9IHVpbnQoX293bmVyc1tpXSk7CgkJCW1fb3duZXJJbmRleFt1aW50KF9vd25lcnNbaV0pXSA9IDEgKyBpOwoJCX0KCQltX3JlcXVpcmVkID0gX3JlcXVpcmVkOwoJfQoKCS8vIFJldm9rZXMgYSBwcmlvciBjb25maXJtYXRpb24gb2YgdGhlIGdpdmVuIG9wZXJhdGlvbgoJZnVuY3Rpb24gcmV2b2tlKGJ5dGVzMzIgX29wZXJhdGlvbikgZXh0ZXJuYWwgewoJCXVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KG1zZy5zZW5kZXIpXTsKCQkvLyBtYWtlIHN1cmUgdGhleSdyZSBhbiBvd25lcgoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKCQl1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwoJCXZhciBwZW5kaW5nID0gbV9wZW5kaW5nW19vcGVyYXRpb25dOwoJCWlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID4gMCkgewoJCQlwZW5kaW5nLnlldE5lZWRlZCsrOwoJCQlwZW5kaW5nLm93bmVyc0RvbmUgLT0gb3duZXJJbmRleEJpdDsKCQkJUmV2b2tlKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwoJCX0KCX0KCgkvLyBSZXBsYWNlcyBhbiBvd25lciBgX2Zyb21gIHdpdGggYW5vdGhlciBgX3RvYC4KCWZ1bmN0aW9uIGNoYW5nZU93bmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewoJCWlmIChpc093bmVyKF90bykpIHJldHVybjsKCQl1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfZnJvbSldOwoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKCgkJY2xlYXJQZW5kaW5nKCk7CgkJbV9vd25lcnNbb3duZXJJbmRleF0gPSB1aW50KF90byk7CgkJbV9vd25lckluZGV4W3VpbnQoX2Zyb20pXSA9IDA7CgkJbV9vd25lckluZGV4W3VpbnQoX3RvKV0gPSBvd25lckluZGV4OwoJCU93bmVyQ2hhbmdlZChfZnJvbSwgX3RvKTsKCX0KCglmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIF9vd25lcikgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKCQlpZiAoaXNPd25lcihfb3duZXIpKSByZXR1cm47CgoJCWNsZWFyUGVuZGluZygpOwoJCWlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykKCQkJcmVvcmdhbml6ZU93bmVycygpOwoJCWlmIChtX251bU93bmVycyA+PSBjX21heE93bmVycykKCQkJcmV0dXJuOwoJCW1fbnVtT3duZXJzKys7CgkJbV9vd25lcnNbbV9udW1Pd25lcnNdID0gdWludChfb3duZXIpOwoJCW1fb3duZXJJbmRleFt1aW50KF9vd25lcildID0gbV9udW1Pd25lcnM7CgkJT3duZXJBZGRlZChfb3duZXIpOwoJfQoKCWZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewoJCXVpbnQgb3duZXJJbmRleCA9IG1fb3duZXJJbmRleFt1aW50KF9vd25lcildOwoJCWlmIChvd25lckluZGV4ID09IDApIHJldHVybjsKCQlpZiAobV9yZXF1aXJlZCA+IG1fbnVtT3duZXJzIC0gMSkgcmV0dXJuOwoKCQltX293bmVyc1tvd25lckluZGV4XSA9IDA7CgkJbV9vd25lckluZGV4W3VpbnQoX293bmVyKV0gPSAwOwoJCWNsZWFyUGVuZGluZygpOwoJCXJlb3JnYW5pemVPd25lcnMoKTsgLy9tYWtlIHN1cmUgbV9udW1Pd25lciBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG93bmVycyBhbmQgYWx3YXlzIHBvaW50cyB0byB0aGUgb3B0aW1hbCBmcmVlIHNsb3QKCQlPd25lclJlbW92ZWQoX293bmVyKTsKCX0KCglmdW5jdGlvbiBjaGFuZ2VSZXF1aXJlbWVudCh1aW50IF9uZXdSZXF1aXJlZCkgb25seW1hbnlvd25lcnMoc2hhMyhtc2cuZGF0YSkpIGV4dGVybmFsIHsKCQlpZiAoX25ld1JlcXVpcmVkID09IDApIHJldHVybjsKCQlpZiAoX25ld1JlcXVpcmVkID4gbV9udW1Pd25lcnMpIHJldHVybjsKCQltX3JlcXVpcmVkID0gX25ld1JlcXVpcmVkOwoJCWNsZWFyUGVuZGluZygpOwoJCVJlcXVpcmVtZW50Q2hhbmdlZChfbmV3UmVxdWlyZWQpOwoJfQoKCS8vIEdldHMgYW4gb3duZXIgYnkgMC1pbmRleGVkIHBvc2l0aW9uICh1c2luZyBudW1Pd25lcnMgYXMgdGhlIGNvdW50KQoJZnVuY3Rpb24gZ2V0T3duZXIodWludCBvd25lckluZGV4KSBleHRlcm5hbCBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzKSB7CgkJcmV0dXJuIGFkZHJlc3MobV9vd25lcnNbb3duZXJJbmRleCArIDFdKTsKCX0KCglmdW5jdGlvbiBpc093bmVyKGFkZHJlc3MgX2FkZHIpIHJldHVybnMgKGJvb2wpIHsKCQlyZXR1cm4gbV9vd25lckluZGV4W3VpbnQoX2FkZHIpXSA+IDA7Cgl9CgoJZnVuY3Rpb24gaGFzQ29uZmlybWVkKGJ5dGVzMzIgX29wZXJhdGlvbiwgYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKCQl2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKCQl1aW50IG93bmVySW5kZXggPSBtX293bmVySW5kZXhbdWludChfb3duZXIpXTsKCgkJLy8gbWFrZSBzdXJlIHRoZXkncmUgYW4gb3duZXIKCQlpZiAob3duZXJJbmRleCA9PSAwKSByZXR1cm4gZmFsc2U7CgoJCS8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4KCQl1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwoJCXJldHVybiAhKHBlbmRpbmcub3duZXJzRG9uZSAmIG93bmVySW5kZXhCaXQgPT0gMCk7Cgl9CgoJLy8gSU5URVJOQUwgTUVUSE9EUwoKCWZ1bmN0aW9uIGNvbmZpcm1BbmRDaGVjayhieXRlczMyIF9vcGVyYXRpb24pIGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKCQkvLyBkZXRlcm1pbmUgd2hhdCBpbmRleCB0aGUgcHJlc2VudCBzZW5kZXIgaXM6CgkJdWludCBvd25lckluZGV4ID0gbV9vd25lckluZGV4W3VpbnQobXNnLnNlbmRlcildOwoJCS8vIG1ha2Ugc3VyZSB0aGV5J3JlIGFuIG93bmVyCgkJaWYgKG93bmVySW5kZXggPT0gMCkgcmV0dXJuOwoKCQl2YXIgcGVuZGluZyA9IG1fcGVuZGluZ1tfb3BlcmF0aW9uXTsKCQkvLyBpZiB3ZSdyZSBub3QgeWV0IHdvcmtpbmcgb24gdGhpcyBvcGVyYXRpb24sIHN3aXRjaCBvdmVyIGFuZCByZXNldCB0aGUgY29uZmlybWF0aW9uIHN0YXR1cy4KCQlpZiAocGVuZGluZy55ZXROZWVkZWQgPT0gMCkgewoJCQkvLyByZXNldCBjb3VudCBvZiBjb25maXJtYXRpb25zIG5lZWRlZC4KCQkJcGVuZGluZy55ZXROZWVkZWQgPSBtX3JlcXVpcmVkOwoJCQkvLyByZXNldCB3aGljaCBvd25lcnMgaGF2ZSBjb25maXJtZWQgKG5vbmUpIC0gc2V0IG91ciBiaXRtYXAgdG8gMC4KCQkJcGVuZGluZy5vd25lcnNEb25lID0gMDsKCQkJcGVuZGluZy5pbmRleCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aCsrOwoJCQltX3BlbmRpbmdJbmRleFtwZW5kaW5nLmluZGV4XSA9IF9vcGVyYXRpb247CgkJfQoJCS8vIGRldGVybWluZSB0aGUgYml0IHRvIHNldCBmb3IgdGhpcyBvd25lci4KCQl1aW50IG93bmVySW5kZXhCaXQgPSAyKipvd25lckluZGV4OwoJCS8vIG1ha2Ugc3VyZSB3ZSAodGhlIG1lc3NhZ2Ugc2VuZGVyKSBoYXZlbid0IGNvbmZpcm1lZCB0aGlzIG9wZXJhdGlvbiBwcmV2aW91c2x5LgoJCWlmIChwZW5kaW5nLm93bmVyc0RvbmUgJiBvd25lckluZGV4Qml0ID09IDApIHsKCQkJQ29uZmlybWF0aW9uKG1zZy5zZW5kZXIsIF9vcGVyYXRpb24pOwoJCQkvLyBvayAtIGNoZWNrIGlmIGNvdW50IGlzIGVub3VnaCB0byBnbyBhaGVhZC4KCQkJaWYgKHBlbmRpbmcueWV0TmVlZGVkID09IDEpIHsKCQkJCS8vIGVub3VnaCBjb25maXJtYXRpb25zOiByZXNldCBhbmQgcnVuIGludGVyaW9yLgoJCQkJZGVsZXRlIG1fcGVuZGluZ0luZGV4W21fcGVuZGluZ1tfb3BlcmF0aW9uXS5pbmRleF07CgkJCQlkZWxldGUgbV9wZW5kaW5nW19vcGVyYXRpb25dOwoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkvLyBub3QgZW5vdWdoOiByZWNvcmQgdGhhdCB0aGlzIG93bmVyIGluIHBhcnRpY3VsYXIgY29uZmlybWVkLgoJCQkJcGVuZGluZy55ZXROZWVkZWQtLTsKCQkJCXBlbmRpbmcub3duZXJzRG9uZSB8PSBvd25lckluZGV4Qml0OwoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uIHJlb3JnYW5pemVPd25lcnMoKSBwcml2YXRlIHsKCQl1aW50IGZyZWUgPSAxOwoJCXdoaWxlIChmcmVlIDwgbV9udW1Pd25lcnMpCgkJewoJCQl3aGlsZSAoZnJlZSA8IG1fbnVtT3duZXJzICYmIG1fb3duZXJzW2ZyZWVdICE9IDApIGZyZWUrKzsKCQkJd2hpbGUgKG1fbnVtT3duZXJzID4gMSAmJiBtX293bmVyc1ttX251bU93bmVyc10gPT0gMCkgbV9udW1Pd25lcnMtLTsKCQkJaWYgKGZyZWUgPCBtX251bU93bmVycyAmJiBtX293bmVyc1ttX251bU93bmVyc10gIT0gMCAmJiBtX293bmVyc1tmcmVlXSA9PSAwKQoJCQl7CgkJCQltX293bmVyc1tmcmVlXSA9IG1fb3duZXJzW21fbnVtT3duZXJzXTsKCQkJCW1fb3duZXJJbmRleFttX293bmVyc1tmcmVlXV0gPSBmcmVlOwoJCQkJbV9vd25lcnNbbV9udW1Pd25lcnNdID0gMDsKCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBjbGVhclBlbmRpbmcoKSBpbnRlcm5hbCB7CgkJdWludCBsZW5ndGggPSBtX3BlbmRpbmdJbmRleC5sZW5ndGg7CgkJZm9yICh1aW50IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpCgkJCWlmIChtX3BlbmRpbmdJbmRleFtpXSAhPSAwKQoJCQkJZGVsZXRlIG1fcGVuZGluZ1ttX3BlbmRpbmdJbmRleFtpXV07CgkJZGVsZXRlIG1fcGVuZGluZ0luZGV4OwoJfQoKCS8vIEZJRUxEUwoKCS8vIHRoZSBudW1iZXIgb2Ygb3duZXJzIHRoYXQgbXVzdCBjb25maXJtIHRoZSBzYW1lIG9wZXJhdGlvbiBiZWZvcmUgaXQgaXMgcnVuLgoJdWludCBwdWJsaWMgbV9yZXF1aXJlZDsKCS8vIHBvaW50ZXIgdXNlZCB0byBmaW5kIGEgZnJlZSBzbG90IGluIG1fb3duZXJzCgl1aW50IHB1YmxpYyBtX251bU93bmVyczsKCgkvLyBsaXN0IG9mIG93bmVycwoJdWludFsyNTZdIG1fb3duZXJzOwoJdWludCBjb25zdGFudCBjX21heE93bmVycyA9IDI1MDsKCS8vIGluZGV4IG9uIHRoZSBsaXN0IG9mIG93bmVycyB0byBhbGxvdyByZXZlcnNlIGxvb2t1cAoJbWFwcGluZyh1aW50ID0+IHVpbnQpIG1fb3duZXJJbmRleDsKCS8vIHRoZSBvbmdvaW5nIG9wZXJhdGlvbnMuCgltYXBwaW5nKGJ5dGVzMzIgPT4gUGVuZGluZ1N0YXRlKSBtX3BlbmRpbmc7CglieXRlczMyW10gbV9wZW5kaW5nSW5kZXg7Cn0KCi8vIGluaGVyaXRhYmxlICJwcm9wZXJ0eSIgY29udHJhY3QgdGhhdCBlbmFibGVzIG1ldGhvZHMgdG8gYmUgcHJvdGVjdGVkIGJ5IHBsYWNpbmcgYSBsaW5lYXIgbGltaXQgKHNwZWNpZmlhYmxlKQovLyBvbiBhIHBhcnRpY3VsYXIgcmVzb3VyY2UgcGVyIGNhbGVuZGFyIGRheS4gaXMgbXVsdGlvd25lZCB0byBhbGxvdyB0aGUgbGltaXQgdG8gYmUgYWx0ZXJlZC4gcmVzb3VyY2UgdGhhdCBtZXRob2QKLy8gdXNlcyBpcyBzcGVjaWZpZWQgaW4gdGhlIG1vZGlmaWVyLgpjb250cmFjdCBkYXlsaW1pdCBpcyBtdWx0aW93bmVkIHsKCgkvLyBNRVRIT0RTCgoJLy8gY29uc3RydWN0b3IgLSBzdG9yZXMgaW5pdGlhbCBkYWlseSBsaW1pdCBhbmQgcmVjb3JkcyB0aGUgcHJlc2VudCBkYXkncyBpbmRleC4KCWZ1bmN0aW9uIGRheWxpbWl0KHVpbnQgX2xpbWl0KSB7CgkJbV9kYWlseUxpbWl0ID0gX2xpbWl0OwoJCW1fbGFzdERheSA9IHRvZGF5KCk7Cgl9CgkvLyAocmUpc2V0cyB0aGUgZGFpbHkgbGltaXQuIG5lZWRzIG1hbnkgb2YgdGhlIG93bmVycyB0byBjb25maXJtLiBkb2Vzbid0IGFsdGVyIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4KCWZ1bmN0aW9uIHNldERhaWx5TGltaXQodWludCBfbmV3TGltaXQpIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CgkJbV9kYWlseUxpbWl0ID0gX25ld0xpbWl0OwoJfQoJLy8gcmVzZXRzIHRoZSBhbW91bnQgYWxyZWFkeSBzcGVudCB0b2RheS4gbmVlZHMgbWFueSBvZiB0aGUgb3duZXJzIHRvIGNvbmZpcm0uCglmdW5jdGlvbiByZXNldFNwZW50VG9kYXkoKSBvbmx5bWFueW93bmVycyhzaGEzKG1zZy5kYXRhKSkgZXh0ZXJuYWwgewoJCW1fc3BlbnRUb2RheSA9IDA7Cgl9CgoJLy8gSU5URVJOQUwgTUVUSE9EUwoKCS8vIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYXQgbGVhc3QgYF92YWx1ZWAgbGVmdCBmcm9tIHRoZSBkYWlseSBsaW1pdCB0b2RheS4gaWYgdGhlcmUgaXMsIHN1YnRyYWN0cyBpdCBhbmQKCS8vIHJldHVybnMgdHJ1ZS4gb3RoZXJ3aXNlIGp1c3QgcmV0dXJucyBmYWxzZS4KCWZ1bmN0aW9uIHVuZGVyTGltaXQodWludCBfdmFsdWUpIGludGVybmFsIG9ubHlvd25lciByZXR1cm5zIChib29sKSB7CgkJLy8gcmVzZXQgdGhlIHNwZW5kIGxpbWl0IGlmIHdlJ3JlIG9uIGEgZGlmZmVyZW50IGRheSB0byBsYXN0IHRpbWUuCgkJaWYgKHRvZGF5KCkgPiBtX2xhc3REYXkpIHsKCQkJbV9zcGVudFRvZGF5ID0gMDsKCQkJbV9sYXN0RGF5ID0gdG9kYXkoKTsKCQl9CgkJLy8gY2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgZW5vdWdoIGxlZnQgLSBpZiBzbywgc3VidHJhY3QgYW5kIHJldHVybiB0cnVlLgoJCS8vIG92ZXJmbG93IHByb3RlY3Rpb24gICAgICAgICAgICAgICAgICAgIC8vIGRhaWx5TGltaXQgY2hlY2sKCQlpZiAobV9zcGVudFRvZGF5ICsgX3ZhbHVlID49IG1fc3BlbnRUb2RheSAmJiBtX3NwZW50VG9kYXkgKyBfdmFsdWUgPD0gbV9kYWlseUxpbWl0KSB7CgkJCW1fc3BlbnRUb2RheSArPSBfdmFsdWU7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkvLyBkZXRlcm1pbmVzIHRvZGF5J3MgaW5kZXguCglmdW5jdGlvbiB0b2RheSgpIHByaXZhdGUgY29uc3RhbnQgcmV0dXJucyAodWludCkgeyByZXR1cm4gbm93IC8gMSBkYXlzOyB9CgoJLy8gRklFTERTCgoJdWludCBwdWJsaWMgbV9kYWlseUxpbWl0OwoJdWludCBwdWJsaWMgbV9zcGVudFRvZGF5OwoJdWludCBwdWJsaWMgbV9sYXN0RGF5Owp9CgovLyBpbnRlcmZhY2UgY29udHJhY3QgZm9yIG11bHRpc2lnIHByb3h5IGNvbnRyYWN0czsgc2VlIGJlbG93IGZvciBkb2NzLgpjb250cmFjdCBtdWx0aXNpZyB7CgoJLy8gRVZFTlRTCgoJLy8gbG9nZ2VkIGV2ZW50czoKCS8vIEZ1bmRzIGhhcyBhcnJpdmVkIGludG8gdGhlIHdhbGxldCAocmVjb3JkIGhvdyBtdWNoKS4KCWV2ZW50IERlcG9zaXQoYWRkcmVzcyBfZnJvbSwgdWludCB2YWx1ZSk7CgkvLyBTaW5nbGUgdHJhbnNhY3Rpb24gZ29pbmcgb3V0IG9mIHRoZSB3YWxsZXQgKHJlY29yZCB3aG8gc2lnbmVkIGZvciBpdCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLgoJZXZlbnQgU2luZ2xlVHJhbnNhY3QoYWRkcmVzcyBvd25lciwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSwgYWRkcmVzcyBjcmVhdGVkKTsKCS8vIE11bHRpLXNpZyB0cmFuc2FjdGlvbiBnb2luZyBvdXQgb2YgdGhlIHdhbGxldCAocmVjb3JkIHdobyBzaWduZWQgZm9yIGl0IGxhc3QsIHRoZSBvcGVyYXRpb24gaGFzaCwgaG93IG11Y2gsIGFuZCB0byB3aG9tIGl0J3MgZ29pbmcpLgoJZXZlbnQgTXVsdGlUcmFuc2FjdChhZGRyZXNzIG93bmVyLCBieXRlczMyIG9wZXJhdGlvbiwgdWludCB2YWx1ZSwgYWRkcmVzcyB0bywgYnl0ZXMgZGF0YSwgYWRkcmVzcyBjcmVhdGVkKTsKCS8vIENvbmZpcm1hdGlvbiBzdGlsbCBuZWVkZWQgZm9yIGEgdHJhbnNhY3Rpb24uCglldmVudCBDb25maXJtYXRpb25OZWVkZWQoYnl0ZXMzMiBvcGVyYXRpb24sIGFkZHJlc3MgaW5pdGlhdG9yLCB1aW50IHZhbHVlLCBhZGRyZXNzIHRvLCBieXRlcyBkYXRhKTsKCgkvLyBGVU5DVElPTlMKCgkvLyBUT0RPOiBkb2N1bWVudAoJZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIGV4dGVybmFsOwoJZnVuY3Rpb24gZXhlY3V0ZShhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBleHRlcm5hbCByZXR1cm5zIChieXRlczMyIG9faGFzaCk7CglmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIHJldHVybnMgKGJvb2wgb19zdWNjZXNzKTsKfQoKY29udHJhY3QgY3JlYXRvciB7CglmdW5jdGlvbiBkb0NyZWF0ZSh1aW50IF92YWx1ZSwgYnl0ZXMgX2NvZGUpIGludGVybmFsIHJldHVybnMgKGFkZHJlc3Mgb19hZGRyKSB7CgkJYm9vbCBmYWlsZWQ7CgkJYXNzZW1ibHkgewoJCQlvX2FkZHIgOj0gY3JlYXRlKF92YWx1ZSwgYWRkKF9jb2RlLCAweDIwKSwgbWxvYWQoX2NvZGUpKQoJCQlmYWlsZWQgOj0gaXN6ZXJvKGV4dGNvZGVzaXplKG9fYWRkcikpCgkJfQoJCXJlcXVpcmUoIWZhaWxlZCk7Cgl9Cn0KCi8vIHVzYWdlOgovLyBieXRlczMyIGggPSBXYWxsZXQodykuZnJvbShvbmVPd25lcikuZXhlY3V0ZSh0bywgdmFsdWUsIGRhdGEpOwovLyBXYWxsZXQodykuZnJvbShhbm90aGVyT3duZXIpLmNvbmZpcm0oaCk7CmNvbnRyYWN0IFdhbGxldCBpcyBtdWx0aXNpZywgbXVsdGlvd25lZCwgZGF5bGltaXQsIGNyZWF0b3IgewoKCS8vIFRZUEVTCgoJLy8gVHJhbnNhY3Rpb24gc3RydWN0dXJlIHRvIHJlbWVtYmVyIGRldGFpbHMgb2YgdHJhbnNhY3Rpb24gbGVzdCBpdCBuZWVkIGJlIHNhdmVkIGZvciBhIGxhdGVyIGNhbGwuCglzdHJ1Y3QgVHJhbnNhY3Rpb24gewoJCWFkZHJlc3MgdG87CgkJdWludCB2YWx1ZTsKCQlieXRlcyBkYXRhOwoJfQoKCS8vIE1FVEhPRFMKCgkvLyBjb25zdHJ1Y3RvciAtIGp1c3QgcGFzcyBvbiB0aGUgb3duZXIgYXJyYXkgdG8gdGhlIG11bHRpb3duZWQgYW5kCgkvLyB0aGUgbGltaXQgdG8gZGF5bGltaXQKCWZ1bmN0aW9uIFdhbGxldChhZGRyZXNzW10gX293bmVycywgdWludCBfcmVxdWlyZWQsIHVpbnQgX2RheWxpbWl0KQoJCQltdWx0aW93bmVkKF9vd25lcnMsIF9yZXF1aXJlZCkgZGF5bGltaXQoX2RheWxpbWl0KSB7Cgl9CgoJLy8ga2lsbHMgdGhlIGNvbnRyYWN0IHNlbmRpbmcgZXZlcnl0aGluZyB0byBgX3RvYC4KCWZ1bmN0aW9uIGtpbGwoYWRkcmVzcyBfdG8pIG9ubHltYW55b3duZXJzKHNoYTMobXNnLmRhdGEpKSBleHRlcm5hbCB7CgkJc3VpY2lkZShfdG8pOwoJfQoKCS8vIGdldHMgY2FsbGVkIHdoZW4gbm8gb3RoZXIgZnVuY3Rpb24gbWF0Y2hlcwoJZnVuY3Rpb24oKSBwYXlhYmxlIHsKCQkvLyBqdXN0IGJlaW5nIHNlbnQgc29tZSBjYXNoPwoJCWlmIChtc2cudmFsdWUgPiAwKQoJCQlEZXBvc2l0KG1zZy5zZW5kZXIsIG1zZy52YWx1ZSk7Cgl9CgoJLy8gT3V0c2lkZS12aXNpYmxlIHRyYW5zYWN0IGVudHJ5IHBvaW50LiBFeGVjdXRlcyB0cmFuc2FjdGlvbiBpbW1lZGlhdGVseSBpZiBiZWxvdyBkYWlseSBzcGVuZCBsaW1pdC4KCS8vIElmIG5vdCwgZ29lcyBpbnRvIG11bHRpc2lnIHByb2Nlc3MuIFdlIHByb3ZpZGUgYSBoYXNoIG9uIHJldHVybiB0byBhbGxvdyB0aGUgc2VuZGVyIHRvIHByb3ZpZGUKCS8vIHNob3J0Y3V0cyBmb3IgdGhlIG90aGVyIGNvbmZpcm1hdGlvbnMgKGFsbG93aW5nIHRoZW0gdG8gYXZvaWQgcmVwbGljYXRpbmcgdGhlIF90bywgX3ZhbHVlCgkvLyBhbmQgX2RhdGEgYXJndW1lbnRzKS4gVGhleSBzdGlsbCBnZXQgdGhlIG9wdGlvbiBvZiB1c2luZyB0aGVtIGlmIHRoZXkgd2FudCwgYW55d2F5cy4KCWZ1bmN0aW9uIGV4ZWN1dGUoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgZXh0ZXJuYWwgb25seW93bmVyIHJldHVybnMgKGJ5dGVzMzIgb19oYXNoKSB7CgkJLy8gZmlyc3QsIHRha2UgdGhlIG9wcG9ydHVuaXR5IHRvIGNoZWNrIHRoYXQgd2UncmUgdW5kZXIgdGhlIGRhaWx5IGxpbWl0LgoJCWlmICgoX2RhdGEubGVuZ3RoID09IDAgJiYgdW5kZXJMaW1pdChfdmFsdWUpKSB8fCBtX3JlcXVpcmVkID09IDEpIHsKCQkJLy8geWVzIC0ganVzdCBleGVjdXRlIHRoZSBjYWxsLgoJCQlhZGRyZXNzIGNyZWF0ZWQ7CgkJCWlmIChfdG8gPT0gMCkgewoJCQkJY3JlYXRlZCA9IGNyZWF0ZShfdmFsdWUsIF9kYXRhKTsKCQkJfSBlbHNlIHsKCQkJCXJlcXVpcmUoX3RvLmNhbGwudmFsdWUoX3ZhbHVlKShfZGF0YSkpOwoJCQl9CgkJCVNpbmdsZVRyYW5zYWN0KG1zZy5zZW5kZXIsIF92YWx1ZSwgX3RvLCBfZGF0YSwgY3JlYXRlZCk7CgkJfSBlbHNlIHsKCQkJLy8gZGV0ZXJtaW5lIG91ciBvcGVyYXRpb24gaGFzaC4KCQkJb19oYXNoID0gc2hhMyhtc2cuZGF0YSwgYmxvY2subnVtYmVyKTsKCQkJLy8gc3RvcmUgaWYgaXQncyBuZXcKCQkJaWYgKG1fdHhzW29faGFzaF0udG8gPT0gMCAmJiBtX3R4c1tvX2hhc2hdLnZhbHVlID09IDAgJiYgbV90eHNbb19oYXNoXS5kYXRhLmxlbmd0aCA9PSAwKSB7CgkJCQltX3R4c1tvX2hhc2hdLnRvID0gX3RvOwoJCQkJbV90eHNbb19oYXNoXS52YWx1ZSA9IF92YWx1ZTsKCQkJCW1fdHhzW29faGFzaF0uZGF0YSA9IF9kYXRhOwoJCQl9CgkJCWlmICghY29uZmlybShvX2hhc2gpKSB7CgkJCQlDb25maXJtYXRpb25OZWVkZWQob19oYXNoLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF90bywgX2RhdGEpOwoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uIGNyZWF0ZSh1aW50IF92YWx1ZSwgYnl0ZXMgX2NvZGUpIGludGVybmFsIHJldHVybnMgKGFkZHJlc3Mgb19hZGRyKSB7CgkJcmV0dXJuIGRvQ3JlYXRlKF92YWx1ZSwgX2NvZGUpOwoJfQoKCS8vIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiB0aHJvdWdoIGp1c3QgdGhlIGhhc2guIHdlIHVzZSB0aGUgcHJldmlvdXMgdHJhbnNhY3Rpb25zIG1hcCwgbV90eHMsIGluIG9yZGVyCgkvLyB0byBkZXRlcm1pbmUgdGhlIGJvZHkgb2YgdGhlIHRyYW5zYWN0aW9uIGZyb20gdGhlIGhhc2ggcHJvdmlkZWQuCglmdW5jdGlvbiBjb25maXJtKGJ5dGVzMzIgX2gpIG9ubHltYW55b3duZXJzKF9oKSByZXR1cm5zIChib29sIG9fc3VjY2VzcykgewoJCWlmIChtX3R4c1tfaF0udG8gIT0gMCB8fCBtX3R4c1tfaF0udmFsdWUgIT0gMCB8fCBtX3R4c1tfaF0uZGF0YS5sZW5ndGggIT0gMCkgewoJCQlhZGRyZXNzIGNyZWF0ZWQ7CgkJCWlmIChtX3R4c1tfaF0udG8gPT0gMCkgewoJCQkJY3JlYXRlZCA9IGNyZWF0ZShtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS5kYXRhKTsKCQkJfSBlbHNlIHsKCQkJCXJlcXVpcmUobV90eHNbX2hdLnRvLmNhbGwudmFsdWUobV90eHNbX2hdLnZhbHVlKShtX3R4c1tfaF0uZGF0YSkpOwoJCQl9CgoJCQlNdWx0aVRyYW5zYWN0KG1zZy5zZW5kZXIsIF9oLCBtX3R4c1tfaF0udmFsdWUsIG1fdHhzW19oXS50bywgbV90eHNbX2hdLmRhdGEsIGNyZWF0ZWQpOwoJCQlkZWxldGUgbV90eHNbX2hdOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJLy8gSU5URVJOQUwgTUVUSE9EUwoKCWZ1bmN0aW9uIGNsZWFyUGVuZGluZygpIGludGVybmFsIHsKCQl1aW50IGxlbmd0aCA9IG1fcGVuZGluZ0luZGV4Lmxlbmd0aDsKCQlmb3IgKHVpbnQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkKCQkJZGVsZXRlIG1fdHhzW21fcGVuZGluZ0luZGV4W2ldXTsKCQlzdXBlci5jbGVhclBlbmRpbmcoKTsKCX0KCgkvLyBGSUVMRFMKCgkvLyBwZW5kaW5nIHRyYW5zYWN0aW9ucyB3ZSBoYXZlIGF0IHByZXNlbnQuCgltYXBwaW5nIChieXRlczMyID0+IFRyYW5zYWN0aW9uKSBtX3R4czsKfQ=='.
	

]
