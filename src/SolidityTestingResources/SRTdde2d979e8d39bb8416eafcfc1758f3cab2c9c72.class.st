Class {
	#name : #SRTdde2d979e8d39bb8416eafcfc1758f3cab2c9c72,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdde2d979e8d39bb8416eafcfc1758f3cab2c9c72 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgovLyBGaWxlOiBjb250cmFjdHMvRVJDMTY1LnNvbAoKaW50ZXJmYWNlIEVSQzE2NSB7CiAgLy8vIEBub3RpY2UgUXVlcnkgaWYgYSBjb250cmFjdCBpbXBsZW1lbnRzIGFuIGludGVyZmFjZQogIC8vLyBAcGFyYW0gaW50ZXJmYWNlSUQgVGhlIGludGVyZmFjZSBpZGVudGlmaWVyLCBhcyBzcGVjaWZpZWQgaW4gRVJDLTE2NQogIC8vLyBAZGV2IEludGVyZmFjZSBpZGVudGlmaWNhdGlvbiBpcyBzcGVjaWZpZWQgaW4gRVJDLTE2NS4gVGhpcyBmdW5jdGlvbgogIC8vLyAgdXNlcyBsZXNzIHRoYW4gMzAsMDAwIGdhcy4KICAvLy8gQHJldHVybiBgdHJ1ZWAgaWYgdGhlIGNvbnRyYWN0IGltcGxlbWVudHMgYGludGVyZmFjZUlEYCBhbmQKICAvLy8gIGBpbnRlcmZhY2VJRGAgaXMgbm90IDB4ZmZmZmZmZmYsIGBmYWxzZWAgb3RoZXJ3aXNlCiAgZnVuY3Rpb24gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0IGludGVyZmFjZUlEKSBleHRlcm5hbCBwdXJlIHJldHVybnMgKGJvb2wpOwp9CgovLyBGaWxlOiBjb250cmFjdHMvRVJDNzIxQmFzaWMuc29sCgovKioKICogQHRpdGxlIEVSQzcyMSBOb24tRnVuZ2libGUgVG9rZW4gU3RhbmRhcmQgYmFzaWMgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTcyMS5tZAogKi8KY29udHJhY3QgRVJDNzIxQmFzaWMgewogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9hcHByb3ZlZCwgdWludDI1NiBfdG9rZW5JZCk7CiAgZXZlbnQgQXBwcm92YWxGb3JBbGwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9vcGVyYXRvciwgYm9vbCBfYXBwcm92ZWQpOwoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX2JhbGFuY2UpOwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3duZXIpOwogIGZ1bmN0aW9uIGV4aXN0cyh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9leGlzdHMpOwoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWM7CiAgZnVuY3Rpb24gZ2V0QXBwcm92ZWQodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBfb3BlcmF0b3IpOwoKICBmdW5jdGlvbiBzZXRBcHByb3ZhbEZvckFsbChhZGRyZXNzIF9vcGVyYXRvciwgYm9vbCBfYXBwcm92ZWQpIHB1YmxpYzsKICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9vcGVyYXRvcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgcHVibGljOwogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYzsKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkLCBieXRlcyBfZGF0YSkgcHVibGljOwp9CgovLyBGaWxlOiBjb250cmFjdHMvRVJDNzIxLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkMtNzIxIE5vbi1GdW5naWJsZSBUb2tlbiBTdGFuZGFyZCwgb3B0aW9uYWwgZW51bWVyYXRpb24gZXh0ZW5zaW9uCiAqIEBkZXYgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTcyMS5tZAogKi8KY29udHJhY3QgRVJDNzIxRW51bWVyYWJsZSBpcyBFUkM3MjFCYXNpYyB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0b2tlbk9mT3duZXJCeUluZGV4KGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9pbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfdG9rZW5JZCk7CiAgZnVuY3Rpb24gdG9rZW5CeUluZGV4KHVpbnQyNTYgX2luZGV4KSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKfQoKLyoqCiAqIEB0aXRsZSBFUkMtNzIxIE5vbi1GdW5naWJsZSBUb2tlbiBTdGFuZGFyZCwgb3B0aW9uYWwgbWV0YWRhdGEgZXh0ZW5zaW9uCiAqIEBkZXYgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTcyMS5tZAogKi8KY29udHJhY3QgRVJDNzIxTWV0YWRhdGEgaXMgRVJDNzIxQmFzaWMgewogIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcgX25hbWUpOwogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKTsKICBmdW5jdGlvbiB0b2tlblVSSSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpOwp9CgovKioKICogQHRpdGxlIEVSQy03MjEgTm9uLUZ1bmdpYmxlIFRva2VuIFN0YW5kYXJkLCBmdWxsIGltcGxlbWVudGF0aW9uIGludGVyZmFjZQogKiBAZGV2IFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9ibG9iL21hc3Rlci9FSVBTL2VpcC03MjEubWQKICovCmNvbnRyYWN0IEVSQzcyMSBpcyBFUkM3MjFCYXNpYywgRVJDNzIxRW51bWVyYWJsZSwgRVJDNzIxTWV0YWRhdGEgewp9CgovLyBGaWxlOiBjb250cmFjdHMvRVJDNzIxUmVjZWl2ZXIuc29sCgovKioKICogQHRpdGxlIEVSQzcyMSB0b2tlbiByZWNlaXZlciBpbnRlcmZhY2UKICogQGRldiBJbnRlcmZhY2UgZm9yIGFueSBjb250cmFjdCB0aGF0IHdhbnRzIHRvIHN1cHBvcnQgc2FmZVRyYW5zZmVycwogKiAgZnJvbSBFUkM3MjEgYXNzZXQgY29udHJhY3RzLgogKi8KY29udHJhY3QgRVJDNzIxUmVjZWl2ZXIgewogIC8qKgogICAqIEBkZXYgTWFnaWMgdmFsdWUgdG8gYmUgcmV0dXJuZWQgdXBvbiBzdWNjZXNzZnVsIHJlY2VwdGlvbiBvZiBhbiBORlQKICAgKiAgRXF1YWxzIHRvIGBieXRlczQoa2VjY2FrMjU2KCJvbkVSQzcyMVJlY2VpdmVkKGFkZHJlc3MsdWludDI1NixieXRlcykiKSlgLAogICAqICB3aGljaCBjYW4gYmUgYWxzbyBvYnRhaW5lZCBhcyBgRVJDNzIxUmVjZWl2ZXIoMCkub25FUkM3MjFSZWNlaXZlZC5zZWxlY3RvcmAKICAgKi8KICBieXRlczQgY29uc3RhbnQgRVJDNzIxX1JFQ0VJVkVEID0gMHhmMGI5ZTViYTsKCiAgLyoqCiAgICogQG5vdGljZSBIYW5kbGUgdGhlIHJlY2VpcHQgb2YgYW4gTkZUCiAgICogQGRldiBUaGUgRVJDNzIxIHNtYXJ0IGNvbnRyYWN0IGNhbGxzIHRoaXMgZnVuY3Rpb24gb24gdGhlIHJlY2lwaWVudAogICAqICBhZnRlciBhIGBzYWZldHJhbnNmZXJgLiBUaGlzIGZ1bmN0aW9uIE1BWSB0aHJvdyB0byByZXZlcnQgYW5kIHJlamVjdCB0aGUKICAgKiAgdHJhbnNmZXIuIFRoaXMgZnVuY3Rpb24gTVVTVCB1c2UgNTAsMDAwIGdhcyBvciBsZXNzLiBSZXR1cm4gb2Ygb3RoZXIKICAgKiAgdGhhbiB0aGUgbWFnaWMgdmFsdWUgTVVTVCByZXN1bHQgaW4gdGhlIHRyYW5zYWN0aW9uIGJlaW5nIHJldmVydGVkLgogICAqICBOb3RlOiB0aGUgY29udHJhY3QgYWRkcmVzcyBpcyBhbHdheXMgdGhlIG1lc3NhZ2Ugc2VuZGVyLgogICAqIEBwYXJhbSBfZnJvbSBUaGUgc2VuZGluZyBhZGRyZXNzCiAgICogQHBhcmFtIF90b2tlbklkIFRoZSBORlQgaWRlbnRpZmllciB3aGljaCBpcyBiZWluZyB0cmFuc2ZlcmVkCiAgICogQHBhcmFtIF9kYXRhIEFkZGl0aW9uYWwgZGF0YSB3aXRoIG5vIHNwZWNpZmllZCBmb3JtYXQKICAgKiBAcmV0dXJuIGBieXRlczQoa2VjY2FrMjU2KCJvbkVSQzcyMVJlY2VpdmVkKGFkZHJlc3MsdWludDI1NixieXRlcykiKSlgCiAgICovCiAgZnVuY3Rpb24gb25FUkM3MjFSZWNlaXZlZChhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF90b2tlbklkLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMoYnl0ZXM0KTsKfQoKLy8gRmlsZTogemVwcGVsaW4tc29saWRpdHkvY29udHJhY3RzL0FkZHJlc3NVdGlscy5zb2wKCi8qKgogKiBVdGlsaXR5IGxpYnJhcnkgb2YgaW5saW5lIGZ1bmN0aW9ucyBvbiBhZGRyZXNzZXMKICovCmxpYnJhcnkgQWRkcmVzc1V0aWxzIHsKCiAgLyoqCiAgICogUmV0dXJucyB3aGV0aGVyIHRoZXJlIGlzIGNvZGUgaW4gdGhlIHRhcmdldCBhZGRyZXNzCiAgICogQGRldiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGZhbHNlIGlmIGludm9rZWQgZHVyaW5nIHRoZSBjb25zdHJ1Y3RvciBvZiBhIGNvbnRyYWN0LAogICAqICBhcyB0aGUgY29kZSBpcyBub3QgYWN0dWFsbHkgY3JlYXRlZCB1bnRpbCBhZnRlciB0aGUgY29uc3RydWN0b3IgZmluaXNoZXMuCiAgICogQHBhcmFtIGFkZHIgYWRkcmVzcyBhZGRyZXNzIHRvIGNoZWNrCiAgICogQHJldHVybiB3aGV0aGVyIHRoZXJlIGlzIGNvZGUgaW4gdGhlIHRhcmdldCBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIGFkZHIpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgdWludDI1NiBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0KICAgIHJldHVybiBzaXplID4gMDsKICB9Cgp9CgovLyBGaWxlOiB6ZXBwZWxpbi1zb2xpZGl0eS9jb250cmFjdHMvbWF0aC9TYWZlTWF0aC5zb2wKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewoKICAvKioKICAqIEBkZXYgTXVsdGlwbGllcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGlmIChhID09IDApIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVnZXIgZGl2aXNpb24gb2YgdHdvIG51bWJlcnMsIHRydW5jYXRpbmcgdGhlIHF1b3RpZW50LgogICovCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICAvKioKICAqIEBkZXYgU3VidHJhY3RzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cgKGkuZS4gaWYgc3VidHJhaGVuZCBpcyBncmVhdGVyIHRoYW4gbWludWVuZCkuCiAgKi8KICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICAvKioKICAqIEBkZXYgQWRkcyB0d28gbnVtYmVycywgdGhyb3dzIG9uIG92ZXJmbG93LgogICovCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9FUkM3MjFCYXNpY1Rva2VuLnNvbAoKLyoqCiAqIEB0aXRsZSBFUkM3MjEgTm9uLUZ1bmdpYmxlIFRva2VuIFN0YW5kYXJkIGJhc2ljIGltcGxlbWVudGF0aW9uCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2Jsb2IvbWFzdGVyL0VJUFMvZWlwLTcyMS5tZAogKi8KY29udHJhY3QgRVJDNzIxQmFzaWNUb2tlbiBpcyBFUkM3MjFCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgdXNpbmcgQWRkcmVzc1V0aWxzIGZvciBhZGRyZXNzOwoKICAvLyBFcXVhbHMgdG8gYGJ5dGVzNChrZWNjYWsyNTYoIm9uRVJDNzIxUmVjZWl2ZWQoYWRkcmVzcyx1aW50MjU2LGJ5dGVzKSIpKWAKICAvLyB3aGljaCBjYW4gYmUgYWxzbyBvYnRhaW5lZCBhcyBgRVJDNzIxUmVjZWl2ZXIoMCkub25FUkM3MjFSZWNlaXZlZC5zZWxlY3RvcmAKICBieXRlczQgY29uc3RhbnQgRVJDNzIxX1JFQ0VJVkVEID0gMHhmMGI5ZTViYTsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIG93bmVyCiAgbWFwcGluZyAodWludDI1NiA9PiBhZGRyZXNzKSBpbnRlcm5hbCB0b2tlbk93bmVyOwoKICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gYXBwcm92ZWQgYWRkcmVzcwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgaW50ZXJuYWwgdG9rZW5BcHByb3ZhbHM7CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBudW1iZXIgb2Ygb3duZWQgdG9rZW4KICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIG93bmVkVG9rZW5zQ291bnQ7CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBvcGVyYXRvciBhcHByb3ZhbHMKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkpIGludGVybmFsIG9wZXJhdG9yQXBwcm92YWxzOwoKICAvKioKICAqIEBkZXYgR3VhcmFudGVlcyBtc2cuc2VuZGVyIGlzIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHZhbGlkYXRlIGl0cyBvd25lcnNoaXAgYmVsb25ncyB0byBtc2cuc2VuZGVyCiAgKi8KICBtb2RpZmllciBvbmx5T3duZXJPZih1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKG93bmVyT2YoX3Rva2VuSWQpID09IG1zZy5zZW5kZXIpOwogICAgXzsKICB9CgogIC8qKgogICogQGRldiBDaGVja3MgbXNnLnNlbmRlciBjYW4gdHJhbnNmZXIgYSB0b2tlbiwgYnkgYmVpbmcgb3duZXIsIGFwcHJvdmVkLCBvciBvcGVyYXRvcgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHZhbGlkYXRlCiAgKi8KICBtb2RpZmllciBjYW5UcmFuc2Zlcih1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKGlzQXBwcm92ZWRPck93bmVyKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICBfOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgdG8gcXVlcnkgdGhlIGJhbGFuY2Ugb2YKICAqIEByZXR1cm4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmVxdWlyZShfb3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICByZXR1cm4gb3duZWRUb2tlbnNDb3VudFtfb3duZXJdOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIG93bmVyIG9mIHRoZSBzcGVjaWZpZWQgdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBxdWVyeSB0aGUgb3duZXIgb2YKICAqIEByZXR1cm4gb3duZXIgYWRkcmVzcyBjdXJyZW50bHkgbWFya2VkIGFzIHRoZSBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqLwogIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgYWRkcmVzcyBvd25lciA9IHRva2VuT3duZXJbX3Rva2VuSWRdOwogICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICAgIHJldHVybiBvd25lcjsKICB9CgogIC8qKgogICogQGRldiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB0b2tlbiBleGlzdHMKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBxdWVyeSB0aGUgZXhpc3RhbmNlIG9mCiAgKiBAcmV0dXJuIHdoZXRoZXIgdGhlIHRva2VuIGV4aXN0cwogICovCiAgZnVuY3Rpb24gZXhpc3RzKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIGFkZHJlc3Mgb3duZXIgPSB0b2tlbk93bmVyW190b2tlbklkXTsKICAgIHJldHVybiBvd25lciAhPSBhZGRyZXNzKDApOwogIH0KCiAgLyoqCiAgKiBAZGV2IEFwcHJvdmVzIGFub3RoZXIgYWRkcmVzcyB0byB0cmFuc2ZlciB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBkZXYgVGhlIHplcm8gYWRkcmVzcyBpbmRpY2F0ZXMgdGhlcmUgaXMgbm8gYXBwcm92ZWQgYWRkcmVzcy4KICAqIEBkZXYgVGhlcmUgY2FuIG9ubHkgYmUgb25lIGFwcHJvdmVkIGFkZHJlc3MgcGVyIHRva2VuIGF0IGEgZ2l2ZW4gdGltZS4KICAqIEBkZXYgQ2FuIG9ubHkgYmUgY2FsbGVkIGJ5IHRoZSB0b2tlbiBvd25lciBvciBhbiBhcHByb3ZlZCBvcGVyYXRvci4KICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byBiZSBhcHByb3ZlZCBmb3IgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgYXBwcm92ZWQKICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB7CiAgICBhZGRyZXNzIG93bmVyID0gb3duZXJPZihfdG9rZW5JZCk7CiAgICByZXF1aXJlKF90byAhPSBvd25lcik7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgaXNBcHByb3ZlZEZvckFsbChvd25lciwgbXNnLnNlbmRlcikpOwoKICAgIGlmIChnZXRBcHByb3ZlZChfdG9rZW5JZCkgIT0gYWRkcmVzcygwKSB8fCBfdG8gIT0gYWRkcmVzcygwKSkgewogICAgICB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF0gPSBfdG87CiAgICAgIEFwcHJvdmFsKG93bmVyLCBfdG8sIF90b2tlbklkKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBkZXYgR2V0cyB0aGUgYXBwcm92ZWQgYWRkcmVzcyBmb3IgYSB0b2tlbiBJRCwgb3IgemVybyBpZiBubyBhZGRyZXNzIHNldAogICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBxdWVyeSB0aGUgYXBwcm92YWwgb2YKICAgKiBAcmV0dXJuIGFkZHJlc3MgY3VycmVudGx5IGFwcHJvdmVkIGZvciBhIHRoZSBnaXZlbiB0b2tlbiBJRAogICAqLwogIGZ1bmN0aW9uIGdldEFwcHJvdmVkKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MpIHsKICAgIHJldHVybiB0b2tlbkFwcHJvdmFsc1tfdG9rZW5JZF07CiAgfQoKCiAgLyoqCiAgKiBAZGV2IFNldHMgb3IgdW5zZXRzIHRoZSBhcHByb3ZhbCBvZiBhIGdpdmVuIG9wZXJhdG9yCiAgKiBAZGV2IEFuIG9wZXJhdG9yIGlzIGFsbG93ZWQgdG8gdHJhbnNmZXIgYWxsIHRva2VucyBvZiB0aGUgc2VuZGVyIG9uIHRoZWlyIGJlaGFsZgogICogQHBhcmFtIF90byBvcGVyYXRvciBhZGRyZXNzIHRvIHNldCB0aGUgYXBwcm92YWwKICAqIEBwYXJhbSBfYXBwcm92ZWQgcmVwcmVzZW50aW5nIHRoZSBzdGF0dXMgb2YgdGhlIGFwcHJvdmFsIHRvIGJlIHNldAogICovCiAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBfdG8sIGJvb2wgX2FwcHJvdmVkKSBwdWJsaWMgewogICAgcmVxdWlyZShfdG8gIT0gbXNnLnNlbmRlcik7CiAgICBvcGVyYXRvckFwcHJvdmFsc1ttc2cuc2VuZGVyXVtfdG9dID0gX2FwcHJvdmVkOwogICAgQXBwcm92YWxGb3JBbGwobXNnLnNlbmRlciwgX3RvLCBfYXBwcm92ZWQpOwogIH0KCiAgLyoqCiAgICogQGRldiBUZWxscyB3aGV0aGVyIGFuIG9wZXJhdG9yIGlzIGFwcHJvdmVkIGJ5IGEgZ2l2ZW4gb3duZXIKICAgKiBAcGFyYW0gX293bmVyIG93bmVyIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gcXVlcnkgdGhlIGFwcHJvdmFsIG9mCiAgICogQHBhcmFtIF9vcGVyYXRvciBvcGVyYXRvciBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHF1ZXJ5IHRoZSBhcHByb3ZhbCBvZgogICAqIEByZXR1cm4gYm9vbCB3aGV0aGVyIHRoZSBnaXZlbiBvcGVyYXRvciBpcyBhcHByb3ZlZCBieSB0aGUgZ2l2ZW4gb3duZXIKICAgKi8KICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9vcGVyYXRvcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG9wZXJhdG9yQXBwcm92YWxzW19vd25lcl1bX29wZXJhdG9yXTsKICB9CgogIC8qKgogICogQGRldiBUcmFuc2ZlcnMgdGhlIG93bmVyc2hpcCBvZiBhIGdpdmVuIHRva2VuIElEIHRvIGFub3RoZXIgYWRkcmVzcwogICogQGRldiBVc2FnZSBvZiB0aGlzIG1ldGhvZCBpcyBkaXNjb3VyYWdlZCwgdXNlIGBzYWZlVHJhbnNmZXJGcm9tYCB3aGVuZXZlciBwb3NzaWJsZQogICogQGRldiBSZXF1aXJlcyB0aGUgbXNnIHNlbmRlciB0byBiZSB0aGUgb3duZXIsIGFwcHJvdmVkLCBvciBvcGVyYXRvcgogICogQHBhcmFtIF9mcm9tIGN1cnJlbnQgb3duZXIgb2YgdGhlIHRva2VuCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBjYW5UcmFuc2ZlcihfdG9rZW5JZCkgewogICAgcmVxdWlyZShfZnJvbSAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwoKICAgIGNsZWFyQXBwcm92YWwoX2Zyb20sIF90b2tlbklkKTsKICAgIHJlbW92ZVRva2VuRnJvbShfZnJvbSwgX3Rva2VuSWQpOwogICAgYWRkVG9rZW5UbyhfdG8sIF90b2tlbklkKTsKCiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgU2FmZWx5IHRyYW5zZmVycyB0aGUgb3duZXJzaGlwIG9mIGEgZ2l2ZW4gdG9rZW4gSUQgdG8gYW5vdGhlciBhZGRyZXNzCiAgKiBAZGV2IElmIHRoZSB0YXJnZXQgYWRkcmVzcyBpcyBhIGNvbnRyYWN0LCBpdCBtdXN0IGltcGxlbWVudCBgb25FUkM3MjFSZWNlaXZlZGAsCiAgKiAgd2hpY2ggaXMgY2FsbGVkIHVwb24gYSBzYWZlIHRyYW5zZmVyLCBhbmQgcmV0dXJuIHRoZSBtYWdpYyB2YWx1ZQogICogIGBieXRlczQoa2VjY2FrMjU2KCJvbkVSQzcyMVJlY2VpdmVkKGFkZHJlc3MsdWludDI1NixieXRlcykiKSlgOyBvdGhlcndpc2UsCiAgKiAgdGhlIHRyYW5zZmVyIGlzIHJldmVydGVkLgogICogQGRldiBSZXF1aXJlcyB0aGUgbXNnIHNlbmRlciB0byBiZSB0aGUgb3duZXIsIGFwcHJvdmVkLCBvciBvcGVyYXRvcgogICogQHBhcmFtIF9mcm9tIGN1cnJlbnQgb3duZXIgb2YgdGhlIHRva2VuCiAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgdG8gcmVjZWl2ZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKi8KICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgY2FuVHJhbnNmZXIoX3Rva2VuSWQpIHsKICAgIHNhZmVUcmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3Rva2VuSWQsICIiKTsKICB9CgogIC8qKgogICogQGRldiBTYWZlbHkgdHJhbnNmZXJzIHRoZSBvd25lcnNoaXAgb2YgYSBnaXZlbiB0b2tlbiBJRCB0byBhbm90aGVyIGFkZHJlc3MKICAqIEBkZXYgSWYgdGhlIHRhcmdldCBhZGRyZXNzIGlzIGEgY29udHJhY3QsIGl0IG11c3QgaW1wbGVtZW50IGBvbkVSQzcyMVJlY2VpdmVkYCwKICAqICB3aGljaCBpcyBjYWxsZWQgdXBvbiBhIHNhZmUgdHJhbnNmZXIsIGFuZCByZXR1cm4gdGhlIG1hZ2ljIHZhbHVlCiAgKiAgYGJ5dGVzNChrZWNjYWsyNTYoIm9uRVJDNzIxUmVjZWl2ZWQoYWRkcmVzcyx1aW50MjU2LGJ5dGVzKSIpKWA7IG90aGVyd2lzZSwKICAqICB0aGUgdHJhbnNmZXIgaXMgcmV2ZXJ0ZWQuCiAgKiBAZGV2IFJlcXVpcmVzIHRoZSBtc2cgc2VuZGVyIHRvIGJlIHRoZSBvd25lciwgYXBwcm92ZWQsIG9yIG9wZXJhdG9yCiAgKiBAcGFyYW0gX2Zyb20gY3VycmVudCBvd25lciBvZiB0aGUgdG9rZW4KICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0byByZWNlaXZlIHRoZSBvd25lcnNoaXAgb2YgdGhlIGdpdmVuIHRva2VuIElECiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAqIEBwYXJhbSBfZGF0YSBieXRlcyBkYXRhIHRvIHNlbmQgYWxvbmcgd2l0aCBhIHNhZmUgdHJhbnNmZXIgY2hlY2sKICAqLwogIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgY2FuVHJhbnNmZXIoX3Rva2VuSWQpIHsKICAgIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICByZXF1aXJlKGNoZWNrQW5kQ2FsbFNhZmVUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCwgX2RhdGEpKTsKICB9CgogIC8qKgogICAqIEBkZXYgUmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBzcGVuZGVyIGNhbiB0cmFuc2ZlciBhIGdpdmVuIHRva2VuIElECiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3Mgb2YgdGhlIHNwZW5kZXIgdG8gcXVlcnkKICAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgKiBAcmV0dXJuIGJvb2wgd2hldGhlciB0aGUgbXNnLnNlbmRlciBpcyBhcHByb3ZlZCBmb3IgdGhlIGdpdmVuIHRva2VuIElELAogICAqICBpcyBhbiBvcGVyYXRvciBvZiB0aGUgb3duZXIsIG9yIGlzIHRoZSBvd25lciBvZiB0aGUgdG9rZW4KICAgKi8KICBmdW5jdGlvbiBpc0FwcHJvdmVkT3JPd25lcihhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgIGFkZHJlc3Mgb3duZXIgPSBvd25lck9mKF90b2tlbklkKTsKICAgIHJldHVybiBfc3BlbmRlciA9PSBvd25lciB8fCBnZXRBcHByb3ZlZChfdG9rZW5JZCkgPT0gX3NwZW5kZXIgfHwgaXNBcHByb3ZlZEZvckFsbChvd25lciwgX3NwZW5kZXIpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIG1pbnQgYSBuZXcgdG9rZW4KICAqIEBkZXYgUmV2ZXJ0cyBpZiB0aGUgZ2l2ZW4gdG9rZW4gSUQgYWxyZWFkeSBleGlzdHMKICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIG93biB0aGUgbWludGVkIHRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgbWludGVkIGJ5IHRoZSBtc2cuc2VuZGVyCiAgKi8KICBmdW5jdGlvbiBfbWludChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICBhZGRUb2tlblRvKF90bywgX3Rva2VuSWQpOwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfdG9rZW5JZCk7CiAgfQoKICAvKioKICAqIEBkZXYgSW50ZXJuYWwgZnVuY3Rpb24gdG8gYnVybiBhIHNwZWNpZmljIHRva2VuCiAgKiBAZGV2IFJldmVydHMgaWYgdGhlIHRva2VuIGRvZXMgbm90IGV4aXN0CiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gYmVpbmcgYnVybmVkIGJ5IHRoZSBtc2cuc2VuZGVyCiAgKi8KICBmdW5jdGlvbiBfYnVybihhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgY2xlYXJBcHByb3ZhbChfb3duZXIsIF90b2tlbklkKTsKICAgIHJlbW92ZVRva2VuRnJvbShfb3duZXIsIF90b2tlbklkKTsKICAgIFRyYW5zZmVyKF9vd25lciwgYWRkcmVzcygwKSwgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGNsZWFyIGN1cnJlbnQgYXBwcm92YWwgb2YgYSBnaXZlbiB0b2tlbiBJRAogICogQGRldiBSZXZlcnRzIGlmIHRoZSBnaXZlbiBhZGRyZXNzIGlzIG5vdCBpbmRlZWQgdGhlIG93bmVyIG9mIHRoZSB0b2tlbgogICogQHBhcmFtIF9vd25lciBvd25lciBvZiB0aGUgdG9rZW4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICovCiAgZnVuY3Rpb24gY2xlYXJBcHByb3ZhbChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfb3duZXIpOwogICAgaWYgKHRva2VuQXBwcm92YWxzW190b2tlbklkXSAhPSBhZGRyZXNzKDApKSB7CiAgICAgIHRva2VuQXBwcm92YWxzW190b2tlbklkXSA9IGFkZHJlc3MoMCk7CiAgICAgIEFwcHJvdmFsKF9vd25lciwgYWRkcmVzcygwKSwgX3Rva2VuSWQpOwogICAgfQogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIGFkZCBhIHRva2VuIElEIHRvIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF90byBhZGRyZXNzIHJlcHJlc2VudGluZyB0aGUgbmV3IG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIGFkZGVkIHRvIHRoZSB0b2tlbnMgbGlzdCBvZiB0aGUgZ2l2ZW4gYWRkcmVzcwogICovCiAgZnVuY3Rpb24gYWRkVG9rZW5UbyhhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZSh0b2tlbk93bmVyW190b2tlbklkXSA9PSBhZGRyZXNzKDApKTsKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gX3RvOwogICAgb3duZWRUb2tlbnNDb3VudFtfdG9dID0gb3duZWRUb2tlbnNDb3VudFtfdG9dLmFkZCgxKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byByZW1vdmUgYSB0b2tlbiBJRCBmcm9tIHRoZSBsaXN0IG9mIGEgZ2l2ZW4gYWRkcmVzcwogICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgcmVwcmVzZW50aW5nIHRoZSBwcmV2aW91cyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSByZW1vdmVkIGZyb20gdGhlIHRva2VucyBsaXN0IG9mIHRoZSBnaXZlbiBhZGRyZXNzCiAgKi8KICBmdW5jdGlvbiByZW1vdmVUb2tlbkZyb20oYWRkcmVzcyBfZnJvbSwgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZShvd25lck9mKF90b2tlbklkKSA9PSBfZnJvbSk7CiAgICBvd25lZFRva2Vuc0NvdW50W19mcm9tXSA9IG93bmVkVG9rZW5zQ291bnRbX2Zyb21dLnN1YigxKTsKICAgIHRva2VuT3duZXJbX3Rva2VuSWRdID0gYWRkcmVzcygwKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBpbnZva2UgYG9uRVJDNzIxUmVjZWl2ZWRgIG9uIGEgdGFyZ2V0IGFkZHJlc3MKICAqIEBkZXYgVGhlIGNhbGwgaXMgbm90IGV4ZWN1dGVkIGlmIHRoZSB0YXJnZXQgYWRkcmVzcyBpcyBub3QgYSBjb250cmFjdAogICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgcmVwcmVzZW50aW5nIHRoZSBwcmV2aW91cyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG8gdGFyZ2V0IGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIHRva2VucwogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgKiBAcGFyYW0gX2RhdGEgYnl0ZXMgb3B0aW9uYWwgZGF0YSB0byBzZW5kIGFsb25nIHdpdGggdGhlIGNhbGwKICAqIEByZXR1cm4gd2hldGhlciB0aGUgY2FsbCBjb3JyZWN0bHkgcmV0dXJuZWQgdGhlIGV4cGVjdGVkIG1hZ2ljIHZhbHVlCiAgKi8KICBmdW5jdGlvbiBjaGVja0FuZENhbGxTYWZlVHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQsIGJ5dGVzIF9kYXRhKSBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICBpZiAoIV90by5pc0NvbnRyYWN0KCkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBieXRlczQgcmV0dmFsID0gRVJDNzIxUmVjZWl2ZXIoX3RvKS5vbkVSQzcyMVJlY2VpdmVkKF9mcm9tLCBfdG9rZW5JZCwgX2RhdGEpOwogICAgcmV0dXJuIChyZXR2YWwgPT0gRVJDNzIxX1JFQ0VJVkVEKTsKICB9Cn0KCi8vIEZpbGU6IGNvbnRyYWN0cy9FUkM3MjFUb2tlbi5zb2wKCi8qKgogKiBAdGl0bGUgRnVsbCBFUkM3MjEgVG9rZW4KICogVGhpcyBpbXBsZW1lbnRhdGlvbiBpbmNsdWRlcyBhbGwgdGhlIHJlcXVpcmVkIGFuZCBzb21lIG9wdGlvbmFsIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIEVSQzcyMSBzdGFuZGFyZAogKiBNb3Jlb3ZlciwgaXQgaW5jbHVkZXMgYXBwcm92ZSBhbGwgZnVuY3Rpb25hbGl0eSB1c2luZyBvcGVyYXRvciB0ZXJtaW5vbG9neQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9ibG9iL21hc3Rlci9FSVBTL2VpcC03MjEubWQKICovCmNvbnRyYWN0IEVSQzcyMVRva2VuIGlzIEVSQzcyMSwgRVJDNzIxQmFzaWNUb2tlbiB7CiAgLy8gVG9rZW4gbmFtZQogIHN0cmluZyBpbnRlcm5hbCBuYW1lXzsKCiAgLy8gVG9rZW4gc3ltYm9sCiAgc3RyaW5nIGludGVybmFsIHN5bWJvbF87CgogIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBsaXN0IG9mIG93bmVkIHRva2VuIElEcwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NltdKSBpbnRlcm5hbCBvd25lZFRva2VuczsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGluZGV4IG9mIHRoZSBvd25lciB0b2tlbnMgbGlzdAogIG1hcHBpbmcodWludDI1NiA9PiB1aW50MjU2KSBpbnRlcm5hbCBvd25lZFRva2Vuc0luZGV4OwoKICAvLyBBcnJheSB3aXRoIGFsbCB0b2tlbiBpZHMsIHVzZWQgZm9yIGVudW1lcmF0aW9uCiAgdWludDI1NltdIGludGVybmFsIGFsbFRva2VuczsKCiAgLy8gTWFwcGluZyBmcm9tIHRva2VuIGlkIHRvIHBvc2l0aW9uIGluIHRoZSBhbGxUb2tlbnMgYXJyYXkKICBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikgaW50ZXJuYWwgYWxsVG9rZW5zSW5kZXg7CgogIC8vIE9wdGlvbmFsIG1hcHBpbmcgZm9yIHRva2VuIFVSSXMKICBtYXBwaW5nKHVpbnQyNTYgPT4gc3RyaW5nKSBpbnRlcm5hbCB0b2tlblVSSXM7CgogIC8qKgogICogQGRldiBDb25zdHJ1Y3RvciBmdW5jdGlvbgogICovCiAgZnVuY3Rpb24gRVJDNzIxVG9rZW4oc3RyaW5nIF9uYW1lLCBzdHJpbmcgX3N5bWJvbCkgcHVibGljIHsKICAgIG5hbWVfID0gX25hbWU7CiAgICBzeW1ib2xfID0gX3N5bWJvbDsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSB0b2tlbiBuYW1lCiAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRva2VuIG5hbWUKICAqLwogIGZ1bmN0aW9uIG5hbWUoKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBuYW1lXzsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSB0b2tlbiBzeW1ib2wKICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdG9rZW4gc3ltYm9sCiAgKi8KICBmdW5jdGlvbiBzeW1ib2woKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBzeW1ib2xfOwogIH0KCiAgLyoqCiAgKiBAZGV2IFJldHVybnMgYW4gVVJJIGZvciBhIGdpdmVuIHRva2VuIElECiAgKiBAZGV2IFRocm93cyBpZiB0aGUgdG9rZW4gSUQgZG9lcyBub3QgZXhpc3QuIE1heSByZXR1cm4gYW4gZW1wdHkgc3RyaW5nLgogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHF1ZXJ5CiAgKi8KICBmdW5jdGlvbiB0b2tlblVSSSh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJlcXVpcmUoZXhpc3RzKF90b2tlbklkKSk7CiAgICByZXR1cm4gdG9rZW5VUklzW190b2tlbklkXTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBzZXQgdGhlIHRva2VuIFVSSSBmb3IgYSBnaXZlbiB0b2tlbgogICogQGRldiBSZXZlcnRzIGlmIHRoZSB0b2tlbiBJRCBkb2VzIG5vdCBleGlzdAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIHNldCBpdHMgVVJJCiAgKiBAcGFyYW0gX3VyaSBzdHJpbmcgVVJJIHRvIGFzc2lnbgogICovCiAgZnVuY3Rpb24gX3NldFRva2VuVVJJKHVpbnQyNTYgX3Rva2VuSWQsIHN0cmluZyBfdXJpKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKGV4aXN0cyhfdG9rZW5JZCkpOwogICAgdG9rZW5VUklzW190b2tlbklkXSA9IF91cmk7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgdG9rZW4gSUQgYXQgYSBnaXZlbiBpbmRleCBvZiB0aGUgdG9rZW5zIGxpc3Qgb2YgdGhlIHJlcXVlc3RlZCBvd25lcgogICogQHBhcmFtIF9vd25lciBhZGRyZXNzIG93bmluZyB0aGUgdG9rZW5zIGxpc3QgdG8gYmUgYWNjZXNzZWQKICAqIEBwYXJhbSBfaW5kZXggdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGluZGV4IHRvIGJlIGFjY2Vzc2VkIG9mIHRoZSByZXF1ZXN0ZWQgdG9rZW5zIGxpc3QKICAqIEByZXR1cm4gdWludDI1NiB0b2tlbiBJRCBhdCB0aGUgZ2l2ZW4gaW5kZXggb2YgdGhlIHRva2VucyBsaXN0IG93bmVkIGJ5IHRoZSByZXF1ZXN0ZWQgYWRkcmVzcwogICovCiAgZnVuY3Rpb24gdG9rZW5PZk93bmVyQnlJbmRleChhZGRyZXNzIF9vd25lciwgdWludDI1NiBfaW5kZXgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJlcXVpcmUoX2luZGV4IDwgYmFsYW5jZU9mKF9vd25lcikpOwogICAgcmV0dXJuIG93bmVkVG9rZW5zW19vd25lcl1bX2luZGV4XTsKICB9CgogIC8qKgogICogQGRldiBHZXRzIHRoZSB0b3RhbCBhbW91bnQgb2YgdG9rZW5zIHN0b3JlZCBieSB0aGUgY29udHJhY3QKICAqIEByZXR1cm4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGFsbFRva2Vucy5sZW5ndGg7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgdG9rZW4gSUQgYXQgYSBnaXZlbiBpbmRleCBvZiBhbGwgdGhlIHRva2VucyBpbiB0aGlzIGNvbnRyYWN0CiAgKiBAZGV2IFJldmVydHMgaWYgdGhlIGluZGV4IGlzIGdyZWF0ZXIgb3IgZXF1YWwgdG8gdGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMKICAqIEBwYXJhbSBfaW5kZXggdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGluZGV4IHRvIGJlIGFjY2Vzc2VkIG9mIHRoZSB0b2tlbnMgbGlzdAogICogQHJldHVybiB1aW50MjU2IHRva2VuIElEIGF0IHRoZSBnaXZlbiBpbmRleCBvZiB0aGUgdG9rZW5zIGxpc3QKICAqLwogIGZ1bmN0aW9uIHRva2VuQnlJbmRleCh1aW50MjU2IF9pbmRleCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmVxdWlyZShfaW5kZXggPCB0b3RhbFN1cHBseSgpKTsKICAgIHJldHVybiBhbGxUb2tlbnNbX2luZGV4XTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBhZGQgYSB0b2tlbiBJRCB0byB0aGUgbGlzdCBvZiBhIGdpdmVuIGFkZHJlc3MKICAqIEBwYXJhbSBfdG8gYWRkcmVzcyByZXByZXNlbnRpbmcgdGhlIG5ldyBvd25lciBvZiB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiB0byBiZSBhZGRlZCB0byB0aGUgdG9rZW5zIGxpc3Qgb2YgdGhlIGdpdmVuIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIGFkZFRva2VuVG8oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHsKICAgIHN1cGVyLmFkZFRva2VuVG8oX3RvLCBfdG9rZW5JZCk7CiAgICB1aW50MjU2IGxlbmd0aCA9IG93bmVkVG9rZW5zW190b10ubGVuZ3RoOwogICAgb3duZWRUb2tlbnNbX3RvXS5wdXNoKF90b2tlbklkKTsKICAgIG93bmVkVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gbGVuZ3RoOwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIHJlbW92ZSBhIHRva2VuIElEIGZyb20gdGhlIGxpc3Qgb2YgYSBnaXZlbiBhZGRyZXNzCiAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyByZXByZXNlbnRpbmcgdGhlIHByZXZpb3VzIG93bmVyIG9mIHRoZSBnaXZlbiB0b2tlbiBJRAogICogQHBhcmFtIF90b2tlbklkIHVpbnQyNTYgSUQgb2YgdGhlIHRva2VuIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgdG9rZW5zIGxpc3Qgb2YgdGhlIGdpdmVuIGFkZHJlc3MKICAqLwogIGZ1bmN0aW9uIHJlbW92ZVRva2VuRnJvbShhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICBzdXBlci5yZW1vdmVUb2tlbkZyb20oX2Zyb20sIF90b2tlbklkKTsKCiAgICB1aW50MjU2IHRva2VuSW5kZXggPSBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXTsKICAgIHVpbnQyNTYgbGFzdFRva2VuSW5kZXggPSBvd25lZFRva2Vuc1tfZnJvbV0ubGVuZ3RoLnN1YigxKTsKICAgIHVpbnQyNTYgbGFzdFRva2VuID0gb3duZWRUb2tlbnNbX2Zyb21dW2xhc3RUb2tlbkluZGV4XTsKCiAgICBvd25lZFRva2Vuc1tfZnJvbV1bdG9rZW5JbmRleF0gPSBsYXN0VG9rZW47CiAgICBvd25lZFRva2Vuc1tfZnJvbV1bbGFzdFRva2VuSW5kZXhdID0gMDsKICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgaGFuZGxlIHNpbmdsZS1lbGVtZW50IGFycmF5cy4gSW4gdGhhdCBjYXNlLCBib3RoIHRva2VuSW5kZXggYW5kIGxhc3RUb2tlbkluZGV4IGFyZSBnb2luZyB0bwogICAgLy8gYmUgemVyby4gVGhlbiB3ZSBjYW4gbWFrZSBzdXJlIHRoYXQgd2Ugd2lsbCByZW1vdmUgX3Rva2VuSWQgZnJvbSB0aGUgb3duZWRUb2tlbnMgbGlzdCBzaW5jZSB3ZSBhcmUgZmlyc3Qgc3dhcHBpbmcKICAgIC8vIHRoZSBsYXN0VG9rZW4gdG8gdGhlIGZpcnN0IHBvc2l0aW9uLCBhbmQgdGhlbiBkcm9wcGluZyB0aGUgZWxlbWVudCBwbGFjZWQgaW4gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlIGxpc3QKCiAgICBvd25lZFRva2Vuc1tfZnJvbV0ubGVuZ3RoLS07CiAgICBvd25lZFRva2Vuc0luZGV4W190b2tlbklkXSA9IDA7CiAgICBvd25lZFRva2Vuc0luZGV4W2xhc3RUb2tlbl0gPSB0b2tlbkluZGV4OwogIH0KCiAgLyoqCiAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIHRvIG1pbnQgYSBuZXcgdG9rZW4KICAqIEBkZXYgUmV2ZXJ0cyBpZiB0aGUgZ2l2ZW4gdG9rZW4gSUQgYWxyZWFkeSBleGlzdHMKICAqIEBwYXJhbSBfdG8gYWRkcmVzcyB0aGUgYmVuZWZpY2lhcnkgdGhhdCB3aWxsIG93biB0aGUgbWludGVkIHRva2VuCiAgKiBAcGFyYW0gX3Rva2VuSWQgdWludDI1NiBJRCBvZiB0aGUgdG9rZW4gdG8gYmUgbWludGVkIGJ5IHRoZSBtc2cuc2VuZGVyCiAgKi8KICBmdW5jdGlvbiBfbWludChhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgc3VwZXIuX21pbnQoX3RvLCBfdG9rZW5JZCk7CgogICAgYWxsVG9rZW5zSW5kZXhbX3Rva2VuSWRdID0gYWxsVG9rZW5zLmxlbmd0aDsKICAgIGFsbFRva2Vucy5wdXNoKF90b2tlbklkKTsKICB9CgogIC8qKgogICogQGRldiBJbnRlcm5hbCBmdW5jdGlvbiB0byBidXJuIGEgc3BlY2lmaWMgdG9rZW4KICAqIEBkZXYgUmV2ZXJ0cyBpZiB0aGUgdG9rZW4gZG9lcyBub3QgZXhpc3QKICAqIEBwYXJhbSBfb3duZXIgb3duZXIgb2YgdGhlIHRva2VuIHRvIGJ1cm4KICAqIEBwYXJhbSBfdG9rZW5JZCB1aW50MjU2IElEIG9mIHRoZSB0b2tlbiBiZWluZyBidXJuZWQgYnkgdGhlIG1zZy5zZW5kZXIKICAqLwogIGZ1bmN0aW9uIF9idXJuKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICBzdXBlci5fYnVybihfb3duZXIsIF90b2tlbklkKTsKCiAgICAvLyBDbGVhciBtZXRhZGF0YSAoaWYgYW55KQogICAgaWYgKGJ5dGVzKHRva2VuVVJJc1tfdG9rZW5JZF0pLmxlbmd0aCAhPSAwKSB7CiAgICAgIGRlbGV0ZSB0b2tlblVSSXNbX3Rva2VuSWRdOwogICAgfQoKICAgIC8vIFJlb3JnIGFsbCB0b2tlbnMgYXJyYXkKICAgIHVpbnQyNTYgdG9rZW5JbmRleCA9IGFsbFRva2Vuc0luZGV4W190b2tlbklkXTsKICAgIHVpbnQyNTYgbGFzdFRva2VuSW5kZXggPSBhbGxUb2tlbnMubGVuZ3RoLnN1YigxKTsKICAgIHVpbnQyNTYgbGFzdFRva2VuID0gYWxsVG9rZW5zW2xhc3RUb2tlbkluZGV4XTsKCiAgICBhbGxUb2tlbnNbdG9rZW5JbmRleF0gPSBsYXN0VG9rZW47CiAgICBhbGxUb2tlbnNbbGFzdFRva2VuSW5kZXhdID0gMDsKCiAgICBhbGxUb2tlbnMubGVuZ3RoLS07CiAgICBhbGxUb2tlbnNJbmRleFtfdG9rZW5JZF0gPSAwOwogICAgYWxsVG9rZW5zSW5kZXhbbGFzdFRva2VuXSA9IHRva2VuSW5kZXg7CiAgfQoKfQoKLy8gRmlsZTogY29udHJhY3RzL1N0cmluZ3Muc29sCgpsaWJyYXJ5IFN0cmluZ3MgewogIC8vIHZpYSBodHRwczovL2dpdGh1Yi5jb20vb3JhY2xpemUvZXRoZXJldW0tYXBpL2Jsb2IvbWFzdGVyL29yYWNsaXplQVBJXzAuNS5zb2wKICBmdW5jdGlvbiBzdHJDb25jYXQoc3RyaW5nIF9hLCBzdHJpbmcgX2IsIHN0cmluZyBfYywgc3RyaW5nIF9kLCBzdHJpbmcgX2UpIGludGVybmFsIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICBieXRlcyBtZW1vcnkgX2JhID0gYnl0ZXMoX2EpOwogICAgYnl0ZXMgbWVtb3J5IF9iYiA9IGJ5dGVzKF9iKTsKICAgIGJ5dGVzIG1lbW9yeSBfYmMgPSBieXRlcyhfYyk7CiAgICBieXRlcyBtZW1vcnkgX2JkID0gYnl0ZXMoX2QpOwogICAgYnl0ZXMgbWVtb3J5IF9iZSA9IGJ5dGVzKF9lKTsKICAgIHN0cmluZyBtZW1vcnkgYWJjZGUgPSBuZXcgc3RyaW5nKF9iYS5sZW5ndGggKyBfYmIubGVuZ3RoICsgX2JjLmxlbmd0aCArIF9iZC5sZW5ndGggKyBfYmUubGVuZ3RoKTsKICAgIGJ5dGVzIG1lbW9yeSBiYWJjZGUgPSBieXRlcyhhYmNkZSk7CiAgICB1aW50IGsgPSAwOwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgX2JhLmxlbmd0aDsgaSsrKSBiYWJjZGVbaysrXSA9IF9iYVtpXTsKICAgIGZvciAoaSA9IDA7IGkgPCBfYmIubGVuZ3RoOyBpKyspIGJhYmNkZVtrKytdID0gX2JiW2ldOwogICAgZm9yIChpID0gMDsgaSA8IF9iYy5sZW5ndGg7IGkrKykgYmFiY2RlW2srK10gPSBfYmNbaV07CiAgICBmb3IgKGkgPSAwOyBpIDwgX2JkLmxlbmd0aDsgaSsrKSBiYWJjZGVbaysrXSA9IF9iZFtpXTsKICAgIGZvciAoaSA9IDA7IGkgPCBfYmUubGVuZ3RoOyBpKyspIGJhYmNkZVtrKytdID0gX2JlW2ldOwogICAgcmV0dXJuIHN0cmluZyhiYWJjZGUpOwogIH0KCiAgZnVuY3Rpb24gc3RyQ29uY2F0KHN0cmluZyBfYSwgc3RyaW5nIF9iLCBzdHJpbmcgX2MsIHN0cmluZyBfZCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgIHJldHVybiBzdHJDb25jYXQoX2EsIF9iLCBfYywgX2QsICIiKTsKICB9CgogIGZ1bmN0aW9uIHN0ckNvbmNhdChzdHJpbmcgX2EsIHN0cmluZyBfYiwgc3RyaW5nIF9jKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIHN0ckNvbmNhdChfYSwgX2IsIF9jLCAiIiwgIiIpOwogIH0KCiAgZnVuY3Rpb24gc3RyQ29uY2F0KHN0cmluZyBfYSwgc3RyaW5nIF9iKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIHN0ckNvbmNhdChfYSwgX2IsICIiLCAiIiwgIiIpOwogIH0KCiAgZnVuY3Rpb24gYnl0ZXMxNlRvU3RyKGJ5dGVzMTYgX2J5dGVzMTYsIHVpbnQ4IF9zdGFydCwgdWludDggX2VuZCkgaW50ZXJuYWwgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgIGJ5dGVzIG1lbW9yeSBieXRlc0FycmF5ID0gbmV3IGJ5dGVzKF9lbmQgLSBfc3RhcnQpOwogICAgdWludDggcG9zID0gMDsKICAgIGZvciAodWludDggaSA9IF9zdGFydDsgaSA8IF9lbmQ7IGkrKykgewogICAgICBieXRlc0FycmF5W3Bvc10gPSBfYnl0ZXMxNltpXTsKICAgICAgcG9zKys7CiAgICB9CiAgICByZXR1cm4gc3RyaW5nKGJ5dGVzQXJyYXkpOwogIH0KfQoKLy8gRmlsZTogY29udHJhY3RzL0tub3duT3JpZ2luRGlnaXRhbEFzc2V0LnNvbAoKLyoqCiogQHRpdGxlIEtub3duT3JpZ2luRGlnaXRhbEFzc2V0CioKKiBodHRwOi8vd3d3Lmtub3dub3JpZ2luLmlvLwoqCiogRVJDNzIxIGNvbXBsaWFudCBkaWdpdGFsIGFzc2V0cyBmb3IgcmVhbC13b3JsZCBhcnR3b3JrLgoqIEJFIE9SSUdJTkFMLiBCVVkgT1JJR0lOQUwuCioKKi8KY29udHJhY3QgS25vd25PcmlnaW5EaWdpdGFsQXNzZXQgaXMgRVJDNzIxVG9rZW4sIEVSQzE2NSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogIGJ5dGVzNCBjb25zdGFudCBJbnRlcmZhY2VTaWduYXR1cmVfRVJDMTY1ID0gMHgwMWZmYzlhNzsKICAgIC8qCiAgICBieXRlczQoa2VjY2FrMjU2KCdzdXBwb3J0c0ludGVyZmFjZShieXRlczQpJykpOwogICAgKi8KCiAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjFFbnVtZXJhYmxlID0gMHg3ODBlOWQ2MzsKICAgIC8qCiAgICBieXRlczQoa2VjY2FrMjU2KCd0b3RhbFN1cHBseSgpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3Rva2VuT2ZPd25lckJ5SW5kZXgoYWRkcmVzcyx1aW50MjU2KScpKSBeCiAgICBieXRlczQoa2VjY2FrMjU2KCd0b2tlbkJ5SW5kZXgodWludDI1NiknKSk7CiAgICAqLwoKICBieXRlczQgY29uc3RhbnQgSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMU1ldGFkYXRhID0gMHg1YjVlMTM5ZjsKICAgIC8qCiAgICBieXRlczQoa2VjY2FrMjU2KCduYW1lKCknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1Nignc3ltYm9sKCknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NigndG9rZW5VUkkodWludDI1NiknKSk7CiAgICAqLwoKICBieXRlczQgY29uc3RhbnQgSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMSA9IDB4ODBhYzU4Y2Q7CiAgICAvKgogICAgYnl0ZXM0KGtlY2NhazI1NignYmFsYW5jZU9mKGFkZHJlc3MpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ293bmVyT2YodWludDI1NiknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NignYXBwcm92ZShhZGRyZXNzLHVpbnQyNTYpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ2dldEFwcHJvdmVkKHVpbnQyNTYpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3NldEFwcHJvdmFsRm9yQWxsKGFkZHJlc3MsYm9vbCknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1NignaXNBcHByb3ZlZEZvckFsbChhZGRyZXNzLGFkZHJlc3MpJykpIF4KICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NiknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1Nignc2FmZVRyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NiknKSkgXgogICAgYnl0ZXM0KGtlY2NhazI1Nignc2FmZVRyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NixieXRlcyknKSk7CiAgICAqLwoKICBieXRlczQgcHVibGljIGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjFPcHRpb25hbCA9LSAweDRmNTU4ZTc5OwogICAgLyoKICAgIGJ5dGVzNChrZWNjYWsyNTYoJ2V4aXN0cyh1aW50MjU2KScpKTsKICAgICovCgogIC8qKgogICAqIEBub3RpY2UgSW50cm9zcGVjdGlvbiBpbnRlcmZhY2UgYXMgcGVyIEVSQy0xNjUgKGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNjUpLgogICAqIEBkZXYgUmV0dXJucyB0cnVlIGZvciBhbnkgc3RhbmRhcmRpemVkIGludGVyZmFjZXMgaW1wbGVtZW50ZWQgYnkgdGhpcyBjb250cmFjdC4KICAgKiBAcGFyYW0gX2ludGVyZmFjZUlEIGJ5dGVzNCB0aGUgaW50ZXJmYWNlIHRvIGNoZWNrIGZvcgogICAqIEByZXR1cm4gdHJ1ZSBmb3IgYW55IHN0YW5kYXJkaXplZCBpbnRlcmZhY2VzIGltcGxlbWVudGVkIGJ5IHRoaXMgY29udHJhY3QuCiAgICovCiAgZnVuY3Rpb24gc3VwcG9ydHNJbnRlcmZhY2UoYnl0ZXM0IF9pbnRlcmZhY2VJRCkgZXh0ZXJuYWwgcHVyZSByZXR1cm5zIChib29sKSB7CiAgICByZXR1cm4gKChfaW50ZXJmYWNlSUQgPT0gSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzE2NSkKICAgIHx8IChfaW50ZXJmYWNlSUQgPT0gSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMSkKICAgIHx8IChfaW50ZXJmYWNlSUQgPT0gSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMU9wdGlvbmFsKQogICAgfHwgKF9pbnRlcmZhY2VJRCA9PSBJbnRlcmZhY2VTaWduYXR1cmVfRVJDNzIxRW51bWVyYWJsZSkKICAgIHx8IChfaW50ZXJmYWNlSUQgPT0gSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMU1ldGFkYXRhKSk7CiAgfQoKICBzdHJ1Y3QgQ29tbWlzc2lvblN0cnVjdHVyZSB7CiAgICB1aW50OCBjdXJhdG9yOwogICAgdWludDggZGV2ZWxvcGVyOwogIH0KCiAgc3RyaW5nIGludGVybmFsIHRva2VuQmFzZVVSSSA9ICJodHRwczovL2lwZnMuaW5mdXJhLmlvL2lwZnMvIjsKCiAgLy8gY3JlYXRlcyBhbmQgb3ducyB0aGUgb3JpZ2luYWwgYXNzZXRzIGFsbCBwcmltYXJ5IHB1cmNoYXNlcyB0cmFuc2ZlcnJlZCB0byB0aGlzIGFjY291bnQKICBhZGRyZXNzIHB1YmxpYyBjdXJhdG9yQWNjb3VudDsKCiAgLy8gdGhlIHBlcnNvbiB3aG8gaXMgcmVzcG9uc2libGUgZm9yIGRlc2lnbmluZyBhbmQgYnVpbGRpbmcgdGhlIGNvbnRyYWN0CiAgYWRkcmVzcyBwdWJsaWMgZGV2ZWxvcGVyQWNjb3VudDsKCiAgLy8gdG90YWwgd2VpIGJlZW4gcHJvY2Vzc2VkIHRocm91Z2ggdGhlIGNvbnRyYWN0CiAgdWludDI1NiBwdWJsaWMgdG90YWxQdXJjaGFzZVZhbHVlSW5XZWk7CgogIC8vIG51bWJlciBvZiBhc3NldHMgc29sZCBvZiBhbnkgdHlwZQogIHVpbnQyNTYgcHVibGljIHRvdGFsTnVtYmVyT2ZQdXJjaGFzZXM7CgogIC8vIEEgcG9pbnRlciB0byB0aGUgbmV4dCB0b2tlbiB0byBiZSBtaW50ZWQsIHplcm8gaW5kZXhlZAogIHVpbnQyNTYgcHVibGljIHRva2VuSWRQb2ludGVyID0gMDsKCiAgZW51bSBQdXJjaGFzZVN0YXRlIHtVbnNvbGQsIEV0aGVyUHVyY2hhc2UsIEZpYXRQdXJjaGFzZX0KCiAgbWFwcGluZyhzdHJpbmcgPT4gQ29tbWlzc2lvblN0cnVjdHVyZSkgaW50ZXJuYWwgZWRpdGlvblR5cGVUb0NvbW1pc3Npb247CiAgbWFwcGluZyh1aW50MjU2ID0+IFB1cmNoYXNlU3RhdGUpIGludGVybmFsIHRva2VuSWRUb1B1cmNoYXNlZDsKCiAgbWFwcGluZyh1aW50MjU2ID0+IGJ5dGVzMTYpIGludGVybmFsIHRva2VuSWRUb0VkaXRpb247CiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQyNTYpIGludGVybmFsIHRva2VuSWRUb1ByaWNlSW5XZWk7CiAgbWFwcGluZyh1aW50MjU2ID0+IHVpbnQzMikgaW50ZXJuYWwgdG9rZW5JZFRvUHVyY2hhc2VGcm9tVGltZTsKCiAgbWFwcGluZyhieXRlczE2ID0+IHVpbnQyNTYpIGludGVybmFsIGVkaXRpb25Ub0VkaXRpb25OdW1iZXI7CiAgbWFwcGluZyhieXRlczE2ID0+IGFkZHJlc3MpIGludGVybmFsIGVkaXRpb25Ub0FydGlzdEFjY291bnQ7CgogIGV2ZW50IFB1cmNoYXNlZFdpdGhFdGhlcih1aW50MjU2IGluZGV4ZWQgX3Rva2VuSWQsIGFkZHJlc3MgaW5kZXhlZCBfYnV5ZXIpOwoKICBldmVudCBQdXJjaGFzZWRXaXRoRmlhdCh1aW50MjU2IGluZGV4ZWQgX3Rva2VuSWQpOwoKICBldmVudCBQdXJjaGFzZWRXaXRoRmlhdFJldmVyc2VkKHVpbnQyNTYgaW5kZXhlZCBfdG9rZW5JZCk7CgogIG1vZGlmaWVyIG9ubHlDdXJhdG9yKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGN1cmF0b3JBY2NvdW50KTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5VW5zb2xkKHVpbnQyNTYgX3Rva2VuSWQpIHsKICAgIHJlcXVpcmUodG9rZW5JZFRvUHVyY2hhc2VkW190b2tlbklkXSA9PSBQdXJjaGFzZVN0YXRlLlVuc29sZCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUZpYXRQdXJjaGFzZWQodWludDI1NiBfdG9rZW5JZCkgewogICAgcmVxdWlyZSh0b2tlbklkVG9QdXJjaGFzZWRbX3Rva2VuSWRdID09IFB1cmNoYXNlU3RhdGUuRmlhdFB1cmNoYXNlKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5S25vd25PcmlnaW5Pd25lZFRva2VuKHVpbnQyNTYgX3Rva2VuSWQpIHsKICAgIHJlcXVpcmUodG9rZW5Pd25lcltfdG9rZW5JZF0gPT0gY3VyYXRvckFjY291bnQgfHwgdG9rZW5Pd25lcltfdG9rZW5JZF0gPT0gZGV2ZWxvcGVyQWNjb3VudCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUtub3duT3JpZ2luKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGN1cmF0b3JBY2NvdW50IHx8IG1zZy5zZW5kZXIgPT0gZGV2ZWxvcGVyQWNjb3VudCk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUFmdGVyUHVyY2hhc2VGcm9tVGltZSh1aW50MjU2IF90b2tlbklkKSB7CiAgICByZXF1aXJlKHRva2VuSWRUb1B1cmNoYXNlRnJvbVRpbWVbX3Rva2VuSWRdIDw9IGJsb2NrLnRpbWVzdGFtcCk7CiAgICBfOwogIH0KCiAgZnVuY3Rpb24gS25vd25PcmlnaW5EaWdpdGFsQXNzZXQoYWRkcmVzcyBfY3VyYXRvckFjY291bnQpIHB1YmxpYyBFUkM3MjFUb2tlbigiS25vd25PcmlnaW5EaWdpdGFsQXNzZXQiLCAiS09EQSIpIHsKICAgIGRldmVsb3BlckFjY291bnQgPSBtc2cuc2VuZGVyOwogICAgY3VyYXRvckFjY291bnQgPSBfY3VyYXRvckFjY291bnQ7CiAgfQoKICAvLyBkb24ndCBhY2NlcHQgcGF5bWVudCBkaXJlY3RseSB0byBjb250cmFjdAogIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgcmV2ZXJ0KCk7CiAgfQoKICAvKioKICAgKiBAZGV2IE1pbnQgYSBuZXcgS09EQSB0b2tlbgogICAqIEBkZXYgUmV2ZXJ0cyBpZiBub3QgY2FsbGVkIGJ5IG1hbmFnZW1lbnQKICAgKiBAcGFyYW0gX3Rva2VuVVJJIHRoZSBJUEZTIG9yIGVxdWl2YWxlbnQgaGFzaAogICAqIEBwYXJhbSBfZWRpdGlvbiB0aGUgaWRlbnRpZmllciBvZiB0aGUgZWRpdGlvbiAtIGxlYWRpbmcgMyBieXRlcyBhcmUgdGhlIGFydGlzdCBjb2RlLCB0cmFpbGluZyAzIGJ5dGVzIGFyZSB0aGUgYXNzZXQgdHlwZQogICAqIEBwYXJhbSBfcHJpY2VJbldlaSB0aGUgcHJpY2Ugb2YgdGhlIEtPREEgdG9rZW4KICAgKiBAcGFyYW0gX2F1Y3Rpb25TdGFydERhdGUgdGhlIGRhdGUgd2hlbiB0aGUgdG9rZW4gaXMgYXZhaWxhYmxlIGZvciBzYWxlCiAgICovCiAgZnVuY3Rpb24gbWludChzdHJpbmcgX3Rva2VuVVJJLCBieXRlczE2IF9lZGl0aW9uLCB1aW50MjU2IF9wcmljZUluV2VpLCB1aW50MzIgX2F1Y3Rpb25TdGFydERhdGUsIGFkZHJlc3MgX2FydGlzdEFjY291bnQpIGV4dGVybmFsIG9ubHlLbm93bk9yaWdpbiB7CiAgICByZXF1aXJlKF9hcnRpc3RBY2NvdW50ICE9IGFkZHJlc3MoMCkpOwoKICAgIHVpbnQyNTYgX3Rva2VuSWQgPSB0b2tlbklkUG9pbnRlcjsKCiAgICBzdXBlci5fbWludChtc2cuc2VuZGVyLCBfdG9rZW5JZCk7CiAgICBzdXBlci5fc2V0VG9rZW5VUkkoX3Rva2VuSWQsIF90b2tlblVSSSk7CgogICAgZWRpdGlvblRvQXJ0aXN0QWNjb3VudFtfZWRpdGlvbl0gPSBfYXJ0aXN0QWNjb3VudDsKCiAgICBfcG9wdWxhdGVUb2tlbkRhdGEoX3Rva2VuSWQsIF9lZGl0aW9uLCBfcHJpY2VJbldlaSwgX2F1Y3Rpb25TdGFydERhdGUpOwoKICAgIHRva2VuSWRQb2ludGVyID0gdG9rZW5JZFBvaW50ZXIuYWRkKDEpOwogIH0KCiAgZnVuY3Rpb24gX3BvcHVsYXRlVG9rZW5EYXRhKHVpbnQgX3Rva2VuSWQsIGJ5dGVzMTYgX2VkaXRpb24sIHVpbnQyNTYgX3ByaWNlSW5XZWksIHVpbnQzMiBfcHVyY2hhc2VGcm9tVGltZSkgaW50ZXJuYWwgewogICAgdG9rZW5JZFRvRWRpdGlvbltfdG9rZW5JZF0gPSBfZWRpdGlvbjsKICAgIGVkaXRpb25Ub0VkaXRpb25OdW1iZXJbX2VkaXRpb25dID0gZWRpdGlvblRvRWRpdGlvbk51bWJlcltfZWRpdGlvbl0uYWRkKDEpOwogICAgdG9rZW5JZFRvUHJpY2VJbldlaVtfdG9rZW5JZF0gPSBfcHJpY2VJbldlaTsKICAgIHRva2VuSWRUb1B1cmNoYXNlRnJvbVRpbWVbX3Rva2VuSWRdID0gX3B1cmNoYXNlRnJvbVRpbWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEJ1cm5zIGEgS09EQSB0b2tlbgogICAqIEBkZXYgUmV2ZXJ0cyBpZiB0b2tlbiBpcyBub3QgdW5zb2xkIG9yIG5vdCBvd25lZCBieSBtYW5hZ2VtZW50CiAgICogQHBhcmFtIF90b2tlbklkIHRoZSBLT0RBIHRva2VuIElECiAgICovCiAgZnVuY3Rpb24gYnVybih1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgb25seUtub3duT3JpZ2luIG9ubHlVbnNvbGQoX3Rva2VuSWQpIG9ubHlLbm93bk9yaWdpbk93bmVkVG9rZW4oX3Rva2VuSWQpIHsKICAgIHJlcXVpcmUoZXhpc3RzKF90b2tlbklkKSk7CiAgICBzdXBlci5fYnVybihvd25lck9mKF90b2tlbklkKSwgX3Rva2VuSWQpOwoKICAgIGJ5dGVzMTYgZWRpdGlvbiA9IHRva2VuSWRUb0VkaXRpb25bX3Rva2VuSWRdOwoKICAgIGRlbGV0ZSB0b2tlbklkVG9FZGl0aW9uW190b2tlbklkXTsKICAgIGRlbGV0ZSB0b2tlbklkVG9QcmljZUluV2VpW190b2tlbklkXTsKICAgIGRlbGV0ZSB0b2tlbklkVG9QdXJjaGFzZUZyb21UaW1lW190b2tlbklkXTsKCiAgICBlZGl0aW9uVG9FZGl0aW9uTnVtYmVyW2VkaXRpb25dID0gZWRpdGlvblRvRWRpdGlvbk51bWJlcltlZGl0aW9uXS5zdWIoMSk7CiAgfQoKICAvKioKICAgKiBAZGV2IFV0aWxpdHkgZnVuY3Rpb24gZm9yIHVwZGF0aW5nIGEgS09EQSBhc3NldHMgdG9rZW4gVVJJCiAgICogQGRldiBSZXZlcnRzIGlmIG5vdCBjYWxsZWQgYnkgbWFuYWdlbWVudAogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqIEBwYXJhbSBfdXJpIHRoZSB0b2tlbiBVUkksIHdpbGwgYmUgY29uY2F0ZW5hdGVkIHdpdGggYmFzZVVyaQogICAqLwogIGZ1bmN0aW9uIHNldFRva2VuVVJJKHVpbnQyNTYgX3Rva2VuSWQsIHN0cmluZyBfdXJpKSBleHRlcm5hbCBvbmx5S25vd25PcmlnaW4gewogICAgcmVxdWlyZShleGlzdHMoX3Rva2VuSWQpKTsKICAgIF9zZXRUb2tlblVSSShfdG9rZW5JZCwgX3VyaSk7CiAgfQoKICAvKioKICAgKiBAZGV2IFV0aWxpdHkgZnVuY3Rpb24gZm9yIHVwZGF0aW5nIGEgS09EQSBhc3NldHMgcHJpY2UKICAgKiBAZGV2IFJldmVydHMgaWYgdG9rZW4gaXMgbm90IHVuc29sZCBvciBub3QgY2FsbGVkIGJ5IG1hbmFnZW1lbnQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdGhlIEtPREEgdG9rZW4gSUQKICAgKiBAcGFyYW0gX3ByaWNlSW5XZWkgdGhlIHByaWNlIGluIHdlaQogICAqLwogIGZ1bmN0aW9uIHNldFByaWNlSW5XZWkodWludCBfdG9rZW5JZCwgdWludDI1NiBfcHJpY2VJbldlaSkgZXh0ZXJuYWwgb25seUtub3duT3JpZ2luIG9ubHlVbnNvbGQoX3Rva2VuSWQpIHsKICAgIHJlcXVpcmUoZXhpc3RzKF90b2tlbklkKSk7CiAgICB0b2tlbklkVG9QcmljZUluV2VpW190b2tlbklkXSA9IF9wcmljZUluV2VpOwogIH0KCiAgLyoqCiAgICogQGRldiBVc2VkIHRvIHByZS1hcHByb3ZlIGEgcHVyY2hhc2VyIGluIG9yZGVyIGZvciBpbnRlcm5hbCBwdXJjaGFzZSBtZXRob2RzCiAgICogdG8gc3VjY2VlZCB3aXRob3V0IGNhbGxpbmcgYXBwcm92ZSgpIGRpcmVjdGx5CiAgICogQHBhcmFtIF90b2tlbklkIHRoZSBLT0RBIHRva2VuIElECiAgICogQHJldHVybiBhZGRyZXNzIGN1cnJlbnRseSBhcHByb3ZlZCBmb3IgYSB0aGUgZ2l2ZW4gdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBfYXBwcm92ZVB1cmNoYXNlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgaW50ZXJuYWwgewogICAgYWRkcmVzcyBvd25lciA9IG93bmVyT2YoX3Rva2VuSWQpOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgdG9rZW5BcHByb3ZhbHNbX3Rva2VuSWRdID0gX3RvOwogICAgQXBwcm92YWwob3duZXIsIF90bywgX3Rva2VuSWQpOwogIH0KCiAgLyoqCiAgICogQGRldiBVcGRhdGVzIHRoZSBjb21taXNzaW9uIHN0cnVjdHVyZSBmb3IgdGhlIGdpdmVuIF90eXBlCiAgICogQGRldiBSZXZlcnRzIGlmIG5vdCBjYWxsZWQgYnkgbWFuYWdlbWVudAogICAqIEBwYXJhbSBfdHlwZSB0aGUgYXNzZXQgdHlwZQogICAqIEBwYXJhbSBfY3VyYXRvciB0aGUgY3VyYXRvcnMgY29tbWlzc2lvbgogICAqIEBwYXJhbSBfZGV2ZWxvcGVyIHRoZSBkZXZlbG9wZXJzIGNvbW1pc3Npb24KICAgKi8KICBmdW5jdGlvbiB1cGRhdGVDb21taXNzaW9uKHN0cmluZyBfdHlwZSwgdWludDggX2N1cmF0b3IsIHVpbnQ4IF9kZXZlbG9wZXIpIGV4dGVybmFsIG9ubHlLbm93bk9yaWdpbiB7CiAgICByZXF1aXJlKF9jdXJhdG9yID4gMCk7CiAgICByZXF1aXJlKF9kZXZlbG9wZXIgPiAwKTsKICAgIHJlcXVpcmUoKF9jdXJhdG9yICsgX2RldmVsb3BlcikgPCAxMDApOwoKICAgIGVkaXRpb25UeXBlVG9Db21taXNzaW9uW190eXBlXSA9IENvbW1pc3Npb25TdHJ1Y3R1cmUoe2N1cmF0b3IgOiBfY3VyYXRvciwgZGV2ZWxvcGVyIDogX2RldmVsb3Blcn0pOwogIH0KCiAgLyoqCiAgICogQGRldiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSBjb21taXNzaW9uIHN0cnVjdHVyZSBmb3IgdGhlIHByb3ZpZGVkIF90eXBlCiAgICogQHBhcmFtIF90eXBlIHRoZSBhc3NldCB0eXBlCiAgICogQHJldHVybiB0aGUgY29tbWlzc2lvbiBzdHJ1Y3R1cmUgb3IgemVybyBmb3IgYm90aCB2YWx1ZXMgd2hlbiBub3QgZm91bmQKICAgKi8KICBmdW5jdGlvbiBnZXRDb21taXNzaW9uRm9yVHlwZShzdHJpbmcgX3R5cGUpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQ4IF9jdXJhdG9yLCB1aW50OCBfZGV2ZWxvcGVyKSB7CiAgICBDb21taXNzaW9uU3RydWN0dXJlIHN0b3JhZ2UgY29tbWlzc2lvbiA9IGVkaXRpb25UeXBlVG9Db21taXNzaW9uW190eXBlXTsKICAgIHJldHVybiAoY29tbWlzc2lvbi5jdXJhdG9yLCBjb21taXNzaW9uLmRldmVsb3Blcik7CiAgfQoKICAvKioKICAgKiBAZGV2IFB1cmNoYXNlIHRoZSBwcm92aWRlIHRva2VuIGluIEV0aGVyCiAgICogQGRldiBSZXZlcnRzIGlmIHRva2VuIG5vdCB1bnNvbGQgYW5kIG5vdCBhdmFpbGFibGUgdG8gYmUgcHVyY2hhc2VkCiAgICogbXNnLnNlbmRlciB3aWxsIGJlY29tZSB0aGUgb3duZXIgb2YgdGhlIHRva2VuCiAgICogbXNnLnZhbHVlIG5lZWRzIHRvIGJlID49IHRvIHRoZSB0b2tlbiBwcmljZUluV2VpCiAgICogQHBhcmFtIF90b2tlbklkIHRoZSBLT0RBIHRva2VuIElECiAgICogQHJldHVybiB0cnVlL2ZhbHNlIGRlcGVuZGluZyBvbiBzdWNjZXNzCiAgICovCiAgZnVuY3Rpb24gcHVyY2hhc2VXaXRoRXRoZXIodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHBheWFibGUgb25seVVuc29sZChfdG9rZW5JZCkgb25seUtub3duT3JpZ2luT3duZWRUb2tlbihfdG9rZW5JZCkgb25seUFmdGVyUHVyY2hhc2VGcm9tVGltZShfdG9rZW5JZCkgewogICAgcmVxdWlyZShleGlzdHMoX3Rva2VuSWQpKTsKCiAgICB1aW50MjU2IHByaWNlSW5XZWkgPSB0b2tlbklkVG9QcmljZUluV2VpW190b2tlbklkXTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlSW5XZWkpOwoKICAgIC8vIGFwcHJvdmUgc2VuZGVyIGFzIHRoZXkgaGF2ZSBwYWlkIHRoZSByZXF1aXJlZCBhbW91bnQKICAgIF9hcHByb3ZlUHVyY2hhc2VyKG1zZy5zZW5kZXIsIF90b2tlbklkKTsKCiAgICAvLyB0cmFuc2ZlciBhc3NldHMgZnJvbSBjb250cmFjdCBjcmVhdG9yIChjdXJhdG9yKSB0byBuZXcgb3duZXIKICAgIHNhZmVUcmFuc2ZlckZyb20ob3duZXJPZihfdG9rZW5JZCksIG1zZy5zZW5kZXIsIF90b2tlbklkKTsKCiAgICAvLyBub3cgcHVyY2hhc2VkIC0gZG9uJ3QgYWxsb3cgcmUtcHVyY2hhc2UhCiAgICB0b2tlbklkVG9QdXJjaGFzZWRbX3Rva2VuSWRdID0gUHVyY2hhc2VTdGF0ZS5FdGhlclB1cmNoYXNlOwoKICAgIHRvdGFsUHVyY2hhc2VWYWx1ZUluV2VpID0gdG90YWxQdXJjaGFzZVZhbHVlSW5XZWkuYWRkKG1zZy52YWx1ZSk7CiAgICB0b3RhbE51bWJlck9mUHVyY2hhc2VzID0gdG90YWxOdW1iZXJPZlB1cmNoYXNlcy5hZGQoMSk7CgogICAgLy8gT25seSBhcHBseSBjb21taXNzaW9uIGlmIHRoZSBhcnQgd29yayBoYXMgdmFsdWUKICAgIGlmIChwcmljZUluV2VpID4gMCkgewogICAgICBfYXBwbHlDb21taXNzaW9uKF90b2tlbklkKTsKICAgIH0KCiAgICBQdXJjaGFzZWRXaXRoRXRoZXIoX3Rva2VuSWQsIG1zZy5zZW5kZXIpOwogIH0KCiAgLyoqCiAgICogQGRldiBQdXJjaGFzZSB0aGUgcHJvdmlkZSB0b2tlbiBpbiBGSUFULCBtYW5hZ2VtZW50IGNvbW1hbmQgb25seSBmb3IgdGFraW5nIGZpYXQgcGF5bWVudHMgZHVyaW5nIEtPREEgcGh5c2ljYWwgZXhoaWJpdGlvbnMKICAgKiBFcXVpdmFsZW50IHRvIHRha2luZyB0aGUgS09EQSB0b2tlbiBvZmYgdGhlIG1hcmtldCBhbmQgbWFya2luZyBhcyBzb2xkCiAgICogQGRldiBSZXZlcnRzIGlmIHRva2VuIG5vdCB1bnNvbGQgYW5kIG5vdCBhdmFpbGFibGUgdG8gYmUgcHVyY2hhc2VkIGFuZCBub3QgY2FsbGVkIGJ5IG1hbmFnZW1lbnQKICAgKiBAcGFyYW0gX3Rva2VuSWQgdGhlIEtPREEgdG9rZW4gSUQKICAgKi8KICBmdW5jdGlvbiBwdXJjaGFzZVdpdGhGaWF0KHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyBvbmx5S25vd25PcmlnaW4gb25seVVuc29sZChfdG9rZW5JZCkgb25seUFmdGVyUHVyY2hhc2VGcm9tVGltZShfdG9rZW5JZCkgewogICAgcmVxdWlyZShleGlzdHMoX3Rva2VuSWQpKTsKCiAgICAvLyBub3cgcHVyY2hhc2VkIC0gZG9uJ3QgYWxsb3cgcmUtcHVyY2hhc2UhCiAgICB0b2tlbklkVG9QdXJjaGFzZWRbX3Rva2VuSWRdID0gUHVyY2hhc2VTdGF0ZS5GaWF0UHVyY2hhc2U7CgogICAgdG90YWxOdW1iZXJPZlB1cmNoYXNlcyA9IHRvdGFsTnVtYmVyT2ZQdXJjaGFzZXMuYWRkKDEpOwoKICAgIFB1cmNoYXNlZFdpdGhGaWF0KF90b2tlbklkKTsKICB9CgogIC8qKgogICAqIEBkZXYgUmV2ZXJzZSBhIGZpYXQgcHVyY2hhc2UgbWFkZSBieSBjYWxsaW5nIHB1cmNoYXNlV2l0aEZpYXQoKQogICAqIEBkZXYgUmV2ZXJ0cyBpZiB0b2tlbiBub3QgcHVyY2hhc2VkIHdpdGggZmlhdCBhbmQgbm90IGF2YWlsYWJsZSB0byBiZSBwdXJjaGFzZWQgYW5kIG5vdCBjYWxsZWQgYnkgbWFuYWdlbWVudAogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqLwogIGZ1bmN0aW9uIHJldmVyc2VGaWF0UHVyY2hhc2UodWludDI1NiBfdG9rZW5JZCkgcHVibGljIG9ubHlLbm93bk9yaWdpbiBvbmx5RmlhdFB1cmNoYXNlZChfdG9rZW5JZCkgb25seUFmdGVyUHVyY2hhc2VGcm9tVGltZShfdG9rZW5JZCkgewogICAgcmVxdWlyZShleGlzdHMoX3Rva2VuSWQpKTsKCiAgICAvLyByZXNldCB0byBVbnNvbGQKICAgIHRva2VuSWRUb1B1cmNoYXNlZFtfdG9rZW5JZF0gPSBQdXJjaGFzZVN0YXRlLlVuc29sZDsKCiAgICB0b3RhbE51bWJlck9mUHVyY2hhc2VzID0gdG90YWxOdW1iZXJPZlB1cmNoYXNlcy5zdWIoMSk7CgogICAgUHVyY2hhc2VkV2l0aEZpYXRSZXZlcnNlZChfdG9rZW5JZCk7CiAgfQoKICAvKioKICAgKiBAZGV2IEludGVybmFsIGZ1bmN0aW9uIGZvciBhcHBseSBjb21taXNzaW9uIG9uIHB1cmNoYXNlCiAgICovCiAgZnVuY3Rpb24gX2FwcGx5Q29tbWlzc2lvbih1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICBieXRlczE2IGVkaXRpb24gPSB0b2tlbklkVG9FZGl0aW9uW190b2tlbklkXTsKCiAgICBzdHJpbmcgbWVtb3J5IHR5cGVDb2RlID0gZ2V0VHlwZUZyb21FZGl0aW9uKGVkaXRpb24pOwoKICAgIENvbW1pc3Npb25TdHJ1Y3R1cmUgbWVtb3J5IGNvbW1pc3Npb24gPSBlZGl0aW9uVHlwZVRvQ29tbWlzc2lvblt0eXBlQ29kZV07CgogICAgLy8gc3BsaXQgJiB0cmFuc2ZlciBmZWUgZm9yIGN1cmF0b3IKICAgIHVpbnQgY3VyYXRvckFjY291bnRGZWUgPSBtc2cudmFsdWUgLyAxMDAgKiBjb21taXNzaW9uLmN1cmF0b3I7CiAgICBjdXJhdG9yQWNjb3VudC50cmFuc2ZlcihjdXJhdG9yQWNjb3VudEZlZSk7CgogICAgLy8gc3BsaXQgJiB0cmFuc2ZlciBmZWUgZm9yIGRldmVsb3BlcgogICAgdWludCBkZXZlbG9wZXJBY2NvdW50RmVlID0gbXNnLnZhbHVlIC8gMTAwICogY29tbWlzc2lvbi5kZXZlbG9wZXI7CiAgICBkZXZlbG9wZXJBY2NvdW50LnRyYW5zZmVyKGRldmVsb3BlckFjY291bnRGZWUpOwoKICAgIC8vIGZpbmFsIHBheW1lbnQgdG8gY29tbWlzc2lvbiB3b3VsZCBiZSB0aGUgcmVtYWluaW5nIHZhbHVlCiAgICB1aW50IGZpbmFsQ29tbWlzc2lvblRvdGFsID0gbXNnLnZhbHVlIC0gKGN1cmF0b3JBY2NvdW50RmVlICsgZGV2ZWxvcGVyQWNjb3VudEZlZSk7CgogICAgLy8gc2VuZCBldGhlcgogICAgYWRkcmVzcyBhcnRpc3RBY2NvdW50ID0gZWRpdGlvblRvQXJ0aXN0QWNjb3VudFtlZGl0aW9uXTsKICAgIGFydGlzdEFjY291bnQudHJhbnNmZXIoZmluYWxDb21taXNzaW9uVG90YWwpOwogIH0KCiAgLyoqCiAgICogQGRldiBSZXRyaWV2ZSBhbGwgYXNzZXQgaW5mb3JtYXRpb24gZm9yIHRoZSBwcm92aWRlZCB0b2tlbgogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqIEByZXR1cm4gdG9rZW5JZCwgb3duZXIsIHB1cmNoYXNlU3RhdGUsIHByaWNlSW5XZWksIHB1cmNoYXNlRnJvbURhdGVUaW1lCiAgICovCiAgZnVuY3Rpb24gYXNzZXRJbmZvKHVpbnQgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKAogICAgdWludDI1NiBfdG9rSWQsCiAgICBhZGRyZXNzIF9vd25lciwKICAgIFB1cmNoYXNlU3RhdGUgX3B1cmNoYXNlU3RhdGUsCiAgICB1aW50MjU2IF9wcmljZUluV2VpLAogICAgdWludDMyIF9wdXJjaGFzZUZyb21UaW1lCiAgKSB7CiAgICByZXR1cm4gKAogICAgICBfdG9rZW5JZCwKICAgICAgdG9rZW5Pd25lcltfdG9rZW5JZF0sCiAgICAgIHRva2VuSWRUb1B1cmNoYXNlZFtfdG9rZW5JZF0sCiAgICAgIHRva2VuSWRUb1ByaWNlSW5XZWlbX3Rva2VuSWRdLAogICAgICB0b2tlbklkVG9QdXJjaGFzZUZyb21UaW1lW190b2tlbklkXQogICAgKTsKICB9CgogIC8qKgogICAqIEBkZXYgUmV0cmlldmUgYWxsIGVkaXRpb24gaW5mb3JtYXRpb24gZm9yIHRoZSBwcm92aWRlZCB0b2tlbgogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqIEByZXR1cm4gdG9rZW5JZCwgZWRpdGlvbiwgZWRpdGlvbk51bWJlciwgdG9rZW5VcmkKICAgKi8KICBmdW5jdGlvbiBlZGl0aW9uSW5mbyh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgIHVpbnQyNTYgX3Rva0lkLAogICAgYnl0ZXMxNiBfZWRpdGlvbiwKICAgIHVpbnQyNTYgX2VkaXRpb25OdW1iZXIsCiAgICBzdHJpbmcgX3Rva2VuVVJJLAogICAgYWRkcmVzcyBfYXJ0aXN0QWNjb3VudAogICkgewogICAgYnl0ZXMxNiBlZGl0aW9uID0gdG9rZW5JZFRvRWRpdGlvbltfdG9rZW5JZF07CiAgICByZXR1cm4gKAogICAgICBfdG9rZW5JZCwKICAgICAgZWRpdGlvbiwKICAgICAgZWRpdGlvblRvRWRpdGlvbk51bWJlcltlZGl0aW9uXSwKICAgICAgdG9rZW5VUkkoX3Rva2VuSWQpLAogICAgICBlZGl0aW9uVG9BcnRpc3RBY2NvdW50W2VkaXRpb25dCiAgICApOwogIH0KCiAgZnVuY3Rpb24gdG9rZW5zT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSBfdG9rZW5JZHMpIHsKICAgIHJldHVybiBvd25lZFRva2Vuc1tfb3duZXJdOwogIH0KCiAgLyoqCiAgICogQGRldiBSZXR1cm4gdGhlIHRvdGFsIG51bWJlciBvZiBhc3NldHMgaW4gYW4gZWRpdGlvbgogICAqIEBwYXJhbSBfZWRpdGlvbiB0aGUgZWRpdGlvbiBpZGVudGlmaWVyCiAgICovCiAgZnVuY3Rpb24gbnVtYmVyT2YoYnl0ZXMxNiBfZWRpdGlvbikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGVkaXRpb25Ub0VkaXRpb25OdW1iZXJbX2VkaXRpb25dOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXQgdGhlIHRva2VuIHB1cmNoYXNlIHN0YXRlIGZvciB0aGUgZ2l2ZW4gdG9rZW4KICAgKiBAcGFyYW0gX3Rva2VuSWQgdGhlIEtPREEgdG9rZW4gSUQKICAgKiBAcmV0dXJuIHRoZSBwdXJjaGFzZSBzYXRlLCBlaXRoZXIgMCwgMSwgMiwgcmV2ZXJ0cyBpZiB0b2tlbiBub3QgZm91bmQKICAgKi8KICBmdW5jdGlvbiBpc1B1cmNoYXNlZCh1aW50MjU2IF90b2tlbklkKSBwdWJsaWMgdmlldyByZXR1cm5zIChQdXJjaGFzZVN0YXRlIF9wdXJjaGFzZWQpIHsKICAgIHJlcXVpcmUoZXhpc3RzKF90b2tlbklkKSk7CiAgICByZXR1cm4gdG9rZW5JZFRvUHVyY2hhc2VkW190b2tlbklkXTsKICB9CgogIC8qKgogICAqIEBkZXYgR2V0IHRoZSBlZGl0aW9uIGlkZW50aWZpZXIgZm9yIHRoZSBnaXZlbiB0b2tlbgogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqIEByZXR1cm4gdGhlIGVkaXRpb24gaXMgZm91bmQsIHJldmVydHMgaWYgdG9rZW4gbm90IGZvdW5kCiAgICovCiAgZnVuY3Rpb24gZWRpdGlvbk9mKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJ5dGVzMTYgX2VkaXRpb24pIHsKICAgIHJlcXVpcmUoZXhpc3RzKF90b2tlbklkKSk7CiAgICByZXR1cm4gdG9rZW5JZFRvRWRpdGlvbltfdG9rZW5JZF07CiAgfQoKICAvKioKICAgKiBAZGV2IEdldCB0aGUgcHVyY2hhc2UgZnJvbSB0aW1lIGZvciB0aGUgZ2l2ZW4gdG9rZW4KICAgKiBAcGFyYW0gX3Rva2VuSWQgdGhlIEtPREEgdG9rZW4gSUQKICAgKiBAcmV0dXJuIHRoZSBwdXJjaGFzZWQgZnJvbSB0aW1lLCByZXZlcnRzIGlmIHRva2VuIG5vdCBmb3VuZAogICAqLwogIGZ1bmN0aW9uIHB1cmNoYXNlRnJvbVRpbWUodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDMyIF9wdXJjaGFzZUZyb21UaW1lKSB7CiAgICByZXF1aXJlKGV4aXN0cyhfdG9rZW5JZCkpOwogICAgcmV0dXJuIHRva2VuSWRUb1B1cmNoYXNlRnJvbVRpbWVbX3Rva2VuSWRdOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXQgdGhlIHByaWNlIGluIHdlaSBmb3IgdGhlIGdpdmVuIHRva2VuCiAgICogQHBhcmFtIF90b2tlbklkIHRoZSBLT0RBIHRva2VuIElECiAgICogQHJldHVybiB0aGUgcHJpY2UgaW4gd2VpLCByZXZlcnRzIGlmIHRva2VuIG5vdCBmb3VuZAogICAqLwogIGZ1bmN0aW9uIHByaWNlSW5XZWkodWludDI1NiBfdG9rZW5JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfcHJpY2VJbldlaSkgewogICAgcmVxdWlyZShleGlzdHMoX3Rva2VuSWQpKTsKICAgIHJldHVybiB0b2tlbklkVG9QcmljZUluV2VpW190b2tlbklkXTsKICB9CgogIC8qKgogICAqIEBkZXYgR2V0IHRoZSB0eXBlIGZvciB0aGUgcHJvdmlkZWQgZWRpdGlvbiwgdXNlZnVsIGZvciB0ZXN0aW5nIHB1cnBvc2VzCiAgICogQHBhcmFtIF9lZGl0aW9uIHRoZSBlZGl0aW9uIGlkZW50aWZpZXIKICAgKiBAcmV0dXJuIHRoZSB0eXBlIG9yIGJsYW5rIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIGdldFR5cGVGcm9tRWRpdGlvbihieXRlczE2IF9lZGl0aW9uKSBwdWJsaWMgcHVyZSByZXR1cm5zIChzdHJpbmcpIHsKICAgIC8vIHJldHVybiBsYXN0IDMgY2hhcnMgdGhhdCByZXByZXNlbnQgdGhlIGVkaXRpb24gdHlwZQogICAgcmV0dXJuIFN0cmluZ3MuYnl0ZXMxNlRvU3RyKF9lZGl0aW9uLCAxMywgMTYpOwogIH0KCiAgLyoqCiAgICogQGRldiBHZXQgdG9rZW4gVVJJIGZybyB0aGUgZ2l2ZW4gdG9rZW4sIHVzZWZ1bCBmb3IgdGVzdGluZyBwdXJwb3NlcwogICAqIEBwYXJhbSBfdG9rZW5JZCB0aGUgS09EQSB0b2tlbiBJRAogICAqIEByZXR1cm4gdGhlIHRva2VuIElEIG9yIG9ubHkgdGhlIGJhc2UgVVJJIGlmIG5vdCBmb3VuZAogICAqLwogIGZ1bmN0aW9uIHRva2VuVVJJKHVpbnQyNTYgX3Rva2VuSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHN0cmluZykgewogICAgcmV0dXJuIFN0cmluZ3Muc3RyQ29uY2F0KHRva2VuQmFzZVVSSSwgdG9rZW5VUklzW190b2tlbklkXSk7CiAgfQoKICAvKioKICAgKiBAZGV2IEFsbG93cyBtYW5hZ2VtZW50IHRvIHVwZGF0ZSB0aGUgYmFzZSB0b2tlblVSSSBwYXRoCiAgICogQGRldiBSZXZlcnRzIGlmIG5vdCBjYWxsZWQgYnkgbWFuYWdlbWVudAogICAqIEBwYXJhbSBfbmV3QmFzZVVSSSB0aGUgbmV3IGJhc2UgVVJJIHRvIHNldAogICAqLwogIGZ1bmN0aW9uIHNldFRva2VuQmFzZVVSSShzdHJpbmcgX25ld0Jhc2VVUkkpIGV4dGVybmFsIG9ubHlLbm93bk9yaWdpbiB7CiAgICB0b2tlbkJhc2VVUkkgPSBfbmV3QmFzZVVSSTsKICB9CgogIC8qKgogICAqIEBkZXYgQWxsb3dzIG1hbmFnZW1lbnQgdG8gdXBkYXRlIHRoZSBhcnRpc3QgYWNjb3VudCAod2hlcmUgY29tbWlzc2lvbiBpcyBzZW50KQogICAqIEBkZXYgUmV2ZXJ0cyBpZiBub3QgY2FsbGVkIGJ5IG1hbmFnZW1lbnQKICAgKiBAcGFyYW0gX2VkaXRpb24gZWRpdGlvbiB0byBhZGp1c3QKICAgICogQHBhcmFtIF9hcnRpc3RBY2NvdW50IGFkZHJlc3Mgb2YgYXJ0aXN0IG9uIGJsb2NrY2hhaW4KICAgKi8KICBmdW5jdGlvbiBzZXRBcnRpc3RBY2NvdW50KGJ5dGVzMTYgX2VkaXRpb24sIGFkZHJlc3MgX2FydGlzdEFjY291bnQpIGV4dGVybmFsIG9ubHlLbm93bk9yaWdpbiB7CiAgICByZXF1aXJlKF9hcnRpc3RBY2NvdW50ICE9IGFkZHJlc3MoMCkpOwoKICAgIGVkaXRpb25Ub0FydGlzdEFjY291bnRbX2VkaXRpb25dID0gX2FydGlzdEFjY291bnQ7CiAgfQp9'.
	

]
