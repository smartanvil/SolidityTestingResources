Class {
	#name : #SRTe4339c83ead9aa168d3fbfb43384a13b2df7766e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe4339c83ead9aa168d3fbfb43384a13b2df7766e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgoKLyogSW50ZXJmYWNlIG9mIHRoZSBFUkMyMjMgdG9rZW4gKi8KY29udHJhY3QgRVJDMjIzVG9rZW5JbnRlcmZhY2UgewogICAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSk7CiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCk7CiAgICBmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscyk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9yZW1haW5pbmcpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9tZXRhZGF0YSkgcmV0dXJucyAoYm9vbCBfc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIF9zdWNjZXNzKTsKCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSwgYnl0ZXMgbWV0YWRhdGEpOwp9CgoKLyogSW50ZXJmYWNlIG9mIHRoZSBjb250cmFjdCB0aGF0IGlzIGdvaW5nIHRvIHJlY2VpdmUgRVJDMjIzIHRva2VucyAqLwpjb250cmFjdCBFUkMyMjNDb250cmFjdEludGVyZmFjZSB7CiAgICBmdW5jdGlvbiBlcmMyMjNGYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpewogICAgICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdzIGR1cmluZyBjb21waWxhdGlvbgogICAgICAgIF9mcm9tID0gX2Zyb207CiAgICAgICAgX3ZhbHVlID0gX3ZhbHVlOwogICAgICAgIF9kYXRhID0gX2RhdGE7CiAgICAgICAgLy8gSW5jb21pbmcgdHJhbnNhY3Rpb24gY29kZSBoZXJlCiAgICAgICAgdGhyb3c7CiAgICB9Cn0KCgovKiBodHRwczovL2dpdGh1Yi5jb20vTHlra2VDaXR5L0V0aGVyZXVtQXBpRG90TmV0Q29yZS9ibG9iL21hc3Rlci9zcmMvQ29udHJhY3RCdWlsZGVyL2NvbnRyYWN0cy90b2tlbi9TYWZlTWF0aC5zb2wgKi8KY29udHJhY3QgU2FmZU1hdGggewogICAgdWludDI1NiBjb25zdGFudCBwdWJsaWMgTUFYX1VJTlQyNTYgPQogICAgMHhGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOwoKICAgIGZ1bmN0aW9uIHNhZmVBZGQodWludDI1NiB4LCB1aW50MjU2IHkpIGNvbnN0YW50IGludGVybmFsIHJldHVybnMgKHVpbnQyNTYgeikgewogICAgICAgIGlmICh4ID4gTUFYX1VJTlQyNTYgLSB5KSB0aHJvdzsKICAgICAgICByZXR1cm4geCArIHk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHggPCB5KSB0aHJvdzsKICAgICAgICByZXR1cm4geCAtIHk7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiB6KSB7CiAgICAgICAgaWYgKHkgPT0gMCkgcmV0dXJuIDA7CiAgICAgICAgaWYgKHggPiBNQVhfVUlOVDI1NiAvIHkpIHRocm93OwogICAgICAgIHJldHVybiB4ICogeTsKICAgIH0KfQoKCmNvbnRyYWN0IEVSQzIyM1Rva2VuIGlzIEVSQzIyM1Rva2VuSW50ZXJmYWNlLCBTYWZlTWF0aCB7CgogICAgLyoKICAgICAgU3RvcmFnZSBvZiB0aGUgY29udHJhY3QKICAgICovCgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dhbmNlczsKCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKCiAgICAvKgogICAgICBHZXR0ZXJzCiAgICAqLwoKICAgIGZ1bmN0aW9uIG5hbWUoKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX25hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW1ib2woKSBjb25zdGFudCByZXR1cm5zIChzdHJpbmcgX3N5bWJvbCkgewogICAgICAgIHJldHVybiBzeW1ib2w7CiAgICB9CgogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBjb25zdGFudCByZXR1cm5zICh1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICByZXR1cm4gZGVjaW1hbHM7CiAgICB9CgogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9zdXBwbHkpIHsKICAgICAgICByZXR1cm4gdG90YWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IF9iYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgoKICAgIC8qCiAgICAgIEFsbG93IHRvIHNwZW5kCiAgICAqLwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBhbGxvd2FuY2VzW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3JlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2FuY2VzW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKCiAgICAvKgogICAgICBUcmFuc2ZlcgogICAgKi8KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHlNZXRhZGF0YTsKICAgICAgICBfX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBlbXB0eU1ldGFkYXRhKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9tZXRhZGF0YSkgcmV0dXJucyAoYm9vbCBfc3VjY2VzcykKICAgIHsKICAgICAgICBfX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBpZiAoYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHRocm93OwoKICAgICAgICBhbGxvd2FuY2VzW19mcm9tXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIoYWxsb3dhbmNlc1tfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGVtcHR5TWV0YWRhdGE7CiAgICAgICAgX190cmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUsIGVtcHR5TWV0YWRhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIF9fdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfbWV0YWRhdGEpIGludGVybmFsCiAgICB7CiAgICAgICAgaWYgKF9mcm9tID09IF90bykgdGhyb3c7CiAgICAgICAgaWYgKF92YWx1ZSA9PSAwKSB0aHJvdzsKICAgICAgICBpZiAoYmFsYW5jZU9mKF9mcm9tKSA8IF92YWx1ZSkgdGhyb3c7CgogICAgICAgIGJhbGFuY2VzW19mcm9tXSA9IHNhZmVTdWIoYmFsYW5jZU9mKF9mcm9tKSwgX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlT2YoX3RvKSwgX3ZhbHVlKTsKCiAgICAgICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgICAgICBFUkMyMjNDb250cmFjdEludGVyZmFjZSByZWNlaXZlckNvbnRyYWN0ID0gRVJDMjIzQ29udHJhY3RJbnRlcmZhY2UoX3RvKTsKICAgICAgICAgICAgcmVjZWl2ZXJDb250cmFjdC5lcmMyMjNGYWxsYmFjayhfZnJvbSwgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgICAgIH0KCiAgICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIH0KCgogICAgLyoKICAgICAgSGVscGVycwogICAgKi8KCiAgICAvLyBBc3NlbWJsZSB0aGUgZ2l2ZW4gYWRkcmVzcyBieXRlY29kZS4gSWYgYnl0ZWNvZGUgZXhpc3RzIHRoZW4gdGhlIF9hZGRyIGlzIGEgY29udHJhY3QuCiAgICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIGludGVybmFsIHJldHVybnMgKGJvb2wgX2lzQ29udHJhY3QpIHsKICAgICAgICBfYWRkciA9IF9hZGRyOyAvLyB0byBhdm9pZCB3YXJuaW5ncyBkdXJpbmcgY29tcGlsYXRpb24KCiAgICAgICAgdWludDI1NiBsZW5ndGg7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChsZW5ndGggPiAwKTsKICAgIH0KfQoKCi8vIEVSQzIyMyB0b2tlbiB3aXRoIHRoZSBhYmlsaXR5IGZvciB0aGUgb3duZXIgdG8gYmxvY2sgYW55IGFjY291bnQKY29udHJhY3QgREFTVG9rZW4gaXMgRVJDMjIzVG9rZW4gewogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBibG9ja2VkQWNjb3VudHM7CiAgICBhZGRyZXNzIHB1YmxpYyBzZWNyZXRhcnlHZW5lcmFsOwoKCiAgICAvLyBDb25zdHJ1Y3RvcgogICAgZnVuY3Rpb24gREFTVG9rZW4oCiAgICAgICAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgICAgICAgc3RyaW5nIF9zeW1ib2wsCiAgICAgICAgICAgIHVpbnQ4IF9kZWNpbWFscywKICAgICAgICAgICAgdWludDI1NiBfdG90YWxTdXBwbHksCiAgICAgICAgICAgIGFkZHJlc3MgX2luaXRpYWxUb2tlbnNIb2xkZXIpIHsKICAgICAgICBzZWNyZXRhcnlHZW5lcmFsID0gbXNnLnNlbmRlcjsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgICAgICBiYWxhbmNlc1tfaW5pdGlhbFRva2Vuc0hvbGRlcl0gPSBfdG90YWxTdXBwbHk7CiAgICB9CgoKICAgIG1vZGlmaWVyIG9ubHlTZWNyZXRhcnlHZW5lcmFsIHsKICAgICAgICBpZiAobXNnLnNlbmRlciAhPSBzZWNyZXRhcnlHZW5lcmFsKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKCiAgICAvLyBibG9jayBhY2NvdW50CiAgICBmdW5jdGlvbiBibG9ja0FjY291bnQoYWRkcmVzcyBfYWNjb3VudCkgb25seVNlY3JldGFyeUdlbmVyYWwgewogICAgICAgIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF0gPSB0cnVlOwogICAgfQoKICAgIC8vIHVuYmxvY2sgYWNjb3VudAogICAgZnVuY3Rpb24gdW5ibG9ja0FjY291bnQoYWRkcmVzcyBfYWNjb3VudCkgb25seVNlY3JldGFyeUdlbmVyYWwgewogICAgICAgIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF0gPSBmYWxzZTsKICAgIH0KCiAgICAvLyBjaGVjayBpcyBhY2NvdW50IGJsb2NrZWQKICAgIGZ1bmN0aW9uIGlzQWNjb3VudEJsb2NrZWQoYWRkcmVzcyBfYWNjb3VudCkgcmV0dXJucyAoYm9vbCl7CiAgICAgICAgcmV0dXJuIGJsb2NrZWRBY2NvdW50c1tfYWNjb3VudF07CiAgICB9CgogICAgLy8gb3ZlcnJpZGUgdHJhbnNmZXIgbWV0aG9kcyB0byB0aHJvdyBvbiBibG9ja2VkIGFjY291bnRzCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2tlZEFjY291bnRzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXIoX3RvLCBfdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX21ldGFkYXRhKSByZXR1cm5zIChib29sIF9zdWNjZXNzKSB7CiAgICAgICAgaWYgKGJsb2NrZWRBY2NvdW50c1ttc2cuc2VuZGVyXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlLCBfbWV0YWRhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgX3N1Y2Nlc3MpIHsKICAgICAgICBpZiAoYmxvY2tlZEFjY291bnRzW19mcm9tXSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgfQp9CgoKY29udHJhY3QgQUJDVG9rZW4gaXMgRVJDMjIzVG9rZW4gewogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIEFCQ1Rva2VuKAogICAgICAgICAgICBzdHJpbmcgX25hbWUsCiAgICAgICAgICAgIHN0cmluZyBfc3ltYm9sLAogICAgICAgICAgICB1aW50OCBfZGVjaW1hbHMsCiAgICAgICAgICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5LAogICAgICAgICAgICBhZGRyZXNzIF9pbml0aWFsVG9rZW5zSG9sZGVyKSB7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbX2luaXRpYWxUb2tlbnNIb2xkZXJdID0gX3RvdGFsU3VwcGx5OwogICAgfQp9CgoKLy8gQ29udHJhY3Qgd2l0aCB2b3Rpbmcgb24gcHJvcG9zYWxzIGFuZCBleGVjdXRpb24gb2YgcGFzc2VkIHByb3Bvc2Fscwpjb250cmFjdCBEQVMgaXMgRVJDMjIzQ29udHJhY3RJbnRlcmZhY2UgewoKICAgIC8qIENvbnRyYWN0IFZhcmlhYmxlcyAqLwoKICAgIHN0cmluZyBuYW1lID0gIkRlY2VudHJhbGl6ZWQgQXV0b25vbW91cyBTdGF0ZSI7CiAgICAvLyBTb3VyY2Ugb2YgZGVtb2NyYWN5CiAgICBEQVNUb2tlbiBwdWJsaWMgZGFzVG9rZW47CiAgICBBQkNUb2tlbiBwdWJsaWMgYWJjVG9rZW47CiAgICAvLyBEZW1vY3JhY3kgcnVsZXMKICAgIHVpbnQyNTYgcHVibGljIGNvbmdyZXNzTWVtYmVyVGhyZXNob2xkOyAvLyBVc2VyIG11c3QgaGF2ZSBtb3JlIHRoYW4gdGhpcyBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIGluY2x1ZGVkIGludG8gY29uZ3Jlc3MKICAgIHVpbnQyNTYgcHVibGljIG1pbmltdW1RdW9ydW07ICAgICAgICAgICAvLyBUaGUgbWluaW11bSBudW1iZXIgb2YgdG9rZW5zIHRoYXQgbXVzdCBwYXJ0aWNpcGF0ZSBpbiBhIHZvdGUgdG8gYWNoaWV2ZSBhIHF1b3J1bQogICAgdWludDI1NiBwdWJsaWMgZGViYXRpbmdQZXJpb2Q7ICAgICAgICAgIC8vIE1pbiB0aW1lIHRvIHZvdGUgZm9yIGFuIHByb3Bvc2FsIFtzZWNdCiAgICB1aW50MjU2IHB1YmxpYyBtYXJnaW5Gb3JNYWpvcml0eTsgICAgICAgLy8gTWluIHN1cGVyaW9yaXR5IG9mIHZvdGVzICJmb3IiIHRvIHBhc3MgdGhlIHByb3Bvc2FsIFtudW1iZXIgb2YgdG9rZW5zXQogICAgLy8gUHJvcG9zYWxzCiAgICBQcm9wb3NhbFtdIHB1YmxpYyBwcm9wb3NhbHM7CiAgICB1aW50MjU2IHB1YmxpYyBwcm9wb3NhbHNOdW1iZXIgPSAwOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MzIpIHRva2Vuc0xvY2tzOyAgICAgICAgIC8vIGNvbmdyZXNzIG1lbWJlciA9PiBudW1iZXIgb2YgbG9ja3MgKHJlY3Vyc2l2ZSBtdXRleCkKCiAgICAvKiBDb250cmFjdCBFdmVudHMgKi8KICAgIGV2ZW50IFByb3Bvc2FsQWRkZWRFdmVudCh1aW50MjU2IHByb3Bvc2FsSUQsIGFkZHJlc3MgYmVuZWZpY2lhcnksIHVpbnQyNTYgZXRoZXJBbW91bnQsIHN0cmluZyBkZXNjcmlwdGlvbik7CiAgICBldmVudCBWb3RlZEV2ZW50KHVpbnQyNTYgcHJvcG9zYWxJRCwgYWRkcmVzcyB2b3RlciwgYm9vbCBpblN1cHBvcnQsIHVpbnQyNTYgdm90ZXJUb2tlbnMsIHN0cmluZyBqdXN0aWZpY2F0aW9uVGV4dCk7CiAgICBldmVudCBQcm9wb3NhbFRhbGxpZWRFdmVudCh1aW50MjU2IHByb3Bvc2FsSUQsIGJvb2wgcXVvcnVtLCBib29sIHJlc3VsdCk7CiAgICBldmVudCBQcm9wb3NhbEV4ZWN1dGVkRXZlbnQodWludDI1NiBwcm9wb3NhbElEKTsKICAgIGV2ZW50IFJ1bGVzQ2hhbmdlZEV2ZW50KHVpbnQyNTYgY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IG1pbmltdW1RdW9ydW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MjU2IGRlYmF0aW5nUGVyaW9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDI1NiBtYXJnaW5Gb3JNYWpvcml0eSk7CgogICAgLyogQ29udHJhY3QgU3RydWN0dXJlcyAqLwogICAgZW51bSBQcm9wb3NhbFN0YXRlIHtQcm9wb3NlZCwgTm9RdW9ydW0sIFJlamVjdGVkLCBQYXNzZWQsIEV4ZWN1dGVkfQoKICAgIHN0cnVjdCBQcm9wb3NhbCB7CiAgICAgICAgLyogUHJvcG9zYWwgY29udGVudCAqLwogICAgICAgIGFkZHJlc3MgYmVuZWZpY2lhcnk7CiAgICAgICAgdWludDI1NiBldGhlckFtb3VudDsKICAgICAgICBzdHJpbmcgZGVzY3JpcHRpb247CiAgICAgICAgYnl0ZXMzMiBwcm9wb3NhbEhhc2g7CgogICAgICAgIC8qIFByb3Bvc2FsIHN0YXRlICovCiAgICAgICAgUHJvcG9zYWxTdGF0ZSBzdGF0ZTsKCiAgICAgICAgLyogVm90aW5nIHN0YXRlICovCiAgICAgICAgdWludDI1NiB2b3RpbmdEZWFkbGluZTsKICAgICAgICBWb3RlW10gdm90ZXM7CiAgICAgICAgdWludDI1NiB2b3Rlc051bWJlcjsKICAgICAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHZvdGVkOwogICAgfQoKICAgIHN0cnVjdCBWb3RlIHsKICAgICAgICBhZGRyZXNzIHZvdGVyOwogICAgICAgIGJvb2wgaW5TdXBwb3J0OwogICAgICAgIHVpbnQyNTYgdm90ZXJUb2tlbnM7CiAgICAgICAgc3RyaW5nIGp1c3RpZmljYXRpb25UZXh0OwogICAgfQoKICAgIC8qIG1vZGlmaWVyIHRoYXQgYWxsb3dzIG9ubHkgY29uZ3Jlc3MgbWVtYmVycyB0byB2b3RlIGFuZCBjcmVhdGUgbmV3IHByb3Bvc2FscyAqLwogICAgbW9kaWZpZXIgb25seUNvbmdyZXNzTWVtYmVycyB7CiAgICAgICAgaWYgKGRhc1Rva2VuLmJhbGFuY2VPZihtc2cuc2VuZGVyKSA8IGNvbmdyZXNzTWVtYmVyVGhyZXNob2xkKSB0aHJvdzsKICAgICAgICBfOwogICAgfQoKICAgIC8qIENvbnN0cnVjdG9yICovCiAgICBmdW5jdGlvbiBEQVMoCiAgICAgICAgdWludDI1NiBfY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQsCiAgICAgICAgdWludDI1NiBfbWluaW11bVF1b3J1bSwKICAgICAgICB1aW50MjU2IF9kZWJhdGluZ1BlcmlvZCwKICAgICAgICB1aW50MjU2IF9tYXJnaW5Gb3JNYWpvcml0eSwKICAgICAgICBhZGRyZXNzIF9jb25ncmVzc0xlYWRlcgogICAgKSBwYXlhYmxlIHsKICAgICAgICAvLyBjcmVhdGUgYSBzb3VyY2Ugb2YgZGVtb2NyYWN5CiAgICAgICAgZGFzVG9rZW4gPSBuZXcgREFTVG9rZW4oJ0RBJCcsICdEQSQnLCAxOCwgMTAwMDAwMDAwMCAqICgxMCAqKiAxOCksIF9jb25ncmVzc0xlYWRlcik7CiAgICAgICAgYWJjVG9rZW4gPSBuZXcgQUJDVG9rZW4oJ0FscGhhYml0JywgJ0FCQycsIDE4LCAyMTAwMDAwMDAgKiAoMTAgKiogMTgpLCBfY29uZ3Jlc3NMZWFkZXIpOwoKICAgICAgICAvLyBzZXR1cCBydWxlcwogICAgICAgIGNvbmdyZXNzTWVtYmVyVGhyZXNob2xkID0gX2NvbmdyZXNzTWVtYmVyVGhyZXNob2xkOwogICAgICAgIG1pbmltdW1RdW9ydW0gPSBfbWluaW11bVF1b3J1bTsKICAgICAgICBkZWJhdGluZ1BlcmlvZCA9IF9kZWJhdGluZ1BlcmlvZDsKICAgICAgICBtYXJnaW5Gb3JNYWpvcml0eSA9IF9tYXJnaW5Gb3JNYWpvcml0eTsKCiAgICAgICAgUnVsZXNDaGFuZ2VkRXZlbnQoY29uZ3Jlc3NNZW1iZXJUaHJlc2hvbGQsIG1pbmltdW1RdW9ydW0sIGRlYmF0aW5nUGVyaW9kLCBtYXJnaW5Gb3JNYWpvcml0eSk7CiAgICB9CgogICAgLy8gYmxhbmsgZmFsbGJhY2sgZnVuY3Rpb25zIHRvIHJlY2VpdmUgRVRIIGFuZCB0b2tlbnMKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7IH0KCiAgICBmdW5jdGlvbiBlcmMyMjNGYWxsYmFjayhhZGRyZXNzIF9mcm9tLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpewogICAgICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdzIGR1cmluZyBjb21waWxhdGlvbgogICAgICAgIF9mcm9tID0gX2Zyb207CiAgICAgICAgX3ZhbHVlID0gX3ZhbHVlOwogICAgICAgIF9kYXRhID0gX2RhdGE7CiAgICB9CgoKICAgIC8qIFByb3Bvc2FsLXJlbGF0ZWQgZnVuY3Rpb25zICovCgogICAgLy8gY2FsY3VsYXRlIGhhc2ggb2YgYW4gcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGdldFByb3Bvc2FsSGFzaCgKICAgICAgICBhZGRyZXNzIF9iZW5lZmljaWFyeSwKICAgICAgICB1aW50MjU2IF9ldGhlckFtb3VudCwKICAgICAgICBieXRlcyBfdHJhbnNhY3Rpb25CeXRlY29kZQogICAgKQogICAgICAgIGNvbnN0YW50CiAgICAgICAgcmV0dXJucyAoYnl0ZXMzMikKICAgIHsKICAgICAgICByZXR1cm4gc2hhMyhfYmVuZWZpY2lhcnksIF9ldGhlckFtb3VudCwgX3RyYW5zYWN0aW9uQnl0ZWNvZGUpOwogICAgfQoKICAgIC8vIGJsb2NrIHRva2VucyBvZiBhbiB2b3RlcgogICAgZnVuY3Rpb24gYmxvY2tUb2tlbnMoYWRkcmVzcyBfdm90ZXIpIGludGVybmFsIHsKICAgICAgICBpZiAodG9rZW5zTG9ja3NbX3ZvdGVyXSArIDEgPCB0b2tlbnNMb2Nrc1tfdm90ZXJdKSB0aHJvdzsKCiAgICAgICAgdG9rZW5zTG9ja3NbX3ZvdGVyXSArPSAxOwogICAgICAgIGlmICh0b2tlbnNMb2Nrc1tfdm90ZXJdID09IDEpIHsKICAgICAgICAgICAgZGFzVG9rZW4uYmxvY2tBY2NvdW50KF92b3Rlcik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHVuYmxvY2sgdG9rZW5zIG9mIGFuIHZvdGVyCiAgICBmdW5jdGlvbiB1bmJsb2NrVG9rZW5zKGFkZHJlc3MgX3ZvdGVyKSBpbnRlcm5hbCB7CiAgICAgICAgaWYgKHRva2Vuc0xvY2tzW192b3Rlcl0gPD0gMCkgdGhyb3c7CgogICAgICAgIHRva2Vuc0xvY2tzW192b3Rlcl0gLT0gMTsKICAgICAgICBpZiAodG9rZW5zTG9ja3NbX3ZvdGVyXSA9PSAwKSB7CiAgICAgICAgICAgIGRhc1Rva2VuLnVuYmxvY2tBY2NvdW50KF92b3Rlcik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIGNyZWF0ZSBuZXcgcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGNyZWF0ZVByb3Bvc2FsKAogICAgICAgIGFkZHJlc3MgX2JlbmVmaWNpYXJ5LAogICAgICAgIHVpbnQyNTYgX2V0aGVyQW1vdW50LAogICAgICAgIHN0cmluZyBfZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMgX3RyYW5zYWN0aW9uQnl0ZWNvZGUKICAgICkKICAgICAgICBvbmx5Q29uZ3Jlc3NNZW1iZXJzCiAgICAgICAgcmV0dXJucyAodWludDI1NiBfcHJvcG9zYWxJRCkKICAgIHsKICAgICAgICBfcHJvcG9zYWxJRCA9IHByb3Bvc2Fscy5sZW5ndGg7CiAgICAgICAgcHJvcG9zYWxzLmxlbmd0aCArPSAxOwogICAgICAgIHByb3Bvc2Fsc051bWJlciA9IF9wcm9wb3NhbElEICsgMTsKCiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS5iZW5lZmljaWFyeSA9IF9iZW5lZmljaWFyeTsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLmV0aGVyQW1vdW50ID0gX2V0aGVyQW1vdW50OwogICAgICAgIHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF0uZGVzY3JpcHRpb24gPSBfZGVzY3JpcHRpb247CiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS5wcm9wb3NhbEhhc2ggPSBnZXRQcm9wb3NhbEhhc2goX2JlbmVmaWNpYXJ5LCBfZXRoZXJBbW91bnQsIF90cmFuc2FjdGlvbkJ5dGVjb2RlKTsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnN0YXRlID0gUHJvcG9zYWxTdGF0ZS5Qcm9wb3NlZDsKICAgICAgICBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdLnZvdGluZ0RlYWRsaW5lID0gbm93ICsgZGViYXRpbmdQZXJpb2QgKiAxIHNlY29uZHM7CiAgICAgICAgcHJvcG9zYWxzW19wcm9wb3NhbElEXS52b3Rlc051bWJlciA9IDA7CgogICAgICAgIFByb3Bvc2FsQWRkZWRFdmVudChfcHJvcG9zYWxJRCwgX2JlbmVmaWNpYXJ5LCBfZXRoZXJBbW91bnQsIF9kZXNjcmlwdGlvbik7CgogICAgICAgIHJldHVybiBfcHJvcG9zYWxJRDsKICAgIH0KCiAgICAvLyB2b3RlIGZvciBhbiBwcm9wb3NhbAogICAgZnVuY3Rpb24gdm90ZSgKICAgICAgICB1aW50MjU2IF9wcm9wb3NhbElELAogICAgICAgIGJvb2wgX2luU3VwcG9ydCwKICAgICAgICBzdHJpbmcgX2p1c3RpZmljYXRpb25UZXh0CiAgICApCiAgICAgICAgb25seUNvbmdyZXNzTWVtYmVycwogICAgewogICAgICAgIFByb3Bvc2FsIHAgPSBwcm9wb3NhbHNbX3Byb3Bvc2FsSURdOwoKICAgICAgICBpZiAocC5zdGF0ZSAhPSBQcm9wb3NhbFN0YXRlLlByb3Bvc2VkKSB0aHJvdzsKICAgICAgICBpZiAocC52b3RlZFttc2cuc2VuZGVyXSA9PSB0cnVlKSB0aHJvdzsKCiAgICAgICAgdmFyIHZvdGVyVG9rZW5zID0gZGFzVG9rZW4uYmFsYW5jZU9mKG1zZy5zZW5kZXIpOwogICAgICAgIGJsb2NrVG9rZW5zKG1zZy5zZW5kZXIpOwoKICAgICAgICBwLnZvdGVkW21zZy5zZW5kZXJdID0gdHJ1ZTsKICAgICAgICBwLnZvdGVzLnB1c2goVm90ZShtc2cuc2VuZGVyLCBfaW5TdXBwb3J0LCB2b3RlclRva2VucywgX2p1c3RpZmljYXRpb25UZXh0KSk7CiAgICAgICAgcC52b3Rlc051bWJlciArPSAxOwoKICAgICAgICBWb3RlZEV2ZW50KF9wcm9wb3NhbElELCBtc2cuc2VuZGVyLCBfaW5TdXBwb3J0LCB2b3RlclRva2VucywgX2p1c3RpZmljYXRpb25UZXh0KTsKICAgIH0KCiAgICAvLyBmaW5pc2ggdm90aW5nIG9uIGFuIHByb3Bvc2FsCiAgICBmdW5jdGlvbiBmaW5pc2hQcm9wb3NhbFZvdGluZyh1aW50MjU2IF9wcm9wb3NhbElEKSBvbmx5Q29uZ3Jlc3NNZW1iZXJzIHsKICAgICAgICBQcm9wb3NhbCBwID0gcHJvcG9zYWxzW19wcm9wb3NhbElEXTsKCiAgICAgICAgaWYgKG5vdyA8IHAudm90aW5nRGVhZGxpbmUpIHRocm93OwogICAgICAgIGlmIChwLnN0YXRlICE9IFByb3Bvc2FsU3RhdGUuUHJvcG9zZWQpIHRocm93OwoKICAgICAgICB2YXIgX3ZvdGVzTnVtYmVyID0gcC52b3Rlcy5sZW5ndGg7CiAgICAgICAgdWludDI1NiB0b2tlbnNGb3IgPSAwOwogICAgICAgIHVpbnQyNTYgdG9rZW5zQWdhaW5zdCA9IDA7CiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgX3ZvdGVzTnVtYmVyOyBpKyspIHsKICAgICAgICAgICAgaWYgKHAudm90ZXNbaV0uaW5TdXBwb3J0KSB7CiAgICAgICAgICAgICAgICB0b2tlbnNGb3IgKz0gcC52b3Rlc1tpXS52b3RlclRva2VuczsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2Vuc0FnYWluc3QgKz0gcC52b3Rlc1tpXS52b3RlclRva2VuczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdW5ibG9ja1Rva2VucyhwLnZvdGVzW2ldLnZvdGVyKTsKICAgICAgICB9CgogICAgICAgIGlmICgodG9rZW5zRm9yICsgdG9rZW5zQWdhaW5zdCkgPCBtaW5pbXVtUXVvcnVtKSB7CiAgICAgICAgICAgIHAuc3RhdGUgPSBQcm9wb3NhbFN0YXRlLk5vUXVvcnVtOwogICAgICAgICAgICBQcm9wb3NhbFRhbGxpZWRFdmVudChfcHJvcG9zYWxJRCwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoKHRva2Vuc0ZvciAtIHRva2Vuc0FnYWluc3QpIDwgbWFyZ2luRm9yTWFqb3JpdHkpIHsKICAgICAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuUmVqZWN0ZWQ7CiAgICAgICAgICAgIFByb3Bvc2FsVGFsbGllZEV2ZW50KF9wcm9wb3NhbElELCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuUGFzc2VkOwogICAgICAgIFByb3Bvc2FsVGFsbGllZEV2ZW50KF9wcm9wb3NhbElELCB0cnVlLCB0cnVlKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgLy8gZXhlY3V0ZSBwYXNzZWQgcHJvcG9zYWwKICAgIGZ1bmN0aW9uIGV4ZWN1dGVQcm9wb3NhbCh1aW50MjU2IF9wcm9wb3NhbElELCBieXRlcyBfdHJhbnNhY3Rpb25CeXRlY29kZSkgb25seUNvbmdyZXNzTWVtYmVycyB7CiAgICAgICAgUHJvcG9zYWwgcCA9IHByb3Bvc2Fsc1tfcHJvcG9zYWxJRF07CgogICAgICAgIGlmIChwLnN0YXRlICE9IFByb3Bvc2FsU3RhdGUuUGFzc2VkKSB0aHJvdzsKCiAgICAgICAgcC5zdGF0ZSA9IFByb3Bvc2FsU3RhdGUuRXhlY3V0ZWQ7CiAgICAgICAgaWYgKCFwLmJlbmVmaWNpYXJ5LmNhbGwudmFsdWUocC5ldGhlckFtb3VudCAqIDEgZXRoZXIpKF90cmFuc2FjdGlvbkJ5dGVjb2RlKSkgewogICAgICAgICAgICB0aHJvdzsKICAgICAgICB9CgogICAgICAgIFByb3Bvc2FsRXhlY3V0ZWRFdmVudChfcHJvcG9zYWxJRCk7CiAgICB9Cn0='.
	

]
