Class {
	#name : #SRTca67e92833c2de6bf3a444127fa0c60092255bf4,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTca67e92833c2de6bf3a444127fa0c60092255bf4 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgLy8gU2FmZU1hdGguc3ViIHdpbGwgdGhyb3cgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBiYWxhbmNlLgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4KICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgKi8KICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqLwpjb250cmFjdCBFUkMyMCBpcyBFUkMyMEJhc2ljIHsKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgU3RhbmRhcmQgRVJDMjAgdG9rZW4KICoKICogQGRldiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgYmFzaWMgc3RhbmRhcmQgdG9rZW4uCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwCiAqIEBkZXYgQmFzZWQgb24gY29kZSBieSBGaXJzdEJsb29kOiBodHRwczovL2dpdGh1Yi5jb20vRmlyc3RibG9vZGlvL3Rva2VuL2Jsb2IvbWFzdGVyL3NtYXJ0X2NvbnRyYWN0L0ZpcnN0Qmxvb2RUb2tlbi5zb2wKICovCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgRVJDMjAsIEJhc2ljVG9rZW4gewoKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7CgoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVycmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CgogICAgdmFyIF9hbGxvd2FuY2UgPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXTsKCiAgICAvLyBDaGVjayBpcyBub3QgbmVlZGVkIGJlY2F1c2Ugc3ViKF9hbGxvd2FuY2UsIF92YWx1ZSkgd2lsbCBhbHJlYWR5IHRocm93IGlmIHRoaXMgY29uZGl0aW9uIGlzIG5vdCBtZXQKICAgIC8vIHJlcXVpcmUgKF92YWx1ZSA8PSBfYWxsb3dhbmNlKTsKCiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgQXBwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wpIHsKCiAgICAvLyBUbyBjaGFuZ2UgdGhlIGFwcHJvdmUgYW1vdW50IHlvdSBmaXJzdCBoYXZlIHRvIHJlZHVjZSB0aGUgYWRkcmVzc2VzYAogICAgLy8gIGFsbG93YW5jZSB0byB6ZXJvIGJ5IGNhbGxpbmcgYGFwcHJvdmUoX3NwZW5kZXIsIDApYCBpZiBpdCBpcyBub3QKICAgIC8vICBhbHJlYWR5IDAgdG8gbWl0aWdhdGUgdGhlIHJhY2UgY29uZGl0aW9uIGRlc2NyaWJlZCBoZXJlOgogICAgLy8gIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICByZXF1aXJlKChfdmFsdWUgPT0gMCkgfHwgKGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID09IDApKTsKCiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIC8qKgogICAqIGFwcHJvdmUgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGFsbG93ZWRbX3NwZW5kZXJdID09IDAuIFRvIGluY3JlbWVudAogICAqIGFsbG93ZWQgdmFsdWUgaXMgYmV0dGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGF2b2lkIDIgY2FsbHMgKGFuZCB3YWl0IHVudGlsCiAgICogdGhlIGZpcnN0IHRyYW5zYWN0aW9uIGlzIG1pbmVkKQogICAqIEZyb20gTW9ub2xpdGhEQU8gVG9rZW4uc29sCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfYWRkZWRWYWx1ZSkKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbCAoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICB1aW50IG9sZFZhbHVlID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl07CiAgICBpZiAoX3N1YnRyYWN0ZWRWYWx1ZSA+IG9sZFZhbHVlKSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gb2xkVmFsdWUuc3ViKF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgfQogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8qKgogKiBAdGl0bGUgU2ltcGxlVG9rZW4KICogQGRldiBWZXJ5IHNpbXBsZSBFUkMyMCBUb2tlbiBleGFtcGxlLCB3aGVyZSBhbGwgdG9rZW5zIGFyZSBwcmUtYXNzaWduZWQgdG8gdGhlIGNyZWF0b3IuCiAqIE5vdGUgdGhleSBjYW4gbGF0ZXIgZGlzdHJpYnV0ZSB0aGVzZSB0b2tlbnMgYXMgdGhleSB3aXNoIHVzaW5nIGB0cmFuc2ZlcmAgYW5kIG90aGVyCiAqIGBTdGFuZGFyZFRva2VuYCBmdW5jdGlvbnMuCiAqLwpjb250cmFjdCBPcHBvcnR5VG9rZW4gaXMgU3RhbmRhcmRUb2tlbiB7CgogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJPcHBvcnR5VG9rZW4iOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk9QUCI7CiAgdWludDggcHVibGljIGNvbnN0YW50IGRlY2ltYWxzID0gMTg7CgogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gMTAwMDAwMDAwMCAqICgxMCAqKiB1aW50MjU2KGRlY2ltYWxzKSk7CgogIC8qKgogICAqIEBkZXYgQ29udHJ1Y3RvciB0aGF0IGdpdmVzIG1zZy5zZW5kZXIgYWxsIG9mIGV4aXN0aW5nIHRva2Vucy4KICAgKi8KICBmdW5jdGlvbiBPcHBvcnR5VG9rZW4oKSB7CiAgICB0b3RhbFN1cHBseSA9IElOSVRJQUxfU1VQUExZOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBJTklUSUFMX1NVUFBMWTsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wKICogZnVuY3Rpb25zLCB0aGlzIHNpbXBsaWZpZXMgdGhlIGltcGxlbWVudGF0aW9uIG9mICJ1c2VyIHBlcm1pc3Npb25zIi4KICovCmNvbnRyYWN0IE93bmFibGUgewogIGFkZHJlc3MgcHVibGljIG93bmVyOwoKCiAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIHByZXZpb3VzT3duZXIsIGFkZHJlc3MgaW5kZXhlZCBuZXdPd25lcik7CgoKICAvKioKICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgKiBhY2NvdW50LgogICAqLwogIGZ1bmN0aW9uIE93bmFibGUoKSB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBvbmx5T3duZXIgcHVibGljIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgovKioKICogQHRpdGxlIFBhdXNhYmxlCiAqIEBkZXYgQmFzZSBjb250cmFjdCB3aGljaCBhbGxvd3MgY2hpbGRyZW4gdG8gaW1wbGVtZW50IGFuIGVtZXJnZW5jeSBzdG9wIG1lY2hhbmlzbS4KICovCmNvbnRyYWN0IFBhdXNhYmxlIGlzIE93bmFibGUgewogIGV2ZW50IFBhdXNlKCk7CiAgZXZlbnQgVW5wYXVzZSgpOwoKICBib29sIHB1YmxpYyBwYXVzZWQgPSBmYWxzZTsKCgogIC8qKgogICAqIEBkZXYgTW9kaWZpZXIgdG8gbWFrZSBhIGZ1bmN0aW9uIGNhbGxhYmxlIG9ubHkgd2hlbiB0aGUgY29udHJhY3QgaXMgbm90IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuTm90UGF1c2VkKCkgewogICAgcmVxdWlyZSghcGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIHBhdXNlZC4KICAgKi8KICBtb2RpZmllciB3aGVuUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byBwYXVzZSwgdHJpZ2dlcnMgc3RvcHBlZCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHBhdXNlKCkgb25seU93bmVyIHdoZW5Ob3RQYXVzZWQgcHVibGljIHsKICAgIHBhdXNlZCA9IHRydWU7CiAgICBQYXVzZSgpOwogIH0KCiAgLyoqCiAgICogQGRldiBjYWxsZWQgYnkgdGhlIG93bmVyIHRvIHVucGF1c2UsIHJldHVybnMgdG8gbm9ybWFsIHN0YXRlCiAgICovCiAgZnVuY3Rpb24gdW5wYXVzZSgpIG9ubHlPd25lciB3aGVuUGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICAgIFVucGF1c2UoKTsKICB9Cn0KCmNvbnRyYWN0IEhvbGRQcmVzYWxlQ29udHJhY3QgaXMgT3duYWJsZSB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgLy8gQWRkcmVzc2VzIGFuZCBjb250cmFjdHMKICBPcHBvcnR5VG9rZW4gcHVibGljIE9wcFRva2VuOwogIGFkZHJlc3MgcHJpdmF0ZSBwcmVzYWxlQ29udDsKCiAgc3RydWN0IEhvbGRlciB7CiAgICBib29sIGlzQWN0aXZlOwogICAgdWludCB0b2tlbnM7CiAgICB1aW50OCBob2xkUGVyaW9kOwogICAgdWludCBob2xkUGVyaW9kVGltZXN0YW1wOwogICAgYm9vbCB3aXRoZHJhd2VkOwogIH0KCiAgbWFwcGluZyhhZGRyZXNzID0+IEhvbGRlcikgcHVibGljIGhvbGRlckxpc3Q7CiAgbWFwcGluZyh1aW50ID0+IGFkZHJlc3MpIHByaXZhdGUgaG9sZGVySW5kZXhlczsKCiAgbWFwcGluZyAodWludCA9PiBhZGRyZXNzKSBwcml2YXRlIGFzc2V0T3duZXJzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHJpdmF0ZSBhc3NldE93bmVyc0luZGV4OwogIHVpbnQgcHVibGljIGFzc2V0T3duZXJzSW5kZXhlczsKCiAgdWludCBwcml2YXRlIGhvbGRlckluZGV4OwoKICBldmVudCBUb2tlbnNUcmFuc2ZlcmVkKGFkZHJlc3MgY29udHJpYnV0b3IgLCB1aW50IGFtb3VudCk7CiAgZXZlbnQgSG9sZChhZGRyZXNzIHNlbmRlciwgYWRkcmVzcyBjb250cmlidXRvciwgdWludCBhbW91bnQsIHVpbnQ4IGhvbGRQZXJpb2QpOwoKICBtb2RpZmllciBvbmx5QXNzZXRzT3duZXJzKCkgewogICAgcmVxdWlyZShhc3NldE93bmVyc0luZGV4W21zZy5zZW5kZXJdID4gMCk7CiAgICBfOwogIH0KCiAgLyogY29uc3RydWN0b3IgKi8KICBmdW5jdGlvbiBIb2xkUHJlc2FsZUNvbnRyYWN0KGFkZHJlc3MgX09wcFRva2VuKSB7CiAgICBPcHBUb2tlbiA9IE9wcG9ydHlUb2tlbihfT3BwVG9rZW4pOwogIH0KCiAgZnVuY3Rpb24gc2V0UHJlc2FsZUNvbnQoYWRkcmVzcyBwcmVzKSAgcHVibGljIG9ubHlPd25lcgogIHsKICAgIHByZXNhbGVDb250ID0gcHJlczsKICB9CgogIGZ1bmN0aW9uIGFkZEhvbGRlcihhZGRyZXNzIGhvbGRlciwgdWludCB0b2tlbnMsIHVpbnQ4IHRpbWVkLCB1aW50IHRpbWVzdCkgb25seUFzc2V0c093bmVycyBleHRlcm5hbCB7CiAgICBpZiAoaG9sZGVyTGlzdFtob2xkZXJdLmlzQWN0aXZlID09IGZhbHNlKSB7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS5pc0FjdGl2ZSA9IHRydWU7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS50b2tlbnMgPSB0b2tlbnM7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS5ob2xkUGVyaW9kID0gdGltZWQ7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS5ob2xkUGVyaW9kVGltZXN0YW1wID0gdGltZXN0OwogICAgICBob2xkZXJJbmRleGVzW2hvbGRlckluZGV4XSA9IGhvbGRlcjsKICAgICAgaG9sZGVySW5kZXgrKzsKICAgIH0gZWxzZSB7CiAgICAgIGhvbGRlckxpc3RbaG9sZGVyXS50b2tlbnMgKz0gdG9rZW5zOwogICAgICBob2xkZXJMaXN0W2hvbGRlcl0uaG9sZFBlcmlvZCA9IHRpbWVkOwogICAgICBob2xkZXJMaXN0W2hvbGRlcl0uaG9sZFBlcmlvZFRpbWVzdGFtcCA9IHRpbWVzdDsKICAgIH0KICAgIEhvbGQobXNnLnNlbmRlciwgaG9sZGVyLCB0b2tlbnMsIHRpbWVkKTsKICB9CgogIGZ1bmN0aW9uIGdldEJhbGFuY2UoKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gT3BwVG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gdW5sb2NrVG9rZW5zKCkgZXh0ZXJuYWwgewogICAgYWRkcmVzcyBjb250cmlidXRvciA9IG1zZy5zZW5kZXI7CgogICAgaWYgKGhvbGRlckxpc3RbY29udHJpYnV0b3JdLmlzQWN0aXZlICYmICFob2xkZXJMaXN0W2NvbnRyaWJ1dG9yXS53aXRoZHJhd2VkKSB7CiAgICAgIGlmIChub3cgPj0gaG9sZGVyTGlzdFtjb250cmlidXRvcl0uaG9sZFBlcmlvZFRpbWVzdGFtcCkgewogICAgICAgIGlmICggT3BwVG9rZW4udHJhbnNmZXIoIG1zZy5zZW5kZXIsIGhvbGRlckxpc3RbY29udHJpYnV0b3JdLnRva2VucyApICkgewogICAgICAgICAgaG9sZGVyTGlzdFtjb250cmlidXRvcl0ud2l0aGRyYXdlZCA9IHRydWU7CiAgICAgICAgICBUb2tlbnNUcmFuc2ZlcmVkKGNvbnRyaWJ1dG9yLCAgaG9sZGVyTGlzdFtjb250cmlidXRvcl0udG9rZW5zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV2ZXJ0KCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldmVydCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYWRkQXNzZXRzT3duZXIoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgYXNzZXRPd25lcnNJbmRleGVzKys7CiAgICBhc3NldE93bmVyc1thc3NldE93bmVyc0luZGV4ZXNdID0gX293bmVyOwogICAgYXNzZXRPd25lcnNJbmRleFtfb3duZXJdID0gYXNzZXRPd25lcnNJbmRleGVzOwogIH0KICBmdW5jdGlvbiByZW1vdmVBc3NldHNPd25lcihhZGRyZXNzIF9vd25lcikgcHVibGljIG9ubHlPd25lciB7CiAgICB1aW50IGluZGV4ID0gYXNzZXRPd25lcnNJbmRleFtfb3duZXJdOwogICAgZGVsZXRlIGFzc2V0T3duZXJzSW5kZXhbX293bmVyXTsKICAgIGRlbGV0ZSBhc3NldE93bmVyc1tpbmRleF07CiAgICBhc3NldE93bmVyc0luZGV4ZXMtLTsKICB9CiAgZnVuY3Rpb24gZ2V0QXNzZXRzT3duZXJzKHVpbnQgX2luZGV4KSBvbmx5T3duZXIgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3MpIHsKICAgIHJldHVybiBhc3NldE93bmVyc1tfaW5kZXhdOwogIH0KfQoKY29udHJhY3QgT3Bwb3J0eVByZXNhbGUgaXMgUGF1c2FibGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBPcHBvcnR5VG9rZW4gcHVibGljIHRva2VuOwoKICBIb2xkUHJlc2FsZUNvbnRyYWN0IHB1YmxpYyBob2xkQ29udHJhY3Q7CgogIGVudW0gU2FsZVN0YXRlICB7IE5FVywgU0FMRSwgRU5ERUQgfQogIFNhbGVTdGF0ZSBwdWJsaWMgc3RhdGU7CgogIHVpbnQgcHVibGljIGVuZERhdGU7CiAgdWludCBwdWJsaWMgZW5kU2FsZURhdGU7CgogIC8vIGFkZHJlc3Mgd2hlcmUgZnVuZHMgYXJlIGNvbGxlY3RlZAogIGFkZHJlc3MgcHJpdmF0ZSB3YWxsZXQ7CgogIC8vIHRvdGFsIEVUSCBjb2xsZWN0ZWQKICB1aW50IHB1YmxpYyBldGhSYWlzZWQ7CgogIHVpbnQgcHJpdmF0ZSBwcmljZTsKCiAgdWludCBwdWJsaWMgdG9rZW5SYWlzZWQ7CiAgYm9vbCBwdWJsaWMgdG9rZW5zVHJhbnNmZXJyZWRUb0hvbGQ7CgogIC8qIEV2ZW50cyAqLwogIGV2ZW50IFNhbGVTdGFydGVkKHVpbnQgYmxvY2tOdW1iZXIpOwogIGV2ZW50IFNhbGVFbmRlZCh1aW50IGJsb2NrTnVtYmVyKTsKICBldmVudCBGdW5kVHJhbnNmZXJlZChhZGRyZXNzIGNvbnRyaWIsIHVpbnQgYW1vdW50KTsKICBldmVudCBXaXRoZHJhd2VkRXRoVG9XYWxsZXQodWludCBhbW91bnQpOwogIGV2ZW50IE1hbnVhbENoYW5nZUVuZERhdGUodWludCBiZWZvcmVEYXRlLCB1aW50IGFmdGVyRGF0ZSk7CiAgZXZlbnQgVG9rZW5zVHJhbnNmZXJlZFRvSG9sZChhZGRyZXNzIGhvbGQsIHVpbnQgYW1vdW50KTsKICBldmVudCBBZGRlZFRvV2hpdGVMaXN0KGFkZHJlc3MgaW52LCB1aW50IGFtb3VudCwgdWludDggaG9sZFBlcmlvZCwgdWludDggYm9udXMpOwogIGV2ZW50IEFkZGVkVG9Ib2xkZXIoIGFkZHJlc3Mgc2VuZGVyLCB1aW50IHRva2VuQW1vdW50LCB1aW50OCBob2xkUGVyaW9kLCB1aW50IGhvbGRUaW1lc3RhbXApOwoKICBzdHJ1Y3QgV2hpdGVsaXN0Q29udHJpYnV0b3IgewogICAgYm9vbCBpc0FjdGl2ZTsKICAgIHVpbnQgaW52QW1vdW50OwogICAgdWludDggaG9sZFBlcmlvZDsKICAgIHVpbnQgaG9sZFRpbWVzdGFtcDsKICAgIHVpbnQ4IGJvbnVzOwogICAgYm9vbCBwYXllZDsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiBXaGl0ZWxpc3RDb250cmlidXRvcikgcHVibGljIHdoaXRlTGlzdDsKICBtYXBwaW5nKHVpbnQgPT4gYWRkcmVzcykgcHJpdmF0ZSB3aGl0ZWxpc3RJbmRleGVzOwogIHVpbnQgcHJpdmF0ZSB3aGl0ZWxpc3RJbmRleDsKCiAgLyogY29uc3RydWN0b3IgKi8KICBmdW5jdGlvbiBPcHBvcnR5UHJlc2FsZSgKICAgIGFkZHJlc3MgdG9rZW5BZGRyZXNzLAogICAgYWRkcmVzcyB3YWxsZXRBZGRyZXNzLAogICAgdWludCBlbmQsCiAgICB1aW50IGVuZFNhbGUsCiAgICBhZGRyZXNzIGhvbGRDb250ICkKICB7CiAgICB0b2tlbiA9IE9wcG9ydHlUb2tlbih0b2tlbkFkZHJlc3MpOwogICAgc3RhdGUgPSBTYWxlU3RhdGUuTkVXOwoKICAgIGVuZERhdGUgICAgID0gZW5kOwogICAgZW5kU2FsZURhdGUgPSBlbmRTYWxlOwogICAgcHJpY2UgICAgICAgPSAwLjAwMDIgKiAxIGV0aGVyOwogICAgd2FsbGV0ICAgICAgPSB3YWxsZXRBZGRyZXNzOwoKICAgIGhvbGRDb250cmFjdCA9IEhvbGRQcmVzYWxlQ29udHJhY3QoaG9sZENvbnQpOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRQcmVzYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5ORVcpOwogICAgc3RhdGUgPSBTYWxlU3RhdGUuU0FMRTsKICAgIFNhbGVTdGFydGVkKGJsb2NrLm51bWJlcik7CiAgfQoKICBmdW5jdGlvbiBlbmRQcmVzYWxlKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5TQUxFKTsKICAgIHN0YXRlID0gU2FsZVN0YXRlLkVOREVEOwogICAgU2FsZUVuZGVkKGJsb2NrLm51bWJlcik7CiAgfQoKICBmdW5jdGlvbiBhZGRUb1doaXRlbGlzdChhZGRyZXNzIGludiwgdWludCBhbW91bnQsIHVpbnQ4IGhvbGRQZXJpb2QsIHVpbnQ4IGJvbnVzKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLk5FVyB8fCBzdGF0ZSA9PSBTYWxlU3RhdGUuU0FMRSk7CiAgICByZXF1aXJlKGhvbGRQZXJpb2QgPT0gMSB8fCBob2xkUGVyaW9kID09IDMgfHwgaG9sZFBlcmlvZCA9PSA2IHx8IGhvbGRQZXJpb2QgPT0gMTIpOwoKICAgIGFtb3VudCA9IGFtb3VudCAqICgxMCAqKiAxOCk7CgogICAgaWYgKHdoaXRlTGlzdFtpbnZdLmlzQWN0aXZlID09IGZhbHNlKSB7CiAgICAgIHdoaXRlTGlzdFtpbnZdLmlzQWN0aXZlID0gdHJ1ZTsKICAgICAgd2hpdGVMaXN0W2ludl0ucGF5ZWQgICAgPSBmYWxzZTsKICAgICAgd2hpdGVsaXN0SW5kZXhlc1t3aGl0ZWxpc3RJbmRleF0gPSBpbnY7CiAgICAgIHdoaXRlbGlzdEluZGV4Kys7CiAgICB9CgogICAgd2hpdGVMaXN0W2ludl0uaW52QW1vdW50ICA9IGFtb3VudDsKICAgIHdoaXRlTGlzdFtpbnZdLmhvbGRQZXJpb2QgPSBob2xkUGVyaW9kOwogICAgd2hpdGVMaXN0W2ludl0uYm9udXMgPSBib251czsKCiAgICBpZiAod2hpdGVMaXN0W2ludl0uaG9sZFBlcmlvZD09MSkgIHdoaXRlTGlzdFtpbnZdLmhvbGRUaW1lc3RhbXAgPSBlbmRTYWxlRGF0ZS5hZGQoMzAgZGF5cyk7IGVsc2UKICAgIGlmICh3aGl0ZUxpc3RbaW52XS5ob2xkUGVyaW9kPT0zKSAgd2hpdGVMaXN0W2ludl0uaG9sZFRpbWVzdGFtcCA9IGVuZFNhbGVEYXRlLmFkZCg5MiBkYXlzKTsgZWxzZQogICAgaWYgKHdoaXRlTGlzdFtpbnZdLmhvbGRQZXJpb2Q9PTYpICB3aGl0ZUxpc3RbaW52XS5ob2xkVGltZXN0YW1wID0gZW5kU2FsZURhdGUuYWRkKDE4MiBkYXlzKTsgZWxzZQogICAgaWYgKHdoaXRlTGlzdFtpbnZdLmhvbGRQZXJpb2Q9PTEyKSB3aGl0ZUxpc3RbaW52XS5ob2xkVGltZXN0YW1wID0gZW5kU2FsZURhdGUuYWRkKDEgeWVhcnMpOwoKICAgIEFkZGVkVG9XaGl0ZUxpc3QoaW52LCB3aGl0ZUxpc3RbaW52XS5pbnZBbW91bnQsIHdoaXRlTGlzdFtpbnZdLmhvbGRQZXJpb2QsICB3aGl0ZUxpc3RbaW52XS5ib251cyk7CiAgfQoKICBmdW5jdGlvbigpIHdoZW5Ob3RQYXVzZWQgcHVibGljIHBheWFibGUgewogICAgcmVxdWlyZShzdGF0ZSA9PSBTYWxlU3RhdGUuU0FMRSk7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAwLjMgZXRoZXIpOwogICAgcmVxdWlyZSh3aGl0ZUxpc3RbbXNnLnNlbmRlcl0uaXNBY3RpdmUpOwoKICAgIGlmIChub3cgPiBlbmREYXRlKSB7CiAgICAgIHN0YXRlID0gU2FsZVN0YXRlLkVOREVEOwogICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgICAgIHJldHVybiA7CiAgICB9CgogICAgV2hpdGVsaXN0Q29udHJpYnV0b3IgbWVtb3J5IGNvbnRyaWIgPSB3aGl0ZUxpc3RbbXNnLnNlbmRlcl07CiAgICByZXF1aXJlKGNvbnRyaWIuaW52QW1vdW50IDw9IG1zZy52YWx1ZSB8fCBjb250cmliLnBheWVkKTsKCiAgICBpZih3aGl0ZUxpc3RbbXNnLnNlbmRlcl0ucGF5ZWQgPT0gZmFsc2UpIHsKICAgICAgd2hpdGVMaXN0W21zZy5zZW5kZXJdLnBheWVkID0gdHJ1ZTsKICAgIH0KCiAgICBldGhSYWlzZWQgKz0gbXNnLnZhbHVlOwoKICAgIHVpbnQgdG9rZW5BbW91bnQgID0gbXNnLnZhbHVlLmRpdihwcmljZSk7CiAgICB0b2tlbkFtb3VudCArPSB0b2tlbkFtb3VudC5tdWwoY29udHJpYi5ib251cykuZGl2KDEwMCk7CiAgICB0b2tlbkFtb3VudCAqPSAxMCAqKiAxODsKCiAgICB0b2tlblJhaXNlZCArPSB0b2tlbkFtb3VudDsKCiAgICBob2xkQ29udHJhY3QuYWRkSG9sZGVyKG1zZy5zZW5kZXIsIHRva2VuQW1vdW50LCBjb250cmliLmhvbGRQZXJpb2QsIGNvbnRyaWIuaG9sZFRpbWVzdGFtcCk7CiAgICBBZGRlZFRvSG9sZGVyKG1zZy5zZW5kZXIsIHRva2VuQW1vdW50LCBjb250cmliLmhvbGRQZXJpb2QsIGNvbnRyaWIuaG9sZFRpbWVzdGFtcCk7CiAgICBGdW5kVHJhbnNmZXJlZChtc2cuc2VuZGVyLCBtc2cudmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gZ2V0QmFsYW5jZUNvbnRyYWN0KCkgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgcmV0dXJuIHRva2VuLmJhbGFuY2VPZih0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHNlbmRUb2tlbnNUb0hvbGQoKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLkVOREVEKTsKCiAgICByZXF1aXJlKGdldEJhbGFuY2VDb250cmFjdCgpID49IHRva2VuUmFpc2VkKTsKCiAgICBpZiAodG9rZW4udHJhbnNmZXIoaG9sZENvbnRyYWN0LCB0b2tlblJhaXNlZCApKSB7CiAgICAgIHRva2Vuc1RyYW5zZmVycmVkVG9Ib2xkID0gdHJ1ZTsKICAgICAgVG9rZW5zVHJhbnNmZXJlZFRvSG9sZChob2xkQ29udHJhY3QsIHRva2VuUmFpc2VkICk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnZXRUb2tlbnNCYWNrKCkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5FTkRFRCk7CiAgICByZXF1aXJlKHRva2Vuc1RyYW5zZmVycmVkVG9Ib2xkID09IHRydWUpOwogICAgdWludCBiYWxhbmNlOwogICAgYmFsYW5jZSA9IGdldEJhbGFuY2VDb250cmFjdCgpIDsKICAgIHRva2VuLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdFdGgoKSB7CiAgICByZXF1aXJlKHRoaXMuYmFsYW5jZSAhPSAwKTsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLkVOREVEKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSB3YWxsZXQpOwogICAgcmVxdWlyZSh0b2tlbnNUcmFuc2ZlcnJlZFRvSG9sZCA9PSB0cnVlKTsKICAgIHVpbnQgYmFsID0gdGhpcy5iYWxhbmNlOwogICAgd2FsbGV0LnRyYW5zZmVyKGJhbCk7CiAgICBXaXRoZHJhd2VkRXRoVG9XYWxsZXQoYmFsKTsKICB9CgogIGZ1bmN0aW9uIHNldEVuZFNhbGVEYXRlKHVpbnQgZGF0ZSkgcHVibGljIG9ubHlPd25lciB7CiAgICByZXF1aXJlKHN0YXRlID09IFNhbGVTdGF0ZS5ORVcpOwogICAgcmVxdWlyZShkYXRlID4gbm93KTsKICAgIHVpbnQgb2xkRW5kRGF0ZSA9IGVuZFNhbGVEYXRlOwogICAgZW5kU2FsZURhdGUgPSBkYXRlOwogICAgTWFudWFsQ2hhbmdlRW5kRGF0ZShvbGRFbmREYXRlLCBkYXRlKTsKICB9CgogIGZ1bmN0aW9uIHNldEVuZERhdGUodWludCBkYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUoc3RhdGUgPT0gU2FsZVN0YXRlLk5FVyB8fCBzdGF0ZSA9PSBTYWxlU3RhdGUuU0FMRSk7CiAgICByZXF1aXJlKGRhdGUgPiBub3cpOwogICAgdWludCBvbGRFbmREYXRlID0gZW5kRGF0ZTsKICAgIGVuZERhdGUgPSBkYXRlOwogICAgTWFudWFsQ2hhbmdlRW5kRGF0ZShvbGRFbmREYXRlLCBkYXRlKTsKICB9CgogIGZ1bmN0aW9uIGdldFRva2VuQmFsYW5jZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHJldHVybiB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgfQoKICBmdW5jdGlvbiBnZXRFdGhSYWlzZWQoKSBjb25zdGFudCBleHRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gZXRoUmFpc2VkOwogIH0KfQ=='.
	

]
