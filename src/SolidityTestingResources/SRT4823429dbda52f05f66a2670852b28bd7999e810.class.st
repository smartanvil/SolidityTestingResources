Class {
	#name : #SRT4823429dbda52f05f66a2670852b28bd7999e810,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT4823429dbda52f05f66a2670852b28bd7999e810 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKLy8+PiBSZWZlcmVuY2UgdG8gaHR0cHM6Ly9naXRodWIuY29tL0FyYWNobmlkL3NvbGlkaXR5LXN0cmluZ3V0aWxzCgpsaWJyYXJ5IHN0cmluZ3MgewogICAgc3RydWN0IHNsaWNlIHsKICAgICAgICB1aW50IF9sZW47CiAgICAgICAgdWludCBfcHRyOwogICAgfQogICAgCiAgICAvKgogICAgICogQGRldiBSZXR1cm5zIGEgc2xpY2UgY29udGFpbmluZyB0aGUgZW50aXJlIHN0cmluZy4KICAgICAqIEBwYXJhbSBzZWxmIFRoZSBzdHJpbmcgdG8gbWFrZSBhIHNsaWNlIGZyb20uCiAgICAgKiBAcmV0dXJuIEEgbmV3bHkgYWxsb2NhdGVkIHNsaWNlIGNvbnRhaW5pbmcgdGhlIGVudGlyZSBzdHJpbmcuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRvU2xpY2Uoc3RyaW5nIHNlbGYpIGludGVybmFsIHB1cmUgcmV0dXJucyAoc2xpY2UpIHsKICAgICAgICB1aW50IHB0cjsKICAgICAgICBhc3NlbWJseSB7CiAgICAgICAgICAgIHB0ciA6PSBhZGQoc2VsZiwgMHgyMCkKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNsaWNlKGJ5dGVzKHNlbGYpLmxlbmd0aCwgcHRyKTsKICAgIH0KICAgIAogICAgLyoKICAgICAqIEBkZXYgUmV0dXJucyB0cnVlIGlmIHRoZSBzbGljZSBpcyBlbXB0eSAoaGFzIGEgbGVuZ3RoIG9mIDApLgogICAgICogQHBhcmFtIHNlbGYgVGhlIHNsaWNlIHRvIG9wZXJhdGUgb24uCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHNsaWNlIGlzIGVtcHR5LCBGYWxzZSBvdGhlcndpc2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVtcHR5KHNsaWNlIHNlbGYpIGludGVybmFsIHB1cmUgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBzZWxmLl9sZW4gPT0gMDsKICAgIH0KfQoKLy88PCBSZWZlcmVuY2UgdG8gaHR0cHM6Ly9naXRodWIuY29tL0FyYWNobmlkL3NvbGlkaXR5LXN0cmluZ3V0aWxzCgoKCgovLz4+IFJlZmVyZW5jZSB0byBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKCi8qKgogKiBAdGl0bGUgRVJDMjBCYXNpYwogKiBAZGV2IFNpbXBsZXIgdmVyc2lvbiBvZiBFUkMyMCBpbnRlcmZhY2UKICogQGRldiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzE3OQogKi8KY29udHJhY3QgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KCgovKioKICogQHRpdGxlIFNhZmVFUkMyMAogKiBAZGV2IFdyYXBwZXJzIGFyb3VuZCBFUkMyMCBvcGVyYXRpb25zIHRoYXQgdGhyb3cgb24gZmFpbHVyZS4KICogVG8gdXNlIHRoaXMgbGlicmFyeSB5b3UgY2FuIGFkZCBhIGB1c2luZyBTYWZlRVJDMjAgZm9yIEVSQzIwO2Agc3RhdGVtZW50IHRvIHlvdXIgY29udHJhY3QsCiAqIHdoaWNoIGFsbG93cyB5b3UgdG8gY2FsbCB0aGUgc2FmZSBvcGVyYXRpb25zIGFzIGB0b2tlbi5zYWZlVHJhbnNmZXIoLi4uKWAsIGV0Yy4KICovCmxpYnJhcnkgU2FmZUVSQzIwIHsKICBmdW5jdGlvbiBzYWZlVHJhbnNmZXIoRVJDMjBCYXNpYyB0b2tlbiwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLnRyYW5zZmVyKHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyRnJvbShFUkMyMCB0b2tlbiwgYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICBhc3NlcnQodG9rZW4udHJhbnNmZXJGcm9tKGZyb20sIHRvLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFwcHJvdmUoRVJDMjAgdG9rZW4sIGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgaW50ZXJuYWwgewogICAgYXNzZXJ0KHRva2VuLmFwcHJvdmUoc3BlbmRlciwgdmFsdWUpKTsKICB9Cn0KCgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIHVpbnQyNTYgdG90YWxTdXBwbHlfOwoKICAvKioKICAqIEBkZXYgdG90YWwgbnVtYmVyIG9mIHRva2VucyBpbiBleGlzdGVuY2UKICAqLwogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIHRvdGFsU3VwcGx5XzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogQGRldiBJbmNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9hZGRlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGluY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXS5hZGQoX2FkZGVkVmFsdWUpOwogICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBEZWNyZWFzZSB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zdWJ0cmFjdGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gZGVjcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKi8KICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKCi8qKgogICBAdGl0bGUgRVJDODI3IGludGVyZmFjZSwgYW4gZXh0ZW5zaW9uIG9mIEVSQzIwIHRva2VuIHN0YW5kYXJkCiAgIEludGVyZmFjZSBvZiBhIEVSQzgyNyB0b2tlbiwgZm9sbG93aW5nIHRoZSBFUkMyMCBzdGFuZGFyZCB3aXRoIGV4dHJhCiAgIG1ldGhvZHMgdG8gdHJhbnNmZXIgdmFsdWUgYW5kIGRhdGEgYW5kIGV4ZWN1dGUgY2FsbHMgaW4gdHJhbnNmZXJzIGFuZAogICBhcHByb3ZhbHMuCiAqLwpjb250cmFjdCBFUkM4MjcgaXMgRVJDMjAgewoKICBmdW5jdGlvbiBhcHByb3ZlKCBhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXIoIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEgKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKCBhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhICkgcHVibGljIHJldHVybnMgKGJvb2wpOwoKfQoKCi8qKgogICBAdGl0bGUgRVJDODI3LCBhbiBleHRlbnNpb24gb2YgRVJDMjAgdG9rZW4gc3RhbmRhcmQKICAgSW1wbGVtZW50YXRpb24gdGhlIEVSQzgyNywgZm9sbG93aW5nIHRoZSBFUkMyMCBzdGFuZGFyZCB3aXRoIGV4dHJhCiAgIG1ldGhvZHMgdG8gdHJhbnNmZXIgdmFsdWUgYW5kIGRhdGEgYW5kIGV4ZWN1dGUgY2FsbHMgaW4gdHJhbnNmZXJzIGFuZAogICBhcHByb3ZhbHMuCiAgIFVzZXMgT3BlblplcHBlbGluIFN0YW5kYXJkVG9rZW4uCiAqLwpjb250cmFjdCBFUkM4MjdUb2tlbiBpcyBFUkM4MjcsIFN0YW5kYXJkVG9rZW4gewoKICAvKioKICAgICBAZGV2IEFkZGl0aW9uIHRvIEVSQzIwIHRva2VuIG1ldGhvZHMuIEl0IGFsbG93cyB0bwogICAgIGFwcHJvdmUgdGhlIHRyYW5zZmVyIG9mIHZhbHVlIGFuZCBleGVjdXRlIGEgY2FsbCB3aXRoIHRoZSBzZW50IGRhdGEuCiAgICAgQmV3YXJlIHRoYXQgY2hhbmdpbmcgYW4gYWxsb3dhbmNlIHdpdGggdGhpcyBtZXRob2QgYnJpbmdzIHRoZSByaXNrIHRoYXQKICAgICBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkIGFuZCB0aGUgbmV3IGFsbG93YW5jZSBieSB1bmZvcnR1bmF0ZQogICAgIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcyByYWNlIGNvbmRpdGlvbgogICAgIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUKICAgICBhZnRlcndhcmRzOgogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMCNpc3N1ZWNvbW1lbnQtMjYzNTI0NzI5CiAgICAgQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICAgQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBzcGVudC4KICAgICBAcGFyYW0gX2RhdGEgQUJJLWVuY29kZWQgY29udHJhY3QgY2FsbCB0byBjYWxsIGBfdG9gIGFkZHJlc3MuCiAgICAgQHJldHVybiB0cnVlIGlmIHRoZSBjYWxsIGZ1bmN0aW9uIHdhcyBleGVjdXRlZCBzdWNjZXNzZnVsbHkKICAgKi8KICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3NwZW5kZXIgIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKCiAgICByZXF1aXJlKF9zcGVuZGVyLmNhbGwoX2RhdGEpKTsKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAgIEBkZXYgQWRkaXRpb24gdG8gRVJDMjAgdG9rZW4gbWV0aG9kcy4gVHJhbnNmZXIgdG9rZW5zIHRvIGEgc3BlY2lmaWVkCiAgICAgYWRkcmVzcyBhbmQgZXhlY3V0ZSBhIGNhbGwgd2l0aCB0aGUgc2VudCBkYXRhIG9uIHRoZSBzYW1lIHRyYW5zYWN0aW9uCiAgICAgQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICAgQHBhcmFtIF92YWx1ZSB1aW50MjU2IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAgIEBwYXJhbSBfZGF0YSBBQkktZW5jb2RlZCBjb250cmFjdCBjYWxsIHRvIGNhbGwgYF90b2AgYWRkcmVzcy4KICAgICBAcmV0dXJuIHRydWUgaWYgdGhlIGNhbGwgZnVuY3Rpb24gd2FzIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseQogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKCiAgICBzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSk7CgogICAgcmVxdWlyZShfdG8uY2FsbChfZGF0YSkpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgICBAZGV2IEFkZGl0aW9uIHRvIEVSQzIwIHRva2VuIG1ldGhvZHMuIFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvCiAgICAgYW5vdGhlciBhbmQgbWFrZSBhIGNvbnRyYWN0IGNhbGwgb24gdGhlIHNhbWUgdHJhbnNhY3Rpb24KICAgICBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAgIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgICBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJyZWQKICAgICBAcGFyYW0gX2RhdGEgQUJJLWVuY29kZWQgY29udHJhY3QgY2FsbCB0byBjYWxsIGBfdG9gIGFkZHJlc3MuCiAgICAgQHJldHVybiB0cnVlIGlmIHRoZSBjYWxsIGZ1bmN0aW9uIHdhcyBleGVjdXRlZCBzdWNjZXNzZnVsbHkKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwoKICAgIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwoKICAgIHJlcXVpcmUoX3RvLmNhbGwoX2RhdGEpKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBZGRpdGlvbiB0byBTdGFuZGFyZFRva2VuIG1ldGhvZHMuIEluY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQKICAgKiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlciBhbmQgZXhlY3V0ZSBhIGNhbGwgd2l0aCB0aGUgc2VudCBkYXRhLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9hZGRlZFZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGluY3JlYXNlIHRoZSBhbGxvd2FuY2UgYnkuCiAgICogQHBhcmFtIF9kYXRhIEFCSS1lbmNvZGVkIGNvbnRyYWN0IGNhbGwgdG8gY2FsbCBgX3NwZW5kZXJgIGFkZHJlc3MuCiAgICovCiAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3NwZW5kZXIgIT0gYWRkcmVzcyh0aGlzKSk7CgogICAgc3VwZXIuaW5jcmVhc2VBcHByb3ZhbChfc3BlbmRlciwgX2FkZGVkVmFsdWUpOwoKICAgIHJlcXVpcmUoX3NwZW5kZXIuY2FsbChfZGF0YSkpOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBZGRpdGlvbiB0byBTdGFuZGFyZFRva2VuIG1ldGhvZHMuIERlY3JlYXNlIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQKICAgKiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlciBhbmQgZXhlY3V0ZSBhIGNhbGwgd2l0aCB0aGUgc2VudCBkYXRhLgogICAqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gZGVjcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKiBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zdWJ0cmFjdGVkVmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gZGVjcmVhc2UgdGhlIGFsbG93YW5jZSBieS4KICAgKiBAcGFyYW0gX2RhdGEgQUJJLWVuY29kZWQgY29udHJhY3QgY2FsbCB0byBjYWxsIGBfc3BlbmRlcmAgYWRkcmVzcy4KICAgKi8KICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF9zcGVuZGVyICE9IGFkZHJlc3ModGhpcykpOwoKICAgIHN1cGVyLmRlY3JlYXNlQXBwcm92YWwoX3NwZW5kZXIsIF9zdWJ0cmFjdGVkVmFsdWUpOwoKICAgIHJlcXVpcmUoX3NwZW5kZXIuY2FsbChfZGF0YSkpOwoKICAgIHJldHVybiB0cnVlOwogIH0KCn0KCi8vPDwgUmVmZXJlbmNlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkKCgoKCi8qKgogKiBAdGl0bGUgTXVsdGlPd25hYmxlCiAqLwpjb250cmFjdCBNdWx0aU93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgcm9vdDsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYWRkcmVzcykgcHVibGljIG93bmVyczsgLy8gb3duZXIgPT4gcGFyZW50IG9mIG93bmVyCiAgICAKICAgIC8qKgogICAgKiBAZGV2IFRoZSBPd25hYmxlIGNvbnN0cnVjdG9yIHNldHMgdGhlIG9yaWdpbmFsIGBvd25lcmAgb2YgdGhlIGNvbnRyYWN0IHRvIHRoZSBzZW5kZXIKICAgICogYWNjb3VudC4KICAgICovCiAgICBmdW5jdGlvbiBNdWx0aU93bmFibGUoKSBwdWJsaWMgewogICAgICAgIHJvb3Q9IG1zZy5zZW5kZXI7CiAgICAgICAgb3duZXJzW3Jvb3RdPSByb290OwogICAgfQogICAgCiAgICAvKioKICAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAgKi8KICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG93bmVyc1ttc2cuc2VuZGVyXSAhPSAwKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvKioKICAgICogQGRldiBBZGRpbmcgbmV3IG93bmVycwogICAgKi8KICAgIGZ1bmN0aW9uIG5ld093bmVyKGFkZHJlc3MgX293bmVyKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF9vd25lciAhPSAwKTsKICAgICAgICBvd25lcnNbX293bmVyXT0gbXNnLnNlbmRlcjsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAZGV2IERlbGV0aW5nIG93bmVycwogICAgICovCiAgICBmdW5jdGlvbiBkZWxldGVPd25lcihhZGRyZXNzIF9vd25lcikgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShvd25lcnNbX293bmVyXSA9PSBtc2cuc2VuZGVyIHx8IChvd25lcnNbX293bmVyXSAhPSAwICYmIG1zZy5zZW5kZXIgPT0gcm9vdCkpOwogICAgICAgIG93bmVyc1tfb3duZXJdPSAwOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgoKLyoqCiAqIEB0aXRsZSBLU3RhckNvaW5CYXNpYwogKi8KY29udHJhY3QgS1N0YXJDb2luQmFzaWMgaXMgRVJDODI3VG9rZW4sIE11bHRpT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIHVzaW5nIFNhZmVFUkMyMCBmb3IgRVJDMjBCYXNpYzsKICAgIHVzaW5nIHN0cmluZ3MgZm9yICo7CgogICAgLy8gS1N0YXJDb2luIERpc3RyaWJ1dGlvbgogICAgLy8gLSBDcm93ZHNhbGUgOiA5JShzb2Z0Y2FwKSB+IDQ1JShoYXJkY2FwKQogICAgLy8gLSBSZXNlcnZlOiAxNSUKICAgIC8vIC0gVGVhbTogMTAlCiAgICAvLyAtIEFkdmlzb3JzICYgUGFydG5lcnM6IDUlCiAgICAvLyAtIEJvdW50eSBQcm9ncmFtICsgRWNvc3lzdGVtIDogMjUlIH4gNjElCiAgICB1aW50MjU2IHB1YmxpYyBjYXBPZlRvdGFsU3VwcGx5OwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFk9IDMwZTYgKiAxIGV0aGVyOyAvLyBSZXNlcnZlKDE1KSArIFRlYW0oMTApICsgQWR2aXNvcnMmUGF0bmVycyg1KQoKICAgIHVpbnQyNTYgcHVibGljIGNyb3dkc2FsZVJhaXNlZDsKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IENST1dEU0FMRV9IQVJEQ0FQPSA0NWU2ICogMSBldGhlcjsgLy8gQ3Jvd2RzYWxlKE1heCA0NSkKCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gaW5jcmVhc2UgY2FwT2ZUb3RhbFN1cHBseSBpbiB0aGUgbmV4dCBwaGFzZSBvZiBLU3RhckNvaW4ncyBlY29zeXN0ZW0KICAgICAqLwogICAgZnVuY3Rpb24gaW5jcmVhc2VDYXAodWludDI1NiBfYWRkZWRWYWx1ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfYWRkZWRWYWx1ZSA+PSAxMDBlNiAqIDEgZXRoZXIpOwogICAgICAgIGNhcE9mVG90YWxTdXBwbHkgPSBjYXBPZlRvdGFsU3VwcGx5LmFkZChfYWRkZWRWYWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN1cHBseSBleGNlZWRzIGNhcE9mVG90YWxTdXBwbHkKICAgICAqLwogICAgZnVuY3Rpb24gY2hlY2tDYXAodWludDI1NiBfYW1vdW50KSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuICh0b3RhbFN1cHBseV8uYWRkKF9hbW91bnQpIDw9IGNhcE9mVG90YWxTdXBwbHkpOwogICAgfQogICAgCiAgICAvLz4gZm9yIEVSQzIwCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSkpOwogICAgICAgIEtTQ19TZW5kKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCAiIik7CiAgICAgICAgS1NDX1JlY2VpdmUoX3RvLCBtc2cuc2VuZGVyLCBfdmFsdWUsICIiKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpKTsKICAgICAgICBLU0NfU2VuZFRvKF9mcm9tLCBfdG8sIF92YWx1ZSwgIiIpOwogICAgICAgIEtTQ19SZWNlaXZlRnJvbShfdG8sIF9mcm9tLCBfdmFsdWUsICIiKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShzdXBlci5hcHByb3ZlKF90bywgX3ZhbHVlKSk7CiAgICAgICAgS1NDX0FwcHJvdmUobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsICIiKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLy8gYWRkaXRpb25hbCBTdGFuZGFyZFRva2VuIG1ldGhvZCBvZiB6ZXBwZWxpbi1zb2xpZGl0eQogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF90bywgdWludCBfYWRkZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLmluY3JlYXNlQXBwcm92YWwoX3RvLCBfYWRkZWRWYWx1ZSkpOwogICAgICAgIEtTQ19BcHByb3ZhbEluYyhtc2cuc2VuZGVyLCBfdG8sIF9hZGRlZFZhbHVlLCAiIik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIGFkZGl0aW9uYWwgU3RhbmRhcmRUb2tlbiBtZXRob2Qgb2YgemVwcGVsaW4tc29saWRpdHkKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfdG8sIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLmRlY3JlYXNlQXBwcm92YWwoX3RvLCBfc3VidHJhY3RlZFZhbHVlKSk7CiAgICAgICAgS1NDX0FwcHJvdmFsRGVjKG1zZy5zZW5kZXIsIF90bywgX3N1YnRyYWN0ZWRWYWx1ZSwgIiIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoJLy88CiAgICAKICAgIC8vPiBmb3IgRVJDODI3CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiB0cmFuc2ZlcihfdG8sIF92YWx1ZSwgX2RhdGEsICIiKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUsIF9kYXRhLCAiIik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYXBwcm92ZShfdG8sIF92YWx1ZSwgX2RhdGEsICIiKTsKICAgIH0KICAgIAogICAgLy8gYWRkaXRpb25hbCBTdGFuZGFyZFRva2VuIG1ldGhvZCBvZiB6ZXBwZWxpbi1zb2xpZGl0eQogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF90bywgdWludCBfYWRkZWRWYWx1ZSwgYnl0ZXMgX2RhdGEpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGluY3JlYXNlQXBwcm92YWwoX3RvLCBfYWRkZWRWYWx1ZSwgX2RhdGEsICIiKTsKICAgIH0KICAgIAogICAgLy8gYWRkaXRpb25hbCBTdGFuZGFyZFRva2VuIG1ldGhvZCBvZiB6ZXBwZWxpbi1zb2xpZGl0eQogICAgZnVuY3Rpb24gZGVjcmVhc2VBcHByb3ZhbChhZGRyZXNzIF90bywgdWludCBfc3VidHJhY3RlZFZhbHVlLCBieXRlcyBfZGF0YSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gZGVjcmVhc2VBcHByb3ZhbChfdG8sIF9zdWJ0cmFjdGVkVmFsdWUsIF9kYXRhLCAiIik7CiAgICB9CgkvLzwKICAgIAogICAgLy8+IG5vdGF0aW9uIGZvciBFUkM4MjcKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfbm90ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlLCBfZGF0YSkpOwogICAgICAgIEtTQ19TZW5kKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfbm90ZSk7CiAgICAgICAgS1NDX1JlY2VpdmUoX3RvLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9ub3RlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfbm90ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUsIF9kYXRhKSk7CiAgICAgICAgS1NDX1NlbmRUbyhfZnJvbSwgX3RvLCBfdmFsdWUsIF9ub3RlKTsKICAgICAgICBLU0NfUmVjZWl2ZUZyb20oX3RvLCBfZnJvbSwgX3ZhbHVlLCBfbm90ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9ub3RlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoc3VwZXIuYXBwcm92ZShfdG8sIF92YWx1ZSwgX2RhdGEpKTsKICAgICAgICBLU0NfQXBwcm92ZShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX25vdGUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3RvLCB1aW50IF9hZGRlZFZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9ub3RlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoc3VwZXIuaW5jcmVhc2VBcHByb3ZhbChfdG8sIF9hZGRlZFZhbHVlLCBfZGF0YSkpOwogICAgICAgIEtTQ19BcHByb3ZhbEluYyhtc2cuc2VuZGVyLCBfdG8sIF9hZGRlZFZhbHVlLCBfbm90ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfdG8sIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSwgYnl0ZXMgX2RhdGEsIHN0cmluZyBfbm90ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKHN1cGVyLmRlY3JlYXNlQXBwcm92YWwoX3RvLCBfc3VidHJhY3RlZFZhbHVlLCBfZGF0YSkpOwogICAgICAgIEtTQ19BcHByb3ZhbERlYyhtc2cuc2VuZGVyLCBfdG8sIF9zdWJ0cmFjdGVkVmFsdWUsIF9ub3RlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCS8vPAogICAgICAKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IGNvaW5zCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBtaW50ZWQgY29pbnMuCiAgICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIGNvaW5zIHRvIG1pbnQuCiAgICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAgICogQGRldiByZWZlcmVuY2UgOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy90b2tlbi9FUkMyMC9NaW50YWJsZVRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBtaW50KGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShjaGVja0NhcChfYW1vdW50KSk7CgogICAgICAgIHRvdGFsU3VwcGx5Xz0gdG90YWxTdXBwbHlfLmFkZChfYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tfdG9dPSBiYWxhbmNlc1tfdG9dLmFkZChfYW1vdW50KTsKCiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgY29pbnMKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCBjb2lucy4KICAgICAqIEBwYXJhbSBfYW1vdW50IFRoZSBhbW91bnQgb2YgY29pbnMgdG8gbWludC4KICAgICAqIEBwYXJhbSBfbm90ZSBUaGUgbm90YXRpb24gZm9yIGV0aGVyZXVtIGJsb2NrY2hhaW4gZXZlbnQgbG9nIHN5c3RlbQogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqIEBkZXYgcmVmZXJlbmNlIDogaHR0cHM6Ly9naXRodWIuY29tL09wZW5aZXBwZWxpbi96ZXBwZWxpbi1zb2xpZGl0eS9ibG9iL21hc3Rlci9jb250cmFjdHMvdG9rZW4vRVJDMjAvTWludGFibGVUb2tlbi5zb2wKICAgICAqLwogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50LCBzdHJpbmcgX25vdGUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobWludChfdG8sIF9hbW91bnQpKTsKICAgICAgICBLU0NfTWludChfdG8sIG1zZy5zZW5kZXIsIF9hbW91bnQsIF9ub3RlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgY29pbnMuCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBiZSBidXJuZWQgdGhlIGNvaW5zLgogICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiBjb2lucyB0byBiZSBidXJuZWQuCiAgICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAgICogQGRldiByZWZlcmVuY2UgOiBodHRwczovL2dpdGh1Yi5jb20vT3BlblplcHBlbGluL3plcHBlbGluLXNvbGlkaXR5L2Jsb2IvbWFzdGVyL2NvbnRyYWN0cy90b2tlbi9FUkMyMC9CdXJuYWJsZVRva2VuLnNvbAogICAgICovCiAgICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpIG9ubHlPd25lciBpbnRlcm5hbCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfYW1vdW50IDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbX3RvXT0gYmFsYW5jZXNbX3RvXS5zdWIoX2Ftb3VudCk7CiAgICAgICAgdG90YWxTdXBwbHlfPSB0b3RhbFN1cHBseV8uc3ViKF9hbW91bnQpOwogICAgICAgIAogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEBkZXYgQnVybnMgYSBzcGVjaWZpYyBhbW91bnQgb2YgY29pbnMuCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCBiZSBidXJuZWQgdGhlIGNvaW5zLgogICAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiBjb2lucyB0byBiZSBidXJuZWQuCiAgICAgKiBAcGFyYW0gX25vdGUgVGhlIG5vdGF0aW9uIGZvciBldGhlcmV1bSBibG9ja2NoYWluIGV2ZW50IGxvZyBzeXN0ZW0KICAgICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAgKiBAZGV2IHJlZmVyZW5jZSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuWmVwcGVsaW4vemVwcGVsaW4tc29saWRpdHkvYmxvYi9tYXN0ZXIvY29udHJhY3RzL3Rva2VuL0VSQzIwL0J1cm5hYmxlVG9rZW4uc29sCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJ1cm4oYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCwgc3RyaW5nIF9ub3RlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKGJ1cm4oX3RvLCBfYW1vdW50KSk7CiAgICAgICAgS1NDX0J1cm4oX3RvLCBtc2cuc2VuZGVyLCBfYW1vdW50LCBfbm90ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIGZvciBjcm93ZHNhbGUKICAgIC8qKgogICAgICogQGRldiBGdW5jdGlvbiB3aGljaCBhbGxvd3MgdXNlcnMgdG8gYnV5IEtTdGFyQ29pbiBkdXJpbmcgdGhlIGNyb3dkc2FsZSBwZXJpb2QKICAgICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIGNvaW5zLgogICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIGNvaW5zIHRvIHNlbGwuCiAgICAgKiBAcGFyYW0gX25vdGUgVGhlIG5vdGF0aW9uIGZvciBldGhlcmV1bSBibG9ja2NoYWluIGV2ZW50IGxvZyBzeXN0ZW0KICAgICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHNlbGwoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUoY3Jvd2RzYWxlUmFpc2VkLmFkZChfdmFsdWUpIDw9IENST1dEU0FMRV9IQVJEQ0FQKTsKICAgICAgICByZXF1aXJlKG1pbnQoX3RvLCBfdmFsdWUpKTsKICAgICAgICAKICAgICAgICBjcm93ZHNhbGVSYWlzZWQ9IGNyb3dkc2FsZVJhaXNlZC5hZGQoX3ZhbHVlKTsKICAgICAgICBLU0NfQnV5KF90bywgbXNnLnNlbmRlciwgX3ZhbHVlLCBfbm90ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIC8vIGZvciBidXllciB3aXRoIGNyeXB0b2N1cnJlbmN5IG90aGVyIHRoYW4gRVRICiAgICAvKioKICAgICAqIEBkZXYgVGhpcyBmdW5jdGlvbiBpcyBvY2N1cmVkIHdoZW4gb3duZXIgbWludCBjb2lucyB0byB1c2VycyBhcyB0aGV5IGJ1eSB3aXRoIGNyeXB0b2N1cnJlbmN5IG90aGVyIHRoYW4gRVRILgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgY29pbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgY29pbnMgdG8gbWludC4KICAgICAqIEBwYXJhbSBfbm90ZSBUaGUgbm90YXRpb24gZm9yIGV0aGVyZXVtIGJsb2NrY2hhaW4gZXZlbnQgbG9nIHN5c3RlbQogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludFRvT3RoZXJDb2luQnV5ZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobWludChfdG8sIF92YWx1ZSkpOwogICAgICAgIEtTQ19CdXlPdGhlckNvaW4oX3RvLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9ub3RlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAKICAgIC8vIGZvciBib3VudHkgcHJvZ3JhbQogICAgLyoqCiAgICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHJld2FyZCBpbmZsdWVuY2VycyB3aXRoIEtTdGFyQ29pbgogICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgY29pbnMuCiAgICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgY29pbnMgdG8gbWludC4KICAgICAqIEBwYXJhbSBfbm90ZSBUaGUgbm90YXRpb24gZm9yIGV0aGVyZXVtIGJsb2NrY2hhaW4gZXZlbnQgbG9nIHN5c3RlbQogICAgICogQHJldHVybiBBIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bC4KICAgICAqLwogICAgZnVuY3Rpb24gbWludFRvSW5mbHVlbmNlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShtaW50KF90bywgX3ZhbHVlKSk7CiAgICAgICAgS1NDX0dldEFzSW5mbHVlbmNlcihfdG8sIG1zZy5zZW5kZXIsIF92YWx1ZSwgX25vdGUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBmb3IgS1NDUG9pbnQgKEtTdGFyTGl2ZSBlY29zeXN0ZW0gcG9pbnQpCiAgICAvKioKICAgICAqIEBkZXYgRnVuY3Rpb24gdG8gZXhjaGFuZ2UgS1NDUG9pbnQgdG8gS1N0YXJDb2luCiAgICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBjb2lucy4KICAgICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiBjb2lucyB0byBtaW50LgogICAgICogQHBhcmFtIF9ub3RlIFRoZSBub3RhdGlvbiBmb3IgZXRoZXJldW0gYmxvY2tjaGFpbiBldmVudCBsb2cgc3lzdGVtCiAgICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAgICovCiAgICBmdW5jdGlvbiBleGNoYW5nZVBvaW50VG9Db2luKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG1pbnQoX3RvLCBfdmFsdWUpKTsKICAgICAgICBLU0NfRXhjaGFuZ2VQb2ludFRvQ29pbihfdG8sIG1zZy5zZW5kZXIsIF92YWx1ZSwgX25vdGUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvLyBFdmVudCBmdW5jdGlvbnMgdG8gbG9nIHRoZSBub3RhdGlvbiBmb3IgZXRoZXJldW0gYmxvY2tjaGFpbiAKICAgIC8vIGZvciBpbml0aWFsaXppbmcKICAgIGV2ZW50IEtTQ19Jbml0aWFsaXplKGFkZHJlc3MgaW5kZXhlZCBfc3JjLCBhZGRyZXNzIGluZGV4ZWQgX2Rlc2MsIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpOwogICAgCiAgICAvLyBmb3IgdHJhbnNmZXIoKQogICAgZXZlbnQgS1NDX1NlbmQoYWRkcmVzcyBpbmRleGVkIF9zcmMsIGFkZHJlc3MgaW5kZXhlZCBfZGVzYywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSk7CiAgICBldmVudCBLU0NfUmVjZWl2ZShhZGRyZXNzIGluZGV4ZWQgX3NyYywgYWRkcmVzcyBpbmRleGVkIF9kZXNjLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKTsKICAgIAogICAgLy8gZm9yIGFwcHJvdmUoKSwgaW5jcmVhc2VBcHByb3ZhbCgpLCBkZWNyZWFzZUFwcHJvdmFsKCkKICAgIGV2ZW50IEtTQ19BcHByb3ZlKGFkZHJlc3MgaW5kZXhlZCBfc3JjLCBhZGRyZXNzIGluZGV4ZWQgX2Rlc2MsIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpOwogICAgZXZlbnQgS1NDX0FwcHJvdmFsSW5jKGFkZHJlc3MgaW5kZXhlZCBfc3JjLCBhZGRyZXNzIGluZGV4ZWQgX2Rlc2MsIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpOwogICAgZXZlbnQgS1NDX0FwcHJvdmFsRGVjKGFkZHJlc3MgaW5kZXhlZCBfc3JjLCBhZGRyZXNzIGluZGV4ZWQgX2Rlc2MsIHVpbnQyNTYgX3ZhbHVlLCBzdHJpbmcgX25vdGUpOwogICAgCiAgICAvLyBmb3IgdHJhbnNmZXJGcm9tKCkKICAgIGV2ZW50IEtTQ19TZW5kVG8oYWRkcmVzcyBpbmRleGVkIF9zcmMsIGFkZHJlc3MgaW5kZXhlZCBfZGVzYywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSk7CiAgICBldmVudCBLU0NfUmVjZWl2ZUZyb20oYWRkcmVzcyBpbmRleGVkIF9zcmMsIGFkZHJlc3MgaW5kZXhlZCBfZGVzYywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSk7CiAgICAKICAgIC8vIGZvciBtaW50KCksIGJ1cm4oKQogICAgZXZlbnQgS1NDX01pbnQoYWRkcmVzcyBpbmRleGVkIF9zcmMsIGFkZHJlc3MgaW5kZXhlZCBfZGVzYywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSk7CiAgICBldmVudCBLU0NfQnVybihhZGRyZXNzIGluZGV4ZWQgX3NyYywgYWRkcmVzcyBpbmRleGVkIF9kZXNjLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKTsKICAgIAogICAgLy8gZm9yIGNyb3dkc2FsZQogICAgZXZlbnQgS1NDX0J1eShhZGRyZXNzIGluZGV4ZWQgX3NyYywgYWRkcmVzcyBpbmRleGVkIF9kZXNjLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKTsKICAgIAogICAgLy8gZm9yIGJ1eWVyIHdpdGggY3J5cHRvY3VycmVuY3kgb3RoZXIgdGhhbiBFVEgKICAgIGV2ZW50IEtTQ19CdXlPdGhlckNvaW4oYWRkcmVzcyBpbmRleGVkIF9zcmMsIGFkZHJlc3MgaW5kZXhlZCBfZGVzYywgdWludDI1NiBfdmFsdWUsIHN0cmluZyBfbm90ZSk7CiAgICAKICAgIC8vIGZvciBib3VudHkgcHJvZ3JhbQogICAgZXZlbnQgS1NDX0dldEFzSW5mbHVlbmNlcihhZGRyZXNzIGluZGV4ZWQgX3NyYywgYWRkcmVzcyBpbmRleGVkIF9kZXNjLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKTsKCiAgICAvLyBmb3IgS1NDUG9pbnQgKEtTdGFyTGl2ZSBlY29zeXN0ZW0gcG9pbnQpCiAgICBldmVudCBLU0NfRXhjaGFuZ2VQb2ludFRvQ29pbihhZGRyZXNzIGluZGV4ZWQgX3NyYywgYWRkcmVzcyBpbmRleGVkIF9kZXNjLCB1aW50MjU2IF92YWx1ZSwgc3RyaW5nIF9ub3RlKTsKfQoKCi8qKgogKiBAdGl0bGUgS1N0YXJDb2luIHYxLjAKICogQGF1dGhvciBUYWUgS2ltCiAqIEBub3RpY2UgS1N0YXJDb2luIGlzIGFuIEVSQzIwICh3aXRoIGFuIGFsdGVybmF0aXZlIG9mIEVSQzgyNykgRXRoZXJldW0gYmFzZWQgdG9rZW4sIHdoaWNoIHdpbGwgYmUgaW50ZWdyYXRlZCBpbiBLU3RhckxpdmUgcGxhdGZvcm0uCiAqLwpjb250cmFjdCBLU3RhckNvaW4gaXMgS1N0YXJDb2luQmFzaWMgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lPSAiS1N0YXJDb2luIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sPSAiS1NDIjsKICAgIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscz0gMTg7CiAgICAKICAgIC8vIENvbnN0cnVjdHVyZQogICAgZnVuY3Rpb24gS1N0YXJDb2luKCkgcHVibGljIHsKICAgICAgICB0b3RhbFN1cHBseV89IElOSVRJQUxfU1VQUExZOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdPSBJTklUSUFMX1NVUFBMWTsKCSAgICBjYXBPZlRvdGFsU3VwcGx5ID0gMTAwZTYgKiAxIGV0aGVyOwogICAgICAgIGNyb3dkc2FsZVJhaXNlZD0gMDsKICAgICAgICAKICAgICAgICBUcmFuc2ZlcigweDAsIG1zZy5zZW5kZXIsIElOSVRJQUxfU1VQUExZKTsKICAgICAgICBLU0NfSW5pdGlhbGl6ZShtc2cuc2VuZGVyLCAweDAsIElOSVRJQUxfU1VQUExZLCAiIik7CiAgICB9Cn0='.
	

]
