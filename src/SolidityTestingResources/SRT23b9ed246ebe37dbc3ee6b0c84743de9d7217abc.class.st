Class {
	#name : #SRT23b9ed246ebe37dbc3ee6b0c84743de9d7217abc,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT23b9ed246ebe37dbc3ee6b0c84743de9d7217abc >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBSZXN0cmljdGlvbiB7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIGludGVybmFsIGFjY2Vzc2VzOwoKICAgIGZ1bmN0aW9uIFJlc3RyaWN0aW9uKCkgcHVibGljIHsKICAgICAgICBhY2Nlc3Nlc1ttc2cuc2VuZGVyXSA9IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2l2ZUFjY2VzcyhhZGRyZXNzIF9hZGRyKSBwdWJsaWMgcmVzdHJpY3RlZCB7CiAgICAgICAgYWNjZXNzZXNbX2FkZHJdID0gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVBY2Nlc3MoYWRkcmVzcyBfYWRkcikgcHVibGljIHJlc3RyaWN0ZWQgewogICAgICAgIGRlbGV0ZSBhY2Nlc3Nlc1tfYWRkcl07CiAgICB9CgogICAgZnVuY3Rpb24gaGFzQWNjZXNzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYWNjZXNzZXNbbXNnLnNlbmRlcl07CiAgICB9CgogICAgbW9kaWZpZXIgcmVzdHJpY3RlZCgpIHsKICAgICAgICByZXF1aXJlKGhhc0FjY2VzcygpKTsKICAgICAgICBfOwogICAgfQp9Cgpjb250cmFjdCBEcmVhbUNvbnN0YW50cyB7CiAgICB1aW50IGNvbnN0YW50IE1JTklNQUxfRFJFQU0gPSAzIGV0aGVyOwogICAgdWludCBjb25zdGFudCBUSUNLRVRfUFJJQ0UgPSAwLjEgZXRoZXI7CiAgICB1aW50IGNvbnN0YW50IE1BWF9USUNLRVRTID0gMioqMzI7CiAgICB1aW50IGNvbnN0YW50IE1BWF9BTU9VTlQgPSAyKiozMiAqIFRJQ0tFVF9QUklDRTsKICAgIHVpbnQgY29uc3RhbnQgRFJFQU1fSyA9IDI7CiAgICB1aW50IGNvbnN0YW50IEFDQ1VSQUNZID0gMTAqKjE4OwogICAgdWludCBjb25zdGFudCBSRUZVTkRfQUZURVIgPSA5MCBkYXlzOwp9Cgpjb250cmFjdCBUaWNrZXRIb2xkZXIgaXMgUmVzdHJpY3Rpb24sIERyZWFtQ29uc3RhbnRzIHsKICAgIHN0cnVjdCBUaWNrZXQgewogICAgICAgIHVpbnQzMiB0aWNrZXRBbW91bnQ7CiAgICAgICAgdWludDMyIHBsYXllckluZGV4OwogICAgICAgIHVpbnQgZHJlYW1BbW91bnQ7CiAgICB9CgogICAgdWludDY0IHB1YmxpYyB0b3RhbFRpY2tldHM7CiAgICB1aW50NjQgcHVibGljIG1heFRpY2tldHM7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBUaWNrZXQpIGludGVybmFsIHRpY2tldHM7CgogICAgYWRkcmVzc1tdIGludGVybmFsIHBsYXllcnM7CgogICAgZnVuY3Rpb24gVGlja2V0SG9sZGVyKHVpbnQgX21heFRpY2tldHMpIHsKICAgICAgICBtYXhUaWNrZXRzID0gdWludDY0KF9tYXhUaWNrZXRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgSXNzdWUgdGlja2V0cyBmb3IgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgICogQHBhcmFtIF9hZGRyIFJlY2VpdmVyIGFkZHJlc3MuCiAgICAgKiBAcGFyYW0gX3RpY2tldEFtb3VudCBBbW91bnQgb2YgdGlja2V0cyB0byBpc3N1ZS4KICAgICAqIEBwYXJhbSBfZHJlYW1BbW91bnQgQW1vdW50IG9mIGRyZWFtIG9yIHplcm8sIGlmIHVzZSBwcmV2aW91cy4KICAgICAqLwogICAgZnVuY3Rpb24gaXNzdWVUaWNrZXRzKGFkZHJlc3MgX2FkZHIsIHVpbnQgX3RpY2tldEFtb3VudCwgdWludCBfZHJlYW1BbW91bnQpIHB1YmxpYyByZXN0cmljdGVkIHsKICAgICAgICByZXF1aXJlKF90aWNrZXRBbW91bnQgPD0gTUFYX1RJQ0tFVFMpOwogICAgICAgIHJlcXVpcmUodG90YWxUaWNrZXRzIDw9IG1heFRpY2tldHMpOwogICAgICAgIFRpY2tldCBzdG9yYWdlIHRpY2tldCA9IHRpY2tldHNbX2FkZHJdOwoKICAgICAgICAvLyBpZiBmaXN0IGlzc3VlIGZvciB0aGlzIHVzZXIKICAgICAgICBpZiAodGlja2V0LnRpY2tldEFtb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoX2RyZWFtQW1vdW50ID49IE1JTklNQUxfRFJFQU0pOwogICAgICAgICAgICB0aWNrZXQuZHJlYW1BbW91bnQgPSBfZHJlYW1BbW91bnQ7CiAgICAgICAgICAgIHRpY2tldC5wbGF5ZXJJbmRleCA9IHVpbnQzMihwbGF5ZXJzLmxlbmd0aCk7CiAgICAgICAgICAgIHBsYXllcnMucHVzaChfYWRkcik7CiAgICAgICAgfQoKCiAgICAgICAgLy8gYWRkIG5ldyB0aWNrZXQgYW1vdW50CiAgICAgICAgdGlja2V0LnRpY2tldEFtb3VudCArPSB1aW50MzIoX3RpY2tldEFtb3VudCk7CiAgICAgICAgLy8gY2hlY2sgdG8gb3ZlcmZsb3cKICAgICAgICByZXF1aXJlKHRpY2tldC50aWNrZXRBbW91bnQgPj0gX3RpY2tldEFtb3VudCk7CgogICAgICAgIC8vIGNhbCB0b3RhbAogICAgICAgIHRvdGFsVGlja2V0cyArPSB1aW50NjQoX3RpY2tldEFtb3VudCk7CiAgICAgICAgLy8gY2hlY2sgdG8gb3ZlcmZsb3cKICAgICAgICByZXF1aXJlKHRvdGFsVGlja2V0cyA+PSBfdGlja2V0QW1vdW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRXaW5uZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIHJlc3RyaWN0ZWQgewogICAgICAgIFRpY2tldCBzdG9yYWdlIHRpY2tldCA9IHRpY2tldHNbX2FkZHJdOwogICAgICAgIHJlcXVpcmUodGlja2V0LnRpY2tldEFtb3VudCAhPSAwKTsKICAgICAgICB0aWNrZXQudGlja2V0QW1vdW50ID0gMDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUaWNrZXRzKHVpbnQgaW5kZXgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIGFkZHIsIHVpbnQgdGlja2V0QW1vdW50LCB1aW50IGRyZWFtQW1vdW50KSB7CiAgICAgICAgaWYgKHBsYXllcnMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaW5kZXggPiBwbGF5ZXJzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgYWRkciA9IHBsYXllcnNbaW5kZXhdOwogICAgICAgIFRpY2tldCBzdG9yYWdlIHRpY2tldCA9IHRpY2tldHNbYWRkcl07CiAgICAgICAgdGlja2V0QW1vdW50ID0gdGlja2V0LnRpY2tldEFtb3VudDsKICAgICAgICBkcmVhbUFtb3VudCA9IHRpY2tldC5kcmVhbUFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUaWNrZXRzQnlBZGRyZXNzKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50IHBsYXllckluZGV4LCB1aW50IHRpY2tldEFtb3VudCwgdWludCBkcmVhbUFtb3VudCkgewogICAgICAgIFRpY2tldCBzdG9yYWdlIHRpY2tldCA9IHRpY2tldHNbX2FkZHJdOwogICAgICAgIHBsYXllckluZGV4ID0gdGlja2V0LnBsYXllckluZGV4OwogICAgICAgIHRpY2tldEFtb3VudCA9IHRpY2tldC50aWNrZXRBbW91bnQ7CiAgICAgICAgZHJlYW1BbW91bnQgPSB0aWNrZXQuZHJlYW1BbW91bnQ7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGxheWVyc0NvdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcGxheWVycy5sZW5ndGg7CiAgICB9Cn0KCmNvbnRyYWN0IEZ1bmQgaXMgUmVzdHJpY3Rpb24sIERyZWFtQ29uc3RhbnRzIHsKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGJhbGFuY2VzOwoKICAgIGV2ZW50IFBheShhZGRyZXNzIHJlY2VpdmVyLCB1aW50IGFtb3VudCk7CiAgICBldmVudCBSZWZ1bmQoYWRkcmVzcyByZWNlaXZlciwgdWludCBhbW91bnQpOwoKICAgIC8vIGhvdyBtYW55IGZ1bmRzIGFyZSBjb2xsZWN0ZWQKICAgIHVpbnQgcHVibGljIHRvdGFsQW1vdW50OwogICAgLy8gaG93IG1hbnkgZnVuZHMgYXJlIHBheWVkIGFzIHByaXplCiAgICB1aW50IGludGVybmFsIHRvdGFsUHJpemVBbW91bnQ7CiAgICAvLyBhYnNvbHV0ZSByZWZ1bmQgZGF0ZQogICAgdWludDMyIGludGVybmFsIHJlZnVuZERhdGU7CiAgICAvLyB1c2VyIHdobyB3aWxsIHJlY2VpdmUgYWxsIGZ1bmRzCiAgICBhZGRyZXNzIGludGVybmFsIGJlbmVmaWNpYXJ5OwoKICAgIGZ1bmN0aW9uIEZ1bmQodWludCBfYWJzb2x1dGVSZWZ1bmREYXRlLCBhZGRyZXNzIF9iZW5lZmljaWFyeSkgcHVibGljIHsKICAgICAgICByZWZ1bmREYXRlID0gdWludDMyKF9hYnNvbHV0ZVJlZnVuZERhdGUpOwogICAgICAgIGJlbmVmaWNpYXJ5ID0gX2JlbmVmaWNpYXJ5OwogICAgfQoKICAgIGZ1bmN0aW9uIGRlcG9zaXQoYWRkcmVzcyBfYWRkcikgcHVibGljIHBheWFibGUgcmVzdHJpY3RlZCB7CiAgICAgICAgdWludCBiYWxhbmNlID0gYmFsYW5jZXNbX2FkZHJdOwoKICAgICAgICBiYWxhbmNlc1tfYWRkcl0gPSBiYWxhbmNlLmFkZChtc2cudmFsdWUpOwogICAgICAgIHRvdGFsQW1vdW50ID0gdG90YWxBbW91bnQuYWRkKG1zZy52YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBhbW91bnQpIHB1YmxpYyByZXN0cmljdGVkIHsKICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihhbW91bnQpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBQYXkgZnJvbSBmdW5kIHRvIHRoZSBzcGVjaWZpZWQgYWRkcmVzcyBvbmx5IGlmIG5vdCBwYXllZCBhbHJlYWR5LgogICAgICogQHBhcmFtIF9hZGRyIEFkZHJlc3MgdG8gcGF5LgogICAgICogQHBhcmFtIF9hbW91bnRXZWkgQW1vdW50IHRvIHBheS4KICAgICAqLwogICAgZnVuY3Rpb24gcGF5KGFkZHJlc3MgX2FkZHIsIHVpbnQgX2Ftb3VudFdlaSkgcHVibGljIHJlc3RyaWN0ZWQgewogICAgICAgIC8vIHdlIGhhdmUgZW5vdWdoIGZ1bmRzCiAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gX2Ftb3VudFdlaSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1tfYWRkcl0gIT0gMCk7CiAgICAgICAgZGVsZXRlIGJhbGFuY2VzW19hZGRyXTsKICAgICAgICB0b3RhbFByaXplQW1vdW50ID0gdG90YWxQcml6ZUFtb3VudC5hZGQoX2Ftb3VudFdlaSk7CiAgICAgICAgLy8gc2VuZCBmdW5kcwogICAgICAgIF9hZGRyLnRyYW5zZmVyKF9hbW91bnRXZWkpOwogICAgICAgIFBheShfYWRkciwgX2Ftb3VudFdlaSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGV2IElmIGZ1bmRzIGFscmVhZHkgcGF5ZWQgdG8gdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICAgICogQHBhcmFtIF9hZGRyIEFkZHJlc3MgdG8gY2hlY2suCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzUGF5ZWQoYWRkcmVzcyBfYWRkcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX2FkZHJdID09IDA7CiAgICB9CgogICAgZnVuY3Rpb24gZW5hYmxlUmVmdW5kKCkgcHVibGljIHJlc3RyaWN0ZWQgewogICAgICAgIHJlcXVpcmUocmVmdW5kRGF0ZSA+IHVpbnQzMihibG9jay50aW1lc3RhbXApKTsKICAgICAgICByZWZ1bmREYXRlID0gdWludDMyKGJsb2NrLnRpbWVzdGFtcCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVmdW5kKGFkZHJlc3MgX2FkZHIpIHB1YmxpYyByZXN0cmljdGVkIHsKICAgICAgICByZXF1aXJlKHJlZnVuZERhdGUgPj0gdWludDMyKGJsb2NrLnRpbWVzdGFtcCkpOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2FkZHJdICE9IDApOwogICAgICAgIHVpbnQgYW1vdW50ID0gcmVmdW5kQW1vdW50KF9hZGRyKTsKICAgICAgICBkZWxldGUgYmFsYW5jZXNbX2FkZHJdOwogICAgICAgIF9hZGRyLnRyYW5zZmVyKGFtb3VudCk7CiAgICAgICAgUmVmdW5kKF9hZGRyLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlZnVuZEFtb3VudChhZGRyZXNzIF9hZGRyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIHVpbnQgYmFsYW5jZSA9IGJhbGFuY2VzW19hZGRyXTsKICAgICAgICB1aW50IHJlc3RUb3RhbCA9IHRvdGFsQW1vdW50LnN1Yih0b3RhbFByaXplQW1vdW50KTsKICAgICAgICB1aW50IHNoYXJlID0gYmFsYW5jZS5tdWwoQUNDVVJBQ1kpLmRpdih0b3RhbEFtb3VudCk7CiAgICAgICAgcmV0dXJuIHJlc3RUb3RhbC5tdWwoc2hhcmUpLmRpdihBQ0NVUkFDWSk7CiAgICB9Cn0KCmNvbnRyYWN0IFJhbmRvbU9yYWNsaXplUHJveHlJIHsKICAgIGZ1bmN0aW9uIHJlcXVlc3RSYW5kb20oZnVuY3Rpb24gKGJ5dGVzMzIpIGV4dGVybmFsIGNhbGxiYWNrLCB1aW50IF9nYXNMaW1pdCkgcHVibGljIHBheWFibGU7CiAgICBmdW5jdGlvbiBnZXRSYW5kb21QcmljZSh1aW50IF9nYXNMaW1pdCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwp9CmNvbnRyYWN0IENvbXBhbmllc01hbmFnZXJJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gcHJvY2Vzc2luZyhhZGRyZXNzIHBsYXllciwgdWludCBhbW91bnQsIHVpbnQgdGlja2V0Q291bnQsIHVpbnQgdG90YWxUaWNrZXRzKSBwdWJsaWM7Cn0KCgoKY29udHJhY3QgVGlja2V0U2FsZSBpcyBSZXN0cmljdGlvbiwgRHJlYW1Db25zdGFudHMgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgICB1aW50IGNvbnN0YW50IFJBTkRPTV9HQVMgPSAxMDAwMDAwOwoKICAgIFRpY2tldEhvbGRlciBwdWJsaWMgdGlja2V0SG9sZGVyOwogICAgRnVuZCBwdWJsaWMgZnVuZDsKICAgIFJhbmRvbU9yYWNsaXplUHJveHlJIHByaXZhdGUgcHJveHk7CiAgICBDb21wYW5pZXNNYW5hZ2VySW50ZXJmYWNlIHB1YmxpYyBjb21wYW5pZXNNYW5hZ2VyOwogICAgYnl0ZXMzMltdIHB1YmxpYyByYW5kb21OdW1iZXJzOwoKICAgIHVpbnQzMiBwdWJsaWMgZW5kRGF0ZTsKCiAgICBmdW5jdGlvbiBUaWNrZXRTYWxlKHVpbnQgX2VuZERhdGUsIGFkZHJlc3MgX3Byb3h5LCBhZGRyZXNzIF9iZW5lZmljaWFyeSwgdWludCBfbWF4VGlja2V0cykgcHVibGljIHsKICAgICAgICByZXF1aXJlKF9lbmREYXRlID4gYmxvY2sudGltZXN0YW1wKTsKICAgICAgICByZXF1aXJlKF9iZW5lZmljaWFyeSAhPSAwKTsKICAgICAgICB1aW50IHJlZnVuZERhdGUgPSBibG9jay50aW1lc3RhbXAgKyBSRUZVTkRfQUZURVI7CiAgICAgICAgLy8gZW5kIGRhdGUgbWlzdCBiZSBsZXNzIHRoZW4gcmVmdW5kCiAgICAgICAgcmVxdWlyZShfZW5kRGF0ZSA8IHJlZnVuZERhdGUpOwoKICAgICAgICB0aWNrZXRIb2xkZXIgPSBuZXcgVGlja2V0SG9sZGVyKF9tYXhUaWNrZXRzKTsKICAgICAgICB0aWNrZXRIb2xkZXIuZ2l2ZUFjY2Vzcyhtc2cuc2VuZGVyKTsKCiAgICAgICAgZnVuZCA9IG5ldyBGdW5kKHJlZnVuZERhdGUsIF9iZW5lZmljaWFyeSk7CiAgICAgICAgZnVuZC5naXZlQWNjZXNzKG1zZy5zZW5kZXIpOwoKICAgICAgICBlbmREYXRlID0gdWludDMyKF9lbmREYXRlKTsKICAgICAgICBwcm94eSA9IFJhbmRvbU9yYWNsaXplUHJveHlJKF9wcm94eSk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VGlja2V0cyh1aW50IF9kcmVhbUFtb3VudCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRpY2tldHNJbnRlcm5hbChtc2cuc2VuZGVyLCBtc2cudmFsdWUsIF9kcmVhbUFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VGlja2V0c0ZvcihhZGRyZXNzIF9hZGRyLCB1aW50IF9kcmVhbUFtb3VudCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRpY2tldHNJbnRlcm5hbChfYWRkciwgbXNnLnZhbHVlLCBfZHJlYW1BbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eVRpY2tldHNJbnRlcm5hbChhZGRyZXNzIF9hZGRyLCB1aW50IF92YWx1ZVdlaSwgdWludCBfZHJlYW1BbW91bnQpIGludGVybmFsIG5vdEVuZGVkIHsKICAgICAgICByZXF1aXJlKF92YWx1ZVdlaSA+PSBUSUNLRVRfUFJJQ0UpOwogICAgICAgIHJlcXVpcmUoY2hlY2tEcmVhbShfZHJlYW1BbW91bnQpKTsKCiAgICAgICAgdWludCBjaGFuZ2UgPSBfdmFsdWVXZWkgJSBUSUNLRVRfUFJJQ0U7CiAgICAgICAgdWludCB3ZWlBbW91bnQgPSBfdmFsdWVXZWkgLSBjaGFuZ2U7CiAgICAgICAgdWludCB0aWNrZXRDb3VudCA9IHdlaUFtb3VudC5kaXYoVElDS0VUX1BSSUNFKTsKCiAgICAgICAgaWYgKGFkZHJlc3MoY29tcGFuaWVzTWFuYWdlcikgIT0gMCkgewogICAgICAgICAgICB1aW50IHRvdGFsVGlja2V0cyA9IHRpY2tldEhvbGRlci50b3RhbFRpY2tldHMoKTsKICAgICAgICAgICAgY29tcGFuaWVzTWFuYWdlci5wcm9jZXNzaW5nKF9hZGRyLCB3ZWlBbW91bnQsIHRpY2tldENvdW50LCB0b3RhbFRpY2tldHMpOwogICAgICAgIH0KCiAgICAgICAgLy8gaXNzdWUgcmlnaHQgYW1vdW50IG9mIHRpY2tldHMKICAgICAgICB0aWNrZXRIb2xkZXIuaXNzdWVUaWNrZXRzKF9hZGRyLCB0aWNrZXRDb3VudCwgX2RyZWFtQW1vdW50KTsKCiAgICAgICAgLy8gdHJhbnNmZXIgdG8gZnVuZAogICAgICAgIGZ1bmQuZGVwb3NpdC52YWx1ZSh3ZWlBbW91bnQpKF9hZGRyKTsKCiAgICAgICAgLy8gcmV0dXJuIGNoYW5nZQogICAgICAgIGlmIChjaGFuZ2UgIT0gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGNoYW5nZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHNlcnZlciBpbnRlZ3JhdGlvbiBtZXRob2RzCgogICAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIHsKICAgICAgICBmdW5kLnJlZnVuZChtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgU2VuZCBmdW5kcyB0byBwbGF5ZXIgYnkgaW5kZXguIEluIGNhc2Ugc2VydmVyIGNhbGN1bGF0ZSBhbGwuCiAgICAgKiBAcGFyYW0gX3BsYXllckluZGV4IFRoZSB3aW5uZXIgcGxheWVyIGluZGV4LgogICAgICogQHBhcmFtIF9hbW91bnRXZWkgQW1vdW50IG9mIHByaXplIGluIHdlaS4KICAgICAqLwogICAgZnVuY3Rpb24gcGF5b3V0KHVpbnQgX3BsYXllckluZGV4LCB1aW50IF9hbW91bnRXZWkpIHB1YmxpYyByZXN0cmljdGVkIGVuZGVkIHsKICAgICAgICBhZGRyZXNzIHBsYXllckFkZHJlc3M7CiAgICAgICAgdWludCB0aWNrZXRBbW91bnQ7CiAgICAgICAgdWludCBkcmVhbUFtb3VudDsKICAgICAgICAocGxheWVyQWRkcmVzcywgdGlja2V0QW1vdW50LCBkcmVhbUFtb3VudCkgPSB0aWNrZXRIb2xkZXIuZ2V0VGlja2V0cyhfcGxheWVySW5kZXgpOwogICAgICAgIHJlcXVpcmUocGxheWVyQWRkcmVzcyAhPSAwKTsKCiAgICAgICAgLy8gcGF5IHRoZSBwbGF5ZXIncyBkcmVhbQogICAgICAgIGZ1bmQucGF5KHBsYXllckFkZHJlc3MsIF9hbW91bnRXZWkpOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBJZiBmdW5kcyBhbHJlYWR5IHBheWVkIHRvIHRoZSBzcGVjaWZpZWQgcGxheWVyIGJ5IGluZGV4LgogICAgICogQHBhcmFtIF9wbGF5ZXJJbmRleCBQbGF5ZXIgaW5kZXguCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzUGF5ZWQodWludCBfcGxheWVySW5kZXgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYWRkcmVzcyBwbGF5ZXJBZGRyZXNzOwogICAgICAgIHVpbnQgdGlja2V0QW1vdW50OwogICAgICAgIHVpbnQgZHJlYW1BbW91bnQ7CiAgICAgICAgKHBsYXllckFkZHJlc3MsIHRpY2tldEFtb3VudCwgZHJlYW1BbW91bnQpID0gdGlja2V0SG9sZGVyLmdldFRpY2tldHMoX3BsYXllckluZGV4KTsKICAgICAgICByZXF1aXJlKHBsYXllckFkZHJlc3MgIT0gMCk7CiAgICAgICAgcmV0dXJuIGZ1bmQuaXNQYXllZChwbGF5ZXJBZGRyZXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgU2VydmVyIG1ldGhvZC4gRmluaXNoIGxvdHRlcnkgKGZvcmNlIGZpbmlzaCBpZiByZXF1aXJlZCksIGVuYWJsZSByZWZ1bmQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmlzaCgpIHB1YmxpYyByZXN0cmljdGVkIHsKICAgICAgICAvLyBmb3JjZSBlbmQKICAgICAgICBpZiAoZW5kRGF0ZSA+IHVpbnQzMihibG9jay50aW1lc3RhbXApKSB7CiAgICAgICAgICAgIGVuZERhdGUgPSB1aW50MzIoYmxvY2sudGltZXN0YW1wKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gcmFuZG9tIGludGVncmF0aW9uCiAgICBmdW5jdGlvbiByZXF1ZXN0UmFuZG9tKCkgcHVibGljIHBheWFibGUgcmVzdHJpY3RlZCB7CiAgICAgICAgdWludCBwcmljZSA9IHByb3h5LmdldFJhbmRvbVByaWNlKFJBTkRPTV9HQVMpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IHByaWNlKTsKICAgICAgICB1aW50IGNoYW5nZSA9IG1zZy52YWx1ZSAtIHByaWNlOwogICAgICAgIHByb3h5LnJlcXVlc3RSYW5kb20udmFsdWUocHJpY2UpKHRoaXMucmFuZG9tX2NhbGxiYWNrLCBSQU5ET01fR0FTKTsKICAgICAgICBpZiAoY2hhbmdlID4gMCkgewogICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGNoYW5nZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmRvbV9jYWxsYmFjayhieXRlczMyIF9yYW5kb21OdW1iZXJzKSBleHRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkZHJlc3MocHJveHkpKTsKICAgICAgICByYW5kb21OdW1iZXJzLnB1c2goX3JhbmRvbU51bWJlcnMpOwogICAgfQoKICAgIC8vIGNvbXBhbmllcyBpbnRlZ3JhdGlvbgogICAgZnVuY3Rpb24gc2V0Q29tcGFueU1hbmFnZXIoYWRkcmVzcyBfYWRkcikgcHVibGljIHJlc3RyaWN0ZWQgewogICAgICAgIGNvbXBhbmllc01hbmFnZXIgPSBDb21wYW5pZXNNYW5hZ2VySW50ZXJmYWNlKF9hZGRyKTsKICAgIH0KCiAgICAvLyBjb25zdGFudCBtZXRob2RzCiAgICBmdW5jdGlvbiBpc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gYmxvY2sudGltZXN0YW1wID4gZW5kRGF0ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0RyZWFtKHVpbnQgX2RyZWFtQW1vdW50KSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAwIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAzIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSA1IGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSA3IGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAxMCBldGhlciB8fAogICAgICAgICAgICBfZHJlYW1BbW91bnQgPT0gMTUgZXRoZXIgfHwKICAgICAgICAgICAgX2RyZWFtQW1vdW50ID09IDIwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAzMCBldGhlciB8fAogICAgICAgICAgICBfZHJlYW1BbW91bnQgPT0gNDAgZXRoZXIgfHwKICAgICAgICAgICAgX2RyZWFtQW1vdW50ID09IDUwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSA3NSBldGhlciB8fAogICAgICAgICAgICBfZHJlYW1BbW91bnQgPT0gMTAwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAxNTAgZXRoZXIgfHwKICAgICAgICAgICAgX2RyZWFtQW1vdW50ID09IDIwMCBldGhlciB8fAogICAgICAgICAgICBfZHJlYW1BbW91bnQgPT0gMzAwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSA0MDAgZXRoZXIgfHwKICAgICAgICAgICAgX2RyZWFtQW1vdW50ID09IDUwMCBldGhlciB8fAogICAgICAgICAgICBfZHJlYW1BbW91bnQgPT0gNzUwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAxMDAwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAxNTAwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAyMDAwIGV0aGVyIHx8CiAgICAgICAgICAgIF9kcmVhbUFtb3VudCA9PSAyNTAwIGV0aGVyOwogICAgfQoKICAgIG1vZGlmaWVyIG5vdEVuZGVkKCkgewogICAgICAgIHJlcXVpcmUoIWlzRW5kZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBlbmRlZCgpIHsKICAgICAgICByZXF1aXJlKGlzRW5kZWQoKSk7CiAgICAgICAgXzsKICAgIH0KCiAgICBmdW5jdGlvbiByYW5kb21Db3VudCgpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHJhbmRvbU51bWJlcnMubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFJhbmRvbVByaWNlKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcHJveHkuZ2V0UmFuZG9tUHJpY2UoUkFORE9NX0dBUyk7CiAgICB9Cgp9'.
	

]
