Class {
	#name : #SRT98008a4168b66261cb112d2d4cd940728d033c2e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT98008a4168b66261cb112d2d4cd940728d033c2e >> base64 [
	^ 'Y29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgY29udHJhY3RPd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIGNvbnRyYWN0T3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGNvbnRyYWN0T3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIG9ubHlPd25lciB7CiAgICBpZiAobmV3T3duZXIgIT0gYWRkcmVzcygwKSkgewogICAgICBjb250cmFjdE93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQp9Cgpjb250cmFjdCBFUkM3MjEgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHRvdGFsKTsKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIG93bmVyT2YodWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIHRva2VuT3duZXIpOwogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpIGV4dGVybmFsOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgdG9rZW5Pd25lciwgYWRkcmVzcyBhcHByb3ZlZCwgdWludDI1NiB0b2tlbklkKTsKCiAgICBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQgX2ludGVyZmFjZUlEKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpOwp9Cgpjb250cmFjdCBEcmFnb25CYXNlIGlzIE93bmFibGUgewogICAgZXZlbnQgQmlydGgoYWRkcmVzcyB0b2tlbk93bmVyLCB1aW50MjU2IGRyYWdvbklkKTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKTsKCiAgICBzdHJ1Y3QgRHJhZ29uIHsKICAgICAgLy8gdWludDI1NiBnZW5lczsgVE9ETwogICAgICAvLyBzdHJpbmcgbmFtZTsgVE9ETwogICAgICB1aW50OCBhdHRhY2s7CiAgICAgIHVpbnQ4IGRlZmVuY2U7CiAgICAgIHVpbnQ4IGNvbG9yOwogICAgICB1aW50OCBib2R5VHlwZTsKICAgICAgdWludDggZXllc1R5cGU7CiAgICAgIHVpbnQ4IG1vdXRoVHlwZTsKICAgICAgdWludDggaG9ybnNUeXBlOwogICAgICB1aW50OCB3aW5nc1R5cGU7CiAgICAgIHVpbnQxNiBoZWFsdGg7CiAgICAgIHVpbnQyNTYgcHJpY2U7CgogICAgICB1aW50MjU2IHBvaW50czsKICAgIH0KCiAgICBEcmFnb25bXSBkcmFnb25zOwoKICAgIHVpbnQyNTYgZHJhZ29uc09uU2FsZUNvdW50ID0gMDsKCiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBkcmFnb25JbmRleFRvT3duZXI7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIG93bmVyc2hpcFRva2VuQ291bnQ7CiAgICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHB1YmxpYyBkcmFnb25JbmRleFRvQXBwcm92ZWQ7CgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF90b2tlbklkKSBpbnRlcm5hbCB7CiAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfdG9dKys7CiAgICAgICAgZHJhZ29uSW5kZXhUb093bmVyW190b2tlbklkXSA9IF90bzsKCiAgICAgICAgaWYgKF9mcm9tICE9IGFkZHJlc3MoMCkpIHsKICAgICAgICAgICAgb3duZXJzaGlwVG9rZW5Db3VudFtfZnJvbV0tLTsKICAgICAgICAgICAgZGVsZXRlIGRyYWdvbkluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF07CiAgICAgICAgfQoKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdG9rZW5JZCk7CiAgICB9CgogICAgZnVuY3Rpb24gX2NyZWF0ZURyYWdvbiAoCiAgICAgICAgdWludDggX2F0dGFjaywKICAgICAgICB1aW50OCBfZGVmZW5jZSwKICAgICAgICB1aW50OCBfY29sb3IsCiAgICAgICAgdWludDggX2JvZHlUeXBlLAogICAgICAgIHVpbnQ4IF9leWVzVHlwZSwKICAgICAgICB1aW50OCBfbW91dGhUeXBlLAogICAgICAgIHVpbnQ4IF9ob3Juc1R5cGUsCiAgICAgICAgdWludDggX3dpbmdzVHlwZSwKICAgICAgICB1aW50MTYgX2hlYWx0aCwKICAgICAgICB1aW50MjU2IF9wcmljZQogICAgICApIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgICAgICBEcmFnb24gbWVtb3J5IF9kcmFnb24gPSBEcmFnb24oewogICAgICAgICAgYXR0YWNrOiBfYXR0YWNrLAogICAgICAgICAgZGVmZW5jZTogX2RlZmVuY2UsCiAgICAgICAgICBjb2xvcjogX2NvbG9yLAogICAgICAgICAgYm9keVR5cGU6IF9ib2R5VHlwZSwKICAgICAgICAgIGV5ZXNUeXBlOiBfZXllc1R5cGUsCiAgICAgICAgICBtb3V0aFR5cGU6IF9tb3V0aFR5cGUsCiAgICAgICAgICBob3Juc1R5cGU6IF9ob3Juc1R5cGUsCiAgICAgICAgICB3aW5nc1R5cGU6IF93aW5nc1R5cGUsCiAgICAgICAgICBoZWFsdGg6IF9oZWFsdGgsCiAgICAgICAgICBwcmljZTogX3ByaWNlLAogICAgICAgICAgcG9pbnRzOiAwCiAgICAgICAgfSk7CgogICAgICAgIHVpbnQyNTYgbmV3RHJhZ29uSWQgPSBkcmFnb25zLnB1c2goX2RyYWdvbikgLSAxOwoKICAgICAgICByZXF1aXJlKG5ld0RyYWdvbklkID09IHVpbnQyNTYodWludDMyKG5ld0RyYWdvbklkKSkpOwoKICAgICAgICBkcmFnb25zT25TYWxlQ291bnQrKzsKCiAgICAgICAgcmV0dXJuIG5ld0RyYWdvbklkOwogICAgfQp9Cgpjb250cmFjdCBFUkM3MjFNZXRhZGF0YSB7CiAgICBmdW5jdGlvbiBnZXRNZXRhZGF0YSh1aW50MjU2IF90b2tlbklkLCBzdHJpbmcpIHB1YmxpYyB2aWV3IHJldHVybnMgKGJ5dGVzMzJbNF0gYnVmZmVyLCB1aW50MjU2IGNvdW50KSB7CiAgICAgICAgaWYgKF90b2tlbklkID09IDEpIHsKICAgICAgICAgICAgYnVmZmVyWzBdID0gIkhlbGxvIFdvcmxkISA6RCI7CiAgICAgICAgICAgIGNvdW50ID0gMTU7CiAgICAgICAgfSBlbHNlIGlmIChfdG9rZW5JZCA9PSAyKSB7CiAgICAgICAgICAgIGJ1ZmZlclswXSA9ICJJIHdvdWxkIGRlZmluaXRlbHkgY2hvb3NlIGEgbWVkaSI7CiAgICAgICAgICAgIGJ1ZmZlclsxXSA9ICJ1bSBsZW5ndGggc3RyaW5nLiI7CiAgICAgICAgICAgIGNvdW50ID0gNDk7CiAgICAgICAgfSBlbHNlIGlmIChfdG9rZW5JZCA9PSAzKSB7CiAgICAgICAgICAgIGJ1ZmZlclswXSA9ICJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgbWkgZSI7CiAgICAgICAgICAgIGJ1ZmZlclsxXSA9ICJzdCBhY2N1bXNhbiBkYXBpYnVzIGF1Z3VlIGxvcmVtLCI7CiAgICAgICAgICAgIGJ1ZmZlclsyXSA9ICIgdHJpc3RpcXVlIHZlc3RpYnVsdW0gaWQsIGxpYmVybyI7CiAgICAgICAgICAgIGJ1ZmZlclszXSA9ICIgc3VzY2lwaXQgdmFyaXVzIHNhcGllbiBhbGlxdWFtLiI7CiAgICAgICAgICAgIGNvdW50ID0gMTI4OwogICAgICAgIH0KICAgIH0KfQoKCmNvbnRyYWN0IERyYWdvbk93bmVyc2hpcCBpcyBEcmFnb25CYXNlLCBFUkM3MjEgewogICAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIkRyYWdvbkJpdCI7CiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJEQiI7CiAgICBFUkM3MjFNZXRhZGF0YSBwdWJsaWMgZXJjNzIxTWV0YWRhdGE7CgogICAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkMxNjUgPQogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3N1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCknKSk7CgogICAgYnl0ZXM0IGNvbnN0YW50IEludGVyZmFjZVNpZ25hdHVyZV9FUkM3MjEgPQogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ25hbWUoKScpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1Nignc3ltYm9sKCknKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ3RvdGFsU3VwcGx5KCknKSkgXgogICAgICAgIGJ5dGVzNChrZWNjYWsyNTYoJ2JhbGFuY2VPZihhZGRyZXNzKScpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1Nignb3duZXJPZih1aW50MjU2KScpKSBeCiAgICAgICAgYnl0ZXM0KGtlY2NhazI1NignYXBwcm92ZShhZGRyZXNzLHVpbnQyNTYpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCd0cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCd0cmFuc2ZlckZyb20oYWRkcmVzcyxhZGRyZXNzLHVpbnQyNTYpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCd0b2tlbnNPZk93bmVyKGFkZHJlc3MpJykpIF4KICAgICAgICBieXRlczQoa2VjY2FrMjU2KCd0b2tlbk1ldGFkYXRhKHVpbnQyNTYsc3RyaW5nKScpKTsKCiAgICBmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQgX2ludGVyZmFjZUlEKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgcmV0dXJuICgoX2ludGVyZmFjZUlEID09IEludGVyZmFjZVNpZ25hdHVyZV9FUkMxNjUpIHx8IChfaW50ZXJmYWNlSUQgPT0gSW50ZXJmYWNlU2lnbmF0dXJlX0VSQzcyMSkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldE1ldGFkYXRhQWRkcmVzcyhhZGRyZXNzIF9jb250cmFjdEFkZHJlc3MpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGVyYzcyMU1ldGFkYXRhID0gRVJDNzIxTWV0YWRhdGEoX2NvbnRyYWN0QWRkcmVzcyk7CiAgICB9CgogICAgZnVuY3Rpb24gX293bnMoYWRkcmVzcyBfY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBkcmFnb25JbmRleFRvT3duZXJbX3Rva2VuSWRdID09IF9jbGFpbWFudDsKICAgIH0KCiAgICBmdW5jdGlvbiBfYXBwcm92ZWRGb3IoYWRkcmVzcyBfY2xhaW1hbnQsIHVpbnQyNTYgX3Rva2VuSWQpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBkcmFnb25JbmRleFRvQXBwcm92ZWRbX3Rva2VuSWRdID09IF9jbGFpbWFudDsKICAgIH0KCiAgICBmdW5jdGlvbiBfYXBwcm92ZSh1aW50MjU2IF90b2tlbklkLCBhZGRyZXNzIF9hcHByb3ZlZCkgaW50ZXJuYWwgewogICAgICAgIGRyYWdvbkluZGV4VG9BcHByb3ZlZFtfdG9rZW5JZF0gPSBfYXBwcm92ZWQ7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGNvdW50KSB7CiAgICAgICAgcmV0dXJuIG93bmVyc2hpcFRva2VuQ291bnRbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcigKICAgICAgICBhZGRyZXNzIF90bywKICAgICAgICB1aW50MjU2IF90b2tlbklkCiAgICApCiAgICAgICAgZXh0ZXJuYWwKICAgIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKICAgICAgICByZXF1aXJlKF9vd25zKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICAgICAgX3RyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoCiAgICAgICAgYWRkcmVzcyBfdG8sCiAgICAgICAgdWludDI1NiBfdG9rZW5JZAogICAgKQogICAgICAgIGV4dGVybmFsCiAgICB7CiAgICAgICAgcmVxdWlyZShfb3ducyhtc2cuc2VuZGVyLCBfdG9rZW5JZCkpOwogICAgICAgIF9hcHByb3ZlKF90b2tlbklkLCBfdG8pOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIF9mcm9tLAogICAgICAgIGFkZHJlc3MgX3RvLAogICAgICAgIHVpbnQyNTYgX3Rva2VuSWQKICAgICkKICAgICAgICBleHRlcm5hbAogICAgewogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJlcXVpcmUoX2FwcHJvdmVkRm9yKG1zZy5zZW5kZXIsIF90b2tlbklkKSk7CiAgICAgICAgcmVxdWlyZShfb3ducyhfZnJvbSwgX3Rva2VuSWQpKTsKICAgICAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX3Rva2VuSWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludCkgewogICAgICAgIHJldHVybiBkcmFnb25zLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBvd25lck9mKHVpbnQyNTYgX3Rva2VuSWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYWRkcmVzcyB0b2tlbk93bmVyKQogICAgewogICAgICAgIHRva2VuT3duZXIgPSBkcmFnb25JbmRleFRvT3duZXJbX3Rva2VuSWRdOwoKICAgICAgICByZXF1aXJlKHRva2VuT3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5zT2ZPd25lcihhZGRyZXNzIF9vd25lcikgZXh0ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBvd25lclRva2VucykgewogICAgICAgIHVpbnQyNTYgdG9rZW5Db3VudCA9IGJhbGFuY2VPZihfb3duZXIpOwoKICAgICAgICBpZiAodG9rZW5Db3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXSh0b2tlbkNvdW50KTsKICAgICAgICAgICAgdWludDI1NiB0b3RhbERyYWdvbnMgPSB0b3RhbFN1cHBseSgpOwogICAgICAgICAgICB1aW50MjU2IHJlc3VsdEluZGV4ID0gMDsKICAgICAgICAgICAgdWludDI1NiBkcmFnb25JZDsKCiAgICAgICAgICAgIGZvciAoZHJhZ29uSWQgPSAwOyBkcmFnb25JZCA8IHRvdGFsRHJhZ29uczsgZHJhZ29uSWQrKykgewogICAgICAgICAgICAgICAgaWYgKF9vd25zKF9vd25lciwgZHJhZ29uSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGRyYWdvbklkOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc09uU2FsZSgpIGV4dGVybmFsIHZpZXcgcmV0dXJucyh1aW50MjU2W10gYXZhaWxhYmxlVG9rZW5zKSB7CiAgICAgICAgaWYgKGRyYWdvbnNPblNhbGVDb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgdWludDI1NltdKDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVpbnQyNTZbXSBtZW1vcnkgcmVzdWx0ID0gbmV3IHVpbnQyNTZbXShkcmFnb25zT25TYWxlQ291bnQpOwogICAgICAgICAgICB1aW50MjU2IHRvdGFsRHJhZ29ucyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwogICAgICAgICAgICB1aW50MjU2IGRyYWdvbklkOwoKICAgICAgICAgICAgZm9yIChkcmFnb25JZCA9IDA7IGRyYWdvbklkIDwgdG90YWxEcmFnb25zOyBkcmFnb25JZCsrKSB7CiAgICAgICAgICAgICAgICBpZiAoX293bnMoYWRkcmVzcygwKSwgZHJhZ29uSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGRyYWdvbklkOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRva2Vuc0ZvckZpZ2h0KCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zKHVpbnQyNTZbXSBhdmFpbGFibGVUb2tlbnMpIHsKICAgICAgICB1aW50MjU2IGRyYWdvbnNGb3JGaWdodENvdW50ID0gZHJhZ29ucy5sZW5ndGggLSBkcmFnb25zT25TYWxlQ291bnQgLSBvd25lcnNoaXBUb2tlbkNvdW50W21zZy5zZW5kZXJdOwoKICAgICAgICBpZiAoZHJhZ29uc0ZvckZpZ2h0Q291bnQgPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbmV3IHVpbnQyNTZbXSgwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1aW50MjU2W10gbWVtb3J5IHJlc3VsdCA9IG5ldyB1aW50MjU2W10oZHJhZ29uc0ZvckZpZ2h0Q291bnQpOwogICAgICAgICAgICB1aW50MjU2IHRvdGFsRHJhZ29ucyA9IHRvdGFsU3VwcGx5KCk7CiAgICAgICAgICAgIHVpbnQyNTYgcmVzdWx0SW5kZXggPSAwOwogICAgICAgICAgICB1aW50MjU2IGRyYWdvbklkOwoKICAgICAgICAgICAgZm9yIChkcmFnb25JZCA9IDA7IGRyYWdvbklkIDwgdG90YWxEcmFnb25zOyBkcmFnb25JZCsrKSB7CiAgICAgICAgICAgICAgICBpZiAoIV9vd25zKGFkZHJlc3MoMCksIGRyYWdvbklkKSAmJiAhX293bnMoYWRkcmVzcyhtc2cuc2VuZGVyKSwgZHJhZ29uSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdEluZGV4XSA9IGRyYWdvbklkOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdEluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF9tZW1jcHkodWludCBfZGVzdCwgdWludCBfc3JjLCB1aW50IF9sZW4pIHByaXZhdGUgdmlldyB7CiAgICAgICAgLy8gQ29weSB3b3JkLWxlbmd0aCBjaHVua3Mgd2hpbGUgcG9zc2libGUKICAgICAgICBmb3IoOyBfbGVuID49IDMyOyBfbGVuIC09IDMyKSB7CiAgICAgICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgICAgIG1zdG9yZShfZGVzdCwgbWxvYWQoX3NyYykpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2Rlc3QgKz0gMzI7CiAgICAgICAgICAgIF9zcmMgKz0gMzI7CiAgICAgICAgfQoKICAgICAgICAvLyBDb3B5IHJlbWFpbmluZyBieXRlcwogICAgICAgIHVpbnQyNTYgbWFzayA9IDI1NiAqKiAoMzIgLSBfbGVuKSAtIDE7CiAgICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICBsZXQgc3JjcGFydCA6PSBhbmQobWxvYWQoX3NyYyksIG5vdChtYXNrKSkKICAgICAgICAgICAgbGV0IGRlc3RwYXJ0IDo9IGFuZChtbG9hZChfZGVzdCksIG1hc2spCiAgICAgICAgICAgIG1zdG9yZShfZGVzdCwgb3IoZGVzdHBhcnQsIHNyY3BhcnQpKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfdG9TdHJpbmcoYnl0ZXMzMls0XSBfcmF3Qnl0ZXMsIHVpbnQyNTYgX3N0cmluZ0xlbmd0aCkgcHJpdmF0ZSB2aWV3IHJldHVybnMgKHN0cmluZykgewogICAgICAgIHZhciBvdXRwdXRTdHJpbmcgPSBuZXcgc3RyaW5nKF9zdHJpbmdMZW5ndGgpOwogICAgICAgIHVpbnQyNTYgb3V0cHV0UHRyOwogICAgICAgIHVpbnQyNTYgYnl0ZXNQdHI7CgogICAgICAgIGFzc2VtYmx5IHsKICAgICAgICAgICAgb3V0cHV0UHRyIDo9IGFkZChvdXRwdXRTdHJpbmcsIDMyKQogICAgICAgICAgICBieXRlc1B0ciA6PSBfcmF3Qnl0ZXMKICAgICAgICB9CgogICAgICAgIF9tZW1jcHkob3V0cHV0UHRyLCBieXRlc1B0ciwgX3N0cmluZ0xlbmd0aCk7CgogICAgICAgIHJldHVybiBvdXRwdXRTdHJpbmc7CiAgICB9CgogICAgZnVuY3Rpb24gdG9rZW5NZXRhZGF0YSh1aW50MjU2IF90b2tlbklkLCBzdHJpbmcgX3ByZWZlcnJlZFRyYW5zcG9ydCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChzdHJpbmcgaW5mb1VybCkgewogICAgICAgIHJlcXVpcmUoZXJjNzIxTWV0YWRhdGEgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgYnl0ZXMzMls0XSBtZW1vcnkgYnVmZmVyOwogICAgICAgIHVpbnQyNTYgY291bnQ7CiAgICAgICAgKGJ1ZmZlciwgY291bnQpID0gZXJjNzIxTWV0YWRhdGEuZ2V0TWV0YWRhdGEoX3Rva2VuSWQsIF9wcmVmZXJyZWRUcmFuc3BvcnQpOwoKICAgICAgICByZXR1cm4gX3RvU3RyaW5nKGJ1ZmZlciwgY291bnQpOwogICAgfQp9Cgpjb250cmFjdCBEcmFnb25Db3JlIGlzIERyYWdvbk93bmVyc2hpcCB7CiAgICBmdW5jdGlvbiBnZXREcmFnb24odWludDI1NiBfaWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoCiAgICAgICAgICB1aW50OCBhdHRhY2ssCiAgICAgICAgICB1aW50OCBkZWZlbmNlLAogICAgICAgICAgdWludDggY29sb3IsCiAgICAgICAgICB1aW50OCBib2R5VHlwZSwKICAgICAgICAgIHVpbnQ4IGV5ZXNUeXBlLAogICAgICAgICAgdWludDggbW91dGhUeXBlLAogICAgICAgICAgdWludDggaG9ybnNUeXBlLAogICAgICAgICAgdWludDggd2luZ3NUeXBlLAogICAgICAgICAgdWludDE2IGhlYWx0aCwKICAgICAgICAgIHVpbnQyNTYgcHJpY2UsCiAgICAgICAgICB1aW50MjU2IHBvaW50cwogICAgKSB7CiAgICAgICAgRHJhZ29uIG1lbW9yeSBkID0gZHJhZ29uc1tfaWRdOwoKICAgICAgICBhdHRhY2sgPSBkLmF0dGFjazsKICAgICAgICBkZWZlbmNlID0gZC5kZWZlbmNlOwogICAgICAgIGNvbG9yID0gZC5jb2xvcjsKICAgICAgICBib2R5VHlwZSA9IGQuYm9keVR5cGU7CiAgICAgICAgZXllc1R5cGUgPSBkLmV5ZXNUeXBlOwogICAgICAgIG1vdXRoVHlwZSA9IGQubW91dGhUeXBlOwogICAgICAgIGhvcm5zVHlwZSA9IGQuaG9ybnNUeXBlOwogICAgICAgIHdpbmdzVHlwZSA9IGQud2luZ3NUeXBlOwogICAgICAgIGhlYWx0aCA9IGQuaGVhbHRoOwogICAgICAgIHByaWNlID0gZC5wcmljZTsKICAgICAgICBwb2ludHMgPSBkLnBvaW50czsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVEcmFnb24oCiAgICAgICAgdWludDggX2F0dGFjaywKICAgICAgICB1aW50OCBfZGVmZW5jZSwKICAgICAgICB1aW50OCBfY29sb3IsCiAgICAgICAgdWludDggX2JvZHlUeXBlLAogICAgICAgIHVpbnQ4IF9leWVzVHlwZSwKICAgICAgICB1aW50OCBfbW91dGhUeXBlLAogICAgICAgIHVpbnQ4IF9ob3Juc1R5cGUsCiAgICAgICAgdWludDggX3dpbmdzVHlwZSwKICAgICAgICB1aW50MTYgX2hlYWx0aCwKICAgICAgICB1aW50MTYgX3ByaWNlCiAgICAgICkgZXh0ZXJuYWwgb25seU93bmVyIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZURyYWdvbigKICAgICAgICAgIF9hdHRhY2ssCiAgICAgICAgICBfZGVmZW5jZSwKICAgICAgICAgIF9jb2xvciwKICAgICAgICAgIF9ib2R5VHlwZSwKICAgICAgICAgIF9leWVzVHlwZSwKICAgICAgICAgIF9tb3V0aFR5cGUsCiAgICAgICAgICBfaG9ybnNUeXBlLAogICAgICAgICAgX3dpbmdzVHlwZSwKICAgICAgICAgIF9oZWFsdGgsCiAgICAgICAgICBfcHJpY2UKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1eURyYWdvbih1aW50MjU2IF9pZCkgcGF5YWJsZSB7CiAgICAgIERyYWdvbiBtZW1vcnkgZCA9IGRyYWdvbnNbX2lkXTsKICAgICAgYWRkcmVzcyBkcmFnb25Pd25lciA9IGRyYWdvbkluZGV4VG9Pd25lcltfaWRdOwoKICAgICAgcmVxdWlyZShkcmFnb25Pd25lciA9PSBhZGRyZXNzKDApKTsKICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gZC5wcmljZSk7CgogICAgICBCaXJ0aChtc2cuc2VuZGVyLCBfaWQpOwoKICAgICAgZHJhZ29uc09uU2FsZUNvdW50LS07CgogICAgICBfdHJhbnNmZXIoMCwgbXNnLnNlbmRlciwgX2lkKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhd0JhbGFuY2UoKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIHVpbnQyNTYgYmFsYW5jZSA9IHRoaXMuYmFsYW5jZTsKICAgICAgICBjb250cmFjdE93bmVyLnRyYW5zZmVyKGJhbGFuY2UpOwogICAgfQp9Cgpjb250cmFjdCBSYW5kb20gewogIHVpbnQ2NCBfc2VlZCA9IDA7CgogIC8vIHJldHVybiBhIHBzZXVkbyByYW5kb20gbnVtYmVyIGJldHdlZW4gbG93ZXIgYW5kIHVwcGVyIGJvdW5kcwogIC8vIGdpdmVuIHRoZSBudW1iZXIgb2YgcHJldmlvdXMgYmxvY2tzIGl0IHNob3VsZCBoYXNoLgogIGZ1bmN0aW9uIHJhbmRvbSh1aW50NjQgdXBwZXIsIHVpbnQ4IHN0ZXApIHB1YmxpYyByZXR1cm5zICh1aW50NjQgcmFuZG9tTnVtYmVyKSB7CiAgICBfc2VlZCA9IHVpbnQ2NChrZWNjYWsyNTYoa2VjY2FrMjU2KGJsb2NrLmJsb2NraGFzaChibG9jay5udW1iZXIgLSBzdGVwKSwgX3NlZWQpLCBub3cpKTsKCiAgICByZXR1cm4gX3NlZWQgJSB1cHBlcjsKICB9Cn0KCmNvbnRyYWN0IERyYWdvbkZpZ2h0IGlzIERyYWdvbkNvcmUsIFJhbmRvbSB7CgogICAgZXZlbnQgRmlnaHQodWludDI1NiBfb3duZXJEcmFnb25JZCwKICAgICAgICAgICAgICAgIHVpbnQyNTYgX29wcG9uZW50RHJhZ29uSWQsCiAgICAgICAgICAgICAgICBib29sIGZpcnN0QXR0YWNrLAogICAgICAgICAgICAgICAgYm9vbCBzZWNvbmRBdHRhY2spOwoKICAgIGZ1bmN0aW9uIGZpZ2h0KHVpbnQyNTYgX293bmVyRHJhZ29uSWQsIHVpbnQyNTYgX29wcG9uZW50RHJhZ29uSWQpIGV4dGVybmFsIHJldHVybnMoCiAgICAgICAgYm9vbCBhdHRhY2sxLAogICAgICAgIGJvb2wgYXR0YWNrMiwKICAgICAgICBib29sIGF0dGFjazMsCiAgICAgICAgYm9vbCBhdHRhY2s0CiAgICAgICkgewogICAgICAgIHJlcXVpcmUoX293bnMobXNnLnNlbmRlciwgX293bmVyRHJhZ29uSWQpKTsKICAgICAgICByZXF1aXJlKCFfb3ducyhtc2cuc2VuZGVyLCBfb3Bwb25lbnREcmFnb25JZCkpOwogICAgICAgIHJlcXVpcmUoIV9vd25zKGFkZHJlc3MoMCksIF9vcHBvbmVudERyYWdvbklkKSk7CgogICAgICAgIERyYWdvbiBtZW1vcnkgb3duZXJEcmFnb24gPSBkcmFnb25zW19vd25lckRyYWdvbklkXTsKICAgICAgICBEcmFnb24gbWVtb3J5IG9wcG9uZW50RHJhZ29uID0gZHJhZ29uc1tfb3Bwb25lbnREcmFnb25JZF07CgogICAgICAgIGF0dGFjazEgPSBfcmFuZG9tQXR0YWNrKG93bmVyRHJhZ29uLmF0dGFjaywgb3Bwb25lbnREcmFnb24uZGVmZW5jZSwgMSk7CiAgICAgICAgYXR0YWNrMiA9IF9yYW5kb21BdHRhY2sob3duZXJEcmFnb24uZGVmZW5jZSwgb3Bwb25lbnREcmFnb24uYXR0YWNrLCAyKTsKICAgICAgICBhdHRhY2szID0gX3JhbmRvbUF0dGFjayhvd25lckRyYWdvbi5hdHRhY2ssIG9wcG9uZW50RHJhZ29uLmRlZmVuY2UsIDMpOwogICAgICAgIGF0dGFjazQgPSBfcmFuZG9tQXR0YWNrKG93bmVyRHJhZ29uLmRlZmVuY2UsIG9wcG9uZW50RHJhZ29uLmF0dGFjaywgNCk7CgogICAgICAgIHVpbnQ4IHBvaW50cyA9IChhdHRhY2sxID8gMSA6IDApICsgKGF0dGFjazIgPyAxIDogMCkgKyAoYXR0YWNrMyA/IDEgOiAwKSArIChhdHRhY2s0ID8gMSA6IDApOwoKICAgICAgICBvd25lckRyYWdvbi5wb2ludHMgKz0gcG9pbnRzOwoKICAgICAgICBGaWdodChfb3duZXJEcmFnb25JZCwgX29wcG9uZW50RHJhZ29uSWQsIGF0dGFjazEsIGF0dGFjazIpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9yYW5kb21BdHRhY2sodWludDggX293bmVyRHJhZ29uQW1vdW50LCB1aW50OCBfb3Bwb25lbnREcmFnb25BbW91bnQsIHVpbnQ4IF9zdGVwKSBwcml2YXRlCiAgICByZXR1cm5zKGJvb2wgcmVzdWx0KSB7CiAgICAgICAgdWludDY0IG93bmVyVmFsdWUgPSByYW5kb20odWludDY0KF9vd25lckRyYWdvbkFtb3VudCksIF9zdGVwKTsKICAgICAgICB1aW50NjQgb3Bwb25lbnRWYWx1ZSA9IHJhbmRvbSh1aW50NjQoX29wcG9uZW50RHJhZ29uQW1vdW50KSwgX3N0ZXApOwoKICAgICAgICByZXR1cm4gb3duZXJWYWx1ZSA+IG9wcG9uZW50VmFsdWU7CiAgICB9Cn0KCmNvbnRyYWN0IERyYWdvblRlc3QgaXMgRHJhZ29uRmlnaHQgewoKICAgIGZ1bmN0aW9uIGNyZWF0ZVRlc3REYXRhKCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgLy8gMC4wMDEgZXRoCiAgICAgICAgdWludDI1NiBwcmljZSA9IDEwMDAwMDAwMDAwMDAwMDA7CgogICAgICAgIHVpbnQgbmV3RHJhZ29uMUlkID0gX2NyZWF0ZURyYWdvbigxLCAyLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCBwcmljZSk7CiAgICAgICAgX3RyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIG5ld0RyYWdvbjFJZCk7CiAgICAgICAgZHJhZ29uc09uU2FsZUNvdW50LS07CgogICAgICAgIHVpbnQgbmV3RHJhZ29uMklkID0gX2NyZWF0ZURyYWdvbigyLCA2LCAyLCAyLCAyLCAyLCAyLCAyLCAyLCBwcmljZSk7CiAgICAgICAgX3RyYW5zZmVyKDAsIG1zZy5zZW5kZXIsIG5ld0RyYWdvbjJJZCk7CiAgICAgICAgZHJhZ29uc09uU2FsZUNvdW50LS07CgogICAgICAgIC8vIEZyZWUgZHJhZ29ucwogICAgICAgIF9jcmVhdGVEcmFnb24oMywgMiwgMywgMywgMywgMSwgMywgMywgMywgcHJpY2UpOwogICAgICAgIF9jcmVhdGVEcmFnb24oNCwgNCwgNCwgNCwgMiwgMiwgMiwgNCwgNCwgcHJpY2UpOwogICAgfQp9'.
	

]
