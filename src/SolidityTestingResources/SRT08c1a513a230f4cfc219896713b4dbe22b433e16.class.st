Class {
	#name : #SRT08c1a513a230f4cfc219896713b4dbe22b433e16,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT08c1a513a230f4cfc219896713b4dbe22b433e16 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKY29udHJhY3QgVG9rZW4gewoKICAgIC8vdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSk7CiAgICAKICAgIC8vZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcmV0dXJucyAoYm9vbCBvayk7CiAgICAKICAgIC8vZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSwgYnl0ZXMgZGF0YSkgcmV0dXJucyAoYm9vbCBvayk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBFUkMyMjNSZWNlaXZlciB7CiAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9zZW5kZXIsIGFkZHJlc3MgX29yaWdpbiwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIG9rKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBUb2tlbiB7CiAgICB1aW50MjU2IF90b3RhbFN1cHBseTsKICAgIAogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHRvdGFsU3VwcGx5KSB7CiAgICAgICAgdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHk7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL0RlZmF1bHQgYXNzdW1lcyB0b3RhbFN1cHBseSBjYW4ndCBiZSBvdmVyIG1heCAoMl4yNTYgLSAxKS4KICAgICAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgICAgIC8vaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICAvL2lmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgICAgICBiYWxhbmNlc1tfZnJvbV0gLT0gX3ZhbHVlOwogICAgICAgICAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfZnJvbV0gPSBub3c7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBsYXN0U2VlbihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxhc3Rfc2Vlbltfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICBsYXN0X3NlZW5bX3NwZW5kZXJdID0gbm93OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGxhc3Rfc2VlbjsKfQoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBnZXRPd25lcigpIHZpZXcgcHVibGljIHJldHVybnMgKGFkZHJlc3MpewogICAgcmV0dXJuIG93bmVyOwogIH0KICAKfQoKY29udHJhY3QgU3RhbmRhcmQyMjNSZWNlaXZlciBpcyBFUkMyMjNSZWNlaXZlciB7CiAgVGtuIHRrbjsKCiAgc3RydWN0IFRrbiB7CiAgICBhZGRyZXNzIGFkZHI7CiAgICBhZGRyZXNzIHNlbmRlcjsKICAgIGFkZHJlc3Mgb3JpZ2luOwogICAgdWludDI1NiB2YWx1ZTsKICAgIGJ5dGVzIGRhdGE7CiAgICBieXRlczQgc2lnOwogIH0KCiAgZnVuY3Rpb24gdG9rZW5GYWxsYmFjayhhZGRyZXNzIF9zZW5kZXIsIGFkZHJlc3MgX29yaWdpbiwgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIG9rKSB7CiAgICAvL2lmICghc3VwcG9ydHNUb2tlbihtc2cuc2VuZGVyKSkgcmV0dXJuIGZhbHNlOwoKICAgIC8vIFByb2JsZW06IFRoaXMgd2lsbCBkbyBhIHNzdG9yZSB3aGljaCBpcyBleHBlbnNpdmUgZ2FzIHdpc2UuIEZpbmQgYSB3YXkgdG8ga2VlcCBpdCBpbiBtZW1vcnkuCiAgICB0a24gPSBUa24obXNnLnNlbmRlciwgX3NlbmRlciwgX29yaWdpbiwgX3ZhbHVlLCBfZGF0YSwgZ2V0U2lnKF9kYXRhKSk7CiAgICBfX2lzVG9rZW5GYWxsYmFjayA9IHRydWU7CiAgICBpZiAoIWFkZHJlc3ModGhpcykuZGVsZWdhdGVjYWxsKF9kYXRhKSkgcmV0dXJuIGZhbHNlOwoKICAgIC8vIGF2b2lkIGRvaW5nIGFuIG92ZXJ3cml0ZSB0byAudG9rZW4sIHdoaWNoIHdvdWxkIGJlIG1vcmUgZXhwZW5zaXZlCiAgICAvLyBtYWtlcyBhY2Nlc3NpbmcgLnRrbiB2YWx1ZXMgb3V0c2lkZSB0b2tlblBheWFibGUgZnVuY3Rpb25zIHVuc2FmZQogICAgX19pc1Rva2VuRmFsbGJhY2sgPSBmYWxzZTsKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGdldFNpZyhieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChieXRlczQgc2lnKSB7CiAgICB1aW50IGwgPSBfZGF0YS5sZW5ndGggPCA0ID8gX2RhdGEubGVuZ3RoIDogNDsKICAgIGZvciAodWludCBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICBzaWcgPSBieXRlczQodWludChzaWcpICsgdWludChfZGF0YVtpXSkgKiAoMiAqKiAoOCAqIChsIC0gMSAtIGkpKSkpOwogICAgfQogIH0KCiAgYm9vbCBfX2lzVG9rZW5GYWxsYmFjazsKCiAgbW9kaWZpZXIgdG9rZW5QYXlhYmxlIHsKICAgIGlmICghX19pc1Rva2VuRmFsbGJhY2spIHRocm93OwogICAgXzsKICB9CgogIC8vZnVuY3Rpb24gc3VwcG9ydHNUb2tlbihhZGRyZXNzIHRva2VuKSByZXR1cm5zIChib29sKTsKfQoKY29udHJhY3QgU3RhbmRhcmQyMjNUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKICAvL2Z1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIG9yIGFub3RoZXIgY29udHJhY3Qgd2FudHMgdG8gdHJhbnNmZXIgZnVuZHMKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vZmlsdGVyaW5nIGlmIHRoZSB0YXJnZXQgaXMgYSBjb250cmFjdCB3aXRoIGJ5dGVjb2RlIGluc2lkZSBpdAogICAgaWYgKCFzdXBlci50cmFuc2ZlcihfdG8sIF92YWx1ZSkpIHRocm93OyAvLyBkbyBhIG5vcm1hbCB0b2tlbiB0cmFuc2ZlcgogICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgcmV0dXJuIGNvbnRyYWN0RmFsbGJhY2sobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoIXN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpKSB0aHJvdzsgLy8gZG8gYSBub3JtYWwgdG9rZW4gdHJhbnNmZXIKICAgIGlmIChpc0NvbnRyYWN0KF90bykpIHJldHVybiBjb250cmFjdEZhbGxiYWNrKF9mcm9tLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgbGFzdF9zZWVuW19mcm9tXSA9IG5vdzsKICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvL2Z1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL3JldHVybiB0cmFuc2ZlcihfdG8sIF92YWx1ZSwgbmV3IGJ5dGVzKDApKTsKICAvL30KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICByZXR1cm4gdHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSwgbmV3IGJ5dGVzKDApKTsKICAgIGxhc3Rfc2VlbltfZnJvbV0gPSBub3c7CiAgICBsYXN0X3NlZW5bX3RvXSA9IG5vdzsKICB9CgogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0cmFuc2FjdGlvbiB0YXJnZXQgaXMgYSBjb250cmFjdAogIGZ1bmN0aW9uIGNvbnRyYWN0RmFsbGJhY2soYWRkcmVzcyBfb3JpZ2luLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgRVJDMjIzUmVjZWl2ZXIgcmVjaWV2ZXIgPSBFUkMyMjNSZWNlaXZlcihfdG8pOwogICAgcmV0dXJuIHJlY2lldmVyLnRva2VuRmFsbGJhY2sobXNnLnNlbmRlciwgX29yaWdpbiwgX3ZhbHVlLCBfZGF0YSk7CiAgfQoKICAvL2Fzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgLy8gcmV0cmlldmUgdGhlIHNpemUgb2YgdGhlIGNvZGUgb24gdGFyZ2V0IGFkZHJlc3MsIHRoaXMgbmVlZHMgYXNzZW1ibHkKICAgIHVpbnQgbGVuZ3RoOwogICAgYXNzZW1ibHkgeyBsZW5ndGggOj0gZXh0Y29kZXNpemUoX2FkZHIpIH0KICAgIHJldHVybiBsZW5ndGggPiAwOwogIH0KfQoKY29udHJhY3QgQ2lwaHMgaXMgU3RhbmRhcmQyMjNSZWNlaXZlciwgU3RhbmRhcmQyMjNUb2tlbiwgT3duYWJsZSB7CgogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogIAogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJDaXBocyI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiQ0lQSFMiOwogIHVpbnQ4IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwoKICB1aW50MjU2IHB1YmxpYyByYXRlID0gMTAwMDAwMDsKICBib29sIHByb3Bvc2UgPSBmYWxzZTsKICB1aW50MjU2IHByb3Nwb3NhbF90aW1lID0gMDsKICB1aW50MjU2IHJhaXNlZEFtb3VudCA9IDA7CiAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgSU5JVElBTF9TVVBQTFkgPSA3MDAwMDAwZTE4OwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1BWF9TVVBQTFkgPSA4NjAwMDAwMDAwMDBlMTg7CiAgLy91aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBhZGRyZXNzW10gaW52ZXN0b3JzOwogIAogIHVpbnQyNTYgdXAgPSAwOwogIHVpbnQyNTYgZG93biA9IDA7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSB2b3RlczsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyB0cmFja2FibGU7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nICh1aW50ID0+IHVpbnQyNTYpKSBwdWJsaWMgdHJhY2thYmxlX3JlY29yZDsKICAKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBiYW5uYWJsZTsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIHN1cHBvcnRfYmFuOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgaW50ZXJuYWwgYWdhaW5zdF9iYW47CgogIC8vZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgLy9ldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBCb3VnaHRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBWb3RlcyhhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIGJ1cm5lciwgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgTWludCh1aW50MjU2IHZhbHVlKTsKICAKICBmdW5jdGlvbiBDaXBocygpIHB1YmxpYyB7CiAgICBfdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gSU5JVElBTF9TVVBQTFk7CiAgfQoKICBmdW5jdGlvbiBpbml0aWFsaXplX3Byb3Bvc2FsKCkgcHVibGljIHsKCiAgICBpZihwcm9wb3NlKSB0aHJvdzsKICAgIHByb3Bvc2UgPSB0cnVlOwogICAgcHJvc3Bvc2FsX3RpbWUgPSBub3c7CgogIH0KICAKICBmdW5jdGlvbiBpc19wcm9wb3NhbF9zdXBwb3J0ZWQoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UpIHRocm93OwogICAgaWYoZG93bi5tdWwoNCkgPCB1cCkKICAgIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIG1vZGlmaWVyIGNhbk1pbnQoKSB7CiAgICBpZihwcm9wb3NlICYmIGlzX3Byb3Bvc2FsX3N1cHBvcnRlZCgpICYmIG5vdyA+IHByb3Nwb3NhbF90aW1lLmFkZCg3ICogMSBkYXlzKSkKICAgIF87CiAgICBlbHNlCiAgICB0aHJvdzsKICB9CiAgCiAgZnVuY3Rpb24gZGlzdHJpYnV0ZV90b2tlbigpCiAgewogICAgICAgdWludDI1NiBpbnZlc3RvcnNfbnVtID0gaW52ZXN0b3JzLmxlbmd0aDsKICAgICAgIHVpbnQyNTYgYW1vdW50ID0gKDEwMDAwMDBlMTgtMTAwMCkvaW52ZXN0b3JzX251bTsKICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBpbnZlc3RvcnNfbnVtOyBpKyspCiAgICAgICB7CiAgICAgICAgICAgaWYobGFzdF9zZWVuW2ludmVzdG9yc1tpXV0uYWRkKDkwICogMSBkYXlzKSA+IG5vdykKICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tpbnZlc3RvcnNbaV1dICs9IGFtb3VudDsKICAgICAgICAgICAgICAgIGxhc3Rfc2VlbltpbnZlc3RvcnNbaV1dID0gbm93OwogICAgICAgICAgICB9CiAgICAgICB9CiAgICB9CgoKICBmdW5jdGlvbiBtaW50KCkgLypjYW5NaW50Ki8gcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIAogICAgaWYocHJvcG9zZSAmJiBub3cgPj0gcHJvc3Bvc2FsX3RpbWUuYWRkKDcgKiAxIGRheXMpKXsKICAgICAgICB1aW50MjU2IF9hbW91bnQgPSAxMDAwMDAwZTE4OwogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5hZGQoX2Ftb3VudCk7CiAgICAgICAgaWYoX3RvdGFsU3VwcGx5IDw9IE1BWF9TVVBQTFkgJiYgaXNfcHJvcG9zYWxfc3VwcG9ydGVkKCkpCiAgICAgICAgewogICAgICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uYWRkKDEwMDApOwogICAgICAgICAgICAvL1RyYW5zZmVyKGFkZHJlc3MoMCksIF90bywgX2Ftb3VudCk7CiAgICAgICAgICAgIHByb3Bvc2UgPSBmYWxzZTsKICAgICAgICAgICAgcHJvc3Bvc2FsX3RpbWUgPSAwOwogICAgICAgICAgICB1cCA9IDA7CiAgICAgICAgICAgIGRvd24gPSAwOwogICAgICAgICAgICBkaXN0cmlidXRlX3Rva2VuKCk7CiAgICAgICAgICAgIE1pbnQoX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBwcm9wb3NlID0gZmFsc2U7CiAgICAgICAgICAgIHByb3Nwb3NhbF90aW1lID0gMDsKICAgICAgICAgICAgdXAgPSAwOwogICAgICAgICAgICBkb3duID0gMDsKICAgICAgICAgICAgLy9yZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICAvL3JldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHN1cHBvcnRfcHJvcG9zYWwoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UgfHwgdm90ZXNbbXNnLnNlbmRlcl0gPT0gMSkgdGhyb3c7CiAgICAvL2ZpcnN0IGNoZWNrIGJhbGFuY2UgdG8gYmUgbW9yZSB0aGFuIDEwMCBDaXBocwogICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAxMDBlMTgpCiAgICB7CiAgICAgICAgLy9vbmx5IHZvdGUgb25jZQogICAgICAgIHZvdGVzW21zZy5zZW5kZXJdID0gMTsKICAgICAgICB1cCsrOwogICAgICAgIG1pbnQoKTsKICAgICAgICBWb3Rlcyhtc2cuc2VuZGVyLCAxKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9ZWxzZQogICAgewogICAgICAgIC8vbm8gc3VmZmljaWVudCBmdW5kcyB0byBjYXJyeSBvdXQgdm90aW5nIGNvbnNlbnN1cwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFnYWluc3RfcHJvcG9zYWwoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UgfHwgdm90ZXNbbXNnLnNlbmRlcl0gPT0gMSkgdGhyb3c7CiAgICAvL2ZpcnN0IGNoZWNrIGJhbGFuY2UgdG8gYmUgbW9yZSB0aGFuIDEwMCBDaXBocwogICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAxMDBlMTgpCiAgICB7CiAgICAgICAgLy9vbmx5IHZvdGUgb25jZQogICAgICAgIHZvdGVzW21zZy5zZW5kZXJdID0gMTsKICAgICAgICBkb3duKys7CiAgICAgICAgbWludCgpOwogICAgICAgIFZvdGVzKG1zZy5zZW5kZXIsIDEpOwogICAgICAgIHJldHVybiB0cnVlOwoKICAgIH1lbHNlCiAgICB7CiAgICAgICAgLy9ubyBzdWZmaWNpZW50IGZ1bmRzIHRvIGNhcnJ5IG91dCB2b3RpbmcgY29uc2Vuc3VzCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICAKICBmdW5jdGlvbiBiYW5fYWNjb3VudChhZGRyZXNzIF9iYW5uYWJsZV9hZGRyZXNzKSBpbnRlcm5hbHsKICAgICAgICBpZihiYWxhbmNlc1tfYmFubmFibGVfYWRkcmVzc10gPiAwKQogICAgICAgIHsKICAgICAgICAgIHRyYW5zZmVyRnJvbShfYmFubmFibGVfYWRkcmVzcywgb3duZXIsIGJhbGFuY2VzW19iYW5uYWJsZV9hZGRyZXNzXSk7CiAgICAgICAgfQogICAgICAgIGRlbGV0ZSBiYWxhbmNlc1tfYmFubmFibGVfYWRkcmVzc107CiAgICAgICAgCiAgICAgICAgdWludDI1NiBpbnZlc3RvcnNfbnVtID0gaW52ZXN0b3JzLmxlbmd0aDsKICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaW52ZXN0b3JzX251bTsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgaWYoaW52ZXN0b3JzW2ldID09IF9iYW5uYWJsZV9hZGRyZXNzKXsKICAgICAgICAgICAgICAgIGRlbGV0ZSBpbnZlc3RvcnNbaV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIC8vZGVsZXRlIGludmVzdG9yc1tdOwogIH0KICAKICBmdW5jdGlvbiBiYW5fY2hlY2soYWRkcmVzcyBfYmFubmFibGVfYWRkcmVzcykgaW50ZXJuYWwKICB7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICAvL3VpbnQyNTYgdGltZV9kaWZmID0gbm93LnN1YihiYW5uYWJsZVtfYmFubmFibGVfYWRkcmVzc10pOyAKICAgIGlmKG5vdy5zdWIoYmFubmFibGVbX2Jhbm5hYmxlX2FkZHJlc3NdKSA+IDAuNSAqIDEgZGF5cykKICAgIHsKICAgICAgICBpZihhZ2FpbnN0X2JhbltfYmFubmFibGVfYWRkcmVzc10ubXVsKDQpIDwgc3VwcG9ydF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdKQogICAgICAgIHsKICAgICAgICAgICAgYmFuX2FjY291bnQoX2Jhbm5hYmxlX2FkZHJlc3MpOwogICAgICAgIH0KICAgIH0KICB9CiAgCiAgZnVuY3Rpb24gaW5pdGlhbGl6ZV9iYW5uYWJsZShhZGRyZXNzIF9iYW5uYWJsZV9hZGRyZXNzKSBwdWJsaWMgewogICAgYmFubmFibGVbX2Jhbm5hYmxlX2FkZHJlc3NdID0gbm93OwogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogIH0KICAKICBmdW5jdGlvbiBzdXBwb3J0X2Jhbl9vZihhZGRyZXNzIF9iYW5uYWJsZV9hZGRyZXNzKSBwdWJsaWMKICB7CiAgICByZXF1aXJlKGJhbm5hYmxlW19iYW5uYWJsZV9hZGRyZXNzXSA+IDApOwogICAgc3VwcG9ydF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdID0gc3VwcG9ydF9iYW5bX2Jhbm5hYmxlX2FkZHJlc3NdLmFkZCgxKTsKICAgIGJhbl9jaGVjayhfYmFubmFibGVfYWRkcmVzcyk7CiAgfQogIAogIGZ1bmN0aW9uIGFnYWluc3RfYmFuX29mKGFkZHJlc3MgX2Jhbm5hYmxlX2FkZHJlc3MpIHB1YmxpYwogIHsKICAgIHJlcXVpcmUoYmFubmFibGVbX2Jhbm5hYmxlX2FkZHJlc3NdID4gMCk7CiAgICBhZ2FpbnN0X2JhbltfYmFubmFibGVfYWRkcmVzc10gPSBhZ2FpbnN0X2JhbltfYmFubmFibGVfYWRkcmVzc10uYWRkKDEpOwogICAgYmFuX2NoZWNrKF9iYW5uYWJsZV9hZGRyZXNzKTsKICB9CgogIGZ1bmN0aW9uIHRyYWNrKGFkZHJlc3MgX3RyYWNrYWJsZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIC8vICJ0cmFja2FibGUgYWRkZWQsIHZvdGUgbGlrZSBvciBkaXNsaWtlIHVzaW5nIHRoZSBhZGRyZXNzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgdHJhY2thYmxlIjsKICAgIHRyYWNrYWJsZVtfdHJhY2thYmxlXVttc2cuc2VuZGVyXSA9IDE7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGxpa2VfdHJhY2thYmxlKGFkZHJlc3MgX3RyYWNrYWJsZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIGlmKHRyYWNrYWJsZVtfdHJhY2thYmxlXVttc2cuc2VuZGVyXSAhPSAxKQogICAgewogICAgICAgIHRyYWNrYWJsZVtfdHJhY2thYmxlXVttc2cuc2VuZGVyXSA9IDE7CiAgICAgICAgdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsxXSA9IHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMV0gKyAxOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZGlzbGlrZV90cmFja2FibGUoYWRkcmVzcyBfdHJhY2thYmxlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgaWYodHJhY2thYmxlW190cmFja2FibGVdW21zZy5zZW5kZXJdICE9IDEpCiAgICB7CiAgICAgICAgdHJhY2thYmxlW190cmFja2FibGVdW21zZy5zZW5kZXJdID0gMTsKICAgICAgICB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzJdID0gdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsyXSArIDE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiB0cmFja2FibGVfbGlrZXMoYWRkcmVzcyBfdHJhY2thYmxlKSBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBudW0gPSAwOwogICAgLy9pZih0cmFja2FibGVbX3RyYWNrYWJsZV0pCiAgICAvL3sKCiAgICAgICAgbnVtID0gdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsxXTsKCiAgICAvL30KICAgIHJldHVybiBudW07CiAgfQoKICBmdW5jdGlvbiB0cmFja2FibGVfZGlzbGlrZXMoYWRkcmVzcyBfdHJhY2thYmxlKSBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBudW0gPSAwOwogICAgbnVtID0gdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsyXTsKICAgIHJldHVybiBudW07CiAgfQogICAgCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewoKICAgIGJ1eVRva2VucygpOwoKICB9CiAgIAogIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgCiAgICAvL3JlcXVpcmUocHJvcG9zZSk7CiAgICAKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKGdldFJhdGUoKSk7CiAgICAKICAgIHRva2VucyA9IHRva2Vucy5kaXYoMSBldGhlcik7CiAgICAKICAgIEJvdWdodFRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbnMpOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2Vucyk7CiAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKHRva2Vucyk7CiAgICBfdG90YWxTdXBwbHkuc3ViKHRva2Vucyk7CgogICAgcmFpc2VkQW1vdW50ID0gcmFpc2VkQW1vdW50LmFkZChtc2cudmFsdWUpOwogICAgCiAgICBpbnZlc3RvcnMucHVzaChtc2cuc2VuZGVyKSAtMTsKICAgIAogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgLy9vd25lci50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KICAKICBmdW5jdGlvbiBnZXRJbnZlc3RvcnMoKSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzW10pewogICAgICByZXR1cm4gaW52ZXN0b3JzOwogIH0KCiAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50MjU2IF9yYXRlKSBwdWJsaWMgb25seU93bmVyewogICAgICByYXRlID0gX3JhdGU7CiAgfQogIAogIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgIAogICAgICByZXR1cm4gcmF0ZTsKICAgICAgCiAgfQoKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICB9CiAgCiAgIGZ1bmN0aW9uIHNlbmRFdGhlclRvT3duZXIoKSBwdWJsaWMgb25seU93bmVyIHsgICAgICAgICAgICAgICAgICAgICAgIAogICAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveSgpIHB1YmxpYyBvbmx5T3duZXIgewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9Cgp9'.
	

]
