Class {
	#name : #SRT618bb37e5644da4946f052c50d7819f95d327c8b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT618bb37e5644da4946f052c50d7819f95d327c8b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKgogICAgTWFuYWdlcyBvd25lcnNoaXAgYW5kIHBlcm1pc3Npb25zIGZvciB0aGUgd2hvbGUgY29udHJhY3QuCiovCgpjb250cmFjdCBCTEFjY2VzcyB7CgogICAgYWRkcmVzcyBwdWJsaWMgbWFpbkFkZHJlc3M7IC8vTWFpbiBDb250cmFjdCBBZGRyZXNzCiAgICBldmVudCBVcGRhdGVkTWFpbkFjY291bnQoYWRkcmVzcyBfbmV3TWFpbkFkZHJlc3MpOwoKICAgIGZ1bmN0aW9uIEJMQWNjZXNzKCkgcHVibGljIHsKICAgICAgICBtYWluQWRkcmVzcyA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seVByaW1hcnkoKSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1haW5BZGRyZXNzKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vQWxsb3dzIHRvIGNoYW5nZSB0aGUgcHJpbWFyeSBhY2NvdW50IGZvciB0aGUgY29udHJhY3QKICAgIGZ1bmN0aW9uIHNldFByaW1hcnlBY2NvdW50KGFkZHJlc3MgX25ld01haW5BZGRyZXNzKSBleHRlcm5hbCBvbmx5UHJpbWFyeSB7CiAgICAgICAgcmVxdWlyZShfbmV3TWFpbkFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgbWFpbkFkZHJlc3MgPSBfbmV3TWFpbkFkZHJlc3M7CiAgICAgICAgVXBkYXRlZE1haW5BY2NvdW50KF9uZXdNYWluQWRkcmVzcyk7CiAgICB9Cgp9CgovKgogSW50ZXJmYWNlIGZvciBvdXIgc2VwYXJhdGUgZXRlcm5hbCBzdG9yYWdlLgoqLwoKY29udHJhY3QgRGF0YVN0b3JhZ2VJbnRlcmZhY2UgewogICAgZnVuY3Rpb24gZ2V0VUludChieXRlczMyIHJlY29yZCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogICAgZnVuY3Rpb24gc2V0VUludChieXRlczMyIHJlY29yZCwgdWludCB2YWx1ZSkgcHVibGljOwogICAgZnVuY3Rpb24gZ2V0QWRkKGJ5dGVzMzIgcmVjb3JkKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYWRkcmVzcyk7CiAgICBmdW5jdGlvbiBzZXRBZGQoYnl0ZXMzMiByZWNvcmQsIGFkZHJlc3MgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldEJ5dGVzMzIoYnl0ZXMzMiByZWNvcmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChieXRlczMyKTsKICAgIGZ1bmN0aW9uIHNldEJ5dGVzMzIoYnl0ZXMzMiByZWNvcmQsIGJ5dGVzMzIgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGdldEJvb2woYnl0ZXMzMiByZWNvcmQpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIHNldEJvb2woYnl0ZXMzMiByZWNvcmQsIGJvb2wgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHdpdGhkcmF3KGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYzsKfQoKLyoKIFdyYXBwZXIgYXJvdW5kIERhdGEgU3RvcmFnZSBpbnRlcmZhY2UKKi8KCmNvbnRyYWN0IEJMU3RvcmFnZSBpcyBCTEFjY2VzcyB7CgogICAgRGF0YVN0b3JhZ2VJbnRlcmZhY2UgaW50ZXJuYWwgczsKICAgIGFkZHJlc3MgcHVibGljIHN0b3JhZ2VBZGRyZXNzOwoKICAgIGV2ZW50IFN0b3JhZ2VVcGRhdGVkKGFkZHJlc3MgX25ld1N0b3JhZ2VBZGRyZXNzKTsKCiAgICBmdW5jdGlvbiBCTFN0b3JhZ2UoKSBwdWJsaWMgewogICAgICAgIHMgPSBEYXRhU3RvcmFnZUludGVyZmFjZShtYWluQWRkcmVzcyk7CiAgICB9CgogICAgLy8gYWxsb3dzIHRvIHNldHVwIGEgbmV3IFN0b3JhZ2UgYWRkcmVzcy4gU2hvdWxkIG5ldmVyIGJlIG5lZWRlZCBidXQgeW91IG5ldmVyIGtub3chCiAgICBmdW5jdGlvbiBzZXREYXRhU3RvcmFnZShhZGRyZXNzIG5ld0FkZHJlc3MpIHB1YmxpYyBvbmx5UHJpbWFyeSB7CiAgICAgICAgcyA9IERhdGFTdG9yYWdlSW50ZXJmYWNlKG5ld0FkZHJlc3MpOwogICAgICAgIHN0b3JhZ2VBZGRyZXNzID0gbmV3QWRkcmVzczsKICAgICAgICBTdG9yYWdlVXBkYXRlZChuZXdBZGRyZXNzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRLZXkodWludCB4LCB1aW50IHkpIGludGVybmFsIHB1cmUgcmV0dXJucyhieXRlczMyIGtleSkgewogICAgICAgIGtleSA9IGtlY2NhazI1Nih4LCAiOiIsIHkpOwogICAgfQp9CgoKY29udHJhY3QgQkxCYWxhbmNlcyBpcyBCTFN0b3JhZ2UgewoKICAgIGV2ZW50IFdpdGhkcmF3QmFsYW5jZShhZGRyZXNzIGluZGV4ZWQgb3duZXIsIHVpbnQgYW1vdW50KTsKICAgIGV2ZW50IEFsbG93YW5jZUdyYW50ZWQoYWRkcmVzcyBpbmRleGVkIG93bmVyLCB1aW50IF9hbW91bnQpOwogICAgZXZlbnQgU2VudEZlZVRvUGxhdGZvcm0odWludCBhbW91bnQpOwogICAgZXZlbnQgU2VudEFtb3VudFRvT3duZXIodWludCBhbW91bnQsIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgLy8gZ2V0IHRoZSBiYWxhbmNlIGZvciBhIGdpdmVuIGFjY291bnQKICAgIGZ1bmN0aW9uIGdldEJhbGFuY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHMuZ2V0VUludChrZWNjYWsyNTYobXNnLnNlbmRlciwgImJhbGFuY2UiKSk7CiAgICB9CgogICAgLy8gZ2V0IHRoZSBiYWxhbmNlIGZvciBhIGdpdmVuIGFjY291bnQKICAgIGZ1bmN0aW9uIGdldEFjY291bnRCYWxhbmNlKGFkZHJlc3MgX2FjY291bnQpIHB1YmxpYyB2aWV3IG9ubHlQcmltYXJ5IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KGtlY2NhazI1NihfYWNjb3VudCwgImJhbGFuY2UiKSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWNjb3VudEFsbG93YW5jZShhZGRyZXNzIF9hY2NvdW50KSBwdWJsaWMgdmlldyBvbmx5UHJpbWFyeSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHMuZ2V0VUludChrZWNjYWsyNTYoX2FjY291bnQsICJwcm9tb0FsbG93YW5jZSIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNeUFsbG93YW5jZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KGtlY2NhazI1Nihtc2cuc2VuZGVyLCAicHJvbW9BbGxvd2FuY2UiKSk7CiAgICB9CgogICAgLy8gYWxsb3cgYSBibG9jayBhbGxvd2FuY2UgZm9yIHByb21vIGFuZCBlYXJseSBiZXRhIHVzZXJzCiAgICBmdW5jdGlvbiBncmFudEFsbG93YW5jZShhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50IGFsbG93YW5jZSkgcHVibGljIG9ubHlQcmltYXJ5IHsKICAgICAgICB1aW50IGV4aXN0aW5nQWxsb3dhbmNlID0gcy5nZXRVSW50KGtlY2NhazI1NihiZW5lZmljaWFyeSwgInByb21vQWxsb3dhbmNlIikpOwogICAgICAgIGV4aXN0aW5nQWxsb3dhbmNlICs9IGFsbG93YW5jZTsKICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KGJlbmVmaWNpYXJ5LCAicHJvbW9BbGxvd2FuY2UiKSwgZXhpc3RpbmdBbGxvd2FuY2UpOwogICAgICAgIEFsbG93YW5jZUdyYW50ZWQoYmVuZWZpY2lhcnksIGFsbG93YW5jZSk7CiAgICB9CgogICAgLy8gd2l0aGRyYXcgdGhlIGN1cnJlbnQgYmFsYW5jZQogICAgZnVuY3Rpb24gd2l0aGRyYXcoKSBwdWJsaWMgewogICAgICAgIHVpbnQgYmFsYW5jZSA9IHMuZ2V0VUludChrZWNjYWsyNTYobXNnLnNlbmRlciwgImJhbGFuY2UiKSk7CiAgICAgICAgcy53aXRoZHJhdyhtc2cuc2VuZGVyKTsKICAgICAgICBXaXRoZHJhd0JhbGFuY2UobXNnLnNlbmRlciwgYmFsYW5jZSk7CiAgICB9CgogICAgLy8gVHJhZGluZyBhbmQgYnV5aW5nIGJhbGFuY2VzIGZsb3cKICAgIGZ1bmN0aW9uIHJld2FyZFBhcnRpZXMgKGFkZHJlc3Mgb3duZXIsIHVpbnQgZmVlUGVyY2VudGFnZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgZmVlID0gbXNnLnZhbHVlICogZmVlUGVyY2VudGFnZSAvIDEwMDsKICAgICAgICByZXdhcmRDb250cmFjdChmZWUpOwogICAgICAgIHJld2FyZFByZXZpb3VzT3duZXIob3duZXIsIG1zZy52YWx1ZSAtIGZlZSk7CiAgICB9CgogICAgLy8gY29udHJhY3QgY29tbWlzc2lvbnMKICAgIGZ1bmN0aW9uIHJld2FyZENvbnRyYWN0ICh1aW50IGZlZSkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgbWFpbkJhbGFuY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KG1haW5BZGRyZXNzLCAiYmFsYW5jZSIpKTsKICAgICAgICBtYWluQmFsYW5jZSArPSBmZWU7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihtYWluQWRkcmVzcywgImJhbGFuY2UiKSwgbWFpbkJhbGFuY2UpOwogICAgICAgIFNlbnRGZWVUb1BsYXRmb3JtKGZlZSk7CiAgICB9CgogICAgLy8gcmV3YXJkIHRoZSBwcmV2aW91cyBvd25lciBvZiB0aGUgYmxvY2sgb3IgdGhlIGNvbnRyYWN0IGlmIHRoZSBibG9jayBpcyBib3VnaHQgZm9yIHRoZSBmaXJzdCB0aW1lCiAgICBmdW5jdGlvbiByZXdhcmRQcmV2aW91c093bmVyIChhZGRyZXNzIG93bmVyLCB1aW50IGFtb3VudCkgaW50ZXJuYWwgewogICAgICAgIHVpbnQgcmV3YXJkQmFsYW5jZTsKICAgICAgICBpZiAob3duZXIgPT0gYWRkcmVzcygwKSkgewogICAgICAgICAgICByZXdhcmRCYWxhbmNlID0gcy5nZXRVSW50KGtlY2NhazI1NihtYWluQWRkcmVzcywgImJhbGFuY2UiKSk7CiAgICAgICAgICAgIHJld2FyZEJhbGFuY2UgKz0gYW1vdW50OwogICAgICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KG1haW5BZGRyZXNzLCAiYmFsYW5jZSIpLCByZXdhcmRCYWxhbmNlKTsKICAgICAgICAgICAgU2VudEFtb3VudFRvT3duZXIoYW1vdW50LCBtYWluQWRkcmVzcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV3YXJkQmFsYW5jZSA9IHMuZ2V0VUludChrZWNjYWsyNTYob3duZXIsICJiYWxhbmNlIikpOwogICAgICAgICAgICByZXdhcmRCYWxhbmNlICs9IGFtb3VudDsKICAgICAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1Nihvd25lciwgImJhbGFuY2UiKSwgcmV3YXJkQmFsYW5jZSk7CiAgICAgICAgICAgIFNlbnRBbW91bnRUb093bmVyKGFtb3VudCwgb3duZXIpOwogICAgICAgIH0KICAgIH0KfQoKY29udHJhY3QgQkxCbG9ja3MgaXMgQkxCYWxhbmNlcyB7CgogICAgZXZlbnQgQ3JlYXRlZEJsb2NrKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBwcmljZSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsCiAgICAgICAgYnl0ZXMzMiBuYW1lLAogICAgICAgIGJ5dGVzMzIgZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiB1cmwsCiAgICAgICAgYnl0ZXMzMiBpbWFnZVVSTCk7CgogICAgZXZlbnQgU2V0QmxvY2tGb3JTYWxlKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBwcmljZSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwoKICAgIGV2ZW50IFVuc2V0QmxvY2tGb3JTYWxlKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgICBldmVudCBCb3VnaHRCbG9jaygKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIHVpbnQgcHJpY2UsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLAogICAgICAgIGJ5dGVzMzIgbmFtZSwKICAgICAgICBieXRlczMyIGRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzMzIgdXJsLAogICAgICAgIGJ5dGVzMzIgaW1hZ2VVUkwpOwoKICAgIGV2ZW50IFNvbGRCbG9jaygKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIHVpbnQgb2xkUHJpY2UsCiAgICAgICAgdWludCBuZXdQcmljZSwKICAgICAgICB1aW50IGZlZVBlcmNlbnRhZ2UsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgICBldmVudCBVcGRhdGVkQmxvY2sodWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgLy8gQ3JlYXRlIGEgYmxvY2sgaWYgaXQgZG9lc24ndCBleGlzdAogICAgZnVuY3Rpb24gY3JlYXRlQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICBieXRlczMyIG5hbWUsCiAgICAgICAgYnl0ZXMzMiBkZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHVybCwKICAgICAgICBieXRlczMyIGltYWdlVVJMCiAgICApIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IGluaXRpYWxQcmljZSA9IHMuZ2V0VUludCgiaW5pdGlhbFByaWNlIik7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICB1aW50IGFsbG93YW5jZSA9IHMuZ2V0VUludChrZWNjYWsyNTYobXNnLnNlbmRlciwgInByb21vQWxsb3dhbmNlIikpOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID49IGluaXRpYWxQcmljZSB8fCBhbGxvd2FuY2UgPiAwKTsKICAgICAgICByZXF1aXJlKG93bmVyID09IGFkZHJlc3MoMCkpOwogICAgICAgIHVpbnQgZmVlUGVyY2VudGFnZSA9IHMuZ2V0VUludCgiYnV5T3V0RmVlUGVyY2VudGFnZSIpOwogICAgICAgIGlmIChtc2cudmFsdWUgPj0gaW5pdGlhbFByaWNlKSB7CiAgICAgICAgICAgIHJld2FyZFBhcnRpZXMob3duZXIsIGZlZVBlcmNlbnRhZ2UpOwogICAgICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KGtleSwgInByaWNlIiksIG1zZy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxsb3dhbmNlLS07CiAgICAgICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYobXNnLnNlbmRlciwgInByb21vQWxsb3dhbmNlIiksIGFsbG93YW5jZSk7CiAgICAgICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSwgaW5pdGlhbFByaWNlKTsKICAgICAgICB9CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJuYW1lIiksIG5hbWUpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAiZGVzY3JpcHRpb24iKSwgZGVzY3JpcHRpb24pOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAidXJsIiksIHVybCk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJpbWFnZVVSTCIpLCBpbWFnZVVSTCk7CiAgICAgICAgcy5zZXRBZGQoa2VjY2FrMjU2KGtleSwgIm93bmVyIiksIG1zZy5zZW5kZXIpOwogICAgICAgIHVpbnQgYmxvY2tDb3VudCA9IHMuZ2V0VUludCgiYmxvY2tDb3VudCIpOwogICAgICAgIGJsb2NrQ291bnQrKzsKICAgICAgICBzLnNldFVJbnQoImJsb2NrQ291bnQiLCBibG9ja0NvdW50KTsKICAgICAgICBzdG9yYWdlQWRkcmVzcy50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgIENyZWF0ZWRCbG9jayh4LAogICAgICAgICAgICB5LAogICAgICAgICAgICBtc2cudmFsdWUsCiAgICAgICAgICAgIG1zZy5zZW5kZXIsCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgICAgICB1cmwsCiAgICAgICAgICAgIGltYWdlVVJMKTsKICAgIH0KCiAgICAvLyBHZXQgZGV0YWlscyBmb3IgYSBibG9jawogICAgZnVuY3Rpb24gZ2V0QmxvY2sgKHVpbnQgeCwgdWludCB5KSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50IHByaWNlLAogICAgICAgIGJ5dGVzMzIgbmFtZSwKICAgICAgICBieXRlczMyIGRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzMzIgdXJsLAogICAgICAgIGJ5dGVzMzIgaW1hZ2VVUkwsCiAgICAgICAgdWludCBmb3JTYWxlLAogICAgICAgIHVpbnQgcHJpY2VQZXJEYXksCiAgICAgICAgYWRkcmVzcyBvd25lcgogICAgKSB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgcHJpY2UgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgInByaWNlIikpOwogICAgICAgIG5hbWUgPSBzLmdldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgIm5hbWUiKSk7CiAgICAgICAgZGVzY3JpcHRpb24gPSBzLmdldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImRlc2NyaXB0aW9uIikpOwogICAgICAgIHVybCA9IHMuZ2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAidXJsIikpOwogICAgICAgIGltYWdlVVJMID0gcy5nZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJpbWFnZVVSTCIpKTsKICAgICAgICBmb3JTYWxlID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJmb3JTYWxlIikpOwogICAgICAgIHByaWNlUGVyRGF5ID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZVBlckRheSIpKTsKICAgICAgICBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgIH0KCiAgICAvLyBTZXRzIGEgYmxvY2sgdXAgZm9yIHNhbGUKICAgIGZ1bmN0aW9uIHNlbGxCbG9jayh1aW50IHgsIHVpbnQgeSwgdWludCBwcmljZSkgcHVibGljIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IGJhc2VQcmljZSA9IHMuZ2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSk7CiAgICAgICAgcmVxdWlyZShzLmdldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcmVxdWlyZShwcmljZSA8IGJhc2VQcmljZSAqIDIpOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAiZm9yU2FsZSIpLCBwcmljZSk7CiAgICAgICAgU2V0QmxvY2tGb3JTYWxlKHgsIHksIHByaWNlLCBtc2cuc2VuZGVyKTsKICAgIH0KCiAgICAvLyBTZXRzIGEgYmxvY2sgbm90IGZvciBzYWxlCiAgICBmdW5jdGlvbiBjYW5jZWxTZWxsQmxvY2sodWludCB4LCB1aW50IHkpIHB1YmxpYyB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgcmVxdWlyZShzLmdldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSkgPT0gbXNnLnNlbmRlcik7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJmb3JTYWxlIiksIDApOwogICAgICAgIFVuc2V0QmxvY2tGb3JTYWxlKHgsIHksIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIHRyYW5zZmVycyBvd25lcnNoaXAgb2YgYW4gZXhpc3RpbmcgYmxvY2sKICAgIGZ1bmN0aW9uIGJ1eUJsb2NrKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgYnl0ZXMzMiBuYW1lLAogICAgICAgIGJ5dGVzMzIgZGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiB1cmwsCiAgICAgICAgYnl0ZXMzMiBpbWFnZVVSTAogICAgKSBwdWJsaWMgcGF5YWJsZSB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgdWludCBwcmljZSA9IHMuZ2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2UiKSk7CiAgICAgICAgdWludCBmb3JTYWxlID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJmb3JTYWxlIikpOwogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBzLmdldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSk7CiAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKChmb3JTYWxlID4gMCAmJiBtc2cudmFsdWUgPj0gZm9yU2FsZSkgfHwgbXNnLnZhbHVlID49IHByaWNlICogMik7CiAgICAgICAgdWludCBmZWVQZXJjZW50YWdlID0gcy5nZXRVSW50KCJidXlPdXRGZWVQZXJjZW50YWdlIik7CiAgICAgICAgcmV3YXJkUGFydGllcyhvd25lciwgZmVlUGVyY2VudGFnZSk7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZSIpLCBtc2cudmFsdWUpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAibmFtZSIpLCBuYW1lKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImRlc2NyaXB0aW9uIiksIGRlc2NyaXB0aW9uKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgInVybCIpLCB1cmwpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAiaW1hZ2VVUkwiKSwgaW1hZ2VVUkwpOwogICAgICAgIHMuc2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpLCBtc2cuc2VuZGVyKTsKICAgICAgICBzLnNldFVJbnQoa2VjY2FrMjU2KGtleSwgImZvclNhbGUiKSwgMCk7CiAgICAgICAgcy5zZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZVBlckRheSIpLCAwKTsKICAgICAgICBzdG9yYWdlQWRkcmVzcy50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgICAgIEJvdWdodEJsb2NrKHgsIHksIG1zZy52YWx1ZSwgbXNnLnNlbmRlciwKICAgICAgICAgICAgbmFtZSwgZGVzY3JpcHRpb24sIHVybCwgaW1hZ2VVUkwpOwogICAgICAgIFNvbGRCbG9jayh4LCB5LCBwcmljZSwgbXNnLnZhbHVlLCBmZWVQZXJjZW50YWdlLCBvd25lcik7CiAgICB9CgogICAgLy8gdXBkYXRlIGRldGFpbHMgZm9yIGFuIGV4aXN0aW5nIGJsb2NrCiAgICBmdW5jdGlvbiB1cGRhdGVCbG9jaygKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIGJ5dGVzMzIgbmFtZSwKICAgICAgICBieXRlczMyIGRlc2NyaXB0aW9uLAogICAgICAgIGJ5dGVzMzIgdXJsLAogICAgICAgIGJ5dGVzMzIgaW1hZ2VVUkwKICAgICkgIHB1YmxpYyB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAibmFtZSIpLCBuYW1lKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgImRlc2NyaXB0aW9uIiksIGRlc2NyaXB0aW9uKTsKICAgICAgICBzLnNldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgInVybCIpLCB1cmwpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAiaW1hZ2VVUkwiKSwgaW1hZ2VVUkwpOwogICAgICAgIFVwZGF0ZWRCbG9jayh4LCB5LCBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsLCBpbWFnZVVSTCwgbXNnLnNlbmRlcik7CiAgICB9Cgp9Cgpjb250cmFjdCBCTFRlbmFuY2llcyBpcyBCTEJsb2NrcyB7CgogICAgZXZlbnQgVG9SZW50KAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBwcmljZVBlckRheSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIpOwoKICAgIGV2ZW50IE5vdFRvUmVudCgKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgZXZlbnQgTGVhc2VkQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICB1aW50IHBhaWQsCiAgICAgICAgdWludCBleHBpcnksCiAgICAgICAgYnl0ZXMzMiB0ZW5hbnROYW1lLAogICAgICAgIGJ5dGVzMzIgdGVuYW50RGVzY3JpcHRpb24sCiAgICAgICAgYnl0ZXMzMiB0ZWFudFVSTCwKICAgICAgICBieXRlczMyIHRlbmFudEltYWdlVVJMLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgZXZlbnQgUmVudGVkQmxvY2soCiAgICAgICAgdWludCB4LAogICAgICAgIHVpbnQgeSwKICAgICAgICB1aW50IHBhaWQsCiAgICAgICAgdWludCBmZWVQZXJjZW50YWdlLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogICAgLy8gU2V0cyBhIGJsb2NrIHVwIGZvciByZW50LCByZXF1aXJlcyBhIHJlbnRhbCBwcmljZSB0byBiZSBwcm92aWRlZAogICAgZnVuY3Rpb24gc2V0Rm9yUmVudCgKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5LAogICAgICAgIHVpbnQgcHJpY2VQZXJEYXkKICAgICkgcHVibGljIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IHByaWNlID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZSIpKTsKICAgICAgICByZXF1aXJlKHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKSA9PSBtc2cuc2VuZGVyKTsKICAgICAgICByZXF1aXJlKHByaWNlUGVyRGF5ID49IHByaWNlIC8gMTApOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2VQZXJEYXkiKSwgcHJpY2VQZXJEYXkpOwogICAgICAgIFRvUmVudCh4LCB5LCBwcmljZVBlckRheSwgbXNnLnNlbmRlcik7CiAgICB9CgogICAgLy8gU2V0cyBhIGJsb2NrIG5vdCBmb3IgcmVudAogICAgZnVuY3Rpb24gY2FuY2VsUmVudCgKICAgICAgICB1aW50IHgsCiAgICAgICAgdWludCB5CiAgICApIHB1YmxpYyB7CiAgICAgICAgYnl0ZXMzMiBrZXkgPSBnZXRLZXkoeCwgeSk7CiAgICAgICAgYWRkcmVzcyBvd25lciA9IHMuZ2V0QWRkKGtlY2NhazI1NihrZXksICJvd25lciIpKTsKICAgICAgICByZXF1aXJlKG93bmVyID09IG1zZy5zZW5kZXIpOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAicHJpY2VQZXJEYXkiKSwgMCk7CiAgICAgICAgTm90VG9SZW50KHgsIHksIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIGFjdHVhbGx5IHJlbnQgYSBibG9jayB0byBhIHdpbGxpbmcgdGVuYW50CiAgICBmdW5jdGlvbiBsZWFzZUJsb2NrKAogICAgICAgIHVpbnQgeCwKICAgICAgICB1aW50IHksCiAgICAgICAgdWludCBkdXJhdGlvbiwKICAgICAgICBieXRlczMyIHRlbmFudE5hbWUsCiAgICAgICAgYnl0ZXMzMiB0ZW5hbnREZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHRlbmFudFVSTCwKICAgICAgICBieXRlczMyIHRlbmFudEltYWdlVVJMCiAgICApIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICB1aW50IHByaWNlUGVyRGF5ID0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJwcmljZVBlckRheSIpKTsKICAgICAgICByZXF1aXJlKHByaWNlUGVyRGF5ID4gMCk7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2VQZXJEYXkgKiBkdXJhdGlvbik7CiAgICAgICAgcmVxdWlyZShub3cgPj0gcy5nZXRVSW50KGtlY2NhazI1NihrZXksICJleHBpcnkiKSkpOwogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBzLmdldEFkZChrZWNjYWsyNTYoa2V5LCAib3duZXIiKSk7CiAgICAgICAgdWludCBmZWVQZXJjZW50YWdlID0gcy5nZXRVSW50KCJidXlPdXRGZWVQZXJjZW50YWdlIik7CiAgICAgICAgcmV3YXJkUGFydGllcyhvd25lciwgZmVlUGVyY2VudGFnZSk7CiAgICAgICAgdWludCBleHBpcnkgPSBub3cgKyA4NjQwMCAqIGR1cmF0aW9uOwogICAgICAgIHMuc2V0VUludChrZWNjYWsyNTYoa2V5LCAiZXhwaXJ5IiksIGV4cGlyeSk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ0ZW5hbnROYW1lIiksIHRlbmFudE5hbWUpOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAidGVuYW50RGVzY3JpcHRpb24iKSwgdGVuYW50RGVzY3JpcHRpb24pOwogICAgICAgIHMuc2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAidGVuYW50VVJMIiksIHRlbmFudFVSTCk7CiAgICAgICAgcy5zZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ0ZW5hbnRJbWFnZVVSTCIpLCB0ZW5hbnRJbWFnZVVSTCk7CiAgICAgICAgc3RvcmFnZUFkZHJlc3MudHJhbnNmZXIobXNnLnZhbHVlKTsKICAgICAgICBSZW50ZWRCbG9jayh4LCB5LCBtc2cudmFsdWUsIGZlZVBlcmNlbnRhZ2UsIG93bmVyKTsKICAgICAgICBMZWFzZWRCbG9jayh4LCB5LCBtc2cudmFsdWUsIGV4cGlyeSwgdGVuYW50TmFtZSwgdGVuYW50RGVzY3JpcHRpb24sIHRlbmFudFVSTCwgdGVuYW50SW1hZ2VVUkwsIG1zZy5zZW5kZXIpOwogICAgfQoKICAgIC8vIGdldCBkZXRhaWxzIGZvciBhIHRlbmFuY3kKICAgIGZ1bmN0aW9uIGdldFRlbmFuY3kgKHVpbnQgeCwgdWludCB5KSBwdWJsaWMgdmlldyByZXR1cm5zICgKICAgICAgICB1aW50IGV4cGlyeSwKICAgICAgICBieXRlczMyIHRlbmFudE5hbWUsCiAgICAgICAgYnl0ZXMzMiB0ZW5hbnREZXNjcmlwdGlvbiwKICAgICAgICBieXRlczMyIHRlbmFudFVSTCwKICAgICAgICBieXRlczMyIHRlbmFudEltYWdlVVJMCiAgICApIHsKICAgICAgICBieXRlczMyIGtleSA9IGdldEtleSh4LCB5KTsKICAgICAgICBleHBpcnkgPSBzLmdldFVJbnQoa2VjY2FrMjU2KGtleSwgInRlbmFudEV4cGlyeSIpKTsKICAgICAgICB0ZW5hbnROYW1lID0gcy5nZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ0ZW5hbnROYW1lIikpOwogICAgICAgIHRlbmFudERlc2NyaXB0aW9uID0gcy5nZXRCeXRlczMyKGtlY2NhazI1NihrZXksICJ0ZW5hbnREZXNjcmlwdGlvbiIpKTsKICAgICAgICB0ZW5hbnRVUkwgPSBzLmdldEJ5dGVzMzIoa2VjY2FrMjU2KGtleSwgInRlbmFudFVSTCIpKTsKICAgICAgICB0ZW5hbnRJbWFnZVVSTCA9IHMuZ2V0Qnl0ZXMzMihrZWNjYWsyNTYoa2V5LCAidGVuYW50SW1hZ2VVUkwiKSk7CiAgICB9Cn0KCi8qCiAgICBNYWluIEJsb2NrbG9yZCBjb250cmFjdC4gSXQgZXhwb3NlcyBzb21lIGNvbW1vZGl0eSBmdW5jdGlvbnMgYW5kIGZ1bmN0aW9ucyBmcm9tIGl0cyBzdWJjb250cmFjdHMuCiovCgpjb250cmFjdCBCTE1haW4gaXMgQkxUZW5hbmNpZXMgewoKICAgIGV2ZW50IENoYW5nZWRJbml0aWFsUHJpY2UodWludCBwcmljZSk7CiAgICBldmVudCBDaGFuZ2VkRmVlUGVyY2VudGFnZSh1aW50IGZlZSk7CgogICAgLy8gcHJvdmlkZXMgdGhlIHRvdGFsIG51bWJlciBvZiBwdXJjaGFzZWQgYmxvY2tzCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQgY291bnQpIHsKICAgICAgICBjb3VudCA9IHMuZ2V0VUludCgiYmxvY2tDb3VudCIpOwogICAgICAgIHJldHVybiBjb3VudDsKICAgIH0KCiAgICAvLyBhbGxvd3MgdG8gY2hhbmdlIHRoZSBwcmljZSBvZiBhbiBlbXB0eSBibG9jawogICAgZnVuY3Rpb24gc2V0SW5pdGlhbFByaWNlKHVpbnQgcHJpY2UpIHB1YmxpYyBvbmx5UHJpbWFyeSB7CiAgICAgICAgcy5zZXRVSW50KCJpbml0aWFsUHJpY2UiLCBwcmljZSk7CiAgICAgICAgQ2hhbmdlZEluaXRpYWxQcmljZShwcmljZSk7CiAgICB9CgogICAgLy8gYWxsb3dzIHRvIGNoYW5nZSB0aGUgcGxhdGZvcm0gZmVlIHBlcmNlbnRhZ2UKICAgIGZ1bmN0aW9uIHNldEZlZVBlcmNlbnRhZ2UodWludCBmZWVQZXJjZW50YWdlKSBwdWJsaWMgb25seVByaW1hcnkgewogICAgICAgIHMuc2V0VUludCgiYnV5T3V0RmVlUGVyY2VudGFnZSIsIGZlZVBlcmNlbnRhZ2UpOwogICAgICAgIENoYW5nZWRGZWVQZXJjZW50YWdlKGZlZVBlcmNlbnRhZ2UpOwogICAgfQoKICAgIC8vIHByb3ZpZGVzIHRoZSBzdGFydGluZyBwcmljZSBmb3IgYW4gZW1wdHkgYmxvY2sKICAgIGZ1bmN0aW9uIGdldEluaXRpYWxQcmljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcy5nZXRVSW50KCJpbml0aWFsUHJpY2UiKTsKICAgIH0KCiAgICAvLyBwcm92aWRlcyB0aGUgcHJpY2Ugb2YgYW4gZW1wdHkgYmxvY2sKICAgIGZ1bmN0aW9uIGdldEZlZVBlcmNlbnRhZ2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHMuZ2V0VUludCgiYnV5T3V0RmVlUGVyY2VudGFnZSIpOwogICAgfQp9'.
	

]
