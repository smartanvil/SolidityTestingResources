Class {
	#name : #SRT91a973bee89225c6c186419b5bab1944fc5736c7,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT91a973bee89225c6c186419b5bab1944fc5736c7 >> base64 [
	^ 'Ly9GaWxlOiBub2RlX21vZHVsZXMvZ2l2ZXRoLWNvbW1vbi1jb250cmFjdHMvY29udHJhY3RzL093bmVkLnNvbApwcmFnbWEgc29saWRpdHkgXjAuNC4xNTsKCgovLy8gQHRpdGxlIE93bmVkCi8vLyBAYXV0aG9yIEFkcmkmIzIyNDsgTWFzc2FuZXQgPDxzcGFuIGNsYXNzPSJfX2NmX2VtYWlsX18iIGRhdGEtY2ZlbWFpbD0iNGMyZDI4M2UyNTJkMGMyZjIzMjgyOTJmMjMyMjM4MjkzNDM4NjIyNTIzIj5bZW1haWwmIzE2MDtwcm90ZWN0ZWRdPC9zcGFuPj4KLy8vIEBub3RpY2UgVGhlIE93bmVkIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgCi8vLyAgYXV0aG9yaXphdGlvbiBjb250cm9sIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzICYgdGhlIGltcGxlbWVudGF0aW9uIG9mCi8vLyAgdXNlciBwZXJtaXNzaW9uczsgdGhpcyBjb250cmFjdCBoYXMgdGhyZWUgd29yayBmbG93cyBmb3IgYSBjaGFuZ2UgaW4KLy8vICBvd25lcnNoaXAsIHRoZSBmaXJzdCByZXF1aXJlcyB0aGUgbmV3IG93bmVyIHRvIHZhbGlkYXRlIHRoYXQgdGhleSBoYXZlIHRoZQovLy8gIGFiaWxpdHkgdG8gYWNjZXB0IG93bmVyc2hpcCwgdGhlIHNlY29uZCBhbGxvd3MgdGhlIG93bmVyc2hpcCB0byBiZQovLy8gIGRpcmVjdGx5IHRyYW5zZmVyZWQgd2l0aG91dCByZXF1aXJpbmcgYWNjZXB0YW5jZSwgYW5kIHRoZSB0aGlyZCBhbGxvd3MgZm9yCi8vLyAgdGhlIG93bmVyc2hpcCB0byBiZSByZW1vdmVkIHRvIGFsbG93IGZvciBkZWNlbnRyYWxpemF0aW9uIApjb250cmFjdCBPd25lZCB7CgogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgICBhZGRyZXNzIHB1YmxpYyBuZXdPd25lckNhbmRpZGF0ZTsKCiAgICBldmVudCBPd25lcnNoaXBSZXF1ZXN0ZWQoYWRkcmVzcyBpbmRleGVkIGJ5LCBhZGRyZXNzIGluZGV4ZWQgdG8pOwogICAgZXZlbnQgT3duZXJzaGlwVHJhbnNmZXJyZWQoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0byk7CiAgICBldmVudCBPd25lcnNoaXBSZW1vdmVkKCk7CgogICAgLy8vIEBkZXYgVGhlIGNvbnN0cnVjdG9yIHNldHMgdGhlIGBtc2cuc2VuZGVyYCBhcyB0aGVgb3duZXJgIG9mIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gT3duZWQoKSBwdWJsaWMgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICAvLy8gQGRldiBgb3duZXJgIGlzIHRoZSBvbmx5IGFkZHJlc3MgdGhhdCBjYW4gY2FsbCBhIGZ1bmN0aW9uIHdpdGggdGhpcwogICAgLy8vIG1vZGlmaWVyCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZSAobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgLy8vIEBkZXYgSW4gdGhpcyAxc3Qgb3B0aW9uIGZvciBvd25lcnNoaXAgdHJhbnNmZXIgYHByb3Bvc2VPd25lcnNoaXAoKWAgbXVzdAogICAgLy8vICBiZSBjYWxsZWQgZmlyc3QgYnkgdGhlIGN1cnJlbnQgYG93bmVyYCB0aGVuIGBhY2NlcHRPd25lcnNoaXAoKWAgbXVzdCBiZQogICAgLy8vICBjYWxsZWQgYnkgdGhlIGBuZXdPd25lckNhbmRpZGF0ZWAKICAgIC8vLyBAbm90aWNlIGBvbmx5T3duZXJgIFByb3Bvc2VzIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEKICAgIC8vLyAgbmV3IG93bmVyCiAgICAvLy8gQHBhcmFtIF9uZXdPd25lckNhbmRpZGF0ZSBUaGUgYWRkcmVzcyBiZWluZyBwcm9wb3NlZCBhcyB0aGUgbmV3IG93bmVyCiAgICBmdW5jdGlvbiBwcm9wb3NlT3duZXJzaGlwKGFkZHJlc3MgX25ld093bmVyQ2FuZGlkYXRlKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBuZXdPd25lckNhbmRpZGF0ZSA9IF9uZXdPd25lckNhbmRpZGF0ZTsKICAgICAgICBPd25lcnNoaXBSZXF1ZXN0ZWQobXNnLnNlbmRlciwgbmV3T3duZXJDYW5kaWRhdGUpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgYG5ld093bmVyQ2FuZGlkYXRlYCwgYWNjZXB0cyB0aGUKICAgIC8vLyAgdHJhbnNmZXIgb2Ygb3duZXJzaGlwCiAgICBmdW5jdGlvbiBhY2NlcHRPd25lcnNoaXAoKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBuZXdPd25lckNhbmRpZGF0ZSk7CgogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lcjsKICAgICAgICBvd25lciA9IG5ld093bmVyQ2FuZGlkYXRlOwogICAgICAgIG5ld093bmVyQ2FuZGlkYXRlID0gMHgwOwoKICAgICAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvbGRPd25lciwgb3duZXIpOwogICAgfQoKICAgIC8vLyBAZGV2IEluIHRoaXMgMm5kIG9wdGlvbiBmb3Igb3duZXJzaGlwIHRyYW5zZmVyIGBjaGFuZ2VPd25lcnNoaXAoKWAgY2FuCiAgICAvLy8gIGJlIGNhbGxlZCBhbmQgaXQgd2lsbCBpbW1lZGlhdGVseSBhc3NpZ24gb3duZXJzaGlwIHRvIHRoZSBgbmV3T3duZXJgCiAgICAvLy8gQG5vdGljZSBgb3duZXJgIGNhbiBzdGVwIGRvd24gYW5kIGFzc2lnbiBzb21lIG90aGVyIGFkZHJlc3MgdG8gdGhpcyByb2xlCiAgICAvLy8gQHBhcmFtIF9uZXdPd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgbmV3IG93bmVyCiAgICBmdW5jdGlvbiBjaGFuZ2VPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IDB4MCk7CgogICAgICAgIGFkZHJlc3Mgb2xkT3duZXIgPSBvd25lcjsKICAgICAgICBvd25lciA9IF9uZXdPd25lcjsKICAgICAgICBuZXdPd25lckNhbmRpZGF0ZSA9IDB4MDsKCiAgICAgICAgT3duZXJzaGlwVHJhbnNmZXJyZWQob2xkT3duZXIsIG93bmVyKTsKICAgIH0KCiAgICAvLy8gQGRldiBJbiB0aGlzIDNyZCBvcHRpb24gZm9yIG93bmVyc2hpcCB0cmFuc2ZlciBgcmVtb3ZlT3duZXJzaGlwKClgIGNhbgogICAgLy8vICBiZSBjYWxsZWQgYW5kIGl0IHdpbGwgaW1tZWRpYXRlbHkgYXNzaWduIG93bmVyc2hpcCB0byB0aGUgMHgwIGFkZHJlc3M7CiAgICAvLy8gIGl0IHJlcXVpcmVzIGEgMHhkZWNlIGJlIGlucHV0IGFzIGEgcGFyYW1ldGVyIHRvIHByZXZlbnQgYWNjaWRlbnRhbCB1c2UKICAgIC8vLyBAbm90aWNlIERlY2VudHJhbGl6ZXMgdGhlIGNvbnRyYWN0LCB0aGlzIG9wZXJhdGlvbiBjYW5ub3QgYmUgdW5kb25lIAogICAgLy8vIEBwYXJhbSBfZGFjIGAweGRhY2AgaGFzIHRvIGJlIGVudGVyZWQgZm9yIHRoaXMgZnVuY3Rpb24gdG8gd29yawogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXJzaGlwKGFkZHJlc3MgX2RhYykgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShfZGFjID09IDB4ZGFjKTsKICAgICAgICBvd25lciA9IDB4MDsKICAgICAgICBuZXdPd25lckNhbmRpZGF0ZSA9IDB4MDsKICAgICAgICBPd25lcnNoaXBSZW1vdmVkKCk7ICAgICAKICAgIH0KfSAKCi8vRmlsZTogbm9kZV9tb2R1bGVzL2dpdmV0aC1jb21tb24tY29udHJhY3RzL2NvbnRyYWN0cy9FUkMyMC5zb2wKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKLyoqCiAqIEB0aXRsZSBFUkMyMAogKiBAZGV2IEEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciB0b2tlbnMuCiAqIEBkZXYgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvYmxvYi9tYXN0ZXIvRUlQUy9laXAtMjAtdG9rZW4tc3RhbmRhcmQubWQKICovCmNvbnRyYWN0IEVSQzIwIHsKICAKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIHRvdGFsIHRva2VuIHN1cHBseQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGFjY291bnQgYmFsYW5jZSBvZiB0aGUgYWNjb3VudCB3aXRoIGFkZHJlc3MgX293bmVyCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAZGV2IFRyYW5zZmVycyBfdmFsdWUgbnVtYmVyIG9mIHRva2VucyB0byBhZGRyZXNzIF90bwogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQGRldiBUcmFuc2ZlcnMgX3ZhbHVlIG51bWJlciBvZiB0b2tlbnMgZnJvbSBhZGRyZXNzIF9mcm9tIHRvIGFkZHJlc3MgX3RvCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQGRldiBBbGxvd3MgX3NwZW5kZXIgdG8gd2l0aGRyYXcgZnJvbSB0aGUgbXNnLnNlbmRlcidzIGFjY291bnQgdXAgdG8gdGhlIF92YWx1ZSBhbW91bnQKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIC8vLyBAZGV2IFJldHVybnMgdGhlIGFtb3VudCB3aGljaCBfc3BlbmRlciBpcyBzdGlsbCBhbGxvd2VkIHRvIHdpdGhkcmF3IGZyb20gX293bmVyCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCn0KCi8vRmlsZTogbm9kZV9tb2R1bGVzL2dpdmV0aC1jb21tb24tY29udHJhY3RzL2NvbnRyYWN0cy9Fc2NhcGFibGUuc29sCnByYWdtYSBzb2xpZGl0eSBeMC40LjE1OwovKgogICAgQ29weXJpZ2h0IDIwMTYsIEpvcmRpIEJheWxpbmEKICAgIENvbnRyaWJ1dG9yOiBBZHJpJiMyMjQ7IE1hc3NhbmV0IDw8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9IjA1NjQ2MTc3NmM2NDQ1NjY2YTYxNjA2NjZhNmI3MTYwN2Q3MTJiNmM2YSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4+CgogICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKi8KCgoKCgovLy8gQGRldiBgRXNjYXBhYmxlYCBpcyBhIGJhc2UgbGV2ZWwgY29udHJhY3QgYnVpbHQgb2ZmIG9mIHRoZSBgT3duZWRgCi8vLyAgY29udHJhY3Q7IGl0IGNyZWF0ZXMgYW4gZXNjYXBlIGhhdGNoIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCBpbiBhbgovLy8gIGVtZXJnZW5jeSB0aGF0IHdpbGwgYWxsb3cgZGVzaWduYXRlZCBhZGRyZXNzZXMgdG8gc2VuZCBhbnkgZXRoZXIgb3IgdG9rZW5zCi8vLyAgaGVsZCBpbiB0aGUgY29udHJhY3QgdG8gYW4gYGVzY2FwZUhhdGNoRGVzdGluYXRpb25gIGFzIGxvbmcgYXMgdGhleSB3ZXJlCi8vLyAgbm90IGJsYWNrbGlzdGVkCmNvbnRyYWN0IEVzY2FwYWJsZSBpcyBPd25lZCB7CiAgICBhZGRyZXNzIHB1YmxpYyBlc2NhcGVIYXRjaENhbGxlcjsKICAgIGFkZHJlc3MgcHVibGljIGVzY2FwZUhhdGNoRGVzdGluYXRpb247CiAgICBtYXBwaW5nIChhZGRyZXNzPT5ib29sKSBwcml2YXRlIGVzY2FwZUJsYWNrbGlzdDsgLy8gVG9rZW4gY29udHJhY3QgYWRkcmVzc2VzCgogICAgLy8vIEBub3RpY2UgVGhlIENvbnN0cnVjdG9yIGFzc2lnbnMgdGhlIGBlc2NhcGVIYXRjaERlc3RpbmF0aW9uYCBhbmQgdGhlCiAgICAvLy8gIGBlc2NhcGVIYXRjaENhbGxlcmAKICAgIC8vLyBAcGFyYW0gX2VzY2FwZUhhdGNoQ2FsbGVyIFRoZSBhZGRyZXNzIG9mIGEgdHJ1c3RlZCBhY2NvdW50IG9yIGNvbnRyYWN0CiAgICAvLy8gIHRvIGNhbGwgYGVzY2FwZUhhdGNoKClgIHRvIHNlbmQgdGhlIGV0aGVyIGluIHRoaXMgY29udHJhY3QgdG8gdGhlCiAgICAvLy8gIGBlc2NhcGVIYXRjaERlc3RpbmF0aW9uYCBpdCB3b3VsZCBiZSBpZGVhbCB0aGF0IGBlc2NhcGVIYXRjaENhbGxlcmAKICAgIC8vLyAgY2Fubm90IG1vdmUgZnVuZHMgb3V0IG9mIGBlc2NhcGVIYXRjaERlc3RpbmF0aW9uYAogICAgLy8vIEBwYXJhbSBfZXNjYXBlSGF0Y2hEZXN0aW5hdGlvbiBUaGUgYWRkcmVzcyBvZiBhIHNhZmUgbG9jYXRpb24gKHVzdSBhCiAgICAvLy8gIE11bHRpc2lnKSB0byBzZW5kIHRoZSBldGhlciBoZWxkIGluIHRoaXMgY29udHJhY3Q7IGlmIGEgbmV1dHJhbCBhZGRyZXNzCiAgICAvLy8gIGlzIHJlcXVpcmVkLCB0aGUgV0hHIE11bHRpc2lnIGlzIGFuIG9wdGlvbjoKICAgIC8vLyAgMHg4RmY5MjAwMjBjOEFENjczNjYxYzgxMTdmMjg1NUMzODQ3NThDNTcyIAogICAgZnVuY3Rpb24gRXNjYXBhYmxlKGFkZHJlc3MgX2VzY2FwZUhhdGNoQ2FsbGVyLCBhZGRyZXNzIF9lc2NhcGVIYXRjaERlc3RpbmF0aW9uKSBwdWJsaWMgewogICAgICAgIGVzY2FwZUhhdGNoQ2FsbGVyID0gX2VzY2FwZUhhdGNoQ2FsbGVyOwogICAgICAgIGVzY2FwZUhhdGNoRGVzdGluYXRpb24gPSBfZXNjYXBlSGF0Y2hEZXN0aW5hdGlvbjsKICAgIH0KCiAgICAvLy8gQGRldiBUaGUgYWRkcmVzc2VzIHByZWFzc2lnbmVkIGFzIGBlc2NhcGVIYXRjaENhbGxlcmAgb3IgYG93bmVyYAogICAgLy8vICBhcmUgdGhlIG9ubHkgYWRkcmVzc2VzIHRoYXQgY2FuIGNhbGwgYSBmdW5jdGlvbiB3aXRoIHRoaXMgbW9kaWZpZXIKICAgIG1vZGlmaWVyIG9ubHlFc2NhcGVIYXRjaENhbGxlck9yT3duZXIgewogICAgICAgIHJlcXVpcmUgKChtc2cuc2VuZGVyID09IGVzY2FwZUhhdGNoQ2FsbGVyKXx8KG1zZy5zZW5kZXIgPT0gb3duZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENyZWF0ZXMgdGhlIGJsYWNrbGlzdCBvZiB0b2tlbnMgdGhhdCBhcmUgbm90IGFibGUgdG8gYmUgdGFrZW4KICAgIC8vLyAgb3V0IG9mIHRoZSBjb250cmFjdDsgY2FuIG9ubHkgYmUgZG9uZSBhdCB0aGUgZGVwbG95bWVudCwgYW5kIHRoZSBsb2dpYwogICAgLy8vICB0byBhZGQgdG8gdGhlIGJsYWNrbGlzdCB3aWxsIGJlIGluIHRoZSBjb25zdHJ1Y3RvciBvZiBhIGNoaWxkIGNvbnRyYWN0CiAgICAvLy8gQHBhcmFtIF90b2tlbiB0aGUgdG9rZW4gY29udHJhY3QgYWRkcmVzcyB0aGF0IGlzIHRvIGJlIGJsYWNrbGlzdGVkIAogICAgZnVuY3Rpb24gYmxhY2tsaXN0RXNjYXBlVG9rZW4oYWRkcmVzcyBfdG9rZW4pIGludGVybmFsIHsKICAgICAgICBlc2NhcGVCbGFja2xpc3RbX3Rva2VuXSA9IHRydWU7CiAgICAgICAgRXNjYXBlSGF0Y2hCbGFja2lzdGVkVG9rZW4oX3Rva2VuKTsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBDaGVja3MgdG8gc2VlIGlmIGBfdG9rZW5gIGlzIGluIHRoZSBibGFja2xpc3Qgb2YgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF90b2tlbiB0aGUgdG9rZW4gYWRkcmVzcyBiZWluZyBxdWVyaWVkCiAgICAvLy8gQHJldHVybiBGYWxzZSBpZiBgX3Rva2VuYCBpcyBpbiB0aGUgYmxhY2tsaXN0IGFuZCBjYW4ndCBiZSB0YWtlbiBvdXQgb2YKICAgIC8vLyAgdGhlIGNvbnRyYWN0IHZpYSB0aGUgYGVzY2FwZUhhdGNoKClgCiAgICBmdW5jdGlvbiBpc1Rva2VuRXNjYXBhYmxlKGFkZHJlc3MgX3Rva2VuKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiAhZXNjYXBlQmxhY2tsaXN0W190b2tlbl07CiAgICB9CgogICAgLy8vIEBub3RpY2UgVGhlIGBlc2NhcGVIYXRjaCgpYCBzaG91bGQgb25seSBiZSBjYWxsZWQgYXMgYSBsYXN0IHJlc29ydCBpZiBhCiAgICAvLy8gc2VjdXJpdHkgaXNzdWUgaXMgdW5jb3ZlcmVkIG9yIHNvbWV0aGluZyB1bmV4cGVjdGVkIGhhcHBlbmVkCiAgICAvLy8gQHBhcmFtIF90b2tlbiB0byB0cmFuc2ZlciwgdXNlIDB4MCBmb3IgZXRoZXIKICAgIGZ1bmN0aW9uIGVzY2FwZUhhdGNoKGFkZHJlc3MgX3Rva2VuKSBwdWJsaWMgb25seUVzY2FwZUhhdGNoQ2FsbGVyT3JPd25lciB7ICAgCiAgICAgICAgcmVxdWlyZShlc2NhcGVCbGFja2xpc3RbX3Rva2VuXT09ZmFsc2UpOwoKICAgICAgICB1aW50MjU2IGJhbGFuY2U7CgogICAgICAgIC8vLyBAZGV2IExvZ2ljIGZvciBldGhlcgogICAgICAgIGlmIChfdG9rZW4gPT0gMHgwKSB7CiAgICAgICAgICAgIGJhbGFuY2UgPSB0aGlzLmJhbGFuY2U7CiAgICAgICAgICAgIGVzY2FwZUhhdGNoRGVzdGluYXRpb24udHJhbnNmZXIoYmFsYW5jZSk7CiAgICAgICAgICAgIEVzY2FwZUhhdGNoQ2FsbGVkKF90b2tlbiwgYmFsYW5jZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8vIEBkZXYgTG9naWMgZm9yIHRva2VucwogICAgICAgIEVSQzIwIHRva2VuID0gRVJDMjAoX3Rva2VuKTsKICAgICAgICBiYWxhbmNlID0gdG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgICAgIHJlcXVpcmUodG9rZW4udHJhbnNmZXIoZXNjYXBlSGF0Y2hEZXN0aW5hdGlvbiwgYmFsYW5jZSkpOwogICAgICAgIEVzY2FwZUhhdGNoQ2FsbGVkKF90b2tlbiwgYmFsYW5jZSk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgQ2hhbmdlcyB0aGUgYWRkcmVzcyBhc3NpZ25lZCB0byBjYWxsIGBlc2NhcGVIYXRjaCgpYAogICAgLy8vIEBwYXJhbSBfbmV3RXNjYXBlSGF0Y2hDYWxsZXIgVGhlIGFkZHJlc3Mgb2YgYSB0cnVzdGVkIGFjY291bnQgb3IKICAgIC8vLyAgY29udHJhY3QgdG8gY2FsbCBgZXNjYXBlSGF0Y2goKWAgdG8gc2VuZCB0aGUgdmFsdWUgaW4gdGhpcyBjb250cmFjdCB0bwogICAgLy8vICB0aGUgYGVzY2FwZUhhdGNoRGVzdGluYXRpb25gOyBpdCB3b3VsZCBiZSBpZGVhbCB0aGF0IGBlc2NhcGVIYXRjaENhbGxlcmAKICAgIC8vLyAgY2Fubm90IG1vdmUgZnVuZHMgb3V0IG9mIGBlc2NhcGVIYXRjaERlc3RpbmF0aW9uYAogICAgZnVuY3Rpb24gY2hhbmdlSGF0Y2hFc2NhcGVDYWxsZXIoYWRkcmVzcyBfbmV3RXNjYXBlSGF0Y2hDYWxsZXIpIHB1YmxpYyBvbmx5RXNjYXBlSGF0Y2hDYWxsZXJPck93bmVyIHsKICAgICAgICBlc2NhcGVIYXRjaENhbGxlciA9IF9uZXdFc2NhcGVIYXRjaENhbGxlcjsKICAgIH0KCiAgICBldmVudCBFc2NhcGVIYXRjaEJsYWNraXN0ZWRUb2tlbihhZGRyZXNzIHRva2VuKTsKICAgIGV2ZW50IEVzY2FwZUhhdGNoQ2FsbGVkKGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KTsKfQoKLy9GaWxlOiBjb250cmFjdHMvTFBWYXVsdC5zb2wKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKgogICAgQ29weXJpZ2h0IDIwMTcsIEpvcmRpIEJheWxpbmEKICAgIENvbnRyaWJ1dG9yczogUkogRXdpbmcsIEdyaWZmIEdyZWVuLCBBcnRodXIgTHVubgoKICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQogICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgogICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgogICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQogICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KCiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogICAgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiovCgovLy8gQHRpdGxlIExQVmF1bHQKLy8vIEBhdXRob3IgSm9yZGkgQmF5bGluYQoKLy8vIEBkZXYgVGhpcyBjb250cmFjdCBob2xkcyBldGhlciBzZWN1cmVseSBmb3IgbGlxdWlkIHBsZWRnaW5nIHN5c3RlbXM7IGZvcgovLy8gIHRoaXMgaXRlcmF0aW9uIHRoZSBmdW5kcyB3aWxsIGNvbWUgb2Z0ZW4gYmUgZXNjYXBlZCB0byB0aGUgR2l2ZXRoIE11bHRpc2lnCi8vLyAgKHNhZmV0eSBwcmVjYXV0aW9uKSwgYnV0IG9uY2UgZnVsbHkgdGVzdGVkIGFuZCBvcHRpbWl6ZWQgdGhpcyBjb250cmFjdCB3aWxsCi8vLyAgYmUgYSBzYWZlIHBsYWNlIHRvIHN0b3JlIGZ1bmRzIGVxdWlwcGVkIHdpdGggb3B0aW9uYWwgdmFyaWFibGUgdGltZSBkZWxheXMKLy8vICB0byBhbGxvdyBmb3IgYW4gb3B0aW9uYWwgZXNjYXBlSGF0Y2ggdG8gYmUgaW1wbGVtZW50ZWQgaW4gY2FzZSBvZiBpc3N1ZXM7Ci8vLyAgZnV0dXJlIHZlcnNpb25zIG9mIHRoaXMgY29udHJhY3Qgd2lsbCBiZSBlbmFibGVkIGZvciB0b2tlbnMKCgovLy8gQGRldiBgTGlxdWlkUGxlZGdpbmdgIGlzIGEgYmFzaWMgaW50ZXJmYWNlIHRvIGFsbG93IHRoZSBgTFBWYXVsdGAgY29udHJhY3QKLy8vICB0byBjb25maXJtIGFuZCBjYW5jZWwgcGF5bWVudHMgaW4gdGhlIGBMaXF1aWRQbGVkZ2luZ2AgY29udHJhY3QuCmNvbnRyYWN0IExpcXVpZFBsZWRnaW5nIHsKICAgIGZ1bmN0aW9uIGNvbmZpcm1QYXltZW50KHVpbnQ2NCBpZFBsZWRnZSwgdWludCBhbW91bnQpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGNhbmNlbFBheW1lbnQodWludDY0IGlkUGxlZGdlLCB1aW50IGFtb3VudCkgcHVibGljOwp9CgoKLy8vIEBkZXYgYExQVmF1bHRgIGlzIGEgaGlnaGVyIGxldmVsIGNvbnRyYWN0IGJ1aWx0IG9mZiBvZiB0aGUgYEVzY2FwYWJsZWAKLy8vICBjb250cmFjdCB0aGF0IGhvbGRzIGZ1bmRzIGZvciB0aGUgbGlxdWlkIHBsZWRnaW5nIHN5c3RlbS4KY29udHJhY3QgTFBWYXVsdCBpcyBFc2NhcGFibGUgewoKICAgIExpcXVpZFBsZWRnaW5nIHB1YmxpYyBsaXF1aWRQbGVkZ2luZzsgLy8gTGlxdWlkUGxlZGdpbmcgY29udHJhY3QncyBhZGRyZXNzCiAgICBib29sIHB1YmxpYyBhdXRvUGF5OyAvLyBJZiBmYWxzZSwgcGF5bWVudHMgd2lsbCB0YWtlIDIgdHhzIHRvIGJlIGNvbXBsZXRlZAoKICAgIGVudW0gUGF5bWVudFN0YXR1cyB7CiAgICAgICAgUGVuZGluZywgLy8gV2hlbiB0aGUgcGF5bWVudCBpcyBhd2FpdGluZyBjb25maXJtYXRpb24KICAgICAgICBQYWlkLCAgICAvLyBXaGVuIHRoZSBwYXltZW50IGhhcyBiZWVuIHNlbnQKICAgICAgICBDYW5jZWxlZCAvLyBXaGVuIHRoZSBwYXltZW50IHdpbGwgbmV2ZXIgYmUgc2VudAogICAgfQogICAgLy8vIEBkZXYgYFBheW1lbnRgIGlzIGEgcHVibGljIHN0cnVjdHVyZSB0aGF0IGRlc2NyaWJlcyB0aGUgZGV0YWlscyBvZgogICAgLy8vICBlYWNoIHBheW1lbnQgdGhlIGByZWZgIHBhcmFtIG1ha2VzIGl0IGVhc3kgdG8gdHJhY2sgdGhlIG1vdmVtZW50cyBvZgogICAgLy8vICBmdW5kcyB0cmFuc3BhcmVudGx5IGJ5IGl0cyBjb25uZWN0aW9uIHRvIG90aGVyIGBQYXltZW50YCBzdHJ1Y3RzCiAgICBzdHJ1Y3QgUGF5bWVudCB7CiAgICAgICAgUGF5bWVudFN0YXR1cyBzdGF0ZTsgLy8gUGVuZGluZywgUGFpZCBvciBDYW5jZWxlZAogICAgICAgIGJ5dGVzMzIgcmVmOyAvLyBhbiBpbnB1dCB0aGF0IHJlZmVyZW5jZXMgZGV0YWlscyBmcm9tIG90aGVyIGNvbnRyYWN0cwogICAgICAgIGFkZHJlc3MgZGVzdDsgLy8gcmVjaXBpZW50IG9mIHRoZSBFVEgKICAgICAgICB1aW50IGFtb3VudDsgLy8gYW1vdW50IG9mIEVUSCAoaW4gd2VpKSB0byBiZSBzZW50CiAgICB9CgogICAgLy8gQGRldiBBbiBhcnJheSB0aGF0IGNvbnRhaW5zIGFsbCB0aGUgcGF5bWVudHMgZm9yIHRoaXMgTFBWYXVsdAogICAgUGF5bWVudFtdIHB1YmxpYyBwYXltZW50czsKCiAgICBmdW5jdGlvbiBMUFZhdWx0KGFkZHJlc3MgX2VzY2FwZUhhdGNoQ2FsbGVyLCBhZGRyZXNzIF9lc2NhcGVIYXRjaERlc3RpbmF0aW9uKQogICAgICAgIEVzY2FwYWJsZShfZXNjYXBlSGF0Y2hDYWxsZXIsIF9lc2NhcGVIYXRjaERlc3RpbmF0aW9uKSBwdWJsaWMKICAgIHsKICAgIH0KCiAgICAvLy8gQGRldiBUaGUgYXR0YWNoZWQgYExpcXVpZFBsZWRnaW5nYCBjb250cmFjdCBpcyB0aGUgb25seSBhZGRyZXNzIHRoYXQgY2FuCiAgICAvLy8gIGNhbGwgYSBmdW5jdGlvbiB3aXRoIHRoaXMgbW9kaWZpZXIKICAgIG1vZGlmaWVyIG9ubHlMaXF1aWRQbGVkZ2luZygpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhsaXF1aWRQbGVkZ2luZykpOwogICAgICAgIF87CiAgICB9CgogICAgLy8vIEBkZXYgVGhlIGZhbGwgYmFjayBmdW5jdGlvbiBhbGxvd3MgRVRIIHRvIGJlIGRlcG9zaXRlZCBpbnRvIHRoZSBMUFZhdWx0CiAgICAvLy8gIHRocm91Z2ggYSBzaW1wbGUgc2VuZAogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUge30KCiAgICAvLy8gQG5vdGljZSBgb25seU93bmVyYCB1c2VkIHRvIGF0dGFjaCBhIHNwZWNpZmljIGxpcXVpZFBsZWRnaW5nIGluc3RhbmNlCiAgICAvLy8gIHRvIHRoaXMgTFB2YXVsdDsga2VlcCBpbiBtaW5kIHRoYXQgb25jZSBhIGxpcXVpZFBsZWRnaW5nIGNvbnRyYWN0IGlzIAogICAgLy8vICBhdHRhY2hlZCBpdCBjYW5ub3QgYmUgdW5kb25lLCB0aGlzIHZhdWx0IHdpbGwgYmUgZm9yZXZlciBjb25uZWN0ZWQKICAgIC8vLyBAcGFyYW0gX25ld0xpcXVpZFBsZWRnaW5nIEEgZnVsbCBsaXF1aWQgcGxlZGdpbmcgY29udHJhY3QKICAgIGZ1bmN0aW9uIHNldExpcXVpZFBsZWRnaW5nKGFkZHJlc3MgX25ld0xpcXVpZFBsZWRnaW5nKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKGFkZHJlc3MobGlxdWlkUGxlZGdpbmcpID09IDB4MCk7CiAgICAgICAgbGlxdWlkUGxlZGdpbmcgPSBMaXF1aWRQbGVkZ2luZyhfbmV3TGlxdWlkUGxlZGdpbmcpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFVzZWQgdG8gZGVjZW50cmFsaXplLCB0b2dnbGVzIHdoZXRoZXIgdGhlIExQVmF1bHQgd2lsbAogICAgLy8vICBhdXRvbWF0aWNhbGx5IGNvbmZpcm0gYSBwYXltZW50IGFmdGVyIHRoZSBwYXltZW50IGhhcyBiZWVuIGF1dGhvcml6ZWQKICAgIC8vLyBAcGFyYW0gX2F1dG9tYXRpYyBJZiB0cnVlLCBwYXltZW50cyB3aWxsIGNvbmZpcm0gaW5zdGFudGx5LCBpZiBmYWxzZQogICAgLy8vICB0aGUgdHJhaW5pbmcgd2hlZWxzIGFyZSBwdXQgb24gYW5kIHRoZSBvd25lciBtdXN0IG1hbnVhbGx5IGFwcHJvdmUgCiAgICAvLy8gIGV2ZXJ5IHBheW1lbnQKICAgIGZ1bmN0aW9uIHNldEF1dG9wYXkoYm9vbCBfYXV0b21hdGljKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBhdXRvUGF5ID0gX2F1dG9tYXRpYzsKICAgICAgICBBdXRvUGF5U2V0KCk7CiAgICB9CgogICAgLy8vIEBub3RpY2UgYG9ubHlMaXF1aWRQbGVkZ2luZ2AgYXV0aG9yaXplcyBwYXltZW50cyBmcm9tIHRoaXMgY29udHJhY3QsIGlmIAogICAgLy8vICBgYXV0b1BheSA9PSB0cnVlYCB0aGUgdHJhbnNmZXIgaGFwcGVucyBhdXRvbWF0aWNhbGx5IGBlbHNlYCB0aGUgYG93bmVyYAogICAgLy8vICBtdXN0IGNhbGwgYGNvbmZpcm1QYXltZW50KClgIGZvciBhIHRyYW5zZmVyIHRvIG9jY3VyICh0cmFpbmluZyB3aGVlbHMpOwogICAgLy8vICBlaXRoZXIgd2F5LCBhIG5ldyBwYXltZW50IGlzIGFkZGVkIHRvIGBwYXltZW50c1tdYCAKICAgIC8vLyBAcGFyYW0gX3JlZiBSZWZlcmVuY2VzIHRoZSBwYXltZW50IHdpbGwgbm9ybWFsbHkgYmUgdGhlIHBsZWRnZUlECiAgICAvLy8gQHBhcmFtIF9kZXN0IFRoZSBhZGRyZXNzIHRoYXQgcGF5bWVudHMgd2lsbCBiZSBzZW50IHRvCiAgICAvLy8gQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCB0aGF0IHRoZSBwYXltZW50IGlzIGJlaW5nIGF1dGhvcml6ZWQgZm9yCiAgICAvLy8gQHJldHVybiBpZFBheW1lbnQgVGhlIGlkIG9mIHRoZSBwYXltZW50IChuZWVkZWQgYnkgdGhlIG93bmVyIHRvIGNvbmZpcm0pCiAgICBmdW5jdGlvbiBhdXRob3JpemVQYXltZW50KAogICAgICAgIGJ5dGVzMzIgX3JlZiwKICAgICAgICBhZGRyZXNzIF9kZXN0LAogICAgICAgIHVpbnQgX2Ftb3VudAogICAgKSBwdWJsaWMgb25seUxpcXVpZFBsZWRnaW5nIHJldHVybnMgKHVpbnQpCiAgICB7CiAgICAgICAgdWludCBpZFBheW1lbnQgPSBwYXltZW50cy5sZW5ndGg7CiAgICAgICAgcGF5bWVudHMubGVuZ3RoICsrOwogICAgICAgIHBheW1lbnRzW2lkUGF5bWVudF0uc3RhdGUgPSBQYXltZW50U3RhdHVzLlBlbmRpbmc7CiAgICAgICAgcGF5bWVudHNbaWRQYXltZW50XS5yZWYgPSBfcmVmOwogICAgICAgIHBheW1lbnRzW2lkUGF5bWVudF0uZGVzdCA9IF9kZXN0OwogICAgICAgIHBheW1lbnRzW2lkUGF5bWVudF0uYW1vdW50ID0gX2Ftb3VudDsKCiAgICAgICAgQXV0aG9yaXplUGF5bWVudChpZFBheW1lbnQsIF9yZWYsIF9kZXN0LCBfYW1vdW50KTsKCiAgICAgICAgaWYgKGF1dG9QYXkpIHsKICAgICAgICAgICAgZG9Db25maXJtUGF5bWVudChpZFBheW1lbnQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGlkUGF5bWVudDsKICAgIH0KCiAgICAvLy8gQG5vdGljZSBBbGxvd3MgdGhlIG93bmVyIHRvIGNvbmZpcm0gcGF5bWVudHM7ICBzaW5jZSAKICAgIC8vLyAgYGF1dGhvcml6ZVBheW1lbnRgIGlzIHRoZSBvbmx5IHdheSB0byBwb3B1bGF0ZSB0aGUgYHBheW1lbnRzW11gIGFycmF5CiAgICAvLy8gIHRoaXMgaXMgZ2VuZXJhbGx5IHVzZWQgd2hlbiBgYXV0b3BheWAgaXMgYGZhbHNlYCBhZnRlciBhIHBheW1lbnQgaGFzCiAgICAvLy8gIGhhcyBiZWVuIGF1dGhvcml6ZWQKICAgIC8vLyBAcGFyYW0gX2lkUGF5bWVudCBBcnJheSBsb29rdXAgZm9yIHRoZSBwYXltZW50LgogICAgZnVuY3Rpb24gY29uZmlybVBheW1lbnQodWludCBfaWRQYXltZW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBkb0NvbmZpcm1QYXltZW50KF9pZFBheW1lbnQpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIFRyYW5zZmVycyBFVEggYWNjb3JkaW5nIHRvIHRoZSBkYXRhIGhlbGQgd2l0aGluIHRoZSBzcGVjaWZpZWQKICAgIC8vLyAgcGF5bWVudCBpZCAoaW50ZXJuYWwgZnVuY3Rpb24pCiAgICAvLy8gQHBhcmFtIF9pZFBheW1lbnQgaWQgbnVtYmVyIGZvciB0aGUgcGF5bWVudCBhYm91dCB0byBiZSBmdWxmaWxsZWQgCiAgICBmdW5jdGlvbiBkb0NvbmZpcm1QYXltZW50KHVpbnQgX2lkUGF5bWVudCkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUoX2lkUGF5bWVudCA8IHBheW1lbnRzLmxlbmd0aCk7CiAgICAgICAgUGF5bWVudCBzdG9yYWdlIHAgPSBwYXltZW50c1tfaWRQYXltZW50XTsKICAgICAgICByZXF1aXJlKHAuc3RhdGUgPT0gUGF5bWVudFN0YXR1cy5QZW5kaW5nKTsKCiAgICAgICAgcC5zdGF0ZSA9IFBheW1lbnRTdGF0dXMuUGFpZDsKICAgICAgICBsaXF1aWRQbGVkZ2luZy5jb25maXJtUGF5bWVudCh1aW50NjQocC5yZWYpLCBwLmFtb3VudCk7CgogICAgICAgIHAuZGVzdC50cmFuc2ZlcihwLmFtb3VudCk7ICAvLyBUcmFuc2ZlcnMgRVRIIGRlbm9taW5hdGVkIGluIHdlaQoKICAgICAgICBDb25maXJtUGF5bWVudChfaWRQYXltZW50LCBwLnJlZik7CiAgICB9CgogICAgLy8vIEBub3RpY2UgV2hlbiBgYXV0b3BheWAgaXMgYGZhbHNlYCBhbmQgYWZ0ZXIgYSBwYXltZW50IGhhcyBiZWVuIGF1dGhvcml6ZWQKICAgIC8vLyAgdG8gYWxsb3cgdGhlIG93bmVyIHRvIGNhbmNlbCBhIHBheW1lbnQgaW5zdGVhZCBvZiBjb25maXJtaW5nIGl0LgogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IEFycmF5IGxvb2t1cCBmb3IgdGhlIHBheW1lbnQuCiAgICBmdW5jdGlvbiBjYW5jZWxQYXltZW50KHVpbnQgX2lkUGF5bWVudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgZG9DYW5jZWxQYXltZW50KF9pZFBheW1lbnQpOwogICAgfQoKICAgIC8vLyBAbm90aWNlIENhbmNlbHMgYSBwZW5kaW5nIHBheW1lbnQgKGludGVybmFsIGZ1bmN0aW9uKQogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50IGlkIG51bWJlciBmb3IgdGhlIHBheW1lbnQgICAgCiAgICBmdW5jdGlvbiBkb0NhbmNlbFBheW1lbnQodWludCBfaWRQYXltZW50KSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfaWRQYXltZW50IDwgcGF5bWVudHMubGVuZ3RoKTsKICAgICAgICBQYXltZW50IHN0b3JhZ2UgcCA9IHBheW1lbnRzW19pZFBheW1lbnRdOwogICAgICAgIHJlcXVpcmUocC5zdGF0ZSA9PSBQYXltZW50U3RhdHVzLlBlbmRpbmcpOwoKICAgICAgICBwLnN0YXRlID0gUGF5bWVudFN0YXR1cy5DYW5jZWxlZDsKCiAgICAgICAgbGlxdWlkUGxlZGdpbmcuY2FuY2VsUGF5bWVudCh1aW50NjQocC5yZWYpLCBwLmFtb3VudCk7CgogICAgICAgIENhbmNlbFBheW1lbnQoX2lkUGF5bWVudCwgcC5yZWYpOwoKICAgIH0KCiAgICAvLy8gQG5vdGljZSBgb25seU93bmVyYCBBbiBlZmZpY2llbnQgd2F5IHRvIGNvbmZpcm0gbXVsdGlwbGUgcGF5bWVudHMKICAgIC8vLyBAcGFyYW0gX2lkUGF5bWVudHMgQW4gYXJyYXkgb2YgbXVsdGlwbGUgcGF5bWVudCBpZHMKICAgIGZ1bmN0aW9uIG11bHRpQ29uZmlybSh1aW50W10gX2lkUGF5bWVudHMpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IF9pZFBheW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGRvQ29uZmlybVBheW1lbnQoX2lkUGF5bWVudHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQG5vdGljZSBgb25seU93bmVyYCBBbiBlZmZpY2llbnQgd2F5IHRvIGNhbmNlbCBtdWx0aXBsZSBwYXltZW50cwogICAgLy8vIEBwYXJhbSBfaWRQYXltZW50cyBBbiBhcnJheSBvZiBtdWx0aXBsZSBwYXltZW50IGlkcwogICAgZnVuY3Rpb24gbXVsdGlDYW5jZWwodWludFtdIF9pZFBheW1lbnRzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfaWRQYXltZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBkb0NhbmNlbFBheW1lbnQoX2lkUGF5bWVudHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLy8gQHJldHVybiBUaGUgdG90YWwgbnVtYmVyIG9mIHBheW1lbnRzIHRoYXQgaGF2ZSBldmVyIGJlZW4gYXV0aG9yaXplZAogICAgZnVuY3Rpb24gblBheW1lbnRzKCkgY29uc3RhbnQgcHVibGljIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gcGF5bWVudHMubGVuZ3RoOwogICAgfQoKICAgIC8vLyBUcmFuc2ZlciBldGggb3IgdG9rZW5zIHRvIHRoZSBlc2NhcGVIYXRjaERlc3RpbmF0aW9uLgogICAgLy8vIFVzZWQgYXMgYSBzYWZldHkgbWVjaGFuaXNtIHRvIHByZXZlbnQgdGhlIHZhdWx0IGZyb20gaG9sZGluZyB0b28gbXVjaCB2YWx1ZQogICAgLy8vIGJlZm9yZSBiZWluZyB0aG9yb3VnaGx5IGJhdHRsZS10ZXN0ZWQuCiAgICAvLy8gQHBhcmFtIF90b2tlbiB0byB0cmFuc2ZlciwgdXNlIDB4MCBmb3IgZXRoZXIKICAgIC8vLyBAcGFyYW0gX2Ftb3VudCB0byB0cmFuc2ZlcgogICAgZnVuY3Rpb24gZXNjYXBlRnVuZHMoYWRkcmVzcyBfdG9rZW4sIHVpbnQgX2Ftb3VudCkgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgLy8vIEBkZXYgTG9naWMgZm9yIGV0aGVyCiAgICAgICAgaWYgKF90b2tlbiA9PSAweDApIHsKICAgICAgICAgICAgcmVxdWlyZSh0aGlzLmJhbGFuY2UgPj0gX2Ftb3VudCk7CiAgICAgICAgICAgIGVzY2FwZUhhdGNoRGVzdGluYXRpb24udHJhbnNmZXIoX2Ftb3VudCk7CiAgICAgICAgICAgIEVzY2FwZUhhdGNoQ2FsbGVkKF90b2tlbiwgX2Ftb3VudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8vIEBkZXYgTG9naWMgZm9yIHRva2VucwogICAgICAgIEVSQzIwIHRva2VuID0gRVJDMjAoX3Rva2VuKTsKICAgICAgICB1aW50IGJhbGFuY2UgPSB0b2tlbi5iYWxhbmNlT2YodGhpcyk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlID49IF9hbW91bnQpOwogICAgICAgIHJlcXVpcmUodG9rZW4udHJhbnNmZXIoZXNjYXBlSGF0Y2hEZXN0aW5hdGlvbiwgX2Ftb3VudCkpOwogICAgICAgIEVzY2FwZUZ1bmRzQ2FsbGVkKF90b2tlbiwgX2Ftb3VudCk7CiAgICB9CgogICAgZXZlbnQgQXV0b1BheVNldCgpOwogICAgZXZlbnQgRXNjYXBlRnVuZHNDYWxsZWQoYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpOwogICAgZXZlbnQgQ29uZmlybVBheW1lbnQodWludCBpbmRleGVkIGlkUGF5bWVudCwgYnl0ZXMzMiBpbmRleGVkIHJlZik7CiAgICBldmVudCBDYW5jZWxQYXltZW50KHVpbnQgaW5kZXhlZCBpZFBheW1lbnQsIGJ5dGVzMzIgaW5kZXhlZCByZWYpOwogICAgZXZlbnQgQXV0aG9yaXplUGF5bWVudCgKICAgICAgICB1aW50IGluZGV4ZWQgaWRQYXltZW50LAogICAgICAgIGJ5dGVzMzIgaW5kZXhlZCByZWYsCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIGRlc3QsCiAgICAgICAgdWludCBhbW91bnQKICAgICAgICApOwp9'.
	

]
