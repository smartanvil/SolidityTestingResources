Class {
	#name : #SRTa4ff5ce0556f9ff0797ae525ec5ba9b723878a3e,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTa4ff5ce0556f9ff0797ae525ec5ba9b723878a3e >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgaWYgKGEgPT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgYXNzZXJ0KGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9CgoKY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KICAKICBmdW5jdGlvbiBnZXRPd25lcigpIHZpZXcgcHVibGljIHJldHVybnMgKGFkZHJlc3MpewogICAgcmV0dXJuIG93bmVyOwogIH0KICAKCn0KCgpjb250cmFjdCBUb2tlbiB7CgogICAgLy91aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIAogICAgLy9mdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKICAgIAogICAgLy9mdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50IHZhbHVlLCBieXRlcyBkYXRhKSByZXR1cm5zIChib29sIG9rKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIF9vd25lciwgYWRkcmVzcyBpbmRleGVkIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSk7Cn0KCgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKICAgIHVpbnQyNTYgX3RvdGFsU3VwcGx5OwogICAgCiAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgdG90YWxTdXBwbHkpIHsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAgICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBfdmFsdWUgPiAwKSB7CiAgICAgICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICAgICAgbGFzdF9zZWVuW190b10gPSBub3c7CiAgICAgICAgICAgIC8vaW52ZXN0b3JzLnB1c2goX3RvKSAtMTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICAgICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICBsYXN0X3NlZW5bX2Zyb21dID0gbm93OwogICAgICAgICAgICAvL2ludmVzdG9ycy5wdXNoKF90bykgLTE7CiAgICAgICAgICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBsYXN0U2VlbihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGxhc3Rfc2Vlbltfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgICAgICBsYXN0X3NlZW5bX3NwZW5kZXJdID0gbm93OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGxhc3Rfc2VlbjsKfQoKY29udHJhY3QgRVJDMjIzUmVjZWl2ZXIgewogIGZ1bmN0aW9uIHRva2VuRmFsbGJhY2soYWRkcmVzcyBfc2VuZGVyLCBhZGRyZXNzIF9vcmlnaW4sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcmV0dXJucyAoYm9vbCBvayk7Cn0KCgpjb250cmFjdCBTdGFuZGFyZDIyM1Rva2VuIGlzIFN0YW5kYXJkVG9rZW4gewogIC8vZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9maWx0ZXJpbmcgaWYgdGhlIHRhcmdldCBpcyBhIGNvbnRyYWN0IHdpdGggYnl0ZWNvZGUgaW5zaWRlIGl0CiAgICBpZiAoIXN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKSkgdGhyb3c7IC8vIGRvIGEgbm9ybWFsIHRva2VuIHRyYW5zZmVyCiAgICBpZiAoaXNDb250cmFjdChfdG8pKSByZXR1cm4gY29udHJhY3RGYWxsYmFjayhtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgbGFzdF9zZWVuW190b10gPSBub3c7CiAgICAvL2ludmVzdG9ycy5wdXNoKF90bykgLTE7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUsIGJ5dGVzIF9kYXRhKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmICghc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSkpIHRocm93OyAvLyBkbyBhIG5vcm1hbCB0b2tlbiB0cmFuc2ZlcgogICAgaWYgKGlzQ29udHJhY3QoX3RvKSkgcmV0dXJuIGNvbnRyYWN0RmFsbGJhY2soX2Zyb20sIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICBsYXN0X3NlZW5bX2Zyb21dID0gbm93OwogICAgbGFzdF9zZWVuW190b10gPSBub3c7CiAgICAvL2ludmVzdG9ycy5wdXNoKF90bykgLTE7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vcmV0dXJuIHRyYW5zZmVyKF90bywgX3ZhbHVlLCBuZXcgYnl0ZXMoMCkpOwogIC8vfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIHJldHVybiB0cmFuc2ZlckZyb20oX2Zyb20sIF90bywgX3ZhbHVlLCBuZXcgYnl0ZXMoMCkpOwogICAgbGFzdF9zZWVuW19mcm9tXSA9IG5vdzsKICAgIGxhc3Rfc2VlbltfdG9dID0gbm93OwogICAgLy9pbnZlc3RvcnMucHVzaChfdG8pIC0xOwogIH0KCiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgZnVuY3Rpb24gY29udHJhY3RGYWxsYmFjayhhZGRyZXNzIF9vcmlnaW4sIGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBFUkMyMjNSZWNlaXZlciByZWNpZXZlciA9IEVSQzIyM1JlY2VpdmVyKF90byk7CiAgICByZXR1cm4gcmVjaWV2ZXIudG9rZW5GYWxsYmFjayhtc2cuc2VuZGVyLCBfb3JpZ2luLCBfdmFsdWUsIF9kYXRhKTsKICB9CgogIC8vYXNzZW1ibGUgdGhlIGdpdmVuIGFkZHJlc3MgYnl0ZWNvZGUuIElmIGJ5dGVjb2RlIGV4aXN0cyB0aGVuIHRoZSBfYWRkciBpcyBhIGNvbnRyYWN0LgogIGZ1bmN0aW9uIGlzQ29udHJhY3QoYWRkcmVzcyBfYWRkcikgcHJpdmF0ZSByZXR1cm5zIChib29sIGlzX2NvbnRyYWN0KSB7CiAgICAvLyByZXRyaWV2ZSB0aGUgc2l6ZSBvZiB0aGUgY29kZSBvbiB0YXJnZXQgYWRkcmVzcywgdGhpcyBuZWVkcyBhc3NlbWJseQogICAgdWludCBsZW5ndGg7CiAgICBhc3NlbWJseSB7IGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikgfQogICAgcmV0dXJuIGxlbmd0aCA+IDA7CiAgfQp9Cgpjb250cmFjdCBTdGFuZGFyZDIyM1JlY2VpdmVyIGlzIEVSQzIyM1JlY2VpdmVyIHsKICBUa24gdGtuOwoKICBzdHJ1Y3QgVGtuIHsKICAgIGFkZHJlc3MgYWRkcjsKICAgIGFkZHJlc3Mgc2VuZGVyOwogICAgYWRkcmVzcyBvcmlnaW47CiAgICB1aW50MjU2IHZhbHVlOwogICAgYnl0ZXMgZGF0YTsKICAgIGJ5dGVzNCBzaWc7CiAgfQoKICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX3NlbmRlciwgYWRkcmVzcyBfb3JpZ2luLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHJldHVybnMgKGJvb2wgb2spIHsKICAgIC8vaWYgKCFzdXBwb3J0c1Rva2VuKG1zZy5zZW5kZXIpKSByZXR1cm4gZmFsc2U7CgogICAgLy8gUHJvYmxlbTogVGhpcyB3aWxsIGRvIGEgc3N0b3JlIHdoaWNoIGlzIGV4cGVuc2l2ZSBnYXMgd2lzZS4gRmluZCBhIHdheSB0byBrZWVwIGl0IGluIG1lbW9yeS4KICAgIHRrbiA9IFRrbihtc2cuc2VuZGVyLCBfc2VuZGVyLCBfb3JpZ2luLCBfdmFsdWUsIF9kYXRhLCBnZXRTaWcoX2RhdGEpKTsKICAgIF9faXNUb2tlbkZhbGxiYWNrID0gdHJ1ZTsKICAgIGlmICghYWRkcmVzcyh0aGlzKS5kZWxlZ2F0ZWNhbGwoX2RhdGEpKSByZXR1cm4gZmFsc2U7CgogICAgLy8gYXZvaWQgZG9pbmcgYW4gb3ZlcndyaXRlIHRvIC50b2tlbiwgd2hpY2ggd291bGQgYmUgbW9yZSBleHBlbnNpdmUKICAgIC8vIG1ha2VzIGFjY2Vzc2luZyAudGtuIHZhbHVlcyBvdXRzaWRlIHRva2VuUGF5YWJsZSBmdW5jdGlvbnMgdW5zYWZlCiAgICBfX2lzVG9rZW5GYWxsYmFjayA9IGZhbHNlOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gZ2V0U2lnKGJ5dGVzIF9kYXRhKSBwcml2YXRlIHJldHVybnMgKGJ5dGVzNCBzaWcpIHsKICAgIHVpbnQgbCA9IF9kYXRhLmxlbmd0aCA8IDQgPyBfZGF0YS5sZW5ndGggOiA0OwogICAgZm9yICh1aW50IGkgPSAwOyBpIDwgbDsgaSsrKSB7CiAgICAgIHNpZyA9IGJ5dGVzNCh1aW50KHNpZykgKyB1aW50KF9kYXRhW2ldKSAqICgyICoqICg4ICogKGwgLSAxIC0gaSkpKSk7CiAgICB9CiAgfQoKICBib29sIF9faXNUb2tlbkZhbGxiYWNrOwoKICBtb2RpZmllciB0b2tlblBheWFibGUgewogICAgaWYgKCFfX2lzVG9rZW5GYWxsYmFjaykgdGhyb3c7CiAgICBfOwogIH0KCiAgLy9mdW5jdGlvbiBzdXBwb3J0c1Rva2VuKGFkZHJlc3MgdG9rZW4pIHJldHVybnMgKGJvb2wpOwp9CgoKCmNvbnRyYWN0IGNpcGhDb21tdW5pdHkgaXMgU3RhbmRhcmQyMjNSZWNlaXZlciwgU3RhbmRhcmQyMjNUb2tlbiwgT3duYWJsZSB7CiAgCiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgLy91aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAKICB1aW50MjU2IHVwID0gMDsKICB1aW50MjU2IGRvd24gPSAwOwogIAogIGJvb2wgcHJvcG9zZSA9IGZhbHNlOwogIHVpbnQyNTYgcHJvc3Bvc2FsX3RpbWUgPSAwOwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IE1BWF9TVVBQTFkgPSA4NjAwMDAwMDAwMDBlMTg7CiAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHZvdGVzOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgcHVibGljIHRyYWNrYWJsZTsKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKHVpbnQgPT4gdWludDI1NikpIHB1YmxpYyB0cmFja2FibGVfcmVjb3JkOwogIGFkZHJlc3NbXSBpbnZlc3RvcnM7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYmFubmFibGU7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBpbnRlcm5hbCBzdXBwb3J0X2JhbjsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIGFnYWluc3RfYmFuOwogIAogIGV2ZW50IFZvdGVzKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgTWludCh1aW50MjU2IHZhbHVlKTsKICAKICBmdW5jdGlvbiAoKSBwdWJsaWMgcGF5YWJsZSB7fQogIAogIGZ1bmN0aW9uIGluaXRpYWxpemVfcHJvcG9zYWwoKSBwdWJsaWMgewoKICAgIGlmKHByb3Bvc2UpIHRocm93OwogICAgcHJvcG9zZSA9IHRydWU7CiAgICBwcm9zcG9zYWxfdGltZSA9IG5vdzsKCiAgfQogIAogIGZ1bmN0aW9uIGlzX3Byb3Bvc2FsX3N1cHBvcnRlZCgpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBpZighcHJvcG9zZSkgdGhyb3c7CiAgICBpZihkb3duLm11bCg0KSA8IHVwKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH1lbHNlewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICAKICBmdW5jdGlvbiBkaXN0cmlidXRlX3Rva2VuKCkKICB7CiAgICAgICB1aW50MjU2IGludmVzdG9yc19udW0gPSBpbnZlc3RvcnMubGVuZ3RoOwogICAgICAgdWludDI1NiBhbW91bnQgPSAoMTAwMDAwMGUxOC0xMDAwKS9pbnZlc3RvcnNfbnVtOwogICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGludmVzdG9yc19udW07IGkrKykKICAgICAgIHsKICAgICAgICAgICBpZihsYXN0X3NlZW5baW52ZXN0b3JzW2ldXS5hZGQoOTAgKiAxIGRheXMpID4gbm93KQogICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJhbGFuY2VzW2ludmVzdG9yc1tpXV0gKz0gYW1vdW50OwogICAgICAgICAgICAgICAgbGFzdF9zZWVuW2ludmVzdG9yc1tpXV0gPSBub3c7CiAgICAgICAgICAgIH0KICAgICAgIH0KICAgIH0KCgogIGZ1bmN0aW9uIG1pbnQoKSAvKmNhbk1pbnQqLyBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgCiAgICBpZihwcm9wb3NlICYmIG5vdyA+PSBwcm9zcG9zYWxfdGltZS5hZGQoNyAqIDEgZGF5cykpewogICAgICAgIHVpbnQyNTYgX2Ftb3VudCA9IDEwMDAwMDBlMTg7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LmFkZChfYW1vdW50KTsKICAgICAgICBpZihfdG90YWxTdXBwbHkgPD0gTUFYX1NVUFBMWSAmJiBpc19wcm9wb3NhbF9zdXBwb3J0ZWQoKSkKICAgICAgICB7CiAgICAgICAgICAgIGJhbGFuY2VzW293bmVyXSA9IGJhbGFuY2VzW293bmVyXS5hZGQoMTAwMCk7CiAgICAgICAgICAgIC8vVHJhbnNmZXIoYWRkcmVzcygwKSwgX3RvLCBfYW1vdW50KTsKICAgICAgICAgICAgcHJvcG9zZSA9IGZhbHNlOwogICAgICAgICAgICBwcm9zcG9zYWxfdGltZSA9IDA7CiAgICAgICAgICAgIHVwID0gMDsKICAgICAgICAgICAgZG93biA9IDA7CiAgICAgICAgICAgIGRpc3RyaWJ1dGVfdG9rZW4oKTsKICAgICAgICAgICAgTWludChfYW1vdW50KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHByb3Bvc2UgPSBmYWxzZTsKICAgICAgICAgICAgcHJvc3Bvc2FsX3RpbWUgPSAwOwogICAgICAgICAgICB1cCA9IDA7CiAgICAgICAgICAgIGRvd24gPSAwOwogICAgICAgICAgICAvL3JldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIC8vcmV0dXJuIGZhbHNlOwogIH0KICAKICBmdW5jdGlvbiBzdXBwb3J0X3Byb3Bvc2FsKCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIGlmKCFwcm9wb3NlIHx8IHZvdGVzW21zZy5zZW5kZXJdID09IDEpIHRocm93OwogICAgLy9maXJzdCBjaGVjayBiYWxhbmNlIHRvIGJlIG1vcmUgdGhhbiAxMCBDaXBocwogICAgaWYoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPiAxMDBlMTgpCiAgICB7CiAgICAgICAgLy9vbmx5IHZvdGUgb25jZQogICAgICAgIHZvdGVzW21zZy5zZW5kZXJdID0gMTsKICAgICAgICB1cCsrOwogICAgICAgIG1pbnQoKTsKICAgICAgICBWb3Rlcyhtc2cuc2VuZGVyLCAxKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9ZWxzZQogICAgewogICAgICAgIC8vbm8gc3VmZmljaWVudCBmdW5kcyB0byBjYXJyeSBvdXQgdm90aW5nIGNvbnNlbnN1cwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFnYWluc3RfcHJvcG9zYWwoKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgaWYoIXByb3Bvc2UgfHwgdm90ZXNbbXNnLnNlbmRlcl0gPT0gMSkgdGhyb3c7CiAgICAvL2ZpcnN0IGNoZWNrIGJhbGFuY2UgdG8gYmUgbW9yZSB0aGFuIDEwIENpcGhzCiAgICBpZihiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDEwMGUxOCkKICAgIHsKICAgICAgICAvL29ubHkgdm90ZSBvbmNlCiAgICAgICAgdm90ZXNbbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIGRvd24rKzsKICAgICAgICBtaW50KCk7CiAgICAgICAgVm90ZXMobXNnLnNlbmRlciwgMSk7CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfWVsc2UKICAgIHsKICAgICAgICAvL25vIHN1ZmZpY2llbnQgZnVuZHMgdG8gY2Fycnkgb3V0IHZvdGluZyBjb25zZW5zdXMKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIAogIGZ1bmN0aW9uIGJhbl9hY2NvdW50KGFkZHJlc3MgX2Jhbm5hYmxlX2FkZHJlc3MpIGludGVybmFsewogICAgICAgIGlmKGJhbGFuY2VzW19iYW5uYWJsZV9hZGRyZXNzXSA+IDApCiAgICAgICAgewogICAgICAgICAgdHJhbnNmZXJGcm9tKF9iYW5uYWJsZV9hZGRyZXNzLCBvd25lciwgYmFsYW5jZXNbX2Jhbm5hYmxlX2FkZHJlc3NdKTsKICAgICAgICB9CiAgICAgICAgZGVsZXRlIGJhbGFuY2VzW19iYW5uYWJsZV9hZGRyZXNzXTsKICAgICAgICAKICAgICAgICB1aW50MjU2IGludmVzdG9yc19udW0gPSBpbnZlc3RvcnMubGVuZ3RoOwogICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBpbnZlc3RvcnNfbnVtOyBpKyspCiAgICAgICAgewogICAgICAgICAgICBpZihpbnZlc3RvcnNbaV0gPT0gX2Jhbm5hYmxlX2FkZHJlc3MpewogICAgICAgICAgICAgICAgZGVsZXRlIGludmVzdG9yc1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgLy9kZWxldGUgaW52ZXN0b3JzW107CiAgfQogIAogIGZ1bmN0aW9uIGJhbl9jaGVjayhhZGRyZXNzIF9iYW5uYWJsZV9hZGRyZXNzKSBpbnRlcm5hbAogIHsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIC8vdWludDI1NiB0aW1lX2RpZmYgPSBub3cuc3ViKGJhbm5hYmxlW19iYW5uYWJsZV9hZGRyZXNzXSk7IAogICAgaWYobm93LnN1YihiYW5uYWJsZVtfYmFubmFibGVfYWRkcmVzc10pID4gMC41ICogMSBkYXlzKQogICAgewogICAgICAgIGlmKGFnYWluc3RfYmFuW19iYW5uYWJsZV9hZGRyZXNzXS5tdWwoNCkgPCBzdXBwb3J0X2JhbltfYmFubmFibGVfYWRkcmVzc10pCiAgICAgICAgewogICAgICAgICAgICBiYW5fYWNjb3VudChfYmFubmFibGVfYWRkcmVzcyk7CiAgICAgICAgfQogICAgfQogIH0KICAKICBmdW5jdGlvbiBpbml0aWFsaXplX2Jhbm5hYmxlKGFkZHJlc3MgX2Jhbm5hYmxlX2FkZHJlc3MpIHB1YmxpYyB7CiAgICBiYW5uYWJsZVtfYmFubmFibGVfYWRkcmVzc10gPSBub3c7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgfQogIAogIGZ1bmN0aW9uIHN1cHBvcnRfYmFuX29mKGFkZHJlc3MgX2Jhbm5hYmxlX2FkZHJlc3MpIHB1YmxpYwogIHsKICAgIHJlcXVpcmUoYmFubmFibGVbX2Jhbm5hYmxlX2FkZHJlc3NdID4gMCk7CiAgICBzdXBwb3J0X2JhbltfYmFubmFibGVfYWRkcmVzc10gPSBzdXBwb3J0X2JhbltfYmFubmFibGVfYWRkcmVzc10uYWRkKDEpOwogICAgYmFuX2NoZWNrKF9iYW5uYWJsZV9hZGRyZXNzKTsKICB9CiAgCiAgZnVuY3Rpb24gYWdhaW5zdF9iYW5fb2YoYWRkcmVzcyBfYmFubmFibGVfYWRkcmVzcykgcHVibGljCiAgewogICAgcmVxdWlyZShiYW5uYWJsZVtfYmFubmFibGVfYWRkcmVzc10gPiAwKTsKICAgIGFnYWluc3RfYmFuW19iYW5uYWJsZV9hZGRyZXNzXSA9IGFnYWluc3RfYmFuW19iYW5uYWJsZV9hZGRyZXNzXS5hZGQoMSk7CiAgICBiYW5fY2hlY2soX2Jhbm5hYmxlX2FkZHJlc3MpOwogIH0KCiAgZnVuY3Rpb24gdHJhY2soYWRkcmVzcyBfdHJhY2thYmxlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgLy8gInRyYWNrYWJsZSBhZGRlZCwgdm90ZSBsaWtlIG9yIGRpc2xpa2UgdXNpbmcgdGhlIGFkZHJlc3MgcmVnaXN0ZXJlZCB3aXRoIHRoZSB0cmFja2FibGUiOwogICAgdHJhY2thYmxlW190cmFja2FibGVdW21zZy5zZW5kZXJdID0gMTsKICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gbGlrZV90cmFja2FibGUoYWRkcmVzcyBfdHJhY2thYmxlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgaWYodHJhY2thYmxlW190cmFja2FibGVdW21zZy5zZW5kZXJdICE9IDEpCiAgICB7CiAgICAgICAgdHJhY2thYmxlW190cmFja2FibGVdW21zZy5zZW5kZXJdID0gMTsKICAgICAgICB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzFdID0gdHJhY2thYmxlX3JlY29yZFtfdHJhY2thYmxlXVsxXSArIDE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBkaXNsaWtlX3RyYWNrYWJsZShhZGRyZXNzIF90cmFja2FibGUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBsYXN0X3NlZW5bbXNnLnNlbmRlcl0gPSBub3c7CiAgICBpZih0cmFja2FibGVbX3RyYWNrYWJsZV1bbXNnLnNlbmRlcl0gIT0gMSkKICAgIHsKICAgICAgICB0cmFja2FibGVbX3RyYWNrYWJsZV1bbXNnLnNlbmRlcl0gPSAxOwogICAgICAgIHRyYWNrYWJsZV9yZWNvcmRbX3RyYWNrYWJsZV1bMl0gPSB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzJdICsgMTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHRyYWNrYWJsZV9saWtlcyhhZGRyZXNzIF90cmFja2FibGUpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IG51bSA9IDA7CiAgICAvL2lmKHRyYWNrYWJsZVtfdHJhY2thYmxlXSkKICAgIC8vewoKICAgICAgICBudW0gPSB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzFdOwoKICAgIC8vfQogICAgcmV0dXJuIG51bTsKICB9CgogIGZ1bmN0aW9uIHRyYWNrYWJsZV9kaXNsaWtlcyhhZGRyZXNzIF90cmFja2FibGUpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IG51bSA9IDA7CiAgICBudW0gPSB0cmFja2FibGVfcmVjb3JkW190cmFja2FibGVdWzJdOwogICAgcmV0dXJuIG51bTsKICB9CiAgICAKfQoKY29udHJhY3QgQ2lwaHMgaXMgY2lwaENvbW11bml0eXsKCiAgLy91c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAKICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiQ2lwaHMiOwogIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIkNJUEhTIjsKICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKCiAgdWludDI1NiBwdWJsaWMgcmF0ZSA9IDEwMDAwMDBlMTg7CiAgdWludDI1NiByYWlzZWRBbW91bnQgPSAwOwogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IElOSVRJQUxfU1VQUExZID0gNzAwMDAwMGUxODsKIAogIC8vZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CiAgLy9ldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICBldmVudCBCb3VnaHRUb2tlbnMoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IHZhbHVlKTsKICAKICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBidXJuZXIsIHVpbnQyNTYgdmFsdWUpOwoKICAKICBmdW5jdGlvbiBDaXBocygpIHB1YmxpYyB7CiAgICBfdG90YWxTdXBwbHkgPSBJTklUSUFMX1NVUFBMWTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gSU5JVElBTF9TVVBQTFk7CiAgfQoKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIGlmKHByb3Bvc2UgJiYgaXNfcHJvcG9zYWxfc3VwcG9ydGVkKCkgJiYgbm93ID4gcHJvc3Bvc2FsX3RpbWUuYWRkKDcgKiAxIGRheXMpKQogICAgXzsKICAgIGVsc2UKICAgIHRocm93OwogIH0KICAKICAgIAogIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKCiAgICBidXlUb2tlbnMoKTsKCiAgfQogIAogIAogIGZ1bmN0aW9uIGJ1eVRva2VucygpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgCiAgICAvL3JlcXVpcmUocHJvcG9zZSk7CiAgICAKICAgIHVpbnQyNTYgd2VpQW1vdW50ID0gbXNnLnZhbHVlOwogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKGdldFJhdGUoKSk7CiAgICAKICAgIHRva2VucyA9IHRva2Vucy5kaXYoMSBldGhlcik7CiAgICAKICAgIEJvdWdodFRva2Vucyhtc2cuc2VuZGVyLCB0b2tlbnMpOwoKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uYWRkKHRva2Vucyk7CiAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKHRva2Vucyk7CiAgICBfdG90YWxTdXBwbHkuc3ViKHRva2Vucyk7CgogICAgcmFpc2VkQW1vdW50ID0gcmFpc2VkQW1vdW50LmFkZChtc2cudmFsdWUpOwogICAgCiAgICBpbnZlc3RvcnMucHVzaChtc2cuc2VuZGVyKSAtMTsKICAgIAogICAgbGFzdF9zZWVuW21zZy5zZW5kZXJdID0gbm93OwogICAgLy9vd25lci50cmFuc2Zlcihtc2cudmFsdWUpOwogIH0KICAKICBmdW5jdGlvbiBnZXRJbnZlc3RvcnMoKSB2aWV3IHB1YmxpYyByZXR1cm5zIChhZGRyZXNzW10pewogICAgICByZXR1cm4gaW52ZXN0b3JzOwogIH0KCiAgCiAgZnVuY3Rpb24gc2V0UmF0ZSh1aW50MjU2IF9yYXRlKSBwdWJsaWMgb25seU93bmVyewogICAgICByYXRlID0gX3JhdGU7CiAgfQogIAogIGZ1bmN0aW9uIGdldFJhdGUoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nil7CiAgICAgIAogICAgICByZXR1cm4gcmF0ZTsKICAgICAgCiAgfQoKICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3ZhbHVlID4gMCk7CgogICAgICAgIGFkZHJlc3MgYnVybmVyID0gbXNnLnNlbmRlcjsKICAgICAgICBiYWxhbmNlc1tidXJuZXJdID0gYmFsYW5jZXNbYnVybmVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBfdG90YWxTdXBwbHkgPSBfdG90YWxTdXBwbHkuc3ViKF92YWx1ZSk7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwogICAgICAgIGxhc3Rfc2Vlblttc2cuc2VuZGVyXSA9IG5vdzsKICB9CiAgCiAgZnVuY3Rpb24gc2VuZEV0aGVyVG9Pd25lcigpIHB1YmxpYyBvbmx5T3duZXIgeyAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgIG93bmVyLnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQogIAogIGZ1bmN0aW9uIGRlc3Ryb3koKSBpbnRlcm5hbCBvbmx5T3duZXIgewogICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICB9CgoKfQ=='.
	

]
