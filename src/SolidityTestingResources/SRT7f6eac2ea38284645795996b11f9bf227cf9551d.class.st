Class {
	#name : #SRT7f6eac2ea38284645795996b11f9bf227cf9551d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT7f6eac2ea38284645795996b11f9bf227cf9551d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTk7CgovKiBUT0RPOiBBZGQgcmVwb3J0aW5nIG1lY2hhbmlzbSB0byBwdW5pc2ggcmV2ZWFsaW5nIHZvdGVzIG9mZi1jaGFpbiBlaXRoZXIgb24gcHVycG9zZSBvciBieSB1c2luZyB3ZWFrIHNhbHQgZm9yIGNvbXB1dGluZyB2b3RlIGNvbW1pdCBoYXNoICovCgoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTc5CiAqLwpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCiAgZnVuY3Rpb24gT3duYWJsZSgpIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KfQoKCmNvbnRyYWN0IENyeXB0b1Rhc2sgaXMgT3duYWJsZSB7CiAgIAogICAgdWludCBNQVhfVUlOVDMyID0gNDI5NDk2NzI5NTsKICAgIHVpbnQgcHVibGljIE1JTl9UQVNLX1ZBTFVFID0gMjAwMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludCBwdWJsaWMgQ0xJRU5UX1RJTUVfVE9fREVDSURFID0gMyBkYXlzOwogICAgdWludCBwdWJsaWMgVk9USU5HX1BFUklPRCA9IDUgZGF5czsKICAgIC8qdWludCBwdWJsaWMgTUlOX1RBU0tfVkFMVUUgPSAyMDAwMDAwMDAwMDAwMDAwMDAwOwogICAgdWludCBwdWJsaWMgQ0xJRU5UX1RJTUVfVE9fREVDSURFID0gMTUgbWludXRlczsKICAgIHVpbnQgcHVibGljIFZPVElOR19QRVJJT0QgPSAxNSBtaW51dGVzOyovCiAgICAKICAgIHN0cnVjdCBUYXNrIHsKICAgICAgICBhZGRyZXNzIGNsaWVudDsKICAgICAgICBhZGRyZXNzIGZsOwogICAgICAgIHVpbnQgdGFza1ZhbHVlOwogICAgICAgIHVpbnQgd29ya1RpbWU7CiAgICAgICAgdWludCBhcHBseVRpbWU7CiAgICAgICAgdWludCBzb2x1dGlvblN1Ym1pdHRlZFRpbWU7CiAgICAgICAgdWludCBkaXNwdXRlU3RhcnRlZFRpbWU7CiAgICAgICAgYnl0ZXMzMiBibG9ja0hhc2g7CiAgICAgICAgbWFwcGluZyhhZGRyZXNzID0+IGJ5dGVzMzIpIHZvdGVDb21taXRzOwogICAgICAgIG1hcHBpbmcodWludDMyID0+IHVpbnQzMikgdm90ZXM7CiAgICAgICAgbWFwcGluZyh1aW50MzIgPT4gYWRkcmVzcykgdm90ZXJzOwogICAgICAgIHVpbnQzMiB2b3Rlc1RvdGFsOwogICAgICAgIHVpbnQzMiB2b3Rlc0NsaWVudDsKICAgICAgICB1aW50MzIgdm90ZXNGbDsgICAgICAgIAogICAgICAgIHVpbnQzMiBzdGFnZTsKICAgICAgICB1aW50IHByZXY7CiAgICAgICAgdWludCBuZXh0OwogICAgfQogICAgLy9kdWUgdG8gc3RhY2sgZGVwdGggZXJyb3Igbm90IGV2ZXJ5dGhpbmcgY291bGQgYmUgZml0dGVkIHRvIHRoZSBzdHJ1Y3QKICAgIG1hcHBpbmcodWludCA9PiBzdHJpbmcpIHB1YmxpYyB0aXRsZXM7CiAgICBtYXBwaW5nKHVpbnQgPT4gc3RyaW5nKSBwdWJsaWMgZGVzY3JpcHRpb25zOwogICAgbWFwcGluZyh1aW50ID0+IHN0cmluZykgcHVibGljIHNvbHV0aW9uczsKICAgIG1hcHBpbmcodWludCA9PiB1aW50KSBwdWJsaWMgZGlzcHV0ZUJsb2NrTm9zOwogICAgCiAgICAKICAgIEVSQzIwIHB1YmxpYyB0b2tlbkNvbnRyYWN0ID0gRVJDMjAoMHg0NTQ1NzUwRjM5YUY2QmU0RjIzN0I2ODY5RDRFY2NBOTI4RmQ1QTg1KTsKICAgIAogICAgLy9vd25lciBjYW4gcHJldmVudCBuZXcgdGFzayBzdWJtaXNzaW9ucyBpZiBwbGF0Zm9ybSBpcyB0byBiZSBtb3ZlZCB0byBhIG5ldyBjb250cmFjdAogICAgLy9hcGFydCBmcm9tIHRoaXMgYW5kIGFpcmRyb3BzLCBvd25lciBoYXMgbm8gb3RoZXIgcHJpdmlsZWdlcwogICAgYm9vbCBwdWJsaWMgbWlncmF0aW5nOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQzMikgcHVibGljIEFEczsKICAgIAogICAgbWFwcGluZyh1aW50ID0+IFRhc2spIHB1YmxpYyB0YXNrczsKICAgIHVpbnQgcHVibGljIHRhc2tzU2l6ZTsKICAgIHVpbnQgcHVibGljIGxhc3RUYXNrSW5kZXg7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludCkgcHVibGljIHN0YWtlczsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgbGFzdFN0YWtpbmdzOwogICAgdWludCBwdWJsaWMgdG90YWxTdGFrZTsKICAgIAogICAgCiAgICBmdW5jdGlvbiBzZXRNaWdyYXRpbmcoYm9vbCB3aWxsTWlncmF0ZSkgb25seU93bmVyIHsKICAgICAgICBtaWdyYXRpbmcgPSB3aWxsTWlncmF0ZTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0TWluVGFza1ZhbHVlKHVpbnQgbWluVGFza1ZhbHVlKSBvbmx5T3duZXIgewogICAgICAgIE1JTl9UQVNLX1ZBTFVFID0gbWluVGFza1ZhbHVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBwb3N0VGFzayhzdHJpbmcgdGl0bGUsIHN0cmluZyBkZXNjcmlwdGlvbiwgdWludCB0YXNrVmFsdWUsIHVpbnQgd29ya1RpbWUpIHsKICAgICAgICByZXF1aXJlKCFtaWdyYXRpbmcgJiYgdGFza1ZhbHVlID4gTUlOX1RBU0tfVkFMVUUpOwogICAgICAgIAogICAgICAgIHRhc2tzU2l6ZSsrOwogICAgICAgIAogICAgICAgIHRhc2tzW3Rhc2tzU2l6ZV0uY2xpZW50ID0gbXNnLnNlbmRlcjsKICAgICAgICB0aXRsZXNbdGFza3NTaXplXSA9IHRpdGxlOwogICAgICAgIHRhc2tzW3Rhc2tzU2l6ZV0ud29ya1RpbWUgPSB3b3JrVGltZTsKICAgICAgICB0YXNrc1t0YXNrc1NpemVdLnRhc2tWYWx1ZSA9IHRhc2tWYWx1ZTsKICAgICAgICBkZXNjcmlwdGlvbnNbdGFza3NTaXplXSA9IGRlc2NyaXB0aW9uOwogICAgICAgIAogICAgICAgIC8vbGlua2VkIGxpc3QgY29ubmVjdGluZwogICAgICAgIHRhc2tzW3Rhc2tzU2l6ZV0ucHJldiA9IGxhc3RUYXNrSW5kZXg7CiAgICAgICAgaWYobGFzdFRhc2tJbmRleCA+IDApIHsKICAgICAgICAgICAgdGFza3NbbGFzdFRhc2tJbmRleF0ubmV4dCA9IHRhc2tzU2l6ZTsKICAgICAgICB9CiAgICAgICAgbGFzdFRhc2tJbmRleCA9IHRhc2tzU2l6ZTsKICAgICAgICAKICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB0YXNrVmFsdWUgKyB0YXNrVmFsdWUvMTApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhcHBseUZvclRhc2sodWludCB0YXNrSUQpIHsKICAgICAgICByZXF1aXJlKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gMCAmJiB0YXNrc1t0YXNrSURdLmNsaWVudCAhPSBhZGRyZXNzKDApKTsKICAgICAgICB0YXNrc1t0YXNrSURdLmZsID0gbXNnLnNlbmRlcjsKICAgICAgICB0YXNrc1t0YXNrSURdLmFwcGx5VGltZSA9IG5vdzsKICAgICAgICB0YXNrc1t0YXNrSURdLnN0YWdlID0gMTsKICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB0YXNrc1t0YXNrSURdLnRhc2tWYWx1ZS8xMCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHN1Ym1pdFNvbHV0aW9uKHVpbnQgdGFza0lELCBzdHJpbmcgc29sdXRpb24pIHsKICAgICAgICByZXF1aXJlKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gMSAmJiBtc2cuc2VuZGVyID09IHRhc2tzW3Rhc2tJRF0uZmwgJiYgbm93IDwgdGFza3NbdGFza0lEXS5hcHBseVRpbWUgKyB0YXNrc1t0YXNrSURdLndvcmtUaW1lKTsKICAgICAgICBzb2x1dGlvbnNbdGFza0lEXSA9IHNvbHV0aW9uOwogICAgICAgIHRhc2tzW3Rhc2tJRF0uc29sdXRpb25TdWJtaXR0ZWRUaW1lID0gbm93OwogICAgICAgIHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPSAyOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzdGFydERpc3B1dGUodWludCB0YXNrSUQpIHsKICAgICAgICByZXF1aXJlKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gMiAmJiB0YXNrc1t0YXNrSURdLmNsaWVudCA9PSBtc2cuc2VuZGVyICYmIG5vdyA8IHRhc2tzW3Rhc2tJRF0uc29sdXRpb25TdWJtaXR0ZWRUaW1lICsgQ0xJRU5UX1RJTUVfVE9fREVDSURFKTsKICAgICAgICBkaXNwdXRlQmxvY2tOb3NbdGFza0lEXSA9IGJsb2NrLm51bWJlcjsKICAgICAgICB0YXNrc1t0YXNrSURdLnN0YWdlID0gMzsKICAgIH0KICAgIAogICAgLy9jb21taXREaXNwdXRlIGFuZCBzdGFydERpc3B1dGUgbmVlZCB0byBiZSBzZXBhcmF0ZSBzdGFnZXMgdG8gZW5zdXJlIGJsb2NrSGFzaCByYW5kb21uZXNzCiAgICBmdW5jdGlvbiBjb21taXREaXNwdXRlKHVpbnQgdGFza0lEKSB7CiAgICAgICAgcmVxdWlyZSh0YXNrc1t0YXNrSURdLnN0YWdlID09IDMgJiYgdGFza3NbdGFza0lEXS5jbGllbnQgPT0gbXNnLnNlbmRlciAmJiBub3cgPCB0YXNrc1t0YXNrSURdLnNvbHV0aW9uU3VibWl0dGVkVGltZSArIENMSUVOVF9USU1FX1RPX0RFQ0lERSAmJiBibG9jay5udW1iZXIgPiBkaXNwdXRlQmxvY2tOb3NbdGFza0lEXSs1KTsKICAgICAgICB0YXNrc1t0YXNrSURdLmJsb2NrSGFzaCA9IGJsb2NrLmJsb2NraGFzaChkaXNwdXRlQmxvY2tOb3NbdGFza0lEXSk7CiAgICAgICAgdGFza3NbdGFza0lEXS5kaXNwdXRlU3RhcnRlZFRpbWUgPSBub3c7CiAgICAgICAgdGFza3NbdGFza0lEXS5zdGFnZSA9IDQ7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbW1pdFZvdGUodWludCB0YXNrSUQsIGJ5dGVzMzIgdm90ZUhhc2gpIHsKICAgICAgICByZXF1aXJlKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gNCAmJiBub3cgPCB0YXNrc1t0YXNrSURdLmRpc3B1dGVTdGFydGVkVGltZSArIFZPVElOR19QRVJJT0QgJiYgdGFza3NbdGFza0lEXS52b3RlQ29tbWl0c1ttc2cuc2VuZGVyXSA9PSBieXRlczMyKDApKTsKICAgICAgICB0YXNrc1t0YXNrSURdLnZvdGVDb21taXRzW21zZy5zZW5kZXJdID0gdm90ZUhhc2g7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJldmVhbFZvdGUodWludCB0YXNrSUQsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzLCB1aW50MzIgdm90ZSwgYnl0ZXMzMiBzYWx0KSB7CiAgICAgICAgLy8xMDAgc2VjIGJ1ZmZlciBiZXR3ZWVuIGNvbW1pdCBhbmQgcmV2ZWFsIHZvdGUgc3RhZ2VzCiAgICAgICAgcmVxdWlyZSh0YXNrc1t0YXNrSURdLnN0YWdlID09IDQgJiYgbm93ID4gdGFza3NbdGFza0lEXS5kaXNwdXRlU3RhcnRlZFRpbWUgKyBWT1RJTkdfUEVSSU9EKzEwMCAmJiBub3cgPCB0YXNrc1t0YXNrSURdLmRpc3B1dGVTdGFydGVkVGltZSArIDIqVk9USU5HX1BFUklPRCAmJiB0YXNrc1t0YXNrSURdLnZvdGVDb21taXRzW21zZy5zZW5kZXJdICE9IGJ5dGVzMzIoMCkpOwogICAgICAgIC8vY2hlY2sgdGhhdCByZXZlYWxlZCBzaWduYXR1cmUgbWF0Y2hlcyBwdWJsaWMga2V5LCB0aGF0IHN0YWtlIGlzIGhpZ2ggZW5vdWdoIChzZWxlY3Rpb24gbGlrZWxpaG9vZCBwcm9wb3J0aW9uYWwgdG8gc3Rha2UpLCB0aGF0IHRva2VucyBoYXZlbid0IGJlZW4gbW92ZWQgYXJvdW5kIHNpbmNlIGRpc3B1dGUgc3RhcnRlZCB0byBwcmV2ZW50IGJpYXNpbmcgdGhlIHNlbGVjdGlvbiBsaWtlbGlob29kLCB0aGF0IHJldmVhbGVkIHZvdGUgbWF0Y2hlcyB0aGUgdm90ZSBjb21taXQKICAgICAgICBpZihlY3JlY292ZXIoa2VjY2FrMjU2KHRhc2tJRCwgdGFza3NbdGFza0lEXS5ibG9ja0hhc2gpLCB2LCByLCBzKSA9PSBtc2cuc2VuZGVyICYmICgxMCpNQVhfVUlOVDMyKS8odWludChzKSAlIChNQVhfVUlOVDMyKzEpKSA+IHRvdGFsU3Rha2Uvc3Rha2VzW21zZy5zZW5kZXJdICYmIGxhc3RTdGFraW5nc1ttc2cuc2VuZGVyXSA8IHRhc2tzW3Rhc2tJRF0uZGlzcHV0ZVN0YXJ0ZWRUaW1lICYmIGtlY2NhazI1NihzYWx0LCB2b3RlKSA9PSB0YXNrc1t0YXNrSURdLnZvdGVDb21taXRzW21zZy5zZW5kZXJdKSB7CiAgICAgICAgICAgIGlmKHZvdGU9PTEpIHsKICAgICAgICAgICAgICAgIHRhc2tzW3Rhc2tJRF0udm90ZXNDbGllbnQrKzsKICAgICAgICAgICAgfSBlbHNlIGlmKHZvdGU9PTIpIHsKICAgICAgICAgICAgICAgIHRhc2tzW3Rhc2tJRF0udm90ZXNGbCsrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3c7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGFza3NbdGFza0lEXS52b3Rlc1t0YXNrc1t0YXNrSURdLnZvdGVzVG90YWxdID0gdm90ZTsKICAgICAgICAgICAgdGFza3NbdGFza0lEXS52b3RlcnNbdGFza3NbdGFza0lEXS52b3Rlc1RvdGFsXSA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgIHRhc2tzW3Rhc2tJRF0udm90ZXNUb3RhbCsrOwogICAgICAgICAgICAvL3ByZXZlbnQgbXVsdGlwbGUgcmV2ZWFsaW5nIG9mIHNhbWUgdm90ZQogICAgICAgICAgICB0YXNrc1t0YXNrSURdLnZvdGVDb21taXRzW21zZy5zZW5kZXJdID0gYnl0ZXMzMigwKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZpbmFsaXplVGFzayh1aW50IHRhc2tJRCkgewogICAgICAgIHVpbnQgdGFza1ZhbHVlVGVudGggPSB0YXNrc1t0YXNrSURdLnRhc2tWYWx1ZS8xMDsKICAgICAgICB1aW50IHJldmlld2VyUmV3YXJkOwogICAgICAgIHVpbnQzMiBpOwogICAgICAgIAogICAgICAgIC8vY2FuY2VsIHBvc3RlZCB0YXNrIG5vIGhhcyBhcHBsaWVkIGZvciB5ZXQKICAgICAgICBpZih0YXNrc1t0YXNrSURdLnN0YWdlID09IDAgJiYgbXNnLnNlbmRlciA9PSB0YXNrc1t0YXNrSURdLmNsaWVudCkgewogICAgICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKHRhc2tzW3Rhc2tJRF0uY2xpZW50LCB0YXNrc1t0YXNrSURdLnRhc2tWYWx1ZSArIHRhc2tWYWx1ZVRlbnRoKTsKICAgICAgICAgICAgdGFza3NbdGFza0lEXS5zdGFnZSA9IDU7CiAgICAgICAgfQogICAgICAgIC8vYWNjZXB0IGZyZWVsYW5jZXIncyBzb2x1dGlvbgogICAgICAgIGVsc2UgaWYodGFza3NbdGFza0lEXS5zdGFnZSA9PSAyICYmIG1zZy5zZW5kZXIgPT0gdGFza3NbdGFza0lEXS5jbGllbnQpIHsKICAgICAgICAgICAgdG9rZW5Db250cmFjdC50cmFuc2Zlcih0YXNrc1t0YXNrSURdLmZsLCB0YXNrc1t0YXNrSURdLnRhc2tWYWx1ZSArIHRhc2tWYWx1ZVRlbnRoKTsKICAgICAgICAgICAgdG9rZW5Db250cmFjdC50cmFuc2Zlcih0YXNrc1t0YXNrSURdLmNsaWVudCwgdGFza1ZhbHVlVGVudGgpOwogICAgICAgICAgICB0YXNrc1t0YXNrSURdLnN0YWdlID0gNjsKICAgICAgICB9CiAgICAgICAgLy9jbGllbnQgZGlkbid0IHJldmlldyBmcmVlbGFuY2VyJ3Mgc29sdXRpb24gb24gdGltZSwgdHJlYXRlZCBhcyBzb2x1dGlvbiBhY2NlcHRlZAogICAgICAgIGVsc2UgaWYoKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gMiB8fCB0YXNrc1t0YXNrSURdLnN0YWdlID09IDMpICYmIG5vdyA+IHRhc2tzW3Rhc2tJRF0uc29sdXRpb25TdWJtaXR0ZWRUaW1lICsgQ0xJRU5UX1RJTUVfVE9fREVDSURFKSB7CiAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodGFza3NbdGFza0lEXS5mbCwgdGFza3NbdGFza0lEXS50YXNrVmFsdWUgKyAyKnRhc2tWYWx1ZVRlbnRoKTsKICAgICAgICAgICAgdGFza3NbdGFza0lEXS5zdGFnZSA9IDc7CiAgICAgICAgfQogICAgICAgIC8vZGlzcHV0ZSB3YXMgc3RhcnRlZCBhbmQgcmV2aWV3ZXJzIHZvdGVkIGluIGZyZWVsYW5jZXIncyBmYXZvdXIKICAgICAgICBlbHNlIGlmKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gNCAmJiB0YXNrc1t0YXNrSURdLnZvdGVzRmwgPiB0YXNrc1t0YXNrSURdLnZvdGVzQ2xpZW50ICYmIG5vdyA+IHRhc2tzW3Rhc2tJRF0uZGlzcHV0ZVN0YXJ0ZWRUaW1lICsgMipWT1RJTkdfUEVSSU9EKSB7CiAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodGFza3NbdGFza0lEXS5mbCwgdGFza3NbdGFza0lEXS50YXNrVmFsdWUgKyB0YXNrVmFsdWVUZW50aCk7CiAgICAgICAgICAgIHJldmlld2VyUmV3YXJkID0gdGFza1ZhbHVlVGVudGggLyB0YXNrc1t0YXNrSURdLnZvdGVzRmw7CiAgICAgICAgICAgIC8vZGlzdHJpYnV0ZSByZXZpZXdlciByZXdhcmRzCiAgICAgICAgICAgIGZvcihpPTA7IGkgPCB0YXNrc1t0YXNrSURdLnZvdGVzVG90YWw7IGkrKykgewogICAgICAgICAgICAgICAgaWYodGFza3NbdGFza0lEXS52b3Rlc1tpXSA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgdG9rZW5Db250cmFjdC50cmFuc2Zlcih0YXNrc1t0YXNrSURdLnZvdGVyc1tpXSwgcmV2aWV3ZXJSZXdhcmQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPSA4OwogICAgICAgIH0KICAgICAgICAvL2ZyZWVsYW5jZXIgZGlkbid0IHN1Ym1pdCBzb2x1dGlvbiBvbiB0aW1lLCBjbGllbnQgZ2V0cyBmcmVlbGFuY2VyJ3MgZXNjcm93CiAgICAgICAgZWxzZSBpZih0YXNrc1t0YXNrSURdLnN0YWdlID09IDEgJiYgbm93ID4gdGFza3NbdGFza0lEXS5hcHBseVRpbWUgKyB0YXNrc1t0YXNrSURdLndvcmtUaW1lKSB7CiAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodGFza3NbdGFza0lEXS5jbGllbnQsIHRhc2tzW3Rhc2tJRF0udGFza1ZhbHVlICsgMip0YXNrVmFsdWVUZW50aCk7CiAgICAgICAgICAgIHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPSA5OwogICAgICAgIH0KICAgICAgICAvL2Rpc3B1dGUgd2FzIHN0YXJ0ZWQgYW5kIHJldmlld2VycyB2b3RlZCBpbiBjbGllbnQncyBmYXZvdXIKICAgICAgICBlbHNlIGlmKHRhc2tzW3Rhc2tJRF0uc3RhZ2UgPT0gNCAmJiB0YXNrc1t0YXNrSURdLnZvdGVzQ2xpZW50ID49IHRhc2tzW3Rhc2tJRF0udm90ZXNGbCAmJiBub3cgPiB0YXNrc1t0YXNrSURdLmRpc3B1dGVTdGFydGVkVGltZSArIDIqVk9USU5HX1BFUklPRCkgewogICAgICAgICAgICBpZih0YXNrc1t0YXNrSURdLnZvdGVzVG90YWwgPT0gMCkgewogICAgICAgICAgICAgICAgdG9rZW5Db250cmFjdC50cmFuc2Zlcih0YXNrc1t0YXNrSURdLmNsaWVudCwgdGFza3NbdGFza0lEXS50YXNrVmFsdWUgKyB0YXNrVmFsdWVUZW50aCk7CiAgICAgICAgICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKHRhc2tzW3Rhc2tJRF0uZmwsIHRhc2tWYWx1ZVRlbnRoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodGFza3NbdGFza0lEXS5jbGllbnQsIHRhc2tzW3Rhc2tJRF0udGFza1ZhbHVlICsgdGFza1ZhbHVlVGVudGgpOwogICAgICAgICAgICAgICAgcmV2aWV3ZXJSZXdhcmQgPSB0YXNrVmFsdWVUZW50aCAvIHRhc2tzW3Rhc2tJRF0udm90ZXNDbGllbnQ7CiAgICAgICAgICAgICAgICAvL2Rpc3RyaWJ1dGUgcmV2aWV3ZXIgcmV3YXJkcwogICAgICAgICAgICAgICAgZm9yKGk9MDsgaSA8IHRhc2tzW3Rhc2tJRF0udm90ZXNUb3RhbDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYodGFza3NbdGFza0lEXS52b3Rlc1tpXSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXIodGFza3NbdGFza0lEXS52b3RlcnNbaV0sIHJldmlld2VyUmV3YXJkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGFza3NbdGFza0lEXS5zdGFnZSA9IDEwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93OwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL2Nvbm5lY3QgbGlua2VkIGxpc3QgYWZ0ZXIgdGhlIHRhc2sgcmVtb3ZhbAogICAgICAgIGlmKHRhc2tzW3Rhc2tJRF0ucHJldiA+IDApIHsKICAgICAgICAgICAgdGFza3NbdGFza3NbdGFza0lEXS5wcmV2XS5uZXh0ID0gdGFza3NbdGFza0lEXS5uZXh0OwogICAgICAgIH0KICAgICAgICBpZih0YXNrc1t0YXNrSURdLm5leHQgPiAwKSB7CiAgICAgICAgICAgIHRhc2tzW3Rhc2tzW3Rhc2tJRF0ubmV4dF0ucHJldiA9IHRhc2tzW3Rhc2tJRF0ucHJldjsKICAgICAgICB9CiAgICAgICAgaWYodGFza0lEID09IGxhc3RUYXNrSW5kZXgpIHsKICAgICAgICAgICAgbGFzdFRhc2tJbmRleCA9IHRhc2tzW3Rhc2tJRF0ucHJldjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9pZiB1c2VycyB3aG8gcmVjZWl2ZWQgYWlyZHJvcHMKICAgICAgICBpZihBRHNbdGFza3NbdGFza0lEXS5jbGllbnRdID4gMCkgewogICAgICAgICAgICBBRHNbdGFza3NbdGFza0lEXS5jbGllbnRdKys7CiAgICAgICAgfQogICAgICAgIGlmKEFEc1t0YXNrc1t0YXNrSURdLmZsXSA+IDApIHsKICAgICAgICAgICAgQURzW3Rhc2tzW3Rhc2tJRF0uZmxdKys7CiAgICAgICAgfQogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIGFkZFN0YWtlKHVpbnQgdmFsdWUpIHsKICAgICAgICBpZih2YWx1ZSA+IDApIHsKICAgICAgICAgICAgc3Rha2VzW21zZy5zZW5kZXJdICs9IHZhbHVlOwogICAgICAgICAgICBsYXN0U3Rha2luZ3NbbXNnLnNlbmRlcl0gPSBub3c7CiAgICAgICAgICAgIHRvdGFsU3Rha2UgKz0gdmFsdWU7CiAgICAgICAgICAgIHRva2VuQ29udHJhY3QudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIHZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3U3Rha2UodWludCB2YWx1ZSkgewogICAgICAgIGlmKHZhbHVlID4gMCAmJiBzdGFrZXNbbXNnLnNlbmRlcl0gPj0gdmFsdWUpIHsKICAgICAgICAgICAgLy9yZWNlaXZlZCBhaXJkcm9wIGJ1dCBjb21wbGV0ZWQgbGVzcyB0aGFuIDEwIHRhc2tzCiAgICAgICAgICAgIGlmKEFEc1ttc2cuc2VuZGVyXSA+IDAgJiYgQURzW21zZy5zZW5kZXJdIDwgMTApIHsKICAgICAgICAgICAgICAgIHRocm93OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YWtlc1ttc2cuc2VuZGVyXSAtPSB2YWx1ZTsKICAgICAgICAgICAgbGFzdFN0YWtpbmdzW21zZy5zZW5kZXJdID0gbm93OwogICAgICAgICAgICB0b3RhbFN0YWtlIC09IHZhbHVlOwogICAgICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyKG1zZy5zZW5kZXIsIHZhbHVlKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vYWlyZHJvcAogICAgZnVuY3Rpb24gYWRkU3Rha2VBRCh1aW50IHZhbHVlLCBhZGRyZXNzIHJlY2lwaWVudCkgb25seU93bmVyIHsKICAgICAgICAvL3ByZXZlbnQgb3duZXIgZnJvbSBhZGRpbmcgYSBzbWFsbCB2YWx1ZSB0byBzZXQgcmVndWxhciB1c2VyIHRvIGFpcmRyb3BwZWQgdXNlcgogICAgICAgIGlmKHZhbHVlID4gMCAmJiB2YWx1ZSA+IDEwMDAqc3Rha2VzW3JlY2lwaWVudF0pIHsKICAgICAgICAgICAgc3Rha2VzW3JlY2lwaWVudF0gKz0gdmFsdWU7CiAgICAgICAgICAgIGxhc3RTdGFraW5nc1tyZWNpcGllbnRdID0gbm93OwogICAgICAgICAgICB0b3RhbFN0YWtlICs9IHZhbHVlOwogICAgICAgICAgICBBRHNbcmVjaXBpZW50XSsrOwogICAgICAgICAgICB0b2tlbkNvbnRyYWN0LnRyYW5zZmVyRnJvbShtc2cuc2VuZGVyLCB0aGlzLCB2YWx1ZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAKICAgIGZ1bmN0aW9uIGdldFZvdGVDb21taXQodWludCB0YXNrSUQsIGFkZHJlc3MgY29tbWl0ZXIpIGNvbnN0YW50IHJldHVybnMgKGJ5dGVzMzIgY29tbWl0KSB7CiAgICAgICAgcmV0dXJuIHRhc2tzW3Rhc2tJRF0udm90ZUNvbW1pdHNbY29tbWl0ZXJdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRWb3RlKHVpbnQgdGFza0lELCB1aW50MzIgaW5kZXgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQzMiB2b3RlKSB7CiAgICAgICAgcmV0dXJuIHRhc2tzW3Rhc2tJRF0udm90ZXNbaW5kZXhdOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRWb3Rlcih1aW50IHRhc2tJRCwgdWludDMyIGluZGV4KSBjb25zdGFudCByZXR1cm5zIChhZGRyZXNzIHZvdGVyKSB7CiAgICAgICAgcmV0dXJuIHRhc2tzW3Rhc2tJRF0udm90ZXJzW2luZGV4XTsKICAgIH0KICAgIAp9'.
	

]
