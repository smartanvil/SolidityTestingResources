Class {
	#name : #SRTabdf147870235fcfc34153828c769a70b3fae01f,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTabdf147870235fcfc34153828c769a70b3fae01f >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovLyBEZXBsb3llZCA8c3BhbiBjbGFzcz0iX19jZl9lbWFpbF9fIiBkYXRhLWNmZW1haWw9Ijk4ZWZmMWY0ZjRkOGZkZWNmMGZlZjFmNmZkZTBiNmZiZjdmNSI+W2VtYWlsJiMxNjA7cHJvdGVjdGVkXTwvc3Bhbj4gMzEvMTIvMTcKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIEVSQzIwQmFzaWMKICogQGRldiBTaW1wbGVyIHZlcnNpb24gb2YgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8xNzkKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpOwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9CgovKioKICogQHRpdGxlIEJhc2ljIHRva2VuCiAqIEBkZXYgQmFzaWMgdmVyc2lvbiBvZiBTdGFuZGFyZFRva2VuLCB3aXRoIG5vIGFsbG93YW5jZXMuCiAqLwpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUoX3RvICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYmFsYW5jZXNbbXNnLnNlbmRlcl0pOwoKICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCn0KCgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtZW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJkIHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCiAgLyoqCiAgICogYXBwcm92ZSBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWxsb3dlZFtfc3BlbmRlcl0gPT0gMC4gVG8gaW5jcmVtZW50CiAgICogYWxsb3dlZCB2YWx1ZSBpcyBiZXR0ZXIgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYXZvaWQgMiBjYWxscyAoYW5kIHdhaXQgdW50aWwKICAgKiB0aGUgZmlyc3QgdHJhbnNhY3Rpb24gaXMgbWluZWQpCiAgICogRnJvbSBNb25vbGl0aERBTyBUb2tlbi5zb2wKICAgKi8KICBmdW5jdGlvbiBpbmNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdLmFkZChfYWRkZWRWYWx1ZSk7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHVpbnQgb2xkVmFsdWUgPSBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXTsKICAgIGlmIChfc3VidHJhY3RlZFZhbHVlID4gb2xkVmFsdWUpIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSAwOwogICAgfSBlbHNlIHsKICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBvbGRWYWx1ZS5zdWIoX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICB9CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0pOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfQoKCmNvbnRyYWN0IFVwZ3JhZGVkU3RhbmRhcmRUb2tlbiBpcyBTdGFuZGFyZFRva2VuIHsKICAgIC8vIHRob3NlIG1ldGhvZHMgYXJlIGNhbGxlZCBieSB0aGUgbGVnYWN5IGNvbnRyYWN0CiAgICAvLyBhbmQgdGhleSBtdXN0IGVuc3VyZSBtc2cuc2VuZGVyIHRvIGJlIHRoZSBjb250cmFjdCBhZGRyZXNzCiAgICB1aW50IHB1YmxpYyBfdG90YWxTdXBwbHk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckJ5TGVnYWN5KGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludCB2YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tQnlMZWdhY3koYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgZnJvbSwgYWRkcmVzcyBzcGVuZGVyLCB1aW50IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBhcHByb3ZlQnlMZWdhY3koYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICAgIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWxCeUxlZ2FjeShhZGRyZXNzIGZyb20sIGFkZHJlc3Mgc3BlbmRlciwgdWludCBhZGRlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiBkZWNyZWFzZUFwcHJvdmFsQnlMZWdhY3koYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQgc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7Cn0KCi8qKgogKiBAdGl0bGUgT3duYWJsZQogKiBAZGV2IFRoZSBPd25hYmxlIGNvbnRyYWN0IGhhcyBhbiBvd25lciBhZGRyZXNzLCBhbmQgcHJvdmlkZXMgYmFzaWMgYXV0aG9yaXphdGlvbiBjb250cm9sCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuCiAqLwpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIGV2ZW50IE93bmVyc2hpcFRyYW5zZmVycmVkKGFkZHJlc3MgaW5kZXhlZCBwcmV2aW91c093bmVyLCBhZGRyZXNzIGluZGV4ZWQgbmV3T3duZXIpOwoKCiAgLyoqCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgcHVibGljIHsKICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICB9CgoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjYWxsZWQgYnkgYW55IGFjY291bnQgb3RoZXIgdGhhbiB0aGUgb3duZXIuCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG93bmVyKTsKICAgIF87CiAgfQoKCiAgLyoqCiAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgKiBAcGFyYW0gbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyT3duZXJzaGlwKGFkZHJlc3MgbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgcmVxdWlyZShuZXdPd25lciAhPSBhZGRyZXNzKDApKTsKICAgIE93bmVyc2hpcFRyYW5zZmVycmVkKG93bmVyLCBuZXdPd25lcik7CiAgICBvd25lciA9IG5ld093bmVyOwogIH0KCn0KCmNvbnRyYWN0IFN0YW5kYXJkVG9rZW5XaXRoRmVlcyBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKCiAgLy8gQWRkaXRpb25hbCB2YXJpYWJsZXMgZm9yIHVzZSBpZiB0cmFuc2FjdGlvbiBmZWVzIGV2ZXIgYmVjYW1lIG5lY2Vzc2FyeQogIHVpbnQyNTYgcHVibGljIGJhc2lzUG9pbnRzUmF0ZSA9IDA7CiAgdWludDI1NiBwdWJsaWMgbWF4aW11bUZlZSA9IDA7CiAgdWludDI1NiBjb25zdGFudCBNQVhfU0VUVEFCTEVfQkFTSVNfUE9JTlRTID0gMjA7CiAgdWludDI1NiBjb25zdGFudCBNQVhfU0VUVEFCTEVfRkVFID0gNTA7CgogIHN0cmluZyBwdWJsaWMgbmFtZTsKICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICB1aW50OCBwdWJsaWMgZGVjaW1hbHM7CiAgdWludCBwdWJsaWMgX3RvdGFsU3VwcGx5OwoKICB1aW50IHB1YmxpYyBjb25zdGFudCBNQVhfVUlOVCA9IDIqKjI1NiAtIDE7CgogIGZ1bmN0aW9uIGNhbGNGZWUodWludCBfdmFsdWUpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgZmVlID0gKF92YWx1ZS5tdWwoYmFzaXNQb2ludHNSYXRlKSkuZGl2KDEwMDAwKTsKICAgIGlmIChmZWUgPiBtYXhpbXVtRmVlKSB7CiAgICAgICAgZmVlID0gbWF4aW11bUZlZTsKICAgIH0KICAgIHJldHVybiBmZWU7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICB1aW50IGZlZSA9IGNhbGNGZWUoX3ZhbHVlKTsKICAgIHVpbnQgc2VuZEFtb3VudCA9IF92YWx1ZS5zdWIoZmVlKTsKCiAgICBzdXBlci50cmFuc2ZlcihfdG8sIHNlbmRBbW91bnQpOwogICAgaWYgKGZlZSA+IDApIHsKICAgICAgc3VwZXIudHJhbnNmZXIob3duZXIsIGZlZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgcmVxdWlyZShfdmFsdWUgPD0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0pOwoKICAgIHVpbnQgZmVlID0gY2FsY0ZlZShfdmFsdWUpOwogICAgdWludCBzZW5kQW1vdW50ID0gX3ZhbHVlLnN1YihmZWUpOwoKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChzZW5kQW1vdW50KTsKICAgIGlmIChhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA8IE1BWF9VSU5UKSB7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIH0KICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIHNlbmRBbW91bnQpOwogICAgaWYgKGZlZSA+IDApIHsKICAgICAgYmFsYW5jZXNbb3duZXJdID0gYmFsYW5jZXNbb3duZXJdLmFkZChmZWUpOwogICAgICBUcmFuc2ZlcihfZnJvbSwgb3duZXIsIGZlZSk7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIHNldFBhcmFtcyh1aW50IG5ld0Jhc2lzUG9pbnRzLCB1aW50IG5ld01heEZlZSkgcHVibGljIG9ubHlPd25lciB7CiAgICAgIC8vIEVuc3VyZSB0cmFuc3BhcmVuY3kgYnkgaGFyZGNvZGluZyBsaW1pdCBiZXlvbmQgd2hpY2ggZmVlcyBjYW4gbmV2ZXIgYmUgYWRkZWQKICAgICAgcmVxdWlyZShuZXdCYXNpc1BvaW50cyA8IE1BWF9TRVRUQUJMRV9CQVNJU19QT0lOVFMpOwogICAgICByZXF1aXJlKG5ld01heEZlZSA8IE1BWF9TRVRUQUJMRV9GRUUpOwoKICAgICAgYmFzaXNQb2ludHNSYXRlID0gbmV3QmFzaXNQb2ludHM7CiAgICAgIG1heGltdW1GZWUgPSBuZXdNYXhGZWUubXVsKHVpbnQoMTApKipkZWNpbWFscyk7CgogICAgICBQYXJhbXMoYmFzaXNQb2ludHNSYXRlLCBtYXhpbXVtRmVlKTsKICB9CgogIC8vIENhbGxlZCBpZiBjb250cmFjdCBldmVyIGFkZHMgZmVlcwogIGV2ZW50IFBhcmFtcyh1aW50IGZlZUJhc2lzUG9pbnRzLCB1aW50IG1heEZlZSk7Cgp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9CgoKY29udHJhY3QgQmxhY2tMaXN0IGlzIE93bmFibGUgewoKICAgIC8vLy8vLy8gR2V0dGVyIHRvIGFsbG93IHRoZSBzYW1lIGJsYWNrbGlzdCB0byBiZSB1c2VkIGFsc28gYnkgb3RoZXIgY29udHJhY3RzIChpbmNsdWRpbmcgdXBncmFkZWQgVGV0aGVyKSAvLy8vLy8vCiAgICBmdW5jdGlvbiBnZXRCbGFja0xpc3RTdGF0dXMoYWRkcmVzcyBfbWFrZXIpIGV4dGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gaXNCbGFja0xpc3RlZFtfbWFrZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzQmxhY2tMaXN0ZWQ7CgogICAgZnVuY3Rpb24gYWRkQmxhY2tMaXN0IChhZGRyZXNzIF9ldmlsVXNlcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgaXNCbGFja0xpc3RlZFtfZXZpbFVzZXJdID0gdHJ1ZTsKICAgICAgICBBZGRlZEJsYWNrTGlzdChfZXZpbFVzZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUJsYWNrTGlzdCAoYWRkcmVzcyBfY2xlYXJlZFVzZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIGlzQmxhY2tMaXN0ZWRbX2NsZWFyZWRVc2VyXSA9IGZhbHNlOwogICAgICAgIFJlbW92ZWRCbGFja0xpc3QoX2NsZWFyZWRVc2VyKTsKICAgIH0KCiAgICBldmVudCBBZGRlZEJsYWNrTGlzdChhZGRyZXNzIGluZGV4ZWQgX3VzZXIpOwoKICAgIGV2ZW50IFJlbW92ZWRCbGFja0xpc3QoYWRkcmVzcyBpbmRleGVkIF91c2VyKTsKCn0KCmNvbnRyYWN0IFRldGhlclRva2VuIGlzIFBhdXNhYmxlLCBTdGFuZGFyZFRva2VuV2l0aEZlZXMsIEJsYWNrTGlzdCB7CgogICAgYWRkcmVzcyBwdWJsaWMgdXBncmFkZWRBZGRyZXNzOwogICAgYm9vbCBwdWJsaWMgZGVwcmVjYXRlZDsKCiAgICAvLyAgVGhlIGNvbnRyYWN0IGNhbiBiZSBpbml0aWFsaXplZCB3aXRoIGEgbnVtYmVyIG9mIHRva2VucwogICAgLy8gIEFsbCB0aGUgdG9rZW5zIGFyZSBkZXBvc2l0ZWQgdG8gdGhlIG93bmVyIGFkZHJlc3MKICAgIC8vCiAgICAvLyBAcGFyYW0gX2JhbGFuY2UgSW5pdGlhbCBzdXBwbHkgb2YgdGhlIGNvbnRyYWN0CiAgICAvLyBAcGFyYW0gX25hbWUgVG9rZW4gTmFtZQogICAgLy8gQHBhcmFtIF9zeW1ib2wgVG9rZW4gc3ltYm9sCiAgICAvLyBAcGFyYW0gX2RlY2ltYWxzIFRva2VuIGRlY2ltYWxzCiAgICBmdW5jdGlvbiBUZXRoZXJUb2tlbih1aW50IF9pbml0aWFsU3VwcGx5LCBzdHJpbmcgX25hbWUsIHN0cmluZyBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHB1YmxpYyB7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gX2luaXRpYWxTdXBwbHk7CiAgICAgICAgbmFtZSA9IF9uYW1lOwogICAgICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICAgICAgZGVjaW1hbHMgPSBfZGVjaW1hbHM7CiAgICAgICAgYmFsYW5jZXNbb3duZXJdID0gX2luaXRpYWxTdXBwbHk7CiAgICAgICAgZGVwcmVjYXRlZCA9IGZhbHNlOwogICAgfQoKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc0JsYWNrTGlzdGVkW21zZy5zZW5kZXJdKTsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gVXBncmFkZWRTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudHJhbnNmZXJCeUxlZ2FjeShtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRm9yd2FyZCBFUkMyMCBtZXRob2RzIHRvIHVwZ3JhZGVkIGNvbnRyYWN0IGlmIHRoaXMgb25lIGlzIGRlcHJlY2F0ZWQKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyB3aGVuTm90UGF1c2VkIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKCFpc0JsYWNrTGlzdGVkW19mcm9tXSk7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLnRyYW5zZmVyRnJvbUJ5TGVnYWN5KG1zZy5zZW5kZXIsIF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyRnJvbShfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgd2hvKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBVcGdyYWRlZFN0YW5kYXJkVG9rZW4odXBncmFkZWRBZGRyZXNzKS5iYWxhbmNlT2Yod2hvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYmFsYW5jZU9mKHdobyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEFsbG93IGNoZWNrcyBvZiBiYWxhbmNlIGF0IHRpbWUgb2YgZGVwcmVjYXRpb24KICAgIGZ1bmN0aW9uIG9sZEJhbGFuY2VPZihhZGRyZXNzIHdobykgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYmFsYW5jZU9mKHdobyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEZvcndhcmQgRVJDMjAgbWV0aG9kcyB0byB1cGdyYWRlZCBjb250cmFjdCBpZiB0aGlzIG9uZSBpcyBkZXByZWNhdGVkCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmFwcHJvdmVCeUxlZ2FjeShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYXBwcm92ZShfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5jcmVhc2VBcHByb3ZhbChhZGRyZXNzIF9zcGVuZGVyLCB1aW50IF9hZGRlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmluY3JlYXNlQXBwcm92YWxCeUxlZ2FjeShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX2FkZGVkVmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzdXBlci5pbmNyZWFzZUFwcHJvdmFsKF9zcGVuZGVyLCBfYWRkZWRWYWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwoYWRkcmVzcyBfc3BlbmRlciwgdWludCBfc3VidHJhY3RlZFZhbHVlKSBwdWJsaWMgd2hlbk5vdFBhdXNlZCByZXR1cm5zIChib29sKSB7CiAgICAgICAgaWYgKGRlcHJlY2F0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFVwZ3JhZGVkU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmRlY3JlYXNlQXBwcm92YWxCeUxlZ2FjeShtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3N1YnRyYWN0ZWRWYWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmRlY3JlYXNlQXBwcm92YWwoX3NwZW5kZXIsIF9zdWJ0cmFjdGVkVmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBGb3J3YXJkIEVSQzIwIG1ldGhvZHMgdG8gdXBncmFkZWQgY29udHJhY3QgaWYgdGhpcyBvbmUgaXMgZGVwcmVjYXRlZAogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCByZW1haW5pbmcpIHsKICAgICAgICBpZiAoZGVwcmVjYXRlZCkgewogICAgICAgICAgICByZXR1cm4gU3RhbmRhcmRUb2tlbih1cGdyYWRlZEFkZHJlc3MpLmFsbG93YW5jZShfb3duZXIsIF9zcGVuZGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc3VwZXIuYWxsb3dhbmNlKF9vd25lciwgX3NwZW5kZXIpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBkZXByZWNhdGUgY3VycmVudCBjb250cmFjdCBpbiBmYXZvdXIgb2YgYSBuZXcgb25lCiAgICBmdW5jdGlvbiBkZXByZWNhdGUoYWRkcmVzcyBfdXBncmFkZWRBZGRyZXNzKSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKF91cGdyYWRlZEFkZHJlc3MgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgZGVwcmVjYXRlZCA9IHRydWU7CiAgICAgICAgdXBncmFkZWRBZGRyZXNzID0gX3VwZ3JhZGVkQWRkcmVzczsKICAgICAgICBEZXByZWNhdGUoX3VwZ3JhZGVkQWRkcmVzcyk7CiAgICB9CgogICAgLy8gZGVwcmVjYXRlIGN1cnJlbnQgY29udHJhY3QgaWYgZmF2b3VyIG9mIGEgbmV3IG9uZQogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludCkgewogICAgICAgIGlmIChkZXByZWNhdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBTdGFuZGFyZFRva2VuKHVwZ3JhZGVkQWRkcmVzcykudG90YWxTdXBwbHkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gX3RvdGFsU3VwcGx5OwogICAgICAgIH0KICAgIH0KCiAgICAvLyBJc3N1ZSBhIG5ldyBhbW91bnQgb2YgdG9rZW5zCiAgICAvLyB0aGVzZSB0b2tlbnMgYXJlIGRlcG9zaXRlZCBpbnRvIHRoZSBvd25lciBhZGRyZXNzCiAgICAvLwogICAgLy8gQHBhcmFtIF9hbW91bnQgTnVtYmVyIG9mIHRva2VucyB0byBiZSBpc3N1ZWQKICAgIGZ1bmN0aW9uIGlzc3VlKHVpbnQgYW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uYWRkKGFtb3VudCk7CiAgICAgICAgX3RvdGFsU3VwcGx5ID0gX3RvdGFsU3VwcGx5LmFkZChhbW91bnQpOwogICAgICAgIElzc3VlKGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIoYWRkcmVzcygwKSwgb3duZXIsIGFtb3VudCk7CiAgICB9CgogICAgLy8gUmVkZWVtIHRva2Vucy4KICAgIC8vIFRoZXNlIHRva2VucyBhcmUgd2l0aGRyYXduIGZyb20gdGhlIG93bmVyIGFkZHJlc3MKICAgIC8vIGlmIHRoZSBiYWxhbmNlIG11c3QgYmUgZW5vdWdoIHRvIGNvdmVyIHRoZSByZWRlZW0KICAgIC8vIG9yIHRoZSBjYWxsIHdpbGwgZmFpbC4KICAgIC8vIEBwYXJhbSBfYW1vdW50IE51bWJlciBvZiB0b2tlbnMgdG8gYmUgaXNzdWVkCiAgICBmdW5jdGlvbiByZWRlZW0odWludCBhbW91bnQpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5zdWIoYW1vdW50KTsKICAgICAgICBiYWxhbmNlc1tvd25lcl0gPSBiYWxhbmNlc1tvd25lcl0uc3ViKGFtb3VudCk7CiAgICAgICAgUmVkZWVtKGFtb3VudCk7CiAgICAgICAgVHJhbnNmZXIob3duZXIsIGFkZHJlc3MoMCksIGFtb3VudCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVzdHJveUJsYWNrRnVuZHMgKGFkZHJlc3MgX2JsYWNrTGlzdGVkVXNlcikgcHVibGljIG9ubHlPd25lciB7CiAgICAgICAgcmVxdWlyZShpc0JsYWNrTGlzdGVkW19ibGFja0xpc3RlZFVzZXJdKTsKICAgICAgICB1aW50IGRpcnR5RnVuZHMgPSBiYWxhbmNlT2YoX2JsYWNrTGlzdGVkVXNlcik7CiAgICAgICAgYmFsYW5jZXNbX2JsYWNrTGlzdGVkVXNlcl0gPSAwOwogICAgICAgIF90b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseS5zdWIoZGlydHlGdW5kcyk7CiAgICAgICAgRGVzdHJveWVkQmxhY2tGdW5kcyhfYmxhY2tMaXN0ZWRVc2VyLCBkaXJ0eUZ1bmRzKTsKICAgIH0KCiAgICBldmVudCBEZXN0cm95ZWRCbGFja0Z1bmRzKGFkZHJlc3MgaW5kZXhlZCBfYmxhY2tMaXN0ZWRVc2VyLCB1aW50IF9iYWxhbmNlKTsKCiAgICAvLyBDYWxsZWQgd2hlbiBuZXcgdG9rZW4gYXJlIGlzc3VlZAogICAgZXZlbnQgSXNzdWUodWludCBhbW91bnQpOwoKICAgIC8vIENhbGxlZCB3aGVuIHRva2VucyBhcmUgcmVkZWVtZWQKICAgIGV2ZW50IFJlZGVlbSh1aW50IGFtb3VudCk7CgogICAgLy8gQ2FsbGVkIHdoZW4gY29udHJhY3QgaXMgZGVwcmVjYXRlZAogICAgZXZlbnQgRGVwcmVjYXRlKGFkZHJlc3MgbmV3QWRkcmVzcyk7Cgp9'.
	

]
