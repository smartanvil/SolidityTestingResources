Class {
	#name : #SRTdca726c80520e9ae4bf1786a1fce32538ee11e79,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTdca726c80520e9ae4bf1786a1fce32538ee11e79 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMjE7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgLyoqCiAgKiBAZGV2IE11bHRpcGxpZXMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdy4KICAqLwogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIC8qKgogICogQGRldiBJbnRlZ2VyIGRpdmlzaW9uIG9mIHR3byBudW1iZXJzLCB0cnVuY2F0aW5nIHRoZSBxdW90aWVudC4KICAqLwogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgLyoqCiAgKiBAZGV2IFN1YnN0cmFjdHMgdHdvIG51bWJlcnMsIHRocm93cyBvbiBvdmVyZmxvdyAoaS5lLiBpZiBzdWJ0cmFoZW5kIGlzIGdyZWF0ZXIgdGhhbiBtaW51ZW5kKS4KICAqLwogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIC8qKgogICogQGRldiBBZGRzIHR3byBudW1iZXJzLCB0aHJvd3Mgb24gb3ZlcmZsb3cuCiAgKi8KICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSArIGI7CiAgICBhc3NlcnQoYyA+PSBhKTsKICAgIHJldHVybiBjOwogIH0KfQoKY29udHJhY3QgQ3J5cHRvTWlsaXRhcnkgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBldmVudCBCb3VnaHQgKHVpbnQyNTYgaW5kZXhlZCBfaXRlbUlkLCBhZGRyZXNzIGluZGV4ZWQgX293bmVyLCB1aW50MjU2IF9wcmljZSk7CiAgZXZlbnQgU29sZCAodWludDI1NiBpbmRleGVkIF9pdGVtSWQsIGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIHVpbnQyNTYgX3ByaWNlKTsKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3Rva2VuSWQpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfYXBwcm92ZWQsIHVpbnQyNTYgX3Rva2VuSWQpOwoKICBhZGRyZXNzIHByaXZhdGUgb3duZXI7CiAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwcml2YXRlIGFkbWluczsKICBJSXRlbVJlZ2lzdHJ5IHByaXZhdGUgaXRlbVJlZ2lzdHJ5OwogIGJvb2wgcHJpdmF0ZSBlcmM3MjFFbmFibGVkID0gZmFsc2U7CgogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0MSA9IDAuMiBldGhlcjsKICB1aW50MjU2IHByaXZhdGUgaW5jcmVhc2VMaW1pdDIgPSA1IGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0MyA9IDMwIGV0aGVyOwogIHVpbnQyNTYgcHJpdmF0ZSBpbmNyZWFzZUxpbWl0NCA9IDkwIGV0aGVyOwoKICB1aW50MjU2W10gcHJpdmF0ZSBsaXN0ZWRJdGVtczsKICBtYXBwaW5nICh1aW50MjU2ID0+IGFkZHJlc3MpIHByaXZhdGUgb3duZXJPZkl0ZW07CiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHN0YXJ0aW5nUHJpY2VPZkl0ZW07CiAgbWFwcGluZyAodWludDI1NiA9PiB1aW50MjU2KSBwcml2YXRlIHByaWNlT2ZJdGVtOwogIG1hcHBpbmcgKHVpbnQyNTYgPT4gYWRkcmVzcykgcHJpdmF0ZSBhcHByb3ZlZE9mSXRlbTsKICBtYXBwaW5nIChhZGRyZXNzID0+IHN0cmluZykgcHJpdmF0ZSBvd25lck5hbWVPZkl0ZW07CgogIGZ1bmN0aW9uIENyeXB0b01pbGl0YXJ5ICgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICBhZG1pbnNbb3duZXJdID0gdHJ1ZTsKICB9CgogIC8qIE1vZGlmaWVycyAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUob3duZXIgPT0gbXNnLnNlbmRlcik7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgb25seUFkbWlucygpIHsKICAgIHJlcXVpcmUoYWRtaW5zW21zZy5zZW5kZXJdKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBvbmx5RVJDNzIxKCkgewogICAgcmVxdWlyZShlcmM3MjFFbmFibGVkKTsKICAgIF87CiAgfQoKICAvKiBPd25lciAqLwogIGZ1bmN0aW9uIHNldE93bmVyIChhZGRyZXNzIF9vd25lcikgb25seU93bmVyKCkgcHVibGljIHsKICAgIG93bmVyID0gX293bmVyOwogIH0KCiAgZnVuY3Rpb24gc2V0SXRlbVJlZ2lzdHJ5IChhZGRyZXNzIF9pdGVtUmVnaXN0cnkpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBpdGVtUmVnaXN0cnkgPSBJSXRlbVJlZ2lzdHJ5KF9pdGVtUmVnaXN0cnkpOwogIH0KCiAgZnVuY3Rpb24gYWRkQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgYWRtaW5zW19hZG1pbl0gPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gcmVtb3ZlQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBvbmx5T3duZXIoKSBwdWJsaWMgewogICAgZGVsZXRlIGFkbWluc1tfYWRtaW5dOwogIH0KCiAgLy8gVW5sb2NrcyBFUkM3MjEgYmVoYXZpb3VyLCBhbGxvd2luZyBmb3IgdHJhZGluZyBvbiB0aGlyZCBwYXJ0eSBwbGF0Zm9ybXMuCiAgZnVuY3Rpb24gZW5hYmxlRVJDNzIxICgpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBlcmM3MjFFbmFibGVkID0gdHJ1ZTsKICB9CgogIC8qIFdpdGhkcmF3ICovCiAgLyoKICAgIE5PVElDRTogVGhlc2UgZnVuY3Rpb25zIHdpdGhkcmF3IHRoZSBkZXZlbG9wZXIncyBjdXQgd2hpY2ggaXMgbGVmdAogICAgaW4gdGhlIGNvbnRyYWN0IGJ5IGBidXlgLiBVc2VyIGZ1bmRzIGFyZSBpbW1lZGlhdGVseSBzZW50IHRvIHRoZSBvbGQKICAgIG93bmVyIGluIGBidXlgLCBubyB1c2VyIGZ1bmRzIGFyZSBsZWZ0IGluIHRoZSBjb250cmFjdC4KICAqLwogIGZ1bmN0aW9uIHdpdGhkcmF3QWxsICgpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICBvd25lci50cmFuc2Zlcih0aGlzLmJhbGFuY2UpOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXdBbW91bnQgKHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyKCkgcHVibGljIHsKICAgIG93bmVyLnRyYW5zZmVyKF9hbW91bnQpOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q3VycmVudEJhbGFuY2UoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgcmV0dXJuIHRoaXMuYmFsYW5jZTsKICB9CgogIC8qIExpc3RpbmcgKi8KICBmdW5jdGlvbiBwb3B1bGF0ZUZyb21JdGVtUmVnaXN0cnkgKHVpbnQyNTZbXSBfaXRlbUlkcykgb25seU93bmVyKCkgcHVibGljIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9pdGVtSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChwcmljZU9mSXRlbVtfaXRlbUlkc1tpXV0gPiAwIHx8IGl0ZW1SZWdpc3RyeS5wcmljZU9mKF9pdGVtSWRzW2ldKSA9PSAwKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGxpc3RJdGVtRnJvbVJlZ2lzdHJ5KF9pdGVtSWRzW2ldKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGxpc3RJdGVtRnJvbVJlZ2lzdHJ5ICh1aW50MjU2IF9pdGVtSWQpIG9ubHlPd25lcigpIHB1YmxpYyB7CiAgICByZXF1aXJlKGl0ZW1SZWdpc3RyeSAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoaXRlbVJlZ2lzdHJ5Lm93bmVyT2YoX2l0ZW1JZCkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKGl0ZW1SZWdpc3RyeS5wcmljZU9mKF9pdGVtSWQpID4gMCk7CgogICAgdWludDI1NiBwcmljZSA9IGl0ZW1SZWdpc3RyeS5wcmljZU9mKF9pdGVtSWQpOwogICAgYWRkcmVzcyBpdGVtT3duZXIgPSBpdGVtUmVnaXN0cnkub3duZXJPZihfaXRlbUlkKTsKCiAgICBsaXN0SXRlbShfaXRlbUlkLCBwcmljZSwgaXRlbU93bmVyKTsKICB9CgogIGZ1bmN0aW9uIGxpc3RNdWx0aXBsZUl0ZW1zICh1aW50MjU2W10gX2l0ZW1JZHMsIHVpbnQyNTYgX3ByaWNlLCBhZGRyZXNzIF9vd25lcikgb25seUFkbWlucygpIGV4dGVybmFsIHsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IF9pdGVtSWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxpc3RJdGVtKF9pdGVtSWRzW2ldLCBfcHJpY2UsIF9vd25lcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBsaXN0SXRlbSAodWludDI1NiBfaXRlbUlkLCB1aW50MjU2IF9wcmljZSwgYWRkcmVzcyBfb3duZXIpIG9ubHlBZG1pbnMoKSBwdWJsaWMgewogICAgcmVxdWlyZShfcHJpY2UgPiAwKTsKICAgIHJlcXVpcmUocHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPT0gMCk7CiAgICByZXF1aXJlKG93bmVyT2ZJdGVtW19pdGVtSWRdID09IGFkZHJlc3MoMCkpOwoKICAgIG93bmVyT2ZJdGVtW19pdGVtSWRdID0gX293bmVyOwogICAgcHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPSBfcHJpY2U7CiAgICBzdGFydGluZ1ByaWNlT2ZJdGVtW19pdGVtSWRdID0gX3ByaWNlOwogICAgbGlzdGVkSXRlbXMucHVzaChfaXRlbUlkKTsKICB9CgoKICBmdW5jdGlvbiBzZXRPd25lck5hbWUgKGFkZHJlc3MgX293bmVyLCBzdHJpbmcgX25hbWUpIHB1YmxpYyB7CiAgICByZXF1aXJlKGtlY2NhazI1Nihvd25lck5hbWVPZkl0ZW1bX293bmVyXSkgIT0ga2VjY2FrMjU2KF9uYW1lKSk7CiAgICBvd25lck5hbWVPZkl0ZW1bX293bmVyXSA9IF9uYW1lOwogIH0KCiAgZnVuY3Rpb24gZ2V0T3duZXJOYW1lIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICByZXR1cm4gb3duZXJOYW1lT2ZJdGVtW19vd25lcl07CiAgfQoKICAvKiBCdXlpbmcgKi8KICBmdW5jdGlvbiBjYWxjdWxhdGVOZXh0UHJpY2UgKHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MSkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgyMDApLmRpdig5OCk7CiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQyKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDEzNSkuZGl2KDk3KTsKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDMpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoMTI1KS5kaXYoOTYpOwogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0NCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTcpLmRpdig5NSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX3ByaWNlLm11bCgxMTUpLmRpdig5NSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjYWxjdWxhdGVEZXZDdXQgKHVpbnQyNTYgX3ByaWNlKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9kZXZDdXQpIHsKICAgIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0MSkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg4KS5kaXYoMTAwKTsgLy8gOCUKICAgIH0gZWxzZSBpZiAoX3ByaWNlIDwgaW5jcmVhc2VMaW1pdDIpIHsKICAgICAgcmV0dXJuIF9wcmljZS5tdWwoNykuZGl2KDEwMCk7IC8vIDclCiAgICB9IGVsc2UgaWYgKF9wcmljZSA8IGluY3JlYXNlTGltaXQzKSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDYpLmRpdigxMDApOyAvLyA2JQogICAgfSBlbHNlIGlmIChfcHJpY2UgPCBpbmNyZWFzZUxpbWl0NCkgewogICAgICByZXR1cm4gX3ByaWNlLm11bCg1KS5kaXYoMTAwKTsgLy8gNSUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBfcHJpY2UubXVsKDUpLmRpdigxMDApOyAvLyA1JQogICAgfQogIH0KCiAgLyoKICAgICBCdXkgYSBjb3VudHJ5IGRpcmVjdGx5IGZyb20gdGhlIGNvbnRyYWN0IGZvciB0aGUgY2FsY3VsYXRlZCBwcmljZQogICAgIHdoaWNoIGVuc3VyZXMgdGhhdCB0aGUgb3duZXIgZ2V0cyBhIHByb2ZpdC4gIEFsbCBtaWxpdGFyaWVzIHRoYXQKICAgICBoYXZlIGJlZW4gbGlzdGVkIGNhbiBiZSBib3VnaHQgYnkgdGhpcyBtZXRob2QuIFVzZXIgZnVuZHMgYXJlIHNlbnQKICAgICBkaXJlY3RseSB0byB0aGUgcHJldmlvdXMgb3duZXIgYW5kIGFyZSBuZXZlciBzdG9yZWQgaW4gdGhlIGNvbnRyYWN0LgogICovCiAgZnVuY3Rpb24gYnV5ICh1aW50MjU2IF9pdGVtSWQpIHBheWFibGUgcHVibGljIHsKICAgIHJlcXVpcmUocHJpY2VPZihfaXRlbUlkKSA+IDApOwogICAgcmVxdWlyZShvd25lck9mKF9pdGVtSWQpICE9IGFkZHJlc3MoMCkpOwogICAgcmVxdWlyZShtc2cudmFsdWUgPj0gcHJpY2VPZihfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgIT0gbXNnLnNlbmRlcik7CiAgICByZXF1aXJlKCFpc0NvbnRyYWN0KG1zZy5zZW5kZXIpKTsKICAgIHJlcXVpcmUobXNnLnNlbmRlciAhPSBhZGRyZXNzKDApKTsKCiAgICBhZGRyZXNzIG9sZE93bmVyID0gb3duZXJPZihfaXRlbUlkKTsKICAgIGFkZHJlc3MgbmV3T3duZXIgPSBtc2cuc2VuZGVyOwogICAgdWludDI1NiBwcmljZSA9IHByaWNlT2YoX2l0ZW1JZCk7CiAgICB1aW50MjU2IGV4Y2VzcyA9IG1zZy52YWx1ZS5zdWIocHJpY2UpOwoKICAgIF90cmFuc2ZlcihvbGRPd25lciwgbmV3T3duZXIsIF9pdGVtSWQpOwogICAgcHJpY2VPZkl0ZW1bX2l0ZW1JZF0gPSBuZXh0UHJpY2VPZihfaXRlbUlkKTsKCiAgICBlbWl0IEJvdWdodChfaXRlbUlkLCBuZXdPd25lciwgcHJpY2UpOwogICAgZW1pdCBTb2xkKF9pdGVtSWQsIG9sZE93bmVyLCBwcmljZSk7CgogICAgLy8gRGV2ZXZsb3BlcidzIGN1dCB3aGljaCBpcyBsZWZ0IGluIGNvbnRyYWN0IGFuZCBhY2Nlc2VkIGJ5CiAgICAvLyBgd2l0aGRyYXdBbGxgIGFuZCBgd2l0aGRyYXdBbW91bnRUb2AgbWV0aG9kcy4KICAgIHVpbnQyNTYgZGV2Q3V0ID0gY2FsY3VsYXRlRGV2Q3V0KHByaWNlKTsKCiAgICAvLyBUcmFuc2ZlciBwYXltZW50IHRvIG9sZCBvd25lciBtaW51cyB0aGUgZGV2ZWxvcGVyJ3MgY3V0LgogICAgb2xkT3duZXIudHJhbnNmZXIocHJpY2Uuc3ViKGRldkN1dCkpOwoKICAgIGlmIChleGNlc3MgPiAwKSB7CiAgICAgIG5ld093bmVyLnRyYW5zZmVyKGV4Y2Vzcyk7CiAgICB9CiAgfQoKICAvKiBFUkM3MjEgKi8KICBmdW5jdGlvbiBpbXBsZW1lbnRzRVJDNzIxKCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCBfaW1wbGVtZW50cykgewogICAgcmV0dXJuIGVyYzcyMUVuYWJsZWQ7CiAgfQoKICBmdW5jdGlvbiBuYW1lKCkgcHVibGljIHB1cmUgcmV0dXJucyAoc3RyaW5nIF9uYW1lKSB7CiAgICByZXR1cm4gIkNyeXB0b01pbGl0YXJ5IjsKICB9CgogIGZ1bmN0aW9uIHN5bWJvbCgpIHB1YmxpYyBwdXJlIHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CiAgICByZXR1cm4gIkNNVCI7CiAgfQoKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CiAgICByZXR1cm4gbGlzdGVkSXRlbXMubGVuZ3RoOwogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mIChhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfYmFsYW5jZSkgewogICAgdWludDI1NiBjb3VudGVyID0gMDsKCiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBsaXN0ZWRJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAob3duZXJPZihsaXN0ZWRJdGVtc1tpXSkgPT0gX293bmVyKSB7CiAgICAgICAgY291bnRlcisrOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGNvdW50ZXI7CiAgfQoKICBmdW5jdGlvbiBvd25lck9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyKSB7CiAgICByZXR1cm4gb3duZXJPZkl0ZW1bX2l0ZW1JZF07CiAgfQoKICBmdW5jdGlvbiB0b2tlbnNPZiAoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSBfdG9rZW5JZHMpIHsKICAgIHVpbnQyNTZbXSBtZW1vcnkgaXRlbXMgPSBuZXcgdWludDI1NltdKGJhbGFuY2VPZihfb3duZXIpKTsKCiAgICB1aW50MjU2IGl0ZW1Db3VudGVyID0gMDsKICAgIGZvciAodWludDI1NiBpID0gMDsgaSA8IGxpc3RlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChvd25lck9mKGxpc3RlZEl0ZW1zW2ldKSA9PSBfb3duZXIpIHsKICAgICAgICBpdGVtc1tpdGVtQ291bnRlcl0gPSBsaXN0ZWRJdGVtc1tpXTsKICAgICAgICBpdGVtQ291bnRlciArPSAxOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGl0ZW1zOwogIH0KCiAgZnVuY3Rpb24gdG9rZW5FeGlzdHMgKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCBfZXhpc3RzKSB7CiAgICByZXR1cm4gcHJpY2VPZihfaXRlbUlkKSA+IDA7CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlZEZvcih1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKGFkZHJlc3MgX2FwcHJvdmVkKSB7CiAgICByZXR1cm4gYXBwcm92ZWRPZkl0ZW1bX2l0ZW1JZF07CiAgfQoKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9pdGVtSWQpIG9ubHlFUkM3MjEoKSBwdWJsaWMgewogICAgcmVxdWlyZShtc2cuc2VuZGVyICE9IF90byk7CiAgICByZXF1aXJlKHRva2VuRXhpc3RzKF9pdGVtSWQpKTsKICAgIHJlcXVpcmUob3duZXJPZihfaXRlbUlkKSA9PSBtc2cuc2VuZGVyKTsKCiAgICBpZiAoX3RvID09IDApIHsKICAgICAgaWYgKGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdICE9IDApIHsKICAgICAgICBkZWxldGUgYXBwcm92ZWRPZkl0ZW1bX2l0ZW1JZF07CiAgICAgICAgZW1pdCBBcHByb3ZhbChtc2cuc2VuZGVyLCAwLCBfaXRlbUlkKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgYXBwcm92ZWRPZkl0ZW1bX2l0ZW1JZF0gPSBfdG87CiAgICAgIGVtaXQgQXBwcm92YWwobXNnLnNlbmRlciwgX3RvLCBfaXRlbUlkKTsKICAgIH0KICB9CgogIC8qIFRyYW5zZmVycmluZyBhIGNvdW50cnkgdG8gYW5vdGhlciBvd25lciB3aWxsIGVudGl0bGUgdGhlIG5ldyBvd25lciB0aGUgcHJvZml0cyBmcm9tIGBidXlgICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgb25seUVSQzcyMSgpIHB1YmxpYyB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXJPZihfaXRlbUlkKSk7CiAgICBfdHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfaXRlbUlkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfaXRlbUlkKSBvbmx5RVJDNzIxKCkgcHVibGljIHsKICAgIHJlcXVpcmUoYXBwcm92ZWRGb3IoX2l0ZW1JZCkgPT0gbXNnLnNlbmRlcik7CiAgICBfdHJhbnNmZXIoX2Zyb20sIF90bywgX2l0ZW1JZCk7CiAgfQoKICBmdW5jdGlvbiBfdHJhbnNmZXIoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2l0ZW1JZCkgaW50ZXJuYWwgewogICAgcmVxdWlyZSh0b2tlbkV4aXN0cyhfaXRlbUlkKSk7CiAgICByZXF1aXJlKG93bmVyT2YoX2l0ZW1JZCkgPT0gX2Zyb20pOwogICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKHRoaXMpKTsKCiAgICBvd25lck9mSXRlbVtfaXRlbUlkXSA9IF90bzsKICAgIGFwcHJvdmVkT2ZJdGVtW19pdGVtSWRdID0gMDsKCiAgICBlbWl0IFRyYW5zZmVyKF9mcm9tLCBfdG8sIF9pdGVtSWQpOwogIH0KCiAgLyogUmVhZCAqLwogIGZ1bmN0aW9uIGlzQWRtaW4gKGFkZHJlc3MgX2FkbWluKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sIF9pc0FkbWluKSB7CiAgICByZXR1cm4gYWRtaW5zW19hZG1pbl07CiAgfQoKICBmdW5jdGlvbiBzdGFydGluZ1ByaWNlT2YgKHVpbnQyNTYgX2l0ZW1JZCkgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBfc3RhcnRpbmdQcmljZSkgewogICAgcmV0dXJuIHN0YXJ0aW5nUHJpY2VPZkl0ZW1bX2l0ZW1JZF07CiAgfQoKICBmdW5jdGlvbiBwcmljZU9mICh1aW50MjU2IF9pdGVtSWQpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKSB7CiAgICByZXR1cm4gcHJpY2VPZkl0ZW1bX2l0ZW1JZF07CiAgfQoKICBmdW5jdGlvbiBuZXh0UHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IF9uZXh0UHJpY2UpIHsKICAgIHJldHVybiBjYWxjdWxhdGVOZXh0UHJpY2UocHJpY2VPZihfaXRlbUlkKSk7CiAgfQoKICBmdW5jdGlvbiBhbGxPZiAodWludDI1NiBfaXRlbUlkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3MgX293bmVyLCB1aW50MjU2IF9wcmljZSwgdWludDI1NiBfbmV4dFByaWNlKSB7CiAgICByZXR1cm4gKG93bmVyT2YoX2l0ZW1JZCkscHJpY2VPZihfaXRlbUlkKSwgbmV4dFByaWNlT2YoX2l0ZW1JZCkpOwogIH0KCiAgZnVuY3Rpb24gaXRlbXNGb3JTYWxlTGltaXQgKHVpbnQyNTYgX2Zyb20sIHVpbnQyNTYgX3Rha2UpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSBfaXRlbXMpIHsKICAgIHVpbnQyNTZbXSBtZW1vcnkgaXRlbXMgPSBuZXcgdWludDI1NltdKF90YWtlKTsKCiAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBfdGFrZTsgaSsrKSB7CiAgICAgIGl0ZW1zW2ldID0gbGlzdGVkSXRlbXNbX2Zyb20gKyBpXTsKICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfQoKICAvKiBVdGlsICovCiAgZnVuY3Rpb24gaXNDb250cmFjdChhZGRyZXNzIGFkZHIpIGludGVybmFsIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgdWludCBzaXplOwogICAgYXNzZW1ibHkgeyBzaXplIDo9IGV4dGNvZGVzaXplKGFkZHIpIH0gLy8gc29saXVtLWRpc2FibGUtbGluZQogICAgcmV0dXJuIHNpemUgPiAwOwogIH0KfQoKaW50ZXJmYWNlIElJdGVtUmVnaXN0cnkgewogIGZ1bmN0aW9uIGl0ZW1zRm9yU2FsZUxpbWl0ICh1aW50MjU2IF9mcm9tLCB1aW50MjU2IF90YWtlKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTZbXSBfaXRlbXMpOwogIGZ1bmN0aW9uIG93bmVyT2YgKHVpbnQyNTYgX2l0ZW1JZCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zIChhZGRyZXNzIF9vd25lcik7CiAgZnVuY3Rpb24gcHJpY2VPZiAodWludDI1NiBfaXRlbUlkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYgX3ByaWNlKTsKfQ=='.
	

]
