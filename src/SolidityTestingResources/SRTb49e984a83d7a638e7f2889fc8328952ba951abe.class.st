Class {
	#name : #SRTb49e984a83d7a638e7f2889fc8328952ba951abe,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTb49e984a83d7a638e7f2889fc8328952ba951abe >> base64 [
	^ 'bGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBPd25hYmxlIHsKICBhZGRyZXNzIHB1YmxpYyBvd25lcjsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIGlmKG1zZy5zZW5kZXIgPT0gb3duZXIpewogICAgICBfOwogICAgfQogICAgZWxzZXsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgfQoKfQpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIGNvbnN0YW50IHB1YmxpYyByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKLyoqCiAqIEB0aXRsZSBCYXNpYyB0b2tlbgogKiBAZGV2IEJhc2ljIHZlcnNpb24gb2YgU3RhbmRhcmRUb2tlbiwgd2l0aCBubyBhbGxvd2FuY2VzLiAKICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CiAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQxMjg7CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgLyoqCiAgKiBAZGV2IHRyYW5zZmVyIHRva2VuIGZvciBhIHNwZWNpZmllZCBhZGRyZXNzCiAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICovCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAqIEBkZXYgR2V0cyB0aGUgYmFsYW5jZSBvZiB0aGUgc3BlY2lmaWVkIGFkZHJlc3MuCiAgKiBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIHRvIHF1ZXJ5IHRoZSB0aGUgYmFsYW5jZSBvZi4gCiAgKiBAcmV0dXJuIEFuIHVpbnQyNTYgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgb3duZWQgYnkgdGhlIHBhc3NlZCBhZGRyZXNzLgogICovCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCwgQmFzaWNUb2tlbiB7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCgogIC8qKgogICAqIEBkZXYgVHJhbnNmZXIgdG9rZW5zIGZyb20gb25lIGFkZHJlc3MgdG8gYW5vdGhlcgogICAqIEBwYXJhbSBfZnJvbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHNlbmQgdG9rZW5zIGZyb20KICAgKiBAcGFyYW0gX3RvIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gdHJhbnNmZXIgdG8KICAgKiBAcGFyYW0gX3ZhbHVlIHVpbnQyNTYgdGhlIGFtb3V0IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcmVkCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyByZXF1aXJlIChfdmFsdWUgPD0gX2FsbG93YW5jZSk7CgogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IF9hbGxvd2FuY2Uuc3ViKF92YWx1ZSk7CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEFwcm92ZSB0aGUgcGFzc2VkIGFkZHJlc3MgdG8gc3BlbmQgdGhlIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIG9uIGJlaGFsZiBvZiBtc2cuc2VuZGVyLgogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgLy8gVG8gY2hhbmdlIHRoZSBhcHByb3ZlIGFtb3VudCB5b3UgZmlyc3QgaGF2ZSB0byByZWR1Y2UgdGhlIGFkZHJlc3Nlc2AKICAgIC8vICBhbGxvd2FuY2UgdG8gemVybyBieSBjYWxsaW5nIGBhcHByb3ZlKF9zcGVuZGVyLCAwKWAgaWYgaXQgaXMgbm90CiAgICAvLyAgYWxyZWFkeSAwIHRvIG1pdGlnYXRlIHRoZSByYWNlIGNvbmRpdGlvbiBkZXNjcmliZWQgaGVyZToKICAgIC8vICBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAgcmVxdWlyZSgoX3ZhbHVlID09IDApIHx8IChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9PSAwKSk7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBjaGVjayB0aGUgYW1vdW50IG9mIHRva2VucyB0aGF0IGFuIG93bmVyIGFsbG93ZWQgdG8gYSBzcGVuZGVyLgogICAqIEBwYXJhbSBfb3duZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCBvd25zIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3NwZW5kZXIgYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcmV0dXJuIEEgdWludDI1NiBzcGVjaWZpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWJsZSBmb3IgdGhlIHNwZW5kZXIuCiAgICovCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCBwdWJsaWMgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCgpjb250cmFjdCBNaW50YWJsZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIE93bmFibGUgewogIGV2ZW50IE1pbnQoYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGFtb3VudCk7CiAgZXZlbnQgTWludEZpbmlzaGVkKCk7CgogIGJvb2wgcHVibGljIG1pbnRpbmdGaW5pc2hlZCA9IGZhbHNlOwoKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIGlmKCFtaW50aW5nRmluaXNoZWQpewogICAgICBfOwogICAgfQogICAgZWxzZXsKICAgICAgcmV2ZXJ0KCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIG1pbnQgdG9rZW5zCiAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0aGF0IHdpbGwgcmVjaWV2ZSB0aGUgbWludGVkIHRva2Vucy4KICAgKiBAcGFyYW0gX2Ftb3VudCBUaGUgYW1vdW50IG9mIHRva2VucyB0byBtaW50LgogICAqIEByZXR1cm4gQSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gbWludChhZGRyZXNzIF90bywgdWludDI1NiBfYW1vdW50KSBjYW5NaW50IGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoYWRkcmVzcygwKSxfdG8sX2Ftb3VudCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gc3RvcCBtaW50aW5nIG5ldyB0b2tlbnMuCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwuCiAgICovCiAgZnVuY3Rpb24gZmluaXNoTWludGluZygpIG9ubHlPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgIE1pbnRGaW5pc2hlZCgpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CgoKY29udHJhY3QgTU9OIGlzIE1pbnRhYmxlVG9rZW57CiAgICAKICAgIGV2ZW50IEJ1eVN0YXR1cyh1aW50MjU2IHN0YXR1cyk7CiAgICBzdHJ1Y3QgQnV5ewogICAgICAgIHVpbnQxMjggYW1vdW50T2ZFdGg7CiAgICAgICAgdWludDEyOCBzdGFnZTsKICAgIH0KICAgIAogICAgc3RydWN0IFN0YWdlRGF0YXsKICAgICAgICB1aW50MTI4IHN0YWdlVGltZTsKICAgICAgICB1aW50NjQgc3RhZ2VTdW07CiAgICAgICAgdWludDY0IHN0YWdlUHJpY2U7CiAgICB9CiAgICAKCXN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJNaWxsaW9uQ29pbiI7CglzdHJpbmcgcHVibGljIGNvbnN0YW50IHN5bWJvbCA9ICJNT04iOwoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgREVDSU1BTFMgPSA4OwoJdWludDI1NiBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSA4OwoJYWRkcmVzcyBwdWJsaWMgYmVuZWZpY2lhcnkgOwogICAgdWludDI1NiBwcml2YXRlIGFscmVhZHlSdW5uZWQgCT0gMDsKICAgIHVpbnQyNTYgaW50ZXJuYWwgX25vdyA9MDsKICAgIHVpbnQyNTYgcHVibGljIHN0YWdlSW5kZXggPSAwOwogICAgU3RhZ2VEYXRhW10gcHVibGljIHN0YWdlRGF0YVN0b3JlOwogICAgdWludDI1NiBwdWJsaWMgcGVyaW9kID0gMzYwMCoyNDsgLy8xIGRheQogICAgdWludDI1NiBwdWJsaWMgc3RhcnQgPSAwOwogICAgdWludDI1NiBwdWJsaWMgc3VtTXVsdGlwbGF5ZXIgPSAxMDAwMDA7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gQnV5KSBwdWJsaWMgc3RhZ2VCdXlzOwogCiBtb2RpZmllciBydW5PbmNlKHVpbnQyNTYgYml0KXsKICAgICBpZigoYWxyZWFkeVJ1bm5lZCAmIGJpdCk9PTApewogICAgICAgIGFscmVhZHlSdW5uZWQgPSBhbHJlYWR5UnVubmVkIHwgYml0OyAgIAogICAgICAgICBfOyAgIAogICAgIH0KICAgICBlbHNlewogICAgICAgICByZXZlcnQoKTsKICAgICB9CiB9CiAKIAogZnVuY3Rpb24gTU9OKGFkZHJlc3MgX2JlbmVmLHVpbnQyNTYgX3N0YXJ0LHVpbnQyNTYgX3N1bU11bCx1aW50MjU2IF9wZXJpb2QpIHB1YmxpY3sKICAgICBiZW5lZmljaWFyeSA9IF9iZW5lZjsKICAgICBpZihfc3RhcnQ9PTApewogICAgICAgICBzdGFydCA9IEdldE5vdygpOwogICAgIH0KICAgICBlbHNlewogICAgICAgICBzdGFydCA9IF9zdGFydDsKICAgICB9CiAgICAgaWYoX3BlcmlvZCE9MCl7CiAgICAgICAgIHBlcmlvZCA9IF9wZXJpb2Q7CiAgICAgfQogICAgIGlmKF9zdW1NdWwhPTApewogICAgICAgICBzdW1NdWx0aXBsYXllciA9IF9zdW1NdWw7CiAgICAgfQogICAgIHN0YWdlRGF0YVN0b3JlLnB1c2goU3RhZ2VEYXRhKHVpbnQxMjgoc3RhcnQrcGVyaW9kKjE1MSksdWludDY0KDUwKnN1bU11bHRpcGxheWVyKSx1aW50NjQoNTAwMCkpKTsKICAgICBzdGFnZURhdGFTdG9yZS5wdXNoKFN0YWdlRGF0YSh1aW50MTI4KHN0YXJ0K3BlcmlvZCoyNDMpLHVpbnQ2NCg2MCpzdW1NdWx0aXBsYXllciksdWludDY0KDMwMDApKSk7CiAgICAgc3RhZ2VEYXRhU3RvcmUucHVzaChTdGFnZURhdGEodWludDEyOChzdGFydCtwZXJpb2QqMzM0KSx1aW50NjQoNTAqc3VtTXVsdGlwbGF5ZXIpLHVpbnQ2NCgxNjY2KSkpOwogICAgIHN0YWdlRGF0YVN0b3JlLnB1c2goU3RhZ2VEYXRhKHVpbnQxMjgoc3RhcnQrcGVyaW9kKjQ1NSksdWludDY0KDYwKnN1bU11bHRpcGxheWVyKSx1aW50NjQoMTUwMCkpKTsKICAgICBzdGFnZURhdGFTdG9yZS5wdXNoKFN0YWdlRGF0YSh1aW50MTI4KHN0YXJ0K3BlcmlvZCo1NDgpLHVpbnQ2NCg2NSpzdW1NdWx0aXBsYXllciksdWludDY0KDE0NDQpKSk7CiAgICAgc3RhZ2VEYXRhU3RvcmUucHVzaChTdGFnZURhdGEodWludDEyOChzdGFydCtwZXJpb2QqNjQxKSx1aW50NjQoNTUqc3VtTXVsdGlwbGF5ZXIpLHVpbnQ2NCgxMDAwKSkpOwogICAgIAogfQogCiAKIGZ1bmN0aW9uIEdldE1heFN0YWdlRXRoQW1vdW50KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CiAgICAgU3RhZ2VEYXRhIG1lbW9yeSBjdXJyUyA9IHN0YWdlRGF0YVN0b3JlW3N0YWdlSW5kZXhdOwogICAgIHVpbnQyNTYgcmV0VmFsID0gY3VyclMuc3RhZ2VTdW07CiAgICAgcmV0VmFsID0gcmV0VmFsKigxMCoqMTgpOwogICAgIHJldFZhbCA9IHJldFZhbC9jdXJyUy5zdGFnZVByaWNlOwogICAgIHJldFZhbCA9IHJldFZhbC5zdWIodGhpcy5iYWxhbmNlKTsKICAgICByZXR1cm4gcmV0VmFsOwogfQogCiAKIGZ1bmN0aW9uICgpIHB1YmxpYyBwYXlhYmxlIHsKICAgICB1aW50MjU2ICBzdGF0dXMgPSAwOwogICAgIHN0YXR1cyA9IDA7CiAgICAgYm9vbCB0cmFuc2ZlclRvQmVuZWYgPSBmYWxzZTsKICAgICB1aW50MjU2ICBhbW91bnRPZkV0aEJlZm9yZUJ1eSA9IDA7CiAgICAgdWludDI1NiAgc3RhZ2VNYXhFdGhBbW91bnQgPSAwOwogICAgIHVpbnQxMjggX24gPSB1aW50MTI4KEdldE5vdygpKTsKICAgICBTdGFnZURhdGEgbWVtb3J5IGN1cnJTID0gc3RhZ2VEYXRhU3RvcmVbc3RhZ2VJbmRleF0gOwogICAgIGlmKF9uPHN0YXJ0KXsKICAgICAgICAgcmV2ZXJ0KCk7CiAgICAgfQogICAgIGlmKHRoaXMuYmFsYW5jZSA8bXNnLnZhbHVlKXsKICAgICAgICBhbW91bnRPZkV0aEJlZm9yZUJ1eSA9MCA7CiAgICAgfQogICAgIGVsc2V7CiAgICAgICAgYW1vdW50T2ZFdGhCZWZvcmVCdXkgPSB0aGlzLmJhbGFuY2UgLSBtc2cudmFsdWU7CiAgICAgfQogICAgIHN0YWdlTWF4RXRoQW1vdW50ID0gdWludDI1NihjdXJyUy5zdGFnZVN1bSkqKDEwKioxOCkvY3VyclMuc3RhZ2VQcmljZTsKICAgICAgICAgdWludDI1NiBhbW91bnRUb1JldHVybiA9MDsKICAgICAgICAgdWludDI1NiBhbW91bnRUb01pbnQgPTA7CiAgICAgICAgIEJ1eSBtZW1vcnkgYiA9IHN0YWdlQnV5c1ttc2cuc2VuZGVyXTsKICAgICBpZihjdXJyUy5zdGFnZVRpbWU8X24gJiYgYW1vdW50T2ZFdGhCZWZvcmVCdXk8c3RhZ2VNYXhFdGhBbW91bnQpewogICAgICAgICBzdGF0dXMgPSAxOwogICAgICAgICAvL2N1cnJlbnQgc3RhZ2UgaXMgdW5zdWNjZXNzZnVsIG1vbmV5IHNlbmQgaW4gdHJhbnNhY3Rpb24gc2hvdWxkIGJlIHJldHVybmVkIHBsdXMgCiAgICAgICAgIC8vIGFsbCBtb25leSBzcGVudCBpbiBjdXJyZW50IHJvdW5kIAogICAgICAgICBhbW91bnRUb1JldHVybiA9IG1zZy52YWx1ZTsKICAgICAgICAgaWYoYi5zdGFnZT09c3RhZ2VJbmRleCl7CiAgICAgICAgICAgICBhbW91bnRUb1JldHVybiA9IGFtb3VudFRvUmV0dXJuLmFkZChiLmFtb3VudE9mRXRoKTsKICAgICAgICAgICAgIGlmKGIuYW1vdW50T2ZFdGg+MCl7CiAgICAgICAgICAgICAgICBidXJuKG1zZy5zZW5kZXIsYi5hbW91bnRPZkV0aC5tdWwoY3VyclMuc3RhZ2VQcmljZSkpOwogICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgICAgIGIuYW1vdW50T2ZFdGg9MDsKICAgICAgICAgbWludGluZ0ZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihhbW91bnRUb1JldHVybik7CiAgICAgfQogICAgIGVsc2V7CiAgICAgICAgIHN0YXR1cyA9IDI7CiAgICAgICAgIAogICAgICAgICBpZihiLnN0YWdlIT1zdGFnZUluZGV4KXsKICAgICAgICAgICAgIGIuc3RhZ2UgPSB1aW50MTI4KHN0YWdlSW5kZXgpOwogICAgICAgICAgICAgYi5hbW91bnRPZkV0aCA9IDA7CiAgICAgICAgICAgICBzdGF0dXMgPSBzdGF0dXMqMTArMzsKICAgICAgICAgfQogICAgICAgICAKICAgICAgICAgaWYoY3VyclMuc3RhZ2VUaW1lPl9uICYmICB0aGlzLmJhbGFuY2UgPCBzdGFnZU1heEV0aEFtb3VudCl7CiAgICAgICAgICAgIC8vbm90aGluZyBzcGVjaWFsIG5vcm1hbCBidXkgCiAgICAgICAgICAgICBiLmFtb3VudE9mRXRoID0gdWludDEyOChiLmFtb3VudE9mRXRoLmFkZCh1aW50MTI4KG1zZy52YWx1ZSkpKTsKICAgICAgICAgICAgYW1vdW50VG9NaW50ID0gbXNnLnZhbHVlKmN1cnJTLnN0YWdlUHJpY2U7CiAgICAgICAgICAgIHN0YXR1cyA9IHN0YXR1cyoxMCs0OwogICAgICAgICAgICBtaW50Q29pbnMobXNnLnNlbmRlcixhbW91bnRUb01pbnQpOwogICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgIGlmKCB0aGlzLmJhbGFuY2UgPj1zdGFnZU1heEV0aEFtb3VudCl7CiAgICAgICAgICAgICAgICAgLy93ZSBleGNlZWQgc3RhZ2UgbGltaXQKICAgICAgICAgICAgICAgIHN0YXR1cyA9IHN0YXR1cyoxMCs1OwogICAgICAgICAgICAgICAgIHRyYW5zZmVyVG9CZW5lZiA9IHRydWU7CiAgICAgICAgICAgICAgICBhbW91bnRUb01pbnQgPSAoc3RhZ2VNYXhFdGhBbW91bnQgLSBhbW91bnRPZkV0aEJlZm9yZUJ1eSkqKGN1cnJTLnN0YWdlUHJpY2UpOwogICAgICAgICAgICAgICAgbWludENvaW5zKG1zZy5zZW5kZXIsYW1vdW50VG9NaW50KTsKICAgICAgICAgICAgICAgIHN0YWdlSW5kZXggPSBzdGFnZUluZGV4KzE7CiAgICAgICAgICAgICAgICBiZW5lZmljaWFyeS50cmFuc2ZlcihzdGFnZU1heEV0aEFtb3VudCk7CiAgICAgICAgICAgICAgICBzdGFnZU1heEV0aEFtb3VudCA9ICBHZXRNYXhTdGFnZUV0aEFtb3VudCgpOwogICAgICAgICAgICAgICAgaWYoc3RhZ2VJbmRleDw1ICYmIHN0YWdlTWF4RXRoQW1vdW50PnRoaXMuYmFsYW5jZSl7CiAgICAgICAgICAgICAgICAgLy8gICBzdGF0dXMgPSBzdGF0dXMqMTArNzsKICAgICAgICAgICAgICAgICAgICAvL2J1eXMgZm9yIHJlc3Qgb2YgZXRoIHRva2VucyBpbiBuZXcgcHJpY2VzCiAgICAgICAgICAgICAgICAgICAgY3VyclMgPSBzdGFnZURhdGFTdG9yZVtzdGFnZUluZGV4XSA7CiAgICAgICAgICAgICAgICAgICAgYW1vdW50VG9NaW50ID0gdGhpcy5iYWxhbmNlKihjdXJyUy5zdGFnZVByaWNlKTsKICAgICAgICAgICAgICAgICAgICBiLnN0YWdlID0gdWludDEyOChzdGFnZUluZGV4KTsKICAgICAgICAgICAgICAgICAgICBiLmFtb3VudE9mRXRoID11aW50MTI4KHRoaXMuYmFsYW5jZSk7CiAgICAgICAgICAgICAgICAgICAgbWludENvaW5zKG1zZy5zZW5kZXIsYW1vdW50VG9NaW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gc3RhdHVzKjEwKzg7CiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm5zIHJlc3Qgb2YgbW9uZXkgaWYgZHVyaW5nIGJ1eSBoYXJkY2FwIGlzIHJlYWNoZWQKICAgICAgICAgICAgICAgICAgICBhbW91bnRUb1JldHVybiA9IHRoaXMuYmFsYW5jZTsKICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLnRyYW5zZmVyKGFtb3VudFRvUmV0dXJuKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgc3RhdHVzID0gc3RhdHVzKjEwKzY7CiAgICAgICAgICAgLy8gICAgIHJldmVydCgpIDsvLyBub3QgaW1wbGVtZW50ZWQsIHNob3VsZCBub3QgaGFwcGVuZAogICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgICAgIAogICAgIH0KICAgICBzdGFnZUJ1eXNbbXNnLnNlbmRlcl0gPSBiOwogICAgIEJ1eVN0YXR1cyhzdGF0dXMpOwogfQogCiAKIGZ1bmN0aW9uIEdldEJhbGFuY2UoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KXsKICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogfQoKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBtYXhUb2tlblN1cHBseSA9ICgxMCoqKDE4LURFQ0lNQUxTKSkqKDEwKio2KSozNCA7ICAKICAKICBmdW5jdGlvbiBidXJuKGFkZHJlc3MgX2Zyb20sIHVpbnQyNTYgX2Ftb3VudCkgcHJpdmF0ZSByZXR1cm5zIChib29sKXsKICAgICAgX2Ftb3VudCA9IF9hbW91bnQuZGl2KDEwKioxMCk7CiAgICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX2Ftb3VudCk7CiAgICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuc3ViKF9hbW91bnQpOwogICAgICBUcmFuc2ZlcihfZnJvbSxhZGRyZXNzKDApLF9hbW91bnQpOwogIH0KICAKICBmdW5jdGlvbiBHZXRTdGF0cygpcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYsdWludDI1Nix1aW50MjU2LHVpbnQyNTYpewogICAgICB1aW50MjU2IHRpbWVUb0VuZCA9IDA7CiAgICAgIHVpbnQyNTYgcm91bmQgPTA7CiAgICAgIFN0YWdlRGF0YSBtZW1vcnkgX3MgPSBzdGFnZURhdGFTdG9yZVtzdGFnZUluZGV4XTsKICAgICAgaWYoR2V0Tm93KCk+PXN0YXJ0KXsKICAgICAgICByb3VuZCA9IHN0YWdlSW5kZXgrMTsKICAgICAgICBpZihfcy5zdGFnZVRpbWU+R2V0Tm93KCkpCiAgICAgICAgewogICAgICAgICAgICB0aW1lVG9FbmQgPSBfcy5zdGFnZVRpbWUtR2V0Tm93KCk7CiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIHJldHVybigwLDAsMCwwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICB0aW1lVG9FbmQgPSBzdGFydC1HZXROb3coKTsKICAgICAgfQogICAgICByZXR1cm4odGltZVRvRW5kLAogICAgICAgcm91bmQsCiAgICAgICBfcy5zdGFnZVN1bSoxMDAwL19zLnN0YWdlUHJpY2UsCiAgICAgICBHZXRNYXhTdGFnZUV0aEFtb3VudCgpLmRpdigxMCoqMTUpKTsKICB9CiAgCiAgZnVuY3Rpb24gbWludENvaW5zKGFkZHJlc3MgX3RvLCB1aW50MjU2IF9hbW91bnQpICBjYW5NaW50IGludGVybmFsIHJldHVybnMgKGJvb2wpIHsKICAgICAgCiAgICBfYW1vdW50ID0gX2Ftb3VudC5kaXYoMTAqKjEwKTsKICAJaWYodG90YWxTdXBwbHkuYWRkKF9hbW91bnQpPG1heFRva2VuU3VwcGx5KXsKICAJICBzdXBlci5taW50KF90byxfYW1vdW50Lm11bCg3NSkuZGl2KDEwMCkpOwogIAkgIHN1cGVyLm1pbnQoYWRkcmVzcyhiZW5lZmljaWFyeSksX2Ftb3VudC5tdWwoMjUpLmRpdigxMDApKTsKICAJICAKICAJICByZXR1cm4gdHJ1ZTsKICAJfQogIAllbHNlewogIAkJcmV0dXJuIGZhbHNlOyAKICAJfQogIAkKICAJcmV0dXJuIHRydWU7CiAgfQogIAogIAogZnVuY3Rpb24gR2V0Tm93KCkgcHVibGljIGNvbnN0YW50IHJldHVybnModWludDI1Nil7CiAgICByZXR1cm4gbm93OyAKIH0KICAKICAKfQ=='.
	

]
