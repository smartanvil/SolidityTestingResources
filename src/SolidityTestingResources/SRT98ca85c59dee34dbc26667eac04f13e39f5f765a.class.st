Class {
	#name : #SRT98ca85c59dee34dbc26667eac04f13e39f5f765a,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT98ca85c59dee34dbc26667eac04f13e39f5f765a >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7Cgpjb250cmFjdCBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gc2FmZU11bCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzYWZlU3ViKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICBhc3NlcnQoYiA8PSBhKTsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIGZ1bmN0aW9uIHNhZmVBZGQodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIHVpbnQgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGM+PWEgJiYgYz49Yik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGFzc2VydChib29sIGFzc2VydGlvbikgaW50ZXJuYWwgewogICAgaWYgKCFhc3NlcnRpb24pIHRocm93OwogIH0KfQoKY29udHJhY3QgVG9rZW4gewogIC8vLyBAcmV0dXJuIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KSB7c3VwcGx5PXN1cHBseTt9CgogIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAvLy8gQHJldHVybiBUaGUgYmFsYW5jZQogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgIF9vd25lcj1fb3duZXI7CiAgICAgIGJhbGFuY2U9YmFsYW5jZTsKICB9CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAvLy8gQHBhcmFtIF90byBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50CiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIF90bz1fdG87CiAgICAgIF92YWx1ZT1fdmFsdWU7CiAgICAgIHN1Y2Nlc3M9c3VjY2VzczsKICB9CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgIF9mcm9tPV9mcm9tOwogICAgICBfdG89X3RvOwogICAgICBfdmFsdWU9X3ZhbHVlOwogICAgICBzdWNjZXNzPXN1Y2Nlc3M7CiAgfQoKICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9hZGRyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAvLy8gQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIG9mIHRoZSBhY2NvdW50IGFibGUgdG8gdHJhbnNmZXIgdGhlIHRva2VucwogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2Ygd2VpIHRvIGJlIGFwcHJvdmVkIGZvciB0cmFuc2ZlcgogIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICBfc3BlbmRlcj1fc3BlbmRlcjsKICAgICAgX3ZhbHVlPV92YWx1ZTsKICAgICAgc3VjY2Vzcz1zdWNjZXNzOwogIH0KCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgLy8vIEByZXR1cm4gQW1vdW50IG9mIHJlbWFpbmluZyB0b2tlbnMgYWxsb3dlZCB0byBzcGVudAogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgICAgX293bmVyPV9vd25lcjsKICAgICAgX3NwZW5kZXI9X3NwZW5kZXI7CiAgICAgIHJlbWFpbmluZz1yZW1haW5pbmc7CiAgfQoKICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKCiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgLy9JZiB5b3VyIHRva2VuIGxlYXZlcyBvdXQgdG90YWxTdXBwbHkgYW5kIGNhbiBpc3N1ZSBtb3JlIHRva2VucyBhcyB0aW1lIGdvZXMgb24sIHlvdSBuZWVkIHRvIGNoZWNrIGlmIGl0IGRvZXNuJ3Qgd3JhcC4KICAgIC8vUmVwbGFjZSB0aGUgaWYgd2l0aCB0aGlzIG9uZSBpbnN0ZWFkLgogICAgaWYgKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgLy9pZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAvL3NhbWUgYXMgYWJvdmUuIFJlcGxhY2UgdGhpcyBsaW5lIHdpdGggdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBwcm90ZWN0IGFnYWluc3Qgd3JhcHBpbmcgdWludHMuCiAgICBpZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgIC8vaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDApIHsKICAgICAgYmFsYW5jZXNbX3RvXSArPSBfdmFsdWU7CiAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0KICB9CgogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9CgogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7Cn0KCmNvbnRyYWN0IFJlc2VydmVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBTYWZlTWF0aCB7CiAgYWRkcmVzcyBwdWJsaWMgbWludGVyOwogIGZ1bmN0aW9uIFJlc2VydmVUb2tlbigpIHsKICAgIG1pbnRlciA9IG1zZy5zZW5kZXI7CiAgfQogIGZ1bmN0aW9uIGNyZWF0ZShhZGRyZXNzIGFjY291bnQsIHVpbnQgYW1vdW50KSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBtaW50ZXIpIHRocm93OwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlQWRkKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IG1pbnRlcikgdGhyb3c7CiAgICBpZiAoYmFsYW5jZXNbYWNjb3VudF0gPCBhbW91bnQpIHRocm93OwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlU3ViKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KfQoKY29udHJhY3QgQWNjb3VudExldmVscyB7CiAgZnVuY3Rpb24gYWNjb3VudExldmVsKGFkZHJlc3MgdXNlcikgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICAgIHVzZXI9dXNlcjsKICB9Cn0KCmNvbnRyYWN0IEFjY291bnRMZXZlbHNUZXN0IGlzIEFjY291bnRMZXZlbHMgewogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkgcHVibGljIGFjY291bnRMZXZlbHM7CgogIGZ1bmN0aW9uIHNldEFjY291bnRMZXZlbChhZGRyZXNzIHVzZXIsIHVpbnQgbGV2ZWwpIHsKICAgIGFjY291bnRMZXZlbHNbdXNlcl0gPSBsZXZlbDsKICB9CgogIGZ1bmN0aW9uIGFjY291bnRMZXZlbChhZGRyZXNzIHVzZXIpIGNvbnN0YW50IHJldHVybnModWludCkgewogICAgcmV0dXJuIGFjY291bnRMZXZlbHNbdXNlcl07CiAgfQp9Cgpjb250cmFjdCBDcnlwdGV4IGlzIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsgLy90aGUgYWRtaW4gYWRkcmVzcwogIGFkZHJlc3MgZmVlQWNjb3VudDsgLy90aGUgYWNjb3VudCB0aGF0IHdpbGwgcmVjZWl2ZSBmZWVzCiAgYWRkcmVzcyBhY2NvdW50TGV2ZWxzQWRkcjsgLy90aGUgYWRkcmVzcyBvZiB0aGUgQWNjb3VudExldmVscyBjb250cmFjdAogIHVpbnQgZmVlTWFrZSA9IDA7CiAgdWludCBmZWVUYWtlID0gMDsgCiAgdWludCBmZWVSZWJhdGUgPSAwOwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSkgcHVibGljIHRva2VuczsgLy9tYXBwaW5nIG9mIHRva2VuIGFkZHJlc3NlcyB0byBtYXBwaW5nIG9mIGFjY291bnQgYmFsYW5jZXMgKHRva2VuPTAgbWVhbnMgRXRoZXIpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChieXRlczMyID0+IGJvb2wpKSBwdWJsaWMgb3JkZXJzOyAvL21hcHBpbmcgb2YgdXNlciBhY2NvdW50cyB0byBtYXBwaW5nIG9mIG9yZGVyIGhhc2hlcyB0byBib29sZWFucyAodHJ1ZSA9IHN1Ym1pdHRlZCBieSB1c2VyLCBlcXVpdmFsZW50IHRvIG9mZmNoYWluIHNpZ25hdHVyZSkKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGJ5dGVzMzIgPT4gdWludCkpIHB1YmxpYyBvcmRlckZpbGxzOyAvL21hcHBpbmcgb2YgdXNlciBhY2NvdW50cyB0byBtYXBwaW5nIG9mIG9yZGVyIGhhc2hlcyB0byB1aW50cyAoYW1vdW50IG9mIG9yZGVyIHRoYXQgaGFzIGJlZW4gZmlsbGVkKQoKICB1aW50IHB1YmxpYyB0cmFkZUZlZTsKICB1aW50IHB1YmxpYyBmZWVzUG9vbDsKICBhZGRyZXNzIHB1YmxpYyBzaGFyZXNBZGRyZXNzID0gMHhBOENERTMyMUREQjkwM2JmZUE5YjY0RTJjOTM4YzFCRTU0NjhiQjc1OwogIHVpbnQgcHVibGljIGdhc0ZlZSA9IDEwMDAwMDA7CgogIGV2ZW50IE9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlcik7CiAgZXZlbnQgQ2FuY2VsKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpOwogIGV2ZW50IFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCBhZGRyZXNzIGdldCwgYWRkcmVzcyBnaXZlKTsKICBldmVudCBEZXBvc2l0KGFkZHJlc3MgdG9rZW4sIGFkZHJlc3MgdXNlciwgdWludCBhbW91bnQsIHVpbnQgYmFsYW5jZSk7CiAgZXZlbnQgV2l0aGRyYXcoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKCiAgZnVuY3Rpb24gQ3J5cHRleChhZGRyZXNzIGFkbWluXywgYWRkcmVzcyBmZWVBY2NvdW50XywgYWRkcmVzcyBhY2NvdW50TGV2ZWxzQWRkcl8sIHVpbnQgZmVlTWFrZV8sIHVpbnQgZmVlVGFrZV8sIHVpbnQgZmVlUmViYXRlXykgewogICAgYWRtaW4gPSBhZG1pbl87CiAgICBmZWVBY2NvdW50ID0gZmVlQWNjb3VudF87CiAgICBhY2NvdW50TGV2ZWxzQWRkciA9IGFjY291bnRMZXZlbHNBZGRyXzsKICAgIGZlZU1ha2UgPSBmZWVNYWtlXzsKICAgIGZlZVRha2UgPSBmZWVUYWtlXzsKICAgIGZlZVJlYmF0ZSA9IGZlZVJlYmF0ZV87CiAgfQogCiAgZnVuY3Rpb24oKSBwYXlhYmxlIHsKdGhyb3c7CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VBZG1pbihhZGRyZXNzIGFkbWluXykgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gYWRtaW4pIHRocm93OwogICAgYWRtaW4gPSBhZG1pbl87CiAgfQogIAogICAgZnVuY3Rpb24gY2hhbmdlVHJhZGVGZWUodWludCB0cmFkZUZlZV8pIHsKICAgIGlmIChtc2cuc2VuZGVyICE9IGFkbWluKSB0aHJvdzsKICAgIGlmICh0cmFkZUZlZV8gPiAxMCBmaW5uZXkpIHRocm93OwogICAgaWYgKHRyYWRlRmVlXyA8IDEgZmlubmV5KSB0aHJvdzsKICAgIHRyYWRlRmVlID0gdHJhZGVGZWVfOwogIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VHYXNGZWUodWludCBnYXNGZWVfKSB7CiAgICBpZiAobXNnLnNlbmRlciAhPSBhZG1pbikgdGhyb3c7CiAgICBpZiAoZ2FzRmVlXyA+IDIwMDAwMCkgdGhyb3c7CiAgICBpZiAoZ2FzRmVlXyA8IDIwMDAwMDApIHRocm93OwogICAgZ2FzRmVlID0gZ2FzRmVlXzsKICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJEaXZpZGVuZFRvU2hhcmVzKCkgewoJaWYoZmVlc1Bvb2wgPiA1MzAwMDAwMDAwMDAwMDAwMDAwKXsKCWJvb2wgYm9vbHNlbnQ7CiAgICAgICAgZmVlc1Bvb2wgLT0gIDUzMDAwMDAwMDAwMDAwMDAwMDA7CiAgICAgICAgYm9vbHNlbnQgPSBzaGFyZXNBZGRyZXNzLmNhbGwuZ2FzKGdhc0ZlZSkudmFsdWUoNTMwMDAwMDAwMDAwMDAwMDAwMCkoKTsKCX0KICB9CgogIGZ1bmN0aW9uIGRlcG9zaXQoKSBwYXlhYmxlIHsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBtc2cudmFsdWUpOwogICAgRGVwb3NpdCgwLCBtc2cuc2VuZGVyLCBtc2cudmFsdWUsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhdyh1aW50IGFtb3VudCkgcGF5YWJsZSB7CiAgICBpZiAodG9rZW5zWzBdW21zZy5zZW5kZXJdIDwgYW1vdW50KSB0aHJvdzsKICAgIHRva2Vuc1swXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIodG9rZW5zWzBdW21zZy5zZW5kZXJdLCBhbW91bnQpOwogICAgaWYgKCFtc2cuc2VuZGVyLmNhbGwudmFsdWUoYW1vdW50KSgpKSB0aHJvdzsKICAgIFdpdGhkcmF3KDAsIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zWzBdW21zZy5zZW5kZXJdKTsKICB9CgogIGZ1bmN0aW9uIGRlcG9zaXRUb2tlbihhZGRyZXNzIHRva2VuLCB1aW50IGFtb3VudCkgcGF5YWJsZSB7CiAgICAvL3JlbWVtYmVyIHRvIGNhbGwgVG9rZW4oYWRkcmVzcykuYXBwcm92ZSh0aGlzLCBhbW91bnQpIG9yIHRoaXMgY29udHJhY3Qgd2lsbCBub3QgYmUgYWJsZSB0byBkbyB0aGUgdHJhbnNmZXIgb24geW91ciBiZWhhbGYuCiAgICBpZiAodG9rZW49PTApIHRocm93OwogICAgaWYgKCFUb2tlbih0b2tlbikudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCkpIHRocm93OwogICAgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIERlcG9zaXQodG9rZW4sIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VuKGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KSB7CiAgICBpZiAodG9rZW49PTApIHRocm93OwogICAgaWYgKHRva2Vuc1t0b2tlbl1bbXNnLnNlbmRlcl0gPCBhbW91bnQpIHRocm93OwogICAgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIGlmICghVG9rZW4odG9rZW4pLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCkpIHRocm93OwogICAgV2l0aGRyYXcodG9rZW4sIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gdG9rZW5zW3Rva2VuXVt1c2VyXTsKICB9CgogIGZ1bmN0aW9uIG9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIG9yZGVyc1ttc2cuc2VuZGVyXVtoYXNoXSA9IHRydWU7CiAgICBPcmRlcih0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlLCBtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQgYW1vdW50KSBwYXlhYmxlIHsKICAgCiAgIC8vYWRkIHRyYWRlIGZlZSB0byBmZWVzIHBvb2wKICAgIGlmKG1zZy52YWx1ZSAhPSB0cmFkZUZlZSkge3Rocm93O30KICAgICAgICBmZWVzUG9vbCArPSBtc2cudmFsdWU7CgogICAgLy9hbW91bnQgaXMgaW4gYW1vdW50R2V0IHRlcm1zCiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoISgKICAgICAgKG9yZGVyc1t1c2VyXVtoYXNoXSB8fCBlY3JlY292ZXIoc2hhMygiXHgxOUV0aGVyZXVtIFNpZ25lZCBNZXNzYWdlOlxuMzIiLCBoYXNoKSx2LHIscykgPT0gdXNlcikgJiYKICAgICAgYmxvY2subnVtYmVyIDw9IGV4cGlyZXMgJiYKICAgICAgc2FmZUFkZChvcmRlckZpbGxzW3VzZXJdW2hhc2hdLCBhbW91bnQpIDw9IGFtb3VudEdldAogICAgKSkgdGhyb3c7CiAgICB0cmFkZUJhbGFuY2VzKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgdXNlciwgYW1vdW50KTsKICAgIG9yZGVyRmlsbHNbdXNlcl1baGFzaF0gPSBzYWZlQWRkKG9yZGVyRmlsbHNbdXNlcl1baGFzaF0sIGFtb3VudCk7CiAgICBUcmFkZSh0b2tlbkdldCwgYW1vdW50LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUgKiBhbW91bnQgLyBhbW91bnRHZXQsIHVzZXIsIG1zZy5zZW5kZXIpOwoKICB9CgogIGZ1bmN0aW9uIHRyYWRlQmFsYW5jZXMgKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50KSBwcml2YXRlIHsKCiAgICB1aW50IGZlZU1ha2VYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZU1ha2UpIC8gKDEgZXRoZXIpOwogICAgdWludCBmZWVUYWtlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVUYWtlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgZmVlUmViYXRlWGZlciA9IDA7CiAgICBpZiAoYWNjb3VudExldmVsc0FkZHIgIT0gMHgwKSB7CiAgICAgIHVpbnQgYWNjb3VudExldmVsID0gQWNjb3VudExldmVscyhhY2NvdW50TGV2ZWxzQWRkcikuYWNjb3VudExldmVsKHVzZXIpOwogICAgICBpZiAoYWNjb3VudExldmVsPT0xKSBmZWVSZWJhdGVYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZVJlYmF0ZSkgLyAoMSBldGhlcik7CiAgICAgIGlmIChhY2NvdW50TGV2ZWw9PTIpIGZlZVJlYmF0ZVhmZXIgPSBmZWVUYWtlWGZlcjsKICAgIH0KICAgIHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0sIHNhZmVBZGQoYW1vdW50LCBmZWVUYWtlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2V0XVt1c2VyXSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuR2V0XVt1c2VyXSwgc2FmZVN1YihzYWZlQWRkKGFtb3VudCwgZmVlUmViYXRlWGZlciksIGZlZU1ha2VYZmVyKSk7CiAgICB0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdLCBzYWZlU3ViKHNhZmVBZGQoZmVlTWFrZVhmZXIsIGZlZVRha2VYZmVyKSwgZmVlUmViYXRlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bdXNlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbkdpdmVdW21zZy5zZW5kZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogIH0KCiAgZnVuY3Rpb24gdGVzdFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQgYW1vdW50LCBhZGRyZXNzIHNlbmRlcikgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICBpZiAoISgKICAgICAgdG9rZW5zW3Rva2VuR2V0XVtzZW5kZXJdID49IGFtb3VudCAmJgogICAgICBhdmFpbGFibGVWb2x1bWUodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgdXNlciwgdiwgciwgcykgPj0gYW1vdW50CiAgICApKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGF2YWlsYWJsZVZvbHVtZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIGlmICghKAogICAgICAob3JkZXJzW3VzZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSB1c2VyKSAmJgogICAgICBibG9jay5udW1iZXIgPD0gZXhwaXJlcwogICAgKSkgcmV0dXJuIDA7CiAgICB1aW50IGF2YWlsYWJsZTEgPSBzYWZlU3ViKGFtb3VudEdldCwgb3JkZXJGaWxsc1t1c2VyXVtoYXNoXSk7CiAgICB1aW50IGF2YWlsYWJsZTIgPSBzYWZlTXVsKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBhbW91bnRHZXQpIC8gYW1vdW50R2l2ZTsKICAgIGlmIChhdmFpbGFibGUxPGF2YWlsYWJsZTIpIHJldHVybiBhdmFpbGFibGUxOwogICAgcmV0dXJuIGF2YWlsYWJsZTI7CiAgfQoKICBmdW5jdGlvbiBhbW91bnRGaWxsZWQoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcykgY29uc3RhbnQgcmV0dXJucyh1aW50KSB7CiAgICB0b2tlbkdldD10b2tlbkdldDsKICAgIGFtb3VudEdldD1hbW91bnRHZXQ7CiAgICB0b2tlbkdpdmU9dG9rZW5HaXZlOwogICAgYW1vdW50R2l2ZT1hbW91bnRHaXZlOwogICAgZXhwaXJlcz1leHBpcmVzOwogICAgbm9uY2U9bm9uY2U7CiAgICB1c2VyPXVzZXI7CiAgICB2PXY7CiAgICByPXI7CiAgICBzPXM7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICByZXR1cm4gb3JkZXJGaWxsc1t1c2VyXVtoYXNoXTsKICB9CgogIGZ1bmN0aW9uIGNhbmNlbE9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSB7CiAgICBieXRlczMyIGhhc2ggPSBzaGEyNTYodGhpcywgdG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSk7CiAgICBpZiAoIShvcmRlcnNbbXNnLnNlbmRlcl1baGFzaF0gfHwgZWNyZWNvdmVyKHNoYTMoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgaGFzaCksdixyLHMpID09IG1zZy5zZW5kZXIpKSB0aHJvdzsKICAgIG9yZGVyRmlsbHNbbXNnLnNlbmRlcl1baGFzaF0gPSBhbW91bnRHZXQ7CiAgICBDYW5jZWwodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgbXNnLnNlbmRlciwgdiwgciwgcyk7CiAgfQp9'.
	

]
