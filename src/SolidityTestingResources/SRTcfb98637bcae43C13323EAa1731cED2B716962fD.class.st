Class {
	#name : #SRTcfb98637bcae43C13323EAa1731cED2B716962fD,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTcfb98637bcae43C13323EAa1731cED2B716962fD >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKiB0YWtpbmcgaWRlYXMgZnJvbSBGaXJzdEJsb29kIHRva2VuICovCmNvbnRyYWN0IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQyNTYgeCwgdWludDI1NiB5KSBpbnRlcm5hbCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IHogPSB4ICsgeTsKICAgICAgICBhc3NlcnQoKHogPj0geCkgJiYgKHogPj0geSkpOwogICAgICAgIHJldHVybiB6OwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVTdWJ0cmFjdCh1aW50MjU2IHgsIHVpbnQyNTYgeSkgaW50ZXJuYWwgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KHggPj0geSk7CiAgICAgICAgdWludDI1NiB6ID0geCAtIHk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZU11bHQodWludDI1NiB4LCB1aW50MjU2IHkpIGludGVybmFsIHJldHVybnModWludDI1NikgewogICAgICAgIHVpbnQyNTYgeiA9IHggKiB5OwogICAgICAgIGFzc2VydCgoeCA9PSAwKXx8KHoveCA9PSB5KSk7CiAgICAgICAgcmV0dXJuIHo7CiAgICB9Cn0KCmNvbnRyYWN0IFRva2VuIHsKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIF9mcm9tLCBhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKLyogIEVSQyAyMCB0b2tlbiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuLCBTYWZlTWF0aCB7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBtb2RpZmllciBvbmx5UGF5bG9hZFNpemUodWludCBudW13b3JkcykgewogICAgICAgIGFzc2VydChtc2cuZGF0YS5sZW5ndGggPT0gbnVtd29yZHMgKiAzMiArIDQpOwogICAgICAgIF87CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgcmV0dXJucyAoYm9vbCBzdWNjZXNzKQogICAgewogICAgICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWJ0cmFjdChiYWxhbmNlc1ttc2cuc2VuZGVyXSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgICAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgaWYgKGJhbGFuY2VzW19mcm9tXSA+PSBfdmFsdWUgJiYgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIF92YWx1ZSA+IDAgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pIHsKICAgICAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgICAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YnRyYWN0KGJhbGFuY2VzW19mcm9tXSwgX3ZhbHVlKTsKICAgICAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3VidHJhY3QoYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICAgICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgICAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKQogICAgb25seVBheWxvYWRTaXplKDIpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgX3NwZW5kZXIsIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKQogICAgY29uc3RhbnQKICAgIG9ubHlQYXlsb2FkU2l6ZSgyKQogICAgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpCiAgICB7CiAgICAgICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgICB9Cn0KCi8qIFRha2luZyBpZGVhcyBmcm9tIEJBVCB0b2tlbiAqLwpjb250cmFjdCBORVRva2VuIGlzIFN0YW5kYXJkVG9rZW4gewoKICAgIC8vIFRva2VuIG1ldGFkYXRhCiAgICBzdHJpbmcgcHVibGljIGNvbnN0YW50IG5hbWUgPSAiTmltaXEgTmV0d29yayBJbnRlcmltIFRva2VuIjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIk5FVCI7CiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogICAgc3RyaW5nIHB1YmxpYyB2ZXJzaW9uID0gIjAuOCI7CgogICAgLy8gRGVwb3NpdCBhZGRyZXNzIG9mIE11bHRpc2lnIGFjY291bnQgY29udHJvbGxlZCBieSB0aGUgY3JlYXRvcnMKICAgIGFkZHJlc3MgcHVibGljIGV0aEZ1bmREZXBvc2l0OwoKICAgIC8vIEZ1bmRyYWlzaW5nIHBhcmFtZXRlcnMKICAgIGVudW0gQ29udHJhY3RTdGF0ZSB7IEZ1bmRyYWlzaW5nLCBGaW5hbGl6ZWQsIFJlZGVlbWluZywgUGF1c2VkIH0KICAgIENvbnRyYWN0U3RhdGUgcHVibGljIHN0YXRlOyAgICAgICAgICAgLy8gQ3VycmVudCBzdGF0ZSBvZiB0aGUgY29udHJhY3QKICAgIENvbnRyYWN0U3RhdGUgcHJpdmF0ZSBzYXZlZFN0YXRlOyAgICAgLy8gU3RhdGUgb2YgdGhlIGNvbnRyYWN0IGJlZm9yZSBwYXVzZQoKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdTdGFydEJsb2NrOyAgICAgICAgLy8gVGhlc2UgdHdvIGJsb2NrcyBuZWVkIHRvIGJlIGNob3NlbiB0byBjb21wbHkgd2l0aCB0aGUKICAgIHVpbnQyNTYgcHVibGljIGZ1bmRpbmdFbmRCbG9jazsgICAgICAgICAgLy8gc3RhcnQgZGF0ZSBhbmQgMjggZGF5IGR1cmF0aW9uIHJlcXVpcmVtZW50cwogICAgdWludDI1NiBwdWJsaWMgZXhjaGFuZ2VSYXRlQ2hhbmdlc0Jsb2NrOyAvLyBibG9jayBudW1iZXIgdGhhdCB0cmlnZ2VycyB0aGUgZXhjaGFuZ2UgcmF0ZSBjaGFuZ2UKCiAgICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBUT0tFTl9GSVJTVF9FWENIQU5HRV9SQVRFID0gMTc1OyAvLyAxNzUgTkVUcyBwZXIgMSBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX1NFQ09ORF9FWENIQU5HRV9SQVRFID0gMTI1OyAvLyAxMjUgTkVUcyBwZXIgMSBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX0NSRUFUSU9OX0NBUCA9IDEwLjUgKiAoMTAqKjYpICogMTAqKmRlY2ltYWxzOyAvLyAxMC41IG1pbGxpb24gTkVUcwogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgRVRIX1JFQ0VJVkVEX0NBUCA9IDYwICogKDEwKiozKSAqIDEwKipkZWNpbWFsczsgLy8gNjAgMDAwIEVUSAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgRVRIX1JFQ0VJVkVEX01JTiA9IDUgKiAoMTAqKjMpICogMTAqKmRlY2ltYWxzOyAvLyA1IDAwMCBFVEgKICAgIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IFRPS0VOX01JTiA9IDEgKiAxMCoqZGVjaW1hbHM7IC8vIDEgTkVUCgogICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIGhvdyBtdWNoIGV0aGVyIGhhdmUgYmVlbiBjb250cmlidXRlZCwgc2luY2Ugd2UgaGF2ZSBhIGNhcCBmb3IgRVRIIHRvbwogICAgdWludDI1NiBwdWJsaWMgdG90YWxSZWNlaXZlZEV0aCA9IDA7CgogICAgLy8gU2luY2Ugd2UgaGF2ZSBkaWZmZXJlbnQgZXhjaGFuZ2UgcmF0ZXMgYXQgZGlmZmVyZW50IHN0YWdlcywgd2UgbmVlZCB0byBrZWVwIHRyYWNrCiAgICAvLyBvZiBob3cgbXVjaCBldGhlciBlYWNoIGNvbnRyaWJ1dGVkIGluIGNhc2UgdGhhdCB3ZSBuZWVkIHRvIGlzc3VlIGEgcmVmdW5kCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgZXRoQmFsYW5jZXM7CgogICAgLy8gRXZlbnRzIHVzZWQgZm9yIGxvZ2dpbmcKICAgIGV2ZW50IExvZ1JlZnVuZChhZGRyZXNzIGluZGV4ZWQgX3RvLCB1aW50MjU2IF92YWx1ZSk7CiAgICBldmVudCBMb2dDcmVhdGVORVQoYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgTG9nUmVkZWVtTkVUKGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlLCBieXRlczMyIF9uaW1pcUFkZHJlc3MpOwoKICAgIG1vZGlmaWVyIGlzRmluYWxpemVkKCkgewogICAgICAgIHJlcXVpcmUoc3RhdGUgPT0gQ29udHJhY3RTdGF0ZS5GaW5hbGl6ZWQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNGdW5kcmFpc2luZygpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IENvbnRyYWN0U3RhdGUuRnVuZHJhaXNpbmcpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNSZWRlZW1pbmcoKSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBDb250cmFjdFN0YXRlLlJlZGVlbWluZyk7CiAgICAgICAgXzsKICAgIH0KCiAgICBtb2RpZmllciBpc1BhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKHN0YXRlID09IENvbnRyYWN0U3RhdGUuUGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG5vdFBhdXNlZCgpIHsKICAgICAgICByZXF1aXJlKHN0YXRlICE9IENvbnRyYWN0U3RhdGUuUGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlzRnVuZHJhaXNpbmdJZ25vcmVQYXVzZWQoKSB7CiAgICAgICAgcmVxdWlyZShzdGF0ZSA9PSBDb250cmFjdFN0YXRlLkZ1bmRyYWlzaW5nIHx8IChzdGF0ZSA9PSBDb250cmFjdFN0YXRlLlBhdXNlZCAmJiBzYXZlZFN0YXRlID09IENvbnRyYWN0U3RhdGUuRnVuZHJhaXNpbmcpKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gZXRoRnVuZERlcG9zaXQpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgbWluaW11bVJlYWNoZWQoKSB7CiAgICAgICAgcmVxdWlyZSh0b3RhbFJlY2VpdmVkRXRoID49IEVUSF9SRUNFSVZFRF9NSU4pOwogICAgICAgIF87CiAgICB9CgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIE5FVG9rZW4oCiAgICBhZGRyZXNzIF9ldGhGdW5kRGVwb3NpdCwKICAgIHVpbnQyNTYgX2Z1bmRpbmdTdGFydEJsb2NrLAogICAgdWludDI1NiBfZnVuZGluZ0VuZEJsb2NrLAogICAgdWludDI1NiBfZXhjaGFuZ2VSYXRlQ2hhbmdlc0Jsb2NrKQogICAgewogICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHBhcmFtZXRlcnMgbWFrZSBzZW5zZQogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyIDw9IF9mdW5kaW5nU3RhcnRCbG9jayk7IC8vIFRoZSBzdGFydCBvZiB0aGUgZnVuZHJhaXNpbmcgc2hvdWxkIGhhcHBlbiBpbiB0aGUgZnV0dXJlCiAgICAgICAgcmVxdWlyZShfZnVuZGluZ1N0YXJ0QmxvY2sgPD0gX2V4Y2hhbmdlUmF0ZUNoYW5nZXNCbG9jayk7IC8vIFRoZSBleGNoYW5nZSByYXRlIGNoYW5nZSBzaG91bGQgaGFwcGVuIGFmdGVyIHRoZSBzdGFydCBvZiB0aGUgZnVuZHJhaXNpbmcKICAgICAgICByZXF1aXJlKF9leGNoYW5nZVJhdGVDaGFuZ2VzQmxvY2sgPD0gX2Z1bmRpbmdFbmRCbG9jayk7IC8vIEFuZCB0aGUgZW5kIG9mIHRoZSBmdW5kcmFpc2luZyBzaG91bGQgaGFwcGVuIGFmdGVyIHRoZSBleGNoYW5nZSByYXRlIGNoYW5nZQoKICAgICAgICAvLyBDb250cmFjdCBzdGF0ZQogICAgICAgIHN0YXRlID0gQ29udHJhY3RTdGF0ZS5GdW5kcmFpc2luZzsKICAgICAgICBzYXZlZFN0YXRlID0gQ29udHJhY3RTdGF0ZS5GdW5kcmFpc2luZzsKCiAgICAgICAgZXRoRnVuZERlcG9zaXQgPSBfZXRoRnVuZERlcG9zaXQ7CiAgICAgICAgZnVuZGluZ1N0YXJ0QmxvY2sgPSBfZnVuZGluZ1N0YXJ0QmxvY2s7CiAgICAgICAgZnVuZGluZ0VuZEJsb2NrID0gX2Z1bmRpbmdFbmRCbG9jazsKICAgICAgICBleGNoYW5nZVJhdGVDaGFuZ2VzQmxvY2sgPSBfZXhjaGFuZ2VSYXRlQ2hhbmdlc0Jsb2NrOwogICAgICAgIHRvdGFsU3VwcGx5ID0gMDsKICAgIH0KCiAgICAvLyBPdmVycmlkZGVuIG1ldGhvZCB0byBjaGVjayBmb3IgZW5kIG9mIGZ1bmRyYWlzaW5nIGJlZm9yZSBhbGxvd2luZyB0cmFuc2ZlciBvZiB0b2tlbnMKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkKICAgIGlzRmluYWxpemVkIC8vIE9ubHkgYWxsb3cgdG9rZW4gdHJhbnNmZXIgYWZ0ZXIgdGhlIGZ1bmRyYWlzaW5nIGhhcyBlbmRlZAogICAgb25seVBheWxvYWRTaXplKDIpCiAgICByZXR1cm5zIChib29sIHN1Y2Nlc3MpCiAgICB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCgogICAgLy8gT3ZlcnJpZGRlbiBtZXRob2QgdG8gY2hlY2sgZm9yIGVuZCBvZiBmdW5kcmFpc2luZyBiZWZvcmUgYWxsb3dpbmcgdHJhbnNmZXIgb2YgdG9rZW5zCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKQogICAgaXNGaW5hbGl6ZWQgLy8gT25seSBhbGxvdyB0b2tlbiB0cmFuc2ZlciBhZnRlciB0aGUgZnVuZHJhaXNpbmcgaGFzIGVuZGVkCiAgICBvbmx5UGF5bG9hZFNpemUoMykKICAgIHJldHVybnMgKGJvb2wgc3VjY2VzcykKICAgIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgoKICAgIC8vLyBAZGV2IEFjY2VwdHMgZXRoZXIgYW5kIGNyZWF0ZXMgbmV3IE5FVCB0b2tlbnMKICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VucygpCiAgICBwYXlhYmxlCiAgICBleHRlcm5hbAogICAgaXNGdW5kcmFpc2luZwogICAgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID49IGZ1bmRpbmdTdGFydEJsb2NrKTsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA8PSBmdW5kaW5nRW5kQmxvY2spOwogICAgICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgICAgIC8vIEZpcnN0IHdlIGNoZWNrIHRoZSBFVEggY2FwLCBhcyBpdCdzIGVhc2llciB0byBjYWxjdWxhdGUsIHJldHVybgogICAgICAgIC8vIHRoZSBjb250cmlidXRpb24gaWYgdGhlIGNhcCBoYXMgYmVlbiByZWFjaGVkIGFscmVhZHkKICAgICAgICB1aW50MjU2IGNoZWNrZWRSZWNlaXZlZEV0aCA9IHNhZmVBZGQodG90YWxSZWNlaXZlZEV0aCwgbXNnLnZhbHVlKTsKICAgICAgICByZXF1aXJlKGNoZWNrZWRSZWNlaXZlZEV0aCA8PSBFVEhfUkVDRUlWRURfQ0FQKTsKCiAgICAgICAgLy8gSWYgYWxsIGlzIGZpbmUgd2l0aCB0aGUgRVRIIGNhcCwgd2UgY29udGludWUgdG8gY2hlY2sgdGhlCiAgICAgICAgLy8gbWluaW11bSBhbW91bnQgb2YgdG9rZW5zIGFuZCB0aGUgY2FwIGZvciBob3cgbWFueSB0b2tlbnMKICAgICAgICAvLyBoYXZlIGJlZW4gZ2VuZXJhdGVkIHNvIGZhcgogICAgICAgIHVpbnQyNTYgdG9rZW5zID0gc2FmZU11bHQobXNnLnZhbHVlLCBnZXRDdXJyZW50VG9rZW5QcmljZSgpKTsKICAgICAgICByZXF1aXJlKHRva2VucyA+PSBUT0tFTl9NSU4pOwogICAgICAgIHVpbnQyNTYgY2hlY2tlZFN1cHBseSA9IHNhZmVBZGQodG90YWxTdXBwbHksIHRva2Vucyk7CiAgICAgICAgcmVxdWlyZShjaGVja2VkU3VwcGx5IDw9IFRPS0VOX0NSRUFUSU9OX0NBUCk7CgogICAgICAgIC8vIE9ubHkgd2hlbiBhbGwgdGhlIGNoZWNrcyBoYXZlIHBhc3NlZCwgdGhlbiB3ZSB1cGRhdGUgdGhlIHN0YXRlIChldGhCYWxhbmNlcywKICAgICAgICAvLyB0b3RhbFJlY2VpdmVkRXRoLCB0b3RhbFN1cHBseSwgYW5kIGJhbGFuY2VzKSBvZiB0aGUgY29udHJhY3QKICAgICAgICBldGhCYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVBZGQoZXRoQmFsYW5jZXNbbXNnLnNlbmRlcl0sIG1zZy52YWx1ZSk7CiAgICAgICAgdG90YWxSZWNlaXZlZEV0aCA9IGNoZWNrZWRSZWNlaXZlZEV0aDsKICAgICAgICB0b3RhbFN1cHBseSA9IGNoZWNrZWRTdXBwbHk7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gKz0gdG9rZW5zOyAgLy8gc2FmZUFkZCBub3QgbmVlZGVkOyBiYWQgc2VtYW50aWNzIHRvIHVzZSBoZXJlCgogICAgICAgIC8vIExvZyB0aGUgY3JlYXRpb24gb2YgdGhpcyB0b2tlbnMKICAgICAgICBMb2dDcmVhdGVORVQobXNnLnNlbmRlciwgdG9rZW5zKTsKICAgIH0KCgogICAgLy8vIEBkZXYgUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBwcmljZQogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFRva2VuUHJpY2UoKQogICAgcHJpdmF0ZQogICAgY29uc3RhbnQKICAgIHJldHVybnMgKHVpbnQyNTYgY3VycmVudFByaWNlKQogICAgewogICAgICAgIGlmIChibG9jay5udW1iZXIgPCBleGNoYW5nZVJhdGVDaGFuZ2VzQmxvY2spIHsKICAgICAgICAgICAgcmV0dXJuIFRPS0VOX0ZJUlNUX0VYQ0hBTkdFX1JBVEU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFRPS0VOX1NFQ09ORF9FWENIQU5HRV9SQVRFOwogICAgICAgIH0KICAgIH0KCgogICAgLy8vIEBkZXYgUmVkZWVtcyBORVRzIGFuZCByZWNvcmRzIHRoZSBOaW1pcSBhZGRyZXNzIG9mIHRoZSBzZW5kZXIKICAgIGZ1bmN0aW9uIHJlZGVlbVRva2VucyhieXRlczMyIG5pbWlxQWRkcmVzcykKICAgIGV4dGVybmFsCiAgICBpc1JlZGVlbWluZwogICAgewogICAgICAgIHVpbnQyNTYgbmV0VmFsID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShuZXRWYWwgPj0gVE9LRU5fTUlOKTsgLy8gQXQgbGVhc3QgVE9LRU5fTUlOIHRva2VucyBoYXZlIHRvIGJlIHJlZGVlbWVkCgogICAgICAgIC8vIE1vdmUgdGhlIHRva2VucyBvZiB0aGUgY2FsbGVyIHRvIE5pbWlxJ3MgYWRkcmVzcwogICAgICAgIGlmICghc3VwZXIudHJhbnNmZXIoZXRoRnVuZERlcG9zaXQsIG5ldFZhbCkpIHRocm93OwoKICAgICAgICAvLyBMb2cgdGhlIHJlZGVlbWluZyBvZiB0aGlzIHRva2VucwogICAgICAgIExvZ1JlZGVlbU5FVChtc2cuc2VuZGVyLCBuZXRWYWwsIG5pbWlxQWRkcmVzcyk7CiAgICB9CgoKICAgIC8vLyBAZGV2IEFsbG93cyB0byB0cmFuc2ZlciBldGhlciBmcm9tIHRoZSBjb250cmFjdCBhcyBzb29uIGFzIHRoZSBtaW5pbXVtIGlzIHJlYWNoZWQKICAgIGZ1bmN0aW9uIHJldHJpZXZlRXRoKHVpbnQyNTYgX3ZhbHVlKQogICAgZXh0ZXJuYWwKICAgIG1pbmltdW1SZWFjaGVkCiAgICBvbmx5T3duZXIKICAgIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSB0aGlzLmJhbGFuY2UpOwoKICAgICAgICAvLyBzZW5kIHRoZSBldGggdG8gTmltaXEgQ3JlYXRvcnMKICAgICAgICBldGhGdW5kRGVwb3NpdC50cmFuc2ZlcihfdmFsdWUpOwogICAgfQoKCiAgICAvLy8gQGRldiBFbmRzIHRoZSBmdW5kcmFpc2luZyBwZXJpb2QgYW5kIHNlbmRzIHRoZSBFVEggdG8gdGhlIE11bHRpc2lnIHdhbGxldAogICAgZnVuY3Rpb24gZmluYWxpemUoKQogICAgZXh0ZXJuYWwKICAgIGlzRnVuZHJhaXNpbmcKICAgIG1pbmltdW1SZWFjaGVkCiAgICBvbmx5T3duZXIgLy8gT25seSB0aGUgb3duZXIgb2YgdGhlIGV0aEZ1bmREZXBvc2l0IGFkZHJlc3MgY2FuIGZpbmFsaXplIHRoZSBjb250cmFjdAogICAgewogICAgICAgIHJlcXVpcmUoYmxvY2subnVtYmVyID4gZnVuZGluZ0VuZEJsb2NrIHx8IHRvdGFsU3VwcGx5ID49IFRPS0VOX0NSRUFUSU9OX0NBUCB8fCB0b3RhbFJlY2VpdmVkRXRoID49IEVUSF9SRUNFSVZFRF9DQVApOyAvLyBPbmx5IGFsbG93IHRvIGZpbmFsaXplIHRoZSBjb250cmFjdCBiZWZvcmUgdGhlIGVuZGluZyBibG9jayBpZiB3ZSBhbHJlYWR5IHJlYWNoZWQgYW55IG9mIHRoZSB0d28gY2FwcwoKICAgICAgICAvLyBNb3ZlIHRoZSBjb250cmFjdCB0byBGaW5hbGl6ZWQgc3RhdGUKICAgICAgICBzdGF0ZSA9IENvbnRyYWN0U3RhdGUuRmluYWxpemVkOwogICAgICAgIHNhdmVkU3RhdGUgPSBDb250cmFjdFN0YXRlLkZpbmFsaXplZDsKCiAgICAgICAgLy8gU2VuZCB0aGUgRVRIIHRvIE5pbWlxIENyZWF0b3JzCiAgICAgICAgZXRoRnVuZERlcG9zaXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICAgIH0KCgogICAgLy8vIEBkZXYgU3RhcnRzIHRoZSByZWRlZW1pbmcgcGVyaW9kCiAgICBmdW5jdGlvbiBzdGFydFJlZGVlbWluZygpCiAgICBleHRlcm5hbAogICAgaXNGaW5hbGl6ZWQgLy8gVGhlIHJlZGVlbWluZyBwZXJpb2QgY2FuIG9ubHkgYmUgc3RhcnRlZCBhZnRlciB0aGUgY29udHJhY3QgaXMgZmluYWxpemVkCiAgICBvbmx5T3duZXIgICAvLyBPbmx5IHRoZSBvd25lciBvZiB0aGUgZXRoRnVuZERlcG9zaXQgYWRkcmVzcyBjYW4gc3RhcnQgdGhlIHJlZGVlbWluZyBwZXJpb2QKICAgIHsKICAgICAgICAvLyBNb3ZlIHRoZSBjb250cmFjdCB0byBSZWRlZW1pbmcgc3RhdGUKICAgICAgICBzdGF0ZSA9IENvbnRyYWN0U3RhdGUuUmVkZWVtaW5nOwogICAgICAgIHNhdmVkU3RhdGUgPSBDb250cmFjdFN0YXRlLlJlZGVlbWluZzsKICAgIH0KCgogICAgLy8vIEBkZXYgUGF1c2VzIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gcGF1c2UoKQogICAgZXh0ZXJuYWwKICAgIG5vdFBhdXNlZCAgIC8vIFByZXZlbnQgdGhlIGNvbnRyYWN0IGdldHRpbmcgc3R1Y2sgaW4gdGhlIFBhdXNlZCBzdGF0ZQogICAgb25seU93bmVyICAgLy8gT25seSB0aGUgb3duZXIgb2YgdGhlIGV0aEZ1bmREZXBvc2l0IGFkZHJlc3MgY2FuIHBhdXNlIHRoZSBjb250cmFjdAogICAgewogICAgICAgIC8vIE1vdmUgdGhlIGNvbnRyYWN0IHRvIFBhdXNlZCBzdGF0ZQogICAgICAgIHNhdmVkU3RhdGUgPSBzdGF0ZTsKICAgICAgICBzdGF0ZSA9IENvbnRyYWN0U3RhdGUuUGF1c2VkOwogICAgfQoKCiAgICAvLy8gQGRldiBQcm9jZWVkcyB3aXRoIHRoZSBjb250cmFjdAogICAgZnVuY3Rpb24gcHJvY2VlZCgpCiAgICBleHRlcm5hbAogICAgaXNQYXVzZWQKICAgIG9ubHlPd25lciAgIC8vIE9ubHkgdGhlIG93bmVyIG9mIHRoZSBldGhGdW5kRGVwb3NpdCBhZGRyZXNzIGNhbiBwcm9jZWVkIHdpdGggdGhlIGNvbnRyYWN0CiAgICB7CiAgICAgICAgLy8gTW92ZSB0aGUgY29udHJhY3QgdG8gdGhlIHByZXZpb3VzIHN0YXRlCiAgICAgICAgc3RhdGUgPSBzYXZlZFN0YXRlOwogICAgfQoKCiAgICAvLy8gQGRldiBBbGxvd3MgY29udHJpYnV0b3JzIHRvIHJlY292ZXIgdGhlaXIgZXRoZXIgaW4gY2FzZSB0aGUgbWluaW11bSBmdW5kaW5nIGdvYWwgaXMgbm90IHJlYWNoZWQKICAgIGZ1bmN0aW9uIHJlZnVuZCgpCiAgICBleHRlcm5hbAogICAgaXNGdW5kcmFpc2luZ0lnbm9yZVBhdXNlZCAvLyBSZWZ1bmRpbmcgaXMgb25seSBwb3NzaWJsZSBpbiB0aGUgZnVuZHJhaXNpbmcgcGhhc2UgKG5vIG1hdHRlciBpZiBwYXVzZWQpIGJ5IGRlZmluaXRpb24KICAgIHsKICAgICAgICByZXF1aXJlKGJsb2NrLm51bWJlciA+IGZ1bmRpbmdFbmRCbG9jayk7IC8vIFByZXZlbnRzIHJlZnVuZCB1bnRpbCBmdW5kcmFpc2luZyBwZXJpb2QgaXMgb3ZlcgogICAgICAgIHJlcXVpcmUodG90YWxSZWNlaXZlZEV0aCA8IEVUSF9SRUNFSVZFRF9NSU4pOyAgLy8gTm8gcmVmdW5kcyBpZiB0aGUgbWluaW11bSBoYXMgYmVlbiByZWFjaGVkCgogICAgICAgIHVpbnQyNTYgbmV0VmFsID0gYmFsYW5jZXNbbXNnLnNlbmRlcl07CiAgICAgICAgcmVxdWlyZShuZXRWYWwgPiAwKTsKICAgICAgICB1aW50MjU2IGV0aFZhbCA9IGV0aEJhbGFuY2VzW21zZy5zZW5kZXJdOwogICAgICAgIHJlcXVpcmUoZXRoVmFsID4gMCk7CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgc3RhdGUgb25seSBhZnRlciBhbGwgdGhlIGNoZWNrcyBoYXZlIHBhc3NlZAogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gMDsKICAgICAgICBldGhCYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgdG90YWxTdXBwbHkgPSBzYWZlU3VidHJhY3QodG90YWxTdXBwbHksIG5ldFZhbCk7IC8vIEV4dHJhIHNhZmUKCiAgICAgICAgLy8gTG9nIHRoaXMgcmVmdW5kCiAgICAgICAgTG9nUmVmdW5kKG1zZy5zZW5kZXIsIGV0aFZhbCk7CgogICAgICAgIC8vIFNlbmQgdGhlIGNvbnRyaWJ1dGlvbnMgb25seSBhZnRlciB3ZSBoYXZlIHVwZGF0ZWQgYWxsIHRoZSBiYWxhbmNlcwogICAgICAgIC8vIElmIHlvdSdyZSB1c2luZyBhIGNvbnRyYWN0LCBtYWtlIHN1cmUgaXQgd29ya3Mgd2l0aCAudHJhbnNmZXIoKSBnYXMgbGltaXRzCiAgICAgICAgbXNnLnNlbmRlci50cmFuc2ZlcihldGhWYWwpOwogICAgfQp9'.
	

]
