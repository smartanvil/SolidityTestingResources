Class {
	#name : #SRT0DC568Fc30EB731B6551848382e53bDF2c47A230,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT0DC568Fc30EB731B6551848382e53bDF2c47A230 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogV0VMQ09NRTogaHR0cDovL2NyeXB0b2JldG9uLmNvbS8KICogQ3J5cHRvYmV0b24gaXMgYSBtdWx0aS1mdW5jdGlvbmFsIHBsYXRmb3JtIGZvciB3b3JraW5nIHdpdGggU21hcnRDb250cmFjdCwgYWxsb3dpbmcgeW91IHRvIG1ha2UgYmV0cywgd2F0Y2ggbWF0Y2hlcyBhbmQgbmV3cyBmcm9tIHRoZSB3b3JsZCBvZiBjeWJlcnNwb3J0LiBTdGF5aW5nIHdpdGggdXMgeW91IHdpbGwgYmUgbmV4dCB0byB0aGUgdG91cm5hbWVudHMgb24gQ1MgR08sIERPVEEyLCBMT0wKICovCmNvbnRyYWN0IENyeXB0b0JldE9uIHsKCiAgICBzdHJ1Y3QgR2FtZXIgewogICAgICAgIGFkZHJlc3Mgd2FsbGV0OwogICAgICAgIHVpbnQgYW1vdW50OwogICAgfQoKICAgIHN0cnVjdCBNYXRjaCB7CiAgICAgICAgYm9vbCBiZXRzOwogICAgICAgIHVpbnQgbnVtYmVyOwogICAgICAgIHVpbnQgd2luUG90QTsKICAgICAgICB1aW50IHdpblBvdEI7CiAgICAgICAgdWludCB3aW5Qb3REOwogICAgICAgIEdhbWVyW10gZ2FtZXJzQTsKICAgICAgICBHYW1lcltdIGdhbWVyc0Q7CiAgICAgICAgR2FtZXJbXSBnYW1lcnNCOwogICAgfQoKICAgIHVpbnQxNiBjb25zdGFudCBNQVRDSF9DT1VOVF9MSU1JVCA9IDUxMjsKICAgIHVpbnQ4IGNvbnN0YW50IEhPVVNFX0VER0VfVE9QX0JBUiA9IDEyOwogICAgdWludDggY29uc3RhbnQgSE9VU0VfRURHRV9CT1RUT01fQkFSID0gMTsKCiAgICB1aW50OCBjb25zdGFudCBUWF9OMDEgPSAxOyAvLyAiVFhfTjAxLiBOb3QgZm91bmQgbWF0Y2ggYnkgaWQiOwogICAgdWludDggY29uc3RhbnQgVFhfTjAyID0gMjsgLy8gIlRYX04wMi4gVGhhbmtzLCBicm90aGVyISI7CiAgICB1aW50OCBjb25zdGFudCBUWF9OMDMgPSAzOyAvLyAiVFhfTjAzLiBUaGUgbnVtYmVyIG9mIG1hdGNoZXMgc2hvdWxkIG5vdCBleGNlZWQgdGhlIGxpbWl0IjsKICAgIHVpbnQ4IGNvbnN0YW50IFRYX04wNCA9IDQ7IC8vICJUWF9OMDQuIFRoZSBwZXJjZW50YWdlIG9mIHRoZSBmZWUgc2hvdWxkIG5vdCBleGNlZWQgdGhlIGxpbWl0cyI7CiAgICB1aW50OCBjb25zdGFudCBUWF9OMTYgPSAxNjsgLy8gIlRYX04xNi4gTm9uLXN0YW5kYXJkIHNpdHVhdGlvbjogV2UgZGlkIG5vdCByZWNlaXZlIGZlZXMiCiAgICB1aW50OCBjb25zdGFudCBUWF9OMTcgPSAxNzsgLy8gIlRYX04xNy4gQWJub3JtYWwgc2l0dWF0aW9uOiBGYWlsZWQgdG8gcmV0dXJuIHNvbWUgYmV0cyBiYWNrIgogICAgdWludDggY29uc3RhbnQgVFhfTjE4ID0gMTg7IC8vICJUWF9OMTguIEFibm9ybWFsIHNpdHVhdGlvbjogRmFpbGVkIHRvIHJldHVybiBzb21lIGJldHMgYmFjayIKICAgIHVpbnQ4IGNvbnN0YW50IFRYX04xOSA9IDE5OyAvLyAiVFhfTjE5LiBNYXRjaCB3aXRoIGlkIGFscmVhZHkgZXhpc3RzIjsKCiAgICAvLyBGZWUgaXMgNCBwZXJjZW50IG9mIHdpbiBhbW91bnQKICAgIHVpbnQ4IHByaXZhdGUgaG91c2VFZGdlID0gMzsKICAgIHVpbnQgY29uc3RhbnQgSkFDS1BPVF9GRUUgPSAxOwogICAgdWludCBqYWNrcG90QW1vdW50ID0gMDsKICAgIGFkZHJlc3MgcHJpdmF0ZSBvd25lcjsKICAgIHVpbnQxNiBtYXRjaENvdW50ID0gMDsKICAgIG1hcHBpbmcgKHVpbnQgPT4gTWF0Y2gpIG1hdGNoZXNNYXA7CgogICAgbW9kaWZpZXIgb25seW93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaGFzbWF0Y2godWludCBfbWF0Y2hJZCkgewogICAgICAgIHZhciBtID0gbWF0Y2hlc01hcFtfbWF0Y2hJZF07CiAgICAgICAgaWYgKG0ubnVtYmVyICE9IDApIHsKICAgICAgICAgICAgXzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUeE1lc3NhZ2UoX21hdGNoSWQsIFRYX04wMSwgMCk7CiAgICAgICAgfQogICAgIH0KCiAgICBmdW5jdGlvbiBDcnlwdG9CZXRPbigpIHBheWFibGUgewogICAgICAgIG93bmVyID0gbXNnLnNlbmRlcjsKICAgIH0KCiAgICBldmVudCBUeE1lc3NhZ2UodWludCBfbWF0Y2hJZCwKICAgICAgICAgICAgICAgICAgICB1aW50OCBfY29kZSwKICAgICAgICAgICAgICAgICAgICB1aW50IF92YWx1ZSk7CgogICAgZXZlbnQgTWF0Y2hBZGRlZCh1aW50IF9tYXRjaElkLAogICAgICAgICAgICAgICAgICAgICB1aW50OCBfaG91c2VFZGdlLAogICAgICAgICAgICAgICAgICAgICB1aW50MTYgX21hdGNoQ291bnQpOwoKICAgIGV2ZW50IE1hdGNoR2V0dGVkKHVpbnQgX21hdGNoSWQsCiAgICAgICAgICAgICAgICAgICAgICBib29sIF9iZXRzLAogICAgICAgICAgICAgICAgICAgICAgdWludCBfbnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgdWludCBfd2luUG90QSwKICAgICAgICAgICAgICAgICAgICAgIHVpbnQgX3dpblBvdEIpOwoKICAgIGV2ZW50IE1hdGNoUGF5b2ZmKHVpbnQgX21hdGNoSWQsCiAgICAgICAgICAgICAgICAgICAgICAgdWludCBfd2luUG90LAogICAgICAgICAgICAgICAgICAgICAgIHVpbnQgX2NvbGxlY3RlZEZlZXMsCiAgICAgICAgICAgICAgICAgICAgICAgdWludCBfamFja3BvdEFtb3VudCk7CgogICAgZXZlbnQgTWF0Y2hBYm9ydGVkKHVpbnQgX21hdGNoSWQpOwoKICAgIGV2ZW50IEJldEFjY2VwdGVkKHVpbnQgX21hdGNoSWQsCiAgICAgICAgICAgICAgICAgICAgICB1aW50OCBfYmV0U3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzIF93YWxsZXQsCiAgICAgICAgICAgICAgICAgICAgICB1aW50IF9hbW91bnQsCiAgICAgICAgICAgICAgICAgICAgICB1aW50IF9ibG9ja051bWJlcik7CgoKICAgIGV2ZW50IENhc2hTYXZlZCh1aW50IF9hbW91bnQpOwoKICAgIGV2ZW50IEphY2twb3RQYXlvZmYodWludCBfbWF0Y2hJZCwgdWludCBfYW1vdW50LCBhZGRyZXNzIF93YWxsZXQpOwoKICAgIGZ1bmN0aW9uKCkgcGF5YWJsZSB7CiAgICAgICAgaWYgKG1zZy52YWx1ZSA+IDApIHsKICAgICAgICAgICAgVHhNZXNzYWdlKDAsIFRYX04wMiwgbXNnLnZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0SG91c2VFZGdlKHVpbnQ4IF9ob3VzZUVkZ2UpIG9ubHlvd25lciB7CiAgICAgICAgaWYgKGhvdXNlRWRnZSA8IEhPVVNFX0VER0VfQk9UVE9NX0JBUiB8fCBfaG91c2VFZGdlID4gSE9VU0VfRURHRV9UT1BfQkFSKSB7CiAgICAgICAgICAgIFR4TWVzc2FnZSgwLCBUWF9OMDQsIF9ob3VzZUVkZ2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGhvdXNlRWRnZSA9IF9ob3VzZUVkZ2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0SG91c2VFZGdlKCkgY29uc3RhbnQgcmV0dXJucyh1aW50OCkgewogICAgICAgIHJldHVybiBob3VzZUVkZ2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0T3duZXIoKSBjb25zdGFudCByZXR1cm5zKGFkZHJlc3MpIHsKICAgICAgICByZXR1cm4gb3duZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QmFsYW5jZSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEphY2twb3RBbW91bnQoKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgICAgICByZXR1cm4gamFja3BvdEFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNYXRjaENvdW50KCkgY29uc3RhbnQgcmV0dXJucyh1aW50MTYpIHsKICAgICAgICByZXR1cm4gbWF0Y2hDb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGROZXdNYXRjaCh1aW50IF9tYXRjaElkKSBwcml2YXRlIHJldHVybnMoYm9vbCkgewogICAgICAgIHZhciBtID0gbWF0Y2hlc01hcFtfbWF0Y2hJZF07CiAgICAgICAgaWYgKG0ubnVtYmVyICE9IDApIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChfbWF0Y2hJZCA9PSAwKSB7CiAgICAgICAgICAgIFR4TWVzc2FnZShfbWF0Y2hJZCwgVFhfTjE5LCBtLm51bWJlcik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKG1hdGNoQ291bnQgPj0gTUFUQ0hfQ09VTlRfTElNSVQpIHsKICAgICAgICAgICAgVHhNZXNzYWdlKF9tYXRjaElkLCBUWF9OMDMsIG1hdGNoQ291bnQpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIG1hdGNoZXNNYXBbX21hdGNoSWRdLmJldHMgPSB0cnVlOwogICAgICAgIG1hdGNoZXNNYXBbX21hdGNoSWRdLm51bWJlciA9IGJsb2NrLm51bWJlcjsKICAgICAgICBtYXRjaENvdW50ICs9IDE7CiAgICAgICAgTWF0Y2hBZGRlZChfbWF0Y2hJZCwKICAgICAgICAgICAgICAgICAgIGhvdXNlRWRnZSwKICAgICAgICAgICAgICAgICAgIG1hdGNoQ291bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldE1hdGNoKHVpbnQgX21hdGNoSWQpIGhhc21hdGNoKF9tYXRjaElkKSB7CiAgICAgICAgdmFyIG0gPSBtYXRjaGVzTWFwW19tYXRjaElkXTsKICAgICAgICBNYXRjaEdldHRlZChfbWF0Y2hJZCwKICAgICAgICAgICAgICAgICAgICBtLmJldHMsCiAgICAgICAgICAgICAgICAgICAgbS5udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgbS53aW5Qb3RBLAogICAgICAgICAgICAgICAgICAgIG0ud2luUG90Qik7CiAgICB9CgogICAgZnVuY3Rpb24gYmV0c09mZih1aW50IF9tYXRjaElkKSBvbmx5b3duZXIgaGFzbWF0Y2goX21hdGNoSWQpIHJldHVybnMgKGJvb2wpIHsKICAgICAgICBtYXRjaGVzTWFwW19tYXRjaElkXS5iZXRzID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2FzaEJhY2soR2FtZXJbXSBnYW1lcnMpIHByaXZhdGUgcmV0dXJucyh1aW50KSB7CiAgICAgICAgdWludCBhbW91bnQgPSAwOwogICAgICAgIGZvciAodWludCBpbmRleCA9IDA7IGluZGV4IDwgZ2FtZXJzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBpZiAoIWdhbWVyc1tpbmRleF0ud2FsbGV0LnNlbmQoZ2FtZXJzW2luZGV4XS5hbW91bnQpKSB7CiAgICAgICAgICAgICAgICBhbW91bnQgKz0gZ2FtZXJzW2luZGV4XS5hbW91bnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0KCiAgICBmdW5jdGlvbiBhYm9ydE1hdGNoKHVpbnQgX21hdGNoSWQpIG9ubHlvd25lciBoYXNtYXRjaChfbWF0Y2hJZCkgewogICAgICAgIHZhciBtID0gbWF0Y2hlc01hcFtfbWF0Y2hJZF07IC8vIFRPRE8gd2hldGhlciB0aGUgZGF0YSBpcyBjb3BpZWQgb3IgaXQgaXMgdGhlIHJlZmVyZW5jZSB0byBzdG9yYWdlCiAgICAgICAgY2FzaEJhY2sobS5nYW1lcnNBKTsKICAgICAgICBjYXNoQmFjayhtLmdhbWVyc0IpOwogICAgICAgIGNhc2hCYWNrKG0uZ2FtZXJzRCk7CiAgICAgICAgY2xlYXJNYXRjaChfbWF0Y2hJZCk7CiAgICAgICAgTWF0Y2hBYm9ydGVkKF9tYXRjaElkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlcmFzZU1hdGNoKHVpbnQgX21hdGNoSWQpIG9ubHlvd25lciBoYXNtYXRjaChfbWF0Y2hJZCkgewogICAgICAgIGNsZWFyTWF0Y2goX21hdGNoSWQpOwogICAgICAgIE1hdGNoQWJvcnRlZChfbWF0Y2hJZCk7CiAgICB9CgogICAgZnVuY3Rpb24gcGF5b3V0SmFja3BvdCh1aW50IF9tYXRjaElkLCBHYW1lcltdIGdhbWVycykgb25seW93bmVyIHByaXZhdGUgewogICAgICAgIHVpbnQgdG1wQW1vdW50ID0gMDsKICAgICAgICBhZGRyZXNzIGphY2twb3RXaW5uZXIgPSAwOwogICAgICAgIHVpbnQgdG1wSmFja3BvdEFtb3VudCA9IGphY2twb3RBbW91bnQ7CiAgICAgICAgamFja3BvdEFtb3VudCA9IDA7CiAgICAgICAgZm9yICh1aW50IHBvcyA9IDA7IHBvcyA8IGdhbWVycy5sZW5ndGg7IHBvcyArPSAxKSB7CiAgICAgICAgICAgIGlmIChnYW1lcnNbcG9zXS5hbW91bnQgPiB0bXBBbW91bnQpIHsKICAgICAgICAgICAgICAgIHRtcEFtb3VudCA9IGdhbWVyc1twb3NdLmFtb3VudDsKICAgICAgICAgICAgICAgIGphY2twb3RXaW5uZXIgPSBnYW1lcnNbcG9zXS53YWxsZXQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGphY2twb3RXaW5uZXIgIT0gMCAmJiBqYWNrcG90V2lubmVyLnNlbmQodG1wSmFja3BvdEFtb3VudCkpIHsKICAgICAgICAgICAgSmFja3BvdFBheW9mZihfbWF0Y2hJZCwgdG1wSmFja3BvdEFtb3VudCwgamFja3BvdFdpbm5lcik7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrTWF0Y2hUb0JlQWJvcnRlZCh1aW50IF9tYXRjaElkLCB1aW50OCBfd2lubmVyKSBwcml2YXRlIHJldHVybnMoYm9vbCkgewogICAgICAgIHZhciBtID0gbWF0Y2hlc01hcFtfbWF0Y2hJZF07CiAgICAgICAgaWYgKG0ubnVtYmVyID09IDAgfHwgbS5iZXRzKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoKG0ud2luUG90QSA9PSAwICYmIF93aW5uZXIgPT0gMCkgfHwgKG0ud2luUG90RCA9PSAwICYmIF93aW5uZXIgPT0gMSkgfHwgKG0ud2luUG90QiA9PSAwICYmIF93aW5uZXIgPT0gMikpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICgobS53aW5Qb3RBID09IDAgJiYgbS53aW5Qb3RCID09IDApIHx8IChtLndpblBvdEEgPT0gMCAmJiBtLndpblBvdEQgPT0gMCkgfHwgKG0ud2luUG90QiA9PSAwICYmIG0ud2luUG90RCA9PSAwKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIHBheW91dE1hdGNoKHVpbnQgX21hdGNoSWQsIHVpbnQ4IF93aW5uZXIsIGJvb2wgX2phY2twb3QpIG9ubHlvd25lciB7CiAgICAgICAgLy8gY2FzaCBiYWNrIGlmIG5lZWQgYWJvcnQKICAgICAgICBpZiAoY2hlY2tNYXRjaFRvQmVBYm9ydGVkKF9tYXRjaElkLCBfd2lubmVyKSkgewogICAgICAgICAgICBhYm9ydE1hdGNoKF9tYXRjaElkKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgbSA9IG1hdGNoZXNNYXBbX21hdGNoSWRdOwogICAgICAgIHZhciBnYW1lcnMgPSBtLmdhbWVyc0E7CiAgICAgICAgdWludCB3aW5Qb3QgPSBtLndpblBvdEE7CiAgICAgICAgdWludCBsb3NlUG90XyA9IG0ud2luUG90QiArIG0ud2luUG90RDsKICAgICAgICBpZiAoX3dpbm5lciA9PSAyKSB7CiAgICAgICAgICAgIGdhbWVycyA9IG0uZ2FtZXJzQjsKICAgICAgICAgICAgd2luUG90ID0gbS53aW5Qb3RCOwogICAgICAgICAgICBsb3NlUG90XyA9IG0ud2luUG90QSArIG0ud2luUG90RDsKICAgICAgICB9IGVsc2UgaWYgKF93aW5uZXIgPT0gMSkgewogICAgICAgICAgICBnYW1lcnMgPSBtLmdhbWVyc0Q7CiAgICAgICAgICAgIHdpblBvdCA9IG0ud2luUG90RDsKICAgICAgICAgICAgbG9zZVBvdF8gPSBtLndpblBvdEEgKyBtLndpblBvdEI7CiAgICAgICAgfQogICAgICAgIHVpbnQgZmFsbGJhY2tBbW91bnQgPSAwOwogICAgICAgIHVpbnQgY29sbGVjdGVkRmVlcyA9IChsb3NlUG90XyAqIGhvdXNlRWRnZSkgLyB1aW50KDEwMCk7CiAgICAgICAgdWludCBqYWNrcG90RmVlcyA9IChsb3NlUG90XyAqIEpBQ0tQT1RfRkVFKSAvIHVpbnQoMTAwKTsKICAgICAgICB1aW50IGxvc2VQb3QgPSBsb3NlUG90XyAtIGNvbGxlY3RlZEZlZXMgLSBqYWNrcG90RmVlczsKICAgICAgICBmb3IgKHVpbnQgaW5kZXggPSAwOyBpbmRleCA8IGdhbWVycy5sZW5ndGg7IGluZGV4ICs9IDEpIHsKICAgICAgICAgICAgdWludCB3aW5BbW91bnQgPSBnYW1lcnNbaW5kZXhdLmFtb3VudCArICgoZ2FtZXJzW2luZGV4XS5hbW91bnQgKiBsb3NlUG90KSAvIHdpblBvdCk7CiAgICAgICAgICAgIGlmICghZ2FtZXJzW2luZGV4XS53YWxsZXQuc2VuZCh3aW5BbW91bnQpKSB7CiAgICAgICAgICAgICAgICBmYWxsYmFja0Ftb3VudCArPSB3aW5BbW91bnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgamFja3BvdEFtb3VudCArPSBqYWNrcG90RmVlczsKICAgICAgICBpZiAoX2phY2twb3QpIHsKICAgICAgICAgICAgcGF5b3V0SmFja3BvdChfbWF0Y2hJZCwgZ2FtZXJzKTsKICAgICAgICB9CiAgICAgICAgLy8gcGF5IGhvdXNlY3V0ICYgcmVzZXQgZm9yIG5leHQgYmV0CiAgICAgICAgaWYgKGNvbGxlY3RlZEZlZXMgPiAwKSB7CiAgICAgICAgICAgIGlmICghb3duZXIuc2VuZChjb2xsZWN0ZWRGZWVzKSkgewogICAgICAgICAgICAgICAgVHhNZXNzYWdlKF9tYXRjaElkLCBUWF9OMTYsIGNvbGxlY3RlZEZlZXMpOwogICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSBtYW51YWwgd2F5IG9mIHdpdGhkcmF3aW5nIG1vbmV5IQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmYWxsYmFja0Ftb3VudCA+IDApIHsKICAgICAgICAgICAgaWYgKG93bmVyLnNlbmQoZmFsbGJhY2tBbW91bnQpKSB7CiAgICAgICAgICAgICAgICBUeE1lc3NhZ2UoX21hdGNoSWQsIFRYX04xNywgZmFsbGJhY2tBbW91bnQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgVHhNZXNzYWdlKF9tYXRjaElkLCBUWF9OMTgsIGZhbGxiYWNrQW1vdW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjbGVhck1hdGNoKF9tYXRjaElkKTsKICAgICAgICBNYXRjaFBheW9mZihfbWF0Y2hJZCwKICAgICAgICAgICAgICAgICAgICBsb3NlUG90LAogICAgICAgICAgICAgICAgICAgIGNvbGxlY3RlZEZlZXMsIAogICAgICAgICAgICAgICAgICAgIGphY2twb3RBbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyTWF0Y2godWludCBfbWF0Y2hJZCkgcHJpdmF0ZSBoYXNtYXRjaChfbWF0Y2hJZCkgewogICAgICAgIGRlbGV0ZSBtYXRjaGVzTWFwW19tYXRjaElkXS5nYW1lcnNBOwogICAgICAgIGRlbGV0ZSBtYXRjaGVzTWFwW19tYXRjaElkXS5nYW1lcnNCOwogICAgICAgIGRlbGV0ZSBtYXRjaGVzTWFwW19tYXRjaElkXS5nYW1lcnNEOwogICAgICAgIGRlbGV0ZSBtYXRjaGVzTWFwW19tYXRjaElkXTsKICAgICAgICBtYXRjaENvdW50LS07CiAgICB9CgogICAgZnVuY3Rpb24gYWNjZXB0QmV0KHVpbnQgX21hdGNoSWQsIHVpbnQ4IF9iZXRTdGF0ZSkgcGF5YWJsZSB7CiAgICAgICAgdmFyIG0gPSBtYXRjaGVzTWFwW19tYXRjaElkXTsKICAgICAgICBpZiAobS5udW1iZXIgPT0gMCApIHsKICAgICAgICAgICAgcmVxdWlyZShhZGROZXdNYXRjaChfbWF0Y2hJZCkpOwogICAgICAgICAgICBtID0gbWF0Y2hlc01hcFtfbWF0Y2hJZF07CiAgICAgICAgfQogICAgICAgIHJlcXVpcmUobS5iZXRzKTsKICAgICAgICByZXF1aXJlKG1zZy52YWx1ZSA+PSAxMCBmaW5uZXkpOyAvLyAgJiYgbXNnLnZhbHVlIDw9IDEwMCBldGhlcgogICAgICAgIGlmIChfYmV0U3RhdGUgPT0gMCkgewogICAgICAgICAgICB2YXIgZ2FtZXJBID0gbS5nYW1lcnNBW20uZ2FtZXJzQS5sZW5ndGgrK107CiAgICAgICAgICAgIGdhbWVyQS53YWxsZXQgPSBtc2cuc2VuZGVyOwogICAgICAgICAgICBnYW1lckEuYW1vdW50ID0gbXNnLnZhbHVlOwogICAgICAgICAgICBtLndpblBvdEEgKz0gbXNnLnZhbHVlOwogICAgICAgIH0gZWxzZSBpZiAoX2JldFN0YXRlID09IDIpIHsKICAgICAgICAgICAgdmFyIGdhbWVyQiA9IG0uZ2FtZXJzQlttLmdhbWVyc0IubGVuZ3RoKytdOwogICAgICAgICAgICBnYW1lckIud2FsbGV0ID0gbXNnLnNlbmRlcjsKICAgICAgICAgICAgZ2FtZXJCLmFtb3VudCA9IG1zZy52YWx1ZTsKICAgICAgICAgICAgbS53aW5Qb3RCICs9IG1zZy52YWx1ZTsKICAgICAgICB9IGVsc2UgaWYgKF9iZXRTdGF0ZSA9PSAxKSB7CiAgICAgICAgICAgIHZhciBnYW1lckQgPSBtLmdhbWVyc0RbbS5nYW1lcnNELmxlbmd0aCsrXTsKICAgICAgICAgICAgZ2FtZXJELndhbGxldCA9IG1zZy5zZW5kZXI7CiAgICAgICAgICAgIGdhbWVyRC5hbW91bnQgPSBtc2cudmFsdWU7CiAgICAgICAgICAgIG0ud2luUG90RCArPSBtc2cudmFsdWU7CiAgICAgICAgfQogICAgICAgIEJldEFjY2VwdGVkKF9tYXRjaElkLAogICAgICAgICAgICAgICAgICAgIF9iZXRTdGF0ZSwKICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLAogICAgICAgICAgICAgICAgICAgIG1zZy52YWx1ZSwKICAgICAgICAgICAgICAgICAgICBibG9jay5udW1iZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVDYXNoKGFkZHJlc3MgX3JlY2VpdmVyLCB1aW50IF9hbW91bnQpIG9ubHlvd25lciB7CiAgICAgICAgIHJlcXVpcmUobWF0Y2hDb3VudCA9PSAwKTsKICAgICAgICAgcmVxdWlyZShfYW1vdW50ID4gMCk7CiAgICAgICAgIHJlcXVpcmUodGhpcy5iYWxhbmNlID4gX2Ftb3VudCk7CiAgICAgICAgIC8vIHNlbmQgY2FzaAogICAgICAgICBpZiAoX3JlY2VpdmVyLnNlbmQoX2Ftb3VudCkpIHsKICAgICAgICAgICAgIC8vIGNvbmZpcm0KICAgICAgICAgICAgIENhc2hTYXZlZChfYW1vdW50KTsKICAgICAgICAgfQogICAgIH0KCiAgICBmdW5jdGlvbiBraWxsQ29udHJhY3QgKCkgb25seW93bmVyIHsKICAgICAgICByZXF1aXJlKG1hdGNoQ291bnQgPT0gMCk7CiAgICAgICAgLy8gdHJhbnNmZXIgYW1vdW50IHRvIHdhbGxldCBhZGRyZXNzCiAgICAgICAgc2VsZmRlc3RydWN0KG93bmVyKTsKICAgIH0KfQ=='.
	

]
