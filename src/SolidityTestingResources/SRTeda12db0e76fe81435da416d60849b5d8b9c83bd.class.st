Class {
	#name : #SRTeda12db0e76fe81435da416d60849b5d8b9c83bd,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTeda12db0e76fe81435da416d60849b5d8b9c83bd >> base64 [
	^ 'LyoqCiAgKiBzdGFrZSB1c2VycyBsZXZzCiAgKiBnZXQgZmVlIGZyb20gdHJhZGluZyBjb250cmFjdAogICogZ2V0IGV0aCBmcm9tIHRyYWRpbmcgY29udHJhY3QKICAqIGNhbGN1bGF0ZSBmZWUgdG9rZW5zIHRvIGJlIGdlbmVyYXRlZAogICogZGlzdHJpYnV0ZSBmZWUgdG9rZW5zIGFuZCBsZXYgdG8gdXNlcnMgaW4gY2h1bmtzLgogICogcmUtcHVycG9zZSBpdCBmb3IgbmV4dCB0cmFkaW5nIGR1cmF0aW9uLgogICogd2hhdCBoYXBwZW5zIHRvIGV4dHJhIGZlZSBpZiBub3QgZW5vdWdoIHRyYWRpbmcgaGFwcGVuZWQ/IGRlc3Ryb3kgaXQuCiAgKiBTdGFrZSB3aWxsIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgRkVFLnNvbAogICovCnByYWdtYSBzb2xpZGl0eSBeMC40LjE4OwoKCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KY29udHJhY3QgT3duZWQgewogIGV2ZW50IE93bmVyQWRkaXRpb24oYWRkcmVzcyBpbmRleGVkIG93bmVyKTsKCiAgZXZlbnQgT3duZXJSZW1vdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lcik7CgogIC8vIG93bmVyIGFkZHJlc3MgdG8gZW5hYmxlIGFkbWluIGZ1bmN0aW9ucwogIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzT3duZXI7CgogIGFkZHJlc3NbXSBwdWJsaWMgb3duZXJzOwoKICBhZGRyZXNzIHB1YmxpYyBvcGVyYXRvcjsKCiAgbW9kaWZpZXIgb25seU93bmVyIHsKCiAgICByZXF1aXJlKGlzT3duZXJbbXNnLnNlbmRlcl0pOwogICAgXzsKICB9CgogIG1vZGlmaWVyIG9ubHlPcGVyYXRvciB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3BlcmF0b3IpOwogICAgXzsKICB9CgogIGZ1bmN0aW9uIHNldE9wZXJhdG9yKGFkZHJlc3MgX29wZXJhdG9yKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShfb3BlcmF0b3IgIT0gYWRkcmVzcygwKSk7CiAgICBvcGVyYXRvciA9IF9vcGVyYXRvcjsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZU93bmVyKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUob3duZXJzLmxlbmd0aCA+IDEpOwogICAgaXNPd25lcltfb3duZXJdID0gZmFsc2U7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBvd25lcnMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgIGlmIChvd25lcnNbaV0gPT0gX293bmVyKSB7CiAgICAgICAgb3duZXJzW2ldID0gb3duZXJzW1NhZmVNYXRoLnN1Yihvd25lcnMubGVuZ3RoLCAxKV07CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIG93bmVycy5sZW5ndGggPSBTYWZlTWF0aC5zdWIob3duZXJzLmxlbmd0aCwgMSk7CiAgICBPd25lclJlbW92YWwoX293bmVyKTsKICB9CgogIGZ1bmN0aW9uIGFkZE93bmVyKGFkZHJlc3MgX293bmVyKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVxdWlyZShfb3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBpZihpc093bmVyW19vd25lcl0pIHJldHVybjsKICAgIGlzT3duZXJbX293bmVyXSA9IHRydWU7CiAgICBvd25lcnMucHVzaChfb3duZXIpOwogICAgT3duZXJBZGRpdGlvbihfb3duZXIpOwogIH0KCiAgZnVuY3Rpb24gc2V0T3duZXJzKGFkZHJlc3NbXSBfb3duZXJzKSBpbnRlcm5hbCB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHJlcXVpcmUoX293bmVyc1tpXSAhPSBhZGRyZXNzKDApKTsKICAgICAgaXNPd25lcltfb3duZXJzW2ldXSA9IHRydWU7CiAgICAgIE93bmVyQWRkaXRpb24oX293bmVyc1tpXSk7CiAgICB9CiAgICBvd25lcnMgPSBfb3duZXJzOwogIH0KCiAgZnVuY3Rpb24gZ2V0T3duZXJzKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGFkZHJlc3NbXSkgIHsKICAgIHJldHVybiBvd25lcnM7CiAgfQoKfQoKcHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgoKY29udHJhY3QgVmFsaWRhdGluZyB7CgogIG1vZGlmaWVyIHZhbGlkQWRkcmVzcyhhZGRyZXNzIF9hZGRyZXNzKSB7CiAgICByZXF1aXJlKF9hZGRyZXNzICE9IGFkZHJlc3MoMHgwKSk7CiAgICBfOwogIH0KCiAgbW9kaWZpZXIgbm90WmVybyh1aW50IF9udW1iZXIpIHsKICAgIHJlcXVpcmUoX251bWJlciAhPSAwKTsKICAgIF87CiAgfQoKICBtb2RpZmllciBub3RFbXB0eShzdHJpbmcgX3N0cmluZykgewogICAgcmVxdWlyZShieXRlcyhfc3RyaW5nKS5sZW5ndGggIT0gMCk7CiAgICBfOwogIH0KCn0KCgpjb250cmFjdCBUb2tlbiB7CiAgICAvKiBUaGlzIGlzIGEgc2xpZ2h0IGNoYW5nZSB0byB0aGUgRVJDMjAgYmFzZSBzdGFuZGFyZC4KICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBzdXBwbHkpOwogICAgaXMgcmVwbGFjZWQgd2l0aDoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogICAgVGhpcyBhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSB0b3RhbFN1cHBseS4KICAgIFRoaXMgaXMgbW92ZWQgdG8gdGhlIGJhc2UgY29udHJhY3Qgc2luY2UgcHVibGljIGdldHRlciBmdW5jdGlvbnMgYXJlIG5vdAogICAgY3VycmVudGx5IHJlY29nbmlzZWQgYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIG1hdGNoaW5nIGFic3RyYWN0CiAgICBmdW5jdGlvbiBieSB0aGUgY29tcGlsZXIuCiAgICAqLwogICAgLy8vIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIC8vLyBAcGFyYW0gX293bmVyIFRoZSBhZGRyZXNzIGZyb20gd2hpY2ggdGhlIGJhbGFuY2Ugd2lsbCBiZSByZXRyaWV2ZWQKICAgIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAgIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgbXNnLnNlbmRlcmAKICAgIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIHRyYW5zZmVyIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYF9mcm9tYCBvbiB0aGUgY29uZGl0aW9uIGl0IGlzIGFwcHJvdmVkIGJ5IGBfZnJvbWAKICAgIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogICAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbiB0byBiZSB0cmFuc2ZlcnJlZAogICAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgICAvLy8gQG5vdGljZSBgbXNnLnNlbmRlcmAgYXBwcm92ZXMgYF9zcGVuZGVyYCB0byBzcGVuZCBgX3ZhbHVlYCB0b2tlbnMKICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgYWJsZSB0byB0cmFuc2ZlciB0aGUgdG9rZW5zCiAgICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VucyB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAgIC8vLyBAcmV0dXJuIFdoZXRoZXIgdGhlIGFwcHJvdmFsIHdhcyBzdWNjZXNzZnVsIG9yIG5vdAogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogICAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIGFjY291bnQgb3duaW5nIHRva2VucwogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAgIC8vLyBAcmV0dXJuIEFtb3VudCBvZiByZW1haW5pbmcgdG9rZW5zIGFsbG93ZWQgdG8gc3BlbnQKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKTsKCiAgICBldmVudCBUcmFuc2ZlcihhZGRyZXNzIGluZGV4ZWQgX2Zyb20sIGFkZHJlc3MgaW5kZXhlZCBfdG8sIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9CmNvbnRyYWN0IFN0YW5kYXJkVG9rZW4gaXMgVG9rZW4gewoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vRGVmYXVsdCBhc3N1bWVzIHRvdGFsU3VwcGx5IGNhbid0IGJlIG92ZXIgbWF4ICgyXjI1NiAtIDEpLgogICAgICAgIC8vSWYgeW91ciB0b2tlbiBsZWF2ZXMgb3V0IHRvdGFsU3VwcGx5IGFuZCBjYW4gaXNzdWUgbW9yZSB0b2tlbnMgYXMgdGltZSBnb2VzIG9uLCB5b3UgbmVlZCB0byBjaGVjayBpZiBpdCBkb2Vzbid0IHdyYXAuCiAgICAgICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICAgICAgLy9yZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSk7CiAgICAgICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdIC09IF92YWx1ZTsKICAgICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgICAgICAvL3JlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgYmFsYW5jZXNbX3RvXSArIF92YWx1ZSA+IGJhbGFuY2VzW190b10pOwogICAgICAgIHJlcXVpcmUoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICAgIGJhbGFuY2VzW19mcm9tXSAtPSBfdmFsdWU7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQoKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikpIGFsbG93ZWQ7Cn0KLyoqCiAgKiBAdGl0bGUgRkVFIGlzIGFuIEVSQzIwIHRva2VuIHVzZWQgdG8gcGF5IGZvciB0cmFkaW5nIG9uIHRoZSBleGNoYW5nZS4KICAqIEZvciBkZWVwZXIgcmF0aW9uYWwgcmVhZCBodHRwczovL2xldmVyai5pby93aGl0ZXBhcGVyLnBkZi4KICAqIEZFRSB0b2tlbnMgZG8gbm90IGhhdmUgbGltaXQuIEEgbmV3IHRva2VuIGNhbiBiZSBnZW5lcmF0ZWQgYnkgb3duZXIuCiAgKi8KY29udHJhY3QgRmVlIGlzIE93bmVkLCBWYWxpZGF0aW5nLCBTdGFuZGFyZFRva2VuIHsKCiAgLyogVGhpcyBub3RpZmllcyBjbGllbnRzIGFib3V0IHRoZSBhbW91bnQgYnVybnQgKi8KICBldmVudCBCdXJuKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCB1aW50MjU2IHZhbHVlKTsKCiAgc3RyaW5nIHB1YmxpYyBuYW1lOyAgICAgICAgICAgICAgICAgICAvL2ZhbmN5IG5hbWU6IGVnIFNpbW9uIEJ1Y2tzCiAgdWludDggcHVibGljIGRlY2ltYWxzOyAgICAgICAgICAgICAgICAvL0hvdyBtYW55IGRlY2ltYWxzIHRvIHNob3cuIGllLiBUaGVyZSBjb3VsZCAxMDAwIGJhc2UgdW5pdHMgd2l0aCAzIGRlY2ltYWxzLiBNZWFuaW5nIDAuOTgwIFNCWCA9IDk4MCBiYXNlIHVuaXRzLiBJdCdzIGxpa2UgY29tcGFyaW5nIDEgd2VpIHRvIDEgZXRoZXIuCiAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7ICAgICAgICAgICAgICAgICAvL0FuIGlkZW50aWZpZXI6IGVnIFNCWAogIHVpbnQyNTYgcHVibGljIGZlZUluQ2lyY3VsYXRpb247ICAgICAgLy90b3RhbCBmZWUgaW4gY2lyY3VsYXRpb24KICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAnRjAuMSc7ICAgICAgIC8vaHVtYW4gMC4xIHN0YW5kYXJkLiBKdXN0IGFuIGFyYml0cmFyeSB2ZXJzaW9uaW5nIHNjaGVtZS4KICBhZGRyZXNzIHB1YmxpYyBtaW50ZXI7CgogIG1vZGlmaWVyIG9ubHlNaW50ZXIgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IG1pbnRlcik7CiAgICBfOwogIH0KCiAgLy8vIEBub3RpY2UgQ29uc3RydWN0b3IgdG8gc2V0IHRoZSBvd25lciwgdG9rZW5OYW1lLCBkZWNpbWFscyBhbmQgc3ltYm9sCiAgZnVuY3Rpb24gRmVlKAogIGFkZHJlc3NbXSBfb3duZXJzLAogIHN0cmluZyBfdG9rZW5OYW1lLAogIHVpbnQ4IF9kZWNpbWFsVW5pdHMsCiAgc3RyaW5nIF90b2tlblN5bWJvbAogICkKICBwdWJsaWMKICBub3RFbXB0eShfdG9rZW5OYW1lKQogIG5vdEVtcHR5KF90b2tlblN5bWJvbCkKICB7CiAgICBzZXRPd25lcnMoX293bmVycyk7CiAgICBuYW1lID0gX3Rva2VuTmFtZTsKICAgIGRlY2ltYWxzID0gX2RlY2ltYWxVbml0czsKICAgIHN5bWJvbCA9IF90b2tlblN5bWJvbDsKICB9CgogIC8vLyBAbm90aWNlIFRvIHNldCBhIG5ldyBtaW50ZXIgYWRkcmVzcwogIC8vLyBAcGFyYW0gX21pbnRlciBUaGUgYWRkcmVzcyBvZiB0aGUgbWludGVyCiAgZnVuY3Rpb24gc2V0TWludGVyKGFkZHJlc3MgX21pbnRlcikgZXh0ZXJuYWwgb25seU93bmVyIHZhbGlkQWRkcmVzcyhfbWludGVyKSB7CiAgICBtaW50ZXIgPSBfbWludGVyOwogIH0KCiAgLy8vIEBub3RpY2UgVG8gZWxpbWluYXRlIHRva2VucyBhbmQgYWRqdXN0IHRoZSBwcmljZSBvZiB0aGUgRkVFIHRva2VucwogIC8vLyBAcGFyYW0gX3ZhbHVlIEFtb3VudCBvZiB0b2tlbnMgdG8gZGVsZXRlCiAgZnVuY3Rpb24gYnVyblRva2Vucyh1aW50IF92YWx1ZSkgcHVibGljIG5vdFplcm8oX3ZhbHVlKSB7CiAgICByZXF1aXJlKGJhbGFuY2VzW21zZy5zZW5kZXJdID49IF92YWx1ZSk7CgogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBTYWZlTWF0aC5zdWIoYmFsYW5jZXNbbXNnLnNlbmRlcl0sIF92YWx1ZSk7CiAgICBmZWVJbkNpcmN1bGF0aW9uID0gU2FmZU1hdGguc3ViKGZlZUluQ2lyY3VsYXRpb24sIF92YWx1ZSk7CiAgICBCdXJuKG1zZy5zZW5kZXIsIF92YWx1ZSk7CiAgfQoKICAvLy8gQG5vdGljZSBUbyBzZW5kIHRva2VucyB0byBhbm90aGVyIHVzZXIuIE5ldyBGRUUgdG9rZW5zIGFyZSBnZW5lcmF0ZWQgd2hlbgogIC8vLyBkb2luZyB0aGlzIHByb2Nlc3MgYnkgdGhlIG1pbnRlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSByZWNlaXZlciBvZiB0aGUgdG9rZW5zCiAgLy8vIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvCiAgZnVuY3Rpb24gc2VuZFRva2VucyhhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIHB1YmxpYyBvbmx5TWludGVyIHZhbGlkQWRkcmVzcyhfdG8pIG5vdFplcm8oX3ZhbHVlKSB7CiAgICBiYWxhbmNlc1tfdG9dID0gU2FmZU1hdGguYWRkKGJhbGFuY2VzW190b10sIF92YWx1ZSk7CiAgICBmZWVJbkNpcmN1bGF0aW9uID0gU2FmZU1hdGguYWRkKGZlZUluQ2lyY3VsYXRpb24sIF92YWx1ZSk7CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQp9CgoKY29udHJhY3QgU3Rha2UgaXMgT3duZWQsIFZhbGlkYXRpbmcgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICBldmVudCBTdGFrZUV2ZW50KGFkZHJlc3MgaW5kZXhlZCB1c2VyLCB1aW50IGxldnMsIHVpbnQgc3RhcnRCbG9jaywgdWludCBlbmRCbG9jayk7CiAgZXZlbnQgUmVkZWVtRXZlbnQoYWRkcmVzcyBpbmRleGVkIHVzZXIsIHVpbnQgbGV2cywgdWludCBmZWVFYXJuZWQsIHVpbnQgc3RhcnRCbG9jaywgdWludCBlbmRCbG9jayk7CiAgZXZlbnQgRmVlQ2FsY3VsYXRlZCh1aW50IGZlZUNhbGN1bGF0ZWQsIHVpbnQgZmVlUmVjZWl2ZWQsIHVpbnQgd2VpUmVjZWl2ZWQsIHVpbnQgc3RhcnRCbG9jaywgdWludCBlbmRCbG9jayk7CiAgZXZlbnQgU3Rha2luZ0ludGVydmFsKHVpbnQgc3RhcnRCbG9jaywgdWludCBlbmRCbG9jayk7CgogIC8vIFVzZXIgYWRkcmVzcyB0byAobGV2IHRva2VucykqKGJsb2NrcyBsZWZ0IHRvIGVuZCkKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBsZXZCbG9ja3M7CgogIC8vIFVzZXIgYWRkcmVzcyB0byBsZXYgdG9rZW5zIGF0IHN0YWtlCiAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50KSBwdWJsaWMgc3Rha2VzOwoKICB1aW50IHB1YmxpYyB0b3RhbExldnM7CgogIC8vIFRvdGFsIGxldiBibG9ja3MuIHRoaXMgd2lsbCBiZSBoZWxwIG5vdCB0byBpdGVyYXRlIHRocm91Z2ggZnVsbCBtYXBwaW5nCiAgdWludCBwdWJsaWMgdG90YWxMZXZCbG9ja3M7CgogIC8vIFdlaSBmb3IgZWFjaCBGZWUgdG9rZW4KICB1aW50IHB1YmxpYyB3ZWlQZXJGZWU7CgogIC8vIFRvdGFsIGZlZSB0byBiZSBkaXN0cmlidXRlZAogIHVpbnQgcHVibGljIGZlZUZvclRoZVN0YWtpbmdJbnRlcnZhbDsKCiAgLy8gTGV2IHRva2VuIHJlZmVyZW5jZQogIFRva2VuIHB1YmxpYyBsZXZUb2tlbjsgLy9yZXZpc2l0OiBpcyB0aGVyZSBhIGRpZmZlcmVuY2UgaW4gc3RvcmFnZSB2ZXJzdXMgdXNpbmcgYWRkcmVzcz8KCiAgLy8gRkVFIHRva2VuIHJlZmVyZW5jZQogIEZlZSBwdWJsaWMgZmVlVG9rZW47IC8vcmV2aXNpdDogaXMgdGhlcmUgYSBkaWZmZXJlbmNlIGluIHN0b3JhZ2UgdmVyc3VzIHVzaW5nIGFkZHJlc3M/CgogIHVpbnQgcHVibGljIHN0YXJ0QmxvY2s7CgogIHVpbnQgcHVibGljIGVuZEJsb2NrOwoKICBhZGRyZXNzIHB1YmxpYyB3YWxsZXQ7CgogIGJvb2wgcHVibGljIGZlZUNhbGN1bGF0ZWQgPSBmYWxzZTsKCiAgbW9kaWZpZXIgaXNTdGFraW5nIHsKICAgIHJlcXVpcmUoc3RhcnRCbG9jayA8PSBibG9jay5udW1iZXIgJiYgYmxvY2subnVtYmVyIDwgZW5kQmxvY2spOwogICAgXzsKICB9CgogIG1vZGlmaWVyIGlzRG9uZVN0YWtpbmcgewogICAgcmVxdWlyZShibG9jay5udW1iZXIgPj0gZW5kQmxvY2spOwogICAgXzsKICB9CgogIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogIH0KCiAgLy8vIEBub3RpY2UgQ29uc3RydWN0b3IgdG8gc2V0IGFsbCB0aGUgZGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSBvd25lciwgd2FsbGV0LAogIC8vLyB3ZWlQZXJGZWUsIHRva2VuSUQgYW5kIGVuZEJsb2NrCiAgZnVuY3Rpb24gU3Rha2UoCiAgYWRkcmVzc1tdIF9vd25lcnMsCiAgYWRkcmVzcyBfb3BlcmF0b3IsCiAgYWRkcmVzcyBfd2FsbGV0LAogIHVpbnQgX3dlaVBlckZlZSwKICBhZGRyZXNzIF9sZXZUb2tlbgogICkgcHVibGljCiAgdmFsaWRBZGRyZXNzKF93YWxsZXQpCiAgdmFsaWRBZGRyZXNzKF9vcGVyYXRvcikKICB2YWxpZEFkZHJlc3MoX2xldlRva2VuKQogIG5vdFplcm8oX3dlaVBlckZlZSkKICB7CiAgICBzZXRPd25lcnMoX293bmVycyk7CiAgICBvcGVyYXRvciA9IF9vcGVyYXRvcjsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgICB3ZWlQZXJGZWUgPSBfd2VpUGVyRmVlOwogICAgbGV2VG9rZW4gPSBUb2tlbihfbGV2VG9rZW4pOwogIH0KCiAgZnVuY3Rpb24gdmVyc2lvbigpIGV4dGVybmFsIHB1cmUgcmV0dXJucyAoc3RyaW5nKSB7CiAgICByZXR1cm4gIjEuMC4wIjsKICB9CgogIC8vLyBAbm90aWNlIFRvIHNldCB0aGUgdGhlIGFkZHJlc3Mgb2YgdGhlIExFViB0b2tlbgogIC8vLyBAcGFyYW0gX2xldlRva2VuIFRoZSB0b2tlbiBhZGRyZXNzCiAgZnVuY3Rpb24gc2V0TGV2VG9rZW4oYWRkcmVzcyBfbGV2VG9rZW4pIGV4dGVybmFsIHZhbGlkQWRkcmVzcyhfbGV2VG9rZW4pIG9ubHlPd25lciB7CiAgICBsZXZUb2tlbiA9IFRva2VuKF9sZXZUb2tlbik7CiAgfQoKICAvLy8gQG5vdGljZSBUbyBzZXQgdGhlIEZFRSB0b2tlbiBhZGRyZXNzCiAgLy8vIEBwYXJhbSBfZmVlVG9rZW4gVGhlIGFkZHJlc3Mgb2YgdGhhdCB0b2tlbgogIGZ1bmN0aW9uIHNldEZlZVRva2VuKGFkZHJlc3MgX2ZlZVRva2VuKSBleHRlcm5hbCB2YWxpZEFkZHJlc3MoX2ZlZVRva2VuKSBvbmx5T3duZXIgewogICAgZmVlVG9rZW4gPSBGZWUoX2ZlZVRva2VuKTsKICB9CgogIC8vLyBAbm90aWNlIFRvIHNldCB0aGUgd2FsbGV0IGFkZHJlc3MgYnkgdGhlIG93bmVyIG9ubHkKICAvLy8gQHBhcmFtIF93YWxsZXQgVGhlIHdhbGxldCBhZGRyZXNzCiAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgZXh0ZXJuYWwgdmFsaWRBZGRyZXNzKF93YWxsZXQpIG9ubHlPd25lciB7CiAgICB3YWxsZXQgPSBfd2FsbGV0OwogIH0KCiAgLy8vIEBub3RpY2UgUHVibGljIGZ1bmN0aW9uIHRvIHN0YWtlIHRva2VucyBleGVjdXRhYmxlIGJ5IGFueSB1c2VyLgogIC8vLyBUaGUgdXNlciBoYXMgdG8gYXBwcm92ZSB0aGUgc3Rha2luZyBjb250cmFjdCBvbiB0b2tlbiBiZWZvcmUgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLgogIC8vLyBSZWZlciB0byB0aGUgdGVzdHMgZm9yIG1vcmUgaW5mb3JtYXRpb24KICAvLy8gQHBhcmFtIF9xdWFudGl0eSBIb3cgbWFueSBMRVYgdG9rZW5zIHRvIGxvY2sgZm9yIHN0YWtpbmcKICBmdW5jdGlvbiBzdGFrZVRva2Vucyh1aW50IF9xdWFudGl0eSkgZXh0ZXJuYWwgaXNTdGFraW5nIG5vdFplcm8oX3F1YW50aXR5KSB7CiAgICByZXF1aXJlKGxldlRva2VuLmFsbG93YW5jZShtc2cuc2VuZGVyLCB0aGlzKSA+PSBfcXVhbnRpdHkpOwoKICAgIGxldkJsb2Nrc1ttc2cuc2VuZGVyXSA9IGxldkJsb2Nrc1ttc2cuc2VuZGVyXS5hZGQoX3F1YW50aXR5Lm11bChlbmRCbG9jay5zdWIoYmxvY2subnVtYmVyKSkpOwogICAgc3Rha2VzW21zZy5zZW5kZXJdID0gc3Rha2VzW21zZy5zZW5kZXJdLmFkZChfcXVhbnRpdHkpOwogICAgdG90YWxMZXZCbG9ja3MgPSB0b3RhbExldkJsb2Nrcy5hZGQoX3F1YW50aXR5Lm11bChlbmRCbG9jay5zdWIoYmxvY2subnVtYmVyKSkpOwogICAgdG90YWxMZXZzID0gdG90YWxMZXZzLmFkZChfcXVhbnRpdHkpOwogICAgcmVxdWlyZShsZXZUb2tlbi50cmFuc2ZlckZyb20obXNnLnNlbmRlciwgdGhpcywgX3F1YW50aXR5KSk7CiAgICBTdGFrZUV2ZW50KG1zZy5zZW5kZXIsIF9xdWFudGl0eSwgc3RhcnRCbG9jaywgZW5kQmxvY2spOwogIH0KCiAgZnVuY3Rpb24gcmV2ZXJ0RmVlQ2FsY3VsYXRlZEZsYWcoYm9vbCBfZmxhZykgZXh0ZXJuYWwgb25seU93bmVyIGlzRG9uZVN0YWtpbmcgewogICAgZmVlQ2FsY3VsYXRlZCA9IF9mbGFnOwogIH0KCiAgLy8vIEBub3RpY2UgVG8gdXBkYXRlIHRoZSBwcmljZSBvZiBGRUUgdG9rZW5zIHRvIHRoZSBjdXJyZW50IHZhbHVlLgogIC8vLyBFeGVjdXRhYmxlIGJ5IHRoZSBvcGVyYXRvciBvbmx5CiAgZnVuY3Rpb24gdXBkYXRlRmVlRm9yQ3VycmVudFN0YWtpbmdJbnRlcnZhbCgpIGV4dGVybmFsIG9ubHlPcGVyYXRvciBpc0RvbmVTdGFraW5nIHsKICAgIHJlcXVpcmUoZmVlQ2FsY3VsYXRlZCA9PSBmYWxzZSk7CiAgICB1aW50IGZlZVJlY2VpdmVkID0gZmVlVG9rZW4uYmFsYW5jZU9mKHRoaXMpOwogICAgZmVlRm9yVGhlU3Rha2luZ0ludGVydmFsID0gZmVlRm9yVGhlU3Rha2luZ0ludGVydmFsLmFkZChmZWVSZWNlaXZlZC5hZGQodGhpcy5iYWxhbmNlLmRpdih3ZWlQZXJGZWUpKSk7CiAgICBmZWVDYWxjdWxhdGVkID0gdHJ1ZTsKICAgIEZlZUNhbGN1bGF0ZWQoZmVlRm9yVGhlU3Rha2luZ0ludGVydmFsLCBmZWVSZWNlaXZlZCwgdGhpcy5iYWxhbmNlLCBzdGFydEJsb2NrLCBlbmRCbG9jayk7CiAgICBpZiAoZmVlUmVjZWl2ZWQgPiAwKSBmZWVUb2tlbi5idXJuVG9rZW5zKGZlZVJlY2VpdmVkKTsKICAgIGlmICh0aGlzLmJhbGFuY2UgPiAwKSB3YWxsZXQudHJhbnNmZXIodGhpcy5iYWxhbmNlKTsKICB9CgogIC8vLyBAbm90aWNlIFRvIHVubG9jayBhbmQgcmVjb3ZlciB5b3VyIExFViBhbmQgRkVFIHRva2VucyBhZnRlciBzdGFraW5nIGFuZCBmZWUgdG8gYW55IHVzZXIKICBmdW5jdGlvbiByZWRlZW1MZXZBbmRGZWVCeVN0YWtlcigpIGV4dGVybmFsIHsKICAgIHJlZGVlbUxldkFuZEZlZShtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHJlZGVlbUxldkFuZEZlZVRvU3Rha2VycyhhZGRyZXNzW10gX3N0YWtlcnMpIGV4dGVybmFsIG9ubHlPcGVyYXRvciB7CiAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCBfc3Rha2Vycy5sZW5ndGg7IGkrKykgcmVkZWVtTGV2QW5kRmVlKF9zdGFrZXJzW2ldKTsKICB9CgogIGZ1bmN0aW9uIHJlZGVlbUxldkFuZEZlZShhZGRyZXNzIF9zdGFrZXIpIHByaXZhdGUgdmFsaWRBZGRyZXNzKF9zdGFrZXIpIGlzRG9uZVN0YWtpbmcgewogICAgcmVxdWlyZShmZWVDYWxjdWxhdGVkKTsKICAgIHJlcXVpcmUodG90YWxMZXZCbG9ja3MgPiAwKTsKCiAgICB1aW50IGxldkJsb2NrID0gbGV2QmxvY2tzW19zdGFrZXJdOwogICAgdWludCBzdGFrZSA9IHN0YWtlc1tfc3Rha2VyXTsKICAgIHJlcXVpcmUoc3Rha2UgPiAwKTsKCiAgICB1aW50IGZlZUVhcm5lZCA9IGxldkJsb2NrLm11bChmZWVGb3JUaGVTdGFraW5nSW50ZXJ2YWwpLmRpdih0b3RhbExldkJsb2Nrcyk7CiAgICBkZWxldGUgc3Rha2VzW19zdGFrZXJdOwogICAgZGVsZXRlIGxldkJsb2Nrc1tfc3Rha2VyXTsKICAgIHRvdGFsTGV2cyA9IHRvdGFsTGV2cy5zdWIoc3Rha2UpOwogICAgaWYgKGZlZUVhcm5lZCA+IDApIGZlZVRva2VuLnNlbmRUb2tlbnMoX3N0YWtlciwgZmVlRWFybmVkKTsKICAgIHJlcXVpcmUobGV2VG9rZW4udHJhbnNmZXIoX3N0YWtlciwgc3Rha2UpKTsKICAgIFJlZGVlbUV2ZW50KF9zdGFrZXIsIHN0YWtlLCBmZWVFYXJuZWQsIHN0YXJ0QmxvY2ssIGVuZEJsb2NrKTsKICB9CgogIC8vLyBAbm90aWNlIFRvIHN0YXJ0IGEgbmV3IHRyYWRpbmcgc3Rha2luZy1pbnRlcnZhbCB3aGVyZSB0aGUgcHJpY2Ugb2YgdGhlIEZFRSB3aWxsIGJlIHVwZGF0ZWQKICAvLy8gQHBhcmFtIF9zdGFydCBUaGUgc3RhcnRpbmcgYmxvY2subnVtYmVyIG9mIHRoZSBuZXcgc3Rha2luZy1pbnRlcnZhbAogIC8vLyBAcGFyYW0gX2VuZCBXaGVuIHRoZSBuZXcgc3Rha2luZy1pbnRlcnZhbCBlbmRzIGluIGJsb2NrLm51bWJlcgogIGZ1bmN0aW9uIHN0YXJ0TmV3U3Rha2luZ0ludGVydmFsKHVpbnQgX3N0YXJ0LCB1aW50IF9lbmQpCiAgZXh0ZXJuYWwKICBub3RaZXJvKF9zdGFydCkKICBub3RaZXJvKF9lbmQpCiAgb25seU9wZXJhdG9yCiAgaXNEb25lU3Rha2luZwogIHsKICAgIHJlcXVpcmUodG90YWxMZXZzID09IDApOwoKICAgIHN0YXJ0QmxvY2sgPSBfc3RhcnQ7CiAgICBlbmRCbG9jayA9IF9lbmQ7CgogICAgLy8gcmVzZXQKICAgIHRvdGFsTGV2QmxvY2tzID0gMDsKICAgIGZlZUZvclRoZVN0YWtpbmdJbnRlcnZhbCA9IDA7CiAgICBmZWVDYWxjdWxhdGVkID0gZmFsc2U7CiAgICBTdGFraW5nSW50ZXJ2YWwoX3N0YXJ0LCBfZW5kKTsKICB9Cgp9'.
	

]
