Class {
	#name : #SRTfd95392e1ce28a6debff90feb0a28a1392df738b,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTfd95392e1ce28a6debff90feb0a28a1392df738b >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTE7CgovKioKICogTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcwogKi8KbGlicmFyeSBTYWZlTWF0aCB7CiAgZnVuY3Rpb24gbXVsKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgLy8gYXNzZXJ0KGIgPiAwKTsgLy8gU29saWRpdHkgYXV0b21hdGljYWxseSB0aHJvd3Mgd2hlbiBkaXZpZGluZyBieSAwCiAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcmV0dXJucyAodWludDI1NikgewogICAgYXNzZXJ0KGIgPD0gYSk7CiAgICByZXR1cm4gYSAtIGI7CiAgfQoKICBmdW5jdGlvbiBhZGQodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDY0KSB7CiAgICByZXR1cm4gYSA+PSBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtaW42NCh1aW50NjQgYSwgdWludDY0IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQ2NCkgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKICBmdW5jdGlvbiBtYXgyNTYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGEgPCBiID8gYSA6IGI7CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBPd25hYmxlCiAqIEBkZXYgVGhlIE93bmFibGUgY29udHJhY3QgaGFzIGFuIG93bmVyIGFkZHJlc3MsIGFuZCBwcm92aWRlcyBiYXNpYyBhdXRob3JpemF0aW9uIGNvbnRyb2wgCiAqIGZ1bmN0aW9ucywgdGhpcyBzaW1wbGlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiAidXNlciBwZXJtaXNzaW9ucyIuIAogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICAvKiogCiAgICogQGRldiBUaGUgT3duYWJsZSBjb25zdHJ1Y3RvciBzZXRzIHRoZSBvcmlnaW5hbCBgb3duZXJgIG9mIHRoZSBjb250cmFjdCB0byB0aGUgc2VuZGVyCiAgICogYWNjb3VudC4KICAgKi8KICBmdW5jdGlvbiBPd25hYmxlKCkgewogICAgb3duZXIgPSBtc2cuc2VuZGVyOwogIH0KCgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4gCiAgICovCiAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgaWYgKG1zZy5zZW5kZXIgIT0gb3duZXIpIHsKICAgICAgdGhyb3c7CiAgICB9CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4gCiAgICovCiAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBuZXdPd25lcikgb25seU93bmVyIHsKICAgIGlmIChuZXdPd25lciAhPSBhZGRyZXNzKDApKSB7CiAgICAgIG93bmVyID0gbmV3T3duZXI7CiAgICB9CiAgfQoKfQoKLyoqCiAqIEB0aXRsZSBFUkMyMEJhc2ljCiAqIEBkZXYgU2ltcGxlciB2ZXJzaW9uIG9mIEVSQzIwIGludGVyZmFjZQogKiBAZGV2IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAKICovCmNvbnRyYWN0IEVSQzIwQmFzaWMgewogIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCi8qKgogKiBAdGl0bGUgRVJDMjAgaW50ZXJmYWNlCiAqIEBkZXYgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKi8KY29udHJhY3QgRVJDMjAgaXMgRVJDMjBCYXNpYyB7CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1Nik7CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBvd25lciwgYWRkcmVzcyBpbmRleGVkIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpOwp9Cgpjb250cmFjdCBCYXNpY1Rva2VuIGlzIEVSQzIwQmFzaWMgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogIC8qKgogICAqIEBkZXYgRml4IGZvciB0aGUgRVJDMjAgc2hvcnQgYWRkcmVzcyBhdHRhY2suCiAgICovCiAgbW9kaWZpZXIgb25seVBheWxvYWRTaXplKHVpbnQyNTYgc2l6ZSkgewogICAgIGlmKG1zZy5kYXRhLmxlbmd0aCA8IHNpemUgKyA0KSB7CiAgICAgICB0aHJvdzsKICAgICB9CiAgICAgXzsKICB9CgogIC8qKgogICogQGRldiB0cmFuc2ZlciB0b2tlbiBmb3IgYSBzcGVjaWZpZWQgYWRkcmVzcwogICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seVBheWxvYWRTaXplKDIgKiAzMikgewogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgKiBAZGV2IEdldHMgdGhlIGJhbGFuY2Ugb2YgdGhlIHNwZWNpZmllZCBhZGRyZXNzLgogICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuIAogICogQHJldHVybiBBbiB1aW50MjU2IHJlcHJlc2VudGluZyB0aGUgYW1vdW50IG93bmVkIGJ5IHRoZSBwYXNzZWQgYWRkcmVzcy4KICAqLwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICByZXR1cm4gYmFsYW5jZXNbX293bmVyXTsKICB9Cgp9CgovKioKICogQHRpdGxlIFN0YW5kYXJkIEVSQzIwIHRva2VuCiAqCiAqIEBkZXYgSW1wbGVtYW50YXRpb24gb2YgdGhlIGJhc2ljIHN0YW5kYXJ0IHRva2VuLgogKiBAZGV2IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcmV1bS9FSVBzL2lzc3Vlcy8yMAogKiBAZGV2IEJhc2VkIG9uIGNvZGUgYnkgRmlyc3RCbG9vZDogaHR0cHM6Ly9naXRodWIuY29tL0ZpcnN0Ymxvb2Rpby90b2tlbi9ibG9iL21hc3Rlci9zbWFydF9jb250cmFjdC9GaXJzdEJsb29kVG9rZW4uc29sCiAqLwpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEJhc2ljVG9rZW4sIEVSQzIwIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdXQgb2YgdG9rZW5zIHRvIGJlIHRyYW5zZmVyZWQKICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSBvbmx5UGF5bG9hZFNpemUoMyAqIDMyKSB7CiAgICB2YXIgX2FsbG93YW5jZSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdOwoKICAgIC8vIENoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBzdWIoX2FsbG93YW5jZSwgX3ZhbHVlKSB3aWxsIGFscmVhZHkgdGhyb3cgaWYgdGhpcyBjb25kaXRpb24gaXMgbm90IG1ldAogICAgLy8gaWYgKF92YWx1ZSA+IF9hbGxvd2FuY2UpIHRocm93OwoKICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBfYWxsb3dhbmNlLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgQXByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVhaGxmIG9mIG1zZy5zZW5kZXIuCiAgICogQHBhcmFtIF9zcGVuZGVyIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gYmUgc3BlbnQuCiAgICovCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgewoKICAgIC8vIFRvIGNoYW5nZSB0aGUgYXBwcm92ZSBhbW91bnQgeW91IGZpcnN0IGhhdmUgdG8gcmVkdWNlIHRoZSBhZGRyZXNzZXNgCiAgICAvLyAgYWxsb3dhbmNlIHRvIHplcm8gYnkgY2FsbGluZyBgYXBwcm92ZShfc3BlbmRlciwgMClgIGlmIGl0IGlzIG5vdAogICAgLy8gIGFscmVhZHkgMCB0byBtaXRpZ2F0ZSB0aGUgcmFjZSBjb25kaXRpb24gZGVzY3JpYmVkIGhlcmU6CiAgICAvLyAgaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvaXNzdWVzLzIwI2lzc3VlY29tbWVudC0yNjM1MjQ3MjkKICAgIGlmICgoX3ZhbHVlICE9IDApICYmIChhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSAhPSAwKSkgdGhyb3c7CgogICAgYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0gPSBfdmFsdWU7CiAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICB9CgogIC8qKgogICAqIEBkZXYgRnVuY3Rpb24gdG8gY2hlY2sgdGhlIGFtb3VudCBvZiB0b2tlbnMgdGhhbiBhbiBvd25lciBhbGxvd2VkIHRvIGEgc3BlbmRlci4KICAgKiBAcGFyYW0gX293bmVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggb3ducyB0aGUgZnVuZHMuCiAgICogQHBhcmFtIF9zcGVuZGVyIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggd2lsbCBzcGVuZCB0aGUgZnVuZHMuCiAgICogQHJldHVybiBBIHVpbnQyNTYgc3BlY2lmaW5nIHRoZSBhbW91bnQgb2YgdG9rZW5zIHN0aWxsIGF2YWlibGUgZm9yIHRoZSBzcGVuZGVyLgogICAqLwogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpIHsKICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogIH0KCn0KCmNvbnRyYWN0IENyeXB0b0FCUyBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBzdHJpbmcgcHVibGljIG5hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlkI3nqLEKICBzdHJpbmcgcHVibGljIHN5bWJvbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbiDku6PomZ8KICB1aW50MjU2IHB1YmxpYyBkZWNpbWFscyA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpbWFscwogIGFkZHJlc3MgcHVibGljIGNvbnRyYWN0QWRkcmVzczsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyYWN0IGFkZHJlc3MKCiAgdWludDI1NiBwdWJsaWMgbWluSW52ZXN0SW5XZWk7ICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyA5L2O5oqV6LOH6YeR6aGNIGluIHdlaQogIHVpbnQyNTYgcHVibGljIHRva2VuRXhjaGFuZ2VSYXRlSW5XZWk7ICAgICAgICAgICAgICAgIC8vIDEgVG9rZW4gPSBuIEVUSCBpbiB3ZWkKCiAgdWludDI1NiBwdWJsaWMgc3RhcnRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUNPIOi1t+Wni+eahCBibG9jayBudW1iZXIKICB1aW50MjU2IHB1YmxpYyBlbmRCbG9jazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJQ08g57WQ5p2f55qEIGJsb2NrIG51bWJlcgogIHVpbnQyNTYgcHVibGljIG1heFRva2VuU3VwcGx5OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIElDTyDnmoQgbWF4IHRva2Vu77yM6YCP6YGOIFVTRCB0byBFVEgg5o+b566X5Ye65L6GCiAgCiAgdWludDI1NiBwdWJsaWMgaW5pdGlhbGl6ZWRUaW1lOyAgICAgICAgICAgICAgICAgICAgICAgLy8g6LW35aeL5pmC6ZaT77yM5ZCI57SE6YOo572y55qE5pmC5YCZ5pyD5a+r5YWlCiAgdWludDI1NiBwdWJsaWMgZmluYW5jaW5nUGVyaW9kOyAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4g57GM6LOH5pyf6ZaTCiAgdWludDI1NiBwdWJsaWMgdG9rZW5Mb2Nrb3V0UGVyaW9kOyAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4g6ZaJ6Y6W5pyf77yM6ZaJ6Y6W5pyf5YWn5LiN5b6XIHRyYW5zZmVyCiAgdWludDI1NiBwdWJsaWMgdG9rZW5NYXR1cml0eVBlcmlvZDsgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4g5Yiw5pyf5pelCgogIGJvb2wgcHVibGljIHBhdXNlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaaq+WBnOWQiOe0hOWKn+iDveWft+ihjAogIGJvb2wgcHVibGljIGluaXRpYWxpemVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQiOe0hOWVn+WLlQogIHVpbnQyNTYgcHVibGljIGZpbmFsaXplZEJsb2NrOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQiOe0hOe1guatouaKleizh+eahOWNgOWhiue3qOiZnwogIHVpbnQyNTYgcHVibGljIGZpbmFsaXplZFRpbWU7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWQiOe0hOe1guatouaKleizh+eahOaZgumWkwogIHVpbnQyNTYgcHVibGljIGZpbmFsaXplZENhcGl0YWw7ICAgICAgICAgICAgICAgICAgICAgIC8vIOWQiOe0hOWIsOacn+eahCBFVEgg6YeR6aGNCgogIHN0cnVjdCBFeGNoYW5nZVJhdGUgewogICAgdWludDI1NiBibG9ja051bWJlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJsb2NrIG51bWJlcgogICAgdWludDI1NiBleGNoYW5nZVJhdGVJbldlaTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEgVVNEID0gbiBFVEggaW4gd2VpLCDmtL7nmbzliKnmga/kvb/nlKjnmoTliKnnjofln7rmupYKICB9CgogIEV4Y2hhbmdlUmF0ZVtdIHB1YmxpYyBleGNoYW5nZVJhdGVBcnJheTsgICAgICAgICAgICAgIC8vIGV4Y2hhbmdlIHJhdGUgYXJyYXkKICB1aW50MjU2IHB1YmxpYyBuZXh0RXhjaGFuZ2VSYXRlSW5kZXg7ICAgICAgICAgICAgICAgICAvLyBleGNoYW5nZSByYXRlIGxhc3QgaW5kZXgKICAKICB1aW50MjU2W10gcHVibGljIGludGVyZXN0QXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdCBhcnJheQoKICBzdHJ1Y3QgUGF5ZWUgewogICAgYm9vbCBpc0V4aXN0czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheWVlIOWtmOWcqAogICAgYm9vbCBpc1BheWFibGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBheWVlIOWFgeiosemgmOmMogogICAgdWludDI1NiBpbnRlcmVzdEluV2VpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW+hemgmOWIqeaBr+mHkemhjQogIH0KCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBQYXllZSkgcHVibGljIHBheWVlczsgCiAgYWRkcmVzc1tdIHB1YmxpYyBwYXllZUFycmF5OyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF5ZWUgYXJyYXkKICB1aW50MjU2IHB1YmxpYyBuZXh0UGF5ZWVJbmRleDsgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXllZSBkZXBvc2l0ZSBpbnRlcmVzdCBpbmRleAoKICBzdHJ1Y3QgQXNzZXQgewogICAgc3RyaW5nIGRhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2V0IGRhdGEKICB9CgogIEFzc2V0W10gcHVibGljIGFzc2V0QXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2V0IGFycmF5CgogIC8qKgogICAqIEBkZXYgVGhyb3dzIGlmIGNvbnRyYWN0IHBhdXNlZC4KICAgKi8KICBtb2RpZmllciBub3RQYXVzZWQoKSB7CiAgICByZXF1aXJlKHBhdXNlZCA9PSBmYWxzZSk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY29udHJhY3QgaXMgcGF1c2VkLgogICAqLwogIG1vZGlmaWVyIGlzUGF1c2VkKCkgewogICAgcmVxdWlyZShwYXVzZWQgPT0gdHJ1ZSk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgbm90IGEgcGF5ZWUuIAogICAqLwogIG1vZGlmaWVyIGlzUGF5ZWUoKSB7CiAgICByZXF1aXJlKHBheWVlc1ttc2cuc2VuZGVyXS5pc1BheWFibGUgPT0gdHJ1ZSk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY29udHJhY3Qgbm90IGluaXRpYWxpemVkLiAKICAgKi8KICBtb2RpZmllciBpc0luaXRpYWxpemVkKCkgewogICAgcmVxdWlyZShpbml0aWFsaXplZCA9PSB0cnVlKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiBjb250cmFjdCBub3Qgb3Blbi4gCiAgICovCiAgbW9kaWZpZXIgaXNDb250cmFjdE9wZW4oKSB7CiAgICByZXF1aXJlKAogICAgICBnZXRCbG9ja051bWJlcigpID49IHN0YXJ0QmxvY2sgJiYKICAgICAgZ2V0QmxvY2tOdW1iZXIoKSA8PSBlbmRCbG9jayAmJgogICAgICBmaW5hbGl6ZWRCbG9jayA9PSAwKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IFRocm93cyBpZiB0b2tlbiBpbiBsb2Nrb3V0IHBlcmlvZC4gCiAgICovCiAgbW9kaWZpZXIgbm90TG9ja291dCgpIHsKICAgIHJlcXVpcmUobm93ID4gKGluaXRpYWxpemVkVGltZSArIGZpbmFuY2luZ1BlcmlvZCArIHRva2VuTG9ja291dFBlcmlvZCkpOwogICAgXzsKICB9CiAgCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgbm90IG92ZXIgbWF0dXJpdHkgZGF0ZS4gCiAgICovCiAgbW9kaWZpZXIgb3Zlck1hdHVyaXR5KCkgewogICAgcmVxdWlyZShub3cgPiAoaW5pdGlhbGl6ZWRUaW1lICsgZmluYW5jaW5nUGVyaW9kICsgdG9rZW5NYXR1cml0eVBlcmlvZCkpOwogICAgXzsKICB9CgogIC8qKgogICAqIEBkZXYgQ29udHJhY3QgY29uc3RydWN0b3IuCiAgICovCiAgZnVuY3Rpb24gQ3J5cHRvQUJTKCkgewogICAgcGF1c2VkID0gZmFsc2U7CiAgfQoKICAvKioKICAgKiBAZGV2IEluaXRpYWxpemUgY29udHJhY3Qgd2l0aCBpbml0YWwgcGFyYW1ldGVycy4gCiAgICogQHBhcmFtIF9uYW1lIG5hbWUgb2YgdG9rZW4KICAgKiBAcGFyYW0gX3N5bWJvbCBzeW1ib2wgb2YgdG9rZW4KICAgKiBAcGFyYW0gX2NvbnRyYWN0QWRkcmVzcyBjb250cmFjdCBkZXBsb3llZCBhZGRyZXNzCiAgICogQHBhcmFtIF9zdGFydEJsb2NrIHN0YXJ0IGJsb2NrIG51bWJlcgogICAqIEBwYXJhbSBfZW5kQmxvY2sgZW5kIGJsb2NrIG51bWJlcgogICAqIEBwYXJhbSBfaW5pdGlhbGl6ZWRUaW1lIGNvbnRyYWN0IGluaXRhbGl6ZWQgdGltZQogICAqIEBwYXJhbSBfZmluYW5jaW5nUGVyaW9kIGNvbnRyYWN0IGZpbmFuY2luZyBwZXJpb2QKICAgKiBAcGFyYW0gX3Rva2VuTG9ja291dFBlcmlvZCBjb250cmFjdCB0b2tlbiBsb2Nrb3V0IHBlcmlvZAogICAqIEBwYXJhbSBfdG9rZW5NYXR1cml0eVBlcmlvZCBjb250cmFjdCB0b2tlbiBtYXR1cml0eSBwZXJpb2QKICAgKiBAcGFyYW0gX21pbkludmVzdEluV2VpIG1pbmltdW0gd2VpIGFjY2VwdCBvZiBpbnZlc3QKICAgKiBAcGFyYW0gX21heFRva2VuU3VwcGx5IG1heGltdW0gdG9rZSBzdXBwbHkKICAgKiBAcGFyYW0gX3Rva2VuRXhjaGFuZ2VSYXRlSW5XZWkgdG9rZW4gZXhjaGFuZ2UgcmF0ZSBpbiB3ZWkKICAgKiBAcGFyYW0gX2V4Y2hhbmdlUmF0ZUluV2VpIGV0aCBleGNoYW5nZSByYXRlIGluIHdlaQogICAqLwogIGZ1bmN0aW9uIGluaXRpYWxpemUoCiAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgc3RyaW5nIF9zeW1ib2wsCiAgICAgIHVpbnQyNTYgX2RlY2ltYWxzLAogICAgICBhZGRyZXNzIF9jb250cmFjdEFkZHJlc3MsCiAgICAgIHVpbnQyNTYgX3N0YXJ0QmxvY2ssCiAgICAgIHVpbnQyNTYgX2VuZEJsb2NrLAogICAgICB1aW50MjU2IF9pbml0aWFsaXplZFRpbWUsCiAgICAgIHVpbnQyNTYgX2ZpbmFuY2luZ1BlcmlvZCwKICAgICAgdWludDI1NiBfdG9rZW5Mb2Nrb3V0UGVyaW9kLAogICAgICB1aW50MjU2IF90b2tlbk1hdHVyaXR5UGVyaW9kLAogICAgICB1aW50MjU2IF9taW5JbnZlc3RJbldlaSwKICAgICAgdWludDI1NiBfbWF4VG9rZW5TdXBwbHksCiAgICAgIHVpbnQyNTYgX3Rva2VuRXhjaGFuZ2VSYXRlSW5XZWksCiAgICAgIHVpbnQyNTYgX2V4Y2hhbmdlUmF0ZUluV2VpKSBvbmx5T3duZXIgewogICAgcmVxdWlyZShieXRlcyhuYW1lKS5sZW5ndGggPT0gMCk7CiAgICByZXF1aXJlKGJ5dGVzKHN5bWJvbCkubGVuZ3RoID09IDApOwogICAgcmVxdWlyZShkZWNpbWFscyA9PSAwKTsKICAgIHJlcXVpcmUoY29udHJhY3RBZGRyZXNzID09IDB4MCk7CiAgICByZXF1aXJlKHRvdGFsU3VwcGx5ID09IDApOwogICAgcmVxdWlyZShkZWNpbWFscyA9PSAwKTsKICAgIHJlcXVpcmUoX3N0YXJ0QmxvY2sgPj0gZ2V0QmxvY2tOdW1iZXIoKSk7CiAgICByZXF1aXJlKF9zdGFydEJsb2NrIDwgX2VuZEJsb2NrKTsKICAgIHJlcXVpcmUoZmluYW5jaW5nUGVyaW9kID09IDApOwogICAgcmVxdWlyZSh0b2tlbkxvY2tvdXRQZXJpb2QgPT0gMCk7CiAgICByZXF1aXJlKHRva2VuTWF0dXJpdHlQZXJpb2QgPT0gMCk7CiAgICByZXF1aXJlKGluaXRpYWxpemVkVGltZSA9PSAwKTsKICAgIHJlcXVpcmUoX21heFRva2VuU3VwcGx5ID49IHRvdGFsU3VwcGx5KTsKICAgIG5hbWUgPSBfbmFtZTsKICAgIHN5bWJvbCA9IF9zeW1ib2w7CiAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgIGNvbnRyYWN0QWRkcmVzcyA9IF9jb250cmFjdEFkZHJlc3M7CiAgICBzdGFydEJsb2NrID0gX3N0YXJ0QmxvY2s7CiAgICBlbmRCbG9jayA9IF9lbmRCbG9jazsKICAgIGluaXRpYWxpemVkVGltZSA9IF9pbml0aWFsaXplZFRpbWU7CiAgICBmaW5hbmNpbmdQZXJpb2QgPSBfZmluYW5jaW5nUGVyaW9kOwogICAgdG9rZW5Mb2Nrb3V0UGVyaW9kID0gX3Rva2VuTG9ja291dFBlcmlvZDsKICAgIHRva2VuTWF0dXJpdHlQZXJpb2QgPSBfdG9rZW5NYXR1cml0eVBlcmlvZDsKICAgIG1pbkludmVzdEluV2VpID0gX21pbkludmVzdEluV2VpOwogICAgbWF4VG9rZW5TdXBwbHkgPSBfbWF4VG9rZW5TdXBwbHk7CiAgICB0b2tlbkV4Y2hhbmdlUmF0ZUluV2VpID0gX3Rva2VuRXhjaGFuZ2VSYXRlSW5XZWk7CiAgICBvd25lclNldEV4Y2hhbmdlUmF0ZUluV2VpKF9leGNoYW5nZVJhdGVJbldlaSk7CiAgICBpbml0aWFsaXplZCA9IHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZpbmFsaXplIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gZmluYWxpemUoKSBwdWJsaWMgaXNJbml0aWFsaXplZCB7CiAgICByZXF1aXJlKGdldEJsb2NrTnVtYmVyKCkgPj0gc3RhcnRCbG9jayk7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIgfHwgZ2V0QmxvY2tOdW1iZXIoKSA+IGVuZEJsb2NrKTsKCiAgICBmaW5hbGl6ZWRCbG9jayA9IGdldEJsb2NrTnVtYmVyKCk7CiAgICBmaW5hbGl6ZWRUaW1lID0gbm93OwoKICAgIEZpbmFsaXplZCgpOwogIH0KCiAgLyoqCiAgICogQGRldiBmYWxsYmFjayBmdW5jdGlvbiBhY2NlcHQgZXRoZXIKICAgKi8KICBmdW5jdGlvbiAoKSBwYXlhYmxlIG5vdFBhdXNlZCB7CiAgICBwcm94eVBheW1lbnQobXNnLnNlbmRlcik7CiAgfQoKICAvKioKICAgKiBAZGV2IHBheW1lbnQgZnVuY3Rpb24sIHRyYW5zZmVyIGV0aCB0byB0b2tlbgogICAqIEBwYXJhbSBfcGF5ZWUgVGhlIHBheWVlIGFkZHJlc3MKICAgKi8KICBmdW5jdGlvbiBwcm94eVBheW1lbnQoYWRkcmVzcyBfcGF5ZWUpIHB1YmxpYyBwYXlhYmxlIG5vdFBhdXNlZCBpc0luaXRpYWxpemVkIGlzQ29udHJhY3RPcGVuIHJldHVybnMgKGJvb2wpIHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID4gMCk7CgogICAgdWludDI1NiBhbW91bnQgPSBtc2cudmFsdWU7CiAgICByZXF1aXJlKGFtb3VudCA+PSBtaW5JbnZlc3RJbldlaSk7IAoKICAgIHVpbnQyNTYgcmVmdW5kID0gYW1vdW50ICUgdG9rZW5FeGNoYW5nZVJhdGVJbldlaTsKICAgIHVpbnQyNTYgdG9rZW5zID0gKGFtb3VudCAtIHJlZnVuZCkgLyB0b2tlbkV4Y2hhbmdlUmF0ZUluV2VpOwogICAgcmVxdWlyZSh0b3RhbFN1cHBseS5hZGQodG9rZW5zKSA8PSBtYXhUb2tlblN1cHBseSk7CiAgICB0b3RhbFN1cHBseSA9IHRvdGFsU3VwcGx5LmFkZCh0b2tlbnMpOwogICAgYmFsYW5jZXNbX3BheWVlXSA9IGJhbGFuY2VzW19wYXllZV0uYWRkKHRva2Vucyk7CgogICAgaWYgKHBheWVlc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyAhPSB0cnVlKSB7CiAgICAgIHBheWVlc1ttc2cuc2VuZGVyXS5pc0V4aXN0cyA9IHRydWU7CiAgICAgIHBheWVlc1ttc2cuc2VuZGVyXS5pc1BheWFibGUgPSB0cnVlOwogICAgICBwYXllZUFycmF5LnB1c2gobXNnLnNlbmRlcik7CiAgICB9CgogICAgcmVxdWlyZShvd25lci5zZW5kKGFtb3VudCAtIHJlZnVuZCkpOwogICAgaWYgKHJlZnVuZCA+IDApIHsKICAgICAgcmVxdWlyZShtc2cuc2VuZGVyLnNlbmQocmVmdW5kKSk7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4KICAgKiBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIHRvLgogICAqIEBwYXJhbSBfdmFsdWUgVGhlIGFtb3VudCB0byBiZSB0cmFuc2ZlcnJlZC4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgyICogMzIpIG5vdExvY2tvdXQgbm90UGF1c2VkIGlzSW5pdGlhbGl6ZWQgewogICAgcmVxdWlyZShfdG8gIT0gY29udHJhY3RBZGRyZXNzKTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gYmFsYW5jZXNbbXNnLnNlbmRlcl0uc3ViKF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGlmIChwYXllZXNbX3RvXS5pc0V4aXN0cyAhPSB0cnVlKSB7CiAgICAgIHBheWVlc1tfdG9dLmlzRXhpc3RzID0gdHJ1ZTsKICAgICAgcGF5ZWVzW190b10uaXNQYXlhYmxlID0gdHJ1ZTsKICAgICAgcGF5ZWVBcnJheS5wdXNoKF90byk7CiAgICB9CiAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAZGV2IFRyYW5zZmVyIHRva2VucyBmcm9tIG9uZSBhZGRyZXNzIHRvIGFub3RoZXIKICAgKiBAcGFyYW0gX2Zyb20gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byBzZW5kIHRva2VucyBmcm9tCiAgICogQHBhcmFtIF90byBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIHRyYW5zZmVyIHRvCiAgICogQHBhcmFtIF92YWx1ZSB1aW50IHRoZSBhbW91dCBvZiB0b2tlbnMgdG8gYmUgdHJhbnNmZXJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludCBfdmFsdWUpIG9ubHlQYXlsb2FkU2l6ZSgzICogMzIpIG5vdExvY2tvdXQgbm90UGF1c2VkIGlzSW5pdGlhbGl6ZWQgewogICAgcmVxdWlyZShfdG8gIT0gY29udHJhY3RBZGRyZXNzKTsKICAgIHJlcXVpcmUoX2Zyb20gIT0gY29udHJhY3RBZGRyZXNzKTsKICAgIHZhciBfYWxsb3dhbmNlID0gYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl07CgogICAgLy8gQ2hlY2sgaXMgbm90IG5lZWRlZCBiZWNhdXNlIHN1YihfYWxsb3dhbmNlLCBfdmFsdWUpIHdpbGwgYWxyZWFkeSB0aHJvdyBpZiB0aGlzIGNvbmRpdGlvbiBpcyBub3QgbWV0CiAgICAvLyBpZiAoX3ZhbHVlID4gX2FsbG93YW5jZSkgdGhyb3c7CiAgICByZXF1aXJlKF9hbGxvd2FuY2UgPj0gX3ZhbHVlKTsKCiAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgIGJhbGFuY2VzW19mcm9tXSA9IGJhbGFuY2VzW19mcm9tXS5zdWIoX3ZhbHVlKTsKICAgIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID0gX2FsbG93YW5jZS5zdWIoX3ZhbHVlKTsKICAgIGlmIChwYXllZXNbX3RvXS5pc0V4aXN0cyAhPSB0cnVlKSB7CiAgICAgIHBheWVlc1tfdG9dLmlzRXhpc3RzID0gdHJ1ZTsKICAgICAgcGF5ZWVzW190b10uaXNQYXlhYmxlID0gdHJ1ZTsKICAgICAgcGF5ZWVBcnJheS5wdXNoKF90byk7CiAgICB9CiAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBhZGQgaW50ZXJlc3QgdG8gZWFjaCBwYXllZXMKICAgKi8KICBmdW5jdGlvbiBvd25lckRlcG9zaXRJbnRlcmVzdCgpIG9ubHlPd25lciBpc1BhdXNlZCBpc0luaXRpYWxpemVkIHsKICAgIHVpbnQyNTYgaSA9IG5leHRQYXllZUluZGV4OwogICAgdWludDI1NiBwYXllZXNMZW5ndGggPSBwYXllZUFycmF5Lmxlbmd0aDsKICAgIHdoaWxlIChpIDwgcGF5ZWVzTGVuZ3RoICYmIG1zZy5nYXMgPiAyMDAwMDAwKSB7CiAgICAgIGFkZHJlc3MgX3BheWVlID0gcGF5ZWVBcnJheVtpXTsKICAgICAgdWludDI1NiBfYmFsYW5jZSA9IGJhbGFuY2VzW19wYXllZV07CiAgICAgIGlmIChwYXllZXNbX3BheWVlXS5pc1BheWFibGUgPT0gdHJ1ZSAmJiBfYmFsYW5jZSA+IDApIHsKICAgICAgICB1aW50MjU2IF9pbnRlcmVzdEluV2VpID0gKF9iYWxhbmNlICogaW50ZXJlc3RBcnJheVtnZXRJbnRlcmVzdENvdW50KCkgLSAxXSkgLyB0b3RhbFN1cHBseTsKICAgICAgICBwYXllZXNbX3BheWVlXS5pbnRlcmVzdEluV2VpICs9IF9pbnRlcmVzdEluV2VpOwogICAgICAgIERlcG9zaXRJbnRlcmVzdChnZXRJbnRlcmVzdENvdW50KCksIF9wYXllZSwgX2JhbGFuY2UsIF9pbnRlcmVzdEluV2VpKTsKICAgICAgfQogICAgICBpKys7CiAgICB9CiAgICBuZXh0UGF5ZWVJbmRleCA9IGk7CiAgfQoKICAvKioKICAgKiBAZGV2IHJldHVybiBpbnRlcmVzdCBieSBhZGRyZXNzLCB1bml0IGB3ZWlgCiAgICogQHBhcmFtIF9hZGRyZXNzIFRoZSBwYXllZSBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gaW50ZXJlc3RPZihhZGRyZXNzIF9hZGRyZXNzKSBpc0luaXRpYWxpemVkIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVzdWx0KSAgewogICAgcmVxdWlyZShwYXllZXNbX2FkZHJlc3NdLmlzRXhpc3RzID09IHRydWUpOwogICAgcmV0dXJuIHBheWVlc1tfYWRkcmVzc10uaW50ZXJlc3RJbldlaTsKICB9CgogIC8qKgogICAqIEBkZXYgd2l0aGRyYXcgaW50ZXJlc3QgYnkgcGF5ZWUKICAgKiBAcGFyYW0gX2ludGVyZXN0SW5XZWkgV2l0aGRyYXcgaW50ZXJlc3QgYW1vdW50IGluIHdlaQogICAqLwogIGZ1bmN0aW9uIHBheWVlV2l0aGRyYXdJbnRlcmVzdCh1aW50MjU2IF9pbnRlcmVzdEluV2VpKSBwYXlhYmxlIGlzUGF5ZWUgaXNJbml0aWFsaXplZCBub3RMb2Nrb3V0IHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IDApOwogICAgdWludDI1NiBpbnRlcmVzdEluV2VpID0gX2ludGVyZXN0SW5XZWk7CiAgICByZXF1aXJlKHBheWVlc1ttc2cuc2VuZGVyXS5pc1BheWFibGUgPT0gdHJ1ZSAmJiBfaW50ZXJlc3RJbldlaSA8PSBwYXllZXNbbXNnLnNlbmRlcl0uaW50ZXJlc3RJbldlaSk7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIuc2VuZChpbnRlcmVzdEluV2VpKSk7CiAgICBwYXllZXNbbXNnLnNlbmRlcl0uaW50ZXJlc3RJbldlaSAtPSBpbnRlcmVzdEluV2VpOwogICAgUGF5ZWVXaXRoZHJhd0ludGVyZXN0KG1zZy5zZW5kZXIsIGludGVyZXN0SW5XZWksIHBheWVlc1ttc2cuc2VuZGVyXS5pbnRlcmVzdEluV2VpKTsKICB9CgogIC8qKgogICAqIEBkZXYgd2l0aGRyYXcgY2FwaXRhbCBieSBwYXllZQogICAqLwogIGZ1bmN0aW9uIHBheWVlV2l0aGRyYXdDYXBpdGFsKCkgcGF5YWJsZSBpc1BheWVlIGlzUGF1c2VkIGlzSW5pdGlhbGl6ZWQgb3Zlck1hdHVyaXR5IHsKICAgIHJlcXVpcmUobXNnLnZhbHVlID09IDApOwogICAgcmVxdWlyZShiYWxhbmNlc1ttc2cuc2VuZGVyXSA+IDAgJiYgdG90YWxTdXBwbHkgPiAwKTsKICAgIHVpbnQyNTYgY2FwaXRhbCA9IChiYWxhbmNlc1ttc2cuc2VuZGVyXSAqIGZpbmFsaXplZENhcGl0YWwpIC8gdG90YWxTdXBwbHk7CiAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IDA7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIuc2VuZChjYXBpdGFsKSk7CiAgICBQYXllZVdpdGhkcmF3Q2FwaXRhbChtc2cuc2VuZGVyLCBjYXBpdGFsKTsKICB9CgogIC8qKgogICAqIEBkZXYgcGF1c2UgY29udHJhY3QKICAgKi8KICBmdW5jdGlvbiBvd25lclBhdXNlQ29udHJhY3QoKSBvbmx5T3duZXIgewogICAgcGF1c2VkID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgcmVzdW1lIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gb3duZXJSZXN1bWVDb250cmFjdCgpIG9ubHlPd25lciB7CiAgICBwYXVzZWQgPSBmYWxzZTsKICB9CgogIC8qKgogICAqIEBkZXYgc2V0IGV4Y2hhbmdlIHJhdGUgaW4gd2VpLCAxIFRva2VuID0gbiBFVEggaW4gd2VpCiAgICogQHBhcmFtIF9leGNoYW5nZVJhdGVJbldlaSBjaGFuZ2UgcmF0ZSBvZiBldGhlcgogICAqLwogIGZ1bmN0aW9uIG93bmVyU2V0RXhjaGFuZ2VSYXRlSW5XZWkodWludDI1NiBfZXhjaGFuZ2VSYXRlSW5XZWkpIG9ubHlPd25lciB7CiAgICByZXF1aXJlKF9leGNoYW5nZVJhdGVJbldlaSA+IDApOwogICAgdmFyIF9leGNoYW5nZVJhdGUgPSBFeGNoYW5nZVJhdGUoIGdldEJsb2NrTnVtYmVyKCksIF9leGNoYW5nZVJhdGVJbldlaSk7CiAgICBleGNoYW5nZVJhdGVBcnJheS5wdXNoKF9leGNoYW5nZVJhdGUpOwogICAgbmV4dEV4Y2hhbmdlUmF0ZUluZGV4ID0gZXhjaGFuZ2VSYXRlQXJyYXkubGVuZ3RoOwogIH0KCiAgLyoqCiAgICogQGRldiBkaXNhYmxlIHNpbmdsZSBwYXllZSBpbiBlbWVyZ2VuY3kKICAgKiBAcGFyYW0gX2FkZHJlc3MgRGlzYWJsZSBwYXllZSBhZGRyZXNzCiAgICovCiAgZnVuY3Rpb24gb3duZXJEaXNhYmxlUGF5ZWUoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHsKICAgIHJlcXVpcmUoX2FkZHJlc3MgIT0gb3duZXIpOwogICAgcGF5ZWVzW19hZGRyZXNzXS5pc1BheWFibGUgPSBmYWxzZTsKICB9CgogIC8qKgogICAqIEBkZXYgZW5hYmxlIHNpbmdsZSBwYXllZQogICAqIEBwYXJhbSBfYWRkcmVzcyBFbmFibGUgcGF5ZWUgYWRkcmVzcwogICAqLwogIGZ1bmN0aW9uIG93bmVyRW5hYmxlUGF5ZWUoYWRkcmVzcyBfYWRkcmVzcykgb25seU93bmVyIHsKICAgIHBheWVlc1tfYWRkcmVzc10uaXNQYXlhYmxlID0gdHJ1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgZ2V0IHBheWVlIGNvdW50CiAgICovCiAgZnVuY3Rpb24gZ2V0UGF5ZWVDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBwYXllZUFycmF5Lmxlbmd0aDsKICB9CgogIC8qKgogICAqIEBkZXYgZ2V0IGJsb2NrIG51bWJlcgogICAqLwogIGZ1bmN0aW9uIGdldEJsb2NrTnVtYmVyKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgcmV0dXJuIGJsb2NrLm51bWJlcjsKICB9CgogIC8qKgogICAqIEBkZXYgYWRkIGFzc2V0IGRhdGEsIGF1ZGl0IGluZm9ybWF0aW9uCiAgICogQHBhcmFtIF9kYXRhIGFzc2V0IGRhdGEKICAgKi8KICBmdW5jdGlvbiBvd25lckFkZEFzc2V0KHN0cmluZyBfZGF0YSkgb25seU93bmVyIHsKICAgIHZhciBfYXNzZXQgPSBBc3NldChfZGF0YSk7CiAgICBhc3NldEFycmF5LnB1c2goX2Fzc2V0KTsKICB9CgogIC8qKgogICAqIEBkZXYgZ2V0IGFzc2V0IGNvdW50CiAgICovCiAgZnVuY3Rpb24gZ2V0QXNzZXRDb3VudCgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVzdWx0KSB7CiAgICByZXR1cm4gYXNzZXRBcnJheS5sZW5ndGg7CiAgfQoKICAvKioKICAgKiBAZGV2IHB1dCBhbGwgY2FwaXRhbCBpbiB0aGlzIGNvbnRyYWN0CiAgICovCiAgZnVuY3Rpb24gb3duZXJQdXRDYXBpdGFsKCkgcGF5YWJsZSBpc0luaXRpYWxpemVkIGlzUGF1c2VkIG9ubHlPd25lciB7CiAgICByZXF1aXJlKG1zZy52YWx1ZSA+IDApOwogICAgZmluYWxpemVkQ2FwaXRhbCA9IG1zZy52YWx1ZTsKICB9CgogIC8qKgogICAqIEBkZXYgcHV0IGludGVyZXN0IGluIHRoaXMgY29udHJhY3QKICAgKiBAcGFyYW0gX3Rlcm1zIE51bWJlciBvZiBpbnRlcmVzdAogICAqLwogIGZ1bmN0aW9uIG93bmVyUHV0SW50ZXJlc3QodWludDI1NiBfdGVybXMpIHBheWFibGUgaXNJbml0aWFsaXplZCBpc1BhdXNlZCBvbmx5T3duZXIgewogICAgcmVxdWlyZShfdGVybXMgPT0gKGdldEludGVyZXN0Q291bnQoKSArIDEpKTsKICAgIGludGVyZXN0QXJyYXkucHVzaChtc2cudmFsdWUpOwogIH0KCiAgLyoqCiAgICogQGRldiBnZXQgaW50ZXJlc3QgY291bnQKICAgKi8KICBmdW5jdGlvbiBnZXRJbnRlcmVzdENvdW50KCkgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiByZXN1bHQpIHsKICAgIHJldHVybiBpbnRlcmVzdEFycmF5Lmxlbmd0aDsKICB9CgogIC8qKgogICAqIEBkZXYgd2l0aGRyYXcgYmFsYW5jZSBmcm9tIGNvbnRyYWN0IGlmIGVtZXJnZW5jeQogICAqLwogIGZ1bmN0aW9uIG93bmVyV2l0aGRyYXcoKSBwYXlhYmxlIGlzSW5pdGlhbGl6ZWQgb25seU93bmVyIHsKICAgIHJlcXVpcmUob3duZXIuc2VuZCh0aGlzLmJhbGFuY2UpKTsKICB9CgogIGV2ZW50IFBheWVlV2l0aGRyYXdDYXBpdGFsKGFkZHJlc3MgX3BheWVlLCB1aW50MjU2IF9jYXBpdGFsKTsKICBldmVudCBQYXllZVdpdGhkcmF3SW50ZXJlc3QoYWRkcmVzcyBfcGF5ZWUsIHVpbnQyNTYgX2ludGVyZXN0LCB1aW50MjU2IF9yZW1haW5JbnRlcmVzdCk7CiAgZXZlbnQgRGVwb3NpdEludGVyZXN0KHVpbnQyNTYgX3Rlcm1zLCBhZGRyZXNzIF9wYXllZSwgdWludDI1NiBfYmFsYW5jZSwgdWludDI1NiBfaW50ZXJlc3QpOwogIGV2ZW50IEZpbmFsaXplZCgpOwp9'.
	

]
