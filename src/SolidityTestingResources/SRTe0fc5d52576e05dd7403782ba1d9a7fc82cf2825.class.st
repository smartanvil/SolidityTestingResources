Class {
	#name : #SRTe0fc5d52576e05dd7403782ba1d9a7fc82cf2825,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTe0fc5d52576e05dd7403782ba1d9a7fc82cf2825 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7Cgpjb250cmFjdCBPd25hYmxlIHsKCiAgICAvL1ZhcmlhYmxlcwogICAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgogICAgYWRkcmVzcyBwdWJsaWMgbmV3T3duZXI7CgogICAgLy8gICAgTW9kaWZpZXJzCiAgICAvKioKICAgICAqIEBkZXYgVGhyb3dzIGlmIGNhbGxlZCBieSBhbnkgYWNjb3VudCBvdGhlciB0aGFuIHRoZSBvd25lci4KICAgICAqLwogICAgbW9kaWZpZXIgb25seU93bmVyKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICAgICAgXzsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAgICogYWNjb3VudC4KICAgICAqLwogICAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICAgICAgb3duZXIgPSBtc2cuc2VuZGVyOwogICAgfQoKICAgIC8qKgogICAgICogQGRldiBBbGxvd3MgdGhlIGN1cnJlbnQgb3duZXIgdG8gdHJhbnNmZXIgY29udHJvbCBvZiB0aGUgY29udHJhY3QgdG8gYSBuZXdPd25lci4KICAgICAqIEBwYXJhbSBfbmV3T3duZXIgVGhlIGFkZHJlc3MgdG8gdHJhbnNmZXIgb3duZXJzaGlwIHRvLgogICAgICovCgogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAoYWRkcmVzcyBfbmV3T3duZXIpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoX25ld093bmVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG5ld093bmVyID0gX25ld093bmVyOwogICAgfQoKICAgIGZ1bmN0aW9uIGFjY2VwdE93bmVyc2hpcCgpIHB1YmxpYyB7CiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT0gbmV3T3duZXIpIHsKICAgICAgICAgICAgb3duZXIgPSBuZXdPd25lcjsKICAgICAgICB9CiAgICB9Cn0KCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYSA9PSAwIHx8IGMgLyBhID09IGIpOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgdWludDI1NiBjID0gYSAvIGI7CiAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBzdWIodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgIGFzc2VydChjID49IGEpOwogICAgcmV0dXJuIGM7CiAgfQp9Cgpjb250cmFjdCBFUkMyMEJhc2ljIHsKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB3aG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiB2YWx1ZSk7Cn0KCmNvbnRyYWN0IEVSQzIwIGlzIEVSQzIwQmFzaWMgewogIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IHZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCk7CiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKTsKICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKfQoKCi8qKgogKiBAdGl0bGUgQmFzaWMgdG9rZW4KICogQGRldiBCYXNpYyB2ZXJzaW9uIG9mIFN0YW5kYXJkVG9rZW4sIHdpdGggbm8gYWxsb3dhbmNlcy4KICovCmNvbnRyYWN0IEJhc2ljVG9rZW4gaXMgRVJDMjBCYXNpYyB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CgogICAgLyoqCiAgICAqIEBkZXYgdHJhbnNmZXIgdG9rZW4gZm9yIGEgc3BlY2lmaWVkIGFkZHJlc3MKICAgICogQHBhcmFtIF90byBUaGUgYWRkcmVzcyB0byB0cmFuc2ZlciB0by4KICAgICogQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IHRvIGJlIHRyYW5zZmVycmVkLgogICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1ttc2cuc2VuZGVyXSk7CgogICAgICAgIC8vIFNhZmVNYXRoLnN1YiB3aWxsIHRocm93IGlmIHRoZXJlIGlzIG5vdCBlbm91Z2ggYmFsYW5jZS4KICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICogQGRldiBHZXRzIHRoZSBiYWxhbmNlIG9mIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy4KICAgICogQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyB0byBxdWVyeSB0aGUgdGhlIGJhbGFuY2Ugb2YuCiAgICAqIEByZXR1cm4gQW4gdWludDI1NiByZXByZXNlbnRpbmcgdGhlIGFtb3VudCBvd25lZCBieSB0aGUgcGFzc2VkIGFkZHJlc3MuCiAgICAqLwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW19vd25lcl07CiAgICB9Cgp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIEVSQzIwLCBCYXNpY1Rva2VuIHsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBpbnRlcm5hbCBhbGxvd2VkOwoKCiAgLyoqCiAgICogQGRldiBUcmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyCiAgICogQHBhcmFtIF9mcm9tIGFkZHJlc3MgVGhlIGFkZHJlc3Mgd2hpY2ggeW91IHdhbnQgdG8gc2VuZCB0b2tlbnMgZnJvbQogICAqIEBwYXJhbSBfdG8gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aGljaCB5b3Ugd2FudCB0byB0cmFuc2ZlciB0bwogICAqIEBwYXJhbSBfdmFsdWUgdWludDI1NiB0aGUgYW1vdW50IG9mIHRva2VucyB0byBiZSB0cmFuc2ZlcnJlZAogICAqLwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW19mcm9tXSk7CiAgICByZXF1aXJlKF92YWx1ZSA8PSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSk7CgogICAgYmFsYW5jZXNbX2Zyb21dID0gYmFsYW5jZXNbX2Zyb21dLnN1YihfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgVHJhbnNmZXIoX2Zyb20sIF90bywgX3ZhbHVlKTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQGRldiBBcHByb3ZlIHRoZSBwYXNzZWQgYWRkcmVzcyB0byBzcGVuZCB0aGUgc3BlY2lmaWVkIGFtb3VudCBvZiB0b2tlbnMgb24gYmVoYWxmIG9mIG1zZy5zZW5kZXIuCiAgICoKICAgKiBCZXdhcmUgdGhhdCBjaGFuZ2luZyBhbiBhbGxvd2FuY2Ugd2l0aCB0aGlzIG1ldGhvZCBicmluZ3MgdGhlIHJpc2sgdGhhdCBzb21lb25lIG1heSB1c2UgYm90aCB0aGUgb2xkCiAgICogYW5kIHRoZSBuZXcgYWxsb3dhbmNlIGJ5IHVuZm9ydHVuYXRlIHRyYW5zYWN0aW9uIG9yZGVyaW5nLiBPbmUgcG9zc2libGUgc29sdXRpb24gdG8gbWl0aWdhdGUgdGhpcwogICAqIHJhY2UgY29uZGl0aW9uIGlzIHRvIGZpcnN0IHJlZHVjZSB0aGUgc3BlbmRlcidzIGFsbG93YW5jZSB0byAwIGFuZCBzZXQgdGhlIGRlc2lyZWQgdmFsdWUgYWZ0ZXJ3YXJkczoKICAgKiBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMjAjaXNzdWVjb21tZW50LTI2MzUyNDcyOQogICAqIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyB3aGljaCB3aWxsIHNwZW5kIHRoZSBmdW5kcy4KICAgKiBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHNwZW50LgogICAqLwogIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIGNoZWNrIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgYW4gb3duZXIgYWxsb3dlZCB0byBhIHNwZW5kZXIuCiAgICogQHBhcmFtIF9vd25lciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIG93bnMgdGhlIGZ1bmRzLgogICAqIEBwYXJhbSBfc3BlbmRlciBhZGRyZXNzIFRoZSBhZGRyZXNzIHdoaWNoIHdpbGwgc3BlbmQgdGhlIGZ1bmRzLgogICAqIEByZXR1cm4gQSB1aW50MjU2IHNwZWNpZnlpbmcgdGhlIGFtb3VudCBvZiB0b2tlbnMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGUgc3BlbmRlci4KICAgKi8KICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgcmV0dXJuIGFsbG93ZWRbX293bmVyXVtfc3BlbmRlcl07CiAgfQoKICAvKioKICAgKiBhcHByb3ZlIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBhbGxvd2VkW19zcGVuZGVyXSA9PSAwLiBUbyBpbmNyZW1lbnQKICAgKiBhbGxvd2VkIHZhbHVlIGlzIGJldHRlciB0byB1c2UgdGhpcyBmdW5jdGlvbiB0byBhdm9pZCAyIGNhbGxzIChhbmQgd2FpdCB1bnRpbAogICAqIHRoZSBmaXJzdCB0cmFuc2FjdGlvbiBpcyBtaW5lZCkKICAgKiBGcm9tIE1vbm9saXRoREFPIFRva2VuLnNvbAogICAqLwogIGZ1bmN0aW9uIGluY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX2FkZGVkVmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gYWxsb3dlZFttc2cuc2VuZGVyXVtfc3BlbmRlcl0uYWRkKF9hZGRlZFZhbHVlKTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGRlY3JlYXNlQXBwcm92YWwgKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3N1YnRyYWN0ZWRWYWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgdWludCBvbGRWYWx1ZSA9IGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdOwogICAgaWYgKF9zdWJ0cmFjdGVkVmFsdWUgPiBvbGRWYWx1ZSkgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IDA7CiAgICB9IGVsc2UgewogICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IG9sZFZhbHVlLnN1Yihfc3VidHJhY3RlZFZhbHVlKTsKICAgIH0KICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cgp9CgoKY29udHJhY3QgTWludGFibGVUb2tlbiBpcyBTdGFuZGFyZFRva2VuLCBPd25hYmxlIHsKICBldmVudCBNaW50KGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogIGV2ZW50IE1pbnRGaW5pc2hlZCgpOwoKICBib29sIHB1YmxpYyBtaW50aW5nRmluaXNoZWQgPSBmYWxzZTsKCiAgbW9kaWZpZXIgY2FuTWludCgpIHsKICAgIHJlcXVpcmUoIW1pbnRpbmdGaW5pc2hlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBGdW5jdGlvbiB0byBtaW50IHRva2VucwogICAqIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3MgdGhhdCB3aWxsIHJlY2VpdmUgdGhlIG1pbnRlZCB0b2tlbnMuCiAgICogQHBhcmFtIF9hbW91bnQgVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gbWludC4KICAgKiBAcmV0dXJuIEEgYm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIG1pbnQoYWRkcmVzcyBfdG8sIHVpbnQyNTYgX2Ftb3VudCkgb25seU93bmVyIGNhbk1pbnQgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIHRvdGFsU3VwcGx5ID0gdG90YWxTdXBwbHkuYWRkKF9hbW91bnQpOwogICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF9hbW91bnQpOwogICAgTWludChfdG8sIF9hbW91bnQpOwogICAgVHJhbnNmZXIoMHgwLCBfdG8sIF9hbW91bnQpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBAZGV2IEZ1bmN0aW9uIHRvIHN0b3AgbWludGluZyBuZXcgdG9rZW5zLgogICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsLgogICAqLwogIGZ1bmN0aW9uIGZpbmlzaE1pbnRpbmcoKSBvbmx5T3duZXIgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgIG1pbnRpbmdGaW5pc2hlZCA9IHRydWU7CiAgICBNaW50RmluaXNoZWQoKTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKCmNvbnRyYWN0IExhbWRlblRhdSBpcyBNaW50YWJsZVRva2VuIHsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgbmFtZSA9ICJMYW1kZW4gVGF1IjsKICAgIHN0cmluZyBwdWJsaWMgY29uc3RhbnQgc3ltYm9sID0gIlRBVSI7CiAgICB1aW50OCBwdWJsaWMgY29uc3RhbnQgZGVjaW1hbHMgPSAxODsKfQoKY29udHJhY3QgQ3Jvd2RzYWxlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gVGhlIHRva2VuIGJlaW5nIHNvbGQKICBNaW50YWJsZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgLy8gc3RhcnQgYW5kIGVuZCB0aW1lc3RhbXBzIHdoZXJlIGludmVzdG1lbnRzIGFyZSBhbGxvd2VkIChib3RoIGluY2x1c2l2ZSkKICB1aW50MjU2IHB1YmxpYyBzdGFydFRpbWU7CiAgdWludDI1NiBwdWJsaWMgZW5kVGltZTsKCiAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgd2FsbGV0OwoKICAvLyBob3cgbWFueSB0b2tlbiB1bml0cyBhIGJ1eWVyIGdldHMgcGVyIHdlaQogIHVpbnQyNTYgcHVibGljIHJhdGU7CgogIC8vIGFtb3VudCBvZiByYWlzZWQgbW9uZXkgaW4gd2VpCiAgdWludDI1NiBwdWJsaWMgd2VpUmFpc2VkOwoKICAvKioKICAgKiBldmVudCBmb3IgdG9rZW4gcHVyY2hhc2UgbG9nZ2luZwogICAqIEBwYXJhbSBwdXJjaGFzZXIgd2hvIHBhaWQgZm9yIHRoZSB0b2tlbnMKICAgKiBAcGFyYW0gYmVuZWZpY2lhcnkgd2hvIGdvdCB0aGUgdG9rZW5zCiAgICogQHBhcmFtIHZhbHVlIHdlaXMgcGFpZCBmb3IgcHVyY2hhc2UKICAgKiBAcGFyYW0gYW1vdW50IGFtb3VudCBvZiB0b2tlbnMgcHVyY2hhc2VkCiAgICovCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKCgogIGZ1bmN0aW9uIENyb3dkc2FsZSh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUsIHVpbnQyNTYgX3JhdGUsIGFkZHJlc3MgX3dhbGxldCkgewogICAgLy9yZXF1aXJlKF9zdGFydFRpbWUgPj0gbm93KTsKICAgIHJlcXVpcmUoX2VuZFRpbWUgPj0gX3N0YXJ0VGltZSk7CiAgICByZXF1aXJlKF9yYXRlID4gMCk7CiAgICAvL3JlcXVpcmUoX3dhbGxldCAhPSAweDApOwoKICAgIHRva2VuID0gY3JlYXRlVG9rZW5Db250cmFjdCgpOwogICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgIGVuZFRpbWUgPSBfZW5kVGltZTsKICAgIHJhdGUgPSBfcmF0ZTsKICAgIHdhbGxldCA9IF93YWxsZXQ7CiAgfQoKICAvLyBjcmVhdGVzIHRoZSB0b2tlbiB0byBiZSBzb2xkLgogIC8vIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGhhdmUgY3Jvd2RzYWxlIG9mIGEgc3BlY2lmaWMgbWludGFibGUgdG9rZW4uCiAgZnVuY3Rpb24gY3JlYXRlVG9rZW5Db250cmFjdCgpIGludGVybmFsIHJldHVybnMgKE1pbnRhYmxlVG9rZW4pIHsKICAgIHJldHVybiBuZXcgTWludGFibGVUb2tlbigpOwogIH0KCgogIC8vIGZhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiAoKSBwYXlhYmxlIHsKICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICB9CgogIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5KSBwdWJsaWMgcGF5YWJsZSB7CiAgICByZXF1aXJlKGJlbmVmaWNpYXJ5ICE9IDB4MCk7CiAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CgogICAgdWludDI1NiB3ZWlBbW91bnQgPSBtc2cudmFsdWU7CgogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50MjU2IHRva2VucyA9IHdlaUFtb3VudC5tdWwocmF0ZSk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CgogICAgdG9rZW4ubWludChiZW5lZmljaWFyeSwgdG9rZW5zKTsKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zKTsKCiAgICBmb3J3YXJkRnVuZHMoKTsKICB9CgogIC8vIHNlbmQgZXRoZXIgdG8gdGhlIGZ1bmQgY29sbGVjdGlvbiB3YWxsZXQKICAvLyBvdmVycmlkZSB0byBjcmVhdGUgY3VzdG9tIGZ1bmQgZm9yd2FyZGluZyBtZWNoYW5pc21zCiAgZnVuY3Rpb24gZm9yd2FyZEZ1bmRzKCkgaW50ZXJuYWwgewogICAgd2FsbGV0LnRyYW5zZmVyKG1zZy52YWx1ZSk7CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIGNhbiBidXkgdG9rZW5zCiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgd2l0aGluUGVyaW9kID0gbm93ID49IHN0YXJ0VGltZSAmJiBub3cgPD0gZW5kVGltZTsKICAgIGJvb2wgbm9uWmVyb1B1cmNoYXNlID0gbXNnLnZhbHVlICE9IDA7CiAgICByZXR1cm4gd2l0aGluUGVyaW9kICYmIG5vblplcm9QdXJjaGFzZTsKICB9CgogIC8vIEByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgcmV0dXJuIG5vdyA+IGVuZFRpbWU7CiAgfQoKCn0KCmNvbnRyYWN0IENhcHBlZENyb3dkc2FsZSBpcyBDcm93ZHNhbGUgewogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwoKICB1aW50MjU2IHB1YmxpYyBjYXA7CgogIGZ1bmN0aW9uIENhcHBlZENyb3dkc2FsZSh1aW50MjU2IF9jYXApIHsKICAgIHJlcXVpcmUoX2NhcCA+IDApOwogICAgY2FwID0gX2NhcDsKICB9CgogIC8vIG92ZXJyaWRpbmcgQ3Jvd2RzYWxlI3ZhbGlkUHVyY2hhc2UgdG8gYWRkIGV4dHJhIGNhcCBsb2dpYwogIC8vIEByZXR1cm4gdHJ1ZSBpZiBpbnZlc3RvcnMgY2FuIGJ1eSBhdCB0aGUgbW9tZW50CiAgZnVuY3Rpb24gdmFsaWRQdXJjaGFzZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGJvb2wgd2l0aGluQ2FwID0gd2VpUmFpc2VkLmFkZChtc2cudmFsdWUpIDw9IGNhcDsKICAgIHJldHVybiBzdXBlci52YWxpZFB1cmNoYXNlKCkgJiYgd2l0aGluQ2FwOwogIH0KCiAgLy8gb3ZlcnJpZGluZyBDcm93ZHNhbGUjaGFzRW5kZWQgdG8gYWRkIGNhcCBsb2dpYwogIC8vIEByZXR1cm4gdHJ1ZSBpZiBjcm93ZHNhbGUgZXZlbnQgaGFzIGVuZGVkCiAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgYm9vbCBjYXBSZWFjaGVkID0gd2VpUmFpc2VkID49IGNhcDsKICAgIHJldHVybiBzdXBlci5oYXNFbmRlZCgpIHx8IGNhcFJlYWNoZWQ7CiAgfQoKfQpjb250cmFjdCBQcmVzYWxlIGlzIENhcHBlZENyb3dkc2FsZSwgT3duYWJsZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyB3aGl0ZWxpc3Q7CgogICAgYm9vbCBwdWJsaWMgaXNGaW5hbGl6ZWQgPSBmYWxzZTsKICAgIGV2ZW50IEZpbmFsaXplZCgpOwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyB0ZWFtID0gMHg5YzM4YzdlMjJjYjIwYjA1NWUwMDg3NzU2MTcyMjRkMGVjMjVjOTFmOwogICAgdWludDI1NiBwdWJsaWMgdGVhbVNoYXJlID0gMTUwMDAwMDAwICogKDEwICoqIDE4KTsKICAgIAogICAgYWRkcmVzcyBwdWJsaWMgc2VlZCA9IDB4MzY2OWFkNTQ2NzVFOTRlMTQxOTY1Mjg3ODY2NDVjODU4YjgzOTFGMTsKICAgIHVpbnQyNTYgcHVibGljIHNlZWRTaGFyZSA9IDY4MDc5NjAgKiAoMTAgKiogMTgpOwoKICAgIGJvb2wgcHVibGljIGhhc0FsbG9jYXRlZCA9IGZhbHNlOwoKICAgIGFkZHJlc3MgcHVibGljIG1lZGlhdG9yID0gMHgwOwogICAgCiAgICBmdW5jdGlvbiBQcmVzYWxlKHVpbnQyNTYgX3N0YXJ0VGltZSwgdWludDI1NiBfZW5kVGltZSwgdWludDI1NiBfcmF0ZSwgdWludDI1NiBfY2FwLCBhZGRyZXNzIF93YWxsZXQsIGFkZHJlc3MgX3Rva2VuQWRkcmVzcykgCiAgICBDcm93ZHNhbGUoX3N0YXJ0VGltZSwgX2VuZFRpbWUsIF9yYXRlLCBfd2FsbGV0KQogICAgQ2FwcGVkQ3Jvd2RzYWxlKF9jYXApCiAgICB7CiAgICAgICAgdG9rZW4gPSBMYW1kZW5UYXUoX3Rva2VuQWRkcmVzcyk7CiAgICB9CiAgICAKICAgIC8vIENyb3dkc2FsZSBvdmVycmlkZXMKICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChNaW50YWJsZVRva2VuKSB7CiAgICAgICAgcmV0dXJuIExhbWRlblRhdSgweDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHZhbGlkUHVyY2hhc2UoKSBpbnRlcm5hbCBjb25zdGFudCByZXR1cm5zIChib29sKSB7CiAgICAgICAgYm9vbCB3aXRoaW5DYXAgPSB3ZWlSYWlzZWQuYWRkKG1zZy52YWx1ZSkgPD0gY2FwOwogICAgICAgIGJvb2wgdmFsaWQgPSBzdXBlci52YWxpZFB1cmNoYXNlKCkgJiYgd2l0aGluQ2FwICYmIHdoaXRlbGlzdFttc2cuc2VuZGVyXTsKICAgICAgICByZXR1cm4gdmFsaWQ7CiAgICB9CiAgICAvLyAqICogKgogICAgCiAgICAvLyBGaW5hbGl6ZXIgZnVuY3Rpb25zLiBSZWRlZmluZWQgZnJvbSBGaW5hbGl6YWJsZUNyb3dkc2FsZSB0byBwcmV2ZW50IGRpYW1vbmQgaW5oZXJpdGVuY2UgY29tcGxleGl0aWVzCiAgICAKICAgIGZ1bmN0aW9uIGZpbmFsaXplKCkgb25seU93bmVyIHB1YmxpYyB7CiAgICAgIHJlcXVpcmUobWVkaWF0b3IgIT0gMHgwKTsKICAgICAgcmVxdWlyZSghaXNGaW5hbGl6ZWQpOwogICAgICByZXF1aXJlKGhhc0VuZGVkKCkpOwogICAgICAKICAgICAgZmluYWxpemF0aW9uKCk7CiAgICAgIEZpbmFsaXplZCgpOwoKICAgICAgaXNGaW5hbGl6ZWQgPSB0cnVlOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBmaW5hbGl6YXRpb24oKSBpbnRlcm5hbCB7CiAgICAgICAgLy8gc2V0IHRoZSBvd25lcnNoaXAgdG8gdGhlIG1lZGlhdG9yIHNvIGl0IGNhbiBwYXNzIGl0IG9udG8gdGhlIHNhbGUgY29udHJhY3QKICAgICAgICAvLyBhdCB0aGUgdGltZSB0aGF0IHRoZSBzYWxlIGNvbnRyYWN0IGlzIGRlcGxveWVkCiAgICAgICAgdG9rZW4udHJhbnNmZXJPd25lcnNoaXAobWVkaWF0b3IpOwogICAgICAgIE1lZGlhdG9yIG0gPSBNZWRpYXRvcihtZWRpYXRvcik7CiAgICAgICAgbS5hY2NlcHRUb2tlbigpOwogICAgfQogICAgLy8gKiAqICogCgogICAgLy8gQ29udHJhY3QgU3BlY2lmaWMgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBhc3NpZ25NZWRpYXRvcihhZGRyZXNzIF9tKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIG1lZGlhdG9yID0gX207CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdoaXRlbGlzdFVzZXIoYWRkcmVzcyBfYSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wpewogICAgICAgIHdoaXRlbGlzdFtfYV0gPSB0cnVlOwogICAgICAgIHJldHVybiB3aGl0ZWxpc3RbX2FdOwogICAgfQoKICAgIGZ1bmN0aW9uIHdoaXRlbGlzdFVzZXJzKGFkZHJlc3NbXSB1c2VycykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB3aGl0ZWxpc3RbdXNlcnNbaV1dID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdW5XaGl0ZWxpc3RVc2VyKGFkZHJlc3MgX2EpIHB1YmxpYyBvbmx5T3duZXIgcmV0dXJucyhib29sKXsKICAgICAgICB3aGl0ZWxpc3RbX2FdID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHdoaXRlbGlzdFtfYV07CiAgICB9CgogICAgZnVuY3Rpb24gdW5XaGl0ZWxpc3RVc2VycyhhZGRyZXNzW10gdXNlcnMpIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgdXNlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgd2hpdGVsaXN0W3VzZXJzW2ldXSA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb2NhdGVUb2tlbnMoKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIHJlcXVpcmUoaGFzQWxsb2NhdGVkID09IGZhbHNlKTsKICAgICAgICB0b2tlbi5taW50KHRlYW0sIHRlYW1TaGFyZSk7CiAgICAgICAgdG9rZW4ubWludChzZWVkLCBzZWVkU2hhcmUpOwogICAgICAgIGhhc0FsbG9jYXRlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIGhhc0FsbG9jYXRlZDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWNjZXB0VG9rZW4oKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIHRva2VuLmFjY2VwdE93bmVyc2hpcCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUVuZFRpbWUodWludDI1NiBfZSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF9lID4gc3RhcnRUaW1lKTsKICAgICAgICBlbmRUaW1lID0gX2U7CiAgICAgICAgcmV0dXJuIGVuZFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gbWludFRva2Vucyh1aW50MjU2IHRva2VuQW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgIHRva2VuLm1pbnQod2FsbGV0LCB0b2tlbkFtb3VudCk7CiAgICB9CiAgICAKICAgIC8vICogKiAqCn0KCmNvbnRyYWN0IE1lZGlhdG9yIGlzIE93bmFibGUgewogICAgYWRkcmVzcyBwdWJsaWMgcHJlc2FsZTsKICAgIExhbWRlblRhdSBwdWJsaWMgdGF1OwogICAgYWRkcmVzcyBwdWJsaWMgc2FsZTsKICAgIAogICAgZnVuY3Rpb24gc2V0UHJlc2FsZShhZGRyZXNzIHApIHB1YmxpYyBvbmx5T3duZXIgeyBwcmVzYWxlID0gcDsgfQogICAgZnVuY3Rpb24gc2V0VGF1KGFkZHJlc3MgdCkgcHVibGljIG9ubHlPd25lciB7IHRhdSA9IExhbWRlblRhdSh0KTsgfQogICAgZnVuY3Rpb24gc2V0U2FsZShhZGRyZXNzIHMpIHB1YmxpYyBvbmx5T3duZXIgeyBzYWxlID0gczsgfQogICAgCiAgICBtb2RpZmllciBvbmx5UHJlc2FsZSB7CiAgICAgICAgcmVxdWlyZShtc2cuc2VuZGVyID09IHByZXNhbGUpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlTYWxlIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gc2FsZSk7CiAgICAgICAgXzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWNjZXB0VG9rZW4oKSBwdWJsaWMgb25seVByZXNhbGUgeyB0YXUuYWNjZXB0T3duZXJzaGlwKCk7IH0KICAgIGZ1bmN0aW9uIHBhc3NPZmYoKSBwdWJsaWMgb25seVNhbGUgeyB0YXUudHJhbnNmZXJPd25lcnNoaXAoc2FsZSk7IH0KfQoKY29udHJhY3QgU2FsZSBpcyBDYXBwZWRDcm93ZHNhbGUsIE93bmFibGUgewogICAgdXNpbmcgU2FmZU1hdGggZm9yIHVpbnQyNTY7CgogICAgLy8gSW5pdGlhbGl6YXRpb24gVmFyaWFibGVzCiAgICB1aW50MjU2IHB1YmxpYyBhbW91bnRQZXJEYXk7IC8vIDMwIGV0aAogICAgdWludDI1NiBwdWJsaWMgY29uc3RhbnQgVU5JWF9EQVkgPSA4NjQwMDsKCiAgICBib29sIHB1YmxpYyBpc0ZpbmFsaXplZCA9IGZhbHNlOwogICAgZXZlbnQgRmluYWxpemVkKCk7CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBwdWJsaWMgd2hpdGVsaXN0OwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiB1aW50MjU2KSBwdWJsaWMgYW1vdW50Q29udHJpYnV0ZWRCeTsKICAgIC8vICogKiAqCgogICAgLy8gQ29uc3RydWN0b3IKICAgIGZ1bmN0aW9uIFNhbGUodWludDI1NiBfc3RhcnRUaW1lLCB1aW50MjU2IF9lbmRUaW1lLCB1aW50MjU2IF9yYXRlLCB1aW50MjU2IF9jYXAsIGFkZHJlc3MgX3dhbGxldCwgdWludDI1NiBfYW1vdW50UGVyRGF5LCBhZGRyZXNzIF90b2tlbkFkZHJlc3MpCiAgICBDcm93ZHNhbGUoX3N0YXJ0VGltZSwgX2VuZFRpbWUsIF9yYXRlLCBfd2FsbGV0KQogICAgQ2FwcGVkQ3Jvd2RzYWxlKF9jYXApCiAgICB7CiAgICAgICAgYW1vdW50UGVyRGF5ID0gX2Ftb3VudFBlckRheTsKICAgICAgICB0b2tlbiA9IExhbWRlblRhdShfdG9rZW5BZGRyZXNzKTsKICAgIH0KICAgIC8vICogKiAqCiAgICAKICAgIC8vIENyb3dkc2FsZSBvdmVycmlkZXMKICAgIGZ1bmN0aW9uIGNyZWF0ZVRva2VuQ29udHJhY3QoKSBpbnRlcm5hbCByZXR1cm5zIChNaW50YWJsZVRva2VuKSB7CiAgICAgICAgcmV0dXJuIExhbWRlblRhdSgweDApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgd2l0aGluQ2FwID0gd2VpUmFpc2VkLmFkZChtc2cudmFsdWUpIDw9IGNhcDsKICAgICAgICBib29sIHdpdGhpbkNvbnRyaWJ1dGlvbkxpbWl0ID0gbXNnLnZhbHVlIDw9IGN1cnJlbnRQZXJzb25hbExpbWl0KG1zZy5zZW5kZXIpOwogICAgICAgIGJvb2wgdmFsaWQgPSBzdXBlci52YWxpZFB1cmNoYXNlKCkgJiYgd2l0aGluQ2FwICYmIHdoaXRlbGlzdFttc2cuc2VuZGVyXSAmJiB3aXRoaW5Db250cmlidXRpb25MaW1pdDsKICAgICAgICByZXR1cm4gdmFsaWQ7CiAgICB9CgogICAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBzdXBlci5idXlUb2tlbnMoYmVuZWZpY2lhcnkpOwogICAgICAgIGFtb3VudENvbnRyaWJ1dGVkQnlbbXNnLnNlbmRlcl0gPSBhbW91bnRDb250cmlidXRlZEJ5W21zZy5zZW5kZXJdLmFkZChtc2cudmFsdWUpOwogICAgfQogICAgLy8gKiAqICoKCiAgICAvLyBGaW5hbGl6ZXIgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBmaW5hbGl6ZSgpIG9ubHlPd25lciBwdWJsaWMgewogICAgICByZXF1aXJlKCFpc0ZpbmFsaXplZCk7CiAgICAgIHJlcXVpcmUoaGFzRW5kZWQoKSk7CgogICAgICBmaW5hbGl6YXRpb24oKTsKICAgICAgRmluYWxpemVkKCk7CgogICAgICBpc0ZpbmFsaXplZCA9IHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGZpbmFsaXphdGlvbigpIGludGVybmFsIHsKICAgICAgICB0b2tlbi5maW5pc2hNaW50aW5nKCk7CiAgICB9CiAgICAvLyAqICogKiAKICAgIAogICAgLy8gQ29udHJhY3QgU3BlY2lmaWMgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBkYXlzU2luY2VMYXVuY2goKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG5vdy5zdWIoc3RhcnRUaW1lKS5kaXYoVU5JWF9EQVkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjdXJyZW50Q29udHJpYnV0aW9uTGltaXQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGFtb3VudFBlckRheS5tdWwoMiAqKiBkYXlzU2luY2VMYXVuY2goKSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGN1cnJlbnRQZXJzb25hbExpbWl0KGFkZHJlc3MgX2EpIHB1YmxpYyBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gY3VycmVudENvbnRyaWJ1dGlvbkxpbWl0KCkuc3ViKGFtb3VudENvbnRyaWJ1dGVkQnlbX2FdKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xhaW1Ub2tlbihhZGRyZXNzIF9tKSBwdWJsaWMgb25seU93bmVyIHJldHVybnMoYm9vbCkgewogICAgICAgIE1lZGlhdG9yIG0gPSBNZWRpYXRvcihfbSk7CiAgICAgICAgbS5wYXNzT2ZmKCk7CiAgICAgICAgdG9rZW4uYWNjZXB0T3duZXJzaGlwKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdoaXRlbGlzdFVzZXIoYWRkcmVzcyBfYSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKICAgICAgICB3aGl0ZWxpc3RbX2FdID0gdHJ1ZTsKICAgICAgICByZXR1cm4gd2hpdGVsaXN0W19hXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gd2hpdGVsaXN0VXNlcnMoYWRkcmVzc1tdIHVzZXJzKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgICAgIGZvciAodWludCBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdoaXRlbGlzdFt1c2Vyc1tpXV0gPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1bldoaXRlbGlzdFVzZXIoYWRkcmVzcyBfYSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKGJvb2wpewogICAgICAgIHdoaXRlbGlzdFtfYV0gPSBmYWxzZTsKICAgICAgICByZXR1cm4gd2hpdGVsaXN0W19hXTsKICAgIH0KCiAgICBmdW5jdGlvbiB1bldoaXRlbGlzdFVzZXJzKGFkZHJlc3NbXSB1c2VycykgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgICAgICBmb3IgKHVpbnQgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB3aGl0ZWxpc3RbdXNlcnNbaV1dID0gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUVuZFRpbWUodWludDI1NiBfZSkgcHVibGljIG9ubHlPd25lciByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXF1aXJlKF9lID4gc3RhcnRUaW1lKTsKICAgICAgICBlbmRUaW1lID0gX2U7CiAgICAgICAgcmV0dXJuIGVuZFRpbWU7CiAgICB9CgogICAgZnVuY3Rpb24gbWludFRva2Vucyh1aW50MjU2IHRva2VuQW1vdW50KSBwdWJsaWMgb25seU93bmVyIHsKICAgICAgIHJlcXVpcmUoIWlzRmluYWxpemVkKTsKICAgICAgIHRva2VuLm1pbnQod2FsbGV0LCB0b2tlbkFtb3VudCk7CiAgICB9CiAgICAvLyAqICogKgp9'.
	

]
