Class {
	#name : #SRTad56c554f32d51526475d541f5deaabe1534854d,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRTad56c554f32d51526475d541f5deaabe1534854d >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTU7CgoKCgoKY29udHJhY3QgQ29udHJhY3RSZWNlaXZlciB7ICAgCiAgICBmdW5jdGlvbiB0b2tlbkZhbGxiYWNrKGFkZHJlc3MgX2Zyb20sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSl7CiAgICB9Cn0KCiAvKiBOZXcgRVJDMjMgY29udHJhY3QgaW50ZXJmYWNlICovCgpjb250cmFjdCBFUkMyMjMgewogIHVpbnQgcHVibGljIHRvdGFsU3VwcGx5OwogIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIHdobykgY29uc3RhbnQgcmV0dXJucyAodWludCk7CiAgCiAgZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSk7CiAgZnVuY3Rpb24gc3ltYm9sKCkgY29uc3RhbnQgcmV0dXJucyAoc3RyaW5nIF9zeW1ib2wpOwogIGZ1bmN0aW9uIGRlY2ltYWxzKCkgY29uc3RhbnQgcmV0dXJucyAodWludDggX2RlY2ltYWxzKTsKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3N1cHBseSk7CgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEpIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGRhdGEsIHN0cmluZyBjdXN0b21fZmFsbGJhY2spIHJldHVybnMgKGJvb2wgb2spOwogIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHJldHVybnMgKGJvb2wpOwogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGluZGV4ZWQgZGF0YSk7Cn0KCi8vIFRoZSBHWFZDIHRva2VuIEVSQzIyMwoKY29udHJhY3QgR1hWQ1Rva2VuIHsKCiAgICAvLyBUb2tlbiBwdWJsaWMgdmFyaWFibGVzCiAgICBzdHJpbmcgcHVibGljIG5hbWU7CiAgICBzdHJpbmcgcHVibGljIHN5bWJvbDsKICAgIHVpbnQ4IHB1YmxpYyBkZWNpbWFsczsgCiAgICBzdHJpbmcgcHVibGljIHZlcnNpb24gPSAndjAuMic7CiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKICAgIGJvb2wgbG9ja2VkOwoKICAgIGFkZHJlc3Mgcm9vdEFkZHJlc3M7CiAgICBhZGRyZXNzIE93bmVyOwogICAgdWludCBtdWx0aXBsaWVyID0gMTAwMDAwMDAwMDA7IC8vIEZvciAxMCBkZWNpbWFscwogICAgYWRkcmVzcyBzd2FwcGVyQWRkcmVzczsgLy8gQ2FuIGJ5cGFzcyBhIGxvY2sKCiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwogICAgbWFwcGluZyhhZGRyZXNzID0+IGJvb2wpIGZyZWV6ZWQ7IAoKCiAgCWV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQgdmFsdWUsIGJ5dGVzIGluZGV4ZWQgZGF0YSk7CiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKTsKCiAgICAvLyBNb2RpZmllcnMKCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgaWYgKCBtc2cuc2VuZGVyICE9IHJvb3RBZGRyZXNzICYmIG1zZy5zZW5kZXIgIT0gT3duZXIgKSByZXZlcnQoKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIG9ubHlSb290KCkgewogICAgICAgIGlmICggbXNnLnNlbmRlciAhPSByb290QWRkcmVzcyApIHJldmVydCgpOwogICAgICAgIF87CiAgICB9CgogICAgbW9kaWZpZXIgaXNVbmxvY2tlZCgpIHsKICAgIAlpZiAoIGxvY2tlZCAmJiBtc2cuc2VuZGVyICE9IHJvb3RBZGRyZXNzICYmIG1zZy5zZW5kZXIgIT0gT3duZXIgKSByZXZlcnQoKTsKCQlfOyAgICAJCiAgICB9CgogICAgbW9kaWZpZXIgaXNVbmZyZWV6ZWQoYWRkcmVzcyBfdG8pIHsKICAgIAlpZiAoIGZyZWV6ZWRbbXNnLnNlbmRlcl0gfHwgZnJlZXplZFtfdG9dICkgcmV2ZXJ0KCk7CiAgICAJXzsKICAgIH0KCgogICAgLy8gU2FmZSBtYXRoCiAgICBmdW5jdGlvbiBzYWZlQWRkKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCByZXR1cm5zICh1aW50IHopIHsKICAgICAgICByZXF1aXJlKCh6ID0geCArIHkpID49IHgpOwogICAgfQogICAgZnVuY3Rpb24gc2FmZVN1Yih1aW50IHgsIHVpbnQgeSkgaW50ZXJuYWwgcmV0dXJucyAodWludCB6KSB7CiAgICAgICAgcmVxdWlyZSgoeiA9IHggLSB5KSA8PSB4KTsKICAgIH0KCgogICAgLy8gR1hDIFRva2VuIGNvbnN0cnVjdG9yCiAgICBmdW5jdGlvbiBHWFZDVG9rZW4oKSB7ICAgICAgICAKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIHRvdGFsU3VwcGx5ID0gMTYwMDAwMDAwICogbXVsdGlwbGllcjsgLy8gMTYwLDAwMCwwMDAgdG9rZW5zICogMTAgZGVjaW1hbHMKICAgICAgICBuYW1lID0gJ0dlbmV2aWV2ZSBWQyc7IAogICAgICAgIHN5bWJvbCA9ICdHWFZDJzsgCiAgICAgICAgZGVjaW1hbHMgPSAxMDsgCiAgICAgICAgcm9vdEFkZHJlc3MgPSBtc2cuc2VuZGVyOyAgICAgICAgCiAgICAgICAgT3duZXIgPSBtc2cuc2VuZGVyOyAgICAgICAKICAgICAgICBiYWxhbmNlc1tyb290QWRkcmVzc10gPSB0b3RhbFN1cHBseTsgCiAgICAgICAgYWxsb3dlZFtyb290QWRkcmVzc11bc3dhcHBlckFkZHJlc3NdID0gdG90YWxTdXBwbHk7CiAgICB9CgoKCS8vIEVSQzIyMyBBY2Nlc3MgZnVuY3Rpb25zCgoJZnVuY3Rpb24gbmFtZSgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfbmFtZSkgewoJICAgICAgcmV0dXJuIG5hbWU7CgkgIH0KCWZ1bmN0aW9uIHN5bWJvbCgpIGNvbnN0YW50IHJldHVybnMgKHN0cmluZyBfc3ltYm9sKSB7CgkgICAgICByZXR1cm4gc3ltYm9sOwoJICB9CglmdW5jdGlvbiBkZWNpbWFscygpIGNvbnN0YW50IHJldHVybnMgKHVpbnQ4IF9kZWNpbWFscykgewoJICAgICAgcmV0dXJuIGRlY2ltYWxzOwoJICB9CglmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgX3RvdGFsU3VwcGx5KSB7CgkgICAgICByZXR1cm4gdG90YWxTdXBwbHk7CgkgIH0KCgogICAgLy8gT25seSByb290IGZ1bmN0aW9uCgogICAgZnVuY3Rpb24gY2hhbmdlUm9vdChhZGRyZXNzIF9uZXdyb290QWRkcmVzcykgb25seVJvb3QgcmV0dXJucyhib29sKXsKICAgIAkJYWxsb3dlZFtyb290QWRkcmVzc11bc3dhcHBlckFkZHJlc3NdID0gMDsgLy8gUmVtb3ZlcyBhbGxvd2FuY2UgdG8gb2xkIHJvb3RBZGRyZXNzCiAgICAgICAgICAgIHJvb3RBZGRyZXNzID0gX25ld3Jvb3RBZGRyZXNzOwogICAgICAgICAgICBhbGxvd2VkW19uZXdyb290QWRkcmVzc11bc3dhcHBlckFkZHJlc3NdID0gdG90YWxTdXBwbHk7IC8vIEdpdmVzIGFsbG93YW5jZSB0byBuZXcgcm9vdEFkZHJlc3MKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIE9ubHkgb3duZXIgZnVuY3Rpb25zCgogICAgZnVuY3Rpb24gY2hhbmdlT3duZXIoYWRkcmVzcyBfbmV3T3duZXIpIG9ubHlPd25lciByZXR1cm5zKGJvb2wpewogICAgICAgICAgICBPd25lciA9IF9uZXdPd25lcjsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlU3dhcHBlckFkZChhZGRyZXNzIF9uZXdTd2FwcGVyKSBvbmx5T3duZXIgcmV0dXJucyhib29sKXsKICAgIAkJYWxsb3dlZFtyb290QWRkcmVzc11bc3dhcHBlckFkZHJlc3NdID0gMDsgLy8gUmVtb3ZlcyBhbGxvd2FuY2UgdG8gb2xkIHJvb3RBZGRyZXNzCiAgICAgICAgICAgIHN3YXBwZXJBZGRyZXNzID0gX25ld1N3YXBwZXI7CiAgICAgICAgICAgIGFsbG93ZWRbcm9vdEFkZHJlc3NdW19uZXdTd2FwcGVyXSA9IHRvdGFsU3VwcGx5OyAvLyBHaXZlcyBhbGxvd2FuY2UgdG8gbmV3IHJvb3RBZGRyZXNzCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgICAgCiAgICBmdW5jdGlvbiB1bmxvY2soKSBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gbG9jaygpIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICBsb2NrZWQgPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGZyZWV6ZShhZGRyZXNzIF9hZGRyZXNzKSBvbmx5T3duZXIgcmV0dXJucyhib29sKSB7CiAgICAgICAgZnJlZXplZFtfYWRkcmVzc10gPSB0cnVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuZnJlZXplKGFkZHJlc3MgX2FkZHJlc3MpIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgICAgICBmcmVlemVkW19hZGRyZXNzXSA9IGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGJ1cm4odWludDI1NiBfdmFsdWUpIG9ubHlPd25lciByZXR1cm5zKGJvb2wpIHsKICAgIAlieXRlcyBtZW1vcnkgZW1wdHk7CiAgICAgICAgaWYgKCBiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSApIHJldmVydCgpOwogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YiggYmFsYW5jZXNbbXNnLnNlbmRlcl0gLCBfdmFsdWUgKTsKICAgICAgICB0b3RhbFN1cHBseSA9IHNhZmVTdWIoIHRvdGFsU3VwcGx5LCAgX3ZhbHVlICk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgMHgwLCBfdmFsdWUgLCBlbXB0eSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgoKICAgIC8vIFB1YmxpYyBnZXR0ZXJzCiAgICBmdW5jdGlvbiBpc0ZyZWV6ZWQoYWRkcmVzcyBfYWRkcmVzcykgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGZyZWV6ZWRbX2FkZHJlc3NdOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzTG9ja2VkKCkgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICAgICAgcmV0dXJuIGxvY2tlZDsKICAgIH0KCiAgLy8gUHVibGljIGZ1bmN0aW9ucyAoZnJvbSBodHRwczovL2dpdGh1Yi5jb20vRGV4YXJhbi9FUkMyMjMtdG9rZW4tc3RhbmRhcmQvdHJlZS9SZWNvbW1lbmRlZCkKCiAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcyB0byBhbiBhZGRyZXNzIHRoYXQgaGFzIGEgbm9uLXN0YW5kYXJkIGZhbGxiYWNrIGZ1bmN0aW9uCiAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSwgc3RyaW5nIF9jdXN0b21fZmFsbGJhY2spIGlzVW5sb2NrZWQgaXNVbmZyZWV6ZWQoX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgCiAgICBpZihpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IHNhZmVTdWIoIGJhbGFuY2VzW21zZy5zZW5kZXJdICwgX3ZhbHVlICk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoIGJhbGFuY2VzW190b10gLCBfdmFsdWUgKTsKICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOwogICAgICAgIHJlY2VpdmVyLmNhbGwudmFsdWUoMCkoYnl0ZXM0KHNoYTMoX2N1c3RvbV9mYWxsYmFjaykpLCBtc2cuc2VuZGVyLCBfdmFsdWUsIF9kYXRhKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSwgX2RhdGEpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZmVyVG9BZGRyZXNzKF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICB9Cn0KCiAgLy8gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIHVzZXIgb3IgYW5vdGhlciBjb250cmFjdCB3YW50cyB0byB0cmFuc2ZlciBmdW5kcyB0byBhbiBhZGRyZXNzIHdpdGggdG9rZW5GYWxsYmFjayBmdW5jdGlvbgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIGlzVW5sb2NrZWQgaXNVbmZyZWV6ZWQoX3RvKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgICAgCiAgICBpZihpc0NvbnRyYWN0KF90bykpIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0NvbnRyYWN0KF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gdHJhbnNmZXJUb0FkZHJlc3MoX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIH0KfQoKCiAgLy8gU3RhbmRhcmQgZnVuY3Rpb24gdHJhbnNmZXIgc2ltaWxhciB0byBFUkMyMCB0cmFuc2ZlciB3aXRoIG5vIF9kYXRhLgogIC8vIEFkZGVkIGR1ZSB0byBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSByZWFzb25zLgogIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSkgaXNVbmxvY2tlZCBpc1VuZnJlZXplZChfdG8pIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewoKICAgIGJ5dGVzIG1lbW9yeSBlbXB0eTsKICAgIGlmKGlzQ29udHJhY3QoX3RvKSkgewogICAgICAgIHJldHVybiB0cmFuc2ZlclRvQ29udHJhY3QoX3RvLCBfdmFsdWUsIGVtcHR5KTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHJldHVybiB0cmFuc2ZlclRvQWRkcmVzcyhfdG8sIF92YWx1ZSwgZW1wdHkpOwogICAgfQp9CgovL2Fzc2VtYmxlIHRoZSBnaXZlbiBhZGRyZXNzIGJ5dGVjb2RlLiBJZiBieXRlY29kZSBleGlzdHMgdGhlbiB0aGUgX2FkZHIgaXMgYSBjb250cmFjdC4KICBmdW5jdGlvbiBpc0NvbnRyYWN0KGFkZHJlc3MgX2FkZHIpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBpc19jb250cmFjdCkgewogICAgICB1aW50IGxlbmd0aDsKICAgICAgYXNzZW1ibHkgewogICAgICAgICAgICAvL3JldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBjb2RlIG9uIHRhcmdldCBhZGRyZXNzLCB0aGlzIG5lZWRzIGFzc2VtYmx5CiAgICAgICAgICAgIGxlbmd0aCA6PSBleHRjb2Rlc2l6ZShfYWRkcikKICAgICAgfQogICAgICByZXR1cm4gKGxlbmd0aD4wKTsKICAgIH0KCiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhbiBhZGRyZXNzCiAgZnVuY3Rpb24gdHJhbnNmZXJUb0FkZHJlc3MoYWRkcmVzcyBfdG8sIHVpbnQgX3ZhbHVlLCBieXRlcyBfZGF0YSkgcHJpdmF0ZSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIGlmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA8IF92YWx1ZSkgcmV0dXJuIGZhbHNlOwogICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBzYWZlU3ViKGJhbGFuY2VzW21zZy5zZW5kZXJdLCBfdmFsdWUpOwogICAgYmFsYW5jZXNbX3RvXSA9IHNhZmVBZGQoYmFsYW5jZXNbX3RvXSwgX3ZhbHVlKTsKICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlLCBfZGF0YSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgCiAgLy9mdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuIHRyYW5zYWN0aW9uIHRhcmdldCBpcyBhIGNvbnRyYWN0CiAgZnVuY3Rpb24gdHJhbnNmZXJUb0NvbnRyYWN0KGFkZHJlc3MgX3RvLCB1aW50IF92YWx1ZSwgYnl0ZXMgX2RhdGEpIHByaXZhdGUgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPCBfdmFsdWUpIHJldHVybiBmYWxzZTsKICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gc2FmZVN1YihiYWxhbmNlc1ttc2cuc2VuZGVyXSAsIF92YWx1ZSk7CiAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dICwgX3ZhbHVlKTsKICAgIENvbnRyYWN0UmVjZWl2ZXIgcmVjZWl2ZXIgPSBDb250cmFjdFJlY2VpdmVyKF90byk7CiAgICByZWNlaXZlci50b2tlbkZhbGxiYWNrKG1zZy5zZW5kZXIsIF92YWx1ZSwgX2RhdGEpOwogICAgVHJhbnNmZXIobXNnLnNlbmRlciwgX3RvLCBfdmFsdWUsIF9kYXRhKTsKICAgIHJldHVybiB0cnVlOwp9CgoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zKGJvb2wpIHsKCiAgICAgICAgaWYgKCBsb2NrZWQgJiYgbXNnLnNlbmRlciAhPSBzd2FwcGVyQWRkcmVzcyApIHJldHVybiBmYWxzZTsgCiAgICAgICAgaWYgKCBmcmVlemVkW19mcm9tXSB8fCBmcmVlemVkW190b10gKSByZXR1cm4gZmFsc2U7IC8vIENoZWNrIGlmIGRlc3RpbmF0aW9uIGFkZHJlc3MgaXMgZnJlZXplZAogICAgICAgIGlmICggYmFsYW5jZXNbX2Zyb21dIDwgX3ZhbHVlICkgcmV0dXJuIGZhbHNlOyAvLyBDaGVjayBpZiB0aGUgc2VuZGVyIGhhcyBlbm91Z2gKCQlpZiAoIF92YWx1ZSA+IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdICkgcmV0dXJuIGZhbHNlOyAvLyBDaGVjayBhbGxvd2FuY2UKCiAgICAgICAgYmFsYW5jZXNbX2Zyb21dID0gc2FmZVN1YihiYWxhbmNlc1tfZnJvbV0gLCBfdmFsdWUpOyAvLyBTdWJ0cmFjdCBmcm9tIHRoZSBzZW5kZXIKICAgICAgICBiYWxhbmNlc1tfdG9dID0gc2FmZUFkZChiYWxhbmNlc1tfdG9dICwgX3ZhbHVlKTsgLy8gQWRkIHRoZSBzYW1lIHRvIHRoZSByZWNpcGllbnQKCiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKCBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSAsIF92YWx1ZSApOwoKICAgICAgICBieXRlcyBtZW1vcnkgZW1wdHk7CgogICAgICAgIGlmICggaXNDb250cmFjdChfdG8pICkgewoJICAgICAgICBDb250cmFjdFJlY2VpdmVyIHJlY2VpdmVyID0gQ29udHJhY3RSZWNlaXZlcihfdG8pOwoJICAgIAlyZWNlaXZlci50b2tlbkZhbGxiYWNrKF9mcm9tLCBfdmFsdWUsIGVtcHR5KTsKCQl9CgogICAgICAgIFRyYW5zZmVyKF9mcm9tLCBfdG8sIF92YWx1ZSAsIGVtcHR5KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQgX3ZhbHVlKSByZXR1cm5zKGJvb2wpIHsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgICAgICBBcHByb3ZhbChtc2cuc2VuZGVyLCBfc3BlbmRlciwgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICAgIH0KfQovKioKICogQHRpdGxlIE1hdGgKICogQGRldiBBc3NvcnRlZCBtYXRoIG9wZXJhdGlvbnMKICovCgpsaWJyYXJ5IE1hdGggewogIGZ1bmN0aW9uIG1heDY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjY0KHVpbnQ2NCBhLCB1aW50NjQgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50NjQpIHsKICAgIHJldHVybiBhIDwgYiA/IGEgOiBiOwogIH0KCiAgZnVuY3Rpb24gbWF4MjU2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBhID49IGIgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIG1pbjI1Nih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICByZXR1cm4gYSA8IGIgPyBhIDogYjsKICB9Cn0KCi8qKgogKiBAdGl0bGUgU2FmZU1hdGgKICogQGRldiBNYXRoIG9wZXJhdGlvbnMgd2l0aCBzYWZldHkgY2hlY2tzIHRoYXQgdGhyb3cgb24gZXJyb3IKICovCmxpYnJhcnkgU2FmZU1hdGggewogIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICBpZiAoYSA9PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgdWludDI1NiBjID0gYSAqIGI7CiAgICBhc3NlcnQoYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIGRpdih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgLy8gYXNzZXJ0KGEgPT0gYiAqIGMgKyBhICUgYik7IC8vIFRoZXJlIGlzIG5vIGNhc2UgaW4gd2hpY2ggdGhpcyBkb2Vzbid0IGhvbGQKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHVpbnQyNTYgYyA9IGEgKyBiOwogICAgYXNzZXJ0KGMgPj0gYSk7CiAgICByZXR1cm4gYzsKICB9Cn0KCgovKioKICogQHRpdGxlIE93bmFibGUKICogQGRldiBUaGUgT3duYWJsZSBjb250cmFjdCBoYXMgYW4gb3duZXIgYWRkcmVzcywgYW5kIHByb3ZpZGVzIGJhc2ljIGF1dGhvcml6YXRpb24gY29udHJvbAogKiBmdW5jdGlvbnMsIHRoaXMgc2ltcGxpZmllcyB0aGUgaW1wbGVtZW50YXRpb24gb2YgInVzZXIgcGVybWlzc2lvbnMiLgogKi8KY29udHJhY3QgT3duYWJsZSB7CiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CgoKICBldmVudCBPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzIGluZGV4ZWQgcHJldmlvdXNPd25lciwgYWRkcmVzcyBpbmRleGVkIG5ld093bmVyKTsKCgogIC8qKgogICAqIEBkZXYgVGhlIE93bmFibGUgY29uc3RydWN0b3Igc2V0cyB0aGUgb3JpZ2luYWwgYG93bmVyYCBvZiB0aGUgY29udHJhY3QgdG8gdGhlIHNlbmRlcgogICAqIGFjY291bnQuCiAgICovCiAgZnVuY3Rpb24gT3duYWJsZSgpIHB1YmxpYyB7CiAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgfQoKCiAgLyoqCiAgICogQGRldiBUaHJvd3MgaWYgY2FsbGVkIGJ5IGFueSBhY2NvdW50IG90aGVyIHRoYW4gdGhlIG93bmVyLgogICAqLwogIG1vZGlmaWVyIG9ubHlPd25lcigpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcik7CiAgICBfOwogIH0KCgogIC8qKgogICAqIEBkZXYgQWxsb3dzIHRoZSBjdXJyZW50IG93bmVyIHRvIHRyYW5zZmVyIGNvbnRyb2wgb2YgdGhlIGNvbnRyYWN0IHRvIGEgbmV3T3duZXIuCiAgICogQHBhcmFtIG5ld093bmVyIFRoZSBhZGRyZXNzIHRvIHRyYW5zZmVyIG93bmVyc2hpcCB0by4KICAgKi8KICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcChhZGRyZXNzIG5ld093bmVyKSBwdWJsaWMgb25seU93bmVyIHsKICAgIHJlcXVpcmUobmV3T3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICBPd25lcnNoaXBUcmFuc2ZlcnJlZChvd25lciwgbmV3T3duZXIpOwogICAgb3duZXIgPSBuZXdPd25lcjsKICB9Cgp9CgoKLyoqCiAqIEB0aXRsZSBQYXVzYWJsZQogKiBAZGV2IEJhc2UgY29udHJhY3Qgd2hpY2ggYWxsb3dzIGNoaWxkcmVuIHRvIGltcGxlbWVudCBhbiBlbWVyZ2VuY3kgc3RvcCBtZWNoYW5pc20uCiAqLwpjb250cmFjdCBQYXVzYWJsZSBpcyBPd25hYmxlIHsKICBldmVudCBQYXVzZSgpOwogIGV2ZW50IFVucGF1c2UoKTsKCiAgYm9vbCBwdWJsaWMgcGF1c2VkID0gZmFsc2U7CgoKICAvKioKICAgKiBAZGV2IE1vZGlmaWVyIHRvIG1ha2UgYSBmdW5jdGlvbiBjYWxsYWJsZSBvbmx5IHdoZW4gdGhlIGNvbnRyYWN0IGlzIG5vdCBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlbk5vdFBhdXNlZCgpIHsKICAgIHJlcXVpcmUoIXBhdXNlZCk7CiAgICBfOwogIH0KCiAgLyoqCiAgICogQGRldiBNb2RpZmllciB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbGFibGUgb25seSB3aGVuIHRoZSBjb250cmFjdCBpcyBwYXVzZWQuCiAgICovCiAgbW9kaWZpZXIgd2hlblBhdXNlZCgpIHsKICAgIHJlcXVpcmUocGF1c2VkKTsKICAgIF87CiAgfQoKICAvKioKICAgKiBAZGV2IGNhbGxlZCBieSB0aGUgb3duZXIgdG8gcGF1c2UsIHRyaWdnZXJzIHN0b3BwZWQgc3RhdGUKICAgKi8KICBmdW5jdGlvbiBwYXVzZSgpIG9ubHlPd25lciB3aGVuTm90UGF1c2VkIHB1YmxpYyB7CiAgICBwYXVzZWQgPSB0cnVlOwogICAgUGF1c2UoKTsKICB9CgogIC8qKgogICAqIEBkZXYgY2FsbGVkIGJ5IHRoZSBvd25lciB0byB1bnBhdXNlLCByZXR1cm5zIHRvIG5vcm1hbCBzdGF0ZQogICAqLwogIGZ1bmN0aW9uIHVucGF1c2UoKSBvbmx5T3duZXIgd2hlblBhdXNlZCBwdWJsaWMgewogICAgcGF1c2VkID0gZmFsc2U7CiAgICBVbnBhdXNlKCk7CiAgfQp9Cgpjb250cmFjdCBEZWMgewogICAgZnVuY3Rpb24gZGVjaW1hbHMoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50OCk7Cn0KCmNvbnRyYWN0IEVSQzIwIHsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MsdWludDI1Nik7Cn0KCmNvbnRyYWN0IEtlZVRva2VuIHsKICAgIC8vIFN0dWIKCiAgICBmdW5jdGlvbiBpY29CYWxhbmNlT2YoYWRkcmVzcyBmcm9tLCBhZGRyZXNzIGljbykgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50KSA7CgoKfQoKY29udHJhY3QgS2VlSG9sZSB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIAogICAgS2VlVG9rZW4gIHRva2VuOwoKICAgIHVpbnQyNTYgICBwb3M7CiAgICB1aW50MjU2W10gc2xvdHM7CiAgICB1aW50MjU2W10gYm9udXNlczsKCiAgICB1aW50MjU2IHRocmVzaG9sZDsKICAgIHVpbnQyNTYgbWF4VG9rZW5zSW5UaWVyOwogICAgdWludDI1NiByYXRlOwogICAgdWludDI1NiB0b2tlbkRpdjsKCiAgICBmdW5jdGlvbiBLZWVIb2xlKCkgcHVibGljIHsKICAgICAgICB0b2tlbiA9IEtlZVRva2VuKDB4NzJEMzJhYzFjNUU2NkJmQzViMDg4MDYyNzFmOGVFRjkxNTU0NTE2NCk7CiAgICAgICAgc2xvdHMucHVzaCgxMDApOwogICAgICAgIHNsb3RzLnB1c2goMjAwKTsKICAgICAgICBzbG90cy5wdXNoKDUwMCk7CiAgICAgICAgc2xvdHMucHVzaCgxMjAwKTsKICAgICAgICBib251c2VzLnB1c2goNSk7CiAgICAgICAgYm9udXNlcy5wdXNoKDMpOwogICAgICAgIGJvbnVzZXMucHVzaCgyKTsKICAgICAgICBib251c2VzLnB1c2goMSk7CiAgICAgICAgdGhyZXNob2xkID0gNTsKICAgICAgICByYXRlID0gMTAwMDA7CiAgICAgICAgdG9rZW5EaXYgPSAxMDAwMDAwMDA7IC8vIDEwXjE4IC8gMTBeMTAKICAgICAgICBtYXhUb2tlbnNJblRpZXIgPSAyNTAwMCAqICgxMCAqKiAxMCk7CiAgICB9CgogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBib29sKSBoYXNQYXJ0aWNpcGF0ZWQ7CgogICAgLy8gZ2V0Qm9udXNBbW91bnQgLSBjYWxjdWxhdGVzIGFueSBib251cyBkdWUuCiAgICAvLyBvbmx5IG9uZSBib251cyBwZXIgYWNjb3VudAogICAgZnVuY3Rpb24gZ2V0Qm9udXNBbW91bnQodWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zICh1aW50MjU2IGJvbnVzKSB7CiAgICAgICAgaWYgKGhhc1BhcnRpY2lwYXRlZFttc2cuc2VuZGVyXSkKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgaWYgKCB0b2tlbi5pY29CYWxhbmNlT2YobXNnLnNlbmRlcix0aGlzKSA8IHRocmVzaG9sZCApCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIGlmIChwb3M+PXNsb3RzLmxlbmd0aCkKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgYm9udXMgPSAoYW1vdW50Lm11bChib251c2VzW3Bvc10pKS5kaXYoMTAwKTsKICAgICAgICBzbG90c1twb3NdLS07CiAgICAgICAgaWYgKHNsb3RzW3Bvc10gPT0gMCkgCiAgICAgICAgICAgIHBvcysrOwogICAgICAgIGJvbnVzID0gTWF0aC5taW4yNTYobWF4VG9rZW5zSW5UaWVyLGJvbnVzKTsKICAgICAgICBoYXNQYXJ0aWNpcGF0ZWRbbXNnLnNlbmRlcl0gPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBjb25zdCBiZWNhdXNlIGl0IHdyaXRlcyBoYXNQYXJ0aWNpcGF0ZWQKICAgIGZ1bmN0aW9uIGdldFRva2VuQW1vdW50KHVpbnQyNTYgZXRoRGVwb3NpdCkgcHVibGljIHJldHVybnMgKHVpbnQyNTYgbnVtVG9rZW5zKSB7CiAgICAgICAgbnVtVG9rZW5zID0gKGV0aERlcG9zaXQubXVsKHJhdGUpKS5kaXYodG9rZW5EaXYpOwogICAgICAgIG51bVRva2VucyA9IG51bVRva2Vucy5hZGQoZ2V0Qm9udXNBbW91bnQobnVtVG9rZW5zKSk7CiAgICB9CgoKfQoKY29udHJhY3QgR2VuZXZpZXZlQ3Jvd2RzYWxlIGlzIE93bmFibGUsIFBhdXNhYmxlLCBLZWVIb2xlIHsKICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKCiAgLy8gVGhlIHRva2VuIGJlaW5nIHNvbGQKICBHWFZDVG9rZW4gcHVibGljIHRva2VuOwogIEtlZUhvbGUgcHVibGljIGtlZUNyeXRva2VuOwoKICAvLyBvd25lciBvZiBHWFZDIHRva2VucwogIGFkZHJlc3MgcHVibGljIHRva2VuU3BlbmRlcjsKCiAgLy8gc3RhcnQgYW5kIGVuZCB0aW1lcwogIHVpbnQyNTYgcHVibGljIHN0YXJ0VGltZXN0YW1wOwogIHVpbnQyNTYgcHVibGljIGVuZFRpbWVzdGFtcDsKCiAgLy8gYWRkcmVzcyB3aGVyZSBmdW5kcyBhcmUgY29sbGVjdGVkCiAgYWRkcmVzcyBwdWJsaWMgaGFyZHdhcmVXYWxsZXQ7CgogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGRlcG9zaXRzOwogIHVpbnQyNTYgcHVibGljIG51bWJlck9mUHVyY2hhc2VyczsKCiAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkgY29tZXMgZnJvbSBrZWVVc2VyCiAgCiAvLyB1aW50MjU2IHB1YmxpYyByYXRlOwoKICAvLyBhbW91bnQgb2YgcmFpc2VkIG1vbmV5IGluIHdlaQogIHVpbnQyNTYgcHVibGljIHdlaVJhaXNlZDsKICB1aW50MjU2IHB1YmxpYyB3ZWlUb1JhaXNlOwogIHVpbnQyNTYgcHVibGljIHRva2Vuc1NvbGQ7CgogIHVpbnQyNTYgcHVibGljIG1pbkNvbnRyaWJ1dGlvbiA9IDEgZmlubmV5OwoKCiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKICBldmVudCBNYWluU2FsZUNsb3NlZCgpOwoKICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWRJblByZXNhbGUgID0gMCBldGhlcjsKICB1aW50MjU2IHB1YmxpYyB0b2tlbnNTb2xkSW5QcmVzYWxlID0gMCAqIDEwICoqIDE4OwoKLy8gUkVHSVNUUlkgRlVOQ1RJT05TIAoKICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyByZWdpc3RlcmVkOwogIGFkZHJlc3MgcHVibGljIHJlZ2lzdHJhcjsKICBmdW5jdGlvbiBzZXRSZWcoYWRkcmVzcyBfbmV3UmVnKSBleHRlcm5hbCBvbmx5T3duZXIgewogICAgcmVnaXN0cmFyID0gX25ld1JlZzsKICB9CgogIGZ1bmN0aW9uIHJlZ2lzdGVyKGFkZHJlc3MgcGFydGljaXBhbnQpIGV4dGVybmFsIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSByZWdpc3RyYXIpOwogICAgcmVnaXN0ZXJlZFtwYXJ0aWNpcGFudF0gPSB0cnVlOwogIH0KCi8vIEVORCBPRiBSRUdJU1RSWSBGVU5DVElPTlMKCiAgZnVuY3Rpb24gc2V0Q29pbihHWFZDVG9rZW4gX2NvaW4pIGV4dGVybmFsIG9ubHlPd25lciB7CiAgICB0b2tlbiA9IF9jb2luOwogIH0KCiAgZnVuY3Rpb24gc2V0V2FsbGV0KGFkZHJlc3MgX3dhbGxldCkgZXh0ZXJuYWwgb25seU93bmVyIHsKICAgIGhhcmR3YXJlV2FsbGV0ID0gX3dhbGxldDsKICB9CgogIGZ1bmN0aW9uIEdlbmV2aWV2ZUNyb3dkc2FsZSgpIHB1YmxpYyB7CiAgICB0b2tlbiA9IEdYVkNUb2tlbigweDIyRjBBRjhENzg4NTFiNzJFRTc5OWUwNUY1NEE3NzAwMTU4NkIxOEEpOwogICAgc3RhcnRUaW1lc3RhbXAgPSAxNTE2NDUzMjAwOwogICAgZW5kVGltZXN0YW1wID0gMTUxOTU2MzYwMDsKICAgIGhhcmR3YXJlV2FsbGV0ID0gMHg2QmM2M2QxMkQ1QUFFQmU0ZGM4Njc4NTA1M2Q3RTRmMDkwNzdiODlFOwogICAgdG9rZW5zU29sZEluUHJlc2FsZSA9IDA7IC8vIDE4NzUwMAogICAgd2VpVG9SYWlzZSA9IDEwMDAwICogKDEwICoqIDE4KTsKICAgIHRva2VuU3BlbmRlciA9IDB4NjgzNTcwNkU4ZTU4NTQ0ZGViNmM0RUM1OWQ5ODE1ZkY2QzIwNDE3ZjsgLy8gQmFsID0gMTA0NjA1ODM5LjY2NTgwNTYzNCBHWFZDCgogICAgbWluQ29udHJpYnV0aW9uID0gMSBmaW5uZXk7CiAgICByZXF1aXJlKHN0YXJ0VGltZXN0YW1wID49IG5vdyk7CiAgICByZXF1aXJlKGVuZFRpbWVzdGFtcCA+PSBzdGFydFRpbWVzdGFtcCk7CiAgfQoKICAvLyBjaGVjayBpZiB2YWxpZCBwdXJjaGFzZQogIG1vZGlmaWVyIHZhbGlkUHVyY2hhc2UgewogICAgLy8gUkVHSVNUUlkgUkVRVUlSRU1FTlQKICAgIHJlcXVpcmUocmVnaXN0ZXJlZFttc2cuc2VuZGVyXSk7CiAgICAvLyBFTkQgT0YgUkVHSVNUUlkgUkVRVUlSRU1FTlQKICAgIHJlcXVpcmUobm93ID49IHN0YXJ0VGltZXN0YW1wKTsKICAgIHJlcXVpcmUobm93IDwgZW5kVGltZXN0YW1wKTsKICAgIHJlcXVpcmUobXNnLnZhbHVlID49IG1pbkNvbnRyaWJ1dGlvbik7CiAgICByZXF1aXJlKHdlaVJhaXNlZC5hZGQobXNnLnZhbHVlKSA8PSB3ZWlUb1JhaXNlKTsKICAgIF87CiAgfQoKICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGV2ZW50IGhhcyBlbmRlZAogIGZ1bmN0aW9uIGhhc0VuZGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wpIHsKICAgIGlmIChub3cgPiBlbmRUaW1lc3RhbXApIAogICAgICAgIHJldHVybiB0cnVlOwogICAgaWYgKHdlaVJhaXNlZCA+PSB3ZWlUb1JhaXNlLnN1YihtaW5Db250cmlidXRpb24pKQogICAgICByZXR1cm4gdHJ1ZTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIGxvdyBsZXZlbCB0b2tlbiBwdXJjaGFzZSBmdW5jdGlvbgogIGZ1bmN0aW9uIGJ1eVRva2VucyhhZGRyZXNzIGJlbmVmaWNpYXJ5LCB1aW50MjU2IHdlaUFtb3VudCkgCiAgICBpbnRlcm5hbCAKICAgIHZhbGlkUHVyY2hhc2UgCiAgICB3aGVuTm90UGF1c2VkCiAgewoKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gMHgwKTsKCiAgICBpZiAoZGVwb3NpdHNbYmVuZWZpY2lhcnldID09IDApIHsKICAgICAgICBudW1iZXJPZlB1cmNoYXNlcnMrKzsKICAgIH0KICAgIGRlcG9zaXRzW2JlbmVmaWNpYXJ5XSA9IHdlaUFtb3VudC5hZGQoZGVwb3NpdHNbYmVuZWZpY2lhcnldKTsKICAgIAogICAgLy8gY2FsY3VsYXRlIHRva2VuIGFtb3VudCB0byBiZSBjcmVhdGVkCiAgICB1aW50MjU2IHRva2VucyA9IGdldFRva2VuQW1vdW50KHdlaUFtb3VudCk7CgogICAgLy8gdXBkYXRlIHN0YXRlCiAgICB3ZWlSYWlzZWQgPSB3ZWlSYWlzZWQuYWRkKHdlaUFtb3VudCk7CiAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQodG9rZW5zKTsKCiAgICByZXF1aXJlKHRva2VuLnRyYW5zZmVyRnJvbSh0b2tlblNwZW5kZXIsIGJlbmVmaWNpYXJ5LCB0b2tlbnMpKTsKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zKTsKICAgIGhhcmR3YXJlV2FsbGV0LnRyYW5zZmVyKHRoaXMuYmFsYW5jZSk7CiAgfQoKICAvLyBmYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBidXkgdG9rZW5zCiAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgYnV5VG9rZW5zKG1zZy5zZW5kZXIsbXNnLnZhbHVlKTsKICB9CgogICAgZnVuY3Rpb24gZW1lcmdlbmN5RVJDMjBEcmFpbiggRVJDMjAgdGhlVG9rZW4sIHVpbnQgYW1vdW50ICkgewogICAgICAgIHRoZVRva2VuLnRyYW5zZmVyKG93bmVyLCBhbW91bnQpOwogICAgfQoKCn0='.
	

]
