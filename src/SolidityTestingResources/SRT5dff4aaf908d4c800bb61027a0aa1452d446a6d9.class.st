Class {
	#name : #SRT5dff4aaf908d4c800bb61027a0aa1452d446a6d9,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT5dff4aaf908d4c800bb61027a0aa1452d446a6d9 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgovKioKICogQHRpdGxlIFNhZmVNYXRoCiAqIEBkZXYgTWF0aCBvcGVyYXRpb25zIHdpdGggc2FmZXR5IGNoZWNrcyB0aGF0IHRocm93IG9uIGVycm9yCiAqLwpsaWJyYXJ5IFNhZmVNYXRoIHsKCiAgICBmdW5jdGlvbiBtdWwodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHVpbnQyNTYgYyA9IGEgKiBiOwogICAgICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gZGl2KHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICAvLyBhc3NlcnQoYiA+IDApOyAvLyBTb2xpZGl0eSBhdXRvbWF0aWNhbGx5IHRocm93cyB3aGVuIGRpdmlkaW5nIGJ5IDAKICAgICAgICB1aW50MjU2IGMgPSBhIC8gYjsKICAgICAgICAvLyBhc3NlcnQoYSA9PSBiICogYyArIGEgJSBiKTsgLy8gVGhlcmUgaXMgbm8gY2FzZSBpbiB3aGljaCB0aGlzIGRvZXNuJ3QgaG9sZAogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHN1Yih1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgYXNzZXJ0KGIgPD0gYSk7CiAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSArIGI7CiAgICAgICAgYXNzZXJ0KGMgPj0gYSk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9Cn0KCmNvbnRyYWN0IFN1cGVyT3duZXJzIHsKCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjE7CiAgICBhZGRyZXNzIHB1YmxpYyBwZW5kaW5nT3duZXIxOwogICAgCiAgICBhZGRyZXNzIHB1YmxpYyBvd25lcjI7CiAgICBhZGRyZXNzIHB1YmxpYyBwZW5kaW5nT3duZXIyOwoKICAgIGZ1bmN0aW9uIFN1cGVyT3duZXJzKGFkZHJlc3MgX293bmVyMSwgYWRkcmVzcyBfb3duZXIyKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShfb3duZXIxICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG93bmVyMSA9IF9vd25lcjE7CiAgICAgICAgCiAgICAgICAgcmVxdWlyZShfb3duZXIyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIG93bmVyMiA9IF9vd25lcjI7CiAgICB9CgogICAgbW9kaWZpZXIgb25seVN1cGVyT3duZXIxKCkgewogICAgICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBvd25lcjEpOwogICAgICAgIF87CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIG9ubHlTdXBlck93bmVyMigpIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIyKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvKiogQW55IG9mIHRoZSBvd25lcnMgY2FuIGV4ZWN1dGUgdGhpcy4gKi8KICAgIG1vZGlmaWVyIG9ubHlTdXBlck93bmVyKCkgewogICAgICAgIHJlcXVpcmUoaXNTdXBlck93bmVyKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvKiogSXMgbXNnLnNlbmRlciBhbnkgb2YgdGhlIG93bmVycy4gKi8KICAgIGZ1bmN0aW9uIGlzU3VwZXJPd25lcihhZGRyZXNzIF9hZGRyKSBwdWJsaWMgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIF9hZGRyID09IG93bmVyMSB8fCBfYWRkciA9PSBvd25lcjI7CiAgICB9CgogICAgLyoqIAogICAgICogU2FmZSB0cmFuc2ZlciBvZiBvd25lcnNoaXAgaW4gMiBzdGVwcy4gT25jZSBjYWxsZWQsIGEgbmV3T3duZXIgbmVlZHMgCiAgICAgKiB0byBjYWxsIGNsYWltT3duZXJzaGlwKCkgdG8gcHJvdmUgb3duZXJzaGlwLgogICAgICovCiAgICBmdW5jdGlvbiB0cmFuc2Zlck93bmVyc2hpcDEoYWRkcmVzcyBfbmV3T3duZXIxKSBvbmx5U3VwZXJPd25lcjEgcHVibGljIHsKICAgICAgICBwZW5kaW5nT3duZXIxID0gX25ld093bmVyMTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdHJhbnNmZXJPd25lcnNoaXAyKGFkZHJlc3MgX25ld093bmVyMikgb25seVN1cGVyT3duZXIyIHB1YmxpYyB7CiAgICAgICAgcGVuZGluZ093bmVyMiA9IF9uZXdPd25lcjI7CiAgICB9CgogICAgZnVuY3Rpb24gY2xhaW1Pd25lcnNoaXAxKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcGVuZGluZ093bmVyMSk7CiAgICAgICAgb3duZXIxID0gcGVuZGluZ093bmVyMTsKICAgICAgICBwZW5kaW5nT3duZXIxID0gYWRkcmVzcygwKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xhaW1Pd25lcnNoaXAyKCkgcHVibGljIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gcGVuZGluZ093bmVyMik7CiAgICAgICAgb3duZXIyID0gcGVuZGluZ093bmVyMjsKICAgICAgICBwZW5kaW5nT3duZXIyID0gYWRkcmVzcygwKTsKICAgIH0KfQoKY29udHJhY3QgTXVsdGlPd25hYmxlIGlzIFN1cGVyT3duZXJzIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IGJvb2wpIHB1YmxpYyBvd25lck1hcDsKICAgIGFkZHJlc3NbXSBwdWJsaWMgb3duZXJIaXN0b3J5OwoKICAgIGV2ZW50IE93bmVyQWRkZWRFdmVudChhZGRyZXNzIGluZGV4ZWQgX25ld093bmVyKTsKICAgIGV2ZW50IE93bmVyUmVtb3ZlZEV2ZW50KGFkZHJlc3MgaW5kZXhlZCBfb2xkT3duZXIpOwoKICAgIGZ1bmN0aW9uIE11bHRpT3duYWJsZShhZGRyZXNzIF9vd25lcjEsIGFkZHJlc3MgX293bmVyMikgCiAgICAgICAgU3VwZXJPd25lcnMoX293bmVyMSwgX293bmVyMikgaW50ZXJuYWwge30KCiAgICBtb2RpZmllciBvbmx5T3duZXIoKSB7CiAgICAgICAgcmVxdWlyZShpc093bmVyKG1zZy5zZW5kZXIpKTsKICAgICAgICBfOwogICAgfQoKICAgIGZ1bmN0aW9uIGlzT3duZXIoYWRkcmVzcyBvd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBpc1N1cGVyT3duZXIob3duZXIpIHx8IG93bmVyTWFwW293bmVyXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gb3duZXJIaXN0b3J5Q291bnQoKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIG93bmVySGlzdG9yeS5sZW5ndGg7CiAgICB9CgogICAgLy8gQWRkIGV4dHJhIG93bmVyCiAgICBmdW5jdGlvbiBhZGRPd25lcihhZGRyZXNzIG93bmVyKSBvbmx5U3VwZXJPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZSghb3duZXJNYXBbb3duZXJdKTsKICAgICAgICBvd25lck1hcFtvd25lcl0gPSB0cnVlOwogICAgICAgIG93bmVySGlzdG9yeS5wdXNoKG93bmVyKTsKICAgICAgICBPd25lckFkZGVkRXZlbnQob3duZXIpOwogICAgfQoKICAgIC8vIFJlbW92ZSBleHRyYSBvd25lcgogICAgZnVuY3Rpb24gcmVtb3ZlT3duZXIoYWRkcmVzcyBvd25lcikgb25seVN1cGVyT3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKG93bmVyTWFwW293bmVyXSk7CiAgICAgICAgb3duZXJNYXBbb3duZXJdID0gZmFsc2U7CiAgICAgICAgT3duZXJSZW1vdmVkRXZlbnQob3duZXIpOwogICAgfQp9Cgpjb250cmFjdCBQYXVzYWJsZSBpcyBNdWx0aU93bmFibGUgewoKICAgIGJvb2wgcHVibGljIHBhdXNlZDsKCiAgICBtb2RpZmllciBpZk5vdFBhdXNlZCB7CiAgICAgICAgcmVxdWlyZSghcGF1c2VkKTsKICAgICAgICBfOwogICAgfQoKICAgIG1vZGlmaWVyIGlmUGF1c2VkIHsKICAgICAgICByZXF1aXJlKHBhdXNlZCk7CiAgICAgICAgXzsKICAgIH0KCiAgICAvLyBDYWxsZWQgYnkgdGhlIG93bmVyIG9uIGVtZXJnZW5jeSwgdHJpZ2dlcnMgcGF1c2VkIHN0YXRlCiAgICBmdW5jdGlvbiBwYXVzZSgpIGV4dGVybmFsIG9ubHlTdXBlck93bmVyIHsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgfQoKICAgIC8vIENhbGxlZCBieSB0aGUgb3duZXIgb24gZW5kIG9mIGVtZXJnZW5jeSwgcmV0dXJucyB0byBub3JtYWwgc3RhdGUKICAgIGZ1bmN0aW9uIHJlc3VtZSgpIGV4dGVybmFsIG9ubHlTdXBlck93bmVyIGlmUGF1c2VkIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgIH0KfQoKY29udHJhY3QgRVJDMjAgewoKICAgIHVpbnQyNTYgcHVibGljIHRvdGFsU3VwcGx5OwoKICAgIGZ1bmN0aW9uIGJhbGFuY2VPZihhZGRyZXNzIF9vd25lcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiBiYWxhbmNlKTsKCiAgICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAgIGZ1bmN0aW9uIGFsbG93YW5jZShhZGRyZXNzIF9vd25lciwgYWRkcmVzcyBfc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NiByZW1haW5pbmcpOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogICAgCiAgICBldmVudCBBcHByb3ZhbChhZGRyZXNzIGluZGV4ZWQgX293bmVyLCBhZGRyZXNzIGluZGV4ZWQgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKTsKfQoKY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBFUkMyMCB7CiAgICAKICAgIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50OwoKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKICAgIAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfb3duZXIpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYgYmFsYW5jZSkgewogICAgICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF90byAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1YihfdmFsdWUpOwogICAgICAgIGJhbGFuY2VzW190b10gPSBiYWxhbmNlc1tfdG9dLmFkZChfdmFsdWUpOwogICAgICAgIFRyYW5zZmVyKG1zZy5zZW5kZXIsIF90bywgX3ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8gQGRldiBBbGxvd3MgYWxsb3dlZCB0aGlyZCBwYXJ0eSB0byB0cmFuc2ZlciB0b2tlbnMgZnJvbSBvbmUgYWRkcmVzcyB0byBhbm90aGVyLiBSZXR1cm5zIHN1Y2Nlc3MuCiAgICAvLy8gQHBhcmFtIF9mcm9tIEFkZHJlc3MgZnJvbSB3aGVyZSB0b2tlbnMgYXJlIHdpdGhkcmF3bi4KICAgIC8vLyBAcGFyYW0gX3RvIEFkZHJlc3MgdG8gd2hlcmUgdG9rZW5zIGFyZSBzZW50LgogICAgLy8vIEBwYXJhbSBfdmFsdWUgTnVtYmVyIG9mIHRva2VucyB0byB0cmFuc2Zlci4KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tfZnJvbV0pOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdKTsKICAgICAgICAKICAgICAgICBiYWxhbmNlc1tfdG9dID0gYmFsYW5jZXNbX3RvXS5hZGQoX3ZhbHVlKTsKICAgICAgICBiYWxhbmNlc1tfZnJvbV0gPSBiYWxhbmNlc1tfZnJvbV0uc3ViKF92YWx1ZSk7CiAgICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFNldHMgYXBwcm92ZWQgYW1vdW50IG9mIHRva2VucyBmb3Igc3BlbmRlci4gUmV0dXJucyBzdWNjZXNzLgogICAgLy8vIEBwYXJhbSBfc3BlbmRlciBBZGRyZXNzIG9mIGFsbG93ZWQgYWNjb3VudC4KICAgIC8vLyBAcGFyYW0gX3ZhbHVlIE51bWJlciBvZiBhcHByb3ZlZCB0b2tlbnMuCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGFsbG93ZWRbbXNnLnNlbmRlcl1bX3NwZW5kZXJdID0gX3ZhbHVlOwogICAgICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vLyBAZGV2IFJldHVybnMgbnVtYmVyIG9mIGFsbG93ZWQgdG9rZW5zIGZvciBnaXZlbiBhZGRyZXNzLgogICAgLy8vIEBwYXJhbSBfb3duZXIgQWRkcmVzcyBvZiB0b2tlbiBvd25lci4KICAgIC8vLyBAcGFyYW0gX3NwZW5kZXIgQWRkcmVzcyBvZiB0b2tlbiBzcGVuZGVyLgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZykgewogICAgICAgIHJldHVybiBhbGxvd2VkW19vd25lcl1bX3NwZW5kZXJdOwogICAgfQp9Cgpjb250cmFjdCBDb21tb25Ub2tlbiBpcyBTdGFuZGFyZFRva2VuLCBNdWx0aU93bmFibGUgewoKICAgIHN0cmluZyBwdWJsaWMgbmFtZTsKICAgIHN0cmluZyBwdWJsaWMgc3ltYm9sOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICB1aW50OCBwdWJsaWMgZGVjaW1hbHMgPSAxODsKICAgIHN0cmluZyBwdWJsaWMgdmVyc2lvbiA9ICd2MC4xJzsKCiAgICBhZGRyZXNzIHB1YmxpYyBzZWxsZXI7ICAgICAvLyBUaGUgbWFpbiBhY2NvdW50IHRoYXQgaG9sZHMgYWxsIHRva2VucyBhdCB0aGUgYmVnaW5uaW5nIGFuZCBkdXJpbmcgdG9rZW5zYWxlLgoKICAgIHVpbnQyNTYgcHVibGljIHNhbGVMaW1pdDsgIC8vIChlMTgpIEhvdyBtYW55IHRva2VucyBjYW4gYmUgc29sZCBpbiB0b3RhbCB0aHJvdWdoIGFsbCB0aWVycyBvciB0b2tlbnNhbGVzLgogICAgdWludDI1NiBwdWJsaWMgdG9rZW5zU29sZDsgLy8gKGUxOCkgTnVtYmVyIG9mIHRva2VucyBzb2xkIHRocm91Z2ggYWxsIHRpZXJzIG9yIHRva2Vuc2FsZXMuCiAgICB1aW50MjU2IHB1YmxpYyB0b3RhbFNhbGVzOyAvLyBUb3RhbCBudW1iZXIgb2Ygc2FsZXMgKGluY2x1ZGluZyBleHRlcm5hbCBzYWxlcykgbWFkZSB0aHJvdWdoIGFsbCB0aWVycyBvciB0b2tlbnNhbGVzLgoKICAgIC8vIExvY2sgdGhlIHRyYW5zZmVyIGZ1bmN0aW9ucyBkdXJpbmcgdG9rZW5zYWxlcyB0byBwcmV2ZW50IHByaWNlIHNwZWN1bGF0aW9ucy4KICAgIGJvb2wgcHVibGljIGxvY2tlZCA9IHRydWU7CiAgICAKICAgIGV2ZW50IFNlbGxFdmVudChhZGRyZXNzIGluZGV4ZWQgX3NlbGxlciwgYWRkcmVzcyBpbmRleGVkIF9idXllciwgdWludDI1NiBfdmFsdWUpOwogICAgZXZlbnQgQ2hhbmdlU2VsbGVyRXZlbnQoYWRkcmVzcyBpbmRleGVkIF9vbGRTZWxsZXIsIGFkZHJlc3MgaW5kZXhlZCBfbmV3U2VsbGVyKTsKICAgIGV2ZW50IEJ1cm4oYWRkcmVzcyBpbmRleGVkIF9idXJuZXIsIHVpbnQyNTYgX3ZhbHVlKTsKICAgIGV2ZW50IFVubG9jaygpOwoKICAgIGZ1bmN0aW9uIENvbW1vblRva2VuKAogICAgICAgIGFkZHJlc3MgX293bmVyMSwKICAgICAgICBhZGRyZXNzIF9vd25lcjIsCiAgICAgICAgYWRkcmVzcyBfc2VsbGVyLAogICAgICAgIHN0cmluZyBfbmFtZSwKICAgICAgICBzdHJpbmcgX3N5bWJvbCwKICAgICAgICB1aW50MjU2IF90b3RhbFN1cHBseU5vRGVjaW1hbHMsCiAgICAgICAgdWludDI1NiBfc2FsZUxpbWl0Tm9EZWNpbWFscwogICAgKSBNdWx0aU93bmFibGUoX293bmVyMSwgX293bmVyMikgcHVibGljIHsKCiAgICAgICAgcmVxdWlyZShfc2VsbGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoX3RvdGFsU3VwcGx5Tm9EZWNpbWFscyA+IDApOwogICAgICAgIHJlcXVpcmUoX3NhbGVMaW1pdE5vRGVjaW1hbHMgPiAwKTsKCiAgICAgICAgc2VsbGVyID0gX3NlbGxlcjsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICB0b3RhbFN1cHBseSA9IF90b3RhbFN1cHBseU5vRGVjaW1hbHMgKiAxZTE4OwogICAgICAgIHNhbGVMaW1pdCA9IF9zYWxlTGltaXROb0RlY2ltYWxzICogMWUxODsKICAgICAgICBiYWxhbmNlc1tzZWxsZXJdID0gdG90YWxTdXBwbHk7CgogICAgICAgIFRyYW5zZmVyKDB4MCwgc2VsbGVyLCB0b3RhbFN1cHBseSk7CiAgICB9CiAgICAKICAgIG1vZGlmaWVyIGlmVW5sb2NrZWQoYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8pIHsKICAgICAgICByZXF1aXJlKCFsb2NrZWQgfHwgaXNPd25lcihfZnJvbSkgfHwgaXNPd25lcihfdG8pKTsKICAgICAgICBfOwogICAgfQogICAgCiAgICAvKiogQ2FuIGJlIGNhbGxlZCBvbmNlIGJ5IHN1cGVyIG93bmVyLiAqLwogICAgZnVuY3Rpb24gdW5sb2NrKCkgb25seVN1cGVyT3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKGxvY2tlZCk7CiAgICAgICAgbG9ja2VkID0gZmFsc2U7CiAgICAgICAgVW5sb2NrKCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlU2VsbGVyKGFkZHJlc3MgbmV3U2VsbGVyKSBvbmx5U3VwZXJPd25lciBwdWJsaWMgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJlcXVpcmUobmV3U2VsbGVyICE9IGFkZHJlc3MoMCkpOwogICAgICAgIHJlcXVpcmUoc2VsbGVyICE9IG5ld1NlbGxlcik7CgogICAgICAgIGFkZHJlc3Mgb2xkU2VsbGVyID0gc2VsbGVyOwogICAgICAgIHVpbnQyNTYgdW5zb2xkVG9rZW5zID0gYmFsYW5jZXNbb2xkU2VsbGVyXTsKICAgICAgICBiYWxhbmNlc1tvbGRTZWxsZXJdID0gMDsKICAgICAgICBiYWxhbmNlc1tuZXdTZWxsZXJdID0gYmFsYW5jZXNbbmV3U2VsbGVyXS5hZGQodW5zb2xkVG9rZW5zKTsKICAgICAgICBUcmFuc2ZlcihvbGRTZWxsZXIsIG5ld1NlbGxlciwgdW5zb2xkVG9rZW5zKTsKCiAgICAgICAgc2VsbGVyID0gbmV3U2VsbGVyOwogICAgICAgIENoYW5nZVNlbGxlckV2ZW50KG9sZFNlbGxlciwgbmV3U2VsbGVyKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsTm9EZWNpbWFscyhhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHNlbGwoX3RvLCBfdmFsdWUgKiAxZTE4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxsKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgb25seU93bmVyIHB1YmxpYyByZXR1cm5zIChib29sKSB7CgogICAgICAgIC8vIENoZWNrIHRoYXQgd2UgYXJlIG5vdCBvdXQgb2YgbGltaXQgYW5kIHN0aWxsIGNhbiBzZWxsIHRva2VuczoKICAgICAgICByZXF1aXJlKHRva2Vuc1NvbGQuYWRkKF92YWx1ZSkgPD0gc2FsZUxpbWl0KTsKCiAgICAgICAgcmVxdWlyZShfdG8gIT0gYWRkcmVzcygwKSk7CiAgICAgICAgcmVxdWlyZShfdmFsdWUgPiAwKTsKICAgICAgICByZXF1aXJlKF92YWx1ZSA8PSBiYWxhbmNlc1tzZWxsZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbc2VsbGVyXSA9IGJhbGFuY2VzW3NlbGxlcl0uc3ViKF92YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbX3RvXSA9IGJhbGFuY2VzW190b10uYWRkKF92YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIoc2VsbGVyLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHRvdGFsU2FsZXMrKzsKICAgICAgICB0b2tlbnNTb2xkID0gdG9rZW5zU29sZC5hZGQoX3ZhbHVlKTsKICAgICAgICBTZWxsRXZlbnQoc2VsbGVyLCBfdG8sIF92YWx1ZSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFVudGlsIGFsbCB0b2tlbnMgYXJlIHNvbGQsIHRva2VucyBjYW4gYmUgdHJhbnNmZXJlZCB0by9mcm9tIG93bmVyJ3MgYWNjb3VudHMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgaWZVbmxvY2tlZChtc2cuc2VuZGVyLCBfdG8pIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLnRyYW5zZmVyKF90bywgX3ZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVudGlsIGFsbCB0b2tlbnMgYXJlIHNvbGQsIHRva2VucyBjYW4gYmUgdHJhbnNmZXJlZCB0by9mcm9tIG93bmVyJ3MgYWNjb3VudHMuCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIF9mcm9tLCBhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIGlmVW5sb2NrZWQoX2Zyb20sIF90bykgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc3VwZXIudHJhbnNmZXJGcm9tKF9mcm9tLCBfdG8sIF92YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYnVybih1aW50MjU2IF92YWx1ZSkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKF92YWx1ZSA+IDApOwogICAgICAgIHJlcXVpcmUoX3ZhbHVlIDw9IGJhbGFuY2VzW21zZy5zZW5kZXJdKTsKCiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSBiYWxhbmNlc1ttc2cuc2VuZGVyXS5zdWIoX3ZhbHVlKSA7CiAgICAgICAgdG90YWxTdXBwbHkgPSB0b3RhbFN1cHBseS5zdWIoX3ZhbHVlKTsKICAgICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCAweDAsIF92YWx1ZSk7CiAgICAgICAgQnVybihtc2cuc2VuZGVyLCBfdmFsdWUpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoKY29udHJhY3QgUmFjZVRva2VuIGlzIENvbW1vblRva2VuIHsKICAgIAogICAgZnVuY3Rpb24gUmFjZVRva2VuKCkgQ29tbW9uVG9rZW4oCiAgICAgICAgMHgyMjlCOUVmODBEMjVBN2U3NjQ4YjE3ZTJjNTk4ODA1ZDA0MmY5ZTU2LCAvLyBfX09XTkVSMV9fCiAgICAgICAgMHhjZDdjRjFENjEzRDU5NzQ4NzZBZkJmZDYxMkVENkFGZDk0MDkzY2U3LCAvLyBfX09XTkVSMl9fCiAgICAgICAgMHgyODIxZTE0ODZENjA0NTY2ODQyRkYyN0Y2MjZhRjEzM0ZkZEQ1Zjg5LCAvLyBfX1NFTExFUl9fCiAgICAgICAgJ0NvaW4gUmFjZScsCiAgICAgICAgJ1JBQ0UnLAogICAgICAgIDEwMCAqIDFlNiwgLy8gMTAwbSB0b2tlbnMgaW4gdG90YWwuCiAgICAgICAgNzAgKiAxZTYgICAvLyA3MG0gdG9rZW5zIGZvciBzYWxlLgogICAgKSBwdWJsaWMge30KfQoKY29udHJhY3QgQ29tbW9uVG9rZW5zYWxlIGlzIE11bHRpT3duYWJsZSwgUGF1c2FibGUgewogICAgCiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDsKICAgIAogICAgdWludCBwdWJsaWMgYmFsYW5jZTE7CiAgICB1aW50IHB1YmxpYyBiYWxhbmNlMjsKICAgIAogICAgLy8gVG9rZW4gY29udHJhY3QgcmVmZXJlbmNlLgogICAgUmFjZVRva2VuIHB1YmxpYyB0b2tlbjsKCiAgICB1aW50IHB1YmxpYyBtaW5QYXltZW50V2VpID0gMC4wMDEgZXRoZXI7CiAgICB1aW50IHB1YmxpYyB0b2tlbnNQZXJXZWkgPSAxNTAwMDsKICAgIHVpbnQgcHVibGljIG1heENhcFRva2VucyA9IDYgKiAxZTYgZXRoZXI7IC8vIDZtIHRva2VucwogICAgCiAgICAvLyBTdGF0cyBmb3IgY3VycmVudCB0b2tlbnNhbGU6CiAgICAKICAgIHVpbnQgcHVibGljIHRvdGFsVG9rZW5zU29sZDsgIC8vIFRvdGFsIGFtb3VudCBvZiB0b2tlbnMgc29sZCBkdXJpbmcgdGhpcyB0b2tlbnNhbGUuCiAgICB1aW50IHB1YmxpYyB0b3RhbFdlaVJlY2VpdmVkOyAvLyBUb3RhbCBhbW91bnQgb2Ygd2VpIHJlY2VpdmVkIGR1cmluZyB0aGlzIHRva2Vuc2FsZS4KICAgIAogICAgLy8gVGhpcyB3aWxsIGFsbG93IGFub3RoZXIgY29udHJhY3QgdG8gY2hlY2sgd2hldGhlciBFVEggYWRkcmVzcyBpcyBhIGJ1eWVyIGluIHRoaXMgc2FsZS4KICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gYm9vbCkgcHVibGljIGlzQnV5ZXI7CiAgICAKICAgIGV2ZW50IENoYW5nZVRva2VuRXZlbnQoYWRkcmVzcyBpbmRleGVkIF9vbGRBZGRyZXNzLCBhZGRyZXNzIGluZGV4ZWQgX25ld0FkZHJlc3MpOwogICAgZXZlbnQgQ2hhbmdlTWF4Q2FwVG9rZW5zRXZlbnQodWludCBfb2xkTWF4Q2FwLCB1aW50IF9uZXdNYXhDYXApOwogICAgZXZlbnQgQ2hhbmdlVG9rZW5QcmljZUV2ZW50KHVpbnQgX29sZFByaWNlLCB1aW50IF9uZXdQcmljZSk7CiAgICBldmVudCBSZWNlaXZlRXRoRXZlbnQoYWRkcmVzcyBpbmRleGVkIF9idXllciwgdWludDI1NiBfYW1vdW50V2VpKTsKICAgIAogICAgZnVuY3Rpb24gQ29tbW9uVG9rZW5zYWxlKAogICAgICAgIGFkZHJlc3MgX293bmVyMSwKICAgICAgICBhZGRyZXNzIF9vd25lcjIKICAgICkgTXVsdGlPd25hYmxlKF9vd25lcjEsIF9vd25lcjIpIHB1YmxpYyB7fQogICAgCiAgICBmdW5jdGlvbiBzZXRUb2tlbihhZGRyZXNzIF90b2tlbikgb25seVN1cGVyT3duZXIgcHVibGljIHsKICAgICAgICByZXF1aXJlKF90b2tlbiAhPSBhZGRyZXNzKDApKTsKICAgICAgICByZXF1aXJlKF90b2tlbiAhPSBhZGRyZXNzKHRva2VuKSk7CiAgICAgICAgCiAgICAgICAgQ2hhbmdlVG9rZW5FdmVudCh0b2tlbiwgX3Rva2VuKTsKICAgICAgICB0b2tlbiA9IFJhY2VUb2tlbihfdG9rZW4pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzZXRNYXhDYXBUb2tlbnModWludCBfbWF4Q2FwKSBvbmx5U3VwZXJPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX21heENhcCA+IDApOwogICAgICAgIENoYW5nZU1heENhcFRva2Vuc0V2ZW50KG1heENhcFRva2VucywgX21heENhcCk7CiAgICAgICAgbWF4Q2FwVG9rZW5zID0gX21heENhcDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0VG9rZW5QcmljZSh1aW50IF90b2tlblByaWNlKSBvbmx5U3VwZXJPd25lciBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoX3Rva2VuUHJpY2UgPiAwKTsKICAgICAgICBDaGFuZ2VUb2tlblByaWNlRXZlbnQodG9rZW5zUGVyV2VpLCBfdG9rZW5QcmljZSk7CiAgICAgICAgdG9rZW5zUGVyV2VpID0gX3Rva2VuUHJpY2U7CiAgICB9CgogICAgLyoqIFRoZSBmYWxsYmFjayBmdW5jdGlvbiBjb3JyZXNwb25kcyB0byBhIGRvbmF0aW9uIGluIEVUSC4gKi8KICAgIGZ1bmN0aW9uKCkgcHVibGljIHBheWFibGUgewogICAgICAgIHNlbGxUb2tlbnNGb3JFdGgobXNnLnNlbmRlciwgbXNnLnZhbHVlKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2VsbFRva2Vuc0ZvckV0aCgKICAgICAgICBhZGRyZXNzIF9idXllciwgCiAgICAgICAgdWludDI1NiBfYW1vdW50V2VpCiAgICApIGlmTm90UGF1c2VkIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICAKICAgICAgICByZXF1aXJlKF9hbW91bnRXZWkgPj0gbWluUGF5bWVudFdlaSk7CgogICAgICAgIHVpbnQgdG9rZW5zRTE4ID0gd2VpVG9Ub2tlbnMoX2Ftb3VudFdlaSk7CiAgICAgICAgcmVxdWlyZSh0b3RhbFRva2Vuc1NvbGQuYWRkKHRva2Vuc0UxOCkgPD0gbWF4Q2FwVG9rZW5zKTsKICAgICAgICAKICAgICAgICAvLyBUcmFuc2ZlciB0b2tlbnMgdG8gYnV5ZXIuCiAgICAgICAgcmVxdWlyZSh0b2tlbi5zZWxsKF9idXllciwgdG9rZW5zRTE4KSk7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIHRvdGFsIHN0YXRzOgogICAgICAgIHRvdGFsVG9rZW5zU29sZCA9IHRvdGFsVG9rZW5zU29sZC5hZGQodG9rZW5zRTE4KTsKICAgICAgICB0b3RhbFdlaVJlY2VpdmVkID0gdG90YWxXZWlSZWNlaXZlZC5hZGQoX2Ftb3VudFdlaSk7CiAgICAgICAgaXNCdXllcltfYnV5ZXJdID0gdHJ1ZTsKICAgICAgICBSZWNlaXZlRXRoRXZlbnQoX2J1eWVyLCBfYW1vdW50V2VpKTsKICAgICAgICAKICAgICAgICB1aW50IGhhbGYgPSBfYW1vdW50V2VpIC8gMjsKICAgICAgICBiYWxhbmNlMSA9IGJhbGFuY2UxLmFkZChoYWxmKTsKICAgICAgICBiYWxhbmNlMiA9IGJhbGFuY2UyLmFkZChfYW1vdW50V2VpIC0gaGFsZik7CiAgICB9CiAgICAKICAgIC8qKiBDYWxjIGhvdyBtdWNoIHRva2VucyB5b3UgY2FuIGJ1eSBhdCBjdXJyZW50IHRpbWUuICovCiAgICBmdW5jdGlvbiB3ZWlUb1Rva2Vucyh1aW50IF9hbW91bnRXZWkpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gX2Ftb3VudFdlaS5tdWwodG9rZW5zUGVyV2VpKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3aXRoZHJhdzEoYWRkcmVzcyBfdG8pIG9ubHlTdXBlck93bmVyMSBwdWJsaWMgewogICAgICAgIGlmIChiYWxhbmNlMSA+IDApIF90by50cmFuc2ZlcihiYWxhbmNlMSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHdpdGhkcmF3MihhZGRyZXNzIF90bykgb25seVN1cGVyT3duZXIyIHB1YmxpYyB7CiAgICAgICAgaWYgKGJhbGFuY2UyID4gMCkgX3RvLnRyYW5zZmVyKGJhbGFuY2UyKTsKICAgIH0KfQoKY29udHJhY3QgVG9rZW5zYWxlIGlzIENvbW1vblRva2Vuc2FsZSB7CiAgICAKICAgIGZ1bmN0aW9uIFRva2Vuc2FsZSgpIENvbW1vblRva2Vuc2FsZSgKICAgICAgICAweDIyOUI5RWY4MEQyNUE3ZTc2NDhiMTdlMmM1OTg4MDVkMDQyZjllNTYsIC8vIF9fT1dORVIxX18KICAgICAgICAweGNkN2NGMUQ2MTNENTk3NDg3NkFmQmZkNjEyRUQ2QUZkOTQwOTNjZTcgIC8vIF9fT1dORVIyX18KICAgICkgcHVibGljIHt9Cn0='.
	

]
