Class {
	#name : #SRT3acce1678985013da47d44423166b206ec967e31,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT3acce1678985013da47d44423166b206ec967e31 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuOTsKCmNvbnRyYWN0IFNhZmVNYXRoIHsKICBmdW5jdGlvbiBzYWZlTXVsKHVpbnQgYSwgdWludCBiKSBpbnRlcm5hbCByZXR1cm5zICh1aW50KSB7CiAgICB1aW50IGMgPSBhICogYjsKICAgIGFzc2VydChhID09IDAgfHwgYyAvIGEgPT0gYik7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHNhZmVTdWIodWludCBhLCB1aW50IGIpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsKICAgIGFzc2VydChiIDw9IGEpOwogICAgcmV0dXJuIGEgLSBiOwogIH0KCiAgZnVuY3Rpb24gc2FmZUFkZCh1aW50IGEsIHVpbnQgYikgaW50ZXJuYWwgcmV0dXJucyAodWludCkgewogICAgdWludCBjID0gYSArIGI7CiAgICBhc3NlcnQoYz49YSAmJiBjPj1iKTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24gYXNzZXJ0KGJvb2wgYXNzZXJ0aW9uKSBpbnRlcm5hbCB7CiAgICByZXF1aXJlKGFzc2VydGlvbik7CiAgfQp9CgppbnRlcmZhY2UgVG9rZW4gewogIC8vLyBAcmV0dXJuIHRvdGFsIGFtb3VudCBvZiB0b2tlbnMKICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgc3VwcGx5KTsKCiAgLy8vIEBwYXJhbSBfb3duZXIgVGhlIGFkZHJlc3MgZnJvbSB3aGljaCB0aGUgYmFsYW5jZSB3aWxsIGJlIHJldHJpZXZlZAogIC8vLyBAcmV0dXJuIFRoZSBiYWxhbmNlCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwoKICAvLy8gQG5vdGljZSBzZW5kIGBfdmFsdWVgIHRva2VuIHRvIGBfdG9gIGZyb20gYG1zZy5zZW5kZXJgCiAgLy8vIEBwYXJhbSBfdG8gVGhlIGFkZHJlc3Mgb2YgdGhlIHJlY2lwaWVudAogIC8vLyBAcGFyYW0gX3ZhbHVlIFRoZSBhbW91bnQgb2YgdG9rZW4gdG8gYmUgdHJhbnNmZXJyZWQKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSB0cmFuc2ZlciB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2Vzcyk7CgogIC8vLyBAbm90aWNlIHNlbmQgYF92YWx1ZWAgdG9rZW4gdG8gYF90b2AgZnJvbSBgX2Zyb21gIG9uIHRoZSBjb25kaXRpb24gaXQgaXMgYXBwcm92ZWQgYnkgYF9mcm9tYAogIC8vLyBAcGFyYW0gX2Zyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogIC8vLyBAcGFyYW0gX3RvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgLy8vIEByZXR1cm4gV2hldGhlciB0aGUgdHJhbnNmZXIgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CiAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgX2Zyb20sIGFkZHJlc3MgX3RvLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKTsKCiAgLy8vIEBub3RpY2UgYG1zZy5zZW5kZXJgIGFwcHJvdmVzIGBfYWRkcmAgdG8gc3BlbmQgYF92YWx1ZWAgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHBhcmFtIF92YWx1ZSBUaGUgYW1vdW50IG9mIHdlaSB0byBiZSBhcHByb3ZlZCBmb3IgdHJhbnNmZXIKICAvLy8gQHJldHVybiBXaGV0aGVyIHRoZSBhcHByb3ZhbCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QKICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgX3NwZW5kZXIsIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpOwoKICAvLy8gQHBhcmFtIF9vd25lciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBvd25pbmcgdG9rZW5zCiAgLy8vIEBwYXJhbSBfc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCBhYmxlIHRvIHRyYW5zZmVyIHRoZSB0b2tlbnMKICAvLy8gQHJldHVybiBBbW91bnQgb2YgcmVtYWluaW5nIHRva2VucyBhbGxvd2VkIHRvIHNwZW50CiAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3MgX293bmVyLCBhZGRyZXNzIF9zcGVuZGVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IHJlbWFpbmluZyk7CgogIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBfZnJvbSwgYWRkcmVzcyBpbmRleGVkIF90bywgdWludDI1NiBfdmFsdWUpOwogIGV2ZW50IEFwcHJvdmFsKGFkZHJlc3MgaW5kZXhlZCBfb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBfc3BlbmRlciwgdWludDI1NiBfdmFsdWUpOwp9Cgpjb250cmFjdCBTdGFuZGFyZFRva2VuIGlzIFRva2VuIHsKCiAgdWludCBwdWJsaWMgZGVjaW1hbHM7CiAgc3RyaW5nIHB1YmxpYyBuYW1lOwoKICBmdW5jdGlvbiB0cmFuc2ZlcihhZGRyZXNzIF90bywgdWludDI1NiBfdmFsdWUpIHJldHVybnMgKGJvb2wgc3VjY2VzcykgewogICAgLy9EZWZhdWx0IGFzc3VtZXMgdG90YWxTdXBwbHkgY2FuJ3QgYmUgb3ZlciBtYXggKDJeMjU2IC0gMSkuCiAgICAvL0lmIHlvdXIgdG9rZW4gbGVhdmVzIG91dCB0b3RhbFN1cHBseSBhbmQgY2FuIGlzc3VlIG1vcmUgdG9rZW5zIGFzIHRpbWUgZ29lcyBvbiwgeW91IG5lZWQgdG8gY2hlY2sgaWYgaXQgZG9lc24ndCB3cmFwLgogICAgLy9SZXBsYWNlIHRoZSBpZiB3aXRoIHRoaXMgb25lIGluc3RlYWQuCiAgICBpZiAoYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gX3ZhbHVlICYmIGJhbGFuY2VzW190b10gKyBfdmFsdWUgPiBiYWxhbmNlc1tfdG9dKSB7CiAgICAvL2lmIChiYWxhbmNlc1ttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSAtPSBfdmFsdWU7CiAgICAgIGJhbGFuY2VzW190b10gKz0gX3ZhbHVlOwogICAgICBUcmFuc2Zlcihtc2cuc2VuZGVyLCBfdG8sIF92YWx1ZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9CiAgfQoKICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBfZnJvbSwgYWRkcmVzcyBfdG8sIHVpbnQyNTYgX3ZhbHVlKSByZXR1cm5zIChib29sIHN1Y2Nlc3MpIHsKICAgIC8vc2FtZSBhcyBhYm92ZS4gUmVwbGFjZSB0aGlzIGxpbmUgd2l0aCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIHByb3RlY3QgYWdhaW5zdCB3cmFwcGluZyB1aW50cy4KICAgIGlmIChiYWxhbmNlc1tfZnJvbV0gPj0gX3ZhbHVlICYmIGFsbG93ZWRbX2Zyb21dW21zZy5zZW5kZXJdID49IF92YWx1ZSAmJiBiYWxhbmNlc1tfdG9dICsgX3ZhbHVlID4gYmFsYW5jZXNbX3RvXSkgewogICAgLy9pZiAoYmFsYW5jZXNbX2Zyb21dID49IF92YWx1ZSAmJiBhbGxvd2VkW19mcm9tXVttc2cuc2VuZGVyXSA+PSBfdmFsdWUgJiYgX3ZhbHVlID4gMCkgewogICAgICBiYWxhbmNlc1tfdG9dICs9IF92YWx1ZTsKICAgICAgYmFsYW5jZXNbX2Zyb21dIC09IF92YWx1ZTsKICAgICAgYWxsb3dlZFtfZnJvbV1bbXNnLnNlbmRlcl0gLT0gX3ZhbHVlOwogICAgICBUcmFuc2ZlcihfZnJvbSwgX3RvLCBfdmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgX293bmVyKSBjb25zdGFudCByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpIHsKICAgIHJldHVybiBiYWxhbmNlc1tfb3duZXJdOwogIH0KCiAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIF9zcGVuZGVyLCB1aW50MjU2IF92YWx1ZSkgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICBhbGxvd2VkW21zZy5zZW5kZXJdW19zcGVuZGVyXSA9IF92YWx1ZTsKICAgIEFwcHJvdmFsKG1zZy5zZW5kZXIsIF9zcGVuZGVyLCBfdmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3MgX3NwZW5kZXIpIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYgcmVtYWluaW5nKSB7CiAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW19zcGVuZGVyXTsKICB9CgogIG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSBiYWxhbmNlczsKCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBhbGxvd2VkOwoKICB1aW50MjU2IHB1YmxpYyB0b3RhbFN1cHBseTsKfQoKY29udHJhY3QgUmVzZXJ2ZVRva2VuIGlzIFN0YW5kYXJkVG9rZW4sIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBtaW50ZXI7CiAgZnVuY3Rpb24gUmVzZXJ2ZVRva2VuKCkgewogICAgbWludGVyID0gbXNnLnNlbmRlcjsKICB9CiAgZnVuY3Rpb24gY3JlYXRlKGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlQWRkKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlQWRkKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KICBmdW5jdGlvbiBkZXN0cm95KGFkZHJlc3MgYWNjb3VudCwgdWludCBhbW91bnQpIHsKICAgIHJlcXVpcmUobXNnLnNlbmRlciA9PSBtaW50ZXIpOwogICAgcmVxdWlyZShiYWxhbmNlc1thY2NvdW50XSA+PSBhbW91bnQpOwogICAgYmFsYW5jZXNbYWNjb3VudF0gPSBzYWZlU3ViKGJhbGFuY2VzW2FjY291bnRdLCBhbW91bnQpOwogICAgdG90YWxTdXBwbHkgPSBzYWZlU3ViKHRvdGFsU3VwcGx5LCBhbW91bnQpOwogIH0KfQoKaW50ZXJmYWNlIEFjY291bnRMZXZlbHMgewogIC8vZ2l2ZW4gYSB1c2VyLCByZXR1cm5zIGFuIGFjY291bnQgbGV2ZWwKICAvLzAgPSByZWd1bGFyIHVzZXIgKHBheXMgdGFrZSBmZWUgYW5kIG1ha2UgZmVlKQogIC8vMSA9IG1hcmtldCBtYWtlciBzaWx2ZXIgKHBheXMgdGFrZSBmZWUsIG5vIG1ha2UgZmVlLCBnZXRzIHJlYmF0ZSkKICAvLzIgPSBtYXJrZXQgbWFrZXIgZ29sZCAocGF5cyB0YWtlIGZlZSwgbm8gbWFrZSBmZWUsIGdldHMgZW50aXJlIGNvdW50ZXJwYXJ0eSdzIHRha2UgZmVlIGFzIHJlYmF0ZSkKICBmdW5jdGlvbiBhY2NvdW50TGV2ZWwoYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpOwp9Cgpjb250cmFjdCBBY2NvdW50TGV2ZWxzVGVzdCBpcyBBY2NvdW50TGV2ZWxzIHsKICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBhY2NvdW50TGV2ZWxzOwoKICBmdW5jdGlvbiBzZXRBY2NvdW50TGV2ZWwoYWRkcmVzcyB1c2VyLCB1aW50IGxldmVsKSB7CiAgICBhY2NvdW50TGV2ZWxzW3VzZXJdID0gbGV2ZWw7CiAgfQoKICBmdW5jdGlvbiBhY2NvdW50TGV2ZWwoYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIHJldHVybiBhY2NvdW50TGV2ZWxzW3VzZXJdOwogIH0KfQoKY29udHJhY3QgQWRleENvbnRyYWN0IGlzIFNhZmVNYXRoIHsKICBhZGRyZXNzIHB1YmxpYyBhZG1pbjsgLy90aGUgYWRtaW4gYWRkcmVzcwogIGFkZHJlc3MgcHVibGljIGZlZUFjY291bnQ7IC8vdGhlIGFjY291bnQgdGhhdCB3aWxsIHJlY2VpdmUgZmVlcwogIGFkZHJlc3MgcHVibGljIGFjY291bnRMZXZlbHNBZGRyOyAvL3RoZSBhZGRyZXNzIG9mIHRoZSBBY2NvdW50TGV2ZWxzIGNvbnRyYWN0CiAgdWludCBwdWJsaWMgZmVlTWFrZTsgLy9wZXJjZW50YWdlIHRpbWVzICgxIGV0aGVyKQogIHVpbnQgcHVibGljIGZlZVRha2U7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICB1aW50IHB1YmxpYyBmZWVSZWJhdGU7IC8vcGVyY2VudGFnZSB0aW1lcyAoMSBldGhlcikKICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludCkpIHB1YmxpYyB0b2tlbnM7IC8vbWFwcGluZyBvZiB0b2tlbiBhZGRyZXNzZXMgdG8gbWFwcGluZyBvZiBhY2NvdW50IGJhbGFuY2VzICh0b2tlbj0wIG1lYW5zIEV0aGVyKQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gbWFwcGluZyAoYnl0ZXMzMiA9PiBib29sKSkgcHVibGljIG9yZGVyczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gYm9vbGVhbnMgKHRydWUgPSBzdWJtaXR0ZWQgYnkgdXNlciwgZXF1aXZhbGVudCB0byBvZmZjaGFpbiBzaWduYXR1cmUpCiAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChieXRlczMyID0+IHVpbnQpKSBwdWJsaWMgb3JkZXJGaWxsczsgLy9tYXBwaW5nIG9mIHVzZXIgYWNjb3VudHMgdG8gbWFwcGluZyBvZiBvcmRlciBoYXNoZXMgdG8gdWludHMgKGFtb3VudCBvZiBvcmRlciB0aGF0IGhhcyBiZWVuIGZpbGxlZCkKCiAgZXZlbnQgT3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyKTsKICBldmVudCBDYW5jZWwoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyLCB1aW50OCB2LCBieXRlczMyIHIsIGJ5dGVzMzIgcyk7CiAgZXZlbnQgVHJhZGUoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIGFkZHJlc3MgZ2V0LCBhZGRyZXNzIGdpdmUpOwogIGV2ZW50IERlcG9zaXQoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCwgdWludCBiYWxhbmNlKTsKICBldmVudCBXaXRoZHJhdyhhZGRyZXNzIHRva2VuLCBhZGRyZXNzIHVzZXIsIHVpbnQgYW1vdW50LCB1aW50IGJhbGFuY2UpOwoKICBmdW5jdGlvbiBBZGV4Q29udHJhY3QoYWRkcmVzcyBhZG1pbl8sIGFkZHJlc3MgZmVlQWNjb3VudF8sIGFkZHJlc3MgYWNjb3VudExldmVsc0FkZHJfLCB1aW50IGZlZU1ha2VfLCB1aW50IGZlZVRha2VfLCB1aW50IGZlZVJlYmF0ZV8pIHsKICAgIGFkbWluID0gYWRtaW5fOwogICAgZmVlQWNjb3VudCA9IGZlZUFjY291bnRfOwogICAgYWNjb3VudExldmVsc0FkZHIgPSBhY2NvdW50TGV2ZWxzQWRkcl87CiAgICBmZWVNYWtlID0gZmVlTWFrZV87CiAgICBmZWVUYWtlID0gZmVlVGFrZV87CiAgICBmZWVSZWJhdGUgPSBmZWVSZWJhdGVfOwogIH0KCiAgZnVuY3Rpb24oKSB7CiAgICByZXZlcnQoKTsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUFkbWluKGFkZHJlc3MgYWRtaW5fKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgYWRtaW4gPSBhZG1pbl87CiAgfQoKICBmdW5jdGlvbiBjaGFuZ2VBY2NvdW50TGV2ZWxzQWRkcihhZGRyZXNzIGFjY291bnRMZXZlbHNBZGRyXykgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgIGFjY291bnRMZXZlbHNBZGRyID0gYWNjb3VudExldmVsc0FkZHJfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlQWNjb3VudChhZGRyZXNzIGZlZUFjY291bnRfKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgZmVlQWNjb3VudCA9IGZlZUFjY291bnRfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlTWFrZSh1aW50IGZlZU1ha2VfKSB7CiAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gYWRtaW4pOwogICAgcmVxdWlyZShmZWVNYWtlXyA8PSBmZWVNYWtlKTsKICAgIGZlZU1ha2UgPSBmZWVNYWtlXzsKICB9CgogIGZ1bmN0aW9uIGNoYW5nZUZlZVRha2UodWludCBmZWVUYWtlXykgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgIHJlcXVpcmUoZmVlVGFrZV8gPD0gZmVlVGFrZSAmJiBmZWVUYWtlXyA+PSBmZWVSZWJhdGUpOwogICAgZmVlVGFrZSA9IGZlZVRha2VfOwogIH0KCiAgZnVuY3Rpb24gY2hhbmdlRmVlUmViYXRlKHVpbnQgZmVlUmViYXRlXykgewogICAgcmVxdWlyZShtc2cuc2VuZGVyID09IGFkbWluKTsKICAgIHJlcXVpcmUoZmVlUmViYXRlXyA+PSBmZWVSZWJhdGUgJiYgZmVlUmViYXRlXyA8PSBmZWVUYWtlKTsKICAgIGZlZVJlYmF0ZSA9IGZlZVJlYmF0ZV87CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0KCkgcGF5YWJsZSB7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgbXNnLnZhbHVlKTsKICAgIERlcG9zaXQoMCwgbXNnLnNlbmRlciwgbXNnLnZhbHVlLCB0b2tlbnNbMF1bbXNnLnNlbmRlcl0pOwogIH0KCiAgZnVuY3Rpb24gd2l0aGRyYXcodWludCBhbW91bnQpIHsKICAgIHJlcXVpcmUodG9rZW5zWzBdW21zZy5zZW5kZXJdID49IGFtb3VudCk7CiAgICB0b2tlbnNbMF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1swXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIHJlcXVpcmUobXNnLnNlbmRlci5jYWxsLnZhbHVlKGFtb3VudCkoKSk7CiAgICBXaXRoZHJhdygwLCBtc2cuc2VuZGVyLCBhbW91bnQsIHRva2Vuc1swXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBkZXBvc2l0VG9rZW4oYWRkcmVzcyB0b2tlbiwgdWludCBhbW91bnQpIHsKICAgIC8vcmVtZW1iZXIgdG8gY2FsbCBUb2tlbihhZGRyZXNzKS5hcHByb3ZlKHRoaXMsIGFtb3VudCkgb3IgdGhpcyBjb250cmFjdCB3aWxsIG5vdCBiZSBhYmxlIHRvIGRvIHRoZSB0cmFuc2ZlciBvbiB5b3VyIGJlaGFsZi4KICAgIHJlcXVpcmUodG9rZW4hPTApOwogICAgcmVxdWlyZShUb2tlbih0b2tlbikudHJhbnNmZXJGcm9tKG1zZy5zZW5kZXIsIHRoaXMsIGFtb3VudCkpOwogICAgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIERlcG9zaXQodG9rZW4sIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiB3aXRoZHJhd1Rva2VuKGFkZHJlc3MgdG9rZW4sIHVpbnQgYW1vdW50KSB7CiAgICByZXF1aXJlKHRva2VuIT0wKTsKICAgIHJlcXVpcmUodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA+PSBhbW91bnQpOwogICAgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSA9IHNhZmVTdWIodG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSwgYW1vdW50KTsKICAgIHJlcXVpcmUoVG9rZW4odG9rZW4pLnRyYW5zZmVyKG1zZy5zZW5kZXIsIGFtb3VudCkpOwogICAgV2l0aGRyYXcodG9rZW4sIG1zZy5zZW5kZXIsIGFtb3VudCwgdG9rZW5zW3Rva2VuXVttc2cuc2VuZGVyXSk7CiAgfQoKICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyB0b2tlbiwgYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zICh1aW50KSB7CiAgICByZXR1cm4gdG9rZW5zW3Rva2VuXVt1c2VyXTsKICB9CgogIGZ1bmN0aW9uIG9yZGVyKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIG9yZGVyc1ttc2cuc2VuZGVyXVtoYXNoXSA9IHRydWU7CiAgICBPcmRlcih0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlLCBtc2cuc2VuZGVyKTsKICB9CgogIGZ1bmN0aW9uIHRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQgYW1vdW50KSB7CiAgICAvL2Ftb3VudCBpcyBpbiBhbW91bnRHZXQgdGVybXMKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIHJlcXVpcmUoCiAgICAgIChvcmRlcnNbdXNlcl1baGFzaF0gfHwgZWNyZWNvdmVyKHNoYTMoIlx4MTlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbjMyIiwgaGFzaCksdixyLHMpID09IHVzZXIpICYmCiAgICAgIGJsb2NrLm51bWJlciA8PSBleHBpcmVzICYmCiAgICAgIHNhZmVBZGQob3JkZXJGaWxsc1t1c2VyXVtoYXNoXSwgYW1vdW50KSA8PSBhbW91bnRHZXQKICAgICk7CiAgICB0cmFkZUJhbGFuY2VzKHRva2VuR2V0LCBhbW91bnRHZXQsIHRva2VuR2l2ZSwgYW1vdW50R2l2ZSwgdXNlciwgYW1vdW50KTsKICAgIG9yZGVyRmlsbHNbdXNlcl1baGFzaF0gPSBzYWZlQWRkKG9yZGVyRmlsbHNbdXNlcl1baGFzaF0sIGFtb3VudCk7CiAgICBUcmFkZSh0b2tlbkdldCwgYW1vdW50LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUgKiBhbW91bnQgLyBhbW91bnRHZXQsIHVzZXIsIG1zZy5zZW5kZXIpOwogIH0KCiAgZnVuY3Rpb24gdHJhZGVCYWxhbmNlcyhhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgYWRkcmVzcyB1c2VyLCB1aW50IGFtb3VudCkgcHJpdmF0ZSB7CiAgICB1aW50IGZlZU1ha2VYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZU1ha2UpIC8gKDEgZXRoZXIpOwogICAgdWludCBmZWVUYWtlWGZlciA9IHNhZmVNdWwoYW1vdW50LCBmZWVUYWtlKSAvICgxIGV0aGVyKTsKICAgIHVpbnQgZmVlUmViYXRlWGZlciA9IDA7CiAgICBpZiAoYWNjb3VudExldmVsc0FkZHIgIT0gMHgwKSB7CiAgICAgIHVpbnQgYWNjb3VudExldmVsID0gQWNjb3VudExldmVscyhhY2NvdW50TGV2ZWxzQWRkcikuYWNjb3VudExldmVsKHVzZXIpOwogICAgICBpZiAoYWNjb3VudExldmVsPT0xKSBmZWVSZWJhdGVYZmVyID0gc2FmZU11bChhbW91bnQsIGZlZVJlYmF0ZSkgLyAoMSBldGhlcik7CiAgICAgIGlmIChhY2NvdW50TGV2ZWw9PTIpIGZlZVJlYmF0ZVhmZXIgPSBmZWVUYWtlWGZlcjsKICAgIH0KICAgIHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdldF1bbXNnLnNlbmRlcl0sIHNhZmVBZGQoYW1vdW50LCBmZWVUYWtlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2V0XVt1c2VyXSA9IHNhZmVBZGQodG9rZW5zW3Rva2VuR2V0XVt1c2VyXSwgc2FmZVN1YihzYWZlQWRkKGFtb3VudCwgZmVlUmViYXRlWGZlciksIGZlZU1ha2VYZmVyKSk7CiAgICB0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdID0gc2FmZUFkZCh0b2tlbnNbdG9rZW5HZXRdW2ZlZUFjY291bnRdLCBzYWZlU3ViKHNhZmVBZGQoZmVlTWFrZVhmZXIsIGZlZVRha2VYZmVyKSwgZmVlUmViYXRlWGZlcikpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bdXNlcl0gPSBzYWZlU3ViKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogICAgdG9rZW5zW3Rva2VuR2l2ZV1bbXNnLnNlbmRlcl0gPSBzYWZlQWRkKHRva2Vuc1t0b2tlbkdpdmVdW21zZy5zZW5kZXJdLCBzYWZlTXVsKGFtb3VudEdpdmUsIGFtb3VudCkgLyBhbW91bnRHZXQpOwogIH0KCiAgZnVuY3Rpb24gdGVzdFRyYWRlKGFkZHJlc3MgdG9rZW5HZXQsIHVpbnQgYW1vdW50R2V0LCBhZGRyZXNzIHRva2VuR2l2ZSwgdWludCBhbW91bnRHaXZlLCB1aW50IGV4cGlyZXMsIHVpbnQgbm9uY2UsIGFkZHJlc3MgdXNlciwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMsIHVpbnQgYW1vdW50LCBhZGRyZXNzIHNlbmRlcikgY29uc3RhbnQgcmV0dXJucyhib29sKSB7CiAgICBpZiAoISgKICAgICAgdG9rZW5zW3Rva2VuR2V0XVtzZW5kZXJdID49IGFtb3VudCAmJgogICAgICBhdmFpbGFibGVWb2x1bWUodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgdXNlciwgdiwgciwgcykgPj0gYW1vdW50CiAgICApKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGF2YWlsYWJsZVZvbHVtZShhZGRyZXNzIHRva2VuR2V0LCB1aW50IGFtb3VudEdldCwgYWRkcmVzcyB0b2tlbkdpdmUsIHVpbnQgYW1vdW50R2l2ZSwgdWludCBleHBpcmVzLCB1aW50IG5vbmNlLCBhZGRyZXNzIHVzZXIsIHVpbnQ4IHYsIGJ5dGVzMzIgciwgYnl0ZXMzMiBzKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIGlmICghKAogICAgICAob3JkZXJzW3VzZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSB1c2VyKSAmJgogICAgICBibG9jay5udW1iZXIgPD0gZXhwaXJlcwogICAgKSkgcmV0dXJuIDA7CiAgICB1aW50IGF2YWlsYWJsZTEgPSBzYWZlU3ViKGFtb3VudEdldCwgb3JkZXJGaWxsc1t1c2VyXVtoYXNoXSk7CiAgICB1aW50IGF2YWlsYWJsZTIgPSBzYWZlTXVsKHRva2Vuc1t0b2tlbkdpdmVdW3VzZXJdLCBhbW91bnRHZXQpIC8gYW1vdW50R2l2ZTsKICAgIGlmIChhdmFpbGFibGUxPGF2YWlsYWJsZTIpIHJldHVybiBhdmFpbGFibGUxOwogICAgcmV0dXJuIGF2YWlsYWJsZTI7CiAgfQoKICBmdW5jdGlvbiBhbW91bnRGaWxsZWQoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgYWRkcmVzcyB1c2VyKSBjb25zdGFudCByZXR1cm5zKHVpbnQpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIHJldHVybiBvcmRlckZpbGxzW3VzZXJdW2hhc2hdOwogIH0KCiAgZnVuY3Rpb24gY2FuY2VsT3JkZXIoYWRkcmVzcyB0b2tlbkdldCwgdWludCBhbW91bnRHZXQsIGFkZHJlc3MgdG9rZW5HaXZlLCB1aW50IGFtb3VudEdpdmUsIHVpbnQgZXhwaXJlcywgdWludCBub25jZSwgdWludDggdiwgYnl0ZXMzMiByLCBieXRlczMyIHMpIHsKICAgIGJ5dGVzMzIgaGFzaCA9IHNoYTI1Nih0aGlzLCB0b2tlbkdldCwgYW1vdW50R2V0LCB0b2tlbkdpdmUsIGFtb3VudEdpdmUsIGV4cGlyZXMsIG5vbmNlKTsKICAgIHJlcXVpcmUob3JkZXJzW21zZy5zZW5kZXJdW2hhc2hdIHx8IGVjcmVjb3ZlcihzaGEzKCJceDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XG4zMiIsIGhhc2gpLHYscixzKSA9PSBtc2cuc2VuZGVyKTsKICAgIG9yZGVyRmlsbHNbbXNnLnNlbmRlcl1baGFzaF0gPSBhbW91bnRHZXQ7CiAgICBDYW5jZWwodG9rZW5HZXQsIGFtb3VudEdldCwgdG9rZW5HaXZlLCBhbW91bnRHaXZlLCBleHBpcmVzLCBub25jZSwgbXNnLnNlbmRlciwgdiwgciwgcyk7CiAgfQp9'.
	

]
