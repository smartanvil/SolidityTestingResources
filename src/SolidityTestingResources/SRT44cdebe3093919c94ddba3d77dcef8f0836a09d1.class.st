Class {
	#name : #SRT44cdebe3093919c94ddba3d77dcef8f0836a09d1,
	#superclass : #SRTContracts,
	#category : #SolidityTestingResources
}

{ #category : #base64 }
SRT44cdebe3093919c94ddba3d77dcef8f0836a09d1 >> base64 [
	^ 'cHJhZ21hIHNvbGlkaXR5IF4wLjQuMTg7CgpsaWJyYXJ5IFNhZmVNYXRoIHsKICAgIGZ1bmN0aW9uIG11bCh1aW50MjU2IGEsIHVpbnQyNTYgYikgaW50ZXJuYWwgcHVyZSByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgdWludDI1NiBjID0gYSAqIGI7CiAgICAgICAgYXNzZXJ0KGEgPT0gMCB8fCBjIC8gYSA9PSBiKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBkaXYodWludDI1NiBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAodWludDI1NikgewogICAgICAgIC8vIGFzc2VydChiID4gMCk7IC8vIFNvbGlkaXR5IGF1dG9tYXRpY2FsbHkgdGhyb3dzIHdoZW4gZGl2aWRpbmcgYnkgMAogICAgICAgIHVpbnQyNTYgYyA9IGEgLyBiOwogICAgICAgIC8vIGFzc2VydChhID09IGIgKiBjICsgYSAlIGIpOyAvLyBUaGVyZSBpcyBubyBjYXNlIGluIHdoaWNoIHRoaXMgZG9lc24ndCBob2xkCiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgZnVuY3Rpb24gc3ViKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICBhc3NlcnQoYiA8PSBhKTsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkKHVpbnQyNTYgYSwgdWludDI1NiBiKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICB1aW50MjU2IGMgPSBhICsgYjsKICAgICAgICBhc3NlcnQoYyA+PSBhKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KfQoKY29udHJhY3QgSUVSQzIwIHsKCiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfdG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYzsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IHZhbHVlKSBwdWJsaWM7CiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyh1aW50MjU2KTsKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7Cn0KY29udHJhY3QgU3RhbmRhcmRUb2tlbiBpcyBJRVJDMjB7CiAgICB1c2luZyBTYWZlTWF0aCBmb3IgdWludDI1NjsKICAgIC8vIEJhbGFuY2VzIGZvciBlYWNoIGFjY291bnQKICAgIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgYmFsYW5jZXM7CiAgICAvLyBPd25lciBvZiBhY2NvdW50IGFwcHJvdmVzIHRoZSB0cmFuc2ZlciBvZiBhbiBhbW91bnQgdG8gYW5vdGhlciBhY2NvdW50CiAgICBtYXBwaW5nIChhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiB1aW50MjU2KSkgYWxsb3dlZDsKCiAgICAvLyBXaGF0IGlzIHRoZSBiYWxhbmNlIG9mIGEgcGFydGljdWxhciBhY2NvdW50PwogICAgLy8gQHBhcmFtIHdobyBUaGUgYWRkcmVzcyBvZiB0aGUgcGFydGljdWxhciBhY2NvdW50CiAgICAvLyBAcmV0dXJuIHRoZSBiYWxhbmFjZSB0aGUgcGFydGljdWxhciBhY2NvdW50CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBfdG8pIHB1YmxpYyBjb25zdGFudCByZXR1cm5zICh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGJhbGFuY2VzW190b107CiAgICB9CgogICAgLy8gQG5vdGljZSBzZW5kIGB2YWx1ZWAgdG9rZW4gdG8gYHRvYCBmcm9tIGBtc2cuc2VuZGVyYAogICAgLy8gQHBhcmFtIHRvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vIEBwYXJhbSB2YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLyBAcmV0dXJuIHRoZSB0cmFuc2FjdGlvbiBhZGRyZXNzIGFuZCBzZW5kIHRoZSBldmVudCBhcyBUcmFuc2ZlcgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlICgKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gdmFsdWUgJiYgdmFsdWUgPiAwCiAgICAgICAgKTsKICAgICAgICBiYWxhbmNlc1ttc2cuc2VuZGVyXSA9IGJhbGFuY2VzW21zZy5zZW5kZXJdLnN1Yih2YWx1ZSk7CiAgICAgICAgYmFsYW5jZXNbdG9dID0gYmFsYW5jZXNbdG9dLmFkZCh2YWx1ZSk7CiAgICAgICAgVHJhbnNmZXIobXNnLnNlbmRlciwgdG8sIHZhbHVlKTsKICAgIH0KCgogICAgLy8gQG5vdGljZSBzZW5kIGB2YWx1ZWAgdG9rZW4gdG8gYHRvYCBmcm9tIGBmcm9tYAogICAgLy8gQHBhcmFtIGZyb20gVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8gQHBhcmFtIHRvIFRoZSBhZGRyZXNzIG9mIHRoZSByZWNpcGllbnQKICAgIC8vIEBwYXJhbSB2YWx1ZSBUaGUgYW1vdW50IG9mIHRva2VuIHRvIGJlIHRyYW5zZmVycmVkCiAgICAvLyBAcmV0dXJuIHRoZSB0cmFuc2FjdGlvbiBhZGRyZXNzIGFuZCBzZW5kIHRoZSBldmVudCBhcyBUcmFuc2ZlcgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB2YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlICgKICAgICAgICAgICAgYWxsb3dlZFtmcm9tXVttc2cuc2VuZGVyXSA+PSB2YWx1ZSAmJiBiYWxhbmNlc1tmcm9tXSA+PSB2YWx1ZSAmJiB2YWx1ZSA+IDAKICAgICAgICApOwogICAgICAgIGJhbGFuY2VzW2Zyb21dID0gYmFsYW5jZXNbZnJvbV0uc3ViKHZhbHVlKTsKICAgICAgICBiYWxhbmNlc1t0b10gPSBiYWxhbmNlc1t0b10uYWRkKHZhbHVlKTsKICAgICAgICBhbGxvd2VkW2Zyb21dW21zZy5zZW5kZXJdID0gYWxsb3dlZFtmcm9tXVttc2cuc2VuZGVyXS5zdWIodmFsdWUpOwogICAgICAgIFRyYW5zZmVyKGZyb20sIHRvLCB2YWx1ZSk7CiAgICB9CgogICAgLy8gQWxsb3cgc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIHlvdXIgYWNjb3VudCwgbXVsdGlwbGUgdGltZXMsIHVwIHRvIHRoZSB2YWx1ZSBhbW91bnQuCiAgICAvLyBJZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhZ2FpbiBpdCBvdmVyd3JpdGVzIHRoZSBjdXJyZW50IGFsbG93YW5jZSB3aXRoIHZhbHVlLgogICAgLy8gQHBhcmFtIHNwZW5kZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIHNlbmRlcgogICAgLy8gQHBhcmFtIHZhbHVlIFRoZSBhbW91bnQgdG8gYmUgYXBwcm92ZWQKICAgIC8vIEByZXR1cm4gdGhlIHRyYW5zYWN0aW9uIGFkZHJlc3MgYW5kIHNlbmQgdGhlIGV2ZW50IGFzIEFwcHJvdmFsCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiB2YWx1ZSkgcHVibGljIHsKICAgICAgICByZXF1aXJlICgKICAgICAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPj0gdmFsdWUgJiYgdmFsdWUgPiAwCiAgICAgICAgKTsKICAgICAgICBhbGxvd2VkW21zZy5zZW5kZXJdW3NwZW5kZXJdID0gdmFsdWU7CiAgICAgICAgQXBwcm92YWwobXNnLnNlbmRlciwgc3BlbmRlciwgdmFsdWUpOwogICAgfQoKICAgIC8vIENoZWNrIHRoZSBhbGxvd2VkIHZhbHVlIGZvciB0aGUgc3BlbmRlciB0byB3aXRoZHJhdyBmcm9tIG93bmVyCiAgICAvLyBAcGFyYW0gb3duZXIgVGhlIGFkZHJlc3Mgb2YgdGhlIG93bmVyCiAgICAvLyBAcGFyYW0gc3BlbmRlciBUaGUgYWRkcmVzcyBvZiB0aGUgc3BlbmRlcgogICAgLy8gQHJldHVybiB0aGUgYW1vdW50IHdoaWNoIHNwZW5kZXIgaXMgc3RpbGwgYWxsb3dlZCB0byB3aXRoZHJhdyBmcm9tIG93bmVyCiAgICBmdW5jdGlvbiBhbGxvd2FuY2UoYWRkcmVzcyBfb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gYWxsb3dlZFtfb3duZXJdW3NwZW5kZXJdOwogICAgfQp9CmNvbnRyYWN0IFRMQyBpcyBTdGFuZGFyZFRva2VuIHsKICAgIAogIHVzaW5nIFNhZmVNYXRoIGZvciB1aW50MjU2OwogCiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBuYW1lID0gIlRvcGxhbmNlciI7CiAgc3RyaW5nIHB1YmxpYyBjb25zdGFudCBzeW1ib2wgPSAiVExDIjsKICB1aW50MjU2IHB1YmxpYyBjb25zdGFudCBkZWNpbWFscyA9IDE4OwogIAogIHVpbnQyNTYgcHVibGljIGNvbnN0YW50IHRvdGFsU3VwcGx5ID0gNDAwMDAwMDAwZTE4OyAgCn0KCgpjb250cmFjdCBUTENNYXJrZXRDcm93ZHNhbGUgaXMgVExDIHsKICAgIAogIHVpbnQyNTYgcHVibGljIG1pbkNvbnRyaWJBbW91bnQgPSAwLjEgZXRoZXI7IC8vIDAuMSBldGhlcgogIHVpbnQyNTYgcHVibGljIHByZXNhbGVDYXAgPSAyMDAwMDAwMGUxODsgLy8gNSUKICB1aW50MjU2IHB1YmxpYyBzb2xkVG9rZW5JblByZXNhbGU7CiAgdWludDI1NiBwdWJsaWMgcHVibGljU2FsZUNhcCA9IDMyMDAwMDAwMGUxODsgLy8gODAlCiAgdWludDI1NiBwdWJsaWMgc29sZFRva2VuSW5QdWJsaWNzYWxlOwogIHVpbnQyNTYgcHVibGljIGRpc3RyaWJ1dGlvblN1cHBseSA9IDYwMDAwMDAwZTE4OyAvLyAxNSUKICB1aW50MjU2IHB1YmxpYyBzb2Z0Q2FwID0gNTAwMCBldGhlcjsKICB1aW50MjU2IHB1YmxpYyBoYXJkQ2FwID0gNjAwMDAgZXRoZXI7CiAgLy8gYW1vdW50IG9mIHJhaXNlZCBtb25leSBpbiB3ZWkKICB1aW50MjU2IHB1YmxpYyB3ZWlSYWlzZWQgPSAwOwogICAvLyBXYWxsZXQgQWRkcmVzcyBvZiBUb2tlbgogIGFkZHJlc3MgcHVibGljIG11bHRpc2lnOwogIC8vIE93bmVyIG9mIFRva2VuCiAgYWRkcmVzcyBwdWJsaWMgb3duZXI7CiAgIC8vIHN0YXJ0IGFuZCBlbmQgdGltZXN0YW1wcyB3aGVyZSBpbnZlc3RtZW50cyBhcmUgYWxsb3dlZCAoYm90aCBpbmNsdXNpdmUpCiAgdWludDI1NiBwdWJsaWMgc3RhcnRUaW1lOwogIHVpbnQyNTYgcHVibGljIGVuZFRpbWU7CiAgLy8gaG93IG1hbnkgdG9rZW4gdW5pdHMgYSBidXllciBnZXRzIHBlciB3ZWkKICB1aW50MjU2IHB1YmxpYyByYXRlID0gMzUwMCA7IC8vIDEgZXRoZXIgPSAzNTAwIFRMQwogIC8vIEhvdyBtdWNoIEVUSCBlYWNoIGFkZHJlc3MgaGFzIGludmVzdGVkIHRvIHRoaXMgcHVibGljc2FsZQogIG1hcHBpbmcgKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGludmVzdGVkQW1vdW50T2Y7CiAgLy8gSG93IG1hbnkgZGlzdGluY3QgYWRkcmVzc2VzIGhhdmUgaW52ZXN0ZWQKICB1aW50MjU2IHB1YmxpYyBpbnZlc3RvckNvdW50OwogIC8vIGZ1bmQgcmFpc2VkIGR1cmluZyBwdWJsaWMgc2FsZSAKICB1aW50MjU2IHB1YmxpYyBmdW5kUmFpc2VkRHVyaW5nUHVibGljU2FsZSA9IDA7CiAgLy8gSG93IG11Y2ggd2VpIHdlIGhhdmUgcmV0dXJuZWQgYmFjayB0byB0aGUgY29udHJhY3QgYWZ0ZXIgYSBmYWlsZWQgY3Jvd2RmdW5kLgogIHVpbnQyNTYgcHVibGljIGxvYWRlZFJlZnVuZCA9IDA7CiAgLy8gSG93IG11Y2ggd2VpIHdlIGhhdmUgZ2l2ZW4gYmFjayB0byBpbnZlc3RvcnMuCiAgdWludDI1NiBwdWJsaWMgd2VpUmVmdW5kZWQgPSAwOwoKICBlbnVtIFN0YWdlIHtQUkVTQUxFLCBQVUJMSUNTQUxFLCBTVUNDRVNTLCBGQUlMVVJFLCBSRUZVTkRJTkcsIENMT1NFRH0KICBTdGFnZSBwdWJsaWMgc3RhZ2U7CiAgZXZlbnQgVG9rZW5QdXJjaGFzZShhZGRyZXNzIGluZGV4ZWQgcHVyY2hhc2VyLCBhZGRyZXNzIGluZGV4ZWQgYmVuZWZpY2lhcnksIHVpbnQyNTYgdmFsdWUsIHVpbnQyNTYgYW1vdW50KTsKICAvLyBSZWZ1bmQgd2FzIHByb2Nlc3NlZCBmb3IgYSBjb250cmlidXRvcgogIGV2ZW50IFJlZnVuZChhZGRyZXNzIGludmVzdG9yLCB1aW50MjU2IHdlaUFtb3VudCk7CiAKCiAgZnVuY3Rpb24gVExDTWFya2V0Q3Jvd2RzYWxlKHVpbnQyNTYgX3N0YXJ0VGltZSwgdWludDI1NiBfZW5kVGltZSwgYWRkcmVzcyBfd2FsbGV0KSB7CiAgICAgICAgcmVxdWlyZSggX2VuZFRpbWUgPj0gX3N0YXJ0VGltZSAmJiBfd2FsbGV0ICE9IDB4MCk7CgogICAgICAgIHN0YXJ0VGltZSA9IF9zdGFydFRpbWU7CiAgICAgICAgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICAgIG11bHRpc2lnID0gX3dhbGxldDsKICAgICAgICBvd25lcj1tc2cuc2VuZGVyOwogICAgICAgIGJhbGFuY2VzW211bHRpc2lnXSA9IHRvdGFsU3VwcGx5OwogICAgICAgIHN0YWdlID0gU3RhZ2UuUFJFU0FMRTsKICB9CiAgCiAgZnVuY3Rpb24gYnV5VG9rZW5zKGFkZHJlc3MgYmVuZWZpY2lhcnkpIHB1YmxpYyBwYXlhYmxlIHsKICAgIHJlcXVpcmUoYmVuZWZpY2lhcnkgIT0gYWRkcmVzcygwKSk7CiAgICByZXF1aXJlKHZhbGlkUHVyY2hhc2UoKSk7CiAgICB1aW50MjU2IHdlaUFtb3VudCA9IG1zZy52YWx1ZTsKICAgIC8vIGNhbGN1bGF0ZSB0b2tlbiBhbW91bnQgdG8gYmUgY3JlYXRlZAogICAgdWludDI1NiB0b2tlbnMgPSB3ZWlBbW91bnQubXVsKHJhdGUpOwogICAgd2VpUmFpc2VkID0gd2VpUmFpc2VkLmFkZCh3ZWlBbW91bnQpOwogICAKICAgIHVpbnQyNTYgdGltZWJhc2VkQm9udXMgPSB0b2tlbnMubXVsKGdldFRpbWViYXNlZEJvbnVzUmF0ZSgpKS5kaXYoMTAwKTsKICAgIHRva2VucyA9IHRva2Vucy5hZGQodGltZWJhc2VkQm9udXMpOwogICAgZm9yd2FyZEZ1bmRzKCk7CiAgICBpZiAoc3RhZ2UgPT0gU3RhZ2UuUFJFU0FMRSkgewogICAgICAgIGFzc2VydCAoc29sZFRva2VuSW5QcmVzYWxlICsgdG9rZW5zIDw9IHByZXNhbGVDYXApOwogICAgICAgIHNvbGRUb2tlbkluUHJlc2FsZSA9IHNvbGRUb2tlbkluUHJlc2FsZS5hZGQodG9rZW5zKTsKICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0IChzb2xkVG9rZW5JblB1YmxpY3NhbGUgKyB0b2tlbnMgPD0gcHVibGljU2FsZUNhcCk7CiAgICAgICAgIGlmKGludmVzdGVkQW1vdW50T2ZbYmVuZWZpY2lhcnldID09IDApIHsKICAgICAgICAgICAvLyBBIG5ldyBpbnZlc3RvcgogICAgICAgICAgIGludmVzdG9yQ291bnQrKzsKICAgICAgICB9CiAgICAgICAgLy8gVXBkYXRlIGludmVzdG9yCiAgICAgICAgaW52ZXN0ZWRBbW91bnRPZltiZW5lZmljaWFyeV0gPSBpbnZlc3RlZEFtb3VudE9mW2JlbmVmaWNpYXJ5XS5hZGQod2VpQW1vdW50KTsKICAgICAgICBmdW5kUmFpc2VkRHVyaW5nUHVibGljU2FsZSA9IGZ1bmRSYWlzZWREdXJpbmdQdWJsaWNTYWxlLmFkZCh3ZWlBbW91bnQpOwogICAgICAgIHNvbGRUb2tlbkluUHVibGljc2FsZSA9IHNvbGRUb2tlbkluUHVibGljc2FsZS5hZGQodG9rZW5zKTsKICAgIH0KICAgIGJhbGFuY2VzW211bHRpc2lnXSA9IGJhbGFuY2VzW211bHRpc2lnXS5zdWIodG9rZW5zKTsKICAgIGJhbGFuY2VzW2JlbmVmaWNpYXJ5XSA9IGJhbGFuY2VzW2JlbmVmaWNpYXJ5XS5hZGQodG9rZW5zKTsKICAgIFRva2VuUHVyY2hhc2UobXNnLnNlbmRlciwgYmVuZWZpY2lhcnksIHdlaUFtb3VudCwgdG9rZW5zKTsKICB9CiAgICAvLyBzZW5kIGV0aGVyIHRvIHRoZSBmdW5kIGNvbGxlY3Rpb24gd2FsbGV0CiAgIC8vIG92ZXJyaWRlIHRvIGNyZWF0ZSBjdXN0b20gZnVuZCBmb3J3YXJkaW5nIG1lY2hhbmlzbXMKICAgIGZ1bmN0aW9uIGZvcndhcmRGdW5kcygpIGludGVybmFsIHsKICAgICAgICBtdWx0aXNpZy50cmFuc2Zlcihtc2cudmFsdWUpOwogICAgfQogICAgIC8vIFBheWFibGUgbWV0aG9kCiAgICAvLyBAbm90aWNlIEFueW9uZSBjYW4gYnV5IHRoZSB0b2tlbnMgb24gdG9rZW5zYWxlIGJ5IHBheWluZyBldGhlcgogICAgZnVuY3Rpb24gKCkgcHVibGljIHBheWFibGUgewogICAgICAgIGJ1eVRva2Vucyhtc2cuc2VuZGVyKTsKICAgIH0KIAogICAgLy8gbW9kaWZpZXIgdG8gYWxsb3cgb25seSBvd25lciBoYXMgZnVsbCBjb250cm9sIG9uIHRoZSBmdW5jdGlvbgogICAgbW9kaWZpZXIgb25seU93bmVyIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gb3duZXIpOwogICAgICAgIF87CiAgICB9CiAgICAgbW9kaWZpZXIgaXNSZWZ1bmRpbmcgewogICAgICAgIHJlcXVpcmUgKHN0YWdlID09IFN0YWdlLlJFRlVORElORyk7CiAgICAgICAgXzsKICAgIH0KICAgICBtb2RpZmllciBpc0ZhaWx1cmUgewogICAgICAgIHJlcXVpcmUgKHN0YWdlID09IFN0YWdlLkZBSUxVUkUpOwogICAgICAgIF87CiAgICB9CiAgICAvLyBAcmV0dXJuIHRydWUgaWYgY3Jvd2RzYWxlIGN1cnJlbnQgbG90IGV2ZW50IGhhcyBlbmRlZAogICAgZnVuY3Rpb24gaGFzRW5kZWQoKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIHJldHVybiBnZXROb3coKSA+IGVuZFRpbWU7CiAgICB9CiAgICAgLy8gQHJldHVybiAgY3VycmVudCB0aW1lCiAgICBmdW5jdGlvbiBnZXROb3coKSBwdWJsaWMgY29uc3RhbnQgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiAobm93ICogMTAwMCk7CiAgICB9CiAgIAogIC8vIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gY2FuIGJ1eSB0b2tlbnMKICBmdW5jdGlvbiB2YWxpZFB1cmNoYXNlKCkgaW50ZXJuYWwgY29uc3RhbnQgcmV0dXJucyAoYm9vbCkgewogICAgICAgIGJvb2wgd2l0aGluUGVyaW9kID0gZ2V0Tm93KCkgPj0gc3RhcnRUaW1lICYmIGdldE5vdygpIDw9IGVuZFRpbWU7CiAgICAgICAgYm9vbCBub25aZXJvUHVyY2hhc2UgPSBtc2cudmFsdWUgIT0gMDsKICAgICAgICBib29sIG1pbkNvbnRyaWJ1dGlvbiA9IG1pbkNvbnRyaWJBbW91bnQgPD0gbXNnLnZhbHVlOwogICAgICAgIHJldHVybiB3aXRoaW5QZXJpb2QgJiYgbm9uWmVyb1B1cmNoYXNlICYmIG1pbkNvbnRyaWJ1dGlvbjsKICAgIH0KICAvLyBHZXQgdGhlIHRpbWUtYmFzZWQgYm9udXMgcmF0ZQogIGZ1bmN0aW9uIGdldFRpbWViYXNlZEJvbnVzUmF0ZSgpIGludGVybmFsIGNvbnN0YW50IHJldHVybnMgKHVpbnQyNTYpIHsKICAJICB1aW50MjU2IGJvbnVzUmF0ZSA9IDA7CiAgICAgIGlmIChzdGFnZSA9PSBTdGFnZS5QUkVTQUxFKSB7CiAgICAgICAgICBib251c1JhdGUgPSA1MDsKICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVpbnQyNTYgbm93VGltZSA9IGdldE5vdygpOwogICAgICAgICAgdWludDI1NiBib251c0ZpcnN0V2VlayA9IHN0YXJ0VGltZSArICg3IGRheXMgKiAxMDAwKTsKICAgICAgICAgIHVpbnQyNTYgYm9udXNTZWNvbmRXZWVrID0gYm9udXNGaXJzdFdlZWsgKyAoNyBkYXlzICogMTAwMCk7CiAgICAgICAgICB1aW50MjU2IGJvbnVzVGhpcmRXZWVrID0gYm9udXNTZWNvbmRXZWVrICsgKDcgZGF5cyAqIDEwMDApOwogICAgICAgICAgdWludDI1NiBib251c0ZvdXJ0aFdlZWsgPSBib251c1RoaXJkV2VlayArICg3IGRheXMgKiAxMDAwKTsKICAgICAgICAgIGlmIChub3dUaW1lIDw9IGJvbnVzRmlyc3RXZWVrKSB7CiAgICAgICAgICAgICAgYm9udXNSYXRlID0gMjU7CiAgICAgICAgICB9IGVsc2UgaWYgKG5vd1RpbWUgPD0gYm9udXNTZWNvbmRXZWVrKSB7CiAgICAgICAgICAgICAgYm9udXNSYXRlID0gMjA7CiAgICAgICAgICB9IGVsc2UgaWYgKG5vd1RpbWUgPD0gYm9udXNUaGlyZFdlZWspIHsKICAgICAgICAgICAgICBib251c1JhdGUgPSAxMDsKICAgICAgICAgIH0gZWxzZSBpZiAobm93VGltZSA8PSBib251c0ZvdXJ0aFdlZWspIHsKICAgICAgICAgICAgICBib251c1JhdGUgPSA1OwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBib251c1JhdGU7CiAgfQoKICAvLyBTdGFydCBwdWJsaWMgc2FsZQogIGZ1bmN0aW9uIHN0YXJ0UHVibGljc2FsZSh1aW50MjU2IF9zdGFydFRpbWUsIHVpbnQyNTYgX2VuZFRpbWUsIHVpbnQyNTYgX3Rva2VuUHJpY2UpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICByZXF1aXJlKGhhc0VuZGVkKCkgJiYgc3RhZ2UgPT0gU3RhZ2UuUFJFU0FMRSAmJiBfZW5kVGltZSA+PSBfc3RhcnRUaW1lICYmIF90b2tlblByaWNlID4gMCk7CiAgICAgIHN0YWdlID0gU3RhZ2UuUFVCTElDU0FMRTsKICAgICAgc3RhcnRUaW1lID0gX3N0YXJ0VGltZTsKICAgICAgZW5kVGltZSA9IF9lbmRUaW1lOwogICAgICByYXRlID0gX3Rva2VuUHJpY2U7CiAgfQogIAogICAgLy8gQHJldHVybiB0cnVlIGlmIHRoZSBjcm93ZHNhbGUgaGFzIHJhaXNlZCBlbm91Z2ggbW9uZXkgdG8gYmUgc3VjY2Vzc2Z1bC4KICAgIGZ1bmN0aW9uIGlzTWF4aW11bUdvYWxSZWFjaGVkKCkgcHVibGljIGNvbnN0YW50IHJldHVybnMgKGJvb2wgcmVhY2hlZCkgewogICAgICAgIHJldHVybiB3ZWlSYWlzZWQgPj0gaGFyZENhcDsKICAgIH0KCiAgICAvLyBWYWxpZGF0ZSBhbmQgdXBkYXRlIHRoZSBjcm93ZHNhbGUgc3RhZ2UKICAgIGZ1bmN0aW9uIHVwZGF0ZUlDT1N0YXR1cygpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoaGFzRW5kZWQoKSAmJiBzdGFnZSA9PSBTdGFnZS5QVUJMSUNTQUxFKTsKICAgICAgICBpZiAoaGFzRW5kZWQoKSAmJiB3ZWlSYWlzZWQgPj0gc29mdENhcCkgewogICAgICAgICAgICBzdGFnZSA9IFN0YWdlLlNVQ0NFU1M7CiAgICAgICAgfSBlbHNlIGlmIChoYXNFbmRlZCgpKSB7CiAgICAgICAgICAgIHN0YWdlID0gU3RhZ2UuRkFJTFVSRTsKICAgICAgICB9CiAgICB9CgogICAgLy8gIEFsbG93IGxvYWQgcmVmdW5kcyBiYWNrIG9uIHRoZSBjb250cmFjdCBmb3IgdGhlIHJlZnVuZGluZy4gVGhlIHRlYW0gY2FuIHRyYW5zZmVyIHRoZSBmdW5kcyBiYWNrIG9uIHRoZSBzbWFydCBjb250cmFjdCBpbiB0aGUgY2FzZSB0aGUgbWluaW11bSBnb2FsIHdhcyBub3QgcmVhY2hlZC4KICAgIGZ1bmN0aW9uIGxvYWRSZWZ1bmQoKSBwdWJsaWMgcGF5YWJsZSBpc0ZhaWx1cmV7CiAgICAgICAgcmVxdWlyZShtc2cudmFsdWUgIT0gMCk7CiAgICAgICAgbG9hZGVkUmVmdW5kID0gbG9hZGVkUmVmdW5kLmFkZChtc2cudmFsdWUpOwogICAgICAgIGlmIChsb2FkZWRSZWZ1bmQgPD0gZnVuZFJhaXNlZER1cmluZ1B1YmxpY1NhbGUpIHsKICAgICAgICAgICAgc3RhZ2UgPSBTdGFnZS5SRUZVTkRJTkc7CiAgICAgICAgfQogICAgfQoKICAgIC8vIEludmVzdG9ycyBjYW4gY2xhaW0gcmVmdW5kLgogICAgLy8gTm90ZSB0aGF0IGFueSByZWZ1bmRzIGZyb20gaW5kaXJlY3QgYnV5ZXJzIHNob3VsZCBiZSBoYW5kbGVkIHNlcGFyYXRlbHksIGFuZCBub3QgdGhyb3VnaCB0aGlzIGNvbnRyYWN0LgogICAgZnVuY3Rpb24gcmVmdW5kKCkgcHVibGljIGlzUmVmdW5kaW5nIHsKICAgICAgICB1aW50MjU2IHdlaVZhbHVlID0gaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXTsKICAgICAgICByZXF1aXJlICh3ZWlWYWx1ZSAhPSAwKTsKCiAgICAgICAgaW52ZXN0ZWRBbW91bnRPZlttc2cuc2VuZGVyXSA9IDA7CiAgICAgICAgYmFsYW5jZXNbbXNnLnNlbmRlcl0gPSAwOwogICAgICAgIHdlaVJlZnVuZGVkID0gd2VpUmVmdW5kZWQuYWRkKHdlaVZhbHVlKTsKICAgICAgICBSZWZ1bmQobXNnLnNlbmRlciwgd2VpVmFsdWUpOwogICAgICAgIAogICAgICAgIG1zZy5zZW5kZXIudHJhbnNmZXIod2VpVmFsdWUpOwogICAgICAgIAogICAgICAgIGlmICh3ZWlSZWZ1bmRlZCA8PSBmdW5kUmFpc2VkRHVyaW5nUHVibGljU2FsZSkgewogICAgICAgICAgICBzdGFnZSA9IFN0YWdlLkNMT1NFRDsKICAgICAgICB9CiAgICB9CiAgCiAgICAvLyBTZXQvY2hhbmdlIE11bHRpLXNpZ25hdHVyZSB3YWxsZXQgYWRkcmVzcwogICAgZnVuY3Rpb24gY2hhbmdlTXVsdGlTaWduYXR1cmVXYWxsZXQgKGFkZHJlc3MgX211bHRpc2lnKXB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgbXVsdGlzaWcgPSBfbXVsdGlzaWc7CiAgICB9CiAgICAvLyBDaGFuZ2UgTWluaW11bSBjb250cmlidXRpb24KICAgIGZ1bmN0aW9uIGNoYW5nZU1pbkNvbnRyaWJ1dGlvbih1aW50MjU2IF9taW5Db250cmliQW1vdW50KXB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIG1pbkNvbnRyaWJBbW91bnQgPSBfbWluQ29udHJpYkFtb3VudDsKICAgIH0KICAgICAKICAgICAvL0NoYW5nZSBQcmVzYWxlIFB1YmxpY3NhbGUgZW5kIHRpbWUKICAgICBmdW5jdGlvbiBjaGFuZ2VFbmRUaW1lKHVpbnQyNTYgX2VuZFRpbWUpIHB1YmxpYyBvbmx5T3duZXIgewogICAgICAgIHJlcXVpcmUoZW5kVGltZSA+IHN0YXJ0VGltZSk7CiAgICAJZW5kVGltZSA9IF9lbmRUaW1lOwogICAgfQoKICAgIC8vIFRva2VuIGRpc3RyaWJ1dGlvbiB0byBGb3VuZGVyLCBLZXkgRW1wbG95ZWUgQWxsb2NhdGlvbgogICAgLy8gX2ZvdW5kZXJBbmRUZWFtQ2FwID0gMTAwMDAwMDBlMTg7IDEwJQogICAgIGZ1bmN0aW9uIHNlbmRGb3VuZGVyQW5kVGVhbVRva2VuKGFkZHJlc3MgdG8sIHVpbnQyNTYgdmFsdWUpIHB1YmxpYyBvbmx5T3duZXJ7CiAgICAgICAgIHJlcXVpcmUgKAogICAgICAgICAgICAgdG8gIT0gMHgwICYmIHZhbHVlID4gMCAmJiBkaXN0cmlidXRpb25TdXBwbHkgPj0gdmFsdWUKICAgICAgICAgKTsKICAgICAgICAgYmFsYW5jZXNbbXVsdGlzaWddID0gYmFsYW5jZXNbbXVsdGlzaWddLnN1Yih2YWx1ZSk7CiAgICAgICAgIGJhbGFuY2VzW3RvXSA9IGJhbGFuY2VzW3RvXS5hZGQodmFsdWUpOwogICAgICAgICBkaXN0cmlidXRpb25TdXBwbHkgPSBkaXN0cmlidXRpb25TdXBwbHkuc3ViKHZhbHVlKTsKICAgICAgICAgVHJhbnNmZXIobXVsdGlzaWcsIHRvLCB2YWx1ZSk7CiAgICAgfQp9'.
	

]
